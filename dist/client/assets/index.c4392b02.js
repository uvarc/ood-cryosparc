var z=Object.defineProperty,K=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var D=(e,s,t)=>s in e?z(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,d=(e,s)=>{for(var t in s||(s={}))P.call(s,t)&&D(e,t,s[t]);if(_)for(var t of _(s))F.call(s,t)&&D(e,t,s[t]);return e},n=(e,s)=>K(e,M(s));var f=e=>typeof e=="symbol"?e:e+"",A=(e,s)=>{var t={};for(var o in e)P.call(e,o)&&s.indexOf(o)<0&&(t[o]=e[o]);if(e!=null&&_)for(var o of _(e))s.indexOf(o)<0&&F.call(e,o)&&(t[o]=e[o]);return t};import{e as S,g as c,w as a,Y as p}from"./vendor.3ae73048.js";import{o as w}from"./helpers.7177ca38.js";import{z as m}from"./index.146c2037.js";import{p as i,K as R,q as g}from"./router.1b465492.js";const T=a(!1),B=a(!1),E=a(!1),G=a(!1),Y=a(!1),H=a(!1),I=a(!1),L=a(!1),N=a(!1),V=a(!1),X=a(!1),Z=a(!1),U=a([]),$=S([i,U],([e,s])=>{var t;return(t=s.find(o=>o.uid===e.projectUid))!=null?t:null}),C=a([]),O=S([i,C],([e,s])=>{var t;return(t=s.find(o=>o.uid===e.workspaceUid))!=null?t:null}),b=a([]),v=S([i,b],([e,s])=>{var t;return(t=s.find(o=>o.uid===e.sessionUid))!=null?t:null}),j=a(null);v.subscribe(e=>{var s;e===null&&j.set(null),!((e==null?void 0:e.uid)&&e.uid===((s=c(j))==null?void 0:s.session_uid))&&(async()=>{if(!(e==null?void 0:e.projectUid)||!(e==null?void 0:e.uid))return;const t=`project_uid=${e==null?void 0:e.projectUid}&session_uid=${e==null?void 0:e.uid}`,o=await m(`/api/actions/sessions/single?${t}`);j.set(o)})()});const W=a([]),Q=(e,s)=>{const r=c(p).params,{[e]:t}=r,o=A(r,[f(e)]);p.update(l=>n(d({},l),{params:n(d({},o),{[e]:s})}))},x=e=>{const o=c(p).params,{[e]:s}=o,t=A(o,[f(e)]);p.update(r=>n(d({},r),{params:t}))},J=(e,s)=>{p.update(t=>{var o,r;return n(d({},t),{params:n(d({},t.params),{[e]:[...(r=(o=t.params)==null?void 0:o[e])!=null?r:[],s]})})})},q=(e,s)=>{p.update(t=>{var o,r;return n(d({},t),{params:n(d({},t.params),{[e]:(r=(o=t.params)==null?void 0:o[e])==null?void 0:r.filter(l=>l!==s)})})})},ee=(e,s)=>{var t;Object.keys(c(g)).includes(e)&&((t=c(g)[e])==null?void 0:t.includes(s))?q(e,s):J(e,s)},te=(e,s)=>{Object.keys(c(g)).includes(e)&&c(g)[e]===s?x(e):Q(e,s)},se=async()=>{const e=w({uid:1,title:1}),t=(await m(`/api/actions/projects?${e}&sort_key=uid_num&limit=600`)).map(o=>{var r;return{uid:o.uid,text:`${o.uid}: ${o.title}`,title:(r=o.title)!=null?r:""}});U.set(t!=null?t:[])},oe=async()=>{const e=w({project_uid:1,uid:1,session_uid:1,title:1}),s=c(i).projectUid?`&project_uids=${c(i).projectUid}`:"",o=(await m(`/api/actions/workspaces?${e}${s}&sort_key=project_uid_num&sort_key_secondary=uid_num&limit=600`)).map(r=>{var l;return{uid:r.uid,text:`${r.uid}: ${r.title}`,projectUid:r.project_uid,title:(l=r.title)!=null?l:""}});C.set(o!=null?o:[])},re=async()=>{const e=w({project_uid:1,uid:1,session_uid:1,title:1}),s=c(i).projectUid?`&project_uids=${c(i).projectUid}`:"",o=(await m(`/api/actions/sessions?${e}${s}&sort_key=project_uid_num&sort_key_secondary=session_uid_num&limit=600`)).map(r=>{var l;return{uid:r.session_uid,text:`${r.session_uid}: ${r.title}`,projectUid:r.project_uid,title:(l=r.title)!=null?l:""}});b.set(o!=null?o:[])},ce=async()=>{var k;const e=w({title:1,project_uid:1,uid:1,workspace_uids:1,job_type:1,status:1}),s=c(i).projectUid?`&project_uids=${c(i).projectUid}`:"",t=c(i).projectUid&&c(i).workspaceUid?`&workspace_uids=${c(i).workspaceUid}`:"",o=c(j)?`&workspace_uids=${(k=c(j))==null?void 0:k.uid}`:"",r=`/api/actions/jobs?${e}${s}${t}${o}&sort_key=created_at&limit=600`,h=(await m(r)).map(u=>{var y;return{uid:u.uid,text:`${u.project_uid} ${u.uid}: ${(y=c(R)[u.job_type])==null?void 0:y.title}`,status:u.status,projectUid:u.project_uid}});W.set(h!=null?h:[])},ae=e=>e.find(s=>{var t;return s.uid===((t=c(i))==null?void 0:t.projectUid)}),ie=e=>e.find(s=>{var t,o;return s.project_uid===((t=c(i))==null?void 0:t.projectUid)&&s.uid===((o=c(i))==null?void 0:o.workspaceUid)}),le=e=>e.find(s=>{var t,o;return s.project_uid===((t=c(i))==null?void 0:t.projectUid)&&s.session_uid===((o=c(i))==null?void 0:o.sessionUid)});var me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",showProjectUnarchiveAlert:T,showProjectArchiveAlert:B,showProjectDetachAlert:E,showProjectDeleteAlert:G,showProjectDeleteDetachedAlert:Y,showWorkspaceDeleteAlert:H,showSessionDeleteAlert:I,showSessionRestoreAlert:L,showSessionCompactAlert:N,showMarkSessionCompleteAlert:V,showCloneJobsAlert:X,showCloneJobChainAlert:Z,projectOptions:U,selectedProjectOption:$,workspaceOptions:C,selectedWorkspaceOption:O,sessionOptions:b,selectedSessionOption:v,currentSessionWorkspace:j,jobOptions:W,addSingularFilter:Q,removeSingularFilter:x,addCompoundFilter:J,removeCompoundFilter:q,toggleCompoundFilter:ee,toggleSingularFilter:te,getProjects:se,getWorkspaces:oe,getSessions:re,getJobs:ce,getCurrentProject:ae,getCurrentWorkspace:ie,getCurrentSession:le});export{ee as A,q as B,$ as C,J as D,j as E,O as F,v as G,oe as a,se as b,re as c,me as d,ae as e,ie as f,ce as g,le as h,b as i,W as j,T as k,B as l,E as m,G as n,Y as o,U as p,H as q,x as r,Z as s,I as t,N as u,L as v,C as w,V as x,te as y,Q as z};
