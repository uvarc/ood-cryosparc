var En=Object.defineProperty,Rn=Object.defineProperties;var Nn=Object.getOwnPropertyDescriptors;var Te=Object.getOwnPropertySymbols;var wt=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable;var Ke=(e,t,n)=>t in e?En(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Q=(e,t)=>{for(var n in t||(t={}))wt.call(t,n)&&Ke(e,n,t[n]);if(Te)for(var n of Te(t))Ot.call(t,n)&&Ke(e,n,t[n]);return e},ye=(e,t)=>Rn(e,Nn(t));var ge=(e,t)=>{var n={};for(var s in e)wt.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&Te)for(var s of Te(e))t.indexOf(s)<0&&Ot.call(e,s)&&(n[s]=e[s]);return n};var kt=(e,t,n)=>(Ke(e,typeof t!="symbol"?t+"":t,n),n);import{e as O,w as D,g as k,X as In,Y as Je,Z as L,N as jt,_ as Vn,$ as se,a0 as Ln,a1 as Un}from"./vendor.3ae73048.js";import{T as ve,s as Ye,l as z,a as St,b as ce,c as xn,d as Pt,e as Mn,w as ue,S as le,f as ie,g as Bn,h as Y,_ as Wn,O as Ee,i as F,R as G,P as E,j as X,k as re,m as $,D as R,M as be}from"./index.146c2037.js";var Re=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ct(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ua(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),t}function xa(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ge={exports:{}},Xe={},Ze={exports:{}};/*!
 * EventEmitter v5.2.9 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */(function(e){(function(t){function n(){}var s=n.prototype,i=t.EventEmitter;function o(b,l){for(var u=b.length;u--;)if(b[u].listener===l)return u;return-1}function p(b){return function(){return this[b].apply(this,arguments)}}s.getListeners=function(l){var u=this._getEvents(),w,m;if(l instanceof RegExp){w={};for(m in u)u.hasOwnProperty(m)&&l.test(m)&&(w[m]=u[m])}else w=u[l]||(u[l]=[]);return w},s.flattenListeners=function(l){var u=[],w;for(w=0;w<l.length;w+=1)u.push(l[w].listener);return u},s.getListenersAsObject=function(l){var u=this.getListeners(l),w;return u instanceof Array&&(w={},w[l]=u),w||u};function v(b){return typeof b=="function"||b instanceof RegExp?!0:b&&typeof b=="object"?v(b.listener):!1}s.addListener=function(l,u){if(!v(u))throw new TypeError("listener must be a function");var w=this.getListenersAsObject(l),m=typeof u=="object",j;for(j in w)w.hasOwnProperty(j)&&o(w[j],u)===-1&&w[j].push(m?u:{listener:u,once:!1});return this},s.on=p("addListener"),s.addOnceListener=function(l,u){return this.addListener(l,{listener:u,once:!0})},s.once=p("addOnceListener"),s.defineEvent=function(l){return this.getListeners(l),this},s.defineEvents=function(l){for(var u=0;u<l.length;u+=1)this.defineEvent(l[u]);return this},s.removeListener=function(l,u){var w=this.getListenersAsObject(l),m,j;for(j in w)w.hasOwnProperty(j)&&(m=o(w[j],u),m!==-1&&w[j].splice(m,1));return this},s.off=p("removeListener"),s.addListeners=function(l,u){return this.manipulateListeners(!1,l,u)},s.removeListeners=function(l,u){return this.manipulateListeners(!0,l,u)},s.manipulateListeners=function(l,u,w){var m,j,P=l?this.removeListener:this.addListener,J=l?this.removeListeners:this.addListeners;if(typeof u=="object"&&!(u instanceof RegExp))for(m in u)u.hasOwnProperty(m)&&(j=u[m])&&(typeof j=="function"?P.call(this,m,j):J.call(this,m,j));else for(m=w.length;m--;)P.call(this,u,w[m]);return this},s.removeEvent=function(l){var u=typeof l,w=this._getEvents(),m;if(u==="string")delete w[l];else if(l instanceof RegExp)for(m in w)w.hasOwnProperty(m)&&l.test(m)&&delete w[m];else delete this._events;return this},s.removeAllListeners=p("removeEvent"),s.emitEvent=function(l,u){var w=this.getListenersAsObject(l),m,j,P,J,S;for(J in w)if(w.hasOwnProperty(J))for(m=w[J].slice(0),P=0;P<m.length;P++)j=m[P],j.once===!0&&this.removeListener(l,j.listener),S=j.listener.apply(this,u||[]),S===this._getOnceReturnValue()&&this.removeListener(l,j.listener);return this},s.trigger=p("emitEvent"),s.emit=function(l){var u=Array.prototype.slice.call(arguments,1);return this.emitEvent(l,u)},s.setOnceReturnValue=function(l){return this._onceReturnValue=l,this},s._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},s._getEvents=function(){return this._events||(this._events={})},n.noConflict=function(){return t.EventEmitter=i,n},e.exports?e.exports=n:t.EventEmitter=n})(typeof window!="undefined"?window:Re||{})})(Ze);var et={};Object.defineProperty(et,"__esModule",{value:!0});var qn=function(){function e(t,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();function Fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var $n=function(){function e(t){Fn(this,e),this.consumer=t,this.paused=!1,this.queue=[]}return qn(e,[{key:"pause",value:function(){this.paused=!0}},{key:"continue",value:function(){this.paused=!1,this.process()}},{key:"push",value:function(n){this.queue.push(n),this.process()}},{key:"unshift",value:function(n){this.queue.unshift(n),this.process()}},{key:"process",value:function(n){if(!this.paused&&this.queue.length!==0){var s=this.consumer(this.queue[0]);s&&(this.queue.shift(),this.paused||this.process())}}},{key:"empty",value:function(){this.queue=[]}}]),e}();et.default=$n;var tt={},Ne={exports:{}};(function(e){e.exports=function(){var t=[function(i,o,p){var v=p(2).Base64,b=p(3);Object.defineProperty(o,"__esModule",{value:!0}),o.EJSON=void 0;var l=p(1),u={};o.EJSON=u;var w=new Map;u.addType=function(c,r){if(w.has(c))throw new Error("Type ".concat(c," already present"));w.set(c,r)};var m=[{matchJSONValue:function(r){return(0,l.hasOwn)(r,"$date")&&(0,l.lengthOf)(r)===1},matchObject:function(r){return r instanceof Date},toJSONValue:function(r){return{$date:r.getTime()}},fromJSONValue:function(r){return new Date(r.$date)}},{matchJSONValue:function(r){return(0,l.hasOwn)(r,"$regexp")&&(0,l.hasOwn)(r,"$flags")&&(0,l.lengthOf)(r)===2},matchObject:function(r){return r instanceof RegExp},toJSONValue:function(r){return{$regexp:r.source,$flags:r.flags}},fromJSONValue:function(r){return new RegExp(r.$regexp,r.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(r){return(0,l.hasOwn)(r,"$InfNaN")&&(0,l.lengthOf)(r)===1},matchObject:l.isInfOrNaN,toJSONValue:function(r){var f;return Number.isNaN(r)?f=0:r===1/0?f=1:f=-1,{$InfNaN:f}},fromJSONValue:function(r){return r.$InfNaN/0}},{matchJSONValue:function(r){return(0,l.hasOwn)(r,"$binary")&&(0,l.lengthOf)(r)===1},matchObject:function(r){return typeof Uint8Array!="undefined"&&r instanceof Uint8Array||r&&(0,l.hasOwn)(r,"$Uint8ArrayPolyfill")},toJSONValue:function(r){return{$binary:v.encode(r)}},fromJSONValue:function(r){return v.decode(r.$binary)}},{matchJSONValue:function(r){return(0,l.hasOwn)(r,"$escape")&&(0,l.lengthOf)(r)===1},matchObject:function(r){var f=!1;if(r){var a=(0,l.lengthOf)(r);(a===1||a===2)&&(f=m.some(function(d){return d.matchJSONValue(r)}))}return f},toJSONValue:function(r){var f={};return(0,l.keysOf)(r).forEach(function(a){f[a]=u.toJSONValue(r[a])}),{$escape:f}},fromJSONValue:function(r){var f={};return(0,l.keysOf)(r.$escape).forEach(function(a){f[a]=u.fromJSONValue(r.$escape[a])}),f}},{matchJSONValue:function(r){return(0,l.hasOwn)(r,"$type")&&(0,l.hasOwn)(r,"$value")&&(0,l.lengthOf)(r)===2},matchObject:function(r){return u._isCustomType(r)},toJSONValue:function(r){var f=b._noYieldsAllowed(function(){return r.toJSONValue()});return{$type:r.typeName(),$value:f}},fromJSONValue:function(r){var f=r.$type;if(!w.has(f))throw new Error("Custom EJSON type ".concat(f," is not defined"));var a=w.get(f);return b._noYieldsAllowed(function(){return a(r.$value)})}}];u._isCustomType=function(c){return c&&(0,l.isFunction)(c.toJSONValue)&&(0,l.isFunction)(c.typeName)&&w.has(c.typeName())},u._getTypes=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return c?w:(0,l.convertMapToObject)(w)},u._getConverters=function(){return m};var j=function(r){for(var f=0;f<m.length;f++){var a=m[f];if(a.matchObject(r))return a.toJSONValue(r)}},P=function c(r){if(r===null)return null;var f=j(r);return f!==void 0?f:((0,l.isObject)(r)&&(0,l.keysOf)(r).forEach(function(a){var d=r[a];if(!(!(0,l.isObject)(d)&&d!==void 0&&!(0,l.isInfOrNaN)(d))){var y=j(d);if(y){r[a]=y;return}c(d)}}),r)};u._adjustTypesToJSONValue=P,u.toJSONValue=function(c){var r=j(c);if(r!==void 0)return r;var f=c;return(0,l.isObject)(c)&&(f=u.clone(c),P(f)),f};var J=function(r){if((0,l.isObject)(r)&&r!==null){var f=(0,l.keysOf)(r);if(f.length<=2&&f.every(function(y){return typeof y=="string"&&y.substr(0,1)==="$"}))for(var a=0;a<m.length;a++){var d=m[a];if(d.matchJSONValue(r))return d.fromJSONValue(r)}}return r},S=function c(r){if(r===null)return null;var f=J(r);return f!==r?f:((0,l.isObject)(r)&&(0,l.keysOf)(r).forEach(function(a){var d=r[a];if((0,l.isObject)(d)){var y=J(d);if(d!==y){r[a]=y;return}c(d)}}),r)};u._adjustTypesFromJSONValue=S,u.fromJSONValue=function(c){var r=J(c);return r===c&&(0,l.isObject)(c)&&(r=u.clone(c),S(r)),r},u.stringify=(0,l.handleError)(function(c,r){var f,a=u.toJSONValue(c);if(r&&(r.canonical||r.indent)){var d=p(4);f=d(a,r)}else f=JSON.stringify(a);return f}),u.parse=function(c){if(typeof c!="string")throw new Error("EJSON.parse argument should be a string");return u.fromJSONValue(JSON.parse(c))},u.isBinary=function(c){return!!(typeof Uint8Array!="undefined"&&c instanceof Uint8Array||c&&c.$Uint8ArrayPolyfill)},u.equals=function(c,r,f){var a,d=!!(f&&f.keyOrderSensitive);if(c===r||Number.isNaN(c)&&Number.isNaN(r))return!0;if(!c||!r||!((0,l.isObject)(c)&&(0,l.isObject)(r)))return!1;if(c instanceof Date&&r instanceof Date)return c.valueOf()===r.valueOf();if(u.isBinary(c)&&u.isBinary(r)){if(c.length!==r.length)return!1;for(a=0;a<c.length;a++)if(c[a]!==r[a])return!1;return!0}if((0,l.isFunction)(c.equals))return c.equals(r,f);if((0,l.isFunction)(r.equals))return r.equals(c,f);if(c instanceof Array){if(!(r instanceof Array)||c.length!==r.length)return!1;for(a=0;a<c.length;a++)if(!u.equals(c[a],r[a],f))return!1;return!0}switch(u._isCustomType(c)+u._isCustomType(r)){case 1:return!1;case 2:return u.equals(u.toJSONValue(c),u.toJSONValue(r))}var y,h=(0,l.keysOf)(c),g=(0,l.keysOf)(r);return d?(a=0,y=h.every(function(_){return a>=g.length||_!==g[a]||!u.equals(c[_],r[g[a]],f)?!1:(a++,!0)})):(a=0,y=h.every(function(_){return!(0,l.hasOwn)(r,_)||!u.equals(c[_],r[_],f)?!1:(a++,!0)})),y&&a===g.length},u.clone=function(c){var r;if(!(0,l.isObject)(c))return c;if(c===null)return null;if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp)return c;if(u.isBinary(c)){r=u.newBinary(c.length);for(var f=0;f<c.length;f++)r[f]=c[f];return r}return Array.isArray(c)?c.map(u.clone):(0,l.isArguments)(c)?Array.from(c).map(u.clone):(0,l.isFunction)(c.clone)?c.clone():u._isCustomType(c)?u.fromJSONValue(u.clone(u.toJSONValue(c)),!0):(r={},(0,l.keysOf)(c).forEach(function(a){r[a]=u.clone(c[a])}),r)},u.newBinary=v.newBinary},function(i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.handleError=o.checkError=o.isInfOrNaN=o.isArguments=o.convertMapToObject=o.hasOwn=o.lengthOf=o.keysOf=o.isObject=o.isFunction=void 0;function p(h,g){return w(h)||u(h,g)||b(h,g)||v()}function v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(h,g){if(!!h){if(typeof h=="string")return l(h,g);var _=Object.prototype.toString.call(h).slice(8,-1);if(_==="Object"&&h.constructor&&(_=h.constructor.name),_==="Map"||_==="Set")return Array.from(h);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return l(h,g)}}function l(h,g){(g==null||g>h.length)&&(g=h.length);for(var _=0,A=new Array(g);_<g;_++)A[_]=h[_];return A}function u(h,g){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(h)))){var _=[],A=!0,I=!1,T=void 0;try{for(var M=h[Symbol.iterator](),W;!(A=(W=M.next()).done)&&(_.push(W.value),!(g&&_.length===g));A=!0);}catch(ne){I=!0,T=ne}finally{try{!A&&M.return!=null&&M.return()}finally{if(I)throw T}}return _}}function w(h){if(Array.isArray(h))return h}function m(h){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?m=function(_){return typeof _}:m=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},m(h)}var j=function(g){return typeof g=="function"};o.isFunction=j;var P=function(g){return m(g)==="object"};o.isObject=P;var J=function(g){return Object.keys(g)};o.keysOf=J;var S=function(g){return Object.keys(g).length};o.lengthOf=S;var c=function(g,_){return Object.prototype.hasOwnProperty.call(g,_)};o.hasOwn=c;var r=function(g){return Array.from(g).reduce(function(_,A){var I=p(A,2),T=I[0],M=I[1];return _[T]=M,_},{})};o.convertMapToObject=r;var f=function(g){return g!=null&&c(g,"callee")};o.isArguments=f;var a=function(g){return Number.isNaN(g)||g===1/0||g===-1/0};o.isInfOrNaN=a;var d={maxStack:function(g){return new RegExp("Maximum call stack size exceeded","g").test(g)}};o.checkError=d;var y=function(g){return function(){try{return g.apply(this,arguments)}catch(A){var _=d.maxStack(A.message);throw _?new Error("Converting circular structure to JSON"):A}}};o.handleError=y},function(i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.Base64=void 0;for(var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=Object.create(null),b=function(S){return p.charAt(S)},l=function(S){return S==="="?-1:v[S]},u=0;u<p.length;u++)v[b(u)]=u;var w=function(S){if(typeof S=="string"){var c=S;S=m(c.length);for(var r=0;r<c.length;r++){var f=c.charCodeAt(r);if(f>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");S[r]=f}}for(var a=[],d=null,y=null,h=null,g=null,_=0;_<S.length;_++)switch(_%3){case 0:d=S[_]>>2&63,y=(S[_]&3)<<4;break;case 1:y=y|S[_]>>4&15,h=(S[_]&15)<<2;break;case 2:h=h|S[_]>>6&3,g=S[_]&63,a.push(b(d)),a.push(b(y)),a.push(b(h)),a.push(b(g)),d=null,y=null,h=null,g=null;break}return d!=null&&(a.push(b(d)),a.push(b(y)),h==null?a.push("="):a.push(b(h)),g==null&&a.push("=")),a.join("")},m=function(S){if(typeof Uint8Array=="undefined"||typeof ArrayBuffer=="undefined"){for(var c=[],r=0;r<S;r++)c.push(0);return c.$Uint8ArrayPolyfill=!0,c}return new Uint8Array(new ArrayBuffer(S))},j=function(S){var c=Math.floor(S.length*3/4);S.charAt(S.length-1)=="="&&(c--,S.charAt(S.length-2)=="="&&c--);for(var r=m(c),f=null,a=null,d=null,y=0,h=0;h<S.length;h++){var g=S.charAt(h),_=l(g);switch(h%4){case 0:if(_<0)throw new Error("invalid base64 string");f=_<<2;break;case 1:if(_<0)throw new Error("invalid base64 string");f=f|_>>4,r[y++]=f,a=(_&15)<<4;break;case 2:_>=0&&(a=a|_>>2,r[y++]=a,d=(_&3)<<6);break;case 3:_>=0&&(r[y++]=d|_);break}}return r},P={encode:w,decode:j,newBinary:m};o.Base64=P},function(i){i.exports={_noYieldsAllowed:function(p){return p()}}},function(i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;function p(w){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?p=function(j){return typeof j}:p=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},p(w)}function v(w){return JSON.stringify(w)}var b=function w(m,j,P,J,S){var c=j[m];switch(p(c)){case"string":return v(c);case"number":return isFinite(c)?String(c):"null";case"boolean":return String(c);case"object":{if(!c)return"null";var r=J+P,f=[],a;if(Array.isArray(c)||{}.hasOwnProperty.call(c,"callee")){for(var d=c.length,y=0;y<d;y+=1)f[y]=w(y,c,P,r,S)||"null";return f.length===0?a="[]":r?a=`[
`+r+f.join(`,
`+r)+`
`+J+"]":a="["+f.join(",")+"]",a}var h=Object.keys(c);return S&&(h=h.sort()),h.forEach(function(g){a=w(g,c,P,r,S),a&&f.push(v(g)+(r?": ":":")+a)}),f.length===0?a="{}":r?a=`{
`+r+f.join(`,
`+r)+`
`+J+"}":a="{"+f.join(",")+"}",a}}},l=function(m,j){var P=Object.assign({indent:"",canonical:!1},j);if(P.indent===!0)P.indent="  ";else if(typeof P.indent=="number"){for(var J="",S=0;S<P.indent;S++)J+=" ";P.indent=J}return b("",{"":m},P.indent,"",P.canonical)},u=l;o.default=u,i.exports=o.default}],n={};function s(i){if(n[i])return n[i].exports;var o=n[i]={exports:{}};return t[i](o,o.exports,s),o.exports}return s(0)}().EJSON})(Ne);var Qn=Ct(Ne.exports);Object.defineProperty(tt,"__esModule",{value:!0});var zn=function(){function e(t,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),Hn=Ze.exports,Kn=At(Hn),Yn=Ne.exports,nt=At(Yn);function At(e){return e&&e.__esModule?e:{default:e}}function Gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Zn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var es=function(e){Zn(t,e);function t(n,s){Gn(this,t);var i=Xn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.SocketConstructor=n,i.endpoint=s,i.rawSocket=null,i}return zn(t,[{key:"send",value:function(s){var i=nt.default.stringify(s);this.rawSocket.send(i),this.emit("message:out",nt.default.parse(i))}},{key:"open",value:function(){var s=this;this.rawSocket||(this.rawSocket=new this.SocketConstructor(this.endpoint),this.rawSocket.onopen=function(){return s.emit("open")},this.rawSocket.onclose=function(){s.rawSocket=null,s.emit("close")},this.rawSocket.onerror=function(){s.rawSocket&&s.rawSocket.onclose&&delete s.rawSocket.onclose,s.rawSocket.close(),s.rawSocket=null,s.emit("close")},this.rawSocket.onmessage=function(i){var o;try{o=nt.default.parse(i.data)}catch{return}s.emit("message:in",o)})}},{key:"close",value:function(){this.rawSocket&&this.rawSocket.close()}}]),t}(Kn.default);tt.default=es;var Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.uniqueId=ns;Ie.contains=ss;var ts=0;function ns(){return(ts++).toString()}function ss(e,t){return e.indexOf(t)!==-1}Object.defineProperty(Xe,"__esModule",{value:!0});var Dt=function(){function e(t,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),is=function e(t,n,s){t===null&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(i===void 0){var o=Object.getPrototypeOf(t);return o===null?void 0:e(o,n,s)}else{if("value"in i)return i.value;var p=i.get;return p===void 0?void 0:p.call(s)}},rs=Ze.exports,as=it(rs),os=et,cs=it(os),us=tt,ls=it(us),st=Ie;function it(e){return e&&e.__esModule?e:{default:e}}function fs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ds(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function hs(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Tt="1",ps=["ready","nosub","added","changed","removed","result","updated","error"],ys=1e4,gs=function(e){hs(t,e),Dt(t,[{key:"emit",value:function(){var s;setTimeout((s=is(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).bind.apply(s,[this].concat(Array.prototype.slice.call(arguments))),0)}}]);function t(n){fs(this,t);var s=ds(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.status="disconnected",s.sessionId=null,s.cleanQueue=n.cleanQueue===!0,s.autoConnect=n.autoConnect!==!1,s.autoReconnect=n.autoReconnect!==!1,s.autoReconnectUserValue=s.autoReconnect,s.reconnectInterval=n.reconnectInterval||ys,s.messageQueue=new cs.default(function(i){return s.status==="connected"?(s.socket.send(i),!0):!1}),s.socket=new ls.default(n.SocketConstructor,n.endpoint),s.socket.on("open",function(){var i={msg:"connect",version:Tt,support:[Tt]};s.sessionId&&(i.session=s.sessionId),s.socket.send(i)}),s.socket.on("close",function(){var i=s.status;s.status="disconnected",s.cleanQueue&&s.messageQueue.empty(),i!="disconnected"&&s.emit("disconnected"),s.autoReconnect&&setTimeout(s.socket.open.bind(s.socket),s.reconnectInterval)}),s.socket.on("message:in",function(i){i.msg==="connected"?(s.status="connected",s.sessionId=i.session?i.session:null,s.messageQueue.process(),s.emit("connected",i)):i.msg==="ping"?s.socket.send({msg:"pong",id:i.id}):(0,st.contains)(ps,i.msg)&&s.emit(i.msg,i)}),s.autoConnect&&s.connect(),s}return Dt(t,[{key:"connect",value:function(){this.autoReconnect=this.autoReconnectUserValue,this.socket.open()}},{key:"disconnect",value:function(){this.autoReconnectUserValue=this.autoReconnect,this.autoReconnect=!1,this.sessionId=null,this.socket.close()}},{key:"pauseQueue",value:function(){this.messageQueue.pause()}},{key:"continueQueue",value:function(){this.messageQueue.continue()}},{key:"method",value:function(s,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,p=(0,st.uniqueId)();return this.messageQueue[o?"unshift":"push"]({msg:"method",id:p,method:s,params:i}),p}},{key:"sub",value:function(s,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(0,st.uniqueId)();return this.messageQueue.push({msg:"sub",id:o,name:s,params:i}),o}},{key:"unsub",value:function(s){return this.messageQueue.push({msg:"unsub",id:s}),s}}]),t}(as.default);Xe.default=gs;var rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.isEqual=function e(t,n){var s=Object.prototype.toString.call(t);if(s!==Object.prototype.toString.call(n)||["[object Array]","[object Object]"].indexOf(s)<0)return!1;var i=s==="[object Array]"?t.length:Object.keys(t).length,o=s==="[object Array]"?n.length:Object.keys(n).length;if(i!==o)return!1;var p=function(u,w){var m=Object.prototype.toString.call(u);if(["[object Array]","[object Object]"].indexOf(m)>=0){if(!e(u,w))return!1}else{if(m!==Object.prototype.toString.call(w))return!1;if(m==="[object Function]"){if(u.toString()!==w.toString())return!1}else if(u!==w)return!1}};if(s==="[object Array]"){for(var v=0;v<i;v++)if(p(t[v],n[v])===!1)return!1}else for(var b in t)if(t.hasOwnProperty(b)&&p(t[b],n[b])===!1)return!1;return!0};var _e={},vs=Object.prototype.toString,Jt=function(t){if(t===void 0)return"undefined";if(t===null)return"null";var n=typeof t;if(n==="boolean")return"boolean";if(n==="string")return"string";if(n==="number")return"number";if(n==="symbol")return"symbol";if(n==="function")return Os(t)?"generatorfunction":"function";if(bs(t))return"array";if(Ss(t))return"buffer";if(js(t))return"arguments";if(ms(t))return"date";if(_s(t))return"error";if(ws(t))return"regexp";switch(Et(t)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(ks(t))return"generator";switch(n=vs.call(t),n){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return n.slice(8,-1).toLowerCase().replace(/\s/g,"")};function Et(e){return typeof e.constructor=="function"?e.constructor.name:null}function bs(e){return Array.isArray?Array.isArray(e):e instanceof Array}function _s(e){return e instanceof Error||typeof e.message=="string"&&e.constructor&&typeof e.constructor.stackTraceLimit=="number"}function ms(e){return e instanceof Date?!0:typeof e.toDateString=="function"&&typeof e.getDate=="function"&&typeof e.setDate=="function"}function ws(e){return e instanceof RegExp?!0:typeof e.flags=="string"&&typeof e.ignoreCase=="boolean"&&typeof e.multiline=="boolean"&&typeof e.global=="boolean"}function Os(e,t){return Et(e)==="GeneratorFunction"}function ks(e){return typeof e.throw=="function"&&typeof e.return=="function"&&typeof e.next=="function"}function js(e){try{if(typeof e.length=="number"&&typeof e.callee=="function")return!0}catch(t){if(t.message.indexOf("callee")!==-1)return!0}return!1}function Ss(e){return e.constructor&&typeof e.constructor.isBuffer=="function"?e.constructor.isBuffer(e):!1}/*!
 * shallow-clone <https://github.com/jonschlinkert/shallow-clone>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const Rt=Symbol.prototype.valueOf,Ps=Jt;function Cs(e,t){switch(Ps(e)){case"array":return e.slice();case"object":return Object.assign({},e);case"date":return new e.constructor(Number(e));case"map":return new Map(e);case"set":return new Set(e);case"buffer":return Js(e);case"symbol":return Es(e);case"arraybuffer":return Ds(e);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return Ts(e);case"regexp":return As(e);case"error":return Object.create(e);default:return e}}function As(e){const t=e.flags!==void 0?e.flags:/\w+$/.exec(e)||void 0,n=new e.constructor(e.source,t);return n.lastIndex=e.lastIndex,n}function Ds(e){const t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}function Ts(e,t){return new e.constructor(e.buffer,e.byteOffset,e.length)}function Js(e){const t=e.length,n=Buffer.allocUnsafe?Buffer.allocUnsafe(t):Buffer.from(t);return e.copy(n),n}function Es(e){return Rt?Object(Rt.call(e)):{}}var Rs=Cs;/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Ns=function(t){return t!=null&&typeof t=="object"&&Array.isArray(t)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Is=Ns;function Nt(e){return Is(e)===!0&&Object.prototype.toString.call(e)==="[object Object]"}var Vs=function(t){var n,s;return!(Nt(t)===!1||(n=t.constructor,typeof n!="function")||(s=n.prototype,Nt(s)===!1)||s.hasOwnProperty("isPrototypeOf")===!1)};const Ls=Rs,Us=Jt,xs=Vs;function at(e,t){switch(Us(e)){case"object":return Ms(e,t);case"array":return Bs(e,t);default:return Ls(e)}}function Ms(e,t){if(typeof t=="function")return t(e);if(t||xs(e)){const n=new e.constructor;for(let s in e)n[s]=at(e[s],t);return n}return e}function Bs(e,t){const n=new e.constructor(e.length);for(let s=0;s<e.length;s++)n[s]=at(e[s],t);return n}var Ws=at;Object.defineProperty(_e,"__esModule",{value:!0});_e.fullCopy=void 0;var qs=Ws,Fs=$s(qs);function $s(e){return e&&e.__esModule?e:{default:e}}_e.fullCopy=Fs.default;var ot={};Object.defineProperty(ot,"__esModule",{value:!0});var Qs=function(){function e(t,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();function zs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}ot.ddpEventListener=function(){function e(t,n,s){zs(this,e),this._ddplink=s,this._eventname=t,this._f=n,this._started=!1,this.start()}return Qs(e,[{key:"stop",value:function(){this._started&&(this._ddplink.ddpConnection.removeListener(this._eventname,this._f),this._started=!1)}},{key:"start",value:function(){this._started||(this._ddplink.ddpConnection.on(this._eventname,this._f),this._started=!0)}}]),e}();var ct={};Object.defineProperty(ct,"__esModule",{value:!0});var Hs=function(){function e(t,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();function Ks(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}ct.ddpSubscription=function(){function e(t,n,s){var i=this;Ks(this,e),this._ddplink=s,this.pubname=t,this.args=n,this._nosub=!1,this._started=!1,this._ready=!1,this.selfReadyEvent=s.on("ready",function(o){o.subs.includes(i.subscriptionId)&&(i._ready=!0,i._nosub=!1)}),this.selfNosubEvent=s.on("nosub",function(o){o.id==i.subscriptionId&&(i._ready=!1,i._nosub=!0,i._started=!1)}),this.start()}return Hs(e,[{key:"onNosub",value:function(n){var s=this;if(this.isStopped())n();else{var i=this._ddplink.on("nosub",function(o){o.id==s.subscriptionId&&n(o.error)});return i}}},{key:"onReady",value:function(n){var s=this;if(this.isReady())n();else{var i=this._ddplink.on("ready",function(o){o.subs.includes(s.subscriptionId)&&n()});return i}}},{key:"isReady",value:function(){return this._ready}},{key:"isStopped",value:function(){return this._nosub}},{key:"ready",value:function(){var n=this;return new Promise(function(s,i){if(n.isReady())s();else var o=n._ddplink.on("ready",function(v){v.subs.includes(n.subscriptionId)&&(o.stop(),p.stop(),s())}),p=n._ddplink.on("nosub",function(v){v.id==n.subscriptionId&&(p.stop(),o.stop(),i(v.error))})})}},{key:"nosub",value:function(){var n=this;return new Promise(function(s,i){if(n.isStopped())s();else var o=n._ddplink.on("nosub",function(p){p.id==n.subscriptionId&&(n._nosub=!0,o.stop(),p.error?i(p.error):s())})})}},{key:"isOn",value:function(){return this._started}},{key:"remove",value:function(){this.selfNosubEvent.stop(),this.stop();var n=this._ddplink.subs.indexOf(this);n>-1&&this._ddplink.subs.splice(n,1)}},{key:"stop",value:function(){return this._started&&(this.selfReadyEvent.stop(),this._nosub||this._ddplink.ddpConnection.unsub(this.subscriptionId),this._started=!1,this._ready=!1),this.nosub()}},{key:"_getId",value:function(){return this.subscriptionId}},{key:"start",value:function(n){return this._started||(this.selfReadyEvent.start(),Array.isArray(n)&&(this.args=n),this.subscriptionId=this._ddplink.ddpConnection.sub(this.pubname,this.args),this._started=!0),this.ready()}},{key:"restart",value:function(n){var s=this;return new Promise(function(i,o){s.stop().then(function(){s.start(n).then(function(){i()}).catch(function(p){o(p)})}).catch(function(p){o(p)})})}}]),e}();var Ve={},fe={};Object.defineProperty(fe,"__esModule",{value:!0});var Ys=function(){function e(t,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();function Gs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}fe.ddpOnChange=function(){function e(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"onChangeFuncs";Gs(this,e),this._obj=t,this._inst=n,this._isStopped=!0,this._listenersArray=s,this.start()}return Ys(e,[{key:"stop",value:function(){var n=this._inst[this._listenersArray].indexOf(this._obj);n>-1&&(this._isStopped=!0,this._inst[this._listenersArray].splice(n,1))}},{key:"start",value:function(){this._isStopped&&(this._inst[this._listenersArray].push(this._obj),this._isStopped=!1)}}]),e}();var Le={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.ddpReducer=void 0;var Xs=function(){function e(t,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),Zs=fe;function ei(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Ue.ddpReducer=function(){function e(t,n,s){ei(this,e),this._ddpReactiveCollectionInstance=t,this._reducer=n,this._started=!1,this._data={result:null},this._tickers=[],this._initialValue=s,this.start()}return Xs(e,[{key:"doReduce",value:function(){var n=this;this._started&&(this._data.result=this._ddpReactiveCollectionInstance.data().reduce(this._reducer,this._initialValue),this._tickers.forEach(function(s){s(n.data().result)}))}},{key:"start",value:function(){this._started||(this.doReduce(),this._ddpReactiveCollectionInstance._activateReducer(this),this._started=!0)}},{key:"stop",value:function(){this._started&&(this._ddpReactiveCollectionInstance._deactivateReducer(this),this._started=!1)}},{key:"data",value:function(){return this._data}},{key:"onChange",value:function(n){return new Zs.ddpOnChange(n,this,"_tickers")}}]),e}();var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.ddpReactiveDocument=void 0;var ti=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ni=function(){function e(t,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),si=fe;function ii(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}xe.ddpReactiveDocument=function(){function e(t,n){ii(this,e),this._ddpReactiveCollectionInstance=t,this._started=!1,this._data={},this._tickers=[],this._preserve=!1,(typeof n=="undefined"?"undefined":ti(n))==="object"&&n!==null&&this.settings(n),this.start()}return ni(e,[{key:"_update",value:function(n){var s=this;n?(Object.keys(this._data).forEach(function(i){delete s._data[i]}),Object.assign(this._data,n)):this._preserve||Object.keys(this._data).forEach(function(i){delete s._data[i]}),this._tickers.forEach(function(i){i(s.data())})}},{key:"start",value:function(){this._started||(this._update(this._ddpReactiveCollectionInstance.data()[0]),this._ddpReactiveCollectionInstance._activateReactiveObject(this),this._started=!0)}},{key:"stop",value:function(){this._started&&(this._ddpReactiveCollectionInstance._deactivateReactiveObject(this),this._started=!1)}},{key:"data",value:function(){return this._data}},{key:"onChange",value:function(n){return new si.ddpOnChange(n,this,"_tickers")}},{key:"settings",value:function(n){var s=n.preserve;this._preserve=!!s}}]),e}();Object.defineProperty(Le,"__esModule",{value:!0});Le.ddpReactiveCollection=void 0;var ri=function(){function e(t,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),It=Ue,ai=xe,oi=fe;function me(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}else return Array.from(e)}function ci(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Le.ddpReactiveCollection=function(){function e(t,n,s){var i=this;ci(this,e),this._skip=n&&typeof n.skip=="number"?n.skip:0,this._limit=n&&typeof n.limit=="number"?n.limit:1/0,this._length={result:0},this._data=[],this._rawData=[],this._reducers=[],this._tickers=[],this._ones=[],this._first={},this._syncFunc=function(o,p,v){var b={};return typeof o=="number"&&(b.skip=o),typeof p=="number"&&(b.limit=p),v&&(b.sort=v),t.fetch.call(t,b)},this._changeHandler=t.onChange(function(o){var p=o.prev,v=o.next,b=o.predicatePassed;if(p&&v){if(b[0]==0&&b[1]==1)i._smartUpdate(v);else if(b[0]==1&&b[1]==0){var l=i._rawData.findIndex(function(m){return m.id==p.id});i._removeItem(l)}else if(b[0]==1&&b[1]==1){var u=i._rawData.findIndex(function(m){return m.id==p.id});i._smartUpdate(v,u)}}else if(!p&&v)i._smartUpdate(v);else if(p&&!v){var w=i._rawData.findIndex(function(m){return m.id==p.id});i._removeItem(w)}i._length.result=i._data.length,i._reducers.forEach(function(m){m.doReduce()}),i._data[0]!==i._first&&i._updateReactiveObjects(),i._first=i._data[0],i._tickers.forEach(function(m){m(i.data())})},s||function(o){return!0}),this.started=!1,this._sort=!1,this.start()}return ri(e,[{key:"_removeItem",value:function(n){this._rawData.splice(n,1),n>=this._skip&&n<this._skip+this._limit?(this._data.splice(n-this._skip,1),this._rawData.length>=this._skip+this._limit&&this._data.push(this._rawData[this._skip+this._limit-1])):n<this._skip&&(this._data.shift(),this._rawData.length>=this._skip+this._limit&&this._data.push(this._rawData[this._skip+this._limit-1]))}},{key:"_smartUpdate",value:function(n,s){var i=void 0;if(!this._rawData.length){i=this._rawData.push(n)-1,i>=this._skip&&i<this._skip+this._limit&&this._data.push(n);return}if(this._sort)for(var o=0;o<this._rawData.length;o++){if(this._sort(n,this._rawData[o])<1){i=o,o==s?(this._rawData[o]=n,s>=this._skip&&s<this._skip+this._limit&&(this._data[s-this._skip]=n)):(this._removeItem(s),this._rawData.splice(o,0,n),o>=this._skip&&o<this._skip+this._limit&&(this._data.splice(o-this._skip,0,n),this._data.splice(this._limit)));break}if(o==this._rawData.length-1){i=this._rawData.push(n)-1,i>=this._skip&&i<this._skip+this._limit&&this._data.push(n);break}}else typeof s=="number"?(i=s,this._rawData[s]=n,s>=this._skip&&s<this._skip+this._limit&&(this._data[s-this._skip]=n)):(i=this._rawData.push(n)-1,i>=this._skip&&i<this._skip+this._limit&&this._data.push(n))}},{key:"_activateReducer",value:function(n){this._reducers.push(n)}},{key:"_activateReactiveObject",value:function(n){this._ones.push(n)}},{key:"_deactivateReducer",value:function(n){var s=this._reducers.indexOf(n);s>-1&&this._reducers.splice(s,1)}},{key:"_deactivateReactiveObject",value:function(n){var s=this._ones.indexOf(n);s>-1&&this._ones.splice(s,1)}},{key:"_updateReactiveObjects",value:function(){var n=this;this._ones.forEach(function(s){s._update(n.data()[0])})}},{key:"settings",value:function(n){var s,i=n.skip,o=n.limit;this._skip=i!==!1?i:0,this._limit=o!==!1?o:1/0,(s=this._data).splice.apply(s,[0,this._data.length].concat(me(this._syncFunc(this._skip,this._limit,this._sort)))),this._updateReactiveObjects()}},{key:"stop",value:function(){this.started&&(this._changeHandler.stop(),this.started=!1)}},{key:"start",value:function(){if(!this.started){var n,s;(n=this._rawData).splice.apply(n,[0,this._rawData.length].concat(me(this._syncFunc(!1,!1,this._sort)))),(s=this._data).splice.apply(s,[0,this._data.length].concat(me(this._syncFunc(this._skip,this._limit,this._sort)))),this._updateReactiveObjects(),this._changeHandler.start(),this.started=!0}}},{key:"sort",value:function(n){if(this._sort=n,this._sort){var s,i;(s=this._rawData).splice.apply(s,[0,this._rawData.length].concat(me(this._syncFunc(!1,!1,this._sort)))),(i=this._data).splice.apply(i,[0,this._data.length].concat(me(this._syncFunc(this._skip,this._limit,this._sort)))),this._updateReactiveObjects()}return this}},{key:"data",value:function(){return this._data}},{key:"onChange",value:function(n){return new oi.ddpOnChange(n,this,"_tickers")}},{key:"map",value:function(n){return new It.ddpReducer(this,function(s,i,o,p){return s.concat(n(i,o,p))},[])}},{key:"reduce",value:function(n,s){return new It.ddpReducer(this,n,s)}},{key:"count",value:function(){return this._length}},{key:"one",value:function(n){return new ai.ddpReactiveDocument(this,n)}}]),e}();Object.defineProperty(Ve,"__esModule",{value:!0});Ve.ddpCollection=void 0;var ui=function(){function e(t,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),li=_e,fi=fe,di=Le;function hi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Ve.ddpCollection=function(){function e(t,n){pi(this,e),this._name=t,this._server=n,this._filter=!1}return ui(e,[{key:"filter",value:function(n){return this._filter=n,this}},{key:"importData",value:function(n){var s=this,i=typeof n=="string"?EJSON.parse(n):n;i[this._name]&&i[this._name].forEach(function(o,p,v){(!s._filter||s._filter&&s._filter(o,p,v))&&s.ddpConnection.emit("added",{msg:"added",id:o.id,collection:s._name,fields:o.fields})})}},{key:"exportData",value:function(n){var s=hi({},this._name,this.fetch());if(n===void 0||n=="string")return EJSON.stringify(s);if(n=="raw")return s}},{key:"fetch",value:function(n){var s=void 0,i=void 0,o=void 0;n&&(s=n.skip,i=n.limit,o=n.sort);var p=this._server.collections[this._name],v=p?(0,li.fullCopy)(p):[];return this._filter&&(v=v.filter(this._filter)),o&&v.sort(o),typeof s=="number"&&v.splice(0,s),(typeof i=="number"||i==1/0)&&v.splice(i),v}},{key:"reactive",value:function(n){return new di.ddpReactiveCollection(this,n,this._filter)}},{key:"onChange",value:function(n,s){var i={collection:this._name,f:n};return this._filter&&(i.filter=this._filter),s&&(i.filter=s),new fi.ddpOnChange(i,this._server)}}]),e}();(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function r(f,a){for(var d=0;d<a.length;d++){var y=a[d];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}return function(f,a,d){return a&&r(f.prototype,a),d&&r(f,d),f}}(),s=Xe,i=m(s),o=Ne.exports,p=m(o),v=rt,b=_e,l=ot,u=ct,w=Ve;function m(r){return r&&r.__esModule?r:{default:r}}function j(r,f){if(!(r instanceof f))throw new TypeError("Cannot call a class as a function")}function P(){var r=0;return function(){return r++}}var J=P();function S(r){for(var f=this,a=arguments.length,d=Array(a>1?a-1:0),y=1;y<a;y++)d[y-1]=arguments[y];Array.isArray(r)&&r.forEach(function(h){d.forEach(function(g){h[g]&&h[g].call(f)})})}var c=function(){function r(f,a){var d=this;j(this,r),this._id=J(),this._opGenId=P(),this._opts=f,this.ddpConnection=new i.default(f),this.subs=[],this.collections={},this.onChangeFuncs=[],this.connected=!1,this.maxTimeout=f.maxTimeout,this.clearDataOnReconnection=f.clearDataOnReconnection===void 0?!0:f.clearDataOnReconnection,this.tryingToConnect=f.autoConnect===void 0?!0:f.autoConnect,this.tryingToDisconnect=!1,this.willTryToReconnect=f.autoReconnect===void 0?!0:f.autoReconnect;var y=S.bind(this,a);y("init","beforeConnected"),this.connectedEvent=this.on("connected",function(h){d.connected=!0,d.tryingToConnect=!1}),y("afterConnected","beforeSubsRestart"),this.connectedEventRestartSubs=this.on("connected",function(h){d.clearDataOnReconnection?d.clearData().then(function(){d.ddpConnection.emit("clientReady"),d.restartSubs()}):(d.ddpConnection.emit("clientReady"),d.restartSubs())}),y("afterSubsRestart","beforeDisconnected"),this.disconnectedEvent=this.on("disconnected",function(h){d.connected=!1,d.tryingToDisconnect=!1,d.tryingToConnect=d.willTryToReconnect}),y("afterDisconnected","beforeAdded"),this.addedEvent=this.on("added",function(h){return d.dispatchAdded(h)}),y("afterAdded","beforeChanged"),this.changedEvent=this.on("changed",function(h){return d.dispatchChanged(h)}),y("afterChanged","beforeRemoved"),this.removedEvent=this.on("removed",function(h){return d.dispatchRemoved(h)}),y("afterRemoved","after")}return n(r,[{key:"restartSubs",value:function(){this.subs.forEach(function(a){a.isOn()&&a.restart()})}},{key:"collection",value:function(a){return new w.ddpCollection(a,this)}},{key:"dispatchAdded",value:function(a){var d=this;if(this.collections.hasOwnProperty(a.collection)){var y=this.collections[a.collection].findIndex(function(A){return A.id==a.id});y>-1&&this.collections[a.collection].splice(y,1)}this.collections.hasOwnProperty(a.collection)||(this.collections[a.collection]=[]);var h=Object.assign({id:a.id},a.fields),g=this.collections[a.collection].push(h),_={};a.fields&&Object.keys(a.fields).map(function(A){_[A]=1}),this.onChangeFuncs.forEach(function(A){if(A.collection==a.collection){var I=A.hasOwnProperty("filter"),T=(0,b.fullCopy)(h);I?I&&A.filter(T,g-1,d.collections[a.collection])&&A.f({prev:!1,next:T,fields:_,fieldsChanged:T,fieldsRemoved:[]}):A.f({changed:!1,added:T,removed:!1})}})}},{key:"dispatchChanged",value:function(a){var d=this;this.collections.hasOwnProperty(a.collection)||(this.collections[a.collection]=[]);var y=this.collections[a.collection].findIndex(function(T){return T.id==a.id});if(y>-1){var h=(0,b.fullCopy)(this.collections[a.collection][y]),g={},_={},A=[];a.fields&&(_=a.fields,Object.keys(a.fields).map(function(T){g[T]=1}),Object.assign(this.collections[a.collection][y],a.fields)),a.cleared&&(A=a.cleared,a.cleared.forEach(function(T){g[T]=0,delete d.collections[a.collection][y][T]}));var I=this.collections[a.collection][y];this.onChangeFuncs.forEach(function(T){if(T.collection==a.collection){var M=T.hasOwnProperty("filter");if(!M)T.f({changed:{prev:h,next:(0,b.fullCopy)(I),fields:g,fieldsChanged:_,fieldsRemoved:A},added:!1,removed:!1});else{var W=(0,b.fullCopy)(I),ne=T.filter(h,y,d.collections[a.collection]),mt=T.filter(W,y,d.collections[a.collection]);(ne||mt)&&T.f({prev:h,next:W,fields:g,fieldsChanged:_,fieldsRemoved:A,predicatePassed:[ne,mt]})}}})}else this.dispatchAdded(a)}},{key:"dispatchRemoved",value:function(a){var d=this;this.collections.hasOwnProperty(a.collection)||(this.collections[a.collection]=[]);var y=this.collections[a.collection].findIndex(function(g){return g.id==a.id});if(y>-1){var h=this.collections[a.collection].splice(y,1)[0];this.onChangeFuncs.forEach(function(g){if(g.collection==a.collection){var _=g.hasOwnProperty("filter");_?g.filter(h,y,d.collections[a.collection])&&g.f({prev:h,next:!1}):g.f({changed:!1,added:!1,removed:h})}})}}},{key:"connect",value:function(){var a=this;return this.willTryToReconnect=this._opts.autoReconnect===void 0?!0:this._opts.autoReconnect,new Promise(function(d,y){if(a.tryingToConnect||(a.ddpConnection.connect(),a.tryingToConnect=!0),a.connected)d();else var h=a.on("connected",function(){h.stop(),a.tryingToConnect=!1,d()})})}},{key:"disconnect",value:function(){var a=this;return this.willTryToReconnect=!1,new Promise(function(d,y){if(a.tryingToDisconnect||(a.ddpConnection.disconnect(),a.tryingToDisconnect=!0),a.connected)var h=a.on("disconnected",function(){h.stop(),a.tryingToDisconnect=!1,d()});else d()})}},{key:"apply",value:function(a,d){var y=this,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return new Promise(function(g,_){var A=y.ddpConnection.method(a,d||[],h),I=y,T=void 0;function M(W){W.id==A&&(clearTimeout(T),W.error?_(W.error):g(W.result),I.ddpConnection.removeListener("result",M))}y.ddpConnection.on("result",M),y.maxTimeout&&(T=setTimeout(function(){y.ddpConnection.removeListener("result",M),_(new Error)},y.maxTimeout))})}},{key:"call",value:function(a){for(var d=arguments.length,y=Array(d>1?d-1:0),h=1;h<d;h++)y[h-1]=arguments[h];return this.apply(a,y)}},{key:"sub",value:function(a,d){var y=this.subs.find(function(g){return g.pubname==a&&(0,v.isEqual)(g.args,Array.isArray(d)?d:[])});if(y)return y;var h=this.subs.push(new u.ddpSubscription(a,Array.isArray(d)?d:[],this));return this.subs[h-1]}},{key:"subscribe",value:function(a){for(var d=arguments.length,y=Array(d>1?d-1:0),h=1;h<d;h++)y[h-1]=arguments[h];return this.sub(a,y)}},{key:"on",value:function(a,d){return new l.ddpEventListener(a,d,this)}},{key:"stopChangeListeners",value:function(){this.onChangeFuncs=[]}},{key:"clearData",value:function(){var a=this;return new Promise(function(d,y){var h=0;if(Object.keys(a.collections).forEach(function(I){h+=Array.isArray(a.collections[I])?a.collections[I].length:0}),h===0)d();else{var g=0,_=a._id+"-"+a._opGenId(),A=a.on("removed",function(I,T){T==_&&(g++,g==h&&(A.stop(),d()))});Object.keys(a.collections).forEach(function(I){a.collections[I].forEach(function(T){a.ddpConnection.emit("removed",{msg:"removed",id:T.id,collection:I},_)})})}})}},{key:"importData",value:function(a){var d=this;return new Promise(function(y,h){var g=typeof a=="string"?p.default.parse(a):a,_=0;Object.keys(g).forEach(function(M){_+=Array.isArray(g[M])?g[M].length:0});var A=0,I=d._id+"-"+d._opGenId(),T=d.on("added",function(M,W){W==I&&(A++,A==_&&(T.stop(),y()))});Object.keys(g).forEach(function(M){g[M].forEach(function(W){var ne=Object.assign({},W);delete ne.id,d.ddpConnection.emit("added",{msg:"added",id:W.id,collection:M,fields:ne},I)})})})}},{key:"exportData",value:function(a){if(a===void 0||a=="string")return p.default.stringify(this.collections);if(a=="raw")return(0,b.fullCopy)(this.collections)}},{key:"markAsReady",value:function(a){var d=this;return new Promise(function(y,h){var g=d._id+"-"+d._opGenId();d.ddpConnection.emit("ready",{msg:"ready",subs:a.map(function(A){return A._getId()})},g);var _=d.on("ready",function(A,I){I==g&&(_.stop(),y())})})}}]),r}();t.default=c,e.exports=t.default})(Ge,Ge.exports);var yi=Ct(Ge.exports),de=null;typeof WebSocket!="undefined"?de=WebSocket:typeof MozWebSocket!="undefined"?de=MozWebSocket:typeof Re!="undefined"?de=Re.WebSocket||Re.MozWebSocket:typeof window!="undefined"?de=window.WebSocket||window.MozWebSocket:typeof self!="undefined"&&(de=self.WebSocket||self.MozWebSocket);var gi=de;const vi={init:function(){this.userId=void 0,this._loggedIn=!1,this.login=(e,t=!1)=>new Promise((n,s)=>{this.apply("login",[e],t).then(i=>{i&&i.id?(this.userId=i.id,this.token=i.token,this._loggedIn=!0,i.type=="resume"?this.ddpConnection.emit("loginResume",i):this.ddpConnection.emit("login",i),n(i)):s(i)},s)}),this.logout=()=>new Promise((e,t)=>{this._loggedIn?this.apply("logout").then(n=>{this.userId=void 0,this.token=void 0,this._loggedIn=!1,this.ddpConnection.emit("logout"),e()},t):e()}),this.logoutWhenDisconnectedEvent=this.on("disconnected",e=>{this.userId&&(this.ddpConnection.emit("loginSessionLost",this.userId),this.ddpConnection.pauseQueue()),this._loggedIn=!1}),this.clientReadyEvent=this.on("clientReady",()=>{this.userId&&(this.login({resume:this.token},!0).catch(e=>{this.ddpConnection.emit("loginResumeFailed",e)}),this.ddpConnection.continueQueue())})}},U=e=>{const{subscribe:t}=e;return{subscribe:t}};let x=[];const q=new Map,bi=()=>{z("Active subscriptions");for(const[e,t]of q.entries())z(`S:${t._getId()}`,e,t.pubname,t.args)},N={},Vt=D([]),Lt=U(Vt),Ut=D([]),Z=U(Ut),xt=D([]),ut=U(xt),Mt=D([]),lt=U(Mt),Bt=D([]),_i=U(Bt),Wt=D([]),qt=U(Wt),mi=O(qt,e=>{var t;return(t=e==null?void 0:e.filter(n=>n.workspace_type==="live"))!=null?t:[]}),Ft=D([]),Me=U(Ft),$t=D([]),wi=O($t,e=>e.map(s=>{var i=s,{id:t}=i,n=ge(i,["id"]);return Q({_id:t},n)})),Qt=D([]),Oi=O(Qt,e=>e.map(s=>{var i=s,{id:t}=i,n=ge(i,["id"]);return Q({_id:t},n)})),zt=D([]),ki=U(zt),Ht=D([]),he=U(Ht),Kt=D([]),ji=U(Kt),Yt=D([]),Si=U(Yt),Gt=D([]),Pi=U(Gt),Xt=D([]),Ci=U(Xt),Zt=D([]),Ai=U(Zt),en=D([]),tn=U(en),nn=D([]),Di=U(nn),sn=D([]),Ti=U(sn),rn=D([]),an=U(rn),Ji=O(an,e=>{var t;return(t=e==null?void 0:e.filter(n=>n.workspace_type==="live"))!=null?t:[]}),on=D([]),Ei=U(on),ft=D([]),dt=O(ft,e=>e.map(t=>t.uid)),cn=D([]),ht=U(cn),un=D([]),Ri=U(un),Ni=O(Z,e=>{var t,n;return(n=(t=e==null?void 0:e.find(s=>s.name==="running_version"))==null?void 0:t.value)!=null?n:null}),Ii=O(Z,e=>{var t,n;return(n=(t=e==null?void 0:e.find(s=>s.name==="running_patch"))==null?void 0:t.value)!=null?n:null}),Vi=O(Z,e=>{var t;return((t=e==null?void 0:e.find(n=>n.name==="maintenance_mode"))==null?void 0:t.value)===!0}),Li=O(Z,e=>{var t,n;return(n=(t=e==null?void 0:e.find(s=>s.name==="instance_banner"))==null?void 0:t.value)!=null?n:{active:!1,title:"",body:""}}),Ui=O(Z,e=>{var t,n;return(n=(t=e==null?void 0:e.find(s=>s.name==="login_message"))==null?void 0:t.value)!=null?n:{active:!1,title:"",body:""}}),pt=O(Z,e=>{var t,n;return(n=(t=e==null?void 0:e.find(s=>s.name==="job_types_available"))==null?void 0:t.value)!=null?n:[]}),yt=O(pt,e=>{if(Array.isArray(e)){const s={};for(const{name:i,title:o,contains:p}of e)if(Array.isArray(p))for(const t of p){const n=t,{name:v,title:b,title_override:l,shorttitle:u,description:w,develop_only:m,is_interactive:j,is_lightweight:P,input_slot_groups:J,params_base:S,params_secs:c}=n,r=ge(n,["name","title","title_override","shorttitle","description","develop_only","is_interactive","is_lightweight","input_slot_groups","params_base","params_secs"]);typeof v=="string"&&(s[v]=Q({name:v,title:typeof l=="string"?l:typeof b=="string"?b:"Unknown",short:typeof u=="string"?u:"Unknown",description:typeof w=="string"?w:"No description",sectionName:typeof i=="string"?i:"unknown",sectionTitle:typeof o=="string"?o:"Unknown",dev:m,interactive:j,lightweight:P,inputGroups:J,baseParams:S,sections:c},r))}return s}else return{}}),xi=O(pt,e=>e.map(t=>({name:t.name,title:t.title,contains:t.contains.map(m=>{var j=m,{name:n,title:s,title_override:i,shorttitle:o,description:p,develop_only:v,is_interactive:b,input_slot_groups:l,params_base:u}=j,w=ge(j,["name","title","title_override","shorttitle","description","develop_only","is_interactive","input_slot_groups","params_base"]);return Q({name:n,title:typeof i=="string"?i:typeof s=="string"?s:"Unknown",short:typeof o=="string"?o:"Unknown",description:typeof p=="string"?p:"No description",sectionName:t.name,sectionTitle:t.title,dev:v,interactive:b,inputGroups:l,baseParams:u},w)})}))),Mi=(e,t=!1)=>{const s=k(yt)[e];return t&&typeof(s==null?void 0:s.short)=="string"?s.short:typeof(s==null?void 0:s.title)=="string"?s.title:"Unknown job"},Bi=e=>{var s;const n=k(yt)[e];return(s=n==null?void 0:n.baseParams)!=null?s:{}},Wi=O(Z,e=>{var t,n;return(n=(t=e==null?void 0:e.find(s=>s.name==="cluster_configuration_custom_vars"))==null?void 0:t.value)!=null?n:{}}),ln=O(ut,e=>{var t,n;return(n=(t=e==null?void 0:e.find(s=>s.name==="lanes"))==null?void 0:t.value)!=null?n:[]}),gt=O(ut,e=>{var t,n;return(n=(t=e==null?void 0:e.find(s=>s.name==="targets"))==null?void 0:t.value)!=null?n:[]}),we=O(Lt,e=>Array.isArray(e)?e.map(({id:t,username:n,name:s,firstName:i,first_name:o,lastName:p,last_name:v,roles:b,emails:l,created_at:u,register_token:w,reset_token:m,lanes:j,state:P})=>{var J,S,c,r,f,a,d,y,h,g,_,A;return{id:t.replace("-",""),username:n!=null?n:s,name:s,firstName:o!=null?o:i,lastName:v!=null?v:p,fullName:[(J=o!=null?o:i)!=null?J:"",(S=v!=null?v:p)!=null?S:""].join(" "),initials:`${(f=(r=(c=o!=null?o:i)==null?void 0:c.substring(0,1))==null?void 0:r.toUpperCase())!=null?f:"?"}${(y=(d=(a=v!=null?v:p)==null?void 0:a.substring(0,1))==null?void 0:d.toUpperCase())!=null?y:"?"}`,isAdmin:(g=(h=b==null?void 0:b.__global_roles__)==null?void 0:h.includes("admin"))!=null?g:!1,email:(A=(_=l==null?void 0:l[0])==null?void 0:_.address)!=null?A:"unknown",createdAt:u,tokens:{register:w!=null?w:null,reset:m!=null?m:null},userCanModifyLiveDataManagement:(P==null?void 0:P.userCanModifyLiveDataManagement)===!0,userCanSetJobPriority:(P==null?void 0:P.userCanSetJobPriority)===!0,defaultJobPriority:typeof(P==null?void 0:P.defaultJobPriority)=="number"?P==null?void 0:P.defaultJobPriority:null,lanes:j!=null?j:null}}):[]),qi=O(we,e=>{if(Array.isArray(e)){const t={};for(const{id:n,firstName:s,lastName:i,username:o,email:p}of e){const v=n.replace("-","");typeof s=="string"&&typeof i=="string"?t[v]=`${s} ${i}`:typeof o=="string"?t[v]=o:typeof p=="string"?t[v]=p:t[v]=v}return t}else return{}}),Fi=O([ft,we],([e,t])=>{const n=[],s=e.reduce((i,o)=>{var p;return[...new Set([...i,(p=o.owner_user_id)!=null?p:""])]},n);return t.filter(i=>s.includes(i.id))}),$i=O(we,e=>{var t,n,s,i;if(Array.isArray(e)){const o={};for(const{id:p,firstName:v,lastName:b}of e){const l=p.replace("-","");o[l]=`${(n=(t=v==null?void 0:v.substring(0,1))==null?void 0:t.toUpperCase())!=null?n:"?"}${(i=(s=b==null?void 0:b.substring(0,1))==null?void 0:s.toUpperCase())!=null?i:"?"}`}return o}else return{}}),vt=O([ht,dt],([e,t])=>[...e].filter(n=>n.deleted===!1&&n.status==="queued").sort((n,s)=>{var i,o;return new Date((i=s.queued_at)!=null?i:0).getTime()-new Date((o=n.queued_at)!=null?o:0).getTime()}).sort((n,s)=>t.includes(s.project_uid)?1:t.includes(n.project_uid)?-1:0)),Oe=O([ht,dt],([e,t])=>[...e].filter(n=>n.deleted===!1&&["launched","started","waiting","running"].includes(n.status)).sort((n,s)=>{var i,o;return new Date((i=s.launched_at)!=null?i:0).getTime()-new Date((o=n.launched_at)!=null?o:0).getTime()}).sort((n,s)=>t.includes(s.project_uid)?1:t.includes(n.project_uid)?-1:0)),Qi=O(Me,e=>e.filter(t=>t.deleted===!1&&["completed","failed","killed"].includes(t.status))),zi=O(vt,e=>e.length),Hi=O(Oe,e=>e.length),Ki=O(vt,e=>e.reduce((t,n)=>{var i;if(typeof n.queued_to_lane=="undefined")return t;const s=(i=n.queued_to_lane)!=null?i:"null";return ye(Q({},t),{[s]:t[s]?[...t[s],n]:[n]})},{})),Yi=O(Oe,e=>e.reduce((t,n)=>{var i;if(typeof n.queued_to_lane=="undefined")return t;const s=(i=n.queued_to_lane)!=null?i:"null";return ye(Q({},t),{[s]:t[s]?[...t[s],n]:[n]})},{})),Gi=O(Oe,e=>e.reduce((t,n)=>{var s,i,o,p,v,b;return ye(Q({},t),{[(i=(s=n.resources_allocated)==null?void 0:s.hostname)!=null?i:""]:t[(p=(o=n.resources_allocated)==null?void 0:o.hostname)!=null?p:""]?[...t[(b=(v=n.resources_allocated)==null?void 0:v.hostname)!=null?b:""],n]:[n]})},{})),fn=(e,t)=>{if(Array.isArray(t)){const n=t.map(s=>{var i;return((i=s.resources_allocated)==null?void 0:i.hostname)?s.resources_allocated.hostname:""}).filter((s,i,o)=>o.indexOf(s)===i).filter(Boolean);return e.filter(s=>n.includes(s.hostname))}else return[]},dn=O([gt,Oe],([e,t])=>fn(e,t)),Xi=O(gt,e=>e.reduce((t,n)=>ye(Q({},t),{[n.name]:n}),{})),Zi=O(dn,e=>e.length),er=O(tn,e=>e.filter(t=>t.active)),tr=(e,t)=>O(lt,n=>n.filter(s=>s.project_uid===e&&s.job_uid===t&&s.type!=="checkpoint").sort((s,i)=>s.created_at.getTime()-i.created_at.getTime())),nr=(e,t)=>O(lt,n=>n.filter(s=>s.project_uid===e&&s.job_uid===t&&s.type==="checkpoint").sort((s,i)=>s.created_at.getTime()-i.created_at.getTime())),sr=O(he,e=>e.filter(t=>t.type===ve.general)),ir=O(he,e=>e.filter(t=>t.type===ve.project)),rr=O(he,e=>e.filter(t=>t.type===ve.workspace)),ar=O(he,e=>e.filter(t=>t.type===ve.session)),or=O(he,e=>e.filter(t=>t.type===ve.job)),cr=O([ln,we,Ye],([e,t,n])=>{const s=t.find(i=>{var o;return i.id===((o=n.user)==null?void 0:o.id)});return(s==null?void 0:s.isAdmin)===!0?e:s?e.filter(i=>{var o;return((o=s.lanes)!=null?o:[]).includes(i.name)}):[]}),hn=O(Ye,e=>e.ddpToken),ur=D(!1),Be=D(!1),ee=D(null);class lr{constructor(t){kt(this,"str");this.str=t}toJSONValue(){return this.value()}typeName(){return"oid"}value(){return this.str}}Qn.addType("oid",function(t){return new lr(t)});const fr=async()=>await bt("getVisibleProjectsCount"),dr=async()=>await bt("getLatestProjectCards","P88"),ke=new Set,je=new Map,hr=()=>{var e;if(!ke.size&&je.size){const t=je.entries();for(const[n,s]of t){const i=(e=N[n])==null?void 0:e.data();i&&s.set(i)}je.clear()}},pr=()=>{if(!!k(ee))for(const e of x)e.isOn()||e.start(e.args)},V=(e,t,n)=>{const s=e.collection(t).reactive();return s.onChange(i=>{ke.size?je.has(t)||je.set(t,n):n.set(i)}),s},yr=async e=>{if(!k(ee))try{N.users=V(e,"users",Vt);const t=k(hn);if(typeof t=="string")await e.login({resume:t});else throw new Error("missing ddpToken or no server context");N.config=V(e,"config",Ut),N.sched_config=V(e,"sched_config",xt),N.events=V(e,"events",Mt),N.projects=V(e,"projects",Bt),N.workspaces=V(e,"workspaces",Wt),N.jobs=V(e,"jobs",Ft),N.workflows=V(e,"workflows",$t),N.blueprints=V(e,"blueprints",Qt),N.exposures=V(e,"exposures",zt),N.tags=V(e,"tags",Ht),N.pipeline_stages=V(e,"pipeline_stages",Kt),N.pipeline_state_data=V(e,"pipeline_state_data",Yt),N.pipeline_workers=V(e,"pipeline_workers",Gt),N.pipeline_work=V(e,"pipeline_work",Xt),N.interactive=V(e,"interactive",Zt),N.notifications=V(e,"notifications",en),N.reports=V(e,"reports",nn),N.applicable_projects=V(e,"applicable_projects",ft),N.current_jobs=V(e,"current_jobs",cn),N["counters-collection"]=V(e,"counters-collection",un),N.starred_projects=V(e,"starred_projects",sn),N.starred_workspaces=V(e,"starred_workspaces",rn),N.starred_jobs=V(e,"starred_jobs",on),x.push(B(e,"config")),x.push(B(e,"scheduler")),x.push(B(e,"allUsers")),x.push(B(e,"queuedJobs")),x.push(B(e,"activeJobs")),x.push(B(e,"recentJobs")),x.push(B(e,"allBlueprints")),x.push(B(e,"allWorkflows")),x.push(B(e,"notifications")),x.push(B(e,"instanceStats")),x.push(B(e,"applicableProjects")),x.push(B(e,"currentJobs")),x.push(B(e,"allTags")),x.push(B(e,"starredProjects")),x.push(B(e,"starredWorkspaces")),x.push(B(e,"starredJobs")),ee.set(e),Be.set(!0)}catch(t){Mn("DDP Engagement Error: ",t)}},gr=()=>{const e=k(Ye).ddpToken;if(typeof e!="string"){St("DDP connection cannot be established: missing ddpToken");return}z("Init DDP",e);const t=new yi({endpoint:`${location.protocol==="http:"?"ws":"wss"}://${location.host}${window.pathPrefix}/websocket`,SocketConstructor:gi,reconnectInterval:5e3},[vi]);t.on("connected",()=>{xn("DDP server: connected",t._id),pr(),yr(t)}),t.on("disconnected",()=>{z("DDP server: disconnected",t._id),Be.set(!1)}),t.on("error",n=>{Pt("DDP server: error",n,t._id)}),t.on("loginSessionLost",()=>{z("server: loginSessionLost",t._id)}),t.on("loginResume",n=>{z("DDP server: loginResume",n),Be.set(!0)}),t.on("loginResumeFailed",()=>{z("DDP server: loginResumeFailed")})},vr=async()=>{var e;z("Terminate DDP"),await((e=k(ee))==null?void 0:e.disconnect()),x=[],ee.set(null)},pn=(e,t)=>{var n,s;if(q.has(e)){ce("data","unsubscribe",e,(n=q.get(e))==null?void 0:n.pubname);const i=q.get(e);let o=!1;q.forEach((p,v)=>{v!==e&&p._getId()===(i==null?void 0:i._getId())&&(o=!0)}),o||(s=q.get(e))==null||s.remove(),q.delete(e),ke.delete(e),t==null||t.set(!1)}},br=(e,t,n,...s)=>{var o,p,v;const i=k(ee);if(i===null){St("Subscribe call on empty server context");return}return In(()=>pn(e,n)),ce("data","subscribe:",e,t,"args:",s),n==null||n.set(!0),ke.add(e),q.has(e)?(ce("data","subscribe-restart:",e,t,"args:",s),(o=q.get(e))==null||o.restart(s),q.get(e)):(q.set(e,i.sub(t,s)),(p=q.get(e))==null||p.onReady(()=>{ce("data","subscribe-ready:",e,t,"args:",s),ke.delete(e),hr(),n==null||n.set(!1)}),(v=q.get(e))==null||v.onNosub(()=>{ce("data","subscribe-nosub:",e,t,"args:",s)}),q.get(e))},B=(e,t,...n)=>e.sub(t,n),_r=["getLatestProjectCards","latestExposurePreview","getSessionJobStatuses"],bt=async(e,...t)=>{const n=k(ee);if(n!==null)try{return _r.includes(e)||z("callMethod:",e,t),await n.apply(e,t)}catch(s){return console.error(s),await Promise.resolve(null)}else return await Promise.resolve(null)};var Ma=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get globalSubscriptions(){return x},activeSubscriptions:q,logActiveSubscriptions:bi,collections:N,users:Lt,config:Z,schedulerConfig:ut,events:lt,projects:_i,workspaces:qt,sessions:mi,jobs:Me,workflows:wi,blueprints:Oi,exposures:ki,tags:he,pipelineStages:ji,pipelineStateData:Si,pipelineWorkers:Pi,pipelineWork:Ci,interactive:Ai,notifications:tn,reports:Di,starredProjects:Ti,starredWorkspaces:an,starredSessions:Ji,starredJobs:Ei,applicableProjects:dt,currentJobs:ht,counters:Ri,runningVersion:Ni,runningPatch:Ii,maintenanceMode:Vi,instanceBanner:Li,loginMessage:Ui,jobTypesAvailable:pt,allJobTypes:yt,jobSectionsAndTypes:xi,getJobTypeLabel:Mi,getJobTypeParams:Bi,instanceClusterConfigCustomVars:Wi,lanes:ln,targets:gt,allUsers:we,allUserNames:qi,applicableUsers:Fi,allUserInitials:$i,queuedJobs:vt,activeJobs:Oe,recentJobs:Qi,queuedJobCount:zi,activeJobCount:Hi,queuedJobsByLane:Ki,activeJobsByLane:Yi,activeJobsByHostname:Gi,getActiveTargets:fn,activeTargets:dn,targetsByName:Xi,activeTargetCount:Zi,activeNotifications:er,eventLogs:tr,eventLogCheckpoints:nr,generalTags:sr,projectTags:ir,workspaceTags:rr,sessionTags:ar,jobTags:or,availableLanes:cr,ddpToken:hn,initialized:ur,connected:Be,server:ee,getVisibleProjectsCount:fr,getProjectCards:dr,initDdp:gr,terminateDdp:vr,unsubscribe:pn,subscribe:br,subDirect:B,callMethod:bt});const We=D(!1),qe=D(!1),Fe=D(!1),$e=D(!1),Qe=D(!1),mr=()=>k(We)?We.set(!1):We.set(!0),wr=()=>k(qe)?qe.set(!1):qe.set(!0),Or=()=>k(Fe)?Fe.set(!1):Fe.set(!0),kr=()=>k($e)?$e.set(!1):$e.set(!0),jr=()=>k(Qe)?Qe.set(!1):Qe.set(!0),Sr=D(!1),Pr=D(null),ae=ue(le.jobCart,{}),Se=ue(le.jobCartProjectUid,null),yn=O(ae,e=>{const t=[];for(const n of Object.values(e))for(const[,{group:s,count:i}]of Object.entries(n))t.push(...Array(i).fill(s));return t});let gn=!1;yn.subscribe(e=>{gn?(ce("sidebar","listening",e.length),te.set(ie.cart)):gn=!0});const Cr=(e,t)=>{const n=k(Se);if(n===null||n===e){console.log("Add to job cart",t),n===null&&Se.set(e);const s=k(ae);s[t.type]===void 0?s[t.type]={[t.uid]:{count:1,group:t}}:s[t.type][t.uid]===void 0?s[t.type][t.uid]={count:1,group:t}:s[t.type][t.uid].count+=1,ae.set(s)}},Ar=e=>{var n,s,i;const t=k(ae);((s=(n=t[e.type])==null?void 0:n[e.uid])==null?void 0:s.count)>1?t[e.type][e.uid].count-=1:typeof((i=t[e.type])==null?void 0:i[e.uid])!="undefined"&&delete t[e.type][e.uid],Object.entries(t[e.type]).length===0&&delete t[e.type],ae.set(t),Object.entries(t).length===0&&Se.set(null)},Dr=()=>{ae.set({}),Se.set(null)},Tr=D(null),Jr=D(null),te=ue(le.sidebarPanel,ie.details),Er=e=>{te.set(e)},vn=()=>{te.set(ie.details)},bn=()=>{te.set(ie.builder)},Rr=()=>{Pe(),te.set(ie.builder)},Nr=()=>{te.set(ie.cart)},Ir=()=>{te.set(ie.workflows)};var Ba=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",projectActionsPanelExpanded:We,workspaceActionsPanelExpanded:qe,sessionActionsPanelExpanded:Fe,jobActionsPanelExpanded:$e,multiJobActionsPanelExpanded:Qe,toggleProjectActionsPanel:mr,toggleWorkspaceActionsPanel:wr,toggleSessionActionsPanel:Or,toggleJobActionsPanel:kr,toggleJobMultiActionsPanel:jr,showProjectDirectoryUpdateAlert:Sr,projectUidForDirectoryUpdate:Pr,jobCart:ae,jobCartProjectUid:Se,jobCartGroups:yn,addToCart:Cr,removeFromCart:Ar,clearCart:Dr,draggingResultGroup:Tr,draggingResultSlot:Jr,activePanel:te,setActivePanel:Er,showDetails:vn,showBuilder:bn,showNewJob:Rr,showJobCart:Nr,showWorkflows:Ir});const ze=Bn(),pe=ue(le.builderJob,null),_n=(e,t)=>{pe.set({projectUid:e,jobUid:t}),bn()},Pe=()=>{vn(),pe.set(null)},Vr=()=>{var e,t,n,s;if(k(_t)===1){const[i,o]=k(oe)[0].split("-");if(((t=(e=k(Me).find(v=>v.project_uid===i&&v.uid===o))==null?void 0:e.status)!=null?t:null)!=="building")return Pe();((n=k(pe))==null?void 0:n.projectUid)!==i&&((s=k(pe))==null?void 0:s.jobUid)!==o?_n(i,o):Pe()}else k(pe)!==null&&Pe()},Lr=async()=>{var e;if(k(_t)===1){const t=await(await Wn(()=>import("./jobs.7ab064ef.js").then(function(o){return o.bh}),["assets/jobs.7ab064ef.js","assets/vendor.3ae73048.js","assets/index.146c2037.js","assets/index.c82b1418.css","assets/helpers.7177ca38.js","assets/index.c4392b02.js","assets/jobs.d50d1674.js"])).toggleFinalResult,[n,s]=k(oe)[0].split("-"),i=((e=k(Me).find(o=>o.project_uid===n&&o.uid===s))==null?void 0:e.is_final_result)===!0;t(n,s,i)}},C=ue(le.selected,[]),Ur=O(C,e=>e.length),H=ue(le.activeSelection,null),xr=O([C,H],([e,t])=>e.find(n=>(n==null?void 0:n.identifier)===t)),Mr=O(C,e=>e.filter(t=>t.selection===Y.project)),Ce=O(C,e=>e.filter(t=>t.selection===Y.project).map(t=>t.identifier)),Br=O(Ce,e=>e.length),Wr=O(C,e=>e.filter(t=>t.selection===Y.workspace)),Ae=O(C,e=>e.filter(t=>t.selection===Y.workspace).map(t=>t.identifier)),qr=O(Ae,e=>e.length),Fr=O(C,e=>e.filter(t=>t.selection===Y.session)),De=O(C,e=>e.filter(t=>t.selection===Y.session).map(t=>t.identifier)),$r=O(De,e=>e.length),Qr=O(C,e=>e.filter(t=>t.selection===Y.job)),oe=O(C,e=>e.filter(t=>t.selection===Y.job).map(t=>t.identifier)),_t=O(oe,e=>e.length),K=()=>{var e,t,n,s;H.set((s=(n=(t=(e=k(C))==null?void 0:e.sort((i,o)=>o.timestamp-i.timestamp))==null?void 0:t[0])==null?void 0:n.identifier)!=null?s:null)},zr=e=>{H.set(e)},Hr=()=>{C.set([]),H.set(null)},Kr=(e,t=null)=>k(C).map(n=>n.identifier).includes(t!==null?`${e}-${t}`:e),Yr=(e,t,n=!0)=>{const s=ze===Ee.macintosh?e==null?void 0:e.metaKey:e==null?void 0:e.ctrlKey;k(Ce).includes(t)?(e==null?void 0:e.metaKey)&&mn(t):((s!=null?s:!1)||!n?C.set([...k(C),{selection:F.project,timestamp:new Date().getTime(),identifier:t,projectUid:t}]):C.set([{selection:F.project,timestamp:new Date().getTime(),identifier:t,projectUid:t}]),H.set(t))},mn=e=>{k(Ce).includes(e)&&(C.set(k(C).filter(t=>t.identifier!==e)),K())},Gr=()=>{k(Ce).length&&(C.set(k(C).filter(e=>e.selection!==F.project)),K())},Xr=(e,t,n,s=!0)=>{const i=`${t}-${n}`,o=ze===Ee.macintosh?e==null?void 0:e.metaKey:e==null?void 0:e.ctrlKey;k(Ae).includes(i)?e.metaKey&&wn(t,n):((o!=null?o:!1)||!s?C.set([...k(C),{selection:F.workspace,timestamp:new Date().getTime(),identifier:i,projectUid:t,workspaceUid:n}]):C.set([{selection:F.workspace,timestamp:new Date().getTime(),identifier:i,projectUid:t,workspaceUid:n}]),H.set(i))},wn=(e,t)=>{const n=`${e}-${t}`;k(Ae).includes(n)&&(C.set(k(C).filter(s=>s.identifier!==n)),K())},Zr=()=>{k(Ae).length&&(C.set(k(C).filter(e=>e.selection!==F.workspace)),K())},ea=(e,t,n,s=!0)=>{const i=`${t}-${n}`,o=ze===Ee.macintosh?e==null?void 0:e.metaKey:e==null?void 0:e.ctrlKey;k(De).includes(i)?(e==null?void 0:e.metaKey)&&On(t,n):((o!=null?o:!1)||!s?C.set([...k(C),{selection:F.session,timestamp:new Date().getTime(),identifier:i,projectUid:t,sessionUid:n}]):C.set([{selection:F.session,timestamp:new Date().getTime(),identifier:i,projectUid:t,sessionUid:n}]),H.set(i))},On=(e,t)=>{const n=`${e}-${t}`;k(De).includes(n)&&(C.set(k(C).filter(s=>s.identifier!==n)),K())},ta=()=>{k(De).length&&(C.set(k(C).filter(e=>e.selection!==F.session)),K())},kn=(e,t,n,s=!0)=>{const i=`${t}-${n}`,o=ze===Ee.macintosh?e==null?void 0:e.metaKey:e==null?void 0:e.ctrlKey;k(oe).includes(i)?(e==null?void 0:e.metaKey)&&jn(t,n):((o!=null?o:!1)||!s?C.set([...k(C),{selection:F.job,timestamp:new Date().getTime(),identifier:i,projectUid:t,jobUid:n}]):C.set([{selection:F.job,timestamp:new Date().getTime(),identifier:i,projectUid:t,jobUid:n}]),H.set(i))},na=(e,t,n=!0)=>{const s=t.map(i=>({selection:F.job,timestamp:new Date().getTime(),identifier:`${e}-${i}`,projectUid:e,jobUid:i}));n?C.set(s):C.set([...k(C),...s]),K()},jn=(e,t)=>{const n=`${e}-${t}`;k(oe).includes(n)&&(C.set(k(C).filter(s=>s.identifier!==`${e}-${t}`)),K())},sa=()=>{k(oe).length&&(C.set(k(C).filter(e=>e.selection!==F.job)),K())};var Wa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",builderJob:pe,setBuilderJob:_n,clearBuilderJob:Pe,toggleBuilderJob:Vr,toggleFinalJob:Lr,selected:C,selectedCount:Ur,activeSelection:H,active:xr,activeProjects:Mr,selectedProjects:Ce,selectedProjectsCount:Br,activeWorkspaces:Wr,selectedWorkspaces:Ae,selectedWorkspacesCount:qr,activeSessions:Fr,selectedSessions:De,selectedSessionsCount:$r,activeJobs:Qr,selectedJobs:oe,selectedJobsCount:_t,setActive:zr,clearAll:Hr,isSelected:Kr,selectProject:Yr,deselectProject:mn,deselectAllProjects:Gr,selectWorkspace:Xr,deselectWorkspace:wn,deselectAllWorkspaces:Zr,selectSession:ea,deselectSession:On,deselectAllSessions:ta,selectJob:kn,selectMultipleJobs:na,deselectJob:jn,deselectAllJobs:sa});const ia=O(Je,e=>e.params),ra=O([Je,L],([e,t])=>`${e.toString()}${t.toString()}`),He=O(jt,e=>{const t=e.toString(),n={type:"home",valid:!0};if(t===G.home)n.type=E.home;else if(t===G.login)n.type=E.login;else if(t===G.resetPassword)n.type=E.resetPassword;else if(t===G.createAccount)n.type=E.createAccount;else if(t===G.extend)n.type=E.extend;else if(t.startsWith(G.browse.slice(0,-9))){const s=t.split("/").filter(Boolean).slice(4);if(s.length!==1)n.valid=!1,n.redirect="P*";else{const i=s[0].toUpperCase().split("-").filter(Boolean);i.length>3?(n.valid=!1,n.redirect="P*"):i.length===1&&X(i[0],"P")?n.type=E.projects:i.length===2&&re(i[0],"P")&&X(i[1],"W")?(n.type=E.workspaces,$(i[0],"P")&&(n.projectUid=i[0])):i.length===2&&re(i[0],"P")&&X(i[1],"S")?(n.type=E.sessions,$(i[0],"P")&&(n.projectUid=i[0])):i.length===2&&re(i[0],"P")&&X(i[1],"J")?(n.type=E.jobs,$(i[0],"P")&&(n.projectUid=i[0])):i.length===3&&re(i[0],"P")&&re(i[1],"W")&&X(i[2],"J")?X(i[0],"P")&&$(i[1],"W")?(n.valid=!1,n.redirect="P*-J*"):(n.type=E.jobs,$(i[0],"P")&&(n.projectUid=i[0]),$(i[1],"W")&&(n.workspaceUid=i[1])):i.length===3&&re(i[0],"P")&&re(i[1],"S")&&X(i[2],"J")?X(i[0],"P")&&$(i[1],"S")?(n.valid=!1,n.redirect="P*-J*"):(n.type=E.jobs,$(i[0],"P")&&(n.projectUid=i[0]),$(i[1],"S")&&(n.sessionUid=i[1])):(n.valid=!1,n.redirect="P*")}}else if(t.startsWith(G.liveDev.slice(0,-9))){const s=t.split("/").filter(Boolean).slice(4);if(console.log("livdev search",s),s.length!==1)n.valid=!1,n.redirect="P*-S*";else{const i=s[0].toUpperCase().split("-").filter(Boolean);console.log("livdev tokens",i),i.length===2&&$(i[0],"P")&&$(i[1],"S")?(n.type=E.singleSessionDev,n.projectUid=i[0],n.sessionUid=i[1]):(n.valid=!1,n.redirect="P*-S*")}}else if(t.startsWith(G.live.slice(0,-9))){const s=t.split("/").filter(Boolean).slice(4);if(s.length!==1)n.valid=!1,n.redirect="P*-S*";else{const i=s[0].toUpperCase().split("-").filter(Boolean);i.length===2&&$(i[0],"P")&&$(i[1],"S")?(n.type=E.singleSession,n.projectUid=i[0],n.sessionUid=i[1]):(n.valid=!1,n.redirect="P*-S*")}}return n}),Sn=/^#user\((.*)\)$/i,Pn=/^#job\((P[0-9]+)-(J[0-9]+)\)$/i,Cn=/^#compare\((.*)\)$/i,An=/^#target\((.*)\)$/i,Dn=/^#manage\((.*)\)$/i,aa=/^(P[0-9]+)-(J[0-9]+)$/i,Tn=O(L,e=>{const t={type:null,valid:!0};if(e==="#updates")t.type=R.updates;else if(e==="#settings")t.type=R.settings;else if(e==="#admin")t.type=R.admin;else if(e==="#shortcuts")t.type=R.shortcuts;else if(e==="#tools")t.type=R.tools;else if(e==="#failedExposures")t.type=R.failedExposures;else if(e.startsWith("#user")&&Sn.exec(e)!==null){const n=Sn.exec(e);n===null?t.valid=!1:(t.type=R.user,t.username=decodeURIComponent(n[1]))}else if(e.startsWith("#job")&&Pn.exec(e)!==null){const n=Pn.exec(e);n===null||typeof n[1]!="string"||typeof n[2]!="string"?t.valid=!1:(t.type=R.job,t.projectUid=decodeURIComponent(n[1]),t.jobUid=decodeURIComponent(n[2]))}else if(e.startsWith("#compare")&&Cn.exec(e)!==null){const n=Cn.exec(e);if(n===null||typeof n[1]!="string")t.valid=!1;else{const s=n[1].split(",").filter(Boolean);s.length<2?t.valid=!1:s.every(i=>aa.exec(i)!==null)?(t.type=R.compare,t.compareType="jobs",t.compareJobs=s.map(i=>{const[o,p]=i.split("-");return{projectUid:o,jobUid:p}})):t.valid=!1}}else if(e.startsWith("#target")&&An.exec(e)!==null){const n=An.exec(e);n===null||typeof n[1]!="string"?t.valid=!1:(t.type=R.target,t.target=decodeURIComponent(n[1]))}else if(e.startsWith("#manage")&&Dn.exec(e)!==null){const n=Dn.exec(e);if(n===null||typeof n[1]!="string")t.valid=!1;else{const s=decodeURIComponent(n[1]);s==="current-jobs"?(t.type=R.manage,t.manage=be.currentJobs):s==="project-data"?(t.type=R.manage,t.manage=be.projectData):s==="session-data"?(t.type=R.manage,t.manage=be.sessionData):s==="backups"?(t.type=R.manage,t.manage=be.backups):s==="benchmarks"?(t.type=R.manage,t.manage=be.benchmarks):(t.type=R.manage,t.manage=decodeURIComponent(n[1]))}}else t.valid=!1;return t.valid===!1&&typeof e=="string"&&e.length>0&&(Pt(`[dialog] clearing invalid fragment -> ${e}`),L.set("")),t}),Jn=O([He,Tn],([e,t])=>{var n,s,i,o;if(typeof t.type=="string")switch(t.type){case R.updates:return"Updates";case R.settings:return"Settings";case R.admin:return"Admin";case R.shortcuts:return"Shortcuts";case R.tools:return"Tools";case R.failedExposures:return"Failed Exposures";case R.user:return`User: ${t.username}`;case R.job:return`Job: ${t.projectUid} ${t.jobUid}`;case R.compare:return`Compare: ${t.compareType}`;case R.target:return`Target: ${t.target}`;case R.manage:return`Manage: ${t.manage}`;default:return""}else switch(e.type){case E.home:return"Home";case E.login:return"Log In";case E.resetPassword:return"Reset Password";case E.createAccount:return"Create Account";case E.projects:return"Projects";case E.workspaces:return typeof e.projectUid=="string"?`Workspaces in ${e.projectUid}`:"Workspaces";case E.sessions:return typeof e.projectUid=="string"?`Sessions in ${e.projectUid}`:"Sessions";case E.jobs:return typeof e.projectUid=="string"&&typeof e.workspaceUid=="string"?`Jobs in ${e.projectUid} ${e.workspaceUid}`:typeof e.projectUid=="string"&&typeof e.sessionUid=="string"?`Jobs in ${e.projectUid} ${e.sessionUid}`:typeof e.projectUid=="string"?`Jobs in ${e.projectUid}`:"Jobs";case E.singleSession:return`${(n=e.projectUid)!=null?n:""} ${(s=e.sessionUid)!=null?s:""}`;case E.singleSessionDev:return`${(i=e.projectUid)!=null?i:""} ${(o=e.sessionUid)!=null?o:""} (DEV)`;default:return""}}),oa=O(He,e=>{switch(e.type){case E.home:return!0;case E.projects:return!0;case E.workspaces:return!e.projectUid;case E.sessions:return!e.projectUid;case E.jobs:return!e.projectUid&&!e.workspaceUid&&!e.sessionUid;default:return!1}});Jn.subscribe(e=>{e.length>0?document.title=`${e} | CryoSPARC`:document.title="CryoSPARC"});const ca=()=>{const{pathname:e,search:t}=new URL(window.location.href),n=k(He),s=Vn(t);return{path:e,queryString:t,searchObject:n,queryObject:s}},ua=(e,t="")=>se(`${window.pathPrefix}/browse/${e}-W*${t}`),la=(e,t="")=>se(`${window.pathPrefix}/browse/${e}-S*${t}`),fa=(e,t="")=>se(`${window.pathPrefix}/browse/${e}-J*${t}`),da=(e,t,n="")=>se(`${window.pathPrefix}/browse/${e}-${t}-J*${n}`),ha=(e,t,n="")=>se(`${window.pathPrefix}/browse/${e}-${t}-J*${n}`),pa=(e,t)=>se(`${window.pathPrefix}/live/${e}-${t}`),ya=()=>{L.set("#updates")},ga=()=>{L.set("#settings")},va=()=>{L.set("#admin")},ba=()=>{L.set("#shortcuts")},_a=()=>{L.set("#tools")},ma=()=>{L.set("#failedExposures")},wa=e=>{L.set(`#user(${e})`)},Oa=(e,t,n=!1,s=!0)=>{n&&kn(null,e,t,s),L.set(`#job(${e}-${t})`)},ka=(...e)=>{L.set(`#compare(${e.join(",")})`)},ja=e=>{L.set(`#target(${e})`)},Sa=()=>{L.set("#manage(current-jobs)")},Pa=()=>{L.set("#manage(tags)")},Ca=()=>{L.set("#manage(project-data)")},Aa=()=>{L.set("#manage(session-data)")},Da=()=>{L.set("#manage(notifications)")},Ta=()=>{L.set("#manage(instance)")},Ja=()=>{L.set("#manage(backups)")},Ea=()=>{L.set("#manage(benchmarks)")},Ra=()=>{L.set("")},Na=e=>{Je.set(e)};var qa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",path:jt,query:Je,fragment:L,goto:se,state:Ln,url:Un,queryParams:ia,queryString:ra,page:He,dialog:Tn,label:Jn,onTopLevel:oa,getBrowseUrlData:ca,goToProjectWorkspaces:ua,goToProjectSessions:la,goToProjectJobs:fa,goToWorkspaceJobs:da,goToSessionJobs:ha,goToSession:pa,viewUpdates:ya,viewSettings:ga,viewAdmin:va,viewKeyboardShortcuts:ba,viewTools:_a,viewFailedExposures:ma,viewUserProfile:wa,viewJob:Oa,viewComparison:ka,viewTarget:ja,viewCurrentJobs:Sa,viewTags:Pa,viewProjectDataManagement:Ca,viewSessionDataManagement:Aa,viewNotifications:Da,viewInstanceInformation:Ta,viewBackups:Ja,viewBenchmarks:Ea,closeDialog:Ra,setQueryString:Na});export{Gr as $,Yr as A,mn as B,Re as C,xa as D,qt as E,Ae as F,Xr as G,wn as H,ua as I,Me as J,yt as K,_n as L,pe as M,Pe as N,Ra as O,jn as P,na as Q,da as R,sa as S,wi as T,Oi as U,cr as V,$i as W,xi as X,Ua as Y,sr as Z,or as _,dt as a,bn as a$,Zr as a0,pa as a1,yn as a2,Se as a3,Dr as a4,Er as a5,br as a6,B as a7,ee as a8,Pi as a9,_t as aA,Sa as aB,Pa as aC,Ca as aD,Aa as aE,Ta as aF,Da as aG,va as aH,ba as aI,wa as aJ,Be as aK,Ui as aL,Sr as aM,Fi as aN,vt as aO,fa as aP,ir as aQ,rr as aR,ar as aS,Mi as aT,ra as aU,la as aV,ta as aW,ln as aX,Bi as aY,Cr as aZ,Ir as a_,ji as aa,lt as ab,Ct as ac,Ur as ad,Hr as ae,Oa as af,ka as ag,Vr as ah,Lr as ai,qa as aj,Ma as ak,Wa as al,Ba as am,Rr as an,Ni as ao,Ii as ap,Vi as aq,an as ar,Ti as as,Ji as at,Ei as au,te as av,xr as aw,Br as ax,qr as ay,$r as az,er as b,Jn as b0,vn as b1,Nr as b2,Xi as b3,Gi as b4,Ja as b5,Ea as b6,Pr as b7,Wi as b8,gt as b9,$e as ba,kr as bb,Jr as bc,Tr as bd,We as be,mr as bf,qe as bg,wr as bh,Fe as bi,ha as bj,Or as bk,Qe as bl,jr as bm,Qi as bn,ae as bo,Ar as bp,ja as bq,fn as br,ki as bs,ma as bt,nr as bu,tr as bv,tn as bw,Yi as bx,Ki as by,kn as c,Tn as d,Oe as e,bt as f,gr as g,Ri as h,Li as i,he as j,mi as k,ca as l,qi as m,De as n,C as o,He as p,ia as q,ea as r,oe as s,vr as t,Lt as u,ya as v,On as w,we as x,_i as y,Ce as z};
