import{S as we,h as ke,s as $e,af as Ce,at as Fe,Q as V,C as P,I as J,R as H,T,D as C,J as K,p as w,U as y,k as O,a2 as S,E as x,K as Le,ap as qe,au as Qe,o as p,t as b,H as v,r as xe,L as G,ac as _,l as de,m as pe,an as ve,aM as I,a6 as Je,a7 as Ke,j as je}from"./vendor.3ae73048.js";import"./types.8cb6216c.js";import{I as Oe}from"./Icon.61279884.js";import{D as Ge}from"./DotsVertical.9505a1c9.js";import{P as Xe}from"./Popover.0a97ebac.js";import{P as Ye,B as Ze,S as et,C as Se,U as ze,E as tt,L as rt}from"./ExposureViewer.31cd6713.js";import{cN as st}from"./index.146c2037.js";import"./index.2e3bb17a.js";import"./wNumb.f094d5b4.js";import"./router.1b465492.js";import"./index.11580965.js";import"./jobs.7ab064ef.js";import"./helpers.7177ca38.js";import"./index.c4392b02.js";import"./jobs.d50d1674.js";import"./ChevronUp.0ab7bee0.js";import"./Spinner.012207c4.js";import"./Folder.9bc96b35.js";import"./LockClosed.9ead7228.js";import"./Toggle.70c4dc3f.js";import"./QuestionMarkCircle.1d0a7a5c.js";import"./Move.f1d750f0.js";import"./Ruler.d04aefd7.js";import"./DownloadImage.d10f042a.js";import"./Download.0ce79951.js";import"./ArrowsExpand.dfc75310.js";function Me(s){let t,r;return t=new ze({props:{useDenoised:s[6],toggleUseDenoised:s[12]}}),{c(){P(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,i){x(t,e,i),r=!0},p:_,i(e){r||(p(t.$$.fragment,e),r=!0)},o(e){b(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function it(s){let t,r,e,i,c,n,m,l,u,a=s[1]&&Me(s);return i=new et({props:{showScale:s[4]}}),n=new Se({props:{title:"Picks Color",selectedColour:s[7]}}),l=new Se({props:{title:"Box Color",selectedColour:s[8]}}),{c(){t=V("div"),r=V("div"),a&&a.c(),e=J(),P(i.$$.fragment),c=J(),P(n.$$.fragment),m=J(),P(l.$$.fragment),this.h()},l(f){t=H(f,"DIV",{class:!0});var h=T(t);r=H(h,"DIV",{class:!0});var g=T(r);a&&a.l(g),e=K(g),C(i.$$.fragment,g),c=K(g),C(n.$$.fragment,g),m=K(g),C(l.$$.fragment,g),g.forEach(w),h.forEach(w),this.h()},h(){y(r,"class","flex flex-col space-y-1"),y(t,"class","p-1 bg-gray-100 border border-gray-300 rounded-md shadow-lg text-sm")},m(f,h){O(f,t,h),S(t,r),a&&a.m(r,null),S(r,e),x(i,r,null),S(r,c),x(n,r,null),S(r,m),x(l,r,null),u=!0},p(f,h){f[1]?a?(a.p(f,h),h&2&&p(a,1)):(a=Me(f),a.c(),p(a,1),a.m(r,e)):a&&(de(),b(a,1,1,()=>{a=null}),pe())},i(f){u||(p(a),p(i.$$.fragment,f),p(n.$$.fragment,f),p(l.$$.fragment,f),u=!0)},o(f){b(a),b(i.$$.fragment,f),b(n.$$.fragment,f),b(l.$$.fragment,f),u=!1},d(f){f&&w(t),a&&a.d(),v(i),v(n),v(l)}}}function ot(s){let t,r,e,i,c,n,m,l,u,a,f,h,g,z,$,M;i=new Ye({props:{particleDiameter:s[10],showPicks:s[3],pSize:s[11],infoTooltop:!0}}),n=new Ze({props:{boxsizeRawPix:s[9],showBox:s[2],pSize:s[11],infoTooltip:!0}}),a=new Oe({props:{src:Ge,size:4}});function B(d){s[13](d)}let R={modifier:"rounded-md",$$slots:{default:[it]},$$scope:{ctx:s}};return s[0]!==void 0&&(R.toggle=s[0]),h=new Xe({props:R}),Ce.push(()=>Fe(h,"toggle",B)),{c(){t=V("div"),r=V("div"),e=V("div"),P(i.$$.fragment),c=J(),P(n.$$.fragment),m=J(),l=V("div"),u=V("button"),P(a.$$.fragment),f=J(),P(h.$$.fragment),this.h()},l(d){t=H(d,"DIV",{class:!0});var D=T(t);r=H(D,"DIV",{class:!0});var k=T(r);e=H(k,"DIV",{class:!0});var E=T(e);C(i.$$.fragment,E),c=K(E),C(n.$$.fragment,E),E.forEach(w),m=K(k),l=H(k,"DIV",{class:!0});var A=T(l);u=H(A,"BUTTON",{class:!0});var F=T(u);C(a.$$.fragment,F),F.forEach(w),f=K(A),C(h.$$.fragment,A),A.forEach(w),k.forEach(w),D.forEach(w),this.h()},h(){y(e,"class","flex flex-col"),y(u,"class","p-1.5 m-0 rounded border border-gray-300 bg-white text-xs leading-4"),y(l,"class","flex items-start h-full"),y(r,"class","scroll-wrapper flex justify-between flex-wrap gap-x-2 gap-y-1 w-full px-2 py-1.5 overflow-x-auto svelte-197zwar"),y(t,"class","relative w-full flex items-start justify-between whitespace-nowrap border-b border-gray-200 bg-gray-100")},m(d,D){O(d,t,D),S(t,r),S(r,e),x(i,e,null),S(e,c),x(n,e,null),S(r,m),S(r,l),S(l,u),x(a,u,null),S(l,f),x(h,l,null),z=!0,$||(M=Le(u,"click",function(){qe(s[0])&&s[0].apply(this,arguments)}),$=!0)},p(d,[D]){s=d;const k={};D&16386&&(k.$$scope={dirty:D,ctx:s}),!g&&D&1&&(g=!0,k.toggle=s[0],Qe(()=>g=!1)),h.$set(k)},i(d){z||(p(i.$$.fragment,d),p(n.$$.fragment,d),p(a.$$.fragment,d),p(h.$$.fragment,d),z=!0)},o(d){b(i.$$.fragment,d),b(n.$$.fragment,d),b(a.$$.fragment,d),b(h.$$.fragment,d),z=!1},d(d){d&&w(t),v(i),v(n),v(a),v(h),$=!1,M()}}}function nt(s,t,r){let e;const{showBox:i,showPicks:c,showScale:n,hasDenoisedMics:m,useDenoised:l,picksColor:u,boxColor:a,boxsizeRawPix:f,particleDiameter:h,pSize:g,toggleUseDenoised:z}=xe("exposureCurationData");G(s,m,B=>r(1,e=B));let $;function M(B){$=B,r(0,$)}return[$,e,i,c,n,m,l,u,a,f,h,g,z,M]}class lt extends we{constructor(t){super();ke(this,t,nt,ot,$e,{})}}function at(s){let t;return{c(){t=V("canvas"),this.h()},l(r){t=H(r,"CANVAS",{id:!0,class:!0,style:!0,width:!0,height:!0}),T(t).forEach(w),this.h()},h(){y(t,"id","exposure-canvas"),y(t,"class","exposure-canvas absolute top-0 left-0 h-full w-full"),ve(t,"opacity",s[14]!==null&&s[15]===!1?"1":"0"),y(t,"width",s[11]),y(t,"height",s[12])},m(r,e){O(r,t,e),s[23](t)},p(r,[e]){e&49152&&ve(t,"opacity",r[14]!==null&&r[15]===!1?"1":"0"),e&2048&&y(t,"width",r[11]),e&4096&&y(t,"height",r[12])},i:_,o:_,d(r){r&&w(t),s[23](null)}}}function ut(s,t,r){let e,i=_,c=()=>(i(),i=I(le,o=>r(16,e=o)),le),n,m=_,l=()=>(m(),m=I(oe,o=>r(17,n=o)),oe),u,a=_,f=()=>(a(),a=I(fe,o=>r(18,u=o)),fe),h,g=_,z=()=>(g(),g=I(ce,o=>r(19,h=o)),ce),$,M=_,B=()=>(M(),M=I(ne,o=>r(20,$=o)),ne),R,d=_,D=()=>(d(),d=I(ie,o=>r(21,R=o)),ie),k,E=_,A=()=>(E(),E=I(ue,o=>r(22,k=o)),ue),F,X=_,Z=()=>(X(),X=I(re,o=>r(24,F=o)),re),ee,Y=_,be=()=>(Y(),Y=I(ae,o=>r(25,ee=o)),ae),j,ge=_,ye=()=>(ge(),ge=I(se,o=>r(14,j=o)),se),De,_e=_,Pe=()=>(_e(),_e=I(te,o=>r(15,De=o)),te);s.$$.on_destroy.push(()=>i()),s.$$.on_destroy.push(()=>m()),s.$$.on_destroy.push(()=>a()),s.$$.on_destroy.push(()=>g()),s.$$.on_destroy.push(()=>M()),s.$$.on_destroy.push(()=>d()),s.$$.on_destroy.push(()=>E()),s.$$.on_destroy.push(()=>X()),s.$$.on_destroy.push(()=>Y()),s.$$.on_destroy.push(()=>ge()),s.$$.on_destroy.push(()=>_e());let{loadingDisplay:te}=t;Pe();let{micWidth:re}=t;Z();let{urlMic:se}=t;ye();let{showPicks:ie}=t;D();let{picksColor:oe}=t;l();let{showBox:ne}=t;B();let{boxColor:le}=t;c();let{pSize:ae}=t;be();let{currentPicks:ue}=t;A();let{particleDiameter:ce}=t;z();let{boxsizeRawPix:fe}=t;f();let{thumbWidth:N}=t,{thumbHeight:q}=t,W;const Ie=(o,Q,L,U)=>{if(typeof o=="undefined"||o===null||!N||!q)return;const me=N*Q,he=q*(1-L);o.beginPath(),o.arc(me,he,U*N,0,2*Math.PI,!1),o.lineWidth=2,o.strokeStyle=n,o.stroke()},Be=()=>{if(W){const o=W.getContext("2d"),Q=Math.round(h/ee)/F/2;k.forEach(L=>Ie(o,L[0],L[1],Q))}},Re=(o,Q,L,U)=>{if(typeof o=="undefined"||o===null||!N||!q)return;const me=N*Q-U/2,he=q*(1-L)-U/2,{r:Te,g:Ae,b:Ne}=st(e);o.lineWidth=2,o.fillStyle=`rgba(${Te}, ${Ae}, ${Ne}, 0.4)`,o.strokeStyle=e,o.strokeRect(me,he,U,U),o.fillRect(me,he,U,U)},Ue=()=>{if(W){const o=W.getContext("2d"),Q=u/F*N;k.forEach(([L,U])=>Re(o,L,U,Q))}},Ve=()=>{const o=W==null?void 0:W.getContext("2d");typeof o=="undefined"||o===null||(o.clearRect(0,0,N,q),$&&Ue(),R&&Be())};function He(o){Ce[o?"unshift":"push"](()=>{W=o,r(13,W)})}return s.$$set=o=>{"loadingDisplay"in o&&Pe(r(0,te=o.loadingDisplay)),"micWidth"in o&&Z(r(1,re=o.micWidth)),"urlMic"in o&&ye(r(2,se=o.urlMic)),"showPicks"in o&&D(r(3,ie=o.showPicks)),"picksColor"in o&&l(r(4,oe=o.picksColor)),"showBox"in o&&B(r(5,ne=o.showBox)),"boxColor"in o&&c(r(6,le=o.boxColor)),"pSize"in o&&be(r(7,ae=o.pSize)),"currentPicks"in o&&A(r(8,ue=o.currentPicks)),"particleDiameter"in o&&z(r(9,ce=o.particleDiameter)),"boxsizeRawPix"in o&&f(r(10,fe=o.boxsizeRawPix)),"thumbWidth"in o&&r(11,N=o.thumbWidth),"thumbHeight"in o&&r(12,q=o.thumbHeight)},s.$$.update=()=>{s.$$.dirty&8331264&&W&&Array.isArray(k)&&typeof R=="boolean"&&typeof $=="boolean"&&h&&u&&n&&e&&Ve()},[te,re,se,ie,oe,ne,le,ae,ue,ce,fe,N,q,W,j,De,e,n,u,h,$,R,k,He]}class ct extends we{constructor(t){super();ke(this,t,ut,at,$e,{loadingDisplay:0,micWidth:1,urlMic:2,showPicks:3,picksColor:4,showBox:5,boxColor:6,pSize:7,currentPicks:8,particleDiameter:9,boxsizeRawPix:10,thumbWidth:11,thumbHeight:12})}}function ft(s){let t,r;return{c(){t=V("p"),r=Je("Select a row to view micrograph"),this.h()},l(e){t=H(e,"P",{class:!0});var i=T(t);r=Ke(i,"Select a row to view micrograph"),i.forEach(w),this.h()},h(){y(t,"class","absolute-center text-sm text-gray-700")},m(e,i){O(e,t,i),S(t,r)},p:_,i:_,o:_,d(e){e&&w(t)}}}function mt(s){var c;let t,r,e,i=((c=s[1])==null?void 0:c.length)&&Ee();return r=new tt({props:{loadingImage:s[6],currentImageUrl:s[7],loadingDisplay:s[5],selectedMicUid:s[8],micWidth:s[9],pSize:s[10],thumbWidth:s[12],thumbHeight:s[13],showScale:s[11],$$slots:{canvas:[pt],"use-denoised":[dt],"lowpass-filter":[ht]},$$scope:{ctx:s}}}),{c(){i&&i.c(),t=J(),P(r.$$.fragment)},l(n){i&&i.l(n),t=K(n),C(r.$$.fragment,n)},m(n,m){i&&i.m(n,m),O(n,t,m),x(r,n,m),e=!0},p(n,m){var u;((u=n[1])==null?void 0:u.length)?i?m&2&&p(i,1):(i=Ee(),i.c(),p(i,1),i.m(t.parentNode,t)):i&&(de(),b(i,1,1,()=>{i=null}),pe());const l={};m&134217756&&(l.$$scope={dirty:m,ctx:n}),r.$set(l)},i(n){e||(p(i),p(r.$$.fragment,n),e=!0)},o(n){b(i),b(r.$$.fragment,n),e=!1},d(n){i&&i.d(n),n&&w(t),v(r,n)}}}function Ee(s){let t,r;return t=new lt({}),{c(){P(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,i){x(t,e,i),r=!0},i(e){r||(p(t.$$.fragment,e),r=!0)},o(e){b(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function ht(s){let t,r;return t=new rt({props:{slot:"lowpass-filter",lowPassFilter:s[14],getImage:s[25]}}),{c(){P(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,i){x(t,e,i),r=!0},p:_,i(e){r||(p(t.$$.fragment,e),r=!0)},o(e){b(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function We(s){let t,r;return t=new ze({props:{useDenoised:s[16],toggleUseDenoised:s[17]}}),{c(){P(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,i){x(t,e,i),r=!0},p:_,i(e){r||(p(t.$$.fragment,e),r=!0)},o(e){b(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function dt(s){let t,r,e=s[4]&&We(s);return{c(){e&&e.c(),t=je()},l(i){e&&e.l(i),t=je()},m(i,c){e&&e.m(i,c),O(i,t,c),r=!0},p(i,c){i[4]?e?(e.p(i,c),c&16&&p(e,1)):(e=We(i),e.c(),p(e,1),e.m(t.parentNode,t)):e&&(de(),b(e,1,1,()=>{e=null}),pe())},i(i){r||(p(e),r=!0)},o(i){b(e),r=!1},d(i){e&&e.d(i),i&&w(t)}}}function pt(s){let t,r;return t=new ct({props:{loadingDisplay:s[5],micWidth:s[9],currentPicks:s[18],showPicks:s[19],picksColor:s[21],pSize:s[10],showBox:s[20],boxColor:s[22],particleDiameter:s[23],boxsizeRawPix:s[24],urlMic:s[7],thumbWidth:s[2],thumbHeight:s[3]}}),{c(){P(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,i){x(t,e,i),r=!0},p(e,i){const c={};i&4&&(c.thumbWidth=e[2]),i&8&&(c.thumbHeight=e[3]),t.$set(c)},i(e){r||(p(t.$$.fragment,e),r=!0)},o(e){b(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function bt(s){let t,r,e,i;const c=[mt,ft],n=[];function m(l,u){return l[0]||l[0]===0?0:1}return r=m(s),e=n[r]=c[r](s),{c(){t=V("div"),e.c(),this.h()},l(l){t=H(l,"DIV",{class:!0});var u=T(t);e.l(u),u.forEach(w),this.h()},h(){y(t,"class","flex flex-col relative h-full w-full")},m(l,u){O(l,t,u),n[r].m(t,null),i=!0},p(l,[u]){let a=r;r=m(l),r===a?n[r].p(l,u):(de(),b(n[a],1,1,()=>{n[a]=null}),pe(),e=n[r],e?e.p(l,u):(e=n[r]=c[r](l),e.c()),p(e,1),e.m(t,null))},i(l){i||(p(e),i=!0)},o(l){b(e),i=!1},d(l){l&&w(t),n[r].d()}}}function gt(s,t,r){let e,i,c,n,m;const{loadingDisplay:l,loadingMic:u,urlMic:a,selectedMicUid:f,micWidth:h,pSize:g,showScale:z,thumbWidth:$,thumbHeight:M,lowPassFilter:B,hasDenoisedMics:R,useDenoised:d,toggleUseDenoised:D,getMicImage:k,currentPicks:E,showPicks:A,showBox:F,picksColor:X,boxColor:Z,particleDiameter:ee,boxsizeRawPix:Y}=xe("exposureCurationData");return G(s,f,j=>r(0,e=j)),G(s,$,j=>r(2,c=j)),G(s,M,j=>r(3,n=j)),G(s,R,j=>r(4,m=j)),G(s,E,j=>r(1,i=j)),[e,i,c,n,m,l,u,a,f,h,g,z,$,M,B,R,d,D,E,A,F,X,Z,ee,Y,()=>k(e)]}class Lt extends we{constructor(t){super();ke(this,t,gt,bt,$e,{})}}export{Lt as default};
