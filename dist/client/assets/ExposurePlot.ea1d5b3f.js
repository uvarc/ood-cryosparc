var he=Object.defineProperty;var J=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var le=(o,e,t)=>e in o?he(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,H=(o,e)=>{for(var t in e||(e={}))oe.call(e,t)&&le(o,t,e[t]);if(J)for(var t of J(e))se.call(e,t)&&le(o,t,e[t]);return o};var W=(o,e)=>{var t={};for(var a in o)oe.call(o,a)&&e.indexOf(a)<0&&(t[a]=o[a]);if(o!=null&&J)for(var a of J(o))e.indexOf(a)<0&&se.call(o,a)&&(t[a]=o[a]);return t};import{S as be,h as ge,s as ve,Q as k,a6 as q,I as L,R as A,T as w,a7 as K,J as B,p as b,k as M,a2 as h,ae as re,C as xe,D as ye,U as g,a3 as ae,ar as Q,E as Ee,K as F,o as Te,t as ke,ak as ne,H as Ae,ad as we,L as V,u as je,P as ie,as as ce,af as Ie}from"./vendor.3ae73048.js";import{P as ue}from"./plotly.2255cf4f.js";import{I as Se}from"./Icon.61279884.js";import{S as Ce}from"./SwitchHorizontal.0e438e3b.js";import{eO as Z,eP as $,bD as Oe,cH as Pe,d3 as Re,av as De,c$ as de,cG as He}from"./index.9987ff70.js";import{l as Le}from"./index.146c2037.js";import"./router.1b465492.js";import"./jobs.d50d1674.js";import"./helpers.7177ca38.js";function pe(o,e,t){const a=o.slice();return a[20]=e[t],a}function fe(o,e,t){const a=o.slice();return a[20]=e[t],a}function me(o){let e,t=o[20].title+"",a,p,u;return{c(){e=k("option"),a=q(t),p=L(),this.h()},l(n){e=A(n,"OPTION",{});var c=w(e);a=K(c,t),p=B(c),c.forEach(b),this.h()},h(){e.__value=u=o[20].name,e.value=e.__value},m(n,c){M(n,e,c),h(e,a),h(e,p)},p(n,c){c&2&&t!==(t=n[20].title+"")&&re(a,t),c&2&&u!==(u=n[20].name)&&(e.__value=u,e.value=e.__value)},d(n){n&&b(e)}}}function _e(o){let e,t=o[20].title+"",a,p,u;return{c(){e=k("option"),a=q(t),p=L(),this.h()},l(n){e=A(n,"OPTION",{});var c=w(e);a=K(c,t),p=B(c),c.forEach(b),this.h()},h(){e.__value=u=o[20].name,e.value=e.__value},m(n,c){M(n,e,c),h(e,a),h(e,p)},p(n,c){c&2&&t!==(t=n[20].title+"")&&re(a,t),c&2&&u!==(u=n[20].name)&&(e.__value=u,e.value=e.__value)},d(n){n&&b(e)}}}function Be(o){let e,t,a,p,u,n,c,E,f,I,N,S,y,P,j,x,U,C,Y,X,z,R=o[1],l=[];for(let s=0;s<R.length;s+=1)l[s]=me(fe(o,R,s));I=new Se({props:{src:Ce}});let v=o[1],m=[];for(let s=0;s<v.length;s+=1)m[s]=_e(pe(o,v,s));return{c(){e=k("div"),t=k("div"),a=k("label"),p=q("X-axis"),u=L(),n=k("select");for(let s=0;s<l.length;s+=1)l[s].c();c=L(),E=k("span"),f=k("button"),xe(I.$$.fragment),N=L(),S=k("div"),y=k("label"),P=q("Y-axis"),j=L(),x=k("select");for(let s=0;s<m.length;s+=1)m[s].c();U=L(),C=k("div"),this.h()},l(s){e=A(s,"DIV",{class:!0});var _=w(e);t=A(_,"DIV",{class:!0});var r=w(t);a=A(r,"LABEL",{for:!0,class:!0});var T=w(a);p=K(T,"X-axis"),T.forEach(b),u=B(r),n=A(r,"SELECT",{id:!0,class:!0});var i=w(n);for(let D=0;D<l.length;D+=1)l[D].l(i);i.forEach(b),r.forEach(b),c=B(_),E=A(_,"SPAN",{class:!0});var d=w(E);f=A(d,"BUTTON",{type:!0,class:!0});var G=w(f);ye(I.$$.fragment,G),G.forEach(b),d.forEach(b),N=B(_),S=A(_,"DIV",{class:!0});var O=w(S);y=A(O,"LABEL",{for:!0,class:!0});var ee=w(y);P=K(ee,"Y-axis"),ee.forEach(b),j=B(O),x=A(O,"SELECT",{id:!0,class:!0});var te=w(x);for(let D=0;D<m.length;D+=1)m[D].l(te);te.forEach(b),O.forEach(b),_.forEach(b),U=B(s),C=A(s,"DIV",{id:!0,class:!0}),w(C).forEach(b),this.h()},h(){g(a,"for","x-axis"),g(a,"class","inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm"),g(n,"id","x-axis"),g(n,"class","flex-1 block rounded-none rounded-r-md w-full pl-3 pr-10 py-1 text-sm leading-5 border-gray-300 focus:outline-none focus:shadow-outline-blue focus:border-blue-300"),o[3]===void 0&&ae(()=>o[11].call(n)),g(t,"class","flex rounded-md shadow-sm"),g(f,"type","button"),g(f,"class","inline-flex items-center px-1 py-1 border border-gray-300 text-xs leading-4 font-medium rounded-md text-gray-500 bg-white hover:text-gray-700 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:text-gray-800 active:bg-gray-50 transition ease-in-out duration-150"),g(E,"class","inline-flex rounded-md shadow-sm"),g(y,"for","y-axis"),g(y,"class","inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm"),g(x,"id","y-axis"),g(x,"class","flex-1 block rounded-none rounded-r-md w-full pl-3 pr-10 py-1 text-sm leading-5 border-gray-300 focus:outline-none focus:shadow-outline-blue focus:border-blue-300"),o[2]===void 0&&ae(()=>o[12].call(x)),g(S,"class","flex rounded-md shadow-sm"),g(e,"class","flex space-x-2 p-2 border-y border-gray-200"),g(C,"id","exposure-plot"),g(C,"class","svelte-1wssfd2")},m(s,_){M(s,e,_),h(e,t),h(t,a),h(a,p),h(t,u),h(t,n);for(let r=0;r<l.length;r+=1)l[r].m(n,null);Q(n,o[3]),h(e,c),h(e,E),h(E,f),Ee(I,f,null),h(e,N),h(e,S),h(S,y),h(y,P),h(S,j),h(S,x);for(let r=0;r<m.length;r+=1)m[r].m(x,null);Q(x,o[2]),M(s,U,_),M(s,C,_),o[13](C),Y=!0,X||(z=[F(n,"change",o[11]),F(f,"click",o[4]),F(x,"change",o[12])],X=!0)},p(s,[_]){if(_&2){R=s[1];let r;for(r=0;r<R.length;r+=1){const T=fe(s,R,r);l[r]?l[r].p(T,_):(l[r]=me(T),l[r].c(),l[r].m(n,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=R.length}if(_&10&&Q(n,s[3]),_&2){v=s[1];let r;for(r=0;r<v.length;r+=1){const T=pe(s,v,r);m[r]?m[r].p(T,_):(m[r]=_e(T),m[r].c(),m[r].m(x,null))}for(;r<m.length;r+=1)m[r].d(1);m.length=v.length}_&6&&Q(x,s[2])},i(s){Y||(Te(I.$$.fragment,s),Y=!0)},o(s){ke(I.$$.fragment,s),Y=!1},d(s){s&&b(e),ne(l,s),Ae(I),ne(m,s),s&&b(U),s&&b(C),o[13](null),X=!1,we(z)}}}const Ne=20,Ue=20,Ye="Jet";function Xe(o,e,t){let a,p,u,n,c,E;V(o,Z,l=>t(2,p=l)),V(o,$,l=>t(3,u=l)),V(o,Oe,l=>t(8,n=l)),V(o,Pe,l=>t(9,c=l)),V(o,Re,l=>t(10,E=l));let f,I;const N={HISTOGRAM_2D:{type:"histogram2d",hoverinfo:"x+y",nbinsx:Ne,nbinsy:Ue,mode:"markers",colorscale:Ye},SCATTER:{type:"scattergl",hoverinfo:"x+y",mode:"markers"}},S=l=>l===He.histogram?N.HISTOGRAM_2D:N.SCATTER;let y={x:[],y:[],mode:"markers",type:"scattergl",name:"Accepted",marker:{opacity:.7,color:"blue"}},P={x:[],y:[],mode:"markers",type:"scattergl",name:"Rejected",marker:{opacity:.7,color:"red"}};const j={autosize:!0,hovermode:"closest",margin:{l:50,r:10,b:30,t:0,pad:5},xaxis:{title:"",automargin:!0},yaxis:{title:"",automargin:!0},legend:{orientation:"h",xanchor:"right",x:1,y:1,bgcolor:"#f1f5f9"}},x=l=>{if(l.points&&l.points.length&&typeof l.points[0].customdata=="number"){const v=l.points[0].customdata;De(v)}},U=l=>{var m,s;clearTimeout(I);const v=(s=(m=l==null?void 0:l.points)==null?void 0:m[0])==null?void 0:s.customdata;typeof v=="number"&&de.set(v)},C=()=>{I=setTimeout(()=>{de.set(null)},1e3)},Y=()=>{const l=u;ie($,u=p,u),ie(Z,p=l,p)};je(()=>{setTimeout(()=>{ue.newPlot("exposure-plot",[y,P],j,{displayModeBar:!1,responsive:!0}),f==null||f.on("plotly_click",x),f==null||f.on("plotly_hover",U),f==null||f.on("plotly_unhover",C)},100)});function X(){u=ce(this),$.set(u),t(1,a),t(10,E)}function z(){p=ce(this),Z.set(p),t(1,a),t(10,E)}function R(l){Ie[l?"unshift":"push"](()=>{f=l,t(0,f)})}return o.$$.update=()=>{var l,v,m,s;if(o.$$.dirty&1024&&t(1,a=[{name:"uid",title:"Exposure ID"},...E]),o.$$.dirty&1007&&f&&Array.isArray(n)){const _=n.filter(i=>i.threshold_reject===!1&&i.manual_reject===!1).map(G=>{var O=G,{attributes:i}=O,d=W(O,["attributes"]);return H(H({},i),d)}),r=S(c);t(5,y=H({x:_.map(i=>{var d;return(d=i[`${u}`])!=null?d:0}),y:_.map(i=>{var d;return(d=i[`${p}`])!=null?d:0}),customdata:_.map(i=>{var d;return(d=i.uid)!=null?d:null}),name:"Accepted",marker:{opacity:.7,color:"#276fec"}},r));const T=n.filter(i=>i.threshold_reject===!0||i.manual_reject===!0).map(G=>{var O=G,{attributes:i}=O,d=W(O,["attributes"]);return H(H({},i),d)});t(6,P=H({x:T.map(i=>{var d;return(d=i[`${u}`])!=null?d:0}),y:T.map(i=>{var d;return(d=i[`${p}`])!=null?d:0}),customdata:T.map(i=>{var d;return(d=i.uid)!=null?d:null}),name:"Rejected",marker:{opacity:.7,color:"#f05252"}},r)),Le("Updating exposure plot",y,P,r),t(7,j.xaxis.title=(v=(l=a.find(i=>i.name===u))==null?void 0:l.title)!=null?v:"",j),t(7,j.yaxis.title=(s=(m=a.find(i=>i.name===p))==null?void 0:m.title)!=null?s:"",j),ue.react("exposure-plot",[y,P],j)}},[f,a,p,u,Y,y,P,j,n,c,E,X,z,R]}class Ze extends be{constructor(e){super();ge(this,e,Xe,Be,ve,{})}}export{Ze as default};
