import{S as j,h as M,s as A,j as E,k as g,ac as k,p as d,q as I,u as V,af as z,Q as f,R as m,T as h,U as _,a2 as b,a6 as C,I as D,a7 as H,J as U,K as q}from"./vendor.3ae73048.js";import{p as x,m as w}from"./purify.es.5cdb46dc.js";import{U as K}from"./index.11580965.js";import{at as L}from"./index.146c2037.js";function N(o){let t,a;return{c(){t=f("div"),a=f("textarea"),this.h()},l(n){t=m(n,"DIV",{class:!0});var e=h(t);a=m(e,"TEXTAREA",{class:!0}),h(a).forEach(d),e.forEach(d),this.h()},h(){_(a,"class","w-full h-full border-none rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-xs"),_(t,"class","notes-wrapper sidebar-markdown-editor max-w-full h-60 prose prose-sm prose-blue flex-1 p-2")},m(n,e){g(n,t,e),b(t,a),o[4](a)},p:k,d(n){n&&d(t),o[4](null)}}}function R(o){let t,a,n,e,s,r=x.sanitize(w(o[0]))+"",i,p;return{c(){t=f("div"),a=f("button"),n=C("Edit"),e=D(),s=f("div"),this.h()},l(c){t=m(c,"DIV",{class:!0});var l=h(t);a=m(l,"BUTTON",{class:!0});var v=h(a);n=H(v,"Edit"),v.forEach(d),e=U(l),s=m(l,"DIV",{class:!0});var y=h(s);y.forEach(d),l.forEach(d),this.h()},h(){_(a,"class","absolute top-2 right-2 z-6 ml-1 inline-flex items-center px-1 py-0.5 text-sm rounded bg-gray-100 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-gray-200 text-gray-800 focus:outline-none"),_(s,"class","group relative max-w-full max-h-60 prose prose-sm prose-blue p-2 overflow-y-auto"),_(t,"class","relative group")},m(c,l){g(c,t,l),b(t,a),b(a,n),b(t,e),b(t,s),s.innerHTML=r,i||(p=q(a,"click",o[3]),i=!0)},p(c,l){l&1&&r!==(r=x.sanitize(w(c[0]))+"")&&(s.innerHTML=r)},d(c){c&&d(t),i=!1,p()}}}function S(o){let t;function a(s,r){var i;return!s[2]&&((i=s[0])==null?void 0:i.length)&&s[0]!=="Enter a description."?R:N}let n=a(o),e=n(o);return{c(){e.c(),t=E()},l(s){e.l(s),t=E()},m(s,r){e.m(s,r),g(s,t,r)},p(s,[r]){n===(n=a(s))&&e?e.p(s,r):(e.d(1),e=n(s),e&&(e.c(),e.m(t.parentNode,t)))},i:k,o:k,d(s){e.d(s),s&&d(t)}}}function B(o,t,a){let n,{description:e}=t;const s=I();let r,i,p=!0;const c=L(()=>s("update",r==null?void 0:r.value()),400),l=(u="")=>{u&&(r==null||r.value(u)),n?a(2,p=!1):a(2,p=!0)},v=()=>{r=new K({element:i,placeholder:"Add a description (markdown supported)",initialValue:e!=null?e:"",status:!1,maxHeight:"none",toolbar:["bold","italic","|","unordered-list","ordered-list","|","link","image","|","preview"],spellChecker:!1}),r==null||r.codemirror.on("change",()=>c())};V(()=>l(e));const y=()=>{a(2,p=!0)};function T(u){z[u?"unshift":"push"](()=>{i=u,a(1,i)})}return o.$$set=u=>{"description"in u&&a(0,e=u.description)},o.$$.update=()=>{o.$$.dirty&1&&(n=typeof e=="string"&&!!(e==null?void 0:e.length)&&e!=="Enter a description."),o.$$.dirty&2&&i&&v()},[e,i,p,y,T]}class F extends j{constructor(t){super();M(this,t,B,S,A,{description:0})}}export{F as M};
