import{e as r,g as i,w as n,X as T}from"./vendor.3ae73048.js";import{x as l,aE as g,aF as k,al as z,ak as C,z as b,e as U}from"./index.146c2037.js";import{G as A,H as E}from"./helpers.7177ca38.js";import{ab as O}from"./router.1b465492.js";const y=200;function S(){this.projectUid=null,this.uid=null,this.date=null,this.limit=y,this.types=[],this.flags=[],this.destroy=!0}const $=(()=>{let e=new S;return(t,o,s)=>{var v,p;e.destroy&&(T(()=>{e=new S}),e.destroy=!1);let a=!1;return t||(o!==e.projectUid&&(e.projectUid=o,a=!0),s!==e.uid&&(e.uid=s,a=!0),((v=i(_))==null?void 0:v.getTime())!==((p=e.date)==null?void 0:p.getTime())&&(e.date=i(_),a=!0),i(w)!==e.limit&&(e.limit=i(w),a=!0),C(i(j),e.types)||(e.types=i(j),a=!0),C(i(h),e.flags)||(e.flags=i(h),a=!0)),a}})(),x=n(!1),I=l(g.jobDialogProjectUid,null),J=l(g.jobDialogUid,null),G=l(g.jobDialogOuputGroupsExpanded,null),H=l(g.jobDialogTab,k.log),D=n(void 0),Q=n(!1),q=r(D,e=>{if(typeof e=="undefined")return null;const t=Object.assign({},e.doc);return Array.isArray(t.output_result_groups)&&t.output_result_groups.forEach((o,s)=>{typeof o.summary=="object"&&typeof o.summary.import_sig=="object"&&typeof o.summary.import_sig.signatures!="undefined"&&delete t.output_result_groups[s].summary.import_sig.signatures}),t}),B=n(!0),N=n(!0),m=n(!0),K=n(!1),R=n([]),X=n([]),j=n([]),h=n([]),Y=l(g.eventLogControls,!0),u=z("eventLogViewOptions",A),W=r(u,e=>e.cpuMemoryUsage),Z=r(u,e=>e.cpuMemoryAvailable),ee=r(u,e=>e.timestamps),te=r(u,e=>e.tailEventLog),oe=n(!0),_=n(null),se=n(null),w=(()=>{const{subscribe:e,set:t,update:o}=n(y);return{subscribe:e,set:t,setLimit:s=>t(s),updateLimit:s=>o(a=>a+s),reset:()=>t(y)}})(),c=n([]),d=n([]),P=n(0),L=(e,t)=>[...new Set([...e,...t])].sort((o,s)=>o.localeCompare(s)),ae=(e,t,o,s,a)=>{m.set(!0);const v=E("types_filter",s),p=E("flags_filter",a),V=o?`&checkpoint_date=${o.toJSON()}`:"",F=s.length?`&${v}`:"",M=a.length?`&${p}`:"";b(`/api/actions/events/events-list-count?project_uid=${e}&job_uid=${t}${V}${F}${M}`).then(({count:f})=>{P.set(f),m.set(!1)}).catch(f=>{U("Could not get the event count: ",f),m.set(!1)})},ne=(e,t)=>{b(`/api/actions/events/distinct-for-job-events?project_uid=${e}&job_uid=${t}&field=type`).then(o=>c.set(L(o,i(c)))),b(`/api/actions/events/distinct-for-job-events?project_uid=${e}&job_uid=${t}&field=flags`).then(o=>d.set(L(o,i(d))))};O.subscribe(e=>{const t=e.map(s=>s.type),o=e.reduce((s,a)=>(a==null?void 0:a.flags)?[...s,...a.flags]:s,[]);c.set(L(t,i(c))),d.set(L(o,i(d)))});var ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",cycleEventList:$,loadingInteractivePlot:x,dialogProjectUid:I,dialogJobUid:J,outputGroupsExpanded:G,jobSection:H,jobPreviewData:D,jobPreviewDataLoading:Q,jobPreviewMetdata:q,eventLogsLoading:B,eventLogCheckpointsLoading:N,eventCountLoading:m,eventLogPdfLoading:K,eventLogDistinctTypes:R,eventLogDistinctFlags:X,eventLogTypesFilter:j,eventLogFlagsFilter:h,eventLogControls:Y,eventLogViewOptions:u,eventLogShowCPU:W,eventLogShowCPUAvailable:Z,eventLogShowTimestamp:ee,tailEventLog:te,followingLatest:oe,checkpointDate:_,eventLogCurrentCheckpointId:se,eventLimit:w,eventLogTypes:c,eventLogFlags:d,eventLogCount:P,getEventCount:ae,getDistinctForJobEvents:ne}),ce=[[{d:"M5 4a1 1 0 00-2 0v7.268a2 2 0 000 3.464V16a1 1 0 102 0v-1.268a2 2 0 000-3.464V4zM11 4a1 1 0 10-2 0v1.268a2 2 0 000 3.464V16a1 1 0 102 0V8.732a2 2 0 000-3.464V4zM16 3a1 1 0 011 1v7.268a2 2 0 010 3.464V16a1 1 0 11-2 0v-1.268a2 2 0 010-3.464V4a1 1 0 011-1z"}],[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"}]],de=[[{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"}],[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}]],ve=[[{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"}],[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"}]];export{ce as A,$ as B,ae as C,q as D,de as E,ve as L,P as a,m as b,N as c,B as d,w as e,ee as f,W as g,Z as h,h as i,j,ue as k,x as l,H as m,J as n,I as o,Q as p,D as q,G as r,se as s,c as t,d as u,u as v,_ as w,oe as x,te as y,ne as z};
