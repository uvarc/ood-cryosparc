---
cluster: "rivanna"

form:
  - node_type
  #- bc_num_slots
  - bc_num_hours
  - num_cores
  - num_memory
  - work_dir
  - bc_account
  - gpu_type
  - num_gpu
  - mode
  - option
  - bc_email_on_started
  - cryosparc_license_id

attributes:
  num_cores:
    widget: "number_field"
    label: "Number of cores"
    value: 1
    min: 1
    max: 40
    step: 1
  num_memory:
    widget: "number_field"
    label: "Memory Request in GB ( maximum 384G )"
    value: 6
    min: 6
    max: 384
    step: 1 
  bc_account:
    label: "Allocation - lowercase-only"
  node_type:
    widget: select
    label: "Rivanna Partition"
    options:
      - [ "Dev", "dev", data-hide-gpu-type: true, data-hide-num-gpu: true, data-hide-bc-num-hours: true, data-hide-num-cores: true, data-hide-num-memory: true]
      - [ "Standard", "standard", data-hide-gpu-type: true, data-hide-num-gpu: true, data-hide-num-memory: true]
      - [ "Largemem", "largemem", data-hide-gpu-type: true, data-hide-num-gpu: true]
      - [ "Instructional", "instructional", data-hide-gpu-type: true, data-hide-num-gpu: true]
      - [ "GPU", "gpu"]
      - [ "BII", "bii", data-hide-gpu-type: true, data-hide-num-gpu: true]
      - [ "BII-GPU", "bii-gpu"]
    help: |
      - **Dev** - (*1 core*) For short sessions (1 hour) with no SU charge.
      - **Standard** - (*1-40 cores*) Rivanna node in the standard partition.
      - **Largemem** - (*1-40 cores*) Rivanna node in the largemem partition.
      - **Instructional** - (*1-20 cores*) Rivanna node in the instructional partition.
      - **GPU** - (*1-28 cores*) Rivanna node that has NVIDIA GPU.
      - **Bii,Bii-gpu** - (*1-40 cores*) Partition for Biocomplexity Institute and Initiative.
      - **Learn More** - [Rivanna Queuing Policies]

      [Rivanna Queuing Policies]: https://www.rc.virginia.edu/userinfo/rivanna/queues/
  work_dir:
    widget: select
    label: "Work Directory"
    options:
      - [ "SCRATCH",  "/scratch/${USER}"]
      - [ "HOME",     "/home/${USER}"   ]
      - [ "PROJECT",  "/project"        ]
      - [ "STANDARD", "/standard"       ]
  gpu_type:
    widget: select
    label: "Optional: GPU type for GPU partition"
    options:
      - [ "default",       "--gres=gpu:"        ]
      - [ "NVIDIA A100",   "--gres=gpu:a100:"   ]
      - [ "NVIDIA A6000",  "--gres=gpu:a6000:"  ]
      - [ "NVIDIA V100",   "--gres=gpu:v100:"   ]
      - [ "NVIDIA RTX3090","--gres=gpu:rtx3090:"]
      - [ "NVIDIA RTX2080","--gres=gpu:rtx2080:"]
  num_gpu:
    widget: "number_field"
    label: "Optional: Number of GPUs ( 1 ~ 4)"
    value: 1
    min: 1
    max: 4
    step: 1
  mode:
    widget: select
    label: "Show Additional Options"
    options:
      - ["No", data-hide-option: true]
      - ["Yes"]
  option:
    label: "Optional: Slurm Option ( Reservation, Constraint )"
  cryosparc_license_id:
    widget: text_field
    required: true
    placeholder: "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    pattern: "^[\\w]{8}-[\\w]{4}-[\\w]{4}-[\\w]{4}-[\\w]{12}$"
    label: "CryoSPARC License ID"
    help: "Enter your personal CryoSPARC License ID. You can obtain a license from https://cryosparc.com/download."