var Gt=Object.defineProperty,Qt=Object.defineProperties;var Wt=Object.getOwnPropertyDescriptors;var kt=Object.getOwnPropertySymbols;var Kt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable;var xt=(l,e,t)=>e in l?Gt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,rt=(l,e)=>{for(var t in e||(e={}))Kt.call(e,t)&&xt(l,t,e[t]);if(kt)for(var t of kt(e))Xt.call(e,t)&&xt(l,t,e[t]);return l},ot=(l,e)=>Qt(l,Wt(e));import{S as nt,h as at,s as Ke,C as be,D as ve,E as ye,o as W,t as se,H as we,L as Re,Q as h,I as D,a6 as j,R as m,T as g,J as I,a7 as S,p as f,U as a,k as K,a2 as r,K as Ee,aa as Be,ae as Ae,ak as Dt,ad as it,j as Xe,l as Ze,m as et,ao as It,ap as At,ac as Mt,af as qe,at as ze,au as Fe,a3 as Zt,ar as jt,V as el,aB as tl,as as ll}from"./vendor.3ae73048.js";import{T as tt,a8 as St,H as Ct,aY as sl,ag as rl}from"./index.146c2037.js";import{C as Ne,bg as Lt,bp as ol,O as lt,u as nl,i as al,bq as il}from"./helpers.7177ca38.js";import{j as Ot,m as ul}from"./router.1b465492.js";import"./types.8cb6216c.js";import{I as ut}from"./Icon.61279884.js";import{T as cl,b as fl,D as dl}from"./TagCount.d4471cb8.js";import{t as Nt,F as pl,Q as hl,M as ml,a as Pt}from"./Spinner.012207c4.js";import{M as _l}from"./MenuItemConfirmation.1afa248b.js";import{A as gl}from"./Alert.ff361b6c.js";import{P as bl}from"./Pencil.6fe88ae8.js";import"./index.2e3bb17a.js";import"./ChevronUp.0ab7bee0.js";import"./Button.d254e004.js";function Vt(l,e,t){const s=l.slice();return s[14]=e[t],s}function Bt(l){let e,t,s,i,n,o,c=l[14]+"",u,_,d,y,$,w,x,T,M;return{c(){e=h("label"),t=h("input"),n=D(),o=h("p"),u=j(c),d=D(),y=h("span"),w=D(),this.h()},l(k){e=m(k,"LABEL",{class:!0});var b=g(e);t=m(b,"INPUT",{type:!0,name:!0,class:!0,"aria-labelledby":!0}),n=I(b),o=m(b,"P",{id:!0,class:!0});var U=g(o);u=S(U,c),U.forEach(f),d=I(b),y=m(b,"SPAN",{"aria-hidden":!0,class:!0}),g(y).forEach(f),w=I(b),b.forEach(f),this.h()},h(){a(t,"type","radio"),a(t,"name","tag_colour"),t.__value=s=l[14],t.value=t.__value,a(t,"class","sr-only"),a(t,"aria-labelledby",i="tag_colour_"+l[14]),l[13][0].push(t),a(o,"id",_="tag_colour_"+l[14]),a(o,"class","sr-only"),a(y,"aria-hidden","true"),a(y,"class",$="h-8 w-8 "+Ne[l[14]]+" border border-black border-opacity-10 rounded-full"),a(e,"class",x="-m-0.5 relative p-0.5 rounded-full flex items-center justify-center cursor-pointer focus:outline-none "+(l[14]===l[4]?`ring-2 ${Ne[l[14]].replace("bg","ring")}`:""))},m(k,b){K(k,e,b),r(e,t),t.checked=t.__value===l[4],r(e,n),r(e,o),r(o,u),r(e,d),r(e,y),r(e,w),T||(M=Ee(t,"change",l[12]),T=!0)},p(k,b){b&16&&(t.checked=t.__value===k[4]),b&16&&x!==(x="-m-0.5 relative p-0.5 rounded-full flex items-center justify-center cursor-pointer focus:outline-none "+(k[14]===k[4]?`ring-2 ${Ne[k[14]].replace("bg","ring")}`:""))&&a(e,"class",x)},d(k){k&&f(e),l[13][0].splice(l[13][0].indexOf(t),1),T=!1,M()}}}function Ut(l){let e,t,s;return{c(){e=h("div"),t=h("p"),s=j("A tag of this title already exists"),this.h()},l(i){e=m(i,"DIV",{class:!0});var n=g(e);t=m(n,"P",{});var o=g(t);s=S(o,"A tag of this title already exists"),o.forEach(f),n.forEach(f),this.h()},h(){a(e,"class","bg-yellow-50 text-yellow-800 border border-yellow-300 rounded-md text-xs p-2")},m(i,n){K(i,e,n),r(e,t),r(t,s)},d(i){i&&f(e)}}}function vl(l){let e,t,s,i,n,o,c,u,_=l[0].uid+"",d,y,$,w,x,T,M,k,b,U,H,F,v,V,R,B,ae,re,q,N,J,Z,L,C,ee,E,O,ie,ne,te,ue,$e,ke,oe,xe,he,Te,Pe;i=new ut({props:{src:bl,modifier:"text-blue-600",size:6,type:"outline"}});let De=Lt,G=[];for(let P=0;P<De.length;P+=1)G[P]=Bt(Vt(l,De,P));let X=l[2]&&Ut();return{c(){e=h("div"),t=h("div"),s=h("div"),be(i.$$.fragment),n=D(),o=h("div"),c=h("h3"),u=j("Edit "),d=j(_),y=D(),$=h("div"),w=h("div"),x=h("label"),T=j("Title"),M=D(),k=h("div"),b=h("input"),U=D(),H=h("div"),F=h("label"),v=j("Description"),V=D(),R=h("div"),B=h("textarea"),ae=D(),re=h("div"),q=h("label"),N=j("Colour"),J=D(),Z=h("fieldset"),L=h("legend"),C=j("Choose a colour"),ee=D(),E=h("div");for(let P=0;P<G.length;P+=1)G[P].c();O=D(),X&&X.c(),ie=D(),ne=h("div"),te=h("button"),ue=j("Edit tag"),ke=D(),oe=h("button"),xe=j("Cancel"),this.h()},l(P){e=m(P,"DIV",{class:!0});var ce=g(e);t=m(ce,"DIV",{});var z=g(t);s=m(z,"DIV",{class:!0});var Ie=g(s);ve(i.$$.fragment,Ie),Ie.forEach(f),n=I(z),o=m(z,"DIV",{class:!0});var fe=g(o);c=m(fe,"H3",{class:!0,id:!0});var Oe=g(c);u=S(Oe,"Edit "),d=S(Oe,_),Oe.forEach(f),y=I(fe),$=m(fe,"DIV",{class:!0});var me=g($);w=m(me,"DIV",{});var Me=g(w);x=m(Me,"LABEL",{for:!0,class:!0});var je=g(x);T=S(je,"Title"),je.forEach(f),M=I(Me),k=m(Me,"DIV",{class:!0});var Se=g(k);b=m(Se,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),Se.forEach(f),Me.forEach(f),U=I(me),H=m(me,"DIV",{});var Ce=g(H);F=m(Ce,"LABEL",{for:!0,class:!0});var Ue=g(F);v=S(Ue,"Description"),Ue.forEach(f),V=I(Ce),R=m(Ce,"DIV",{class:!0});var _e=g(R);B=m(_e,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),g(B).forEach(f),_e.forEach(f),Ce.forEach(f),ae=I(me),re=m(me,"DIV",{});var ge=g(re);q=m(ge,"LABEL",{for:!0,class:!0});var Y=g(q);N=S(Y,"Colour"),Y.forEach(f),J=I(ge),Z=m(ge,"FIELDSET",{class:!0});var Ve=g(Z);L=m(Ve,"LEGEND",{class:!0});var Je=g(L);C=S(Je,"Choose a colour"),Je.forEach(f),ee=I(Ve),E=m(Ve,"DIV",{class:!0});var Ye=g(E);for(let A=0;A<G.length;A+=1)G[A].l(Ye);Ye.forEach(f),Ve.forEach(f),ge.forEach(f),O=I(me),X&&X.l(me),me.forEach(f),fe.forEach(f),z.forEach(f),ie=I(ce),ne=m(ce,"DIV",{class:!0});var Le=g(ne);te=m(Le,"BUTTON",{type:!0,class:!0});var Q=g(te);ue=S(Q,"Edit tag"),Q.forEach(f),ke=I(Le),oe=m(Le,"BUTTON",{type:!0,class:!0});var p=g(oe);xe=S(p,"Cancel"),p.forEach(f),Le.forEach(f),ce.forEach(f),this.h()},h(){a(s,"class","mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100"),a(c,"class","mb-6 text-lg leading-6 font-medium text-gray-900"),a(c,"id","modal-headline"),a(x,"for","tag_title"),a(x,"class","block text-sm font-medium text-gray-700"),a(b,"type","text"),a(b,"id","tag_title"),a(b,"class","shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"),a(b,"placeholder","Enter a title"),a(k,"class","mt-1"),a(F,"for","tag_description"),a(F,"class","block text-sm font-medium text-gray-700"),a(B,"id","tag_description"),a(B,"rows","2"),a(B,"class","shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2"),a(B,"placeholder","Enter a description (optional)"),a(R,"class","mt-1"),a(q,"for","tag_colour"),a(q,"class","block text-sm font-medium text-gray-700"),a(L,"class","sr-only"),a(E,"class","flex items-center flex-wrap gap-3"),a(Z,"class","mt-2"),a($,"class","mb-4 text-sm text-left flex flex-col gap-y-4"),a(o,"class","mt-3 text-center sm:mt-5"),te.disabled=$e=!l[5],a(te,"type","button"),a(te,"class","w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-40 disabled:cursor-not-allowed sm:col-start-2 sm:text-sm"),a(oe,"type","button"),a(oe,"class","mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:col-start-1 sm:text-sm"),a(ne,"class","mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"),a(e,"class","inline-block align-bottom w-92 bg-white rounded-lg px-4 pt-5 pb-4 text-left shadow-xl transform transition-all sm:align-middle sm:max-w-md w-full sm:p-6")},m(P,ce){K(P,e,ce),r(e,t),r(t,s),ye(i,s,null),r(t,n),r(t,o),r(o,c),r(c,u),r(c,d),r(o,y),r(o,$),r($,w),r(w,x),r(x,T),r(w,M),r(w,k),r(k,b),Be(b,l[1]),r($,U),r($,H),r(H,F),r(F,v),r(H,V),r(H,R),r(R,B),Be(B,l[3]),r($,ae),r($,re),r(re,q),r(q,N),r(re,J),r(re,Z),r(Z,L),r(L,C),r(Z,ee),r(Z,E);for(let z=0;z<G.length;z+=1)G[z].m(E,null);r($,O),X&&X.m($,null),r(e,ie),r(e,ne),r(ne,te),r(te,ue),r(ne,ke),r(ne,oe),r(oe,xe),he=!0,Te||(Pe=[Ee(b,"input",l[10]),Ee(B,"input",l[11]),Ee(te,"click",l[7]),Ee(oe,"click",l[6])],Te=!0)},p(P,ce){if((!he||ce&1)&&_!==(_=P[0].uid+"")&&Ae(d,_),ce&2&&b.value!==P[1]&&Be(b,P[1]),ce&8&&Be(B,P[3]),ce&16){De=Lt;let z;for(z=0;z<De.length;z+=1){const Ie=Vt(P,De,z);G[z]?G[z].p(Ie,ce):(G[z]=Bt(Ie),G[z].c(),G[z].m(E,null))}for(;z<G.length;z+=1)G[z].d(1);G.length=De.length}P[2]?X||(X=Ut(),X.c(),X.m($,null)):X&&(X.d(1),X=null),(!he||ce&32&&$e!==($e=!P[5]))&&(te.disabled=$e)},i(P){he||(W(i.$$.fragment,P),he=!0)},o(P){se(i.$$.fragment,P),he=!1},d(P){P&&f(e),we(i),Dt(G,P),X&&X.d(),Te=!1,it(Pe)}}}function yl(l){let e,t;return e=new gl({props:{$$slots:{default:[vl]},$$scope:{ctx:l}}}),{c(){be(e.$$.fragment)},l(s){ve(e.$$.fragment,s)},m(s,i){ye(e,s,i),t=!0},p(s,[i]){const n={};i&131135&&(n.$$scope={dirty:i,ctx:s}),e.$set(n)},i(s){t||(W(e.$$.fragment,s),t=!0)},o(s){se(e.$$.fragment,s),t=!1},d(s){we(e,s)}}}function wl(l,e,t){var k;let s,i,n;Re(l,Ot,b=>t(9,n=b));let{doc:o}=e,{showEditAlert:c}=e,u=o.title,_=(k=o.description)!=null?k:"",d=o.colour;const y=()=>{t(8,c=!1)},$=()=>{if(!i)return;const b={};u!==o.title&&(b.title=u),(_===""&&o.description!==null||_!=="")&&(b.description=_),d!==o.colour&&(b.colour=d),ol(o.uid,b.title,b.colour,b.description),t(8,c=!1)},w=[[]];function x(){u=this.value,t(1,u)}function T(){_=this.value,t(3,_)}function M(){d=this.__value,t(4,d)}return l.$$set=b=>{"doc"in b&&t(0,o=b.doc),"showEditAlert"in b&&t(8,c=b.showEditAlert)},l.$$.update=()=>{l.$$.dirty&515&&t(2,s=n.filter(b=>b.uid!==o.uid).some(b=>b.title===u)),l.$$.dirty&6&&t(5,i=u.length>0&&!s)},[o,u,s,_,d,i,y,$,c,n,x,T,M,w]}class El extends nt{constructor(e){super();at(this,e,wl,yl,Ke,{doc:0,showEditAlert:8})}}function $l(l){var x;let e,t,s,i=l[5]((x=l[0].title)!=null?x:"")+"",n,o,c,u=l[0].counts.total+"",_,d,y,$,w;return{c(){e=h("a"),t=h("div"),s=h("span"),o=D(),c=h("div"),_=j(u),this.h()},l(T){e=m(T,"A",{href:!0,class:!0});var M=g(e);t=m(M,"DIV",{class:!0});var k=g(t);s=m(k,"SPAN",{class:!0});var b=g(s);b.forEach(f),k.forEach(f),o=I(M),c=m(M,"DIV",{class:!0});var U=g(c);_=S(U,u),U.forEach(f),M.forEach(f),this.h()},h(){a(s,"class",n="inline-flex items-center px-2 py-0.5 rounded-full text-sm font-medium "+Ne[l[0].colour]+" group-hover:"+lt[l[0].colour]+" text-white"),a(t,"class","flex items-center"),a(c,"class","flex items-center justify-center px-1.5 h-5 text-xs rounded bg-gray-200 text-gray-700 group-hover:text-blue-100 group-hover:bg-blue-600"),a(e,"href",d=window.pathPrefix+"/browse/"+l[3]),a(e,"class","flex-grow overflow-hidden flex justify-between text-xs gap-1 hover:bg-gray-100 rounded p-1 items-center group focus:outline-none focus-visible:ring-2 focus-visible:ring-ring-offset focus-visible:ring-blue-500")},m(T,M){K(T,e,M),r(e,t),r(t,s),s.innerHTML=i,r(e,o),r(e,c),r(c,_),$||(w=It(y=Nt.call(null,e,l[4])),$=!0)},p(T,M){var k;M&1&&i!==(i=T[5]((k=T[0].title)!=null?k:"")+"")&&(s.innerHTML=i),M&1&&n!==(n="inline-flex items-center px-2 py-0.5 rounded-full text-sm font-medium "+Ne[T[0].colour]+" group-hover:"+lt[T[0].colour]+" text-white")&&a(s,"class",n),M&1&&u!==(u=T[0].counts.total+"")&&Ae(_,u),M&8&&d!==(d=window.pathPrefix+"/browse/"+T[3])&&a(e,"href",d),y&&At(y.update)&&M&16&&y.update.call(null,T[4])},i:Mt,o:Mt,d(T){T&&f(e),$=!1,w()}}}function Tl(l){var F;let e,t,s,i=l[5]((F=l[0].title)!=null?F:"")+"",n,o,c,u=l[0].counts.total+"",_,d,y,$,w,x,T,M,k;function b(v){l[8](v)}function U(v){l[9](v)}let H={};return l[1]!==void 0&&(H.handleShowMenu=l[1]),l[2]!==void 0&&(H.closeMenu=l[2]),$=new fl({props:H}),qe.push(()=>ze($,"handleShowMenu",b)),qe.push(()=>ze($,"closeMenu",U)),{c(){e=h("button"),t=h("div"),s=h("span"),o=D(),c=h("div"),_=j(u),y=D(),be($.$$.fragment),this.h()},l(v){e=m(v,"BUTTON",{type:!0,class:!0});var V=g(e);t=m(V,"DIV",{class:!0});var R=g(t);s=m(R,"SPAN",{class:!0});var B=g(s);B.forEach(f),R.forEach(f),o=I(V),c=m(V,"DIV",{class:!0});var ae=g(c);_=S(ae,u),ae.forEach(f),V.forEach(f),y=I(v),ve($.$$.fragment,v),this.h()},h(){a(s,"class",n="inline-flex items-center px-2 py-0.5 rounded-full text-sm font-medium "+Ne[l[0].colour]+" group-hover:"+lt[l[0].colour]+" text-white"),a(t,"class","flex items-center"),a(c,"class","flex items-center justify-center px-1.5 h-5 text-xs rounded bg-gray-200 text-gray-700 group-hover:text-blue-100 group-hover:bg-blue-600"),a(e,"type","button"),a(e,"class","group flex-grow flex items-center justify-between gap-1 p-1 w-full text-left overflow-hidden text-xs rounded hover:bg-gray-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset focus-visible:ring-blue-500")},m(v,V){K(v,e,V),r(e,t),r(t,s),s.innerHTML=i,r(e,o),r(e,c),r(c,_),K(v,y,V),ye($,v,V),T=!0,M||(k=[Ee(e,"click",l[7]),It(d=Nt.call(null,e,l[4]))],M=!0)},p(v,V){var B;(!T||V&1)&&i!==(i=v[5]((B=v[0].title)!=null?B:"")+"")&&(s.innerHTML=i),(!T||V&1&&n!==(n="inline-flex items-center px-2 py-0.5 rounded-full text-sm font-medium "+Ne[v[0].colour]+" group-hover:"+lt[v[0].colour]+" text-white"))&&a(s,"class",n),(!T||V&1)&&u!==(u=v[0].counts.total+"")&&Ae(_,u),d&&At(d.update)&&V&16&&d.update.call(null,v[4]);const R={};!w&&V&2&&(w=!0,R.handleShowMenu=v[1],Fe(()=>w=!1)),!x&&V&4&&(x=!0,R.closeMenu=v[2],Fe(()=>x=!1)),$.$set(R)},i(v){T||(W($.$$.fragment,v),T=!0)},o(v){se($.$$.fragment,v),T=!1},d(v){v&&f(e),v&&f(y),we($,v),M=!1,it(k)}}}function kl(l){let e,t,s,i;const n=[Tl,$l],o=[];function c(u,_){return u[0].type===tt.general?0:1}return e=c(l),t=o[e]=n[e](l),{c(){t.c(),s=Xe()},l(u){t.l(u),s=Xe()},m(u,_){o[e].m(u,_),K(u,s,_),i=!0},p(u,[_]){let d=e;e=c(u),e===d?o[e].p(u,_):(Ze(),se(o[d],1,1,()=>{o[d]=null}),et(),t=o[e],t?t.p(u,_):(t=o[e]=n[e](u),t.c()),W(t,1),t.m(s.parentNode,s))},i(u){i||(W(t),i=!0)},o(u){se(t),i=!1},d(u){o[e].d(u),u&&f(s)}}}function xl(l,e,t){let s,i,{doc:n}=e,{search:o=""}=e,c,u;const _=w=>{if(o.length===0||w.length===0)return w;{const x=w==null?void 0:w.toLocaleLowerCase().indexOf(o);return`${w.substring(0,x)}<span class="bg-yellow-200 text-yellow-800 leading-none px-px mx-px">${w.substring(x,x+o.length)}</span>${w.substring(x+o.length)}`}},d=w=>{c(w,{uid:n.uid,counts:n.counts})};function y(w){c=w,t(1,c)}function $(w){u=w,t(2,u)}return l.$$set=w=>{"doc"in w&&t(0,n=w.doc),"search"in w&&t(6,o=w.search)},l.$$.update=()=>{l.$$.dirty&1&&t(4,s={component:cl,componentProps:{tag:n},placement:"right",delay:[500,0],classOverride:"bg-gray-700"}),l.$$.dirty&1&&t(3,i=n.type===tt.project?`P*?tags[]=${n.uid}`:n.type===tt.workspace?`P*-W*?tags[]=${n.uid}`:n.type===tt.session?`P*-S*?tags[]=${n.uid}`:`P*-J*?tags[]=${n.uid}`)},[n,c,u,i,s,_,o,d,y,$]}class Dl extends nt{constructor(e){super();at(this,e,xl,kl,Ke,{doc:0,search:6})}}function Ht(l,e,t){const s=l.slice();return s[32]=e[t],s[34]=t,s}function Rt(l,e,t){const s=l.slice();return s[35]=e[t][0],s[36]=e[t][1],s}function qt(l,e){var _;let t,s=e[36]+"",i,n,o=(e[35]==="all"?e[10]:(_=e[5][e[35]])!=null?_:"-")+"",c,u;return{key:l,first:null,c(){t=h("option"),i=j(s),n=j(" ("),c=j(o),u=j(")"),this.h()},l(d){t=m(d,"OPTION",{});var y=g(t);i=S(y,s),n=S(y," ("),c=S(y,o),u=S(y,")"),y.forEach(f),this.h()},h(){t.__value=e[35],t.value=t.__value,this.first=t},m(d,y){K(d,t,y),r(t,i),r(t,n),r(t,c),r(t,u)},p(d,y){var $;e=d,y[0]&1056&&o!==(o=(e[35]==="all"?e[10]:($=e[5][e[35]])!=null?$:"-")+"")&&Ae(c,o)},d(d){d&&f(t)}}}function zt(l){let e,t=[],s=new Map,i,n,o=Object.entries(l[13]);const c=u=>u[35];for(let u=0;u<o.length;u+=1){let _=Rt(l,o,u),d=c(_);s.set(d,t[u]=qt(d,_))}return{c(){e=h("select");for(let u=0;u<t.length;u+=1)t[u].c();this.h()},l(u){e=m(u,"SELECT",{class:!0});var _=g(e);for(let d=0;d<t.length;d+=1)t[d].l(_);_.forEach(f),this.h()},h(){a(e,"class","block pl-3 pr-10 py-1 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"),l[0]===void 0&&Zt(()=>l[16].call(e))},m(u,_){K(u,e,_);for(let d=0;d<t.length;d+=1)t[d].m(e,null);jt(e,l[0]),i||(n=Ee(e,"change",l[16]),i=!0)},p(u,_){_[0]&9248&&(o=Object.entries(u[13]),t=el(t,_,c,1,u,o,s,e,tl,qt,null,Rt)),_[0]&8193&&jt(e,u[0])},d(u){u&&f(e);for(let _=0;_<t.length;_+=1)t[_].d();i=!1,n()}}}function Ft(l){let e,t,s,i,n,o,c,u;n=new ut({props:{src:dl}});function _(...d){return l[21](l[32],...d)}return{c(){e=h("button"),t=h("span"),s=j("Tag options"),i=D(),be(n.$$.fragment),this.h()},l(d){e=m(d,"BUTTON",{type:!0,class:!0});var y=g(e);t=m(y,"SPAN",{class:!0});var $=g(t);s=S($,"Tag options"),$.forEach(f),i=I(y),ve(n.$$.fragment,y),y.forEach(f),this.h()},h(){a(t,"class","sr-only"),a(e,"type","button"),a(e,"class","w-8 h-8 dark:bg-gray-700 inline-flex items-center justify-center text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500")},m(d,y){K(d,e,y),r(e,t),r(t,s),r(e,i),ye(n,e,null),o=!0,c||(u=Ee(e,"click",_),c=!0)},p(d,y){l=d},i(d){o||(W(n.$$.fragment,d),o=!0)},o(d){se(n.$$.fragment,d),o=!1},d(d){d&&f(e),we(n),c=!1,u()}}}function Jt(l){var J,Z;let e,t,s=l[32].uid+"",i,n,o,c,u,_,d=((J=l[32].description)!=null?J:"")+"",y,$,w,x=St(l[32].type)+"",T,M,k,b=((Z=l[11][l[32].created_by_user_id])!=null?Z:"Unknown")+"",U,H,F,v=Ct(l[32].created_at,"PPpp")+"",V,R,B,ae,re,q;c=new Dl({props:{doc:l[32],search:l[2]}});let N=(l[12]||l[32].created_by_user_id===l[4])&&Ft(l);return{c(){e=h("tr"),t=h("td"),i=j(s),n=D(),o=h("td"),be(c.$$.fragment),u=D(),_=h("td"),y=j(d),$=D(),w=h("td"),T=j(x),M=D(),k=h("td"),U=j(b),H=D(),F=h("td"),V=j(v),R=D(),B=h("td"),N&&N.c(),ae=D(),this.h()},l(L){e=m(L,"TR",{class:!0});var C=g(e);t=m(C,"TD",{class:!0});var ee=g(t);i=S(ee,s),ee.forEach(f),n=I(C),o=m(C,"TD",{class:!0});var E=g(o);ve(c.$$.fragment,E),E.forEach(f),u=I(C),_=m(C,"TD",{class:!0});var O=g(_);y=S(O,d),O.forEach(f),$=I(C),w=m(C,"TD",{class:!0});var ie=g(w);T=S(ie,x),ie.forEach(f),M=I(C),k=m(C,"TD",{class:!0});var ne=g(k);U=S(ne,b),ne.forEach(f),H=I(C),F=m(C,"TD",{class:!0});var te=g(F);V=S(te,v),te.forEach(f),R=I(C),B=m(C,"TD",{class:!0});var ue=g(B);N&&N.l(ue),ue.forEach(f),ae=I(C),C.forEach(f),this.h()},h(){a(t,"class","px-4 py-1 whitespace-nowrap text-sm text-gray-900"),a(o,"class","px-4 py-1 whitespace-nowrap text-sm font-medium text-gray-900"),a(_,"class","px-4 py-1 whitespace-nowrap text-sm text-gray-500"),a(w,"class","px-4 py-1 whitespace-nowrap text-sm text-gray-500"),a(k,"class","px-4 py-1 whitespace-nowrap text-sm text-gray-500"),a(F,"class","px-4 py-1 whitespace-nowrap text-sm text-gray-500"),a(B,"class","px-4 py-1 whitespace-nowrap text-right text-sm font-medium"),a(e,"class",re=l[34]%2==0?"bg-white":"bg-gray-50")},m(L,C){K(L,e,C),r(e,t),r(t,i),r(e,n),r(e,o),ye(c,o,null),r(e,u),r(e,_),r(_,y),r(e,$),r(e,w),r(w,T),r(e,M),r(e,k),r(k,U),r(e,H),r(e,F),r(F,V),r(e,R),r(e,B),N&&N.m(B,null),r(e,ae),q=!0},p(L,C){var E,O;(!q||C[0]&8)&&s!==(s=L[32].uid+"")&&Ae(i,s);const ee={};C[0]&8&&(ee.doc=L[32]),C[0]&4&&(ee.search=L[2]),c.$set(ee),(!q||C[0]&8)&&d!==(d=((E=L[32].description)!=null?E:"")+"")&&Ae(y,d),(!q||C[0]&8)&&x!==(x=St(L[32].type)+"")&&Ae(T,x),(!q||C[0]&2056)&&b!==(b=((O=L[11][L[32].created_by_user_id])!=null?O:"Unknown")+"")&&Ae(U,b),(!q||C[0]&8)&&v!==(v=Ct(L[32].created_at,"PPpp")+"")&&Ae(V,v),L[12]||L[32].created_by_user_id===L[4]?N?(N.p(L,C),C[0]&4120&&W(N,1)):(N=Ft(L),N.c(),W(N,1),N.m(B,null)):N&&(Ze(),se(N,1,1,()=>{N=null}),et())},i(L){q||(W(c.$$.fragment,L),W(N),q=!0)},o(L){se(c.$$.fragment,L),se(N),q=!1},d(L){L&&f(e),we(c),N&&N.d()}}}function Il(l){let e;return{c(){e=j("Edit tag")},l(t){e=S(t,"Edit tag")},m(t,s){K(t,e,s)},d(t){t&&f(e)}}}function Al(l){var n,o;let e,t=((o=(n=l[8])==null?void 0:n.uid)!=null?o:"-")+"",s,i;return{c(){e=j("Delete "),s=j(t),i=j("?")},l(c){e=S(c,"Delete "),s=S(c,t),i=S(c,"?")},m(c,u){K(c,e,u),K(c,s,u),K(c,i,u)},p(c,u){var _,d;u[0]&256&&t!==(t=((d=(_=c[8])==null?void 0:_.uid)!=null?d:"-")+"")&&Ae(s,t)},d(c){c&&f(e),c&&f(s),c&&f(i)}}}function Ml(l){let e,t,s;return e=new _l({props:{$$slots:{default:[Al]},$$scope:{ctx:l}}}),e.$on("confirm",l[23]),{c(){be(e.$$.fragment),t=j(`
      Delete tag`)},l(i){ve(e.$$.fragment,i),t=S(i,`
      Delete tag`)},m(i,n){ye(e,i,n),K(i,t,n),s=!0},p(i,n){const o={};n[0]&256|n[1]&256&&(o.$$scope={dirty:n,ctx:i}),e.$set(o)},i(i){s||(W(e.$$.fragment,i),s=!0)},o(i){se(e.$$.fragment,i),s=!1},d(i){we(e,i),i&&f(t)}}}function jl(l){let e,t,s,i;return e=new Pt({props:{$$slots:{default:[Il]},$$scope:{ctx:l}}}),e.$on("click",l[22]),s=new Pt({props:{itemType:"danger",$$slots:{default:[Ml]},$$scope:{ctx:l}}}),{c(){be(e.$$.fragment),t=D(),be(s.$$.fragment)},l(n){ve(e.$$.fragment,n),t=I(n),ve(s.$$.fragment,n)},m(n,o){ye(e,n,o),K(n,t,o),ye(s,n,o),i=!0},p(n,o){const c={};o[1]&256&&(c.$$scope={dirty:o,ctx:n}),e.$set(c);const u={};o[0]&256|o[1]&256&&(u.$$scope={dirty:o,ctx:n}),s.$set(u)},i(n){i||(W(e.$$.fragment,n),W(s.$$.fragment,n),i=!0)},o(n){se(e.$$.fragment,n),se(s.$$.fragment,n),i=!1},d(n){we(e,n),n&&f(t),we(s,n)}}}function Sl(l){let e,t;return e=new ml({props:{$$slots:{default:[jl]},$$scope:{ctx:l}}}),{c(){be(e.$$.fragment)},l(s){ve(e.$$.fragment,s)},m(s,i){ye(e,s,i),t=!0},p(s,i){const n={};i[0]&896|i[1]&256&&(n.$$scope={dirty:i,ctx:s}),e.$set(n)},i(s){t||(W(e.$$.fragment,s),t=!0)},o(s){se(e.$$.fragment,s),t=!1},d(s){we(e,s)}}}function Yt(l){let e,t,s;function i(o){l[26](o)}let n={doc:l[8]};return l[9]!==void 0&&(n.showEditAlert=l[9]),e=new El({props:n}),qe.push(()=>ze(e,"showEditAlert",i)),{c(){be(e.$$.fragment)},l(o){ve(e.$$.fragment,o)},m(o,c){ye(e,o,c),s=!0},p(o,c){const u={};c[0]&256&&(u.doc=o[8]),!t&&c[0]&512&&(t=!0,u.showEditAlert=o[9],Fe(()=>t=!1)),e.$set(u)},i(o){s||(W(e.$$.fragment,o),s=!0)},o(o){se(e.$$.fragment,o),s=!1},d(o){we(e,o)}}}function Cl(l){let e,t,s=JSON.stringify(l[5]),i,n,o,c,u,_,d,y,$,w,x,T,M,k,b,U,H,F,v,V,R,B,ae,re,q,N,J,Z,L,C,ee,E,O,ie,ne,te,ue,$e,ke,oe,xe,he,Te,Pe,De,G,X,P,ce,z,Ie,fe,Oe,me,Me,je,Se,Ce,Ue,_e=zt(l);H=new ut({props:{src:pl,modifier:"text-gray-400"}});let ge=l[3],Y=[];for(let p=0;p<ge.length;p+=1)Y[p]=Jt(Ht(l,ge,p));const Ve=p=>se(Y[p],1,1,()=>{Y[p]=null});function Je(p){l[24](p)}function Ye(p){l[25](p)}let Le={modifier:"text-xs",$$slots:{default:[Sl]},$$scope:{ctx:l}};l[6]!==void 0&&(Le.handleShowMenu=l[6]),l[7]!==void 0&&(Le.closeMenu=l[7]),fe=new hl({props:Le}),qe.push(()=>ze(fe,"handleShowMenu",Je)),qe.push(()=>ze(fe,"closeMenu",Ye));let Q=l[9]&&l[8]!==null&&Yt(l);return{c(){e=h("div"),t=h("div"),_e.c(),i=D(),n=h("span"),o=h("button"),c=j("Mine"),_=D(),d=h("button"),y=j("All"),w=D(),x=h("div"),T=h("label"),M=j("Filter tags"),k=D(),b=h("div"),U=h("div"),be(H.$$.fragment),F=D(),v=h("input"),V=D(),R=h("button"),B=j("New Tag"),ae=D(),re=h("div"),q=h("table"),N=h("thead"),J=h("tr"),Z=h("th"),L=j("ID"),C=D(),ee=h("th"),E=j("Tag"),O=D(),ie=h("th"),ne=j("Description"),te=D(),ue=h("th"),$e=j("Type"),ke=D(),oe=h("th"),xe=j("Created By"),he=D(),Te=h("th"),Pe=j("Created On"),De=D(),G=h("th"),X=h("span"),P=j("Edit"),ce=D(),z=h("tbody");for(let p=0;p<Y.length;p+=1)Y[p].c();Ie=D(),be(fe.$$.fragment),Me=D(),Q&&Q.c(),je=Xe(),this.h()},l(p){e=m(p,"DIV",{class:!0});var A=g(e);t=m(A,"DIV",{class:!0});var de=g(t);_e.l(de),i=I(de),n=m(de,"SPAN",{class:!0});var le=g(n);o=m(le,"BUTTON",{type:!0,class:!0});var He=g(o);c=S(He,"Mine"),He.forEach(f),_=I(le),d=m(le,"BUTTON",{type:!0,class:!0});var ct=g(d);y=S(ct,"All"),ct.forEach(f),le.forEach(f),w=I(de),x=m(de,"DIV",{});var Ge=g(x);T=m(Ge,"LABEL",{for:!0,class:!0});var ft=g(T);M=S(ft,"Filter tags"),ft.forEach(f),k=I(Ge),b=m(Ge,"DIV",{class:!0});var Qe=g(b);U=m(Qe,"DIV",{class:!0});var dt=g(U);ve(H.$$.fragment,dt),dt.forEach(f),F=I(Qe),v=m(Qe,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),Qe.forEach(f),Ge.forEach(f),de.forEach(f),V=I(A),R=m(A,"BUTTON",{type:!0,class:!0});var pt=g(R);B=S(pt,"New Tag"),pt.forEach(f),A.forEach(f),ae=I(p),re=m(p,"DIV",{class:!0});var ht=g(re);q=m(ht,"TABLE",{class:!0});var We=g(q);N=m(We,"THEAD",{class:!0});var mt=g(N);J=m(mt,"TR",{});var pe=g(J);Z=m(pe,"TH",{scope:!0,class:!0});var _t=g(Z);L=S(_t,"ID"),_t.forEach(f),C=I(pe),ee=m(pe,"TH",{scope:!0,class:!0});var gt=g(ee);E=S(gt,"Tag"),gt.forEach(f),O=I(pe),ie=m(pe,"TH",{scope:!0,class:!0});var bt=g(ie);ne=S(bt,"Description"),bt.forEach(f),te=I(pe),ue=m(pe,"TH",{scope:!0,class:!0});var vt=g(ue);$e=S(vt,"Type"),vt.forEach(f),ke=I(pe),oe=m(pe,"TH",{scope:!0,class:!0});var yt=g(oe);xe=S(yt,"Created By"),yt.forEach(f),he=I(pe),Te=m(pe,"TH",{scope:!0,class:!0});var wt=g(Te);Pe=S(wt,"Created On"),wt.forEach(f),De=I(pe),G=m(pe,"TH",{scope:!0,class:!0});var Et=g(G);X=m(Et,"SPAN",{class:!0});var $t=g(X);P=S($t,"Edit"),$t.forEach(f),Et.forEach(f),pe.forEach(f),mt.forEach(f),ce=I(We),z=m(We,"TBODY",{});var Tt=g(z);for(let st=0;st<Y.length;st+=1)Y[st].l(Tt);Tt.forEach(f),We.forEach(f),ht.forEach(f),Ie=I(p),ve(fe.$$.fragment,p),Me=I(p),Q&&Q.l(p),je=Xe(),this.h()},h(){a(o,"type","button"),a(o,"class",u="relative inline-flex items-center px-2.5 py-1.5 rounded-l-md border text-xs leading-4 font-medium focus:z-10 focus:outline-none transition ease-in-out duration-150 "+(l[1]===!1?l[14].active:l[14].default)),a(d,"type","button"),a(d,"class",$="-ml-px relative inline-flex items-center px-2.5 py-1.5 rounded-r-md border text-xs leading-4 font-medium focus:z-10 focus:outline-none transition ease-in-out duration-150 "+(l[1]===!0?l[14].active:l[14].default)),a(n,"class","relative z-0 inline-flex shadow-sm rounded-md"),a(T,"for","tag_search"),a(T,"class","sr-only"),a(U,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),a(v,"type","text"),a(v,"id","tag_search"),a(v,"class","focus:outline-none focus:ring-inset focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 py-1 text-sm border-gray-300 rounded-md"),a(v,"placeholder","Search"),a(b,"class","relative rounded shadow-sm"),a(t,"class","flex items-center gap-2"),a(R,"type","button"),a(R,"class","inline-flex items-center justify-center px-2.5 py-1.5 border border-transparent shadow-sm text-sm font-medium rounded-md text-blue-800 bg-blue-200 hover:bg-blue-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500"),a(e,"class","flex-shrink-0 flex justify-between items-center px-2.5 py-1.5 bg-white border-b border-gray-300 border-dashed text-sm"),a(Z,"scope","col"),a(Z,"class","px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),a(ee,"scope","col"),a(ee,"class","px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),a(ie,"scope","col"),a(ie,"class","px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),a(ue,"scope","col"),a(ue,"class","px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),a(oe,"scope","col"),a(oe,"class","px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),a(Te,"scope","col"),a(Te,"class","px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),a(X,"class","sr-only"),a(G,"scope","col"),a(G,"class","relative px-4 py-2"),a(N,"class","bg-gray-50"),a(q,"class","min-w-full divide-y divide-gray-200"),a(re,"class","h-full overflow-auto custom-scrollbar")},m(p,A){K(p,e,A),r(e,t),_e.m(t,null),r(t,i),r(t,n),r(n,o),r(o,c),r(n,_),r(n,d),r(d,y),r(t,w),r(t,x),r(x,T),r(T,M),r(x,k),r(x,b),r(b,U),ye(H,U,null),r(b,F),r(b,v),Be(v,l[2]),r(e,V),r(e,R),r(R,B),K(p,ae,A),K(p,re,A),r(re,q),r(q,N),r(N,J),r(J,Z),r(Z,L),r(J,C),r(J,ee),r(ee,E),r(J,O),r(J,ie),r(ie,ne),r(J,te),r(J,ue),r(ue,$e),r(J,ke),r(J,oe),r(oe,xe),r(J,he),r(J,Te),r(Te,Pe),r(J,De),r(J,G),r(G,X),r(X,P),r(q,ce),r(q,z);for(let de=0;de<Y.length;de+=1)Y[de].m(z,null);K(p,Ie,A),ye(fe,p,A),K(p,Me,A),Q&&Q.m(p,A),K(p,je,A),Se=!0,Ce||(Ue=[Ee(o,"click",l[17]),Ee(d,"click",l[18]),Ee(v,"input",l[19]),Ee(R,"click",l[20])],Ce=!0)},p(p,A){if(A[0]&32&&Ke(s,s=JSON.stringify(p[5]))?(_e.d(1),_e=zt(p),_e.c(),_e.m(t,i)):_e.p(p,A),(!Se||A[0]&2&&u!==(u="relative inline-flex items-center px-2.5 py-1.5 rounded-l-md border text-xs leading-4 font-medium focus:z-10 focus:outline-none transition ease-in-out duration-150 "+(p[1]===!1?p[14].active:p[14].default)))&&a(o,"class",u),(!Se||A[0]&2&&$!==($="-ml-px relative inline-flex items-center px-2.5 py-1.5 rounded-r-md border text-xs leading-4 font-medium focus:z-10 focus:outline-none transition ease-in-out duration-150 "+(p[1]===!0?p[14].active:p[14].default)))&&a(d,"class",$),A[0]&4&&v.value!==p[2]&&Be(v,p[2]),A[0]&6492){ge=p[3];let le;for(le=0;le<ge.length;le+=1){const He=Ht(p,ge,le);Y[le]?(Y[le].p(He,A),W(Y[le],1)):(Y[le]=Jt(He),Y[le].c(),W(Y[le],1),Y[le].m(z,null))}for(Ze(),le=ge.length;le<Y.length;le+=1)Ve(le);et()}const de={};A[0]&896|A[1]&256&&(de.$$scope={dirty:A,ctx:p}),!Oe&&A[0]&64&&(Oe=!0,de.handleShowMenu=p[6],Fe(()=>Oe=!1)),!me&&A[0]&128&&(me=!0,de.closeMenu=p[7],Fe(()=>me=!1)),fe.$set(de),p[9]&&p[8]!==null?Q?(Q.p(p,A),A[0]&768&&W(Q,1)):(Q=Yt(p),Q.c(),W(Q,1),Q.m(je.parentNode,je)):Q&&(Ze(),se(Q,1,1,()=>{Q=null}),et())},i(p){if(!Se){W(H.$$.fragment,p);for(let A=0;A<ge.length;A+=1)W(Y[A]);W(fe.$$.fragment,p),W(Q),Se=!0}},o(p){se(H.$$.fragment,p),Y=Y.filter(Boolean);for(let A=0;A<Y.length;A+=1)se(Y[A]);se(fe.$$.fragment,p),se(Q),Se=!1},d(p){p&&f(e),_e.d(p),we(H),p&&f(ae),p&&f(re),Dt(Y,p),p&&f(Ie),we(fe,p),p&&f(Me),Q&&Q.d(p),p&&f(je),Ce=!1,it(Ue)}}}function Ll(l,e,t){let s,i,n,o,c,u,_,d;Re(l,Ot,E=>t(15,c=E)),Re(l,nl,E=>t(4,u=E)),Re(l,ul,E=>t(11,_=E)),Re(l,al,E=>t(12,d=E));const y={all:"All tag types",general:"General",project:"Project",workspace:"Workspace",session:"Session",job:"Job"},$={default:"border-gray-300 bg-white text-gray-600 hover:text-gray-500 focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-700",active:"z-10 border-blue-400 bg-blue-100 text-blue-600 hover:text-blue-500 focus:border-blue-500 focus:shadow-outline-blue active:bg-blue-100 active:text-blue-700"},w={general:[],project:[],workspace:[],session:[],job:[]};let x={general:0,project:0,workspace:0,session:0,job:0},T="all",M=!1,k="",b,U,H=null,F=!1;const v=E=>{var O,ie,ne,te,ue,$e,ke,oe,xe,he;return((ie=(O=i[E])==null?void 0:O.length)!=null?ie:0)!==((te=(ne=n[E])==null?void 0:ne.length)!=null?te:0)?`${($e=(ue=n[E])==null?void 0:ue.length)!=null?$e:0}/${(oe=(ke=i[E])==null?void 0:ke.length)!=null?oe:0}`:(he=(xe=i[E])==null?void 0:xe.length)!=null?he:0},V=()=>{t(5,x={general:v("general"),project:v("project"),workspace:v("workspace"),session:v("session"),job:v("job")})};function R(){T=ll(this),t(0,T),t(13,y)}const B=()=>{t(1,M=!1)},ae=()=>{t(1,M=!0)};function re(){k=this.value,t(2,k)}const q=()=>sl(rl.newTag),N=(E,O)=>{t(8,H=E),b(O)},J=()=>{t(9,F=!0),U()},Z=()=>H!==null&&il(H.uid);function L(E){b=E,t(6,b)}function C(E){U=E,t(7,U)}function ee(E){F=E,t(9,F)}return l.$$.update=()=>{l.$$.dirty[0]&32791&&t(3,s=c.filter(E=>{var O;return(T==="all"?!0:E.type===T)&&(M===!1?E.created_by_user_id===u:!0)&&(k.length>0?E.title.toLowerCase().includes(k.toLowerCase())||((O=E.description)==null?void 0:O.toLowerCase().includes(k.toLowerCase())):!0)}).sort((E,O)=>O.uid_num-E.uid_num)),l.$$.dirty[0]&32768&&(i=c.reduce((E,O)=>ot(rt({},E),{[O.type]:E[O.type]?[...E[O.type],O]:[O]}),w)),l.$$.dirty[0]&8&&(n=s.reduce((E,O)=>ot(rt({},E),{[O.type]:E[O.type]?[...E[O.type],O]:[O]}),w)),l.$$.dirty[0]&32776&&t(10,o=c.length!==s.length?`${s.length}/${c.length}`:c.length),l.$$.dirty[0]&7&&V()},[T,M,k,s,u,x,b,U,H,F,o,_,d,y,$,c,R,B,ae,re,q,N,J,Z,L,C,ee]}class Wl extends nt{constructor(e){super();at(this,e,Ll,Cl,Ke,{},null,[-1,-1])}}export{Wl as default};
