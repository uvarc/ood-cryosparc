import{S as Q,h as R,s as G,j as P,k as _,l as D,t as p,m as V,o as f,p as m,L as y,u as z,w as M,C as $,D as g,E as h,H as j,Q as T,a6 as N,R as E,T as S,a7 as L,U as w,a2 as B,ac as U,I as O,J as q,ae as H,K,ao as le,ap as W,af as ie}from"./vendor.3ae73048.js";import{ba as X,J as ce,M as Y,av as ue,a6 as fe,N as pe,bb as me}from"./router.1b465492.js";import{ci as de,f as Z,bo as x}from"./index.146c2037.js";import{c as be}from"./jobs.d50d1674.js";import{D as _e,a as $e,I as ge,P as he,J as je}from"./JobActionsPanel.71a56eed.js";import"./types.8cb6216c.js";import{I as ee}from"./Icon.61279884.js";import{E as we}from"./Exclamation.f44359c6.js";import{C as ye}from"./CopyButton.c1ae3f83.js";import{t as ke}from"./Spinner.012207c4.js";import{P as F}from"./Panel.9c7a29b9.js";import{A as Je}from"./ActionButton.45723cc3.js";import{a3 as ve}from"./index.11580965.js";import{q as Pe,u as Te,o as Ee,r as Se}from"./createNew.a4a688d1.js";import{G as Be,C as Ce,F as Ie}from"./index.c4392b02.js";import{U as Ne}from"./Upload.9153237c.js";import{S as Le,J as Ue}from"./JobList.93d8403c.js";import"./helpers.7177ca38.js";import"./helpers.cea6b59c.js";import"./Trash.1e959d99.js";import"./Flag.5ce531b9.js";import"./FlagFilled.38eba9fd.js";import"./Section.803d9a44.js";import"./ChevronUp.0ab7bee0.js";import"./Tags.102dc558.js";import"./TagCount.d4471cb8.js";import"./JobTagsEditMenu.a5153cee.js";import"./MenuInfo.722434b0.js";import"./infoTags.cee3a0b8.js";import"./MarkdownEditor.e595b570.js";import"./purify.es.5cdb46dc.js";import"./InnerSection.b40ae804.js";import"./SingleParameter.c562a004.js";import"./Folder.9bc96b35.js";import"./ClipboardCopy.96aeb8e5.js";import"./jobs.7ab064ef.js";import"./apply.0059decc.js";import"./ButtonConfirmation.a6b453ba.js";import"./Button.d254e004.js";import"./MenuItemConfirmation.1afa248b.js";import"./MenuNested.51f47e2f.js";import"./index.2e3bb17a.js";import"./LockClosed.9ead7228.js";import"./Search.fa01495d.js";import"./Unfold.f168270e.js";import"./PinSlash.dc79993a.js";import"./ArrowCircleRight.3a96b815.js";import"./Download.0ce79951.js";function Ae(s){let t,r;return t=new F({props:{title:"Job Builder",$$slots:{content:[Me]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,o){h(t,e,o),r=!0},p(e,o){const n={};o&4096&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){r||(f(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){j(t,e)}}}function De(s){var e,o;let t,r;return t=new F({props:{title:""+(((o=(e=s[5])==null?void 0:e.jobType)!=null?o:"")+" "+s[4]),deselectAction:s[10],$$slots:{footer:[We],bottom:[Qe],content:[Fe],tag:[qe]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment)},l(n){g(t.$$.fragment,n)},m(n,a){h(t,n,a),r=!0},p(n,a){var l,i;const u={};a&48&&(u.title=""+(((i=(l=n[5])==null?void 0:l.jobType)!=null?i:"")+" "+n[4])),a&4327&&(u.$$scope={dirty:a,ctx:n}),t.$set(u)},i(n){r||(f(t.$$.fragment,n),r=!0)},o(n){p(t.$$.fragment,n),r=!1},d(n){j(t,n)}}}function Ve(s){let t,r;return t=new F({props:{title:"Job Builder",emptyState:!0,$$slots:{content:[ze]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,o){h(t,e,o),r=!0},p(e,o){const n={};o&4096&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){r||(f(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){j(t,e)}}}function Me(s){let t,r,e;return{c(){t=T("div"),r=T("p"),e=N("Select at a job in 'building' status to set parameters and queue it."),this.h()},l(o){t=E(o,"DIV",{slot:!0,class:!0});var n=S(t);r=E(n,"P",{class:!0});var a=S(r);e=L(a,"Select at a job in 'building' status to set parameters and queue it."),a.forEach(m),n.forEach(m),this.h()},h(){w(r,"class","text-gray-500 italic"),w(t,"slot","content"),w(t,"class","flex-grow p-2 text-sm")},m(o,n){_(o,t,n),B(t,r),B(r,e)},p:U,d(o){o&&m(t)}}}function Oe(s){let t,r,e,o,n;return{c(){t=T("span"),r=N(s[2]),e=O(),o=N(s[1]),this.h()},l(a){t=E(a,"SPAN",{class:!0});var u=S(t);r=L(u,s[2]),e=q(u),o=L(u,s[1]),u.forEach(m),this.h()},h(){var a;w(t,"class",n="mr-1.5 flex-shrink-0 inline-flex items-center px-2 py-1 leading-none rounded text-sm font-medium bg-"+x((a=s[0])==null?void 0:a.status)+"-600 text-white")},m(a,u){_(a,t,u),B(t,r),B(t,e),B(t,o)},p(a,u){var l;u&4&&H(r,a[2]),u&2&&H(o,a[1]),u&1&&n!==(n="mr-1.5 flex-shrink-0 inline-flex items-center px-2 py-1 leading-none rounded text-sm font-medium bg-"+x((l=a[0])==null?void 0:l.status)+"-600 text-white")&&w(t,"class",n)},d(a){a&&m(t)}}}function qe(s){let t,r;return t=new ye({props:{theme:"wrapper",defaultText:"Copy ID to clipboard",$$slots:{default:[Oe]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,o){h(t,e,o),r=!0},p(e,o){const n={};o&4103&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){r||(f(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){j(t,e)}}}function Fe(s){let t,r,e,o,n,a,u,l;return t=new _e({props:{data:s[5]}}),e=new $e({props:{data:s[5]}}),n=new ge({props:{data:s[5]}}),u=new he({props:{data:s[5]}}),{c(){$(t.$$.fragment),r=O(),$(e.$$.fragment),o=O(),$(n.$$.fragment),a=O(),$(u.$$.fragment)},l(i){g(t.$$.fragment,i),r=q(i),g(e.$$.fragment,i),o=q(i),g(n.$$.fragment,i),a=q(i),g(u.$$.fragment,i)},m(i,c){h(t,i,c),_(i,r,c),h(e,i,c),_(i,o,c),h(n,i,c),_(i,a,c),h(u,i,c),l=!0},p(i,c){const b={};c&32&&(b.data=i[5]),t.$set(b);const v={};c&32&&(v.data=i[5]),e.$set(v);const J={};c&32&&(J.data=i[5]),n.$set(J);const I={};c&32&&(I.data=i[5]),u.$set(I)},i(i){l||(f(t.$$.fragment,i),f(e.$$.fragment,i),f(n.$$.fragment,i),f(u.$$.fragment,i),l=!0)},o(i){p(t.$$.fragment,i),p(e.$$.fragment,i),p(n.$$.fragment,i),p(u.$$.fragment,i),l=!1},d(i){j(t,i),i&&m(r),j(e,i),i&&m(o),j(n,i),i&&m(a),j(u,i)}}}function te(s){let t,r;return t=new je({props:{data:s[5]}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,o){h(t,e,o),r=!0},p(e,o){const n={};o&32&&(n.data=e[5]),t.$set(n)},i(e){r||(f(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){j(t,e)}}}function Qe(s){let t,r,e=s[5]!==null&&s[7]===Z.builder&&te(s);return{c(){e&&e.c(),t=P()},l(o){e&&e.l(o),t=P()},m(o,n){e&&e.m(o,n),_(o,t,n),r=!0},p(o,n){o[5]!==null&&o[7]===Z.builder?e?(e.p(o,n),n&160&&f(e,1)):(e=te(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(D(),p(e,1,1,()=>{e=null}),V())},i(o){r||(f(e),r=!0)},o(o){p(e),r=!1},d(o){e&&e.d(o),o&&m(t)}}}function re(s){let t,r,e,o,n,a;t=new Je({props:{active:s[6]}}),t.$on("click",me);const u=[Ge,Re],l=[];function i(c,b){return c[5].isBuilding&&c[5].hasInputErrors?0:c[5].isBuilding&&!c[5].hasInputErrors?1:-1}return~(e=i(s))&&(o=l[e]=u[e](s)),{c(){$(t.$$.fragment),r=O(),o&&o.c(),n=P()},l(c){g(t.$$.fragment,c),r=q(c),o&&o.l(c),n=P()},m(c,b){h(t,c,b),_(c,r,b),~e&&l[e].m(c,b),_(c,n,b),a=!0},p(c,b){const v={};b&64&&(v.active=c[6]),t.$set(v);let J=e;e=i(c),e===J?~e&&l[e].p(c,b):(o&&(D(),p(l[J],1,1,()=>{l[J]=null}),V()),~e?(o=l[e],o?o.p(c,b):(o=l[e]=u[e](c),o.c()),f(o,1),o.m(n.parentNode,n)):o=null)},i(c){a||(f(t.$$.fragment,c),f(o),a=!0)},o(c){p(t.$$.fragment,c),p(o),a=!1},d(c){j(t,c),c&&m(r),~e&&l[e].d(c),c&&m(n)}}}function Re(s){let t,r,e,o;return{c(){t=T("button"),r=N("Queue Job"),this.h()},l(n){t=E(n,"BUTTON",{type:!0,class:!0});var a=S(t);r=L(a,"Queue Job"),a.forEach(m),this.h()},h(){w(t,"type","button"),w(t,"class","inline-flex items-center justify-center px-3 py-1.5 border border-transparent shadow-sm text-sm font-medium rounded-md text-purple-800 bg-purple-100 hover:bg-purple-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-purple-500")},m(n,a){_(n,t,a),B(t,r),e||(o=K(t,"click",s[9]),e=!0)},p:U,i:U,o:U,d(n){n&&m(t),e=!1,o()}}}function Ge(s){let t,r,e,o,n,a;return r=new ee({props:{src:we,modifier:"text-yello-500 mr-1"}}),{c(){t=T("button"),$(r.$$.fragment),e=N(`
            Queue Job`),this.h()},l(u){t=E(u,"BUTTON",{type:!0,class:!0});var l=S(t);g(r.$$.fragment,l),e=L(l,`
            Queue Job`),l.forEach(m),this.h()},h(){w(t,"type","button"),w(t,"class","inline-flex items-center justify-center px-3 py-1.5 border border-transparent shadow-sm text-sm font-medium rounded-md text-yellow-800 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-yellow-500 cursor-not-allowed")},m(u,l){_(u,t,l),h(r,t,null),B(t,e),o=!0,n||(a=le(ke.call(null,t,{content:"Connect all required inputs to queue job"})),n=!0)},p:U,i(u){o||(f(r.$$.fragment,u),o=!0)},o(u){p(r.$$.fragment,u),o=!1},d(u){u&&m(t),j(r),n=!1,a()}}}function We(s){let t,r,e=s[5]!==null&&re(s);return{c(){e&&e.c(),t=P()},l(o){e&&e.l(o),t=P()},m(o,n){e&&e.m(o,n),_(o,t,n),r=!0},p(o,n){o[5]!==null?e?(e.p(o,n),n&32&&f(e,1)):(e=re(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(D(),p(e,1,1,()=>{e=null}),V())},i(o){r||(f(e),r=!0)},o(o){p(e),r=!1},d(o){e&&e.d(o),o&&m(t)}}}function ze(s){let t,r;return{c(){t=T("p"),r=N("Loading..."),this.h()},l(e){t=E(e,"P",{class:!0});var o=S(t);r=L(o,"Loading..."),o.forEach(m),this.h()},h(){w(t,"class","text-gray-500 italic")},m(e,o){_(e,t,o),B(t,r)},p:U,d(e){e&&m(t)}}}function He(s){let t,r,e,o;const n=[Ve,De,Ae],a=[];function u(l,i){return l[3]!==null&&l[5]===null?0:l[5]!==null&&l[2]!==null&&l[1]!==null?1:2}return t=u(s),r=a[t]=n[t](s),{c(){r.c(),e=P()},l(l){r.l(l),e=P()},m(l,i){a[t].m(l,i),_(l,e,i),o=!0},p(l,[i]){let c=t;t=u(l),t===c?a[t].p(l,i):(D(),p(a[c],1,1,()=>{a[c]=null}),V(),r=a[t],r?r.p(l,i):(r=a[t]=n[t](l),r.c()),f(r,1),r.m(e.parentNode,e))},i(l){o||(f(r),o=!0)},o(l){p(r),o=!1},d(l){a[t].d(l),l&&m(e)}}}function Ke(s,t,r){let e,o,n,a,u,l,i,c,b;y(s,X,k=>r(6,l=k)),y(s,ce,k=>r(8,i=k)),y(s,Y,k=>r(3,c=k)),y(s,ue,k=>r(7,b=k));const v=M(!0);z(()=>l&&X.set(!1));const J=()=>de(e,o),I=()=>pe();return s.$$.update=()=>{var k,A;s.$$.dirty&8&&r(2,e=(k=c==null?void 0:c.projectUid)!=null?k:null),s.$$.dirty&8&&r(1,o=(A=c==null?void 0:c.jobUid)!=null?A:null),s.$$.dirty&6&&typeof e=="string"&&typeof o=="string"&&fe("JobBuilderPanel","jobPanel",v,e,o),s.$$.dirty&262&&r(0,n=i.find(C=>C.project_uid===e&&C.uid===o)),s.$$.dirty&1&&r(5,a=be(n)),s.$$.dirty&1&&r(4,u=(n==null?void 0:n.job_type)==="extract_micrographs_multi"?"(GPU)":(n==null?void 0:n.job_type)==="extract_micrographs_cpu_parallel"?"(CPU)":"")},[n,o,e,c,u,a,l,b,i,J,I]}class Xe extends Q{constructor(t){super();R(this,t,Ke,He,G,{})}}function Ye(s){let t,r,e;return r=new Le({props:{searchValue:s[7],selectedTags:s[8],showSections:s[9],showLegacyJobs:s[10]}}),r.$on("search:top",function(){W(s[0].handleTop)&&s[0].handleTop.apply(this,arguments)}),r.$on("search:up",s[16]),r.$on("search:down",s[17]),r.$on("search:bottom",function(){W(s[0].handleBottom)&&s[0].handleBottom.apply(this,arguments)}),r.$on("search:enter",function(){W(s[0].handleEnter)&&s[0].handleEnter.apply(this,arguments)}),{c(){t=T("div"),$(r.$$.fragment),this.h()},l(o){t=E(o,"DIV",{slot:!0,class:!0});var n=S(t);g(r.$$.fragment,n),n.forEach(m),this.h()},h(){w(t,"slot","top"),w(t,"class","flex-shrink-0")},m(o,n){_(o,t,n),h(r,t,null),e=!0},p(o,n){s=o},i(o){e||(f(r.$$.fragment,o),e=!0)},o(o){p(r.$$.fragment,o),e=!1},d(o){o&&m(t),j(r)}}}function Ze(s){let t,r,e,o={searchValue:s[3],selectedTags:s[4],showSections:s[5],showLegacyJobs:s[6],validLocation:s[2]};return r=new Ue({props:o}),s[15](r),r.$on("create",s[11]),{c(){t=T("div"),$(r.$$.fragment),this.h()},l(n){t=E(n,"DIV",{slot:!0});var a=S(t);g(r.$$.fragment,a),a.forEach(m),this.h()},h(){w(t,"slot","content")},m(n,a){_(n,t,a),h(r,t,null),e=!0},p(n,a){const u={};a&8&&(u.searchValue=n[3]),a&16&&(u.selectedTags=n[4]),a&32&&(u.showSections=n[5]),a&64&&(u.showLegacyJobs=n[6]),a&4&&(u.validLocation=n[2]),r.$set(u)},i(n){e||(f(r.$$.fragment,n),e=!0)},o(n){p(r.$$.fragment,n),e=!1},d(n){n&&m(t),s[15](null),j(r)}}}function xe(s){let t,r,e,o,n,a,u;return e=new ee({props:{src:Ne,size:4}}),{c(){t=T("div"),r=T("button"),$(e.$$.fragment),o=N(`
      Import Blueprint`),this.h()},l(l){t=E(l,"DIV",{slot:!0,class:!0});var i=S(t);r=E(i,"BUTTON",{class:!0});var c=S(r);g(e.$$.fragment,c),o=L(c,`
      Import Blueprint`),c.forEach(m),i.forEach(m),this.h()},h(){w(r,"class","inline-flex items-center gap-x-1 px-1 py-0.5 pr-2 rounded text-xs font-medium leading-4 bg-gray-100 hover:bg-gray-200 border border-gray-300 text-gray-800 focus:outline-none"),w(t,"slot","footer"),w(t,"class","h-5.5 w-full")},m(l,i){_(l,t,i),B(t,r),h(e,r,null),B(r,o),n=!0,a||(u=K(r,"click",ve),a=!0)},p:U,i(l){n||(f(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){l&&m(t),j(e),a=!1,u()}}}function et(s){let t,r;return t=new F({props:{title:s[1],warningMessage:s[2]?"":"Navigate into a workspace to create a job",footerClass:"h-6",$$slots:{footer:[xe],content:[Ze],top:[Ye]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,o){h(t,e,o),r=!0},p(e,[o]){const n={};o&2&&(n.title=e[1]),o&4&&(n.warningMessage=e[2]?"":"Navigate into a workspace to create a job"),o&524413&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){r||(f(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){j(t,e)}}}function tt(s,t,r){let e,o,n,a,u,l,i,c,b,v;y(s,Be,d=>r(12,o=d)),y(s,Ce,d=>r(13,n=d)),y(s,Ie,d=>r(14,a=d)),y(s,Pe,d=>r(18,u=d)),y(s,Te,d=>r(2,l=d));let J=M("");y(s,J,d=>r(3,i=d));let I=M([]);y(s,I,d=>r(4,c=d));let k=M(!0);y(s,k,d=>r(5,b=d));let A=M(!1);y(s,A,d=>r(6,v=d));let C;const oe=async()=>{typeof u=="string"&&u.length>0&&await Se()};z(()=>{Ee()});function ne(d){ie[d?"unshift":"push"](()=>{C=d,r(0,C)})}const se=d=>C.handleUp(d),ae=d=>C.handleDown(d);return s.$$.update=()=>{s.$$.dirty&28672&&r(1,e=n!==null&&a!==null?`New Job in ${n.uid} ${a.uid}`:n!==null&&o!==null?`New Job in ${n.uid} ${o.uid}`:"New Job")},[C,e,l,i,c,b,v,J,I,k,A,oe,o,n,a,ne,se,ae]}class rt extends Q{constructor(t){super();R(this,t,tt,et,G,{})}}function ot(s){let t,r;return t=new Xe({}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,o){h(t,e,o),r=!0},i(e){r||(f(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){j(t,e)}}}function nt(s){let t,r;return t=new rt({}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,o){h(t,e,o),r=!0},i(e){r||(f(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){j(t,e)}}}function st(s){let t,r,e,o;const n=[nt,ot],a=[];function u(l,i){return l[0]===null?0:1}return t=u(s),r=a[t]=n[t](s),{c(){r.c(),e=P()},l(l){r.l(l),e=P()},m(l,i){a[t].m(l,i),_(l,e,i),o=!0},p(l,[i]){let c=t;t=u(l),t!==c&&(D(),p(a[c],1,1,()=>{a[c]=null}),V(),r=a[t],r||(r=a[t]=n[t](l),r.c()),f(r,1),r.m(e.parentNode,e))},i(l){o||(f(r),o=!0)},o(l){p(r),o=!1},d(l){a[t].d(l),l&&m(e)}}}function at(s,t,r){let e;return y(s,Y,o=>r(0,e=o)),[e]}class tr extends Q{constructor(t){super();R(this,t,at,st,G,{})}}export{tr as default};
