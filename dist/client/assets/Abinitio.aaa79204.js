import{S as Le,h as Be,s as ze,Q as g,a6 as M,I as C,R as v,T as w,a7 as O,p,J as I,U as u,k as S,a2 as f,aa as Y,ao as Ke,K as P,aQ as Ce,ad as Ie,ae as $e,ap as Me,ah as Se,ai as Pe,j as X,ac as te,L as D,a9 as Z,l as Ae,t as K,m as Ne,o as J,C as le,D as ie,E as re,H as oe,av as Ue,ak as et}from"./vendor.3ae73048.js";import{ba as Et,e7 as Dt,bn as Ct,bm as It,cN as tt,bk as st,bi as lt,e8 as St,ad as Pt,b6 as it,p as Oe,e9 as rt,ea as At,eb as Nt,ec as ot,ed as Ut,a1 as Vt,au as Jt,T as Tt,ee as Lt,ef as Bt,a4 as zt,bo as Kt,eg as Mt,eh as nt}from"./index.9987ff70.js";import{L as at}from"./LoadingTab.dd8d8437.js";import{E as ut}from"./EmptyStateTab.2080cc87.js";import"./types.8cb6216c.js";import{t as Re}from"./Spinner.012207c4.js";import{J as Ot}from"./JobBuilder.8e055d6c.js";import Rt from"./EventLog.3ceb9b9f.js";import"./index.146c2037.js";import"./jobs.d50d1674.js";import"./helpers.7177ca38.js";import"./router.1b465492.js";import"./index.2e3bb17a.js";import"./Icon.61279884.js";import"./ChevronUp.0ab7bee0.js";import"./InnerSection.b40ae804.js";import"./SingleParameter.c562a004.js";import"./index.11580965.js";import"./jobs.7ab064ef.js";import"./index.c4392b02.js";import"./Folder.9bc96b35.js";import"./LockClosed.9ead7228.js";import"./Logout.c3964a48.js";import"./DocumentDownload.7e4b12e9.js";import"./Refresh.40401873.js";import"./TagCount.d4471cb8.js";import"./ViewMenuSection.0db75de7.js";import"./Eye.d9501c14.js";import"./Popover.0a97ebac.js";import"./ChevronUp.41d1c7f8.js";import"./Events.b9086f35.js";import"./Exclamation.f44359c6.js";import"./InfiniteScrollLoader.21052268.js";import"./helpers.cea6b59c.js";import"./plotly.2255cf4f.js";import"./Loading.92fe8374.js";function ct(l){let s,t,e,i,o,r,c,n,a,d,b,m,k,y=(l[9]?l[8]?"Queue":"Restart":"Start")+"",j,V,N,_,R,U,x,$,fe,q,H,se,pe,me,Q,be,G,F,h,ne,ae,ee,Ve,ue,ce,W,Je,_e,he,Te,xe,T=!l[8]&&dt(l),L=!l[8]&&ft(l),B=l[9]&&!l[8]&&!l[10]&&pt(l),z=!l[8]&&mt(l);return{c(){s=g("div"),t=g("div"),e=g("div"),i=M("Ab-initio from Exposures"),o=C(),r=g("div"),T&&T.c(),c=C(),n=g("div"),L&&L.c(),a=C(),d=g("div"),B&&B.c(),b=C(),m=g("span"),k=g("button"),j=M(y),_=C(),z&&z.c(),R=C(),U=g("div"),x=g("div"),$=M("Load Existing Volumes"),fe=C(),q=g("div"),H=g("div"),se=g("span"),pe=M("Project ID"),me=C(),Q=g("input"),be=C(),G=g("div"),F=g("div"),h=g("span"),ne=M("Job ID"),ae=C(),ee=g("input"),Ve=C(),ue=g("div"),ce=g("span"),W=g("button"),Je=M("Load"),this.h()},l(E){s=v(E,"DIV",{class:!0});var A=w(s);t=v(A,"DIV",{class:!0});var ge=w(t);e=v(ge,"DIV",{class:!0});var Qe=w(e);i=O(Qe,"Ab-initio from Exposures"),Qe.forEach(p),o=I(ge),r=v(ge,"DIV",{class:!0});var ve=w(r);T&&T.l(ve),c=I(ve),n=v(ve,"DIV",{class:!0});var ye=w(n);L&&L.l(ye),a=I(ye),d=v(ye,"DIV",{class:!0});var de=w(d);B&&B.l(de),b=I(de),m=v(de,"SPAN",{class:!0});var qe=w(m);k=v(qe,"BUTTON",{type:!0,class:!0});var He=w(k);j=O(He,y),He.forEach(p),qe.forEach(p),_=I(de),z&&z.l(de),de.forEach(p),ye.forEach(p),ve.forEach(p),ge.forEach(p),R=I(A),U=v(A,"DIV",{class:!0});var we=w(U);x=v(we,"DIV",{class:!0});var Ge=w(x);$=O(Ge,"Load Existing Volumes"),Ge.forEach(p),fe=I(we),q=v(we,"DIV",{class:!0});var ke=w(q);H=v(ke,"DIV",{class:!0});var je=w(H);se=v(je,"SPAN",{class:!0});var Fe=w(se);pe=O(Fe,"Project ID"),Fe.forEach(p),me=I(je),Q=v(je,"INPUT",{class:!0,placeholder:!0}),je.forEach(p),be=I(ke),G=v(ke,"DIV",{class:!0});var Ee=w(G);F=v(Ee,"DIV",{class:!0});var De=w(F);h=v(De,"SPAN",{class:!0});var We=w(h);ne=O(We,"Job ID"),We.forEach(p),ae=I(De),ee=v(De,"INPUT",{class:!0,placeholder:!0}),De.forEach(p),Ve=I(Ee),ue=v(Ee,"DIV",{class:!0});var Ye=w(ue);ce=v(Ye,"SPAN",{class:!0});var Xe=w(ce);W=v(Xe,"BUTTON",{type:!0,class:!0});var Ze=w(W);Je=O(Ze,"Load"),Ze.forEach(p),Xe.forEach(p),Ye.forEach(p),Ee.forEach(p),ke.forEach(p),we.forEach(p),A.forEach(p),this.h()},h(){u(e,"class","text-sm leading-5 font-medium text-gray-900"),u(k,"type","button"),u(k,"class",V=""+((l[11]||!l[6]||!l[12]?"opacity-50 cursor-not-allowed":"active:bg-green-700")+" inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-green-500 hover:bg-green-550 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150")),k.disabled=l[11],u(m,"class","inline-flex rounded-md shadow-sm"),u(d,"class","flex gap-2"),u(n,"class","-mt-px flex justify-between flex-wrap gap-2"),u(r,"class","mt-2 flex flex-col"),u(t,"class","block"),u(x,"class","text-sm leading-5 font-medium text-gray-900"),u(se,"class","w-24 inline-flex items-center px-2.5 rounded-tl-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm leading-5"),u(Q,"class","block w-32 px-2 py-1 rounded-none rounded-tr-md text-sm leading-5 border border-gray-300 focus:z-10 transition duration-150 ease-in-out"),u(Q,"placeholder","P1"),Q.readOnly=!0,u(H,"class","-mt-px flex w-56 rounded-t-md shadow-sm"),u(h,"class","w-24 inline-flex items-center px-2.5 rounded-bl-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm leading-5"),u(ee,"class","block w-32 px-2 py-1 rounded-none rounded-br-md text-sm leading-5 border border-gray-300 focus:z-10 transition duration-150 ease-in-out"),u(ee,"placeholder","J1"),u(F,"class","flex w-56 rounded-b-md shadow-sm"),u(W,"type","button"),u(W,"class",_e=""+((l[5]?"active:bg-blue-700":"opacity-50 cursor-not-allowed")+" inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue transition ease-in-out duration-150")),u(ce,"class","inline-flex rounded-md shadow-sm"),u(ue,"class","flex"),u(G,"class","-mt-px flex justify-between flex-wrap gap-2"),u(q,"class","mt-2 flex flex-col"),u(U,"class","block"),u(s,"class","abinitio-config w-full flex justify-between mb-2 px-4 pt-2 pb-3 bg-gray-75 border-b border-gray-200")},m(E,A){S(E,s,A),f(s,t),f(t,e),f(e,i),f(t,o),f(t,r),T&&T.m(r,null),f(r,c),f(r,n),L&&L.m(n,null),f(n,a),f(n,d),B&&B.m(d,null),f(d,b),f(d,m),f(m,k),f(k,j),f(d,_),z&&z.m(d,null),f(s,R),f(s,U),f(U,x),f(x,$),f(U,fe),f(U,q),f(q,H),f(H,se),f(se,pe),f(H,me),f(H,Q),Y(Q,l[13]),f(q,be),f(q,G),f(G,F),f(F,h),f(h,ne),f(F,ae),f(F,ee),Y(ee,l[3]),f(G,Ve),f(G,ue),f(ue,ce),f(ce,W),f(W,Je),Te||(xe=[Ke(N=Re.call(null,k,{content:l[12]?l[4]<1?"Select at least one class from a completed Streaming 2D Classification job":null:"Cannot start ab-initio without 2D classification results"})),P(k,"click",l[23]),P(Q,"input",l[25]),P(ee,"input",l[26]),Ke(he=Re.call(null,W,{content:`Load volume(s) from a job in ${l[13]}`})),P(W,"click",l[27])],Te=!0)},p(E,A){E[8]?T&&(T.d(1),T=null):T?T.p(E,A):(T=dt(E),T.c(),T.m(r,c)),E[8]?L&&(L.d(1),L=null):L?L.p(E,A):(L=ft(E),L.c(),L.m(n,a)),E[9]&&!E[8]&&!E[10]?B?B.p(E,A):(B=pt(E),B.c(),B.m(d,b)):B&&(B.d(1),B=null),A&768&&y!==(y=(E[9]?E[8]?"Queue":"Restart":"Start")+"")&&$e(j,y),A&6208&&V!==(V=""+((E[11]||!E[6]||!E[12]?"opacity-50 cursor-not-allowed":"active:bg-green-700")+" inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-green-500 hover:bg-green-550 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150"))&&u(k,"class",V),A&2048&&(k.disabled=E[11]),N&&Me(N.update)&&A&4112&&N.update.call(null,{content:E[12]?E[4]<1?"Select at least one class from a completed Streaming 2D Classification job":null:"Cannot start ab-initio without 2D classification results"}),E[8]?z&&(z.d(1),z=null):z?z.p(E,A):(z=mt(E),z.c(),z.m(d,null)),A&8192&&Q.value!==E[13]&&Y(Q,E[13]),A&8&&ee.value!==E[3]&&Y(ee,E[3]),A&32&&_e!==(_e=""+((E[5]?"active:bg-blue-700":"opacity-50 cursor-not-allowed")+" inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue transition ease-in-out duration-150"))&&u(W,"class",_e),he&&Me(he.update)&&A&8192&&he.update.call(null,{content:`Load volume(s) from a job in ${E[13]}`})},d(E){E&&p(s),T&&T.d(),L&&L.d(),B&&B.d(),z&&z.d(),Te=!1,Ie(xe)}}}function dt(l){let s,t,e,i,o,r,c,n,a,d,b,m,k;return{c(){s=g("div"),t=g("span"),e=M("Classes"),i=C(),o=g("input"),r=C(),c=g("div"),n=g("span"),a=M("Symmetry"),d=C(),b=g("input"),this.h()},l(y){s=v(y,"DIV",{class:!0});var j=w(s);t=v(j,"SPAN",{class:!0});var V=w(t);e=O(V,"Classes"),V.forEach(p),i=I(j),o=v(j,"INPUT",{class:!0,id:!0,placeholder:!0,type:!0}),j.forEach(p),r=I(y),c=v(y,"DIV",{class:!0});var N=w(c);n=v(N,"SPAN",{class:!0});var _=w(n);a=O(_,"Symmetry"),_.forEach(p),d=I(N),b=v(N,"INPUT",{class:!0,id:!0,placeholder:!0}),N.forEach(p),this.h()},h(){u(t,"class","w-24 inline-flex items-center px-2.5 rounded-tl-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm leading-5"),u(o,"class","block w-32 px-2 py-1 border-gray-300 rounded-none rounded-tr-md transition duration-150 ease-in-out text-sm leading-5 focus:z-10"),u(o,"id","abinit_K"),u(o,"placeholder","1"),u(o,"type","number"),u(s,"class","-mt-px flex w-56 rounded-t-md shadow-sm"),u(n,"class","w-24 inline-flex items-center px-2.5 border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm leading-5"),u(b,"class","block w-32 px-2 py-1 rounded-none text-sm leading-5 border border-gray-300 focus:z-10 transition duration-150 ease-in-out"),u(b,"id","abinit_symmetry"),u(b,"placeholder","C1"),u(c,"class","-mt-px flex w-56 shadow-sm")},m(y,j){S(y,s,j),f(s,t),f(t,e),f(s,i),f(s,o),Y(o,l[0]),S(y,r,j),S(y,c,j),f(c,n),f(n,a),f(c,d),f(c,b),Y(b,l[1]),m||(k=[P(o,"input",l[19]),P(o,"focus",l[14]),P(o,"blur",l[14]),P(o,"keydown",l[14]),P(b,"input",l[20]),P(b,"focus",l[14]),P(b,"blur",l[14]),P(b,"keydown",l[14])],m=!0)},p(y,j){j&1&&Ce(o.value)!==y[0]&&Y(o,y[0]),j&2&&b.value!==y[1]&&Y(b,y[1])},d(y){y&&p(s),y&&p(r),y&&p(c),m=!1,Ie(k)}}}function ft(l){let s,t,e,i,o,r,c;return{c(){s=g("div"),t=g("span"),e=M("Particles"),i=C(),o=g("input"),this.h()},l(n){s=v(n,"DIV",{class:!0});var a=w(s);t=v(a,"SPAN",{class:!0});var d=w(t);e=O(d,"Particles"),d.forEach(p),i=I(a),o=v(a,"INPUT",{class:!0,id:!0,placeholder:!0,type:!0}),a.forEach(p),this.h()},h(){u(t,"class","w-24 inline-flex items-center px-2.5 rounded-bl-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm leading-5"),u(o,"class","block w-32 px-2 py-1 border-gray-300 rounded-none rounded-br-md transition duration-150 ease-in-out text-sm leading-5 focus:z-10"),u(o,"id","abinit_num_particles"),u(o,"placeholder","100000"),u(o,"type","number"),u(s,"class","flex w-56 rounded-b-md shadow-sm")},m(n,a){S(n,s,a),f(s,t),f(t,e),f(s,i),f(s,o),Y(o,l[2]),r||(c=[P(o,"input",l[21]),P(o,"focus",l[14]),P(o,"blur",l[14]),P(o,"keydown",l[14])],r=!0)},p(n,a){a&4&&Ce(o.value)!==n[2]&&Y(o,n[2])},d(n){n&&p(s),r=!1,Ie(c)}}}function pt(l){let s,t,e,i,o,r;return{c(){s=g("span"),t=g("button"),e=M("Stop"),this.h()},l(c){s=v(c,"SPAN",{class:!0});var n=w(s);t=v(n,"BUTTON",{type:!0,class:!0});var a=w(t);e=O(a,"Stop"),a.forEach(p),n.forEach(p),this.h()},h(){u(t,"type","button"),u(t,"class",i=""+((l[11]?"opacity-50 cursor-not-allowed":"active:text-gray-800 active:bg-gray-50")+" inline-flex items-center px-2.5 py-1.5 border border-gray-300 text-xs leading-4 font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150")),t.disabled=l[11],u(s,"class","inline-flex rounded-md shadow-sm")},m(c,n){S(c,s,n),f(s,t),f(t,e),o||(r=P(t,"click",l[22]),o=!0)},p(c,n){n&2048&&i!==(i=""+((c[11]?"opacity-50 cursor-not-allowed":"active:text-gray-800 active:bg-gray-50")+" inline-flex items-center px-2.5 py-1.5 border border-gray-300 text-xs leading-4 font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150"))&&u(t,"class",i),n&2048&&(t.disabled=c[11])},d(c){c&&p(s),o=!1,r()}}}function mt(l){let s,t,e,i,o,r,c,n;return{c(){s=g("span"),t=g("button"),e=Se("svg"),i=Se("path"),this.h()},l(a){s=v(a,"SPAN",{class:!0});var d=w(s);t=v(d,"BUTTON",{type:!0,class:!0});var b=w(t);e=Pe(b,"svg",{class:!0,xmlns:!0,fill:!0,viewBox:!0});var m=w(e);i=Pe(m,"path",{"fill-rule":!0,"clip-rule":!0,d:!0}),w(i).forEach(p),m.forEach(p),b.forEach(p),d.forEach(p),this.h()},h(){u(i,"fill-rule","evenodd"),u(i,"clip-rule","evenodd"),u(i,"d","M15.39 12.41L7.7 6l1.07-1.1c.34-.34-.12-.63.12-1.26.88-2.17 3.41-2.35 3.41-2.35s.36-.37.71-.72C9.74-.81 7.53.53 6.54 1.4L3.12 4.9l-.71.72c-.39.4-.39 1.05 0 1.45l-.7.72c-.39-.4-1.02-.4-1.41 0s-.39 1.05 0 1.45l1.41 1.45c.39.4 1.02.4 1.41 0s.39-1.05 0-1.45l.71-.72c.39.4 1.02.4 1.41 0l.8-.82 6.39 7.67c.82.82 2.14.82 2.96 0 .81-.82.81-2.15 0-2.96z"),u(e,"class","w-4 h-4 text-white"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","currentColor"),u(e,"viewBox","0 0 16 16"),u(t,"type","button"),u(t,"class",o=""+((l[11]||!l[6]?"opacity-50 cursor-not-allowed":"active:bg-indigo-700")+" inline-flex items-center px-1.5 py-0 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo transition ease-in-out duration-150")),t.disabled=l[11],u(s,"class","inline-flex rounded-md shadow-sm")},m(a,d){S(a,s,d),f(s,t),f(t,e),f(e,i),c||(n=[Ke(r=Re.call(null,t,{content:l[9]?"Build a new job with custom parameters":"Build with custom parameters"})),P(t,"click",l[24])],c=!0)},p(a,d){d&2112&&o!==(o=""+((a[11]||!a[6]?"opacity-50 cursor-not-allowed":"active:bg-indigo-700")+" inline-flex items-center px-1.5 py-0 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo transition ease-in-out duration-150"))&&u(t,"class",o),d&2048&&(t.disabled=a[11]),r&&Me(r.update)&&d&512&&r.update.call(null,{content:a[9]?"Build a new job with custom parameters":"Build with custom parameters"})},d(a){a&&p(s),c=!1,Ie(n)}}}function xt(l){let s,t=l[7]&&ct(l);return{c(){t&&t.c(),s=X()},l(e){t&&t.l(e),s=X()},m(e,i){t&&t.m(e,i),S(e,s,i)},p(e,[i]){e[7]?t?t.p(e,i):(t=ct(e),t.c(),t.m(s.parentNode,s)):t&&(t.d(1),t=null)},i:te,o:te,d(e){t&&t.d(e),e&&p(s)}}}function Qt(l,s,t){let e,i,o,r,c,n,a,d,b,m,k,y,j;D(l,Et,h=>t(4,o=h)),D(l,Dt,h=>t(16,r=h)),D(l,Ct,h=>t(17,c=h)),D(l,It,h=>t(18,n=h)),D(l,tt,h=>t(7,a=h)),D(l,st,h=>t(8,d=h)),D(l,lt,h=>t(9,b=h)),D(l,St,h=>t(10,m=h)),D(l,Pt,h=>t(11,k=h)),D(l,it,h=>t(12,y=h)),D(l,Oe,h=>t(13,j=h));const V={abinit_K:"numClasses",abinit_symmetry:"symmetry",abinit_num_particles:"particles"},N={abinit_K:"abinit_K",abinit_symmetry:"abinit_symmetry",abinit_num_particles:"abinit_num_particles"},_={numClasses:!1,symmetry:!1,particles:!1};let R=n,U=c,x=r,$="";const fe=async h=>{if(h.type==="focus")t(15,_[V[h.target.id]]=!0,_);else if(h.type==="blur"||h.type==="keydown"&&h.keyCode===13){if(h.target.value.length===0)h.type==="keydown"&&h.target.blur();else{const ne=h.target.type==="number"?parseInt(h.target.value):h.target.value;let ae=!1;((h.target.id===N.abinit_K||h.target.id===N.abinit_num_particles)&&ne>0||h.target.id===N.abinit_symmetry&&ne.length>0)&&(ae=!0),ae&&Object.keys(N).includes(h.target.id)&&(h.type==="keydown"&&h.target.blur(),await rt(h.target.id,ne))}h.type==="blur"&&t(15,_[V[h.target.id]]=!1,_)}};function q(){R=Ce(this.value),t(0,R),t(15,_),t(18,n)}function H(){U=this.value,t(1,U),t(15,_),t(17,c)}function se(){x=Ce(this.value),t(2,x),t(15,_),t(16,r)}const pe=()=>At(),me=()=>e&&y&&(d?Nt():ot()),Q=()=>e&&ot(!1);function be(){j=this.value,Oe.set(j)}function G(){$=this.value,t(3,$)}const F=()=>i&&Ut($);return l.$$.update=()=>{l.$$.dirty&294913&&_.numClasses===!1&&typeof n!="undefined"&&R!==n&&t(0,R=n),l.$$.dirty&163842&&_.symmetry===!1&&typeof c!="undefined"&&U!==c&&t(1,U=c),l.$$.dirty&98308&&_.particles===!1&&typeof r!="undefined"&&x!==r&&t(2,x=r),l.$$.dirty&23&&t(6,e=parseInt(R)>0&&parseInt(x)>0&&U.length>0&&o>0),l.$$.dirty&8&&t(5,i=$.match(/^J[0-9]+$/i))},[R,U,x,$,o,i,e,a,d,b,m,k,y,j,fe,_,r,c,n,q,H,se,pe,me,Q,be,G,F]}class qt extends Le{constructor(s){super();Be(this,s,Qt,xt,ze,{})}}function bt(l,s,t){const e=l.slice();return e[9]=s[t],e[11]=t,e}function Ht(l){let s,t;return s=new Rt({props:{projectUid:l[0],jobUid:l[1],showControls:!1}}),{c(){le(s.$$.fragment)},l(e){ie(s.$$.fragment,e)},m(e,i){re(s,e,i),t=!0},p(e,i){const o={};i&1&&(o.projectUid=e[0]),i&2&&(o.jobUid=e[1]),s.$set(o)},i(e){t||(J(s.$$.fragment,e),t=!0)},o(e){K(s.$$.fragment,e),t=!1},d(e){oe(s,e)}}}function Gt(l){let s,t=l[3],e=[];for(let i=0;i<t.length;i+=1)e[i]=ht(bt(l,t,i));return{c(){for(let i=0;i<e.length;i+=1)e[i].c();s=X()},l(i){for(let o=0;o<e.length;o+=1)e[o].l(i);s=X()},m(i,o){for(let r=0;r<e.length;r+=1)e[r].m(i,o);S(i,s,o)},p(i,o){if(o&92){t=i[3];let r;for(r=0;r<t.length;r+=1){const c=bt(i,t,r);e[r]?e[r].p(c,o):(e[r]=ht(c),e[r].c(),e[r].m(s.parentNode,s))}for(;r<e.length;r+=1)e[r].d(1);e.length=t.length}},i:te,o:te,d(i){et(e,i),i&&p(s)}}}function _t(l){let s,t;return{c(){s=g("img"),this.h()},l(e){s=v(e,"IMG",{src:!0,alt:!0}),this.h()},h(){Ue(s.src,t="/api/files/"+l[2][l[9]][0])||u(s,"src",t),u(s,"alt","Class")},m(e,i){S(e,s,i)},p(e,i){i&12&&!Ue(s.src,t="/api/files/"+e[2][e[9]][0])&&u(s,"src",t)},d(e){e&&p(s)}}}function ht(l){var b,m;let s,t,e,i,o,r,c,n,a=((m=(b=l[2])==null?void 0:b[l[9]])==null?void 0:m[0])&&_t(l);function d(){return l[8](l[11])}return{c(){s=g("div"),t=g("span"),e=M("volume_class_"),i=M(l[11]),o=C(),a&&a.c(),r=C(),this.h()},l(k){s=v(k,"DIV",{class:!0});var y=w(s);t=v(y,"SPAN",{class:!0});var j=w(t);e=O(j,"volume_class_"),i=O(j,l[11]),j.forEach(p),o=I(y),a&&a.l(y),r=I(y),y.forEach(p),this.h()},h(){u(t,"class","abinit-class-label"),Z(t,"selected",l[11]===l[4]),u(s,"class","abinit-class-container"),Z(s,"selected",l[11]===l[4])},m(k,y){S(k,s,y),f(s,t),f(t,e),f(t,i),f(s,o),a&&a.m(s,null),f(s,r),c||(n=P(s,"click",d),c=!0)},p(k,y){var j,V;l=k,y&16&&Z(t,"selected",l[11]===l[4]),((V=(j=l[2])==null?void 0:j[l[9]])==null?void 0:V[0])?a?a.p(l,y):(a=_t(l),a.c(),a.m(s,r)):a&&(a.d(1),a=null),y&16&&Z(s,"selected",l[11]===l[4])},d(k){k&&p(s),a&&a.d(),c=!1,n()}}}function Ft(l){let s,t,e,i;const o=[Gt,Ht],r=[];function c(n,a){return n[5]?0:1}return t=c(l),e=r[t]=o[t](l),{c(){s=g("div"),e.c(),this.h()},l(n){s=v(n,"DIV",{class:!0});var a=w(s);e.l(a),a.forEach(p),this.h()},h(){u(s,"class","w-full h-full overflow-y-auto abinit-progress"),Z(s,"p-4",l[5])},m(n,a){S(n,s,a),r[t].m(s,null),i=!0},p(n,[a]){let d=t;t=c(n),t===d?r[t].p(n,a):(Ae(),K(r[d],1,1,()=>{r[d]=null}),Ne(),e=r[t],e?e.p(n,a):(e=r[t]=o[t](n),e.c()),J(e,1),e.m(s,null)),a&32&&Z(s,"p-4",n[5])},i(n){i||(J(e),i=!0)},o(n){K(e),i=!1},d(n){n&&p(s),r[t].d()}}}function Wt(l,s,t){let e,i,{projectUid:o}=s,{jobUid:r}=s,{progress:c}=s,{selectClass:n}=s,a=0;const d=m=>{t(4,a=m),n(`volume_class_${m}`)},b=m=>d(m);return l.$$set=m=>{"projectUid"in m&&t(0,o=m.projectUid),"jobUid"in m&&t(1,r=m.jobUid),"progress"in m&&t(2,c=m.progress),"selectClass"in m&&t(7,n=m.selectClass)},l.$$.update=()=>{l.$$.dirty&4&&t(3,e=Object.keys(c).filter(m=>m.endsWith("_fileid")).sort((m,k)=>m.localeCompare(k))),l.$$.dirty&8&&t(5,i=Array.isArray(e)&&(e==null?void 0:e.length))},[o,r,c,e,a,i,d,n,b]}class Yt extends Le{constructor(s){super();Be(this,s,Wt,Ft,ze,{projectUid:0,jobUid:1,progress:2,selectClass:7})}}function gt(l,s,t){const e=l.slice();return e[15]=s[t],e}function Xt(l){let s,t,e,i,o,r=l[2]&&vt();const c=[is,ls,ss,ts,es],n=[];function a(d,b){return d[3]?d[5]?1:d[6]&&d[7]?2:d[8]?d[12]?4:-1:3:0}return~(e=a(l))&&(i=n[e]=c[e](l)),{c(){s=g("div"),r&&r.c(),t=C(),i&&i.c(),this.h()},l(d){s=v(d,"DIV",{class:!0});var b=w(s);r&&r.l(b),t=I(b),i&&i.l(b),b.forEach(p),this.h()},h(){u(s,"class","w-full h-full flex flex-col overflow-auto")},m(d,b){S(d,s,b),r&&r.m(s,null),f(s,t),~e&&n[e].m(s,null),o=!0},p(d,b){d[2]?r?b&4&&J(r,1):(r=vt(),r.c(),J(r,1),r.m(s,t)):r&&(Ae(),K(r,1,1,()=>{r=null}),Ne());let m=e;e=a(d),e===m?~e&&n[e].p(d,b):(i&&(Ae(),K(n[m],1,1,()=>{n[m]=null}),Ne()),~e?(i=n[e],i?i.p(d,b):(i=n[e]=c[e](d),i.c()),J(i,1),i.m(s,null)):i=null)},i(d){o||(J(r),J(i),o=!0)},o(d){K(r),K(i),o=!1},d(d){d&&p(s),r&&r.d(),~e&&n[e].d()}}}function Zt(l){let s,t;return s=new ut({props:{description:"You can manage the ab-initio reconstruction stage once exposures start to process."}}),{c(){le(s.$$.fragment)},l(e){ie(s.$$.fragment,e)},m(e,i){re(s,e,i),t=!0},p:te,i(e){t||(J(s.$$.fragment,e),t=!0)},o(e){K(s.$$.fragment,e),t=!1},d(e){oe(s,e)}}}function $t(l){let s,t;return s=new at({}),{c(){le(s.$$.fragment)},l(e){ie(s.$$.fragment,e)},m(e,i){re(s,e,i),t=!0},p:te,i(e){t||(J(s.$$.fragment,e),t=!0)},o(e){K(s.$$.fragment,e),t=!1},d(e){oe(s,e)}}}function vt(l){let s,t;return s=new qt({}),{c(){le(s.$$.fragment)},l(e){ie(s.$$.fragment,e)},m(e,i){re(s,e,i),t=!0},i(e){t||(J(s.$$.fragment,e),t=!0)},o(e){K(s.$$.fragment,e),t=!1},d(e){oe(s,e)}}}function es(l){let s,t=Array.isArray(l[12]),e=t&&yt(l);return{c(){s=g("div"),e&&e.c(),this.h()},l(i){s=v(i,"DIV",{class:!0});var o=w(s);e&&e.l(o),o.forEach(p),this.h()},h(){u(s,"class","w-full h-full p-4 overflow-y-auto")},m(i,o){S(i,s,o),e&&e.m(s,null)},p(i,o){o&4096&&(t=Array.isArray(i[12])),t?e?e.p(i,o):(e=yt(i),e.c(),e.m(s,null)):e&&(e.d(1),e=null)},i:te,o:te,d(i){i&&p(s),e&&e.d()}}}function ts(l){let s,t;return s=new Yt({props:{projectUid:l[9],jobUid:l[10],progress:l[11],selectClass:l[13]}}),{c(){le(s.$$.fragment)},l(e){ie(s.$$.fragment,e)},m(e,i){re(s,e,i),t=!0},p(e,i){const o={};i&512&&(o.projectUid=e[9]),i&1024&&(o.jobUid=e[10]),i&2048&&(o.progress=e[11]),s.$set(o)},i(e){t||(J(s.$$.fragment,e),t=!0)},o(e){K(s.$$.fragment,e),t=!1},d(e){oe(s,e)}}}function ss(l){let s,t;return s=new Ot({props:{data:l[7],paramSetter:rt,paramsToSet:["abinit_K","abinit_symmetry","abinit_num_particles"]}}),{c(){le(s.$$.fragment)},l(e){ie(s.$$.fragment,e)},m(e,i){re(s,e,i),t=!0},p(e,i){const o={};i&128&&(o.data=e[7]),s.$set(o)},i(e){t||(J(s.$$.fragment,e),t=!0)},o(e){K(s.$$.fragment,e),t=!1},d(e){oe(s,e)}}}function ls(l){let s,t;return s=new at({}),{c(){le(s.$$.fragment)},l(e){ie(s.$$.fragment,e)},m(e,i){re(s,e,i),t=!0},p:te,i(e){t||(J(s.$$.fragment,e),t=!0)},o(e){K(s.$$.fragment,e),t=!1},d(e){oe(s,e)}}}function is(l){let s,t;return s=new ut({props:{title:"No ab-initio job run",description:"Configure an ab-initio job to process particles selected from a Streaming 2D Classification run. Alternatively, load an existing volume from another job",$$slots:{default:[rs]},$$scope:{ctx:l}}}),{c(){le(s.$$.fragment)},l(e){ie(s.$$.fragment,e)},m(e,i){re(s,e,i),t=!0},p(e,i){const o={};i&262160&&(o.$$scope={dirty:i,ctx:e}),s.$set(o)},i(e){t||(J(s.$$.fragment,e),t=!0)},o(e){K(s.$$.fragment,e),t=!1},d(e){oe(s,e)}}}function yt(l){let s,t=l[12],e=[];for(let i=0;i<t.length;i+=1)e[i]=kt(gt(l,t,i));return{c(){for(let i=0;i<e.length;i+=1)e[i].c();s=X()},l(i){for(let o=0;o<e.length;o+=1)e[o].l(i);s=X()},m(i,o){for(let r=0;r<e.length;r+=1)e[r].m(i,o);S(i,s,o)},p(i,o){if(o&4096){t=i[12];let r;for(r=0;r<t.length;r+=1){const c=gt(i,t,r);e[r]?e[r].p(c,o):(e[r]=kt(c),e[r].c(),e[r].m(s.parentNode,s))}for(;r<e.length;r+=1)e[r].d(1);e.length=t.length}},d(i){et(e,i),i&&p(s)}}}function wt(l){let s,t;return{c(){s=g("img"),this.h()},l(e){s=v(e,"IMG",{src:!0,alt:!0}),this.h()},h(){Ue(s.src,t="/api/files/"+l[15].fileid)||u(s,"src",t),u(s,"alt","Class")},m(e,i){S(e,s,i)},p(e,i){i&4096&&!Ue(s.src,t="/api/files/"+e[15].fileid)&&u(s,"src",t)},d(e){e&&p(s)}}}function kt(l){let s,t,e=l[15].vol_gname+"",i,o,r,c,n,a=l[15].fileid&&wt(l);function d(){return l[14](l[15])}return{c(){s=g("div"),t=g("span"),i=M(e),o=C(),a&&a.c(),r=C(),this.h()},l(b){s=v(b,"DIV",{class:!0});var m=w(s);t=v(m,"SPAN",{class:!0});var k=w(t);i=O(k,e),k.forEach(p),o=I(m),a&&a.l(m),r=I(m),m.forEach(p),this.h()},h(){u(t,"class","abinit-class-label"),Z(t,"selected",l[15].selected),u(s,"class","abinit-class-container"),Z(s,"selected",l[15].selected)},m(b,m){S(b,s,m),f(s,t),f(t,i),f(s,o),a&&a.m(s,null),f(s,r),c||(n=P(s,"click",d),c=!0)},p(b,m){l=b,m&4096&&e!==(e=l[15].vol_gname+"")&&$e(i,e),m&4096&&Z(t,"selected",l[15].selected),l[15].fileid?a?a.p(l,m):(a=wt(l),a.c(),a.m(s,r)):a&&(a.d(1),a=null),m&4096&&Z(s,"selected",l[15].selected)},d(b){b&&p(s),a&&a.d(),c=!1,n()}}}function jt(l){let s,t,e,i,o,r,c,n,a,d,b,m;return{c(){s=g("div"),t=g("div"),e=g("div"),i=Se("svg"),o=Se("path"),r=C(),c=g("div"),n=g("h3"),a=M("No streaming 2D classification results"),d=C(),b=g("p"),m=M("To process particles from this session, first run a streaming 2D classification job and select at least one class."),this.h()},l(k){s=v(k,"DIV",{class:!0});var y=w(s);t=v(y,"DIV",{class:!0});var j=w(t);e=v(j,"DIV",{class:!0});var V=w(e);i=Pe(V,"svg",{class:!0,viewBox:!0,fill:!0});var N=w(i);o=Pe(N,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),w(o).forEach(p),N.forEach(p),V.forEach(p),r=I(j),c=v(j,"DIV",{class:!0});var _=w(c);n=v(_,"H3",{class:!0});var R=w(n);a=O(R,"No streaming 2D classification results"),R.forEach(p),d=I(_),b=v(_,"P",{class:!0});var U=w(b);m=O(U,"To process particles from this session, first run a streaming 2D classification job and select at least one class."),U.forEach(p),_.forEach(p),j.forEach(p),y.forEach(p),this.h()},h(){u(o,"fill-rule","evenodd"),u(o,"d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"),u(o,"clip-rule","evenodd"),u(i,"class","h-5 w-5 text-yellow-400"),u(i,"viewBox","0 0 20 20"),u(i,"fill","currentColor"),u(e,"class","flex-shrink-0"),u(n,"class","text-lg leading-6 font-medium text-yellow-800"),u(b,"class","mt-2 max-w-xl text-sm leading-5 text-yellow-700"),u(c,"class","ml-3"),u(t,"class","flex"),u(s,"class","mt-4 rounded-md bg-yellow-50 border border-yellow-300 w-8/12 px-6 py-8")},m(k,y){S(k,s,y),f(s,t),f(t,e),f(e,i),f(i,o),f(t,r),f(t,c),f(c,n),f(n,a),f(c,d),f(c,b),f(b,m)},d(k){k&&p(s)}}}function rs(l){let s,t=!l[4]&&jt();return{c(){t&&t.c(),s=X()},l(e){t&&t.l(e),s=X()},m(e,i){t&&t.m(e,i),S(e,s,i)},p(e,i){e[4]?t&&(t.d(1),t=null):t||(t=jt(),t.c(),t.m(s.parentNode,s))},d(e){t&&t.d(e),e&&p(s)}}}function os(l){let s,t,e,i;const o=[$t,Zt,Xt],r=[];function c(n,a){return n[0]?0:n[1]<1?1:2}return s=c(l),t=r[s]=o[s](l),{c(){t.c(),e=X()},l(n){t.l(n),e=X()},m(n,a){r[s].m(n,a),S(n,e,a),i=!0},p(n,[a]){let d=s;s=c(n),s===d?r[s].p(n,a):(Ae(),K(r[d],1,1,()=>{r[d]=null}),Ne(),t=r[s],t?t.p(n,a):(t=r[s]=o[s](n),t.c()),J(t,1),t.m(e.parentNode,e))},i(n){i||(J(t),i=!0)},o(n){K(t),i=!1},d(n){r[s].d(n),n&&p(e)}}}function ns(l,s,t){let e,i,o,r,c,n,a,d,b,m,k,y,j;return D(l,Vt,_=>t(0,e=_)),D(l,Jt,_=>t(1,i=_)),D(l,tt,_=>t(2,o=_)),D(l,lt,_=>t(3,r=_)),D(l,it,_=>t(4,c=_)),D(l,Tt,_=>t(5,n=_)),D(l,st,_=>t(6,a=_)),D(l,Lt,_=>t(7,d=_)),D(l,Bt,_=>t(8,b=_)),D(l,Oe,_=>t(9,m=_)),D(l,zt,_=>t(10,k=_)),D(l,Kt,_=>t(11,y=_)),D(l,Mt,_=>t(12,j=_)),[e,i,o,r,c,n,a,d,b,m,k,y,j,_=>nt(_),_=>nt(_.vol_gname)]}class Qs extends Le{constructor(s){super();Be(this,s,ns,os,ze,{})}}export{Qs as default};
