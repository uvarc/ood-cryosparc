import{S as ve,h as je,s as ke,Q as b,R as v,T as j,p as d,U as m,av as we,k as M,a2 as _,af as ye,at as $e,C as T,I as N,a6 as Q,D as C,J as R,a7 as z,E as q,K as Y,ap as Ee,ae as H,au as Ue,o as k,t as y,H as L,ad as ce,am as Ie,j as W,l as Z,m as ee,ak as Pe,L as Qe,P as ze,ao as Me,ac as Se,V as He,W as Je}from"./vendor.3ae73048.js";import{bd as De}from"./router.1b465492.js";import{r as Ge}from"./Logout.c3964a48.js";import"./types.8cb6216c.js";import{I as de}from"./Icon.61279884.js";import{d as We,c as xe}from"./Authenticated.43a5e742.js";import{Q as Fe,M as Ke,a as Xe,t as Oe}from"./Spinner.012207c4.js";import{L as Ye}from"./Loading.92fe8374.js";import{aB as Ne}from"./index.146c2037.js";import{C as Ze}from"./CloudDownload.c1bd053b.js";import{G as et}from"./Grabber.38a511ae.js";import"./helpers.7177ca38.js";import"./index.2e3bb17a.js";import"./auth.ae36c178.js";import"./createNew.a4a688d1.js";import"./jobs.7ab064ef.js";import"./index.c4392b02.js";import"./jobs.d50d1674.js";import"./index.9987ff70.js";import"./index.11580965.js";import"./ChevronUp.0ab7bee0.js";import"./Folder.9bc96b35.js";import"./LockClosed.9ead7228.js";import"./cleanupData.f259a128.js";import"./Exclamation.f44359c6.js";import"./TagCount.d4471cb8.js";import"./Tag.2b4e7c42.js";import"./Workflow.261abe6c.js";import"./Database.55c9be70.js";import"./Search.fa01495d.js";import"./LightningBolt.e8bda490.js";import"./SidebarLeftOpen.3b7701dd.js";function Re(a,e,r){const t=a.slice();return t[11]=e[r],t}function Ve(a){let e,r,t,o;return{c(){e=b("div"),r=b("img"),this.h()},l(u){e=v(u,"DIV",{class:!0});var s=j(e);r=v(s,"IMG",{class:!0,src:!0,alt:!0,draggable:!0}),s.forEach(d),this.h()},h(){m(r,"class","bg-black rounded"),we(r.src,t="/api/files/"+a[4][a[2].name])||m(r,"src",t),m(r,"alt",o=a[2].name),m(r,"draggable","false"),m(e,"class","p-1.5 flex items-center justify-center")},m(u,s){M(u,e,s),_(e,r)},p(u,s){s&20&&!we(r.src,t="/api/files/"+u[4][u[2].name])&&m(r,"src",t),s&4&&o!==(o=u[2].name)&&m(r,"alt",o)},d(u){u&&d(e)}}}function tt(a){let e,r=a[11].name+"",t,o,u;return{c(){e=b("a"),t=Q(r),u=N(),this.h()},l(s){e=v(s,"A",{download:!0,href:!0,class:!0});var n=j(e);t=z(n,r),n.forEach(d),u=R(s),this.h()},h(){m(e,"download",""),m(e,"href",o="/api/files/download_result/"+a[0]+"/"+a[1]+"."+a[2].name+"."+a[11].name),m(e,"class","flex w-full")},m(s,n){M(s,e,n),_(e,t),M(s,u,n)},p(s,n){n&4&&r!==(r=s[11].name+"")&&H(t,r),n&7&&o!==(o="/api/files/download_result/"+s[0]+"/"+s[1]+"."+s[2].name+"."+s[11].name)&&m(e,"href",o)},d(s){s&&d(e),s&&d(u)}}}function Te(a){let e,r;return e=new Xe({props:{$$slots:{default:[tt]},$$scope:{ctx:a}}}),e.$on("click",function(){Ee(a[6])&&a[6].apply(this,arguments)}),{c(){T(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){q(e,t,o),r=!0},p(t,o){a=t;const u={};o&16391&&(u.$$scope={dirty:o,ctx:a}),e.$set(u)},i(t){r||(k(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function rt(a){let e,r,t=a[2].contains,o=[];for(let s=0;s<t.length;s+=1)o[s]=Te(Re(a,t,s));const u=s=>y(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=W()},l(s){for(let n=0;n<o.length;n+=1)o[n].l(s);e=W()},m(s,n){for(let l=0;l<o.length;l+=1)o[l].m(s,n);M(s,e,n),r=!0},p(s,n){if(n&71){t=s[2].contains;let l;for(l=0;l<t.length;l+=1){const i=Re(s,t,l);o[l]?(o[l].p(i,n),k(o[l],1)):(o[l]=Te(i),o[l].c(),k(o[l],1),o[l].m(e.parentNode,e))}for(Z(),l=t.length;l<o.length;l+=1)u(l);ee()}},i(s){if(!r){for(let n=0;n<t.length;n+=1)k(o[n]);r=!0}},o(s){o=o.filter(Boolean);for(let n=0;n<o.length;n+=1)y(o[n]);r=!1},d(s){Pe(o,s),s&&d(e)}}}function lt(a){let e,r;return e=new Ke({props:{$$slots:{default:[rt]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){q(e,t,o),r=!0},p(t,o){const u={};o&16455&&(u.$$scope={dirty:o,ctx:t}),e.$set(u)},i(t){r||(k(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function st(a){var pe;let e,r,t,o,u,s=a[2].title+"",n,l,i,c,U,I,g=a[2].name+"",f,p,$,S=Ne(a[2].num_items)+"",D,J,x=a[2].type+"",te,F=(a[2].num_items!==1?"s":"")+"",re,oe,B,A,P,ae,G,ne,ie,le,O,ue,me;t=new et({props:{modifier:"text-gray-500"}});let E=typeof((pe=a[4])==null?void 0:pe[a[2].name])=="string"&&Ve(a);P=new de({props:{src:Ze,size:4}});function Be(w){a[9](w)}function Ae(w){a[10](w)}let fe={modifier:"text-xs",position:"bottom-start",$$slots:{default:[lt]},$$scope:{ctx:a}};return a[5]!==void 0&&(fe.handleShowMenu=a[5]),a[6]!==void 0&&(fe.closeMenu=a[6]),G=new Fe({props:fe}),ye.push(()=>$e(G,"handleShowMenu",Be)),ye.push(()=>$e(G,"closeMenu",Ae)),{c(){e=b("div"),r=b("div"),T(t.$$.fragment),o=N(),u=b("p"),n=Q(s),l=N(),E&&E.c(),i=N(),c=b("div"),U=b("div"),I=b("span"),f=Q(g),p=N(),$=b("p"),D=Q(S),J=N(),te=Q(x),re=Q(F),oe=N(),B=b("div"),A=b("button"),T(P.$$.fragment),ae=N(),T(G.$$.fragment),this.h()},l(w){e=v(w,"DIV",{class:!0,draggable:!0});var h=j(e);r=v(h,"DIV",{class:!0});var V=j(r);C(t.$$.fragment,V),o=R(V),u=v(V,"P",{class:!0});var K=j(u);n=z(K,s),K.forEach(d),V.forEach(d),l=R(h),E&&E.l(h),i=R(h),c=v(h,"DIV",{class:!0});var ge=j(c);U=v(ge,"DIV",{class:!0});var _e=j(U);I=v(_e,"SPAN",{class:!0});var he=j(I);f=z(he,g),he.forEach(d),_e.forEach(d),ge.forEach(d),p=R(h),$=v(h,"P",{class:!0});var X=j($);D=z(X,S),J=R(X),te=z(X,x),re=z(X,F),X.forEach(d),oe=R(h),B=v(h,"DIV",{class:!0});var se=j(B);A=v(se,"BUTTON",{type:!0,class:!0});var be=j(A);C(P.$$.fragment,be),be.forEach(d),ae=R(se),C(G.$$.fragment,se),se.forEach(d),h.forEach(d),this.h()},h(){m(u,"class","text-xs font-medium text-gray-900 leading-none whitespace-pre-line"),m(r,"class","flex items-center gap-x-1 bg-gray-100 border-b border-gray-200 p-1 rounded-t-md hover:bg-gray-200"),m(I,"class","inline text-2xs text-gray-600 break-all font-mono tracking-tight leading-tight"),m(U,"class","inline-flex px-1 py-px border border-gray-200 rounded"),m(c,"class","mx-2"),m($,"class","mt-1 px-2 text-xs text-gray-600 truncate"),m(A,"type","button"),m(A,"class","inline-flex items-center px-1 py-1 border border-gray-300 shadow-sm text-xs font-medium rounded-full text-gray-500 bg-white hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500"),m(B,"class","w-full flex-shrink-0 p-1"),m(e,"class",le="output-group-"+a[3]+" max-w-45 flex flex-col text-left relative rounded-md border border-gray-300 bg-white shadow-sm hover:shadow cursor-move"),m(e,"draggable","true")},m(w,h){M(w,e,h),_(e,r),q(t,r,null),_(r,o),_(r,u),_(u,n),_(e,l),E&&E.m(e,null),_(e,i),_(e,c),_(c,U),_(U,I),_(I,f),_(e,p),_(e,$),_($,D),_($,J),_($,te),_($,re),_(e,oe),_(e,B),_(B,A),q(P,A,null),_(B,ae),q(G,B,null),O=!0,ue||(me=[Y(A,"click",function(){Ee(a[5])&&a[5].apply(this,arguments)}),Y(e,"dragstart",a[7]),Y(e,"dragend",a[8])],ue=!0)},p(w,[h]){var K;a=w,(!O||h&4)&&s!==(s=a[2].title+"")&&H(n,s),typeof((K=a[4])==null?void 0:K[a[2].name])=="string"?E?E.p(a,h):(E=Ve(a),E.c(),E.m(e,i)):E&&(E.d(1),E=null),(!O||h&4)&&g!==(g=a[2].name+"")&&H(f,g),(!O||h&4)&&S!==(S=Ne(a[2].num_items)+"")&&H(D,S),(!O||h&4)&&x!==(x=a[2].type+"")&&H(te,x),(!O||h&4)&&F!==(F=(a[2].num_items!==1?"s":"")+"")&&H(re,F);const V={};h&16455&&(V.$$scope={dirty:h,ctx:a}),!ne&&h&32&&(ne=!0,V.handleShowMenu=a[5],Ue(()=>ne=!1)),!ie&&h&64&&(ie=!0,V.closeMenu=a[6],Ue(()=>ie=!1)),G.$set(V),(!O||h&8&&le!==(le="output-group-"+a[3]+" max-w-45 flex flex-col text-left relative rounded-md border border-gray-300 bg-white shadow-sm hover:shadow cursor-move"))&&m(e,"class",le)},i(w){O||(k(t.$$.fragment,w),k(P.$$.fragment,w),k(G.$$.fragment,w),O=!0)},o(w){y(t.$$.fragment,w),y(P.$$.fragment,w),y(G.$$.fragment,w),O=!1},d(w){w&&d(e),L(t),E&&E.d(),L(P),L(G),ue=!1,ce(me)}}}function ot(a,e,r){let{projectUid:t}=e,{jobUid:o}=e,{group:u}=e,{idx:s}=e,{outputResultImages:n}=e,l,i;function c(f){Ie.call(this,a,f)}function U(f){Ie.call(this,a,f)}function I(f){l=f,r(5,l)}function g(f){i=f,r(6,i)}return a.$$set=f=>{"projectUid"in f&&r(0,t=f.projectUid),"jobUid"in f&&r(1,o=f.jobUid),"group"in f&&r(2,u=f.group),"idx"in f&&r(3,s=f.idx),"outputResultImages"in f&&r(4,n=f.outputResultImages)},[t,o,u,s,n,l,i,c,U,I,g]}class at extends ve{constructor(e){super();je(this,e,ot,st,ke,{projectUid:0,jobUid:1,group:2,idx:3,outputResultImages:4})}}function Ce(a,e,r){const t=a.slice();return t[12]=e[r],t[14]=r,t}function nt(a){let e,r,t,o,u,s;return t=new de({props:{src:We}}),{c(){e=b("div"),r=b("button"),T(t.$$.fragment),this.h()},l(n){e=v(n,"DIV",{class:!0});var l=j(e);r=v(l,"BUTTON",{type:!0,class:!0});var i=j(r);C(t.$$.fragment,i),i.forEach(d),l.forEach(d),this.h()},h(){m(r,"type","button"),m(r,"class","inline-flex items-center ml-auto p-0.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-400 bg-white hover:bg-gray-50 focus:outline-none focus-visible:ring-1 focus-visible:border-blue-500 focus-visible:ring-blue-500"),m(e,"class","relative pl-1 pr-2.5 py-2")},m(n,l){M(n,e,l),_(e,r),q(t,r,null),o=!0,u||(s=[Me(Oe.call(null,r,{content:"Expand output groups",delay:[500,0],modifier:"whitespace-nowrap"})),Y(r,"click",a[7])],u=!0)},p:Se,i(n){o||(k(t.$$.fragment,n),o=!0)},o(n){y(t.$$.fragment,n),o=!1},d(n){n&&d(e),L(t),u=!1,ce(s)}}}function it(a){let e,r,t,o;const u=[ft,ut],s=[];function n(l,i){return l[2]?0:1}return r=n(a),t=s[r]=u[r](a),{c(){e=b("div"),t.c(),this.h()},l(l){e=v(l,"DIV",{class:!0});var i=j(e);t.l(i),i.forEach(d),this.h()},h(){m(e,"class","min-w-45 px-2.5 py-1.5 pt-0")},m(l,i){M(l,e,i),s[r].m(e,null),o=!0},p(l,i){let c=r;r=n(l),r===c?s[r].p(l,i):(Z(),y(s[c],1,1,()=>{s[c]=null}),ee(),t=s[r],t?t.p(l,i):(t=s[r]=u[r](l),t.c()),k(t,1),t.m(e,null))},i(l){o||(k(t),o=!0)},o(l){y(t),o=!1},d(l){l&&d(e),s[r].d()}}}function ut(a){let e,r,t=(a[3]?`${a[3]} Output Group${a[3]!==1?"s":""}`:"No Output Groups")+"",o,u,s,n,l,i,c,U,I;n=new de({props:{src:xe}});let g=a[3]>0&&qe(a);return{c(){e=b("div"),r=b("h3"),o=Q(t),u=N(),s=b("button"),T(n.$$.fragment),l=N(),i=b("div"),g&&g.c(),this.h()},l(f){e=v(f,"DIV",{class:!0});var p=j(e);r=v(p,"H3",{class:!0});var $=j(r);o=z($,t),$.forEach(d),u=R(p),s=v(p,"BUTTON",{type:!0,class:!0});var S=j(s);C(n.$$.fragment,S),S.forEach(d),p.forEach(d),l=R(f),i=v(f,"DIV",{class:!0});var D=j(i);g&&g.l(D),D.forEach(d),this.h()},h(){m(r,"class","text-gray-900 dark:text-gray-400 text-sm font-medium truncate"),m(s,"type","button"),m(s,"class","inline-flex items-center ml-auto p-0.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-400 bg-white hover:bg-gray-50 focus:outline-none focus-visible:ring-1 focus-visible:border-blue-500 focus-visible:ring-blue-500"),m(e,"class","sticky top-0 flex items-center gap-x-4 py-2 bg-gray-100 z-10"),m(i,"class","max-w-xs flex flex-col space-y-2")},m(f,p){M(f,e,p),_(e,r),_(r,o),_(e,u),_(e,s),q(n,s,null),M(f,l,p),M(f,i,p),g&&g.m(i,null),c=!0,U||(I=[Me(Oe.call(null,s,{content:"Collapse output groups",delay:[500,0],modifier:"whitespace-nowrap"})),Y(s,"click",a[7])],U=!0)},p(f,p){(!c||p&8)&&t!==(t=(f[3]?`${f[3]} Output Group${f[3]!==1?"s":""}`:"No Output Groups")+"")&&H(o,t),f[3]>0?g?(g.p(f,p),p&8&&k(g,1)):(g=qe(f),g.c(),k(g,1),g.m(i,null)):g&&(Z(),y(g,1,1,()=>{g=null}),ee())},i(f){c||(k(n.$$.fragment,f),k(g),c=!0)},o(f){y(n.$$.fragment,f),y(g),c=!1},d(f){f&&d(e),L(n),f&&d(l),f&&d(i),g&&g.d(),U=!1,ce(I)}}}function ft(a){let e,r,t;return r=new Ye({}),{c(){e=b("span"),T(r.$$.fragment),this.h()},l(o){e=v(o,"SPAN",{class:!0});var u=j(e);C(r.$$.fragment,u),u.forEach(d),this.h()},h(){m(e,"class","absolute-center")},m(o,u){M(o,e,u),q(r,e,null),t=!0},p:Se,i(o){t||(k(r.$$.fragment,o),t=!0)},o(o){y(r.$$.fragment,o),t=!1},d(o){o&&d(e),L(r)}}}function qe(a){var n;let e=[],r=new Map,t,o,u=(n=a[5])!=null?n:[];const s=l=>l[14];for(let l=0;l<u.length;l+=1){let i=Ce(a,u,l),c=s(i);r.set(c,e[l]=Le(c,i))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=W()},l(l){for(let i=0;i<e.length;i+=1)e[i].l(l);t=W()},m(l,i){for(let c=0;c<e.length;c+=1)e[c].m(l,i);M(l,t,i),o=!0},p(l,i){var c;i&819&&(u=(c=l[5])!=null?c:[],Z(),e=He(e,i,s,1,l,u,r,t.parentNode,Je,Le,t,Ce),ee())},i(l){if(!o){for(let i=0;i<u.length;i+=1)k(e[i]);o=!0}},o(l){for(let i=0;i<e.length;i+=1)y(e[i]);o=!1},d(l){for(let i=0;i<e.length;i+=1)e[i].d(l);l&&d(t)}}}function Le(a,e){var s;let r,t,o;function u(...n){return e[11](e[12],...n)}return t=new at({props:{projectUid:e[0],jobUid:e[1],group:e[12],idx:e[14],outputResultImages:(s=e[4])!=null?s:{}}}),t.$on("dragstart",u),t.$on("dragend",e[9]),{key:a,first:null,c(){r=W(),T(t.$$.fragment),this.h()},l(n){r=W(),C(t.$$.fragment,n),this.h()},h(){this.first=r},m(n,l){M(n,r,l),q(t,n,l),o=!0},p(n,l){var c;e=n;const i={};l&1&&(i.projectUid=e[0]),l&2&&(i.jobUid=e[1]),l&32&&(i.group=e[12]),l&32&&(i.idx=e[14]),l&16&&(i.outputResultImages=(c=e[4])!=null?c:{}),t.$set(i)},i(n){o||(k(t.$$.fragment,n),o=!0)},o(n){y(t.$$.fragment,n),o=!1},d(n){n&&d(r),L(t,n)}}}function ct(a){let e,r,t,o;const u=[it,nt],s=[];function n(l,i){return l[6]?0:1}return r=n(a),t=s[r]=u[r](a),{c(){e=b("div"),t.c(),this.h()},l(l){e=v(l,"DIV",{class:!0});var i=j(e);t.l(i),i.forEach(d),this.h()},h(){m(e,"class","relative h-full border-l border-gray-200 bg-gray-100 dark:bg-gray-900 overflow-auto custom-scrollbar")},m(l,i){M(l,e,i),s[r].m(e,null),o=!0},p(l,[i]){let c=r;r=n(l),r===c?s[r].p(l,i):(Z(),y(s[c],1,1,()=>{s[c]=null}),ee(),t=s[r],t?t.p(l,i):(t=s[r]=u[r](l),t.c()),k(t,1),t.m(e,null))},i(l){o||(k(t),o=!0)},o(l){y(t),o=!1},d(l){l&&d(e),s[r].d()}}}function dt(a,e,r){let t,o,u,s;Qe(a,Ge,p=>r(6,s=p));let{projectUid:n}=e,{jobUid:l}=e,{data:i}=e,{loading:c=!1}=e;const U=()=>{window.dispatchEvent(new Event("toggleoutputs")),ze(Ge,s=!s,s)},I=(p,$,S,D)=>{var J;De.set({projectUid:n,jobUid:l,groupType:S,groupName:D,groupUid:$}),(J=p.dataTransfer)==null||J.setData("text/plain",JSON.stringify({projectUid:n,jobUid:l,uid:$,type:S,name:D}))},g=()=>{De.set(null)},f=(p,$)=>I($,p.uid,p.type,p.name);return a.$$set=p=>{"projectUid"in p&&r(0,n=p.projectUid),"jobUid"in p&&r(1,l=p.jobUid),"data"in p&&r(10,i=p.data),"loading"in p&&r(2,c=p.loading)},a.$$.update=()=>{a.$$.dirty&1024&&r(5,{doc:{output_result_groups:t,output_group_images:o}={output_result_groups:[],output_group_images:{}},numOutputSlotGroups:u}=i!=null?i:{},t,(r(4,o),r(10,i)),(r(3,u),r(10,i)))},[n,l,c,u,o,t,s,U,I,g,i,f]}class Ht extends ve{constructor(e){super();je(this,e,dt,ct,ke,{projectUid:0,jobUid:1,data:10,loading:2})}}export{Ht as default};
