import{S as K,h as O,s as W,y as X,v as x,Q as I,I as P,C as j,R as L,T as S,J as z,D as F,p as g,U,aw as V,a9 as A,k as E,a2 as B,E as H,z as Z,A as $,B as tt,F as et,o as w,t as D,H as J,ag as N,q as nt,u as ot,x as st,a6 as M,a7 as q,ae as Q,a5 as it,af as at}from"./vendor.3ae73048.js";import{c as lt,o as ct,f as rt,s as ut,U as dt}from"./types.8cb6216c.js";import{B as R}from"./Button.d254e004.js";function ft(s){let t;return{c(){t=M("Confirm Selection?")},l(e){t=q(e,"Confirm Selection?")},m(e,l){E(e,t,l)},d(e){e&&g(t)}}}function mt(s){let t;return{c(){t=M(s[0])},l(e){t=q(e,s[0])},m(e,l){E(e,t,l)},p(e,l){l&1&&Q(t,e[0])},d(e){e&&g(t)}}}function _t(s){let t;return{c(){t=M(s[1])},l(e){t=q(e,s[1])},m(e,l){E(e,t,l)},p(e,l){l&2&&Q(t,e[1])},d(e){e&&g(t)}}}function pt(s){let t,e,l,d,f,k,u,h,m;const b=s[10].default,r=X(b,s,s[12],null),i=r||ft();f=new R({props:{size:"small",kind:"success",modifier:"mr-1",$$slots:{default:[mt]},$$scope:{ctx:s}}}),f.$on("click",s[6]),u=new R({props:{size:"small",kind:"danger",$$slots:{default:[_t]},$$scope:{ctx:s}}}),u.$on("click",s[5]);let a=[s[7],{class:h="confirmation "+s[2]+" absolute py-2 px-3 text-xs border rounded-md bg-white shadow-lg text-gray-600"}],_={};for(let o=0;o<a.length;o+=1)_=x(_,a[o]);return{c(){t=I("div"),i&&i.c(),e=P(),l=I("div"),d=I("div"),j(f.$$.fragment),k=P(),j(u.$$.fragment),this.h()},l(o){t=L(o,"DIV",{class:!0});var c=S(t);i&&i.l(c),e=z(c),l=L(c,"DIV",{class:!0});var v=S(l);d=L(v,"DIV",{class:!0});var p=S(d);F(f.$$.fragment,p),k=z(p),F(u.$$.fragment,p),p.forEach(g),v.forEach(g),c.forEach(g),this.h()},h(){U(d,"class","ml-auto"),U(l,"class","flex w-full mt-2"),V(t,_),A(t,"hidden",!s[3])},m(o,c){E(o,t,c),i&&i.m(t,null),B(t,e),B(t,l),B(l,d),H(f,d,null),B(d,k),H(u,d,null),s[11](t),m=!0},p(o,[c]){r&&r.p&&(!m||c&4096)&&Z(r,b,o,o[12],m?tt(b,o[12],c,null):$(o[12]),null);const v={};c&4097&&(v.$$scope={dirty:c,ctx:o}),f.$set(v);const p={};c&4098&&(p.$$scope={dirty:c,ctx:o}),u.$set(p),V(t,_=et(a,[c&128&&o[7],(!m||c&4&&h!==(h="confirmation "+o[2]+" absolute py-2 px-3 text-xs border rounded-md bg-white shadow-lg text-gray-600"))&&{class:h}])),A(t,"hidden",!o[3])},i(o){m||(w(i,o),w(f.$$.fragment,o),w(u.$$.fragment,o),m=!0)},o(o){D(i,o),D(f.$$.fragment,o),D(u.$$.fragment,o),m=!1},d(o){o&&g(t),i&&i.d(o),J(f),J(u),s[11](null)}}}function ht(s,t,e){const l=["confirmButtonText","declineButtonText","position","modifier"];let d=N(t,l),{$$slots:f={},$$scope:k}=t,{confirmButtonText:u="Yes"}=t,{declineButtonText:h="No"}=t,{position:m="top"}=t,{modifier:b=""}=t,r,i,a,_=!1;const o=nt(),c=(n,T=!0)=>{n.stopPropagation();const G=i.querySelector(":scope > .menu-item__content");e(3,_=!1),T&&G.focus()},v=()=>{o("confirm"),window.dispatchEvent(new Event("closemenus"))},p=()=>{i.firstChild.disabled||(e(3,_=!0),lt(i,a,{placement:m,middleware:[ct(2),rt(),ut({padding:0})]}).then(({x:n,y:T})=>{e(4,a.style.left=`${n}px`,a),e(4,a.style.top=`${T}px`,a)}),it().then(()=>{var n;(n=a==null?void 0:a.querySelector("button"))===null||n===void 0||n.focus()}))},y=n=>{n.stopPropagation(),n.key==="Escape"&&c(n,!0),dt.trapFocus(n,a)},C=n=>{!(a==null?void 0:a.contains(n.target))&&!(i==null?void 0:i.contains(n.target))&&c(n,!1)};ot(()=>(i=a.closest(".menu__item"),e(9,r=i.closest("#context-menu")),i.addEventListener("click",p),()=>{i==null||i.removeEventListener("click",p),r==null||r.removeEventListener("click",C),document.removeEventListener("keydown",y)}));function Y(n){at[n?"unshift":"push"](()=>{a=n,e(4,a)})}return s.$$set=n=>{t=x(x({},t),st(n)),e(7,d=N(t,l)),"confirmButtonText"in n&&e(0,u=n.confirmButtonText),"declineButtonText"in n&&e(1,h=n.declineButtonText),"position"in n&&e(8,m=n.position),"modifier"in n&&e(2,b=n.modifier),"$$scope"in n&&e(12,k=n.$$scope)},s.$$.update=()=>{s.$$.dirty&520&&_&&(document.addEventListener("keydown",y),r==null||r.addEventListener("click",C)),s.$$.dirty&520&&(_||(document.removeEventListener("keydown",y),r==null||r.removeEventListener("click",C)))},[u,h,b,_,a,c,v,d,m,r,f,Y,k]}class bt extends K{constructor(t){super();O(this,t,ht,pt,W,{confirmButtonText:0,declineButtonText:1,position:8,modifier:2})}}export{bt as M};
