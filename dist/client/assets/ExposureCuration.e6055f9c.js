var an=Object.defineProperty,cn=Object.defineProperties;var un=Object.getOwnPropertyDescriptors;var lr=Object.getOwnPropertySymbols;var fn=Object.prototype.hasOwnProperty,dn=Object.prototype.propertyIsEnumerable;var ir=(r,e,t)=>e in r?an(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,xt=(r,e)=>{for(var t in e||(e={}))fn.call(e,t)&&ir(r,t,e[t]);if(lr)for(var t of lr(e))dn.call(e,t)&&ir(r,t,e[t]);return r},Tt=(r,e)=>cn(r,un(e));import{S as lt,h as it,s as at,y as ar,Q as I,R as S,T as R,p as h,U as _,aK as cr,a9 as $e,k as ne,a2 as g,K as je,z as ur,A as fr,B as dr,o as z,t as K,u as Ht,X as mr,al as mn,af as bt,v as $t,C as de,D as me,E as he,F as hn,G as gn,H as ge,ag as hr,x as pn,aT as _n,w as ve,e as ke,g as E,a6 as ue,I as $,a7 as fe,J as ee,ae as et,ac as Ie,ak as gr,r as vt,L as le,ad as Ft,aM as bn,P as er,ao as Ut,l as dt,m as mt,ap as pr,au as Wt,a3 as vn,ar as _r,at as Kt,f as wn,as as yn,aH as br,av as vr,j as kt,an as Yt,ax as En,aA as xn,am as wr,a5 as yr,V as Tn,W as kn,ay as In}from"./vendor.3ae73048.js";import{c as De,E as Ae,j as wt,C as Er,B as Sn,k as Cn,l as tt,m as We,n as xr}from"./interactive.28807de7.js";import{w as Pe,cL as Ne,bd as Rn,u as Le,cP as Tr,be as jn,e as tr,z as Mn,cM as Dn,a as rr,aB as It,aG as kr,cK as At,aS as An,_ as nr,aF as Pn}from"./index.146c2037.js";import{A as Nn,m as Un,r as Vn}from"./Logout.c3964a48.js";import{l as qt}from"./lodash.7e9ccf5d.js";import{J as On}from"./router.1b465492.js";import{L as or}from"./types.8cb6216c.js";import{t as Vt,S as Ir}from"./Spinner.012207c4.js";import{I as Ln}from"./InteractiveErrorNotice.aa122c8a.js";import{S as Fn,O as Gn,E as zn}from"./OverviewHoverExposure.d1e49005.js";import{I as rt}from"./Icon.61279884.js";import{M as Xt}from"./MinusCircle.54d00c03.js";import{S as Bn,a as Hn}from"./ShieldCheck.8626649a.js";import{A as Wn}from"./ArrowLeft.e021e1ac.js";import{A as Kn}from"./ArrowRight.2b41fe47.js";import{P as Sr}from"./PlusCircle.2b6e052c.js";import{D as Yn}from"./DocumentDownload.7e4b12e9.js";import{T as qn}from"./index.11580965.js";import{T as Xn}from"./Target.7baf7004.js";import{T as Jn,C as Qn}from"./Table.d98c37ba.js";import{T as Cr,R as Zn,S as $n,I as eo,a as to,F as ro,as as no,at as oo,b as so,D as lo,E as io,aJ as ao}from"./Authenticated.43a5e742.js";import{a as co,g as Rr,c as jr,r as uo,s as Mr}from"./styleString.ee1e2c41.js";import{Q as fo}from"./QuestionMarkCircle.1d0a7a5c.js";import"./helpers.7177ca38.js";import"./index.2e3bb17a.js";import"./ChevronUp.0ab7bee0.js";import"./TagCount.d4471cb8.js";import"./plotly.2255cf4f.js";import"./SwitchHorizontal.0e438e3b.js";import"./jobs.7ab064ef.js";import"./index.c4392b02.js";import"./jobs.d50d1674.js";import"./Folder.9bc96b35.js";import"./LockClosed.9ead7228.js";import"./auth.ae36c178.js";import"./createNew.a4a688d1.js";import"./index.9987ff70.js";import"./cleanupData.f259a128.js";import"./Exclamation.f44359c6.js";import"./Tag.2b4e7c42.js";import"./Workflow.261abe6c.js";import"./Database.55c9be70.js";import"./Search.fa01495d.js";import"./LightningBolt.e8bda490.js";import"./SidebarLeftOpen.3b7701dd.js";const mo=r=>({items:r[0]&256}),Dr=r=>({items:r[8]});function ho(r){let e,t,n,o,l,s,i,a;const d=r[48].default,c=ar(d,r,r[47],Dr);return{c(){e=I("div"),t=I("div"),c&&c.c(),this.h()},l(f){e=S(f,"DIV",{class:!0,style:!0});var p=R(e);t=S(p,"DIV",{style:!0});var w=R(t);c&&c.l(w),w.forEach(h),p.forEach(h),this.h()},h(){_(t,"style",n="height: "+r[9]+"px;"+(r[7]?"pointer-events: 'none';":"")+"width: "+r[10]+"px;"),_(e,"class",o=""+(cr(r[2])+" svelte-197jbgy")),_(e,"style",l="height:"+(typeof r[4]=="number"?r[4]+"px":r[4])+";width:"+(typeof r[6]=="number"?r[6]+"px":r[6])+";direction:"+r[3]+";"+(r[5]||"")),$e(e,"outerElement",!0)},m(f,p){ne(f,e,p),g(e,t),c&&c.m(t,null),r[49](t),r[50](e),s=!0,i||(a=je(e,"scroll",r[11]),i=!0)},p(f,p){c&&c.p&&(!s||p[0]&256|p[1]&65536)&&ur(c,d,f,f[47],s?dr(d,f[47],p,mo):fr(f[47]),Dr),(!s||p[0]&1664&&n!==(n="height: "+f[9]+"px;"+(f[7]?"pointer-events: 'none';":"")+"width: "+f[10]+"px;"))&&_(t,"style",n),(!s||p[0]&4&&o!==(o=""+(cr(f[2])+" svelte-197jbgy")))&&_(e,"class",o),(!s||p[0]&120&&l!==(l="height:"+(typeof f[4]=="number"?f[4]+"px":f[4])+";width:"+(typeof f[6]=="number"?f[6]+"px":f[6])+";direction:"+f[3]+";"+(f[5]||"")))&&_(e,"style",l),p[0]&4&&$e(e,"outerElement",!0)},i(f){s||(z(c,f),s=!0)},o(f){K(c,f),s=!1},d(f){f&&h(e),c&&c.d(f),r[49](null),r[50](null),i=!1,a()}}}const go=150,po=({columnIndex:r,data:e,rowIndex:t})=>`${t}:${r}`;function _o(r,e,t){let n,o,{$$slots:l={},$$scope:s}=e,{className:i=void 0}=e,{columnCount:a=void 0}=e,{columnWidth:d=void 0}=e,{direction:c="ltr"}=e,{height:f=void 0}=e,{initialScrollLeft:p=void 0}=e,{initialScrollTop:w=void 0}=e,{innerRef:N=void 0}=e,{innerElementType:C=void 0}=e,{innerTagName:j=void 0}=e,{itemData:Y=void 0}=e,{itemKey:y=void 0}=e,{onItemsRendered:k=void 0}=e,{onScroll:V=void 0}=e,{outerRef:P=null}=e,{outerElementType:X=void 0}=e,{outerTagName:T=void 0}=e,{overscanColumnCount:U=void 0}=e,{overscanColumnsCount:J=void 0}=e,{overscanCount:H=void 0}=e,{overscanRowCount:O=void 0}=e,{overscanRowsCount:A=void 0}=e,{rowCount:L=void 0}=e,{rowHeight:G=void 0}=e,{style:Q=void 0}=e,{useIsScrolling:Z=!1}=e,{width:b=void 0}=e,{specificFunctionProps:M}=e;const{getColumnOffset:B,getColumnStartIndexForOffset:D,getColumnStopIndexForStartIndex:F,getColumnWidth:oe,getEstimatedTotalHeight:te,getEstimatedTotalWidth:Re,getOffsetForColumnAndAlignment:Ve,getOffsetForRowAndAlignment:ze,getRowHeight:W,getRowOffset:ye,getRowStartIndexForOffset:Se,getRowStopIndexForStartIndex:Me,initInstanceProps:Te,shouldResetStyleCacheOnItemSizeChange:yt}=M;let Ke={},Ye={};const ct=(x,se,be)=>(x===Ye.a&&se===Ye.b&&be===Ye.c||(Ye={a:x,b:se,c:be},Ke={}),Ke),qe={_getItemStyleCache:ct};let pe,xe=!1,Ee="forward",ie=typeof p=="number"?p:0,ae=typeof w=="number"?w:0,re=!1,_e="forward",ce,He=null,Et=!1,nt=!1,ht=[],St,Xe;const Ct=({scrollLeft:x,scrollTop:se})=>{if(Et=!0,x!==void 0&&(x=Math.max(0,x)),se!==void 0&&(se=Math.max(0,se)),x===void 0&&(x=ie),se===void 0&&(se=ae),ie===x&&ae===se)return null;t(38,Ee=ie<x?"forward":"backward"),t(39,ie=x),t(40,ae=se),re=!0,t(41,_e=ae<se?"forward":"backward")},Pt=({align:x="auto",columnIndex:se,rowIndex:be})=>{const Ce=co();se!==void 0&&(se=Math.max(0,Math.min(se,a-1))),be!==void 0&&(be=Math.max(0,Math.min(be,L-1)));const Ue=te(pe,ce),Qe=Re(pe,ce)>b?Ce:0,Fe=Ue>f?Ce:0;Ct({scrollLeft:se!==void 0?Ve(pe,se,x,ie,ce,Fe):ie,scrollTop:be!==void 0?ze(pe,be,x,ae,ce,Qe):ae})};Ht(()=>{P!=null&&(typeof p=="number"&&t(1,P.scrollLeft=p,P),typeof w=="number"&&t(1,P.scrollTop=w,P)),jt()}),mr(()=>{He!==null&&jr(He)});let ot,Be,gt,ut;const Nt=()=>{if(a>0&&L){t(8,ht.length=(ut-gt+1)*(Be-ot+1),ht);let x=0;for(let se=gt;se<=ut;se++)for(let be=ot;be<=Be;be++)t(8,ht[x++]={columnIndex:be,data:Y,isScrolling:o,key:n({columnIndex:be,data:Y,rowIndex:se}),rowIndex:se,style:Mt(se,be)},ht)}t(9,St=te(pe,ce)),t(10,Xe=Re(pe,ce))};let Je={},Rt={};const jt=()=>{if(typeof k=="function"&&a>0&&L>0){const[se,be,Ce,Ue]=pt(),[st,Qe,Fe,Dt]=Ot(),_t=Je;(se!==_t.overscanColumnStartIndex||be!==_t.overscanColumnStopIndex||st!==_t.overscanRowStartIndex||Qe!==_t.overscanRowStopIndex||Ce!==_t.visibleColumnStartIndex||Ue!==_t.visibleColumnStopIndex||Fe!==_t.visibleRowStartIndex||Dt!==_t.visibleRowStopIndex)&&(k({overscanColumnStartIndex:se,overscanColumnStopIndex:be,overscanRowStartIndex:st,overscanRowStopIndex:Qe,visibleColumnStartIndex:Ce,visibleColumnStopIndex:Ue,visibleRowStartIndex:Fe,visibleRowStopIndex:Dt}),Je={overscanColumnStartIndex:se,overscanColumnStopIndex:be,overscanRowStartIndex:st,overscanRowStopIndex:Qe,visibleColumnStartIndex:Ce,visibleColumnStopIndex:Ue,visibleRowStartIndex:Fe,visibleRowStopIndex:Dt})}const x=Rt;typeof V=="function"&&!(ie===x.scrollLeft&&ae===x.scrollTop&&Ee===x.horizontalScrollDirection&&_e===x.verticalScrollDirection&&re===re)&&(V({scrollLeft:ie,scrollTop:ae,horizontalScrollDirection:Ee,verticalScrollDirection:_e,scrollUpdateWasRequested:re}),Rt={scrollLeft:ie,scrollTop:ae,horizontalScrollDirection:Ee,verticalScrollDirection:_e,scrollUpdateWasRequested:re})},Mt=(x,se)=>{const be=ct(yt&&d,yt&&c,yt&&G),Ce=`${x}:${se}`;let Ue;if(be.hasOwnProperty(Ce))Ue=be[Ce];else{const st=B(pe,se,ce),Qe=c==="rtl";be[Ce]=Ue={position:"absolute",left:Qe?void 0:st,right:Qe?st:void 0,top:ye(pe,x,ce),height:W(pe,x,ce),width:oe(pe,se,ce)}}return Ue},pt=()=>{const x=U||J||H||1;if(a===0||L===0)return[0,0,0,0];const se=D(pe,ie,ce),be=F(pe,se,ie,ce),Ce=!xe||Ee==="backward"?Math.max(1,x):1,Ue=!xe||Ee==="forward"?Math.max(1,x):1;return[Math.max(0,se-Ce),Math.max(0,Math.min(a-1,be+Ue)),se,be]},Ot=()=>{const x=O||A||H||1;if(a===0||L===0)return[0,0,0,0];const se=Se(pe,ae,ce),be=Me(pe,se,ae,ce),Ce=!xe||_e==="backward"?Math.max(1,x):1,Ue=!xe||_e==="forward"?Math.max(1,x):1;return[Math.max(0,se-Ce),Math.max(0,Math.min(L-1,be+Ue)),se,be]},Jt=x=>{const{clientHeight:se,clientWidth:be,scrollLeft:Ce,scrollTop:Ue,scrollHeight:st,scrollWidth:Qe}=x.currentTarget;if(Et=!0,ie===Ce&&ae===Ue)return null;let Fe=Ce;if(c==="rtl")switch(Rr()){case"negative":Fe=-Ce;break;case"positive-descending":Fe=Qe-be-Ce;break}Fe=Math.max(0,Math.min(Fe,Qe-be));const Dt=Math.max(0,Math.min(Ue,st-se));t(7,xe=!0),t(38,Ee=ie<Ce?"forward":"backward"),t(39,ie=Fe),t(40,ae=Dt),t(41,_e=ae<Ue?"forward":"backward"),re=!1},Qt=()=>{He!==null&&jr(He),He=uo(ft,go)},ft=()=>{He=null,t(7,xe=!1),t(41,_e=""),t(38,Ee=""),nt=!0};mn(()=>{if(Et&&(Et=!1,Qt()),nt&&(nt=!1,ct(-1)),re&&P!=null){if(c==="rtl")switch(Rr()){case"negative":t(1,P.scrollLeft=-ie,P);break;case"positive-ascending":t(1,P.scrollLeft=ie,P);break;default:const{clientWidth:x,scrollWidth:se}=P;t(1,P.scrollLeft=se-x-ie,P);break}else t(1,P.scrollLeft=Math.max(0,ie),P);t(1,P.scrollTop=Math.max(0,ae),P)}jt()});function zt(x){bt[x?"unshift":"push"](()=>{N=x,t(0,N)})}function Zt(x){bt[x?"unshift":"push"](()=>{P=x,t(1,P)})}return r.$$set=x=>{"className"in x&&t(2,i=x.className),"columnCount"in x&&t(12,a=x.columnCount),"columnWidth"in x&&t(13,d=x.columnWidth),"direction"in x&&t(3,c=x.direction),"height"in x&&t(4,f=x.height),"initialScrollLeft"in x&&t(14,p=x.initialScrollLeft),"initialScrollTop"in x&&t(15,w=x.initialScrollTop),"innerRef"in x&&t(0,N=x.innerRef),"innerElementType"in x&&t(16,C=x.innerElementType),"innerTagName"in x&&t(17,j=x.innerTagName),"itemData"in x&&t(18,Y=x.itemData),"itemKey"in x&&t(19,y=x.itemKey),"onItemsRendered"in x&&t(20,k=x.onItemsRendered),"onScroll"in x&&t(21,V=x.onScroll),"outerRef"in x&&t(1,P=x.outerRef),"outerElementType"in x&&t(22,X=x.outerElementType),"outerTagName"in x&&t(23,T=x.outerTagName),"overscanColumnCount"in x&&t(24,U=x.overscanColumnCount),"overscanColumnsCount"in x&&t(25,J=x.overscanColumnsCount),"overscanCount"in x&&t(26,H=x.overscanCount),"overscanRowCount"in x&&t(27,O=x.overscanRowCount),"overscanRowsCount"in x&&t(28,A=x.overscanRowsCount),"rowCount"in x&&t(29,L=x.rowCount),"rowHeight"in x&&t(30,G=x.rowHeight),"style"in x&&t(5,Q=x.style),"useIsScrolling"in x&&t(31,Z=x.useIsScrolling),"width"in x&&t(6,b=x.width),"specificFunctionProps"in x&&t(32,M=x.specificFunctionProps),"$$scope"in x&&t(47,s=x.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&2147479676|r.$$.dirty[1]&1&&t(37,pe={className:i,columnCount:a,columnWidth:d,direction:c,height:f,initialScrollLeft:p,initialScrollTop:w,innerElementType:C,innerTagName:j,itemData:Y,itemKey:y,onItemsRendered:k,onScroll:V,outerElementType:X,outerTagName:T,overscanColumnCount:U,overscanColumnsCount:J,overscanCount:H,overscanRowCount:O,overscanRowsCount:A,rowCount:L,rowHeight:G,style:Q,useIsScrolling:Z,width:b}),r.$$.dirty[1]&64&&(ce=qe&&Te(pe,qe)),r.$$.dirty[0]&524288&&(n=y||po),r.$$.dirty[1]&448&&t(42,[ot,Be]=pt(),ot,(t(43,Be),t(37,pe),t(39,ie),t(38,Ee),t(2,i),t(12,a),t(13,d),t(3,c),t(4,f),t(14,p),t(15,w),t(16,C),t(17,j),t(18,Y),t(19,y),t(20,k),t(21,V),t(22,X),t(23,T),t(24,U),t(25,J),t(26,H),t(27,O),t(28,A),t(29,L),t(30,G),t(5,Q),t(31,Z),t(6,b))),r.$$.dirty[1]&1600&&t(44,[gt,ut]=Ot(),gt,(t(45,ut),t(37,pe),t(40,ae),t(41,_e),t(2,i),t(12,a),t(13,d),t(3,c),t(4,f),t(14,p),t(15,w),t(16,C),t(17,j),t(18,Y),t(19,y),t(20,k),t(21,V),t(22,X),t(23,T),t(24,U),t(25,J),t(26,H),t(27,O),t(28,A),t(29,L),t(30,G),t(5,Q),t(31,Z),t(6,b))),r.$$.dirty[0]&128|r.$$.dirty[1]&1&&t(46,o=Z?xe:void 0),r.$$.dirty[0]&1624191056|r.$$.dirty[1]&63489&&Nt()},[N,P,i,c,f,Q,b,xe,ht,St,Xe,Jt,a,d,p,w,C,j,Y,y,k,V,X,T,U,J,H,O,A,L,G,Z,M,ct,qe,Ct,Pt,pe,Ee,ie,ae,_e,ot,Be,gt,ut,o,s,l,zt,Zt]}class bo extends lt{constructor(e){super();it(this,e,_o,ho,at,{className:2,columnCount:12,columnWidth:13,direction:3,height:4,initialScrollLeft:14,initialScrollTop:15,innerRef:0,innerElementType:16,innerTagName:17,itemData:18,itemKey:19,onItemsRendered:20,onScroll:21,outerRef:1,outerElementType:22,outerTagName:23,overscanColumnCount:24,overscanColumnsCount:25,overscanCount:26,overscanRowCount:27,overscanRowsCount:28,rowCount:29,rowHeight:30,style:5,useIsScrolling:31,width:6,specificFunctionProps:32,_getItemStyleCache:33,instance:34,scrollTo:35,scrollToItem:36},null,[-1,-1,-1])}get _getItemStyleCache(){return this.$$.ctx[33]}get instance(){return this.$$.ctx[34]}get scrollTo(){return this.$$.ctx[35]}get scrollToItem(){return this.$$.ctx[36]}}const Ar={getColumnOffset:({columnWidth:r},e)=>e*r,getColumnWidth:({columnWidth:r},e)=>r,getRowOffset:({rowHeight:r},e)=>e*r,getRowHeight:({rowHeight:r},e)=>r,getEstimatedTotalHeight:({rowCount:r,rowHeight:e})=>e*r,getEstimatedTotalWidth:({columnCount:r,columnWidth:e})=>e*r,getOffsetForColumnAndAlignment:({columnCount:r,columnWidth:e,width:t},n,o,l,s,i)=>{const a=Math.max(0,r*e-t),d=Math.min(a,n*e),c=Math.max(0,n*e-t+i+e);switch(o==="smart"&&(l>=c-t&&l<=d+t?o="auto":o="center"),o){case"start":return d;case"end":return c;case"center":const f=Math.round(c+(d-c)/2);return f<Math.ceil(t/2)?0:f>a+Math.floor(t/2)?a:f;case"auto":default:return l>=c&&l<=d?l:c>d||l<c?c:d}},getOffsetForRowAndAlignment:({rowHeight:r,height:e,rowCount:t},n,o,l,s,i)=>{const a=Math.max(0,t*r-e),d=Math.min(a,n*r),c=Math.max(0,n*r-e+i+r);switch(o==="smart"&&(l>=c-e&&l<=d+e?o="auto":o="center"),o){case"start":return d;case"end":return c;case"center":const f=Math.round(c+(d-c)/2);return f<Math.ceil(e/2)?0:f>a+Math.floor(e/2)?a:f;case"auto":default:return l>=c&&l<=d?l:c>d||l<c?c:d}},getColumnStartIndexForOffset:({columnWidth:r,columnCount:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/r))),getColumnStopIndexForStartIndex:({columnWidth:r,columnCount:e,width:t},n,o)=>{const l=n*r,s=Math.ceil((t+o-l)/r);return Math.max(0,Math.min(e-1,n+s-1))},getRowStartIndexForOffset:({rowHeight:r,rowCount:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/r))),getRowStopIndexForStartIndex:({rowHeight:r,rowCount:e,height:t},n,o)=>{const l=n*r,s=Math.ceil((t+o-l)/r);return Math.max(0,Math.min(e-1,n+s-1))},initInstanceProps(r){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:({columnWidth:r,rowHeight:e})=>{}},vo=r=>({items:r&512}),Pr=r=>({items:r[9]});function wo(r){let e;const t=r[5].default,n=ar(t,r,r[7],Pr);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,l){n&&n.m(o,l),e=!0},p(o,l){n&&n.p&&(!e||l&640)&&ur(n,t,o,o[7],e?dr(t,o[7],l,vo):fr(o[7]),Pr)},i(o){e||(z(n,o),e=!0)},o(o){K(n,o),e=!1},d(o){n&&n.d(o)}}}function yo(r){let e,t;const n=[{specificFunctionProps:Ar},r[1]];let o={$$slots:{default:[wo,({items:l})=>({9:l}),({items:l})=>l?512:0]},$$scope:{ctx:r}};for(let l=0;l<n.length;l+=1)o=$t(o,n[l]);return e=new bo({props:o}),r[6](e),{c(){de(e.$$.fragment)},l(l){me(e.$$.fragment,l)},m(l,s){he(e,l,s),t=!0},p(l,[s]){const i=s&2?hn(n,[s&0&&{specificFunctionProps:Ar},s&2&&gn(l[1])]):{};s&640&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){K(e.$$.fragment,l),t=!1},d(l){r[6](null),ge(e,l)}}}function Eo(r,e,t){const n=["scrollTo","scrollToItem","instance"];let o=hr(e,n),{$$slots:l={},$$scope:s}=e,i;const a=w=>i==null?void 0:i.scrollTo(w),d=w=>i==null?void 0:i.scrollToItem(w);let c={};const f=c;function p(w){bt[w?"unshift":"push"](()=>{i=w,t(0,i)})}return r.$$set=w=>{e=$t($t({},e),pn(w)),t(1,o=hr(e,n)),"$$scope"in w&&t(7,s=w.$$scope)},r.$$.update=()=>{r.$$.dirty&1&&i&&Object.assign(c,i.instance)},[i,o,a,d,f,l,p,s]}class xo extends lt{constructor(e){super();it(this,e,Eo,yo,at,{scrollTo:2,scrollToItem:3,instance:4})}get scrollTo(){return this.$$.ctx[2]}get scrollToItem(){return this.$$.ctx[3]}get instance(){return this.$$.ctx[4]}}const To=(r,e,t,n)=>{const o=ve(Dn?"127.0.0.1":r),l=ve(e),s=_n(`${t}_${n}`),i=ve([]),a=ve(),d=ke(On,m=>m.find(u=>u.project_uid===t&&u.uid===n)),c=ke(d,m=>{var u,v,q;return!!((q=(v=(u=m==null?void 0:m.input_slot_groups)==null?void 0:u.find(we=>we.type==="particle"))==null?void 0:v.connections)==null?void 0:q.length)}),f=ve(!0),p=ve(!1),w=ve(!1),N=ve(!1),C=ve(!1),j=ve(!1),Y=ve(!1),y=ve(!1),k=ve(!1),V=ke([p,w],([m,u])=>m&&u),P=ve(null),X=ke(P,m=>{var u;return(u=m==null?void 0:m.thumb_height_pix)!=null?u:null}),T=ke(P,m=>{var u;return(u=m==null?void 0:m.thumb_width_pix)!=null?u:null}),U=ke(P,m=>{var u;return(u=m==null?void 0:m.psize_A)!=null?u:null}),J=ke(P,m=>{var u;return(u=m==null?void 0:m.num_mics_total)!=null?u:null}),H=ke(P,m=>{var u;return(u=m==null?void 0:m.num_particles_total)!=null?u:null}),O=ke(P,m=>{var u;return(u=m==null?void 0:m.width_pix)!=null?u:null}),A=ke(P,m=>{var u;return(u=m==null?void 0:m.has_preview_thumbnails)!=null?u:null}),L=ke(P,m=>{var u;return(u=m==null?void 0:m.has_denoised_mics)!=null?u:null}),G=ve(!0),Q=Pe(Ne(De.lowpassFilter,E(s)),5),Z=ve(null),b=ve(null),M=ve(0),B=ve([]),D=ke(B,m=>sr(m)),F=ve([]),oe=ve(!1),te=ve(null),Re=ke(B,m=>m.reduce((u,v)=>!v.threshold_reject&&!v.manual_reject?++u:u,0)),Ve=ke(B,m=>m.reduce((u,v)=>v.threshold_reject||v.manual_reject?++u:u,0)),ze=ke(B,m=>m.reduce((u,v)=>v.manual_reject?++u:u,0)),W=ke(B,m=>m.reduce((u,v)=>v.threshold_reject?++u:u,0)),ye=ke(F,m=>m.filter(u=>u.min!==null||u.max!==null)),Se=ke(B,m=>m.reduce((u,v)=>Tt(xt({},u),{[v.idx]:v}),{})),Me=ve(null),Te=Pe(Ne(De.selectedMicUid,E(s)),null),yt=ke([B,Te],([m,u])=>m==null?void 0:m.find(v=>(v==null?void 0:v.idx)===u)),Ke=ve([]),Ye=ve(null),ct=ke([Ye,D],([m,u])=>{var v;return(v=u.find(q=>q.idx===m))!=null?v:null}),qe=ve(null),pe=ve(null),xe=ve(null),Ee=ve(null),ie=ve(null),ae=ve(null),re=ve(null),_e=ke([Te,B],([m,u])=>{if(m||m===0)return u.find(v=>v.idx===m)}),ce=Pe(Ne(De.selectedView,E(s)),Ae.thresholds),He=Pe(Ne(De.showControls,E(s)),!0),Et=Pe(Ne(De.dragMode,E(s)),Rn.select),nt=Pe(Ne(De.showPicks,E(s)),!1),ht=Pe(Ne(De.particleDiameter,E(s)),135),St=Pe(Ne(De.boxsize,E(s)),256),Xe=Pe(Ne(De.picksColor,E(s)),"#00ff00"),Ct=Pe(Ne(De.showScale,E(s)),!0),Pt=Pe(Ne(De.showBox,E(s)),!1),ot=Pe(Ne(De.boxColor,E(s)),"#8712B3"),Be=Pe(Ne(De.tableFilter,E(s)),wt.all),gt=ke(M,m=>m>25e3?2:m>18e3?3:m>1e4?4:5),ut=Pe(Ne(De.expandedThresholdCharts,E(s)),[0,1,2,3,4]),Nt=Pe(Ne(De.plotAxisX,E(s)),Er.ctf_fit_to_A),Je=Pe(Ne(De.plotAxisY,E(s)),Er.df_avg),Rt=Pe(Ne(De.chartType,E(s)),Sn.scatter),jt=Pe(Ne(De.nbinsx,E(s)),20),Mt=ke(F,m=>m.filter(u=>Cn.includes(u==null?void 0:u.name))),pt=ve(null),Ot=Pe(Ne(De.micrographsViewMode,E(s)),tt.table),Jt=Pe(Ne(De.showGridDetails,E(s)),!0),Qt=ke([B,Be],([m,u])=>Bt(m,u)),ft=(m,u)=>{i.update(v=>[...v,u]),console.error(`${m} error: `,u)},zt=()=>{const m=E(pt),u=E(F).filter(v=>v.min!==null||v.max!==null);B.update(v=>v.map(q=>{if(q.manual_reject===!0)return q;if(u.length)for(let we=0;we<u.length;we++){const Ze=Tr(q[u[we].name]),Oe=u[we].min,Ge=u[we].max;if(!(typeof Oe!="number"||typeof Ge!="number")&&(Ze<Oe||Ze>Ge))return Tt(xt({},q),{threshold_reject:!0})}return Tt(xt({},q),{threshold_reject:!1})})),m&&m.replaceData(Bt(sr(E(B)),E(Be)))},Zt=m=>{try{F.update(u=>u.map(v=>v.name===m?Tt(xt({},v),{min:null,max:null}):v)),zt(),Le.interactive.call(E(o),E(l),"clear_threshold",{field_name:m})}catch{ft("handleClearThreshold",`Could not clear threshold for ${m}.`)}},x=(m,u,v)=>{try{F.update(q=>q.map(we=>we.name===m?Tt(xt({},we),{min:u,max:v}):we)),zt(),Le.interactive.call(E(o),E(l),"set_threshold",{field_name:m,min:u,max:v})}catch{ft("handleThresholdChange",`Could not set threshold for ${m}.`)}},se=async()=>{try{const m=await Le.interactive.call(E(o),E(l),"get_fields_and_thresholds",{}),u=m.fields.map(v=>{var q,we;return Tt(xt({},v),{round:We[v.name],min:v.active&&typeof((q=v.thresholds)==null?void 0:q[0])=="number"?v.thresholds[0]:null,max:v.active&&typeof((we=v.thresholds)==null?void 0:we[1])=="number"?v.thresholds[1]:null})});F.set(u),oe.set(m==null?void 0:m.invert)}catch{ft("getFieldsAndThresholds","Could not get the fields and thresholds for job.")}},be=m=>{var Oe;const u=E(pt),v=E(Be),q=E(yt);if(!u)return rr("Table does not exist");if(typeof(q==null?void 0:q.idx)!="number")return rr("Selected micrograph index is not a number");const we=u==null?void 0:u.getRow(q.idx),Ze=()=>{const Ge=q.idx!==u.getRows().length+1;if(!u.getRow(Ge?q.idx-1:q.idx+1))return u.replaceData(Bt(E(D),E(Be)));u.addData([q],!Ge,Ge?q.idx-1:q.idx+1)};if(v===wt.accepted&&(we&&m?u.deleteRow(q.idx):!we&&!m&&Ze()),(v===wt.rejected||v===wt.manualRejected)&&(we&&!m?u.deleteRow(q.idx):!we&&m&&Ze()),we){const Ge=(Oe=we==null?void 0:we.getCell("idx"))==null?void 0:Oe.getElement();m&&Ge&&(Ge.style.backgroundColor="#fee2e2"),!m&&Ge&&(Ge.style.backgroundColor="#dcfce7")}},Ce=(m,u)=>{try{B.update(v=>v.map(q=>q.uid===m?Tt(xt({},q),{manual_reject:u}):q)),Le.interactive.call(E(o),E(l),"modify_one",{uid:m,value:u}),E(Ot)===tt.table&&be(u)}catch(v){ft("modifyOne",`Could not modify micrograph ${m}.: ${v.message}`)}},Ue=async()=>{try{const m=await Le.interactive.call(E(o),E(l),"get_available",{});te.set(m)}catch{ft("getAvailable","Could not get available data setup dictionary.")}},st=m=>`/api/actions/interactive/exposure-thumbnail?${`host=${E(o)}&port=${E(l)}&idx=${Tr(m)}&zoom_level=${E(jn)}`}`,Qe=()=>{const m=new Image;m.onload=()=>{Z.set(m.height),b.set(m.width)},m.src=st(0)},Fe=async m=>{var u;p.set(!0);try{const v=await Le.interactive.call(E(o),E(l),"get_individual_data_mic",{idx:m,lp_filter_A:E(Q)},!0,{signal:(u=E(a))==null?void 0:u.signal});if(!v)return;E(qe)&&URL.revokeObjectURL(E(qe));const q=URL.createObjectURL(new Blob([v],{type:"image/png"}));qe.set(q),p.set(!1)}catch{ft("getMicImage",`Could not get image for micrograph: ${E(Te)}.`),qe.set(null),p.set(!1)}},Dt=qt.exports.throttle(async m=>await Fe(m),800),_t=async m=>{var u;try{w.set(!0);const v=await Le.interactive.call(E(o),E(l),"get_individual_data_picks",{idx:m},!1,{signal:(u=E(a))==null?void 0:u.signal});if(!v)return;Ke.set(v),w.set(!1)}catch{ft("getPicks",`Could not get particle picks for micrograph: ${E(Te)}.`),w.set(!1)}},Jr=qt.exports.throttle(async m=>await _t(m),800),Qr=async m=>{var u;N.set(!0);try{const v=await Le.interactive.call(E(o),E(l),"get_individual_data_ctfimg",{idx:m},!0,{signal:(u=E(a))==null?void 0:u.signal});if(!v)return;E(pe)&&URL.revokeObjectURL(E(pe));const q=URL.createObjectURL(new Blob([v],{type:"image/png"}));pe.set(q),N.set(!1)}catch(v){console.error("getCtfImage error: ",v.message),pe.set(null),N.set(!1)}},Zr=async m=>{var u;C.set(!0);try{const v=await Le.interactive.call(E(o),E(l),"get_individual_data_ctfplot",{idx:m},!0,{signal:(u=E(a))==null?void 0:u.signal});if(!v)return;E(xe)&&URL.revokeObjectURL(E(xe));const q=URL.createObjectURL(new Blob([v],{type:"image/png"}));xe.set(q),C.set(!1)}catch(v){console.error("getCtfPlot error: ",v.message),xe.set(null),C.set(!1)}},$r=async m=>{var u;j.set(!0);try{const v=await Le.interactive.call(E(o),E(l),"get_individual_data_globalmotionimg",{idx:m},!0,{signal:(u=E(a))==null?void 0:u.signal});if(!v)return;E(Ee)&&URL.revokeObjectURL(E(Ee));const q=URL.createObjectURL(new Blob([v],{type:"image/png"}));Ee.set(q),j.set(!1)}catch(v){console.error("getGlobalMotionImg error: ",v.message),Ee.set(null),j.set(!1)}},en=async m=>{var u;Y.set(!0);try{const v=await Le.interactive.call(E(o),E(l),"get_individual_data_localmotionimg",{idx:m},!0,{signal:(u=E(a))==null?void 0:u.signal});if(!v)return;E(ie)&&URL.revokeObjectURL(E(ie));const q=URL.createObjectURL(new Blob([v],{type:"image/png"}));ie.set(q),Y.set(!1)}catch(v){console.error("getLocalMotionImg error: ",v.message),ie.set(null),Y.set(!1)}},tn=async m=>{var u;k.set(!0);try{const v=await Le.interactive.call(E(o),E(l),"get_individual_data_pickstatsimg",{idx:m},!0,{signal:(u=E(a))==null?void 0:u.signal});if(!v)return;E(re)&&URL.revokeObjectURL(E(re));const q=URL.createObjectURL(new Blob([v],{type:"image/png"}));re.set(q),k.set(!1)}catch(v){console.error("getPickStatsImage error: ",v.message),re.set(null),k.set(!1)}},rn=async m=>{var u;y.set(!0);try{const v=await Le.interactive.call(E(o),E(l),"get_individual_data_picklocationimg",{idx:m},!0,{signal:(u=E(a))==null?void 0:u.signal});if(!v)return;E(ae)&&URL.revokeObjectURL(E(ae));const q=URL.createObjectURL(new Blob([v],{type:"image/png"}));ae.set(q),y.set(!1)}catch(v){console.error("getPickLocationImage error: ",v.message),ae.set(null),y.set(!1)}},nn=async m=>{if(m){const u=await Le.interactive.call(E(o),E(l),"enable_denoise_preview",{});(u==null?void 0:u.success)&&G.set(!0)}else{const u=await Le.interactive.call(E(o),E(l),"disable_denoise_preview",{});(u==null?void 0:u.success)&&G.set(!1)}Te&&Fe(E(Te))},on=m=>{var u;try{p.set(!0),w.set(!0),Te.set(m),(u=E(a))==null||u.abort(),a.set(new AbortController),Dt(m),E(c)&&Jr(m)}catch(v){tr("setMicrograph error: ",v),p.set(!1),w.set(!1)}},sn=qt.exports.throttle(m=>{var u,v,q,we,Ze,Oe,Ge;E(te)!==null&&((u=E(a))==null||u.abort(),a.set(new AbortController),((v=E(te))==null?void 0:v.has_ctf_plotdata)&&(Qr(m),Zr(m)),((q=E(te))==null?void 0:q.has_micrograph)&&Fe(m),((we=E(te))==null?void 0:we.has_rigid_motion)&&$r(m),((Ze=E(te))==null?void 0:Ze.has_particle_motion)&&en(m),((Oe=E(te))==null?void 0:Oe.has_pick_stats)&&tn(m),((Ge=E(te))==null?void 0:Ge.has_particle_locations)&&rn(m))},800),sr=m=>m.map(u=>Tt(xt({},u),{avg_intensity:(u==null?void 0:u.avg_intensity)?parseFloat(u.avg_intensity.toFixed(We.avg_intensity)):0,df_avg:(u==null?void 0:u.df_avg)?parseFloat(u.df_avg).toFixed(We.df_avg).toString():"",df_ast:(u==null?void 0:u.df_ast)?parseFloat(u.df_ast.toFixed(We.df_ast)):0,phase_shift_deg:(u==null?void 0:u.phase_shift_deg)?parseFloat(u.phase_shift_deg.toFixed(We.phase_shift_deg)):0,ctf_fit_to_A:u.ctf_fit_to_A?parseFloat(u.ctf_fit_to_A).toFixed(We.ctf_fit_to_A).toString():"",ctf_fit_cc:u.ctf_fit_cc?parseFloat(u.ctf_fit_cc.toFixed(We.ctf_fit_cc)):0,df_range:u.df_range?parseFloat(u.df_range.toFixed(We.df_range)):0,df_tilt_normal:u.df_tilt_normal?parseFloat(u.df_tilt_normal.toFixed(We.df_tilt_normal)):0,ice_thickness_rel:u.ice_thickness_rel?parseFloat(u.ice_thickness_rel.toFixed(We.ice_thickness_rel)):0,motion_total_pix:(u==null?void 0:u.motion_total_pix)?parseFloat(u.motion_total_pix.toFixed(We.motion_total_pix)):0,motion_curvature:u.motion_curvature?parseFloat(u.motion_curvature.toFixed(We.motion_curvature)):0,pick_ncc_median:u.pick_ncc_median?parseFloat(u.pick_ncc_median.toFixed(We.pick_ncc_median)):0,pick_pow_median:u.pick_pow_median?parseFloat(u.pick_pow_median.toFixed(We.pick_pow_median)):0})),Bt=(m,u)=>m.filter(v=>u===wt.all||u===wt.accepted&&(v==null?void 0:v.threshold_reject)===!1&&(v==null?void 0:v.manual_reject)===!1||u===wt.rejected&&((v==null?void 0:v.threshold_reject)===!0||(v==null?void 0:v.manual_reject)===!0)||u===wt.thresholdRejected&&(v==null?void 0:v.threshold_reject)===!0||u===wt.manualRejected&&(v==null?void 0:v.manual_reject)===!0);return{interactiveError:i,loadingExposures:f,loadingDisplay:V,loadingMic:p,loadingCtf:N,loadingCtfPlot:C,loadingGlobalMotionImg:j,loadingLocalMotionImg:Y,loadingPickLocationImg:y,loadingPickStatsImg:k,thumbHeight:X,thumbWidth:T,pSize:U,numMicsTotal:J,numParticlesTotal:H,hasDenoisedMics:L,useDenoised:G,lowPassFilter:Q,initialExposureCount:M,allExposures:B,formattedExposures:D,fields:F,availableData:te,hoverAnchorNode:Me,selectedMicUid:Te,currentPicks:Ke,overviewHoverUid:Ye,overviewHoverData:ct,hoverAttributes:Mt,micWidth:O,hasThumbnails:A,urlMic:qe,urlCtf:pe,urlCtfPlot:xe,urlGlobalMotionImg:Ee,urlLocalMotionImg:ie,urlPickLocationImg:ae,urlPickStatsImg:re,showPicks:nt,showScale:Ct,particleDiameter:ht,boxsizeRawPix:St,picksColor:Xe,showBox:Pt,boxColor:ot,selectedView:ce,selectedMicrograph:_e,showThresholdControls:He,plotDragMode:Et,expandedMax:gt,expandedThresholdCharts:ut,tableFilter:Be,totalAccepted:Re,totalRejected:Ve,totalManualRejected:ze,totalThresholdRejected:W,activeThresholds:ye,allExposuresByIdx:Se,plotAxisX:Nt,plotAxisY:Je,chartType:Rt,nbinsx:jt,tabulatorTable:pt,micrographsViewMode:Ot,showGridDetails:Jt,filteredExposures:Qt,previewThumbHeight:Z,previewThumbWidth:b,getThumbnailSize:Qe,getFieldsAndThresholds:se,getFilteredExposures:Bt,getCurationData:async(m,u)=>{var v;f.set(!0);try{const q=performance.now(),we=Le.interactive.call(E(o),E(l),"get_interactive_info",{}),Ze=Mn(`/api/actions/interactive/exposures?projectUid=${m}&jobUid=${u}`),[Oe,Ge]=await Promise.all([we,Ze]),{data:Lt=[]}=Ge;(Oe==null?void 0:Oe.use_denoised)&&G.set(Oe.use_denoised),P.set(Oe),B.set(Lt),M.set((v=Lt==null?void 0:Lt.length)!=null?v:0),f.set(!1);const ln=performance.now();console.info(`getCurationData took (${ln-q}) milliseconds.`)}catch(q){ft("getCurationData",`Could not get interactive information or exposures to setup job: ${q.message}`)}},getAvailable:Ue,getIndividualData:sn,getThumbnailUrl:st,getMicImage:Fe,setMicrograph:on,toggleUseDenoised:nn,modifyOne:Ce,handleThresholdChange:x,handleClearThreshold:Zt,shutdown:async()=>{try{await Le.interactive.call(E(o),E(l),"shutdown_interactive",{})}catch{ft("shutdown","Could not complete job.")}},handleModifyManualReject:m=>{var q,we,Ze,Oe;const u=(we=m==null?void 0:m.uid)!=null?we:(q=E(_e))==null?void 0:q.uid,v=!((Oe=m==null?void 0:m.manual_reject)!=null?Oe:(Ze=E(_e))==null?void 0:Ze.manual_reject);!u||Ce(u,v)}}};function Nr(r,e,t){const n=r.slice();return n[12]=e[t],n[14]=t,n}function Ur(r){let e,t;return{c(){e=I("p"),t=ue("No Thresholds Set"),this.h()},l(n){e=S(n,"P",{class:!0});var o=R(e);t=fe(o,"No Thresholds Set"),o.forEach(h),this.h()},h(){_(e,"class","font-medium whitespace-nowrap")},m(n,o){ne(n,e,o),g(e,t)},p:Ie,d(n){n&&h(e)}}}function Vr(r){var C,j,Y,y,k,V,P,X;let e,t,n=r[12].title+"",o,l,s,i,a,d=((y=(C=r[12])==null?void 0:C.min)==null?void 0:y.toFixed((Y=(j=r[12])==null?void 0:j.round)!=null?Y:0))+"",c,f,p=((X=(k=r[12])==null?void 0:k.max)==null?void 0:X.toFixed((P=(V=r[12])==null?void 0:V.round)!=null?P:0))+"",w,N;return{c(){e=I("div"),t=I("p"),o=ue(n),l=ue(":"),s=$(),i=I("span"),a=ue("Min: "),c=ue(d),f=ue(" \u2192 Max: "),w=ue(p),N=$(),this.h()},l(T){e=S(T,"DIV",{class:!0});var U=R(e);t=S(U,"P",{class:!0});var J=R(t);o=fe(J,n),l=fe(J,":"),J.forEach(h),s=ee(U),i=S(U,"SPAN",{class:!0});var H=R(i);a=fe(H,"Min: "),c=fe(H,d),f=fe(H," \u2192 Max: "),w=fe(H,p),H.forEach(h),N=ee(U),U.forEach(h),this.h()},h(){_(t,"class","font-medium"),_(i,"class","inline-flex items-center px-2 py-0.5 ml-2 rounded-full font-medium leading-4 bg-orange-100 text-orange-800"),_(e,"class","flex justify-between items-center whitespace-nowrap"),$e(e,"mt-2",r[14]>0)},m(T,U){ne(T,e,U),g(e,t),g(t,o),g(t,l),g(e,s),g(e,i),g(i,a),g(i,c),g(i,f),g(i,w),g(e,N)},p(T,U){var J,H,O,A,L,G,Q,Z;U&32&&n!==(n=T[12].title+"")&&et(o,n),U&32&&d!==(d=((A=(J=T[12])==null?void 0:J.min)==null?void 0:A.toFixed((O=(H=T[12])==null?void 0:H.round)!=null?O:0))+"")&&et(c,d),U&32&&p!==(p=((Z=(L=T[12])==null?void 0:L.max)==null?void 0:Z.toFixed((Q=(G=T[12])==null?void 0:G.round)!=null?Q:0))+"")&&et(w,p)},d(T){T&&h(e)}}}function ko(r){let e,t,n,o,l,s,i,a,d=It(r[0])+"",c,f,p,w,N,C,j,Y,y,k=It(r[1])+"",V,P,X,T,U,J,H,O,A,L=It(r[2])+"",G,Q,Z,b,M,B,D,F,oe,te,Re,Ve,ze,W,ye,Se,Me,Te,yt,Ke,Ye=It(r[5].length)+"",ct,qe,pe,xe;n=new rt({props:{src:Bn,size:4,modifier:"mr-1.5 text-green-700"}}),w=new rt({props:{src:Hn,size:4,modifier:"mr-1.5 text-teal-700"}}),T=new rt({props:{src:Xt,size:4,modifier:"mr-1.5 text-orange-700"}}),ye=new rt({props:{src:Nn,size:4,modifier:"mr-1.5 text-purple-700"}});let Ee=r[5],ie=[];for(let re=0;re<Ee.length;re+=1)ie[re]=Vr(Nr(r,Ee,re));let ae=null;return Ee.length||(ae=Ur()),{c(){e=I("div"),t=I("div"),de(n.$$.fragment),o=$(),l=I("p"),s=ue("Total:"),i=$(),a=I("p"),c=ue(d),f=$(),p=I("div"),de(w.$$.fragment),N=$(),C=I("p"),j=ue("Accepted:"),Y=$(),y=I("p"),V=ue(k),P=$(),X=I("div"),de(T.$$.fragment),U=$(),J=I("p"),H=ue("Rejected:"),O=$(),A=I("p"),G=ue(L),Q=$(),Z=I("div"),b=I("p"),M=ue("Threshold Rejected: "),B=I("span"),D=ue(r[3]),F=$(),oe=I("p"),te=ue("Manual Rejected: "),Re=I("span"),Ve=ue(r[4]),ze=$(),W=I("div"),de(ye.$$.fragment),Se=$(),Me=I("p"),Te=ue("Thresholds:"),yt=$(),Ke=I("p"),ct=ue(Ye),qe=$(),pe=I("div");for(let re=0;re<ie.length;re+=1)ie[re].c();ae&&ae.c(),this.h()},l(re){e=S(re,"DIV",{class:!0});var _e=R(e);t=S(_e,"DIV",{class:!0});var ce=R(t);me(n.$$.fragment,ce),o=ee(ce),l=S(ce,"P",{class:!0});var He=R(l);s=fe(He,"Total:"),He.forEach(h),i=ee(ce),a=S(ce,"P",{class:!0});var Et=R(a);c=fe(Et,d),Et.forEach(h),ce.forEach(h),f=ee(_e),p=S(_e,"DIV",{class:!0});var nt=R(p);me(w.$$.fragment,nt),N=ee(nt),C=S(nt,"P",{class:!0});var ht=R(C);j=fe(ht,"Accepted:"),ht.forEach(h),Y=ee(nt),y=S(nt,"P",{class:!0});var St=R(y);V=fe(St,k),St.forEach(h),nt.forEach(h),P=ee(_e),X=S(_e,"DIV",{class:!0});var Xe=R(X);me(T.$$.fragment,Xe),U=ee(Xe),J=S(Xe,"P",{class:!0});var Ct=R(J);H=fe(Ct,"Rejected:"),Ct.forEach(h),O=ee(Xe),A=S(Xe,"P",{class:!0});var Pt=R(A);G=fe(Pt,L),Pt.forEach(h),Q=ee(Xe),Z=S(Xe,"DIV",{class:!0});var ot=R(Z);b=S(ot,"P",{class:!0});var Be=R(b);M=fe(Be,"Threshold Rejected: "),B=S(Be,"SPAN",{class:!0});var gt=R(B);D=fe(gt,r[3]),gt.forEach(h),Be.forEach(h),F=ee(ot),oe=S(ot,"P",{class:!0});var ut=R(oe);te=fe(ut,"Manual Rejected: "),Re=S(ut,"SPAN",{class:!0});var Nt=R(Re);Ve=fe(Nt,r[4]),Nt.forEach(h),ut.forEach(h),ot.forEach(h),Xe.forEach(h),ze=ee(_e),W=S(_e,"DIV",{class:!0});var Je=R(W);me(ye.$$.fragment,Je),Se=ee(Je),Me=S(Je,"P",{class:!0});var Rt=R(Me);Te=fe(Rt,"Thresholds:"),Rt.forEach(h),yt=ee(Je),Ke=S(Je,"P",{class:!0});var jt=R(Ke);ct=fe(jt,Ye),jt.forEach(h),qe=ee(Je),pe=S(Je,"DIV",{class:!0});var Mt=R(pe);for(let pt=0;pt<ie.length;pt+=1)ie[pt].l(Mt);ae&&ae.l(Mt),Mt.forEach(h),Je.forEach(h),_e.forEach(h),this.h()},h(){_(l,"class","text-green-700 font-medium"),_(a,"class","ml-1 font-semibold text-green-700"),_(t,"class","relative inline-flex items-center py-1 px-2 rounded-full leading-4 bg-green-100"),_(C,"class","text-teal-700 font-medium"),_(y,"class","ml-1 font-semibold text-teal-700"),_(p,"class","relative inline-flex items-center py-1 px-2 rounded-full leading-4 bg-teal-100"),_(J,"class","text-orange-700 font-medium"),_(A,"class","ml-1 font-semibold text-orange-700"),_(B,"class","text-white"),_(b,"class","text-gray-200 font-medium whitespace-nowrap"),_(Re,"class","text-white"),_(oe,"class","text-gray-200 font-medium whitespace-nowrap"),_(Z,"class","item-context-menu absolute left-0 py-1 px-2 z-30 text-white rounded-md bg-gray-700 shadow-lg opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto transition ease-in-out duration-150 svelte-1fgw87g"),_(X,"class","relative inline-flex items-center py-1 px-2 rounded-full leading-4 bg-orange-100 group cursor-help"),_(Me,"class","text-purple-700 font-medium"),_(Ke,"class","ml-1 font-semibold text-purple-700"),_(pe,"class","item-context-menu absolute py-1 pl-2 pr-1 z-30 text-white rounded-md bg-gray-700 shadow-lg opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto transition ease-in-out duration-150 svelte-1fgw87g"),_(W,"class","relative inline-flex items-center py-1 px-2 rounded-full leading-4 bg-purple-100 group cursor-help"),_(e,"class","flex flex-wrap items-center gap-x-2 gap-y-1 h-full text-xs")},m(re,_e){ne(re,e,_e),g(e,t),he(n,t,null),g(t,o),g(t,l),g(l,s),g(t,i),g(t,a),g(a,c),g(e,f),g(e,p),he(w,p,null),g(p,N),g(p,C),g(C,j),g(p,Y),g(p,y),g(y,V),g(e,P),g(e,X),he(T,X,null),g(X,U),g(X,J),g(J,H),g(X,O),g(X,A),g(A,G),g(X,Q),g(X,Z),g(Z,b),g(b,M),g(b,B),g(B,D),g(Z,F),g(Z,oe),g(oe,te),g(oe,Re),g(Re,Ve),g(e,ze),g(e,W),he(ye,W,null),g(W,Se),g(W,Me),g(Me,Te),g(W,yt),g(W,Ke),g(Ke,ct),g(W,qe),g(W,pe);for(let ce=0;ce<ie.length;ce+=1)ie[ce].m(pe,null);ae&&ae.m(pe,null),xe=!0},p(re,[_e]){if((!xe||_e&1)&&d!==(d=It(re[0])+"")&&et(c,d),(!xe||_e&2)&&k!==(k=It(re[1])+"")&&et(V,k),(!xe||_e&4)&&L!==(L=It(re[2])+"")&&et(G,L),(!xe||_e&8)&&et(D,re[3]),(!xe||_e&16)&&et(Ve,re[4]),(!xe||_e&32)&&Ye!==(Ye=It(re[5].length)+"")&&et(ct,Ye),_e&32){Ee=re[5];let ce;for(ce=0;ce<Ee.length;ce+=1){const He=Nr(re,Ee,ce);ie[ce]?ie[ce].p(He,_e):(ie[ce]=Vr(He),ie[ce].c(),ie[ce].m(pe,null))}for(;ce<ie.length;ce+=1)ie[ce].d(1);ie.length=Ee.length,!Ee.length&&ae?ae.p(re,_e):Ee.length?ae&&(ae.d(1),ae=null):(ae=Ur(),ae.c(),ae.m(pe,null))}},i(re){xe||(z(n.$$.fragment,re),z(w.$$.fragment,re),z(T.$$.fragment,re),z(ye.$$.fragment,re),xe=!0)},o(re){K(n.$$.fragment,re),K(w.$$.fragment,re),K(T.$$.fragment,re),K(ye.$$.fragment,re),xe=!1},d(re){re&&h(e),ge(n),ge(w),ge(T),ge(ye),gr(ie,re),ae&&ae.d()}}}function Io(r,e,t){let n,o,l,s,i,a;const{numMicsTotal:d,totalAccepted:c,totalRejected:f,totalManualRejected:p,totalThresholdRejected:w,activeThresholds:N}=vt("exposureCurationData");return le(r,d,C=>t(0,n=C)),le(r,c,C=>t(1,o=C)),le(r,f,C=>t(2,l=C)),le(r,p,C=>t(4,i=C)),le(r,w,C=>t(3,s=C)),le(r,N,C=>t(5,a=C)),[n,o,l,s,i,a,d,c,f,p,w,N]}class So extends lt{constructor(e){super();it(this,e,Io,ko,at,{})}}function Co(r){let e,t,n,o,l,s,i,a,d,c,f,p,w,N;return{c(){e=I("div"),t=I("button"),n=ue("Thresholds"),l=$(),s=I("button"),i=ue("Micrograph"),d=$(),c=I("button"),f=ue("Diagnostics"),this.h()},l(C){e=S(C,"DIV",{class:!0});var j=R(e);t=S(j,"BUTTON",{type:!0,class:!0});var Y=R(t);n=fe(Y,"Thresholds"),Y.forEach(h),l=ee(j),s=S(j,"BUTTON",{type:!0,class:!0});var y=R(s);i=fe(y,"Micrograph"),y.forEach(h),d=ee(j),c=S(j,"BUTTON",{type:!0,class:!0});var k=R(c);f=fe(k,"Diagnostics"),k.forEach(h),j.forEach(h),this.h()},h(){_(t,"type","button"),_(t,"class",o=""+(r[2].base+" "+(r[1]===Ae.thresholds?r[2].active:r[2].default))),_(s,"type","button"),_(s,"class",a=""+(r[2].base+" "+(r[1]===Ae.micrograph?r[2].active:r[2].default))),_(c,"type","button"),_(c,"class",p=""+(r[2].base+" "+(r[1]===Ae.individual?r[2].active:r[2].default)+" mr-0")),_(e,"class","inline-flex p-0.5 border border-gray-300 bg-white rounded-md text-xs")},m(C,j){ne(C,e,j),g(e,t),g(t,n),g(e,l),g(e,s),g(s,i),g(e,d),g(e,c),g(c,f),w||(N=[je(t,"click",r[3]),je(s,"click",r[4]),je(c,"click",r[5])],w=!0)},p(C,[j]){j&2&&o!==(o=""+(C[2].base+" "+(C[1]===Ae.thresholds?C[2].active:C[2].default)))&&_(t,"class",o),j&2&&a!==(a=""+(C[2].base+" "+(C[1]===Ae.micrograph?C[2].active:C[2].default)))&&_(s,"class",a),j&2&&p!==(p=""+(C[2].base+" "+(C[1]===Ae.individual?C[2].active:C[2].default)+" mr-0"))&&_(c,"class",p)},i:Ie,o:Ie,d(C){C&&h(e),w=!1,Ft(N)}}}function Ro(r,e,t){let n,o=Ie,l=()=>(o(),o=bn(s,f=>t(1,n=f)),s);r.$$.on_destroy.push(()=>o());let{selectedView:s}=e;l();const i={base:"px-2 py-1 mr-1 text-gray-600 font-medium rounded focus:outline-none focus:ring-2 focus:ring-offset focus:ring-blue-500",active:"text-white bg-blue-600 hover:bg-blue-700",default:"hover:bg-gray-100"},a=()=>{er(s,n=Ae.thresholds,n)},d=()=>{er(s,n=Ae.micrograph,n)},c=()=>{er(s,n=Ae.individual,n)};return r.$$set=f=>{"selectedView"in f&&l(t(0,s=f.selectedView))},[s,n,i,a,d,c]}class jo extends lt{constructor(e){super();it(this,e,Ro,Co,at,{selectedView:0})}}function Mo(r){let e,t;return{c(){e=I("span"),t=ue("Individual"),this.h()},l(n){e=S(n,"SPAN",{class:!0});var o=R(e);t=fe(o,"Individual"),o.forEach(h),this.h()},h(){_(e,"class","font-bold")},m(n,o){ne(n,e,o),g(e,t)},p:Ie,d(n){n&&h(e)}}}function Do(r){let e,t,n,o;return{c(){e=I("span"),t=ue("Current:"),n=$(),o=ue(r[4]),this.h()},l(l){e=S(l,"SPAN",{class:!0});var s=R(e);t=fe(s,"Current:"),s.forEach(h),n=ee(l),o=fe(l,r[4]),this.h()},h(){_(e,"class","font-bold")},m(l,s){ne(l,e,s),g(e,t),ne(l,n,s),ne(l,o,s)},p(l,s){s&16&&et(o,l[4])},d(l){l&&h(e),l&&h(n),l&&h(o)}}}function Ao(r){let e,t,n,o,l,s;return t=new rt({props:{src:Xt,size:4}}),{c(){e=I("span"),de(t.$$.fragment),n=$(),o=I("span"),l=ue("Reject"),this.h()},l(i){e=S(i,"SPAN",{class:!0});var a=R(e);me(t.$$.fragment,a),a.forEach(h),n=ee(i),o=S(i,"SPAN",{class:!0});var d=R(o);l=fe(d,"Reject"),d.forEach(h),this.h()},h(){_(e,"class","flex-grow"),_(o,"class","font-medium ml-1")},m(i,a){ne(i,e,a),he(t,e,null),ne(i,n,a),ne(i,o,a),g(o,l),s=!0},p:Ie,i(i){s||(z(t.$$.fragment,i),s=!0)},o(i){K(t.$$.fragment,i),s=!1},d(i){i&&h(e),ge(t),i&&h(n),i&&h(o)}}}function Po(r){let e,t,n,o,l,s;return t=new rt({props:{src:Sr,size:4}}),{c(){e=I("span"),de(t.$$.fragment),n=$(),o=I("span"),l=ue("Accept"),this.h()},l(i){e=S(i,"SPAN",{class:!0});var a=R(e);me(t.$$.fragment,a),a.forEach(h),n=ee(i),o=S(i,"SPAN",{class:!0});var d=R(o);l=fe(d,"Accept"),d.forEach(h),this.h()},h(){_(e,"class","flex-grow"),_(o,"class","font-medium ml-1")},m(i,a){ne(i,e,a),he(t,e,null),ne(i,n,a),ne(i,o,a),g(o,l),s=!0},p:Ie,i(i){s||(z(t.$$.fragment,i),s=!0)},o(i){K(t.$$.fragment,i),s=!1},d(i){i&&h(e),ge(t),i&&h(n),i&&h(o)}}}function No(r){let e,t,n,o,l,s,i,a,d,c,f,p,w,N,C,j,Y,y,k,V,P,X,T,U,J,H;n=new jo({props:{selectedView:r[7]}}),a=new rt({props:{src:Wn,size:4}}),p=new rt({props:{src:Kn,size:4}});function O(b,M){return b[4]?Do:Mo}let A=O(r),L=A(r);const G=[Po,Ao],Q=[];function Z(b,M){var B;return((B=b[0])==null?void 0:B.manual_reject)?0:1}return k=Z(r),V=Q[k]=G[k](r),{c(){e=I("div"),t=I("div"),de(n.$$.fragment),o=$(),l=I("div"),s=I("span"),i=I("button"),de(a.$$.fragment),c=$(),f=I("button"),de(p.$$.fragment),N=$(),C=I("div"),j=I("div"),L.c(),Y=$(),y=I("button"),V.c(),this.h()},l(b){e=S(b,"DIV",{class:!0});var M=R(e);t=S(M,"DIV",{class:!0});var B=R(t);me(n.$$.fragment,B),o=ee(B),l=S(B,"DIV",{class:!0});var D=R(l);s=S(D,"SPAN",{class:!0});var F=R(s);i=S(F,"BUTTON",{type:!0,class:!0});var oe=R(i);me(a.$$.fragment,oe),oe.forEach(h),c=ee(F),f=S(F,"BUTTON",{type:!0,class:!0});var te=R(f);me(p.$$.fragment,te),te.forEach(h),F.forEach(h),D.forEach(h),N=ee(B),C=S(B,"DIV",{class:!0});var Re=R(C);j=S(Re,"DIV",{class:!0});var Ve=R(j);L.l(Ve),Ve.forEach(h),Y=ee(Re),y=S(Re,"BUTTON",{class:!0});var ze=R(y);V.l(ze),ze.forEach(h),Re.forEach(h),B.forEach(h),M.forEach(h),this.h()},h(){_(i,"type","button"),_(i,"class","relative inline-flex items-center py-1.5 px-2 rounded-l-md border text-xs leading-4 font-medium bg-white focus:z-10 focus:outline-none transition ease-in-out duration-150"),i.disabled=d=!r[0]||!r[1],$e(i,"opacity-50",!r[0]||!r[1]),_(f,"type","button"),_(f,"class","-ml-px relative inline-flex items-center py-1.5 px-2 rounded-r-md border text-xs leading-4 font-medium bg-white focus:z-10 focus:outline-none transition ease-in-out duration-150"),f.disabled=w=!r[0]||!r[2],$e(f,"opacity-50",!r[0]||!r[2]),_(s,"class","relative z-0 inline-flex shadow-sm rounded-md"),_(l,"class","flex items-center space-x-2 space-x-reverse"),_(j,"class","relative inline-block py-1.5 px-2 rounded-l border border-gray-300 bg-white text-xs leading-4 font-medium text-gray-700 select-none"),_(y,"class",P=""+(r[3]+" relative flex justify-center py-1.5 px-2 rounded-r border border-l-0 border-gray-300 bg-white text-xs leading-4 font-medium text-gray-700 cursor-pointer hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150")),y.disabled=X=!r[0],_(C,"class","inline-flex"),$e(C,"opacity-50",!r[0]),_(t,"class","flex flex-wrap gap-x-2 gap-y-1 items-start justify-between px-2"),_(e,"class","flex-shrink-0 w-full py-2 whitespace-nowrap bg-gray-100 border-b border-gray-200 z-10")},m(b,M){var B;ne(b,e,M),g(e,t),he(n,t,null),g(t,o),g(t,l),g(l,s),g(s,i),he(a,i,null),g(s,c),g(s,f),he(p,f,null),g(t,N),g(t,C),g(C,j),L.m(j,null),g(C,Y),g(C,y),Q[k].m(y,null),U=!0,J||(H=[je(i,"click",r[14]),je(f,"click",r[15]),je(y,"click",r[12]),Ut(T=Vt.call(null,y,{content:((B=r[0])==null?void 0:B.manual_reject)?"Manually accept exposure":"Manually reject exposure"}))],J=!0)},p(b,[M]){var D;(!U||M&3&&d!==(d=!b[0]||!b[1]))&&(i.disabled=d),M&3&&$e(i,"opacity-50",!b[0]||!b[1]),(!U||M&5&&w!==(w=!b[0]||!b[2]))&&(f.disabled=w),M&5&&$e(f,"opacity-50",!b[0]||!b[2]),A===(A=O(b))&&L?L.p(b,M):(L.d(1),L=A(b),L&&(L.c(),L.m(j,null)));let B=k;k=Z(b),k===B?Q[k].p(b,M):(dt(),K(Q[B],1,1,()=>{Q[B]=null}),mt(),V=Q[k],V?V.p(b,M):(V=Q[k]=G[k](b),V.c()),z(V,1),V.m(y,null)),(!U||M&8&&P!==(P=""+(b[3]+" relative flex justify-center py-1.5 px-2 rounded-r border border-l-0 border-gray-300 bg-white text-xs leading-4 font-medium text-gray-700 cursor-pointer hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150")))&&_(y,"class",P),(!U||M&1&&X!==(X=!b[0]))&&(y.disabled=X),T&&pr(T.update)&&M&1&&T.update.call(null,{content:((D=b[0])==null?void 0:D.manual_reject)?"Manually accept exposure":"Manually reject exposure"}),M&1&&$e(C,"opacity-50",!b[0])},i(b){U||(z(n.$$.fragment,b),z(a.$$.fragment,b),z(p.$$.fragment,b),z(V),U=!0)},o(b){K(n.$$.fragment,b),K(a.$$.fragment,b),K(p.$$.fragment,b),K(V),U=!1},d(b){b&&h(e),ge(n),ge(a),ge(p),L.d(),Q[k].d(),J=!1,Ft(H)}}}function Uo(r,e,t){let n,o,l,s,i,a,d,c;const{filteredExposures:f,tabulatorTable:p,selectedView:w,micrographsViewMode:N,selectedMicUid:C,selectedMicrograph:j,modifyOne:Y,setMicrograph:y}=vt("exposureCurationData");le(r,f,H=>t(19,a=H)),le(r,p,H=>t(18,i=H)),le(r,N,H=>t(13,c=H)),le(r,C,H=>t(4,d=H)),le(r,j,H=>t(0,s=H));let k=!0,V=!0;const P=H=>{var O;if(n&&typeof d=="number"){const A=a.findIndex(Q=>Q.idx===d),L=H==="next"?A+1:A-1;if(L<0||L>a.length-1)return;const G=a[L];y(G.idx)}if(o&&!!i){const[A]=(O=i==null?void 0:i.getSelectedRows())!=null?O:[],L=H==="next"?A==null?void 0:A.getNextRow():A==null?void 0:A.getPrevRow();H==="prev"&&!L?t(1,k=!1):t(1,k=!0),H==="next"&&!L?t(2,V=!1):t(2,V=!0),A&&L&&(i==null||i.deselectRow(A),i==null||i.selectRow([L]),i==null||i.scrollToRow(L.getData().idx,"center",!1),y(L.getData().idx))}},X=()=>{const H=!(s==null?void 0:s.manual_reject);(s==null?void 0:s.uid)?Y(s==null?void 0:s.uid,H):rr("No selected micrograph uid supplied: ",s==null?void 0:s.uid)},T={default:"border-gray-300 bg-white text-gray-600 hover:text-gray-500 focus-visible:border-blue-300 focus-visible:shadow-outline-blue active:bg-gray-100 active:text-gray-700",rejectedActive:"bg-white text-teal-600 hover:text-teal-500 z-10 focus-visible:shadow-outline-blue active:bg-teal-100 active:text-teal-700",acceptedActive:"bg-white text-orange-600 hover:text-orange-500 z-10 focus-visible:shadow-outline-blue active:bg-orange-100 active:text-orange-700"},U=()=>P("prev"),J=()=>P("next");return r.$$.update=()=>{r.$$.dirty&8192&&(n=c===tt.grid),r.$$.dirty&8192&&(o=c===tt.table),r.$$.dirty&1&&t(3,l=s?(s==null?void 0:s.manual_reject)?T.rejectedActive:T.acceptedActive:T.default)},[s,k,V,l,d,f,p,w,N,C,j,P,X,c,U,J]}class Vo extends lt{constructor(e){super();it(this,e,Uo,No,at,{})}}function Or(r,e,t){const n=r.slice();return n[25]=e[t],n}function Lr(r){let e,t,n,o,l,s,i,a;function d(f){r[15](f)}let c={};return r[4]!==void 0&&(c.value=r[4]),s=new qn({props:c}),bt.push(()=>Kt(s,"value",d)),{c(){e=I("div"),t=I("label"),n=ue("Details"),o=$(),l=I("div"),de(s.$$.fragment),this.h()},l(f){e=S(f,"DIV",{class:!0});var p=R(e);t=S(p,"LABEL",{for:!0,class:!0});var w=R(t);n=fe(w,"Details"),w.forEach(h),o=ee(p),l=S(p,"DIV",{class:!0});var N=R(l);me(s.$$.fragment,N),N.forEach(h),p.forEach(h),this.h()},h(){_(t,"for","x-axis"),_(t,"class","inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-xs"),_(l,"class","-ml-px relative inline-flex items-center px-2.5 rounded-r-md border text-xs leading-4 font-medium transition ease-in-out duration-150 border-gray-300 bg-white text-gray-700"),_(e,"class","inline-flex")},m(f,p){ne(f,e,p),g(e,t),g(t,n),g(e,o),g(e,l),he(s,l,null),a=!0},p(f,p){const w={};!i&&p&16&&(i=!0,w.value=f[4],Wt(()=>i=!1)),s.$set(w)},i(f){a||(z(s.$$.fragment,f),a=!0)},o(f){K(s.$$.fragment,f),a=!1},d(f){f&&h(e),ge(s)}}}function Fr(r){let e,t=xr[r[25]]+"",n,o,l;return{c(){e=I("option"),n=ue(t),o=$(),this.h()},l(s){e=S(s,"OPTION",{});var i=R(e);n=fe(i,t),o=ee(i),i.forEach(h),this.h()},h(){e.__value=l=r[25],e.value=e.__value},m(s,i){ne(s,e,i),g(e,n),g(e,o)},p(s,i){i&8&&t!==(t=xr[s[25]]+"")&&et(n,t),i&8&&l!==(l=s[25])&&(e.__value=l,e.value=e.__value)},d(s){s&&h(e)}}}function Gr(r){let e,t,n,o,l,s,i;return n=new rt({props:{src:Yn}}),{c(){e=I("span"),t=I("button"),de(n.$$.fragment),this.h()},l(a){e=S(a,"SPAN",{class:!0});var d=R(e);t=S(d,"BUTTON",{type:!0,class:!0});var c=R(t);me(n.$$.fragment,c),c.forEach(h),d.forEach(h),this.h()},h(){_(t,"type","button"),_(t,"class","inline-flex items-center px-1 py-1 border border-gray-300 text-xs leading-4 font-medium rounded-md shadow-sm text-gray-500 bg-white hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 active:text-gray-800 active:bg-gray-50 transition ease-in-out duration-150"),_(e,"class","inline-flex rounded-md")},m(a,d){ne(a,e,d),g(e,t),he(n,t,null),l=!0,s||(i=[Ut(o=Vt.call(null,t,{content:"Download table csv"})),je(t,"click",r[12])],s=!0)},p:Ie,i(a){l||(z(n.$$.fragment,a),l=!0)},o(a){K(n.$$.fragment,a),l=!1},d(a){a&&h(e),ge(n),s=!1,Ft(i)}}}function Oo(r){let e,t,n,o,l,s,i,a,d,c,f,p,w,N,C,j,Y,y,k,V,P,X,T,U,J,H,O,A,L,G=r[2]&&Lr(r);c=new Xn({});let Q=r[3],Z=[];for(let M=0;M<Q.length;M+=1)Z[M]=Fr(Or(r,Q,M));let b=r[1]&&Gr(r);return P=new Jn({}),J=new Qn({}),{c(){e=I("div"),t=I("div"),n=I("div"),o=I("div"),l=ue("Micrographs"),s=$(),G&&G.c(),i=$(),a=I("div"),d=I("button"),de(c.$$.fragment),f=$(),p=I("div"),w=I("label"),N=ue("Filter"),C=$(),j=I("select");for(let M=0;M<Z.length;M+=1)Z[M].c();Y=$(),b&&b.c(),y=$(),k=I("div"),V=I("button"),de(P.$$.fragment),T=$(),U=I("button"),de(J.$$.fragment),this.h()},l(M){e=S(M,"DIV",{class:!0});var B=R(e);t=S(B,"DIV",{class:!0});var D=R(t);n=S(D,"DIV",{class:!0});var F=R(n);o=S(F,"DIV",{class:!0});var oe=R(o);l=fe(oe,"Micrographs"),oe.forEach(h),s=ee(F),G&&G.l(F),i=ee(F),a=S(F,"DIV",{class:!0});var te=R(a);d=S(te,"BUTTON",{type:!0,class:!0});var Re=R(d);me(c.$$.fragment,Re),Re.forEach(h),te.forEach(h),f=ee(F),p=S(F,"DIV",{class:!0});var Ve=R(p);w=S(Ve,"LABEL",{for:!0,class:!0});var ze=R(w);N=fe(ze,"Filter"),ze.forEach(h),C=ee(Ve),j=S(Ve,"SELECT",{id:!0,class:!0});var W=R(j);for(let Te=0;Te<Z.length;Te+=1)Z[Te].l(W);W.forEach(h),Ve.forEach(h),Y=ee(F),b&&b.l(F),y=ee(F),k=S(F,"DIV",{class:!0});var ye=R(k);V=S(ye,"BUTTON",{type:!0,class:!0});var Se=R(V);me(P.$$.fragment,Se),Se.forEach(h),T=ee(ye),U=S(ye,"BUTTON",{type:!0,class:!0});var Me=R(U);me(J.$$.fragment,Me),Me.forEach(h),ye.forEach(h),F.forEach(h),D.forEach(h),B.forEach(h),this.h()},h(){_(o,"class","inline-flex items-center mr-auto text-sm leading-4 font-medium text-gray-700"),_(d,"type","button"),_(d,"class","inline-flex items-center px-1 py-1 border border-gray-300 text-xs leading-4 font-medium rounded-md text-gray-500 bg-white hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 active:text-gray-800 active:bg-gray-50 transition ease-in-out duration-150"),_(a,"class","flex rounded-md shadow-sm"),_(w,"for","x-axis"),_(w,"class","inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-xs"),_(j,"id","x-axis"),_(j,"class","flex-1 block rounded-none rounded-r-md w-full pl-3 pr-8 py-0.5 text-xs leading-5 border-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),r[5]===void 0&&vn(()=>r[17].call(j)),_(p,"class","flex rounded-md shadow-sm"),_(V,"type","button"),_(V,"class",X="rounded-l "+r[6].base+" "+(r[0]===tt.table?r[6].active:r[6].default)),_(U,"type","button"),_(U,"class",H="-ml-px rounded-r "+r[6].base+" "+(r[0]===tt.grid?r[6].active:r[6].default)),_(k,"class","relative flex shadow-sm rounded"),_(n,"class","flex justify-end flex-wrap gap-y-1 gap-x-2 w-full"),_(t,"class","flex justify-between items-center px-2"),_(e,"class","w-full py-1.5 z-20 whitespace-nowrap bg-gray-100 border border-l-none border-gray-200")},m(M,B){ne(M,e,B),g(e,t),g(t,n),g(n,o),g(o,l),g(n,s),G&&G.m(n,null),g(n,i),g(n,a),g(a,d),he(c,d,null),g(n,f),g(n,p),g(p,w),g(w,N),g(p,C),g(p,j);for(let D=0;D<Z.length;D+=1)Z[D].m(j,null);_r(j,r[5]),g(n,Y),b&&b.m(n,null),g(n,y),g(n,k),g(k,V),he(P,V,null),g(k,T),g(k,U),he(J,U,null),O=!0,A||(L=[Ut(Vt.call(null,d,{content:"Scroll to selected row"})),je(d,"click",r[16]),je(j,"change",r[17]),Ut(Vt.call(null,V,{content:"Table view",modifier:"whitespace-nowrap"})),je(V,"click",r[18]),Ut(Vt.call(null,U,{content:"Card view",modifier:"whitespace-nowrap"})),je(U,"click",r[19])],A=!0)},p(M,[B]){if(M[2]?G?(G.p(M,B),B&4&&z(G,1)):(G=Lr(M),G.c(),z(G,1),G.m(n,i)):G&&(dt(),K(G,1,1,()=>{G=null}),mt()),B&8){Q=M[3];let D;for(D=0;D<Q.length;D+=1){const F=Or(M,Q,D);Z[D]?Z[D].p(F,B):(Z[D]=Fr(F),Z[D].c(),Z[D].m(j,null))}for(;D<Z.length;D+=1)Z[D].d(1);Z.length=Q.length}B&40&&_r(j,M[5]),M[1]?b?(b.p(M,B),B&2&&z(b,1)):(b=Gr(M),b.c(),z(b,1),b.m(n,y)):b&&(dt(),K(b,1,1,()=>{b=null}),mt()),(!O||B&1&&X!==(X="rounded-l "+M[6].base+" "+(M[0]===tt.table?M[6].active:M[6].default)))&&_(V,"class",X),(!O||B&1&&H!==(H="-ml-px rounded-r "+M[6].base+" "+(M[0]===tt.grid?M[6].active:M[6].default)))&&_(U,"class",H)},i(M){O||(z(G),z(c.$$.fragment,M),z(b),z(P.$$.fragment,M),z(J.$$.fragment,M),O=!0)},o(M){K(G),K(c.$$.fragment,M),K(b),K(P.$$.fragment,M),K(J.$$.fragment,M),O=!1},d(M){M&&h(e),G&&G.d(),ge(c),gr(Z,M),b&&b.d(),ge(P),ge(J),A=!1,Ft(L)}}}function Lo(r,e,t){let n,o,l,s,i,a,d,c,{scrollToGridItem:f}=e;const p={base:"relative inline-flex items-center px-1 py-0 border text-xs font-medium focus:z-10 focus:outline-none focus-visible:ring-1 focus-visible:ring-blue-500 focus-visible:border-blue-500 disabled:opacity-50 disabled:cursor-default",default:"border-gray-300 bg-white hover:bg-gray-50 text-gray-600",active:"border-blue-300 bg-blue-100 hover:bg-blue-200 text-blue-700"},{projectUid:w,jobUid:N}=vt("jobData"),{micrographsViewMode:C,tabulatorTable:j,tableFilter:Y,showGridDetails:y,selectedMicrograph:k}=vt("exposureCurationData");le(r,C,A=>t(0,a=A)),le(r,j,A=>t(21,i=A)),le(r,Y,A=>t(5,c=A)),le(r,y,A=>t(4,d=A)),le(r,k,A=>t(20,s=A));const V=()=>{!!i&&typeof(i==null?void 0:i.download)=="function"?i==null||i.download("csv",`${w}-${N}-${wn(new Date,"P-HH_mm_ss")}.csv`):tr("Table download function does not exist: ",j)},P=()=>!!i&&typeof(s==null?void 0:s.idx)=="number"&&(i==null?void 0:i.getRow(s.idx)),X=()=>{o&&(f==null||f()),l&&!!i&&P()&&(i==null||i.scrollToRow(s.idx,"center",!1))};function T(A){d=A,y.set(d)}const U=()=>X();function J(){c=yn(this),Y.set(c),t(3,n)}const H=()=>C.set(tt.table),O=()=>C.set(tt.grid);return r.$$set=A=>{"scrollToGridItem"in A&&t(14,f=A.scrollToGridItem)},r.$$.update=()=>{r.$$.dirty&1&&t(2,o=a===tt.grid),r.$$.dirty&1&&t(1,l=a===tt.table)},t(3,n=Object.keys(wt)),[a,l,o,n,d,c,p,C,j,Y,y,k,V,X,f,T,U,J,H,O]}class Fo extends lt{constructor(e){super();it(this,e,Lo,Oo,at,{scrollToGridItem:14})}}const{window:Go}=br;function zo(r){let e,t,n,o;return{c(){e=I("div"),t=I("div"),this.h()},l(l){e=S(l,"DIV",{class:!0});var s=R(e);t=S(s,"DIV",{id:!0}),R(t).forEach(h),s.forEach(h),this.h()},h(){_(t,"id","exposure-table"),_(e,"class","relative h-full min-h-[400px] border-r overflow-y-auto")},m(l,s){ne(l,e,s),g(e,t),r[13](t),n||(o=je(Go,"keyup",r[8]),n=!0)},p:Ie,i:Ie,o:Ie,d(l){l&&h(e),r[13](null),n=!1,o()}}}function Bo(r,e,t){let n,o,l,s,i,a,d;const{fields:c,formattedExposures:f,selectedMicrograph:p,selectedView:w,tableFilter:N,tabulatorTable:C,hoverAnchorNode:j,overviewHoverUid:Y,hasThumbnails:y,setMicrograph:k,getFilteredExposures:V,handleModifyManualReject:P}=vt("exposureCurationData");le(r,c,D=>t(10,n=D)),le(r,f,D=>t(18,d=D)),le(r,p,D=>t(11,o=D)),le(r,w,D=>t(17,a=D)),le(r,N,D=>t(12,l=D)),le(r,j,D=>t(16,i=D)),le(r,y,D=>t(15,s=D));let X=!1,T,U;const J=D=>{const F=T==null?void 0:T.getSelectedRows()[0],oe=D==="next"?F==null?void 0:F.getNextRow():F==null?void 0:F.getPrevRow();F&&oe&&(T==null||T.deselectRow(F),T==null||T.selectRow([oe]),T==null||T.scrollToRow(oe.getIndex(),"center",!1),k(oe.getIndex())),!F&&!oe&&(T==null||T.selectRow([0]),k(0)),a!==Ae.individual&&w.set(Ae.micrograph)},H=D=>{if(!(D.metaKey||D.ctrlKey||kr(D)))switch(D.preventDefault(),D.key){case At.r:P();break;case At.arrowDown:J("next");break;case At.arrowUp:J("prev");break}},O=(D,F,oe)=>{if(D.stopPropagation(),F.getField()!=="fname")return;const te=F.getData();oe.element.parentElement.classList.add("cell-copied"),oe.element.parentElement.setAttribute("data-text","Filename copied!"),ao.writeText(te.fname),setTimeout(()=>{oe.element.parentElement.classList.remove("cell-copied"),oe.element.parentElement.removeAttribute("data-text")},1200)},A=()=>!!T&&typeof(o==null?void 0:o.idx)=="number"&&(T==null?void 0:T.getRow(o.idx)),L=()=>{T.deselectRow(),T.selectRow([o.idx]),T.scrollToRow(o.idx,"center",!1)},G=()=>{A()&&L()},Q=()=>{A()&&!(T==null?void 0:T.getSelectedRows().some(D=>D.getIndex()===(o==null?void 0:o.idx)))&&L()},Z=()=>{!X||(T.replaceData(V(d,l)),G())},b=()=>n.sort((D,F)=>D.name==="idx"?-1:F.name==="idx"?1:0).map(D=>D.name==="idx"?{title:D.short,field:D.name,frozen:!0,formatter:F=>{const oe=d[F.getValue()];return(oe.manual_reject===!1||oe.threshold_reject===!1)&&(F.getElement().style.backgroundColor="#dcfce7"),(oe.manual_reject===!0||oe.threshold_reject===!0)&&(F.getElement().style.backgroundColor="#fee2e2"),F.getValue()}}:D.name==="fname"?{title:D.short,field:D.name,formatter:F=>(F.getElement().classList.add("hover:border","hover:border-blue-500"),F.getValue())}:{title:D.short,field:D.name}),M=()=>{const D=b();Cr.registerModule([Zn,$n,eo,to,ro,no,oo,so,lo,io]),T=new Cr(U,{data:V(d,l),columns:D,reactiveData:!0,movableColumns:!0,selectable:1,height:"100%",layout:"fitDataFill",index:"idx"}),T.on("tableBuilt",()=>{G(),t(9,X=!0)}),T.on("rowClick",(F,oe)=>{k(oe.getIndex()),a!==Ae.individual&&w.set(Ae.micrograph)}),T.on("cellClick",(F,oe)=>O(F,oe,T)),s&&(T.on("rowMouseEnter",(F,oe)=>{typeof oe.getIndex()=="number"&&(i!==U&&j.set(U),Y.set(oe.getIndex()))}),T.on("rowMouseLeave",()=>{!s||Y.set(null)})),An&&(window._table=T),C.set(T)};mr(()=>{T==null||T.clearData(),T==null||T.destroy(),C.set(null),window._table&&delete window._table});function B(D){bt[D?"unshift":"push"](()=>{U=D,t(0,U)})}return r.$$.update=()=>{r.$$.dirty[0]&4096&&Z(),r.$$.dirty[0]&2048&&Q(),r.$$.dirty[0]&1537&&!X&&U&&(n==null?void 0:n.length)&&M()},[U,c,f,p,w,N,j,y,H,X,n,o,l,B]}class Ho extends lt{constructor(e){super();it(this,e,Bo,zo,at,{},null,[-1,-1])}}function zr(r){let e,t,n;return{c(){e=I("img"),this.h()},l(o){e=S(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){vr(e.src,t=r[4])||_(e,"src",t),_(e,"alt",n="Exposure "+r[0].idx+" thumbnail"),_(e,"class","rounded")},m(o,l){ne(o,e,l)},p(o,l){l&16&&!vr(e.src,t=o[4])&&_(e,"src",t),l&1&&n!==(n="Exposure "+o[0].idx+" thumbnail")&&_(e,"alt",n)},d(o){o&&h(e)}}}function Br(r){var i;let e,t=r[0].idx+"",n,o,l,s=((i=r[0])==null?void 0:i.df_avg)&&Hr(r);return{c(){e=I("div"),n=ue(t),o=$(),s&&s.c(),l=kt(),this.h()},l(a){e=S(a,"DIV",{class:!0});var d=R(e);n=fe(d,t),d.forEach(h),o=ee(a),s&&s.l(a),l=kt(),this.h()},h(){_(e,"class","absolute top-0.5 left-0.5 flex gap-x-1 py-px px-[0.3rem] text-2xs font-semibold rounded text-white bg-gray-900 bg-opacity-70")},m(a,d){ne(a,e,d),g(e,n),ne(a,o,d),s&&s.m(a,d),ne(a,l,d)},p(a,d){var c;d&1&&t!==(t=a[0].idx+"")&&et(n,t),((c=a[0])==null?void 0:c.df_avg)?s?s.p(a,d):(s=Hr(a),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null)},d(a){a&&h(e),a&&h(o),s&&s.d(a),a&&h(l)}}}function Hr(r){let e,t=r[15](r[0])+"",n;return{c(){e=I("div"),n=ue(t),this.h()},l(o){e=S(o,"DIV",{class:!0});var l=R(e);n=fe(l,t),l.forEach(h),this.h()},h(){_(e,"class","absolute top-0.5 right-0.5 flex gap-x-1 py-px px-1 text-2xs rounded text-white bg-gray-900 bg-opacity-70")},m(o,l){ne(o,e,l),g(e,n)},p(o,l){l&1&&t!==(t=o[15](o[0])+"")&&et(n,t)},d(o){o&&h(e)}}}function Wr(r){let e,t,n,o;t=new rt({props:{src:Xt,size:4,modifier:"text-orange-400"}});let l=r[6]&&Kr();return{c(){e=I("div"),de(t.$$.fragment),n=$(),l&&l.c(),this.h()},l(s){e=S(s,"DIV",{class:!0});var i=R(e);me(t.$$.fragment,i),n=ee(i),l&&l.l(i),i.forEach(h),this.h()},h(){_(e,"class","absolute bottom-0.5 right-0.5 inline-flex items-center p-0.5 rounded-md bg-gray-900 bg-opacity-80")},m(s,i){ne(s,e,i),he(t,e,null),g(e,n),l&&l.m(e,null),o=!0},p(s,i){s[6]?l||(l=Kr(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(s){o||(z(t.$$.fragment,s),o=!0)},o(s){K(t.$$.fragment,s),o=!1},d(s){s&&h(e),ge(t),l&&l.d()}}}function Kr(r){let e,t;return{c(){e=I("span"),t=ue("M"),this.h()},l(n){e=S(n,"SPAN",{class:!0});var o=R(e);t=fe(o,"M"),o.forEach(h),this.h()},h(){_(e,"class","mx-0.5 inline-flex items-center text-xs font-medium leading-4 text-orange-400")},m(n,o){ne(n,e,o),g(e,t)},d(n){n&&h(e)}}}function Wo(r){let e,t,n,o,l;return e=new rt({props:{src:Xt,size:4,modifier:"text-orange-400"}}),{c(){de(e.$$.fragment),t=$(),n=I("span"),o=ue("Reject"),this.h()},l(s){me(e.$$.fragment,s),t=ee(s),n=S(s,"SPAN",{class:!0});var i=R(n);o=fe(i,"Reject"),i.forEach(h),this.h()},h(){_(n,"class","font-medium text-orange-400")},m(s,i){he(e,s,i),ne(s,t,i),ne(s,n,i),g(n,o),l=!0},p:Ie,i(s){l||(z(e.$$.fragment,s),l=!0)},o(s){K(e.$$.fragment,s),l=!1},d(s){ge(e,s),s&&h(t),s&&h(n)}}}function Ko(r){let e,t,n,o,l;return e=new rt({props:{src:Sr,size:4,modifier:"text-green-400"}}),{c(){de(e.$$.fragment),t=$(),n=I("span"),o=ue("Accept"),this.h()},l(s){me(e.$$.fragment,s),t=ee(s),n=S(s,"SPAN",{class:!0});var i=R(n);o=fe(i,"Accept"),i.forEach(h),this.h()},h(){_(n,"class","font-medium text-green-400")},m(s,i){he(e,s,i),ne(s,t,i),ne(s,n,i),g(n,o),l=!0},p:Ie,i(s){l||(z(e.$$.fragment,s),l=!0)},o(s){K(e.$$.fragment,s),l=!1},d(s){ge(e,s),s&&h(t),s&&h(n)}}}function Yo(r){let e,t,n,o,l,s,i,a,d,c,f,p=r[4]&&r[8]&&zr(r),w=r[9]&&Br(r),N=r[7]&&Wr(r);const C=[Ko,Wo],j=[];function Y(y,k){return y[6]?0:1}return s=Y(r),i=j[s]=C[s](r),{c(){e=I("button"),p&&p.c(),t=$(),w&&w.c(),n=$(),N&&N.c(),o=$(),l=I("button"),i.c(),this.h()},l(y){e=S(y,"BUTTON",{style:!0,id:!0,class:!0});var k=R(e);p&&p.l(k),t=ee(k),w&&w.l(k),n=ee(k),N&&N.l(k),o=ee(k),l=S(k,"BUTTON",{tabindex:!0,class:!0});var V=R(l);i.l(V),V.forEach(h),k.forEach(h),this.h()},h(){_(l,"tabindex","-1"),_(l,"class","absolute bottom-0.5 left-0.5 flex items-center gap-x-1 p-0.5 pr-1 rounded-md bg-gray-900 opacity-0 bg-opacity-80 group-hover:opacity-100 hover:bg-opacity-100"),Yt(e,"height",r[1]+"px"),Yt(e,"width",r[2]+"px"),_(e,"id",a="curation-exposure-"+r[0].idx),_(e,"class","group relative rounded text-xs bg-gray-500 shadow focus:outline-none focus:ring-2 focus:ring-blue-700 svelte-1h3glyc"),$e(e,"selected",r[5]),$e(e,"rejected",r[7])},m(y,k){ne(y,e,k),p&&p.m(e,null),g(e,t),w&&w.m(e,null),g(e,n),N&&N.m(e,null),g(e,o),g(e,l),j[s].m(l,null),r[24](e),d=!0,c||(f=[je(l,"click",En(r[23])),je(e,"mouseover",r[21]),je(e,"focus",r[22]),je(e,"mouseenter",r[17]),je(e,"mouseleave",r[18]),je(e,"click",r[16])],c=!0)},p(y,[k]){y[4]&&y[8]?p?p.p(y,k):(p=zr(y),p.c(),p.m(e,t)):p&&(p.d(1),p=null),y[9]?w?w.p(y,k):(w=Br(y),w.c(),w.m(e,n)):w&&(w.d(1),w=null),y[7]?N?(N.p(y,k),k&128&&z(N,1)):(N=Wr(y),N.c(),z(N,1),N.m(e,o)):N&&(dt(),K(N,1,1,()=>{N=null}),mt());let V=s;s=Y(y),s===V?j[s].p(y,k):(dt(),K(j[V],1,1,()=>{j[V]=null}),mt(),i=j[s],i?i.p(y,k):(i=j[s]=C[s](y),i.c()),z(i,1),i.m(l,null)),(!d||k&2)&&Yt(e,"height",y[1]+"px"),(!d||k&4)&&Yt(e,"width",y[2]+"px"),(!d||k&1&&a!==(a="curation-exposure-"+y[0].idx))&&_(e,"id",a),k&32&&$e(e,"selected",y[5]),k&128&&$e(e,"rejected",y[7])},i(y){d||(z(N),z(i),d=!0)},o(y){K(N),K(i),d=!1},d(y){y&&h(e),p&&p.d(),w&&w.d(),N&&N.d(),j[s].d(),r[24](null),c=!1,Ft(f)}}}function qo(r,e,t){let n,o,l,s,i,a,d;const{selectedView:c,selectedMicUid:f,overviewHoverUid:p,hasThumbnails:w,showGridDetails:N,getThumbnailUrl:C,setMicrograph:j,handleModifyManualReject:Y}=vt("exposureCurationData");le(r,c,b=>t(26,s=b)),le(r,f,b=>t(20,i=b)),le(r,w,b=>t(8,a=b)),le(r,N,b=>t(9,d=b));let{exposure:y}=e,{height:k}=e,{width:V}=e,{isScrolling:P}=e,X,T,U=null;const J=b=>typeof(b==null?void 0:b.df_avg)=="number"&&(b==null?void 0:b.df_avg)>0?`${((b==null?void 0:b.df_avg)/1e4).toFixed(2)} \u03BCm`:null,H=()=>{j(y.idx),s!==Ae.individual&&c.set(Ae.micrograph)},O=()=>{typeof y.idx=="number"&&p.set(y.idx)},A=()=>{p.set(null)};xn(()=>{y.uid!==X&&(t(4,U=C(y.idx)),X=y.uid)});function L(b){wr.call(this,r,b)}function G(b){wr.call(this,r,b)}const Q=()=>Y(y);function Z(b){bt[b?"unshift":"push"](()=>{T=b,t(3,T)})}return r.$$set=b=>{"exposure"in b&&t(0,y=b.exposure),"height"in b&&t(1,k=b.height),"width"in b&&t(2,V=b.width),"isScrolling"in b&&t(19,P=b.isScrolling)},r.$$.update=()=>{r.$$.dirty&1048577&&t(5,n=i===y.idx),r.$$.dirty&1&&t(7,o=(y==null?void 0:y.threshold_reject)===!0||(y==null?void 0:y.manual_reject)===!0),r.$$.dirty&1&&t(6,l=(y==null?void 0:y.manual_reject)===!0),r.$$.dirty&40&&n&&(T==null||T.focus()),r.$$.dirty&524305&&!U&&!P&&t(4,U=C(y.idx))},[y,k,V,T,U,n,l,o,a,d,c,f,w,N,Y,J,H,O,A,P,i,L,G,Q,Z]}class Xo extends lt{constructor(e){super();it(this,e,qo,Yo,at,{exposure:0,height:1,width:2,isScrolling:19})}}const{window:Jo}=br;function Yr(r,e,t){var s;const n=r.slice();n[41]=e[t];const o=n[41].rowIndex*n[6]+n[41].columnIndex;n[42]=o;const l=(s=n[9])==null?void 0:s[n[42]];return n[43]=l,n}function Qo(r){let e,t,n;return{c(){e=I("div"),t=I("span"),n=ue("Could not load exposures"),this.h()},l(o){e=S(o,"DIV",{class:!0});var l=R(e);t=S(l,"SPAN",{class:!0});var s=R(t);n=fe(s,"Could not load exposures"),s.forEach(h),l.forEach(h),this.h()},h(){_(t,"class","font-semibold"),_(e,"class","absolute-center inline-flex justify-center items-center gap-x-2 px-3 py-2 text-sm rounded-md border border-red-300 bg-red-100 text-red-700")},m(o,l){ne(o,e,l),g(e,t),g(t,n)},p:Ie,i:Ie,o:Ie,d(o){o&&h(e)}}}function Zo(r){let e,t,n;return{c(){e=I("div"),t=I("span"),n=ue("No exposures match current filter"),this.h()},l(o){e=S(o,"DIV",{class:!0});var l=R(e);t=S(l,"SPAN",{class:!0});var s=R(t);n=fe(s,"No exposures match current filter"),s.forEach(h),l.forEach(h),this.h()},h(){_(t,"class","font-semibold"),_(e,"class","absolute-center inline-flex justify-center items-center gap-x-2 px-3 py-2 text-sm rounded-md border border-orange-300 bg-orange-100 text-orange-700")},m(o,l){ne(o,e,l),g(e,t),g(t,n)},p:Ie,i:Ie,o:Ie,d(o){o&&h(e)}}}function $o(r){let e,t,n={height:r[2],width:r[3],columnWidth:r[5]+Gt,overscanRowsCount:2,columnCount:r[6],rowCount:r[7],rowHeight:r[8],useIsScrolling:!0,$$slots:{default:[rs,({items:o})=>({40:o}),({items:o})=>[0,o?512:0]]},$$scope:{ctx:r}};return e=new xo({props:n}),r[28](e),{c(){de(e.$$.fragment)},l(o){me(e.$$.fragment,o)},m(o,l){he(e,o,l),t=!0},p(o,l){const s={};l[0]&4&&(s.height=o[2]),l[0]&8&&(s.width=o[3]),l[0]&32&&(s.columnWidth=o[5]+Gt),l[0]&64&&(s.columnCount=o[6]),l[0]&128&&(s.rowCount=o[7]),l[0]&256&&(s.rowHeight=o[8]),l[0]&624|l[1]&33280&&(s.$$scope={dirty:l,ctx:o}),e.$set(s)},i(o){t||(z(e.$$.fragment,o),t=!0)},o(o){K(e.$$.fragment,o),t=!1},d(o){r[28](null),ge(e,o)}}}function es(r){let e,t,n;return t=new Ir({}),{c(){e=I("div"),de(t.$$.fragment),this.h()},l(o){e=S(o,"DIV",{class:!0});var l=R(e);me(t.$$.fragment,l),l.forEach(h),this.h()},h(){_(e,"class","absolute-center")},m(o,l){ne(o,e,l),he(t,e,null),n=!0},p:Ie,i(o){n||(z(t.$$.fragment,o),n=!0)},o(o){K(t.$$.fragment,o),n=!1},d(o){o&&h(e),ge(t)}}}function ts(r){let e,t,n,o,l,s,i,a,d;return n=new rt({props:{src:fo}}),{c(){e=I("div"),t=I("span"),de(n.$$.fragment),o=$(),l=I("span"),s=ue("Micrographs do not have thumbnails"),this.h()},l(c){e=S(c,"DIV",{class:!0});var f=R(e);t=S(f,"SPAN",{class:!0});var p=R(t);me(n.$$.fragment,p),p.forEach(h),o=ee(f),l=S(f,"SPAN",{class:!0});var w=R(l);s=fe(w,"Micrographs do not have thumbnails"),w.forEach(h),f.forEach(h),this.h()},h(){_(t,"class","cursor-help"),_(l,"class","font-semibold"),_(e,"class","absolute-center inline-flex justify-center items-center gap-x-2 px-3 py-2 text-sm rounded-md border border-orange-300 bg-orange-100 text-orange-700")},m(c,f){ne(c,e,f),g(e,t),he(n,t,null),g(e,o),g(e,l),g(l,s),i=!0,a||(d=Ut(Vt.call(null,t,{content:'Thumbnails have not been generated for the input exposures. Use the "Generate Thumbnails" job to create them.'})),a=!0)},p:Ie,i(c){i||(z(n.$$.fragment,c),i=!0)},o(c){K(n.$$.fragment,c),i=!1},d(c){c&&h(e),ge(n),a=!1,d()}}}function qr(r){let e,t;return e=new Xo({props:{exposure:r[43],height:r[4],width:r[5],isScrolling:r[41].isScrolling}}),e.$on("mouseover",r[21]),{c(){de(e.$$.fragment)},l(n){me(e.$$.fragment,n)},m(n,o){he(e,n,o),t=!0},p(n,o){const l={};o[0]&576|o[1]&512&&(l.exposure=n[43]),o[0]&16&&(l.height=n[4]),o[0]&32&&(l.width=n[5]),o[1]&512&&(l.isScrolling=n[41].isScrolling),e.$set(l)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){K(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function Xr(r,e){let t,n,o,l,s=e[43]&&qr(e);return{key:r,first:null,c(){t=I("div"),s&&s.c(),n=$(),this.h()},l(i){t=S(i,"DIV",{style:!0,class:!0});var a=R(t);s&&s.l(a),n=ee(a),a.forEach(h),this.h()},h(){_(t,"style",o=Mr(e[41].style)),_(t,"class","flex justify-center items-end text-white"),this.first=t},m(i,a){ne(i,t,a),s&&s.m(t,null),g(t,n),l=!0},p(i,a){e=i,e[43]?s?(s.p(e,a),a[0]&576|a[1]&512&&z(s,1)):(s=qr(e),s.c(),z(s,1),s.m(t,n)):s&&(dt(),K(s,1,1,()=>{s=null}),mt()),(!l||a[1]&512&&o!==(o=Mr(e[41].style)))&&_(t,"style",o)},i(i){l||(z(s),l=!0)},o(i){K(s),l=!1},d(i){i&&h(t),s&&s.d()}}}function rs(r){let e=[],t=new Map,n,o,l=r[40];const s=i=>i[41].key;for(let i=0;i<l.length;i+=1){let a=Yr(r,l,i),d=s(a);t.set(d,e[i]=Xr(d,a))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();n=kt()},l(i){for(let a=0;a<e.length;a+=1)e[a].l(i);n=kt()},m(i,a){for(let d=0;d<e.length;d+=1)e[d].m(i,a);ne(i,n,a),o=!0},p(i,a){a[0]&2097776|a[1]&512&&(l=i[40],dt(),e=Tn(e,a,s,1,i,l,t,n.parentNode,kn,Xr,n,Yr),mt())},i(i){if(!o){for(let a=0;a<l.length;a+=1)z(e[a]);o=!0}},o(i){for(let a=0;a<e.length;a+=1)K(e[a]);o=!1},d(i){for(let a=0;a<e.length;a+=1)e[a].d(i);i&&h(n)}}}function ns(r){let e,t,n,o,l,s;const i=[ts,es,$o,Zo,Qo],a=[];function d(c,f){return c[10]?c[0]?1:c[9].length?2:c[11].length&&!c[9].length?3:4:0}return t=d(r),n=a[t]=i[t](r),{c(){e=I("div"),n.c(),this.h()},l(c){e=S(c,"DIV",{id:!0,class:!0});var f=R(e);n.l(f),f.forEach(h),this.h()},h(){_(e,"id","exposure-grid"),_(e,"class","relative h-full min-h-[400px] bg-white")},m(c,f){ne(c,e,f),a[t].m(e,null),o=!0,l||(s=je(Jo,"keyup",r[22]),l=!0)},p(c,f){let p=t;t=d(c),t===p?a[t].p(c,f):(dt(),K(a[p],1,1,()=>{a[p]=null}),mt(),n=a[t],n?n.p(c,f):(n=a[t]=i[t](c),n.c()),z(n,1),n.m(e,null))},i(c){o||(z(n),o=!0)},o(c){K(n),o=!1},d(c){c&&h(e),a[t].d(),l=!1,s()}}}const Gt=10,os=120,ss=120;function ls(r,e,t){let n,o,l,s,i,a,d,c,f;const{allExposures:p,filteredExposures:w,selectedMicUid:N,tableFilter:C,previewThumbHeight:j,previewThumbWidth:Y,hoverAnchorNode:y,showGridDetails:k,hasThumbnails:V,setMicrograph:P,handleModifyManualReject:X}=vt("exposureCurationData");le(r,p,W=>t(11,f=W)),le(r,w,W=>t(9,s=W)),le(r,N,W=>t(32,d=W)),le(r,C,W=>t(27,l=W)),le(r,j,W=>t(26,o=W)),le(r,Y,W=>t(25,n=W)),le(r,y,W=>t(31,a=W)),le(r,k,W=>t(30,i=W)),le(r,V,W=>t(10,c=W));let T=!0,U,J,H,O,A,L,G=4,Q,Z;const b=W=>{const ye=W!=null?W:d;if(!J||typeof ye!="number")return;const Se=Math.ceil(ye/G);J.scrollToItem({rowIndex:Se})},M=()=>{const W=s.findIndex(Se=>Se.idx===d),ye=s[W+1];ye&&P(ye.idx)},B=()=>{const W=s.findIndex(Se=>Se.idx===d),ye=s[W-1];ye&&P(ye.idx)},D=()=>a!==U&&y.set(U),F=W=>{if(!W.metaKey&&!W.ctrlKey&&!kr(W))switch(W.preventDefault(),W.key){case At.h:k.set(!i);break;case At.r:X();break;case At.arrowRight:M();break;case At.arrowLeft:B();break}},oe=(W,ye,Se)=>{const Me=W>Se,Te=W/Se;return{longerSide:Me?Se:W,shorterSide:Me?Math.round(ye/Te):ye}},te=async()=>{try{if(typeof o=="number"&&typeof n=="number"){if(o>n){const{longerSide:Me,shorterSide:Te}=oe(o,n,os);t(4,A=Me),t(5,L=Te)}else{const{longerSide:Me,shorterSide:Te}=oe(n,o,ss);t(5,L=Me),t(4,A=Te)}if(await yr(),U=document.getElementById("exposure-grid"),!U)throw new Error("Grid wrapper element does not exist");const{height:ye,width:Se}=U.getBoundingClientRect();t(2,H=ye),t(3,O=Se),t(8,Z=Math.round(A+Gt)),t(6,G=Math.floor((Se-Gt)/(L+Gt))),t(7,Q=Math.ceil(s.length/G)),T&&t(0,T=!1)}}catch(W){tr("setupGrid error: ",W.message)}},Re=qt.exports.throttle(te,1e3),Ve=async()=>{await te(),await yr(),b()};Ht(()=>(window.addEventListener("resize",Re),window.addEventListener("togglesidebar",te),window.addEventListener("toggleoutputs",te),()=>{window.removeEventListener("resize",Re),window.removeEventListener("toggleSidebar",te),window.removeEventListener("toggleoutputs",te)}));function ze(W){bt[W?"unshift":"push"](()=>{J=W,t(1,J)})}return r.$$.update=()=>{r.$$.dirty[0]&134217728&&l&&te(),r.$$.dirty[0]&100663296&&typeof o=="number"&&typeof n=="number"&&Ve()},[T,J,H,O,A,L,G,Q,Z,s,c,f,p,w,N,C,j,Y,y,k,V,D,F,b,te,n,o,l,ze]}class is extends lt{constructor(e){super();it(this,e,ls,ns,at,{scrollToGridItem:23,setupGrid:24},null,[-1,-1])}get scrollToGridItem(){return this.$$.ctx[23]}get setupGrid(){return this.$$.ctx[24]}}function as(r){let e,t;return e=new Ho({}),{c(){de(e.$$.fragment)},l(n){me(e.$$.fragment,n)},m(n,o){he(e,n,o),t=!0},p:Ie,i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){K(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function cs(r){let e,t,n,o;function l(a){r[4](a)}function s(a){r[5](a)}let i={};return r[1]!==void 0&&(i.scrollToGridItem=r[1]),r[0]!==void 0&&(i.setupGrid=r[0]),e=new is({props:i}),bt.push(()=>Kt(e,"scrollToGridItem",l)),bt.push(()=>Kt(e,"setupGrid",s)),{c(){de(e.$$.fragment)},l(a){me(e.$$.fragment,a)},m(a,d){he(e,a,d),o=!0},p(a,d){const c={};!t&&d&2&&(t=!0,c.scrollToGridItem=a[1],Wt(()=>t=!1)),!n&&d&1&&(n=!0,c.setupGrid=a[0],Wt(()=>n=!1)),e.$set(c)},i(a){o||(z(e.$$.fragment,a),o=!0)},o(a){K(e.$$.fragment,a),o=!1},d(a){ge(e,a)}}}function us(r){let e,t,n,o,l,s;e=new Fo({props:{scrollToGridItem:r[1]}});const i=[cs,as],a=[];function d(c,f){return c[2]===tt.grid?0:1}return n=d(r),o=a[n]=i[n](r),{c(){de(e.$$.fragment),t=$(),o.c(),l=kt()},l(c){me(e.$$.fragment,c),t=ee(c),o.l(c),l=kt()},m(c,f){he(e,c,f),ne(c,t,f),a[n].m(c,f),ne(c,l,f),s=!0},p(c,[f]){const p={};f&2&&(p.scrollToGridItem=c[1]),e.$set(p);let w=n;n=d(c),n===w?a[n].p(c,f):(dt(),K(a[w],1,1,()=>{a[w]=null}),mt(),o=a[n],o?o.p(c,f):(o=a[n]=i[n](c),o.c()),z(o,1),o.m(l.parentNode,l))},i(c){s||(z(e.$$.fragment,c),z(o),s=!0)},o(c){K(e.$$.fragment,c),K(o),s=!1},d(c){ge(e,c),c&&h(t),a[n].d(c),c&&h(l)}}}function fs(r,e,t){let n;const{micrographsViewMode:o}=vt("exposureCurationData");le(r,o,d=>t(2,n=d));let{setupGrid:l}=e,s;function i(d){s=d,t(1,s)}function a(d){l=d,t(0,l)}return r.$$set=d=>{"setupGrid"in d&&t(0,l=d.setupGrid)},[l,s,n,o,i,a]}class ds extends lt{constructor(e){super();it(this,e,fs,us,at,{setupGrid:0})}}function ms(r){let e,t;return e=new or({props:{loader:vs}}),{c(){de(e.$$.fragment)},l(n){me(e.$$.fragment,n)},m(n,o){he(e,n,o),t=!0},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){K(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function hs(r){let e,t;return e=new or({props:{loader:bs}}),{c(){de(e.$$.fragment)},l(n){me(e.$$.fragment,n)},m(n,o){he(e,n,o),t=!0},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){K(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function gs(r){let e,t;return e=new or({props:{loader:_s}}),{c(){de(e.$$.fragment)},l(n){me(e.$$.fragment,n)},m(n,o){he(e,n,o),t=!0},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){K(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function ps(r){let e,t,n,o;const l=[gs,hs,ms],s=[];function i(a,d){return a[0]===Ae.individual?0:a[0]===Ae.micrograph?1:2}return e=i(r),t=s[e]=l[e](r),{c(){t.c(),n=kt()},l(a){t.l(a),n=kt()},m(a,d){s[e].m(a,d),ne(a,n,d),o=!0},p(a,[d]){let c=e;e=i(a),e!==c&&(dt(),K(s[c],1,1,()=>{s[c]=null}),mt(),t=s[e],t||(t=s[e]=l[e](a),t.c()),z(t,1),t.m(n.parentNode,n))},i(a){o||(z(t),o=!0)},o(a){K(t),o=!1},d(a){s[e].d(a),a&&h(n)}}}const _s=()=>nr(()=>import("./ExposureInfo.171958aa.js"),["assets/ExposureInfo.171958aa.js","assets/ExposureInfo.5dee0dd1.css","assets/vendor.3ae73048.js","assets/types.8cb6216c.js","assets/types.2b75528f.css","assets/index.2e3bb17a.js","assets/CopyButton.c1ae3f83.js","assets/Spinner.012207c4.js","assets/Icon.61279884.js","assets/ChevronUp.0ab7bee0.js","assets/DownloadImage.d10f042a.js","assets/Download.0ce79951.js"]),bs=()=>nr(()=>import("./ExposureMicrograph.01a3bc6b.js"),["assets/ExposureMicrograph.01a3bc6b.js","assets/ExposureMicrograph.8bed7ac6.css","assets/vendor.3ae73048.js","assets/types.8cb6216c.js","assets/types.2b75528f.css","assets/index.2e3bb17a.js","assets/Icon.61279884.js","assets/DotsVertical.9505a1c9.js","assets/Popover.0a97ebac.js","assets/ExposureViewer.31cd6713.js","assets/ExposureViewer.43af8d46.css","assets/wNumb.f094d5b4.js","assets/router.1b465492.js","assets/index.146c2037.js","assets/index.c82b1418.css","assets/index.11580965.js","assets/index.5ca08db9.css","assets/jobs.7ab064ef.js","assets/helpers.7177ca38.js","assets/index.c4392b02.js","assets/jobs.d50d1674.js","assets/ChevronUp.0ab7bee0.js","assets/Spinner.012207c4.js","assets/Folder.9bc96b35.js","assets/LockClosed.9ead7228.js","assets/Toggle.70c4dc3f.js","assets/QuestionMarkCircle.1d0a7a5c.js","assets/Move.f1d750f0.js","assets/Ruler.d04aefd7.js","assets/DownloadImage.d10f042a.js","assets/Download.0ce79951.js","assets/ArrowsExpand.dfc75310.js"]),vs=()=>nr(()=>import("./ExposureThresholds.ad7bdd29.js"),["assets/ExposureThresholds.ad7bdd29.js","assets/ExposureThresholds.b2ab0792.css","assets/vendor.3ae73048.js","assets/interactive.28807de7.js","assets/index.146c2037.js","assets/index.c82b1418.css","assets/Icon.61279884.js","assets/ChevronUp.0ab7bee0.js","assets/types.8cb6216c.js","assets/types.2b75528f.css","assets/index.2e3bb17a.js","assets/Logout.c3964a48.js","assets/helpers.7177ca38.js","assets/router.1b465492.js","assets/Spinner.012207c4.js","assets/lodash.7e9ccf5d.js","assets/wNumb.f094d5b4.js","assets/plotly.2255cf4f.js"]);function ws(r,e,t){let n;const{selectedView:o,getFieldsAndThresholds:l,getAvailable:s}=vt("exposureCurationData");return le(r,o,i=>t(0,n=i)),Ht(()=>{l(),s()}),[n,o]}class ys extends lt{constructor(e){super();it(this,e,ws,ps,at,{})}}function Es(r){let e,t,n,o;return n=new Ir({}),{c(){e=I("div"),t=I("span"),de(n.$$.fragment),this.h()},l(l){e=S(l,"DIV",{class:!0});var s=R(e);t=S(s,"SPAN",{class:!0});var i=R(t);me(n.$$.fragment,i),i.forEach(h),s.forEach(h),this.h()},h(){_(t,"class","absolute-center"),_(e,"class","h-full w-full bg-white")},m(l,s){ne(l,e,s),g(e,t),he(n,t,null),o=!0},p:Ie,i(l){o||(z(n.$$.fragment,l),o=!0)},o(l){K(n.$$.fragment,l),o=!1},d(l){l&&h(e),ge(n)}}}function xs(r){let e,t,n,o,l,s,i,a,d,c,f,p,w,N,C,j,Y,y,k,V,P,X,T,U;t=new So({}),f=new Fn({props:{heading:"Exposure Plot",$$slots:{default:[Ts]},$$scope:{ctx:r}}}),f.$on("toggle",function(){pr(r[0])&&r[0].apply(this,arguments)});function J(O){r[25](O)}let H={};return r[0]!==void 0&&(H.setupGrid=r[0]),w=new ds({props:H}),bt.push(()=>Kt(w,"setupGrid",J)),Y=new Vo({}),k=new ys({}),P=new Gn({props:{hoverAnchorNode:r[2],hasThumbnails:r[3],overviewHoverUid:r[12],overviewHoverData:r[13],hoverAttributes:r[14],getThumbnailUrl:r[20]}}),{c(){e=I("div"),de(t.$$.fragment),n=$(),o=I("span"),l=I("button"),s=ue("Done"),i=$(),a=I("div"),d=I("div"),c=I("div"),de(f.$$.fragment),p=$(),de(w.$$.fragment),C=$(),j=I("div"),de(Y.$$.fragment),y=$(),de(k.$$.fragment),V=$(),de(P.$$.fragment),this.h()},l(O){e=S(O,"DIV",{class:!0});var A=R(e);me(t.$$.fragment,A),n=ee(A),o=S(A,"SPAN",{class:!0});var L=R(o);l=S(L,"BUTTON",{type:!0,class:!0});var G=R(l);s=fe(G,"Done"),G.forEach(h),L.forEach(h),A.forEach(h),i=ee(O),a=S(O,"DIV",{class:!0});var Q=R(a);d=S(Q,"DIV",{class:!0});var Z=R(d);c=S(Z,"DIV",{class:!0});var b=R(c);me(f.$$.fragment,b),p=ee(b),me(w.$$.fragment,b),b.forEach(h),Z.forEach(h),C=ee(Q),j=S(Q,"DIV",{class:!0});var M=R(j);me(Y.$$.fragment,M),y=ee(M),me(k.$$.fragment,M),M.forEach(h),V=ee(Q),me(P.$$.fragment,Q),Q.forEach(h),this.h()},h(){_(l,"type","button"),_(l,"class","inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs leading-4 font-medium rounded text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:border-green-700 focus:shadow-outline-green active:bg-green-700 transition ease-in-out duration-150"),_(o,"class","inline-flex ml-auto rounded shadow-sm"),_(e,"class","w-full flex justify-between px-2 py-1.5 whitespace-nowrap bg-white border-b border-gray-200"),_(c,"class","flex flex-col h-full"),_(d,"class","interactive-panel flex-1 flex flex-col border-r border-gray-300 overflow-y-auto"),_(j,"class","interactive-panel relative flex-1 flex flex-col overflow-y-hidden"),_(a,"class","flex h-full overflow-hidden")},m(O,A){ne(O,e,A),he(t,e,null),g(e,n),g(e,o),g(o,l),g(l,s),ne(O,i,A),ne(O,a,A),g(a,d),g(d,c),he(f,c,null),g(c,p),he(w,c,null),g(a,C),g(a,j),he(Y,j,null),g(j,y),he(k,j,null),g(a,V),he(P,a,null),X=!0,T||(U=je(l,"click",r[22]),T=!0)},p(O,A){r=O;const L={};A[1]&32&&(L.$$scope={dirty:A,ctx:r}),f.$set(L);const G={};!N&&A[0]&1&&(N=!0,G.setupGrid=r[0],Wt(()=>N=!1)),w.$set(G);const Q={};A[0]&4&&(Q.hoverAnchorNode=r[2]),A[0]&8&&(Q.hasThumbnails=r[3]),P.$set(Q)},i(O){X||(z(t.$$.fragment,O),z(f.$$.fragment,O),z(w.$$.fragment,O),z(Y.$$.fragment,O),z(k.$$.fragment,O),z(P.$$.fragment,O),X=!0)},o(O){K(t.$$.fragment,O),K(f.$$.fragment,O),K(w.$$.fragment,O),K(Y.$$.fragment,O),K(k.$$.fragment,O),K(P.$$.fragment,O),X=!1},d(O){O&&h(e),ge(t),O&&h(i),O&&h(a),ge(f),ge(w),ge(Y),ge(k),ge(P),T=!1,U()}}}function Ts(r){let e,t;return e=new zn({props:{exposures:r[8],setMicrograph:r[21],fields:r[9],hoverAnchorNode:r[10],overviewHoverUid:r[12],plotAxisX:r[15],plotAxisY:r[16],chartType:r[17],nbinsx:r[18]}}),{c(){de(e.$$.fragment)},l(n){me(e.$$.fragment,n)},m(n,o){he(e,n,o),t=!0},p:Ie,i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){K(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function ks(r){let e,t,n,o,l,s;t=new Ln({props:{errors:r[5]}});const i=[xs,Es],a=[];function d(c,f){return c[1]?1:0}return o=d(r),l=a[o]=i[o](r),{c(){e=I("div"),de(t.$$.fragment),n=$(),l.c(),this.h()},l(c){e=S(c,"DIV",{class:!0});var f=R(e);me(t.$$.fragment,f),n=ee(f),l.l(f),f.forEach(h),this.h()},h(){_(e,"class","curation-wrapper relative flex flex-col w-full bg-white svelte-viqx48")},m(c,f){ne(c,e,f),he(t,e,null),g(e,n),a[o].m(e,null),s=!0},p(c,f){let p=o;o=d(c),o===p?a[o].p(c,f):(dt(),K(a[p],1,1,()=>{a[p]=null}),mt(),l=a[o],l?l.p(c,f):(l=a[o]=i[o](c),l.c()),z(l,1),l.m(e,null))},i(c){s||(z(t.$$.fragment,c),z(l),s=!0)},o(c){K(t.$$.fragment,c),K(l),s=!1},d(c){c&&h(e),ge(t),a[o].d()}}}function Is(r,e,t){let n,o,l,s,i,a;const{host:d,port:c,projectUid:f,jobUid:p}=vt("jobData"),w=To(d,c,f,p);In("exposureCurationData",w);const{loadingExposures:N,interactiveError:C,selectedView:j,selectedMicUid:Y,allExposures:y,fields:k,hoverAnchorNode:V,urlMic:P,overviewHoverUid:X,overviewHoverData:T,hoverAttributes:U,plotAxisX:J,plotAxisY:H,chartType:O,nbinsx:A,hasThumbnails:L,setMicrograph:G,getCurationData:Q,getThumbnailUrl:Z,getThumbnailSize:b,shutdown:M}=w;le(r,N,te=>t(1,s=te)),le(r,j,te=>t(26,l=te)),le(r,Y,te=>t(23,n=te)),le(r,V,te=>t(2,i=te)),le(r,P,te=>t(24,o=te)),le(r,L,te=>t(3,a=te));let B;const D=te=>{l!==Ae.individual&&j.set(Ae.micrograph),G(te)},F=()=>{M(),Un.set(Pn.log),Vn.set(!0)};Ht(async()=>{await Q(f,p),b()});function oe(te){B=te,t(0,B)}return r.$$.update=()=>{r.$$.dirty[0]&25165824&&typeof n=="number"&&!o&&G(n)},[B,s,i,a,N,C,j,Y,y,k,V,P,X,T,U,J,H,O,A,L,Z,D,F,n,o,oe]}class El extends lt{constructor(e){super();it(this,e,Is,ks,at,{},null,[-1,-1])}}export{El as default};
