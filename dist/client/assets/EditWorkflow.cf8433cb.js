import{S as E,h as I,s as W,C as b,D as k,E as $,o as u,t as d,H as y,j as g,k as p,l as F,m as M,p as c,L as h,u as N,Q as x,I as T,a6 as _,R as U,T as q,J as A,a7 as j,U as D,ae as L}from"./vendor.3ae73048.js";import{u as P,d as Q}from"./index.ef7d8fe7.js";import{r as z,M as B}from"./ModifyWorkflow.d7b7b3a1.js";import{T as H}from"./router.1b465492.js";import{n as J}from"./index.146c2037.js";import{w as O,a1 as R,z as G}from"./index.11580965.js";import{I as K}from"./Icon.61279884.js";import"./helpers.7177ca38.js";import"./types.8cb6216c.js";import"./index.2e3bb17a.js";import"./ChevronUp.0ab7bee0.js";import"./Spinner.012207c4.js";import"./FooterButton.95026c94.js";import"./PageDialog.0c69a37b.js";import"./Unfold.f168270e.js";import"./Target.7baf7004.js";import"./Flag.5ce531b9.js";import"./Folder.9bc96b35.js";import"./purify.es.5cdb46dc.js";import"./QuestionMarkCircle.1d0a7a5c.js";import"./EyeOff.8789b395.js";import"./Eye.d9501c14.js";import"./LockClosed.9ead7228.js";import"./FlagFilled.38eba9fd.js";import"./jobs.7ab064ef.js";import"./index.c4392b02.js";import"./jobs.d50d1674.js";function v(n){let o,t;return o=new B({props:{workflow:n[0],updates:n[1],$$slots:{secondary:[Y],confirm:[X],header:[V]},$$scope:{ctx:n}}}),o.$on("confirm",n[2]),o.$on("secondary",n[3]),o.$on("cancel",n[4]),{c(){b(o.$$.fragment)},l(e){k(o.$$.fragment,e)},m(e,r){$(o,e,r),t=!0},p(e,r){const s={};r&1&&(s.workflow=e[0]),r&2&&(s.updates=e[1]),r&129&&(s.$$scope={dirty:r,ctx:e}),o.$set(s)},i(e){t||(u(o.$$.fragment,e),t=!0)},o(e){d(o.$$.fragment,e),t=!1},d(e){y(o,e)}}}function V(n){let o,t,e,r=n[0].title+"",s,f;return t=new K({props:{src:R,type:"outline",modifier:"stroke-2"}}),{c(){o=x("span"),b(t.$$.fragment),e=T(),s=_(r),this.h()},l(a){o=U(a,"SPAN",{class:!0});var l=q(o);k(t.$$.fragment,l),l.forEach(c),e=A(a),s=j(a,r),this.h()},h(){D(o,"class","p-0.5 mr-2.5 font-semibold rounded text-yellow-600 bg-yellow-200")},m(a,l){p(a,o,l),$(t,o,null),p(a,e,l),p(a,s,l),f=!0},p(a,l){(!f||l&1)&&r!==(r=a[0].title+"")&&L(s,r)},i(a){f||(u(t.$$.fragment,a),f=!0)},o(a){d(t.$$.fragment,a),f=!1},d(a){a&&c(o),y(t),a&&c(e),a&&c(s)}}}function X(n){let o;return{c(){o=_("Save")},l(t){o=j(t,"Save")},m(t,e){p(t,o,e)},d(t){t&&c(o)}}}function Y(n){let o;return{c(){o=_("Save New")},l(t){o=j(t,"Save New")},m(t,e){p(t,o,e)},d(t){t&&c(o)}}}function Z(n){let o,t,e=n[0]&&v(n);return{c(){e&&e.c(),o=g()},l(r){e&&e.l(r),o=g()},m(r,s){e&&e.m(r,s),p(r,o,s),t=!0},p(r,[s]){r[0]?e?(e.p(r,s),s&1&&u(e,1)):(e=v(r),e.c(),u(e,1),e.m(o.parentNode,o)):e&&(F(),d(e,1,1,()=>{e=null}),M())},i(r){t||(u(e),t=!0)},o(r){d(e),t=!1},d(r){e&&e.d(r),r&&c(o)}}}function ee(n,o,t){let e,r;h(n,H,i=>t(5,e=i)),h(n,O,i=>t(6,r=i));let s,f;const a=i=>{const{workflow:m}=i.detail;P(m),w()},l=i=>{const{workflow:m}=i.detail,S=m.title===(s==null?void 0:s.title),C=m.category===(s==null?void 0:s.category);if(S&&C)return J.add({title:"New workflow must have a unique title",type:"danger",style:"minimal"});delete m._id,Q(m,{forked:!0}),w()},w=()=>G.set(!1);return N(()=>{const i=z(r,e);t(0,s=i==null?void 0:i.workflow),t(1,f=i==null?void 0:i.updates)}),[s,f,a,l,w]}class Ie extends E{constructor(o){super();I(this,o,ee,Z,W,{})}}export{Ie as default};
