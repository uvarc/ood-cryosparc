var Mt=Object.defineProperty,Vt=Object.defineProperties;var Dt=Object.getOwnPropertyDescriptors;var Je=Object.getOwnPropertySymbols;var Bt=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable;var Re=(o,e,t)=>e in o?Mt(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,je=(o,e)=>{for(var t in e||(e={}))Bt.call(e,t)&&Re(o,t,e[t]);if(Je)for(var t of Je(e))Ot.call(e,t)&&Re(o,t,e[t]);return o},Ce=(o,e)=>Vt(o,Dt(e));import{S as ge,h as we,s as $e,Q as I,C as L,R as U,T as A,D as R,p,U as $,k as M,a2 as v,E as H,K as oe,ac as ee,o as y,t as C,H as J,a6 as F,I as N,a7 as q,J as W,au as Ie,j as se,aa as ze,ao as ke,l as te,m as le,ap as ae,ad as Ue,L as x,q as Pt,aM as Se,u as Nt,af as pe,at as Ae,P as ve,ae as fe,ak as Me,ax as Wt,e as Lt,w as Fe}from"./vendor.3ae73048.js";import{u as Ht,j as Jt,k as Rt,l as zt}from"./index.ef7d8fe7.js";import{K as Ft,m as qt,s as qe,J as Kt,T as Ke}from"./router.1b465492.js";import{i as Gt,u as Ge}from"./helpers.7177ca38.js";import{aa as Ve,a2 as Qt,T as Yt,w as ye,ab as De,s as Xt,z as Zt,A as xt,a1 as el}from"./index.11580965.js";import{I as ie}from"./Icon.61279884.js";import{U as tl}from"./Upload.9153237c.js";import{P as ll}from"./Panel.9c7a29b9.js";import"./types.8cb6216c.js";import{F as rl,t as Te,Q as ol,M as Be,a as me}from"./Spinner.012207c4.js";import{S as nl}from"./Search.fa01495d.js";import{F as Qe,U as Ye}from"./Unfold.f168270e.js";import{F as sl,P as il,M as al,a as fl,b as ul}from"./PinSlash.dc79993a.js";import{n as cl}from"./index.146c2037.js";import{p as Xe,m as Ze}from"./purify.es.5cdb46dc.js";import{C as dl}from"./CubeTransparent.d87c4b84.js";import{D as pl}from"./TagCount.d4471cb8.js";import{D as ml}from"./Download.0ce79951.js";import{T as hl}from"./Trash.1e959d99.js";import{M as _l}from"./MenuItemConfirmation.1afa248b.js";import"./jobs.7ab064ef.js";import"./index.c4392b02.js";import"./jobs.d50d1674.js";import"./index.2e3bb17a.js";import"./ChevronUp.0ab7bee0.js";import"./Folder.9bc96b35.js";import"./LockClosed.9ead7228.js";import"./Exclamation.f44359c6.js";import"./Button.d254e004.js";function xe(o){let e,t,l,r,n,s;return l=new ie({props:{src:Qt,modifier:"text-gray-400"}}),{c(){e=I("div"),t=I("button"),L(l.$$.fragment),this.h()},l(a){e=U(a,"DIV",{class:!0});var i=A(e);t=U(i,"BUTTON",{type:!0});var f=A(t);R(l.$$.fragment,f),f.forEach(p),i.forEach(p),this.h()},h(){$(t,"type","button"),$(e,"class","absolute inset-y-0 right-0 pr-3 flex items-center")},m(a,i){M(a,e,i),v(e,t),H(l,t,null),r=!0,n||(s=oe(t,"click",o[11]),n=!0)},p:ee,i(a){r||(y(l.$$.fragment,a),r=!0)},o(a){C(l.$$.fragment,a),r=!1},d(a){a&&p(e),J(l),n=!1,s()}}}function et(o){let e,t,l,r,n,s,a,i,f;function u(m){o[14](m)}let k={id:"only-user-workflows-toggle"};return o[6].onlyShowUserWorkflows!==void 0&&(k.value=o[6].onlyShowUserWorkflows),a=new Yt({props:k}),pe.push(()=>Ae(a,"value",u)),{c(){e=I("div"),t=I("div"),l=I("div"),r=I("label"),n=F("Only show my workflows"),s=N(),L(a.$$.fragment),this.h()},l(m){e=U(m,"DIV",{class:!0});var c=A(e);t=U(c,"DIV",{class:!0});var _=A(t);l=U(_,"DIV",{class:!0});var g=A(l);r=U(g,"LABEL",{for:!0,class:!0});var j=A(r);n=q(j,"Only show my workflows"),j.forEach(p),s=W(g),R(a.$$.fragment,g),g.forEach(p),_.forEach(p),c.forEach(p),this.h()},h(){$(r,"for","only-user-workflows-toggle"),$(r,"class","font-medium text-xs text-gray-700"),$(l,"class","flex justify-between w-full px-2.5"),$(t,"class","m-2 py-1.5 rounded border border-gray-300 bg-white"),$(e,"class","shadow-inner border-t border-gray-300")},m(m,c){M(m,e,c),v(e,t),v(t,l),v(l,r),v(r,n),v(l,s),H(a,l,null),f=!0},p(m,c){const _={};!i&&c&64&&(i=!0,_.value=m[6].onlyShowUserWorkflows,Ie(()=>i=!1)),a.$set(_)},i(m){f||(y(a.$$.fragment,m),f=!0)},o(m){C(a.$$.fragment,m),f=!1},d(m){m&&p(e),J(a)}}}function bl(o){let e,t,l,r,n,s,a,i,f,u,k,m,c,_,g,j,B,P,T,w,E,V;r=new ie({props:{src:nl,size:4,modifier:"text-gray-400"}});let h=o[4].length>0&&xe(o);u=new ie({props:{src:rl,type:"outline",modifier:"stroke-2"}});var D=o[5]===!0?Qe:Ye;function Q(b){return{props:{modifier:"m-0.5"}}}D&&(g=new D(Q()));let S=o[3]&&et(o);return{c(){e=I("div"),t=I("div"),l=I("div"),L(r.$$.fragment),n=N(),s=I("input"),a=N(),h&&h.c(),i=N(),f=I("button"),L(u.$$.fragment),c=N(),_=I("button"),g&&L(g.$$.fragment),P=N(),S&&S.c(),T=se(),this.h()},l(b){e=U(b,"DIV",{class:!0});var O=A(e);t=U(O,"DIV",{class:!0});var X=A(t);l=U(X,"DIV",{class:!0});var ne=A(l);R(r.$$.fragment,ne),ne.forEach(p),n=W(X),s=U(X,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),a=W(X),h&&h.l(X),X.forEach(p),i=W(O),f=U(O,"BUTTON",{type:!0,class:!0});var K=A(f);R(u.$$.fragment,K),K.forEach(p),c=W(O),_=U(O,"BUTTON",{type:!0,class:!0});var Y=A(_);g&&R(g.$$.fragment,Y),Y.forEach(p),O.forEach(p),P=W(b),S&&S.l(b),T=se(),this.h()},h(){$(l,"class","absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none"),$(s,"id","workflows-search"),$(s,"type","text"),$(s,"class","block w-full py-1.5 pl-8 pr-8 border-gray-300 rounded-md sm:text-sm focus:ring-blue-500 focus:border-blue-500"),$(s,"placeholder","Search"),$(t,"class","relative w-full rounded-full shadow-sm"),$(f,"type","button"),$(f,"class",k=""+(o[7].base+" "+(o[3]?o[7].active:o[7].default))),$(_,"type","button"),$(_,"class",j=""+(o[7].base+" "+(o[5]?o[7].active:o[7].default))),$(e,"class","flex items-center gap-1.5 p-2")},m(b,O){M(b,e,O),v(e,t),v(t,l),H(r,l,null),v(t,n),v(t,s),ze(s,o[4]),o[10](s),v(t,a),h&&h.m(t,null),v(e,i),v(e,f),H(u,f,null),v(e,c),v(e,_),g&&H(g,_,null),M(b,P,O),S&&S.m(b,O),M(b,T,O),w=!0,E||(V=[oe(s,"input",o[9]),oe(s,"keydown",o[8]),ke(m=Te.call(null,f,{content:o[3]?"Hide search filters":"Show search filters",delay:[300,0]})),oe(f,"click",o[12]),ke(B=Te.call(null,_,{content:o[5]?"Hide category grouping":"Show category grouping",modifier:"whitespace-nowrap",delay:[300,0]})),oe(_,"click",o[13])],E=!0)},p(b,[O]){if(O&16&&s.value!==b[4]&&ze(s,b[4]),b[4].length>0?h?(h.p(b,O),O&16&&y(h,1)):(h=xe(b),h.c(),y(h,1),h.m(t,null)):h&&(te(),C(h,1,1,()=>{h=null}),le()),(!w||O&8&&k!==(k=""+(b[7].base+" "+(b[3]?b[7].active:b[7].default))))&&$(f,"class",k),m&&ae(m.update)&&O&8&&m.update.call(null,{content:b[3]?"Hide search filters":"Show search filters",delay:[300,0]}),D!==(D=b[5]===!0?Qe:Ye)){if(g){te();const X=g;C(X.$$.fragment,1,0,()=>{J(X,1)}),le()}D?(g=new D(Q()),L(g.$$.fragment),y(g.$$.fragment,1),H(g,_,null)):g=null}(!w||O&32&&j!==(j=""+(b[7].base+" "+(b[5]?b[7].active:b[7].default))))&&$(_,"class",j),B&&ae(B.update)&&O&32&&B.update.call(null,{content:b[5]?"Hide category grouping":"Show category grouping",modifier:"whitespace-nowrap",delay:[300,0]}),b[3]?S?(S.p(b,O),O&8&&y(S,1)):(S=et(b),S.c(),y(S,1),S.m(T.parentNode,T)):S&&(te(),C(S,1,1,()=>{S=null}),le())},i(b){w||(y(r.$$.fragment,b),y(h),y(u.$$.fragment,b),g&&y(g.$$.fragment,b),y(S),w=!0)},o(b){C(r.$$.fragment,b),C(h),C(u.$$.fragment,b),g&&C(g.$$.fragment,b),C(S),w=!1},d(b){b&&p(e),J(r),o[10](null),h&&h.d(),J(u),g&&J(g),b&&p(P),S&&S.d(b),b&&p(T),E=!1,Ue(V)}}}function gl(o,e,t){let l,r=ee,n=()=>(r(),r=Se(m,h=>t(4,l=h)),m),s,a=ee,i=()=>(a(),a=Se(c,h=>t(5,s=h)),c),f;x(o,Ve,h=>t(6,f=h)),o.$$.on_destroy.push(()=>r()),o.$$.on_destroy.push(()=>a());const u=Pt(),k={base:"inline-flex items-center px-1.5 py-1.5 border shadow-sm text-xs font-medium rounded-md focus:z-10 focus:outline-none focus-visible:ring-1 focus-visible:ring-blue-500 focus-visible:border-blue-500",default:"border-gray-300 bg-white text-gray-500 hover:text-gray-600 hover:bg-gray-50 hover:border-gray-400",active:"border-blue-400 text-blue-700 bg-blue-100 hover:bg-blue-200"};let{searchValue:m}=e;n();let{showCategories:c}=e;i();let _,g=!1;const j=h=>{["ArrowUp","ArrowDown"].includes(h.key)&&h.preventDefault(),h.key==="ArrowUp"&&h.metaKey===!0?u("search:top"):h.key==="ArrowUp"?u("search:up"):h.key==="ArrowDown"&&h.metaKey===!0?u("search:bottom"):h.key==="ArrowDown"?u("search:down"):h.key==="Enter"&&u("search:enter")};Nt(()=>{_.focus()});function B(){l=this.value,m.set(l)}function P(h){pe[h?"unshift":"push"](()=>{_=h,t(2,_)})}const T=()=>{m.set("")},w=()=>{t(3,g=!g)},E=()=>{ve(c,s=!s,s)};function V(h){o.$$.not_equal(f.onlyShowUserWorkflows,h)&&(f.onlyShowUserWorkflows=h,Ve.set(f))}return o.$$set=h=>{"searchValue"in h&&n(t(0,m=h.searchValue)),"showCategories"in h&&i(t(1,c=h.showCategories))},[m,c,_,g,l,s,f,k,j,B,P,T,w,E,V]}class wl extends ge{constructor(e){super();we(this,e,gl,bl,$e,{searchValue:0,showCategories:1})}}function tt(o,e,t){var n,s,a;const l=o.slice();l[3]=e[t];const r=(a=(s=l[1])==null?void 0:s[(n=l[3].jobType)!=null?n:""])!=null?a:{};return l[4]=r,l}function lt(o){let e,t,l,r=Xe.sanitize(Ze(o[0].description))+"";return{c(){e=I("hr"),t=N(),l=I("div"),this.h()},l(n){e=U(n,"HR",{class:!0}),t=W(n),l=U(n,"DIV",{class:!0});var s=A(l);s.forEach(p),this.h()},h(){$(e,"class","w-full h-px border-t border-dotted border-gray-400 my-1.5"),$(l,"class","max-w-xs prose prose-xs prose-invert text-xs break-words overflow-auto custom-scrollbar")},m(n,s){M(n,e,s),M(n,t,s),M(n,l,s),l.innerHTML=r},p(n,s){s&1&&r!==(r=Xe.sanitize(Ze(n[0].description))+"")&&(l.innerHTML=r)},d(n){n&&p(e),n&&p(t),n&&p(l)}}}function rt(o){let e,t,l,r,n,s,a=Object.values(o[0].parents),i=[];for(let f=0;f<a.length;f+=1)i[f]=ot(tt(o,a,f));return{c(){e=I("hr"),t=N(),l=I("h4"),r=F("Parents Jobs:"),n=N();for(let f=0;f<i.length;f+=1)i[f].c();s=se(),this.h()},l(f){e=U(f,"HR",{class:!0}),t=W(f),l=U(f,"H4",{class:!0});var u=A(l);r=q(u,"Parents Jobs:"),u.forEach(p),n=W(f);for(let k=0;k<i.length;k+=1)i[k].l(f);s=se(),this.h()},h(){$(e,"class","w-full h-px border-t border-dotted border-gray-400 my-1.5"),$(l,"class","text-xs font-medium")},m(f,u){M(f,e,u),M(f,t,u),M(f,l,u),v(l,r),M(f,n,u);for(let k=0;k<i.length;k+=1)i[k].m(f,u);M(f,s,u)},p(f,u){if(u&3){a=Object.values(f[0].parents);let k;for(k=0;k<a.length;k+=1){const m=tt(f,a,k);i[k]?i[k].p(m,u):(i[k]=ot(m),i[k].c(),i[k].m(s.parentNode,s))}for(;k<i.length;k+=1)i[k].d(1);i.length=a.length}},d(f){f&&p(e),f&&p(t),f&&p(l),f&&p(n),Me(i,f),f&&p(s)}}}function ot(o){let e,t=o[4].title+"",l,r;return{c(){e=I("p"),l=F(t),r=N(),this.h()},l(n){e=U(n,"P",{class:!0});var s=A(e);l=q(s,t),r=W(s),s.forEach(p),this.h()},h(){$(e,"class","text-xs italic")},m(n,s){M(n,e,s),v(e,l),v(e,r)},p(n,s){s&3&&t!==(t=n[4].title+"")&&fe(l,t)},d(n){n&&p(e)}}}function $l(o){var a;let e,t,l,r,n=((a=o[2][o[0].createdBy])!=null?a:o[0].createdBy)+"",s;return{c(){e=I("h4"),t=F("Created By:"),l=N(),r=I("p"),s=F(n),this.h()},l(i){e=U(i,"H4",{class:!0});var f=A(e);t=q(f,"Created By:"),f.forEach(p),l=W(i),r=U(i,"P",{class:!0});var u=A(r);s=q(u,n),u.forEach(p),this.h()},h(){$(e,"class","text-xs font-medium"),$(r,"class","mb-1.5 text-xs italic")},m(i,f){M(i,e,f),v(e,t),M(i,l,f),M(i,r,f),v(r,s)},p(i,f){var u;f&5&&n!==(n=((u=i[2][i[0].createdBy])!=null?u:i[0].createdBy)+"")&&fe(s,n)},d(i){i&&p(e),i&&p(l),i&&p(r)}}}function kl(o){let e,t;return{c(){e=I("p"),t=F("CryoSPARC Reference Workflow"),this.h()},l(l){e=U(l,"P",{class:!0});var r=A(e);t=q(r,"CryoSPARC Reference Workflow"),r.forEach(p),this.h()},h(){$(e,"class","mb-1.5 text-xs font-semibold text-indigo-800")},m(l,r){M(l,e,r),v(e,t)},p:ee,d(l){l&&p(e)}}}function nt(o){let e,t,l,r;return{c(){e=I("hr"),t=N(),l=I("p"),r=F("Imported Workflow"),this.h()},l(n){e=U(n,"HR",{class:!0}),t=W(n),l=U(n,"P",{class:!0});var s=A(l);r=q(s,"Imported Workflow"),s.forEach(p),this.h()},h(){$(e,"class","w-full h-px border-t border-dotted border-gray-400 my-1.5"),$(l,"class","text-xs italic font-medium text-indigo-700")},m(n,s){M(n,e,s),M(n,t,s),M(n,l,s),v(l,r)},d(n){n&&p(e),n&&p(t),n&&p(l)}}}function vl(o){var Q;let e,t,l=o[0].title+"",r,n,s,a=Object.keys(o[0].parents).length,i,f,u,k,m,c,_,g,j=o[0].csVersion+"",B,P,T=o[0].description.length&&lt(o),w=a&&rt(o);function E(S,b){var O;return((O=S[0])==null?void 0:O.reference)===!0?kl:$l}let V=E(o),h=V(o),D=((Q=o[0])==null?void 0:Q.imported)&&nt();return{c(){e=I("article"),t=I("h3"),r=F(l),n=N(),T&&T.c(),s=N(),w&&w.c(),i=N(),f=I("hr"),u=N(),h.c(),k=N(),m=I("h4"),c=F("CryoSPARC Version:"),_=N(),g=I("p"),B=F(j),P=N(),D&&D.c(),this.h()},l(S){e=U(S,"ARTICLE",{class:!0});var b=A(e);t=U(b,"H3",{class:!0});var O=A(t);r=q(O,l),O.forEach(p),n=W(b),T&&T.l(b),s=W(b),w&&w.l(b),i=W(b),f=U(b,"HR",{class:!0}),u=W(b),h.l(b),k=W(b),m=U(b,"H4",{class:!0});var X=A(m);c=q(X,"CryoSPARC Version:"),X.forEach(p),_=W(b),g=U(b,"P",{class:!0});var ne=A(g);B=q(ne,j),ne.forEach(p),P=W(b),D&&D.l(b),b.forEach(p),this.h()},h(){$(t,"class","text-sm font-bold text-gray-700"),$(f,"class","w-full h-px border-t border-dotted border-gray-400 my-1.5"),$(m,"class","text-xs font-medium"),$(g,"class","text-xs italic"),$(e,"class","h-full w-80 p-2 rounded break-words overflow-y-auto")},m(S,b){M(S,e,b),v(e,t),v(t,r),v(e,n),T&&T.m(e,null),v(e,s),w&&w.m(e,null),v(e,i),v(e,f),v(e,u),h.m(e,null),v(e,k),v(e,m),v(m,c),v(e,_),v(e,g),v(g,B),v(e,P),D&&D.m(e,null)},p(S,[b]){var O;b&1&&l!==(l=S[0].title+"")&&fe(r,l),S[0].description.length?T?T.p(S,b):(T=lt(S),T.c(),T.m(e,s)):T&&(T.d(1),T=null),b&1&&(a=Object.keys(S[0].parents).length),a?w?w.p(S,b):(w=rt(S),w.c(),w.m(e,i)):w&&(w.d(1),w=null),V===(V=E(S))&&h?h.p(S,b):(h.d(1),h=V(S),h&&(h.c(),h.m(e,k))),b&1&&j!==(j=S[0].csVersion+"")&&fe(B,j),((O=S[0])==null?void 0:O.imported)?D||(D=nt(),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},i:ee,o:ee,d(S){S&&p(e),T&&T.d(),w&&w.d(),h.d(),D&&D.d()}}}function yl(o,e,t){let l,r;x(o,Ft,s=>t(1,l=s)),x(o,qt,s=>t(2,r=s));let{workflow:n}=e;return o.$$set=s=>{"workflow"in s&&t(0,n=s.workflow)},[n,l,r]}class st extends ge{constructor(e){super();we(this,e,yl,vl,$e,{workflow:0})}}function it(o,e,t){const l=o.slice();return l[45]=e[t][0],l[46]=e[t][1],l}function at(o,e,t){const l=o.slice();l[49]=e[t];const r=l[4].findIndex(n=>n._id===l[49]._id);return l[50]=r,l}function Oe(o){const e=o.slice(),t=e[46].length;return e[53]=t,e}function ft(o){let e,t,l,r,n,s,a,i=o[45]+"",f,u,k,m=o[53]+"",c,_,g,j;const B=[El,Tl],P=[];function T(E,V){return V[0]&96&&(l=null),l==null&&(l=!E[6].includes(E[45])),l?0:1}r=T(o,[-1,-1]),n=P[r]=B[r](o);function w(...E){return o[28](o[45],...E)}return{c(){e=I("li"),t=I("button"),n.c(),s=N(),a=I("h3"),f=F(i),u=N(),k=I("span"),c=F(m),this.h()},l(E){e=U(E,"LI",{class:!0});var V=A(e);t=U(V,"BUTTON",{type:!0,class:!0});var h=A(t);n.l(h),s=W(h),a=U(h,"H3",{class:!0});var D=A(a);f=q(D,i),D.forEach(p),u=W(h),k=U(h,"SPAN",{class:!0});var Q=A(k);c=q(Q,m),Q.forEach(p),h.forEach(p),V.forEach(p),this.h()},h(){$(a,"class","font-bold"),$(k,"class","inline-flex text-gray-700"),$(t,"type","button"),$(t,"class","w-full flex items-center justify-between border-t border-gray-300 bg-gray-100 px-3 py-1 text-xs font-medium text-gray-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-offset-2 focus-visible:ring-blue-500"),$(e,"class","z-10 sticky top-0")},m(E,V){M(E,e,V),v(e,t),P[r].m(t,null),v(t,s),v(t,a),v(a,f),v(t,u),v(t,k),v(k,c),_=!0,g||(j=oe(t,"click",w),g=!0)},p(E,V){o=E;let h=r;r=T(o,V),r!==h&&(te(),C(P[h],1,1,()=>{P[h]=null}),le(),n=P[r],n||(n=P[r]=B[r](o),n.c()),y(n,1),n.m(t,s)),(!_||V[0]&32)&&i!==(i=o[45]+"")&&fe(f,i),(!_||V[0]&32)&&m!==(m=o[53]+"")&&fe(c,m)},i(E){_||(y(n),_=!0)},o(E){C(n),_=!1},d(E){E&&p(e),P[r].d(),g=!1,j()}}}function Tl(o){let e,t;return e=new il({props:{modifier:"text-gray-400"}}),{c(){L(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function El(o){let e,t;return e=new al({props:{modifier:"text-gray-400"}}),{c(){L(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function ut(o){let e,t,l=o[46],r=[];for(let s=0;s<l.length;s+=1)r[s]=ct(at(o,l,s));const n=s=>C(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=se()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);e=se()},m(s,a){for(let i=0;i<r.length;i+=1)r[i].m(s,a);M(s,e,a),t=!0},p(s,a){if(a[0]&806330){l=s[46];let i;for(i=0;i<l.length;i+=1){const f=at(s,l,i);r[i]?(r[i].p(f,a),y(r[i],1)):(r[i]=ct(f),r[i].c(),y(r[i],1),r[i].m(e.parentNode,e))}for(te(),i=l.length;i<r.length;i+=1)n(i);le()}},i(s){if(!t){for(let a=0;a<l.length;a+=1)y(r[a]);t=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)C(r[a]);t=!1},d(s){Me(r,s),s&&p(e)}}}function ct(o){let e,t,l,r=o[18](o[49].title)+"",n,s,a,i,f,u,k,m,c,_,g,j;function B(){return o[29](o[49])}u=new ie({props:{src:pl,size:4,type:"outline",modifier:"stroke-2"}});function P(...T){return o[30](o[49],...T)}return{c(){e=I("li"),t=I("button"),l=I("p"),a=N(),i=I("div"),f=I("button"),L(u.$$.fragment),m=N(),this.h()},l(T){e=U(T,"LI",{id:!0,role:!0,class:!0});var w=A(e);t=U(w,"BUTTON",{type:!0,class:!0});var E=A(t);l=U(E,"P",{class:!0});var V=A(l);V.forEach(p),E.forEach(p),a=W(w),i=U(w,"DIV",{class:!0});var h=A(i);f=U(h,"BUTTON",{class:!0});var D=A(f);R(u.$$.fragment,D),D.forEach(p),h.forEach(p),m=W(w),w.forEach(p),this.h()},h(){$(l,"class","text-sm"),$(t,"type","button"),$(t,"class",n="w-full flex items-center justify-between px-2 py-1.5 text-left "+o[19](o[49]._id,o[50],o[7],o[3],o[1])),$(f,"class","h-full w-full py-1 px-1.5 border border-transparent hover:border-blue-500 hover:text-blue-600 hover:border-blue-400 hover:bg-blue-100 transition ease-in-out duration-150"),$(i,"class","flex justify-center items-center p-0.5 border-l"),$(e,"id",c="template_selector_"+o[49]._id),$(e,"role","menuitem"),$(e,"class","h-full w-full flex border-t-1 border-gray-300")},m(T,w){M(T,e,w),v(e,t),v(t,l),l.innerHTML=r,v(e,a),v(e,i),v(i,f),H(u,f,null),v(e,m),_=!0,g||(j=[oe(t,"click",B),ke(s=Te.call(null,t,{component:st,componentProps:{workflow:o[49]},interactive:!0,placement:"left",classOverride:"border border-gray-400 bg-white",delay:[350,0]})),ke(k=Te.call(null,f,{content:"Show options",delay:[450,0],modifier:"whitespace-nowrap"})),oe(f,"click",Wt(P))],g=!0)},p(T,w){o=T,(!_||w[0]&32)&&r!==(r=o[18](o[49].title)+"")&&(l.innerHTML=r),(!_||w[0]&186&&n!==(n="w-full flex items-center justify-between px-2 py-1.5 text-left "+o[19](o[49]._id,o[50],o[7],o[3],o[1])))&&$(t,"class",n),s&&ae(s.update)&&w[0]&32&&s.update.call(null,{component:st,componentProps:{workflow:o[49]},interactive:!0,placement:"left",classOverride:"border border-gray-400 bg-white",delay:[350,0]}),(!_||w[0]&32&&c!==(c="template_selector_"+o[49]._id))&&$(e,"id",c)},i(T){_||(y(u.$$.fragment,T),_=!0)},o(T){C(u.$$.fragment,T),_=!1},d(T){T&&p(e),J(u),g=!1,Ue(j)}}}function dt(o){let e,t=!o[6].includes(o[45]),l,r,n=o[2]&&ft(Oe(o)),s=t&&ut(o);return{c(){n&&n.c(),e=N(),s&&s.c(),l=se()},l(a){n&&n.l(a),e=W(a),s&&s.l(a),l=se()},m(a,i){n&&n.m(a,i),M(a,e,i),s&&s.m(a,i),M(a,l,i),r=!0},p(a,i){a[2]?n?(n.p(Oe(a),i),i[0]&4&&y(n,1)):(n=ft(Oe(a)),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(te(),C(n,1,1,()=>{n=null}),le()),i[0]&96&&(t=!a[6].includes(a[45])),t?s?(s.p(a,i),i[0]&96&&y(s,1)):(s=ut(a),s.c(),y(s,1),s.m(l.parentNode,l)):s&&(te(),C(s,1,1,()=>{s=null}),le())},i(a){r||(y(n),y(s),r=!0)},o(a){C(n),C(s),r=!1},d(a){n&&n.d(a),a&&p(e),s&&s.d(a),a&&p(l)}}}function pt(o){let e,t;function l(){return o[31](o[44])}return e=new me({props:{$$slots:{icon:[Cl],default:[jl]},$$scope:{ctx:o}}}),e.$on("click",l),{c(){L(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,n){H(e,r,n),t=!0},p(r,n){o=r;const s={};n[1]&8388608&&(s.$$scope={dirty:n,ctx:o}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function jl(o){let e;return{c(){e=F("Edit")},l(t){e=q(t,"Edit")},m(t,l){M(t,e,l)},d(t){t&&p(e)}}}function Cl(o){let e,t;return e=new ie({props:{slot:"icon",src:el,size:4,type:"outline",modifier:"stroke-2"}}),{c(){L(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p:ee,i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function mt(o){let e,t;function l(){return o[32](o[44])}return e=new me({props:{$$slots:{icon:[Ul],default:[Il]},$$scope:{ctx:o}}}),e.$on("click",l),{c(){L(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,n){H(e,r,n),t=!0},p(r,n){o=r;const s={};n[1]&8388608&&(s.$$scope={dirty:n,ctx:o}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function Il(o){let e;return{c(){e=F("Rebuild")},l(t){e=q(t,"Rebuild")},m(t,l){M(t,e,l)},d(t){t&&p(e)}}}function Ul(o){let e,t;return e=new ie({props:{slot:"icon",src:dl,size:4,type:"outline",modifier:"stroke-2"}}),{c(){L(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p:ee,i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function ht(o){let e,t;return e=new me({props:{itemType:"danger",$$slots:{icon:[Ml],default:[Al]},$$scope:{ctx:o}}}),{c(){L(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p(l,r){const n={};r[0]&512|r[1]&8396800&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Sl(o){let e,t;return{c(){e=I("span"),t=F("Delete Template?"),this.h()},l(l){e=U(l,"SPAN",{class:!0});var r=A(e);t=q(r,"Delete Template?"),r.forEach(p),this.h()},h(){$(e,"class","whitespace-nowrap")},m(l,r){M(l,e,r),v(e,t)},p:ee,d(l){l&&p(e)}}}function Al(o){let e,t,l;function r(){return o[33](o[44])}return e=new _l({props:{$$slots:{default:[Sl]},$$scope:{ctx:o}}}),e.$on("confirm",r),{c(){L(e.$$.fragment),t=F(`
        
        Delete`)},l(n){R(e.$$.fragment,n),t=q(n,`
        
        Delete`)},m(n,s){H(e,n,s),M(n,t,s),l=!0},p(n,s){o=n;const a={};s[1]&8388608&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(n){l||(y(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){J(e,n),n&&p(t)}}}function Ml(o){let e,t;return e=new ie({props:{slot:"icon",src:hl,size:4,type:"outline",modifier:"stroke-2"}}),{c(){L(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p:ee,i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Vl(o){let e,t,l,r,n=o[44].canModify&&pt(o),s=o[44].canModify&&mt(o),a=o[44].canModify&&ht(o);return{c(){n&&n.c(),e=N(),s&&s.c(),t=N(),a&&a.c(),l=se()},l(i){n&&n.l(i),e=W(i),s&&s.l(i),t=W(i),a&&a.l(i),l=se()},m(i,f){n&&n.m(i,f),M(i,e,f),s&&s.m(i,f),M(i,t,f),a&&a.m(i,f),M(i,l,f),r=!0},p(i,f){i[44].canModify?n?(n.p(i,f),f[1]&8192&&y(n,1)):(n=pt(i),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(te(),C(n,1,1,()=>{n=null}),le()),i[44].canModify?s?(s.p(i,f),f[1]&8192&&y(s,1)):(s=mt(i),s.c(),y(s,1),s.m(t.parentNode,t)):s&&(te(),C(s,1,1,()=>{s=null}),le()),i[44].canModify?a?(a.p(i,f),f[1]&8192&&y(a,1)):(a=ht(i),a.c(),y(a,1),a.m(l.parentNode,l)):a&&(te(),C(a,1,1,()=>{a=null}),le())},i(i){r||(y(n),y(s),y(a),r=!0)},o(i){C(n),C(s),C(a),r=!1},d(i){n&&n.d(i),i&&p(e),s&&s.d(i),i&&p(t),a&&a.d(i),i&&p(l)}}}function _t(o){let e,t;return e=new Be({props:{$$slots:{default:[Pl]},$$scope:{ctx:o}}}),{c(){L(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p(l,r){const n={};r[0]&512|r[1]&8396800&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Dl(o){let e,t;return e=new fl({props:{size:3,modifier:"mr-2"}}),{c(){L(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Bl(o){let e,t;return e=new ul({props:{size:3,modifier:"mr-2"}}),{c(){L(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Ol(o){var u,k;let e,t,l,r=(((k=(u=o[44])==null?void 0:u.workflow)==null?void 0:k.pinned)?"Unpin":"Pin")+"",n,s;const a=[Bl,Dl],i=[];function f(m,c){var _,g;return((g=(_=m[44])==null?void 0:_.workflow)==null?void 0:g.pinned)?0:1}return e=f(o),t=i[e]=a[e](o),{c(){t.c(),l=N(),n=F(r)},l(m){t.l(m),l=W(m),n=q(m,r)},m(m,c){i[e].m(m,c),M(m,l,c),M(m,n,c),s=!0},p(m,c){var g,j;let _=e;e=f(m),e!==_&&(te(),C(i[_],1,1,()=>{i[_]=null}),le(),t=i[e],t||(t=i[e]=a[e](m),t.c()),y(t,1),t.m(l.parentNode,l)),(!s||c[1]&8192)&&r!==(r=(((j=(g=m[44])==null?void 0:g.workflow)==null?void 0:j.pinned)?"Unpin":"Pin")+"")&&fe(n,r)},i(m){s||(y(t),s=!0)},o(m){C(t),s=!1},d(m){i[e].d(m),m&&p(l),m&&p(n)}}}function Pl(o){let e,t;function l(){return o[34](o[44])}return e=new me({props:{$$slots:{default:[Ol]},$$scope:{ctx:o}}}),e.$on("click",l),{c(){L(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,n){H(e,r,n),t=!0},p(r,n){o=r;const s={};n[1]&8396800&&(s.$$scope={dirty:n,ctx:o}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function Nl(o){let e;return{c(){e=F("Export")},l(t){e=q(t,"Export")},m(t,l){M(t,e,l)},d(t){t&&p(e)}}}function Wl(o){let e,t;return e=new ie({props:{slot:"icon",src:ml,size:4,modifier:"stroke-2"}}),{c(){L(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p:ee,i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Ll(o){let e,t;function l(){return o[35](o[44])}return e=new me({props:{$$slots:{icon:[Wl],default:[Nl]},$$scope:{ctx:o}}}),e.$on("click",l),{c(){L(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,n){H(e,r,n),t=!0},p(r,n){o=r;const s={};n[1]&8388608&&(s.$$scope={dirty:n,ctx:o}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function Hl(o){var i;let e,t,l=Object.keys((i=o[44].workflow.parents)!=null?i:{}).length,r,n,s;e=new Be({props:{$$slots:{default:[Vl]},$$scope:{ctx:o}}});let a=l&&_t(o);return n=new Be({props:{$$slots:{default:[Ll]},$$scope:{ctx:o}}}),{c(){L(e.$$.fragment),t=N(),a&&a.c(),r=N(),L(n.$$.fragment)},l(f){R(e.$$.fragment,f),t=W(f),a&&a.l(f),r=W(f),R(n.$$.fragment,f)},m(f,u){H(e,f,u),M(f,t,u),a&&a.m(f,u),M(f,r,u),H(n,f,u),s=!0},p(f,u){var c;const k={};u[0]&512|u[1]&8396800&&(k.$$scope={dirty:u,ctx:f}),e.$set(k),u[1]&8192&&(l=Object.keys((c=f[44].workflow.parents)!=null?c:{}).length),l?a?(a.p(f,u),u[1]&8192&&y(a,1)):(a=_t(f),a.c(),y(a,1),a.m(r.parentNode,r)):a&&(te(),C(a,1,1,()=>{a=null}),le());const m={};u[0]&512|u[1]&8396800&&(m.$$scope={dirty:u,ctx:f}),n.$set(m)},i(f){s||(y(e.$$.fragment,f),y(a),y(n.$$.fragment,f),s=!0)},o(f){C(e.$$.fragment,f),C(a),C(n.$$.fragment,f),s=!1},d(f){J(e,f),f&&p(t),a&&a.d(f),f&&p(r),J(n,f)}}}function Jl(o){let e,t,l,r,n,s,a=Object.entries(o[5]),i=[];for(let c=0;c<a.length;c+=1)i[c]=dt(it(o,a,c));const f=c=>C(i[c],1,1,()=>{i[c]=null});function u(c){o[36](c)}function k(c){o[37](c)}let m={modifier:"w-28",$$slots:{default:[Hl,({args:c})=>({44:c}),({args:c})=>[0,c?8192:0]]},$$scope:{ctx:o}};return o[8]!==void 0&&(m.handleShowMenu=o[8]),o[9]!==void 0&&(m.closeMenu=o[9]),l=new ol({props:m}),pe.push(()=>Ae(l,"handleShowMenu",u)),pe.push(()=>Ae(l,"closeMenu",k)),{c(){e=I("ul");for(let c=0;c<i.length;c+=1)i[c].c();t=N(),L(l.$$.fragment),this.h()},l(c){e=U(c,"UL",{class:!0});var _=A(e);for(let g=0;g<i.length;g+=1)i[g].l(_);_.forEach(p),t=W(c),R(l.$$.fragment,c),this.h()},h(){$(e,"class","bg-white relative")},m(c,_){M(c,e,_);for(let g=0;g<i.length;g+=1)i[g].m(e,null);M(c,t,_),H(l,c,_),s=!0},p(c,_){if(_[0]&818686){a=Object.entries(c[5]);let j;for(j=0;j<a.length;j+=1){const B=it(c,a,j);i[j]?(i[j].p(B,_),y(i[j],1)):(i[j]=dt(B),i[j].c(),y(i[j],1),i[j].m(e,null))}for(te(),j=a.length;j<i.length;j+=1)f(j);le()}const g={};_[0]&512|_[1]&8396800&&(g.$$scope={dirty:_,ctx:c}),!r&&_[0]&256&&(r=!0,g.handleShowMenu=c[8],Ie(()=>r=!1)),!n&&_[0]&512&&(n=!0,g.closeMenu=c[9],Ie(()=>n=!1)),l.$set(g)},i(c){if(!s){for(let _=0;_<a.length;_+=1)y(i[_]);y(l.$$.fragment,c),s=!0}},o(c){i=i.filter(Boolean);for(let _=0;_<i.length;_+=1)C(i[_]);C(l.$$.fragment,c),s=!1},d(c){c&&p(e),Me(i,c),c&&p(t),J(l,c)}}}function Rl(o,e,t){let l,r,n,s=ee,a=()=>(s(),s=Se(m,d=>t(27,n=d)),m),i,f,u,k;x(o,ye,d=>t(38,i=d)),x(o,qe,d=>t(39,f=d)),x(o,Gt,d=>t(10,u=d)),x(o,Ge,d=>t(11,k=d)),o.$$.on_destroy.push(()=>s());let{workflows:m}=e;a();let{searchValue:c=""}=e,{showAll:_=!1}=e,{showCategories:g=!0}=e,{availableWorkflows:j=[]}=e;const B={primary:{focus:"ring-1 ring-inset ring-offset-2 ring-blue-500 bg-blue-100 text-blue-900 hover:bg-blue-300",default:"text-gray-900 hover:bg-gray-100"},available:{focus:"ring-1 ring-inset ring-offset-2 ring-green-500 bg-green-100 text-green-900 hover:bg-green-300",default:"text-green-900 hover:bg-green-100"},unavailable:{focus:"ring-1 ring-inset ring-offset-2 ring-red-500 bg-red-100 text-red-900 hover:bg-red-300",default:"text-red-900 hover:bg-red-100"}},P=new sl(n,{keys:["title","category","description"]});let T=[],w=0,E=null,V,h;const D=d=>{const z=T.includes(d);t(6,T=z?T.filter(Z=>Z!==d):[...T,d])},Q=d=>{const z=T.includes(d),Z=Object.keys(l);t(6,T=z?[]:Z)},S=d=>{if(typeof d=="undefined"||d===null||typeof d._id!="string")return;const z=document.getElementById(`template_selector_${d._id}`);z&&z.scrollIntoView({behavior:"smooth",block:"center"})},b=()=>{t(7,w=0),t(26,E=r[0]),S(E)},O=()=>{t(7,w=r.length-1),t(26,E=r[w]),S(E)},X=()=>{var z;let d=w+1;for(;d<r.length;){const Z=r[d];if(!T.includes((z=Z.category)!=null?z:De)){t(7,w=d),t(26,E=Z),S(E);break}d+=1}},ne=()=>{var z;let d=w-1;for(;d>=0;){const Z=r[d];if(!T.includes((z=Z.category)!=null?z:De)){t(7,w=d),t(26,E=Z),S(E);break}d-=1}},K=()=>{E!==null&&Y(E._id)},Y=d=>{!d||(ve(ye,i=d,i),Xt.set(!0))},he=d=>{!d||(ve(ye,i=d,i),Zt.set(!0))},_e=d=>{if(!!d){if(!f.length)return cl.add({title:"Cannot rebuild workflow with no jobs selected",type:"danger",style:"minimal"});ve(ye,i=d,i),xt.set(!0)}},Pe=d=>{Ht(Ce(je({},d),{pinned:!(d==null?void 0:d.pinned)}))},wt=d=>{if(c.length>0&&d.length>0&&d.toLowerCase().includes(c.toLowerCase())){const z=d==null?void 0:d.toLocaleLowerCase().indexOf(c);return`${d.substring(0,z)}<span class="bg-yellow-200">${d.substring(z,z+c.length)}</span>${d.substring(z+c.length)}`}else return d},$t=(d,z,Z,Ne,We)=>d?z===Z?B.primary.focus:B.primary.default:"",kt=(d=[],z=[],Z="",Ne=!1)=>{const We=(Ne?d:z).reduce((G,re)=>{const ce=re.category||De;return G[ce]=G[ce]||[],G[ce].push(re),G},{}),de={},Le=Z.length>0?P==null?void 0:P.search(c).filter(G=>z.some(re=>re._id===G.item._id)).map(G=>G.item):[],ue={};return Object.entries(We).forEach(([G,re],ce)=>{if(de[G]=ce,ue[G]=re,Z.length>0){ue[G]=re.filter(Ee=>{var be;return(be=Ee.title)==null?void 0:be.toLocaleLowerCase().includes(Z.toLowerCase())});const He=ue[G].length;He?de[G]=-10*He:Le.length>0?(ue[G]=re.filter(Ee=>Le.map(be=>be._id).includes(Ee._id)),de[G]-=ue[G].length):ue[G]=[]}}),Object.entries(ue).sort((G,re)=>de[G[0]]-de[re[0]]).reduce((G,[re,ce])=>Ce(je({},G),{[re]:ce}),{})},vt=(d,z)=>z.shiftKey?Q(d):D(d),yt=d=>Y(d._id),Tt=(d,z)=>V(z,{workflow:d,canModify:u||d.createdBy===k}),Et=d=>{he(d.workflow._id),h()},jt=d=>{_e(d.workflow._id),h()},Ct=d=>{Jt(d.workflow._id),h()},It=d=>{Pe(d.workflow),h()},Ut=d=>{Rt(d.workflow),h()};function St(d){V=d,t(8,V)}function At(d){h=d,t(9,h)}return o.$$set=d=>{"workflows"in d&&a(t(0,m=d.workflows)),"searchValue"in d&&t(20,c=d.searchValue),"showAll"in d&&t(1,_=d.showAll),"showCategories"in d&&t(2,g=d.showCategories),"availableWorkflows"in d&&t(3,j=d.availableWorkflows)},o.$$.update=()=>{o.$$.dirty[0]&135266314&&t(5,l=kt(n,j,c,_)),o.$$.dirty[0]&32&&t(4,r=Object.values(l).flatMap(d=>d)),o.$$.dirty[0]&67108880&&E===null&&t(26,E=r[0]),o.$$.dirty[0]&4&&g===!1&&t(6,T=[])},[m,_,g,j,r,l,T,w,V,h,u,k,D,Q,Y,he,_e,Pe,wt,$t,c,b,O,X,ne,K,E,n,vt,yt,Tt,Et,jt,Ct,It,Ut,St,At]}class zl extends ge{constructor(e){super();we(this,e,Rl,Jl,$e,{workflows:0,searchValue:20,showAll:1,showCategories:2,availableWorkflows:3,handleTop:21,handleBottom:22,handleDown:23,handleUp:24,handleEnter:25},null,[-1,-1])}get handleTop(){return this.$$.ctx[21]}get handleBottom(){return this.$$.ctx[22]}get handleDown(){return this.$$.ctx[23]}get handleUp(){return this.$$.ctx[24]}get handleEnter(){return this.$$.ctx[25]}}function Fl(o){let e,t,l,r,n,s,a=o[2].length+"",i,f,u,k,m,c,_,g,j,B,P,T,w;return B=new wl({props:{searchValue:o[6],showCategories:o[7]}}),B.$on("search:top",function(){ae(o[0].handleTop)&&o[0].handleTop.apply(this,arguments)}),B.$on("search:bottom",function(){ae(o[0].handleBottom)&&o[0].handleBottom.apply(this,arguments)}),B.$on("search:up",function(){ae(o[0].handleUp)&&o[0].handleUp.apply(this,arguments)}),B.$on("search:down",function(){ae(o[0].handleDown)&&o[0].handleDown.apply(this,arguments)}),B.$on("search:enter",function(){ae(o[0].handleEnter)&&o[0].handleEnter.apply(this,arguments)}),{c(){e=I("div"),t=I("div"),l=I("nav"),r=I("button"),n=F(`Applicable
          `),s=I("span"),i=F(a),k=N(),m=I("button"),c=F("All"),g=N(),j=I("div"),L(B.$$.fragment),this.h()},l(E){e=U(E,"DIV",{slot:!0,class:!0});var V=A(e);t=U(V,"DIV",{class:!0});var h=A(t);l=U(h,"NAV",{class:!0});var D=A(l);r=U(D,"BUTTON",{type:!0,class:!0});var Q=A(r);n=q(Q,`Applicable
          `),s=U(Q,"SPAN",{class:!0});var S=A(s);i=q(S,a),S.forEach(p),Q.forEach(p),k=W(D),m=U(D,"BUTTON",{type:!0,class:!0});var b=A(m);c=q(b,"All"),b.forEach(p),D.forEach(p),h.forEach(p),g=W(V),j=U(V,"DIV",{class:!0});var O=A(j);R(B.$$.fragment,O),O.forEach(p),V.forEach(p),this.h()},h(){$(s,"class",f=""+((o[1]?"bg-gray-200 text-gray-800":"bg-blue-600 text-white")+" ml-1 py-0.5 px-2.5 rounded-full text-xs font-medium inline-block")),$(r,"type","button"),$(r,"class",u=""+((o[1]?"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":"border-blue-500 text-blue-600")+" focus:outline-none border-b-2 w-1/2 py-2 px-1 text-center font-medium text-sm")),$(m,"type","button"),$(m,"class",_=""+((o[1]?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" focus:outline-none w-1/2 py-2 px-1 text-center border-b-2 font-medium text-sm")),$(l,"class","-mb-px flex"),$(t,"class","flex-shrink-0 border-b border-gray-200 bg-white"),$(j,"class","flex-shrink-0"),$(e,"slot","top"),$(e,"class","flex-shrink-0")},m(E,V){M(E,e,V),v(e,t),v(t,l),v(l,r),v(r,n),v(r,s),v(s,i),v(l,k),v(l,m),v(m,c),v(e,g),v(e,j),H(B,j,null),P=!0,T||(w=[oe(r,"click",o[12]),oe(m,"click",o[13])],T=!0)},p(E,V){o=E,(!P||V&4)&&a!==(a=o[2].length+"")&&fe(i,a),(!P||V&2&&f!==(f=""+((o[1]?"bg-gray-200 text-gray-800":"bg-blue-600 text-white")+" ml-1 py-0.5 px-2.5 rounded-full text-xs font-medium inline-block")))&&$(s,"class",f),(!P||V&2&&u!==(u=""+((o[1]?"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":"border-blue-500 text-blue-600")+" focus:outline-none border-b-2 w-1/2 py-2 px-1 text-center font-medium text-sm")))&&$(r,"class",u),(!P||V&2&&_!==(_=""+((o[1]?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" focus:outline-none w-1/2 py-2 px-1 text-center border-b-2 font-medium text-sm")))&&$(m,"class",_)},i(E){P||(y(B.$$.fragment,E),P=!0)},o(E){C(B.$$.fragment,E),P=!1},d(E){E&&p(e),J(B),T=!1,Ue(w)}}}function bt(o){let e,t,l;return{c(){e=I("div"),t=I("p"),l=F("No applicable workflows based on selected jobs"),this.h()},l(r){e=U(r,"DIV",{class:!0});var n=A(e);t=U(n,"P",{class:!0});var s=A(t);l=q(s,"No applicable workflows based on selected jobs"),s.forEach(p),n.forEach(p),this.h()},h(){$(t,"class","font-medium"),$(e,"class","m-3 mt-0 px-3 py-2 text-red-700 text-sm text-base rounded border border-red-400 bg-red-50")},m(r,n){M(r,e,n),v(e,t),v(t,l)},d(r){r&&p(e)}}}function gt(o){let e,t,l;return{c(){e=I("div"),t=I("p"),l=F("No workflows have been created or imported to the instance."),this.h()},l(r){e=U(r,"DIV",{class:!0});var n=A(e);t=U(n,"P",{class:!0});var s=A(t);l=q(s,"No workflows have been created or imported to the instance."),s.forEach(p),n.forEach(p),this.h()},h(){$(t,"class","font-medium"),$(e,"class","m-3 mt-0 px-3 py-2 text-blue-700 text-sm text-base rounded border border-blue-400 bg-blue-50")},m(r,n){M(r,e,n),v(e,t),v(t,l)},d(r){r&&p(e)}}}function ql(o){let e,t,l,r,n,s=o[2].length===0&&!o[1]&&bt(),a=o[3].length===0&&o[1]&&gt(),i={workflows:o[8],availableWorkflows:o[2],searchValue:o[4],showCategories:o[5],showAll:o[1]};return r=new zl({props:i}),o[11](r),{c(){e=I("div"),s&&s.c(),t=N(),a&&a.c(),l=N(),L(r.$$.fragment),this.h()},l(f){e=U(f,"DIV",{slot:!0});var u=A(e);s&&s.l(u),t=W(u),a&&a.l(u),l=W(u),R(r.$$.fragment,u),u.forEach(p),this.h()},h(){$(e,"slot","content")},m(f,u){M(f,e,u),s&&s.m(e,null),v(e,t),a&&a.m(e,null),v(e,l),H(r,e,null),n=!0},p(f,u){f[2].length===0&&!f[1]?s||(s=bt(),s.c(),s.m(e,t)):s&&(s.d(1),s=null),f[3].length===0&&f[1]?a||(a=gt(),a.c(),a.m(e,l)):a&&(a.d(1),a=null);const k={};u&4&&(k.availableWorkflows=f[2]),u&16&&(k.searchValue=f[4]),u&32&&(k.showCategories=f[5]),u&2&&(k.showAll=f[1]),r.$set(k)},i(f){n||(y(r.$$.fragment,f),n=!0)},o(f){C(r.$$.fragment,f),n=!1},d(f){f&&p(e),s&&s.d(),a&&a.d(),o[11](null),J(r)}}}function Kl(o){let e,t,l,r,n,s,a;return l=new ie({props:{src:tl,size:4}}),{c(){e=I("div"),t=I("button"),L(l.$$.fragment),r=F(`
      Import Workflow`),this.h()},l(i){e=U(i,"DIV",{slot:!0,class:!0});var f=A(e);t=U(f,"BUTTON",{class:!0});var u=A(t);R(l.$$.fragment,u),r=q(u,`
      Import Workflow`),u.forEach(p),f.forEach(p),this.h()},h(){$(t,"class","inline-flex items-center gap-x-1 px-1 py-0.5 pr-2 rounded text-xs font-medium leading-4 bg-gray-100 hover:bg-gray-200 border border-gray-300 text-gray-800 focus:outline-none"),$(e,"slot","footer"),$(e,"class","h-5.5 w-full")},m(i,f){M(i,e,f),v(e,t),H(l,t,null),v(t,r),n=!0,s||(a=oe(t,"click",zt),s=!0)},p:ee,i(i){n||(y(l.$$.fragment,i),n=!0)},o(i){C(l.$$.fragment,i),n=!1},d(i){i&&p(e),J(l),s=!1,a()}}}function Gl(o){let e,t;return e=new ll({props:{title:"Workflows",footerClass:"h-6",$$slots:{footer:[Kl],content:[ql],top:[Fl]},$$scope:{ctx:o}}}),{c(){L(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p(l,[r]){const n={};r&131135&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Ql(o,e,t){let l,r,n,s,a,i,f,u;x(o,qe,w=>t(9,r=w)),x(o,Kt,w=>t(14,s=w)),x(o,Ge,w=>t(15,a=w)),x(o,Ke,w=>t(3,i=w));let k=Fe("");x(o,k,w=>t(4,f=w));let m=Fe(!0);x(o,m,w=>t(5,u=w));let c,_=!0;const g=Lt([Ke,Ve],([w,E])=>w.filter(V=>!(E.onlyShowUserWorkflows&&V.createdBy!==a)));x(o,g,w=>t(10,n=w));const j=(w,E)=>{const V=E.length;return w.filter(D=>{const Q=Object.values(D.parents).map(K=>K.jobType),S=Q.length;if(V>S)return!1;const b=Q.reduce((K,Y)=>(Y&&(K[Y]=(K[Y]||0)+1),K),{}),ne=s.filter(K=>E.some(Y=>{const[he,_e]=Y.split("-");return K.project_uid===he&&K.uid===_e})).map(K=>K.job_type).reduce((K,Y)=>(Y&&(K[Y]=(K[Y]||0)+1),K),{});if(Object.keys(b).length!==Object.keys(ne).length)return!1;for(const[K,Y]of Object.entries(b))if(ne[K]!==Y)return!1;return!0})};function B(w){pe[w?"unshift":"push"](()=>{c=w,t(0,c)})}const P=()=>{t(1,_=!1)},T=()=>{t(1,_=!0)};return o.$$.update=()=>{o.$$.dirty&1536&&t(2,l=j(n,r))},[c,_,l,i,f,u,k,m,g,r,n,B,P,T]}class Cr extends ge{constructor(e){super();we(this,e,Ql,Gl,$e,{})}}export{Cr as default};
