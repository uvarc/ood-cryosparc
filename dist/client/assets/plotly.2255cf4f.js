import{C as To,D as Xc,ac as C0}from"./router.1b465492.js";var zv={exports:{}};(function(Fv,L0){(function(g){Fv.exports=g()})(function(){return function(){function g(ne,ae,T){function c(e,a){if(!ae[e]){if(!ne[e]){var n=typeof Xc=="function"&&Xc;if(!a&&n)return n(e,!0);if(M)return M(e,!0);var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}var r=ae[e]={exports:{}};ne[e][0].call(r.exports,function(f){var o=ne[e][1][f];return c(o||f)},r,r.exports,g,ne,ae,T)}return ae[e].exports}for(var M=typeof Xc=="function"&&Xc,A=0;A<T.length;A++)c(T[A]);return c}return g}()({1:[function(g,ne,ae){var T=g("../src/lib"),c={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var M in c){var A=M.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");T.addStyleRule(A,c[M])}},{"../src/lib":503}],2:[function(g,ne,ae){ne.exports=g("../src/transforms/aggregate")},{"../src/transforms/aggregate":1118}],3:[function(g,ne,ae){ne.exports=g("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(g,ne,ae){ne.exports=g("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(g,ne,ae){ne.exports=g("../src/traces/box")},{"../src/traces/box":679}],6:[function(g,ne,ae){ne.exports=g("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(g,ne,ae){ne.exports=g("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(g,ne,ae){ne.exports=g("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(g,ne,ae){ne.exports=g("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(g,ne,ae){ne.exports=g("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(g,ne,ae){ne.exports=g("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(g,ne,ae){ne.exports=g("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(g,ne,ae){ne.exports=g("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(g,ne,ae){ne.exports=g("../src/core")},{"../src/core":481}],15:[function(g,ne,ae){ne.exports=g("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(g,ne,ae){ne.exports=g("../src/transforms/filter")},{"../src/transforms/filter":1119}],17:[function(g,ne,ae){ne.exports=g("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(g,ne,ae){ne.exports=g("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(g,ne,ae){ne.exports=g("../src/transforms/groupby")},{"../src/transforms/groupby":1120}],20:[function(g,ne,ae){ne.exports=g("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(g,ne,ae){ne.exports=g("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(g,ne,ae){ne.exports=g("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(g,ne,ae){ne.exports=g("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(g,ne,ae){ne.exports=g("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(g,ne,ae){ne.exports=g("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(g,ne,ae){ne.exports=g("../src/traces/image")},{"../src/traces/image":852}],27:[function(g,ne,ae){var T=g("./core");T.register([g("./bar"),g("./box"),g("./heatmap"),g("./histogram"),g("./histogram2d"),g("./histogram2dcontour"),g("./contour"),g("./scatterternary"),g("./violin"),g("./funnel"),g("./waterfall"),g("./image"),g("./pie"),g("./sunburst"),g("./treemap"),g("./icicle"),g("./funnelarea"),g("./scatter3d"),g("./surface"),g("./isosurface"),g("./volume"),g("./mesh3d"),g("./cone"),g("./streamtube"),g("./scattergeo"),g("./choropleth"),g("./scattergl"),g("./splom"),g("./pointcloud"),g("./heatmapgl"),g("./parcoords"),g("./parcats"),g("./scattermapbox"),g("./choroplethmapbox"),g("./densitymapbox"),g("./sankey"),g("./indicator"),g("./table"),g("./carpet"),g("./scattercarpet"),g("./contourcarpet"),g("./ohlc"),g("./candlestick"),g("./scatterpolar"),g("./scatterpolargl"),g("./barpolar"),g("./scattersmith"),g("./aggregate"),g("./filter"),g("./groupby"),g("./sort"),g("./calendars")]),ne.exports=T},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(g,ne,ae){ne.exports=g("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(g,ne,ae){ne.exports=g("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(g,ne,ae){ne.exports=g("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(g,ne,ae){ne.exports=g("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(g,ne,ae){ne.exports=g("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(g,ne,ae){ne.exports=g("../src/traces/parcoords")},{"../src/traces/parcoords":896}],34:[function(g,ne,ae){ne.exports=g("../src/traces/pie")},{"../src/traces/pie":907}],35:[function(g,ne,ae){ne.exports=g("../src/traces/pointcloud")},{"../src/traces/pointcloud":916}],36:[function(g,ne,ae){ne.exports=g("../src/traces/sankey")},{"../src/traces/sankey":922}],37:[function(g,ne,ae){ne.exports=g("../src/traces/scatter3d")},{"../src/traces/scatter3d":960}],38:[function(g,ne,ae){ne.exports=g("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":967}],39:[function(g,ne,ae){ne.exports=g("../src/traces/scattergeo")},{"../src/traces/scattergeo":975}],40:[function(g,ne,ae){ne.exports=g("../src/traces/scattergl")},{"../src/traces/scattergl":989}],41:[function(g,ne,ae){ne.exports=g("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":999}],42:[function(g,ne,ae){ne.exports=g("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1007}],43:[function(g,ne,ae){ne.exports=g("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1015}],44:[function(g,ne,ae){ne.exports=g("../src/traces/scattersmith")},{"../src/traces/scattersmith":1022}],45:[function(g,ne,ae){ne.exports=g("../src/traces/scatterternary")},{"../src/traces/scatterternary":1030}],46:[function(g,ne,ae){ne.exports=g("../src/transforms/sort")},{"../src/transforms/sort":1122}],47:[function(g,ne,ae){ne.exports=g("../src/traces/splom")},{"../src/traces/splom":1040}],48:[function(g,ne,ae){ne.exports=g("../src/traces/streamtube")},{"../src/traces/streamtube":1048}],49:[function(g,ne,ae){ne.exports=g("../src/traces/sunburst")},{"../src/traces/sunburst":1056}],50:[function(g,ne,ae){ne.exports=g("../src/traces/surface")},{"../src/traces/surface":1065}],51:[function(g,ne,ae){ne.exports=g("../src/traces/table")},{"../src/traces/table":1073}],52:[function(g,ne,ae){ne.exports=g("../src/traces/treemap")},{"../src/traces/treemap":1084}],53:[function(g,ne,ae){ne.exports=g("../src/traces/violin")},{"../src/traces/violin":1097}],54:[function(g,ne,ae){ne.exports=g("../src/traces/volume")},{"../src/traces/volume":1105}],55:[function(g,ne,ae){ne.exports=g("../src/traces/waterfall")},{"../src/traces/waterfall":1113}],56:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae,g("d3-array"),g("d3-collection"),g("d3-shape"),g("elementary-circuits-directed-graph")):c(T.d3=T.d3||{},T.d3,T.d3,T.d3,null)})(this,function(T,c,M,A,e){e=e&&e.hasOwnProperty("default")?e.default:e;function a(ue){return ue.target.depth}function n(ue){return ue.depth}function t(ue,pe){return pe-1-ue.height}function r(ue,pe){return ue.sourceLinks.length?ue.depth:pe-1}function f(ue){return ue.targetLinks.length?ue.depth:ue.sourceLinks.length?c.min(ue.sourceLinks,a)-1:0}function o(ue){return function(){return ue}}var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue};function p(ue,pe){return y(ue.source,pe.source)||ue.index-pe.index}function d(ue,pe){return y(ue.target,pe.target)||ue.index-pe.index}function y(ue,pe){return ue.partOfCycle===pe.partOfCycle?ue.y0-pe.y0:ue.circularLinkType==="top"||pe.circularLinkType==="bottom"?-1:1}function v(ue){return ue.value}function x(ue){return(ue.y0+ue.y1)/2}function l(ue){return x(ue.source)}function _(ue){return x(ue.target)}function s(ue){return ue.index}function w(ue){return ue.nodes}function b(ue){return ue.links}function h(ue,pe){var ge=ue.get(pe);if(!ge)throw new Error("missing: "+pe);return ge}function m(ue,pe){return pe(ue)}var u=25,L=10,S=.3;function k(){var ue=0,pe=0,ge=1,Te=1,_e=24,De,Oe=s,Ue=r,xe=w,Pe=b,Ve=32,Qe=2,Fe,Le=null;function Ne(){var Mt={nodes:xe.apply(null,arguments),links:Pe.apply(null,arguments)};dt(Mt),P(Mt,Oe,Le),Dt(Mt),zt(Mt),z(Mt,Oe),Ut(Mt,Ve,Oe),Et(Mt);for(var rt=4,ct=0;ct<rt;ct++)X(Mt,Te,Oe),te(Mt,Te,Oe),q(Mt,pe,Te,Oe),X(Mt,Te,Oe),te(Mt,Te,Oe);return ye(Mt,pe,Te),V(Mt,Qe,Te,Oe),Mt}Ne.nodeId=function(Mt){return arguments.length?(Oe=typeof Mt=="function"?Mt:o(Mt),Ne):Oe},Ne.nodeAlign=function(Mt){return arguments.length?(Ue=typeof Mt=="function"?Mt:o(Mt),Ne):Ue},Ne.nodeWidth=function(Mt){return arguments.length?(_e=+Mt,Ne):_e},Ne.nodePadding=function(Mt){return arguments.length?(De=+Mt,Ne):De},Ne.nodes=function(Mt){return arguments.length?(xe=typeof Mt=="function"?Mt:o(Mt),Ne):xe},Ne.links=function(Mt){return arguments.length?(Pe=typeof Mt=="function"?Mt:o(Mt),Ne):Pe},Ne.size=function(Mt){return arguments.length?(ue=pe=0,ge=+Mt[0],Te=+Mt[1],Ne):[ge-ue,Te-pe]},Ne.extent=function(Mt){return arguments.length?(ue=+Mt[0][0],ge=+Mt[1][0],pe=+Mt[0][1],Te=+Mt[1][1],Ne):[[ue,pe],[ge,Te]]},Ne.iterations=function(Mt){return arguments.length?(Ve=+Mt,Ne):Ve},Ne.circularLinkGap=function(Mt){return arguments.length?(Qe=+Mt,Ne):Qe},Ne.nodePaddingRatio=function(Mt){return arguments.length?(Fe=+Mt,Ne):Fe},Ne.sortNodes=function(Mt){return arguments.length?(Le=Mt,Ne):Le},Ne.update=function(Mt){return z(Mt,Oe),Et(Mt),Mt.links.forEach(function(rt){rt.circular&&(rt.circularLinkType=rt.y0+rt.y1<Te?"top":"bottom",rt.source.circularLinkType=rt.circularLinkType,rt.target.circularLinkType=rt.circularLinkType)}),X(Mt,Te,Oe,!1),te(Mt,Te,Oe),V(Mt,Qe,Te,Oe),Mt};function dt(Mt){Mt.nodes.forEach(function(ct,Ze){ct.index=Ze,ct.sourceLinks=[],ct.targetLinks=[]});var rt=M.map(Mt.nodes,Oe);return Mt.links.forEach(function(ct,Ze){ct.index=Ze;var ke=ct.source,Ge=ct.target;(typeof ke=="undefined"?"undefined":i(ke))!=="object"&&(ke=ct.source=h(rt,ke)),(typeof Ge=="undefined"?"undefined":i(Ge))!=="object"&&(Ge=ct.target=h(rt,Ge)),ke.sourceLinks.push(ct),Ge.targetLinks.push(ct)}),Mt}function Dt(Mt){Mt.nodes.forEach(function(rt){rt.partOfCycle=!1,rt.value=Math.max(c.sum(rt.sourceLinks,v),c.sum(rt.targetLinks,v)),rt.sourceLinks.forEach(function(ct){ct.circular&&(rt.partOfCycle=!0,rt.circularLinkType=ct.circularLinkType)}),rt.targetLinks.forEach(function(ct){ct.circular&&(rt.partOfCycle=!0,rt.circularLinkType=ct.circularLinkType)})})}function Xt(Mt){var rt=0,ct=0,Ze=0,ke=0,Ge=c.max(Mt.nodes,function(Je){return Je.column});return Mt.links.forEach(function(Je){Je.circular&&(Je.circularLinkType=="top"?rt=rt+Je.width:ct=ct+Je.width,Je.target.column==0&&(ke=ke+Je.width),Je.source.column==Ge&&(Ze=Ze+Je.width))}),rt=rt>0?rt+u+L:rt,ct=ct>0?ct+u+L:ct,Ze=Ze>0?Ze+u+L:Ze,ke=ke>0?ke+u+L:ke,{top:rt,bottom:ct,left:ke,right:Ze}}function Tt(Mt,rt){var ct=c.max(Mt.nodes,function(At){return At.column}),Ze=ge-ue,ke=Te-pe,Ge=Ze+rt.right+rt.left,Je=ke+rt.top+rt.bottom,it=Ze/Ge,Pt=ke/Je;return ue=ue*it+rt.left,ge=rt.right==0?ge:ge*it,pe=pe*Pt+rt.top,Te=Te*Pt,Mt.nodes.forEach(function(At){At.x0=ue+At.column*((ge-ue-_e)/ct),At.x1=At.x0+_e}),Pt}function zt(Mt){var rt,ct,Ze;for(rt=Mt.nodes,ct=[],Ze=0;rt.length;++Ze,rt=ct,ct=[])rt.forEach(function(ke){ke.depth=Ze,ke.sourceLinks.forEach(function(Ge){ct.indexOf(Ge.target)<0&&!Ge.circular&&ct.push(Ge.target)})});for(rt=Mt.nodes,ct=[],Ze=0;rt.length;++Ze,rt=ct,ct=[])rt.forEach(function(ke){ke.height=Ze,ke.targetLinks.forEach(function(Ge){ct.indexOf(Ge.source)<0&&!Ge.circular&&ct.push(Ge.source)})});Mt.nodes.forEach(function(ke){ke.column=Math.floor(Ue.call(null,ke,Ze))})}function Ut(Mt,rt,ct){var Ze=M.nest().key(function(At){return At.column}).sortKeys(c.ascending).entries(Mt.nodes).map(function(At){return At.values});Je(ct),Pt();for(var ke=1,Ge=rt;Ge>0;--Ge)it(ke*=.99,ct),Pt();function Je(At){if(Fe){var Ot=1/0;Ze.forEach(function(rr){var er=Te*Fe/(rr.length+1);Ot=er<Ot?er:Ot}),De=Ot}var Jt=c.min(Ze,function(rr){return(Te-pe-(rr.length-1)*De)/c.sum(rr,v)});Jt=Jt*S,Mt.links.forEach(function(rr){rr.width=rr.value*Jt});var Bt=Xt(Mt),qt=Tt(Mt,Bt);Jt=Jt*qt,Mt.links.forEach(function(rr){rr.width=rr.value*Jt}),Ze.forEach(function(rr){var er=rr.length;rr.forEach(function(pr,Xr){pr.depth==Ze.length-1&&er==1||pr.depth==0&&er==1?(pr.y0=Te/2-pr.value*Jt,pr.y1=pr.y0+pr.value*Jt):pr.partOfCycle?R(pr,At)==0?(pr.y0=Te/2+Xr,pr.y1=pr.y0+pr.value*Jt):pr.circularLinkType=="top"?(pr.y0=pe+Xr,pr.y1=pr.y0+pr.value*Jt):(pr.y0=Te-pr.value*Jt-Xr,pr.y1=pr.y0+pr.value*Jt):Bt.top==0||Bt.bottom==0?(pr.y0=(Te-pe)/er*Xr,pr.y1=pr.y0+pr.value*Jt):(pr.y0=(Te-pe)/2-er/2+Xr,pr.y1=pr.y0+pr.value*Jt)})})}function it(At,Ot){var Jt=Ze.length;Ze.forEach(function(Bt){var qt=Bt.length,rr=Bt[0].depth;Bt.forEach(function(er){var pr;if((er.sourceLinks.length||er.targetLinks.length)&&!(er.partOfCycle&&R(er,Ot)>0))if(rr==0&&qt==1)pr=er.y1-er.y0,er.y0=Te/2-pr/2,er.y1=Te/2+pr/2;else if(rr==Jt-1&&qt==1)pr=er.y1-er.y0,er.y0=Te/2-pr/2,er.y1=Te/2+pr/2;else{var Xr=0,hn=c.mean(er.sourceLinks,_),$r=c.mean(er.targetLinks,l);hn&&$r?Xr=(hn+$r)/2:Xr=hn||$r;var nt=(Xr-x(er))*At;er.y0+=nt,er.y1+=nt}})})}function Pt(){Ze.forEach(function(At){var Ot,Jt,Bt=pe,qt=At.length,rr;for(At.sort(y),rr=0;rr<qt;++rr)Ot=At[rr],Jt=Bt-Ot.y0,Jt>0&&(Ot.y0+=Jt,Ot.y1+=Jt),Bt=Ot.y1+De;if(Jt=Bt-De-Te,Jt>0)for(Bt=Ot.y0-=Jt,Ot.y1-=Jt,rr=qt-2;rr>=0;--rr)Ot=At[rr],Jt=Ot.y1+De-Bt,Jt>0&&(Ot.y0-=Jt,Ot.y1-=Jt),Bt=Ot.y0})}}function Et(Mt){Mt.nodes.forEach(function(rt){rt.sourceLinks.sort(d),rt.targetLinks.sort(p)}),Mt.nodes.forEach(function(rt){var ct=rt.y0,Ze=ct,ke=rt.y1,Ge=ke;rt.sourceLinks.forEach(function(Je){Je.circular?(Je.y0=ke-Je.width/2,ke=ke-Je.width):(Je.y0=ct+Je.width/2,ct+=Je.width)}),rt.targetLinks.forEach(function(Je){Je.circular?(Je.y1=Ge-Je.width/2,Ge=Ge-Je.width):(Je.y1=Ze+Je.width/2,Ze+=Je.width)})})}return Ne}function P(ue,pe,ge){var Te=0;if(ge===null){for(var _e=[],De=0;De<ue.links.length;De++){var Oe=ue.links[De],Ue=Oe.source.index,xe=Oe.target.index;_e[Ue]||(_e[Ue]=[]),_e[xe]||(_e[xe]=[]),_e[Ue].indexOf(xe)===-1&&_e[Ue].push(xe)}var Pe=e(_e);Pe.sort(function(Le,Ne){return Le.length-Ne.length});var Ve={};for(De=0;De<Pe.length;De++){var Qe=Pe[De],Fe=Qe.slice(-2);Ve[Fe[0]]||(Ve[Fe[0]]={}),Ve[Fe[0]][Fe[1]]=!0}ue.links.forEach(function(Le){var Ne=Le.target.index,dt=Le.source.index;Ne===dt||Ve[dt]&&Ve[dt][Ne]?(Le.circular=!0,Le.circularLinkID=Te,Te=Te+1):Le.circular=!1})}else ue.links.forEach(function(Le){Le.source[ge]<Le.target[ge]?Le.circular=!1:(Le.circular=!0,Le.circularLinkID=Te,Te=Te+1)})}function z(ue,pe){var ge=0,Te=0;ue.links.forEach(function(_e){_e.circular&&(_e.source.circularLinkType||_e.target.circularLinkType?_e.circularLinkType=_e.source.circularLinkType?_e.source.circularLinkType:_e.target.circularLinkType:_e.circularLinkType=ge<Te?"top":"bottom",_e.circularLinkType=="top"?ge=ge+1:Te=Te+1,ue.nodes.forEach(function(De){(m(De,pe)==m(_e.source,pe)||m(De,pe)==m(_e.target,pe))&&(De.circularLinkType=_e.circularLinkType)}))}),ue.links.forEach(function(_e){_e.circular&&(_e.source.circularLinkType==_e.target.circularLinkType&&(_e.circularLinkType=_e.source.circularLinkType),le(_e,pe)&&(_e.circularLinkType=_e.source.circularLinkType))})}function I(ue){var pe=Math.abs(ue.y1-ue.y0),ge=Math.abs(ue.target.x0-ue.source.x1);return Math.atan(ge/pe)}function D(ue,pe){return ue.source.column<pe.target.column?!1:!(ue.target.column>pe.source.column)}function R(ue,pe){var ge=0;ue.sourceLinks.forEach(function(_e){ge=_e.circular&&!le(_e,pe)?ge+1:ge});var Te=0;return ue.targetLinks.forEach(function(_e){Te=_e.circular&&!le(_e,pe)?Te+1:Te}),ge+Te}function B(ue){var pe=ue.source.sourceLinks,ge=0;pe.forEach(function(De){ge=De.circular?ge+1:ge});var Te=ue.target.targetLinks,_e=0;return Te.forEach(function(De){_e=De.circular?_e+1:_e}),!(ge>1||_e>1)}function F(ue,pe,ge){return ue.sort(K),ue.forEach(function(Te,_e){var De=0;if(le(Te,ge)&&B(Te))Te.circularPathData.verticalBuffer=De+Te.width/2;else{var Oe=0;for(Oe;Oe<_e;Oe++)if(D(ue[_e],ue[Oe])){var Ue=ue[Oe].circularPathData.verticalBuffer+ue[Oe].width/2+pe;De=Ue>De?Ue:De}Te.circularPathData.verticalBuffer=De+Te.width/2}}),ue}function V(ue,pe,ge,Te){var _e=5,De=c.min(ue.links,function(xe){return xe.source.y0});ue.links.forEach(function(xe){xe.circular&&(xe.circularPathData={})});var Oe=ue.links.filter(function(xe){return xe.circularLinkType=="top"});F(Oe,pe,Te);var Ue=ue.links.filter(function(xe){return xe.circularLinkType=="bottom"});F(Ue,pe,Te),ue.links.forEach(function(xe){if(xe.circular){if(xe.circularPathData.arcRadius=xe.width+L,xe.circularPathData.leftNodeBuffer=_e,xe.circularPathData.rightNodeBuffer=_e,xe.circularPathData.sourceWidth=xe.source.x1-xe.source.x0,xe.circularPathData.sourceX=xe.source.x0+xe.circularPathData.sourceWidth,xe.circularPathData.targetX=xe.target.x0,xe.circularPathData.sourceY=xe.y0,xe.circularPathData.targetY=xe.y1,le(xe,Te)&&B(xe))xe.circularPathData.leftSmallArcRadius=L+xe.width/2,xe.circularPathData.leftLargeArcRadius=L+xe.width/2,xe.circularPathData.rightSmallArcRadius=L+xe.width/2,xe.circularPathData.rightLargeArcRadius=L+xe.width/2,xe.circularLinkType=="bottom"?(xe.circularPathData.verticalFullExtent=xe.source.y1+u+xe.circularPathData.verticalBuffer,xe.circularPathData.verticalLeftInnerExtent=xe.circularPathData.verticalFullExtent-xe.circularPathData.leftLargeArcRadius,xe.circularPathData.verticalRightInnerExtent=xe.circularPathData.verticalFullExtent-xe.circularPathData.rightLargeArcRadius):(xe.circularPathData.verticalFullExtent=xe.source.y0-u-xe.circularPathData.verticalBuffer,xe.circularPathData.verticalLeftInnerExtent=xe.circularPathData.verticalFullExtent+xe.circularPathData.leftLargeArcRadius,xe.circularPathData.verticalRightInnerExtent=xe.circularPathData.verticalFullExtent+xe.circularPathData.rightLargeArcRadius);else{var Pe=xe.source.column,Ve=xe.circularLinkType,Qe=ue.links.filter(function(Ne){return Ne.source.column==Pe&&Ne.circularLinkType==Ve});xe.circularLinkType=="bottom"?Qe.sort(G):Qe.sort(J);var Fe=0;Qe.forEach(function(Ne,dt){Ne.circularLinkID==xe.circularLinkID&&(xe.circularPathData.leftSmallArcRadius=L+xe.width/2+Fe,xe.circularPathData.leftLargeArcRadius=L+xe.width/2+dt*pe+Fe),Fe=Fe+Ne.width}),Pe=xe.target.column,Qe=ue.links.filter(function(Ne){return Ne.target.column==Pe&&Ne.circularLinkType==Ve}),xe.circularLinkType=="bottom"?Qe.sort(re):Qe.sort(Z),Fe=0,Qe.forEach(function(Ne,dt){Ne.circularLinkID==xe.circularLinkID&&(xe.circularPathData.rightSmallArcRadius=L+xe.width/2+Fe,xe.circularPathData.rightLargeArcRadius=L+xe.width/2+dt*pe+Fe),Fe=Fe+Ne.width}),xe.circularLinkType=="bottom"?(xe.circularPathData.verticalFullExtent=Math.max(ge,xe.source.y1,xe.target.y1)+u+xe.circularPathData.verticalBuffer,xe.circularPathData.verticalLeftInnerExtent=xe.circularPathData.verticalFullExtent-xe.circularPathData.leftLargeArcRadius,xe.circularPathData.verticalRightInnerExtent=xe.circularPathData.verticalFullExtent-xe.circularPathData.rightLargeArcRadius):(xe.circularPathData.verticalFullExtent=De-u-xe.circularPathData.verticalBuffer,xe.circularPathData.verticalLeftInnerExtent=xe.circularPathData.verticalFullExtent+xe.circularPathData.leftLargeArcRadius,xe.circularPathData.verticalRightInnerExtent=xe.circularPathData.verticalFullExtent+xe.circularPathData.rightLargeArcRadius)}xe.circularPathData.leftInnerExtent=xe.circularPathData.sourceX+xe.circularPathData.leftNodeBuffer,xe.circularPathData.rightInnerExtent=xe.circularPathData.targetX-xe.circularPathData.rightNodeBuffer,xe.circularPathData.leftFullExtent=xe.circularPathData.sourceX+xe.circularPathData.leftLargeArcRadius+xe.circularPathData.leftNodeBuffer,xe.circularPathData.rightFullExtent=xe.circularPathData.targetX-xe.circularPathData.rightLargeArcRadius-xe.circularPathData.rightNodeBuffer}if(xe.circular)xe.path=Y(xe);else{var Le=A.linkHorizontal().source(function(Ne){var dt=Ne.source.x0+(Ne.source.x1-Ne.source.x0),Dt=Ne.y0;return[dt,Dt]}).target(function(Ne){var dt=Ne.target.x0,Dt=Ne.y1;return[dt,Dt]});xe.path=Le(xe)}})}function Y(ue){var pe="";return ue.circularLinkType=="top"?pe="M"+ue.circularPathData.sourceX+" "+ue.circularPathData.sourceY+" L"+ue.circularPathData.leftInnerExtent+" "+ue.circularPathData.sourceY+" A"+ue.circularPathData.leftLargeArcRadius+" "+ue.circularPathData.leftSmallArcRadius+" 0 0 0 "+ue.circularPathData.leftFullExtent+" "+(ue.circularPathData.sourceY-ue.circularPathData.leftSmallArcRadius)+" L"+ue.circularPathData.leftFullExtent+" "+ue.circularPathData.verticalLeftInnerExtent+" A"+ue.circularPathData.leftLargeArcRadius+" "+ue.circularPathData.leftLargeArcRadius+" 0 0 0 "+ue.circularPathData.leftInnerExtent+" "+ue.circularPathData.verticalFullExtent+" L"+ue.circularPathData.rightInnerExtent+" "+ue.circularPathData.verticalFullExtent+" A"+ue.circularPathData.rightLargeArcRadius+" "+ue.circularPathData.rightLargeArcRadius+" 0 0 0 "+ue.circularPathData.rightFullExtent+" "+ue.circularPathData.verticalRightInnerExtent+" L"+ue.circularPathData.rightFullExtent+" "+(ue.circularPathData.targetY-ue.circularPathData.rightSmallArcRadius)+" A"+ue.circularPathData.rightLargeArcRadius+" "+ue.circularPathData.rightSmallArcRadius+" 0 0 0 "+ue.circularPathData.rightInnerExtent+" "+ue.circularPathData.targetY+" L"+ue.circularPathData.targetX+" "+ue.circularPathData.targetY:pe="M"+ue.circularPathData.sourceX+" "+ue.circularPathData.sourceY+" L"+ue.circularPathData.leftInnerExtent+" "+ue.circularPathData.sourceY+" A"+ue.circularPathData.leftLargeArcRadius+" "+ue.circularPathData.leftSmallArcRadius+" 0 0 1 "+ue.circularPathData.leftFullExtent+" "+(ue.circularPathData.sourceY+ue.circularPathData.leftSmallArcRadius)+" L"+ue.circularPathData.leftFullExtent+" "+ue.circularPathData.verticalLeftInnerExtent+" A"+ue.circularPathData.leftLargeArcRadius+" "+ue.circularPathData.leftLargeArcRadius+" 0 0 1 "+ue.circularPathData.leftInnerExtent+" "+ue.circularPathData.verticalFullExtent+" L"+ue.circularPathData.rightInnerExtent+" "+ue.circularPathData.verticalFullExtent+" A"+ue.circularPathData.rightLargeArcRadius+" "+ue.circularPathData.rightLargeArcRadius+" 0 0 1 "+ue.circularPathData.rightFullExtent+" "+ue.circularPathData.verticalRightInnerExtent+" L"+ue.circularPathData.rightFullExtent+" "+(ue.circularPathData.targetY+ue.circularPathData.rightSmallArcRadius)+" A"+ue.circularPathData.rightLargeArcRadius+" "+ue.circularPathData.rightSmallArcRadius+" 0 0 1 "+ue.circularPathData.rightInnerExtent+" "+ue.circularPathData.targetY+" L"+ue.circularPathData.targetX+" "+ue.circularPathData.targetY,pe}function K(ue,pe){return se(ue)==se(pe)?ue.circularLinkType=="bottom"?G(ue,pe):J(ue,pe):se(pe)-se(ue)}function J(ue,pe){return ue.y0-pe.y0}function G(ue,pe){return pe.y0-ue.y0}function Z(ue,pe){return ue.y1-pe.y1}function re(ue,pe){return pe.y1-ue.y1}function se(ue){return ue.target.column-ue.source.column}function oe(ue){return ue.target.x0-ue.source.x1}function N(ue,pe){var ge=I(ue),Te=oe(pe)/Math.tan(ge),_e=ie(ue)=="up"?ue.y1+Te:ue.y1-Te;return _e}function U(ue,pe){var ge=I(ue),Te=oe(pe)/Math.tan(ge),_e=ie(ue)=="up"?ue.y1-Te:ue.y1+Te;return _e}function q(ue,pe,ge,Te){ue.links.forEach(function(_e){if(!_e.circular&&_e.target.column-_e.source.column>1){var De=_e.source.column+1,Oe=_e.target.column-1,Ue=1,xe=Oe-De+1;for(Ue=1;De<=Oe;De++,Ue++)ue.nodes.forEach(function(Pe){if(Pe.column==De){var Ve=Ue/(xe+1),Qe=Math.pow(1-Ve,3),Fe=3*Ve*Math.pow(1-Ve,2),Le=3*Math.pow(Ve,2)*(1-Ve),Ne=Math.pow(Ve,3),dt=Qe*_e.y0+Fe*_e.y0+Le*_e.y1+Ne*_e.y1,Dt=dt-_e.width/2,Xt=dt+_e.width/2,Tt;Dt>Pe.y0&&Dt<Pe.y1?(Tt=Pe.y1-Dt+10,Tt=Pe.circularLinkType=="bottom"?Tt:-Tt,Pe=W(Pe,Tt,pe,ge),ue.nodes.forEach(function(zt){m(zt,Te)==m(Pe,Te)||zt.column!=Pe.column||Q(Pe,zt)&&W(zt,Tt,pe,ge)})):Xt>Pe.y0&&Xt<Pe.y1?(Tt=Xt-Pe.y0+10,Pe=W(Pe,Tt,pe,ge),ue.nodes.forEach(function(zt){m(zt,Te)==m(Pe,Te)||zt.column!=Pe.column||zt.y0<Pe.y1&&zt.y1>Pe.y1&&W(zt,Tt,pe,ge)})):Dt<Pe.y0&&Xt>Pe.y1&&(Tt=Xt-Pe.y0+10,Pe=W(Pe,Tt,pe,ge),ue.nodes.forEach(function(zt){m(zt,Te)==m(Pe,Te)||zt.column!=Pe.column||zt.y0<Pe.y1&&zt.y1>Pe.y1&&W(zt,Tt,pe,ge)}))}})}})}function Q(ue,pe){return ue.y0>pe.y0&&ue.y0<pe.y1||ue.y1>pe.y0&&ue.y1<pe.y1?!0:ue.y0<pe.y0&&ue.y1>pe.y1}function W(ue,pe,ge,Te){return ue.y0+pe>=ge&&ue.y1+pe<=Te&&(ue.y0=ue.y0+pe,ue.y1=ue.y1+pe,ue.targetLinks.forEach(function(_e){_e.y1=_e.y1+pe}),ue.sourceLinks.forEach(function(_e){_e.y0=_e.y0+pe})),ue}function X(ue,pe,ge,Te){ue.nodes.forEach(function(_e){Te&&_e.y+(_e.y1-_e.y0)>pe&&(_e.y=_e.y-(_e.y+(_e.y1-_e.y0)-pe));var De=ue.links.filter(function(xe){return m(xe.source,ge)==m(_e,ge)}),Oe=De.length;Oe>1&&De.sort(function(xe,Pe){if(!xe.circular&&!Pe.circular){if(xe.target.column==Pe.target.column)return xe.y1-Pe.y1;if(ee(xe,Pe)){if(xe.target.column>Pe.target.column){var Ve=U(Pe,xe);return xe.y1-Ve}if(Pe.target.column>xe.target.column){var Qe=U(xe,Pe);return Qe-Pe.y1}}else return xe.y1-Pe.y1}if(xe.circular&&!Pe.circular)return xe.circularLinkType=="top"?-1:1;if(Pe.circular&&!xe.circular)return Pe.circularLinkType=="top"?1:-1;if(xe.circular&&Pe.circular)return xe.circularLinkType===Pe.circularLinkType&&xe.circularLinkType=="top"?xe.target.column===Pe.target.column?xe.target.y1-Pe.target.y1:Pe.target.column-xe.target.column:xe.circularLinkType===Pe.circularLinkType&&xe.circularLinkType=="bottom"?xe.target.column===Pe.target.column?Pe.target.y1-xe.target.y1:xe.target.column-Pe.target.column:xe.circularLinkType=="top"?-1:1});var Ue=_e.y0;De.forEach(function(xe){xe.y0=Ue+xe.width/2,Ue=Ue+xe.width}),De.forEach(function(xe,Pe){if(xe.circularLinkType=="bottom"){var Ve=Pe+1,Qe=0;for(Ve;Ve<Oe;Ve++)Qe=Qe+De[Ve].width;xe.y0=_e.y1-Qe-xe.width/2}})})}function te(ue,pe,ge){ue.nodes.forEach(function(Te){var _e=ue.links.filter(function(Ue){return m(Ue.target,ge)==m(Te,ge)}),De=_e.length;De>1&&_e.sort(function(Ue,xe){if(!Ue.circular&&!xe.circular){if(Ue.source.column==xe.source.column)return Ue.y0-xe.y0;if(ee(Ue,xe)){if(xe.source.column<Ue.source.column){var Pe=N(xe,Ue);return Ue.y0-Pe}if(Ue.source.column<xe.source.column){var Ve=N(Ue,xe);return Ve-xe.y0}}else return Ue.y0-xe.y0}if(Ue.circular&&!xe.circular)return Ue.circularLinkType=="top"?-1:1;if(xe.circular&&!Ue.circular)return xe.circularLinkType=="top"?1:-1;if(Ue.circular&&xe.circular)return Ue.circularLinkType===xe.circularLinkType&&Ue.circularLinkType=="top"?Ue.source.column===xe.source.column?Ue.source.y1-xe.source.y1:Ue.source.column-xe.source.column:Ue.circularLinkType===xe.circularLinkType&&Ue.circularLinkType=="bottom"?Ue.source.column===xe.source.column?Ue.source.y1-xe.source.y1:xe.source.column-Ue.source.column:Ue.circularLinkType=="top"?-1:1});var Oe=Te.y0;_e.forEach(function(Ue){Ue.y1=Oe+Ue.width/2,Oe=Oe+Ue.width}),_e.forEach(function(Ue,xe){if(Ue.circularLinkType=="bottom"){var Pe=xe+1,Ve=0;for(Pe;Pe<De;Pe++)Ve=Ve+_e[Pe].width;Ue.y1=Te.y1-Ve-Ue.width/2}})})}function ee(ue,pe){return ie(ue)==ie(pe)}function ie(ue){return ue.y0-ue.y1>0?"up":"down"}function le(ue,pe){return m(ue.source,pe)==m(ue.target,pe)}function ye(ue,pe,ge){var Te=ue.nodes,_e=ue.links,De=!1,Oe=!1;if(_e.forEach(function(Fe){Fe.circularLinkType=="top"?De=!0:Fe.circularLinkType=="bottom"&&(Oe=!0)}),De==!1||Oe==!1){var Ue=c.min(Te,function(Fe){return Fe.y0}),xe=c.max(Te,function(Fe){return Fe.y1}),Pe=xe-Ue,Ve=ge-pe,Qe=Ve/Pe;Te.forEach(function(Fe){var Le=(Fe.y1-Fe.y0)*Qe;Fe.y0=(Fe.y0-Ue)*Qe,Fe.y1=Fe.y0+Le}),_e.forEach(function(Fe){Fe.y0=(Fe.y0-Ue)*Qe,Fe.y1=(Fe.y1-Ue)*Qe,Fe.width=Fe.width*Qe})}}T.sankeyCircular=k,T.sankeyCenter=f,T.sankeyLeft=n,T.sankeyRight=t,T.sankeyJustify=r,Object.defineProperty(T,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae,g("d3-array"),g("d3-collection"),g("d3-shape")):c(T.d3=T.d3||{},T.d3,T.d3,T.d3)})(this,function(T,c,M,A){function e(L){return L.target.depth}function a(L){return L.depth}function n(L,S){return S-1-L.height}function t(L,S){return L.sourceLinks.length?L.depth:S-1}function r(L){return L.targetLinks.length?L.depth:L.sourceLinks.length?c.min(L.sourceLinks,e)-1:0}function f(L){return function(){return L}}function o(L,S){return p(L.source,S.source)||L.index-S.index}function i(L,S){return p(L.target,S.target)||L.index-S.index}function p(L,S){return L.y0-S.y0}function d(L){return L.value}function y(L){return(L.y0+L.y1)/2}function v(L){return y(L.source)*L.value}function x(L){return y(L.target)*L.value}function l(L){return L.index}function _(L){return L.nodes}function s(L){return L.links}function w(L,S){var k=L.get(S);if(!k)throw new Error("missing: "+S);return k}var b=function(){var L=0,S=0,k=1,P=1,z=24,I=8,D=l,R=t,B=_,F=s,V=32,Y=2/3;function K(){var oe={nodes:B.apply(null,arguments),links:F.apply(null,arguments)};return J(oe),G(oe),Z(oe),re(oe),se(oe),oe}K.update=function(oe){return se(oe),oe},K.nodeId=function(oe){return arguments.length?(D=typeof oe=="function"?oe:f(oe),K):D},K.nodeAlign=function(oe){return arguments.length?(R=typeof oe=="function"?oe:f(oe),K):R},K.nodeWidth=function(oe){return arguments.length?(z=+oe,K):z},K.nodePadding=function(oe){return arguments.length?(I=+oe,K):I},K.nodes=function(oe){return arguments.length?(B=typeof oe=="function"?oe:f(oe),K):B},K.links=function(oe){return arguments.length?(F=typeof oe=="function"?oe:f(oe),K):F},K.size=function(oe){return arguments.length?(L=S=0,k=+oe[0],P=+oe[1],K):[k-L,P-S]},K.extent=function(oe){return arguments.length?(L=+oe[0][0],k=+oe[1][0],S=+oe[0][1],P=+oe[1][1],K):[[L,S],[k,P]]},K.iterations=function(oe){return arguments.length?(V=+oe,K):V};function J(oe){oe.nodes.forEach(function(U,q){U.index=q,U.sourceLinks=[],U.targetLinks=[]});var N=M.map(oe.nodes,D);oe.links.forEach(function(U,q){U.index=q;var Q=U.source,W=U.target;typeof Q!="object"&&(Q=U.source=w(N,Q)),typeof W!="object"&&(W=U.target=w(N,W)),Q.sourceLinks.push(U),W.targetLinks.push(U)})}function G(oe){oe.nodes.forEach(function(N){N.value=Math.max(c.sum(N.sourceLinks,d),c.sum(N.targetLinks,d))})}function Z(oe){var N,U,q;for(N=oe.nodes,U=[],q=0;N.length;++q,N=U,U=[])N.forEach(function(W){W.depth=q,W.sourceLinks.forEach(function(X){U.indexOf(X.target)<0&&U.push(X.target)})});for(N=oe.nodes,U=[],q=0;N.length;++q,N=U,U=[])N.forEach(function(W){W.height=q,W.targetLinks.forEach(function(X){U.indexOf(X.source)<0&&U.push(X.source)})});var Q=(k-L-z)/(q-1);oe.nodes.forEach(function(W){W.x1=(W.x0=L+Math.max(0,Math.min(q-1,Math.floor(R.call(null,W,q))))*Q)+z})}function re(oe){var N=M.nest().key(function(ee){return ee.x0}).sortKeys(c.ascending).entries(oe.nodes).map(function(ee){return ee.values});Q(),te();for(var U=1,q=V;q>0;--q)X(U*=.99),te(),W(U),te();function Q(){var ee=c.max(N,function(ye){return ye.length}),ie=Y*(P-S)/(ee-1);I>ie&&(I=ie);var le=c.min(N,function(ye){return(P-S-(ye.length-1)*I)/c.sum(ye,d)});N.forEach(function(ye){ye.forEach(function(ue,pe){ue.y1=(ue.y0=pe)+ue.value*le})}),oe.links.forEach(function(ye){ye.width=ye.value*le})}function W(ee){N.forEach(function(ie){ie.forEach(function(le){if(le.targetLinks.length){var ye=(c.sum(le.targetLinks,v)/c.sum(le.targetLinks,d)-y(le))*ee;le.y0+=ye,le.y1+=ye}})})}function X(ee){N.slice().reverse().forEach(function(ie){ie.forEach(function(le){if(le.sourceLinks.length){var ye=(c.sum(le.sourceLinks,x)/c.sum(le.sourceLinks,d)-y(le))*ee;le.y0+=ye,le.y1+=ye}})})}function te(){N.forEach(function(ee){var ie,le,ye=S,ue=ee.length,pe;for(ee.sort(p),pe=0;pe<ue;++pe)ie=ee[pe],le=ye-ie.y0,le>0&&(ie.y0+=le,ie.y1+=le),ye=ie.y1+I;if(le=ye-I-P,le>0)for(ye=ie.y0-=le,ie.y1-=le,pe=ue-2;pe>=0;--pe)ie=ee[pe],le=ie.y1+I-ye,le>0&&(ie.y0-=le,ie.y1-=le),ye=ie.y0})}}function se(oe){oe.nodes.forEach(function(N){N.sourceLinks.sort(i),N.targetLinks.sort(o)}),oe.nodes.forEach(function(N){var U=N.y0,q=U;N.sourceLinks.forEach(function(Q){Q.y0=U+Q.width/2,U+=Q.width}),N.targetLinks.forEach(function(Q){Q.y1=q+Q.width/2,q+=Q.width})})}return K};function h(L){return[L.source.x1,L.y0]}function m(L){return[L.target.x0,L.y1]}var u=function(){return A.linkHorizontal().source(h).target(m)};T.sankey=b,T.sankeyCenter=r,T.sankeyLeft=a,T.sankeyRight=n,T.sankeyJustify=t,T.sankeyLinkHorizontal=u,Object.defineProperty(T,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(g,ne,ae){(function(){var T={version:"3.8.0"},c=[].slice,M=function(fe){return c.call(fe)},A=self.document;function e(fe){return fe&&(fe.ownerDocument||fe.document||fe).documentElement}function a(fe){return fe&&(fe.ownerDocument&&fe.ownerDocument.defaultView||fe.document&&fe||fe.defaultView)}if(A)try{M(A.documentElement.childNodes)[0].nodeType}catch{M=function(be){for(var Ee=be.length,Be=new Array(Ee);Ee--;)Be[Ee]=be[Ee];return Be}}if(Date.now||(Date.now=function(){return+new Date}),A)try{A.createElement("DIV").style.setProperty("opacity",0,"")}catch{var n=this.Element.prototype,t=n.setAttribute,r=n.setAttributeNS,f=this.CSSStyleDeclaration.prototype,o=f.setProperty;n.setAttribute=function(be,Ee){t.call(this,be,Ee+"")},n.setAttributeNS=function(be,Ee,Be){r.call(this,be,Ee,Be+"")},f.setProperty=function(be,Ee,Be){o.call(this,be,Ee+"",Be)}}T.ascending=i;function i(fe,be){return fe<be?-1:fe>be?1:fe>=be?0:NaN}T.descending=function(fe,be){return be<fe?-1:be>fe?1:be>=fe?0:NaN},T.min=function(fe,be){var Ee=-1,Be=fe.length,ze,We;if(arguments.length===1){for(;++Ee<Be;)if((We=fe[Ee])!=null&&We>=We){ze=We;break}for(;++Ee<Be;)(We=fe[Ee])!=null&&ze>We&&(ze=We)}else{for(;++Ee<Be;)if((We=be.call(fe,fe[Ee],Ee))!=null&&We>=We){ze=We;break}for(;++Ee<Be;)(We=be.call(fe,fe[Ee],Ee))!=null&&ze>We&&(ze=We)}return ze},T.max=function(fe,be){var Ee=-1,Be=fe.length,ze,We;if(arguments.length===1){for(;++Ee<Be;)if((We=fe[Ee])!=null&&We>=We){ze=We;break}for(;++Ee<Be;)(We=fe[Ee])!=null&&We>ze&&(ze=We)}else{for(;++Ee<Be;)if((We=be.call(fe,fe[Ee],Ee))!=null&&We>=We){ze=We;break}for(;++Ee<Be;)(We=be.call(fe,fe[Ee],Ee))!=null&&We>ze&&(ze=We)}return ze},T.extent=function(fe,be){var Ee=-1,Be=fe.length,ze,We,yt;if(arguments.length===1){for(;++Ee<Be;)if((We=fe[Ee])!=null&&We>=We){ze=yt=We;break}for(;++Ee<Be;)(We=fe[Ee])!=null&&(ze>We&&(ze=We),yt<We&&(yt=We))}else{for(;++Ee<Be;)if((We=be.call(fe,fe[Ee],Ee))!=null&&We>=We){ze=yt=We;break}for(;++Ee<Be;)(We=be.call(fe,fe[Ee],Ee))!=null&&(ze>We&&(ze=We),yt<We&&(yt=We))}return[ze,yt]};function p(fe){return fe===null?NaN:+fe}function d(fe){return!isNaN(fe)}T.sum=function(fe,be){var Ee=0,Be=fe.length,ze,We=-1;if(arguments.length===1)for(;++We<Be;)d(ze=+fe[We])&&(Ee+=ze);else for(;++We<Be;)d(ze=+be.call(fe,fe[We],We))&&(Ee+=ze);return Ee},T.mean=function(fe,be){var Ee=0,Be=fe.length,ze,We=-1,yt=Be;if(arguments.length===1)for(;++We<Be;)d(ze=p(fe[We]))?Ee+=ze:--yt;else for(;++We<Be;)d(ze=p(be.call(fe,fe[We],We)))?Ee+=ze:--yt;if(yt)return Ee/yt},T.quantile=function(fe,be){var Ee=(fe.length-1)*be+1,Be=Math.floor(Ee),ze=+fe[Be-1],We=Ee-Be;return We?ze+We*(fe[Be]-ze):ze},T.median=function(fe,be){var Ee=[],Be=fe.length,ze,We=-1;if(arguments.length===1)for(;++We<Be;)d(ze=p(fe[We]))&&Ee.push(ze);else for(;++We<Be;)d(ze=p(be.call(fe,fe[We],We)))&&Ee.push(ze);if(Ee.length)return T.quantile(Ee.sort(i),.5)},T.variance=function(fe,be){var Ee=fe.length,Be=0,ze,We,yt=0,ht=-1,kt=0;if(arguments.length===1)for(;++ht<Ee;)d(ze=p(fe[ht]))&&(We=ze-Be,Be+=We/++kt,yt+=We*(ze-Be));else for(;++ht<Ee;)d(ze=p(be.call(fe,fe[ht],ht)))&&(We=ze-Be,Be+=We/++kt,yt+=We*(ze-Be));if(kt>1)return yt/(kt-1)},T.deviation=function(){var fe=T.variance.apply(this,arguments);return fe&&Math.sqrt(fe)};function y(fe){return{left:function(be,Ee,Be,ze){for(arguments.length<3&&(Be=0),arguments.length<4&&(ze=be.length);Be<ze;){var We=Be+ze>>>1;fe(be[We],Ee)<0?Be=We+1:ze=We}return Be},right:function(be,Ee,Be,ze){for(arguments.length<3&&(Be=0),arguments.length<4&&(ze=be.length);Be<ze;){var We=Be+ze>>>1;fe(be[We],Ee)>0?ze=We:Be=We+1}return Be}}}var v=y(i);T.bisectLeft=v.left,T.bisect=T.bisectRight=v.right,T.bisector=function(fe){return y(fe.length===1?function(be,Ee){return i(fe(be),Ee)}:fe)},T.shuffle=function(fe,be,Ee){(Be=arguments.length)<3&&(Ee=fe.length,Be<2&&(be=0));for(var Be=Ee-be,ze,We;Be;)We=Math.random()*Be--|0,ze=fe[Be+be],fe[Be+be]=fe[We+be],fe[We+be]=ze;return fe},T.permute=function(fe,be){for(var Ee=be.length,Be=new Array(Ee);Ee--;)Be[Ee]=fe[be[Ee]];return Be},T.pairs=function(fe){for(var be=0,Ee=fe.length-1,Be=fe[0],ze=new Array(Ee<0?0:Ee);be<Ee;)ze[be]=[Be,Be=fe[++be]];return ze},T.transpose=function(fe){if(!(We=fe.length))return[];for(var be=-1,Ee=T.min(fe,x),Be=new Array(Ee);++be<Ee;)for(var ze=-1,We,yt=Be[be]=new Array(We);++ze<We;)yt[ze]=fe[ze][be];return Be};function x(fe){return fe.length}T.zip=function(){return T.transpose(arguments)},T.keys=function(fe){var be=[];for(var Ee in fe)be.push(Ee);return be},T.values=function(fe){var be=[];for(var Ee in fe)be.push(fe[Ee]);return be},T.entries=function(fe){var be=[];for(var Ee in fe)be.push({key:Ee,value:fe[Ee]});return be},T.merge=function(fe){for(var be=fe.length,Ee,Be=-1,ze=0,We,yt;++Be<be;)ze+=fe[Be].length;for(We=new Array(ze);--be>=0;)for(yt=fe[be],Ee=yt.length;--Ee>=0;)We[--ze]=yt[Ee];return We};var l=Math.abs;T.range=function(fe,be,Ee){if(arguments.length<3&&(Ee=1,arguments.length<2&&(be=fe,fe=0)),(be-fe)/Ee==1/0)throw new Error("infinite range");var Be=[],ze=_(l(Ee)),We=-1,yt;if(fe*=ze,be*=ze,Ee*=ze,Ee<0)for(;(yt=fe+Ee*++We)>be;)Be.push(yt/ze);else for(;(yt=fe+Ee*++We)<be;)Be.push(yt/ze);return Be};function _(fe){for(var be=1;fe*be%1;)be*=10;return be}function s(fe,be){for(var Ee in be)Object.defineProperty(fe.prototype,Ee,{value:be[Ee],enumerable:!1})}T.map=function(fe,be){var Ee=new w;if(fe instanceof w)fe.forEach(function(ht,kt){Ee.set(ht,kt)});else if(Array.isArray(fe)){var Be=-1,ze=fe.length,We;if(arguments.length===1)for(;++Be<ze;)Ee.set(Be,fe[Be]);else for(;++Be<ze;)Ee.set(be.call(fe,We=fe[Be],Be),We)}else for(var yt in fe)Ee.set(yt,fe[yt]);return Ee};function w(){this._=Object.create(null)}var b="__proto__",h="\0";s(w,{has:L,get:function(fe){return this._[m(fe)]},set:function(fe,be){return this._[m(fe)]=be},remove:S,keys:k,values:function(){var fe=[];for(var be in this._)fe.push(this._[be]);return fe},entries:function(){var fe=[];for(var be in this._)fe.push({key:u(be),value:this._[be]});return fe},size:P,empty:z,forEach:function(fe){for(var be in this._)fe.call(this,u(be),this._[be])}});function m(fe){return(fe+="")===b||fe[0]===h?h+fe:fe}function u(fe){return(fe+="")[0]===h?fe.slice(1):fe}function L(fe){return m(fe)in this._}function S(fe){return(fe=m(fe))in this._&&delete this._[fe]}function k(){var fe=[];for(var be in this._)fe.push(u(be));return fe}function P(){var fe=0;for(var be in this._)++fe;return fe}function z(){for(var fe in this._)return!1;return!0}T.nest=function(){var fe={},be=[],Ee=[],Be,ze;function We(ht,kt,Vt){if(Vt>=be.length)return ze?ze.call(fe,kt):Be?kt.sort(Be):kt;for(var Zt=-1,Qt=kt.length,Ar=be[Vt++],Kr,un,Sr,Br=new w,Gr;++Zt<Qt;)(Gr=Br.get(Kr=Ar(un=kt[Zt])))?Gr.push(un):Br.set(Kr,[un]);return ht?(un=ht(),Sr=function(an,ln){un.set(an,We(ht,ln,Vt))}):(un={},Sr=function(an,ln){un[an]=We(ht,ln,Vt)}),Br.forEach(Sr),un}function yt(ht,kt){if(kt>=be.length)return ht;var Vt=[],Zt=Ee[kt++];return ht.forEach(function(Qt,Ar){Vt.push({key:Qt,values:yt(Ar,kt)})}),Zt?Vt.sort(function(Qt,Ar){return Zt(Qt.key,Ar.key)}):Vt}return fe.map=function(ht,kt){return We(kt,ht,0)},fe.entries=function(ht){return yt(We(T.map,ht,0),0)},fe.key=function(ht){return be.push(ht),fe},fe.sortKeys=function(ht){return Ee[be.length-1]=ht,fe},fe.sortValues=function(ht){return Be=ht,fe},fe.rollup=function(ht){return ze=ht,fe},fe},T.set=function(fe){var be=new I;if(fe)for(var Ee=0,Be=fe.length;Ee<Be;++Ee)be.add(fe[Ee]);return be};function I(){this._=Object.create(null)}s(I,{has:L,add:function(fe){return this._[m(fe+="")]=!0,fe},remove:S,values:k,size:P,empty:z,forEach:function(fe){for(var be in this._)fe.call(this,u(be))}}),T.behavior={};function D(fe){return fe}T.rebind=function(fe,be){for(var Ee=1,Be=arguments.length,ze;++Ee<Be;)fe[ze=arguments[Ee]]=R(fe,be,be[ze]);return fe};function R(fe,be,Ee){return function(){var Be=Ee.apply(be,arguments);return Be===be?fe:Be}}function B(fe,be){if(be in fe)return be;be=be.charAt(0).toUpperCase()+be.slice(1);for(var Ee=0,Be=F.length;Ee<Be;++Ee){var ze=F[Ee]+be;if(ze in fe)return ze}}var F=["webkit","ms","moz","Moz","o","O"];function V(){}T.dispatch=function(){for(var fe=new Y,be=-1,Ee=arguments.length;++be<Ee;)fe[arguments[be]]=K(fe);return fe};function Y(){}Y.prototype.on=function(fe,be){var Ee=fe.indexOf("."),Be="";if(Ee>=0&&(Be=fe.slice(Ee+1),fe=fe.slice(0,Ee)),fe)return arguments.length<2?this[fe].on(Be):this[fe].on(Be,be);if(arguments.length===2){if(be==null)for(fe in this)this.hasOwnProperty(fe)&&this[fe].on(Be,null);return this}};function K(fe){var be=[],Ee=new w;function Be(){for(var ze=be,We=-1,yt=ze.length,ht;++We<yt;)(ht=ze[We].on)&&ht.apply(this,arguments);return fe}return Be.on=function(ze,We){var yt=Ee.get(ze),ht;return arguments.length<2?yt&&yt.on:(yt&&(yt.on=null,be=be.slice(0,ht=be.indexOf(yt)).concat(be.slice(ht+1)),Ee.remove(ze)),We&&be.push(Ee.set(ze,{on:We})),fe)},Be}T.event=null;function J(){T.event.preventDefault()}function G(){for(var fe=T.event,be;be=fe.sourceEvent;)fe=be;return fe}function Z(fe){for(var be=new Y,Ee=0,Be=arguments.length;++Ee<Be;)be[arguments[Ee]]=K(be);return be.of=function(ze,We){return function(yt){try{var ht=yt.sourceEvent=T.event;yt.target=fe,T.event=yt,be[yt.type].apply(ze,We)}finally{T.event=ht}}},be}T.requote=function(fe){return fe.replace(re,"\\$&")};var re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,se=function(fe,be){for(var Ee in be)fe[Ee]=be[Ee]};function oe(fe){return se(fe,Q),fe}var N=function(fe,be){return be.querySelector(fe)},U=function(fe,be){return be.querySelectorAll(fe)},q=function(fe,be){var Ee=fe.matches||fe[B(fe,"matchesSelector")];return q=function(Be,ze){return Ee.call(Be,ze)},q(fe,be)};typeof Sizzle=="function"&&(N=function(fe,be){return Sizzle(fe,be)[0]||null},U=Sizzle,q=Sizzle.matchesSelector),T.selection=function(){return T.select(A.documentElement)};var Q=T.selection.prototype=[];Q.select=function(fe){var be=[],Ee,Be,ze,We;fe=W(fe);for(var yt=-1,ht=this.length;++yt<ht;){be.push(Ee=[]),Ee.parentNode=(ze=this[yt]).parentNode;for(var kt=-1,Vt=ze.length;++kt<Vt;)(We=ze[kt])?(Ee.push(Be=fe.call(We,We.__data__,kt,yt)),Be&&"__data__"in We&&(Be.__data__=We.__data__)):Ee.push(null)}return oe(be)};function W(fe){return typeof fe=="function"?fe:function(){return N(fe,this)}}Q.selectAll=function(fe){var be=[],Ee,Be;fe=X(fe);for(var ze=-1,We=this.length;++ze<We;)for(var yt=this[ze],ht=-1,kt=yt.length;++ht<kt;)(Be=yt[ht])&&(be.push(Ee=M(fe.call(Be,Be.__data__,ht,ze))),Ee.parentNode=Be);return oe(be)};function X(fe){return typeof fe=="function"?fe:function(){return U(fe,this)}}var te="http://www.w3.org/1999/xhtml",ee={svg:"http://www.w3.org/2000/svg",xhtml:te,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};T.ns={prefix:ee,qualify:function(fe){var be=fe.indexOf(":"),Ee=fe;return be>=0&&(Ee=fe.slice(0,be))!=="xmlns"&&(fe=fe.slice(be+1)),ee.hasOwnProperty(Ee)?{space:ee[Ee],local:fe}:fe}},Q.attr=function(fe,be){if(arguments.length<2){if(typeof fe=="string"){var Ee=this.node();return fe=T.ns.qualify(fe),fe.local?Ee.getAttributeNS(fe.space,fe.local):Ee.getAttribute(fe)}for(be in fe)this.each(ie(be,fe[be]));return this}return this.each(ie(fe,be))};function ie(fe,be){fe=T.ns.qualify(fe);function Ee(){this.removeAttribute(fe)}function Be(){this.removeAttributeNS(fe.space,fe.local)}function ze(){this.setAttribute(fe,be)}function We(){this.setAttributeNS(fe.space,fe.local,be)}function yt(){var kt=be.apply(this,arguments);kt==null?this.removeAttribute(fe):this.setAttribute(fe,kt)}function ht(){var kt=be.apply(this,arguments);kt==null?this.removeAttributeNS(fe.space,fe.local):this.setAttributeNS(fe.space,fe.local,kt)}return be==null?fe.local?Be:Ee:typeof be=="function"?fe.local?ht:yt:fe.local?We:ze}function le(fe){return fe.trim().replace(/\s+/g," ")}Q.classed=function(fe,be){if(arguments.length<2){if(typeof fe=="string"){var Ee=this.node(),Be=(fe=ue(fe)).length,ze=-1;if(be=Ee.classList){for(;++ze<Be;)if(!be.contains(fe[ze]))return!1}else for(be=Ee.getAttribute("class");++ze<Be;)if(!ye(fe[ze]).test(be))return!1;return!0}for(be in fe)this.each(pe(be,fe[be]));return this}return this.each(pe(fe,be))};function ye(fe){return new RegExp("(?:^|\\s+)"+T.requote(fe)+"(?:\\s+|$)","g")}function ue(fe){return(fe+"").trim().split(/^|\s+/)}function pe(fe,be){fe=ue(fe).map(ge);var Ee=fe.length;function Be(){for(var We=-1;++We<Ee;)fe[We](this,be)}function ze(){for(var We=-1,yt=be.apply(this,arguments);++We<Ee;)fe[We](this,yt)}return typeof be=="function"?ze:Be}function ge(fe){var be=ye(fe);return function(Ee,Be){if(ze=Ee.classList)return Be?ze.add(fe):ze.remove(fe);var ze=Ee.getAttribute("class")||"";Be?(be.lastIndex=0,be.test(ze)||Ee.setAttribute("class",le(ze+" "+fe))):Ee.setAttribute("class",le(ze.replace(be," ")))}}Q.style=function(fe,be,Ee){var Be=arguments.length;if(Be<3){if(typeof fe!="string"){Be<2&&(be="");for(Ee in fe)this.each(Te(Ee,fe[Ee],be));return this}if(Be<2){var ze=this.node();return a(ze).getComputedStyle(ze,null).getPropertyValue(fe)}Ee=""}return this.each(Te(fe,be,Ee))};function Te(fe,be,Ee){function Be(){this.style.removeProperty(fe)}function ze(){this.style.setProperty(fe,be,Ee)}function We(){var yt=be.apply(this,arguments);yt==null?this.style.removeProperty(fe):this.style.setProperty(fe,yt,Ee)}return be==null?Be:typeof be=="function"?We:ze}Q.property=function(fe,be){if(arguments.length<2){if(typeof fe=="string")return this.node()[fe];for(be in fe)this.each(_e(be,fe[be]));return this}return this.each(_e(fe,be))};function _e(fe,be){function Ee(){delete this[fe]}function Be(){this[fe]=be}function ze(){var We=be.apply(this,arguments);We==null?delete this[fe]:this[fe]=We}return be==null?Ee:typeof be=="function"?ze:Be}Q.text=function(fe){return arguments.length?this.each(typeof fe=="function"?function(){var be=fe.apply(this,arguments);this.textContent=be==null?"":be}:fe==null?function(){this.textContent=""}:function(){this.textContent=fe}):this.node().textContent},Q.html=function(fe){return arguments.length?this.each(typeof fe=="function"?function(){var be=fe.apply(this,arguments);this.innerHTML=be==null?"":be}:fe==null?function(){this.innerHTML=""}:function(){this.innerHTML=fe}):this.node().innerHTML},Q.append=function(fe){return fe=De(fe),this.select(function(){return this.appendChild(fe.apply(this,arguments))})};function De(fe){function be(){var Be=this.ownerDocument,ze=this.namespaceURI;return ze===te&&Be.documentElement.namespaceURI===te?Be.createElement(fe):Be.createElementNS(ze,fe)}function Ee(){return this.ownerDocument.createElementNS(fe.space,fe.local)}return typeof fe=="function"?fe:(fe=T.ns.qualify(fe)).local?Ee:be}Q.insert=function(fe,be){return fe=De(fe),be=W(be),this.select(function(){return this.insertBefore(fe.apply(this,arguments),be.apply(this,arguments)||null)})},Q.remove=function(){return this.each(Oe)};function Oe(){var fe=this.parentNode;fe&&fe.removeChild(this)}Q.data=function(fe,be){var Ee=-1,Be=this.length,ze,We;if(!arguments.length){for(fe=new Array(Be=(ze=this[0]).length);++Ee<Be;)(We=ze[Ee])&&(fe[Ee]=We.__data__);return fe}function yt(Zt,Qt){var Ar,Kr=Zt.length,un=Qt.length,Sr=Math.min(Kr,un),Br=new Array(un),Gr=new Array(un),an=new Array(Kr),ln,Wr;if(be){var Nn=new w,ra=new Array(Kr),ba;for(Ar=-1;++Ar<Kr;)(ln=Zt[Ar])&&(Nn.has(ba=be.call(ln,ln.__data__,Ar))?an[Ar]=ln:Nn.set(ba,ln),ra[Ar]=ba);for(Ar=-1;++Ar<un;)(ln=Nn.get(ba=be.call(Qt,Wr=Qt[Ar],Ar)))?ln!==!0&&(Br[Ar]=ln,ln.__data__=Wr):Gr[Ar]=Ue(Wr),Nn.set(ba,!0);for(Ar=-1;++Ar<Kr;)Ar in ra&&Nn.get(ra[Ar])!==!0&&(an[Ar]=Zt[Ar])}else{for(Ar=-1;++Ar<Sr;)ln=Zt[Ar],Wr=Qt[Ar],ln?(ln.__data__=Wr,Br[Ar]=ln):Gr[Ar]=Ue(Wr);for(;Ar<un;++Ar)Gr[Ar]=Ue(Qt[Ar]);for(;Ar<Kr;++Ar)an[Ar]=Zt[Ar]}Gr.update=Br,Gr.parentNode=Br.parentNode=an.parentNode=Zt.parentNode,ht.push(Gr),kt.push(Br),Vt.push(an)}var ht=Qe([]),kt=oe([]),Vt=oe([]);if(typeof fe=="function")for(;++Ee<Be;)yt(ze=this[Ee],fe.call(ze,ze.parentNode.__data__,Ee));else for(;++Ee<Be;)yt(ze=this[Ee],fe);return kt.enter=function(){return ht},kt.exit=function(){return Vt},kt};function Ue(fe){return{__data__:fe}}Q.datum=function(fe){return arguments.length?this.property("__data__",fe):this.property("__data__")},Q.filter=function(fe){var be=[],Ee,Be,ze;typeof fe!="function"&&(fe=xe(fe));for(var We=0,yt=this.length;We<yt;We++){be.push(Ee=[]),Ee.parentNode=(Be=this[We]).parentNode;for(var ht=0,kt=Be.length;ht<kt;ht++)(ze=Be[ht])&&fe.call(ze,ze.__data__,ht,We)&&Ee.push(ze)}return oe(be)};function xe(fe){return function(){return q(this,fe)}}Q.order=function(){for(var fe=-1,be=this.length;++fe<be;)for(var Ee=this[fe],Be=Ee.length-1,ze=Ee[Be],We;--Be>=0;)(We=Ee[Be])&&(ze&&ze!==We.nextSibling&&ze.parentNode.insertBefore(We,ze),ze=We);return this},Q.sort=function(fe){fe=Pe.apply(this,arguments);for(var be=-1,Ee=this.length;++be<Ee;)this[be].sort(fe);return this.order()};function Pe(fe){return arguments.length||(fe=i),function(be,Ee){return be&&Ee?fe(be.__data__,Ee.__data__):!be-!Ee}}Q.each=function(fe){return Ve(this,function(be,Ee,Be){fe.call(be,be.__data__,Ee,Be)})};function Ve(fe,be){for(var Ee=0,Be=fe.length;Ee<Be;Ee++)for(var ze=fe[Ee],We=0,yt=ze.length,ht;We<yt;We++)(ht=ze[We])&&be(ht,We,Ee);return fe}Q.call=function(fe){var be=M(arguments);return fe.apply(be[0]=this,be),this},Q.empty=function(){return!this.node()},Q.node=function(){for(var fe=0,be=this.length;fe<be;fe++)for(var Ee=this[fe],Be=0,ze=Ee.length;Be<ze;Be++){var We=Ee[Be];if(We)return We}return null},Q.size=function(){var fe=0;return Ve(this,function(){++fe}),fe};function Qe(fe){return se(fe,Fe),fe}var Fe=[];T.selection.enter=Qe,T.selection.enter.prototype=Fe,Fe.append=Q.append,Fe.empty=Q.empty,Fe.node=Q.node,Fe.call=Q.call,Fe.size=Q.size,Fe.select=function(fe){for(var be=[],Ee,Be,ze,We,yt,ht=-1,kt=this.length;++ht<kt;){ze=(We=this[ht]).update,be.push(Ee=[]),Ee.parentNode=We.parentNode;for(var Vt=-1,Zt=We.length;++Vt<Zt;)(yt=We[Vt])?(Ee.push(ze[Vt]=Be=fe.call(We.parentNode,yt.__data__,Vt,ht)),Be.__data__=yt.__data__):Ee.push(null)}return oe(be)},Fe.insert=function(fe,be){return arguments.length<2&&(be=Le(this)),Q.insert.call(this,fe,be)};function Le(fe){var be,Ee;return function(Be,ze,We){var yt=fe[We].update,ht=yt.length,kt;for(We!=Ee&&(Ee=We,be=0),ze>=be&&(be=ze+1);!(kt=yt[be])&&++be<ht;);return kt}}T.select=function(fe){var be;return typeof fe=="string"?(be=[N(fe,A)],be.parentNode=A.documentElement):(be=[fe],be.parentNode=e(fe)),oe([be])},T.selectAll=function(fe){var be;return typeof fe=="string"?(be=M(U(fe,A)),be.parentNode=A.documentElement):(be=M(fe),be.parentNode=null),oe([be])},Q.on=function(fe,be,Ee){var Be=arguments.length;if(Be<3){if(typeof fe!="string"){Be<2&&(be=!1);for(Ee in fe)this.each(Ne(Ee,fe[Ee],be));return this}if(Be<2)return(Be=this.node()["__on"+fe])&&Be._;Ee=!1}return this.each(Ne(fe,be,Ee))};function Ne(fe,be,Ee){var Be="__on"+fe,ze=fe.indexOf("."),We=Dt;ze>0&&(fe=fe.slice(0,ze));var yt=dt.get(fe);yt&&(fe=yt,We=Xt);function ht(){var Zt=this[Be];Zt&&(this.removeEventListener(fe,Zt,Zt.$),delete this[Be])}function kt(){var Zt=We(be,M(arguments));ht.call(this),this.addEventListener(fe,this[Be]=Zt,Zt.$=Ee),Zt._=be}function Vt(){var Zt=new RegExp("^__on([^.]+)"+T.requote(fe)+"$"),Qt;for(var Ar in this)if(Qt=Ar.match(Zt)){var Kr=this[Ar];this.removeEventListener(Qt[1],Kr,Kr.$),delete this[Ar]}}return ze?be?kt:ht:be?V:Vt}var dt=T.map({mouseenter:"mouseover",mouseleave:"mouseout"});A&&dt.forEach(function(fe){"on"+fe in A&&dt.remove(fe)});function Dt(fe,be){return function(Ee){var Be=T.event;T.event=Ee,be[0]=this.__data__;try{fe.apply(this,be)}finally{T.event=Be}}}function Xt(fe,be){var Ee=Dt(fe,be);return function(Be){var ze=this,We=Be.relatedTarget;(!We||We!==ze&&!(We.compareDocumentPosition(ze)&8))&&Ee.call(ze,Be)}}var Tt,zt=0;function Ut(fe){var be=".dragsuppress-"+ ++zt,Ee="click"+be,Be=T.select(a(fe)).on("touchmove"+be,J).on("dragstart"+be,J).on("selectstart"+be,J);if(Tt==null&&(Tt="onselectstart"in fe?!1:B(fe.style,"userSelect")),Tt){var ze=e(fe).style,We=ze[Tt];ze[Tt]="none"}return function(yt){if(Be.on(be,null),Tt&&(ze[Tt]=We),yt){var ht=function(){Be.on(Ee,null)};Be.on(Ee,function(){J(),ht()},!0),setTimeout(ht,0)}}}T.mouse=function(fe){return Mt(fe,G())};var Et=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Mt(fe,be){be.changedTouches&&(be=be.changedTouches[0]);var Ee=fe.ownerSVGElement||fe;if(Ee.createSVGPoint){var Be=Ee.createSVGPoint();if(Et<0){var ze=a(fe);if(ze.scrollX||ze.scrollY){Ee=T.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var We=Ee[0][0].getScreenCTM();Et=!(We.f||We.e),Ee.remove()}}return Et?(Be.x=be.pageX,Be.y=be.pageY):(Be.x=be.clientX,Be.y=be.clientY),Be=Be.matrixTransform(fe.getScreenCTM().inverse()),[Be.x,Be.y]}var yt=fe.getBoundingClientRect();return[be.clientX-yt.left-fe.clientLeft,be.clientY-yt.top-fe.clientTop]}T.touch=function(fe,be,Ee){if(arguments.length<3&&(Ee=be,be=G().changedTouches),be){for(var Be=0,ze=be.length,We;Be<ze;++Be)if((We=be[Be]).identifier===Ee)return Mt(fe,We)}},T.behavior.drag=function(){var fe=Z(ze,"drag","dragstart","dragend"),be=null,Ee=We(V,T.mouse,a,"mousemove","mouseup"),Be=We(rt,T.touch,D,"touchmove","touchend");function ze(){this.on("mousedown.drag",Ee).on("touchstart.drag",Be)}function We(yt,ht,kt,Vt,Zt){return function(){var Qt=this,Ar=T.event.target.correspondingElement||T.event.target,Kr=Qt.parentNode,un=fe.of(Qt,arguments),Sr=0,Br=yt(),Gr=".drag"+(Br==null?"":"-"+Br),an,ln=T.select(kt(Ar)).on(Vt+Gr,ra).on(Zt+Gr,ba),Wr=Ut(Ar),Nn=ht(Kr,Br);be?(an=be.apply(Qt,arguments),an=[an.x-Nn[0],an.y-Nn[1]]):an=[0,0],un({type:"dragstart"});function ra(){var oa=ht(Kr,Br),ka,ua;!oa||(ka=oa[0]-Nn[0],ua=oa[1]-Nn[1],Sr|=ka|ua,Nn=oa,un({type:"drag",x:oa[0]+an[0],y:oa[1]+an[1],dx:ka,dy:ua}))}function ba(){!ht(Kr,Br)||(ln.on(Vt+Gr,null).on(Zt+Gr,null),Wr(Sr),un({type:"dragend"}))}}}return ze.origin=function(yt){return arguments.length?(be=yt,ze):be},T.rebind(ze,fe,"on")};function rt(){return T.event.changedTouches[0].identifier}T.touches=function(fe,be){return arguments.length<2&&(be=G().touches),be?M(be).map(function(Ee){var Be=Mt(fe,Ee);return Be.identifier=Ee.identifier,Be}):[]};var ct=1e-6,Ze=ct*ct,ke=Math.PI,Ge=2*ke,Je=Ge-ct,it=ke/2,Pt=ke/180,At=180/ke;function Ot(fe,be,Ee){return(be[0]-fe[0])*(Ee[1]-fe[1])-(be[1]-fe[1])*(Ee[0]-fe[0])}function Jt(fe){return fe>1?it:fe<-1?-it:Math.asin(fe)}function Bt(fe){return((fe=Math.exp(fe))-1/fe)/2}function qt(fe){return((fe=Math.exp(fe))+1/fe)/2}function rr(fe){return((fe=Math.exp(2*fe))-1)/(fe+1)}var er=Math.SQRT2,pr=2,Xr=4;T.interpolateZoom=function(fe,be){var Ee=fe[0],Be=fe[1],ze=fe[2],We=be[0],yt=be[1],ht=be[2],kt=We-Ee,Vt=yt-Be,Zt=kt*kt+Vt*Vt,Qt,Ar;if(Zt<Ze)Ar=Math.log(ht/ze)/er,Qt=function(an){return[Ee+an*kt,Be+an*Vt,ze*Math.exp(er*an*Ar)]};else{var Kr=Math.sqrt(Zt),un=(ht*ht-ze*ze+Xr*Zt)/(2*ze*pr*Kr),Sr=(ht*ht-ze*ze-Xr*Zt)/(2*ht*pr*Kr),Br=Math.log(Math.sqrt(un*un+1)-un),Gr=Math.log(Math.sqrt(Sr*Sr+1)-Sr);Ar=(Gr-Br)/er,Qt=function(an){var ln=an*Ar,Wr=qt(Br),Nn=ze/(pr*Kr)*(Wr*rr(er*ln+Br)-Bt(Br));return[Ee+Nn*kt,Be+Nn*Vt,ze*Wr/qt(er*ln+Br)]}}return Qt.duration=Ar*1e3,Qt},T.behavior.zoom=function(){var fe={x:0,y:0,k:1},be,Ee,Be,ze=[960,500],We=hn,yt=250,ht=0,kt="mousedown.zoom",Vt="mousemove.zoom",Zt="mouseup.zoom",Qt,Ar="touchstart.zoom",Kr,un=Z(ln,"zoomstart","zoom","zoomend"),Sr,Br,Gr,an;nt||(nt="onwheel"in A?($r=function(){return-T.event.deltaY*(T.event.deltaMode?120:1)},"wheel"):"onmousewheel"in A?($r=function(){return T.event.wheelDelta},"mousewheel"):($r=function(){return-T.event.detail},"MozMousePixelScroll"));function ln(fa){fa.on(kt,Ja).on(nt+".zoom",co).on("dblclick.zoom",Ii).on(Ar,yi)}ln.event=function(fa){fa.each(function(){var ai=un.of(this,arguments),Wa=fe;Ya?T.select(this).transition().each("start.zoom",function(){fe=this.__chart__||{x:0,y:0,k:1},ua(ai)}).tween("zoom:zoom",function(){var Si=ze[0],ui=ze[1],io=Ee?Ee[0]:Si/2,Qi=Ee?Ee[1]:ui/2,go=T.interpolateZoom([(io-fe.x)/fe.k,(Qi-fe.y)/fe.k,Si/fe.k],[(io-Wa.x)/Wa.k,(Qi-Wa.y)/Wa.k,Si/Wa.k]);return function(Go){var zo=go(Go),Yo=Si/zo[2];this.__chart__=fe={x:io-zo[0]*Yo,y:Qi-zo[1]*Yo,k:Yo},Ua(ai)}}).each("interrupt.zoom",function(){Pa(ai)}).each("end.zoom",function(){Pa(ai)}):(this.__chart__=fe,ua(ai),Ua(ai),Pa(ai))})},ln.translate=function(fa){return arguments.length?(fe={x:+fa[0],y:+fa[1],k:fe.k},ka(),ln):[fe.x,fe.y]},ln.scale=function(fa){return arguments.length?(fe={x:fe.x,y:fe.y,k:null},ra(+fa),ka(),ln):fe.k},ln.scaleExtent=function(fa){return arguments.length?(We=fa==null?hn:[+fa[0],+fa[1]],ln):We},ln.center=function(fa){return arguments.length?(Be=fa&&[+fa[0],+fa[1]],ln):Be},ln.size=function(fa){return arguments.length?(ze=fa&&[+fa[0],+fa[1]],ln):ze},ln.duration=function(fa){return arguments.length?(yt=+fa,ln):yt},ln.x=function(fa){return arguments.length?(Br=fa,Sr=fa.copy(),fe={x:0,y:0,k:1},ln):Br},ln.y=function(fa){return arguments.length?(an=fa,Gr=fa.copy(),fe={x:0,y:0,k:1},ln):an};function Wr(fa){return[(fa[0]-fe.x)/fe.k,(fa[1]-fe.y)/fe.k]}function Nn(fa){return[fa[0]*fe.k+fe.x,fa[1]*fe.k+fe.y]}function ra(fa){fe.k=Math.max(We[0],Math.min(We[1],fa))}function ba(fa,ai){ai=Nn(ai),fe.x+=fa[0]-ai[0],fe.y+=fa[1]-ai[1]}function oa(fa,ai,Wa,Si){fa.__chart__={x:fe.x,y:fe.y,k:fe.k},ra(Math.pow(2,Si)),ba(Ee=ai,Wa),fa=T.select(fa),yt>0&&(fa=fa.transition().duration(yt)),fa.call(ln.event)}function ka(){Br&&Br.domain(Sr.range().map(function(fa){return(fa-fe.x)/fe.k}).map(Sr.invert)),an&&an.domain(Gr.range().map(function(fa){return(fa-fe.y)/fe.k}).map(Gr.invert))}function ua(fa){ht++||fa({type:"zoomstart"})}function Ua(fa){ka(),fa({type:"zoom",scale:fe.k,translate:[fe.x,fe.y]})}function Pa(fa){--ht||(fa({type:"zoomend"}),Ee=null)}function Ja(){var fa=this,ai=un.of(fa,arguments),Wa=0,Si=T.select(a(fa)).on(Vt,Qi).on(Zt,go),ui=Wr(T.mouse(fa)),io=Ut(fa);Dn.call(fa),ua(ai);function Qi(){Wa=1,ba(T.mouse(fa),ui),Ua(ai)}function go(){Si.on(Vt,null).on(Zt,null),io(Wa),Pa(ai)}}function yi(){var fa=this,ai=un.of(fa,arguments),Wa={},Si=0,ui,io=".zoom-"+T.event.changedTouches[0].identifier,Qi="touchmove"+io,go="touchend"+io,Go=[],zo=T.select(fa),Yo=Ut(fa);Oi(),ua(ai),zo.on(kt,null).on(Ar,Oi);function Gi(){var xo=T.touches(fa);return ui=fe.k,xo.forEach(function(eo){eo.identifier in Wa&&(Wa[eo.identifier]=Wr(eo))}),xo}function Oi(){var xo=T.event.target;T.select(xo).on(Qi,za).on(go,Xa),Go.push(xo);for(var eo=T.event.changedTouches,Po=0,Xi=eo.length;Po<Xi;++Po)Wa[eo[Po].identifier]=null;var Wo=Gi(),ms=Date.now();if(Wo.length===1){if(ms-Kr<500){var Ol=Wo[0];oa(fa,Ol,Wa[Ol.identifier],Math.floor(Math.log(fe.k)/Math.LN2)+1),J()}Kr=ms}else if(Wo.length>1){var Ol=Wo[0],Zi=Wo[1],Qu=Ol[0]-Zi[0],Tl=Ol[1]-Zi[1];Si=Qu*Qu+Tl*Tl}}function za(){var xo=T.touches(fa),eo,Po,Xi,Wo;Dn.call(fa);for(var ms=0,Ol=xo.length;ms<Ol;++ms,Wo=null)if(Xi=xo[ms],Wo=Wa[Xi.identifier]){if(Po)break;eo=Xi,Po=Wo}if(Wo){var Zi=(Zi=Xi[0]-eo[0])*Zi+(Zi=Xi[1]-eo[1])*Zi,Qu=Si&&Math.sqrt(Zi/Si);eo=[(eo[0]+Xi[0])/2,(eo[1]+Xi[1])/2],Po=[(Po[0]+Wo[0])/2,(Po[1]+Wo[1])/2],ra(Qu*ui)}Kr=null,ba(eo,Po),Ua(ai)}function Xa(){if(T.event.touches.length){for(var xo=T.event.changedTouches,eo=0,Po=xo.length;eo<Po;++eo)delete Wa[xo[eo].identifier];for(var Xi in Wa)return void Gi()}T.selectAll(Go).on(io,null),zo.on(kt,Ja).on(Ar,yi),Yo(),Pa(ai)}}function co(){var fa=un.of(this,arguments);Qt?clearTimeout(Qt):(Dn.call(this),be=Wr(Ee=Be||T.mouse(this)),ua(fa)),Qt=setTimeout(function(){Qt=null,Pa(fa)},50),J(),ra(Math.pow(2,$r()*.002)*fe.k),ba(Ee,be),Ua(fa)}function Ii(){var fa=T.mouse(this),ai=Math.log(fe.k)/Math.LN2;oa(this,fa,Wr(fa),T.event.shiftKey?Math.ceil(ai)-1:Math.floor(ai)+1)}return T.rebind(ln,un,"on")};var hn=[0,1/0],$r,nt;T.color=Gt;function Gt(){}Gt.prototype.toString=function(){return this.rgb()+""},T.hsl=Kt;function Kt(fe,be,Ee){return this instanceof Kt?(this.h=+fe,this.s=+be,void(this.l=+Ee)):arguments.length<2?fe instanceof Kt?new Kt(fe.h,fe.s,fe.l):Jr(""+fe,gr,Kt):new Kt(fe,be,Ee)}var Ht=Kt.prototype=new Gt;Ht.brighter=function(fe){return fe=Math.pow(.7,arguments.length?fe:1),new Kt(this.h,this.s,this.l/fe)},Ht.darker=function(fe){return fe=Math.pow(.7,arguments.length?fe:1),new Kt(this.h,this.s,fe*this.l)},Ht.rgb=function(){return _r(this.h,this.s,this.l)};function _r(fe,be,Ee){var Be,ze;fe=isNaN(fe)?0:(fe%=360)<0?fe+360:fe,be=isNaN(be)||be<0?0:be>1?1:be,Ee=Ee<0?0:Ee>1?1:Ee,ze=Ee<=.5?Ee*(1+be):Ee+be-Ee*be,Be=2*Ee-ze;function We(ht){return ht>360?ht-=360:ht<0&&(ht+=360),ht<60?Be+(ze-Be)*ht/60:ht<180?ze:ht<240?Be+(ze-Be)*(240-ht)/60:Be}function yt(ht){return Math.round(We(ht)*255)}return new ir(yt(fe+120),yt(fe),yt(fe-120))}T.hcl=tt;function tt(fe,be,Ee){return this instanceof tt?(this.h=+fe,this.c=+be,void(this.l=+Ee)):arguments.length<2?fe instanceof tt?new tt(fe.h,fe.c,fe.l):fe instanceof ft?vt(fe.l,fe.a,fe.b):vt((fe=mr((fe=T.rgb(fe)).r,fe.g,fe.b)).l,fe.a,fe.b):new tt(fe,be,Ee)}var je=tt.prototype=new Gt;je.brighter=function(fe){return new tt(this.h,this.c,Math.min(100,this.l+Me*(arguments.length?fe:1)))},je.darker=function(fe){return new tt(this.h,this.c,Math.max(0,this.l-Me*(arguments.length?fe:1)))},je.rgb=function(){return st(this.h,this.c,this.l).rgb()};function st(fe,be,Ee){return isNaN(fe)&&(fe=0),isNaN(be)&&(be=0),new ft(Ee,Math.cos(fe*=Pt)*be,Math.sin(fe)*be)}T.lab=ft;function ft(fe,be,Ee){return this instanceof ft?(this.l=+fe,this.a=+be,void(this.b=+Ee)):arguments.length<2?fe instanceof ft?new ft(fe.l,fe.a,fe.b):fe instanceof tt?st(fe.h,fe.c,fe.l):mr((fe=ir(fe)).r,fe.g,fe.b):new ft(fe,be,Ee)}var Me=18,Se=.95047,Ke=1,Xe=1.08883,ot=ft.prototype=new Gt;ot.brighter=function(fe){return new ft(Math.min(100,this.l+Me*(arguments.length?fe:1)),this.a,this.b)},ot.darker=function(fe){return new ft(Math.max(0,this.l-Me*(arguments.length?fe:1)),this.a,this.b)},ot.rgb=function(){return pt(this.l,this.a,this.b)};function pt(fe,be,Ee){var Be=(fe+16)/116,ze=Be+be/500,We=Be-Ee/200;return ze=Ct(ze)*Se,Be=Ct(Be)*Ke,We=Ct(We)*Xe,new ir(Nt(3.2404542*ze-1.5371385*Be-.4985314*We),Nt(-.969266*ze+1.8760108*Be+.041556*We),Nt(.0556434*ze-.2040259*Be+1.0572252*We))}function vt(fe,be,Ee){return fe>0?new tt(Math.atan2(Ee,be)*At,Math.sqrt(be*be+Ee*Ee),fe):new tt(NaN,NaN,fe)}function Ct(fe){return fe>.206893034?fe*fe*fe:(fe-4/29)/7.787037}function St(fe){return fe>.008856?Math.pow(fe,1/3):7.787037*fe+4/29}function Nt(fe){return Math.round(255*(fe<=.00304?12.92*fe:1.055*Math.pow(fe,1/2.4)-.055))}T.rgb=ir;function ir(fe,be,Ee){return this instanceof ir?(this.r=~~fe,this.g=~~be,void(this.b=~~Ee)):arguments.length<2?fe instanceof ir?new ir(fe.r,fe.g,fe.b):Jr(""+fe,ir,_r):new ir(fe,be,Ee)}function lr(fe){return new ir(fe>>16,fe>>8&255,fe&255)}function Yr(fe){return lr(fe)+""}var Pr=ir.prototype=new Gt;Pr.brighter=function(fe){fe=Math.pow(.7,arguments.length?fe:1);var be=this.r,Ee=this.g,Be=this.b,ze=30;return!be&&!Ee&&!Be?new ir(ze,ze,ze):(be&&be<ze&&(be=ze),Ee&&Ee<ze&&(Ee=ze),Be&&Be<ze&&(Be=ze),new ir(Math.min(255,be/fe),Math.min(255,Ee/fe),Math.min(255,Be/fe)))},Pr.darker=function(fe){return fe=Math.pow(.7,arguments.length?fe:1),new ir(fe*this.r,fe*this.g,fe*this.b)},Pr.hsl=function(){return gr(this.r,this.g,this.b)},Pr.toString=function(){return"#"+wr(this.r)+wr(this.g)+wr(this.b)};function wr(fe){return fe<16?"0"+Math.max(0,fe).toString(16):Math.min(255,fe).toString(16)}function Jr(fe,be,Ee){var Be=0,ze=0,We=0,yt,ht,kt;if(yt=/([a-z]+)\((.*)\)/.exec(fe=fe.toLowerCase()),yt)switch(ht=yt[2].split(","),yt[1]){case"hsl":return Ee(parseFloat(ht[0]),parseFloat(ht[1])/100,parseFloat(ht[2])/100);case"rgb":return be(Hr(ht[0]),Hr(ht[1]),Hr(ht[2]))}return(kt=Tr.get(fe))?be(kt.r,kt.g,kt.b):(fe!=null&&fe.charAt(0)==="#"&&!isNaN(kt=parseInt(fe.slice(1),16))&&(fe.length===4?(Be=(kt&3840)>>4,Be=Be>>4|Be,ze=kt&240,ze=ze>>4|ze,We=kt&15,We=We<<4|We):fe.length===7&&(Be=(kt&16711680)>>16,ze=(kt&65280)>>8,We=kt&255)),be(Be,ze,We))}function gr(fe,be,Ee){var Be=Math.min(fe/=255,be/=255,Ee/=255),ze=Math.max(fe,be,Ee),We=ze-Be,yt,ht,kt=(ze+Be)/2;return We?(ht=kt<.5?We/(ze+Be):We/(2-ze-Be),fe==ze?yt=(be-Ee)/We+(be<Ee?6:0):be==ze?yt=(Ee-fe)/We+2:yt=(fe-be)/We+4,yt*=60):(yt=NaN,ht=kt>0&&kt<1?0:yt),new Kt(yt,ht,kt)}function mr(fe,be,Ee){fe=Ur(fe),be=Ur(be),Ee=Ur(Ee);var Be=St((.4124564*fe+.3575761*be+.1804375*Ee)/Se),ze=St((.2126729*fe+.7151522*be+.072175*Ee)/Ke),We=St((.0193339*fe+.119192*be+.9503041*Ee)/Xe);return ft(116*ze-16,500*(Be-ze),200*(ze-We))}function Ur(fe){return(fe/=255)<=.04045?fe/12.92:Math.pow((fe+.055)/1.055,2.4)}function Hr(fe){var be=parseFloat(fe);return fe.charAt(fe.length-1)==="%"?Math.round(be*2.55):be}var Tr=T.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Tr.forEach(function(fe,be){Tr.set(fe,lr(be))});function et(fe){return typeof fe=="function"?fe:function(){return fe}}T.functor=et,T.xhr=Lt(D);function Lt(fe){return function(be,Ee,Be){return arguments.length===2&&typeof Ee=="function"&&(Be=Ee,Ee=null),jt(be,Ee,fe,Be)}}function jt(fe,be,Ee,Be){var ze={},We=T.dispatch("beforesend","progress","load","error"),yt={},ht=new XMLHttpRequest,kt=null;self.XDomainRequest&&!("withCredentials"in ht)&&/^(http(s)?:)?\/\//.test(fe)&&(ht=new XDomainRequest),"onload"in ht?ht.onload=ht.onerror=Vt:ht.onreadystatechange=function(){ht.readyState>3&&Vt()};function Vt(){var Zt=ht.status,Qt;if(!Zt&&Ir(ht)||Zt>=200&&Zt<300||Zt===304){try{Qt=Ee.call(ze,ht)}catch(Ar){We.error.call(ze,Ar);return}We.load.call(ze,Qt)}else We.error.call(ze,ht)}return ht.onprogress=function(Zt){var Qt=T.event;T.event=Zt;try{We.progress.call(ze,ht)}finally{T.event=Qt}},ze.header=function(Zt,Qt){return Zt=(Zt+"").toLowerCase(),arguments.length<2?yt[Zt]:(Qt==null?delete yt[Zt]:yt[Zt]=Qt+"",ze)},ze.mimeType=function(Zt){return arguments.length?(be=Zt==null?null:Zt+"",ze):be},ze.responseType=function(Zt){return arguments.length?(kt=Zt,ze):kt},ze.response=function(Zt){return Ee=Zt,ze},["get","post"].forEach(function(Zt){ze[Zt]=function(){return ze.send.apply(ze,[Zt].concat(M(arguments)))}}),ze.send=function(Zt,Qt,Ar){if(arguments.length===2&&typeof Qt=="function"&&(Ar=Qt,Qt=null),ht.open(Zt,fe,!0),be!=null&&!("accept"in yt)&&(yt.accept=be+",*/*"),ht.setRequestHeader)for(var Kr in yt)ht.setRequestHeader(Kr,yt[Kr]);return be!=null&&ht.overrideMimeType&&ht.overrideMimeType(be),kt!=null&&(ht.responseType=kt),Ar!=null&&ze.on("error",Ar).on("load",function(un){Ar(null,un)}),We.beforesend.call(ze,ht),ht.send(Qt==null?null:Qt),ze},ze.abort=function(){return ht.abort(),ze},T.rebind(ze,We,"on"),Be==null?ze:ze.get(sr(Be))}function sr(fe){return fe.length===1?function(be,Ee){fe(be==null?Ee:null)}:fe}function Ir(fe){var be=fe.responseType;return be&&be!=="text"?fe.response:fe.responseText}T.dsv=function(fe,be){var Ee=new RegExp('["'+fe+`
]`),Be=fe.charCodeAt(0);function ze(Vt,Zt,Qt){arguments.length<3&&(Qt=Zt,Zt=null);var Ar=jt(Vt,be,Zt==null?We:yt(Zt),Qt);return Ar.row=function(Kr){return arguments.length?Ar.response((Zt=Kr)==null?We:yt(Kr)):Zt},Ar}function We(Vt){return ze.parse(Vt.responseText)}function yt(Vt){return function(Zt){return ze.parse(Zt.responseText,Vt)}}ze.parse=function(Vt,Zt){var Qt;return ze.parseRows(Vt,function(Ar,Kr){if(Qt)return Qt(Ar,Kr-1);var un=function(Sr){for(var Br={},Gr=Ar.length,an=0;an<Gr;++an)Br[Ar[an]]=Sr[an];return Br};Qt=Zt?function(Sr,Br){return Zt(un(Sr),Br)}:un})},ze.parseRows=function(Vt,Zt){var Qt={},Ar={},Kr=[],un=Vt.length,Sr=0,Br=0,Gr,an;function ln(){if(Sr>=un)return Ar;if(an)return an=!1,Qt;var Nn=Sr;if(Vt.charCodeAt(Nn)===34){for(var ra=Nn;ra++<un;)if(Vt.charCodeAt(ra)===34){if(Vt.charCodeAt(ra+1)!==34)break;++ra}Sr=ra+2;var ba=Vt.charCodeAt(ra+1);return ba===13?(an=!0,Vt.charCodeAt(ra+2)===10&&++Sr):ba===10&&(an=!0),Vt.slice(Nn+1,ra).replace(/""/g,'"')}for(;Sr<un;){var ba=Vt.charCodeAt(Sr++),oa=1;if(ba===10)an=!0;else if(ba===13)an=!0,Vt.charCodeAt(Sr)===10&&(++Sr,++oa);else if(ba!==Be)continue;return Vt.slice(Nn,Sr-oa)}return Vt.slice(Nn)}for(;(Gr=ln())!==Ar;){for(var Wr=[];Gr!==Qt&&Gr!==Ar;)Wr.push(Gr),Gr=ln();Zt&&(Wr=Zt(Wr,Br++))==null||Kr.push(Wr)}return Kr},ze.format=function(Vt){if(Array.isArray(Vt[0]))return ze.formatRows(Vt);var Zt=new I,Qt=[];return Vt.forEach(function(Ar){for(var Kr in Ar)Zt.has(Kr)||Qt.push(Zt.add(Kr))}),[Qt.map(kt).join(fe)].concat(Vt.map(function(Ar){return Qt.map(function(Kr){return kt(Ar[Kr])}).join(fe)})).join(`
`)},ze.formatRows=function(Vt){return Vt.map(ht).join(`
`)};function ht(Vt){return Vt.map(kt).join(fe)}function kt(Vt){return Ee.test(Vt)?'"'+Vt.replace(/\"/g,'""')+'"':Vt}return ze},T.csv=T.dsv(",","text/csv"),T.tsv=T.dsv("	","text/tab-separated-values");var Zr,Lr,br,Nr,kn=this[B(this,"requestAnimationFrame")]||function(fe){setTimeout(fe,17)};T.timer=function(){_n.apply(this,arguments)};function _n(fe,be,Ee){var Be=arguments.length;Be<2&&(be=0),Be<3&&(Ee=Date.now());var ze=Ee+be,We={c:fe,t:ze,n:null};return Lr?Lr.n=We:Zr=We,Lr=We,br||(Nr=clearTimeout(Nr),br=1,kn(Wn)),We}function Wn(){var fe=Ln(),be=Xn()-fe;be>24?(isFinite(be)&&(clearTimeout(Nr),Nr=setTimeout(Wn,be)),br=0):(br=1,kn(Wn))}T.timer.flush=function(){Ln(),Xn()};function Ln(){for(var fe=Date.now(),be=Zr;be;)fe>=be.t&&be.c(fe-be.t)&&(be.c=null),be=be.n;return fe}function Xn(){for(var fe,be=Zr,Ee=1/0;be;)be.c?(be.t<Ee&&(Ee=be.t),be=(fe=be).n):be=fe?fe.n=be.n:Zr=be.n;return Lr=fe,Ee}T.round=function(fe,be){return be?Math.round(fe*(be=Math.pow(10,be)))/be:Math.round(fe)},T.geom={};function Kn(fe){return fe[0]}function Aa(fe){return fe[1]}T.geom.hull=function(fe){var be=Kn,Ee=Aa;if(arguments.length)return Be(fe);function Be(ze){if(ze.length<3)return[];var We=et(be),yt=et(Ee),ht,kt=ze.length,Vt=[],Zt=[];for(ht=0;ht<kt;ht++)Vt.push([+We.call(this,ze[ht],ht),+yt.call(this,ze[ht],ht),ht]);for(Vt.sort(oi),ht=0;ht<kt;ht++)Zt.push([Vt[ht][0],-Vt[ht][1]]);var Qt=Ta(Vt),Ar=Ta(Zt),Kr=Ar[0]===Qt[0],un=Ar[Ar.length-1]===Qt[Qt.length-1],Sr=[];for(ht=Qt.length-1;ht>=0;--ht)Sr.push(ze[Vt[Qt[ht]][2]]);for(ht=+Kr;ht<Ar.length-un;++ht)Sr.push(ze[Vt[Ar[ht]][2]]);return Sr}return Be.x=function(ze){return arguments.length?(be=ze,Be):be},Be.y=function(ze){return arguments.length?(Ee=ze,Be):Ee},Be};function Ta(fe){for(var be=fe.length,Ee=[0,1],Be=2,ze=2;ze<be;ze++){for(;Be>1&&Ot(fe[Ee[Be-2]],fe[Ee[Be-1]],fe[ze])<=0;)--Be;Ee[Be++]=ze}return Ee.slice(0,Be)}function oi(fe,be){return fe[0]-be[0]||fe[1]-be[1]}T.geom.polygon=function(fe){return se(fe,$a),fe};var $a=T.geom.polygon.prototype=[];$a.area=function(){for(var fe=-1,be=this.length,Ee,Be=this[be-1],ze=0;++fe<be;)Ee=Be,Be=this[fe],ze+=Ee[1]*Be[0]-Ee[0]*Be[1];return ze*.5},$a.centroid=function(fe){var be=-1,Ee=this.length,Be=0,ze=0,We,yt=this[Ee-1],ht;for(arguments.length||(fe=-1/(6*this.area()));++be<Ee;)We=yt,yt=this[be],ht=We[0]*yt[1]-yt[0]*We[1],Be+=(We[0]+yt[0])*ht,ze+=(We[1]+yt[1])*ht;return[Be*fe,ze*fe]},$a.clip=function(fe){for(var be,Ee=Mr(fe),Be=-1,ze=this.length-Mr(this),We,yt,ht=this[ze-1],kt,Vt,Zt;++Be<ze;){for(be=fe.slice(),fe.length=0,kt=this[Be],Vt=be[(yt=be.length-Ee)-1],We=-1;++We<yt;)Zt=be[We],Va(Zt,ht,kt)?(Va(Vt,ht,kt)||fe.push(ti(Vt,Zt,ht,kt)),fe.push(Zt)):Va(Vt,ht,kt)&&fe.push(ti(Vt,Zt,ht,kt)),Vt=Zt;Ee&&fe.push(fe[0]),ht=kt}return fe};function Va(fe,be,Ee){return(Ee[0]-be[0])*(fe[1]-be[1])<(Ee[1]-be[1])*(fe[0]-be[0])}function ti(fe,be,Ee,Be){var ze=fe[0],We=Ee[0],yt=be[0]-ze,ht=Be[0]-We,kt=fe[1],Vt=Ee[1],Zt=be[1]-kt,Qt=Be[1]-Vt,Ar=(ht*(kt-Vt)-Qt*(ze-We))/(Qt*yt-ht*Zt);return[ze+Ar*yt,kt+Ar*Zt]}function Mr(fe){var be=fe[0],Ee=fe[fe.length-1];return!(be[0]-Ee[0]||be[1]-Ee[1])}var vn,fn,An,Gn=[],ia,Yn,zn=[];function ea(){la(this),this.edge=this.site=this.circle=null}function wa(fe){var be=Gn.pop()||new ea;return be.site=fe,be}function si(fe){dr(fe),An.remove(fe),Gn.push(fe),la(fe)}function Ft(fe){var be=fe.circle,Ee=be.x,Be=be.cy,ze={x:Ee,y:Be},We=fe.P,yt=fe.N,ht=[fe];si(fe);for(var kt=We;kt.circle&&l(Ee-kt.circle.x)<ct&&l(Be-kt.circle.cy)<ct;)We=kt.P,ht.unshift(kt),si(kt),kt=We;ht.unshift(kt),dr(kt);for(var Vt=yt;Vt.circle&&l(Ee-Vt.circle.x)<ct&&l(Be-Vt.circle.cy)<ct;)yt=Vt.N,ht.push(Vt),si(Vt),Vt=yt;ht.push(Vt),dr(Vt);var Zt=ht.length,Qt;for(Qt=1;Qt<Zt;++Qt)Vt=ht[Qt],kt=ht[Qt-1],ta(Vt.edge,kt.site,Vt.site,ze);kt=ht[0],Vt=ht[Zt-1],Vt.edge=bn(kt.site,Vt.site,null,ze),xr(kt),xr(Vt)}function cr(fe){for(var be=fe.x,Ee=fe.y,Be,ze,We,yt,ht=An._;ht;)if(We=qr(ht,Ee)-be,We>ct)ht=ht.L;else if(yt=be-nn(ht,Ee),yt>ct){if(!ht.R){Be=ht;break}ht=ht.R}else{We>-ct?(Be=ht.P,ze=ht):yt>-ct?(Be=ht,ze=ht.N):Be=ze=ht;break}var kt=wa(fe);if(An.insert(Be,kt),!(!Be&&!ze)){if(Be===ze){dr(Be),ze=wa(Be.site),An.insert(kt,ze),kt.edge=ze.edge=bn(Be.site,kt.site),xr(Be),xr(ze);return}if(!ze){kt.edge=bn(Be.site,kt.site);return}dr(Be),dr(ze);var Vt=Be.site,Zt=Vt.x,Qt=Vt.y,Ar=fe.x-Zt,Kr=fe.y-Qt,un=ze.site,Sr=un.x-Zt,Br=un.y-Qt,Gr=2*(Ar*Br-Kr*Sr),an=Ar*Ar+Kr*Kr,ln=Sr*Sr+Br*Br,Wr={x:(Br*an-Kr*ln)/Gr+Zt,y:(Ar*ln-Sr*an)/Gr+Qt};ta(ze.edge,Vt,un,Wr),kt.edge=bn(Vt,fe,null,Wr),ze.edge=bn(fe,un,null,Wr),xr(Be),xr(ze)}}function qr(fe,be){var Ee=fe.site,Be=Ee.x,ze=Ee.y,We=ze-be;if(!We)return Be;var yt=fe.P;if(!yt)return-1/0;Ee=yt.site;var ht=Ee.x,kt=Ee.y,Vt=kt-be;if(!Vt)return ht;var Zt=ht-Be,Qt=1/We-1/Vt,Ar=Zt/Vt;return Qt?(-Ar+Math.sqrt(Ar*Ar-2*Qt*(Zt*Zt/(-2*Vt)-kt+Vt/2+ze-We/2)))/Qt+Be:(Be+ht)/2}function nn(fe,be){var Ee=fe.N;if(Ee)return qr(Ee,be);var Be=fe.site;return Be.y===be?Be.x:1/0}function on(fe){this.site=fe,this.edges=[]}on.prototype.prepare=function(){for(var fe=this.edges,be=fe.length,Ee;be--;)Ee=fe[be].edge,(!Ee.b||!Ee.a)&&fe.splice(be,1);return fe.sort(xn),fe.length};function Sn(fe){for(var be=fe[0][0],Ee=fe[1][0],Be=fe[0][1],ze=fe[1][1],We,yt,ht,kt,Vt=fn,Zt=Vt.length,Qt,Ar,Kr,un,Sr,Br;Zt--;)if(Qt=Vt[Zt],!(!Qt||!Qt.prepare()))for(Kr=Qt.edges,un=Kr.length,Ar=0;Ar<un;)Br=Kr[Ar].end(),ht=Br.x,kt=Br.y,Sr=Kr[++Ar%un].start(),We=Sr.x,yt=Sr.y,(l(ht-We)>ct||l(kt-yt)>ct)&&(Kr.splice(Ar,0,new pa(Zn(Qt.site,Br,l(ht-be)<ct&&ze-kt>ct?{x:be,y:l(We-be)<ct?yt:ze}:l(kt-ze)<ct&&Ee-ht>ct?{x:l(yt-ze)<ct?We:Ee,y:ze}:l(ht-Ee)<ct&&kt-Be>ct?{x:Ee,y:l(We-Ee)<ct?yt:Be}:l(kt-Be)<ct&&ht-be>ct?{x:l(yt-Be)<ct?We:be,y:Be}:null),Qt.site,null)),++un)}function xn(fe,be){return be.angle-fe.angle}function tn(){la(this),this.x=this.y=this.arc=this.site=this.cy=null}function xr(fe){var be=fe.P,Ee=fe.N;if(!(!be||!Ee)){var Be=be.site,ze=fe.site,We=Ee.site;if(Be!==We){var yt=ze.x,ht=ze.y,kt=Be.x-yt,Vt=Be.y-ht,Zt=We.x-yt,Qt=We.y-ht,Ar=2*(kt*Qt-Vt*Zt);if(!(Ar>=-Ze)){var Kr=kt*kt+Vt*Vt,un=Zt*Zt+Qt*Qt,Sr=(Qt*Kr-Vt*un)/Ar,Br=(kt*un-Zt*Kr)/Ar,Qt=Br+ht,Gr=zn.pop()||new tn;Gr.arc=fe,Gr.site=ze,Gr.x=Sr+yt,Gr.y=Qt+Math.sqrt(Sr*Sr+Br*Br),Gr.cy=Qt,fe.circle=Gr;for(var an=null,ln=Yn._;ln;)if(Gr.y<ln.y||Gr.y===ln.y&&Gr.x<=ln.x)if(ln.L)ln=ln.L;else{an=ln.P;break}else if(ln.R)ln=ln.R;else{an=ln;break}Yn.insert(an,Gr),an||(ia=Gr)}}}}function dr(fe){var be=fe.circle;be&&(be.P||(ia=be.N),Yn.remove(be),zn.push(be),la(be),fe.circle=null)}function Rr(fe,be,Ee,Be){return function(ze){var We=ze.a,yt=ze.b,ht=We.x,kt=We.y,Vt=yt.x,Zt=yt.y,Qt=0,Ar=1,Kr=Vt-ht,un=Zt-kt,Sr;if(Sr=fe-ht,!(!Kr&&Sr>0)){if(Sr/=Kr,Kr<0){if(Sr<Qt)return;Sr<Ar&&(Ar=Sr)}else if(Kr>0){if(Sr>Ar)return;Sr>Qt&&(Qt=Sr)}if(Sr=Ee-ht,!(!Kr&&Sr<0)){if(Sr/=Kr,Kr<0){if(Sr>Ar)return;Sr>Qt&&(Qt=Sr)}else if(Kr>0){if(Sr<Qt)return;Sr<Ar&&(Ar=Sr)}if(Sr=be-kt,!(!un&&Sr>0)){if(Sr/=un,un<0){if(Sr<Qt)return;Sr<Ar&&(Ar=Sr)}else if(un>0){if(Sr>Ar)return;Sr>Qt&&(Qt=Sr)}if(Sr=Be-kt,!(!un&&Sr<0)){if(Sr/=un,un<0){if(Sr>Ar)return;Sr>Qt&&(Qt=Sr)}else if(un>0){if(Sr<Qt)return;Sr<Ar&&(Ar=Sr)}return Qt>0&&(ze.a={x:ht+Qt*Kr,y:kt+Qt*un}),Ar<1&&(ze.b={x:ht+Ar*Kr,y:kt+Ar*un}),ze}}}}}}function dn(fe){for(var be=vn,Ee=Rr(fe[0][0],fe[0][1],fe[1][0],fe[1][1]),Be=be.length,ze;Be--;)ze=be[Be],(!Bn(ze,fe)||!Ee(ze)||l(ze.a.x-ze.b.x)<ct&&l(ze.a.y-ze.b.y)<ct)&&(ze.a=ze.b=null,be.splice(Be,1))}function Bn(fe,be){var Ee=fe.b;if(Ee)return!0;var Be=fe.a,ze=be[0][0],We=be[1][0],yt=be[0][1],ht=be[1][1],kt=fe.l,Vt=fe.r,Zt=kt.x,Qt=kt.y,Ar=Vt.x,Kr=Vt.y,un=(Zt+Ar)/2,Sr=(Qt+Kr)/2,Br,Gr;if(Kr===Qt){if(un<ze||un>=We)return;if(Zt>Ar){if(!Be)Be={x:un,y:yt};else if(Be.y>=ht)return;Ee={x:un,y:ht}}else{if(!Be)Be={x:un,y:ht};else if(Be.y<yt)return;Ee={x:un,y:yt}}}else if(Br=(Zt-Ar)/(Kr-Qt),Gr=Sr-Br*un,Br<-1||Br>1)if(Zt>Ar){if(!Be)Be={x:(yt-Gr)/Br,y:yt};else if(Be.y>=ht)return;Ee={x:(ht-Gr)/Br,y:ht}}else{if(!Be)Be={x:(ht-Gr)/Br,y:ht};else if(Be.y<yt)return;Ee={x:(yt-Gr)/Br,y:yt}}else if(Qt<Kr){if(!Be)Be={x:ze,y:Br*ze+Gr};else if(Be.x>=We)return;Ee={x:We,y:Br*We+Gr}}else{if(!Be)Be={x:We,y:Br*We+Gr};else if(Be.x<ze)return;Ee={x:ze,y:Br*ze+Gr}}return fe.a=Be,fe.b=Ee,!0}function aa(fe,be){this.l=fe,this.r=be,this.a=this.b=null}function bn(fe,be,Ee,Be){var ze=new aa(fe,be);return vn.push(ze),Ee&&ta(ze,fe,be,Ee),Be&&ta(ze,be,fe,Be),fn[fe.i].edges.push(new pa(ze,fe,be)),fn[be.i].edges.push(new pa(ze,be,fe)),ze}function Zn(fe,be,Ee){var Be=new aa(fe,null);return Be.a=be,Be.b=Ee,vn.push(Be),Be}function ta(fe,be,Ee,Be){!fe.a&&!fe.b?(fe.a=Be,fe.l=be,fe.r=Ee):fe.l===Ee?fe.b=Be:fe.a=Be}function pa(fe,be,Ee){var Be=fe.a,ze=fe.b;this.edge=fe,this.site=be,this.angle=Ee?Math.atan2(Ee.y-be.y,Ee.x-be.x):fe.l===be?Math.atan2(ze.x-Be.x,Be.y-ze.y):Math.atan2(Be.x-ze.x,ze.y-Be.y)}pa.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ya(){this._=null}function la(fe){fe.U=fe.C=fe.L=fe.R=fe.P=fe.N=null}ya.prototype={insert:function(fe,be){var Ee,Be,ze;if(fe){if(be.P=fe,be.N=fe.N,fe.N&&(fe.N.P=be),fe.N=be,fe.R){for(fe=fe.R;fe.L;)fe=fe.L;fe.L=be}else fe.R=be;Ee=fe}else this._?(fe=Vo(this._),be.P=null,be.N=fe,fe.P=fe.L=be,Ee=fe):(be.P=be.N=null,this._=be,Ee=null);for(be.L=be.R=null,be.U=Ee,be.C=!0,fe=be;Ee&&Ee.C;)Be=Ee.U,Ee===Be.L?(ze=Be.R,ze&&ze.C?(Ee.C=ze.C=!1,Be.C=!0,fe=Be):(fe===Ee.R&&(Da(this,Ee),fe=Ee,Ee=fe.U),Ee.C=!1,Be.C=!0,oo(this,Be))):(ze=Be.L,ze&&ze.C?(Ee.C=ze.C=!1,Be.C=!0,fe=Be):(fe===Ee.L&&(oo(this,Ee),fe=Ee,Ee=fe.U),Ee.C=!1,Be.C=!0,Da(this,Be))),Ee=fe.U;this._.C=!1},remove:function(fe){fe.N&&(fe.N.P=fe.P),fe.P&&(fe.P.N=fe.N),fe.N=fe.P=null;var be=fe.U,Ee,Be=fe.L,ze=fe.R,We,yt;if(Be?ze?We=Vo(ze):We=Be:We=ze,be?be.L===fe?be.L=We:be.R=We:this._=We,Be&&ze?(yt=We.C,We.C=fe.C,We.L=Be,Be.U=We,We!==ze?(be=We.U,We.U=fe.U,fe=We.R,be.L=fe,We.R=ze,ze.U=We):(We.U=be,be=We,fe=We.R)):(yt=fe.C,fe=We),fe&&(fe.U=be),!yt){if(fe&&fe.C){fe.C=!1;return}do{if(fe===this._)break;if(fe===be.L){if(Ee=be.R,Ee.C&&(Ee.C=!1,be.C=!0,Da(this,be),Ee=be.R),Ee.L&&Ee.L.C||Ee.R&&Ee.R.C){(!Ee.R||!Ee.R.C)&&(Ee.L.C=!1,Ee.C=!0,oo(this,Ee),Ee=be.R),Ee.C=be.C,be.C=Ee.R.C=!1,Da(this,be),fe=this._;break}}else if(Ee=be.L,Ee.C&&(Ee.C=!1,be.C=!0,oo(this,be),Ee=be.L),Ee.L&&Ee.L.C||Ee.R&&Ee.R.C){(!Ee.L||!Ee.L.C)&&(Ee.R.C=!1,Ee.C=!0,Da(this,Ee),Ee=be.L),Ee.C=be.C,be.C=Ee.L.C=!1,oo(this,be),fe=this._;break}Ee.C=!0,fe=be,be=be.U}while(!fe.C);fe&&(fe.C=!1)}}};function Da(fe,be){var Ee=be,Be=be.R,ze=Ee.U;ze?ze.L===Ee?ze.L=Be:ze.R=Be:fe._=Be,Be.U=ze,Ee.U=Be,Ee.R=Be.L,Ee.R&&(Ee.R.U=Ee),Be.L=Ee}function oo(fe,be){var Ee=be,Be=be.L,ze=Ee.U;ze?ze.L===Ee?ze.L=Be:ze.R=Be:fe._=Be,Be.U=ze,Ee.U=Be,Ee.L=Be.R,Ee.L&&(Ee.L.U=Ee),Be.R=Ee}function Vo(fe){for(;fe.L;)fe=fe.L;return fe}function Zo(fe,be){var Ee=fe.sort(tl).pop(),Be,ze,We;for(vn=[],fn=new Array(fe.length),An=new ya,Yn=new ya;;)if(We=ia,Ee&&(!We||Ee.y<We.y||Ee.y===We.y&&Ee.x<We.x))(Ee.x!==Be||Ee.y!==ze)&&(fn[Ee.i]=new on(Ee),cr(Ee),Be=Ee.x,ze=Ee.y),Ee=fe.pop();else if(We)Ft(We.arc);else break;be&&(dn(be),Sn(be));var yt={cells:fn,edges:vn};return An=Yn=vn=fn=null,yt}function tl(fe,be){return be.y-fe.y||be.x-fe.x}T.geom.voronoi=function(fe){var be=Kn,Ee=Aa,Be=be,ze=Ee,We=hl;if(fe)return yt(fe);function yt(kt){var Vt=new Array(kt.length),Zt=We[0][0],Qt=We[0][1],Ar=We[1][0],Kr=We[1][1];return Zo(ht(kt),We).cells.forEach(function(un,Sr){var Br=un.edges,Gr=un.site,an=Vt[Sr]=Br.length?Br.map(function(ln){var Wr=ln.start();return[Wr.x,Wr.y]}):Gr.x>=Zt&&Gr.x<=Ar&&Gr.y>=Qt&&Gr.y<=Kr?[[Zt,Kr],[Ar,Kr],[Ar,Qt],[Zt,Qt]]:[];an.point=kt[Sr]}),Vt}function ht(kt){return kt.map(function(Vt,Zt){return{x:Math.round(Be(Vt,Zt)/ct)*ct,y:Math.round(ze(Vt,Zt)/ct)*ct,i:Zt}})}return yt.links=function(kt){return Zo(ht(kt)).edges.filter(function(Vt){return Vt.l&&Vt.r}).map(function(Vt){return{source:kt[Vt.l.i],target:kt[Vt.r.i]}})},yt.triangles=function(kt){var Vt=[];return Zo(ht(kt)).cells.forEach(function(Zt,Qt){for(var Ar=Zt.site,Kr=Zt.edges.sort(xn),un=-1,Sr=Kr.length,Br,Gr=Kr[Sr-1].edge,an=Gr.l===Ar?Gr.r:Gr.l;++un<Sr;)Br=an,Gr=Kr[un].edge,an=Gr.l===Ar?Gr.r:Gr.l,Qt<Br.i&&Qt<an.i&&Hl(Ar,Br,an)<0&&Vt.push([kt[Qt],kt[Br.i],kt[an.i]])}),Vt},yt.x=function(kt){return arguments.length?(Be=et(be=kt),yt):be},yt.y=function(kt){return arguments.length?(ze=et(Ee=kt),yt):Ee},yt.clipExtent=function(kt){return arguments.length?(We=kt==null?hl:kt,yt):We===hl?null:We},yt.size=function(kt){return arguments.length?yt.clipExtent(kt&&[[0,0],kt]):We===hl?null:We&&We[1]},yt};var hl=[[-1e6,-1e6],[1e6,1e6]];function Hl(fe,be,Ee){return(fe.x-Ee.x)*(be.y-fe.y)-(fe.x-be.x)*(Ee.y-fe.y)}T.geom.delaunay=function(fe){return T.geom.voronoi().triangles(fe)},T.geom.quadtree=function(fe,be,Ee,Be,ze){var We=Kn,yt=Aa,ht;if(ht=arguments.length)return We=vi,yt=Vs,ht===3&&(ze=Ee,Be=be,Ee=be=0),kt(fe);function kt(Vt){var Zt,Qt=et(We),Ar=et(yt),Kr,un,Sr,Br,Gr,an,ln,Wr;if(be!=null)Gr=be,an=Ee,ln=Be,Wr=ze;else if(ln=Wr=-(Gr=an=1/0),Kr=[],un=[],Br=Vt.length,ht)for(Sr=0;Sr<Br;++Sr)Zt=Vt[Sr],Zt.x<Gr&&(Gr=Zt.x),Zt.y<an&&(an=Zt.y),Zt.x>ln&&(ln=Zt.x),Zt.y>Wr&&(Wr=Zt.y),Kr.push(Zt.x),un.push(Zt.y);else for(Sr=0;Sr<Br;++Sr){var Nn=+Qt(Zt=Vt[Sr],Sr),ra=+Ar(Zt,Sr);Nn<Gr&&(Gr=Nn),ra<an&&(an=ra),Nn>ln&&(ln=Nn),ra>Wr&&(Wr=ra),Kr.push(Nn),un.push(ra)}var ba=ln-Gr,oa=Wr-an;ba>oa?Wr=an+ba:ln=Gr+oa;function ka(Pa,Ja,yi,co,Ii,fa,ai,Wa){if(!(isNaN(yi)||isNaN(co)))if(Pa.leaf){var Si=Pa.x,ui=Pa.y;if(Si!=null)if(l(Si-yi)+l(ui-co)<.01)ua(Pa,Ja,yi,co,Ii,fa,ai,Wa);else{var io=Pa.point;Pa.x=Pa.y=Pa.point=null,ua(Pa,io,Si,ui,Ii,fa,ai,Wa),ua(Pa,Ja,yi,co,Ii,fa,ai,Wa)}else Pa.x=yi,Pa.y=co,Pa.point=Ja}else ua(Pa,Ja,yi,co,Ii,fa,ai,Wa)}function ua(Pa,Ja,yi,co,Ii,fa,ai,Wa){var Si=(Ii+ai)*.5,ui=(fa+Wa)*.5,io=yi>=Si,Qi=co>=ui,go=Qi<<1|io;Pa.leaf=!1,Pa=Pa.nodes[go]||(Pa.nodes[go]=Ps()),io?Ii=Si:ai=Si,Qi?fa=ui:Wa=ui,ka(Pa,Ja,yi,co,Ii,fa,ai,Wa)}var Ua=Ps();if(Ua.add=function(Pa){ka(Ua,Pa,+Qt(Pa,++Sr),+Ar(Pa,Sr),Gr,an,ln,Wr)},Ua.visit=function(Pa){Ui(Pa,Ua,Gr,an,ln,Wr)},Ua.find=function(Pa){return Ao(Ua,Pa[0],Pa[1],Gr,an,ln,Wr)},Sr=-1,be==null){for(;++Sr<Br;)ka(Ua,Vt[Sr],Kr[Sr],un[Sr],Gr,an,ln,Wr);--Sr}else Vt.forEach(Ua.add);return Kr=un=Vt=Zt=null,Ua}return kt.x=function(Vt){return arguments.length?(We=Vt,kt):We},kt.y=function(Vt){return arguments.length?(yt=Vt,kt):yt},kt.extent=function(Vt){return arguments.length?(Vt==null?be=Ee=Be=ze=null:(be=+Vt[0][0],Ee=+Vt[0][1],Be=+Vt[1][0],ze=+Vt[1][1]),kt):be==null?null:[[be,Ee],[Be,ze]]},kt.size=function(Vt){return arguments.length?(Vt==null?be=Ee=Be=ze=null:(be=Ee=0,Be=+Vt[0],ze=+Vt[1]),kt):be==null?null:[Be-be,ze-Ee]},kt};function vi(fe){return fe.x}function Vs(fe){return fe.y}function Ps(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ui(fe,be,Ee,Be,ze,We){if(!fe(be,Ee,Be,ze,We)){var yt=(Ee+ze)*.5,ht=(Be+We)*.5,kt=be.nodes;kt[0]&&Ui(fe,kt[0],Ee,Be,yt,ht),kt[1]&&Ui(fe,kt[1],yt,Be,ze,ht),kt[2]&&Ui(fe,kt[2],Ee,ht,yt,We),kt[3]&&Ui(fe,kt[3],yt,ht,ze,We)}}function Ao(fe,be,Ee,Be,ze,We,yt){var ht=1/0,kt;return function Vt(Zt,Qt,Ar,Kr,un){if(!(Qt>We||Ar>yt||Kr<Be||un<ze)){if(Sr=Zt.point){var Sr,Br=be-Zt.x,Gr=Ee-Zt.y,an=Br*Br+Gr*Gr;if(an<ht){var ln=Math.sqrt(ht=an);Be=be-ln,ze=Ee-ln,We=be+ln,yt=Ee+ln,kt=Sr}}for(var Wr=Zt.nodes,Nn=(Qt+Kr)*.5,ra=(Ar+un)*.5,ba=be>=Nn,oa=Ee>=ra,ka=oa<<1|ba,ua=ka+4;ka<ua;++ka)if(Zt=Wr[ka&3])switch(ka&3){case 0:Vt(Zt,Qt,Ar,Nn,ra);break;case 1:Vt(Zt,Nn,Ar,Kr,ra);break;case 2:Vt(Zt,Qt,ra,Nn,un);break;case 3:Vt(Zt,Nn,ra,Kr,un);break}}}(fe,Be,ze,We,yt),kt}T.interpolateRgb=vl;function vl(fe,be){fe=T.rgb(fe),be=T.rgb(be);var Ee=fe.r,Be=fe.g,ze=fe.b,We=be.r-Ee,yt=be.g-Be,ht=be.b-ze;return function(kt){return"#"+wr(Math.round(Ee+We*kt))+wr(Math.round(Be+yt*kt))+wr(Math.round(ze+ht*kt))}}T.interpolateObject=hs;function hs(fe,be){var Ee={},Be={},ze;for(ze in fe)ze in be?Ee[ze]=no(fe[ze],be[ze]):Be[ze]=fe[ze];for(ze in be)ze in fe||(Be[ze]=be[ze]);return function(We){for(ze in Ee)Be[ze]=Ee[ze](We);return Be}}T.interpolateNumber=Di;function Di(fe,be){return fe=+fe,be=+be,function(Ee){return fe*(1-Ee)+be*Ee}}T.interpolateString=rl;function rl(fe,be){var Ee=Ki.lastIndex=Fi.lastIndex=0,Be,ze,We,yt=-1,ht=[],kt=[];for(fe=fe+"",be=be+"";(Be=Ki.exec(fe))&&(ze=Fi.exec(be));)(We=ze.index)>Ee&&(We=be.slice(Ee,We),ht[yt]?ht[yt]+=We:ht[++yt]=We),(Be=Be[0])===(ze=ze[0])?ht[yt]?ht[yt]+=ze:ht[++yt]=ze:(ht[++yt]=null,kt.push({i:yt,x:Di(Be,ze)})),Ee=Fi.lastIndex;return Ee<be.length&&(We=be.slice(Ee),ht[yt]?ht[yt]+=We:ht[++yt]=We),ht.length<2?kt[0]?(be=kt[0].x,function(Vt){return be(Vt)+""}):function(){return be}:(be=kt.length,function(Vt){for(var Zt=0,Qt;Zt<be;++Zt)ht[(Qt=kt[Zt]).i]=Qt.x(Vt);return ht.join("")})}var Ki=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fi=new RegExp(Ki.source,"g");T.interpolate=no;function no(fe,be){for(var Ee=T.interpolators.length,Be;--Ee>=0&&!(Be=T.interpolators[Ee](fe,be)););return Be}T.interpolators=[function(fe,be){var Ee=typeof be;return(Ee==="string"?Tr.has(be.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(be)?vl:rl:be instanceof Gt?vl:Array.isArray(be)?Ji:Ee==="object"&&isNaN(be)?hs:Di)(fe,be)}],T.interpolateArray=Ji;function Ji(fe,be){var Ee=[],Be=[],ze=fe.length,We=be.length,yt=Math.min(fe.length,be.length),ht;for(ht=0;ht<yt;++ht)Ee.push(no(fe[ht],be[ht]));for(;ht<ze;++ht)Be[ht]=fe[ht];for(;ht<We;++ht)Be[ht]=be[ht];return function(kt){for(ht=0;ht<yt;++ht)Be[ht]=Ee[ht](kt);return Be}}var es=function(){return D},Hs=T.map({linear:es,poly:bs,quad:function(){return Mo},cubic:function(){return Tu},sin:function(){return El},exp:function(){return Au},circle:function(){return Mu},elastic:Gs,back:Cl,bounce:function(){return _s}}),ru=T.map({in:D,out:nu,"in-out":Ds,"out-in":function(fe){return Ds(nu(fe))}});T.ease=function(fe){var be=fe.indexOf("-"),Ee=be>=0?fe.slice(0,be):fe,Be=be>=0?fe.slice(be+1):"in";return Ee=Hs.get(Ee)||es,Be=ru.get(Be)||D,jo(Be(Ee.apply(null,c.call(arguments,1))))};function jo(fe){return function(be){return be<=0?0:be>=1?1:fe(be)}}function nu(fe){return function(be){return 1-fe(1-be)}}function Ds(fe){return function(be){return .5*(be<.5?fe(2*be):2-fe(2-2*be))}}function Mo(fe){return fe*fe}function Tu(fe){return fe*fe*fe}function Rs(fe){if(fe<=0)return 0;if(fe>=1)return 1;var be=fe*fe,Ee=be*fe;return 4*(fe<.5?Ee:3*(fe-be)+Ee-.75)}function bs(fe){return function(be){return Math.pow(be,fe)}}function El(fe){return 1-Math.cos(fe*it)}function Au(fe){return Math.pow(2,10*(fe-1))}function Mu(fe){return 1-Math.sqrt(1-fe*fe)}function Gs(fe,be){var Ee;return arguments.length<2&&(be=.45),arguments.length?Ee=be/Ge*Math.asin(1/fe):(fe=1,Ee=be/4),function(Be){return 1+fe*Math.pow(2,-10*Be)*Math.sin((Be-Ee)*Ge/be)}}function Cl(fe){return fe||(fe=1.70158),function(be){return be*be*((fe+1)*be-fe)}}function _s(fe){return fe<1/2.75?7.5625*fe*fe:fe<2/2.75?7.5625*(fe-=1.5/2.75)*fe+.75:fe<2.5/2.75?7.5625*(fe-=2.25/2.75)*fe+.9375:7.5625*(fe-=2.625/2.75)*fe+.984375}T.interpolateHcl=Gl;function Gl(fe,be){fe=T.hcl(fe),be=T.hcl(be);var Ee=fe.h,Be=fe.c,ze=fe.l,We=be.h-Ee,yt=be.c-Be,ht=be.l-ze;return isNaN(yt)&&(yt=0,Be=isNaN(Be)?be.c:Be),isNaN(We)?(We=0,Ee=isNaN(Ee)?be.h:Ee):We>180?We-=360:We<-180&&(We+=360),function(kt){return st(Ee+We*kt,Be+yt*kt,ze+ht*kt)+""}}T.interpolateHsl=nl;function nl(fe,be){fe=T.hsl(fe),be=T.hsl(be);var Ee=fe.h,Be=fe.s,ze=fe.l,We=be.h-Ee,yt=be.s-Be,ht=be.l-ze;return isNaN(yt)&&(yt=0,Be=isNaN(Be)?be.s:Be),isNaN(We)?(We=0,Ee=isNaN(Ee)?be.h:Ee):We>180?We-=360:We<-180&&(We+=360),function(kt){return _r(Ee+We*kt,Be+yt*kt,ze+ht*kt)+""}}T.interpolateLab=Yl;function Yl(fe,be){fe=T.lab(fe),be=T.lab(be);var Ee=fe.l,Be=fe.a,ze=fe.b,We=be.l-Ee,yt=be.a-Be,ht=be.b-ze;return function(kt){return pt(Ee+We*kt,Be+yt*kt,ze+ht*kt)+""}}T.interpolateRound=au;function au(fe,be){return be-=fe,function(Ee){return Math.round(fe+be*Ee)}}T.transform=function(fe){var be=A.createElementNS(T.ns.prefix.svg,"g");return(T.transform=function(Ee){if(Ee!=null){be.setAttribute("transform",Ee);var Be=be.transform.baseVal.consolidate()}return new Ll(Be?Be.matrix:Pl)})(fe)};function Ll(fe){var be=[fe.a,fe.b],Ee=[fe.c,fe.d],Be=Ys(be),ze=Su(be,Ee),We=Ys(Wl(Ee,be,-ze))||0;be[0]*Ee[1]<Ee[0]*be[1]&&(be[0]*=-1,be[1]*=-1,Be*=-1,ze*=-1),this.rotate=(Be?Math.atan2(be[1],be[0]):Math.atan2(-Ee[0],Ee[1]))*At,this.translate=[fe.e,fe.f],this.scale=[Be,We],this.skew=We?Math.atan2(ze,We)*At:0}Ll.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Su(fe,be){return fe[0]*be[0]+fe[1]*be[1]}function Ys(fe){var be=Math.sqrt(Su(fe,fe));return be&&(fe[0]/=be,fe[1]/=be),be}function Wl(fe,be,Ee){return fe[0]+=Ee*be[0],fe[1]+=Ee*be[1],fe}var Pl={a:1,b:0,c:0,d:1,e:0,f:0};T.interpolateTransform=Dl;function vs(fe){return fe.length?fe.pop()+",":""}function pl(fe,be,Ee,Be){if(fe[0]!==be[0]||fe[1]!==be[1]){var ze=Ee.push("translate(",null,",",null,")");Be.push({i:ze-4,x:Di(fe[0],be[0])},{i:ze-2,x:Di(fe[1],be[1])})}else(be[0]||be[1])&&Ee.push("translate("+be+")")}function Xl(fe,be,Ee,Be){fe!==be?(fe-be>180?be+=360:be-fe>180&&(fe+=360),Be.push({i:Ee.push(vs(Ee)+"rotate(",null,")")-2,x:Di(fe,be)})):be&&Ee.push(vs(Ee)+"rotate("+be+")")}function iu(fe,be,Ee,Be){fe!==be?Be.push({i:Ee.push(vs(Ee)+"skewX(",null,")")-2,x:Di(fe,be)}):be&&Ee.push(vs(Ee)+"skewX("+be+")")}function ou(fe,be,Ee,Be){if(fe[0]!==be[0]||fe[1]!==be[1]){var ze=Ee.push(vs(Ee)+"scale(",null,",",null,")");Be.push({i:ze-4,x:Di(fe[0],be[0])},{i:ze-2,x:Di(fe[1],be[1])})}else(be[0]!==1||be[1]!==1)&&Ee.push(vs(Ee)+"scale("+be+")")}function Dl(fe,be){var Ee=[],Be=[];return fe=T.transform(fe),be=T.transform(be),pl(fe.translate,be.translate,Ee,Be),Xl(fe.rotate,be.rotate,Ee,Be),iu(fe.skew,be.skew,Ee,Be),ou(fe.scale,be.scale,Ee,Be),fe=be=null,function(ze){for(var We=-1,yt=Be.length,ht;++We<yt;)Ee[(ht=Be[We]).i]=ht.x(ze);return Ee.join("")}}function ku(fe,be){return be=(be-=fe=+fe)||1/be,function(Ee){return(Ee-fe)/be}}function su(fe,be){return be=(be-=fe=+fe)||1/be,function(Ee){return Math.max(0,Math.min(1,(Ee-fe)/be))}}T.layout={},T.layout.bundle=function(){return function(fe){for(var be=[],Ee=-1,Be=fe.length;++Ee<Be;)be.push(Ko(fe[Ee]));return be}};function Ko(fe){for(var be=fe.source,Ee=fe.target,Be=il(be,Ee),ze=[be];be!==Be;)be=be.parent,ze.push(be);for(var We=ze.length;Ee!==Be;)ze.splice(We,0,Ee),Ee=Ee.parent;return ze}function al(fe){for(var be=[],Ee=fe.parent;Ee!=null;)be.push(fe),fe=Ee,Ee=Ee.parent;return be.push(fe),be}function il(fe,be){if(fe===be)return fe;for(var Ee=al(fe),Be=al(be),ze=Ee.pop(),We=Be.pop(),yt=null;ze===We;)yt=ze,ze=Ee.pop(),We=Be.pop();return yt}T.layout.chord=function(){var fe={},be,Ee,Be,ze,We=0,yt,ht,kt;function Vt(){var Qt={},Ar=[],Kr=T.range(ze),un=[],Sr,Br,Gr,an,ln;for(be=[],Ee=[],Sr=0,an=-1;++an<ze;){for(Br=0,ln=-1;++ln<ze;)Br+=Be[an][ln];Ar.push(Br),un.push(T.range(ze)),Sr+=Br}for(yt&&Kr.sort(function(Ua,Pa){return yt(Ar[Ua],Ar[Pa])}),ht&&un.forEach(function(Ua,Pa){Ua.sort(function(Ja,yi){return ht(Be[Pa][Ja],Be[Pa][yi])})}),Sr=(Ge-We*ze)/Sr,Br=0,an=-1;++an<ze;){for(Gr=Br,ln=-1;++ln<ze;){var Wr=Kr[an],Nn=un[Wr][ln],ra=Be[Wr][Nn],ba=Br,oa=Br+=ra*Sr;Qt[Wr+"-"+Nn]={index:Wr,subindex:Nn,startAngle:ba,endAngle:oa,value:ra}}Ee[Wr]={index:Wr,startAngle:Gr,endAngle:Br,value:Ar[Wr]},Br+=We}for(an=-1;++an<ze;)for(ln=an-1;++ln<ze;){var ka=Qt[an+"-"+ln],ua=Qt[ln+"-"+an];(ka.value||ua.value)&&be.push(ka.value<ua.value?{source:ua,target:ka}:{source:ka,target:ua})}kt&&Zt()}function Zt(){be.sort(function(Qt,Ar){return kt((Qt.source.value+Qt.target.value)/2,(Ar.source.value+Ar.target.value)/2)})}return fe.matrix=function(Qt){return arguments.length?(ze=(Be=Qt)&&Be.length,be=Ee=null,fe):Be},fe.padding=function(Qt){return arguments.length?(We=Qt,be=Ee=null,fe):We},fe.sortGroups=function(Qt){return arguments.length?(yt=Qt,be=Ee=null,fe):yt},fe.sortSubgroups=function(Qt){return arguments.length?(ht=Qt,be=null,fe):ht},fe.sortChords=function(Qt){return arguments.length?(kt=Qt,be&&Zt(),fe):kt},fe.chords=function(){return be||Vt(),be},fe.groups=function(){return Ee||Vt(),Ee},fe},T.layout.force=function(){var fe={},be=T.dispatch("start","tick","end"),Ee,Be=[1,1],ze,We,yt=.9,ht=Ts,kt=so,Vt=-30,Zt=dl,Qt=.1,Ar=.64,Kr=[],un=[],Sr,Br,Gr;function an(Wr){return function(Nn,ra,ba,oa){if(Nn.point!==Wr){var ka=Nn.cx-Wr.x,ua=Nn.cy-Wr.y,Ua=oa-ra,Pa=ka*ka+ua*ua;if(Ua*Ua/Ar<Pa){if(Pa<Zt){var Ja=Nn.charge/Pa;Wr.px-=ka*Ja,Wr.py-=ua*Ja}return!0}if(Nn.point&&Pa&&Pa<Zt){var Ja=Nn.pointCharge/Pa;Wr.px-=ka*Ja,Wr.py-=ua*Ja}}return!Nn.charge}}fe.tick=function(){if((We*=.99)<.005)return Ee=null,be.end({type:"end",alpha:We=0}),!0;var Wr=Kr.length,Nn=un.length,ra,ba,oa,ka,ua,Ua,Pa,Ja,yi;for(ba=0;ba<Nn;++ba)oa=un[ba],ka=oa.source,ua=oa.target,Ja=ua.x-ka.x,yi=ua.y-ka.y,(Ua=Ja*Ja+yi*yi)&&(Ua=We*Br[ba]*((Ua=Math.sqrt(Ua))-Sr[ba])/Ua,Ja*=Ua,yi*=Ua,ua.x-=Ja*(Pa=ka.weight+ua.weight?ka.weight/(ka.weight+ua.weight):.5),ua.y-=yi*Pa,ka.x+=Ja*(Pa=1-Pa),ka.y+=yi*Pa);if((Pa=We*Qt)&&(Ja=Be[0]/2,yi=Be[1]/2,ba=-1,Pa))for(;++ba<Wr;)oa=Kr[ba],oa.x+=(Ja-oa.x)*Pa,oa.y+=(yi-oa.y)*Pa;if(Vt)for(ws(ra=T.geom.quadtree(Kr),We,Gr),ba=-1;++ba<Wr;)(oa=Kr[ba]).fixed||ra.visit(an(oa));for(ba=-1;++ba<Wr;)oa=Kr[ba],oa.fixed?(oa.x=oa.px,oa.y=oa.py):(oa.x-=(oa.px-(oa.px=oa.x))*yt,oa.y-=(oa.py-(oa.py=oa.y))*yt);be.tick({type:"tick",alpha:We})},fe.nodes=function(Wr){return arguments.length?(Kr=Wr,fe):Kr},fe.links=function(Wr){return arguments.length?(un=Wr,fe):un},fe.size=function(Wr){return arguments.length?(Be=Wr,fe):Be},fe.linkDistance=function(Wr){return arguments.length?(ht=typeof Wr=="function"?Wr:+Wr,fe):ht},fe.distance=fe.linkDistance,fe.linkStrength=function(Wr){return arguments.length?(kt=typeof Wr=="function"?Wr:+Wr,fe):kt},fe.friction=function(Wr){return arguments.length?(yt=+Wr,fe):yt},fe.charge=function(Wr){return arguments.length?(Vt=typeof Wr=="function"?Wr:+Wr,fe):Vt},fe.chargeDistance=function(Wr){return arguments.length?(Zt=Wr*Wr,fe):Math.sqrt(Zt)},fe.gravity=function(Wr){return arguments.length?(Qt=+Wr,fe):Qt},fe.theta=function(Wr){return arguments.length?(Ar=Wr*Wr,fe):Math.sqrt(Ar)},fe.alpha=function(Wr){return arguments.length?(Wr=+Wr,We?Wr>0?We=Wr:(Ee.c=null,Ee.t=NaN,Ee=null,be.end({type:"end",alpha:We=0})):Wr>0&&(be.start({type:"start",alpha:We=Wr}),Ee=_n(fe.tick)),fe):We},fe.start=function(){var Wr,Nn=Kr.length,ra=un.length,ba=Be[0],oa=Be[1],ka,ua;for(Wr=0;Wr<Nn;++Wr)(ua=Kr[Wr]).index=Wr,ua.weight=0;for(Wr=0;Wr<ra;++Wr)ua=un[Wr],typeof ua.source=="number"&&(ua.source=Kr[ua.source]),typeof ua.target=="number"&&(ua.target=Kr[ua.target]),++ua.source.weight,++ua.target.weight;for(Wr=0;Wr<Nn;++Wr)ua=Kr[Wr],isNaN(ua.x)&&(ua.x=Ua("x",ba)),isNaN(ua.y)&&(ua.y=Ua("y",oa)),isNaN(ua.px)&&(ua.px=ua.x),isNaN(ua.py)&&(ua.py=ua.y);if(Sr=[],typeof ht=="function")for(Wr=0;Wr<ra;++Wr)Sr[Wr]=+ht.call(this,un[Wr],Wr);else for(Wr=0;Wr<ra;++Wr)Sr[Wr]=ht;if(Br=[],typeof kt=="function")for(Wr=0;Wr<ra;++Wr)Br[Wr]=+kt.call(this,un[Wr],Wr);else for(Wr=0;Wr<ra;++Wr)Br[Wr]=kt;if(Gr=[],typeof Vt=="function")for(Wr=0;Wr<Nn;++Wr)Gr[Wr]=+Vt.call(this,Kr[Wr],Wr);else for(Wr=0;Wr<Nn;++Wr)Gr[Wr]=Vt;function Ua(Pa,Ja){if(!ka){for(ka=new Array(Nn),Ii=0;Ii<Nn;++Ii)ka[Ii]=[];for(Ii=0;Ii<ra;++Ii){var yi=un[Ii];ka[yi.source.index].push(yi.target),ka[yi.target.index].push(yi.source)}}for(var co=ka[Wr],Ii=-1,fa=co.length,ai;++Ii<fa;)if(!isNaN(ai=co[Ii][Pa]))return ai;return Math.random()*Ja}return fe.resume()},fe.resume=function(){return fe.alpha(.1)},fe.stop=function(){return fe.alpha(0)},fe.drag=function(){if(ze||(ze=T.behavior.drag().origin(D).on("dragstart.force",Zl).on("drag.force",ln).on("dragend.force",ps)),!arguments.length)return ze;this.on("mouseover.force",So).on("mouseout.force",Rl).call(ze)};function ln(Wr){Wr.px=T.event.x,Wr.py=T.event.y,fe.resume()}return T.rebind(fe,be,"on")};function Zl(fe){fe.fixed|=2}function ps(fe){fe.fixed&=~6}function So(fe){fe.fixed|=4,fe.px=fe.x,fe.py=fe.y}function Rl(fe){fe.fixed&=~4}function ws(fe,be,Ee){var Be=0,ze=0;if(fe.charge=0,!fe.leaf)for(var We=fe.nodes,yt=We.length,ht=-1,kt;++ht<yt;)kt=We[ht],kt!=null&&(ws(kt,be,Ee),fe.charge+=kt.charge,Be+=kt.charge*kt.cx,ze+=kt.charge*kt.cy);if(fe.point){fe.leaf||(fe.point.x+=Math.random()-.5,fe.point.y+=Math.random()-.5);var Vt=be*Ee[fe.point.index];fe.charge+=fe.pointCharge=Vt,Be+=Vt*fe.point.x,ze+=Vt*fe.point.y}fe.cx=Be/fe.charge,fe.cy=ze/fe.charge}var Ts=20,so=1,dl=1/0;T.layout.hierarchy=function(){var fe=Il,be=ml,Ee=ol;function Be(ze){var We=[ze],yt=[],ht;for(ze.depth=0;(ht=We.pop())!=null;)if(yt.push(ht),(Vt=be.call(Be,ht,ht.depth))&&(kt=Vt.length)){for(var kt,Vt,Zt;--kt>=0;)We.push(Zt=Vt[kt]),Zt.parent=ht,Zt.depth=ht.depth+1;Ee&&(ht.value=0),ht.children=Vt}else Ee&&(ht.value=+Ee.call(Be,ht,ht.depth)||0),delete ht.children;return ds(ze,function(Qt){var Ar,Kr;fe&&(Ar=Qt.children)&&Ar.sort(fe),Ee&&(Kr=Qt.parent)&&(Kr.value+=Qt.value)}),yt}return Be.sort=function(ze){return arguments.length?(fe=ze,Be):fe},Be.children=function(ze){return arguments.length?(be=ze,Be):be},Be.value=function(ze){return arguments.length?(Ee=ze,Be):Ee},Be.revalue=function(ze){return Ee&&(Ws(ze,function(We){We.children&&(We.value=0)}),ds(ze,function(We){var yt;We.children||(We.value=+Ee.call(Be,We,We.depth)||0),(yt=We.parent)&&(yt.value+=We.value)})),ze},Be};function yl(fe,be){return T.rebind(fe,be,"sort","children","value"),fe.nodes=fe,fe.links=xl,fe}function Ws(fe,be){for(var Ee=[fe];(fe=Ee.pop())!=null;)if(be(fe),(ze=fe.children)&&(Be=ze.length))for(var Be,ze;--Be>=0;)Ee.push(ze[Be])}function ds(fe,be){for(var Ee=[fe],Be=[];(fe=Ee.pop())!=null;)if(Be.push(fe),(yt=fe.children)&&(We=yt.length))for(var ze=-1,We,yt;++ze<We;)Ee.push(yt[ze]);for(;(fe=Be.pop())!=null;)be(fe)}function ml(fe){return fe.children}function ol(fe){return fe.value}function Il(fe,be){return be.value-fe.value}function xl(fe){return T.merge(fe.map(function(be){return(be.children||[]).map(function(Ee){return{source:be,target:Ee}})}))}T.layout.partition=function(){var fe=T.layout.hierarchy(),be=[1,1];function Ee(We,yt,ht,kt){var Vt=We.children;if(We.x=yt,We.y=We.depth*kt,We.dx=ht,We.dy=kt,Vt&&(Qt=Vt.length)){var Zt=-1,Qt,Ar,Kr;for(ht=We.value?ht/We.value:0;++Zt<Qt;)Ee(Ar=Vt[Zt],yt,Kr=Ar.value*ht,kt),yt+=Kr}}function Be(We){var yt=We.children,ht=0;if(yt&&(Vt=yt.length))for(var kt=-1,Vt;++kt<Vt;)ht=Math.max(ht,Be(yt[kt]));return 1+ht}function ze(We,yt){var ht=fe.call(this,We,yt);return Ee(ht[0],0,be[0],be[1]/Be(ht[0])),ht}return ze.size=function(We){return arguments.length?(be=We,ze):be},yl(ze,fe)},T.layout.pie=function(){var fe=Number,be=Xs,Ee=0,Be=Ge,ze=0;function We(yt){var ht=yt.length,kt=yt.map(function(an,ln){return+fe.call(We,an,ln)}),Vt=+(typeof Ee=="function"?Ee.apply(this,arguments):Ee),Zt=(typeof Be=="function"?Be.apply(this,arguments):Be)-Vt,Qt=Math.min(Math.abs(Zt)/ht,+(typeof ze=="function"?ze.apply(this,arguments):ze)),Ar=Qt*(Zt<0?-1:1),Kr=T.sum(kt),un=Kr?(Zt-ht*Ar)/Kr:0,Sr=T.range(ht),Br=[],Gr;return be!=null&&Sr.sort(be===Xs?function(an,ln){return kt[ln]-kt[an]}:function(an,ln){return be(yt[an],yt[ln])}),Sr.forEach(function(an){Br[an]={data:yt[an],value:Gr=kt[an],startAngle:Vt,endAngle:Vt+=Gr*un+Ar,padAngle:Qt}}),Br}return We.value=function(yt){return arguments.length?(fe=yt,We):fe},We.sort=function(yt){return arguments.length?(be=yt,We):be},We.startAngle=function(yt){return arguments.length?(Ee=yt,We):Ee},We.endAngle=function(yt){return arguments.length?(Be=yt,We):Be},We.padAngle=function(yt){return arguments.length?(ze=yt,We):ze},We};var Xs={};T.layout.stack=function(){var fe=D,be=bl,Ee=Zs,Be=Hu,ze=Eu,We=ts;function yt(ht,kt){if(!(un=ht.length))return ht;var Vt=ht.map(function(an,ln){return fe.call(yt,an,ln)}),Zt=Vt.map(function(an){return an.map(function(ln,Wr){return[ze.call(yt,ln,Wr),We.call(yt,ln,Wr)]})}),Qt=be.call(yt,Zt,kt);Vt=T.permute(Vt,Qt),Zt=T.permute(Zt,Qt);var Ar=Ee.call(yt,Zt,kt),Kr=Vt[0].length,un,Sr,Br,Gr;for(Br=0;Br<Kr;++Br)for(Be.call(yt,Vt[0][Br],Gr=Ar[Br],Zt[0][Br][1]),Sr=1;Sr<un;++Sr)Be.call(yt,Vt[Sr][Br],Gr+=Zt[Sr-1][Br][1],Zt[Sr][Br][1]);return ht}return yt.values=function(ht){return arguments.length?(fe=ht,yt):fe},yt.order=function(ht){return arguments.length?(be=typeof ht=="function"?ht:jl.get(ht)||bl,yt):be},yt.offset=function(ht){return arguments.length?(Ee=typeof ht=="function"?ht:sl.get(ht)||Zs,yt):Ee},yt.x=function(ht){return arguments.length?(ze=ht,yt):ze},yt.y=function(ht){return arguments.length?(We=ht,yt):We},yt.out=function(ht){return arguments.length?(Be=ht,yt):Be},yt};function Eu(fe){return fe.x}function ts(fe){return fe.y}function Hu(fe,be,Ee){fe.y0=be,fe.y=Ee}var jl=T.map({"inside-out":function(fe){var be=fe.length,Ee,Be,ze=fe.map(_l),We=fe.map(lu),yt=T.range(be).sort(function(Qt,Ar){return ze[Qt]-ze[Ar]}),ht=0,kt=0,Vt=[],Zt=[];for(Ee=0;Ee<be;++Ee)Be=yt[Ee],ht<kt?(ht+=We[Be],Vt.push(Be)):(kt+=We[Be],Zt.push(Be));return Zt.reverse().concat(Vt)},reverse:function(fe){return T.range(fe.length).reverse()},default:bl}),sl=T.map({silhouette:function(fe){var be=fe.length,Ee=fe[0].length,Be=[],ze=0,We,yt,ht,kt=[];for(yt=0;yt<Ee;++yt){for(We=0,ht=0;We<be;We++)ht+=fe[We][yt][1];ht>ze&&(ze=ht),Be.push(ht)}for(yt=0;yt<Ee;++yt)kt[yt]=(ze-Be[yt])/2;return kt},wiggle:function(fe){var be=fe.length,Ee=fe[0],Be=Ee.length,ze,We,yt,ht,kt,Vt,Zt,Qt,Ar,Kr=[];for(Kr[0]=Qt=Ar=0,We=1;We<Be;++We){for(ze=0,ht=0;ze<be;++ze)ht+=fe[ze][We][1];for(ze=0,kt=0,Zt=Ee[We][0]-Ee[We-1][0];ze<be;++ze){for(yt=0,Vt=(fe[ze][We][1]-fe[ze][We-1][1])/(2*Zt);yt<ze;++yt)Vt+=(fe[yt][We][1]-fe[yt][We-1][1])/Zt;kt+=Vt*fe[ze][We][1]}Kr[We]=Qt-=ht?kt/ht*Zt:0,Qt<Ar&&(Ar=Qt)}for(We=0;We<Be;++We)Kr[We]-=Ar;return Kr},expand:function(fe){var be=fe.length,Ee=fe[0].length,Be=1/be,ze,We,yt,ht=[];for(We=0;We<Ee;++We){for(ze=0,yt=0;ze<be;ze++)yt+=fe[ze][We][1];if(yt)for(ze=0;ze<be;ze++)fe[ze][We][1]/=yt;else for(ze=0;ze<be;ze++)fe[ze][We][1]=Be}for(We=0;We<Ee;++We)ht[We]=0;return ht},zero:Zs});function bl(fe){return T.range(fe.length)}function Zs(fe){for(var be=-1,Ee=fe[0].length,Be=[];++be<Ee;)Be[be]=0;return Be}function _l(fe){for(var be=1,Ee=0,Be=fe[0][1],ze,We=fe.length;be<We;++be)(ze=fe[be][1])>Be&&(Ee=be,Be=ze);return Ee}function lu(fe){return fe.reduce(uu,0)}function uu(fe,be){return fe+be[1]}T.layout.histogram=function(){var fe=!0,be=Number,Ee=ll,Be=Gu;function ze(We,yt){for(var ht=[],kt=We.map(be,this),Vt=Ee.call(this,kt,yt),Zt=Be.call(this,Vt,kt,yt),Qt,yt=-1,Ar=kt.length,Kr=Zt.length-1,un=fe?1:1/Ar,Sr;++yt<Kr;)Qt=ht[yt]=[],Qt.dx=Zt[yt+1]-(Qt.x=Zt[yt]),Qt.y=0;if(Kr>0)for(yt=-1;++yt<Ar;)Sr=kt[yt],Sr>=Vt[0]&&Sr<=Vt[1]&&(Qt=ht[T.bisect(Zt,Sr,1,Kr)-1],Qt.y+=un,Qt.push(We[yt]));return ht}return ze.value=function(We){return arguments.length?(be=We,ze):be},ze.range=function(We){return arguments.length?(Ee=et(We),ze):Ee},ze.bins=function(We){return arguments.length?(Be=typeof We=="number"?function(yt){return Ri(yt,We)}:et(We),ze):Be},ze.frequency=function(We){return arguments.length?(fe=!!We,ze):fe},ze};function Gu(fe,be){return Ri(fe,Math.ceil(Math.log(be.length)/Math.LN2+1))}function Ri(fe,be){for(var Ee=-1,Be=+fe[0],ze=(fe[1]-Be)/be,We=[];++Ee<=be;)We[Ee]=ze*Ee+Be;return We}function ll(fe){return[T.min(fe),T.max(fe)]}T.layout.pack=function(){var fe=T.layout.hierarchy().sort(js),be=0,Ee=[1,1],Be;function ze(We,yt){var ht=fe.call(this,We,yt),kt=ht[0],Vt=Ee[0],Zt=Ee[1],Qt=Be==null?Math.sqrt:typeof Be=="function"?Be:function(){return Be};if(kt.x=kt.y=0,ds(kt,function(Kr){Kr.r=+Qt(Kr.value)}),ds(kt,lo),be){var Ar=be*(Be?1:Math.max(2*kt.r/Vt,2*kt.r/Zt))/2;ds(kt,function(Kr){Kr.r+=Ar}),ds(kt,lo),ds(kt,function(Kr){Kr.r-=Ar})}return Is(kt,Vt/2,Zt/2,Be?1:1/Math.max(2*kt.r/Vt,2*kt.r/Zt)),ht}return ze.size=function(We){return arguments.length?(Ee=We,ze):Ee},ze.radius=function(We){return arguments.length?(Be=We==null||typeof We=="function"?We:+We,ze):Be},ze.padding=function(We){return arguments.length?(be=+We,ze):be},yl(ze,fe)};function js(fe,be){return fe.value-be.value}function Jo(fe,be){var Ee=fe._pack_next;fe._pack_next=be,be._pack_prev=fe,be._pack_next=Ee,Ee._pack_prev=be}function rs(fe,be){fe._pack_next=be,be._pack_prev=fe}function wl(fe,be){var Ee=be.x-fe.x,Be=be.y-fe.y,ze=fe.r+be.r;return .999*ze*ze>Ee*Ee+Be*Be}function lo(fe){if(!(be=fe.children)||!(Ar=be.length))return;var be,Ee=1/0,Be=-1/0,ze=1/0,We=-1/0,yt,ht,kt,Vt,Zt,Qt,Ar;function Kr(Wr){Ee=Math.min(Wr.x-Wr.r,Ee),Be=Math.max(Wr.x+Wr.r,Be),ze=Math.min(Wr.y-Wr.r,ze),We=Math.max(Wr.y+Wr.r,We)}if(be.forEach(fu),yt=be[0],yt.x=-yt.r,yt.y=0,Kr(yt),Ar>1&&(ht=be[1],ht.x=ht.r,ht.y=0,Kr(ht),Ar>2))for(kt=be[2],zs(yt,ht,kt),Kr(kt),Jo(yt,kt),yt._pack_prev=kt,Jo(kt,ht),ht=yt._pack_next,Vt=3;Vt<Ar;Vt++){zs(yt,ht,kt=be[Vt]);var un=0,Sr=1,Br=1;for(Zt=ht._pack_next;Zt!==ht;Zt=Zt._pack_next,Sr++)if(wl(Zt,kt)){un=1;break}if(un==1)for(Qt=yt._pack_prev;Qt!==Zt._pack_prev&&!wl(Qt,kt);Qt=Qt._pack_prev,Br++);un?(Sr<Br||Sr==Br&&ht.r<yt.r?rs(yt,ht=Zt):rs(yt=Qt,ht),Vt--):(Jo(yt,kt),ht=kt,Kr(kt))}var Gr=(Ee+Be)/2,an=(ze+We)/2,ln=0;for(Vt=0;Vt<Ar;Vt++)kt=be[Vt],kt.x-=Gr,kt.y-=an,ln=Math.max(ln,kt.r+Math.sqrt(kt.x*kt.x+kt.y*kt.y));fe.r=ln,be.forEach(ns)}function fu(fe){fe._pack_next=fe._pack_prev=fe}function ns(fe){delete fe._pack_next,delete fe._pack_prev}function Is(fe,be,Ee,Be){var ze=fe.children;if(fe.x=be+=Be*fe.x,fe.y=Ee+=Be*fe.y,fe.r*=Be,ze)for(var We=-1,yt=ze.length;++We<yt;)Is(ze[We],be,Ee,Be)}function zs(fe,be,Ee){var Be=fe.r+Ee.r,ze=be.x-fe.x,We=be.y-fe.y;if(Be&&(ze||We)){var yt=be.r+Ee.r,ht=ze*ze+We*We;yt*=yt,Be*=Be;var kt=.5+(Be-yt)/(2*ht),Vt=Math.sqrt(Math.max(0,2*yt*(Be+ht)-(Be-=ht)*Be-yt*yt))/(2*ht);Ee.x=fe.x+kt*ze+Vt*We,Ee.y=fe.y+kt*We-Vt*ze}else Ee.x=fe.x+Be,Ee.y=fe.y}T.layout.tree=function(){var fe=T.layout.hierarchy().sort(null).value(null),be=As,Ee=[1,1],Be=null;function ze(Zt,Qt){var Ar=fe.call(this,Zt,Qt),Kr=Ar[0],un=We(Kr);if(ds(un,yt),un.parent.m=-un.z,Ws(un,ht),Be)Ws(Kr,Vt);else{var Sr=Kr,Br=Kr,Gr=Kr;Ws(Kr,function(Nn){Nn.x<Sr.x&&(Sr=Nn),Nn.x>Br.x&&(Br=Nn),Nn.depth>Gr.depth&&(Gr=Nn)});var an=be(Sr,Br)/2-Sr.x,ln=Ee[0]/(Br.x+be(Br,Sr)/2+an),Wr=Ee[1]/(Gr.depth||1);Ws(Kr,function(Nn){Nn.x=(Nn.x+an)*ln,Nn.y=Nn.depth*Wr})}return Ar}function We(Zt){for(var Qt={A:null,children:[Zt]},Ar=[Qt],Kr;(Kr=Ar.pop())!=null;)for(var un=Kr.children,Sr,Br=0,Gr=un.length;Br<Gr;++Br)Ar.push((un[Br]=Sr={_:un[Br],parent:Kr,children:(Sr=un[Br].children)&&Sr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Br}).a=Sr);return Qt.children[0]}function yt(Zt){var Qt=Zt.children,Ar=Zt.parent.children,Kr=Zt.i?Ar[Zt.i-1]:null;if(Qt.length){is(Zt);var un=(Qt[0].z+Qt[Qt.length-1].z)/2;Kr?(Zt.z=Kr.z+be(Zt._,Kr._),Zt.m=Zt.z-un):Zt.z=un}else Kr&&(Zt.z=Kr.z+be(Zt._,Kr._));Zt.parent.A=kt(Zt,Kr,Zt.parent.A||Ar[0])}function ht(Zt){Zt._.x=Zt.z+Zt.parent.m,Zt.m+=Zt.parent.m}function kt(Zt,Qt,Ar){if(Qt){for(var Kr=Zt,un=Zt,Sr=Qt,Br=Kr.parent.children[0],Gr=Kr.m,an=un.m,ln=Sr.m,Wr=Br.m,Nn;Sr=Vi(Sr),Kr=as(Kr),Sr&&Kr;)Br=as(Br),un=Vi(un),un.a=Zt,Nn=Sr.z+ln-Kr.z-Gr+be(Sr._,Kr._),Nn>0&&(ko(cu(Sr,Zt,Ar),Zt,Nn),Gr+=Nn,an+=Nn),ln+=Sr.m,Gr+=Kr.m,Wr+=Br.m,an+=un.m;Sr&&!Vi(un)&&(un.t=Sr,un.m+=ln-an),Kr&&!as(Br)&&(Br.t=Kr,Br.m+=Gr-Wr,Ar=Zt)}return Ar}function Vt(Zt){Zt.x*=Ee[0],Zt.y=Zt.depth*Ee[1]}return ze.separation=function(Zt){return arguments.length?(be=Zt,ze):be},ze.size=function(Zt){return arguments.length?(Be=(Ee=Zt)==null?Vt:null,ze):Be?null:Ee},ze.nodeSize=function(Zt){return arguments.length?(Be=(Ee=Zt)==null?null:Vt,ze):Be?Ee:null},yl(ze,fe)};function As(fe,be){return fe.parent==be.parent?1:2}function as(fe){var be=fe.children;return be.length?be[0]:fe.t}function Vi(fe){var be=fe.children,Ee;return(Ee=be.length)?be[Ee-1]:fe.t}function ko(fe,be,Ee){var Be=Ee/(be.i-fe.i);be.c-=Be,be.s+=Ee,fe.c+=Be,be.z+=Ee,be.m+=Ee}function is(fe){for(var be=0,Ee=0,Be=fe.children,ze=Be.length,We;--ze>=0;)We=Be[ze],We.z+=be,We.m+=be,be+=We.s+(Ee+=We.c)}function cu(fe,be,Ee){return fe.a.parent===be.parent?fe.a:Ee}T.layout.cluster=function(){var fe=T.layout.hierarchy().sort(null).value(null),be=As,Ee=[1,1],Be=!1;function ze(We,yt){var ht=fe.call(this,We,yt),kt=ht[0],Vt,Zt=0;ds(kt,function(Sr){var Br=Sr.children;Br&&Br.length?(Sr.x=hu(Br),Sr.y=zl(Br)):(Sr.x=Vt?Zt+=be(Sr,Vt):0,Sr.y=0,Vt=Sr)});var Qt=mt(kt),Ar=It(kt),Kr=Qt.x-be(Qt,Ar)/2,un=Ar.x+be(Ar,Qt)/2;return ds(kt,Be?function(Sr){Sr.x=(Sr.x-kt.x)*Ee[0],Sr.y=(kt.y-Sr.y)*Ee[1]}:function(Sr){Sr.x=(Sr.x-Kr)/(un-Kr)*Ee[0],Sr.y=(1-(kt.y?Sr.y/kt.y:1))*Ee[1]}),ht}return ze.separation=function(We){return arguments.length?(be=We,ze):be},ze.size=function(We){return arguments.length?(Be=(Ee=We)==null,ze):Be?null:Ee},ze.nodeSize=function(We){return arguments.length?(Be=(Ee=We)!=null,ze):Be?Ee:null},yl(ze,fe)};function zl(fe){return 1+T.max(fe,function(be){return be.y})}function hu(fe){return fe.reduce(function(be,Ee){return be+Ee.x},0)/fe.length}function mt(fe){var be=fe.children;return be&&be.length?mt(be[0]):fe}function It(fe){var be=fe.children,Ee;return be&&(Ee=be.length)?It(be[Ee-1]):fe}T.layout.treemap=function(){var fe=T.layout.hierarchy(),be=Math.round,Ee=[1,1],Be=null,ze=ur,We=!1,yt,ht="squarify",kt=.5*(1+Math.sqrt(5));function Vt(Sr,Br){for(var Gr=-1,an=Sr.length,ln,Wr;++Gr<an;)Wr=(ln=Sr[Gr]).value*(Br<0?0:Br),ln.area=isNaN(Wr)||Wr<=0?0:Wr}function Zt(Sr){var Br=Sr.children;if(Br&&Br.length){var Gr=ze(Sr),an=[],ln=Br.slice(),Wr,Nn=1/0,ra,ba=ht==="slice"?Gr.dx:ht==="dice"?Gr.dy:ht==="slice-dice"?Sr.depth&1?Gr.dy:Gr.dx:Math.min(Gr.dx,Gr.dy),oa;for(Vt(ln,Gr.dx*Gr.dy/Sr.value),an.area=0;(oa=ln.length)>0;)an.push(Wr=ln[oa-1]),an.area+=Wr.area,ht!=="squarify"||(ra=Ar(an,ba))<=Nn?(ln.pop(),Nn=ra):(an.area-=an.pop().area,Kr(an,ba,Gr,!1),ba=Math.min(Gr.dx,Gr.dy),an.length=an.area=0,Nn=1/0);an.length&&(Kr(an,ba,Gr,!0),an.length=an.area=0),Br.forEach(Zt)}}function Qt(Sr){var Br=Sr.children;if(Br&&Br.length){var Gr=ze(Sr),an=Br.slice(),ln,Wr=[];for(Vt(an,Gr.dx*Gr.dy/Sr.value),Wr.area=0;ln=an.pop();)Wr.push(ln),Wr.area+=ln.area,ln.z!=null&&(Kr(Wr,ln.z?Gr.dx:Gr.dy,Gr,!an.length),Wr.length=Wr.area=0);Br.forEach(Qt)}}function Ar(Sr,Br){for(var Gr=Sr.area,an,ln=0,Wr=1/0,Nn=-1,ra=Sr.length;++Nn<ra;)!(an=Sr[Nn].area)||(an<Wr&&(Wr=an),an>ln&&(ln=an));return Gr*=Gr,Br*=Br,Gr?Math.max(Br*ln*kt/Gr,Gr/(Br*Wr*kt)):1/0}function Kr(Sr,Br,Gr,an){var ln=-1,Wr=Sr.length,Nn=Gr.x,ra=Gr.y,ba=Br?be(Sr.area/Br):0,oa;if(Br==Gr.dx){for((an||ba>Gr.dy)&&(ba=Gr.dy);++ln<Wr;)oa=Sr[ln],oa.x=Nn,oa.y=ra,oa.dy=ba,Nn+=oa.dx=Math.min(Gr.x+Gr.dx-Nn,ba?be(oa.area/ba):0);oa.z=!0,oa.dx+=Gr.x+Gr.dx-Nn,Gr.y+=ba,Gr.dy-=ba}else{for((an||ba>Gr.dx)&&(ba=Gr.dx);++ln<Wr;)oa=Sr[ln],oa.x=Nn,oa.y=ra,oa.dx=ba,ra+=oa.dy=Math.min(Gr.y+Gr.dy-ra,ba?be(oa.area/ba):0);oa.z=!1,oa.dy+=Gr.y+Gr.dy-ra,Gr.x+=ba,Gr.dx-=ba}}function un(Sr){var Br=yt||fe(Sr),Gr=Br[0];return Gr.x=Gr.y=0,Gr.value?(Gr.dx=Ee[0],Gr.dy=Ee[1]):Gr.dx=Gr.dy=0,yt&&fe.revalue(Gr),Vt([Gr],Gr.dx*Gr.dy/Gr.value),(yt?Qt:Zt)(Gr),We&&(yt=Br),Br}return un.size=function(Sr){return arguments.length?(Ee=Sr,un):Ee},un.padding=function(Sr){if(!arguments.length)return Be;function Br(ln){var Wr=Sr.call(un,ln,ln.depth);return Wr==null?ur(ln):tr(ln,typeof Wr=="number"?[Wr,Wr,Wr,Wr]:Wr)}function Gr(ln){return tr(ln,Sr)}var an;return ze=(Be=Sr)==null?ur:(an=typeof Sr)==="function"?Br:(an==="number"&&(Sr=[Sr,Sr,Sr,Sr]),Gr),un},un.round=function(Sr){return arguments.length?(be=Sr?Math.round:Number,un):be!=Number},un.sticky=function(Sr){return arguments.length?(We=Sr,yt=null,un):We},un.ratio=function(Sr){return arguments.length?(kt=Sr,un):kt},un.mode=function(Sr){return arguments.length?(ht=Sr+"",un):ht},yl(un,fe)};function ur(fe){return{x:fe.x,y:fe.y,dx:fe.dx,dy:fe.dy}}function tr(fe,be){var Ee=fe.x+be[3],Be=fe.y+be[0],ze=fe.dx-be[1]-be[3],We=fe.dy-be[0]-be[2];return ze<0&&(Ee+=ze/2,ze=0),We<0&&(Be+=We/2,We=0),{x:Ee,y:Be,dx:ze,dy:We}}T.random={normal:function(fe,be){var Ee=arguments.length;return Ee<2&&(be=1),Ee<1&&(fe=0),function(){var Be,ze,We;do Be=Math.random()*2-1,ze=Math.random()*2-1,We=Be*Be+ze*ze;while(!We||We>1);return fe+be*Be*Math.sqrt(-2*Math.log(We)/We)}},logNormal:function(){var fe=T.random.normal.apply(T,arguments);return function(){return Math.exp(fe())}},bates:function(fe){var be=T.random.irwinHall(fe);return function(){return be()/fe}},irwinHall:function(fe){return function(){for(var be=0,Ee=0;Ee<fe;Ee++)be+=Math.random();return be}}},T.scale={};function Cr(fe){var be=fe[0],Ee=fe[fe.length-1];return be<Ee?[be,Ee]:[Ee,be]}function rn(fe){return fe.rangeExtent?fe.rangeExtent():Cr(fe.range())}function pn(fe,be,Ee,Be){var ze=Ee(fe[0],fe[1]),We=Be(be[0],be[1]);return function(yt){return We(ze(yt))}}function wn(fe,be){var Ee=0,Be=fe.length-1,ze=fe[Ee],We=fe[Be],yt;return We<ze&&(yt=Ee,Ee=Be,Be=yt,yt=ze,ze=We,We=yt),fe[Ee]=be.floor(ze),fe[Be]=be.ceil(We),fe}function Cn(fe){return fe?{floor:function(be){return Math.floor(be/fe)*fe},ceil:function(be){return Math.ceil(be/fe)*fe}}:On}var On={floor:D,ceil:D};function gn(fe,be,Ee,Be){var ze=[],We=[],yt=0,ht=Math.min(fe.length,be.length)-1;for(fe[ht]<fe[0]&&(fe=fe.slice().reverse(),be=be.slice().reverse());++yt<=ht;)ze.push(Ee(fe[yt-1],fe[yt])),We.push(Be(be[yt-1],be[yt]));return function(kt){var Vt=T.bisect(fe,kt,1,ht)-1;return We[Vt](ze[Vt](kt))}}T.scale.linear=function(){return In([0,1],[0,1],no,!1)};function In(fe,be,Ee,Be){var ze,We;function yt(){var kt=Math.min(fe.length,be.length)>2?gn:pn,Vt=Be?su:ku;return ze=kt(fe,be,Vt,Ee),We=kt(be,fe,Vt,no),ht}function ht(kt){return ze(kt)}return ht.invert=function(kt){return We(kt)},ht.domain=function(kt){return arguments.length?(fe=kt.map(Number),yt()):fe},ht.range=function(kt){return arguments.length?(be=kt,yt()):be},ht.rangeRound=function(kt){return ht.range(kt).interpolate(au)},ht.clamp=function(kt){return arguments.length?(Be=kt,yt()):Be},ht.interpolate=function(kt){return arguments.length?(Ee=kt,yt()):Ee},ht.ticks=function(kt){return Fa(fe,kt)},ht.tickFormat=function(kt,Vt){return d3_scale_linearTickFormat(fe,kt,Vt)},ht.nice=function(kt){return Un(fe,kt),yt()},ht.copy=function(){return In(fe,be,Ee,Be)},yt()}function Pn(fe,be){return T.rebind(fe,be,"range","rangeRound","interpolate","clamp")}function Un(fe,be){return wn(fe,Cn($n(fe,be)[2])),wn(fe,Cn($n(fe,be)[2])),fe}function $n(fe,be){be==null&&(be=10);var Ee=Cr(fe),Be=Ee[1]-Ee[0],ze=Math.pow(10,Math.floor(Math.log(Be/be)/Math.LN10)),We=be/Be*ze;return We<=.15?ze*=10:We<=.35?ze*=5:We<=.75&&(ze*=2),Ee[0]=Math.ceil(Ee[0]/ze)*ze,Ee[1]=Math.floor(Ee[1]/ze)*ze+ze*.5,Ee[2]=ze,Ee}function Fa(fe,be){return T.range.apply(T,$n(fe,be))}T.scale.log=function(){return Ea(T.scale.linear().domain([0,1]),10,!0,[1,10])};function Ea(fe,be,Ee,Be){function ze(ht){return(Ee?Math.log(ht<0?0:ht):-Math.log(ht>0?0:-ht))/Math.log(be)}function We(ht){return Ee?Math.pow(be,ht):-Math.pow(be,-ht)}function yt(ht){return fe(ze(ht))}return yt.invert=function(ht){return We(fe.invert(ht))},yt.domain=function(ht){return arguments.length?(Ee=ht[0]>=0,fe.domain((Be=ht.map(Number)).map(ze)),yt):Be},yt.base=function(ht){return arguments.length?(be=+ht,fe.domain(Be.map(ze)),yt):be},yt.nice=function(){var ht=wn(Be.map(ze),Ee?Math:Ba);return fe.domain(ht),Be=ht.map(We),yt},yt.ticks=function(){var ht=Cr(Be),kt=[],Vt=ht[0],Zt=ht[1],Qt=Math.floor(ze(Vt)),Ar=Math.ceil(ze(Zt)),Kr=be%1?2:be;if(isFinite(Ar-Qt)){if(Ee){for(;Qt<Ar;Qt++)for(var un=1;un<Kr;un++)kt.push(We(Qt)*un);kt.push(We(Qt))}else for(kt.push(We(Qt));Qt++<Ar;)for(var un=Kr-1;un>0;un--)kt.push(We(Qt)*un);for(Qt=0;kt[Qt]<Vt;Qt++);for(Ar=kt.length;kt[Ar-1]>Zt;Ar--);kt=kt.slice(Qt,Ar)}return kt},yt.copy=function(){return Ea(fe.copy(),be,Ee,Be)},Pn(yt,fe)}var Ba={floor:function(fe){return-Math.ceil(-fe)},ceil:function(fe){return-Math.floor(-fe)}};T.scale.pow=function(){return Oa(T.scale.linear(),1,[0,1])};function Oa(fe,be,Ee){var Be=Jn(be),ze=Jn(1/be);function We(yt){return fe(Be(yt))}return We.invert=function(yt){return ze(fe.invert(yt))},We.domain=function(yt){return arguments.length?(fe.domain((Ee=yt.map(Number)).map(Be)),We):Ee},We.ticks=function(yt){return Fa(Ee,yt)},We.tickFormat=function(yt,ht){return d3_scale_linearTickFormat(Ee,yt,ht)},We.nice=function(yt){return We.domain(Un(Ee,yt))},We.exponent=function(yt){return arguments.length?(Be=Jn(be=yt),ze=Jn(1/be),fe.domain(Ee.map(Be)),We):be},We.copy=function(){return Oa(fe.copy(),be,Ee)},Pn(We,fe)}function Jn(fe){return function(be){return be<0?-Math.pow(-be,fe):Math.pow(be,fe)}}T.scale.sqrt=function(){return T.scale.pow().exponent(.5)},T.scale.ordinal=function(){return ha([],{t:"range",a:[[]]})};function ha(fe,be){var Ee,Be,ze;function We(ht){return Be[((Ee.get(ht)||(be.t==="range"?Ee.set(ht,fe.push(ht)):NaN))-1)%Be.length]}function yt(ht,kt){return T.range(fe.length).map(function(Vt){return ht+kt*Vt})}return We.domain=function(ht){if(!arguments.length)return fe;fe=[],Ee=new w;for(var kt=-1,Vt=ht.length,Zt;++kt<Vt;)Ee.has(Zt=ht[kt])||Ee.set(Zt,fe.push(Zt));return We[be.t].apply(We,be.a)},We.range=function(ht){return arguments.length?(Be=ht,ze=0,be={t:"range",a:arguments},We):Be},We.rangePoints=function(ht,kt){arguments.length<2&&(kt=0);var Vt=ht[0],Zt=ht[1],Qt=fe.length<2?(Vt=(Vt+Zt)/2,0):(Zt-Vt)/(fe.length-1+kt);return Be=yt(Vt+Qt*kt/2,Qt),ze=0,be={t:"rangePoints",a:arguments},We},We.rangeRoundPoints=function(ht,kt){arguments.length<2&&(kt=0);var Vt=ht[0],Zt=ht[1],Qt=fe.length<2?(Vt=Zt=Math.round((Vt+Zt)/2),0):(Zt-Vt)/(fe.length-1+kt)|0;return Be=yt(Vt+Math.round(Qt*kt/2+(Zt-Vt-(fe.length-1+kt)*Qt)/2),Qt),ze=0,be={t:"rangeRoundPoints",a:arguments},We},We.rangeBands=function(ht,kt,Vt){arguments.length<2&&(kt=0),arguments.length<3&&(Vt=kt);var Zt=ht[1]<ht[0],Qt=ht[Zt-0],Ar=ht[1-Zt],Kr=(Ar-Qt)/(fe.length-kt+2*Vt);return Be=yt(Qt+Kr*Vt,Kr),Zt&&Be.reverse(),ze=Kr*(1-kt),be={t:"rangeBands",a:arguments},We},We.rangeRoundBands=function(ht,kt,Vt){arguments.length<2&&(kt=0),arguments.length<3&&(Vt=kt);var Zt=ht[1]<ht[0],Qt=ht[Zt-0],Ar=ht[1-Zt],Kr=Math.floor((Ar-Qt)/(fe.length-kt+2*Vt));return Be=yt(Qt+Math.round((Ar-Qt-(fe.length-kt)*Kr)/2),Kr),Zt&&Be.reverse(),ze=Math.round(Kr*(1-kt)),be={t:"rangeRoundBands",a:arguments},We},We.rangeBand=function(){return ze},We.rangeExtent=function(){return Cr(be.a[0])},We.copy=function(){return ha(fe,be)},We.domain(fe)}T.scale.category10=function(){return T.scale.ordinal().range(Ga)},T.scale.category20=function(){return T.scale.ordinal().range(Ka)},T.scale.category20b=function(){return T.scale.ordinal().range(di)},T.scale.category20c=function(){return T.scale.ordinal().range(gi)};var Ga=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Yr),Ka=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Yr),di=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Yr),gi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Yr);T.scale.quantile=function(){return mi([],[])};function mi(fe,be){var Ee;function Be(){var We=0,yt=be.length;for(Ee=[];++We<yt;)Ee[We-1]=T.quantile(fe,We/yt);return ze}function ze(We){if(!isNaN(We=+We))return be[T.bisect(Ee,We)]}return ze.domain=function(We){return arguments.length?(fe=We.map(p).filter(d).sort(i),Be()):fe},ze.range=function(We){return arguments.length?(be=We,Be()):be},ze.quantiles=function(){return Ee},ze.invertExtent=function(We){return We=be.indexOf(We),We<0?[NaN,NaN]:[We>0?Ee[We-1]:fe[0],We<Ee.length?Ee[We]:fe[fe.length-1]]},ze.copy=function(){return mi(fe,be)},Be()}T.scale.quantize=function(){return Ai(0,1,[0,1])};function Ai(fe,be,Ee){var Be,ze;function We(ht){return Ee[Math.max(0,Math.min(ze,Math.floor(Be*(ht-fe))))]}function yt(){return Be=Ee.length/(be-fe),ze=Ee.length-1,We}return We.domain=function(ht){return arguments.length?(fe=+ht[0],be=+ht[ht.length-1],yt()):[fe,be]},We.range=function(ht){return arguments.length?(Ee=ht,yt()):Ee},We.invertExtent=function(ht){return ht=Ee.indexOf(ht),ht=ht<0?NaN:ht/Be+fe,[ht,ht+1/Be]},We.copy=function(){return Ai(fe,be,Ee)},yt()}T.scale.threshold=function(){return li([.5],[0,1])};function li(fe,be){function Ee(Be){if(Be<=Be)return be[T.bisect(fe,Be)]}return Ee.domain=function(Be){return arguments.length?(fe=Be,Ee):fe},Ee.range=function(Be){return arguments.length?(be=Be,Ee):be},Ee.invertExtent=function(Be){return Be=be.indexOf(Be),[fe[Be-1],fe[Be]]},Ee.copy=function(){return li(fe,be)},Ee}T.scale.identity=function(){return yo([0,1])};function yo(fe){function be(Ee){return+Ee}return be.invert=be,be.domain=be.range=function(Ee){return arguments.length?(fe=Ee.map(be),be):fe},be.ticks=function(Ee){return Fa(fe,Ee)},be.tickFormat=function(Ee,Be){return d3_scale_linearTickFormat(fe,Ee,Be)},be.copy=function(){return yo(fe)},be}T.svg={};function qi(){return 0}T.svg.arc=function(){var fe=va,be=xi,Ee=qi,Be=ja,ze=uo,We=vo,yt=os;function ht(){var Vt=Math.max(0,+fe.apply(this,arguments)),Zt=Math.max(0,+be.apply(this,arguments)),Qt=ze.apply(this,arguments)-it,Ar=We.apply(this,arguments)-it,Kr=Math.abs(Ar-Qt),un=Qt>Ar?0:1;if(Zt<Vt&&(Sr=Zt,Zt=Vt,Vt=Sr),Kr>=Je)return kt(Zt,un)+(Vt?kt(Vt,1-un):"")+"Z";var Sr,Br,Gr,an,ln=0,Wr=0,Nn,ra,ba,oa,ka,ua,Ua,Pa,Ja=[];if((an=(+yt.apply(this,arguments)||0)/2)&&(Gr=Be===ja?Math.sqrt(Vt*Vt+Zt*Zt):+Be.apply(this,arguments),un||(Wr*=-1),Zt&&(Wr=Jt(Gr/Zt*Math.sin(an))),Vt&&(ln=Jt(Gr/Vt*Math.sin(an)))),Zt){Nn=Zt*Math.cos(Qt+Wr),ra=Zt*Math.sin(Qt+Wr),ba=Zt*Math.cos(Ar-Wr),oa=Zt*Math.sin(Ar-Wr);var yi=Math.abs(Ar-Qt-2*Wr)<=ke?0:1;if(Wr&&Ms(Nn,ra,ba,oa)===un^yi){var co=(Qt+Ar)/2;Nn=Zt*Math.cos(co),ra=Zt*Math.sin(co),ba=oa=null}}else Nn=ra=0;if(Vt){ka=Vt*Math.cos(Ar-ln),ua=Vt*Math.sin(Ar-ln),Ua=Vt*Math.cos(Qt+ln),Pa=Vt*Math.sin(Qt+ln);var Ii=Math.abs(Qt-Ar+2*ln)<=ke?0:1;if(ln&&Ms(ka,ua,Ua,Pa)===1-un^Ii){var fa=(Qt+Ar)/2;ka=Vt*Math.cos(fa),ua=Vt*Math.sin(fa),Ua=Pa=null}}else ka=ua=0;if(Kr>ct&&(Sr=Math.min(Math.abs(Zt-Vt)/2,+Ee.apply(this,arguments)))>.001){Br=Vt<Zt^un?0:1;var ai=Sr,Wa=Sr;if(Kr<ke){var Si=Ua==null?[ka,ua]:ba==null?[Nn,ra]:ti([Nn,ra],[Ua,Pa],[ba,oa],[ka,ua]),ui=Nn-Si[0],io=ra-Si[1],Qi=ba-Si[0],go=oa-Si[1],Go=1/Math.sin(Math.acos((ui*Qi+io*go)/(Math.sqrt(ui*ui+io*io)*Math.sqrt(Qi*Qi+go*go)))/2),zo=Math.sqrt(Si[0]*Si[0]+Si[1]*Si[1]);Wa=Math.min(Sr,(Vt-zo)/(Go-1)),ai=Math.min(Sr,(Zt-zo)/(Go+1))}if(ba!=null){var Yo=Ro(Ua==null?[ka,ua]:[Ua,Pa],[Nn,ra],Zt,ai,un),Gi=Ro([ba,oa],[ka,ua],Zt,ai,un);Sr===ai?Ja.push("M",Yo[0],"A",ai,",",ai," 0 0,",Br," ",Yo[1],"A",Zt,",",Zt," 0 ",1-un^Ms(Yo[1][0],Yo[1][1],Gi[1][0],Gi[1][1]),",",un," ",Gi[1],"A",ai,",",ai," 0 0,",Br," ",Gi[0]):Ja.push("M",Yo[0],"A",ai,",",ai," 0 1,",Br," ",Gi[0])}else Ja.push("M",Nn,",",ra);if(Ua!=null){var Oi=Ro([Nn,ra],[Ua,Pa],Vt,-Wa,un),za=Ro([ka,ua],ba==null?[Nn,ra]:[ba,oa],Vt,-Wa,un);Sr===Wa?Ja.push("L",za[0],"A",Wa,",",Wa," 0 0,",Br," ",za[1],"A",Vt,",",Vt," 0 ",un^Ms(za[1][0],za[1][1],Oi[1][0],Oi[1][1]),",",1-un," ",Oi[1],"A",Wa,",",Wa," 0 0,",Br," ",Oi[0]):Ja.push("L",za[0],"A",Wa,",",Wa," 0 0,",Br," ",Oi[0])}else Ja.push("L",ka,",",ua)}else Ja.push("M",Nn,",",ra),ba!=null&&Ja.push("A",Zt,",",Zt," 0 ",yi,",",un," ",ba,",",oa),Ja.push("L",ka,",",ua),Ua!=null&&Ja.push("A",Vt,",",Vt," 0 ",Ii,",",1-un," ",Ua,",",Pa);return Ja.push("Z"),Ja.join("")}function kt(Vt,Zt){return"M0,"+Vt+"A"+Vt+","+Vt+" 0 1,"+Zt+" 0,"+-Vt+"A"+Vt+","+Vt+" 0 1,"+Zt+" 0,"+Vt}return ht.innerRadius=function(Vt){return arguments.length?(fe=et(Vt),ht):fe},ht.outerRadius=function(Vt){return arguments.length?(be=et(Vt),ht):be},ht.cornerRadius=function(Vt){return arguments.length?(Ee=et(Vt),ht):Ee},ht.padRadius=function(Vt){return arguments.length?(Be=Vt==ja?ja:et(Vt),ht):Be},ht.startAngle=function(Vt){return arguments.length?(ze=et(Vt),ht):ze},ht.endAngle=function(Vt){return arguments.length?(We=et(Vt),ht):We},ht.padAngle=function(Vt){return arguments.length?(yt=et(Vt),ht):yt},ht.centroid=function(){var Vt=(+fe.apply(this,arguments)+ +be.apply(this,arguments))/2,Zt=(+ze.apply(this,arguments)+ +We.apply(this,arguments))/2-it;return[Math.cos(Zt)*Vt,Math.sin(Zt)*Vt]},ht};var ja="auto";function va(fe){return fe.innerRadius}function xi(fe){return fe.outerRadius}function uo(fe){return fe.startAngle}function vo(fe){return fe.endAngle}function os(fe){return fe&&fe.padAngle}function Ms(fe,be,Ee,Be){return(fe-Ee)*be-(be-Be)*fe>0?0:1}function Ro(fe,be,Ee,Be,ze){var We=fe[0]-be[0],yt=fe[1]-be[1],ht=(ze?Be:-Be)/Math.sqrt(We*We+yt*yt),kt=ht*yt,Vt=-ht*We,Zt=fe[0]+kt,Qt=fe[1]+Vt,Ar=be[0]+kt,Kr=be[1]+Vt,un=(Zt+Ar)/2,Sr=(Qt+Kr)/2,Br=Ar-Zt,Gr=Kr-Qt,an=Br*Br+Gr*Gr,ln=Ee-Be,Wr=Zt*Kr-Ar*Qt,Nn=(Gr<0?-1:1)*Math.sqrt(Math.max(0,ln*ln*an-Wr*Wr)),ra=(Wr*Gr-Br*Nn)/an,ba=(-Wr*Br-Gr*Nn)/an,oa=(Wr*Gr+Br*Nn)/an,ka=(-Wr*Br+Gr*Nn)/an,ua=ra-un,Ua=ba-Sr,Pa=oa-un,Ja=ka-Sr;return ua*ua+Ua*Ua>Pa*Pa+Ja*Ja&&(ra=oa,ba=ka),[[ra-kt,ba-Vt],[ra*Ee/ln,ba*Ee/ln]]}function Ks(){return!0}function gs(fe){var be=Kn,Ee=Aa,Be=Ks,ze=mo,We=ze.key,yt=.7;function ht(kt){var Vt=[],Zt=[],Qt=-1,Ar=kt.length,Kr,un=et(be),Sr=et(Ee);function Br(){Vt.push("M",ze(fe(Zt),yt))}for(;++Qt<Ar;)Be.call(this,Kr=kt[Qt],Qt)?Zt.push([+un.call(this,Kr,Qt),+Sr.call(this,Kr,Qt)]):Zt.length&&(Br(),Zt=[]);return Zt.length&&Br(),Vt.length?Vt.join(""):null}return ht.x=function(kt){return arguments.length?(be=kt,ht):be},ht.y=function(kt){return arguments.length?(Ee=kt,ht):Ee},ht.defined=function(kt){return arguments.length?(Be=kt,ht):Be},ht.interpolate=function(kt){return arguments.length?(typeof kt=="function"?We=ze=kt:We=(ze=ss.get(kt)||mo).key,ht):We},ht.tension=function(kt){return arguments.length?(yt=kt,ht):yt},ht}T.svg.line=function(){return gs(D)};var ss=T.map({linear:mo,"linear-closed":Fl,step:Kl,"step-before":ls,"step-after":vu,basis:Ss,"basis-open":Yu,"basis-closed":Pu,bundle:Du,cardinal:Cu,"cardinal-open":Bl,"cardinal-closed":cf,monotone:He});ss.forEach(function(fe,be){be.key=fe,be.closed=/-closed$/.test(fe)});function mo(fe){return fe.length>1?fe.join("L"):fe+"Z"}function Fl(fe){return fe.join("L")+"Z"}function Kl(fe){for(var be=0,Ee=fe.length,Be=fe[0],ze=[Be[0],",",Be[1]];++be<Ee;)ze.push("H",(Be[0]+(Be=fe[be])[0])/2,"V",Be[1]);return Ee>1&&ze.push("H",Be[0]),ze.join("")}function ls(fe){for(var be=0,Ee=fe.length,Be=fe[0],ze=[Be[0],",",Be[1]];++be<Ee;)ze.push("V",(Be=fe[be])[1],"H",Be[0]);return ze.join("")}function vu(fe){for(var be=0,Ee=fe.length,Be=fe[0],ze=[Be[0],",",Be[1]];++be<Ee;)ze.push("H",(Be=fe[be])[0],"V",Be[1]);return ze.join("")}function Bl(fe,be){return fe.length<4?mo(fe):fe[1]+pu(fe.slice(1,-1),Lu(fe,be))}function cf(fe,be){return fe.length<3?Fl(fe):fe[0]+pu((fe.push(fe[0]),fe),Lu([fe[fe.length-2]].concat(fe,[fe[1]]),be))}function Cu(fe,be){return fe.length<3?mo(fe):fe[0]+pu(fe,Lu(fe,be))}function pu(fe,be){if(be.length<1||fe.length!=be.length&&fe.length!=be.length+2)return mo(fe);var Ee=fe.length!=be.length,Be="",ze=fe[0],We=fe[1],yt=be[0],ht=yt,kt=1;if(Ee&&(Be+="Q"+(We[0]-yt[0]*2/3)+","+(We[1]-yt[1]*2/3)+","+We[0]+","+We[1],ze=fe[1],kt=2),be.length>1){ht=be[1],We=fe[kt],kt++,Be+="C"+(ze[0]+yt[0])+","+(ze[1]+yt[1])+","+(We[0]-ht[0])+","+(We[1]-ht[1])+","+We[0]+","+We[1];for(var Vt=2;Vt<be.length;Vt++,kt++)We=fe[kt],ht=be[Vt],Be+="S"+(We[0]-ht[0])+","+(We[1]-ht[1])+","+We[0]+","+We[1]}if(Ee){var Zt=fe[kt];Be+="Q"+(We[0]+ht[0]*2/3)+","+(We[1]+ht[1]*2/3)+","+Zt[0]+","+Zt[1]}return Be}function Lu(fe,be){for(var Ee=[],Be=(1-be)/2,ze,We=fe[0],yt=fe[1],ht=1,kt=fe.length;++ht<kt;)ze=We,We=yt,yt=fe[ht],Ee.push([Be*(yt[0]-ze[0]),Be*(yt[1]-ze[1])]);return Ee}function Ss(fe){if(fe.length<3)return mo(fe);var be=1,Ee=fe.length,Be=fe[0],ze=Be[0],We=Be[1],yt=[ze,ze,ze,(Be=fe[1])[0]],ht=[We,We,We,Be[1]],kt=[ze,",",We,"L",Io(ys,yt),",",Io(ys,ht)];for(fe.push(fe[Ee-1]);++be<=Ee;)Be=fe[be],yt.shift(),yt.push(Be[0]),ht.shift(),ht.push(Be[1]),du(kt,yt,ht);return fe.pop(),kt.push("L",Be),kt.join("")}function Yu(fe){if(fe.length<4)return mo(fe);for(var be=[],Ee=-1,Be=fe.length,ze,We=[0],yt=[0];++Ee<3;)ze=fe[Ee],We.push(ze[0]),yt.push(ze[1]);for(be.push(Io(ys,We)+","+Io(ys,yt)),--Ee;++Ee<Be;)ze=fe[Ee],We.shift(),We.push(ze[0]),yt.shift(),yt.push(ze[1]),du(be,We,yt);return be.join("")}function Pu(fe){for(var be,Ee=-1,Be=fe.length,ze=Be+4,We,yt=[],ht=[];++Ee<4;)We=fe[Ee%Be],yt.push(We[0]),ht.push(We[1]);for(be=[Io(ys,yt),",",Io(ys,ht)],--Ee;++Ee<ze;)We=fe[Ee%Be],yt.shift(),yt.push(We[0]),ht.shift(),ht.push(We[1]),du(be,yt,ht);return be.join("")}function Du(fe,be){var Ee=fe.length-1;if(Ee)for(var Be=fe[0][0],ze=fe[0][1],We=fe[Ee][0]-Be,yt=fe[Ee][1]-ze,ht=-1,kt,Vt;++ht<=Ee;)kt=fe[ht],Vt=ht/Ee,kt[0]=be*kt[0]+(1-be)*(Be+Vt*We),kt[1]=be*kt[1]+(1-be)*(ze+Vt*yt);return Ss(fe)}function Io(fe,be){return fe[0]*be[0]+fe[1]*be[1]+fe[2]*be[2]+fe[3]*be[3]}var Ru=[0,2/3,1/3,0],Ju=[0,1/3,2/3,0],ys=[0,1/6,2/3,1/6];function du(fe,be,Ee){fe.push("C",Io(Ru,be),",",Io(Ru,Ee),",",Io(Ju,be),",",Io(Ju,Ee),",",Io(ys,be),",",Io(ys,Ee))}function gu(fe,be){return(be[1]-fe[1])/(be[0]-fe[0])}function Iu(fe){for(var be=0,Ee=fe.length-1,Be=[],ze=fe[0],We=fe[1],yt=Be[0]=gu(ze,We);++be<Ee;)Be[be]=(yt+(yt=gu(ze=We,We=fe[be+1])))/2;return Be[be]=yt,Be}function Re(fe){for(var be=[],Ee,Be,ze,We,yt=Iu(fe),ht=-1,kt=fe.length-1;++ht<kt;)Ee=gu(fe[ht],fe[ht+1]),l(Ee)<ct?yt[ht]=yt[ht+1]=0:(Be=yt[ht]/Ee,ze=yt[ht+1]/Ee,We=Be*Be+ze*ze,We>9&&(We=Ee*3/Math.sqrt(We),yt[ht]=We*Be,yt[ht+1]=We*ze));for(ht=-1;++ht<=kt;)We=(fe[Math.min(kt,ht+1)][0]-fe[Math.max(0,ht-1)][0])/(6*(1+yt[ht]*yt[ht])),be.push([We||0,yt[ht]*We||0]);return be}function He(fe){return fe.length<3?mo(fe):fe[0]+pu(fe,Re(fe))}T.svg.line.radial=function(){var fe=gs(qe);return fe.radius=fe.x,delete fe.x,fe.angle=fe.y,delete fe.y,fe};function qe(fe){for(var be,Ee=-1,Be=fe.length,ze,We;++Ee<Be;)be=fe[Ee],ze=be[0],We=be[1]-it,be[0]=ze*Math.cos(We),be[1]=ze*Math.sin(We);return fe}function at(fe){var be=Kn,Ee=Kn,Be=0,ze=Aa,We=Ks,yt=mo,ht=yt.key,kt=yt,Vt="L",Zt=.7;function Qt(Ar){var Kr=[],un=[],Sr=[],Br=-1,Gr=Ar.length,an,ln=et(be),Wr=et(Be),Nn=be===Ee?function(){return ba}:et(Ee),ra=Be===ze?function(){return oa}:et(ze),ba,oa;function ka(){Kr.push("M",yt(fe(Sr),Zt),Vt,kt(fe(un.reverse()),Zt),"Z")}for(;++Br<Gr;)We.call(this,an=Ar[Br],Br)?(un.push([ba=+ln.call(this,an,Br),oa=+Wr.call(this,an,Br)]),Sr.push([+Nn.call(this,an,Br),+ra.call(this,an,Br)])):un.length&&(ka(),un=[],Sr=[]);return un.length&&ka(),Kr.length?Kr.join(""):null}return Qt.x=function(Ar){return arguments.length?(be=Ee=Ar,Qt):Ee},Qt.x0=function(Ar){return arguments.length?(be=Ar,Qt):be},Qt.x1=function(Ar){return arguments.length?(Ee=Ar,Qt):Ee},Qt.y=function(Ar){return arguments.length?(Be=ze=Ar,Qt):ze},Qt.y0=function(Ar){return arguments.length?(Be=Ar,Qt):Be},Qt.y1=function(Ar){return arguments.length?(ze=Ar,Qt):ze},Qt.defined=function(Ar){return arguments.length?(We=Ar,Qt):We},Qt.interpolate=function(Ar){return arguments.length?(typeof Ar=="function"?ht=yt=Ar:ht=(yt=ss.get(Ar)||mo).key,kt=yt.reverse||yt,Vt=yt.closed?"M":"L",Qt):ht},Qt.tension=function(Ar){return arguments.length?(Zt=Ar,Qt):Zt},Qt}ls.reverse=vu,vu.reverse=ls,T.svg.area=function(){return at(D)},T.svg.area.radial=function(){var fe=at(qe);return fe.radius=fe.x,delete fe.x,fe.innerRadius=fe.x0,delete fe.x0,fe.outerRadius=fe.x1,delete fe.x1,fe.angle=fe.y,delete fe.y,fe.startAngle=fe.y0,delete fe.y0,fe.endAngle=fe.y1,delete fe.y1,fe};function bt(fe){return fe.source}function xt(fe){return fe.target}T.svg.chord=function(){var fe=bt,be=xt,Ee=_t,Be=uo,ze=vo;function We(Zt,Qt){var Ar=yt(this,fe,Zt,Qt),Kr=yt(this,be,Zt,Qt);return"M"+Ar.p0+kt(Ar.r,Ar.p1,Ar.a1-Ar.a0)+(ht(Ar,Kr)?Vt(Ar.r,Ar.p1,Ar.r,Ar.p0):Vt(Ar.r,Ar.p1,Kr.r,Kr.p0)+kt(Kr.r,Kr.p1,Kr.a1-Kr.a0)+Vt(Kr.r,Kr.p1,Ar.r,Ar.p0))+"Z"}function yt(Zt,Qt,Ar,Kr){var un=Qt.call(Zt,Ar,Kr),Sr=Ee.call(Zt,un,Kr),Br=Be.call(Zt,un,Kr)-it,Gr=ze.call(Zt,un,Kr)-it;return{r:Sr,a0:Br,a1:Gr,p0:[Sr*Math.cos(Br),Sr*Math.sin(Br)],p1:[Sr*Math.cos(Gr),Sr*Math.sin(Gr)]}}function ht(Zt,Qt){return Zt.a0==Qt.a0&&Zt.a1==Qt.a1}function kt(Zt,Qt,Ar){return"A"+Zt+","+Zt+" 0 "+ +(Ar>ke)+",1 "+Qt}function Vt(Zt,Qt,Ar,Kr){return"Q 0,0 "+Kr}return We.radius=function(Zt){return arguments.length?(Ee=et(Zt),We):Ee},We.source=function(Zt){return arguments.length?(fe=et(Zt),We):fe},We.target=function(Zt){return arguments.length?(be=et(Zt),We):be},We.startAngle=function(Zt){return arguments.length?(Be=et(Zt),We):Be},We.endAngle=function(Zt){return arguments.length?(ze=et(Zt),We):ze},We};function _t(fe){return fe.radius}T.svg.diagonal=function(){var fe=bt,be=xt,Ee=or;function Be(ze,We){var yt=fe.call(this,ze,We),ht=be.call(this,ze,We),kt=(yt.y+ht.y)/2,Vt=[yt,{x:yt.x,y:kt},{x:ht.x,y:kt},ht];return Vt=Vt.map(Ee),"M"+Vt[0]+"C"+Vt[1]+" "+Vt[2]+" "+Vt[3]}return Be.source=function(ze){return arguments.length?(fe=et(ze),Be):fe},Be.target=function(ze){return arguments.length?(be=et(ze),Be):be},Be.projection=function(ze){return arguments.length?(Ee=ze,Be):Ee},Be};function or(fe){return[fe.x,fe.y]}T.svg.diagonal.radial=function(){var fe=T.svg.diagonal(),be=or,Ee=fe.projection;return fe.projection=function(Be){return arguments.length?Ee(hr(be=Be)):be},fe};function hr(fe){return function(){var be=fe.apply(this,arguments),Ee=be[0],Be=be[1]-it;return[Ee*Math.cos(Be),Ee*Math.sin(Be)]}}T.svg.symbol=function(){var fe=yr,be=nr;function Ee(Be,ze){return(Vr.get(fe.call(this,Be,ze))||Er)(be.call(this,Be,ze))}return Ee.type=function(Be){return arguments.length?(fe=et(Be),Ee):fe},Ee.size=function(Be){return arguments.length?(be=et(Be),Ee):be},Ee};function nr(){return 64}function yr(){return"circle"}function Er(fe){var be=Math.sqrt(fe/ke);return"M0,"+be+"A"+be+","+be+" 0 1,1 0,"+-be+"A"+be+","+be+" 0 1,1 0,"+be+"Z"}var Vr=T.map({circle:Er,cross:function(fe){var be=Math.sqrt(fe/5)/2;return"M"+-3*be+","+-be+"H"+-be+"V"+-3*be+"H"+be+"V"+-be+"H"+3*be+"V"+be+"H"+be+"V"+3*be+"H"+-be+"V"+be+"H"+-3*be+"Z"},diamond:function(fe){var be=Math.sqrt(fe/(2*mn)),Ee=be*mn;return"M0,"+-be+"L"+Ee+",0 0,"+be+" "+-Ee+",0Z"},square:function(fe){var be=Math.sqrt(fe)/2;return"M"+-be+","+-be+"L"+be+","+-be+" "+be+","+be+" "+-be+","+be+"Z"},"triangle-down":function(fe){var be=Math.sqrt(fe/en),Ee=be*en/2;return"M0,"+Ee+"L"+be+","+-Ee+" "+-be+","+-Ee+"Z"},"triangle-up":function(fe){var be=Math.sqrt(fe/en),Ee=be*en/2;return"M0,"+-Ee+"L"+be+","+Ee+" "+-be+","+Ee+"Z"}});T.svg.symbolTypes=Vr.keys();var en=Math.sqrt(3),mn=Math.tan(30*Pt);Q.transition=function(fe){for(var be=Ya||++Za,Ee=ri(fe),Be=[],ze,We,yt=qa||{time:Date.now(),ease:Rs,delay:0,duration:250},ht=-1,kt=this.length;++ht<kt;){Be.push(ze=[]);for(var Vt=this[ht],Zt=-1,Qt=Vt.length;++Zt<Qt;)(We=Vt[Zt])&&Hi(We,Zt,Ee,be,yt),ze.push(We)}return da(Be,Ee,be)},Q.interrupt=function(fe){return this.each(fe==null?Dn:Hn(ri(fe)))};var Dn=Hn(ri());function Hn(fe){return function(){var be,Ee,Be;(be=this[fe])&&(Be=be[Ee=be.active])&&(Be.timer.c=null,Be.timer.t=NaN,--be.count?delete be[Ee]:delete this[fe],be.active+=.5,Be.event&&Be.event.interrupt.call(this,this.__data__,Be.index))}}function da(fe,be,Ee){return se(fe,ma),fe.namespace=be,fe.id=Ee,fe}var ma=[],Za=0,Ya,qa;ma.call=Q.call,ma.empty=Q.empty,ma.node=Q.node,ma.size=Q.size,T.transition=function(fe,be){return fe&&fe.transition?Ya?fe.transition(be):fe:T.selection().transition(fe)},T.transition.prototype=ma,ma.select=function(fe){var be=this.id,Ee=this.namespace,Be=[],ze,We,yt;fe=W(fe);for(var ht=-1,kt=this.length;++ht<kt;){Be.push(ze=[]);for(var Vt=this[ht],Zt=-1,Qt=Vt.length;++Zt<Qt;)(yt=Vt[Zt])&&(We=fe.call(yt,yt.__data__,Zt,ht))?("__data__"in yt&&(We.__data__=yt.__data__),Hi(We,Zt,Ee,be,yt[Ee][be]),ze.push(We)):ze.push(null)}return da(Be,Ee,be)},ma.selectAll=function(fe){var be=this.id,Ee=this.namespace,Be=[],ze,We,yt,ht,kt;fe=X(fe);for(var Vt=-1,Zt=this.length;++Vt<Zt;)for(var Qt=this[Vt],Ar=-1,Kr=Qt.length;++Ar<Kr;)if(yt=Qt[Ar]){kt=yt[Ee][be],We=fe.call(yt,yt.__data__,Ar,Vt),Be.push(ze=[]);for(var un=-1,Sr=We.length;++un<Sr;)(ht=We[un])&&Hi(ht,un,Ee,be,kt),ze.push(ht)}return da(Be,Ee,be)},ma.filter=function(fe){var be=[],Ee,Be,ze;typeof fe!="function"&&(fe=xe(fe));for(var We=0,yt=this.length;We<yt;We++){be.push(Ee=[]);for(var Be=this[We],ht=0,kt=Be.length;ht<kt;ht++)(ze=Be[ht])&&fe.call(ze,ze.__data__,ht,We)&&Ee.push(ze)}return da(be,this.namespace,this.id)},ma.tween=function(fe,be){var Ee=this.id,Be=this.namespace;return arguments.length<2?this.node()[Be][Ee].tween.get(fe):Ve(this,be==null?function(ze){ze[Be][Ee].tween.remove(fe)}:function(ze){ze[Be][Ee].tween.set(fe,be)})};function hi(fe,be,Ee,Be){var ze=fe.id,We=fe.namespace;return Ve(fe,typeof Ee=="function"?function(yt,ht,kt){yt[We][ze].tween.set(be,Be(Ee.call(yt,yt.__data__,ht,kt)))}:(Ee=Be(Ee),function(yt){yt[We][ze].tween.set(be,Ee)}))}ma.attr=function(fe,be){if(arguments.length<2){for(be in fe)this.attr(be,fe[be]);return this}var Ee=fe=="transform"?Dl:no,Be=T.ns.qualify(fe);function ze(){this.removeAttribute(Be)}function We(){this.removeAttributeNS(Be.space,Be.local)}function yt(kt){return kt==null?ze:(kt+="",function(){var Vt=this.getAttribute(Be),Zt;return Vt!==kt&&(Zt=Ee(Vt,kt),function(Qt){this.setAttribute(Be,Zt(Qt))})})}function ht(kt){return kt==null?We:(kt+="",function(){var Vt=this.getAttributeNS(Be.space,Be.local),Zt;return Vt!==kt&&(Zt=Ee(Vt,kt),function(Qt){this.setAttributeNS(Be.space,Be.local,Zt(Qt))})})}return hi(this,"attr."+fe,be,Be.local?ht:yt)},ma.attrTween=function(fe,be){var Ee=T.ns.qualify(fe);function Be(We,yt){var ht=be.call(this,We,yt,this.getAttribute(Ee));return ht&&function(kt){this.setAttribute(Ee,ht(kt))}}function ze(We,yt){var ht=be.call(this,We,yt,this.getAttributeNS(Ee.space,Ee.local));return ht&&function(kt){this.setAttributeNS(Ee.space,Ee.local,ht(kt))}}return this.tween("attr."+fe,Ee.local?ze:Be)},ma.style=function(fe,be,Ee){var Be=arguments.length;if(Be<3){if(typeof fe!="string"){Be<2&&(be="");for(Ee in fe)this.style(Ee,fe[Ee],be);return this}Ee=""}function ze(){this.style.removeProperty(fe)}function We(yt){return yt==null?ze:(yt+="",function(){var ht=a(this).getComputedStyle(this,null).getPropertyValue(fe),kt;return ht!==yt&&(kt=no(ht,yt),function(Vt){this.style.setProperty(fe,kt(Vt),Ee)})})}return hi(this,"style."+fe,be,We)},ma.styleTween=function(fe,be,Ee){arguments.length<3&&(Ee="");function Be(ze,We){var yt=be.call(this,ze,We,a(this).getComputedStyle(this,null).getPropertyValue(fe));return yt&&function(ht){this.style.setProperty(fe,yt(ht),Ee)}}return this.tween("style."+fe,Be)},ma.text=function(fe){return hi(this,"text",fe,ao)};function ao(fe){return fe==null&&(fe=""),function(){this.textContent=fe}}ma.remove=function(){var fe=this.namespace;return this.each("end.transition",function(){var be;this[fe].count<2&&(be=this.parentNode)&&be.removeChild(this)})},ma.ease=function(fe){var be=this.id,Ee=this.namespace;return arguments.length<1?this.node()[Ee][be].ease:(typeof fe!="function"&&(fe=T.ease.apply(T,arguments)),Ve(this,function(Be){Be[Ee][be].ease=fe}))},ma.delay=function(fe){var be=this.id,Ee=this.namespace;return arguments.length<1?this.node()[Ee][be].delay:Ve(this,typeof fe=="function"?function(Be,ze,We){Be[Ee][be].delay=+fe.call(Be,Be.__data__,ze,We)}:(fe=+fe,function(Be){Be[Ee][be].delay=fe}))},ma.duration=function(fe){var be=this.id,Ee=this.namespace;return arguments.length<1?this.node()[Ee][be].duration:Ve(this,typeof fe=="function"?function(Be,ze,We){Be[Ee][be].duration=Math.max(1,fe.call(Be,Be.__data__,ze,We))}:(fe=Math.max(1,fe),function(Be){Be[Ee][be].duration=fe}))},ma.each=function(fe,be){var Ee=this.id,Be=this.namespace;if(arguments.length<2){var ze=qa,We=Ya;try{Ya=Ee,Ve(this,function(yt,ht,kt){qa=yt[Be][Ee],fe.call(yt,yt.__data__,ht,kt)})}finally{qa=ze,Ya=We}}else Ve(this,function(yt){var ht=yt[Be][Ee];(ht.event||(ht.event=T.dispatch("start","end","interrupt"))).on(fe,be)});return this},ma.transition=function(){for(var fe=this.id,be=++Za,Ee=this.namespace,Be=[],ze,We,yt,ht,kt=0,Vt=this.length;kt<Vt;kt++){Be.push(ze=[]);for(var We=this[kt],Zt=0,Qt=We.length;Zt<Qt;Zt++)(yt=We[Zt])&&(ht=yt[Ee][fe],Hi(yt,Zt,Ee,be,{time:ht.time,ease:ht.ease,delay:ht.delay+ht.duration,duration:ht.duration})),ze.push(yt)}return da(Be,Ee,be)};function ri(fe){return fe==null?"__transition__":"__transition_"+fe+"__"}function Hi(fe,be,Ee,Be,ze){var We=fe[Ee]||(fe[Ee]={active:0,count:0}),yt=We[Be],ht,kt,Vt,Zt,Qt;function Ar(Sr){var Br=yt.delay;if(kt.t=Br+ht,Br<=Sr)return Kr(Sr-Br);kt.c=Kr}function Kr(Sr){var Br=We.active,Gr=We[Br];Gr&&(Gr.timer.c=null,Gr.timer.t=NaN,--We.count,delete We[Br],Gr.event&&Gr.event.interrupt.call(fe,fe.__data__,Gr.index));for(var an in We)if(+an<Be){var ln=We[an];ln.timer.c=null,ln.timer.t=NaN,--We.count,delete We[an]}kt.c=un,_n(function(){return kt.c&&un(Sr||1)&&(kt.c=null,kt.t=NaN),1},0,ht),We.active=Be,yt.event&&yt.event.start.call(fe,fe.__data__,be),Qt=[],yt.tween.forEach(function(Wr,Nn){(Nn=Nn.call(fe,fe.__data__,be))&&Qt.push(Nn)}),Zt=yt.ease,Vt=yt.duration}function un(Sr){for(var Br=Sr/Vt,Gr=Zt(Br),an=Qt.length;an>0;)Qt[--an].call(fe,Gr);if(Br>=1)return yt.event&&yt.event.end.call(fe,fe.__data__,be),--We.count?delete We[Be]:delete fe[Ee],1}yt||(ht=ze.time,kt=_n(Ar,0,ht),yt=We[Be]={tween:new w,time:ht,timer:kt,delay:ze.delay,duration:ze.duration,ease:ze.ease,index:be},ze=null,++We.count)}T.svg.axis=function(){var fe=T.scale.linear(),be=fo,Ee=6,Be=6,ze=3,We=[10],yt=null,ht;function kt(Vt){Vt.each(function(){var Zt=T.select(this),Qt=this.__chart__||fe,Ar=this.__chart__=fe.copy(),Kr=yt==null?Ar.ticks?Ar.ticks.apply(Ar,We):Ar.domain():yt,un=ht==null?Ar.tickFormat?Ar.tickFormat.apply(Ar,We):D:ht,Sr=Zt.selectAll(".tick").data(Kr,Ar),Br=Sr.enter().insert("g",".domain").attr("class","tick").style("opacity",ct),Gr=T.transition(Sr.exit()).style("opacity",ct).remove(),an=T.transition(Sr.order()).style("opacity",1),ln=Math.max(Ee,0)+ze,Wr,Nn=rn(Ar),ra=Zt.selectAll(".domain").data([0]),ba=(ra.enter().append("path").attr("class","domain"),T.transition(ra));Br.append("line"),Br.append("text");var oa=Br.select("line"),ka=an.select("line"),ua=Sr.select("text").text(un),Ua=Br.select("text"),Pa=an.select("text"),Ja=be==="top"||be==="left"?-1:1,yi,co,Ii,fa;if(be==="bottom"||be==="top"?(Wr=bi,yi="x",Ii="y",co="x2",fa="y2",ua.attr("dy",Ja<0?"0em":".71em").style("text-anchor","middle"),ba.attr("d","M"+Nn[0]+","+Ja*Be+"V0H"+Nn[1]+"V"+Ja*Be)):(Wr=Mi,yi="y",Ii="x",co="y2",fa="x2",ua.attr("dy",".32em").style("text-anchor",Ja<0?"end":"start"),ba.attr("d","M"+Ja*Be+","+Nn[0]+"H0V"+Nn[1]+"H"+Ja*Be)),oa.attr(fa,Ja*Ee),Ua.attr(Ii,Ja*ln),ka.attr(co,0).attr(fa,Ja*Ee),Pa.attr(yi,0).attr(Ii,Ja*ln),Ar.rangeBand){var ai=Ar,Wa=ai.rangeBand()/2;Qt=Ar=function(Si){return ai(Si)+Wa}}else Qt.rangeBand?Qt=Ar:Gr.call(Wr,Ar,Qt);Br.call(Wr,Qt,Ar),an.call(Wr,Ar,Ar)})}return kt.scale=function(Vt){return arguments.length?(fe=Vt,kt):fe},kt.orient=function(Vt){return arguments.length?(be=Vt in bo?Vt+"":fo,kt):be},kt.ticks=function(){return arguments.length?(We=M(arguments),kt):We},kt.tickValues=function(Vt){return arguments.length?(yt=Vt,kt):yt},kt.tickFormat=function(Vt){return arguments.length?(ht=Vt,kt):ht},kt.tickSize=function(Vt){var Zt=arguments.length;return Zt?(Ee=+Vt,Be=+arguments[Zt-1],kt):Ee},kt.innerTickSize=function(Vt){return arguments.length?(Ee=+Vt,kt):Ee},kt.outerTickSize=function(Vt){return arguments.length?(Be=+Vt,kt):Be},kt.tickPadding=function(Vt){return arguments.length?(ze=+Vt,kt):ze},kt.tickSubdivide=function(){return arguments.length&&kt},kt};var fo="bottom",bo={top:1,right:1,bottom:1,left:1};function bi(fe,be,Ee){fe.attr("transform",function(Be){var ze=be(Be);return"translate("+(isFinite(ze)?ze:Ee(Be))+",0)"})}function Mi(fe,be,Ee){fe.attr("transform",function(Be){var ze=be(Be);return"translate(0,"+(isFinite(ze)?ze:Ee(Be))+")"})}T.svg.brush=function(){var fe=Z(Zt,"brushstart","brush","brushend"),be=null,Ee=null,Be=[0,0],ze=[0,0],We,yt,ht=!0,kt=!0,Vt=po[0];function Zt(Sr){Sr.each(function(){var Br=T.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",un).on("touchstart.brush",un),Gr=Br.selectAll(".background").data([0]);Gr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Br.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var an=Br.selectAll(".resize").data(Vt,D);an.exit().remove(),an.enter().append("g").attr("class",function(ra){return"resize "+ra}).style("cursor",function(ra){return us[ra]}).append("rect").attr("x",function(ra){return/[ew]$/.test(ra)?-3:null}).attr("y",function(ra){return/^[ns]/.test(ra)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),an.style("display",Zt.empty()?"none":null);var ln=T.transition(Br),Wr=T.transition(Gr),Nn;be&&(Nn=rn(be),Wr.attr("x",Nn[0]).attr("width",Nn[1]-Nn[0]),Ar(ln)),Ee&&(Nn=rn(Ee),Wr.attr("y",Nn[0]).attr("height",Nn[1]-Nn[0]),Kr(ln)),Qt(ln)})}Zt.event=function(Sr){Sr.each(function(){var Br=fe.of(this,arguments),Gr={x:Be,y:ze,i:We,j:yt},an=this.__chart__||Gr;this.__chart__=Gr,Ya?T.select(this).transition().each("start.brush",function(){We=an.i,yt=an.j,Be=an.x,ze=an.y,Br({type:"brushstart"})}).tween("brush:brush",function(){var ln=Ji(Be,Gr.x),Wr=Ji(ze,Gr.y);return We=yt=null,function(Nn){Be=Gr.x=ln(Nn),ze=Gr.y=Wr(Nn),Br({type:"brush",mode:"resize"})}}).each("end.brush",function(){We=Gr.i,yt=Gr.j,Br({type:"brush",mode:"resize"}),Br({type:"brushend"})}):(Br({type:"brushstart"}),Br({type:"brush",mode:"resize"}),Br({type:"brushend"}))})};function Qt(Sr){Sr.selectAll(".resize").attr("transform",function(Br){return"translate("+Be[+/e$/.test(Br)]+","+ze[+/^s/.test(Br)]+")"})}function Ar(Sr){Sr.select(".extent").attr("x",Be[0]),Sr.selectAll(".extent,.n>rect,.s>rect").attr("width",Be[1]-Be[0])}function Kr(Sr){Sr.select(".extent").attr("y",ze[0]),Sr.selectAll(".extent,.e>rect,.w>rect").attr("height",ze[1]-ze[0])}function un(){var Sr=this,Br=T.select(T.event.target),Gr=fe.of(Sr,arguments),an=T.select(Sr),ln=Br.datum(),Wr=!/^(n|s)$/.test(ln)&&be,Nn=!/^(e|w)$/.test(ln)&&Ee,ra=Br.classed("extent"),ba=Ut(Sr),oa,ka=T.mouse(Sr),ua,Ua=T.select(a(Sr)).on("keydown.brush",yi).on("keyup.brush",co);if(T.event.changedTouches?Ua.on("touchmove.brush",Ii).on("touchend.brush",ai):Ua.on("mousemove.brush",Ii).on("mouseup.brush",ai),an.interrupt().selectAll("*").interrupt(),ra)ka[0]=Be[0]-ka[0],ka[1]=ze[0]-ka[1];else if(ln){var Pa=+/w$/.test(ln),Ja=+/^n/.test(ln);ua=[Be[1-Pa]-ka[0],ze[1-Ja]-ka[1]],ka[0]=Be[Pa],ka[1]=ze[Ja]}else T.event.altKey&&(oa=ka.slice());an.style("pointer-events","none").selectAll(".resize").style("display",null),T.select("body").style("cursor",Br.style("cursor")),Gr({type:"brushstart"}),Ii();function yi(){T.event.keyCode==32&&(ra||(oa=null,ka[0]-=Be[1],ka[1]-=ze[1],ra=2),J())}function co(){T.event.keyCode==32&&ra==2&&(ka[0]+=Be[1],ka[1]+=ze[1],ra=0,J())}function Ii(){var Wa=T.mouse(Sr),Si=!1;ua&&(Wa[0]+=ua[0],Wa[1]+=ua[1]),ra||(T.event.altKey?(oa||(oa=[(Be[0]+Be[1])/2,(ze[0]+ze[1])/2]),ka[0]=Be[+(Wa[0]<oa[0])],ka[1]=ze[+(Wa[1]<oa[1])]):oa=null),Wr&&fa(Wa,be,0)&&(Ar(an),Si=!0),Nn&&fa(Wa,Ee,1)&&(Kr(an),Si=!0),Si&&(Qt(an),Gr({type:"brush",mode:ra?"move":"resize"}))}function fa(Wa,Si,ui){var io=rn(Si),Qi=io[0],go=io[1],Go=ka[ui],zo=ui?ze:Be,Yo=zo[1]-zo[0],Gi,Oi;if(ra&&(Qi-=Go,go-=Yo+Go),Gi=(ui?kt:ht)?Math.max(Qi,Math.min(go,Wa[ui])):Wa[ui],ra?Oi=(Gi+=Go)+Yo:(oa&&(Go=Math.max(Qi,Math.min(go,2*oa[ui]-Gi))),Go<Gi?(Oi=Gi,Gi=Go):Oi=Go),zo[0]!=Gi||zo[1]!=Oi)return ui?yt=null:We=null,zo[0]=Gi,zo[1]=Oi,!0}function ai(){Ii(),an.style("pointer-events","all").selectAll(".resize").style("display",Zt.empty()?"none":null),T.select("body").style("cursor",null),Ua.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),ba(),Gr({type:"brushend"})}}return Zt.x=function(Sr){return arguments.length?(be=Sr,Vt=po[!be<<1|!Ee],Zt):be},Zt.y=function(Sr){return arguments.length?(Ee=Sr,Vt=po[!be<<1|!Ee],Zt):Ee},Zt.clamp=function(Sr){return arguments.length?(be&&Ee?(ht=!!Sr[0],kt=!!Sr[1]):be?ht=!!Sr:Ee&&(kt=!!Sr),Zt):be&&Ee?[ht,kt]:be?ht:Ee?kt:null},Zt.extent=function(Sr){var Br,Gr,an,ln,Wr;return arguments.length?(be&&(Br=Sr[0],Gr=Sr[1],Ee&&(Br=Br[0],Gr=Gr[0]),We=[Br,Gr],be.invert&&(Br=be(Br),Gr=be(Gr)),Gr<Br&&(Wr=Br,Br=Gr,Gr=Wr),(Br!=Be[0]||Gr!=Be[1])&&(Be=[Br,Gr])),Ee&&(an=Sr[0],ln=Sr[1],be&&(an=an[1],ln=ln[1]),yt=[an,ln],Ee.invert&&(an=Ee(an),ln=Ee(ln)),ln<an&&(Wr=an,an=ln,ln=Wr),(an!=ze[0]||ln!=ze[1])&&(ze=[an,ln])),Zt):(be&&(We?(Br=We[0],Gr=We[1]):(Br=Be[0],Gr=Be[1],be.invert&&(Br=be.invert(Br),Gr=be.invert(Gr)),Gr<Br&&(Wr=Br,Br=Gr,Gr=Wr))),Ee&&(yt?(an=yt[0],ln=yt[1]):(an=ze[0],ln=ze[1],Ee.invert&&(an=Ee.invert(an),ln=Ee.invert(ln)),ln<an&&(Wr=an,an=ln,ln=Wr))),be&&Ee?[[Br,an],[Gr,ln]]:be?[Br,Gr]:Ee&&[an,ln])},Zt.clear=function(){return Zt.empty()||(Be=[0,0],ze=[0,0],We=yt=null),Zt},Zt.empty=function(){return!!be&&Be[0]==Be[1]||!!Ee&&ze[0]==ze[1]},T.rebind(Zt,fe,"on")};var us={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},po=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];T.text=Lt(function(fe){return fe.responseText}),T.json=function(fe,be){return jt(fe,"application/json",Lo,be)};function Lo(fe){return JSON.parse(fe.responseText)}T.html=function(fe,be){return jt(fe,"text/html",Ho,be)};function Ho(fe){var be=A.createRange();return be.selectNode(A.body),be.createContextualFragment(fe.responseText)}T.xml=Lt(function(fe){return fe.responseXML}),typeof ne=="object"&&ne.exports?ne.exports=T:this.d3=T}).apply(self)},{}],59:[function(g,ne,ae){ne.exports=g("./quad")},{"./quad":60}],60:[function(g,ne,ae){var T=g("binary-search-bounds"),c=g("clamp"),M=g("parse-rect"),A=g("array-bounds"),e=g("pick-by-alias"),a=g("defined"),n=g("flatten-vertex-data"),t=g("is-obj"),r=g("dtype"),f=g("math-log2"),o=1073741824;ne.exports=function(d,y){y||(y={}),d=n(d,"float64"),y=e(y,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var v=a(y.maxDepth,255),x=a(y.bounds,A(d,2));x[0]===x[2]&&x[2]++,x[1]===x[3]&&x[3]++;var l=i(d,x),_=d.length>>>1,s;y.dtype||(y.dtype="array"),typeof y.dtype=="string"?s=new(r(y.dtype))(_):y.dtype&&(s=y.dtype,Array.isArray(s)&&(s.length=_));for(var w=0;w<_;++w)s[w]=w;var b=[],h=[],m=[],u=[];D(0,0,1,s,0,1);for(var L=0,S=0;S<b.length;S++){var k=b[S];if(s.set)s.set(k,L);else for(var P=0,z=k.length;P<z;P++)s[P+L]=k[P];var I=L+b[S].length;u[S]=[L,I],L=I}return s.range=R,s;function D(V,Y,K,J,G,Z){if(!J.length)return null;var re=b[G]||(b[G]=[]),se=m[G]||(m[G]=[]),oe=h[G]||(h[G]=[]),N=re.length;if(G++,G>v||Z>o){for(var U=0;U<J.length;U++)re.push(J[U]),se.push(Z),oe.push(null,null,null,null);return N}if(re.push(J[0]),se.push(Z),J.length<=1)return oe.push(null,null,null,null),N;for(var q=K*.5,Q=V+q,W=Y+q,X=[],te=[],ee=[],ie=[],le=1,ye=J.length;le<ye;le++){var ue=J[le],pe=l[ue*2],ge=l[ue*2+1];pe<Q?ge<W?X.push(ue):te.push(ue):ge<W?ee.push(ue):ie.push(ue)}return Z<<=2,oe.push(D(V,Y,q,X,G,Z),D(V,W,q,te,G,Z+1),D(Q,Y,q,ee,G,Z+2),D(Q,W,q,ie,G,Z+3)),N}function R(){for(var V=[],Y=arguments.length;Y--;)V[Y]=arguments[Y];var K;if(t(V[V.length-1])){var J=V.pop();!V.length&&(J.x!=null||J.l!=null||J.left!=null)&&(V=[J],K={}),K=e(J,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else K={};V.length||(V=x);var G=M.apply(void 0,V),Z=[Math.min(G.x,G.x+G.width),Math.min(G.y,G.y+G.height),Math.max(G.x,G.x+G.width),Math.max(G.y,G.y+G.height)],re=Z[0],se=Z[1],oe=Z[2],N=Z[3],U=i([re,se,oe,N],x),q=U[0],Q=U[1],W=U[2],X=U[3],te=a(K.level,b.length);if(K.d!=null){var ee;typeof K.d=="number"?ee=[K.d,K.d]:K.d.length&&(ee=K.d),te=Math.min(Math.max(Math.ceil(-f(Math.abs(ee[0])/(x[2]-x[0]))),Math.ceil(-f(Math.abs(ee[1])/(x[3]-x[1])))),te)}if(te=Math.min(te,b.length),K.lod)return B(q,Q,W,X,te);var ie=[];le(0,0,1,0,0,1);function le(ue,pe,ge,Te,_e,De){if(!(_e===null||De===null)){var Oe=ue+ge,Ue=pe+ge;if(!(q>Oe||Q>Ue||W<ue||X<pe)&&!(Te>=te)&&_e!==De){var xe=b[Te];De===void 0&&(De=xe.length);for(var Pe=_e;Pe<De;Pe++){var Ve=xe[Pe],Qe=d[Ve*2],Fe=d[Ve*2+1];Qe>=re&&Qe<=oe&&Fe>=se&&Fe<=N&&ie.push(Ve)}var Le=h[Te],Ne=Le[_e*4+0],dt=Le[_e*4+1],Dt=Le[_e*4+2],Xt=Le[_e*4+3],Tt=ye(Le,_e+1),zt=ge*.5,Ut=Te+1;le(ue,pe,zt,Ut,Ne,dt||Dt||Xt||Tt),le(ue,pe+zt,zt,Ut,dt,Dt||Xt||Tt),le(ue+zt,pe,zt,Ut,Dt,Xt||Tt),le(ue+zt,pe+zt,zt,Ut,Xt,Tt)}}}function ye(ue,pe){for(var ge=null,Te=0;ge===null;)if(ge=ue[pe*4+Te],Te++,Te>ue.length)return null;return ge}return ie}function B(V,Y,K,J,G){for(var Z=[],re=0;re<G;re++){var se=m[re],oe=u[re][0],N=F(V,Y,re),U=F(K,J,re),q=T.ge(se,N),Q=T.gt(se,U,q,se.length-1);Z[re]=[q+oe,Q+oe]}return Z}function F(V,Y,K){for(var J=1,G=.5,Z=.5,re=.5,se=0;se<K;se++)J<<=2,J+=V<G?Y<Z?0:1:Y<Z?2:3,re*=.5,G+=V<G?-re:re,Z+=Y<Z?-re:re;return J}};function i(p,d){for(var y=d[0],v=d[1],x=d[2],l=d[3],_=1/(x-y),s=1/(l-v),w=new Array(p.length),b=0,h=p.length/2;b<h;b++)w[2*b]=c((p[2*b]-y)*_,0,1),w[2*b+1]=c((p[2*b+1]-v)*s,0,1);return w}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(g,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0});var T=g("@turf/meta"),c=6378137;function M(t){return T.geomReduce(t,function(r,f){return r+A(f)},0)}ae.default=M;function A(t){var r=0,f;switch(t.type){case"Polygon":return e(t.coordinates);case"MultiPolygon":for(f=0;f<t.coordinates.length;f++)r+=e(t.coordinates[f]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function e(t){var r=0;if(t&&t.length>0){r+=Math.abs(a(t[0]));for(var f=1;f<t.length;f++)r-=Math.abs(a(t[f]))}return r}function a(t){var r,f,o,i,p,d,y,v=0,x=t.length;if(x>2){for(y=0;y<x;y++)y===x-2?(i=x-2,p=x-1,d=0):y===x-1?(i=x-1,p=0,d=1):(i=y,p=y+1,d=y+2),r=t[i],f=t[p],o=t[d],v+=(n(o[0])-n(r[0]))*Math.sin(n(f[1]));v=v*c*c/2}return v}function n(t){return t*Math.PI/180}},{"@turf/meta":63}],62:[function(g,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0}),ae.earthRadius=63710088e-1,ae.factors={centimeters:ae.earthRadius*100,centimetres:ae.earthRadius*100,degrees:ae.earthRadius/111325,feet:ae.earthRadius*3.28084,inches:ae.earthRadius*39.37,kilometers:ae.earthRadius/1e3,kilometres:ae.earthRadius/1e3,meters:ae.earthRadius,metres:ae.earthRadius,miles:ae.earthRadius/1609.344,millimeters:ae.earthRadius*1e3,millimetres:ae.earthRadius*1e3,nauticalmiles:ae.earthRadius/1852,radians:1,yards:ae.earthRadius*1.0936},ae.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ae.earthRadius,yards:1.0936133},ae.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function T(S,k,P){P===void 0&&(P={});var z={type:"Feature"};return(P.id===0||P.id)&&(z.id=P.id),P.bbox&&(z.bbox=P.bbox),z.properties=k||{},z.geometry=S,z}ae.feature=T;function c(S,k,P){switch(S){case"Point":return M(k).geometry;case"LineString":return n(k).geometry;case"Polygon":return e(k).geometry;case"MultiPoint":return o(k).geometry;case"MultiLineString":return f(k).geometry;case"MultiPolygon":return i(k).geometry;default:throw new Error(S+" is invalid")}}ae.geometry=c;function M(S,k,P){if(P===void 0&&(P={}),!S)throw new Error("coordinates is required");if(!Array.isArray(S))throw new Error("coordinates must be an Array");if(S.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!h(S[0])||!h(S[1]))throw new Error("coordinates must contain numbers");var z={type:"Point",coordinates:S};return T(z,k,P)}ae.point=M;function A(S,k,P){return P===void 0&&(P={}),r(S.map(function(z){return M(z,k)}),P)}ae.points=A;function e(S,k,P){P===void 0&&(P={});for(var z=0,I=S;z<I.length;z++){var D=I[z];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var R=0;R<D[D.length-1].length;R++)if(D[D.length-1][R]!==D[0][R])throw new Error("First and last Position are not equivalent.")}var B={type:"Polygon",coordinates:S};return T(B,k,P)}ae.polygon=e;function a(S,k,P){return P===void 0&&(P={}),r(S.map(function(z){return e(z,k)}),P)}ae.polygons=a;function n(S,k,P){if(P===void 0&&(P={}),S.length<2)throw new Error("coordinates must be an array of two or more positions");var z={type:"LineString",coordinates:S};return T(z,k,P)}ae.lineString=n;function t(S,k,P){return P===void 0&&(P={}),r(S.map(function(z){return n(z,k)}),P)}ae.lineStrings=t;function r(S,k){k===void 0&&(k={});var P={type:"FeatureCollection"};return k.id&&(P.id=k.id),k.bbox&&(P.bbox=k.bbox),P.features=S,P}ae.featureCollection=r;function f(S,k,P){P===void 0&&(P={});var z={type:"MultiLineString",coordinates:S};return T(z,k,P)}ae.multiLineString=f;function o(S,k,P){P===void 0&&(P={});var z={type:"MultiPoint",coordinates:S};return T(z,k,P)}ae.multiPoint=o;function i(S,k,P){P===void 0&&(P={});var z={type:"MultiPolygon",coordinates:S};return T(z,k,P)}ae.multiPolygon=i;function p(S,k,P){P===void 0&&(P={});var z={type:"GeometryCollection",geometries:S};return T(z,k,P)}ae.geometryCollection=p;function d(S,k){if(k===void 0&&(k=0),k&&!(k>=0))throw new Error("precision must be a positive number");var P=Math.pow(10,k||0);return Math.round(S*P)/P}ae.round=d;function y(S,k){k===void 0&&(k="kilometers");var P=ae.factors[k];if(!P)throw new Error(k+" units is invalid");return S*P}ae.radiansToLength=y;function v(S,k){k===void 0&&(k="kilometers");var P=ae.factors[k];if(!P)throw new Error(k+" units is invalid");return S/P}ae.lengthToRadians=v;function x(S,k){return _(v(S,k))}ae.lengthToDegrees=x;function l(S){var k=S%360;return k<0&&(k+=360),k}ae.bearingToAzimuth=l;function _(S){var k=S%(2*Math.PI);return k*180/Math.PI}ae.radiansToDegrees=_;function s(S){var k=S%360;return k*Math.PI/180}ae.degreesToRadians=s;function w(S,k,P){if(k===void 0&&(k="kilometers"),P===void 0&&(P="kilometers"),!(S>=0))throw new Error("length must be a positive number");return y(v(S,k),P)}ae.convertLength=w;function b(S,k,P){if(k===void 0&&(k="meters"),P===void 0&&(P="kilometers"),!(S>=0))throw new Error("area must be a positive number");var z=ae.areaFactors[k];if(!z)throw new Error("invalid original units");var I=ae.areaFactors[P];if(!I)throw new Error("invalid final units");return S/z*I}ae.convertArea=b;function h(S){return!isNaN(S)&&S!==null&&!Array.isArray(S)}ae.isNumber=h;function m(S){return!!S&&S.constructor===Object}ae.isObject=m;function u(S){if(!S)throw new Error("bbox is required");if(!Array.isArray(S))throw new Error("bbox must be an Array");if(S.length!==4&&S.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");S.forEach(function(k){if(!h(k))throw new Error("bbox must only contain numbers")})}ae.validateBBox=u;function L(S){if(!S)throw new Error("id is required");if(["string","number"].indexOf(typeof S)===-1)throw new Error("id must be a number or a string")}ae.validateId=L},{}],63:[function(g,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0});var T=g("@turf/helpers");function c(_,s,w){if(_!==null)for(var b,h,m,u,L,S,k,P=0,z=0,I,D=_.type,R=D==="FeatureCollection",B=D==="Feature",F=R?_.features.length:1,V=0;V<F;V++){k=R?_.features[V].geometry:B?_.geometry:_,I=k?k.type==="GeometryCollection":!1,L=I?k.geometries.length:1;for(var Y=0;Y<L;Y++){var K=0,J=0;if(u=I?k.geometries[Y]:k,u!==null){S=u.coordinates;var G=u.type;switch(P=w&&(G==="Polygon"||G==="MultiPolygon")?1:0,G){case null:break;case"Point":if(s(S,z,V,K,J)===!1)return!1;z++,K++;break;case"LineString":case"MultiPoint":for(b=0;b<S.length;b++){if(s(S[b],z,V,K,J)===!1)return!1;z++,G==="MultiPoint"&&K++}G==="LineString"&&K++;break;case"Polygon":case"MultiLineString":for(b=0;b<S.length;b++){for(h=0;h<S[b].length-P;h++){if(s(S[b][h],z,V,K,J)===!1)return!1;z++}G==="MultiLineString"&&K++,G==="Polygon"&&J++}G==="Polygon"&&K++;break;case"MultiPolygon":for(b=0;b<S.length;b++){for(J=0,h=0;h<S[b].length;h++){for(m=0;m<S[b][h].length-P;m++){if(s(S[b][h][m],z,V,K,J)===!1)return!1;z++}J++}K++}break;case"GeometryCollection":for(b=0;b<u.geometries.length;b++)if(c(u.geometries[b],s,w)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(_,s,w,b){var h=w;return c(_,function(m,u,L,S,k){u===0&&w===void 0?h=m:h=s(h,m,u,L,S,k)},b),h}function A(_,s){var w;switch(_.type){case"FeatureCollection":for(w=0;w<_.features.length&&s(_.features[w].properties,w)!==!1;w++);break;case"Feature":s(_.properties,0);break}}function e(_,s,w){var b=w;return A(_,function(h,m){m===0&&w===void 0?b=h:b=s(b,h,m)}),b}function a(_,s){if(_.type==="Feature")s(_,0);else if(_.type==="FeatureCollection")for(var w=0;w<_.features.length&&s(_.features[w],w)!==!1;w++);}function n(_,s,w){var b=w;return a(_,function(h,m){m===0&&w===void 0?b=h:b=s(b,h,m)}),b}function t(_){var s=[];return c(_,function(w){s.push(w)}),s}function r(_,s){var w,b,h,m,u,L,S,k,P,z,I=0,D=_.type==="FeatureCollection",R=_.type==="Feature",B=D?_.features.length:1;for(w=0;w<B;w++){for(L=D?_.features[w].geometry:R?_.geometry:_,k=D?_.features[w].properties:R?_.properties:{},P=D?_.features[w].bbox:R?_.bbox:void 0,z=D?_.features[w].id:R?_.id:void 0,S=L?L.type==="GeometryCollection":!1,u=S?L.geometries.length:1,h=0;h<u;h++){if(m=S?L.geometries[h]:L,m===null){if(s(null,I,k,P,z)===!1)return!1;continue}switch(m.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(m,I,k,P,z)===!1)return!1;break}case"GeometryCollection":{for(b=0;b<m.geometries.length;b++)if(s(m.geometries[b],I,k,P,z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function f(_,s,w){var b=w;return r(_,function(h,m,u,L,S){m===0&&w===void 0?b=h:b=s(b,h,m,u,L,S)}),b}function o(_,s){r(_,function(w,b,h,m,u){var L=w===null?null:w.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return s(T.feature(w,h,{bbox:m,id:u}),b,0)===!1?!1:void 0}var S;switch(L){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var k=0;k<w.coordinates.length;k++){var P=w.coordinates[k],z={type:S,coordinates:P};if(s(T.feature(z,h),b,k)===!1)return!1}})}function i(_,s,w){var b=w;return o(_,function(h,m,u){m===0&&u===0&&w===void 0?b=h:b=s(b,h,m,u)}),b}function p(_,s){o(_,function(w,b,h){var m=0;if(!!w.geometry){var u=w.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var L,S=0,k=0,P=0;if(c(w,function(z,I,D,R,B){if(L===void 0||b>S||R>k||B>P){L=z,S=b,k=R,P=B,m=0;return}var F=T.lineString([L,z],w.properties);if(s(F,b,h,B,m)===!1)return!1;m++,L=z})===!1)return!1}}})}function d(_,s,w){var b=w,h=!1;return p(_,function(m,u,L,S,k){h===!1&&w===void 0?b=m:b=s(b,m,u,L,S,k),h=!0}),b}function y(_,s){if(!_)throw new Error("geojson is required");o(_,function(w,b,h){if(w.geometry!==null){var m=w.geometry.type,u=w.geometry.coordinates;switch(m){case"LineString":if(s(w,b,h,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<u.length;L++)if(s(T.lineString(u[L],w.properties),b,h,L)===!1)return!1;break}}})}function v(_,s,w){var b=w;return y(_,function(h,m,u,L){m===0&&w===void 0?b=h:b=s(b,h,m,u,L)}),b}function x(_,s){if(s=s||{},!T.isObject(s))throw new Error("options is invalid");var w=s.featureIndex||0,b=s.multiFeatureIndex||0,h=s.geometryIndex||0,m=s.segmentIndex||0,u=s.properties,L;switch(_.type){case"FeatureCollection":w<0&&(w=_.features.length+w),u=u||_.features[w].properties,L=_.features[w].geometry;break;case"Feature":u=u||_.properties,L=_.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=_;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return m<0&&(m=S.length+m-1),T.lineString([S[m],S[m+1]],u,s);case"Polygon":return h<0&&(h=S.length+h),m<0&&(m=S[h].length+m-1),T.lineString([S[h][m],S[h][m+1]],u,s);case"MultiLineString":return b<0&&(b=S.length+b),m<0&&(m=S[b].length+m-1),T.lineString([S[b][m],S[b][m+1]],u,s);case"MultiPolygon":return b<0&&(b=S.length+b),h<0&&(h=S[b].length+h),m<0&&(m=S[b][h].length-m-1),T.lineString([S[b][h][m],S[b][h][m+1]],u,s)}throw new Error("geojson is invalid")}function l(_,s){if(s=s||{},!T.isObject(s))throw new Error("options is invalid");var w=s.featureIndex||0,b=s.multiFeatureIndex||0,h=s.geometryIndex||0,m=s.coordIndex||0,u=s.properties,L;switch(_.type){case"FeatureCollection":w<0&&(w=_.features.length+w),u=u||_.features[w].properties,L=_.features[w].geometry;break;case"Feature":u=u||_.properties,L=_.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=_;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":return T.point(S,u,s);case"MultiPoint":return b<0&&(b=S.length+b),T.point(S[b],u,s);case"LineString":return m<0&&(m=S.length+m),T.point(S[m],u,s);case"Polygon":return h<0&&(h=S.length+h),m<0&&(m=S[h].length+m),T.point(S[h][m],u,s);case"MultiLineString":return b<0&&(b=S.length+b),m<0&&(m=S[b].length+m),T.point(S[b][m],u,s);case"MultiPolygon":return b<0&&(b=S.length+b),h<0&&(h=S[b].length+h),m<0&&(m=S[b][h].length-m),T.point(S[b][h][m],u,s)}throw new Error("geojson is invalid")}ae.coordEach=c,ae.coordReduce=M,ae.propEach=A,ae.propReduce=e,ae.featureEach=a,ae.featureReduce=n,ae.coordAll=t,ae.geomEach=r,ae.geomReduce=f,ae.flattenEach=o,ae.flattenReduce=i,ae.segmentEach=p,ae.segmentReduce=d,ae.lineEach=y,ae.lineReduce=v,ae.findSegment=x,ae.findPoint=l},{"@turf/helpers":62}],64:[function(g,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0});var T=g("@turf/meta");function c(M){var A=[1/0,1/0,-1/0,-1/0];return T.coordEach(M,function(e){A[0]>e[0]&&(A[0]=e[0]),A[1]>e[1]&&(A[1]=e[1]),A[2]<e[0]&&(A[2]=e[0]),A[3]<e[1]&&(A[3]=e[1])}),A}c.default=c,ae.default=c},{"@turf/meta":66}],65:[function(g,ne,ae){arguments[4][62][0].apply(ae,arguments)},{dup:62}],66:[function(g,ne,ae){arguments[4][63][0].apply(ae,arguments)},{"@turf/helpers":65,dup:63}],67:[function(g,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0});var T=g("@turf/meta"),c=g("@turf/helpers");function M(A,e){e===void 0&&(e={});var a=0,n=0,t=0;return T.coordEach(A,function(r){a+=r[0],n+=r[1],t++}),c.point([a/t,n/t],e.properties)}ae.default=M},{"@turf/helpers":68,"@turf/meta":69}],68:[function(g,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0}),ae.earthRadius=63710088e-1,ae.factors={centimeters:ae.earthRadius*100,centimetres:ae.earthRadius*100,degrees:ae.earthRadius/111325,feet:ae.earthRadius*3.28084,inches:ae.earthRadius*39.37,kilometers:ae.earthRadius/1e3,kilometres:ae.earthRadius/1e3,meters:ae.earthRadius,metres:ae.earthRadius,miles:ae.earthRadius/1609.344,millimeters:ae.earthRadius*1e3,millimetres:ae.earthRadius*1e3,nauticalmiles:ae.earthRadius/1852,radians:1,yards:ae.earthRadius/1.0936},ae.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ae.earthRadius,yards:1/1.0936},ae.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function T(B,F,V){V===void 0&&(V={});var Y={type:"Feature"};return(V.id===0||V.id)&&(Y.id=V.id),V.bbox&&(Y.bbox=V.bbox),Y.properties=F||{},Y.geometry=B,Y}ae.feature=T;function c(B,F,V){switch(B){case"Point":return M(F).geometry;case"LineString":return n(F).geometry;case"Polygon":return e(F).geometry;case"MultiPoint":return o(F).geometry;case"MultiLineString":return f(F).geometry;case"MultiPolygon":return i(F).geometry;default:throw new Error(B+" is invalid")}}ae.geometry=c;function M(B,F,V){V===void 0&&(V={});var Y={type:"Point",coordinates:B};return T(Y,F,V)}ae.point=M;function A(B,F,V){return V===void 0&&(V={}),r(B.map(function(Y){return M(Y,F)}),V)}ae.points=A;function e(B,F,V){V===void 0&&(V={});for(var Y=0,K=B;Y<K.length;Y++){var J=K[Y];if(J.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var G=0;G<J[J.length-1].length;G++)if(J[J.length-1][G]!==J[0][G])throw new Error("First and last Position are not equivalent.")}var Z={type:"Polygon",coordinates:B};return T(Z,F,V)}ae.polygon=e;function a(B,F,V){return V===void 0&&(V={}),r(B.map(function(Y){return e(Y,F)}),V)}ae.polygons=a;function n(B,F,V){if(V===void 0&&(V={}),B.length<2)throw new Error("coordinates must be an array of two or more positions");var Y={type:"LineString",coordinates:B};return T(Y,F,V)}ae.lineString=n;function t(B,F,V){return V===void 0&&(V={}),r(B.map(function(Y){return n(Y,F)}),V)}ae.lineStrings=t;function r(B,F){F===void 0&&(F={});var V={type:"FeatureCollection"};return F.id&&(V.id=F.id),F.bbox&&(V.bbox=F.bbox),V.features=B,V}ae.featureCollection=r;function f(B,F,V){V===void 0&&(V={});var Y={type:"MultiLineString",coordinates:B};return T(Y,F,V)}ae.multiLineString=f;function o(B,F,V){V===void 0&&(V={});var Y={type:"MultiPoint",coordinates:B};return T(Y,F,V)}ae.multiPoint=o;function i(B,F,V){V===void 0&&(V={});var Y={type:"MultiPolygon",coordinates:B};return T(Y,F,V)}ae.multiPolygon=i;function p(B,F,V){V===void 0&&(V={});var Y={type:"GeometryCollection",geometries:B};return T(Y,F,V)}ae.geometryCollection=p;function d(B,F){if(F===void 0&&(F=0),F&&!(F>=0))throw new Error("precision must be a positive number");var V=Math.pow(10,F||0);return Math.round(B*V)/V}ae.round=d;function y(B,F){F===void 0&&(F="kilometers");var V=ae.factors[F];if(!V)throw new Error(F+" units is invalid");return B*V}ae.radiansToLength=y;function v(B,F){F===void 0&&(F="kilometers");var V=ae.factors[F];if(!V)throw new Error(F+" units is invalid");return B/V}ae.lengthToRadians=v;function x(B,F){return _(v(B,F))}ae.lengthToDegrees=x;function l(B){var F=B%360;return F<0&&(F+=360),F}ae.bearingToAzimuth=l;function _(B){var F=B%(2*Math.PI);return F*180/Math.PI}ae.radiansToDegrees=_;function s(B){var F=B%360;return F*Math.PI/180}ae.degreesToRadians=s;function w(B,F,V){if(F===void 0&&(F="kilometers"),V===void 0&&(V="kilometers"),!(B>=0))throw new Error("length must be a positive number");return y(v(B,F),V)}ae.convertLength=w;function b(B,F,V){if(F===void 0&&(F="meters"),V===void 0&&(V="kilometers"),!(B>=0))throw new Error("area must be a positive number");var Y=ae.areaFactors[F];if(!Y)throw new Error("invalid original units");var K=ae.areaFactors[V];if(!K)throw new Error("invalid final units");return B/Y*K}ae.convertArea=b;function h(B){return!isNaN(B)&&B!==null&&!Array.isArray(B)&&!/^\s*$/.test(B)}ae.isNumber=h;function m(B){return!!B&&B.constructor===Object}ae.isObject=m;function u(B){if(!B)throw new Error("bbox is required");if(!Array.isArray(B))throw new Error("bbox must be an Array");if(B.length!==4&&B.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");B.forEach(function(F){if(!h(F))throw new Error("bbox must only contain numbers")})}ae.validateBBox=u;function L(B){if(!B)throw new Error("id is required");if(["string","number"].indexOf(typeof B)===-1)throw new Error("id must be a number or a string")}ae.validateId=L;function S(){throw new Error("method has been renamed to `radiansToDegrees`")}ae.radians2degrees=S;function k(){throw new Error("method has been renamed to `degreesToRadians`")}ae.degrees2radians=k;function P(){throw new Error("method has been renamed to `lengthToDegrees`")}ae.distanceToDegrees=P;function z(){throw new Error("method has been renamed to `lengthToRadians`")}ae.distanceToRadians=z;function I(){throw new Error("method has been renamed to `radiansToLength`")}ae.radiansToDistance=I;function D(){throw new Error("method has been renamed to `bearingToAzimuth`")}ae.bearingToAngle=D;function R(){throw new Error("method has been renamed to `convertLength`")}ae.convertDistance=R},{}],69:[function(g,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0});var T=g("@turf/helpers");function c(_,s,w){if(_!==null)for(var b,h,m,u,L,S,k,P=0,z=0,I,D=_.type,R=D==="FeatureCollection",B=D==="Feature",F=R?_.features.length:1,V=0;V<F;V++){k=R?_.features[V].geometry:B?_.geometry:_,I=k?k.type==="GeometryCollection":!1,L=I?k.geometries.length:1;for(var Y=0;Y<L;Y++){var K=0,J=0;if(u=I?k.geometries[Y]:k,u!==null){S=u.coordinates;var G=u.type;switch(P=w&&(G==="Polygon"||G==="MultiPolygon")?1:0,G){case null:break;case"Point":if(s(S,z,V,K,J)===!1)return!1;z++,K++;break;case"LineString":case"MultiPoint":for(b=0;b<S.length;b++){if(s(S[b],z,V,K,J)===!1)return!1;z++,G==="MultiPoint"&&K++}G==="LineString"&&K++;break;case"Polygon":case"MultiLineString":for(b=0;b<S.length;b++){for(h=0;h<S[b].length-P;h++){if(s(S[b][h],z,V,K,J)===!1)return!1;z++}G==="MultiLineString"&&K++,G==="Polygon"&&J++}G==="Polygon"&&K++;break;case"MultiPolygon":for(b=0;b<S.length;b++){for(J=0,h=0;h<S[b].length;h++){for(m=0;m<S[b][h].length-P;m++){if(s(S[b][h][m],z,V,K,J)===!1)return!1;z++}J++}K++}break;case"GeometryCollection":for(b=0;b<u.geometries.length;b++)if(c(u.geometries[b],s,w)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(_,s,w,b){var h=w;return c(_,function(m,u,L,S,k){u===0&&w===void 0?h=m:h=s(h,m,u,L,S,k)},b),h}function A(_,s){var w;switch(_.type){case"FeatureCollection":for(w=0;w<_.features.length&&s(_.features[w].properties,w)!==!1;w++);break;case"Feature":s(_.properties,0);break}}function e(_,s,w){var b=w;return A(_,function(h,m){m===0&&w===void 0?b=h:b=s(b,h,m)}),b}function a(_,s){if(_.type==="Feature")s(_,0);else if(_.type==="FeatureCollection")for(var w=0;w<_.features.length&&s(_.features[w],w)!==!1;w++);}function n(_,s,w){var b=w;return a(_,function(h,m){m===0&&w===void 0?b=h:b=s(b,h,m)}),b}function t(_){var s=[];return c(_,function(w){s.push(w)}),s}function r(_,s){var w,b,h,m,u,L,S,k,P,z,I=0,D=_.type==="FeatureCollection",R=_.type==="Feature",B=D?_.features.length:1;for(w=0;w<B;w++){for(L=D?_.features[w].geometry:R?_.geometry:_,k=D?_.features[w].properties:R?_.properties:{},P=D?_.features[w].bbox:R?_.bbox:void 0,z=D?_.features[w].id:R?_.id:void 0,S=L?L.type==="GeometryCollection":!1,u=S?L.geometries.length:1,h=0;h<u;h++){if(m=S?L.geometries[h]:L,m===null){if(s(null,I,k,P,z)===!1)return!1;continue}switch(m.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(m,I,k,P,z)===!1)return!1;break}case"GeometryCollection":{for(b=0;b<m.geometries.length;b++)if(s(m.geometries[b],I,k,P,z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function f(_,s,w){var b=w;return r(_,function(h,m,u,L,S){m===0&&w===void 0?b=h:b=s(b,h,m,u,L,S)}),b}function o(_,s){r(_,function(w,b,h,m,u){var L=w===null?null:w.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return s(T.feature(w,h,{bbox:m,id:u}),b,0)===!1?!1:void 0}var S;switch(L){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var k=0;k<w.coordinates.length;k++){var P=w.coordinates[k],z={type:S,coordinates:P};if(s(T.feature(z,h),b,k)===!1)return!1}})}function i(_,s,w){var b=w;return o(_,function(h,m,u){m===0&&u===0&&w===void 0?b=h:b=s(b,h,m,u)}),b}function p(_,s){o(_,function(w,b,h){var m=0;if(!!w.geometry){var u=w.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var L,S=0,k=0,P=0;if(c(w,function(z,I,D,R,B){if(L===void 0||b>S||R>k||B>P){L=z,S=b,k=R,P=B,m=0;return}var F=T.lineString([L,z],w.properties);if(s(F,b,h,B,m)===!1)return!1;m++,L=z})===!1)return!1}}})}function d(_,s,w){var b=w,h=!1;return p(_,function(m,u,L,S,k){h===!1&&w===void 0?b=m:b=s(b,m,u,L,S,k),h=!0}),b}function y(_,s){if(!_)throw new Error("geojson is required");o(_,function(w,b,h){if(w.geometry!==null){var m=w.geometry.type,u=w.geometry.coordinates;switch(m){case"LineString":if(s(w,b,h,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<u.length;L++)if(s(T.lineString(u[L],w.properties),b,h,L)===!1)return!1;break}}})}function v(_,s,w){var b=w;return y(_,function(h,m,u,L){m===0&&w===void 0?b=h:b=s(b,h,m,u,L)}),b}function x(_,s){if(s=s||{},!T.isObject(s))throw new Error("options is invalid");var w=s.featureIndex||0,b=s.multiFeatureIndex||0,h=s.geometryIndex||0,m=s.segmentIndex||0,u=s.properties,L;switch(_.type){case"FeatureCollection":w<0&&(w=_.features.length+w),u=u||_.features[w].properties,L=_.features[w].geometry;break;case"Feature":u=u||_.properties,L=_.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=_;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return m<0&&(m=S.length+m-1),T.lineString([S[m],S[m+1]],u,s);case"Polygon":return h<0&&(h=S.length+h),m<0&&(m=S[h].length+m-1),T.lineString([S[h][m],S[h][m+1]],u,s);case"MultiLineString":return b<0&&(b=S.length+b),m<0&&(m=S[b].length+m-1),T.lineString([S[b][m],S[b][m+1]],u,s);case"MultiPolygon":return b<0&&(b=S.length+b),h<0&&(h=S[b].length+h),m<0&&(m=S[b][h].length-m-1),T.lineString([S[b][h][m],S[b][h][m+1]],u,s)}throw new Error("geojson is invalid")}function l(_,s){if(s=s||{},!T.isObject(s))throw new Error("options is invalid");var w=s.featureIndex||0,b=s.multiFeatureIndex||0,h=s.geometryIndex||0,m=s.coordIndex||0,u=s.properties,L;switch(_.type){case"FeatureCollection":w<0&&(w=_.features.length+w),u=u||_.features[w].properties,L=_.features[w].geometry;break;case"Feature":u=u||_.properties,L=_.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=_;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":return T.point(S,u,s);case"MultiPoint":return b<0&&(b=S.length+b),T.point(S[b],u,s);case"LineString":return m<0&&(m=S.length+m),T.point(S[m],u,s);case"Polygon":return h<0&&(h=S.length+h),m<0&&(m=S[h].length+m),T.point(S[h][m],u,s);case"MultiLineString":return b<0&&(b=S.length+b),m<0&&(m=S[b].length+m),T.point(S[b][m],u,s);case"MultiPolygon":return b<0&&(b=S.length+b),h<0&&(h=S[b].length+h),m<0&&(m=S[b][h].length-m),T.point(S[b][h][m],u,s)}throw new Error("geojson is invalid")}ae.coordEach=c,ae.coordReduce=M,ae.propEach=A,ae.propReduce=e,ae.featureEach=a,ae.featureReduce=n,ae.coordAll=t,ae.geomEach=r,ae.geomReduce=f,ae.flattenEach=o,ae.flattenReduce=i,ae.segmentEach=p,ae.segmentReduce=d,ae.lineEach=y,ae.lineReduce=v,ae.findSegment=x,ae.findPoint=l},{"@turf/helpers":68}],70:[function(g,ne,ae){ne.exports=T;function T(c){var M=0,A=0,e=0,a=0;return c.map(function(n){n=n.slice();var t=n[0],r=t.toUpperCase();if(t!=r)switch(n[0]=r,t){case"a":n[6]+=e,n[7]+=a;break;case"v":n[1]+=a;break;case"h":n[1]+=e;break;default:for(var f=1;f<n.length;)n[f++]+=e,n[f++]+=a}switch(r){case"Z":e=M,a=A;break;case"H":e=n[1];break;case"V":a=n[1];break;case"M":e=M=n[1],a=A=n[2];break;default:e=n[n.length-2],a=n[n.length-1]}return n})}},{}],71:[function(g,ne,ae){ne.exports=T;function T(c,M){if(!c||c.length==null)throw Error("Argument should be an array");M==null?M=1:M=Math.floor(M);for(var A=Array(M*2),e=0;e<M;e++){for(var a=-1/0,n=1/0,t=e,r=c.length;t<r;t+=M)c[t]>a&&(a=c[t]),c[t]<n&&(n=c[t]);A[e]=n,A[M+e]=a}return A}},{}],72:[function(g,ne,ae){ne.exports=function(T,c,M){if(typeof Array.prototype.findIndex=="function")return T.findIndex(c,M);if(typeof c!="function")throw new TypeError("predicate must be a function");var A=Object(T),e=A.length;if(e===0)return-1;for(var a=0;a<e;a++)if(c.call(M,A[a],a,A))return a;return-1}},{}],73:[function(g,ne,ae){var T=g("array-bounds");ne.exports=c;function c(M,A,e){if(!M||M.length==null)throw Error("Argument should be an array");A==null&&(A=1),e==null&&(e=T(M,A));for(var a=0;a<A;a++){var n=e[A+a],t=e[a],r=a,f=M.length;if(n===1/0&&t===-1/0)for(r=a;r<f;r+=A)M[r]=M[r]===n?1:M[r]===t?0:.5;else if(n===1/0)for(r=a;r<f;r+=A)M[r]=M[r]===n?1:0;else if(t===-1/0)for(r=a;r<f;r+=A)M[r]=M[r]===t?0:1;else{var o=n-t;for(r=a;r<f;r+=A)isNaN(M[r])||(M[r]=o===0?.5:(M[r]-t)/o)}}return M}},{"array-bounds":71}],74:[function(g,ne,ae){ne.exports=function(c,M){var A=typeof c=="number",e=typeof M=="number";A&&!e?(M=c,c=0):!A&&!e&&(c=0,M=0),c=c|0,M=M|0;var a=M-c;if(a<0)throw new Error("array length must be positive");for(var n=new Array(a),t=0,r=c;t<a;t++,r++)n[t]=r;return n}},{}],75:[function(g,ne,ae){(function(T){(function(){var c=g("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function M(k,P){if(k===P)return 0;for(var z=k.length,I=P.length,D=0,R=Math.min(z,I);D<R;++D)if(k[D]!==P[D]){z=k[D],I=P[D];break}return z<I?-1:I<z?1:0}function A(k){return T.Buffer&&typeof T.Buffer.isBuffer=="function"?T.Buffer.isBuffer(k):!!(k!=null&&k._isBuffer)}var e=g("util/"),a=Object.prototype.hasOwnProperty,n=Array.prototype.slice,t=function(){return function(){}.name==="foo"}();function r(k){return Object.prototype.toString.call(k)}function f(k){return A(k)||typeof T.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(k):k?!!(k instanceof DataView||k.buffer&&k.buffer instanceof ArrayBuffer):!1}var o=ne.exports=l,i=/\s*function\s+([^\(\s]*)\s*/;function p(k){if(!!e.isFunction(k)){if(t)return k.name;var P=k.toString(),z=P.match(i);return z&&z[1]}}o.AssertionError=function(P){this.name="AssertionError",this.actual=P.actual,this.expected=P.expected,this.operator=P.operator,P.message?(this.message=P.message,this.generatedMessage=!1):(this.message=v(this),this.generatedMessage=!0);var z=P.stackStartFunction||x;if(Error.captureStackTrace)Error.captureStackTrace(this,z);else{var I=new Error;if(I.stack){var D=I.stack,R=p(z),B=D.indexOf(`
`+R);if(B>=0){var F=D.indexOf(`
`,B+1);D=D.substring(F+1)}this.stack=D}}},e.inherits(o.AssertionError,Error);function d(k,P){return typeof k=="string"?k.length<P?k:k.slice(0,P):k}function y(k){if(t||!e.isFunction(k))return e.inspect(k);var P=p(k),z=P?": "+P:"";return"[Function"+z+"]"}function v(k){return d(y(k.actual),128)+" "+k.operator+" "+d(y(k.expected),128)}function x(k,P,z,I,D){throw new o.AssertionError({message:z,actual:k,expected:P,operator:I,stackStartFunction:D})}o.fail=x;function l(k,P){k||x(k,!0,P,"==",o.ok)}o.ok=l,o.equal=function(P,z,I){P!=z&&x(P,z,I,"==",o.equal)},o.notEqual=function(P,z,I){P==z&&x(P,z,I,"!=",o.notEqual)},o.deepEqual=function(P,z,I){_(P,z,!1)||x(P,z,I,"deepEqual",o.deepEqual)},o.deepStrictEqual=function(P,z,I){_(P,z,!0)||x(P,z,I,"deepStrictEqual",o.deepStrictEqual)};function _(k,P,z,I){if(k===P)return!0;if(A(k)&&A(P))return M(k,P)===0;if(e.isDate(k)&&e.isDate(P))return k.getTime()===P.getTime();if(e.isRegExp(k)&&e.isRegExp(P))return k.source===P.source&&k.global===P.global&&k.multiline===P.multiline&&k.lastIndex===P.lastIndex&&k.ignoreCase===P.ignoreCase;if((k===null||typeof k!="object")&&(P===null||typeof P!="object"))return z?k===P:k==P;if(f(k)&&f(P)&&r(k)===r(P)&&!(k instanceof Float32Array||k instanceof Float64Array))return M(new Uint8Array(k.buffer),new Uint8Array(P.buffer))===0;if(A(k)!==A(P))return!1;I=I||{actual:[],expected:[]};var D=I.actual.indexOf(k);return D!==-1&&D===I.expected.indexOf(P)?!0:(I.actual.push(k),I.expected.push(P),w(k,P,z,I))}function s(k){return Object.prototype.toString.call(k)=="[object Arguments]"}function w(k,P,z,I){if(k==null||P===null||P===void 0)return!1;if(e.isPrimitive(k)||e.isPrimitive(P))return k===P;if(z&&Object.getPrototypeOf(k)!==Object.getPrototypeOf(P))return!1;var D=s(k),R=s(P);if(D&&!R||!D&&R)return!1;if(D)return k=n.call(k),P=n.call(P),_(k,P,z);var B=S(k),F=S(P),V,Y;if(B.length!==F.length)return!1;for(B.sort(),F.sort(),Y=B.length-1;Y>=0;Y--)if(B[Y]!==F[Y])return!1;for(Y=B.length-1;Y>=0;Y--)if(V=B[Y],!_(k[V],P[V],z,I))return!1;return!0}o.notDeepEqual=function(P,z,I){_(P,z,!1)&&x(P,z,I,"notDeepEqual",o.notDeepEqual)},o.notDeepStrictEqual=b;function b(k,P,z){_(k,P,!0)&&x(k,P,z,"notDeepStrictEqual",b)}o.strictEqual=function(P,z,I){P!==z&&x(P,z,I,"===",o.strictEqual)},o.notStrictEqual=function(P,z,I){P===z&&x(P,z,I,"!==",o.notStrictEqual)};function h(k,P){if(!k||!P)return!1;if(Object.prototype.toString.call(P)=="[object RegExp]")return P.test(k);try{if(k instanceof P)return!0}catch{}return Error.isPrototypeOf(P)?!1:P.call({},k)===!0}function m(k){var P;try{k()}catch(z){P=z}return P}function u(k,P,z,I){var D;if(typeof P!="function")throw new TypeError('"block" argument must be a function');typeof z=="string"&&(I=z,z=null),D=m(P),I=(z&&z.name?" ("+z.name+").":".")+(I?" "+I:"."),k&&!D&&x(D,z,"Missing expected exception"+I);var R=typeof I=="string",B=!k&&e.isError(D),F=!k&&D&&!z;if((B&&R&&h(D,z)||F)&&x(D,z,"Got unwanted exception"+I),k&&D&&z&&!h(D,z)||!k&&D)throw D}o.throws=function(k,P,z){u(!0,k,P,z)},o.doesNotThrow=function(k,P,z){u(!1,k,P,z)},o.ifError=function(k){if(k)throw k};function L(k,P){k||x(k,!0,P,"==",L)}o.strict=c(L,o,{equal:o.strictEqual,deepEqual:o.deepStrictEqual,notEqual:o.notStrictEqual,notDeepEqual:o.notDeepStrictEqual}),o.strict.strict=o.strict;var S=Object.keys||function(k){var P=[];for(var z in k)a.call(k,z)&&P.push(z);return P}}).call(this)}).call(this,typeof To!="undefined"?To:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"object-assign":247,"util/":78}],76:[function(g,ne,ae){typeof Object.create=="function"?ne.exports=function(c,M){c.super_=M,c.prototype=Object.create(M.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})}:ne.exports=function(c,M){c.super_=M;var A=function(){};A.prototype=M.prototype,c.prototype=new A,c.prototype.constructor=c}},{}],77:[function(g,ne,ae){ne.exports=function(c){return c&&typeof c=="object"&&typeof c.copy=="function"&&typeof c.fill=="function"&&typeof c.readUInt8=="function"}},{}],78:[function(g,ne,ae){(function(T,c){(function(){var M=/%[sdj%]/g;ae.format=function(F){if(!w(F)){for(var V=[],Y=0;Y<arguments.length;Y++)V.push(a(arguments[Y]));return V.join(" ")}for(var Y=1,K=arguments,J=K.length,G=String(F).replace(M,function(re){if(re==="%%")return"%";if(Y>=J)return re;switch(re){case"%s":return String(K[Y++]);case"%d":return Number(K[Y++]);case"%j":try{return JSON.stringify(K[Y++])}catch{return"[Circular]"}default:return re}}),Z=K[Y];Y<J;Z=K[++Y])l(Z)||!u(Z)?G+=" "+Z:G+=" "+a(Z);return G},ae.deprecate=function(F,V){if(h(c.process))return function(){return ae.deprecate(F,V).apply(this,arguments)};if(T.noDeprecation===!0)return F;var Y=!1;function K(){if(!Y){if(T.throwDeprecation)throw new Error(V);T.traceDeprecation?console.trace(V):console.error(V),Y=!0}return F.apply(this,arguments)}return K};var A={},e;ae.debuglog=function(F){if(h(e)&&(e=""),F=F.toUpperCase(),!A[F])if(new RegExp("\\b"+F+"\\b","i").test(e)){var V=T.pid;A[F]=function(){var Y=ae.format.apply(ae,arguments);console.error("%s %d: %s",F,V,Y)}}else A[F]=function(){};return A[F]};function a(F,V){var Y={seen:[],stylize:t};return arguments.length>=3&&(Y.depth=arguments[2]),arguments.length>=4&&(Y.colors=arguments[3]),x(V)?Y.showHidden=V:V&&ae._extend(Y,V),h(Y.showHidden)&&(Y.showHidden=!1),h(Y.depth)&&(Y.depth=2),h(Y.colors)&&(Y.colors=!1),h(Y.customInspect)&&(Y.customInspect=!0),Y.colors&&(Y.stylize=n),f(Y,F,Y.depth)}ae.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function n(F,V){var Y=a.styles[V];return Y?"["+a.colors[Y][0]+"m"+F+"["+a.colors[Y][1]+"m":F}function t(F,V){return F}function r(F){var V={};return F.forEach(function(Y,K){V[Y]=!0}),V}function f(F,V,Y){if(F.customInspect&&V&&k(V.inspect)&&V.inspect!==ae.inspect&&!(V.constructor&&V.constructor.prototype===V)){var K=V.inspect(Y,F);return w(K)||(K=f(F,K,Y)),K}var J=o(F,V);if(J)return J;var G=Object.keys(V),Z=r(G);if(F.showHidden&&(G=Object.getOwnPropertyNames(V)),S(V)&&(G.indexOf("message")>=0||G.indexOf("description")>=0))return i(V);if(G.length===0){if(k(V)){var re=V.name?": "+V.name:"";return F.stylize("[Function"+re+"]","special")}if(m(V))return F.stylize(RegExp.prototype.toString.call(V),"regexp");if(L(V))return F.stylize(Date.prototype.toString.call(V),"date");if(S(V))return i(V)}var se="",oe=!1,N=["{","}"];if(v(V)&&(oe=!0,N=["[","]"]),k(V)){var U=V.name?": "+V.name:"";se=" [Function"+U+"]"}if(m(V)&&(se=" "+RegExp.prototype.toString.call(V)),L(V)&&(se=" "+Date.prototype.toUTCString.call(V)),S(V)&&(se=" "+i(V)),G.length===0&&(!oe||V.length==0))return N[0]+se+N[1];if(Y<0)return m(V)?F.stylize(RegExp.prototype.toString.call(V),"regexp"):F.stylize("[Object]","special");F.seen.push(V);var q;return oe?q=p(F,V,Y,Z,G):q=G.map(function(Q){return d(F,V,Y,Z,Q,oe)}),F.seen.pop(),y(q,se,N)}function o(F,V){if(h(V))return F.stylize("undefined","undefined");if(w(V)){var Y="'"+JSON.stringify(V).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return F.stylize(Y,"string")}if(s(V))return F.stylize(""+V,"number");if(x(V))return F.stylize(""+V,"boolean");if(l(V))return F.stylize("null","null")}function i(F){return"["+Error.prototype.toString.call(F)+"]"}function p(F,V,Y,K,J){for(var G=[],Z=0,re=V.length;Z<re;++Z)B(V,String(Z))?G.push(d(F,V,Y,K,String(Z),!0)):G.push("");return J.forEach(function(se){se.match(/^\d+$/)||G.push(d(F,V,Y,K,se,!0))}),G}function d(F,V,Y,K,J,G){var Z,re,se;if(se=Object.getOwnPropertyDescriptor(V,J)||{value:V[J]},se.get?se.set?re=F.stylize("[Getter/Setter]","special"):re=F.stylize("[Getter]","special"):se.set&&(re=F.stylize("[Setter]","special")),B(K,J)||(Z="["+J+"]"),re||(F.seen.indexOf(se.value)<0?(l(Y)?re=f(F,se.value,null):re=f(F,se.value,Y-1),re.indexOf(`
`)>-1&&(G?re=re.split(`
`).map(function(oe){return"  "+oe}).join(`
`).substr(2):re=`
`+re.split(`
`).map(function(oe){return"   "+oe}).join(`
`))):re=F.stylize("[Circular]","special")),h(Z)){if(G&&J.match(/^\d+$/))return re;Z=JSON.stringify(""+J),Z.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Z=Z.substr(1,Z.length-2),Z=F.stylize(Z,"name")):(Z=Z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Z=F.stylize(Z,"string"))}return Z+": "+re}function y(F,V,Y){var K=F.reduce(function(J,G){return G.indexOf(`
`)>=0,J+G.replace(/\u001b\[\d\d?m/g,"").length+1},0);return K>60?Y[0]+(V===""?"":V+`
 `)+" "+F.join(`,
  `)+" "+Y[1]:Y[0]+V+" "+F.join(", ")+" "+Y[1]}function v(F){return Array.isArray(F)}ae.isArray=v;function x(F){return typeof F=="boolean"}ae.isBoolean=x;function l(F){return F===null}ae.isNull=l;function _(F){return F==null}ae.isNullOrUndefined=_;function s(F){return typeof F=="number"}ae.isNumber=s;function w(F){return typeof F=="string"}ae.isString=w;function b(F){return typeof F=="symbol"}ae.isSymbol=b;function h(F){return F===void 0}ae.isUndefined=h;function m(F){return u(F)&&z(F)==="[object RegExp]"}ae.isRegExp=m;function u(F){return typeof F=="object"&&F!==null}ae.isObject=u;function L(F){return u(F)&&z(F)==="[object Date]"}ae.isDate=L;function S(F){return u(F)&&(z(F)==="[object Error]"||F instanceof Error)}ae.isError=S;function k(F){return typeof F=="function"}ae.isFunction=k;function P(F){return F===null||typeof F=="boolean"||typeof F=="number"||typeof F=="string"||typeof F=="symbol"||typeof F=="undefined"}ae.isPrimitive=P,ae.isBuffer=g("./support/isBuffer");function z(F){return Object.prototype.toString.call(F)}function I(F){return F<10?"0"+F.toString(10):F.toString(10)}var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var F=new Date,V=[I(F.getHours()),I(F.getMinutes()),I(F.getSeconds())].join(":");return[F.getDate(),D[F.getMonth()],V].join(" ")}ae.log=function(){console.log("%s - %s",R(),ae.format.apply(ae,arguments))},ae.inherits=g("inherits"),ae._extend=function(F,V){if(!V||!u(V))return F;for(var Y=Object.keys(V),K=Y.length;K--;)F[Y[K]]=V[Y[K]];return F};function B(F,V){return Object.prototype.hasOwnProperty.call(F,V)}}).call(this)}).call(this,g("_process"),typeof To!="undefined"?To:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(g,ne,ae){ae.byteLength=t,ae.toByteArray=f,ae.fromByteArray=p;for(var T=[],c=[],M=typeof Uint8Array!="undefined"?Uint8Array:Array,A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,a=A.length;e<a;++e)T[e]=A[e],c[A.charCodeAt(e)]=e;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63;function n(d){var y=d.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=d.indexOf("=");v===-1&&(v=y);var x=v===y?0:4-v%4;return[v,x]}function t(d){var y=n(d),v=y[0],x=y[1];return(v+x)*3/4-x}function r(d,y,v){return(y+v)*3/4-v}function f(d){var y,v=n(d),x=v[0],l=v[1],_=new M(r(d,x,l)),s=0,w=l>0?x-4:x,b;for(b=0;b<w;b+=4)y=c[d.charCodeAt(b)]<<18|c[d.charCodeAt(b+1)]<<12|c[d.charCodeAt(b+2)]<<6|c[d.charCodeAt(b+3)],_[s++]=y>>16&255,_[s++]=y>>8&255,_[s++]=y&255;return l===2&&(y=c[d.charCodeAt(b)]<<2|c[d.charCodeAt(b+1)]>>4,_[s++]=y&255),l===1&&(y=c[d.charCodeAt(b)]<<10|c[d.charCodeAt(b+1)]<<4|c[d.charCodeAt(b+2)]>>2,_[s++]=y>>8&255,_[s++]=y&255),_}function o(d){return T[d>>18&63]+T[d>>12&63]+T[d>>6&63]+T[d&63]}function i(d,y,v){for(var x,l=[],_=y;_<v;_+=3)x=(d[_]<<16&16711680)+(d[_+1]<<8&65280)+(d[_+2]&255),l.push(o(x));return l.join("")}function p(d){for(var y,v=d.length,x=v%3,l=[],_=16383,s=0,w=v-x;s<w;s+=_)l.push(i(d,s,s+_>w?w:s+_));return x===1?(y=d[v-1],l.push(T[y>>2]+T[y<<4&63]+"==")):x===2&&(y=(d[v-2]<<8)+d[v-1],l.push(T[y>>10]+T[y>>4&63]+T[y<<2&63]+"=")),l.join("")}},{}],80:[function(g,ne,ae){function T(n,t,r,f,o){for(var i=o+1;f<=o;){var p=f+o>>>1,d=n[p],y=r!==void 0?r(d,t):d-t;y>=0?(i=p,o=p-1):f=p+1}return i}function c(n,t,r,f,o){for(var i=o+1;f<=o;){var p=f+o>>>1,d=n[p],y=r!==void 0?r(d,t):d-t;y>0?(i=p,o=p-1):f=p+1}return i}function M(n,t,r,f,o){for(var i=f-1;f<=o;){var p=f+o>>>1,d=n[p],y=r!==void 0?r(d,t):d-t;y<0?(i=p,f=p+1):o=p-1}return i}function A(n,t,r,f,o){for(var i=f-1;f<=o;){var p=f+o>>>1,d=n[p],y=r!==void 0?r(d,t):d-t;y<=0?(i=p,f=p+1):o=p-1}return i}function e(n,t,r,f,o){for(;f<=o;){var i=f+o>>>1,p=n[i],d=r!==void 0?r(p,t):p-t;if(d===0)return i;d<=0?f=i+1:o=i-1}return-1}function a(n,t,r,f,o,i){return typeof r=="function"?i(n,t,r,f===void 0?0:f|0,o===void 0?n.length-1:o|0):i(n,t,void 0,r===void 0?0:r|0,f===void 0?n.length-1:f|0)}ne.exports={ge:function(n,t,r,f,o){return a(n,t,r,f,o,T)},gt:function(n,t,r,f,o){return a(n,t,r,f,o,c)},lt:function(n,t,r,f,o){return a(n,t,r,f,o,M)},le:function(n,t,r,f,o){return a(n,t,r,f,o,A)},eq:function(n,t,r,f,o){return a(n,t,r,f,o,e)}}},{}],81:[function(g,ne,ae){var T=32;ae.INT_BITS=T,ae.INT_MAX=2147483647,ae.INT_MIN=-1<<T-1,ae.sign=function(A){return(A>0)-(A<0)},ae.abs=function(A){var e=A>>T-1;return(A^e)-e},ae.min=function(A,e){return e^(A^e)&-(A<e)},ae.max=function(A,e){return A^(A^e)&-(A<e)},ae.isPow2=function(A){return!(A&A-1)&&!!A},ae.log2=function(A){var e,a;return e=(A>65535)<<4,A>>>=e,a=(A>255)<<3,A>>>=a,e|=a,a=(A>15)<<2,A>>>=a,e|=a,a=(A>3)<<1,A>>>=a,e|=a,e|A>>1},ae.log10=function(A){return A>=1e9?9:A>=1e8?8:A>=1e7?7:A>=1e6?6:A>=1e5?5:A>=1e4?4:A>=1e3?3:A>=100?2:A>=10?1:0},ae.popCount=function(A){return A=A-(A>>>1&1431655765),A=(A&858993459)+(A>>>2&858993459),(A+(A>>>4)&252645135)*16843009>>>24};function c(A){var e=32;return A&=-A,A&&e--,A&65535&&(e-=16),A&16711935&&(e-=8),A&252645135&&(e-=4),A&858993459&&(e-=2),A&1431655765&&(e-=1),e}ae.countTrailingZeros=c,ae.nextPow2=function(A){return A+=A===0,--A,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A+1},ae.prevPow2=function(A){return A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A-(A>>>1)},ae.parity=function(A){return A^=A>>>16,A^=A>>>8,A^=A>>>4,A&=15,27030>>>A&1};var M=new Array(256);(function(A){for(var e=0;e<256;++e){var a=e,n=e,t=7;for(a>>>=1;a;a>>>=1)n<<=1,n|=a&1,--t;A[e]=n<<t&255}})(M),ae.reverse=function(A){return M[A&255]<<24|M[A>>>8&255]<<16|M[A>>>16&255]<<8|M[A>>>24&255]},ae.interleave2=function(A,e){return A&=65535,A=(A|A<<8)&16711935,A=(A|A<<4)&252645135,A=(A|A<<2)&858993459,A=(A|A<<1)&1431655765,e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,A|e<<1},ae.deinterleave2=function(A,e){return A=A>>>e&1431655765,A=(A|A>>>1)&858993459,A=(A|A>>>2)&252645135,A=(A|A>>>4)&16711935,A=(A|A>>>16)&65535,A<<16>>16},ae.interleave3=function(A,e,a){return A&=1023,A=(A|A<<16)&4278190335,A=(A|A<<8)&251719695,A=(A|A<<4)&3272356035,A=(A|A<<2)&1227133513,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,A|=e<<1,a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,A|a<<2},ae.deinterleave3=function(A,e){return A=A>>>e&1227133513,A=(A|A>>>2)&3272356035,A=(A|A>>>4)&251719695,A=(A|A>>>8)&4278190335,A=(A|A>>>16)&1023,A<<22>>22},ae.nextCombination=function(A){var e=A|A-1;return e+1|(~e&-~e)-1>>>c(A)+1}},{}],82:[function(g,ne,ae){var T=g("clamp");ne.exports=M;var c=1e20;function M(a,n){n||(n={});var t=n.cutoff==null?.25:n.cutoff,r=n.radius==null?8:n.radius,f=n.channel||0,o,i,p,d,y,v,x,l,_,s,w;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!n.width||!n.height)throw Error("For raw data width and height should be provided by options");o=n.width,i=n.height,d=a,n.stride?v=n.stride:v=Math.floor(a.length/o/i)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(l=a,x=l.getContext("2d"),o=l.width,i=l.height,_=x.getImageData(0,0,o,i),d=_.data,v=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(l=a.canvas,x=a,o=l.width,i=l.height,_=x.getImageData(0,0,o,i),d=_.data,v=4):window.ImageData&&a instanceof window.ImageData&&(_=a,o=a.width,i=a.height,d=_.data,v=4);if(p=Math.max(o,i),window.Uint8ClampedArray&&d instanceof window.Uint8ClampedArray||window.Uint8Array&&d instanceof window.Uint8Array)for(y=d,d=Array(o*i),s=0,w=y.length;s<w;s++)d[s]=y[s*v+f]/255;else if(v!==1)throw Error("Raw data can have only 1 value per pixel");var b=Array(o*i),h=Array(o*i),m=Array(p),u=Array(p),L=Array(p+1),S=Array(p);for(s=0,w=o*i;s<w;s++){var k=d[s];b[s]=k===1?0:k===0?c:Math.pow(Math.max(0,.5-k),2),h[s]=k===1?c:k===0?0:Math.pow(Math.max(0,k-.5),2)}A(b,o,i,m,u,S,L),A(h,o,i,m,u,S,L);var P=window.Float32Array?new Float32Array(o*i):new Array(o*i);for(s=0,w=o*i;s<w;s++)P[s]=T(1-((b[s]-h[s])/r+t),0,1);return P}function A(a,n,t,r,f,o,i){for(var p=0;p<n;p++){for(var d=0;d<t;d++)r[d]=a[d*n+p];for(e(r,f,o,i,t),d=0;d<t;d++)a[d*n+p]=f[d]}for(d=0;d<t;d++){for(p=0;p<n;p++)r[p]=a[d*n+p];for(e(r,f,o,i,n),p=0;p<n;p++)a[d*n+p]=Math.sqrt(f[p])}}function e(a,n,t,r,f){t[0]=0,r[0]=-c,r[1]=+c;for(var o=1,i=0;o<f;o++){for(var p=(a[o]+o*o-(a[t[i]]+t[i]*t[i]))/(2*o-2*t[i]);p<=r[i];)i--,p=(a[o]+o*o-(a[t[i]]+t[i]*t[i]))/(2*o-2*t[i]);i++,t[i]=o,r[i]=p,r[i+1]=+c}for(o=0,i=0;o<f;o++){for(;r[i+1]<o;)i++;n[o]=(o-t[i])*(o-t[i])+a[t[i]]}}},{clamp:86}],83:[function(g,ne,ae){},{}],84:[function(g,ne,ae){var T=typeof Reflect=="object"?Reflect:null,c=T&&typeof T.apply=="function"?T.apply:function(s,w,b){return Function.prototype.apply.call(s,w,b)},M;T&&typeof T.ownKeys=="function"?M=T.ownKeys:Object.getOwnPropertySymbols?M=function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:M=function(s){return Object.getOwnPropertyNames(s)};function A(_){console&&console.warn&&console.warn(_)}var e=Number.isNaN||function(s){return s!==s};function a(){a.init.call(this)}ne.exports=a,ne.exports.once=l,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var n=10;function t(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(_){if(typeof _!="number"||_<0||e(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");n=_}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(s){if(typeof s!="number"||s<0||e(s))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+s+".");return this._maxListeners=s,this};function r(_){return _._maxListeners===void 0?a.defaultMaxListeners:_._maxListeners}a.prototype.getMaxListeners=function(){return r(this)},a.prototype.emit=function(s){for(var w=[],b=1;b<arguments.length;b++)w.push(arguments[b]);var h=s==="error",m=this._events;if(m!==void 0)h=h&&m.error===void 0;else if(!h)return!1;if(h){var u;if(w.length>0&&(u=w[0]),u instanceof Error)throw u;var L=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw L.context=u,L}var S=m[s];if(S===void 0)return!1;if(typeof S=="function")c(S,this,w);else for(var k=S.length,P=y(S,k),b=0;b<k;++b)c(P[b],this,w);return!0};function f(_,s,w,b){var h,m,u;if(t(w),m=_._events,m===void 0?(m=_._events=Object.create(null),_._eventsCount=0):(m.newListener!==void 0&&(_.emit("newListener",s,w.listener?w.listener:w),m=_._events),u=m[s]),u===void 0)u=m[s]=w,++_._eventsCount;else if(typeof u=="function"?u=m[s]=b?[w,u]:[u,w]:b?u.unshift(w):u.push(w),h=r(_),h>0&&u.length>h&&!u.warned){u.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(s)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=_,L.type=s,L.count=u.length,A(L)}return _}a.prototype.addListener=function(s,w){return f(this,s,w,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(s,w){return f(this,s,w,!0)};function o(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(_,s,w){var b={fired:!1,wrapFn:void 0,target:_,type:s,listener:w},h=o.bind(b);return h.listener=w,b.wrapFn=h,h}a.prototype.once=function(s,w){return t(w),this.on(s,i(this,s,w)),this},a.prototype.prependOnceListener=function(s,w){return t(w),this.prependListener(s,i(this,s,w)),this},a.prototype.removeListener=function(s,w){var b,h,m,u,L;if(t(w),h=this._events,h===void 0)return this;if(b=h[s],b===void 0)return this;if(b===w||b.listener===w)--this._eventsCount==0?this._events=Object.create(null):(delete h[s],h.removeListener&&this.emit("removeListener",s,b.listener||w));else if(typeof b!="function"){for(m=-1,u=b.length-1;u>=0;u--)if(b[u]===w||b[u].listener===w){L=b[u].listener,m=u;break}if(m<0)return this;m===0?b.shift():v(b,m),b.length===1&&(h[s]=b[0]),h.removeListener!==void 0&&this.emit("removeListener",s,L||w)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(s){var w,b,h;if(b=this._events,b===void 0)return this;if(b.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):b[s]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete b[s]),this;if(arguments.length===0){var m=Object.keys(b),u;for(h=0;h<m.length;++h)u=m[h],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(w=b[s],typeof w=="function")this.removeListener(s,w);else if(w!==void 0)for(h=w.length-1;h>=0;h--)this.removeListener(s,w[h]);return this};function p(_,s,w){var b=_._events;if(b===void 0)return[];var h=b[s];return h===void 0?[]:typeof h=="function"?w?[h.listener||h]:[h]:w?x(h):y(h,h.length)}a.prototype.listeners=function(s){return p(this,s,!0)},a.prototype.rawListeners=function(s){return p(this,s,!1)},a.listenerCount=function(_,s){return typeof _.listenerCount=="function"?_.listenerCount(s):d.call(_,s)},a.prototype.listenerCount=d;function d(_){var s=this._events;if(s!==void 0){var w=s[_];if(typeof w=="function")return 1;if(w!==void 0)return w.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?M(this._events):[]};function y(_,s){for(var w=new Array(s),b=0;b<s;++b)w[b]=_[b];return w}function v(_,s){for(;s+1<_.length;s++)_[s]=_[s+1];_.pop()}function x(_){for(var s=new Array(_.length),w=0;w<s.length;++w)s[w]=_[w].listener||_[w];return s}function l(_,s){return new Promise(function(w,b){function h(){m!==void 0&&_.removeListener("error",m),w([].slice.call(arguments))}var m;s!=="error"&&(m=function(L){_.removeListener(s,h),b(L)},_.once("error",m)),_.once(s,h)})}},{}],85:[function(g,ne,ae){(function(T){(function(){var c=g("base64-js"),M=g("ieee754");ae.Buffer=n,ae.SlowBuffer=x,ae.INSPECT_MAX_BYTES=50;var A=2147483647;ae.kMaxLength=A,n.TYPED_ARRAY_SUPPORT=e(),!n.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function e(){try{var ee=new Uint8Array(1);return ee.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ee.foo()===42}catch{return!1}}Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(!!n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(!!n.isBuffer(this))return this.byteOffset}});function a(ee){if(ee>A)throw new RangeError('The value "'+ee+'" is invalid for option "size"');var ie=new Uint8Array(ee);return ie.__proto__=n.prototype,ie}function n(ee,ie,le){if(typeof ee=="number"){if(typeof ie=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return o(ee)}return t(ee,ie,le)}typeof Symbol!="undefined"&&Symbol.species!=null&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192;function t(ee,ie,le){if(typeof ee=="string")return i(ee,ie);if(ArrayBuffer.isView(ee))return p(ee);if(ee==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ee);if(X(ee,ArrayBuffer)||ee&&X(ee.buffer,ArrayBuffer))return d(ee,ie,le);if(typeof ee=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ye=ee.valueOf&&ee.valueOf();if(ye!=null&&ye!==ee)return n.from(ye,ie,le);var ue=y(ee);if(ue)return ue;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ee[Symbol.toPrimitive]=="function")return n.from(ee[Symbol.toPrimitive]("string"),ie,le);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ee)}n.from=function(ee,ie,le){return t(ee,ie,le)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array;function r(ee){if(typeof ee!="number")throw new TypeError('"size" argument must be of type number');if(ee<0)throw new RangeError('The value "'+ee+'" is invalid for option "size"')}function f(ee,ie,le){return r(ee),ee<=0?a(ee):ie!==void 0?typeof le=="string"?a(ee).fill(ie,le):a(ee).fill(ie):a(ee)}n.alloc=function(ee,ie,le){return f(ee,ie,le)};function o(ee){return r(ee),a(ee<0?0:v(ee)|0)}n.allocUnsafe=function(ee){return o(ee)},n.allocUnsafeSlow=function(ee){return o(ee)};function i(ee,ie){if((typeof ie!="string"||ie==="")&&(ie="utf8"),!n.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);var le=l(ee,ie)|0,ye=a(le),ue=ye.write(ee,ie);return ue!==le&&(ye=ye.slice(0,ue)),ye}function p(ee){for(var ie=ee.length<0?0:v(ee.length)|0,le=a(ie),ye=0;ye<ie;ye+=1)le[ye]=ee[ye]&255;return le}function d(ee,ie,le){if(ie<0||ee.byteLength<ie)throw new RangeError('"offset" is outside of buffer bounds');if(ee.byteLength<ie+(le||0))throw new RangeError('"length" is outside of buffer bounds');var ye;return ie===void 0&&le===void 0?ye=new Uint8Array(ee):le===void 0?ye=new Uint8Array(ee,ie):ye=new Uint8Array(ee,ie,le),ye.__proto__=n.prototype,ye}function y(ee){if(n.isBuffer(ee)){var ie=v(ee.length)|0,le=a(ie);return le.length===0||ee.copy(le,0,0,ie),le}if(ee.length!==void 0)return typeof ee.length!="number"||te(ee.length)?a(0):p(ee);if(ee.type==="Buffer"&&Array.isArray(ee.data))return p(ee.data)}function v(ee){if(ee>=A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A.toString(16)+" bytes");return ee|0}function x(ee){return+ee!=ee&&(ee=0),n.alloc(+ee)}n.isBuffer=function(ie){return ie!=null&&ie._isBuffer===!0&&ie!==n.prototype},n.compare=function(ie,le){if(X(ie,Uint8Array)&&(ie=n.from(ie,ie.offset,ie.byteLength)),X(le,Uint8Array)&&(le=n.from(le,le.offset,le.byteLength)),!n.isBuffer(ie)||!n.isBuffer(le))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ie===le)return 0;for(var ye=ie.length,ue=le.length,pe=0,ge=Math.min(ye,ue);pe<ge;++pe)if(ie[pe]!==le[pe]){ye=ie[pe],ue=le[pe];break}return ye<ue?-1:ue<ye?1:0},n.isEncoding=function(ie){switch(String(ie).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(ie,le){if(!Array.isArray(ie))throw new TypeError('"list" argument must be an Array of Buffers');if(ie.length===0)return n.alloc(0);var ye;if(le===void 0)for(le=0,ye=0;ye<ie.length;++ye)le+=ie[ye].length;var ue=n.allocUnsafe(le),pe=0;for(ye=0;ye<ie.length;++ye){var ge=ie[ye];if(X(ge,Uint8Array)&&(ge=n.from(ge)),!n.isBuffer(ge))throw new TypeError('"list" argument must be an Array of Buffers');ge.copy(ue,pe),pe+=ge.length}return ue};function l(ee,ie){if(n.isBuffer(ee))return ee.length;if(ArrayBuffer.isView(ee)||X(ee,ArrayBuffer))return ee.byteLength;if(typeof ee!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ee);var le=ee.length,ye=arguments.length>2&&arguments[2]===!0;if(!ye&&le===0)return 0;for(var ue=!1;;)switch(ie){case"ascii":case"latin1":case"binary":return le;case"utf8":case"utf-8":return N(ee).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le*2;case"hex":return le>>>1;case"base64":return Q(ee).length;default:if(ue)return ye?-1:N(ee).length;ie=(""+ie).toLowerCase(),ue=!0}}n.byteLength=l;function _(ee,ie,le){var ye=!1;if((ie===void 0||ie<0)&&(ie=0),ie>this.length||((le===void 0||le>this.length)&&(le=this.length),le<=0)||(le>>>=0,ie>>>=0,le<=ie))return"";for(ee||(ee="utf8");;)switch(ee){case"hex":return F(this,ie,le);case"utf8":case"utf-8":return z(this,ie,le);case"ascii":return R(this,ie,le);case"latin1":case"binary":return B(this,ie,le);case"base64":return P(this,ie,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,ie,le);default:if(ye)throw new TypeError("Unknown encoding: "+ee);ee=(ee+"").toLowerCase(),ye=!0}}n.prototype._isBuffer=!0;function s(ee,ie,le){var ye=ee[ie];ee[ie]=ee[le],ee[le]=ye}n.prototype.swap16=function(){var ie=this.length;if(ie%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var le=0;le<ie;le+=2)s(this,le,le+1);return this},n.prototype.swap32=function(){var ie=this.length;if(ie%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var le=0;le<ie;le+=4)s(this,le,le+3),s(this,le+1,le+2);return this},n.prototype.swap64=function(){var ie=this.length;if(ie%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var le=0;le<ie;le+=8)s(this,le,le+7),s(this,le+1,le+6),s(this,le+2,le+5),s(this,le+3,le+4);return this},n.prototype.toString=function(){var ie=this.length;return ie===0?"":arguments.length===0?z(this,0,ie):_.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(ie){if(!n.isBuffer(ie))throw new TypeError("Argument must be a Buffer");return this===ie?!0:n.compare(this,ie)===0},n.prototype.inspect=function(){var ie="",le=ae.INSPECT_MAX_BYTES;return ie=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(ie+=" ... "),"<Buffer "+ie+">"},n.prototype.compare=function(ie,le,ye,ue,pe){if(X(ie,Uint8Array)&&(ie=n.from(ie,ie.offset,ie.byteLength)),!n.isBuffer(ie))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ie);if(le===void 0&&(le=0),ye===void 0&&(ye=ie?ie.length:0),ue===void 0&&(ue=0),pe===void 0&&(pe=this.length),le<0||ye>ie.length||ue<0||pe>this.length)throw new RangeError("out of range index");if(ue>=pe&&le>=ye)return 0;if(ue>=pe)return-1;if(le>=ye)return 1;if(le>>>=0,ye>>>=0,ue>>>=0,pe>>>=0,this===ie)return 0;for(var ge=pe-ue,Te=ye-le,_e=Math.min(ge,Te),De=this.slice(ue,pe),Oe=ie.slice(le,ye),Ue=0;Ue<_e;++Ue)if(De[Ue]!==Oe[Ue]){ge=De[Ue],Te=Oe[Ue];break}return ge<Te?-1:Te<ge?1:0};function w(ee,ie,le,ye,ue){if(ee.length===0)return-1;if(typeof le=="string"?(ye=le,le=0):le>2147483647?le=2147483647:le<-2147483648&&(le=-2147483648),le=+le,te(le)&&(le=ue?0:ee.length-1),le<0&&(le=ee.length+le),le>=ee.length){if(ue)return-1;le=ee.length-1}else if(le<0)if(ue)le=0;else return-1;if(typeof ie=="string"&&(ie=n.from(ie,ye)),n.isBuffer(ie))return ie.length===0?-1:b(ee,ie,le,ye,ue);if(typeof ie=="number")return ie=ie&255,typeof Uint8Array.prototype.indexOf=="function"?ue?Uint8Array.prototype.indexOf.call(ee,ie,le):Uint8Array.prototype.lastIndexOf.call(ee,ie,le):b(ee,[ie],le,ye,ue);throw new TypeError("val must be string, number or Buffer")}function b(ee,ie,le,ye,ue){var pe=1,ge=ee.length,Te=ie.length;if(ye!==void 0&&(ye=String(ye).toLowerCase(),ye==="ucs2"||ye==="ucs-2"||ye==="utf16le"||ye==="utf-16le")){if(ee.length<2||ie.length<2)return-1;pe=2,ge/=2,Te/=2,le/=2}function _e(Pe,Ve){return pe===1?Pe[Ve]:Pe.readUInt16BE(Ve*pe)}var De;if(ue){var Oe=-1;for(De=le;De<ge;De++)if(_e(ee,De)===_e(ie,Oe===-1?0:De-Oe)){if(Oe===-1&&(Oe=De),De-Oe+1===Te)return Oe*pe}else Oe!==-1&&(De-=De-Oe),Oe=-1}else for(le+Te>ge&&(le=ge-Te),De=le;De>=0;De--){for(var Ue=!0,xe=0;xe<Te;xe++)if(_e(ee,De+xe)!==_e(ie,xe)){Ue=!1;break}if(Ue)return De}return-1}n.prototype.includes=function(ie,le,ye){return this.indexOf(ie,le,ye)!==-1},n.prototype.indexOf=function(ie,le,ye){return w(this,ie,le,ye,!0)},n.prototype.lastIndexOf=function(ie,le,ye){return w(this,ie,le,ye,!1)};function h(ee,ie,le,ye){le=Number(le)||0;var ue=ee.length-le;ye?(ye=Number(ye),ye>ue&&(ye=ue)):ye=ue;var pe=ie.length;ye>pe/2&&(ye=pe/2);for(var ge=0;ge<ye;++ge){var Te=parseInt(ie.substr(ge*2,2),16);if(te(Te))return ge;ee[le+ge]=Te}return ge}function m(ee,ie,le,ye){return W(N(ie,ee.length-le),ee,le,ye)}function u(ee,ie,le,ye){return W(U(ie),ee,le,ye)}function L(ee,ie,le,ye){return u(ee,ie,le,ye)}function S(ee,ie,le,ye){return W(Q(ie),ee,le,ye)}function k(ee,ie,le,ye){return W(q(ie,ee.length-le),ee,le,ye)}n.prototype.write=function(ie,le,ye,ue){if(le===void 0)ue="utf8",ye=this.length,le=0;else if(ye===void 0&&typeof le=="string")ue=le,ye=this.length,le=0;else if(isFinite(le))le=le>>>0,isFinite(ye)?(ye=ye>>>0,ue===void 0&&(ue="utf8")):(ue=ye,ye=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var pe=this.length-le;if((ye===void 0||ye>pe)&&(ye=pe),ie.length>0&&(ye<0||le<0)||le>this.length)throw new RangeError("Attempt to write outside buffer bounds");ue||(ue="utf8");for(var ge=!1;;)switch(ue){case"hex":return h(this,ie,le,ye);case"utf8":case"utf-8":return m(this,ie,le,ye);case"ascii":return u(this,ie,le,ye);case"latin1":case"binary":return L(this,ie,le,ye);case"base64":return S(this,ie,le,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,ie,le,ye);default:if(ge)throw new TypeError("Unknown encoding: "+ue);ue=(""+ue).toLowerCase(),ge=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(ee,ie,le){return ie===0&&le===ee.length?c.fromByteArray(ee):c.fromByteArray(ee.slice(ie,le))}function z(ee,ie,le){le=Math.min(ee.length,le);for(var ye=[],ue=ie;ue<le;){var pe=ee[ue],ge=null,Te=pe>239?4:pe>223?3:pe>191?2:1;if(ue+Te<=le){var _e,De,Oe,Ue;switch(Te){case 1:pe<128&&(ge=pe);break;case 2:_e=ee[ue+1],(_e&192)==128&&(Ue=(pe&31)<<6|_e&63,Ue>127&&(ge=Ue));break;case 3:_e=ee[ue+1],De=ee[ue+2],(_e&192)==128&&(De&192)==128&&(Ue=(pe&15)<<12|(_e&63)<<6|De&63,Ue>2047&&(Ue<55296||Ue>57343)&&(ge=Ue));break;case 4:_e=ee[ue+1],De=ee[ue+2],Oe=ee[ue+3],(_e&192)==128&&(De&192)==128&&(Oe&192)==128&&(Ue=(pe&15)<<18|(_e&63)<<12|(De&63)<<6|Oe&63,Ue>65535&&Ue<1114112&&(ge=Ue))}}ge===null?(ge=65533,Te=1):ge>65535&&(ge-=65536,ye.push(ge>>>10&1023|55296),ge=56320|ge&1023),ye.push(ge),ue+=Te}return D(ye)}var I=4096;function D(ee){var ie=ee.length;if(ie<=I)return String.fromCharCode.apply(String,ee);for(var le="",ye=0;ye<ie;)le+=String.fromCharCode.apply(String,ee.slice(ye,ye+=I));return le}function R(ee,ie,le){var ye="";le=Math.min(ee.length,le);for(var ue=ie;ue<le;++ue)ye+=String.fromCharCode(ee[ue]&127);return ye}function B(ee,ie,le){var ye="";le=Math.min(ee.length,le);for(var ue=ie;ue<le;++ue)ye+=String.fromCharCode(ee[ue]);return ye}function F(ee,ie,le){var ye=ee.length;(!ie||ie<0)&&(ie=0),(!le||le<0||le>ye)&&(le=ye);for(var ue="",pe=ie;pe<le;++pe)ue+=oe(ee[pe]);return ue}function V(ee,ie,le){for(var ye=ee.slice(ie,le),ue="",pe=0;pe<ye.length;pe+=2)ue+=String.fromCharCode(ye[pe]+ye[pe+1]*256);return ue}n.prototype.slice=function(ie,le){var ye=this.length;ie=~~ie,le=le===void 0?ye:~~le,ie<0?(ie+=ye,ie<0&&(ie=0)):ie>ye&&(ie=ye),le<0?(le+=ye,le<0&&(le=0)):le>ye&&(le=ye),le<ie&&(le=ie);var ue=this.subarray(ie,le);return ue.__proto__=n.prototype,ue};function Y(ee,ie,le){if(ee%1!=0||ee<0)throw new RangeError("offset is not uint");if(ee+ie>le)throw new RangeError("Trying to access beyond buffer length")}n.prototype.readUIntLE=function(ie,le,ye){ie=ie>>>0,le=le>>>0,ye||Y(ie,le,this.length);for(var ue=this[ie],pe=1,ge=0;++ge<le&&(pe*=256);)ue+=this[ie+ge]*pe;return ue},n.prototype.readUIntBE=function(ie,le,ye){ie=ie>>>0,le=le>>>0,ye||Y(ie,le,this.length);for(var ue=this[ie+--le],pe=1;le>0&&(pe*=256);)ue+=this[ie+--le]*pe;return ue},n.prototype.readUInt8=function(ie,le){return ie=ie>>>0,le||Y(ie,1,this.length),this[ie]},n.prototype.readUInt16LE=function(ie,le){return ie=ie>>>0,le||Y(ie,2,this.length),this[ie]|this[ie+1]<<8},n.prototype.readUInt16BE=function(ie,le){return ie=ie>>>0,le||Y(ie,2,this.length),this[ie]<<8|this[ie+1]},n.prototype.readUInt32LE=function(ie,le){return ie=ie>>>0,le||Y(ie,4,this.length),(this[ie]|this[ie+1]<<8|this[ie+2]<<16)+this[ie+3]*16777216},n.prototype.readUInt32BE=function(ie,le){return ie=ie>>>0,le||Y(ie,4,this.length),this[ie]*16777216+(this[ie+1]<<16|this[ie+2]<<8|this[ie+3])},n.prototype.readIntLE=function(ie,le,ye){ie=ie>>>0,le=le>>>0,ye||Y(ie,le,this.length);for(var ue=this[ie],pe=1,ge=0;++ge<le&&(pe*=256);)ue+=this[ie+ge]*pe;return pe*=128,ue>=pe&&(ue-=Math.pow(2,8*le)),ue},n.prototype.readIntBE=function(ie,le,ye){ie=ie>>>0,le=le>>>0,ye||Y(ie,le,this.length);for(var ue=le,pe=1,ge=this[ie+--ue];ue>0&&(pe*=256);)ge+=this[ie+--ue]*pe;return pe*=128,ge>=pe&&(ge-=Math.pow(2,8*le)),ge},n.prototype.readInt8=function(ie,le){return ie=ie>>>0,le||Y(ie,1,this.length),this[ie]&128?(255-this[ie]+1)*-1:this[ie]},n.prototype.readInt16LE=function(ie,le){ie=ie>>>0,le||Y(ie,2,this.length);var ye=this[ie]|this[ie+1]<<8;return ye&32768?ye|4294901760:ye},n.prototype.readInt16BE=function(ie,le){ie=ie>>>0,le||Y(ie,2,this.length);var ye=this[ie+1]|this[ie]<<8;return ye&32768?ye|4294901760:ye},n.prototype.readInt32LE=function(ie,le){return ie=ie>>>0,le||Y(ie,4,this.length),this[ie]|this[ie+1]<<8|this[ie+2]<<16|this[ie+3]<<24},n.prototype.readInt32BE=function(ie,le){return ie=ie>>>0,le||Y(ie,4,this.length),this[ie]<<24|this[ie+1]<<16|this[ie+2]<<8|this[ie+3]},n.prototype.readFloatLE=function(ie,le){return ie=ie>>>0,le||Y(ie,4,this.length),M.read(this,ie,!0,23,4)},n.prototype.readFloatBE=function(ie,le){return ie=ie>>>0,le||Y(ie,4,this.length),M.read(this,ie,!1,23,4)},n.prototype.readDoubleLE=function(ie,le){return ie=ie>>>0,le||Y(ie,8,this.length),M.read(this,ie,!0,52,8)},n.prototype.readDoubleBE=function(ie,le){return ie=ie>>>0,le||Y(ie,8,this.length),M.read(this,ie,!1,52,8)};function K(ee,ie,le,ye,ue,pe){if(!n.isBuffer(ee))throw new TypeError('"buffer" argument must be a Buffer instance');if(ie>ue||ie<pe)throw new RangeError('"value" argument is out of bounds');if(le+ye>ee.length)throw new RangeError("Index out of range")}n.prototype.writeUIntLE=function(ie,le,ye,ue){if(ie=+ie,le=le>>>0,ye=ye>>>0,!ue){var pe=Math.pow(2,8*ye)-1;K(this,ie,le,ye,pe,0)}var ge=1,Te=0;for(this[le]=ie&255;++Te<ye&&(ge*=256);)this[le+Te]=ie/ge&255;return le+ye},n.prototype.writeUIntBE=function(ie,le,ye,ue){if(ie=+ie,le=le>>>0,ye=ye>>>0,!ue){var pe=Math.pow(2,8*ye)-1;K(this,ie,le,ye,pe,0)}var ge=ye-1,Te=1;for(this[le+ge]=ie&255;--ge>=0&&(Te*=256);)this[le+ge]=ie/Te&255;return le+ye},n.prototype.writeUInt8=function(ie,le,ye){return ie=+ie,le=le>>>0,ye||K(this,ie,le,1,255,0),this[le]=ie&255,le+1},n.prototype.writeUInt16LE=function(ie,le,ye){return ie=+ie,le=le>>>0,ye||K(this,ie,le,2,65535,0),this[le]=ie&255,this[le+1]=ie>>>8,le+2},n.prototype.writeUInt16BE=function(ie,le,ye){return ie=+ie,le=le>>>0,ye||K(this,ie,le,2,65535,0),this[le]=ie>>>8,this[le+1]=ie&255,le+2},n.prototype.writeUInt32LE=function(ie,le,ye){return ie=+ie,le=le>>>0,ye||K(this,ie,le,4,4294967295,0),this[le+3]=ie>>>24,this[le+2]=ie>>>16,this[le+1]=ie>>>8,this[le]=ie&255,le+4},n.prototype.writeUInt32BE=function(ie,le,ye){return ie=+ie,le=le>>>0,ye||K(this,ie,le,4,4294967295,0),this[le]=ie>>>24,this[le+1]=ie>>>16,this[le+2]=ie>>>8,this[le+3]=ie&255,le+4},n.prototype.writeIntLE=function(ie,le,ye,ue){if(ie=+ie,le=le>>>0,!ue){var pe=Math.pow(2,8*ye-1);K(this,ie,le,ye,pe-1,-pe)}var ge=0,Te=1,_e=0;for(this[le]=ie&255;++ge<ye&&(Te*=256);)ie<0&&_e===0&&this[le+ge-1]!==0&&(_e=1),this[le+ge]=(ie/Te>>0)-_e&255;return le+ye},n.prototype.writeIntBE=function(ie,le,ye,ue){if(ie=+ie,le=le>>>0,!ue){var pe=Math.pow(2,8*ye-1);K(this,ie,le,ye,pe-1,-pe)}var ge=ye-1,Te=1,_e=0;for(this[le+ge]=ie&255;--ge>=0&&(Te*=256);)ie<0&&_e===0&&this[le+ge+1]!==0&&(_e=1),this[le+ge]=(ie/Te>>0)-_e&255;return le+ye},n.prototype.writeInt8=function(ie,le,ye){return ie=+ie,le=le>>>0,ye||K(this,ie,le,1,127,-128),ie<0&&(ie=255+ie+1),this[le]=ie&255,le+1},n.prototype.writeInt16LE=function(ie,le,ye){return ie=+ie,le=le>>>0,ye||K(this,ie,le,2,32767,-32768),this[le]=ie&255,this[le+1]=ie>>>8,le+2},n.prototype.writeInt16BE=function(ie,le,ye){return ie=+ie,le=le>>>0,ye||K(this,ie,le,2,32767,-32768),this[le]=ie>>>8,this[le+1]=ie&255,le+2},n.prototype.writeInt32LE=function(ie,le,ye){return ie=+ie,le=le>>>0,ye||K(this,ie,le,4,2147483647,-2147483648),this[le]=ie&255,this[le+1]=ie>>>8,this[le+2]=ie>>>16,this[le+3]=ie>>>24,le+4},n.prototype.writeInt32BE=function(ie,le,ye){return ie=+ie,le=le>>>0,ye||K(this,ie,le,4,2147483647,-2147483648),ie<0&&(ie=4294967295+ie+1),this[le]=ie>>>24,this[le+1]=ie>>>16,this[le+2]=ie>>>8,this[le+3]=ie&255,le+4};function J(ee,ie,le,ye,ue,pe){if(le+ye>ee.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("Index out of range")}function G(ee,ie,le,ye,ue){return ie=+ie,le=le>>>0,ue||J(ee,ie,le,4),M.write(ee,ie,le,ye,23,4),le+4}n.prototype.writeFloatLE=function(ie,le,ye){return G(this,ie,le,!0,ye)},n.prototype.writeFloatBE=function(ie,le,ye){return G(this,ie,le,!1,ye)};function Z(ee,ie,le,ye,ue){return ie=+ie,le=le>>>0,ue||J(ee,ie,le,8),M.write(ee,ie,le,ye,52,8),le+8}n.prototype.writeDoubleLE=function(ie,le,ye){return Z(this,ie,le,!0,ye)},n.prototype.writeDoubleBE=function(ie,le,ye){return Z(this,ie,le,!1,ye)},n.prototype.copy=function(ie,le,ye,ue){if(!n.isBuffer(ie))throw new TypeError("argument should be a Buffer");if(ye||(ye=0),!ue&&ue!==0&&(ue=this.length),le>=ie.length&&(le=ie.length),le||(le=0),ue>0&&ue<ye&&(ue=ye),ue===ye||ie.length===0||this.length===0)return 0;if(le<0)throw new RangeError("targetStart out of bounds");if(ye<0||ye>=this.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("sourceEnd out of bounds");ue>this.length&&(ue=this.length),ie.length-le<ue-ye&&(ue=ie.length-le+ye);var pe=ue-ye;if(this===ie&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(le,ye,ue);else if(this===ie&&ye<le&&le<ue)for(var ge=pe-1;ge>=0;--ge)ie[ge+le]=this[ge+ye];else Uint8Array.prototype.set.call(ie,this.subarray(ye,ue),le);return pe},n.prototype.fill=function(ie,le,ye,ue){if(typeof ie=="string"){if(typeof le=="string"?(ue=le,le=0,ye=this.length):typeof ye=="string"&&(ue=ye,ye=this.length),ue!==void 0&&typeof ue!="string")throw new TypeError("encoding must be a string");if(typeof ue=="string"&&!n.isEncoding(ue))throw new TypeError("Unknown encoding: "+ue);if(ie.length===1){var pe=ie.charCodeAt(0);(ue==="utf8"&&pe<128||ue==="latin1")&&(ie=pe)}}else typeof ie=="number"&&(ie=ie&255);if(le<0||this.length<le||this.length<ye)throw new RangeError("Out of range index");if(ye<=le)return this;le=le>>>0,ye=ye===void 0?this.length:ye>>>0,ie||(ie=0);var ge;if(typeof ie=="number")for(ge=le;ge<ye;++ge)this[ge]=ie;else{var Te=n.isBuffer(ie)?ie:n.from(ie,ue),_e=Te.length;if(_e===0)throw new TypeError('The value "'+ie+'" is invalid for argument "value"');for(ge=0;ge<ye-le;++ge)this[ge+le]=Te[ge%_e]}return this};var re=/[^+/0-9A-Za-z-_]/g;function se(ee){if(ee=ee.split("=")[0],ee=ee.trim().replace(re,""),ee.length<2)return"";for(;ee.length%4!=0;)ee=ee+"=";return ee}function oe(ee){return ee<16?"0"+ee.toString(16):ee.toString(16)}function N(ee,ie){ie=ie||1/0;for(var le,ye=ee.length,ue=null,pe=[],ge=0;ge<ye;++ge){if(le=ee.charCodeAt(ge),le>55295&&le<57344){if(!ue){if(le>56319){(ie-=3)>-1&&pe.push(239,191,189);continue}else if(ge+1===ye){(ie-=3)>-1&&pe.push(239,191,189);continue}ue=le;continue}if(le<56320){(ie-=3)>-1&&pe.push(239,191,189),ue=le;continue}le=(ue-55296<<10|le-56320)+65536}else ue&&(ie-=3)>-1&&pe.push(239,191,189);if(ue=null,le<128){if((ie-=1)<0)break;pe.push(le)}else if(le<2048){if((ie-=2)<0)break;pe.push(le>>6|192,le&63|128)}else if(le<65536){if((ie-=3)<0)break;pe.push(le>>12|224,le>>6&63|128,le&63|128)}else if(le<1114112){if((ie-=4)<0)break;pe.push(le>>18|240,le>>12&63|128,le>>6&63|128,le&63|128)}else throw new Error("Invalid code point")}return pe}function U(ee){for(var ie=[],le=0;le<ee.length;++le)ie.push(ee.charCodeAt(le)&255);return ie}function q(ee,ie){for(var le,ye,ue,pe=[],ge=0;ge<ee.length&&!((ie-=2)<0);++ge)le=ee.charCodeAt(ge),ye=le>>8,ue=le%256,pe.push(ue),pe.push(ye);return pe}function Q(ee){return c.toByteArray(se(ee))}function W(ee,ie,le,ye){for(var ue=0;ue<ye&&!(ue+le>=ie.length||ue>=ee.length);++ue)ie[ue+le]=ee[ue];return ue}function X(ee,ie){return ee instanceof ie||ee!=null&&ee.constructor!=null&&ee.constructor.name!=null&&ee.constructor.name===ie.name}function te(ee){return ee!==ee}}).call(this)}).call(this,g("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(g,ne,ae){ne.exports=T;function T(c,M,A){return M<A?c<M?M:c>A?A:c:c<A?A:c>M?M:c}},{}],87:[function(g,ne,ae){var T=g("clamp");ne.exports=c,ne.exports.to=c,ne.exports.from=M;function c(A,e){e==null&&(e=!0);var a=A[0],n=A[1],t=A[2],r=A[3];r==null&&(r=e?1:255),e&&(a*=255,n*=255,t*=255,r*=255),a=T(a,0,255)&255,n=T(n,0,255)&255,t=T(t,0,255)&255,r=T(r,0,255)&255;var f=a*16777216+(n<<16)+(t<<8)+r;return f}function M(A,e){A=+A;var a=A>>>24,n=(A&16711680)>>>16,t=(A&65280)>>>8,r=A&255;return e===!1?[a,n,t,r]:[a/255,n/255,t/255,r/255]}},{clamp:86}],88:[function(g,ne,ae){ne.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(g,ne,ae){var T=g("color-rgba"),c=g("clamp"),M=g("dtype");ne.exports=function(a,n){(n==="float"||!n)&&(n="array"),n==="uint"&&(n="uint8"),n==="uint_clamped"&&(n="uint8_clamped");var t=M(n),r=new t(4),f=n!=="uint8"&&n!=="uint8_clamped";return(!a.length||typeof a=="string")&&(a=T(a),a[0]/=255,a[1]/=255,a[2]/=255),A(a)?(r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3]!=null?a[3]:255,f&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(f?(r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3]!=null?a[3]:1):(r[0]=c(Math.floor(a[0]*255),0,255),r[1]=c(Math.floor(a[1]*255),0,255),r[2]=c(Math.floor(a[2]*255),0,255),r[3]=a[3]==null?255:c(Math.floor(a[3]*255),0,255)),r)};function A(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(g,ne,ae){(function(T){(function(){var c=g("color-name"),M=g("is-plain-obj"),A=g("defined");ne.exports=a;var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function a(n){var t,r=[],f=1,o;if(typeof n=="string")if(c[n])r=c[n].slice(),o="rgb";else if(n==="transparent")f=0,o="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var i=n.slice(1),p=i.length,d=p<=4;f=1,d?(r=[parseInt(i[0]+i[0],16),parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16)],p===4&&(f=parseInt(i[3]+i[3],16)/255)):(r=[parseInt(i[0]+i[1],16),parseInt(i[2]+i[3],16),parseInt(i[4]+i[5],16)],p===8&&(f=parseInt(i[6]+i[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),o="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var y=t[1],v=y==="rgb",i=y.replace(/a$/,"");o=i;var p=i==="cmyk"?4:i==="gray"?1:3;r=t[2].trim().split(/\s*,\s*/).map(function(s,w){if(/%$/.test(s))return w===p?parseFloat(s)/100:i==="rgb"?parseFloat(s)*255/100:parseFloat(s);if(i[w]==="h"){if(/deg$/.test(s))return parseFloat(s);if(e[s]!==void 0)return e[s]}return parseFloat(s)}),y===i&&r.push(1),f=v||r[p]===void 0?1:r[p],r=r.slice(0,p)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(r=n.match(/([0-9]+)/g).map(function(l){return parseFloat(l)}),o=n.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(n))o="rgb",r=[n>>>16,(n&65280)>>>8,n&255];else if(M(n)){var x=A(n.r,n.red,n.R,null);x!==null?(o="rgb",r=[x,A(n.g,n.green,n.G),A(n.b,n.blue,n.B)]):(o="hsl",r=[A(n.h,n.hue,n.H),A(n.s,n.saturation,n.S),A(n.l,n.lightness,n.L,n.b,n.brightness)]),f=A(n.a,n.alpha,n.opacity,1),n.opacity!=null&&(f/=100)}else(Array.isArray(n)||T.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(n))&&(r=[n[0],n[1],n[2]],o="rgb",f=n.length===4?n[3]:1);return{space:o,values:r,alpha:f}}}).call(this)}).call(this,typeof To!="undefined"?To:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(g,ne,ae){var T=g("color-parse"),c=g("color-space/hsl"),M=g("clamp");ne.exports=function(e){var a,n=T(e);return n.space?(a=Array(3),a[0]=M(n.values[0],0,255),a[1]=M(n.values[1],0,255),a[2]=M(n.values[2],0,255),n.space[0]==="h"&&(a=c.rgb(a)),a.push(M(n.alpha,0,1)),a):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(g,ne,ae){var T=g("./rgb");ne.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(c){var M=c[0]/360,A=c[1]/100,e=c[2]/100,a,n,t,r,f;if(A===0)return f=e*255,[f,f,f];e<.5?n=e*(1+A):n=e+A-e*A,a=2*e-n,r=[0,0,0];for(var o=0;o<3;o++)t=M+1/3*-(o-1),t<0?t++:t>1&&t--,6*t<1?f=a+(n-a)*6*t:2*t<1?f=n:3*t<2?f=a+(n-a)*(2/3-t)*6:f=a,r[o]=f*255;return r}},T.hsl=function(c){var M=c[0]/255,A=c[1]/255,e=c[2]/255,a=Math.min(M,A,e),n=Math.max(M,A,e),t=n-a,r,f,o;return n===a?r=0:M===n?r=(A-e)/t:A===n?r=2+(e-M)/t:e===n&&(r=4+(M-A)/t),r=Math.min(r*60,360),r<0&&(r+=360),o=(a+n)/2,n===a?f=0:o<=.5?f=t/(n+a):f=t/(2-n-a),[r,f*100,o*100]}},{"./rgb":93}],93:[function(g,ne,ae){ne.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(g,ne,ae){ne.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(g,ne,ae){ne.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(g,ne,ae){ne.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(g,ne,ae){ne.exports=["normal","italic","oblique"]},{}],98:[function(g,ne,ae){ne.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(g,ne,ae){ne.exports={parse:g("./parse"),stringify:g("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(g,ne,ae){var T=g("css-font-size-keywords");ne.exports={isSize:function(M){return/^[\d\.]/.test(M)||M.indexOf("/")!==-1||T.indexOf(M)!==-1}}},{"css-font-size-keywords":95}],101:[function(g,ne,ae){var T=g("unquote"),c=g("css-global-keywords"),M=g("css-system-font-keywords"),A=g("css-font-weight-keywords"),e=g("css-font-style-keywords"),a=g("css-font-stretch-keywords"),n=g("string-split-by"),t=g("./lib/util").isSize;ne.exports=f;var r=f.cache={};function f(i){if(typeof i!="string")throw new Error("Font argument must be a string.");if(r[i])return r[i];if(i==="")throw new Error("Cannot parse an empty string.");if(M.indexOf(i)!==-1)return r[i]={system:i};for(var p={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=n(i,/\s+/),y;y=d.shift();){if(c.indexOf(y)!==-1)return["style","variant","weight","stretch"].forEach(function(x){p[x]=y}),r[i]=p;if(e.indexOf(y)!==-1){p.style=y;continue}if(y==="normal"||y==="small-caps"){p.variant=y;continue}if(a.indexOf(y)!==-1){p.stretch=y;continue}if(A.indexOf(y)!==-1){p.weight=y;continue}if(t(y)){var v=n(y,"/");if(p.size=v[0],v[1]!=null?p.lineHeight=o(v[1]):d[0]==="/"&&(d.shift(),p.lineHeight=o(d.shift())),!d.length)throw new Error("Missing required font-family.");return p.family=n(d.join(" "),/\s*,\s*/).map(T),r[i]=p}throw new Error("Unknown or unsupported font token: "+y)}throw new Error("Missing required font-size.")}function o(i){var p=parseFloat(i);return p.toString()===i?p:i}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(g,ne,ae){var T=g("pick-by-alias"),c=g("./lib/util").isSize,M=i(g("css-global-keywords")),A=i(g("css-system-font-keywords")),e=i(g("css-font-weight-keywords")),a=i(g("css-font-style-keywords")),n=i(g("css-font-stretch-keywords")),t={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};ne.exports=function(d){if(d=T(d,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),d.system)return d.system&&o(d.system,A),d.system;if(o(d.style,a),o(d.variant,t),o(d.weight,e),o(d.stretch,n),d.size==null&&(d.size=f.size),typeof d.size=="number"&&(d.size+="px"),!c)throw Error("Bad size value `"+d.size+"`");d.family||(d.family=f.family),Array.isArray(d.family)&&(d.family.length||(d.family=[f.family]),d.family=d.family.map(function(v){return r[v]?v:'"'+v+'"'}).join(", "));var y=[];return y.push(d.style),d.variant!==d.style&&y.push(d.variant),d.weight!==d.variant&&d.weight!==d.style&&y.push(d.weight),d.stretch!==d.weight&&d.stretch!==d.variant&&d.stretch!==d.style&&y.push(d.stretch),y.push(d.size+(d.lineHeight==null||d.lineHeight==="normal"||d.lineHeight+""=="1"?"":"/"+d.lineHeight)),y.push(d.family),y.filter(Boolean).join(" ")};function o(p,d){if(p&&!d[p]&&!M[p])throw Error("Unknown keyword `"+p+"`");return p}function i(p){for(var d={},y=0;y<p.length;y++)d[p[y]]=1;return d}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(g,ne,ae){ne.exports=["inherit","initial","unset"]},{}],104:[function(g,ne,ae){ne.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(g,ne,ae){var T=g("type/value/is"),c=g("type/value/ensure"),M=g("type/plain-function/ensure"),A=g("es5-ext/object/copy"),e=g("es5-ext/object/normalize-options"),a=g("es5-ext/object/map"),n=Function.prototype.bind,t=Object.defineProperty,r=Object.prototype.hasOwnProperty,f;f=function(o,i,p){var d=c(i)&&M(i.value),y;return y=A(i),delete y.writable,delete y.value,y.get=function(){return!p.overwriteDefinition&&r.call(this,o)?d:(i.value=n.call(d,p.resolveContext?p.resolveContext(this):this),t(this,o,i),this[o])},y},ne.exports=function(o){var i=e(arguments[1]);return T(i.resolveContext)&&M(i.resolveContext),a(o,function(p,d){return f(d,p,i)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(g,ne,ae){var T=g("type/value/is"),c=g("type/plain-function/is"),M=g("es5-ext/object/assign"),A=g("es5-ext/object/normalize-options"),e=g("es5-ext/string/#/contains"),a=ne.exports=function(n,t){var r,f,o,i,p;return arguments.length<2||typeof n!="string"?(i=t,t=n,n=null):i=arguments[2],T(n)?(r=e.call(n,"c"),f=e.call(n,"e"),o=e.call(n,"w")):(r=o=!0,f=!1),p={value:t,configurable:r,enumerable:f,writable:o},i?M(A(i),p):p};a.gs=function(n,t,r){var f,o,i,p;return typeof n!="string"?(i=r,r=t,t=n,n=null):i=arguments[3],T(t)?c(t)?T(r)?c(r)||(i=r,r=void 0):r=void 0:(i=t,t=r=void 0):t=void 0,T(n)?(f=e.call(n,"c"),o=e.call(n,"e")):(f=!0,o=!1),p={get:t,set:r,configurable:f,enumerable:o},i?M(A(i),p):p}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(g,ne,ae){(function(T,c){c(typeof ae=="object"&&typeof ne!="undefined"?ae:T.d3=T.d3||{})})(this,function(T){function c(N,U){return N<U?-1:N>U?1:N>=U?0:NaN}function M(N){return N.length===1&&(N=A(N)),{left:function(U,q,Q,W){for(Q==null&&(Q=0),W==null&&(W=U.length);Q<W;){var X=Q+W>>>1;N(U[X],q)<0?Q=X+1:W=X}return Q},right:function(U,q,Q,W){for(Q==null&&(Q=0),W==null&&(W=U.length);Q<W;){var X=Q+W>>>1;N(U[X],q)>0?W=X:Q=X+1}return Q}}}function A(N){return function(U,q){return c(N(U),q)}}var e=M(c),a=e.right,n=e.left;function t(N,U){U==null&&(U=r);for(var q=0,Q=N.length-1,W=N[0],X=new Array(Q<0?0:Q);q<Q;)X[q]=U(W,W=N[++q]);return X}function r(N,U){return[N,U]}function f(N,U,q){var Q=N.length,W=U.length,X=new Array(Q*W),te,ee,ie,le;for(q==null&&(q=r),te=ie=0;te<Q;++te)for(le=N[te],ee=0;ee<W;++ee,++ie)X[ie]=q(le,U[ee]);return X}function o(N,U){return U<N?-1:U>N?1:U>=N?0:NaN}function i(N){return N===null?NaN:+N}function p(N,U){var q=N.length,Q=0,W=-1,X=0,te,ee,ie=0;if(U==null)for(;++W<q;)isNaN(te=i(N[W]))||(ee=te-X,X+=ee/++Q,ie+=ee*(te-X));else for(;++W<q;)isNaN(te=i(U(N[W],W,N)))||(ee=te-X,X+=ee/++Q,ie+=ee*(te-X));if(Q>1)return ie/(Q-1)}function d(N,U){var q=p(N,U);return q&&Math.sqrt(q)}function y(N,U){var q=N.length,Q=-1,W,X,te;if(U==null){for(;++Q<q;)if((W=N[Q])!=null&&W>=W)for(X=te=W;++Q<q;)(W=N[Q])!=null&&(X>W&&(X=W),te<W&&(te=W))}else for(;++Q<q;)if((W=U(N[Q],Q,N))!=null&&W>=W)for(X=te=W;++Q<q;)(W=U(N[Q],Q,N))!=null&&(X>W&&(X=W),te<W&&(te=W));return[X,te]}var v=Array.prototype,x=v.slice,l=v.map;function _(N){return function(){return N}}function s(N){return N}function w(N,U,q){N=+N,U=+U,q=(W=arguments.length)<2?(U=N,N=0,1):W<3?1:+q;for(var Q=-1,W=Math.max(0,Math.ceil((U-N)/q))|0,X=new Array(W);++Q<W;)X[Q]=N+Q*q;return X}var b=Math.sqrt(50),h=Math.sqrt(10),m=Math.sqrt(2);function u(N,U,q){var Q,W=-1,X,te,ee;if(U=+U,N=+N,q=+q,N===U&&q>0)return[N];if((Q=U<N)&&(X=N,N=U,U=X),(ee=L(N,U,q))===0||!isFinite(ee))return[];if(ee>0)for(N=Math.ceil(N/ee),U=Math.floor(U/ee),te=new Array(X=Math.ceil(U-N+1));++W<X;)te[W]=(N+W)*ee;else for(N=Math.floor(N*ee),U=Math.ceil(U*ee),te=new Array(X=Math.ceil(N-U+1));++W<X;)te[W]=(N-W)/ee;return Q&&te.reverse(),te}function L(N,U,q){var Q=(U-N)/Math.max(0,q),W=Math.floor(Math.log(Q)/Math.LN10),X=Q/Math.pow(10,W);return W>=0?(X>=b?10:X>=h?5:X>=m?2:1)*Math.pow(10,W):-Math.pow(10,-W)/(X>=b?10:X>=h?5:X>=m?2:1)}function S(N,U,q){var Q=Math.abs(U-N)/Math.max(0,q),W=Math.pow(10,Math.floor(Math.log(Q)/Math.LN10)),X=Q/W;return X>=b?W*=10:X>=h?W*=5:X>=m&&(W*=2),U<N?-W:W}function k(N){return Math.ceil(Math.log(N.length)/Math.LN2)+1}function P(){var N=s,U=y,q=k;function Q(W){var X,te=W.length,ee,ie=new Array(te);for(X=0;X<te;++X)ie[X]=N(W[X],X,W);var le=U(ie),ye=le[0],ue=le[1],pe=q(ie,ye,ue);Array.isArray(pe)||(pe=S(ye,ue,pe),pe=w(Math.ceil(ye/pe)*pe,ue,pe));for(var ge=pe.length;pe[0]<=ye;)pe.shift(),--ge;for(;pe[ge-1]>ue;)pe.pop(),--ge;var Te=new Array(ge+1),_e;for(X=0;X<=ge;++X)_e=Te[X]=[],_e.x0=X>0?pe[X-1]:ye,_e.x1=X<ge?pe[X]:ue;for(X=0;X<te;++X)ee=ie[X],ye<=ee&&ee<=ue&&Te[a(pe,ee,0,ge)].push(W[X]);return Te}return Q.value=function(W){return arguments.length?(N=typeof W=="function"?W:_(W),Q):N},Q.domain=function(W){return arguments.length?(U=typeof W=="function"?W:_([W[0],W[1]]),Q):U},Q.thresholds=function(W){return arguments.length?(q=typeof W=="function"?W:Array.isArray(W)?_(x.call(W)):_(W),Q):q},Q}function z(N,U,q){if(q==null&&(q=i),!!(Q=N.length)){if((U=+U)<=0||Q<2)return+q(N[0],0,N);if(U>=1)return+q(N[Q-1],Q-1,N);var Q,W=(Q-1)*U,X=Math.floor(W),te=+q(N[X],X,N),ee=+q(N[X+1],X+1,N);return te+(ee-te)*(W-X)}}function I(N,U,q){return N=l.call(N,i).sort(c),Math.ceil((q-U)/(2*(z(N,.75)-z(N,.25))*Math.pow(N.length,-1/3)))}function D(N,U,q){return Math.ceil((q-U)/(3.5*d(N)*Math.pow(N.length,-1/3)))}function R(N,U){var q=N.length,Q=-1,W,X;if(U==null){for(;++Q<q;)if((W=N[Q])!=null&&W>=W)for(X=W;++Q<q;)(W=N[Q])!=null&&W>X&&(X=W)}else for(;++Q<q;)if((W=U(N[Q],Q,N))!=null&&W>=W)for(X=W;++Q<q;)(W=U(N[Q],Q,N))!=null&&W>X&&(X=W);return X}function B(N,U){var q=N.length,Q=q,W=-1,X,te=0;if(U==null)for(;++W<q;)isNaN(X=i(N[W]))?--Q:te+=X;else for(;++W<q;)isNaN(X=i(U(N[W],W,N)))?--Q:te+=X;if(Q)return te/Q}function F(N,U){var q=N.length,Q=-1,W,X=[];if(U==null)for(;++Q<q;)isNaN(W=i(N[Q]))||X.push(W);else for(;++Q<q;)isNaN(W=i(U(N[Q],Q,N)))||X.push(W);return z(X.sort(c),.5)}function V(N){for(var U=N.length,q,Q=-1,W=0,X,te;++Q<U;)W+=N[Q].length;for(X=new Array(W);--U>=0;)for(te=N[U],q=te.length;--q>=0;)X[--W]=te[q];return X}function Y(N,U){var q=N.length,Q=-1,W,X;if(U==null){for(;++Q<q;)if((W=N[Q])!=null&&W>=W)for(X=W;++Q<q;)(W=N[Q])!=null&&X>W&&(X=W)}else for(;++Q<q;)if((W=U(N[Q],Q,N))!=null&&W>=W)for(X=W;++Q<q;)(W=U(N[Q],Q,N))!=null&&X>W&&(X=W);return X}function K(N,U){for(var q=U.length,Q=new Array(q);q--;)Q[q]=N[U[q]];return Q}function J(N,U){if(!!(q=N.length)){var q,Q=0,W=0,X,te=N[W];for(U==null&&(U=c);++Q<q;)(U(X=N[Q],te)<0||U(te,te)!==0)&&(te=X,W=Q);if(U(te,te)===0)return W}}function G(N,U,q){for(var Q=(q==null?N.length:q)-(U=U==null?0:+U),W,X;Q;)X=Math.random()*Q--|0,W=N[Q+U],N[Q+U]=N[X+U],N[X+U]=W;return N}function Z(N,U){var q=N.length,Q=-1,W,X=0;if(U==null)for(;++Q<q;)(W=+N[Q])&&(X+=W);else for(;++Q<q;)(W=+U(N[Q],Q,N))&&(X+=W);return X}function re(N){if(!(X=N.length))return[];for(var U=-1,q=Y(N,se),Q=new Array(q);++U<q;)for(var W=-1,X,te=Q[U]=new Array(X);++W<X;)te[W]=N[W][U];return Q}function se(N){return N.length}function oe(){return re(arguments)}T.bisect=a,T.bisectRight=a,T.bisectLeft=n,T.ascending=c,T.bisector=M,T.cross=f,T.descending=o,T.deviation=d,T.extent=y,T.histogram=P,T.thresholdFreedmanDiaconis=I,T.thresholdScott=D,T.thresholdSturges=k,T.max=R,T.mean=B,T.median=F,T.merge=V,T.min=Y,T.pairs=t,T.permute=K,T.quantile=z,T.range=w,T.scan=J,T.shuffle=G,T.sum=Z,T.ticks=u,T.tickIncrement=L,T.tickStep=S,T.transpose=re,T.variance=p,T.zip=oe,Object.defineProperty(T,"__esModule",{value:!0})})},{}],108:[function(g,ne,ae){(function(T,c){c(typeof ae=="object"&&typeof ne!="undefined"?ae:T.d3=T.d3||{})})(this,function(T){var c="$";function M(){}M.prototype=A.prototype={constructor:M,has:function(v){return c+v in this},get:function(v){return this[c+v]},set:function(v,x){return this[c+v]=x,this},remove:function(v){var x=c+v;return x in this&&delete this[x]},clear:function(){for(var v in this)v[0]===c&&delete this[v]},keys:function(){var v=[];for(var x in this)x[0]===c&&v.push(x.slice(1));return v},values:function(){var v=[];for(var x in this)x[0]===c&&v.push(this[x]);return v},entries:function(){var v=[];for(var x in this)x[0]===c&&v.push({key:x.slice(1),value:this[x]});return v},size:function(){var v=0;for(var x in this)x[0]===c&&++v;return v},empty:function(){for(var v in this)if(v[0]===c)return!1;return!0},each:function(v){for(var x in this)x[0]===c&&v(this[x],x.slice(1),this)}};function A(v,x){var l=new M;if(v instanceof M)v.each(function(h,m){l.set(m,h)});else if(Array.isArray(v)){var _=-1,s=v.length,w;if(x==null)for(;++_<s;)l.set(_,v[_]);else for(;++_<s;)l.set(x(w=v[_],_,v),w)}else if(v)for(var b in v)l.set(b,v[b]);return l}function e(){var v=[],x=[],l,_,s;function w(h,m,u,L){if(m>=v.length)return l!=null&&h.sort(l),_!=null?_(h):h;for(var S=-1,k=h.length,P=v[m++],z,I,D=A(),R,B=u();++S<k;)(R=D.get(z=P(I=h[S])+""))?R.push(I):D.set(z,[I]);return D.each(function(F,V){L(B,V,w(F,m,u,L))}),B}function b(h,m){if(++m>v.length)return h;var u,L=x[m-1];return _!=null&&m>=v.length?u=h.entries():(u=[],h.each(function(S,k){u.push({key:k,values:b(S,m)})})),L!=null?u.sort(function(S,k){return L(S.key,k.key)}):u}return s={object:function(h){return w(h,0,a,n)},map:function(h){return w(h,0,t,r)},entries:function(h){return b(w(h,0,t,r),0)},key:function(h){return v.push(h),s},sortKeys:function(h){return x[v.length-1]=h,s},sortValues:function(h){return l=h,s},rollup:function(h){return _=h,s}}}function a(){return{}}function n(v,x,l){v[x]=l}function t(){return A()}function r(v,x,l){v.set(x,l)}function f(){}var o=A.prototype;f.prototype=i.prototype={constructor:f,has:o.has,add:function(v){return v+="",this[c+v]=v,this},remove:o.remove,clear:o.clear,values:o.keys,size:o.size,empty:o.empty,each:o.each};function i(v,x){var l=new f;if(v instanceof f)v.each(function(w){l.add(w)});else if(v){var _=-1,s=v.length;if(x==null)for(;++_<s;)l.add(v[_]);else for(;++_<s;)l.add(x(v[_],_,v))}return l}function p(v){var x=[];for(var l in v)x.push(l);return x}function d(v){var x=[];for(var l in v)x.push(v[l]);return x}function y(v){var x=[];for(var l in v)x.push({key:l,value:v[l]});return x}T.nest=e,T.set=i,T.map=A,T.keys=p,T.values=d,T.entries=y,Object.defineProperty(T,"__esModule",{value:!0})})},{}],109:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae):(T=T||self,c(T.d3=T.d3||{}))})(this,function(T){function c(Le,Ne,dt){Le.prototype=Ne.prototype=dt,dt.constructor=Le}function M(Le,Ne){var dt=Object.create(Le.prototype);for(var Dt in Ne)dt[Dt]=Ne[Dt];return dt}function A(){}var e=.7,a=1/e,n="\\s*([+-]?\\d+)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f=/^#([0-9a-f]{3,8})$/,o=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),i=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),p=new RegExp("^rgba\\("+[n,n,n,t]+"\\)$"),d=new RegExp("^rgba\\("+[r,r,r,t]+"\\)$"),y=new RegExp("^hsl\\("+[t,r,r]+"\\)$"),v=new RegExp("^hsla\\("+[t,r,r,t]+"\\)$"),x={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};c(A,w,{copy:function(Le){return Object.assign(new this.constructor,this,Le)},displayable:function(){return this.rgb().displayable()},hex:l,formatHex:l,formatHsl:_,formatRgb:s,toString:s});function l(){return this.rgb().formatHex()}function _(){return I(this).formatHsl()}function s(){return this.rgb().formatRgb()}function w(Le){var Ne,dt;return Le=(Le+"").trim().toLowerCase(),(Ne=f.exec(Le))?(dt=Ne[1].length,Ne=parseInt(Ne[1],16),dt===6?b(Ne):dt===3?new L(Ne>>8&15|Ne>>4&240,Ne>>4&15|Ne&240,(Ne&15)<<4|Ne&15,1):dt===8?h(Ne>>24&255,Ne>>16&255,Ne>>8&255,(Ne&255)/255):dt===4?h(Ne>>12&15|Ne>>8&240,Ne>>8&15|Ne>>4&240,Ne>>4&15|Ne&240,((Ne&15)<<4|Ne&15)/255):null):(Ne=o.exec(Le))?new L(Ne[1],Ne[2],Ne[3],1):(Ne=i.exec(Le))?new L(Ne[1]*255/100,Ne[2]*255/100,Ne[3]*255/100,1):(Ne=p.exec(Le))?h(Ne[1],Ne[2],Ne[3],Ne[4]):(Ne=d.exec(Le))?h(Ne[1]*255/100,Ne[2]*255/100,Ne[3]*255/100,Ne[4]):(Ne=y.exec(Le))?z(Ne[1],Ne[2]/100,Ne[3]/100,1):(Ne=v.exec(Le))?z(Ne[1],Ne[2]/100,Ne[3]/100,Ne[4]):x.hasOwnProperty(Le)?b(x[Le]):Le==="transparent"?new L(NaN,NaN,NaN,0):null}function b(Le){return new L(Le>>16&255,Le>>8&255,Le&255,1)}function h(Le,Ne,dt,Dt){return Dt<=0&&(Le=Ne=dt=NaN),new L(Le,Ne,dt,Dt)}function m(Le){return Le instanceof A||(Le=w(Le)),Le?(Le=Le.rgb(),new L(Le.r,Le.g,Le.b,Le.opacity)):new L}function u(Le,Ne,dt,Dt){return arguments.length===1?m(Le):new L(Le,Ne,dt,Dt==null?1:Dt)}function L(Le,Ne,dt,Dt){this.r=+Le,this.g=+Ne,this.b=+dt,this.opacity=+Dt}c(L,u,M(A,{brighter:function(Le){return Le=Le==null?a:Math.pow(a,Le),new L(this.r*Le,this.g*Le,this.b*Le,this.opacity)},darker:function(Le){return Le=Le==null?e:Math.pow(e,Le),new L(this.r*Le,this.g*Le,this.b*Le,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:k,toString:k}));function S(){return"#"+P(this.r)+P(this.g)+P(this.b)}function k(){var Le=this.opacity;return Le=isNaN(Le)?1:Math.max(0,Math.min(1,Le)),(Le===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Le===1?")":", "+Le+")")}function P(Le){return Le=Math.max(0,Math.min(255,Math.round(Le)||0)),(Le<16?"0":"")+Le.toString(16)}function z(Le,Ne,dt,Dt){return Dt<=0?Le=Ne=dt=NaN:dt<=0||dt>=1?Le=Ne=NaN:Ne<=0&&(Le=NaN),new R(Le,Ne,dt,Dt)}function I(Le){if(Le instanceof R)return new R(Le.h,Le.s,Le.l,Le.opacity);if(Le instanceof A||(Le=w(Le)),!Le)return new R;if(Le instanceof R)return Le;Le=Le.rgb();var Ne=Le.r/255,dt=Le.g/255,Dt=Le.b/255,Xt=Math.min(Ne,dt,Dt),Tt=Math.max(Ne,dt,Dt),zt=NaN,Ut=Tt-Xt,Et=(Tt+Xt)/2;return Ut?(Ne===Tt?zt=(dt-Dt)/Ut+(dt<Dt)*6:dt===Tt?zt=(Dt-Ne)/Ut+2:zt=(Ne-dt)/Ut+4,Ut/=Et<.5?Tt+Xt:2-Tt-Xt,zt*=60):Ut=Et>0&&Et<1?0:zt,new R(zt,Ut,Et,Le.opacity)}function D(Le,Ne,dt,Dt){return arguments.length===1?I(Le):new R(Le,Ne,dt,Dt==null?1:Dt)}function R(Le,Ne,dt,Dt){this.h=+Le,this.s=+Ne,this.l=+dt,this.opacity=+Dt}c(R,D,M(A,{brighter:function(Le){return Le=Le==null?a:Math.pow(a,Le),new R(this.h,this.s,this.l*Le,this.opacity)},darker:function(Le){return Le=Le==null?e:Math.pow(e,Le),new R(this.h,this.s,this.l*Le,this.opacity)},rgb:function(){var Le=this.h%360+(this.h<0)*360,Ne=isNaN(Le)||isNaN(this.s)?0:this.s,dt=this.l,Dt=dt+(dt<.5?dt:1-dt)*Ne,Xt=2*dt-Dt;return new L(B(Le>=240?Le-240:Le+120,Xt,Dt),B(Le,Xt,Dt),B(Le<120?Le+240:Le-120,Xt,Dt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Le=this.opacity;return Le=isNaN(Le)?1:Math.max(0,Math.min(1,Le)),(Le===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Le===1?")":", "+Le+")")}}));function B(Le,Ne,dt){return(Le<60?Ne+(dt-Ne)*Le/60:Le<180?dt:Le<240?Ne+(dt-Ne)*(240-Le)/60:Ne)*255}var F=Math.PI/180,V=180/Math.PI,Y=18,K=.96422,J=1,G=.82521,Z=4/29,re=6/29,se=3*re*re,oe=re*re*re;function N(Le){if(Le instanceof Q)return new Q(Le.l,Le.a,Le.b,Le.opacity);if(Le instanceof ue)return pe(Le);Le instanceof L||(Le=m(Le));var Ne=ee(Le.r),dt=ee(Le.g),Dt=ee(Le.b),Xt=W((.2225045*Ne+.7168786*dt+.0606169*Dt)/J),Tt,zt;return Ne===dt&&dt===Dt?Tt=zt=Xt:(Tt=W((.4360747*Ne+.3850649*dt+.1430804*Dt)/K),zt=W((.0139322*Ne+.0971045*dt+.7141733*Dt)/G)),new Q(116*Xt-16,500*(Tt-Xt),200*(Xt-zt),Le.opacity)}function U(Le,Ne){return new Q(Le,0,0,Ne==null?1:Ne)}function q(Le,Ne,dt,Dt){return arguments.length===1?N(Le):new Q(Le,Ne,dt,Dt==null?1:Dt)}function Q(Le,Ne,dt,Dt){this.l=+Le,this.a=+Ne,this.b=+dt,this.opacity=+Dt}c(Q,q,M(A,{brighter:function(Le){return new Q(this.l+Y*(Le==null?1:Le),this.a,this.b,this.opacity)},darker:function(Le){return new Q(this.l-Y*(Le==null?1:Le),this.a,this.b,this.opacity)},rgb:function(){var Le=(this.l+16)/116,Ne=isNaN(this.a)?Le:Le+this.a/500,dt=isNaN(this.b)?Le:Le-this.b/200;return Ne=K*X(Ne),Le=J*X(Le),dt=G*X(dt),new L(te(3.1338561*Ne-1.6168667*Le-.4906146*dt),te(-.9787684*Ne+1.9161415*Le+.033454*dt),te(.0719453*Ne-.2289914*Le+1.4052427*dt),this.opacity)}}));function W(Le){return Le>oe?Math.pow(Le,1/3):Le/se+Z}function X(Le){return Le>re?Le*Le*Le:se*(Le-Z)}function te(Le){return 255*(Le<=.0031308?12.92*Le:1.055*Math.pow(Le,1/2.4)-.055)}function ee(Le){return(Le/=255)<=.04045?Le/12.92:Math.pow((Le+.055)/1.055,2.4)}function ie(Le){if(Le instanceof ue)return new ue(Le.h,Le.c,Le.l,Le.opacity);if(Le instanceof Q||(Le=N(Le)),Le.a===0&&Le.b===0)return new ue(NaN,0<Le.l&&Le.l<100?0:NaN,Le.l,Le.opacity);var Ne=Math.atan2(Le.b,Le.a)*V;return new ue(Ne<0?Ne+360:Ne,Math.sqrt(Le.a*Le.a+Le.b*Le.b),Le.l,Le.opacity)}function le(Le,Ne,dt,Dt){return arguments.length===1?ie(Le):new ue(dt,Ne,Le,Dt==null?1:Dt)}function ye(Le,Ne,dt,Dt){return arguments.length===1?ie(Le):new ue(Le,Ne,dt,Dt==null?1:Dt)}function ue(Le,Ne,dt,Dt){this.h=+Le,this.c=+Ne,this.l=+dt,this.opacity=+Dt}function pe(Le){if(isNaN(Le.h))return new Q(Le.l,0,0,Le.opacity);var Ne=Le.h*F;return new Q(Le.l,Math.cos(Ne)*Le.c,Math.sin(Ne)*Le.c,Le.opacity)}c(ue,ye,M(A,{brighter:function(Le){return new ue(this.h,this.c,this.l+Y*(Le==null?1:Le),this.opacity)},darker:function(Le){return new ue(this.h,this.c,this.l-Y*(Le==null?1:Le),this.opacity)},rgb:function(){return pe(this).rgb()}}));var ge=-.14861,Te=1.78277,_e=-.29227,De=-.90649,Oe=1.97294,Ue=Oe*De,xe=Oe*Te,Pe=Te*_e-De*ge;function Ve(Le){if(Le instanceof Fe)return new Fe(Le.h,Le.s,Le.l,Le.opacity);Le instanceof L||(Le=m(Le));var Ne=Le.r/255,dt=Le.g/255,Dt=Le.b/255,Xt=(Pe*Dt+Ue*Ne-xe*dt)/(Pe+Ue-xe),Tt=Dt-Xt,zt=(Oe*(dt-Xt)-_e*Tt)/De,Ut=Math.sqrt(zt*zt+Tt*Tt)/(Oe*Xt*(1-Xt)),Et=Ut?Math.atan2(zt,Tt)*V-120:NaN;return new Fe(Et<0?Et+360:Et,Ut,Xt,Le.opacity)}function Qe(Le,Ne,dt,Dt){return arguments.length===1?Ve(Le):new Fe(Le,Ne,dt,Dt==null?1:Dt)}function Fe(Le,Ne,dt,Dt){this.h=+Le,this.s=+Ne,this.l=+dt,this.opacity=+Dt}c(Fe,Qe,M(A,{brighter:function(Le){return Le=Le==null?a:Math.pow(a,Le),new Fe(this.h,this.s,this.l*Le,this.opacity)},darker:function(Le){return Le=Le==null?e:Math.pow(e,Le),new Fe(this.h,this.s,this.l*Le,this.opacity)},rgb:function(){var Le=isNaN(this.h)?0:(this.h+120)*F,Ne=+this.l,dt=isNaN(this.s)?0:this.s*Ne*(1-Ne),Dt=Math.cos(Le),Xt=Math.sin(Le);return new L(255*(Ne+dt*(ge*Dt+Te*Xt)),255*(Ne+dt*(_e*Dt+De*Xt)),255*(Ne+dt*(Oe*Dt)),this.opacity)}})),T.color=w,T.cubehelix=Qe,T.gray=U,T.hcl=ye,T.hsl=D,T.lab=q,T.lch=le,T.rgb=u,Object.defineProperty(T,"__esModule",{value:!0})})},{}],110:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae):(T=T||self,c(T.d3=T.d3||{}))})(this,function(T){var c={value:function(){}};function M(){for(var t=0,r=arguments.length,f={},o;t<r;++t){if(!(o=arguments[t]+"")||o in f||/[\s.]/.test(o))throw new Error("illegal type: "+o);f[o]=[]}return new A(f)}function A(t){this._=t}function e(t,r){return t.trim().split(/^|\s+/).map(function(f){var o="",i=f.indexOf(".");if(i>=0&&(o=f.slice(i+1),f=f.slice(0,i)),f&&!r.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:o}})}A.prototype=M.prototype={constructor:A,on:function(t,r){var f=this._,o=e(t+"",f),i,p=-1,d=o.length;if(arguments.length<2){for(;++p<d;)if((i=(t=o[p]).type)&&(i=a(f[i],t.name)))return i;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++p<d;)if(i=(t=o[p]).type)f[i]=n(f[i],t.name,r);else if(r==null)for(i in f)f[i]=n(f[i],t.name,null);return this},copy:function(){var t={},r=this._;for(var f in r)t[f]=r[f].slice();return new A(t)},call:function(t,r){if((i=arguments.length-2)>0)for(var f=new Array(i),o=0,i,p;o<i;++o)f[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(p=this._[t],o=0,i=p.length;o<i;++o)p[o].value.apply(r,f)},apply:function(t,r,f){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],i=0,p=o.length;i<p;++i)o[i].value.apply(r,f)}};function a(t,r){for(var f=0,o=t.length,i;f<o;++f)if((i=t[f]).name===r)return i.value}function n(t,r,f){for(var o=0,i=t.length;o<i;++o)if(t[o].name===r){t[o]=c,t=t.slice(0,o).concat(t.slice(o+1));break}return f!=null&&t.push({name:r,value:f}),t}T.dispatch=M,Object.defineProperty(T,"__esModule",{value:!0})})},{}],111:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae,g("d3-quadtree"),g("d3-collection"),g("d3-dispatch"),g("d3-timer")):c(T.d3=T.d3||{},T.d3,T.d3,T.d3,T.d3)})(this,function(T,c,M,A,e){function a(m,u){var L;m==null&&(m=0),u==null&&(u=0);function S(){var k,P=L.length,z,I=0,D=0;for(k=0;k<P;++k)z=L[k],I+=z.x,D+=z.y;for(I=I/P-m,D=D/P-u,k=0;k<P;++k)z=L[k],z.x-=I,z.y-=D}return S.initialize=function(k){L=k},S.x=function(k){return arguments.length?(m=+k,S):m},S.y=function(k){return arguments.length?(u=+k,S):u},S}function n(m){return function(){return m}}function t(){return(Math.random()-.5)*1e-6}function r(m){return m.x+m.vx}function f(m){return m.y+m.vy}function o(m){var u,L,S=1,k=1;typeof m!="function"&&(m=n(m==null?1:+m));function P(){for(var D,R=u.length,B,F,V,Y,K,J,G=0;G<k;++G)for(B=c.quadtree(u,r,f).visitAfter(z),D=0;D<R;++D)F=u[D],K=L[F.index],J=K*K,V=F.x+F.vx,Y=F.y+F.vy,B.visit(Z);function Z(re,se,oe,N,U){var q=re.data,Q=re.r,W=K+Q;if(q){if(q.index>F.index){var X=V-q.x-q.vx,te=Y-q.y-q.vy,ee=X*X+te*te;ee<W*W&&(X===0&&(X=t(),ee+=X*X),te===0&&(te=t(),ee+=te*te),ee=(W-(ee=Math.sqrt(ee)))/ee*S,F.vx+=(X*=ee)*(W=(Q*=Q)/(J+Q)),F.vy+=(te*=ee)*W,q.vx-=X*(W=1-W),q.vy-=te*W)}return}return se>V+W||N<V-W||oe>Y+W||U<Y-W}}function z(D){if(D.data)return D.r=L[D.data.index];for(var R=D.r=0;R<4;++R)D[R]&&D[R].r>D.r&&(D.r=D[R].r)}function I(){if(!!u){var D,R=u.length,B;for(L=new Array(R),D=0;D<R;++D)B=u[D],L[B.index]=+m(B,D,u)}}return P.initialize=function(D){u=D,I()},P.iterations=function(D){return arguments.length?(k=+D,P):k},P.strength=function(D){return arguments.length?(S=+D,P):S},P.radius=function(D){return arguments.length?(m=typeof D=="function"?D:n(+D),I(),P):m},P}function i(m){return m.index}function p(m,u){var L=m.get(u);if(!L)throw new Error("missing: "+u);return L}function d(m){var u=i,L=B,S,k=n(30),P,z,I,D,R=1;m==null&&(m=[]);function B(J){return 1/Math.min(I[J.source.index],I[J.target.index])}function F(J){for(var G=0,Z=m.length;G<R;++G)for(var re=0,se,oe,N,U,q,Q,W;re<Z;++re)se=m[re],oe=se.source,N=se.target,U=N.x+N.vx-oe.x-oe.vx||t(),q=N.y+N.vy-oe.y-oe.vy||t(),Q=Math.sqrt(U*U+q*q),Q=(Q-P[re])/Q*J*S[re],U*=Q,q*=Q,N.vx-=U*(W=D[re]),N.vy-=q*W,oe.vx+=U*(W=1-W),oe.vy+=q*W}function V(){if(!!z){var J,G=z.length,Z=m.length,re=M.map(z,u),se;for(J=0,I=new Array(G);J<Z;++J)se=m[J],se.index=J,typeof se.source!="object"&&(se.source=p(re,se.source)),typeof se.target!="object"&&(se.target=p(re,se.target)),I[se.source.index]=(I[se.source.index]||0)+1,I[se.target.index]=(I[se.target.index]||0)+1;for(J=0,D=new Array(Z);J<Z;++J)se=m[J],D[J]=I[se.source.index]/(I[se.source.index]+I[se.target.index]);S=new Array(Z),Y(),P=new Array(Z),K()}}function Y(){if(!!z)for(var J=0,G=m.length;J<G;++J)S[J]=+L(m[J],J,m)}function K(){if(!!z)for(var J=0,G=m.length;J<G;++J)P[J]=+k(m[J],J,m)}return F.initialize=function(J){z=J,V()},F.links=function(J){return arguments.length?(m=J,V(),F):m},F.id=function(J){return arguments.length?(u=J,F):u},F.iterations=function(J){return arguments.length?(R=+J,F):R},F.strength=function(J){return arguments.length?(L=typeof J=="function"?J:n(+J),Y(),F):L},F.distance=function(J){return arguments.length?(k=typeof J=="function"?J:n(+J),K(),F):k},F}function y(m){return m.x}function v(m){return m.y}var x=10,l=Math.PI*(3-Math.sqrt(5));function _(m){var u,L=1,S=.001,k=1-Math.pow(S,1/300),P=0,z=.6,I=M.map(),D=e.timer(B),R=A.dispatch("tick","end");m==null&&(m=[]);function B(){F(),R.call("tick",u),L<S&&(D.stop(),R.call("end",u))}function F(K){var J,G=m.length,Z;K===void 0&&(K=1);for(var re=0;re<K;++re)for(L+=(P-L)*k,I.each(function(se){se(L)}),J=0;J<G;++J)Z=m[J],Z.fx==null?Z.x+=Z.vx*=z:(Z.x=Z.fx,Z.vx=0),Z.fy==null?Z.y+=Z.vy*=z:(Z.y=Z.fy,Z.vy=0);return u}function V(){for(var K=0,J=m.length,G;K<J;++K){if(G=m[K],G.index=K,G.fx!=null&&(G.x=G.fx),G.fy!=null&&(G.y=G.fy),isNaN(G.x)||isNaN(G.y)){var Z=x*Math.sqrt(K),re=K*l;G.x=Z*Math.cos(re),G.y=Z*Math.sin(re)}(isNaN(G.vx)||isNaN(G.vy))&&(G.vx=G.vy=0)}}function Y(K){return K.initialize&&K.initialize(m),K}return V(),u={tick:F,restart:function(){return D.restart(B),u},stop:function(){return D.stop(),u},nodes:function(K){return arguments.length?(m=K,V(),I.each(Y),u):m},alpha:function(K){return arguments.length?(L=+K,u):L},alphaMin:function(K){return arguments.length?(S=+K,u):S},alphaDecay:function(K){return arguments.length?(k=+K,u):+k},alphaTarget:function(K){return arguments.length?(P=+K,u):P},velocityDecay:function(K){return arguments.length?(z=1-K,u):1-z},force:function(K,J){return arguments.length>1?(J==null?I.remove(K):I.set(K,Y(J)),u):I.get(K)},find:function(K,J,G){var Z=0,re=m.length,se,oe,N,U,q;for(G==null?G=1/0:G*=G,Z=0;Z<re;++Z)U=m[Z],se=K-U.x,oe=J-U.y,N=se*se+oe*oe,N<G&&(q=U,G=N);return q},on:function(K,J){return arguments.length>1?(R.on(K,J),u):R.on(K)}}}function s(){var m,u,L,S=n(-30),k,P=1,z=1/0,I=.81;function D(V){var Y,K=m.length,J=c.quadtree(m,y,v).visitAfter(B);for(L=V,Y=0;Y<K;++Y)u=m[Y],J.visit(F)}function R(){if(!!m){var V,Y=m.length,K;for(k=new Array(Y),V=0;V<Y;++V)K=m[V],k[K.index]=+S(K,V,m)}}function B(V){var Y=0,K,J,G=0,Z,re,se;if(V.length){for(Z=re=se=0;se<4;++se)(K=V[se])&&(J=Math.abs(K.value))&&(Y+=K.value,G+=J,Z+=J*K.x,re+=J*K.y);V.x=Z/G,V.y=re/G}else{K=V,K.x=K.data.x,K.y=K.data.y;do Y+=k[K.data.index];while(K=K.next)}V.value=Y}function F(V,Y,K,J){if(!V.value)return!0;var G=V.x-u.x,Z=V.y-u.y,re=J-Y,se=G*G+Z*Z;if(re*re/I<se)return se<z&&(G===0&&(G=t(),se+=G*G),Z===0&&(Z=t(),se+=Z*Z),se<P&&(se=Math.sqrt(P*se)),u.vx+=G*V.value*L/se,u.vy+=Z*V.value*L/se),!0;if(V.length||se>=z)return;(V.data!==u||V.next)&&(G===0&&(G=t(),se+=G*G),Z===0&&(Z=t(),se+=Z*Z),se<P&&(se=Math.sqrt(P*se)));do V.data!==u&&(re=k[V.data.index]*L/se,u.vx+=G*re,u.vy+=Z*re);while(V=V.next)}return D.initialize=function(V){m=V,R()},D.strength=function(V){return arguments.length?(S=typeof V=="function"?V:n(+V),R(),D):S},D.distanceMin=function(V){return arguments.length?(P=V*V,D):Math.sqrt(P)},D.distanceMax=function(V){return arguments.length?(z=V*V,D):Math.sqrt(z)},D.theta=function(V){return arguments.length?(I=V*V,D):Math.sqrt(I)},D}function w(m,u,L){var S,k=n(.1),P,z;typeof m!="function"&&(m=n(+m)),u==null&&(u=0),L==null&&(L=0);function I(R){for(var B=0,F=S.length;B<F;++B){var V=S[B],Y=V.x-u||1e-6,K=V.y-L||1e-6,J=Math.sqrt(Y*Y+K*K),G=(z[B]-J)*P[B]*R/J;V.vx+=Y*G,V.vy+=K*G}}function D(){if(!!S){var R,B=S.length;for(P=new Array(B),z=new Array(B),R=0;R<B;++R)z[R]=+m(S[R],R,S),P[R]=isNaN(z[R])?0:+k(S[R],R,S)}}return I.initialize=function(R){S=R,D()},I.strength=function(R){return arguments.length?(k=typeof R=="function"?R:n(+R),D(),I):k},I.radius=function(R){return arguments.length?(m=typeof R=="function"?R:n(+R),D(),I):m},I.x=function(R){return arguments.length?(u=+R,I):u},I.y=function(R){return arguments.length?(L=+R,I):L},I}function b(m){var u=n(.1),L,S,k;typeof m!="function"&&(m=n(m==null?0:+m));function P(I){for(var D=0,R=L.length,B;D<R;++D)B=L[D],B.vx+=(k[D]-B.x)*S[D]*I}function z(){if(!!L){var I,D=L.length;for(S=new Array(D),k=new Array(D),I=0;I<D;++I)S[I]=isNaN(k[I]=+m(L[I],I,L))?0:+u(L[I],I,L)}}return P.initialize=function(I){L=I,z()},P.strength=function(I){return arguments.length?(u=typeof I=="function"?I:n(+I),z(),P):u},P.x=function(I){return arguments.length?(m=typeof I=="function"?I:n(+I),z(),P):m},P}function h(m){var u=n(.1),L,S,k;typeof m!="function"&&(m=n(m==null?0:+m));function P(I){for(var D=0,R=L.length,B;D<R;++D)B=L[D],B.vy+=(k[D]-B.y)*S[D]*I}function z(){if(!!L){var I,D=L.length;for(S=new Array(D),k=new Array(D),I=0;I<D;++I)S[I]=isNaN(k[I]=+m(L[I],I,L))?0:+u(L[I],I,L)}}return P.initialize=function(I){L=I,z()},P.strength=function(I){return arguments.length?(u=typeof I=="function"?I:n(+I),z(),P):u},P.y=function(I){return arguments.length?(m=typeof I=="function"?I:n(+I),z(),P):m},P}T.forceCenter=a,T.forceCollide=o,T.forceLink=d,T.forceManyBody=s,T.forceRadial=w,T.forceSimulation=_,T.forceX=b,T.forceY=h,Object.defineProperty(T,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae):(T=typeof globalThis!="undefined"?globalThis:T||self,c(T.d3=T.d3||{}))})(this,function(T){function c(m){return Math.abs(m=Math.round(m))>=1e21?m.toLocaleString("en").replace(/,/g,""):m.toString(10)}function M(m,u){if((L=(m=u?m.toExponential(u-1):m.toExponential()).indexOf("e"))<0)return null;var L,S=m.slice(0,L);return[S.length>1?S[0]+S.slice(2):S,+m.slice(L+1)]}function A(m){return m=M(Math.abs(m)),m?m[1]:NaN}function e(m,u){return function(L,S){for(var k=L.length,P=[],z=0,I=m[0],D=0;k>0&&I>0&&(D+I+1>S&&(I=Math.max(1,S-D)),P.push(L.substring(k-=I,k+I)),!((D+=I+1)>S));)I=m[z=(z+1)%m.length];return P.reverse().join(u)}}function a(m){return function(u){return u.replace(/[0-9]/g,function(L){return m[+L]})}}var n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function t(m){if(!(u=n.exec(m)))throw new Error("invalid format: "+m);var u;return new r({fill:u[1],align:u[2],sign:u[3],symbol:u[4],zero:u[5],width:u[6],comma:u[7],precision:u[8]&&u[8].slice(1),trim:u[9],type:u[10]})}t.prototype=r.prototype;function r(m){this.fill=m.fill===void 0?" ":m.fill+"",this.align=m.align===void 0?">":m.align+"",this.sign=m.sign===void 0?"-":m.sign+"",this.symbol=m.symbol===void 0?"":m.symbol+"",this.zero=!!m.zero,this.width=m.width===void 0?void 0:+m.width,this.comma=!!m.comma,this.precision=m.precision===void 0?void 0:+m.precision,this.trim=!!m.trim,this.type=m.type===void 0?"":m.type+""}r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f(m){e:for(var u=m.length,L=1,S=-1,k;L<u;++L)switch(m[L]){case".":S=k=L;break;case"0":S===0&&(S=L),k=L;break;default:if(!+m[L])break e;S>0&&(S=0);break}return S>0?m.slice(0,S)+m.slice(k+1):m}var o;function i(m,u){var L=M(m,u);if(!L)return m+"";var S=L[0],k=L[1],P=k-(o=Math.max(-8,Math.min(8,Math.floor(k/3)))*3)+1,z=S.length;return P===z?S:P>z?S+new Array(P-z+1).join("0"):P>0?S.slice(0,P)+"."+S.slice(P):"0."+new Array(1-P).join("0")+M(m,Math.max(0,u+P-1))[0]}function p(m,u){var L=M(m,u);if(!L)return m+"";var S=L[0],k=L[1];return k<0?"0."+new Array(-k).join("0")+S:S.length>k+1?S.slice(0,k+1)+"."+S.slice(k+1):S+new Array(k-S.length+2).join("0")}var d={"%":function(m,u){return(m*100).toFixed(u)},b:function(m){return Math.round(m).toString(2)},c:function(m){return m+""},d:c,e:function(m,u){return m.toExponential(u)},f:function(m,u){return m.toFixed(u)},g:function(m,u){return m.toPrecision(u)},o:function(m){return Math.round(m).toString(8)},p:function(m,u){return p(m*100,u)},r:p,s:i,X:function(m){return Math.round(m).toString(16).toUpperCase()},x:function(m){return Math.round(m).toString(16)}};function y(m){return m}var v=Array.prototype.map,x=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function l(m){var u=m.grouping===void 0||m.thousands===void 0?y:e(v.call(m.grouping,Number),m.thousands+""),L=m.currency===void 0?"":m.currency[0]+"",S=m.currency===void 0?"":m.currency[1]+"",k=m.decimal===void 0?".":m.decimal+"",P=m.numerals===void 0?y:a(v.call(m.numerals,String)),z=m.percent===void 0?"%":m.percent+"",I=m.minus===void 0?"-":m.minus+"",D=m.nan===void 0?"NaN":m.nan+"";function R(F){F=t(F);var V=F.fill,Y=F.align,K=F.sign,J=F.symbol,G=F.zero,Z=F.width,re=F.comma,se=F.precision,oe=F.trim,N=F.type;N==="n"?(re=!0,N="g"):d[N]||(se===void 0&&(se=12),oe=!0,N="g"),(G||V==="0"&&Y==="=")&&(G=!0,V="0",Y="=");var U=J==="$"?L:J==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",q=J==="$"?S:/[%p]/.test(N)?z:"",Q=d[N],W=/[defgprs%]/.test(N);se=se===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,se)):Math.max(0,Math.min(20,se));function X(te){var ee=U,ie=q,le,ye,ue;if(N==="c")ie=Q(te)+ie,te="";else{te=+te;var pe=te<0||1/te<0;if(te=isNaN(te)?D:Q(Math.abs(te),se),oe&&(te=f(te)),pe&&+te==0&&K!=="+"&&(pe=!1),ee=(pe?K==="("?K:I:K==="-"||K==="("?"":K)+ee,ie=(N==="s"?x[8+o/3]:"")+ie+(pe&&K==="("?")":""),W){for(le=-1,ye=te.length;++le<ye;)if(ue=te.charCodeAt(le),48>ue||ue>57){ie=(ue===46?k+te.slice(le+1):te.slice(le))+ie,te=te.slice(0,le);break}}}re&&!G&&(te=u(te,1/0));var ge=ee.length+te.length+ie.length,Te=ge<Z?new Array(Z-ge+1).join(V):"";switch(re&&G&&(te=u(Te+te,Te.length?Z-ie.length:1/0),Te=""),Y){case"<":te=ee+te+ie+Te;break;case"=":te=ee+Te+te+ie;break;case"^":te=Te.slice(0,ge=Te.length>>1)+ee+te+ie+Te.slice(ge);break;default:te=Te+ee+te+ie;break}return P(te)}return X.toString=function(){return F+""},X}function B(F,V){var Y=R((F=t(F),F.type="f",F)),K=Math.max(-8,Math.min(8,Math.floor(A(V)/3)))*3,J=Math.pow(10,-K),G=x[8+K/3];return function(Z){return Y(J*Z)+G}}return{format:R,formatPrefix:B}}var _;s({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function s(m){return _=l(m),T.format=_.format,T.formatPrefix=_.formatPrefix,_}function w(m){return Math.max(0,-A(Math.abs(m)))}function b(m,u){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(A(u)/3)))*3-A(Math.abs(m)))}function h(m,u){return m=Math.abs(m),u=Math.abs(u)-m,Math.max(0,A(u)-A(m))+1}T.FormatSpecifier=r,T.formatDefaultLocale=s,T.formatLocale=l,T.formatSpecifier=t,T.precisionFixed=w,T.precisionPrefix=b,T.precisionRound=h,Object.defineProperty(T,"__esModule",{value:!0})})},{}],113:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae,g("d3-geo"),g("d3-array")):c(T.d3=T.d3||{},T.d3,T.d3)})(this,function(T,c,M){var A=Math.abs,e=Math.atan,a=Math.atan2,n=Math.cos,t=Math.exp,r=Math.floor,f=Math.log,o=Math.max,i=Math.min,p=Math.pow,d=Math.round,y=Math.sign||function(Re){return Re>0?1:Re<0?-1:0},v=Math.sin,x=Math.tan,l=1e-6,_=1e-12,s=Math.PI,w=s/2,b=s/4,h=Math.SQRT1_2,m=D(2),u=D(s),L=s*2,S=180/s,k=s/180;function P(Re){return Re?Re/Math.sin(Re):1}function z(Re){return Re>1?w:Re<-1?-w:Math.asin(Re)}function I(Re){return Re>1?0:Re<-1?s:Math.acos(Re)}function D(Re){return Re>0?Math.sqrt(Re):0}function R(Re){return Re=t(2*Re),(Re-1)/(Re+1)}function B(Re){return(t(Re)-t(-Re))/2}function F(Re){return(t(Re)+t(-Re))/2}function V(Re){return f(Re+D(Re*Re+1))}function Y(Re){return f(Re+D(Re*Re-1))}function K(Re){var He=x(Re/2),qe=2*f(n(Re/2))/(He*He);function at(bt,xt){var _t=n(bt),or=n(xt),hr=v(xt),nr=or*_t,yr=-((1-nr?f((1+nr)/2)/(1-nr):-.5)+qe/(1+nr));return[yr*or*v(bt),yr*hr]}return at.invert=function(bt,xt){var _t=D(bt*bt+xt*xt),or=-Re/2,hr=50,nr;if(!_t)return[0,0];do{var yr=or/2,Er=n(yr),Vr=v(yr),en=Vr/Er,mn=-f(A(Er));or-=nr=(2/en*mn-qe*en-_t)/(-mn/(Vr*Vr)+1-qe/(2*Er*Er))*(Er<0?.7:1)}while(A(nr)>l&&--hr>0);var Dn=v(or);return[a(bt*Dn,_t*n(or)),z(xt*Dn/_t)]},at}function J(){var Re=w,He=c.geoProjectionMutator(K),qe=He(Re);return qe.radius=function(at){return arguments.length?He(Re=at*k):Re*S},qe.scale(179.976).clipAngle(147)}function G(Re,He){var qe=n(He),at=P(I(qe*n(Re/=2)));return[2*qe*v(Re)*at,v(He)*at]}G.invert=function(Re,He){if(!(Re*Re+4*He*He>s*s+l)){var qe=Re,at=He,bt=25;do{var xt=v(qe),_t=v(qe/2),or=n(qe/2),hr=v(at),nr=n(at),yr=v(2*at),Er=hr*hr,Vr=nr*nr,en=_t*_t,mn=1-Vr*or*or,Dn=mn?I(nr*or)*D(Hn=1/mn):Hn=0,Hn,da=2*Dn*nr*_t-Re,ma=Dn*hr-He,Za=Hn*(Vr*en+Dn*nr*or*Er),Ya=Hn*(.5*xt*yr-Dn*2*hr*_t),qa=Hn*.25*(yr*_t-Dn*hr*Vr*xt),hi=Hn*(Er*or+Dn*en*nr),ao=Ya*qa-hi*Za;if(!ao)break;var ri=(ma*Ya-da*hi)/ao,Hi=(da*qa-ma*Za)/ao;qe-=ri,at-=Hi}while((A(ri)>l||A(Hi)>l)&&--bt>0);return[qe,at]}};function Z(){return c.geoProjection(G).scale(152.63)}function re(Re){var He=v(Re),qe=n(Re),at=Re>=0?1:-1,bt=x(at*Re),xt=(1+He-qe)/2;function _t(or,hr){var nr=n(hr),yr=n(or/=2);return[(1+nr)*v(or),(at*hr>-a(yr,bt)-.001?0:-at*10)+xt+v(hr)*qe-(1+nr)*He*yr]}return _t.invert=function(or,hr){var nr=0,yr=0,Er=50;do{var Vr=n(nr),en=v(nr),mn=n(yr),Dn=v(yr),Hn=1+mn,da=Hn*en-or,ma=xt+Dn*qe-Hn*He*Vr-hr,Za=Hn*Vr/2,Ya=-en*Dn,qa=He*Hn*en/2,hi=qe*mn+He*Vr*Dn,ao=Ya*qa-hi*Za,ri=(ma*Ya-da*hi)/ao/2,Hi=(da*qa-ma*Za)/ao;A(Hi)>2&&(Hi/=2),nr-=ri,yr-=Hi}while((A(ri)>l||A(Hi)>l)&&--Er>0);return at*yr>-a(n(nr),bt)-.001?[nr*2,yr]:null},_t}function se(){var Re=20*k,He=Re>=0?1:-1,qe=x(He*Re),at=c.geoProjectionMutator(re),bt=at(Re),xt=bt.stream;return bt.parallel=function(_t){return arguments.length?(qe=x((He=(Re=_t*k)>=0?1:-1)*Re),at(Re)):Re*S},bt.stream=function(_t){var or=bt.rotate(),hr=xt(_t),nr=(bt.rotate([0,0]),xt(_t)),yr=bt.precision();return bt.rotate(or),hr.sphere=function(){nr.polygonStart(),nr.lineStart();for(var Er=He*-180;He*Er<180;Er+=He*90)nr.point(Er,He*90);if(Re)for(;He*(Er-=3*He*yr)>=-180;)nr.point(Er,He*-a(n(Er*k/2),qe)*S);nr.lineEnd(),nr.polygonEnd()},hr},bt.scale(218.695).center([0,28.0974])}function oe(Re,He){var qe=x(He/2),at=D(1-qe*qe),bt=1+at*n(Re/=2),xt=v(Re)*at/bt,_t=qe/bt,or=xt*xt,hr=_t*_t;return[4/3*xt*(3+or-3*hr),4/3*_t*(3+3*or-hr)]}oe.invert=function(Re,He){if(Re*=3/8,He*=3/8,!Re&&A(He)>1)return null;var qe=Re*Re,at=He*He,bt=1+qe+at,xt=D((bt-D(bt*bt-4*He*He))/2),_t=z(xt)/3,or=xt?Y(A(He/xt))/3:V(A(Re))/3,hr=n(_t),nr=F(or),yr=nr*nr-hr*hr;return[y(Re)*2*a(B(or)*hr,.25-yr),y(He)*2*a(nr*v(_t),.25+yr)]};function N(){return c.geoProjection(oe).scale(66.1603)}var U=D(8),q=f(1+m);function Q(Re,He){var qe=A(He);return qe<b?[Re,f(x(b+He/2))]:[Re*n(qe)*(2*m-1/v(qe)),y(He)*(2*m*(qe-b)-f(x(qe/2)))]}Q.invert=function(Re,He){if((xt=A(He))<q)return[Re,2*e(t(He))-w];var qe=b,at=25,bt,xt;do{var _t=n(qe/2),or=x(qe/2);qe-=bt=(U*(qe-b)-f(or)-xt)/(U-_t*_t/(2*or))}while(A(bt)>_&&--at>0);return[Re/(n(qe)*(U-1/v(qe))),y(He)*qe]};function W(){return c.geoProjection(Q).scale(112.314)}function X(Re){var He=2*s/Re;function qe(at,bt){var xt=c.geoAzimuthalEquidistantRaw(at,bt);if(A(at)>w){var _t=a(xt[1],xt[0]),or=D(xt[0]*xt[0]+xt[1]*xt[1]),hr=He*d((_t-w)/He)+w,nr=a(v(_t-=hr),2-n(_t));_t=hr+z(s/or*v(nr))-nr,xt[0]=or*n(_t),xt[1]=or*v(_t)}return xt}return qe.invert=function(at,bt){var xt=D(at*at+bt*bt);if(xt>w){var _t=a(bt,at),or=He*d((_t-w)/He)+w,hr=_t>or?-1:1,nr=xt*n(or-_t),yr=1/x(hr*I((nr-s)/D(s*(s-2*nr)+xt*xt)));_t=or+2*e((yr+hr*D(yr*yr-3))/3),at=xt*n(_t),bt=xt*v(_t)}return c.geoAzimuthalEquidistantRaw.invert(at,bt)},qe}function te(){var Re=5,He=c.geoProjectionMutator(X),qe=He(Re),at=qe.stream,bt=.01,xt=-n(bt*k),_t=v(bt*k);return qe.lobes=function(or){return arguments.length?He(Re=+or):Re},qe.stream=function(or){var hr=qe.rotate(),nr=at(or),yr=(qe.rotate([0,0]),at(or));return qe.rotate(hr),nr.sphere=function(){yr.polygonStart(),yr.lineStart();for(var Er=0,Vr=360/Re,en=2*s/Re,mn=90-180/Re,Dn=w;Er<Re;++Er,mn-=Vr,Dn-=en)yr.point(a(_t*n(Dn),xt)*S,z(_t*v(Dn))*S),mn<-90?(yr.point(-90,-180-mn-bt),yr.point(-90,-180-mn+bt)):(yr.point(90,mn+bt),yr.point(90,mn-bt));yr.lineEnd(),yr.polygonEnd()},nr},qe.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function ee(Re,He){if(arguments.length<2&&(He=Re),He===1)return c.geoAzimuthalEqualAreaRaw;if(He===1/0)return ie;function qe(at,bt){var xt=c.geoAzimuthalEqualAreaRaw(at/He,bt);return xt[0]*=Re,xt}return qe.invert=function(at,bt){var xt=c.geoAzimuthalEqualAreaRaw.invert(at/Re,bt);return xt[0]*=He,xt},qe}function ie(Re,He){return[Re*n(He)/n(He/=2),2*v(He)]}ie.invert=function(Re,He){var qe=2*z(He/2);return[Re*n(qe/2)/n(qe),qe]};function le(){var Re=2,He=c.geoProjectionMutator(ee),qe=He(Re);return qe.coefficient=function(at){return arguments.length?He(Re=+at):Re},qe.scale(169.529)}function ye(Re,He,qe){var at=100,bt,xt,_t;qe=qe===void 0?0:+qe,He=+He;do xt=Re(qe),_t=Re(qe+l),xt===_t&&(_t=xt+l),qe-=bt=-1*l*(xt-He)/(xt-_t);while(at-- >0&&A(bt)>l);return at<0?NaN:qe}function ue(Re,He,qe){return He===void 0&&(He=40),qe===void 0&&(qe=_),function(at,bt,xt,_t){var or,hr,nr;xt=xt===void 0?0:+xt,_t=_t===void 0?0:+_t;for(var yr=0;yr<He;yr++){var Er=Re(xt,_t),Vr=Er[0]-at,en=Er[1]-bt;if(A(Vr)<qe&&A(en)<qe)break;var mn=Vr*Vr+en*en;if(mn>or){xt-=hr/=2,_t-=nr/=2;continue}or=mn;var Dn=(xt>0?-1:1)*qe,Hn=(_t>0?-1:1)*qe,da=Re(xt+Dn,_t),ma=Re(xt,_t+Hn),Za=(da[0]-Er[0])/Dn,Ya=(da[1]-Er[1])/Dn,qa=(ma[0]-Er[0])/Hn,hi=(ma[1]-Er[1])/Hn,ao=hi*Za-Ya*qa,ri=(A(ao)<.5?.5:1)/ao;if(hr=(en*qa-Vr*hi)*ri,nr=(Vr*Ya-en*Za)*ri,xt+=hr,_t+=nr,A(hr)<qe&&A(nr)<qe)break}return[xt,_t]}}function pe(){var Re=ee(1.68,2),He=1.4,qe=12;function at(bt,xt){if(bt+xt<-He){var _t=(bt-xt+1.6)*(bt+xt+He)/8;bt+=_t,xt-=.8*_t*v(xt+s/2)}var or=Re(bt,xt),hr=(1-n(bt*xt))/qe;return or[1]<0&&(or[0]*=1+hr),or[1]>0&&(or[1]*=1+hr/1.5*or[0]*or[0]),or}return at.invert=ue(at),at}function ge(){return c.geoProjection(pe()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Te(Re,He){var qe=Re*v(He),at=30,bt;do He-=bt=(He+v(He)-qe)/(1+n(He));while(A(bt)>l&&--at>0);return He/2}function _e(Re,He,qe){function at(bt,xt){return[Re*bt*n(xt=Te(qe,xt)),He*v(xt)]}return at.invert=function(bt,xt){return xt=z(xt/He),[bt/(Re*n(xt)),z((2*xt+v(2*xt))/qe)]},at}var De=_e(m/w,m,s);function Oe(){return c.geoProjection(De).scale(169.529)}var Ue=2.00276,xe=1.11072;function Pe(Re,He){var qe=Te(s,He);return[Ue*Re/(1/n(He)+xe/n(qe)),(He+m*v(qe))/Ue]}Pe.invert=function(Re,He){var qe=Ue*He,at=He<0?-b:b,bt=25,xt,_t;do _t=qe-m*v(at),at-=xt=(v(2*at)+2*at-s*v(_t))/(2*n(2*at)+2+s*n(_t)*m*n(at));while(A(xt)>l&&--bt>0);return _t=qe-m*v(at),[Re*(1/n(_t)+xe/n(at))/Ue,_t]};function Ve(){return c.geoProjection(Pe).scale(160.857)}function Qe(Re){var He=0,qe=c.geoProjectionMutator(Re),at=qe(He);return at.parallel=function(bt){return arguments.length?qe(He=bt*k):He*S},at}function Fe(Re,He){return[Re*n(He),He]}Fe.invert=function(Re,He){return[Re/n(He),He]};function Le(){return c.geoProjection(Fe).scale(152.63)}function Ne(Re){if(!Re)return Fe;var He=1/x(Re);function qe(at,bt){var xt=He+Re-bt,_t=xt&&at*n(bt)/xt;return[xt*v(_t),He-xt*n(_t)]}return qe.invert=function(at,bt){var xt=D(at*at+(bt=He-bt)*bt),_t=He+Re-xt;return[xt/n(_t)*a(at,bt),_t]},qe}function dt(){return Qe(Ne).scale(123.082).center([0,26.1441]).parallel(45)}function Dt(Re){function He(qe,at){var bt=w-at,xt=bt&&qe*Re*v(bt)/bt;return[bt*v(xt)/Re,w-bt*n(xt)]}return He.invert=function(qe,at){var bt=qe*Re,xt=w-at,_t=D(bt*bt+xt*xt),or=a(bt,xt);return[(_t?_t/v(_t):1)*or/Re,w-_t]},He}function Xt(){var Re=.5,He=c.geoProjectionMutator(Dt),qe=He(Re);return qe.fraction=function(at){return arguments.length?He(Re=+at):Re},qe.scale(158.837)}var Tt=_e(1,4/s,s);function zt(){return c.geoProjection(Tt).scale(152.63)}function Ut(Re,He,qe,at,bt,xt){var _t=n(xt),or;if(A(Re)>1||A(xt)>1)or=I(qe*bt+He*at*_t);else{var hr=v(Re/2),nr=v(xt/2);or=2*z(D(hr*hr+He*at*nr*nr))}return A(or)>l?[or,a(at*v(xt),He*bt-qe*at*_t)]:[0,0]}function Et(Re,He,qe){return I((Re*Re+He*He-qe*qe)/(2*Re*He))}function Mt(Re){return Re-2*s*r((Re+s)/(2*s))}function rt(Re,He,qe){for(var at=[[Re[0],Re[1],v(Re[1]),n(Re[1])],[He[0],He[1],v(He[1]),n(He[1])],[qe[0],qe[1],v(qe[1]),n(qe[1])]],bt=at[2],xt,_t=0;_t<3;++_t,bt=xt)xt=at[_t],bt.v=Ut(xt[1]-bt[1],bt[3],bt[2],xt[3],xt[2],xt[0]-bt[0]),bt.point=[0,0];var or=Et(at[0].v[0],at[2].v[0],at[1].v[0]),hr=Et(at[0].v[0],at[1].v[0],at[2].v[0]),nr=s-or;at[2].point[1]=0,at[0].point[0]=-(at[1].point[0]=at[0].v[0]/2);var yr=[at[2].point[0]=at[0].point[0]+at[2].v[0]*n(or),2*(at[0].point[1]=at[1].point[1]=at[2].v[0]*v(or))];function Er(Vr,en){var mn=v(en),Dn=n(en),Hn=new Array(3),da;for(da=0;da<3;++da){var ma=at[da];if(Hn[da]=Ut(en-ma[1],ma[3],ma[2],Dn,mn,Vr-ma[0]),!Hn[da][0])return ma.point;Hn[da][1]=Mt(Hn[da][1]-ma.v[1])}var Za=yr.slice();for(da=0;da<3;++da){var Ya=da==2?0:da+1,qa=Et(at[da].v[0],Hn[da][0],Hn[Ya][0]);Hn[da][1]<0&&(qa=-qa),da?da==1?(qa=hr-qa,Za[0]-=Hn[da][0]*n(qa),Za[1]-=Hn[da][0]*v(qa)):(qa=nr-qa,Za[0]+=Hn[da][0]*n(qa),Za[1]+=Hn[da][0]*v(qa)):(Za[0]+=Hn[da][0]*n(qa),Za[1]-=Hn[da][0]*v(qa))}return Za[0]/=3,Za[1]/=3,Za}return Er}function ct(Re){return Re[0]*=k,Re[1]*=k,Re}function Ze(){return ke([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function ke(Re,He,qe){var at=c.geoCentroid({type:"MultiPoint",coordinates:[Re,He,qe]}),bt=[-at[0],-at[1]],xt=c.geoRotation(bt),_t=rt(ct(xt(Re)),ct(xt(He)),ct(xt(qe)));_t.invert=ue(_t);var or=c.geoProjection(_t).rotate(bt),hr=or.center;return delete or.rotate,or.center=function(nr){return arguments.length?hr(xt(nr)):xt.invert(hr())},or.clipAngle(90)}function Ge(Re,He){var qe=D(1-v(He));return[2/u*Re*qe,u*(1-qe)]}Ge.invert=function(Re,He){var qe=(qe=He/u-1)*qe;return[qe>0?Re*D(s/qe)/2:0,z(1-qe)]};function Je(){return c.geoProjection(Ge).scale(95.6464).center([0,30])}function it(Re){var He=x(Re);function qe(at,bt){return[at,(at?at/v(at):1)*(v(bt)*n(at)-He*n(bt))]}return qe.invert=He?function(at,bt){at&&(bt*=v(at)/at);var xt=n(at);return[at,2*a(D(xt*xt+He*He-bt*bt)-xt,He-bt)]}:function(at,bt){return[at,z(at?bt*x(at)/at:bt)]},qe}function Pt(){return Qe(it).scale(249.828).clipAngle(90)}var At=D(3);function Ot(Re,He){return[At*Re*(2*n(2*He/3)-1)/u,At*u*v(He/3)]}Ot.invert=function(Re,He){var qe=3*z(He/(At*u));return[u*Re/(At*(2*n(2*qe/3)-1)),qe]};function Jt(){return c.geoProjection(Ot).scale(156.19)}function Bt(Re){var He=n(Re);function qe(at,bt){return[at*He,v(bt)/He]}return qe.invert=function(at,bt){return[at/He,z(bt*He)]},qe}function qt(){return Qe(Bt).parallel(38.58).scale(195.044)}function rr(Re){var He=n(Re);function qe(at,bt){return[at*He,(1+He)*x(bt/2)]}return qe.invert=function(at,bt){return[at/He,e(bt/(1+He))*2]},qe}function er(){return Qe(rr).scale(124.75)}function pr(Re,He){var qe=D(8/(3*s));return[qe*Re*(1-A(He)/s),qe*He]}pr.invert=function(Re,He){var qe=D(8/(3*s)),at=He/qe;return[Re/(qe*(1-A(at)/s)),at]};function Xr(){return c.geoProjection(pr).scale(165.664)}function hn(Re,He){var qe=D(4-3*v(A(He)));return[2/D(6*s)*Re*qe,y(He)*D(2*s/3)*(2-qe)]}hn.invert=function(Re,He){var qe=2-A(He)/D(2*s/3);return[Re*D(6*s)/(2*qe),y(He)*z((4-qe*qe)/3)]};function $r(){return c.geoProjection(hn).scale(165.664)}function nt(Re,He){var qe=D(s*(4+s));return[2/qe*Re*(1+D(1-4*He*He/(s*s))),4/qe*He]}nt.invert=function(Re,He){var qe=D(s*(4+s))/2;return[Re*qe/(1+D(1-He*He*(4+s)/(4*s))),He*qe/2]};function Gt(){return c.geoProjection(nt).scale(180.739)}function Kt(Re,He){var qe=(2+w)*v(He);He/=2;for(var at=0,bt=1/0;at<10&&A(bt)>l;at++){var xt=n(He);He-=bt=(He+v(He)*(xt+2)-qe)/(2*xt*(1+xt))}return[2/D(s*(4+s))*Re*(1+n(He)),2*D(s/(4+s))*v(He)]}Kt.invert=function(Re,He){var qe=He*D((4+s)/s)/2,at=z(qe),bt=n(at);return[Re/(2/D(s*(4+s))*(1+bt)),z((at+qe*(bt+2))/(2+w))]};function Ht(){return c.geoProjection(Kt).scale(180.739)}function _r(Re,He){return[Re*(1+n(He))/D(2+s),2*He/D(2+s)]}_r.invert=function(Re,He){var qe=D(2+s),at=He*qe/2;return[qe*Re/(1+n(at)),at]};function tt(){return c.geoProjection(_r).scale(173.044)}function je(Re,He){for(var qe=(1+w)*v(He),at=0,bt=1/0;at<10&&A(bt)>l;at++)He-=bt=(He+v(He)-qe)/(1+n(He));return qe=D(2+s),[Re*(1+n(He))/qe,2*He/qe]}je.invert=function(Re,He){var qe=1+w,at=D(qe/2);return[Re*2*at/(1+n(He*=at)),z((He+v(He))/qe)]};function st(){return c.geoProjection(je).scale(173.044)}var ft=3+2*m;function Me(Re,He){var qe=v(Re/=2),at=n(Re),bt=D(n(He)),xt=n(He/=2),_t=v(He)/(xt+m*at*bt),or=D(2/(1+_t*_t)),hr=D((m*xt+(at+qe)*bt)/(m*xt+(at-qe)*bt));return[ft*(or*(hr-1/hr)-2*f(hr)),ft*(or*_t*(hr+1/hr)-2*e(_t))]}Me.invert=function(Re,He){if(!(xt=oe.invert(Re/1.2,He*1.065)))return null;var qe=xt[0],at=xt[1],bt=20,xt;Re/=ft,He/=ft;do{var _t=qe/2,or=at/2,hr=v(_t),nr=n(_t),yr=v(or),Er=n(or),Vr=n(at),en=D(Vr),mn=yr/(Er+m*nr*en),Dn=mn*mn,Hn=D(2/(1+Dn)),da=m*Er+(nr+hr)*en,ma=m*Er+(nr-hr)*en,Za=da/ma,Ya=D(Za),qa=Ya-1/Ya,hi=Ya+1/Ya,ao=Hn*qa-2*f(Ya)-Re,ri=Hn*mn*hi-2*e(mn)-He,Hi=yr&&h*en*hr*Dn/yr,fo=(m*nr*Er+en)/(2*(Er+m*nr*en)*(Er+m*nr*en)*en),bo=-.5*mn*Hn*Hn*Hn,bi=bo*Hi,Mi=bo*fo,us=(us=2*Er+m*en*(nr-hr))*us*Ya,po=(m*nr*Er*en+Vr)/us,Lo=-(m*hr*yr)/(en*us),Ho=qa*bi-2*po/Ya+Hn*(po+po/Za),fe=qa*Mi-2*Lo/Ya+Hn*(Lo+Lo/Za),be=mn*hi*bi-2*Hi/(1+Dn)+Hn*hi*Hi+Hn*mn*(po-po/Za),Ee=mn*hi*Mi-2*fo/(1+Dn)+Hn*hi*fo+Hn*mn*(Lo-Lo/Za),Be=fe*be-Ee*Ho;if(!Be)break;var ze=(ri*fe-ao*Ee)/Be,We=(ao*be-ri*Ho)/Be;qe-=ze,at=o(-w,i(w,at-We))}while((A(ze)>l||A(We)>l)&&--bt>0);return A(A(at)-w)<l?[0,at]:bt&&[qe,at]};function Se(){return c.geoProjection(Me).scale(62.5271)}var Ke=n(35*k);function Xe(Re,He){var qe=x(He/2);return[Re*Ke*D(1-qe*qe),(1+Ke)*qe]}Xe.invert=function(Re,He){var qe=He/(1+Ke);return[Re&&Re/(Ke*D(1-qe*qe)),2*e(qe)]};function ot(){return c.geoProjection(Xe).scale(137.152)}function pt(Re,He){var qe=He/2,at=n(qe);return[2*Re/u*n(He)*at*at,u*x(qe)]}pt.invert=function(Re,He){var qe=e(He/u),at=n(qe),bt=2*qe;return[Re*u/2/(n(bt)*at*at),bt]};function vt(){return c.geoProjection(pt).scale(135.264)}function Ct(Re){var He=1-Re,qe=xt(s,0)[0]-xt(-s,0)[0],at=xt(0,w)[1]-xt(0,-w)[1],bt=D(2*at/qe);function xt(hr,nr){var yr=n(nr),Er=v(nr);return[yr/(He+Re*yr)*hr,He*nr+Re*Er]}function _t(hr,nr){var yr=xt(hr,nr);return[yr[0]*bt,yr[1]/bt]}function or(hr){return _t(0,hr)[1]}return _t.invert=function(hr,nr){var yr=ye(or,nr),Er=hr/bt*(Re+He/n(yr));return[Er,yr]},_t}function St(){var Re=.5,He=c.geoProjectionMutator(Ct),qe=He(Re);return qe.alpha=function(at){return arguments.length?He(Re=+at):Re},qe.scale(168.725)}function Nt(Re){return[Re[0]/2,z(x(Re[1]/2*k))*S]}function ir(Re){return[Re[0]*2,2*e(v(Re[1]*k))*S]}function lr(Re){Re==null&&(Re=c.geoOrthographic);var He=Re(),qe=c.geoEquirectangular().scale(S).precision(0).clipAngle(null).translate([0,0]);function at(xt){return He(Nt(xt))}He.invert&&(at.invert=function(xt){return ir(He.invert(xt))}),at.stream=function(xt){var _t=He.stream(xt),or=qe.stream({point:function(hr,nr){_t.point(hr/2,z(x(-nr/2*k))*S)},lineStart:function(){_t.lineStart()},lineEnd:function(){_t.lineEnd()},polygonStart:function(){_t.polygonStart()},polygonEnd:function(){_t.polygonEnd()}});return or.sphere=_t.sphere,or};function bt(xt){at[xt]=function(){return arguments.length?(He[xt].apply(He,arguments),at):He[xt]()}}return at.rotate=function(xt){return arguments.length?(qe.rotate(xt),at):qe.rotate()},at.center=function(xt){return arguments.length?(He.center(Nt(xt)),at):ir(He.center())},bt("angle"),bt("clipAngle"),bt("clipExtent"),bt("fitExtent"),bt("fitHeight"),bt("fitSize"),bt("fitWidth"),bt("scale"),bt("translate"),bt("precision"),at.scale(249.5)}function Yr(Re,He){var qe=2*s/He,at=Re*Re;function bt(xt,_t){var or=c.geoAzimuthalEquidistantRaw(xt,_t),hr=or[0],nr=or[1],yr=hr*hr+nr*nr;if(yr>at){var Er=D(yr),Vr=a(nr,hr),en=qe*d(Vr/qe),mn=Vr-en,Dn=Re*n(mn),Hn=(Re*v(mn)-mn*v(Dn))/(w-Dn),da=Pr(mn,Hn),ma=(s-Re)/wr(da,Dn,s);hr=Er;var Za=50,Ya;do hr-=Ya=(Re+wr(da,Dn,hr)*ma-Er)/(da(hr)*ma);while(A(Ya)>l&&--Za>0);nr=mn*v(hr),hr<w&&(nr-=Hn*(hr-w));var qa=v(en),hi=n(en);or[0]=hr*hi-nr*qa,or[1]=hr*qa+nr*hi}return or}return bt.invert=function(xt,_t){var or=xt*xt+_t*_t;if(or>at){var hr=D(or),nr=a(_t,xt),yr=qe*d(nr/qe),Er=nr-yr;xt=hr*n(Er),_t=hr*v(Er);for(var Vr=xt-w,en=v(xt),mn=_t/en,Dn=xt<w?1/0:0,Hn=10;;){var da=Re*v(mn),ma=Re*n(mn),Za=v(ma),Ya=w-ma,qa=(da-mn*Za)/Ya,hi=Pr(mn,qa);if(A(Dn)<_||!--Hn)break;mn-=Dn=(mn*en-qa*Vr-_t)/(en-Vr*2*(Ya*(ma+mn*da*n(ma)-Za)-da*(da-mn*Za))/(Ya*Ya))}hr=Re+wr(hi,ma,xt)*(s-Re)/wr(hi,ma,s),nr=yr+mn,xt=hr*n(nr),_t=hr*v(nr)}return c.geoAzimuthalEquidistantRaw.invert(xt,_t)},bt}function Pr(Re,He){return function(qe){var at=Re*n(qe);return qe<w&&(at-=He),D(1+at*at)}}function wr(Re,He,qe){for(var at=50,bt=(qe-He)/at,xt=Re(He)+Re(qe),_t=1,or=He;_t<at;++_t)xt+=2*Re(or+=bt);return xt*.5*bt}function Jr(){var Re=6,He=30*k,qe=n(He),at=v(He),bt=c.geoProjectionMutator(Yr),xt=bt(He,Re),_t=xt.stream,or=.01,hr=-n(or*k),nr=v(or*k);return xt.radius=function(yr){return arguments.length?(qe=n(He=yr*k),at=v(He),bt(He,Re)):He*S},xt.lobes=function(yr){return arguments.length?bt(He,Re=+yr):Re},xt.stream=function(yr){var Er=xt.rotate(),Vr=_t(yr),en=(xt.rotate([0,0]),_t(yr));return xt.rotate(Er),Vr.sphere=function(){en.polygonStart(),en.lineStart();for(var mn=0,Dn=2*s/Re,Hn=0;mn<Re;++mn,Hn-=Dn)en.point(a(nr*n(Hn),hr)*S,z(nr*v(Hn))*S),en.point(a(at*n(Hn-Dn/2),qe)*S,z(at*v(Hn-Dn/2))*S);en.lineEnd(),en.polygonEnd()},Vr},xt.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function gr(Re,He,qe,at,bt,xt,_t,or){arguments.length<8&&(or=0);function hr(nr,yr){if(!yr)return[Re*nr/s,0];var Er=yr*yr,Vr=Re+Er*(He+Er*(qe+Er*at)),en=yr*(bt-1+Er*(xt-or+Er*_t)),mn=(Vr*Vr+en*en)/(2*en),Dn=nr*z(Vr/mn)/s;return[mn*v(Dn),yr*(1+Er*or)+mn*(1-n(Dn))]}return hr.invert=function(nr,yr){var Er=s*nr/Re,Vr=yr,en,mn,Dn=50;do{var Hn=Vr*Vr,da=Re+Hn*(He+Hn*(qe+Hn*at)),ma=Vr*(bt-1+Hn*(xt-or+Hn*_t)),Za=da*da+ma*ma,Ya=2*ma,qa=Za/Ya,hi=qa*qa,ao=z(da/qa)/s,ri=Er*ao,Hi=da*da,fo=(2*He+Hn*(4*qe+Hn*6*at))*Vr,bo=bt+Hn*(3*xt+Hn*5*_t),bi=2*(da*fo+ma*(bo-1)),Mi=2*(bo-1),us=(bi*Ya-Za*Mi)/(Ya*Ya),po=n(ri),Lo=v(ri),Ho=qa*po,fe=qa*Lo,be=Er/s*(1/D(1-Hi/hi))*(fo*qa-da*us)/hi,Ee=fe-nr,Be=Vr*(1+Hn*or)+qa-Ho-yr,ze=us*Lo+Ho*be,We=Ho*ao,yt=1+us-(us*po-fe*be),ht=fe*ao,kt=ze*ht-yt*We;if(!kt)break;Er-=en=(Be*ze-Ee*yt)/kt,Vr-=mn=(Ee*ht-Be*We)/kt}while((A(en)>l||A(mn)>l)&&--Dn>0);return[Er,Vr]},hr}var mr=gr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Ur(){return c.geoProjection(mr).scale(149.995)}var Hr=gr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Tr(){return c.geoProjection(Hr).scale(153.93)}var et=gr(5/6*s,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Lt(){return c.geoProjection(et).scale(130.945)}function jt(Re,He){var qe=Re*Re,at=He*He;return[Re*(1-.162388*at)*(.87-952426e-9*qe*qe),He*(1+at/12)]}jt.invert=function(Re,He){var qe=Re,at=He,bt=50,xt;do{var _t=at*at;at-=xt=(at*(1+_t/12)-He)/(1+_t/4)}while(A(xt)>l&&--bt>0);bt=50,Re/=1-.162388*_t;do{var or=(or=qe*qe)*or;qe-=xt=(qe*(.87-952426e-9*or)-Re)/(.87-.00476213*or)}while(A(xt)>l&&--bt>0);return[qe,at]};function sr(){return c.geoProjection(jt).scale(131.747)}var Ir=gr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Zr(){return c.geoProjection(Ir).scale(131.087)}function Lr(Re){var He=Re(w,0)[0]-Re(-w,0)[0];function qe(at,bt){var xt=at>0?-.5:.5,_t=Re(at+xt*s,bt);return _t[0]-=xt*He,_t}return Re.invert&&(qe.invert=function(at,bt){var xt=at>0?-.5:.5,_t=Re.invert(at+xt*He,bt),or=_t[0]-xt*s;return or<-s?or+=2*s:or>s&&(or-=2*s),_t[0]=or,_t}),qe}function br(Re,He){var qe=y(Re),at=y(He),bt=n(He),xt=n(Re)*bt,_t=v(Re)*bt,or=v(at*He);Re=A(a(_t,or)),He=z(xt),A(Re-w)>l&&(Re%=w);var hr=Nr(Re>s/4?w-Re:Re,He);return Re>s/4&&(or=hr[0],hr[0]=-hr[1],hr[1]=-or),hr[0]*=qe,hr[1]*=-at,hr}br.invert=function(Re,He){A(Re)>1&&(Re=y(Re)*2-Re),A(He)>1&&(He=y(He)*2-He);var qe=y(Re),at=y(He),bt=-qe*Re,xt=-at*He,_t=xt/bt<1,or=kn(_t?xt:bt,_t?bt:xt),hr=or[0],nr=or[1],yr=n(nr);return _t&&(hr=-w-hr),[qe*(a(v(hr)*yr,-v(nr))+s),at*z(n(hr)*yr)]};function Nr(Re,He){if(He===w)return[0,0];var qe=v(He),at=qe*qe,bt=at*at,xt=1+bt,_t=1+3*bt,or=1-bt,hr=z(1/D(xt)),nr=or+at*xt*hr,yr=(1-qe)/nr,Er=D(yr),Vr=yr*xt,en=D(Vr),mn=Er*or,Dn,Hn;if(Re===0)return[0,-(mn+at*en)];var da=n(He),ma=1/da,Za=2*qe*da,Ya=(-3*at+hr*_t)*Za,qa=(-nr*da-(1-qe)*Ya)/(nr*nr),hi=.5*qa/Er,ao=or*hi-2*at*Er*Za,ri=at*xt*qa+yr*_t*Za,Hi=-ma*Za,fo=-ma*ri,bo=-2*ma*ao,bi=4*Re/s,Mi;if(Re>.222*s||He<s/4&&Re>.175*s){if(Dn=(mn+at*D(Vr*(1+bt)-mn*mn))/(1+bt),Re>s/4)return[Dn,Dn];var us=Dn,po=.5*Dn;Dn=.5*(po+us),Hn=50;do{var Lo=D(Vr-Dn*Dn),Ho=Dn*(bo+Hi*Lo)+fo*z(Dn/en)-bi;if(!Ho)break;Ho<0?po=Dn:us=Dn,Dn=.5*(po+us)}while(A(us-po)>l&&--Hn>0)}else{Dn=l,Hn=25;do{var fe=Dn*Dn,be=D(Vr-fe),Ee=bo+Hi*be,Be=Dn*Ee+fo*z(Dn/en)-bi,ze=Ee+(fo-Hi*fe)/be;Dn-=Mi=be?Be/ze:0}while(A(Mi)>l&&--Hn>0)}return[Dn,-mn-at*D(Vr-Dn*Dn)]}function kn(Re,He){for(var qe=0,at=1,bt=.5,xt=50;;){var _t=bt*bt,or=D(bt),hr=z(1/D(1+_t)),nr=1-_t+bt*(1+_t)*hr,yr=(1-or)/nr,Er=D(yr),Vr=yr*(1+_t),en=Er*(1-_t),mn=Vr-Re*Re,Dn=D(mn),Hn=He+en+bt*Dn;if(A(at-qe)<_||--xt==0||Hn===0)break;Hn>0?qe=bt:at=bt,bt=.5*(qe+at)}if(!xt)return null;var da=z(or),ma=n(da),Za=1/ma,Ya=2*or*ma,qa=(-3*bt+hr*(1+3*_t))*Ya,hi=(-nr*ma-(1-or)*qa)/(nr*nr),ao=.5*hi/Er,ri=(1-_t)*ao-2*bt*Er*Ya,Hi=-2*Za*ri,fo=-Za*Ya,bo=-Za*(bt*(1+_t)*hi+yr*(1+3*_t)*Ya);return[s/4*(Re*(Hi+fo*Dn)+bo*z(Re/D(Vr))),da]}function _n(){return c.geoProjection(Lr(br)).scale(239.75)}function Wn(Re,He,qe){var at,bt,xt;return Re?(at=Ln(Re,qe),He?(bt=Ln(He,1-qe),xt=bt[1]*bt[1]+qe*at[0]*at[0]*bt[0]*bt[0],[[at[0]*bt[2]/xt,at[1]*at[2]*bt[0]*bt[1]/xt],[at[1]*bt[1]/xt,-at[0]*at[2]*bt[0]*bt[2]/xt],[at[2]*bt[1]*bt[2]/xt,-qe*at[0]*at[1]*bt[0]/xt]]):[[at[0],0],[at[1],0],[at[2],0]]):(bt=Ln(He,1-qe),[[0,bt[0]/bt[1]],[1/bt[1],0],[bt[2]/bt[1],0]])}function Ln(Re,He){var qe,at,bt,xt,_t;if(He<l)return xt=v(Re),at=n(Re),qe=He*(Re-xt*at)/4,[xt-qe*at,at+qe*xt,1-He*xt*xt/2,Re-qe];if(He>=1-l)return qe=(1-He)/4,at=F(Re),xt=R(Re),bt=1/at,_t=at*B(Re),[xt+qe*(_t-Re)/(at*at),bt-qe*xt*bt*(_t-Re),bt+qe*xt*bt*(_t+Re),2*e(t(Re))-w+qe*(_t-Re)/at];var or=[1,0,0,0,0,0,0,0,0],hr=[D(He),0,0,0,0,0,0,0,0],nr=0;for(at=D(1-He),_t=1;A(hr[nr]/or[nr])>l&&nr<8;)qe=or[nr++],hr[nr]=(qe-at)/2,or[nr]=(qe+at)/2,at=D(qe*at),_t*=2;bt=_t*or[nr]*Re;do xt=hr[nr]*v(at=bt)/or[nr],bt=(z(xt)+bt)/2;while(--nr);return[v(bt),xt=n(bt),xt/n(bt-at),bt]}function Xn(Re,He,qe){var at=A(Re),bt=A(He),xt=B(bt);if(at){var _t=1/v(at),or=1/(x(at)*x(at)),hr=-(or+qe*(xt*xt*_t*_t)-1+qe),nr=(qe-1)*or,yr=(-hr+D(hr*hr-4*nr))/2;return[Kn(e(1/D(yr)),qe)*y(Re),Kn(e(D((yr/or-1)/qe)),1-qe)*y(He)]}return[0,Kn(e(xt),1-qe)*y(He)]}function Kn(Re,He){if(!He)return Re;if(He===1)return f(x(Re/2+b));for(var qe=1,at=D(1-He),bt=D(He),xt=0;A(bt)>l;xt++){if(Re%s){var _t=e(at*x(Re)/qe);_t<0&&(_t+=s),Re+=_t+~~(Re/s)*s}else Re+=Re;bt=(qe+at)/2,at=D(qe*at),bt=((qe=bt)-at)/2}return Re/(p(2,xt)*qe)}function Aa(Re,He){var qe=(m-1)/(m+1),at=D(1-qe*qe),bt=Kn(w,at*at),xt=-1,_t=f(x(s/4+A(He)/2)),or=t(xt*_t)/D(qe),hr=Ta(or*n(xt*Re),or*v(xt*Re)),nr=Xn(hr[0],hr[1],at*at);return[-nr[1],(He>=0?1:-1)*(.5*bt-nr[0])]}function Ta(Re,He){var qe=Re*Re,at=He+1,bt=1-qe-He*He;return[.5*((Re>=0?w:-w)-a(bt,2*Re)),-.25*f(bt*bt+4*qe)+.5*f(at*at+qe)]}function oi(Re,He){var qe=He[0]*He[0]+He[1]*He[1];return[(Re[0]*He[0]+Re[1]*He[1])/qe,(Re[1]*He[0]-Re[0]*He[1])/qe]}Aa.invert=function(Re,He){var qe=(m-1)/(m+1),at=D(1-qe*qe),bt=Kn(w,at*at),xt=-1,_t=Wn(.5*bt-He,-Re,at*at),or=oi(_t[0],_t[1]),hr=a(or[1],or[0])/xt;return[hr,2*e(t(.5/xt*f(qe*or[0]*or[0]+qe*or[1]*or[1])))-w]};function $a(){return c.geoProjection(Lr(Aa)).scale(151.496)}function Va(Re){var He=v(Re),qe=n(Re),at=ti(Re);at.invert=ti(-Re);function bt(xt,_t){var or=at(xt,_t);xt=or[0],_t=or[1];var hr=v(_t),nr=n(_t),yr=n(xt),Er=I(He*hr+qe*nr*yr),Vr=v(Er),en=A(Vr)>l?Er/Vr:1;return[en*qe*v(xt),(A(xt)>w?en:-en)*(He*nr-qe*hr*yr)]}return bt.invert=function(xt,_t){var or=D(xt*xt+_t*_t),hr=-v(or),nr=n(or),yr=or*nr,Er=-_t*hr,Vr=or*He,en=D(yr*yr+Er*Er-Vr*Vr),mn=a(yr*Vr+Er*en,Er*Vr-yr*en),Dn=(or>w?-1:1)*a(xt*hr,or*n(mn)*nr+_t*v(mn)*hr);return at.invert(Dn,mn)},bt}function ti(Re){var He=v(Re),qe=n(Re);return function(at,bt){var xt=n(bt),_t=n(at)*xt,or=v(at)*xt,hr=v(bt);return[a(or,_t*qe-hr*He),z(hr*qe+_t*He)]}}function Mr(){var Re=0,He=c.geoProjectionMutator(Va),qe=He(Re),at=qe.rotate,bt=qe.stream,xt=c.geoCircle();return qe.parallel=function(_t){if(!arguments.length)return Re*S;var or=qe.rotate();return He(Re=_t*k).rotate(or)},qe.rotate=function(_t){return arguments.length?(at.call(qe,[_t[0],_t[1]-Re*S]),xt.center([-_t[0],-_t[1]]),qe):(_t=at.call(qe),_t[1]+=Re*S,_t)},qe.stream=function(_t){return _t=bt(_t),_t.sphere=function(){_t.polygonStart();var or=.01,hr=xt.radius(90-or)().coordinates[0],nr=hr.length-1,yr=-1,Er;for(_t.lineStart();++yr<nr;)_t.point((Er=hr[yr])[0],Er[1]);for(_t.lineEnd(),hr=xt.radius(90+or)().coordinates[0],nr=hr.length-1,_t.lineStart();--yr>=0;)_t.point((Er=hr[yr])[0],Er[1]);_t.lineEnd(),_t.polygonEnd()},_t},qe.scale(79.4187).parallel(45).clipAngle(180-.001)}var vn=3,fn=z(1-1/vn)*S,An=Bt(0);function Gn(Re){var He=fn*k,qe=Ge(s,He)[0]-Ge(-s,He)[0],at=An(0,He)[1],bt=Ge(0,He)[1],xt=u-bt,_t=L/Re,or=4/L,hr=at+xt*xt*4/L;function nr(yr,Er){var Vr,en=A(Er);if(en>He){var mn=i(Re-1,o(0,r((yr+s)/_t)));yr+=s*(Re-1)/Re-mn*_t,Vr=Ge(yr,en),Vr[0]=Vr[0]*L/qe-L*(Re-1)/(2*Re)+mn*L/Re,Vr[1]=at+(Vr[1]-bt)*4*xt/L,Er<0&&(Vr[1]=-Vr[1])}else Vr=An(yr,Er);return Vr[0]*=or,Vr[1]/=hr,Vr}return nr.invert=function(yr,Er){yr/=or,Er*=hr;var Vr=A(Er);if(Vr>at){var en=i(Re-1,o(0,r((yr+s)/_t)));yr=(yr+s*(Re-1)/Re-en*_t)*qe/L;var mn=Ge.invert(yr,.25*(Vr-at)*L/xt+bt);return mn[0]-=s*(Re-1)/Re-en*_t,Er<0&&(mn[1]=-mn[1]),mn}return An.invert(yr,Er)},nr}function ia(Re,He){return[Re,He&1?90-l:fn]}function Yn(Re,He){return[Re,He&1?-90+l:-fn]}function zn(Re){return[Re[0]*(1-l),Re[1]]}function ea(Re){var He=[].concat(M.range(-180,180+Re/2,Re).map(ia),M.range(180,-180-Re/2,-Re).map(Yn));return{type:"Polygon",coordinates:[Re===180?He.map(zn):He]}}function wa(){var Re=4,He=c.geoProjectionMutator(Gn),qe=He(Re),at=qe.stream;return qe.lobes=function(bt){return arguments.length?He(Re=+bt):Re},qe.stream=function(bt){var xt=qe.rotate(),_t=at(bt),or=(qe.rotate([0,0]),at(bt));return qe.rotate(xt),_t.sphere=function(){c.geoStream(ea(180/Re),or)},_t},qe.scale(239.75)}function si(Re){var He=1+Re,qe=v(1/He),at=z(qe),bt=2*D(s/(xt=s+4*at*He)),xt,_t=.5*bt*(He+D(Re*(2+Re))),or=Re*Re,hr=He*He;function nr(yr,Er){var Vr=1-v(Er),en,mn;if(Vr&&Vr<2){var Dn=w-Er,Hn=25,da;do{var ma=v(Dn),Za=n(Dn),Ya=at+a(ma,He-Za),qa=1+hr-2*He*Za;Dn-=da=(Dn-or*at-He*ma+qa*Ya-.5*Vr*xt)/(2*He*ma*Ya)}while(A(da)>_&&--Hn>0);en=bt*D(qa),mn=yr*Ya/s}else en=bt*(Re+Vr),mn=yr*at/s;return[en*v(mn),_t-en*n(mn)]}return nr.invert=function(yr,Er){var Vr=yr*yr+(Er-=_t)*Er,en=(1+hr-Vr/(bt*bt))/(2*He),mn=I(en),Dn=v(mn),Hn=at+a(Dn,He-en);return[z(yr/D(Vr))*s/Hn,z(1-2*(mn-or*at-He*Dn+(1+hr-2*He*en)*Hn)/xt)]},nr}function Ft(){var Re=1,He=c.geoProjectionMutator(si),qe=He(Re);return qe.ratio=function(at){return arguments.length?He(Re=+at):Re},qe.scale(167.774).center([0,18.67])}var cr=.7109889596207567,qr=.0528035274542;function nn(Re,He){return He>-cr?(Re=De(Re,He),Re[1]+=qr,Re):Fe(Re,He)}nn.invert=function(Re,He){return He>-cr?De.invert(Re,He-qr):Fe.invert(Re,He)};function on(){return c.geoProjection(nn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Sn(Re,He){return A(He)>cr?(Re=De(Re,He),Re[1]-=He>0?qr:-qr,Re):Fe(Re,He)}Sn.invert=function(Re,He){return A(He)>cr?De.invert(Re,He+(He>0?qr:-qr)):Fe.invert(Re,He)};function xn(){return c.geoProjection(Sn).scale(152.63)}function tn(Re,He,qe,at){var bt=D(4*s/(2*qe+(1+Re-He/2)*v(2*qe)+(Re+He)/2*v(4*qe)+He/2*v(6*qe))),xt=D(at*v(qe)*D((1+Re*n(2*qe)+He*n(4*qe))/(1+Re+He))),_t=qe*hr(1);function or(Er){return D(1+Re*n(2*Er)+He*n(4*Er))}function hr(Er){var Vr=Er*qe;return(2*Vr+(1+Re-He/2)*v(2*Vr)+(Re+He)/2*v(4*Vr)+He/2*v(6*Vr))/qe}function nr(Er){return or(Er)*v(Er)}var yr=function(Er,Vr){var en=qe*ye(hr,_t*v(Vr)/qe,Vr/s);isNaN(en)&&(en=qe*y(Vr));var mn=bt*or(en);return[mn*xt*Er/s*n(en),mn/xt*v(en)]};return yr.invert=function(Er,Vr){var en=ye(nr,Vr*xt/bt);return[Er*s/(n(en)*bt*xt*or(en)),z(qe*hr(en/qe)/_t)]},qe===0&&(bt=D(at/s),yr=function(Er,Vr){return[Er*bt,v(Vr)/bt]},yr.invert=function(Er,Vr){return[Er/bt,z(Vr*bt)]}),yr}function xr(){var Re=1,He=0,qe=45*k,at=2,bt=c.geoProjectionMutator(tn),xt=bt(Re,He,qe,at);return xt.a=function(_t){return arguments.length?bt(Re=+_t,He,qe,at):Re},xt.b=function(_t){return arguments.length?bt(Re,He=+_t,qe,at):He},xt.psiMax=function(_t){return arguments.length?bt(Re,He,qe=+_t*k,at):qe*S},xt.ratio=function(_t){return arguments.length?bt(Re,He,qe,at=+_t):at},xt.scale(180.739)}function dr(Re,He,qe,at,bt,xt,_t,or,hr,nr,yr){if(yr.nanEncountered)return NaN;var Er,Vr,en,mn,Dn,Hn,da,ma,Za,Ya;if(Er=qe-He,Vr=Re(He+Er*.25),en=Re(qe-Er*.25),isNaN(Vr)){yr.nanEncountered=!0;return}if(isNaN(en)){yr.nanEncountered=!0;return}return mn=Er*(at+4*Vr+bt)/12,Dn=Er*(bt+4*en+xt)/12,Hn=mn+Dn,Ya=(Hn-_t)/15,nr>hr?(yr.maxDepthCount++,Hn+Ya):Math.abs(Ya)<or?Hn+Ya:(da=He+Er*.5,ma=dr(Re,He,da,at,Vr,bt,mn,or*.5,hr,nr+1,yr),isNaN(ma)?(yr.nanEncountered=!0,NaN):(Za=dr(Re,da,qe,bt,en,xt,Dn,or*.5,hr,nr+1,yr),isNaN(Za)?(yr.nanEncountered=!0,NaN):ma+Za))}function Rr(Re,He,qe,at,bt){var xt={maxDepthCount:0,nanEncountered:!1};at===void 0&&(at=1e-8),bt===void 0&&(bt=20);var _t=Re(He),or=Re(.5*(He+qe)),hr=Re(qe),nr=(_t+4*or+hr)*(qe-He)/6,yr=dr(Re,He,qe,_t,or,hr,nr,at,bt,1,xt);return yr}function dn(Re,He,qe){function at(en){return Re+(1-Re)*p(1-p(en,He),1/He)}function bt(en){return Rr(at,0,en,1e-4)}for(var xt=1/bt(1),_t=1e3,or=(1+1e-8)*xt,hr=[],nr=0;nr<=_t;nr++)hr.push(bt(nr/_t)*or);function yr(en){var mn=0,Dn=_t,Hn=_t>>1;do hr[Hn]>en?Dn=Hn:mn=Hn,Hn=mn+Dn>>1;while(Hn>mn);var da=hr[Hn+1]-hr[Hn];return da&&(da=(en-hr[Hn+1])/da),(Hn+1+da)/_t}var Er=2*yr(1)/s*xt/qe,Vr=function(en,mn){var Dn=yr(A(v(mn))),Hn=at(Dn)*en;return Dn/=Er,[Hn,mn>=0?Dn:-Dn]};return Vr.invert=function(en,mn){var Dn;return mn*=Er,A(mn)<1&&(Dn=y(mn)*z(bt(A(mn))*xt)),[en/at(A(mn)),Dn]},Vr}function Bn(){var Re=0,He=2.5,qe=1.183136,at=c.geoProjectionMutator(dn),bt=at(Re,He,qe);return bt.alpha=function(xt){return arguments.length?at(Re=+xt,He,qe):Re},bt.k=function(xt){return arguments.length?at(Re,He=+xt,qe):He},bt.gamma=function(xt){return arguments.length?at(Re,He,qe=+xt):qe},bt.scale(152.63)}function aa(Re,He){return A(Re[0]-He[0])<l&&A(Re[1]-He[1])<l}function bn(Re,He){for(var qe=-1,at=Re.length,bt=Re[0],xt,_t,or,hr=[];++qe<at;){xt=Re[qe],_t=(xt[0]-bt[0])/He,or=(xt[1]-bt[1])/He;for(var nr=0;nr<He;++nr)hr.push([bt[0]+nr*_t,bt[1]+nr*or]);bt=xt}return hr.push(xt),hr}function Zn(Re){var He=[],qe,at,bt,xt,_t,or,hr,nr=Re[0].length;for(hr=0;hr<nr;++hr)qe=Re[0][hr],at=qe[0][0],bt=qe[0][1],xt=qe[1][1],_t=qe[2][0],or=qe[2][1],He.push(bn([[at+l,bt+l],[at+l,xt-l],[_t-l,xt-l],[_t-l,or+l]],30));for(hr=Re[1].length-1;hr>=0;--hr)qe=Re[1][hr],at=qe[0][0],bt=qe[0][1],xt=qe[1][1],_t=qe[2][0],or=qe[2][1],He.push(bn([[_t-l,or-l],[_t-l,xt+l],[at+l,xt+l],[at+l,bt-l]],30));return{type:"Polygon",coordinates:[M.merge(He)]}}function ta(Re,He,qe){var at,bt;function xt(hr,nr){for(var yr=nr<0?-1:1,Er=He[+(nr<0)],Vr=0,en=Er.length-1;Vr<en&&hr>Er[Vr][2][0];++Vr);var mn=Re(hr-Er[Vr][1][0],nr);return mn[0]+=Re(Er[Vr][1][0],yr*nr>yr*Er[Vr][0][1]?Er[Vr][0][1]:nr)[0],mn}qe?xt.invert=qe(xt):Re.invert&&(xt.invert=function(hr,nr){for(var yr=bt[+(nr<0)],Er=He[+(nr<0)],Vr=0,en=yr.length;Vr<en;++Vr){var mn=yr[Vr];if(mn[0][0]<=hr&&hr<mn[1][0]&&mn[0][1]<=nr&&nr<mn[1][1]){var Dn=Re.invert(hr-Re(Er[Vr][1][0],0)[0],nr);return Dn[0]+=Er[Vr][1][0],aa(xt(Dn[0],Dn[1]),[hr,nr])?Dn:null}}});var _t=c.geoProjection(xt),or=_t.stream;return _t.stream=function(hr){var nr=_t.rotate(),yr=or(hr),Er=(_t.rotate([0,0]),or(hr));return _t.rotate(nr),yr.sphere=function(){c.geoStream(at,Er)},yr},_t.lobes=function(hr){return arguments.length?(at=Zn(hr),He=hr.map(function(nr){return nr.map(function(yr){return[[yr[0][0]*k,yr[0][1]*k],[yr[1][0]*k,yr[1][1]*k],[yr[2][0]*k,yr[2][1]*k]]})}),bt=He.map(function(nr){return nr.map(function(yr){var Er=Re(yr[0][0],yr[0][1])[0],Vr=Re(yr[2][0],yr[2][1])[0],en=Re(yr[1][0],yr[0][1])[1],mn=Re(yr[1][0],yr[1][1])[1],Dn;return en>mn&&(Dn=en,en=mn,mn=Dn),[[Er,en],[Vr,mn]]})}),_t):He.map(function(nr){return nr.map(function(yr){return[[yr[0][0]*S,yr[0][1]*S],[yr[1][0]*S,yr[1][1]*S],[yr[2][0]*S,yr[2][1]*S]]})})},He!=null&&_t.lobes(He),_t}var pa=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ya(){return ta(Pe,pa).scale(160.857)}var la=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Da(){return ta(Sn,la).scale(152.63)}var oo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Vo(){return ta(De,oo).scale(169.529)}var Zo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function tl(){return ta(De,Zo).scale(169.529).rotate([20,0])}var hl=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Hl(){return ta(nn,hl,ue).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var vi=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Vs(){return ta(Fe,vi).scale(152.63).rotate([-20,0])}function Ps(Re,He){return[3/L*Re*D(s*s/3-He*He),He]}Ps.invert=function(Re,He){return[L/3*Re/D(s*s/3-He*He),He]};function Ui(){return c.geoProjection(Ps).scale(158.837)}function Ao(Re){function He(qe,at){if(A(A(at)-w)<l)return[0,at<0?-2:2];var bt=v(at),xt=p((1+bt)/(1-bt),Re/2),_t=.5*(xt+1/xt)+n(qe*=Re);return[2*v(qe)/_t,(xt-1/xt)/_t]}return He.invert=function(qe,at){var bt=A(at);if(A(bt-2)<l)return qe?null:[0,y(at)*w];if(bt>2)return null;qe/=2,at/=2;var xt=qe*qe,_t=at*at,or=2*at/(1+xt+_t);return or=p((1+or)/(1-or),1/Re),[a(2*qe,1-xt-_t)/Re,z((or-1)/(or+1))]},He}function vl(){var Re=.5,He=c.geoProjectionMutator(Ao),qe=He(Re);return qe.spacing=function(at){return arguments.length?He(Re=+at):Re},qe.scale(124.75)}var hs=s/m;function Di(Re,He){return[Re*(1+D(n(He)))/2,He/(n(He/2)*n(Re/6))]}Di.invert=function(Re,He){var qe=A(Re),at=A(He),bt=l,xt=w;at<hs?xt*=at/hs:bt+=6*I(hs/at);for(var _t=0;_t<25;_t++){var or=v(xt),hr=D(n(xt)),nr=v(xt/2),yr=n(xt/2),Er=v(bt/6),Vr=n(bt/6),en=.5*bt*(1+hr)-qe,mn=xt/(yr*Vr)-at,Dn=hr?-.25*bt*or/hr:0,Hn=.5*(1+hr),da=(1+.5*xt*nr/yr)/(yr*Vr),ma=xt/yr*(Er/6)/(Vr*Vr),Za=Dn*ma-da*Hn,Ya=(en*ma-mn*Hn)/Za,qa=(mn*Dn-en*da)/Za;if(xt-=Ya,bt-=qa,A(Ya)<l&&A(qa)<l)break}return[Re<0?-bt:bt,He<0?-xt:xt]};function rl(){return c.geoProjection(Di).scale(97.2672)}function Ki(Re,He){var qe=Re*Re,at=He*He;return[Re*(.975534+at*(-.119161+qe*-.0143059+at*-.0547009)),He*(1.00384+qe*(.0802894+at*-.02855+qe*199025e-9)+at*(.0998909+at*-.0491032))]}Ki.invert=function(Re,He){var qe=y(Re)*s,at=He/2,bt=50;do{var xt=qe*qe,_t=at*at,or=qe*at,hr=qe*(.975534+_t*(-.119161+xt*-.0143059+_t*-.0547009))-Re,nr=at*(1.00384+xt*(.0802894+_t*-.02855+xt*199025e-9)+_t*(.0998909+_t*-.0491032))-He,yr=.975534-_t*(.119161+3*xt*.0143059+_t*.0547009),Er=-or*(2*.119161+4*.0547009*_t+2*.0143059*xt),Vr=or*(2*.0802894+4*199025e-9*xt+2*-.02855*_t),en=1.00384+xt*(.0802894+199025e-9*xt)+_t*(3*(.0998909-.02855*xt)-5*.0491032*_t),mn=Er*Vr-en*yr,Dn=(nr*Er-hr*en)/mn,Hn=(hr*Vr-nr*yr)/mn;qe-=Dn,at-=Hn}while((A(Dn)>l||A(Hn)>l)&&--bt>0);return bt&&[qe,at]};function Fi(){return c.geoProjection(Ki).scale(139.98)}function no(Re,He){return[v(Re)/n(He),x(He)*n(Re)]}no.invert=function(Re,He){var qe=Re*Re,at=He*He,bt=at+1,xt=qe+bt,_t=Re?h*D((xt-D(xt*xt-4*qe))/qe):1/D(bt);return[z(Re*_t),y(He)*I(_t)]};function Ji(){return c.geoProjection(no).scale(144.049).clipAngle(90-.001)}function es(Re){var He=n(Re),qe=x(b+Re/2);function at(bt,xt){var _t=xt-Re,or=A(_t)<l?bt*He:A(or=b+xt/2)<l||A(A(or)-w)<l?0:bt*_t/f(x(or)/qe);return[or,_t]}return at.invert=function(bt,xt){var _t,or=xt+Re;return[A(xt)<l?bt/He:A(_t=b+or/2)<l||A(A(_t)-w)<l?0:bt*f(x(_t)/qe)/xt,or]},at}function Hs(){return Qe(es).parallel(40).scale(158.837)}function ru(Re,He){return[Re,1.25*f(x(b+.4*He))]}ru.invert=function(Re,He){return[Re,2.5*e(t(.8*He))-.625*s]};function jo(){return c.geoProjection(ru).scale(108.318)}function nu(Re){var He=Re.length-1;function qe(at,bt){for(var xt=n(bt),_t=2/(1+xt*n(at)),or=_t*xt*v(at),hr=_t*v(bt),nr=He,yr=Re[nr],Er=yr[0],Vr=yr[1],en;--nr>=0;)yr=Re[nr],Er=yr[0]+or*(en=Er)-hr*Vr,Vr=yr[1]+or*Vr+hr*en;return Er=or*(en=Er)-hr*Vr,Vr=or*Vr+hr*en,[Er,Vr]}return qe.invert=function(at,bt){var xt=20,_t=at,or=bt;do{for(var hr=He,nr=Re[hr],yr=nr[0],Er=nr[1],Vr=0,en=0,mn;--hr>=0;)nr=Re[hr],Vr=yr+_t*(mn=Vr)-or*en,en=Er+_t*en+or*mn,yr=nr[0]+_t*(mn=yr)-or*Er,Er=nr[1]+_t*Er+or*mn;Vr=yr+_t*(mn=Vr)-or*en,en=Er+_t*en+or*mn,yr=_t*(mn=yr)-or*Er-at,Er=_t*Er+or*mn-bt;var Dn=Vr*Vr+en*en,Hn,da;_t-=Hn=(yr*Vr+Er*en)/Dn,or-=da=(Er*Vr-yr*en)/Dn}while(A(Hn)+A(da)>l*l&&--xt>0);if(xt){var ma=D(_t*_t+or*or),Za=2*e(ma*.5),Ya=v(Za);return[a(_t*Ya,ma*n(Za)),ma?z(or*Ya/ma):0]}},qe}var Ds=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Mo=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Tu=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Rs=[[.9245,0],[0,0],[.01943,0]],bs=[[.721316,0],[0,0],[-.00881625,-.00617325]];function El(){return _s(Ds,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Au(){return _s(Mo,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Mu(){return _s(Tu,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Gs(){return _s(Rs,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Cl(){return _s(bs,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function _s(Re,He){var qe=c.geoProjection(nu(Re)).rotate(He).clipAngle(90),at=c.geoRotation(He),bt=qe.center;return delete qe.rotate,qe.center=function(xt){return arguments.length?bt(at(xt)):at.invert(bt())},qe}var Gl=D(6),nl=D(7);function Yl(Re,He){var qe=z(7*v(He)/(3*Gl));return[Gl*Re*(2*n(2*qe/3)-1)/nl,9*v(qe/3)/nl]}Yl.invert=function(Re,He){var qe=3*z(He*nl/9);return[Re*nl/(Gl*(2*n(2*qe/3)-1)),z(v(qe)*3*Gl/7)]};function au(){return c.geoProjection(Yl).scale(164.859)}function Ll(Re,He){for(var qe=(1+h)*v(He),at=He,bt=0,xt;bt<25&&(at-=xt=(v(at/2)+v(at)-qe)/(.5*n(at/2)+n(at)),!(A(xt)<l));bt++);return[Re*(1+2*n(at)/n(at/2))/(3*m),2*D(3)*v(at/2)/D(2+m)]}Ll.invert=function(Re,He){var qe=He*D(2+m)/(2*D(3)),at=2*z(qe);return[3*m*Re/(1+2*n(at)/n(at/2)),z((qe+v(at))/(1+h))]};function Su(){return c.geoProjection(Ll).scale(188.209)}function Ys(Re,He){for(var qe=D(6/(4+s)),at=(1+s/4)*v(He),bt=He/2,xt=0,_t;xt<25&&(bt-=_t=(bt/2+v(bt)-at)/(.5+n(bt)),!(A(_t)<l));xt++);return[qe*(.5+n(bt))*Re/1.5,qe*bt]}Ys.invert=function(Re,He){var qe=D(6/(4+s)),at=He/qe;return A(A(at)-w)<l&&(at=at<0?-w:w),[1.5*Re/(qe*(.5+n(at))),z((at/2+v(at))/(1+s/4))]};function Wl(){return c.geoProjection(Ys).scale(166.518)}function Pl(Re,He){var qe=He*He,at=qe*qe,bt=qe*at;return[Re*(.84719-.13063*qe+bt*bt*(-.04515+.05494*qe-.02326*at+.00331*bt)),He*(1.01183+at*at*(-.02625+.01926*qe-.00396*at))]}Pl.invert=function(Re,He){var qe=He,at=25,bt,xt,_t,or;do xt=qe*qe,_t=xt*xt,qe-=bt=(qe*(1.01183+_t*_t*(-.02625+.01926*xt-.00396*_t))-He)/(1.01183+_t*_t*(9*-.02625+11*.01926*xt+13*-.00396*_t));while(A(bt)>_&&--at>0);return xt=qe*qe,_t=xt*xt,or=xt*_t,[Re/(.84719-.13063*xt+or*or*(-.04515+.05494*xt-.02326*_t+.00331*or)),qe]};function vs(){return c.geoProjection(Pl).scale(175.295)}function pl(Re,He){return[Re*(1+n(He))/2,2*(He-x(He/2))]}pl.invert=function(Re,He){for(var qe=He/2,at=0,bt=1/0;at<10&&A(bt)>l;++at){var xt=n(He/2);He-=bt=(He-x(He/2)-qe)/(1-.5/(xt*xt))}return[2*Re/(1+n(He)),He]};function Xl(){return c.geoProjection(pl).scale(152.63)}var iu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function ou(){return ta(ee(1/0),iu).rotate([20,0]).scale(152.63)}function Dl(Re,He){var qe=v(He),at=n(He),bt=y(Re);if(Re===0||A(He)===w)return[0,He];if(He===0)return[Re,0];if(A(Re)===w)return[Re*at,w*qe];var xt=s/(2*Re)-2*Re/s,_t=2*He/s,or=(1-_t*_t)/(qe-_t),hr=xt*xt,nr=or*or,yr=1+hr/nr,Er=1+nr/hr,Vr=(xt*qe/or-xt/2)/yr,en=(nr*qe/hr+or/2)/Er,mn=Vr*Vr+at*at/yr,Dn=en*en-(nr*qe*qe/hr+or*qe-1)/Er;return[w*(Vr+D(mn)*bt),w*(en+D(Dn<0?0:Dn)*y(-He*xt)*bt)]}Dl.invert=function(Re,He){Re/=w,He/=w;var qe=Re*Re,at=He*He,bt=qe+at,xt=s*s;return[Re?(bt-1+D((1-bt)*(1-bt)+4*qe))/(2*Re)*w:0,ye(function(_t){return bt*(s*v(_t)-2*_t)*s+4*_t*_t*(He-v(_t))+2*s*_t-xt*He},0)]};function ku(){return c.geoProjection(Dl).scale(127.267)}var su=1.0148,Ko=.23185,al=-.14499,il=.02406,Zl=su,ps=5*Ko,So=7*al,Rl=9*il,ws=1.790857183;function Ts(Re,He){var qe=He*He;return[Re,He*(su+qe*qe*(Ko+qe*(al+il*qe)))]}Ts.invert=function(Re,He){He>ws?He=ws:He<-ws&&(He=-ws);var qe=He,at;do{var bt=qe*qe;qe-=at=(qe*(su+bt*bt*(Ko+bt*(al+il*bt)))-He)/(Zl+bt*bt*(ps+bt*(So+Rl*bt)))}while(A(at)>l);return[Re,qe]};function so(){return c.geoProjection(Ts).scale(139.319)}function dl(Re,He){if(A(He)<l)return[Re,0];var qe=x(He),at=Re*v(He);return[v(at)/qe,He+(1-n(at))/qe]}dl.invert=function(Re,He){if(A(He)<l)return[Re,0];var qe=Re*Re+He*He,at=He*.5,bt=10,xt;do{var _t=x(at),or=1/n(at),hr=qe-2*He*at+at*at;at-=xt=(_t*hr+2*(at-He))/(2+hr*or*or+2*(at-He)*_t)}while(A(xt)>l&&--bt>0);return _t=x(at),[(A(He)<A(at+1/_t)?z(Re*_t):y(He)*y(Re)*(I(A(Re*_t))+w))/v(at),at]};function yl(){return c.geoProjection(dl).scale(103.74)}function Ws(Re,He){var qe=ol(Re[1],Re[0]),at=ol(He[1],He[0]),bt=xl(qe,at),xt=Il(qe)/Il(at);return ml([1,0,Re[0][0],0,1,Re[0][1]],ml([xt,0,0,0,xt,0],ml([n(bt),v(bt),0,-v(bt),n(bt),0],[1,0,-He[0][0],0,1,-He[0][1]])))}function ds(Re){var He=1/(Re[0]*Re[4]-Re[1]*Re[3]);return[He*Re[4],-He*Re[1],He*(Re[1]*Re[5]-Re[2]*Re[4]),-He*Re[3],He*Re[0],He*(Re[2]*Re[3]-Re[0]*Re[5])]}function ml(Re,He){return[Re[0]*He[0]+Re[1]*He[3],Re[0]*He[1]+Re[1]*He[4],Re[0]*He[2]+Re[1]*He[5]+Re[2],Re[3]*He[0]+Re[4]*He[3],Re[3]*He[1]+Re[4]*He[4],Re[3]*He[2]+Re[4]*He[5]+Re[5]]}function ol(Re,He){return[Re[0]-He[0],Re[1]-He[1]]}function Il(Re){return D(Re[0]*Re[0]+Re[1]*Re[1])}function xl(Re,He){return a(Re[0]*He[1]-Re[1]*He[0],Re[0]*He[0]+Re[1]*He[1])}function Xs(Re,He,qe){at(Re,{transform:null});function at(nr,yr){if(nr.edges=jl(nr.face),yr.face){var Er=nr.shared=Hu(nr.face,yr.face),Vr=Ws(Er.map(yr.project),Er.map(nr.project));nr.transform=yr.transform?ml(yr.transform,Vr):Vr;for(var en=yr.edges,mn=0,Dn=en.length;mn<Dn;++mn)ts(Er[0],en[mn][1])&&ts(Er[1],en[mn][0])&&(en[mn]=nr),ts(Er[0],en[mn][0])&&ts(Er[1],en[mn][1])&&(en[mn]=nr);for(en=nr.edges,mn=0,Dn=en.length;mn<Dn;++mn)ts(Er[0],en[mn][0])&&ts(Er[1],en[mn][1])&&(en[mn]=yr),ts(Er[0],en[mn][1])&&ts(Er[1],en[mn][0])&&(en[mn]=yr)}else nr.transform=yr.transform;return nr.children&&nr.children.forEach(function(Hn){at(Hn,nr)}),nr}function bt(nr,yr){var Er=He(nr,yr),Vr=Er.project([nr*S,yr*S]),en;return(en=Er.transform)?[en[0]*Vr[0]+en[1]*Vr[1]+en[2],-(en[3]*Vr[0]+en[4]*Vr[1]+en[5])]:(Vr[1]=-Vr[1],Vr)}sl(Re)&&(bt.invert=function(nr,yr){var Er=xt(Re,[nr,-yr]);return Er&&(Er[0]*=k,Er[1]*=k,Er)});function xt(nr,yr){var Er=nr.project.invert,Vr=nr.transform,en=yr;if(Vr&&(Vr=ds(Vr),en=[Vr[0]*en[0]+Vr[1]*en[1]+Vr[2],Vr[3]*en[0]+Vr[4]*en[1]+Vr[5]]),Er&&nr===_t(mn=Er(en)))return mn;for(var mn,Dn=nr.children,Hn=0,da=Dn&&Dn.length;Hn<da;++Hn)if(mn=xt(Dn[Hn],yr))return mn}function _t(nr){return He(nr[0]*k,nr[1]*k)}var or=c.geoProjection(bt),hr=or.stream;return or.stream=function(nr){var yr=or.rotate(),Er=hr(nr),Vr=(or.rotate([0,0]),hr(nr));return or.rotate(yr),Er.sphere=function(){Vr.polygonStart(),Vr.lineStart(),Eu(Vr,Re),Vr.lineEnd(),Vr.polygonEnd()},Er},or.angle(qe==null?-30:qe*S)}function Eu(Re,He,qe){var at,bt=He.edges,xt=bt.length,_t,or={type:"MultiPoint",coordinates:He.face},hr=He.face.filter(function(Dn){return A(Dn[1])!==90}),nr=c.geoBounds({type:"MultiPoint",coordinates:hr}),yr=!1,Er=-1,Vr=nr[1][0]-nr[0][0],en=Vr===180||Vr===360?[(nr[0][0]+nr[1][0])/2,(nr[0][1]+nr[1][1])/2]:c.geoCentroid(or);if(qe)for(;++Er<xt&&bt[Er]!==qe;);++Er;for(var mn=0;mn<xt;++mn)_t=bt[(mn+Er)%xt],Array.isArray(_t)?(yr||(Re.point((at=c.geoInterpolate(_t[0],en)(l))[0],at[1]),yr=!0),Re.point((at=c.geoInterpolate(_t[1],en)(l))[0],at[1])):(yr=!1,_t!==qe&&Eu(Re,_t,He))}function ts(Re,He){return Re&&He&&Re[0]===He[0]&&Re[1]===He[1]}function Hu(Re,He){for(var qe,at,bt=Re.length,xt=null,_t=0;_t<bt;++_t){qe=Re[_t];for(var or=He.length;--or>=0;)if(at=He[or],qe[0]===at[0]&&qe[1]===at[1]){if(xt)return[xt,qe];xt=qe}}}function jl(Re){for(var He=Re.length,qe=[],at=Re[He-1],bt=0;bt<He;++bt)qe.push([at,at=Re[bt]]);return qe}function sl(Re){return Re.project.invert||Re.children&&Re.children.some(sl)}var bl=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Zs=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Re){return Re.map(function(He){return bl[He]})});function _l(Re){Re=Re||function(qe){var at=c.geoCentroid({type:"MultiPoint",coordinates:qe});return c.geoGnomonic().scale(1).translate([0,0]).rotate([-at[0],-at[1]])};var He=Zs.map(function(qe){return{face:qe,project:Re(qe)}});return[-1,0,0,1,0,1,4,5].forEach(function(qe,at){var bt=He[qe];bt&&(bt.children||(bt.children=[])).push(He[at])}),Xs(He[0],function(qe,at){return He[qe<-s/2?at<0?6:4:qe<0?at<0?2:0:qe<s/2?at<0?3:1:at<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var lu=2/D(3);function uu(Re,He){var qe=Ge(Re,He);return[qe[0]*lu,qe[1]]}uu.invert=function(Re,He){return Ge.invert(Re/lu,He)};function Gu(Re){Re=Re||function(qe){var at=c.geoCentroid({type:"MultiPoint",coordinates:qe});return c.geoProjection(uu).translate([0,0]).scale(1).rotate(at[1]>0?[-at[0],0]:[180-at[0],180])};var He=Zs.map(function(qe){return{face:qe,project:Re(qe)}});return[-1,0,0,1,0,1,4,5].forEach(function(qe,at){var bt=He[qe];bt&&(bt.children||(bt.children=[])).push(He[at])}),Xs(He[0],function(qe,at){return He[qe<-s/2?at<0?6:4:qe<0?at<0?2:0:qe<s/2?at<0?3:1:at<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Ri(Re){Re=Re||function(_t){var or=_t.length===6?c.geoCentroid({type:"MultiPoint",coordinates:_t}):_t[0];return c.geoGnomonic().scale(1).translate([0,0]).rotate([-or[0],-or[1]])};var He=Zs.map(function(_t){for(var or=_t.map(rs),hr=or.length,nr=or[hr-1],yr,Er=[],Vr=0;Vr<hr;++Vr)yr=or[Vr],Er.push(Jo([nr[0]*.9486832980505138+yr[0]*.31622776601683794,nr[1]*.9486832980505138+yr[1]*.31622776601683794,nr[2]*.9486832980505138+yr[2]*.31622776601683794]),Jo([yr[0]*.9486832980505138+nr[0]*.31622776601683794,yr[1]*.9486832980505138+nr[1]*.31622776601683794,yr[2]*.9486832980505138+nr[2]*.31622776601683794])),nr=yr;return Er}),qe=[],at=[-1,0,0,1,0,1,4,5];He.forEach(function(_t,or){for(var hr=Zs[or],nr=hr.length,yr=qe[or]=[],Er=0;Er<nr;++Er)He.push([hr[Er],_t[(Er*2+2)%(2*nr)],_t[(Er*2+1)%(2*nr)]]),at.push(or),yr.push(js(rs(_t[(Er*2+2)%(2*nr)]),rs(_t[(Er*2+1)%(2*nr)])))});var bt=He.map(function(_t){return{project:Re(_t),face:_t}});at.forEach(function(_t,or){var hr=bt[_t];hr&&(hr.children||(hr.children=[])).push(bt[or])});function xt(_t,or){var hr=n(or),nr=[hr*n(_t),hr*v(_t),v(or)],yr=_t<-s/2?or<0?6:4:_t<0?or<0?2:0:_t<s/2?or<0?3:1:or<0?7:5,Er=qe[yr];return bt[ll(Er[0],nr)<0?8+3*yr:ll(Er[1],nr)<0?8+3*yr+1:ll(Er[2],nr)<0?8+3*yr+2:yr]}return Xs(bt[0],xt).angle(-30).scale(110.625).center([0,45])}function ll(Re,He){for(var qe=0,at=Re.length,bt=0;qe<at;++qe)bt+=Re[qe]*He[qe];return bt}function js(Re,He){return[Re[1]*He[2]-Re[2]*He[1],Re[2]*He[0]-Re[0]*He[2],Re[0]*He[1]-Re[1]*He[0]]}function Jo(Re){return[a(Re[1],Re[0])*S,z(o(-1,i(1,Re[2])))*S]}function rs(Re){var He=Re[0]*k,qe=Re[1]*k,at=n(qe);return[at*n(He),at*v(He),v(qe)]}function wl(){}function lo(Re){if((qe=Re.length)<4)return!1;for(var He=0,qe,at=Re[qe-1][1]*Re[0][0]-Re[qe-1][0]*Re[0][1];++He<qe;)at+=Re[He-1][1]*Re[He][0]-Re[He-1][0]*Re[He][1];return at<=0}function fu(Re,He){for(var qe=He[0],at=He[1],bt=!1,xt=0,_t=Re.length,or=_t-1;xt<_t;or=xt++){var hr=Re[xt],nr=hr[0],yr=hr[1],Er=Re[or],Vr=Er[0],en=Er[1];yr>at^en>at&&qe<(Vr-nr)*(at-yr)/(en-yr)+nr&&(bt=!bt)}return bt}function ns(Re,He){var qe=He.stream,at;if(!qe)throw new Error("invalid projection");switch(Re&&Re.type){case"Feature":at=zs;break;case"FeatureCollection":at=Is;break;default:at=as;break}return at(Re,qe)}function Is(Re,He){return{type:"FeatureCollection",features:Re.features.map(function(qe){return zs(qe,He)})}}function zs(Re,He){return{type:"Feature",id:Re.id,properties:Re.properties,geometry:as(Re.geometry,He)}}function As(Re,He){return{type:"GeometryCollection",geometries:Re.geometries.map(function(qe){return as(qe,He)})}}function as(Re,He){if(!Re)return null;if(Re.type==="GeometryCollection")return As(Re,He);var qe;switch(Re.type){case"Point":qe=is;break;case"MultiPoint":qe=is;break;case"LineString":qe=cu;break;case"MultiLineString":qe=cu;break;case"Polygon":qe=zl;break;case"MultiPolygon":qe=zl;break;case"Sphere":qe=zl;break;default:return null}return c.geoStream(Re,He(qe)),qe.result()}var Vi=[],ko=[],is={point:function(Re,He){Vi.push([Re,He])},result:function(){var Re=Vi.length?Vi.length<2?{type:"Point",coordinates:Vi[0]}:{type:"MultiPoint",coordinates:Vi}:null;return Vi=[],Re}},cu={lineStart:wl,point:function(Re,He){Vi.push([Re,He])},lineEnd:function(){Vi.length&&(ko.push(Vi),Vi=[])},result:function(){var Re=ko.length?ko.length<2?{type:"LineString",coordinates:ko[0]}:{type:"MultiLineString",coordinates:ko}:null;return ko=[],Re}},zl={polygonStart:wl,lineStart:wl,point:function(Re,He){Vi.push([Re,He])},lineEnd:function(){var Re=Vi.length;if(Re){do Vi.push(Vi[0].slice());while(++Re<4);ko.push(Vi),Vi=[]}},polygonEnd:wl,result:function(){if(!ko.length)return null;var Re=[],He=[];return ko.forEach(function(qe){lo(qe)?Re.push([qe]):He.push(qe)}),He.forEach(function(qe){var at=qe[0];Re.some(function(bt){if(fu(bt[0],at))return bt.push(qe),!0})||Re.push([qe])}),ko=[],Re.length?Re.length>1?{type:"MultiPolygon",coordinates:Re}:{type:"Polygon",coordinates:Re[0]}:null}};function hu(Re){var He=Re(w,0)[0]-Re(-w,0)[0];function qe(at,bt){var xt=A(at)<w,_t=Re(xt?at:at>0?at-s:at+s,bt),or=(_t[0]-_t[1])*h,hr=(_t[0]+_t[1])*h;if(xt)return[or,hr];var nr=He*h,yr=or>0^hr>0?-1:1;return[yr*or-y(hr)*nr,yr*hr-y(or)*nr]}return Re.invert&&(qe.invert=function(at,bt){var xt=(at+bt)*h,_t=(bt-at)*h,or=A(xt)<.5*He&&A(_t)<.5*He;if(!or){var hr=He*h,nr=xt>0^_t>0?-1:1,yr=-nr*at+(_t>0?1:-1)*hr,Er=-nr*bt+(xt>0?1:-1)*hr;xt=(-yr-Er)*h,_t=(yr-Er)*h}var Vr=Re.invert(xt,_t);return or||(Vr[0]+=xt>0?s:-s),Vr}),c.geoProjection(qe).rotate([-90,-90,45]).clipAngle(180-.001)}function mt(){return hu(br).scale(176.423)}function It(){return hu(Aa).scale(111.48)}function ur(Re,He){if(!(0<=(He=+He)&&He<=20))throw new Error("invalid digits");function qe(nr){var yr=nr.length,Er=2,Vr=new Array(yr);for(Vr[0]=+nr[0].toFixed(He),Vr[1]=+nr[1].toFixed(He);Er<yr;)Vr[Er]=nr[Er],++Er;return Vr}function at(nr){return nr.map(qe)}function bt(nr){for(var yr=qe(nr[0]),Er=[yr],Vr=1;Vr<nr.length;Vr++){var en=qe(nr[Vr]);(en.length>2||en[0]!=yr[0]||en[1]!=yr[1])&&(Er.push(en),yr=en)}return Er.length===1&&nr.length>1&&Er.push(qe(nr[nr.length-1])),Er}function xt(nr){return nr.map(bt)}function _t(nr){if(nr==null)return nr;var yr;switch(nr.type){case"GeometryCollection":yr={type:"GeometryCollection",geometries:nr.geometries.map(_t)};break;case"Point":yr={type:"Point",coordinates:qe(nr.coordinates)};break;case"MultiPoint":yr={type:nr.type,coordinates:at(nr.coordinates)};break;case"LineString":yr={type:nr.type,coordinates:bt(nr.coordinates)};break;case"MultiLineString":case"Polygon":yr={type:nr.type,coordinates:xt(nr.coordinates)};break;case"MultiPolygon":yr={type:"MultiPolygon",coordinates:nr.coordinates.map(xt)};break;default:return nr}return nr.bbox!=null&&(yr.bbox=nr.bbox),yr}function or(nr){var yr={type:"Feature",properties:nr.properties,geometry:_t(nr.geometry)};return nr.id!=null&&(yr.id=nr.id),nr.bbox!=null&&(yr.bbox=nr.bbox),yr}if(Re!=null)switch(Re.type){case"Feature":return or(Re);case"FeatureCollection":{var hr={type:"FeatureCollection",features:Re.features.map(or)};return Re.bbox!=null&&(hr.bbox=Re.bbox),hr}default:return _t(Re)}return Re}function tr(Re){var He=v(Re);function qe(at,bt){var xt=He?x(at*He/2)/He:at/2;if(!bt)return[2*xt,-Re];var _t=2*e(xt*v(bt)),or=1/x(bt);return[v(_t)*or,bt+(1-n(_t))*or-Re]}return qe.invert=function(at,bt){if(A(bt+=Re)<l)return[He?2*e(He*at/2)/He:at,0];var xt=at*at+bt*bt,_t=0,or=10,hr;do{var nr=x(_t),yr=1/n(_t),Er=xt-2*bt*_t+_t*_t;_t-=hr=(nr*Er+2*(_t-bt))/(2+Er*yr*yr+2*(_t-bt)*nr)}while(A(hr)>l&&--or>0);var Vr=at*(nr=x(_t)),en=x(A(bt)<A(_t+1/nr)?z(Vr)*.5:I(Vr)*.5+s/4)/v(_t);return[He?2*e(He*en)/He:2*en,_t]},qe}function Cr(){return Qe(tr).scale(131.215)}var rn=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];rn.forEach(function(Re){Re[1]*=1.0144});function pn(Re,He){var qe=i(18,A(He)*36/s),at=r(qe),bt=qe-at,xt=(Er=rn[at])[0],_t=Er[1],or=(Er=rn[++at])[0],hr=Er[1],nr=(Er=rn[i(19,++at)])[0],yr=Er[1],Er;return[Re*(or+bt*(nr-xt)/2+bt*bt*(nr-2*or+xt)/2),(He>0?w:-w)*(hr+bt*(yr-_t)/2+bt*bt*(yr-2*hr+_t)/2)]}pn.invert=function(Re,He){var qe=He/w,at=qe*90,bt=i(18,A(at/5)),xt=o(0,r(bt));do{var _t=rn[xt][1],or=rn[xt+1][1],hr=rn[i(19,xt+2)][1],nr=hr-_t,yr=hr-2*or+_t,Er=2*(A(qe)-or)/nr,Vr=yr/nr,en=Er*(1-Vr*Er*(1-2*Vr*Er));if(en>=0||xt===1){at=(He>=0?5:-5)*(en+bt);var mn=50,Dn;do bt=i(18,A(at)/5),xt=r(bt),en=bt-xt,_t=rn[xt][1],or=rn[xt+1][1],hr=rn[i(19,xt+2)][1],at-=(Dn=(He>=0?w:-w)*(or+en*(hr-_t)/2+en*en*(hr-2*or+_t)/2)-He)*S;while(A(Dn)>_&&--mn>0);break}}while(--xt>=0);var Hn=rn[xt][0],da=rn[xt+1][0],ma=rn[i(19,xt+2)][0];return[Re/(da+en*(ma-Hn)/2+en*en*(ma-2*da+Hn)/2),at*k]};function wn(){return c.geoProjection(pn).scale(152.63)}function Cn(Re){function He(qe,at){var bt=n(at),xt=(Re-1)/(Re-bt*n(qe));return[xt*bt*v(qe),xt*v(at)]}return He.invert=function(qe,at){var bt=qe*qe+at*at,xt=D(bt),_t=(Re-D(1-bt*(Re+1)/(Re-1)))/((Re-1)/xt+xt/(Re-1));return[a(qe*_t,xt*D(1-_t*_t)),xt?z(at*_t/xt):0]},He}function On(Re,He){var qe=Cn(Re);if(!He)return qe;var at=n(He),bt=v(He);function xt(_t,or){var hr=qe(_t,or),nr=hr[1],yr=nr*bt/(Re-1)+at;return[hr[0]*at/yr,nr/yr]}return xt.invert=function(_t,or){var hr=(Re-1)/(Re-1-or*bt);return qe.invert(hr*_t,hr*or*at)},xt}function gn(){var Re=2,He=0,qe=c.geoProjectionMutator(On),at=qe(Re,He);return at.distance=function(bt){return arguments.length?qe(Re=+bt,He):Re},at.tilt=function(bt){return arguments.length?qe(Re,He=bt*k):He*S},at.scale(432.147).clipAngle(I(1/Re)*S-1e-6)}var In=1e-4,Pn=1e4,Un=-180,$n=Un+In,Fa=180,Ea=Fa-In,Ba=-90,Oa=Ba+In,Jn=90,ha=Jn-In;function Ga(Re){return Re.length>0}function Ka(Re){return Math.floor(Re*Pn)/Pn}function di(Re){return Re===Ba||Re===Jn?[0,Re]:[Un,Ka(Re)]}function gi(Re){var He=Re[0],qe=Re[1],at=!1;return He<=$n?(He=Un,at=!0):He>=Ea&&(He=Fa,at=!0),qe<=Oa?(qe=Ba,at=!0):qe>=ha&&(qe=Jn,at=!0),at?[He,qe]:Re}function mi(Re){return Re.map(gi)}function Ai(Re,He,qe){for(var at=0,bt=Re.length;at<bt;++at){var xt=Re[at].slice();qe.push({index:-1,polygon:He,ring:xt});for(var _t=0,or=xt.length;_t<or;++_t){var hr=xt[_t],nr=hr[0],yr=hr[1];if(nr<=$n||nr>=Ea||yr<=Oa||yr>=ha){xt[_t]=gi(hr);for(var Er=_t+1;Er<or;++Er){var Vr=xt[Er],en=Vr[0],mn=Vr[1];if(en>$n&&en<Ea&&mn>Oa&&mn<ha)break}if(Er===_t+1)continue;if(_t){var Dn={index:-1,polygon:He,ring:xt.slice(0,_t+1)};Dn.ring[Dn.ring.length-1]=di(yr),qe[qe.length-1]=Dn}else qe.pop();if(Er>=or)break;qe.push({index:-1,polygon:He,ring:xt=xt.slice(Er-1)}),xt[0]=di(xt[0][1]),_t=-1,or=xt.length}}}}function li(Re){var He,qe=Re.length,at={},bt={},xt,_t,or,hr,nr;for(He=0;He<qe;++He){if(xt=Re[He],_t=xt.ring[0],hr=xt.ring[xt.ring.length-1],_t[0]===hr[0]&&_t[1]===hr[1]){xt.polygon.push(xt.ring),Re[He]=null;continue}xt.index=He,at[_t]=bt[hr]=xt}for(He=0;He<qe;++He)if(xt=Re[He],xt){if(_t=xt.ring[0],hr=xt.ring[xt.ring.length-1],or=bt[_t],nr=at[hr],delete at[_t],delete bt[hr],_t[0]===hr[0]&&_t[1]===hr[1]){xt.polygon.push(xt.ring);continue}or?(delete bt[_t],delete at[or.ring[0]],or.ring.pop(),Re[or.index]=null,xt={index:-1,polygon:or.polygon,ring:or.ring.concat(xt.ring)},or===nr?xt.polygon.push(xt.ring):(xt.index=qe++,Re.push(at[xt.ring[0]]=bt[xt.ring[xt.ring.length-1]]=xt))):nr?(delete at[hr],delete bt[nr.ring[nr.ring.length-1]],xt.ring.pop(),xt={index:qe++,polygon:nr.polygon,ring:xt.ring.concat(nr.ring)},Re[nr.index]=null,Re.push(at[xt.ring[0]]=bt[xt.ring[xt.ring.length-1]]=xt)):(xt.ring.push(xt.ring[0]),xt.polygon.push(xt.ring))}}function yo(Re){var He={type:"Feature",geometry:qi(Re.geometry)};return Re.id!=null&&(He.id=Re.id),Re.bbox!=null&&(He.bbox=Re.bbox),Re.properties!=null&&(He.properties=Re.properties),He}function qi(Re){if(Re==null)return Re;var He,qe,at,bt;switch(Re.type){case"GeometryCollection":He={type:"GeometryCollection",geometries:Re.geometries.map(qi)};break;case"Point":He={type:"Point",coordinates:gi(Re.coordinates)};break;case"MultiPoint":case"LineString":He={type:Re.type,coordinates:mi(Re.coordinates)};break;case"MultiLineString":He={type:"MultiLineString",coordinates:Re.coordinates.map(mi)};break;case"Polygon":{var xt=[];Ai(Re.coordinates,xt,qe=[]),li(qe),He={type:"Polygon",coordinates:xt};break}case"MultiPolygon":{qe=[],at=-1,bt=Re.coordinates.length;for(var _t=new Array(bt);++at<bt;)Ai(Re.coordinates[at],_t[at]=[],qe);li(qe),He={type:"MultiPolygon",coordinates:_t.filter(Ga)};break}default:return Re}return Re.bbox!=null&&(He.bbox=Re.bbox),He}function ja(Re){if(Re==null)return Re;switch(Re.type){case"Feature":return yo(Re);case"FeatureCollection":{var He={type:"FeatureCollection",features:Re.features.map(yo)};return Re.bbox!=null&&(He.bbox=Re.bbox),He}default:return qi(Re)}}function va(Re,He){var qe=x(He/2),at=v(b*qe);return[Re*(.74482-.34588*at*at),1.70711*qe]}va.invert=function(Re,He){var qe=He/1.70711,at=v(b*qe);return[Re/(.74482-.34588*at*at),2*e(qe)]};function xi(){return c.geoProjection(va).scale(146.153)}function uo(Re,He,qe){var at=c.geoInterpolate(He,qe),bt=at(.5),xt=c.geoRotation([-bt[0],-bt[1]])(He),_t=at.distance/2,or=-z(v(xt[1]*k)/v(_t)),hr=[-bt[0],-bt[1],-(xt[0]>0?s-or:or)*S],nr=c.geoProjection(Re(_t)).rotate(hr),yr=c.geoRotation(hr),Er=nr.center;return delete nr.rotate,nr.center=function(Vr){return arguments.length?Er(yr(Vr)):yr.invert(Er())},nr.clipAngle(90)}function vo(Re){var He=n(Re);function qe(at,bt){var xt=c.geoGnomonicRaw(at,bt);return xt[0]*=He,xt}return qe.invert=function(at,bt){return c.geoGnomonicRaw.invert(at/He,bt)},qe}function os(){return Ms([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Ms(Re,He){return uo(vo,Re,He)}function Ro(Re){if(!(Re*=2))return c.geoAzimuthalEquidistantRaw;var He=-Re/2,qe=-He,at=Re*Re,bt=x(qe),xt=.5/v(qe);function _t(or,hr){var nr=I(n(hr)*n(or-He)),yr=I(n(hr)*n(or-qe)),Er=hr<0?-1:1;return nr*=nr,yr*=yr,[(nr-yr)/(2*Re),Er*D(4*at*yr-(at-nr+yr)*(at-nr+yr))/(2*Re)]}return _t.invert=function(or,hr){var nr=hr*hr,yr=n(D(nr+(Vr=or+He)*Vr)),Er=n(D(nr+(Vr=or+qe)*Vr)),Vr,en;return[a(en=yr-Er,Vr=(yr+Er)*bt),(hr<0?-1:1)*I(D(Vr*Vr+en*en)*xt)]},_t}function Ks(){return gs([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function gs(Re,He){return uo(Ro,Re,He)}function ss(Re,He){if(A(He)<l)return[Re,0];var qe=A(He/w),at=z(qe);if(A(Re)<l||A(A(He)-w)<l)return[0,y(He)*s*x(at/2)];var bt=n(at),xt=A(s/Re-Re/s)/2,_t=xt*xt,or=bt/(qe+bt-1),hr=or*(2/qe-1),nr=hr*hr,yr=nr+_t,Er=or-nr,Vr=_t+or;return[y(Re)*s*(xt*Er+D(_t*Er*Er-yr*(or*or-nr)))/yr,y(He)*s*(hr*Vr-xt*D((_t+1)*yr-Vr*Vr))/yr]}ss.invert=function(Re,He){if(A(He)<l)return[Re,0];if(A(Re)<l)return[0,w*v(2*e(He/s))];var qe=(Re/=s)*Re,at=(He/=s)*He,bt=qe+at,xt=bt*bt,_t=-A(He)*(1+bt),or=_t-2*at+qe,hr=-2*_t+1+2*at+xt,nr=at/hr+(2*or*or*or/(hr*hr*hr)-9*_t*or/(hr*hr))/27,yr=(_t-or*or/(3*hr))/hr,Er=2*D(-yr/3),Vr=I(3*nr/(yr*Er))/3;return[s*(bt-1+D(1+2*(qe-at)+xt))/(2*Re),y(He)*s*(-Er*n(Vr+s/3)-or/(3*hr))]};function mo(){return c.geoProjection(ss).scale(79.4183)}function Fl(Re,He){if(A(He)<l)return[Re,0];var qe=A(He/w),at=z(qe);if(A(Re)<l||A(A(He)-w)<l)return[0,y(He)*s*x(at/2)];var bt=n(at),xt=A(s/Re-Re/s)/2,_t=xt*xt,or=bt*(D(1+_t)-xt*bt)/(1+_t*qe*qe);return[y(Re)*s*or,y(He)*s*D(1-or*(2*xt+or))]}Fl.invert=function(Re,He){if(!Re)return[0,w*v(2*e(He/s))];var qe=A(Re/s),at=(1-qe*qe-(He/=s)*He)/(2*qe),bt=at*at,xt=D(bt+1);return[y(Re)*s*(xt-at),y(He)*w*v(2*a(D((1-2*at*qe)*(at+xt)-qe),D(xt+at+qe)))]};function Kl(){return c.geoProjection(Fl).scale(79.4183)}function ls(Re,He){if(A(He)<l)return[Re,0];var qe=He/w,at=z(qe);if(A(Re)<l||A(A(He)-w)<l)return[0,s*x(at/2)];var bt=(s/Re-Re/s)/2,xt=qe/(1+n(at));return[s*(y(Re)*D(bt*bt+1-xt*xt)-bt),s*xt]}ls.invert=function(Re,He){if(!He)return[Re,0];var qe=He/s,at=(s*s*(1-qe*qe)-Re*Re)/(2*s*Re);return[Re?s*(y(Re)*D(at*at+1)-at):0,w*v(2*e(qe))]};function vu(){return c.geoProjection(ls).scale(79.4183)}function Bl(Re,He){if(!He)return[Re,0];var qe=A(He);if(!Re||qe===w)return[0,He];var at=qe/w,bt=at*at,xt=(8*at-bt*(bt+2)-5)/(2*bt*(at-1)),_t=xt*xt,or=at*xt,hr=bt+_t+2*or,nr=at+3*xt,yr=Re/w,Er=yr+1/yr,Vr=y(A(Re)-w)*D(Er*Er-4),en=Vr*Vr,mn=hr*(bt+_t*en-1)+(1-bt)*(bt*(nr*nr+4*_t)+12*or*_t+4*_t*_t),Dn=(Vr*(hr+_t-1)+2*D(mn))/(4*hr+en);return[y(Re)*w*Dn,y(He)*w*D(1+Vr*A(Dn)-Dn*Dn)]}Bl.invert=function(Re,He){var qe;if(!Re||!He)return[Re,He];He/=s;var at=y(Re)*Re/w,bt=(at*at-1+4*He*He)/A(at),xt=bt*bt,_t=2*He,or=50;do{var hr=_t*_t,nr=(8*_t-hr*(hr+2)-5)/(2*hr*(_t-1)),yr=(3*_t-hr*_t-10)/(2*hr*_t),Er=nr*nr,Vr=_t*nr,en=_t+nr,mn=en*en,Dn=_t+3*nr,Hn=mn*(hr+Er*xt-1)+(1-hr)*(hr*(Dn*Dn+4*Er)+Er*(12*Vr+4*Er)),da=-2*en*(4*Vr*Er+(1-4*hr+3*hr*hr)*(1+yr)+Er*(-6+14*hr-xt+(-8+8*hr-2*xt)*yr)+Vr*(-8+12*hr+(-10+10*hr-xt)*yr)),ma=D(Hn),Za=bt*(mn+Er-1)+2*ma-at*(4*mn+xt),Ya=bt*(2*nr*yr+2*en*(1+yr))+da/ma-8*en*(bt*(-1+Er+mn)+2*ma)*(1+yr)/(xt+4*mn);_t-=qe=Za/Ya}while(qe>l&&--or>0);return[y(Re)*(D(bt*bt+4)+bt)*s/4,w*_t]};function cf(){return c.geoProjection(Bl).scale(127.16)}function Cu(Re,He,qe,at,bt){function xt(_t,or){var hr=qe*v(at*or),nr=D(1-hr*hr),yr=D(2/(1+nr*n(_t*=bt)));return[Re*nr*yr*v(_t),He*hr*yr]}return xt.invert=function(_t,or){var hr=_t/Re,nr=or/He,yr=D(hr*hr+nr*nr),Er=2*z(yr/2);return[a(_t*x(Er),Re*yr)/bt,yr&&z(or*v(Er)/(He*qe*yr))/at]},xt}function pu(Re,He,qe,at){var bt=s/3;Re=o(Re,l),He=o(He,l),Re=i(Re,w),He=i(He,s-l),qe=o(qe,0),qe=i(qe,100-l),at=o(at,l);var xt=qe/100+1,_t=at/100,or=I(xt*n(bt))/bt,hr=v(Re)/v(or*w),nr=He/s,yr=D(_t*v(Re/2)/v(He/2)),Er=yr/D(nr*hr*or),Vr=1/(yr*D(nr*hr*or));return Cu(Er,Vr,hr,or,nr)}function Lu(){var Re=65*k,He=60*k,qe=20,at=200,bt=c.geoProjectionMutator(pu),xt=bt(Re,He,qe,at);return xt.poleline=function(_t){return arguments.length?bt(Re=+_t*k,He,qe,at):Re*S},xt.parallels=function(_t){return arguments.length?bt(Re,He=+_t*k,qe,at):He*S},xt.inflation=function(_t){return arguments.length?bt(Re,He,qe=+_t,at):qe},xt.ratio=function(_t){return arguments.length?bt(Re,He,qe,at=+_t):at},xt.scale(163.775)}function Ss(){return Lu().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Yu=4*s+3*D(3),Pu=2*D(2*s*D(3)/Yu),Du=_e(Pu*D(3)/s,Pu,Yu/6);function Io(){return c.geoProjection(Du).scale(176.84)}function Ru(Re,He){return[Re*D(1-3*He*He/(s*s)),He]}Ru.invert=function(Re,He){return[Re/D(1-3*He*He/(s*s)),He]};function Ju(){return c.geoProjection(Ru).scale(152.63)}function ys(Re,He){var qe=n(He),at=n(Re)*qe,bt=1-at,xt=n(Re=a(v(Re)*qe,-v(He))),_t=v(Re);return qe=D(1-at*at),[_t*qe-xt*bt,-xt*qe-_t*bt]}ys.invert=function(Re,He){var qe=(Re*Re+He*He)/-2,at=D(-qe*(2+qe)),bt=He*qe+Re*at,xt=Re*qe-He*at,_t=D(xt*xt+bt*bt);return[a(at*bt,_t*(1+qe)),_t?-z(at*xt/_t):0]};function du(){return c.geoProjection(ys).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function gu(Re,He){var qe=G(Re,He);return[(qe[0]+Re/w)/2,(qe[1]+He)/2]}gu.invert=function(Re,He){var qe=Re,at=He,bt=25;do{var xt=n(at),_t=v(at),or=v(2*at),hr=_t*_t,nr=xt*xt,yr=v(qe),Er=n(qe/2),Vr=v(qe/2),en=Vr*Vr,mn=1-nr*Er*Er,Dn=mn?I(xt*Er)*D(Hn=1/mn):Hn=0,Hn,da=.5*(2*Dn*xt*Vr+qe/w)-Re,ma=.5*(Dn*_t+at)-He,Za=.5*Hn*(nr*en+Dn*xt*Er*hr)+.5/w,Ya=Hn*(yr*or/4-Dn*_t*Vr),qa=.125*Hn*(or*Vr-Dn*_t*nr*yr),hi=.5*Hn*(hr*Er+Dn*en*xt)+.5,ao=Ya*qa-hi*Za,ri=(ma*Ya-da*hi)/ao,Hi=(da*qa-ma*Za)/ao;qe-=ri,at-=Hi}while((A(ri)>l||A(Hi)>l)&&--bt>0);return[qe,at]};function Iu(){return c.geoProjection(gu).scale(158.837)}T.geoNaturalEarth=c.geoNaturalEarth1,T.geoNaturalEarthRaw=c.geoNaturalEarth1Raw,T.geoAiry=J,T.geoAiryRaw=K,T.geoAitoff=Z,T.geoAitoffRaw=G,T.geoArmadillo=se,T.geoArmadilloRaw=re,T.geoAugust=N,T.geoAugustRaw=oe,T.geoBaker=W,T.geoBakerRaw=Q,T.geoBerghaus=te,T.geoBerghausRaw=X,T.geoBertin1953=ge,T.geoBertin1953Raw=pe,T.geoBoggs=Ve,T.geoBoggsRaw=Pe,T.geoBonne=dt,T.geoBonneRaw=Ne,T.geoBottomley=Xt,T.geoBottomleyRaw=Dt,T.geoBromley=zt,T.geoBromleyRaw=Tt,T.geoChamberlin=ke,T.geoChamberlinRaw=rt,T.geoChamberlinAfrica=Ze,T.geoCollignon=Je,T.geoCollignonRaw=Ge,T.geoCraig=Pt,T.geoCraigRaw=it,T.geoCraster=Jt,T.geoCrasterRaw=Ot,T.geoCylindricalEqualArea=qt,T.geoCylindricalEqualAreaRaw=Bt,T.geoCylindricalStereographic=er,T.geoCylindricalStereographicRaw=rr,T.geoEckert1=Xr,T.geoEckert1Raw=pr,T.geoEckert2=$r,T.geoEckert2Raw=hn,T.geoEckert3=Gt,T.geoEckert3Raw=nt,T.geoEckert4=Ht,T.geoEckert4Raw=Kt,T.geoEckert5=tt,T.geoEckert5Raw=_r,T.geoEckert6=st,T.geoEckert6Raw=je,T.geoEisenlohr=Se,T.geoEisenlohrRaw=Me,T.geoFahey=ot,T.geoFaheyRaw=Xe,T.geoFoucaut=vt,T.geoFoucautRaw=pt,T.geoFoucautSinusoidal=St,T.geoFoucautSinusoidalRaw=Ct,T.geoGilbert=lr,T.geoGingery=Jr,T.geoGingeryRaw=Yr,T.geoGinzburg4=Ur,T.geoGinzburg4Raw=mr,T.geoGinzburg5=Tr,T.geoGinzburg5Raw=Hr,T.geoGinzburg6=Lt,T.geoGinzburg6Raw=et,T.geoGinzburg8=sr,T.geoGinzburg8Raw=jt,T.geoGinzburg9=Zr,T.geoGinzburg9Raw=Ir,T.geoGringorten=_n,T.geoGringortenRaw=br,T.geoGuyou=$a,T.geoGuyouRaw=Aa,T.geoHammer=le,T.geoHammerRaw=ee,T.geoHammerRetroazimuthal=Mr,T.geoHammerRetroazimuthalRaw=Va,T.geoHealpix=wa,T.geoHealpixRaw=Gn,T.geoHill=Ft,T.geoHillRaw=si,T.geoHomolosine=xn,T.geoHomolosineRaw=Sn,T.geoHufnagel=xr,T.geoHufnagelRaw=tn,T.geoHyperelliptical=Bn,T.geoHyperellipticalRaw=dn,T.geoInterrupt=ta,T.geoInterruptedBoggs=ya,T.geoInterruptedHomolosine=Da,T.geoInterruptedMollweide=Vo,T.geoInterruptedMollweideHemispheres=tl,T.geoInterruptedSinuMollweide=Hl,T.geoInterruptedSinusoidal=Vs,T.geoKavrayskiy7=Ui,T.geoKavrayskiy7Raw=Ps,T.geoLagrange=vl,T.geoLagrangeRaw=Ao,T.geoLarrivee=rl,T.geoLarriveeRaw=Di,T.geoLaskowski=Fi,T.geoLaskowskiRaw=Ki,T.geoLittrow=Ji,T.geoLittrowRaw=no,T.geoLoximuthal=Hs,T.geoLoximuthalRaw=es,T.geoMiller=jo,T.geoMillerRaw=ru,T.geoModifiedStereographic=_s,T.geoModifiedStereographicRaw=nu,T.geoModifiedStereographicAlaska=El,T.geoModifiedStereographicGs48=Au,T.geoModifiedStereographicGs50=Mu,T.geoModifiedStereographicMiller=Gs,T.geoModifiedStereographicLee=Cl,T.geoMollweide=Oe,T.geoMollweideRaw=De,T.geoMtFlatPolarParabolic=au,T.geoMtFlatPolarParabolicRaw=Yl,T.geoMtFlatPolarQuartic=Su,T.geoMtFlatPolarQuarticRaw=Ll,T.geoMtFlatPolarSinusoidal=Wl,T.geoMtFlatPolarSinusoidalRaw=Ys,T.geoNaturalEarth2=vs,T.geoNaturalEarth2Raw=Pl,T.geoNellHammer=Xl,T.geoNellHammerRaw=pl,T.geoInterruptedQuarticAuthalic=ou,T.geoNicolosi=ku,T.geoNicolosiRaw=Dl,T.geoPatterson=so,T.geoPattersonRaw=Ts,T.geoPolyconic=yl,T.geoPolyconicRaw=dl,T.geoPolyhedral=Xs,T.geoPolyhedralButterfly=_l,T.geoPolyhedralCollignon=Gu,T.geoPolyhedralWaterman=Ri,T.geoProject=ns,T.geoGringortenQuincuncial=mt,T.geoPeirceQuincuncial=It,T.geoPierceQuincuncial=It,T.geoQuantize=ur,T.geoQuincuncial=hu,T.geoRectangularPolyconic=Cr,T.geoRectangularPolyconicRaw=tr,T.geoRobinson=wn,T.geoRobinsonRaw=pn,T.geoSatellite=gn,T.geoSatelliteRaw=On,T.geoSinuMollweide=on,T.geoSinuMollweideRaw=nn,T.geoSinusoidal=Le,T.geoSinusoidalRaw=Fe,T.geoStitch=ja,T.geoTimes=xi,T.geoTimesRaw=va,T.geoTwoPointAzimuthal=Ms,T.geoTwoPointAzimuthalRaw=vo,T.geoTwoPointAzimuthalUsa=os,T.geoTwoPointEquidistant=gs,T.geoTwoPointEquidistantRaw=Ro,T.geoTwoPointEquidistantUsa=Ks,T.geoVanDerGrinten=mo,T.geoVanDerGrintenRaw=ss,T.geoVanDerGrinten2=Kl,T.geoVanDerGrinten2Raw=Fl,T.geoVanDerGrinten3=vu,T.geoVanDerGrinten3Raw=ls,T.geoVanDerGrinten4=cf,T.geoVanDerGrinten4Raw=Bl,T.geoWagner=Lu,T.geoWagner7=Ss,T.geoWagnerRaw=pu,T.geoWagner4=Io,T.geoWagner4Raw=Du,T.geoWagner6=Ju,T.geoWagner6Raw=Ru,T.geoWiechel=du,T.geoWiechelRaw=ys,T.geoWinkel3=Iu,T.geoWinkel3Raw=gu,Object.defineProperty(T,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae,g("d3-array")):(T=T||self,c(T.d3=T.d3||{},T.d3))})(this,function(T,c){function M(){return new A}function A(){this.reset()}A.prototype={constructor:A,reset:function(){this.s=this.t=0},add:function(mt){a(e,mt,this.t),a(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new A;function a(mt,It,ur){var tr=mt.s=It+ur,Cr=tr-It,rn=tr-Cr;mt.t=It-rn+(ur-Cr)}var n=1e-6,t=1e-12,r=Math.PI,f=r/2,o=r/4,i=r*2,p=180/r,d=r/180,y=Math.abs,v=Math.atan,x=Math.atan2,l=Math.cos,_=Math.ceil,s=Math.exp,w=Math.log,b=Math.pow,h=Math.sin,m=Math.sign||function(mt){return mt>0?1:mt<0?-1:0},u=Math.sqrt,L=Math.tan;function S(mt){return mt>1?0:mt<-1?r:Math.acos(mt)}function k(mt){return mt>1?f:mt<-1?-f:Math.asin(mt)}function P(mt){return(mt=h(mt/2))*mt}function z(){}function I(mt,It){mt&&R.hasOwnProperty(mt.type)&&R[mt.type](mt,It)}var D={Feature:function(mt,It){I(mt.geometry,It)},FeatureCollection:function(mt,It){for(var ur=mt.features,tr=-1,Cr=ur.length;++tr<Cr;)I(ur[tr].geometry,It)}},R={Sphere:function(mt,It){It.sphere()},Point:function(mt,It){mt=mt.coordinates,It.point(mt[0],mt[1],mt[2])},MultiPoint:function(mt,It){for(var ur=mt.coordinates,tr=-1,Cr=ur.length;++tr<Cr;)mt=ur[tr],It.point(mt[0],mt[1],mt[2])},LineString:function(mt,It){B(mt.coordinates,It,0)},MultiLineString:function(mt,It){for(var ur=mt.coordinates,tr=-1,Cr=ur.length;++tr<Cr;)B(ur[tr],It,0)},Polygon:function(mt,It){F(mt.coordinates,It)},MultiPolygon:function(mt,It){for(var ur=mt.coordinates,tr=-1,Cr=ur.length;++tr<Cr;)F(ur[tr],It)},GeometryCollection:function(mt,It){for(var ur=mt.geometries,tr=-1,Cr=ur.length;++tr<Cr;)I(ur[tr],It)}};function B(mt,It,ur){var tr=-1,Cr=mt.length-ur,rn;for(It.lineStart();++tr<Cr;)rn=mt[tr],It.point(rn[0],rn[1],rn[2]);It.lineEnd()}function F(mt,It){var ur=-1,tr=mt.length;for(It.polygonStart();++ur<tr;)B(mt[ur],It,1);It.polygonEnd()}function V(mt,It){mt&&D.hasOwnProperty(mt.type)?D[mt.type](mt,It):I(mt,It)}var Y=M(),K=M(),J,G,Z,re,se,oe={point:z,lineStart:z,lineEnd:z,polygonStart:function(){Y.reset(),oe.lineStart=N,oe.lineEnd=U},polygonEnd:function(){var mt=+Y;K.add(mt<0?i+mt:mt),this.lineStart=this.lineEnd=this.point=z},sphere:function(){K.add(i)}};function N(){oe.point=q}function U(){Q(J,G)}function q(mt,It){oe.point=Q,J=mt,G=It,mt*=d,It*=d,Z=mt,re=l(It=It/2+o),se=h(It)}function Q(mt,It){mt*=d,It*=d,It=It/2+o;var ur=mt-Z,tr=ur>=0?1:-1,Cr=tr*ur,rn=l(It),pn=h(It),wn=se*pn,Cn=re*rn+wn*l(Cr),On=wn*tr*h(Cr);Y.add(x(On,Cn)),Z=mt,re=rn,se=pn}function W(mt){return K.reset(),V(mt,oe),K*2}function X(mt){return[x(mt[1],mt[0]),k(mt[2])]}function te(mt){var It=mt[0],ur=mt[1],tr=l(ur);return[tr*l(It),tr*h(It),h(ur)]}function ee(mt,It){return mt[0]*It[0]+mt[1]*It[1]+mt[2]*It[2]}function ie(mt,It){return[mt[1]*It[2]-mt[2]*It[1],mt[2]*It[0]-mt[0]*It[2],mt[0]*It[1]-mt[1]*It[0]]}function le(mt,It){mt[0]+=It[0],mt[1]+=It[1],mt[2]+=It[2]}function ye(mt,It){return[mt[0]*It,mt[1]*It,mt[2]*It]}function ue(mt){var It=u(mt[0]*mt[0]+mt[1]*mt[1]+mt[2]*mt[2]);mt[0]/=It,mt[1]/=It,mt[2]/=It}var pe,ge,Te,_e,De,Oe,Ue,xe,Pe=M(),Ve,Qe,Fe={point:Le,lineStart:dt,lineEnd:Dt,polygonStart:function(){Fe.point=Xt,Fe.lineStart=Tt,Fe.lineEnd=zt,Pe.reset(),oe.polygonStart()},polygonEnd:function(){oe.polygonEnd(),Fe.point=Le,Fe.lineStart=dt,Fe.lineEnd=Dt,Y<0?(pe=-(Te=180),ge=-(_e=90)):Pe>n?_e=90:Pe<-n&&(ge=-90),Qe[0]=pe,Qe[1]=Te},sphere:function(){pe=-(Te=180),ge=-(_e=90)}};function Le(mt,It){Ve.push(Qe=[pe=mt,Te=mt]),It<ge&&(ge=It),It>_e&&(_e=It)}function Ne(mt,It){var ur=te([mt*d,It*d]);if(xe){var tr=ie(xe,ur),Cr=[tr[1],-tr[0],0],rn=ie(Cr,tr);ue(rn),rn=X(rn);var pn=mt-De,wn=pn>0?1:-1,Cn=rn[0]*p*wn,On,gn=y(pn)>180;gn^(wn*De<Cn&&Cn<wn*mt)?(On=rn[1]*p,On>_e&&(_e=On)):(Cn=(Cn+360)%360-180,gn^(wn*De<Cn&&Cn<wn*mt)?(On=-rn[1]*p,On<ge&&(ge=On)):(It<ge&&(ge=It),It>_e&&(_e=It))),gn?mt<De?Ut(pe,mt)>Ut(pe,Te)&&(Te=mt):Ut(mt,Te)>Ut(pe,Te)&&(pe=mt):Te>=pe?(mt<pe&&(pe=mt),mt>Te&&(Te=mt)):mt>De?Ut(pe,mt)>Ut(pe,Te)&&(Te=mt):Ut(mt,Te)>Ut(pe,Te)&&(pe=mt)}else Ve.push(Qe=[pe=mt,Te=mt]);It<ge&&(ge=It),It>_e&&(_e=It),xe=ur,De=mt}function dt(){Fe.point=Ne}function Dt(){Qe[0]=pe,Qe[1]=Te,Fe.point=Le,xe=null}function Xt(mt,It){if(xe){var ur=mt-De;Pe.add(y(ur)>180?ur+(ur>0?360:-360):ur)}else Oe=mt,Ue=It;oe.point(mt,It),Ne(mt,It)}function Tt(){oe.lineStart()}function zt(){Xt(Oe,Ue),oe.lineEnd(),y(Pe)>n&&(pe=-(Te=180)),Qe[0]=pe,Qe[1]=Te,xe=null}function Ut(mt,It){return(It-=mt)<0?It+360:It}function Et(mt,It){return mt[0]-It[0]}function Mt(mt,It){return mt[0]<=mt[1]?mt[0]<=It&&It<=mt[1]:It<mt[0]||mt[1]<It}function rt(mt){var It,ur,tr,Cr,rn,pn,wn;if(_e=Te=-(pe=ge=1/0),Ve=[],V(mt,Fe),ur=Ve.length){for(Ve.sort(Et),It=1,tr=Ve[0],rn=[tr];It<ur;++It)Cr=Ve[It],Mt(tr,Cr[0])||Mt(tr,Cr[1])?(Ut(tr[0],Cr[1])>Ut(tr[0],tr[1])&&(tr[1]=Cr[1]),Ut(Cr[0],tr[1])>Ut(tr[0],tr[1])&&(tr[0]=Cr[0])):rn.push(tr=Cr);for(pn=-1/0,ur=rn.length-1,It=0,tr=rn[ur];It<=ur;tr=Cr,++It)Cr=rn[It],(wn=Ut(tr[1],Cr[0]))>pn&&(pn=wn,pe=Cr[0],Te=tr[1])}return Ve=Qe=null,pe===1/0||ge===1/0?[[NaN,NaN],[NaN,NaN]]:[[pe,ge],[Te,_e]]}var ct,Ze,ke,Ge,Je,it,Pt,At,Ot,Jt,Bt,qt,rr,er,pr,Xr,hn={sphere:z,point:$r,lineStart:Gt,lineEnd:_r,polygonStart:function(){hn.lineStart=tt,hn.lineEnd=je},polygonEnd:function(){hn.lineStart=Gt,hn.lineEnd=_r}};function $r(mt,It){mt*=d,It*=d;var ur=l(It);nt(ur*l(mt),ur*h(mt),h(It))}function nt(mt,It,ur){++ct,ke+=(mt-ke)/ct,Ge+=(It-Ge)/ct,Je+=(ur-Je)/ct}function Gt(){hn.point=Kt}function Kt(mt,It){mt*=d,It*=d;var ur=l(It);er=ur*l(mt),pr=ur*h(mt),Xr=h(It),hn.point=Ht,nt(er,pr,Xr)}function Ht(mt,It){mt*=d,It*=d;var ur=l(It),tr=ur*l(mt),Cr=ur*h(mt),rn=h(It),pn=x(u((pn=pr*rn-Xr*Cr)*pn+(pn=Xr*tr-er*rn)*pn+(pn=er*Cr-pr*tr)*pn),er*tr+pr*Cr+Xr*rn);Ze+=pn,it+=pn*(er+(er=tr)),Pt+=pn*(pr+(pr=Cr)),At+=pn*(Xr+(Xr=rn)),nt(er,pr,Xr)}function _r(){hn.point=$r}function tt(){hn.point=st}function je(){ft(qt,rr),hn.point=$r}function st(mt,It){qt=mt,rr=It,mt*=d,It*=d,hn.point=ft;var ur=l(It);er=ur*l(mt),pr=ur*h(mt),Xr=h(It),nt(er,pr,Xr)}function ft(mt,It){mt*=d,It*=d;var ur=l(It),tr=ur*l(mt),Cr=ur*h(mt),rn=h(It),pn=pr*rn-Xr*Cr,wn=Xr*tr-er*rn,Cn=er*Cr-pr*tr,On=u(pn*pn+wn*wn+Cn*Cn),gn=k(On),In=On&&-gn/On;Ot+=In*pn,Jt+=In*wn,Bt+=In*Cn,Ze+=gn,it+=gn*(er+(er=tr)),Pt+=gn*(pr+(pr=Cr)),At+=gn*(Xr+(Xr=rn)),nt(er,pr,Xr)}function Me(mt){ct=Ze=ke=Ge=Je=it=Pt=At=Ot=Jt=Bt=0,V(mt,hn);var It=Ot,ur=Jt,tr=Bt,Cr=It*It+ur*ur+tr*tr;return Cr<t&&(It=it,ur=Pt,tr=At,Ze<n&&(It=ke,ur=Ge,tr=Je),Cr=It*It+ur*ur+tr*tr,Cr<t)?[NaN,NaN]:[x(ur,It)*p,k(tr/u(Cr))*p]}function Se(mt){return function(){return mt}}function Ke(mt,It){function ur(tr,Cr){return tr=mt(tr,Cr),It(tr[0],tr[1])}return mt.invert&&It.invert&&(ur.invert=function(tr,Cr){return tr=It.invert(tr,Cr),tr&&mt.invert(tr[0],tr[1])}),ur}function Xe(mt,It){return[y(mt)>r?mt+Math.round(-mt/i)*i:mt,It]}Xe.invert=Xe;function ot(mt,It,ur){return(mt%=i)?It||ur?Ke(vt(mt),Ct(It,ur)):vt(mt):It||ur?Ct(It,ur):Xe}function pt(mt){return function(It,ur){return It+=mt,[It>r?It-i:It<-r?It+i:It,ur]}}function vt(mt){var It=pt(mt);return It.invert=pt(-mt),It}function Ct(mt,It){var ur=l(mt),tr=h(mt),Cr=l(It),rn=h(It);function pn(wn,Cn){var On=l(Cn),gn=l(wn)*On,In=h(wn)*On,Pn=h(Cn),Un=Pn*ur+gn*tr;return[x(In*Cr-Un*rn,gn*ur-Pn*tr),k(Un*Cr+In*rn)]}return pn.invert=function(wn,Cn){var On=l(Cn),gn=l(wn)*On,In=h(wn)*On,Pn=h(Cn),Un=Pn*Cr-In*rn;return[x(In*Cr+Pn*rn,gn*ur+Un*tr),k(Un*ur-gn*tr)]},pn}function St(mt){mt=ot(mt[0]*d,mt[1]*d,mt.length>2?mt[2]*d:0);function It(ur){return ur=mt(ur[0]*d,ur[1]*d),ur[0]*=p,ur[1]*=p,ur}return It.invert=function(ur){return ur=mt.invert(ur[0]*d,ur[1]*d),ur[0]*=p,ur[1]*=p,ur},It}function Nt(mt,It,ur,tr,Cr,rn){if(!!ur){var pn=l(It),wn=h(It),Cn=tr*ur;Cr==null?(Cr=It+tr*i,rn=It-Cn/2):(Cr=ir(pn,Cr),rn=ir(pn,rn),(tr>0?Cr<rn:Cr>rn)&&(Cr+=tr*i));for(var On,gn=Cr;tr>0?gn>rn:gn<rn;gn-=Cn)On=X([pn,-wn*l(gn),-wn*h(gn)]),mt.point(On[0],On[1])}}function ir(mt,It){It=te(It),It[0]-=mt,ue(It);var ur=S(-It[1]);return((-It[2]<0?-ur:ur)+i-n)%i}function lr(){var mt=Se([0,0]),It=Se(90),ur=Se(6),tr,Cr,rn={point:pn};function pn(Cn,On){tr.push(Cn=Cr(Cn,On)),Cn[0]*=p,Cn[1]*=p}function wn(){var Cn=mt.apply(this,arguments),On=It.apply(this,arguments)*d,gn=ur.apply(this,arguments)*d;return tr=[],Cr=ot(-Cn[0]*d,-Cn[1]*d,0).invert,Nt(rn,On,gn,1),Cn={type:"Polygon",coordinates:[tr]},tr=Cr=null,Cn}return wn.center=function(Cn){return arguments.length?(mt=typeof Cn=="function"?Cn:Se([+Cn[0],+Cn[1]]),wn):mt},wn.radius=function(Cn){return arguments.length?(It=typeof Cn=="function"?Cn:Se(+Cn),wn):It},wn.precision=function(Cn){return arguments.length?(ur=typeof Cn=="function"?Cn:Se(+Cn),wn):ur},wn}function Yr(){var mt=[],It;return{point:function(ur,tr,Cr){It.push([ur,tr,Cr])},lineStart:function(){mt.push(It=[])},lineEnd:z,rejoin:function(){mt.length>1&&mt.push(mt.pop().concat(mt.shift()))},result:function(){var ur=mt;return mt=[],It=null,ur}}}function Pr(mt,It){return y(mt[0]-It[0])<n&&y(mt[1]-It[1])<n}function wr(mt,It,ur,tr){this.x=mt,this.z=It,this.o=ur,this.e=tr,this.v=!1,this.n=this.p=null}function Jr(mt,It,ur,tr,Cr){var rn=[],pn=[],wn,Cn;if(mt.forEach(function($n){if(!((Fa=$n.length-1)<=0)){var Fa,Ea=$n[0],Ba=$n[Fa],Oa;if(Pr(Ea,Ba)){if(!Ea[2]&&!Ba[2]){for(Cr.lineStart(),wn=0;wn<Fa;++wn)Cr.point((Ea=$n[wn])[0],Ea[1]);Cr.lineEnd();return}Ba[0]+=2*n}rn.push(Oa=new wr(Ea,$n,null,!0)),pn.push(Oa.o=new wr(Ea,null,Oa,!1)),rn.push(Oa=new wr(Ba,$n,null,!1)),pn.push(Oa.o=new wr(Ba,null,Oa,!0))}}),!!rn.length){for(pn.sort(It),gr(rn),gr(pn),wn=0,Cn=pn.length;wn<Cn;++wn)pn[wn].e=ur=!ur;for(var On=rn[0],gn,In;;){for(var Pn=On,Un=!0;Pn.v;)if((Pn=Pn.n)===On)return;gn=Pn.z,Cr.lineStart();do{if(Pn.v=Pn.o.v=!0,Pn.e){if(Un)for(wn=0,Cn=gn.length;wn<Cn;++wn)Cr.point((In=gn[wn])[0],In[1]);else tr(Pn.x,Pn.n.x,1,Cr);Pn=Pn.n}else{if(Un)for(gn=Pn.p.z,wn=gn.length-1;wn>=0;--wn)Cr.point((In=gn[wn])[0],In[1]);else tr(Pn.x,Pn.p.x,-1,Cr);Pn=Pn.p}Pn=Pn.o,gn=Pn.z,Un=!Un}while(!Pn.v);Cr.lineEnd()}}}function gr(mt){if(!!(It=mt.length)){for(var It,ur=0,tr=mt[0],Cr;++ur<It;)tr.n=Cr=mt[ur],Cr.p=tr,tr=Cr;tr.n=Cr=mt[0],Cr.p=tr}}var mr=M();function Ur(mt){return y(mt[0])<=r?mt[0]:m(mt[0])*((y(mt[0])+r)%i-r)}function Hr(mt,It){var ur=Ur(It),tr=It[1],Cr=h(tr),rn=[h(ur),-l(ur),0],pn=0,wn=0;mr.reset(),Cr===1?tr=f+n:Cr===-1&&(tr=-f-n);for(var Cn=0,On=mt.length;Cn<On;++Cn)if(!!(In=(gn=mt[Cn]).length))for(var gn,In,Pn=gn[In-1],Un=Ur(Pn),$n=Pn[1]/2+o,Fa=h($n),Ea=l($n),Ba=0;Ba<In;++Ba,Un=Jn,Fa=Ga,Ea=Ka,Pn=Oa){var Oa=gn[Ba],Jn=Ur(Oa),ha=Oa[1]/2+o,Ga=h(ha),Ka=l(ha),di=Jn-Un,gi=di>=0?1:-1,mi=gi*di,Ai=mi>r,li=Fa*Ga;if(mr.add(x(li*gi*h(mi),Ea*Ka+li*l(mi))),pn+=Ai?di+gi*i:di,Ai^Un>=ur^Jn>=ur){var yo=ie(te(Pn),te(Oa));ue(yo);var qi=ie(rn,yo);ue(qi);var ja=(Ai^di>=0?-1:1)*k(qi[2]);(tr>ja||tr===ja&&(yo[0]||yo[1]))&&(wn+=Ai^di>=0?1:-1)}}return(pn<-n||pn<n&&mr<-n)^wn&1}function Tr(mt,It,ur,tr){return function(Cr){var rn=It(Cr),pn=Yr(),wn=It(pn),Cn=!1,On,gn,In,Pn={point:Un,lineStart:Fa,lineEnd:Ea,polygonStart:function(){Pn.point=Ba,Pn.lineStart=Oa,Pn.lineEnd=Jn,gn=[],On=[]},polygonEnd:function(){Pn.point=Un,Pn.lineStart=Fa,Pn.lineEnd=Ea,gn=c.merge(gn);var ha=Hr(On,tr);gn.length?(Cn||(Cr.polygonStart(),Cn=!0),Jr(gn,Lt,ha,ur,Cr)):ha&&(Cn||(Cr.polygonStart(),Cn=!0),Cr.lineStart(),ur(null,null,1,Cr),Cr.lineEnd()),Cn&&(Cr.polygonEnd(),Cn=!1),gn=On=null},sphere:function(){Cr.polygonStart(),Cr.lineStart(),ur(null,null,1,Cr),Cr.lineEnd(),Cr.polygonEnd()}};function Un(ha,Ga){mt(ha,Ga)&&Cr.point(ha,Ga)}function $n(ha,Ga){rn.point(ha,Ga)}function Fa(){Pn.point=$n,rn.lineStart()}function Ea(){Pn.point=Un,rn.lineEnd()}function Ba(ha,Ga){In.push([ha,Ga]),wn.point(ha,Ga)}function Oa(){wn.lineStart(),In=[]}function Jn(){Ba(In[0][0],In[0][1]),wn.lineEnd();var ha=wn.clean(),Ga=pn.result(),Ka,di=Ga.length,gi,mi,Ai;if(In.pop(),On.push(In),In=null,!!di){if(ha&1){if(mi=Ga[0],(gi=mi.length-1)>0){for(Cn||(Cr.polygonStart(),Cn=!0),Cr.lineStart(),Ka=0;Ka<gi;++Ka)Cr.point((Ai=mi[Ka])[0],Ai[1]);Cr.lineEnd()}return}di>1&&ha&2&&Ga.push(Ga.pop().concat(Ga.shift())),gn.push(Ga.filter(et))}}return Pn}}function et(mt){return mt.length>1}function Lt(mt,It){return((mt=mt.x)[0]<0?mt[1]-f-n:f-mt[1])-((It=It.x)[0]<0?It[1]-f-n:f-It[1])}var jt=Tr(function(){return!0},sr,Zr,[-r,-f]);function sr(mt){var It=NaN,ur=NaN,tr=NaN,Cr;return{lineStart:function(){mt.lineStart(),Cr=1},point:function(rn,pn){var wn=rn>0?r:-r,Cn=y(rn-It);y(Cn-r)<n?(mt.point(It,ur=(ur+pn)/2>0?f:-f),mt.point(tr,ur),mt.lineEnd(),mt.lineStart(),mt.point(wn,ur),mt.point(rn,ur),Cr=0):tr!==wn&&Cn>=r&&(y(It-tr)<n&&(It-=tr*n),y(rn-wn)<n&&(rn-=wn*n),ur=Ir(It,ur,rn,pn),mt.point(tr,ur),mt.lineEnd(),mt.lineStart(),mt.point(wn,ur),Cr=0),mt.point(It=rn,ur=pn),tr=wn},lineEnd:function(){mt.lineEnd(),It=ur=NaN},clean:function(){return 2-Cr}}}function Ir(mt,It,ur,tr){var Cr,rn,pn=h(mt-ur);return y(pn)>n?v((h(It)*(rn=l(tr))*h(ur)-h(tr)*(Cr=l(It))*h(mt))/(Cr*rn*pn)):(It+tr)/2}function Zr(mt,It,ur,tr){var Cr;if(mt==null)Cr=ur*f,tr.point(-r,Cr),tr.point(0,Cr),tr.point(r,Cr),tr.point(r,0),tr.point(r,-Cr),tr.point(0,-Cr),tr.point(-r,-Cr),tr.point(-r,0),tr.point(-r,Cr);else if(y(mt[0]-It[0])>n){var rn=mt[0]<It[0]?r:-r;Cr=ur*rn/2,tr.point(-rn,Cr),tr.point(0,Cr),tr.point(rn,Cr)}else tr.point(It[0],It[1])}function Lr(mt){var It=l(mt),ur=6*d,tr=It>0,Cr=y(It)>n;function rn(gn,In,Pn,Un){Nt(Un,mt,ur,Pn,gn,In)}function pn(gn,In){return l(gn)*l(In)>It}function wn(gn){var In,Pn,Un,$n,Fa;return{lineStart:function(){$n=Un=!1,Fa=1},point:function(Ea,Ba){var Oa=[Ea,Ba],Jn,ha=pn(Ea,Ba),Ga=tr?ha?0:On(Ea,Ba):ha?On(Ea+(Ea<0?r:-r),Ba):0;if(!In&&($n=Un=ha)&&gn.lineStart(),ha!==Un&&(Jn=Cn(In,Oa),(!Jn||Pr(In,Jn)||Pr(Oa,Jn))&&(Oa[2]=1)),ha!==Un)Fa=0,ha?(gn.lineStart(),Jn=Cn(Oa,In),gn.point(Jn[0],Jn[1])):(Jn=Cn(In,Oa),gn.point(Jn[0],Jn[1],2),gn.lineEnd()),In=Jn;else if(Cr&&In&&tr^ha){var Ka;!(Ga&Pn)&&(Ka=Cn(Oa,In,!0))&&(Fa=0,tr?(gn.lineStart(),gn.point(Ka[0][0],Ka[0][1]),gn.point(Ka[1][0],Ka[1][1]),gn.lineEnd()):(gn.point(Ka[1][0],Ka[1][1]),gn.lineEnd(),gn.lineStart(),gn.point(Ka[0][0],Ka[0][1],3)))}ha&&(!In||!Pr(In,Oa))&&gn.point(Oa[0],Oa[1]),In=Oa,Un=ha,Pn=Ga},lineEnd:function(){Un&&gn.lineEnd(),In=null},clean:function(){return Fa|($n&&Un)<<1}}}function Cn(gn,In,Pn){var Un=te(gn),$n=te(In),Fa=[1,0,0],Ea=ie(Un,$n),Ba=ee(Ea,Ea),Oa=Ea[0],Jn=Ba-Oa*Oa;if(!Jn)return!Pn&&gn;var ha=It*Ba/Jn,Ga=-It*Oa/Jn,Ka=ie(Fa,Ea),di=ye(Fa,ha),gi=ye(Ea,Ga);le(di,gi);var mi=Ka,Ai=ee(di,mi),li=ee(mi,mi),yo=Ai*Ai-li*(ee(di,di)-1);if(!(yo<0)){var qi=u(yo),ja=ye(mi,(-Ai-qi)/li);if(le(ja,di),ja=X(ja),!Pn)return ja;var va=gn[0],xi=In[0],uo=gn[1],vo=In[1],os;xi<va&&(os=va,va=xi,xi=os);var Ms=xi-va,Ro=y(Ms-r)<n,Ks=Ro||Ms<n;if(!Ro&&vo<uo&&(os=uo,uo=vo,vo=os),Ks?Ro?uo+vo>0^ja[1]<(y(ja[0]-va)<n?uo:vo):uo<=ja[1]&&ja[1]<=vo:Ms>r^(va<=ja[0]&&ja[0]<=xi)){var gs=ye(mi,(-Ai+qi)/li);return le(gs,di),[ja,X(gs)]}}}function On(gn,In){var Pn=tr?mt:r-mt,Un=0;return gn<-Pn?Un|=1:gn>Pn&&(Un|=2),In<-Pn?Un|=4:In>Pn&&(Un|=8),Un}return Tr(pn,wn,rn,tr?[0,-mt]:[-r,mt-r])}function br(mt,It,ur,tr,Cr,rn){var pn=mt[0],wn=mt[1],Cn=It[0],On=It[1],gn=0,In=1,Pn=Cn-pn,Un=On-wn,$n;if($n=ur-pn,!(!Pn&&$n>0)){if($n/=Pn,Pn<0){if($n<gn)return;$n<In&&(In=$n)}else if(Pn>0){if($n>In)return;$n>gn&&(gn=$n)}if($n=Cr-pn,!(!Pn&&$n<0)){if($n/=Pn,Pn<0){if($n>In)return;$n>gn&&(gn=$n)}else if(Pn>0){if($n<gn)return;$n<In&&(In=$n)}if($n=tr-wn,!(!Un&&$n>0)){if($n/=Un,Un<0){if($n<gn)return;$n<In&&(In=$n)}else if(Un>0){if($n>In)return;$n>gn&&(gn=$n)}if($n=rn-wn,!(!Un&&$n<0)){if($n/=Un,Un<0){if($n>In)return;$n>gn&&(gn=$n)}else if(Un>0){if($n<gn)return;$n<In&&(In=$n)}return gn>0&&(mt[0]=pn+gn*Pn,mt[1]=wn+gn*Un),In<1&&(It[0]=pn+In*Pn,It[1]=wn+In*Un),!0}}}}}var Nr=1e9,kn=-Nr;function _n(mt,It,ur,tr){function Cr(On,gn){return mt<=On&&On<=ur&&It<=gn&&gn<=tr}function rn(On,gn,In,Pn){var Un=0,$n=0;if(On==null||(Un=pn(On,In))!==($n=pn(gn,In))||Cn(On,gn)<0^In>0)do Pn.point(Un===0||Un===3?mt:ur,Un>1?tr:It);while((Un=(Un+In+4)%4)!==$n);else Pn.point(gn[0],gn[1])}function pn(On,gn){return y(On[0]-mt)<n?gn>0?0:3:y(On[0]-ur)<n?gn>0?2:1:y(On[1]-It)<n?gn>0?1:0:gn>0?3:2}function wn(On,gn){return Cn(On.x,gn.x)}function Cn(On,gn){var In=pn(On,1),Pn=pn(gn,1);return In!==Pn?In-Pn:In===0?gn[1]-On[1]:In===1?On[0]-gn[0]:In===2?On[1]-gn[1]:gn[0]-On[0]}return function(On){var gn=On,In=Yr(),Pn,Un,$n,Fa,Ea,Ba,Oa,Jn,ha,Ga,Ka,di={point:gi,lineStart:yo,lineEnd:qi,polygonStart:Ai,polygonEnd:li};function gi(va,xi){Cr(va,xi)&&gn.point(va,xi)}function mi(){for(var va=0,xi=0,uo=Un.length;xi<uo;++xi)for(var vo=Un[xi],os=1,Ms=vo.length,Ro=vo[0],Ks,gs,ss=Ro[0],mo=Ro[1];os<Ms;++os)Ks=ss,gs=mo,Ro=vo[os],ss=Ro[0],mo=Ro[1],gs<=tr?mo>tr&&(ss-Ks)*(tr-gs)>(mo-gs)*(mt-Ks)&&++va:mo<=tr&&(ss-Ks)*(tr-gs)<(mo-gs)*(mt-Ks)&&--va;return va}function Ai(){gn=In,Pn=[],Un=[],Ka=!0}function li(){var va=mi(),xi=Ka&&va,uo=(Pn=c.merge(Pn)).length;(xi||uo)&&(On.polygonStart(),xi&&(On.lineStart(),rn(null,null,1,On),On.lineEnd()),uo&&Jr(Pn,wn,va,rn,On),On.polygonEnd()),gn=On,Pn=Un=$n=null}function yo(){di.point=ja,Un&&Un.push($n=[]),Ga=!0,ha=!1,Oa=Jn=NaN}function qi(){Pn&&(ja(Fa,Ea),Ba&&ha&&In.rejoin(),Pn.push(In.result())),di.point=gi,ha&&gn.lineEnd()}function ja(va,xi){var uo=Cr(va,xi);if(Un&&$n.push([va,xi]),Ga)Fa=va,Ea=xi,Ba=uo,Ga=!1,uo&&(gn.lineStart(),gn.point(va,xi));else if(uo&&ha)gn.point(va,xi);else{var vo=[Oa=Math.max(kn,Math.min(Nr,Oa)),Jn=Math.max(kn,Math.min(Nr,Jn))],os=[va=Math.max(kn,Math.min(Nr,va)),xi=Math.max(kn,Math.min(Nr,xi))];br(vo,os,mt,It,ur,tr)?(ha||(gn.lineStart(),gn.point(vo[0],vo[1])),gn.point(os[0],os[1]),uo||gn.lineEnd(),Ka=!1):uo&&(gn.lineStart(),gn.point(va,xi),Ka=!1)}Oa=va,Jn=xi,ha=uo}return di}}function Wn(){var mt=0,It=0,ur=960,tr=500,Cr,rn,pn;return pn={stream:function(wn){return Cr&&rn===wn?Cr:Cr=_n(mt,It,ur,tr)(rn=wn)},extent:function(wn){return arguments.length?(mt=+wn[0][0],It=+wn[0][1],ur=+wn[1][0],tr=+wn[1][1],Cr=rn=null,pn):[[mt,It],[ur,tr]]}}}var Ln=M(),Xn,Kn,Aa,Ta={sphere:z,point:z,lineStart:oi,lineEnd:z,polygonStart:z,polygonEnd:z};function oi(){Ta.point=Va,Ta.lineEnd=$a}function $a(){Ta.point=Ta.lineEnd=z}function Va(mt,It){mt*=d,It*=d,Xn=mt,Kn=h(It),Aa=l(It),Ta.point=ti}function ti(mt,It){mt*=d,It*=d;var ur=h(It),tr=l(It),Cr=y(mt-Xn),rn=l(Cr),pn=h(Cr),wn=tr*pn,Cn=Aa*ur-Kn*tr*rn,On=Kn*ur+Aa*tr*rn;Ln.add(x(u(wn*wn+Cn*Cn),On)),Xn=mt,Kn=ur,Aa=tr}function Mr(mt){return Ln.reset(),V(mt,Ta),+Ln}var vn=[null,null],fn={type:"LineString",coordinates:vn};function An(mt,It){return vn[0]=mt,vn[1]=It,Mr(fn)}var Gn={Feature:function(mt,It){return Yn(mt.geometry,It)},FeatureCollection:function(mt,It){for(var ur=mt.features,tr=-1,Cr=ur.length;++tr<Cr;)if(Yn(ur[tr].geometry,It))return!0;return!1}},ia={Sphere:function(){return!0},Point:function(mt,It){return zn(mt.coordinates,It)},MultiPoint:function(mt,It){for(var ur=mt.coordinates,tr=-1,Cr=ur.length;++tr<Cr;)if(zn(ur[tr],It))return!0;return!1},LineString:function(mt,It){return ea(mt.coordinates,It)},MultiLineString:function(mt,It){for(var ur=mt.coordinates,tr=-1,Cr=ur.length;++tr<Cr;)if(ea(ur[tr],It))return!0;return!1},Polygon:function(mt,It){return wa(mt.coordinates,It)},MultiPolygon:function(mt,It){for(var ur=mt.coordinates,tr=-1,Cr=ur.length;++tr<Cr;)if(wa(ur[tr],It))return!0;return!1},GeometryCollection:function(mt,It){for(var ur=mt.geometries,tr=-1,Cr=ur.length;++tr<Cr;)if(Yn(ur[tr],It))return!0;return!1}};function Yn(mt,It){return mt&&ia.hasOwnProperty(mt.type)?ia[mt.type](mt,It):!1}function zn(mt,It){return An(mt,It)===0}function ea(mt,It){for(var ur,tr,Cr,rn=0,pn=mt.length;rn<pn;rn++){if(tr=An(mt[rn],It),tr===0||rn>0&&(Cr=An(mt[rn],mt[rn-1]),Cr>0&&ur<=Cr&&tr<=Cr&&(ur+tr-Cr)*(1-Math.pow((ur-tr)/Cr,2))<t*Cr))return!0;ur=tr}return!1}function wa(mt,It){return!!Hr(mt.map(si),Ft(It))}function si(mt){return mt=mt.map(Ft),mt.pop(),mt}function Ft(mt){return[mt[0]*d,mt[1]*d]}function cr(mt,It){return(mt&&Gn.hasOwnProperty(mt.type)?Gn[mt.type]:Yn)(mt,It)}function qr(mt,It,ur){var tr=c.range(mt,It-n,ur).concat(It);return function(Cr){return tr.map(function(rn){return[Cr,rn]})}}function nn(mt,It,ur){var tr=c.range(mt,It-n,ur).concat(It);return function(Cr){return tr.map(function(rn){return[rn,Cr]})}}function on(){var mt,It,ur,tr,Cr,rn,pn,wn,Cn=10,On=Cn,gn=90,In=360,Pn,Un,$n,Fa,Ea=2.5;function Ba(){return{type:"MultiLineString",coordinates:Oa()}}function Oa(){return c.range(_(tr/gn)*gn,ur,gn).map($n).concat(c.range(_(wn/In)*In,pn,In).map(Fa)).concat(c.range(_(It/Cn)*Cn,mt,Cn).filter(function(Jn){return y(Jn%gn)>n}).map(Pn)).concat(c.range(_(rn/On)*On,Cr,On).filter(function(Jn){return y(Jn%In)>n}).map(Un))}return Ba.lines=function(){return Oa().map(function(Jn){return{type:"LineString",coordinates:Jn}})},Ba.outline=function(){return{type:"Polygon",coordinates:[$n(tr).concat(Fa(pn).slice(1),$n(ur).reverse().slice(1),Fa(wn).reverse().slice(1))]}},Ba.extent=function(Jn){return arguments.length?Ba.extentMajor(Jn).extentMinor(Jn):Ba.extentMinor()},Ba.extentMajor=function(Jn){return arguments.length?(tr=+Jn[0][0],ur=+Jn[1][0],wn=+Jn[0][1],pn=+Jn[1][1],tr>ur&&(Jn=tr,tr=ur,ur=Jn),wn>pn&&(Jn=wn,wn=pn,pn=Jn),Ba.precision(Ea)):[[tr,wn],[ur,pn]]},Ba.extentMinor=function(Jn){return arguments.length?(It=+Jn[0][0],mt=+Jn[1][0],rn=+Jn[0][1],Cr=+Jn[1][1],It>mt&&(Jn=It,It=mt,mt=Jn),rn>Cr&&(Jn=rn,rn=Cr,Cr=Jn),Ba.precision(Ea)):[[It,rn],[mt,Cr]]},Ba.step=function(Jn){return arguments.length?Ba.stepMajor(Jn).stepMinor(Jn):Ba.stepMinor()},Ba.stepMajor=function(Jn){return arguments.length?(gn=+Jn[0],In=+Jn[1],Ba):[gn,In]},Ba.stepMinor=function(Jn){return arguments.length?(Cn=+Jn[0],On=+Jn[1],Ba):[Cn,On]},Ba.precision=function(Jn){return arguments.length?(Ea=+Jn,Pn=qr(rn,Cr,90),Un=nn(It,mt,Ea),$n=qr(wn,pn,90),Fa=nn(tr,ur,Ea),Ba):Ea},Ba.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function Sn(){return on()()}function xn(mt,It){var ur=mt[0]*d,tr=mt[1]*d,Cr=It[0]*d,rn=It[1]*d,pn=l(tr),wn=h(tr),Cn=l(rn),On=h(rn),gn=pn*l(ur),In=pn*h(ur),Pn=Cn*l(Cr),Un=Cn*h(Cr),$n=2*k(u(P(rn-tr)+pn*Cn*P(Cr-ur))),Fa=h($n),Ea=$n?function(Ba){var Oa=h(Ba*=$n)/Fa,Jn=h($n-Ba)/Fa,ha=Jn*gn+Oa*Pn,Ga=Jn*In+Oa*Un,Ka=Jn*wn+Oa*On;return[x(Ga,ha)*p,x(Ka,u(ha*ha+Ga*Ga))*p]}:function(){return[ur*p,tr*p]};return Ea.distance=$n,Ea}function tn(mt){return mt}var xr=M(),dr=M(),Rr,dn,Bn,aa,bn={point:z,lineStart:z,lineEnd:z,polygonStart:function(){bn.lineStart=Zn,bn.lineEnd=ya},polygonEnd:function(){bn.lineStart=bn.lineEnd=bn.point=z,xr.add(y(dr)),dr.reset()},result:function(){var mt=xr/2;return xr.reset(),mt}};function Zn(){bn.point=ta}function ta(mt,It){bn.point=pa,Rr=Bn=mt,dn=aa=It}function pa(mt,It){dr.add(aa*mt-Bn*It),Bn=mt,aa=It}function ya(){pa(Rr,dn)}var la=1/0,Da=la,oo=-la,Vo=oo,Zo={point:tl,lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z,result:function(){var mt=[[la,Da],[oo,Vo]];return oo=Vo=-(Da=la=1/0),mt}};function tl(mt,It){mt<la&&(la=mt),mt>oo&&(oo=mt),It<Da&&(Da=It),It>Vo&&(Vo=It)}var hl=0,Hl=0,vi=0,Vs=0,Ps=0,Ui=0,Ao=0,vl=0,hs=0,Di,rl,Ki,Fi,no={point:Ji,lineStart:es,lineEnd:jo,polygonStart:function(){no.lineStart=nu,no.lineEnd=Ds},polygonEnd:function(){no.point=Ji,no.lineStart=es,no.lineEnd=jo},result:function(){var mt=hs?[Ao/hs,vl/hs]:Ui?[Vs/Ui,Ps/Ui]:vi?[hl/vi,Hl/vi]:[NaN,NaN];return hl=Hl=vi=Vs=Ps=Ui=Ao=vl=hs=0,mt}};function Ji(mt,It){hl+=mt,Hl+=It,++vi}function es(){no.point=Hs}function Hs(mt,It){no.point=ru,Ji(Ki=mt,Fi=It)}function ru(mt,It){var ur=mt-Ki,tr=It-Fi,Cr=u(ur*ur+tr*tr);Vs+=Cr*(Ki+mt)/2,Ps+=Cr*(Fi+It)/2,Ui+=Cr,Ji(Ki=mt,Fi=It)}function jo(){no.point=Ji}function nu(){no.point=Mo}function Ds(){Tu(Di,rl)}function Mo(mt,It){no.point=Tu,Ji(Di=Ki=mt,rl=Fi=It)}function Tu(mt,It){var ur=mt-Ki,tr=It-Fi,Cr=u(ur*ur+tr*tr);Vs+=Cr*(Ki+mt)/2,Ps+=Cr*(Fi+It)/2,Ui+=Cr,Cr=Fi*mt-Ki*It,Ao+=Cr*(Ki+mt),vl+=Cr*(Fi+It),hs+=Cr*3,Ji(Ki=mt,Fi=It)}function Rs(mt){this._context=mt}Rs.prototype={_radius:4.5,pointRadius:function(mt){return this._radius=mt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(mt,It){switch(this._point){case 0:{this._context.moveTo(mt,It),this._point=1;break}case 1:{this._context.lineTo(mt,It);break}default:{this._context.moveTo(mt+this._radius,It),this._context.arc(mt,It,this._radius,0,i);break}}},result:z};var bs=M(),El,Au,Mu,Gs,Cl,_s={point:z,lineStart:function(){_s.point=Gl},lineEnd:function(){El&&nl(Au,Mu),_s.point=z},polygonStart:function(){El=!0},polygonEnd:function(){El=null},result:function(){var mt=+bs;return bs.reset(),mt}};function Gl(mt,It){_s.point=nl,Au=Gs=mt,Mu=Cl=It}function nl(mt,It){Gs-=mt,Cl-=It,bs.add(u(Gs*Gs+Cl*Cl)),Gs=mt,Cl=It}function Yl(){this._string=[]}Yl.prototype={_radius:4.5,_circle:au(4.5),pointRadius:function(mt){return(mt=+mt)!==this._radius&&(this._radius=mt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(mt,It){switch(this._point){case 0:{this._string.push("M",mt,",",It),this._point=1;break}case 1:{this._string.push("L",mt,",",It);break}default:{this._circle==null&&(this._circle=au(this._radius)),this._string.push("M",mt,",",It,this._circle);break}}},result:function(){if(this._string.length){var mt=this._string.join("");return this._string=[],mt}else return null}};function au(mt){return"m0,"+mt+"a"+mt+","+mt+" 0 1,1 0,"+-2*mt+"a"+mt+","+mt+" 0 1,1 0,"+2*mt+"z"}function Ll(mt,It){var ur=4.5,tr,Cr;function rn(pn){return pn&&(typeof ur=="function"&&Cr.pointRadius(+ur.apply(this,arguments)),V(pn,tr(Cr))),Cr.result()}return rn.area=function(pn){return V(pn,tr(bn)),bn.result()},rn.measure=function(pn){return V(pn,tr(_s)),_s.result()},rn.bounds=function(pn){return V(pn,tr(Zo)),Zo.result()},rn.centroid=function(pn){return V(pn,tr(no)),no.result()},rn.projection=function(pn){return arguments.length?(tr=pn==null?(mt=null,tn):(mt=pn).stream,rn):mt},rn.context=function(pn){return arguments.length?(Cr=pn==null?(It=null,new Yl):new Rs(It=pn),typeof ur!="function"&&Cr.pointRadius(ur),rn):It},rn.pointRadius=function(pn){return arguments.length?(ur=typeof pn=="function"?pn:(Cr.pointRadius(+pn),+pn),rn):ur},rn.projection(mt).context(It)}function Su(mt){return{stream:Ys(mt)}}function Ys(mt){return function(It){var ur=new Wl;for(var tr in mt)ur[tr]=mt[tr];return ur.stream=It,ur}}function Wl(){}Wl.prototype={constructor:Wl,point:function(mt,It){this.stream.point(mt,It)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Pl(mt,It,ur){var tr=mt.clipExtent&&mt.clipExtent();return mt.scale(150).translate([0,0]),tr!=null&&mt.clipExtent(null),V(ur,mt.stream(Zo)),It(Zo.result()),tr!=null&&mt.clipExtent(tr),mt}function vs(mt,It,ur){return Pl(mt,function(tr){var Cr=It[1][0]-It[0][0],rn=It[1][1]-It[0][1],pn=Math.min(Cr/(tr[1][0]-tr[0][0]),rn/(tr[1][1]-tr[0][1])),wn=+It[0][0]+(Cr-pn*(tr[1][0]+tr[0][0]))/2,Cn=+It[0][1]+(rn-pn*(tr[1][1]+tr[0][1]))/2;mt.scale(150*pn).translate([wn,Cn])},ur)}function pl(mt,It,ur){return vs(mt,[[0,0],It],ur)}function Xl(mt,It,ur){return Pl(mt,function(tr){var Cr=+It,rn=Cr/(tr[1][0]-tr[0][0]),pn=(Cr-rn*(tr[1][0]+tr[0][0]))/2,wn=-rn*tr[0][1];mt.scale(150*rn).translate([pn,wn])},ur)}function iu(mt,It,ur){return Pl(mt,function(tr){var Cr=+It,rn=Cr/(tr[1][1]-tr[0][1]),pn=-rn*tr[0][0],wn=(Cr-rn*(tr[1][1]+tr[0][1]))/2;mt.scale(150*rn).translate([pn,wn])},ur)}var ou=16,Dl=l(30*d);function ku(mt,It){return+It?Ko(mt,It):su(mt)}function su(mt){return Ys({point:function(It,ur){It=mt(It,ur),this.stream.point(It[0],It[1])}})}function Ko(mt,It){function ur(tr,Cr,rn,pn,wn,Cn,On,gn,In,Pn,Un,$n,Fa,Ea){var Ba=On-tr,Oa=gn-Cr,Jn=Ba*Ba+Oa*Oa;if(Jn>4*It&&Fa--){var ha=pn+Pn,Ga=wn+Un,Ka=Cn+$n,di=u(ha*ha+Ga*Ga+Ka*Ka),gi=k(Ka/=di),mi=y(y(Ka)-1)<n||y(rn-In)<n?(rn+In)/2:x(Ga,ha),Ai=mt(mi,gi),li=Ai[0],yo=Ai[1],qi=li-tr,ja=yo-Cr,va=Oa*qi-Ba*ja;(va*va/Jn>It||y((Ba*qi+Oa*ja)/Jn-.5)>.3||pn*Pn+wn*Un+Cn*$n<Dl)&&(ur(tr,Cr,rn,pn,wn,Cn,li,yo,mi,ha/=di,Ga/=di,Ka,Fa,Ea),Ea.point(li,yo),ur(li,yo,mi,ha,Ga,Ka,On,gn,In,Pn,Un,$n,Fa,Ea))}}return function(tr){var Cr,rn,pn,wn,Cn,On,gn,In,Pn,Un,$n,Fa,Ea={point:Ba,lineStart:Oa,lineEnd:ha,polygonStart:function(){tr.polygonStart(),Ea.lineStart=Ga},polygonEnd:function(){tr.polygonEnd(),Ea.lineStart=Oa}};function Ba(gi,mi){gi=mt(gi,mi),tr.point(gi[0],gi[1])}function Oa(){In=NaN,Ea.point=Jn,tr.lineStart()}function Jn(gi,mi){var Ai=te([gi,mi]),li=mt(gi,mi);ur(In,Pn,gn,Un,$n,Fa,In=li[0],Pn=li[1],gn=gi,Un=Ai[0],$n=Ai[1],Fa=Ai[2],ou,tr),tr.point(In,Pn)}function ha(){Ea.point=Ba,tr.lineEnd()}function Ga(){Oa(),Ea.point=Ka,Ea.lineEnd=di}function Ka(gi,mi){Jn(Cr=gi,mi),rn=In,pn=Pn,wn=Un,Cn=$n,On=Fa,Ea.point=Jn}function di(){ur(In,Pn,gn,Un,$n,Fa,rn,pn,Cr,wn,Cn,On,ou,tr),Ea.lineEnd=ha,ha()}return Ea}}var al=Ys({point:function(mt,It){this.stream.point(mt*d,It*d)}});function il(mt){return Ys({point:function(It,ur){var tr=mt(It,ur);return this.stream.point(tr[0],tr[1])}})}function Zl(mt,It,ur,tr,Cr){function rn(pn,wn){return pn*=tr,wn*=Cr,[It+mt*pn,ur-mt*wn]}return rn.invert=function(pn,wn){return[(pn-It)/mt*tr,(ur-wn)/mt*Cr]},rn}function ps(mt,It,ur,tr,Cr,rn){var pn=l(rn),wn=h(rn),Cn=pn*mt,On=wn*mt,gn=pn/mt,In=wn/mt,Pn=(wn*ur-pn*It)/mt,Un=(wn*It+pn*ur)/mt;function $n(Fa,Ea){return Fa*=tr,Ea*=Cr,[Cn*Fa-On*Ea+It,ur-On*Fa-Cn*Ea]}return $n.invert=function(Fa,Ea){return[tr*(gn*Fa-In*Ea+Pn),Cr*(Un-In*Fa-gn*Ea)]},$n}function So(mt){return Rl(function(){return mt})()}function Rl(mt){var It,ur=150,tr=480,Cr=250,rn=0,pn=0,wn=0,Cn=0,On=0,gn,In=0,Pn=1,Un=1,$n=null,Fa=jt,Ea=null,Ba,Oa,Jn,ha=tn,Ga=.5,Ka,di,gi,mi,Ai;function li(va){return gi(va[0]*d,va[1]*d)}function yo(va){return va=gi.invert(va[0],va[1]),va&&[va[0]*p,va[1]*p]}li.stream=function(va){return mi&&Ai===va?mi:mi=al(il(gn)(Fa(Ka(ha(Ai=va)))))},li.preclip=function(va){return arguments.length?(Fa=va,$n=void 0,ja()):Fa},li.postclip=function(va){return arguments.length?(ha=va,Ea=Ba=Oa=Jn=null,ja()):ha},li.clipAngle=function(va){return arguments.length?(Fa=+va?Lr($n=va*d):($n=null,jt),ja()):$n*p},li.clipExtent=function(va){return arguments.length?(ha=va==null?(Ea=Ba=Oa=Jn=null,tn):_n(Ea=+va[0][0],Ba=+va[0][1],Oa=+va[1][0],Jn=+va[1][1]),ja()):Ea==null?null:[[Ea,Ba],[Oa,Jn]]},li.scale=function(va){return arguments.length?(ur=+va,qi()):ur},li.translate=function(va){return arguments.length?(tr=+va[0],Cr=+va[1],qi()):[tr,Cr]},li.center=function(va){return arguments.length?(rn=va[0]%360*d,pn=va[1]%360*d,qi()):[rn*p,pn*p]},li.rotate=function(va){return arguments.length?(wn=va[0]%360*d,Cn=va[1]%360*d,On=va.length>2?va[2]%360*d:0,qi()):[wn*p,Cn*p,On*p]},li.angle=function(va){return arguments.length?(In=va%360*d,qi()):In*p},li.reflectX=function(va){return arguments.length?(Pn=va?-1:1,qi()):Pn<0},li.reflectY=function(va){return arguments.length?(Un=va?-1:1,qi()):Un<0},li.precision=function(va){return arguments.length?(Ka=ku(di,Ga=va*va),ja()):u(Ga)},li.fitExtent=function(va,xi){return vs(li,va,xi)},li.fitSize=function(va,xi){return pl(li,va,xi)},li.fitWidth=function(va,xi){return Xl(li,va,xi)},li.fitHeight=function(va,xi){return iu(li,va,xi)};function qi(){var va=ps(ur,0,0,Pn,Un,In).apply(null,It(rn,pn)),xi=(In?ps:Zl)(ur,tr-va[0],Cr-va[1],Pn,Un,In);return gn=ot(wn,Cn,On),di=Ke(It,xi),gi=Ke(gn,di),Ka=ku(di,Ga),ja()}function ja(){return mi=Ai=null,li}return function(){return It=mt.apply(this,arguments),li.invert=It.invert&&yo,qi()}}function ws(mt){var It=0,ur=r/3,tr=Rl(mt),Cr=tr(It,ur);return Cr.parallels=function(rn){return arguments.length?tr(It=rn[0]*d,ur=rn[1]*d):[It*p,ur*p]},Cr}function Ts(mt){var It=l(mt);function ur(tr,Cr){return[tr*It,h(Cr)/It]}return ur.invert=function(tr,Cr){return[tr/It,k(Cr*It)]},ur}function so(mt,It){var ur=h(mt),tr=(ur+h(It))/2;if(y(tr)<n)return Ts(mt);var Cr=1+ur*(2*tr-ur),rn=u(Cr)/tr;function pn(wn,Cn){var On=u(Cr-2*tr*h(Cn))/tr;return[On*h(wn*=tr),rn-On*l(wn)]}return pn.invert=function(wn,Cn){var On=rn-Cn,gn=x(wn,y(On))*m(On);return On*tr<0&&(gn-=r*m(wn)*m(On)),[gn/tr,k((Cr-(wn*wn+On*On)*tr*tr)/(2*tr))]},pn}function dl(){return ws(so).scale(155.424).center([0,33.6442])}function yl(){return dl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ws(mt){var It=mt.length;return{point:function(ur,tr){for(var Cr=-1;++Cr<It;)mt[Cr].point(ur,tr)},sphere:function(){for(var ur=-1;++ur<It;)mt[ur].sphere()},lineStart:function(){for(var ur=-1;++ur<It;)mt[ur].lineStart()},lineEnd:function(){for(var ur=-1;++ur<It;)mt[ur].lineEnd()},polygonStart:function(){for(var ur=-1;++ur<It;)mt[ur].polygonStart()},polygonEnd:function(){for(var ur=-1;++ur<It;)mt[ur].polygonEnd()}}}function ds(){var mt,It,ur=yl(),tr,Cr=dl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),rn,pn=dl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),wn,Cn,On={point:function(Pn,Un){Cn=[Pn,Un]}};function gn(Pn){var Un=Pn[0],$n=Pn[1];return Cn=null,tr.point(Un,$n),Cn||(rn.point(Un,$n),Cn)||(wn.point(Un,$n),Cn)}gn.invert=function(Pn){var Un=ur.scale(),$n=ur.translate(),Fa=(Pn[0]-$n[0])/Un,Ea=(Pn[1]-$n[1])/Un;return(Ea>=.12&&Ea<.234&&Fa>=-.425&&Fa<-.214?Cr:Ea>=.166&&Ea<.234&&Fa>=-.214&&Fa<-.115?pn:ur).invert(Pn)},gn.stream=function(Pn){return mt&&It===Pn?mt:mt=Ws([ur.stream(It=Pn),Cr.stream(Pn),pn.stream(Pn)])},gn.precision=function(Pn){return arguments.length?(ur.precision(Pn),Cr.precision(Pn),pn.precision(Pn),In()):ur.precision()},gn.scale=function(Pn){return arguments.length?(ur.scale(Pn),Cr.scale(Pn*.35),pn.scale(Pn),gn.translate(ur.translate())):ur.scale()},gn.translate=function(Pn){if(!arguments.length)return ur.translate();var Un=ur.scale(),$n=+Pn[0],Fa=+Pn[1];return tr=ur.translate(Pn).clipExtent([[$n-.455*Un,Fa-.238*Un],[$n+.455*Un,Fa+.238*Un]]).stream(On),rn=Cr.translate([$n-.307*Un,Fa+.201*Un]).clipExtent([[$n-.425*Un+n,Fa+.12*Un+n],[$n-.214*Un-n,Fa+.234*Un-n]]).stream(On),wn=pn.translate([$n-.205*Un,Fa+.212*Un]).clipExtent([[$n-.214*Un+n,Fa+.166*Un+n],[$n-.115*Un-n,Fa+.234*Un-n]]).stream(On),In()},gn.fitExtent=function(Pn,Un){return vs(gn,Pn,Un)},gn.fitSize=function(Pn,Un){return pl(gn,Pn,Un)},gn.fitWidth=function(Pn,Un){return Xl(gn,Pn,Un)},gn.fitHeight=function(Pn,Un){return iu(gn,Pn,Un)};function In(){return mt=It=null,gn}return gn.scale(1070)}function ml(mt){return function(It,ur){var tr=l(It),Cr=l(ur),rn=mt(tr*Cr);return[rn*Cr*h(It),rn*h(ur)]}}function ol(mt){return function(It,ur){var tr=u(It*It+ur*ur),Cr=mt(tr),rn=h(Cr),pn=l(Cr);return[x(It*rn,tr*pn),k(tr&&ur*rn/tr)]}}var Il=ml(function(mt){return u(2/(1+mt))});Il.invert=ol(function(mt){return 2*k(mt/2)});function xl(){return So(Il).scale(124.75).clipAngle(180-.001)}var Xs=ml(function(mt){return(mt=S(mt))&&mt/h(mt)});Xs.invert=ol(function(mt){return mt});function Eu(){return So(Xs).scale(79.4188).clipAngle(180-.001)}function ts(mt,It){return[mt,w(L((f+It)/2))]}ts.invert=function(mt,It){return[mt,2*v(s(It))-f]};function Hu(){return jl(ts).scale(961/i)}function jl(mt){var It=So(mt),ur=It.center,tr=It.scale,Cr=It.translate,rn=It.clipExtent,pn=null,wn,Cn,On;It.scale=function(In){return arguments.length?(tr(In),gn()):tr()},It.translate=function(In){return arguments.length?(Cr(In),gn()):Cr()},It.center=function(In){return arguments.length?(ur(In),gn()):ur()},It.clipExtent=function(In){return arguments.length?(In==null?pn=wn=Cn=On=null:(pn=+In[0][0],wn=+In[0][1],Cn=+In[1][0],On=+In[1][1]),gn()):pn==null?null:[[pn,wn],[Cn,On]]};function gn(){var In=r*tr(),Pn=It(St(It.rotate()).invert([0,0]));return rn(pn==null?[[Pn[0]-In,Pn[1]-In],[Pn[0]+In,Pn[1]+In]]:mt===ts?[[Math.max(Pn[0]-In,pn),wn],[Math.min(Pn[0]+In,Cn),On]]:[[pn,Math.max(Pn[1]-In,wn)],[Cn,Math.min(Pn[1]+In,On)]])}return gn()}function sl(mt){return L((f+mt)/2)}function bl(mt,It){var ur=l(mt),tr=mt===It?h(mt):w(ur/l(It))/w(sl(It)/sl(mt)),Cr=ur*b(sl(mt),tr)/tr;if(!tr)return ts;function rn(pn,wn){Cr>0?wn<-f+n&&(wn=-f+n):wn>f-n&&(wn=f-n);var Cn=Cr/b(sl(wn),tr);return[Cn*h(tr*pn),Cr-Cn*l(tr*pn)]}return rn.invert=function(pn,wn){var Cn=Cr-wn,On=m(tr)*u(pn*pn+Cn*Cn),gn=x(pn,y(Cn))*m(Cn);return Cn*tr<0&&(gn-=r*m(pn)*m(Cn)),[gn/tr,2*v(b(Cr/On,1/tr))-f]},rn}function Zs(){return ws(bl).scale(109.5).parallels([30,30])}function _l(mt,It){return[mt,It]}_l.invert=_l;function lu(){return So(_l).scale(152.63)}function uu(mt,It){var ur=l(mt),tr=mt===It?h(mt):(ur-l(It))/(It-mt),Cr=ur/tr+mt;if(y(tr)<n)return _l;function rn(pn,wn){var Cn=Cr-wn,On=tr*pn;return[Cn*h(On),Cr-Cn*l(On)]}return rn.invert=function(pn,wn){var Cn=Cr-wn,On=x(pn,y(Cn))*m(Cn);return Cn*tr<0&&(On-=r*m(pn)*m(Cn)),[On/tr,Cr-m(tr)*u(pn*pn+Cn*Cn)]},rn}function Gu(){return ws(uu).scale(131.154).center([0,13.9389])}var Ri=1.340264,ll=-.081106,js=893e-6,Jo=.003796,rs=u(3)/2,wl=12;function lo(mt,It){var ur=k(rs*h(It)),tr=ur*ur,Cr=tr*tr*tr;return[mt*l(ur)/(rs*(Ri+3*ll*tr+Cr*(7*js+9*Jo*tr))),ur*(Ri+ll*tr+Cr*(js+Jo*tr))]}lo.invert=function(mt,It){for(var ur=It,tr=ur*ur,Cr=tr*tr*tr,rn=0,pn,wn,Cn;rn<wl&&(wn=ur*(Ri+ll*tr+Cr*(js+Jo*tr))-It,Cn=Ri+3*ll*tr+Cr*(7*js+9*Jo*tr),ur-=pn=wn/Cn,tr=ur*ur,Cr=tr*tr*tr,!(y(pn)<t));++rn);return[rs*mt*(Ri+3*ll*tr+Cr*(7*js+9*Jo*tr))/l(ur),k(h(ur)/rs)]};function fu(){return So(lo).scale(177.158)}function ns(mt,It){var ur=l(It),tr=l(mt)*ur;return[ur*h(mt)/tr,h(It)/tr]}ns.invert=ol(v);function Is(){return So(ns).scale(144.049).clipAngle(60)}function zs(){var mt=1,It=0,ur=0,tr=1,Cr=1,rn=0,pn,wn,Cn=null,On,gn,In,Pn=1,Un=1,$n=Ys({point:function(ha,Ga){var Ka=Jn([ha,Ga]);this.stream.point(Ka[0],Ka[1])}}),Fa=tn,Ea,Ba;function Oa(){return Pn=mt*tr,Un=mt*Cr,Ea=Ba=null,Jn}function Jn(ha){var Ga=ha[0]*Pn,Ka=ha[1]*Un;if(rn){var di=Ka*pn-Ga*wn;Ga=Ga*pn+Ka*wn,Ka=di}return[Ga+It,Ka+ur]}return Jn.invert=function(ha){var Ga=ha[0]-It,Ka=ha[1]-ur;if(rn){var di=Ka*pn+Ga*wn;Ga=Ga*pn-Ka*wn,Ka=di}return[Ga/Pn,Ka/Un]},Jn.stream=function(ha){return Ea&&Ba===ha?Ea:Ea=$n(Fa(Ba=ha))},Jn.postclip=function(ha){return arguments.length?(Fa=ha,Cn=On=gn=In=null,Oa()):Fa},Jn.clipExtent=function(ha){return arguments.length?(Fa=ha==null?(Cn=On=gn=In=null,tn):_n(Cn=+ha[0][0],On=+ha[0][1],gn=+ha[1][0],In=+ha[1][1]),Oa()):Cn==null?null:[[Cn,On],[gn,In]]},Jn.scale=function(ha){return arguments.length?(mt=+ha,Oa()):mt},Jn.translate=function(ha){return arguments.length?(It=+ha[0],ur=+ha[1],Oa()):[It,ur]},Jn.angle=function(ha){return arguments.length?(rn=ha%360*d,wn=h(rn),pn=l(rn),Oa()):rn*p},Jn.reflectX=function(ha){return arguments.length?(tr=ha?-1:1,Oa()):tr<0},Jn.reflectY=function(ha){return arguments.length?(Cr=ha?-1:1,Oa()):Cr<0},Jn.fitExtent=function(ha,Ga){return vs(Jn,ha,Ga)},Jn.fitSize=function(ha,Ga){return pl(Jn,ha,Ga)},Jn.fitWidth=function(ha,Ga){return Xl(Jn,ha,Ga)},Jn.fitHeight=function(ha,Ga){return iu(Jn,ha,Ga)},Jn}function As(mt,It){var ur=It*It,tr=ur*ur;return[mt*(.8707-.131979*ur+tr*(-.013791+tr*(.003971*ur-.001529*tr))),It*(1.007226+ur*(.015085+tr*(-.044475+.028874*ur-.005916*tr)))]}As.invert=function(mt,It){var ur=It,tr=25,Cr;do{var rn=ur*ur,pn=rn*rn;ur-=Cr=(ur*(1.007226+rn*(.015085+pn*(-.044475+.028874*rn-.005916*pn)))-It)/(1.007226+rn*(.015085*3+pn*(-.044475*7+.028874*9*rn-.005916*11*pn)))}while(y(Cr)>n&&--tr>0);return[mt/(.8707+(rn=ur*ur)*(-.131979+rn*(-.013791+rn*rn*rn*(.003971-.001529*rn)))),ur]};function as(){return So(As).scale(175.295)}function Vi(mt,It){return[l(It)*h(mt),h(It)]}Vi.invert=ol(k);function ko(){return So(Vi).scale(249.5).clipAngle(90+n)}function is(mt,It){var ur=l(It),tr=1+l(mt)*ur;return[ur*h(mt)/tr,h(It)/tr]}is.invert=ol(function(mt){return 2*v(mt)});function cu(){return So(is).scale(250).clipAngle(142)}function zl(mt,It){return[w(L((f+It)/2)),-mt]}zl.invert=function(mt,It){return[-It,2*v(s(mt))-f]};function hu(){var mt=jl(zl),It=mt.center,ur=mt.rotate;return mt.center=function(tr){return arguments.length?It([-tr[1],tr[0]]):(tr=It(),[tr[1],-tr[0]])},mt.rotate=function(tr){return arguments.length?ur([tr[0],tr[1],tr.length>2?tr[2]+90:90]):(tr=ur(),[tr[0],tr[1],tr[2]-90])},ur([0,0,90]).scale(159.155)}T.geoAlbers=yl,T.geoAlbersUsa=ds,T.geoArea=W,T.geoAzimuthalEqualArea=xl,T.geoAzimuthalEqualAreaRaw=Il,T.geoAzimuthalEquidistant=Eu,T.geoAzimuthalEquidistantRaw=Xs,T.geoBounds=rt,T.geoCentroid=Me,T.geoCircle=lr,T.geoClipAntimeridian=jt,T.geoClipCircle=Lr,T.geoClipExtent=Wn,T.geoClipRectangle=_n,T.geoConicConformal=Zs,T.geoConicConformalRaw=bl,T.geoConicEqualArea=dl,T.geoConicEqualAreaRaw=so,T.geoConicEquidistant=Gu,T.geoConicEquidistantRaw=uu,T.geoContains=cr,T.geoDistance=An,T.geoEqualEarth=fu,T.geoEqualEarthRaw=lo,T.geoEquirectangular=lu,T.geoEquirectangularRaw=_l,T.geoGnomonic=Is,T.geoGnomonicRaw=ns,T.geoGraticule=on,T.geoGraticule10=Sn,T.geoIdentity=zs,T.geoInterpolate=xn,T.geoLength=Mr,T.geoMercator=Hu,T.geoMercatorRaw=ts,T.geoNaturalEarth1=as,T.geoNaturalEarth1Raw=As,T.geoOrthographic=ko,T.geoOrthographicRaw=Vi,T.geoPath=Ll,T.geoProjection=So,T.geoProjectionMutator=Rl,T.geoRotation=St,T.geoStereographic=cu,T.geoStereographicRaw=is,T.geoStream=V,T.geoTransform=Su,T.geoTransverseMercator=hu,T.geoTransverseMercatorRaw=zl,Object.defineProperty(T,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae):(T=T||self,c(T.d3=T.d3||{}))})(this,function(T){function c(Ze,ke){return Ze.parent===ke.parent?1:2}function M(Ze){return Ze.reduce(A,0)/Ze.length}function A(Ze,ke){return Ze+ke.x}function e(Ze){return 1+Ze.reduce(a,0)}function a(Ze,ke){return Math.max(Ze,ke.y)}function n(Ze){for(var ke;ke=Ze.children;)Ze=ke[0];return Ze}function t(Ze){for(var ke;ke=Ze.children;)Ze=ke[ke.length-1];return Ze}function r(){var Ze=c,ke=1,Ge=1,Je=!1;function it(Pt){var At,Ot=0;Pt.eachAfter(function(er){var pr=er.children;pr?(er.x=M(pr),er.y=e(pr)):(er.x=At?Ot+=Ze(er,At):0,er.y=0,At=er)});var Jt=n(Pt),Bt=t(Pt),qt=Jt.x-Ze(Jt,Bt)/2,rr=Bt.x+Ze(Bt,Jt)/2;return Pt.eachAfter(Je?function(er){er.x=(er.x-Pt.x)*ke,er.y=(Pt.y-er.y)*Ge}:function(er){er.x=(er.x-qt)/(rr-qt)*ke,er.y=(1-(Pt.y?er.y/Pt.y:1))*Ge})}return it.separation=function(Pt){return arguments.length?(Ze=Pt,it):Ze},it.size=function(Pt){return arguments.length?(Je=!1,ke=+Pt[0],Ge=+Pt[1],it):Je?null:[ke,Ge]},it.nodeSize=function(Pt){return arguments.length?(Je=!0,ke=+Pt[0],Ge=+Pt[1],it):Je?[ke,Ge]:null},it}function f(Ze){var ke=0,Ge=Ze.children,Je=Ge&&Ge.length;if(!Je)ke=1;else for(;--Je>=0;)ke+=Ge[Je].value;Ze.value=ke}function o(){return this.eachAfter(f)}function i(Ze){var ke=this,Ge,Je=[ke],it,Pt,At;do for(Ge=Je.reverse(),Je=[];ke=Ge.pop();)if(Ze(ke),it=ke.children,it)for(Pt=0,At=it.length;Pt<At;++Pt)Je.push(it[Pt]);while(Je.length);return this}function p(Ze){for(var ke=this,Ge=[ke],Je,it;ke=Ge.pop();)if(Ze(ke),Je=ke.children,Je)for(it=Je.length-1;it>=0;--it)Ge.push(Je[it]);return this}function d(Ze){for(var ke=this,Ge=[ke],Je=[],it,Pt,At;ke=Ge.pop();)if(Je.push(ke),it=ke.children,it)for(Pt=0,At=it.length;Pt<At;++Pt)Ge.push(it[Pt]);for(;ke=Je.pop();)Ze(ke);return this}function y(Ze){return this.eachAfter(function(ke){for(var Ge=+Ze(ke.data)||0,Je=ke.children,it=Je&&Je.length;--it>=0;)Ge+=Je[it].value;ke.value=Ge})}function v(Ze){return this.eachBefore(function(ke){ke.children&&ke.children.sort(Ze)})}function x(Ze){for(var ke=this,Ge=l(ke,Ze),Je=[ke];ke!==Ge;)ke=ke.parent,Je.push(ke);for(var it=Je.length;Ze!==Ge;)Je.splice(it,0,Ze),Ze=Ze.parent;return Je}function l(Ze,ke){if(Ze===ke)return Ze;var Ge=Ze.ancestors(),Je=ke.ancestors(),it=null;for(Ze=Ge.pop(),ke=Je.pop();Ze===ke;)it=Ze,Ze=Ge.pop(),ke=Je.pop();return it}function _(){for(var Ze=this,ke=[Ze];Ze=Ze.parent;)ke.push(Ze);return ke}function s(){var Ze=[];return this.each(function(ke){Ze.push(ke)}),Ze}function w(){var Ze=[];return this.eachBefore(function(ke){ke.children||Ze.push(ke)}),Ze}function b(){var Ze=this,ke=[];return Ze.each(function(Ge){Ge!==Ze&&ke.push({source:Ge.parent,target:Ge})}),ke}function h(Ze,ke){var Ge=new k(Ze),Je=+Ze.value&&(Ge.value=Ze.value),it,Pt=[Ge],At,Ot,Jt,Bt;for(ke==null&&(ke=u);it=Pt.pop();)if(Je&&(it.value=+it.data.value),(Ot=ke(it.data))&&(Bt=Ot.length))for(it.children=new Array(Bt),Jt=Bt-1;Jt>=0;--Jt)Pt.push(At=it.children[Jt]=new k(Ot[Jt])),At.parent=it,At.depth=it.depth+1;return Ge.eachBefore(S)}function m(){return h(this).eachBefore(L)}function u(Ze){return Ze.children}function L(Ze){Ze.data=Ze.data.data}function S(Ze){var ke=0;do Ze.height=ke;while((Ze=Ze.parent)&&Ze.height<++ke)}function k(Ze){this.data=Ze,this.depth=this.height=0,this.parent=null}k.prototype=h.prototype={constructor:k,count:o,each:i,eachAfter:d,eachBefore:p,sum:y,sort:v,path:x,ancestors:_,descendants:s,leaves:w,links:b,copy:m};var P=Array.prototype.slice;function z(Ze){for(var ke=Ze.length,Ge,Je;ke;)Je=Math.random()*ke--|0,Ge=Ze[ke],Ze[ke]=Ze[Je],Ze[Je]=Ge;return Ze}function I(Ze){for(var ke=0,Ge=(Ze=z(P.call(Ze))).length,Je=[],it,Pt;ke<Ge;)it=Ze[ke],Pt&&B(Pt,it)?++ke:(Pt=V(Je=D(Je,it)),ke=0);return Pt}function D(Ze,ke){var Ge,Je;if(F(ke,Ze))return[ke];for(Ge=0;Ge<Ze.length;++Ge)if(R(ke,Ze[Ge])&&F(K(Ze[Ge],ke),Ze))return[Ze[Ge],ke];for(Ge=0;Ge<Ze.length-1;++Ge)for(Je=Ge+1;Je<Ze.length;++Je)if(R(K(Ze[Ge],Ze[Je]),ke)&&R(K(Ze[Ge],ke),Ze[Je])&&R(K(Ze[Je],ke),Ze[Ge])&&F(J(Ze[Ge],Ze[Je],ke),Ze))return[Ze[Ge],Ze[Je],ke];throw new Error}function R(Ze,ke){var Ge=Ze.r-ke.r,Je=ke.x-Ze.x,it=ke.y-Ze.y;return Ge<0||Ge*Ge<Je*Je+it*it}function B(Ze,ke){var Ge=Ze.r-ke.r+1e-6,Je=ke.x-Ze.x,it=ke.y-Ze.y;return Ge>0&&Ge*Ge>Je*Je+it*it}function F(Ze,ke){for(var Ge=0;Ge<ke.length;++Ge)if(!B(Ze,ke[Ge]))return!1;return!0}function V(Ze){switch(Ze.length){case 1:return Y(Ze[0]);case 2:return K(Ze[0],Ze[1]);case 3:return J(Ze[0],Ze[1],Ze[2])}}function Y(Ze){return{x:Ze.x,y:Ze.y,r:Ze.r}}function K(Ze,ke){var Ge=Ze.x,Je=Ze.y,it=Ze.r,Pt=ke.x,At=ke.y,Ot=ke.r,Jt=Pt-Ge,Bt=At-Je,qt=Ot-it,rr=Math.sqrt(Jt*Jt+Bt*Bt);return{x:(Ge+Pt+Jt/rr*qt)/2,y:(Je+At+Bt/rr*qt)/2,r:(rr+it+Ot)/2}}function J(Ze,ke,Ge){var Je=Ze.x,it=Ze.y,Pt=Ze.r,At=ke.x,Ot=ke.y,Jt=ke.r,Bt=Ge.x,qt=Ge.y,rr=Ge.r,er=Je-At,pr=Je-Bt,Xr=it-Ot,hn=it-qt,$r=Jt-Pt,nt=rr-Pt,Gt=Je*Je+it*it-Pt*Pt,Kt=Gt-At*At-Ot*Ot+Jt*Jt,Ht=Gt-Bt*Bt-qt*qt+rr*rr,_r=pr*Xr-er*hn,tt=(Xr*Ht-hn*Kt)/(_r*2)-Je,je=(hn*$r-Xr*nt)/_r,st=(pr*Kt-er*Ht)/(_r*2)-it,ft=(er*nt-pr*$r)/_r,Me=je*je+ft*ft-1,Se=2*(Pt+tt*je+st*ft),Ke=tt*tt+st*st-Pt*Pt,Xe=-(Me?(Se+Math.sqrt(Se*Se-4*Me*Ke))/(2*Me):Ke/Se);return{x:Je+tt+je*Xe,y:it+st+ft*Xe,r:Xe}}function G(Ze,ke,Ge){var Je=Ze.x-ke.x,it,Pt,At=Ze.y-ke.y,Ot,Jt,Bt=Je*Je+At*At;Bt?(Pt=ke.r+Ge.r,Pt*=Pt,Jt=Ze.r+Ge.r,Jt*=Jt,Pt>Jt?(it=(Bt+Jt-Pt)/(2*Bt),Ot=Math.sqrt(Math.max(0,Jt/Bt-it*it)),Ge.x=Ze.x-it*Je-Ot*At,Ge.y=Ze.y-it*At+Ot*Je):(it=(Bt+Pt-Jt)/(2*Bt),Ot=Math.sqrt(Math.max(0,Pt/Bt-it*it)),Ge.x=ke.x+it*Je-Ot*At,Ge.y=ke.y+it*At+Ot*Je)):(Ge.x=ke.x+Ge.r,Ge.y=ke.y)}function Z(Ze,ke){var Ge=Ze.r+ke.r-1e-6,Je=ke.x-Ze.x,it=ke.y-Ze.y;return Ge>0&&Ge*Ge>Je*Je+it*it}function re(Ze){var ke=Ze._,Ge=Ze.next._,Je=ke.r+Ge.r,it=(ke.x*Ge.r+Ge.x*ke.r)/Je,Pt=(ke.y*Ge.r+Ge.y*ke.r)/Je;return it*it+Pt*Pt}function se(Ze){this._=Ze,this.next=null,this.previous=null}function oe(Ze){if(!(it=Ze.length))return 0;var ke,Ge,Je,it,Pt,At,Ot,Jt,Bt,qt,rr;if(ke=Ze[0],ke.x=0,ke.y=0,!(it>1))return ke.r;if(Ge=Ze[1],ke.x=-Ge.r,Ge.x=ke.r,Ge.y=0,!(it>2))return ke.r+Ge.r;G(Ge,ke,Je=Ze[2]),ke=new se(ke),Ge=new se(Ge),Je=new se(Je),ke.next=Je.previous=Ge,Ge.next=ke.previous=Je,Je.next=Ge.previous=ke;e:for(Ot=3;Ot<it;++Ot){G(ke._,Ge._,Je=Ze[Ot]),Je=new se(Je),Jt=Ge.next,Bt=ke.previous,qt=Ge._.r,rr=ke._.r;do if(qt<=rr){if(Z(Jt._,Je._)){Ge=Jt,ke.next=Ge,Ge.previous=ke,--Ot;continue e}qt+=Jt._.r,Jt=Jt.next}else{if(Z(Bt._,Je._)){ke=Bt,ke.next=Ge,Ge.previous=ke,--Ot;continue e}rr+=Bt._.r,Bt=Bt.previous}while(Jt!==Bt.next);for(Je.previous=ke,Je.next=Ge,ke.next=Ge.previous=Ge=Je,Pt=re(ke);(Je=Je.next)!==Ge;)(At=re(Je))<Pt&&(ke=Je,Pt=At);Ge=ke.next}for(ke=[Ge._],Je=Ge;(Je=Je.next)!==Ge;)ke.push(Je._);for(Je=I(ke),Ot=0;Ot<it;++Ot)ke=Ze[Ot],ke.x-=Je.x,ke.y-=Je.y;return Je.r}function N(Ze){return oe(Ze),Ze}function U(Ze){return Ze==null?null:q(Ze)}function q(Ze){if(typeof Ze!="function")throw new Error;return Ze}function Q(){return 0}function W(Ze){return function(){return Ze}}function X(Ze){return Math.sqrt(Ze.value)}function te(){var Ze=null,ke=1,Ge=1,Je=Q;function it(Pt){return Pt.x=ke/2,Pt.y=Ge/2,Ze?Pt.eachBefore(ee(Ze)).eachAfter(ie(Je,.5)).eachBefore(le(1)):Pt.eachBefore(ee(X)).eachAfter(ie(Q,1)).eachAfter(ie(Je,Pt.r/Math.min(ke,Ge))).eachBefore(le(Math.min(ke,Ge)/(2*Pt.r))),Pt}return it.radius=function(Pt){return arguments.length?(Ze=U(Pt),it):Ze},it.size=function(Pt){return arguments.length?(ke=+Pt[0],Ge=+Pt[1],it):[ke,Ge]},it.padding=function(Pt){return arguments.length?(Je=typeof Pt=="function"?Pt:W(+Pt),it):Je},it}function ee(Ze){return function(ke){ke.children||(ke.r=Math.max(0,+Ze(ke)||0))}}function ie(Ze,ke){return function(Ge){if(Je=Ge.children){var Je,it,Pt=Je.length,At=Ze(Ge)*ke||0,Ot;if(At)for(it=0;it<Pt;++it)Je[it].r+=At;if(Ot=oe(Je),At)for(it=0;it<Pt;++it)Je[it].r-=At;Ge.r=Ot+At}}}function le(Ze){return function(ke){var Ge=ke.parent;ke.r*=Ze,Ge&&(ke.x=Ge.x+Ze*ke.x,ke.y=Ge.y+Ze*ke.y)}}function ye(Ze){Ze.x0=Math.round(Ze.x0),Ze.y0=Math.round(Ze.y0),Ze.x1=Math.round(Ze.x1),Ze.y1=Math.round(Ze.y1)}function ue(Ze,ke,Ge,Je,it){for(var Pt=Ze.children,At,Ot=-1,Jt=Pt.length,Bt=Ze.value&&(Je-ke)/Ze.value;++Ot<Jt;)At=Pt[Ot],At.y0=Ge,At.y1=it,At.x0=ke,At.x1=ke+=At.value*Bt}function pe(){var Ze=1,ke=1,Ge=0,Je=!1;function it(At){var Ot=At.height+1;return At.x0=At.y0=Ge,At.x1=Ze,At.y1=ke/Ot,At.eachBefore(Pt(ke,Ot)),Je&&At.eachBefore(ye),At}function Pt(At,Ot){return function(Jt){Jt.children&&ue(Jt,Jt.x0,At*(Jt.depth+1)/Ot,Jt.x1,At*(Jt.depth+2)/Ot);var Bt=Jt.x0,qt=Jt.y0,rr=Jt.x1-Ge,er=Jt.y1-Ge;rr<Bt&&(Bt=rr=(Bt+rr)/2),er<qt&&(qt=er=(qt+er)/2),Jt.x0=Bt,Jt.y0=qt,Jt.x1=rr,Jt.y1=er}}return it.round=function(At){return arguments.length?(Je=!!At,it):Je},it.size=function(At){return arguments.length?(Ze=+At[0],ke=+At[1],it):[Ze,ke]},it.padding=function(At){return arguments.length?(Ge=+At,it):Ge},it}var ge="$",Te={depth:-1},_e={};function De(Ze){return Ze.id}function Oe(Ze){return Ze.parentId}function Ue(){var Ze=De,ke=Oe;function Ge(Je){var it,Pt,At=Je.length,Ot,Jt,Bt,qt=new Array(At),rr,er,pr={};for(Pt=0;Pt<At;++Pt)it=Je[Pt],Bt=qt[Pt]=new k(it),(rr=Ze(it,Pt,Je))!=null&&(rr+="")&&(er=ge+(Bt.id=rr),pr[er]=er in pr?_e:Bt);for(Pt=0;Pt<At;++Pt)if(Bt=qt[Pt],rr=ke(Je[Pt],Pt,Je),rr==null||!(rr+="")){if(Ot)throw new Error("multiple roots");Ot=Bt}else{if(Jt=pr[ge+rr],!Jt)throw new Error("missing: "+rr);if(Jt===_e)throw new Error("ambiguous: "+rr);Jt.children?Jt.children.push(Bt):Jt.children=[Bt],Bt.parent=Jt}if(!Ot)throw new Error("no root");if(Ot.parent=Te,Ot.eachBefore(function(Xr){Xr.depth=Xr.parent.depth+1,--At}).eachBefore(S),Ot.parent=null,At>0)throw new Error("cycle");return Ot}return Ge.id=function(Je){return arguments.length?(Ze=q(Je),Ge):Ze},Ge.parentId=function(Je){return arguments.length?(ke=q(Je),Ge):ke},Ge}function xe(Ze,ke){return Ze.parent===ke.parent?1:2}function Pe(Ze){var ke=Ze.children;return ke?ke[0]:Ze.t}function Ve(Ze){var ke=Ze.children;return ke?ke[ke.length-1]:Ze.t}function Qe(Ze,ke,Ge){var Je=Ge/(ke.i-Ze.i);ke.c-=Je,ke.s+=Ge,Ze.c+=Je,ke.z+=Ge,ke.m+=Ge}function Fe(Ze){for(var ke=0,Ge=0,Je=Ze.children,it=Je.length,Pt;--it>=0;)Pt=Je[it],Pt.z+=ke,Pt.m+=ke,ke+=Pt.s+(Ge+=Pt.c)}function Le(Ze,ke,Ge){return Ze.a.parent===ke.parent?Ze.a:Ge}function Ne(Ze,ke){this._=Ze,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=ke}Ne.prototype=Object.create(k.prototype);function dt(Ze){for(var ke=new Ne(Ze,0),Ge,Je=[ke],it,Pt,At,Ot;Ge=Je.pop();)if(Pt=Ge._.children)for(Ge.children=new Array(Ot=Pt.length),At=Ot-1;At>=0;--At)Je.push(it=Ge.children[At]=new Ne(Pt[At],At)),it.parent=Ge;return(ke.parent=new Ne(null,0)).children=[ke],ke}function Dt(){var Ze=xe,ke=1,Ge=1,Je=null;function it(Bt){var qt=dt(Bt);if(qt.eachAfter(Pt),qt.parent.m=-qt.z,qt.eachBefore(At),Je)Bt.eachBefore(Jt);else{var rr=Bt,er=Bt,pr=Bt;Bt.eachBefore(function(Gt){Gt.x<rr.x&&(rr=Gt),Gt.x>er.x&&(er=Gt),Gt.depth>pr.depth&&(pr=Gt)});var Xr=rr===er?1:Ze(rr,er)/2,hn=Xr-rr.x,$r=ke/(er.x+Xr+hn),nt=Ge/(pr.depth||1);Bt.eachBefore(function(Gt){Gt.x=(Gt.x+hn)*$r,Gt.y=Gt.depth*nt})}return Bt}function Pt(Bt){var qt=Bt.children,rr=Bt.parent.children,er=Bt.i?rr[Bt.i-1]:null;if(qt){Fe(Bt);var pr=(qt[0].z+qt[qt.length-1].z)/2;er?(Bt.z=er.z+Ze(Bt._,er._),Bt.m=Bt.z-pr):Bt.z=pr}else er&&(Bt.z=er.z+Ze(Bt._,er._));Bt.parent.A=Ot(Bt,er,Bt.parent.A||rr[0])}function At(Bt){Bt._.x=Bt.z+Bt.parent.m,Bt.m+=Bt.parent.m}function Ot(Bt,qt,rr){if(qt){for(var er=Bt,pr=Bt,Xr=qt,hn=er.parent.children[0],$r=er.m,nt=pr.m,Gt=Xr.m,Kt=hn.m,Ht;Xr=Ve(Xr),er=Pe(er),Xr&&er;)hn=Pe(hn),pr=Ve(pr),pr.a=Bt,Ht=Xr.z+Gt-er.z-$r+Ze(Xr._,er._),Ht>0&&(Qe(Le(Xr,Bt,rr),Bt,Ht),$r+=Ht,nt+=Ht),Gt+=Xr.m,$r+=er.m,Kt+=hn.m,nt+=pr.m;Xr&&!Ve(pr)&&(pr.t=Xr,pr.m+=Gt-nt),er&&!Pe(hn)&&(hn.t=er,hn.m+=$r-Kt,rr=Bt)}return rr}function Jt(Bt){Bt.x*=ke,Bt.y=Bt.depth*Ge}return it.separation=function(Bt){return arguments.length?(Ze=Bt,it):Ze},it.size=function(Bt){return arguments.length?(Je=!1,ke=+Bt[0],Ge=+Bt[1],it):Je?null:[ke,Ge]},it.nodeSize=function(Bt){return arguments.length?(Je=!0,ke=+Bt[0],Ge=+Bt[1],it):Je?[ke,Ge]:null},it}function Xt(Ze,ke,Ge,Je,it){for(var Pt=Ze.children,At,Ot=-1,Jt=Pt.length,Bt=Ze.value&&(it-Ge)/Ze.value;++Ot<Jt;)At=Pt[Ot],At.x0=ke,At.x1=Je,At.y0=Ge,At.y1=Ge+=At.value*Bt}var Tt=(1+Math.sqrt(5))/2;function zt(Ze,ke,Ge,Je,it,Pt){for(var At=[],Ot=ke.children,Jt,Bt,qt=0,rr=0,er=Ot.length,pr,Xr,hn=ke.value,$r,nt,Gt,Kt,Ht,_r,tt;qt<er;){pr=it-Ge,Xr=Pt-Je;do $r=Ot[rr++].value;while(!$r&&rr<er);for(nt=Gt=$r,_r=Math.max(Xr/pr,pr/Xr)/(hn*Ze),tt=$r*$r*_r,Ht=Math.max(Gt/tt,tt/nt);rr<er;++rr){if($r+=Bt=Ot[rr].value,Bt<nt&&(nt=Bt),Bt>Gt&&(Gt=Bt),tt=$r*$r*_r,Kt=Math.max(Gt/tt,tt/nt),Kt>Ht){$r-=Bt;break}Ht=Kt}At.push(Jt={value:$r,dice:pr<Xr,children:Ot.slice(qt,rr)}),Jt.dice?ue(Jt,Ge,Je,it,hn?Je+=Xr*$r/hn:Pt):Xt(Jt,Ge,Je,hn?Ge+=pr*$r/hn:it,Pt),hn-=$r,qt=rr}return At}var Ut=function Ze(ke){function Ge(Je,it,Pt,At,Ot){zt(ke,Je,it,Pt,At,Ot)}return Ge.ratio=function(Je){return Ze((Je=+Je)>1?Je:1)},Ge}(Tt);function Et(){var Ze=Ut,ke=!1,Ge=1,Je=1,it=[0],Pt=Q,At=Q,Ot=Q,Jt=Q,Bt=Q;function qt(er){return er.x0=er.y0=0,er.x1=Ge,er.y1=Je,er.eachBefore(rr),it=[0],ke&&er.eachBefore(ye),er}function rr(er){var pr=it[er.depth],Xr=er.x0+pr,hn=er.y0+pr,$r=er.x1-pr,nt=er.y1-pr;$r<Xr&&(Xr=$r=(Xr+$r)/2),nt<hn&&(hn=nt=(hn+nt)/2),er.x0=Xr,er.y0=hn,er.x1=$r,er.y1=nt,er.children&&(pr=it[er.depth+1]=Pt(er)/2,Xr+=Bt(er)-pr,hn+=At(er)-pr,$r-=Ot(er)-pr,nt-=Jt(er)-pr,$r<Xr&&(Xr=$r=(Xr+$r)/2),nt<hn&&(hn=nt=(hn+nt)/2),Ze(er,Xr,hn,$r,nt))}return qt.round=function(er){return arguments.length?(ke=!!er,qt):ke},qt.size=function(er){return arguments.length?(Ge=+er[0],Je=+er[1],qt):[Ge,Je]},qt.tile=function(er){return arguments.length?(Ze=q(er),qt):Ze},qt.padding=function(er){return arguments.length?qt.paddingInner(er).paddingOuter(er):qt.paddingInner()},qt.paddingInner=function(er){return arguments.length?(Pt=typeof er=="function"?er:W(+er),qt):Pt},qt.paddingOuter=function(er){return arguments.length?qt.paddingTop(er).paddingRight(er).paddingBottom(er).paddingLeft(er):qt.paddingTop()},qt.paddingTop=function(er){return arguments.length?(At=typeof er=="function"?er:W(+er),qt):At},qt.paddingRight=function(er){return arguments.length?(Ot=typeof er=="function"?er:W(+er),qt):Ot},qt.paddingBottom=function(er){return arguments.length?(Jt=typeof er=="function"?er:W(+er),qt):Jt},qt.paddingLeft=function(er){return arguments.length?(Bt=typeof er=="function"?er:W(+er),qt):Bt},qt}function Mt(Ze,ke,Ge,Je,it){var Pt=Ze.children,At,Ot=Pt.length,Jt,Bt=new Array(Ot+1);for(Bt[0]=Jt=At=0;At<Ot;++At)Bt[At+1]=Jt+=Pt[At].value;qt(0,Ot,Ze.value,ke,Ge,Je,it);function qt(rr,er,pr,Xr,hn,$r,nt){if(rr>=er-1){var Gt=Pt[rr];Gt.x0=Xr,Gt.y0=hn,Gt.x1=$r,Gt.y1=nt;return}for(var Kt=Bt[rr],Ht=pr/2+Kt,_r=rr+1,tt=er-1;_r<tt;){var je=_r+tt>>>1;Bt[je]<Ht?_r=je+1:tt=je}Ht-Bt[_r-1]<Bt[_r]-Ht&&rr+1<_r&&--_r;var st=Bt[_r]-Kt,ft=pr-st;if($r-Xr>nt-hn){var Me=(Xr*ft+$r*st)/pr;qt(rr,_r,st,Xr,hn,Me,nt),qt(_r,er,ft,Me,hn,$r,nt)}else{var Se=(hn*ft+nt*st)/pr;qt(rr,_r,st,Xr,hn,$r,Se),qt(_r,er,ft,Xr,Se,$r,nt)}}}function rt(Ze,ke,Ge,Je,it){(Ze.depth&1?Xt:ue)(Ze,ke,Ge,Je,it)}var ct=function Ze(ke){function Ge(Je,it,Pt,At,Ot){if((Jt=Je._squarify)&&Jt.ratio===ke)for(var Jt,Bt,qt,rr,er=-1,pr,Xr=Jt.length,hn=Je.value;++er<Xr;){for(Bt=Jt[er],qt=Bt.children,rr=Bt.value=0,pr=qt.length;rr<pr;++rr)Bt.value+=qt[rr].value;Bt.dice?ue(Bt,it,Pt,At,Pt+=(Ot-Pt)*Bt.value/hn):Xt(Bt,it,Pt,it+=(At-it)*Bt.value/hn,Ot),hn-=Bt.value}else Je._squarify=Jt=zt(ke,Je,it,Pt,At,Ot),Jt.ratio=ke}return Ge.ratio=function(Je){return Ze((Je=+Je)>1?Je:1)},Ge}(Tt);T.cluster=r,T.hierarchy=h,T.pack=te,T.packEnclose=I,T.packSiblings=N,T.partition=pe,T.stratify=Ue,T.tree=Dt,T.treemap=Et,T.treemapBinary=Mt,T.treemapDice=ue,T.treemapResquarify=ct,T.treemapSlice=Xt,T.treemapSliceDice=rt,T.treemapSquarify=Ut,Object.defineProperty(T,"__esModule",{value:!0})})},{}],116:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae,g("d3-color")):(T=T||self,c(T.d3=T.d3||{},T.d3))})(this,function(T,c){function M(xe,Pe,Ve,Qe,Fe){var Le=xe*xe,Ne=Le*xe;return((1-3*xe+3*Le-Ne)*Pe+(4-6*Le+3*Ne)*Ve+(1+3*xe+3*Le-3*Ne)*Qe+Ne*Fe)/6}function A(xe){var Pe=xe.length-1;return function(Ve){var Qe=Ve<=0?Ve=0:Ve>=1?(Ve=1,Pe-1):Math.floor(Ve*Pe),Fe=xe[Qe],Le=xe[Qe+1],Ne=Qe>0?xe[Qe-1]:2*Fe-Le,dt=Qe<Pe-1?xe[Qe+2]:2*Le-Fe;return M((Ve-Qe/Pe)*Pe,Ne,Fe,Le,dt)}}function e(xe){var Pe=xe.length;return function(Ve){var Qe=Math.floor(((Ve%=1)<0?++Ve:Ve)*Pe),Fe=xe[(Qe+Pe-1)%Pe],Le=xe[Qe%Pe],Ne=xe[(Qe+1)%Pe],dt=xe[(Qe+2)%Pe];return M((Ve-Qe/Pe)*Pe,Fe,Le,Ne,dt)}}function a(xe){return function(){return xe}}function n(xe,Pe){return function(Ve){return xe+Ve*Pe}}function t(xe,Pe,Ve){return xe=Math.pow(xe,Ve),Pe=Math.pow(Pe,Ve)-xe,Ve=1/Ve,function(Qe){return Math.pow(xe+Qe*Pe,Ve)}}function r(xe,Pe){var Ve=Pe-xe;return Ve?n(xe,Ve>180||Ve<-180?Ve-360*Math.round(Ve/360):Ve):a(isNaN(xe)?Pe:xe)}function f(xe){return(xe=+xe)==1?o:function(Pe,Ve){return Ve-Pe?t(Pe,Ve,xe):a(isNaN(Pe)?Ve:Pe)}}function o(xe,Pe){var Ve=Pe-xe;return Ve?n(xe,Ve):a(isNaN(xe)?Pe:xe)}var i=function xe(Pe){var Ve=f(Pe);function Qe(Fe,Le){var Ne=Ve((Fe=c.rgb(Fe)).r,(Le=c.rgb(Le)).r),dt=Ve(Fe.g,Le.g),Dt=Ve(Fe.b,Le.b),Xt=o(Fe.opacity,Le.opacity);return function(Tt){return Fe.r=Ne(Tt),Fe.g=dt(Tt),Fe.b=Dt(Tt),Fe.opacity=Xt(Tt),Fe+""}}return Qe.gamma=xe,Qe}(1);function p(xe){return function(Pe){var Ve=Pe.length,Qe=new Array(Ve),Fe=new Array(Ve),Le=new Array(Ve),Ne,dt;for(Ne=0;Ne<Ve;++Ne)dt=c.rgb(Pe[Ne]),Qe[Ne]=dt.r||0,Fe[Ne]=dt.g||0,Le[Ne]=dt.b||0;return Qe=xe(Qe),Fe=xe(Fe),Le=xe(Le),dt.opacity=1,function(Dt){return dt.r=Qe(Dt),dt.g=Fe(Dt),dt.b=Le(Dt),dt+""}}}var d=p(A),y=p(e);function v(xe,Pe){Pe||(Pe=[]);var Ve=xe?Math.min(Pe.length,xe.length):0,Qe=Pe.slice(),Fe;return function(Le){for(Fe=0;Fe<Ve;++Fe)Qe[Fe]=xe[Fe]*(1-Le)+Pe[Fe]*Le;return Qe}}function x(xe){return ArrayBuffer.isView(xe)&&!(xe instanceof DataView)}function l(xe,Pe){return(x(Pe)?v:_)(xe,Pe)}function _(xe,Pe){var Ve=Pe?Pe.length:0,Qe=xe?Math.min(Ve,xe.length):0,Fe=new Array(Qe),Le=new Array(Ve),Ne;for(Ne=0;Ne<Qe;++Ne)Fe[Ne]=k(xe[Ne],Pe[Ne]);for(;Ne<Ve;++Ne)Le[Ne]=Pe[Ne];return function(dt){for(Ne=0;Ne<Qe;++Ne)Le[Ne]=Fe[Ne](dt);return Le}}function s(xe,Pe){var Ve=new Date;return xe=+xe,Pe=+Pe,function(Qe){return Ve.setTime(xe*(1-Qe)+Pe*Qe),Ve}}function w(xe,Pe){return xe=+xe,Pe=+Pe,function(Ve){return xe*(1-Ve)+Pe*Ve}}function b(xe,Pe){var Ve={},Qe={},Fe;(xe===null||typeof xe!="object")&&(xe={}),(Pe===null||typeof Pe!="object")&&(Pe={});for(Fe in Pe)Fe in xe?Ve[Fe]=k(xe[Fe],Pe[Fe]):Qe[Fe]=Pe[Fe];return function(Le){for(Fe in Ve)Qe[Fe]=Ve[Fe](Le);return Qe}}var h=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,m=new RegExp(h.source,"g");function u(xe){return function(){return xe}}function L(xe){return function(Pe){return xe(Pe)+""}}function S(xe,Pe){var Ve=h.lastIndex=m.lastIndex=0,Qe,Fe,Le,Ne=-1,dt=[],Dt=[];for(xe=xe+"",Pe=Pe+"";(Qe=h.exec(xe))&&(Fe=m.exec(Pe));)(Le=Fe.index)>Ve&&(Le=Pe.slice(Ve,Le),dt[Ne]?dt[Ne]+=Le:dt[++Ne]=Le),(Qe=Qe[0])===(Fe=Fe[0])?dt[Ne]?dt[Ne]+=Fe:dt[++Ne]=Fe:(dt[++Ne]=null,Dt.push({i:Ne,x:w(Qe,Fe)})),Ve=m.lastIndex;return Ve<Pe.length&&(Le=Pe.slice(Ve),dt[Ne]?dt[Ne]+=Le:dt[++Ne]=Le),dt.length<2?Dt[0]?L(Dt[0].x):u(Pe):(Pe=Dt.length,function(Xt){for(var Tt=0,zt;Tt<Pe;++Tt)dt[(zt=Dt[Tt]).i]=zt.x(Xt);return dt.join("")})}function k(xe,Pe){var Ve=typeof Pe,Qe;return Pe==null||Ve==="boolean"?a(Pe):(Ve==="number"?w:Ve==="string"?(Qe=c.color(Pe))?(Pe=Qe,i):S:Pe instanceof c.color?i:Pe instanceof Date?s:x(Pe)?v:Array.isArray(Pe)?_:typeof Pe.valueOf!="function"&&typeof Pe.toString!="function"||isNaN(Pe)?b:w)(xe,Pe)}function P(xe){var Pe=xe.length;return function(Ve){return xe[Math.max(0,Math.min(Pe-1,Math.floor(Ve*Pe)))]}}function z(xe,Pe){var Ve=r(+xe,+Pe);return function(Qe){var Fe=Ve(Qe);return Fe-360*Math.floor(Fe/360)}}function I(xe,Pe){return xe=+xe,Pe=+Pe,function(Ve){return Math.round(xe*(1-Ve)+Pe*Ve)}}var D=180/Math.PI,R={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function B(xe,Pe,Ve,Qe,Fe,Le){var Ne,dt,Dt;return(Ne=Math.sqrt(xe*xe+Pe*Pe))&&(xe/=Ne,Pe/=Ne),(Dt=xe*Ve+Pe*Qe)&&(Ve-=xe*Dt,Qe-=Pe*Dt),(dt=Math.sqrt(Ve*Ve+Qe*Qe))&&(Ve/=dt,Qe/=dt,Dt/=dt),xe*Qe<Pe*Ve&&(xe=-xe,Pe=-Pe,Dt=-Dt,Ne=-Ne),{translateX:Fe,translateY:Le,rotate:Math.atan2(Pe,xe)*D,skewX:Math.atan(Dt)*D,scaleX:Ne,scaleY:dt}}var F,V,Y,K;function J(xe){return xe==="none"?R:(F||(F=document.createElement("DIV"),V=document.documentElement,Y=document.defaultView),F.style.transform=xe,xe=Y.getComputedStyle(V.appendChild(F),null).getPropertyValue("transform"),V.removeChild(F),xe=xe.slice(7,-1).split(","),B(+xe[0],+xe[1],+xe[2],+xe[3],+xe[4],+xe[5]))}function G(xe){return xe==null||(K||(K=document.createElementNS("http://www.w3.org/2000/svg","g")),K.setAttribute("transform",xe),!(xe=K.transform.baseVal.consolidate()))?R:(xe=xe.matrix,B(xe.a,xe.b,xe.c,xe.d,xe.e,xe.f))}function Z(xe,Pe,Ve,Qe){function Fe(Xt){return Xt.length?Xt.pop()+" ":""}function Le(Xt,Tt,zt,Ut,Et,Mt){if(Xt!==zt||Tt!==Ut){var rt=Et.push("translate(",null,Pe,null,Ve);Mt.push({i:rt-4,x:w(Xt,zt)},{i:rt-2,x:w(Tt,Ut)})}else(zt||Ut)&&Et.push("translate("+zt+Pe+Ut+Ve)}function Ne(Xt,Tt,zt,Ut){Xt!==Tt?(Xt-Tt>180?Tt+=360:Tt-Xt>180&&(Xt+=360),Ut.push({i:zt.push(Fe(zt)+"rotate(",null,Qe)-2,x:w(Xt,Tt)})):Tt&&zt.push(Fe(zt)+"rotate("+Tt+Qe)}function dt(Xt,Tt,zt,Ut){Xt!==Tt?Ut.push({i:zt.push(Fe(zt)+"skewX(",null,Qe)-2,x:w(Xt,Tt)}):Tt&&zt.push(Fe(zt)+"skewX("+Tt+Qe)}function Dt(Xt,Tt,zt,Ut,Et,Mt){if(Xt!==zt||Tt!==Ut){var rt=Et.push(Fe(Et)+"scale(",null,",",null,")");Mt.push({i:rt-4,x:w(Xt,zt)},{i:rt-2,x:w(Tt,Ut)})}else(zt!==1||Ut!==1)&&Et.push(Fe(Et)+"scale("+zt+","+Ut+")")}return function(Xt,Tt){var zt=[],Ut=[];return Xt=xe(Xt),Tt=xe(Tt),Le(Xt.translateX,Xt.translateY,Tt.translateX,Tt.translateY,zt,Ut),Ne(Xt.rotate,Tt.rotate,zt,Ut),dt(Xt.skewX,Tt.skewX,zt,Ut),Dt(Xt.scaleX,Xt.scaleY,Tt.scaleX,Tt.scaleY,zt,Ut),Xt=Tt=null,function(Et){for(var Mt=-1,rt=Ut.length,ct;++Mt<rt;)zt[(ct=Ut[Mt]).i]=ct.x(Et);return zt.join("")}}}var re=Z(J,"px, ","px)","deg)"),se=Z(G,", ",")",")"),oe=Math.SQRT2,N=2,U=4,q=1e-12;function Q(xe){return((xe=Math.exp(xe))+1/xe)/2}function W(xe){return((xe=Math.exp(xe))-1/xe)/2}function X(xe){return((xe=Math.exp(2*xe))-1)/(xe+1)}function te(xe,Pe){var Ve=xe[0],Qe=xe[1],Fe=xe[2],Le=Pe[0],Ne=Pe[1],dt=Pe[2],Dt=Le-Ve,Xt=Ne-Qe,Tt=Dt*Dt+Xt*Xt,zt,Ut;if(Tt<q)Ut=Math.log(dt/Fe)/oe,zt=function(ke){return[Ve+ke*Dt,Qe+ke*Xt,Fe*Math.exp(oe*ke*Ut)]};else{var Et=Math.sqrt(Tt),Mt=(dt*dt-Fe*Fe+U*Tt)/(2*Fe*N*Et),rt=(dt*dt-Fe*Fe-U*Tt)/(2*dt*N*Et),ct=Math.log(Math.sqrt(Mt*Mt+1)-Mt),Ze=Math.log(Math.sqrt(rt*rt+1)-rt);Ut=(Ze-ct)/oe,zt=function(ke){var Ge=ke*Ut,Je=Q(ct),it=Fe/(N*Et)*(Je*X(oe*Ge+ct)-W(ct));return[Ve+it*Dt,Qe+it*Xt,Fe*Je/Q(oe*Ge+ct)]}}return zt.duration=Ut*1e3,zt}function ee(xe){return function(Pe,Ve){var Qe=xe((Pe=c.hsl(Pe)).h,(Ve=c.hsl(Ve)).h),Fe=o(Pe.s,Ve.s),Le=o(Pe.l,Ve.l),Ne=o(Pe.opacity,Ve.opacity);return function(dt){return Pe.h=Qe(dt),Pe.s=Fe(dt),Pe.l=Le(dt),Pe.opacity=Ne(dt),Pe+""}}}var ie=ee(r),le=ee(o);function ye(xe,Pe){var Ve=o((xe=c.lab(xe)).l,(Pe=c.lab(Pe)).l),Qe=o(xe.a,Pe.a),Fe=o(xe.b,Pe.b),Le=o(xe.opacity,Pe.opacity);return function(Ne){return xe.l=Ve(Ne),xe.a=Qe(Ne),xe.b=Fe(Ne),xe.opacity=Le(Ne),xe+""}}function ue(xe){return function(Pe,Ve){var Qe=xe((Pe=c.hcl(Pe)).h,(Ve=c.hcl(Ve)).h),Fe=o(Pe.c,Ve.c),Le=o(Pe.l,Ve.l),Ne=o(Pe.opacity,Ve.opacity);return function(dt){return Pe.h=Qe(dt),Pe.c=Fe(dt),Pe.l=Le(dt),Pe.opacity=Ne(dt),Pe+""}}}var pe=ue(r),ge=ue(o);function Te(xe){return function Pe(Ve){Ve=+Ve;function Qe(Fe,Le){var Ne=xe((Fe=c.cubehelix(Fe)).h,(Le=c.cubehelix(Le)).h),dt=o(Fe.s,Le.s),Dt=o(Fe.l,Le.l),Xt=o(Fe.opacity,Le.opacity);return function(Tt){return Fe.h=Ne(Tt),Fe.s=dt(Tt),Fe.l=Dt(Math.pow(Tt,Ve)),Fe.opacity=Xt(Tt),Fe+""}}return Qe.gamma=Pe,Qe}(1)}var _e=Te(r),De=Te(o);function Oe(xe,Pe){for(var Ve=0,Qe=Pe.length-1,Fe=Pe[0],Le=new Array(Qe<0?0:Qe);Ve<Qe;)Le[Ve]=xe(Fe,Fe=Pe[++Ve]);return function(Ne){var dt=Math.max(0,Math.min(Qe-1,Math.floor(Ne*=Qe)));return Le[dt](Ne-dt)}}function Ue(xe,Pe){for(var Ve=new Array(Pe),Qe=0;Qe<Pe;++Qe)Ve[Qe]=xe(Qe/(Pe-1));return Ve}T.interpolate=k,T.interpolateArray=l,T.interpolateBasis=A,T.interpolateBasisClosed=e,T.interpolateCubehelix=_e,T.interpolateCubehelixLong=De,T.interpolateDate=s,T.interpolateDiscrete=P,T.interpolateHcl=pe,T.interpolateHclLong=ge,T.interpolateHsl=ie,T.interpolateHslLong=le,T.interpolateHue=z,T.interpolateLab=ye,T.interpolateNumber=w,T.interpolateNumberArray=v,T.interpolateObject=b,T.interpolateRgb=i,T.interpolateRgbBasis=d,T.interpolateRgbBasisClosed=y,T.interpolateRound=I,T.interpolateString=S,T.interpolateTransformCss=re,T.interpolateTransformSvg=se,T.interpolateZoom=te,T.piecewise=Oe,T.quantize=Ue,Object.defineProperty(T,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae):(T=T||self,c(T.d3=T.d3||{}))})(this,function(T){var c=Math.PI,M=2*c,A=1e-6,e=M-A;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new a}a.prototype=n.prototype={constructor:a,moveTo:function(t,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+r)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,r){this._+="L"+(this._x1=+t)+","+(this._y1=+r)},quadraticCurveTo:function(t,r,f,o){this._+="Q"+ +t+","+ +r+","+(this._x1=+f)+","+(this._y1=+o)},bezierCurveTo:function(t,r,f,o,i,p){this._+="C"+ +t+","+ +r+","+ +f+","+ +o+","+(this._x1=+i)+","+(this._y1=+p)},arcTo:function(t,r,f,o,i){t=+t,r=+r,f=+f,o=+o,i=+i;var p=this._x1,d=this._y1,y=f-t,v=o-r,x=p-t,l=d-r,_=x*x+l*l;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=r);else if(_>A)if(!(Math.abs(l*y-v*x)>A)||!i)this._+="L"+(this._x1=t)+","+(this._y1=r);else{var s=f-p,w=o-d,b=y*y+v*v,h=s*s+w*w,m=Math.sqrt(b),u=Math.sqrt(_),L=i*Math.tan((c-Math.acos((b+_-h)/(2*m*u)))/2),S=L/u,k=L/m;Math.abs(S-1)>A&&(this._+="L"+(t+S*x)+","+(r+S*l)),this._+="A"+i+","+i+",0,0,"+ +(l*s>x*w)+","+(this._x1=t+k*y)+","+(this._y1=r+k*v)}},arc:function(t,r,f,o,i,p){t=+t,r=+r,f=+f,p=!!p;var d=f*Math.cos(o),y=f*Math.sin(o),v=t+d,x=r+y,l=1^p,_=p?o-i:i-o;if(f<0)throw new Error("negative radius: "+f);this._x1===null?this._+="M"+v+","+x:(Math.abs(this._x1-v)>A||Math.abs(this._y1-x)>A)&&(this._+="L"+v+","+x),!!f&&(_<0&&(_=_%M+M),_>e?this._+="A"+f+","+f+",0,1,"+l+","+(t-d)+","+(r-y)+"A"+f+","+f+",0,1,"+l+","+(this._x1=v)+","+(this._y1=x):_>A&&(this._+="A"+f+","+f+",0,"+ +(_>=c)+","+l+","+(this._x1=t+f*Math.cos(i))+","+(this._y1=r+f*Math.sin(i))))},rect:function(t,r,f,o){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+r)+"h"+ +f+"v"+ +o+"h"+-f+"Z"},toString:function(){return this._}},T.path=n,Object.defineProperty(T,"__esModule",{value:!0})})},{}],118:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae):(T=T||self,c(T.d3=T.d3||{}))})(this,function(T){function c(m){var u=+this._x.call(null,m),L=+this._y.call(null,m);return M(this.cover(u,L),u,L,m)}function M(m,u,L,S){if(isNaN(u)||isNaN(L))return m;var k,P=m._root,z={data:S},I=m._x0,D=m._y0,R=m._x1,B=m._y1,F,V,Y,K,J,G,Z,re;if(!P)return m._root=z,m;for(;P.length;)if((J=u>=(F=(I+R)/2))?I=F:R=F,(G=L>=(V=(D+B)/2))?D=V:B=V,k=P,!(P=P[Z=G<<1|J]))return k[Z]=z,m;if(Y=+m._x.call(null,P.data),K=+m._y.call(null,P.data),u===Y&&L===K)return z.next=P,k?k[Z]=z:m._root=z,m;do k=k?k[Z]=new Array(4):m._root=new Array(4),(J=u>=(F=(I+R)/2))?I=F:R=F,(G=L>=(V=(D+B)/2))?D=V:B=V;while((Z=G<<1|J)==(re=(K>=V)<<1|Y>=F));return k[re]=P,k[Z]=z,m}function A(m){var u,L,S=m.length,k,P,z=new Array(S),I=new Array(S),D=1/0,R=1/0,B=-1/0,F=-1/0;for(L=0;L<S;++L)isNaN(k=+this._x.call(null,u=m[L]))||isNaN(P=+this._y.call(null,u))||(z[L]=k,I[L]=P,k<D&&(D=k),k>B&&(B=k),P<R&&(R=P),P>F&&(F=P));if(D>B||R>F)return this;for(this.cover(D,R).cover(B,F),L=0;L<S;++L)M(this,z[L],I[L],m[L]);return this}function e(m,u){if(isNaN(m=+m)||isNaN(u=+u))return this;var L=this._x0,S=this._y0,k=this._x1,P=this._y1;if(isNaN(L))k=(L=Math.floor(m))+1,P=(S=Math.floor(u))+1;else{for(var z=k-L,I=this._root,D,R;L>m||m>=k||S>u||u>=P;)switch(R=(u<S)<<1|m<L,D=new Array(4),D[R]=I,I=D,z*=2,R){case 0:k=L+z,P=S+z;break;case 1:L=k-z,P=S+z;break;case 2:k=L+z,S=P-z;break;case 3:L=k-z,S=P-z;break}this._root&&this._root.length&&(this._root=I)}return this._x0=L,this._y0=S,this._x1=k,this._y1=P,this}function a(){var m=[];return this.visit(function(u){if(!u.length)do m.push(u.data);while(u=u.next)}),m}function n(m){return arguments.length?this.cover(+m[0][0],+m[0][1]).cover(+m[1][0],+m[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function t(m,u,L,S,k){this.node=m,this.x0=u,this.y0=L,this.x1=S,this.y1=k}function r(m,u,L){var S,k=this._x0,P=this._y0,z,I,D,R,B=this._x1,F=this._y1,V=[],Y=this._root,K,J;for(Y&&V.push(new t(Y,k,P,B,F)),L==null?L=1/0:(k=m-L,P=u-L,B=m+L,F=u+L,L*=L);K=V.pop();)if(!(!(Y=K.node)||(z=K.x0)>B||(I=K.y0)>F||(D=K.x1)<k||(R=K.y1)<P))if(Y.length){var G=(z+D)/2,Z=(I+R)/2;V.push(new t(Y[3],G,Z,D,R),new t(Y[2],z,Z,G,R),new t(Y[1],G,I,D,Z),new t(Y[0],z,I,G,Z)),(J=(u>=Z)<<1|m>=G)&&(K=V[V.length-1],V[V.length-1]=V[V.length-1-J],V[V.length-1-J]=K)}else{var re=m-+this._x.call(null,Y.data),se=u-+this._y.call(null,Y.data),oe=re*re+se*se;if(oe<L){var N=Math.sqrt(L=oe);k=m-N,P=u-N,B=m+N,F=u+N,S=Y.data}}return S}function f(m){if(isNaN(B=+this._x.call(null,m))||isNaN(F=+this._y.call(null,m)))return this;var u,L=this._root,S,k,P,z=this._x0,I=this._y0,D=this._x1,R=this._y1,B,F,V,Y,K,J,G,Z;if(!L)return this;if(L.length)for(;;){if((K=B>=(V=(z+D)/2))?z=V:D=V,(J=F>=(Y=(I+R)/2))?I=Y:R=Y,u=L,!(L=L[G=J<<1|K]))return this;if(!L.length)break;(u[G+1&3]||u[G+2&3]||u[G+3&3])&&(S=u,Z=G)}for(;L.data!==m;)if(k=L,!(L=L.next))return this;return(P=L.next)&&delete L.next,k?(P?k.next=P:delete k.next,this):u?(P?u[G]=P:delete u[G],(L=u[0]||u[1]||u[2]||u[3])&&L===(u[3]||u[2]||u[1]||u[0])&&!L.length&&(S?S[Z]=L:this._root=L),this):(this._root=P,this)}function o(m){for(var u=0,L=m.length;u<L;++u)this.remove(m[u]);return this}function i(){return this._root}function p(){var m=0;return this.visit(function(u){if(!u.length)do++m;while(u=u.next)}),m}function d(m){var u=[],L,S=this._root,k,P,z,I,D;for(S&&u.push(new t(S,this._x0,this._y0,this._x1,this._y1));L=u.pop();)if(!m(S=L.node,P=L.x0,z=L.y0,I=L.x1,D=L.y1)&&S.length){var R=(P+I)/2,B=(z+D)/2;(k=S[3])&&u.push(new t(k,R,B,I,D)),(k=S[2])&&u.push(new t(k,P,B,R,D)),(k=S[1])&&u.push(new t(k,R,z,I,B)),(k=S[0])&&u.push(new t(k,P,z,R,B))}return this}function y(m){var u=[],L=[],S;for(this._root&&u.push(new t(this._root,this._x0,this._y0,this._x1,this._y1));S=u.pop();){var k=S.node;if(k.length){var P,z=S.x0,I=S.y0,D=S.x1,R=S.y1,B=(z+D)/2,F=(I+R)/2;(P=k[0])&&u.push(new t(P,z,I,B,F)),(P=k[1])&&u.push(new t(P,B,I,D,F)),(P=k[2])&&u.push(new t(P,z,F,B,R)),(P=k[3])&&u.push(new t(P,B,F,D,R))}L.push(S)}for(;S=L.pop();)m(S.node,S.x0,S.y0,S.x1,S.y1);return this}function v(m){return m[0]}function x(m){return arguments.length?(this._x=m,this):this._x}function l(m){return m[1]}function _(m){return arguments.length?(this._y=m,this):this._y}function s(m,u,L){var S=new w(u==null?v:u,L==null?l:L,NaN,NaN,NaN,NaN);return m==null?S:S.addAll(m)}function w(m,u,L,S,k,P){this._x=m,this._y=u,this._x0=L,this._y0=S,this._x1=k,this._y1=P,this._root=void 0}function b(m){for(var u={data:m.data},L=u;m=m.next;)L=L.next={data:m.data};return u}var h=s.prototype=w.prototype;h.copy=function(){var m=new w(this._x,this._y,this._x0,this._y0,this._x1,this._y1),u=this._root,L,S;if(!u)return m;if(!u.length)return m._root=b(u),m;for(L=[{source:u,target:m._root=new Array(4)}];u=L.pop();)for(var k=0;k<4;++k)(S=u.source[k])&&(S.length?L.push({source:S,target:u.target[k]=new Array(4)}):u.target[k]=b(S));return m},h.add=c,h.addAll=A,h.cover=e,h.data=a,h.extent=n,h.find=r,h.remove=f,h.removeAll=o,h.root=i,h.size=p,h.visit=d,h.visitAfter=y,h.x=x,h.y=_,T.quadtree=s,Object.defineProperty(T,"__esModule",{value:!0})})},{}],119:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae,g("d3-path")):(T=T||self,c(T.d3=T.d3||{},T.d3))})(this,function(T,c){function M(et){return function(){return et}}var A=Math.abs,e=Math.atan2,a=Math.cos,n=Math.max,t=Math.min,r=Math.sin,f=Math.sqrt,o=1e-12,i=Math.PI,p=i/2,d=2*i;function y(et){return et>1?0:et<-1?i:Math.acos(et)}function v(et){return et>=1?p:et<=-1?-p:Math.asin(et)}function x(et){return et.innerRadius}function l(et){return et.outerRadius}function _(et){return et.startAngle}function s(et){return et.endAngle}function w(et){return et&&et.padAngle}function b(et,Lt,jt,sr,Ir,Zr,Lr,br){var Nr=jt-et,kn=sr-Lt,_n=Lr-Ir,Wn=br-Zr,Ln=Wn*Nr-_n*kn;if(!(Ln*Ln<o))return Ln=(_n*(Lt-Zr)-Wn*(et-Ir))/Ln,[et+Ln*Nr,Lt+Ln*kn]}function h(et,Lt,jt,sr,Ir,Zr,Lr){var br=et-jt,Nr=Lt-sr,kn=(Lr?Zr:-Zr)/f(br*br+Nr*Nr),_n=kn*Nr,Wn=-kn*br,Ln=et+_n,Xn=Lt+Wn,Kn=jt+_n,Aa=sr+Wn,Ta=(Ln+Kn)/2,oi=(Xn+Aa)/2,$a=Kn-Ln,Va=Aa-Xn,ti=$a*$a+Va*Va,Mr=Ir-Zr,vn=Ln*Aa-Kn*Xn,fn=(Va<0?-1:1)*f(n(0,Mr*Mr*ti-vn*vn)),An=(vn*Va-$a*fn)/ti,Gn=(-vn*$a-Va*fn)/ti,ia=(vn*Va+$a*fn)/ti,Yn=(-vn*$a+Va*fn)/ti,zn=An-Ta,ea=Gn-oi,wa=ia-Ta,si=Yn-oi;return zn*zn+ea*ea>wa*wa+si*si&&(An=ia,Gn=Yn),{cx:An,cy:Gn,x01:-_n,y01:-Wn,x11:An*(Ir/Mr-1),y11:Gn*(Ir/Mr-1)}}function m(){var et=x,Lt=l,jt=M(0),sr=null,Ir=_,Zr=s,Lr=w,br=null;function Nr(){var kn,_n,Wn=+et.apply(this,arguments),Ln=+Lt.apply(this,arguments),Xn=Ir.apply(this,arguments)-p,Kn=Zr.apply(this,arguments)-p,Aa=A(Kn-Xn),Ta=Kn>Xn;if(br||(br=kn=c.path()),Ln<Wn&&(_n=Ln,Ln=Wn,Wn=_n),!(Ln>o))br.moveTo(0,0);else if(Aa>d-o)br.moveTo(Ln*a(Xn),Ln*r(Xn)),br.arc(0,0,Ln,Xn,Kn,!Ta),Wn>o&&(br.moveTo(Wn*a(Kn),Wn*r(Kn)),br.arc(0,0,Wn,Kn,Xn,Ta));else{var oi=Xn,$a=Kn,Va=Xn,ti=Kn,Mr=Aa,vn=Aa,fn=Lr.apply(this,arguments)/2,An=fn>o&&(sr?+sr.apply(this,arguments):f(Wn*Wn+Ln*Ln)),Gn=t(A(Ln-Wn)/2,+jt.apply(this,arguments)),ia=Gn,Yn=Gn,zn,ea;if(An>o){var wa=v(An/Wn*r(fn)),si=v(An/Ln*r(fn));(Mr-=wa*2)>o?(wa*=Ta?1:-1,Va+=wa,ti-=wa):(Mr=0,Va=ti=(Xn+Kn)/2),(vn-=si*2)>o?(si*=Ta?1:-1,oi+=si,$a-=si):(vn=0,oi=$a=(Xn+Kn)/2)}var Ft=Ln*a(oi),cr=Ln*r(oi),qr=Wn*a(ti),nn=Wn*r(ti);if(Gn>o){var on=Ln*a($a),Sn=Ln*r($a),xn=Wn*a(Va),tn=Wn*r(Va),xr;if(Aa<i&&(xr=b(Ft,cr,xn,tn,on,Sn,qr,nn))){var dr=Ft-xr[0],Rr=cr-xr[1],dn=on-xr[0],Bn=Sn-xr[1],aa=1/r(y((dr*dn+Rr*Bn)/(f(dr*dr+Rr*Rr)*f(dn*dn+Bn*Bn)))/2),bn=f(xr[0]*xr[0]+xr[1]*xr[1]);ia=t(Gn,(Wn-bn)/(aa-1)),Yn=t(Gn,(Ln-bn)/(aa+1))}}vn>o?Yn>o?(zn=h(xn,tn,Ft,cr,Ln,Yn,Ta),ea=h(on,Sn,qr,nn,Ln,Yn,Ta),br.moveTo(zn.cx+zn.x01,zn.cy+zn.y01),Yn<Gn?br.arc(zn.cx,zn.cy,Yn,e(zn.y01,zn.x01),e(ea.y01,ea.x01),!Ta):(br.arc(zn.cx,zn.cy,Yn,e(zn.y01,zn.x01),e(zn.y11,zn.x11),!Ta),br.arc(0,0,Ln,e(zn.cy+zn.y11,zn.cx+zn.x11),e(ea.cy+ea.y11,ea.cx+ea.x11),!Ta),br.arc(ea.cx,ea.cy,Yn,e(ea.y11,ea.x11),e(ea.y01,ea.x01),!Ta))):(br.moveTo(Ft,cr),br.arc(0,0,Ln,oi,$a,!Ta)):br.moveTo(Ft,cr),!(Wn>o)||!(Mr>o)?br.lineTo(qr,nn):ia>o?(zn=h(qr,nn,on,Sn,Wn,-ia,Ta),ea=h(Ft,cr,xn,tn,Wn,-ia,Ta),br.lineTo(zn.cx+zn.x01,zn.cy+zn.y01),ia<Gn?br.arc(zn.cx,zn.cy,ia,e(zn.y01,zn.x01),e(ea.y01,ea.x01),!Ta):(br.arc(zn.cx,zn.cy,ia,e(zn.y01,zn.x01),e(zn.y11,zn.x11),!Ta),br.arc(0,0,Wn,e(zn.cy+zn.y11,zn.cx+zn.x11),e(ea.cy+ea.y11,ea.cx+ea.x11),Ta),br.arc(ea.cx,ea.cy,ia,e(ea.y11,ea.x11),e(ea.y01,ea.x01),!Ta))):br.arc(0,0,Wn,ti,Va,Ta)}if(br.closePath(),kn)return br=null,kn+""||null}return Nr.centroid=function(){var kn=(+et.apply(this,arguments)+ +Lt.apply(this,arguments))/2,_n=(+Ir.apply(this,arguments)+ +Zr.apply(this,arguments))/2-i/2;return[a(_n)*kn,r(_n)*kn]},Nr.innerRadius=function(kn){return arguments.length?(et=typeof kn=="function"?kn:M(+kn),Nr):et},Nr.outerRadius=function(kn){return arguments.length?(Lt=typeof kn=="function"?kn:M(+kn),Nr):Lt},Nr.cornerRadius=function(kn){return arguments.length?(jt=typeof kn=="function"?kn:M(+kn),Nr):jt},Nr.padRadius=function(kn){return arguments.length?(sr=kn==null?null:typeof kn=="function"?kn:M(+kn),Nr):sr},Nr.startAngle=function(kn){return arguments.length?(Ir=typeof kn=="function"?kn:M(+kn),Nr):Ir},Nr.endAngle=function(kn){return arguments.length?(Zr=typeof kn=="function"?kn:M(+kn),Nr):Zr},Nr.padAngle=function(kn){return arguments.length?(Lr=typeof kn=="function"?kn:M(+kn),Nr):Lr},Nr.context=function(kn){return arguments.length?(br=kn==null?null:kn,Nr):br},Nr}function u(et){this._context=et}u.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,Lt):this._context.moveTo(et,Lt);break;case 1:this._point=2;default:this._context.lineTo(et,Lt);break}}};function L(et){return new u(et)}function S(et){return et[0]}function k(et){return et[1]}function P(){var et=S,Lt=k,jt=M(!0),sr=null,Ir=L,Zr=null;function Lr(br){var Nr,kn=br.length,_n,Wn=!1,Ln;for(sr==null&&(Zr=Ir(Ln=c.path())),Nr=0;Nr<=kn;++Nr)!(Nr<kn&&jt(_n=br[Nr],Nr,br))===Wn&&((Wn=!Wn)?Zr.lineStart():Zr.lineEnd()),Wn&&Zr.point(+et(_n,Nr,br),+Lt(_n,Nr,br));if(Ln)return Zr=null,Ln+""||null}return Lr.x=function(br){return arguments.length?(et=typeof br=="function"?br:M(+br),Lr):et},Lr.y=function(br){return arguments.length?(Lt=typeof br=="function"?br:M(+br),Lr):Lt},Lr.defined=function(br){return arguments.length?(jt=typeof br=="function"?br:M(!!br),Lr):jt},Lr.curve=function(br){return arguments.length?(Ir=br,sr!=null&&(Zr=Ir(sr)),Lr):Ir},Lr.context=function(br){return arguments.length?(br==null?sr=Zr=null:Zr=Ir(sr=br),Lr):sr},Lr}function z(){var et=S,Lt=null,jt=M(0),sr=k,Ir=M(!0),Zr=null,Lr=L,br=null;function Nr(_n){var Wn,Ln,Xn,Kn=_n.length,Aa,Ta=!1,oi,$a=new Array(Kn),Va=new Array(Kn);for(Zr==null&&(br=Lr(oi=c.path())),Wn=0;Wn<=Kn;++Wn){if(!(Wn<Kn&&Ir(Aa=_n[Wn],Wn,_n))===Ta)if(Ta=!Ta)Ln=Wn,br.areaStart(),br.lineStart();else{for(br.lineEnd(),br.lineStart(),Xn=Wn-1;Xn>=Ln;--Xn)br.point($a[Xn],Va[Xn]);br.lineEnd(),br.areaEnd()}Ta&&($a[Wn]=+et(Aa,Wn,_n),Va[Wn]=+jt(Aa,Wn,_n),br.point(Lt?+Lt(Aa,Wn,_n):$a[Wn],sr?+sr(Aa,Wn,_n):Va[Wn]))}if(oi)return br=null,oi+""||null}function kn(){return P().defined(Ir).curve(Lr).context(Zr)}return Nr.x=function(_n){return arguments.length?(et=typeof _n=="function"?_n:M(+_n),Lt=null,Nr):et},Nr.x0=function(_n){return arguments.length?(et=typeof _n=="function"?_n:M(+_n),Nr):et},Nr.x1=function(_n){return arguments.length?(Lt=_n==null?null:typeof _n=="function"?_n:M(+_n),Nr):Lt},Nr.y=function(_n){return arguments.length?(jt=typeof _n=="function"?_n:M(+_n),sr=null,Nr):jt},Nr.y0=function(_n){return arguments.length?(jt=typeof _n=="function"?_n:M(+_n),Nr):jt},Nr.y1=function(_n){return arguments.length?(sr=_n==null?null:typeof _n=="function"?_n:M(+_n),Nr):sr},Nr.lineX0=Nr.lineY0=function(){return kn().x(et).y(jt)},Nr.lineY1=function(){return kn().x(et).y(sr)},Nr.lineX1=function(){return kn().x(Lt).y(jt)},Nr.defined=function(_n){return arguments.length?(Ir=typeof _n=="function"?_n:M(!!_n),Nr):Ir},Nr.curve=function(_n){return arguments.length?(Lr=_n,Zr!=null&&(br=Lr(Zr)),Nr):Lr},Nr.context=function(_n){return arguments.length?(_n==null?Zr=br=null:br=Lr(Zr=_n),Nr):Zr},Nr}function I(et,Lt){return Lt<et?-1:Lt>et?1:Lt>=et?0:NaN}function D(et){return et}function R(){var et=D,Lt=I,jt=null,sr=M(0),Ir=M(d),Zr=M(0);function Lr(br){var Nr,kn=br.length,_n,Wn,Ln=0,Xn=new Array(kn),Kn=new Array(kn),Aa=+sr.apply(this,arguments),Ta=Math.min(d,Math.max(-d,Ir.apply(this,arguments)-Aa)),oi,$a=Math.min(Math.abs(Ta)/kn,Zr.apply(this,arguments)),Va=$a*(Ta<0?-1:1),ti;for(Nr=0;Nr<kn;++Nr)(ti=Kn[Xn[Nr]=Nr]=+et(br[Nr],Nr,br))>0&&(Ln+=ti);for(Lt!=null?Xn.sort(function(Mr,vn){return Lt(Kn[Mr],Kn[vn])}):jt!=null&&Xn.sort(function(Mr,vn){return jt(br[Mr],br[vn])}),Nr=0,Wn=Ln?(Ta-kn*Va)/Ln:0;Nr<kn;++Nr,Aa=oi)_n=Xn[Nr],ti=Kn[_n],oi=Aa+(ti>0?ti*Wn:0)+Va,Kn[_n]={data:br[_n],index:Nr,value:ti,startAngle:Aa,endAngle:oi,padAngle:$a};return Kn}return Lr.value=function(br){return arguments.length?(et=typeof br=="function"?br:M(+br),Lr):et},Lr.sortValues=function(br){return arguments.length?(Lt=br,jt=null,Lr):Lt},Lr.sort=function(br){return arguments.length?(jt=br,Lt=null,Lr):jt},Lr.startAngle=function(br){return arguments.length?(sr=typeof br=="function"?br:M(+br),Lr):sr},Lr.endAngle=function(br){return arguments.length?(Ir=typeof br=="function"?br:M(+br),Lr):Ir},Lr.padAngle=function(br){return arguments.length?(Zr=typeof br=="function"?br:M(+br),Lr):Zr},Lr}var B=V(L);function F(et){this._curve=et}F.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(et,Lt){this._curve.point(Lt*Math.sin(et),Lt*-Math.cos(et))}};function V(et){function Lt(jt){return new F(et(jt))}return Lt._curve=et,Lt}function Y(et){var Lt=et.curve;return et.angle=et.x,delete et.x,et.radius=et.y,delete et.y,et.curve=function(jt){return arguments.length?Lt(V(jt)):Lt()._curve},et}function K(){return Y(P().curve(B))}function J(){var et=z().curve(B),Lt=et.curve,jt=et.lineX0,sr=et.lineX1,Ir=et.lineY0,Zr=et.lineY1;return et.angle=et.x,delete et.x,et.startAngle=et.x0,delete et.x0,et.endAngle=et.x1,delete et.x1,et.radius=et.y,delete et.y,et.innerRadius=et.y0,delete et.y0,et.outerRadius=et.y1,delete et.y1,et.lineStartAngle=function(){return Y(jt())},delete et.lineX0,et.lineEndAngle=function(){return Y(sr())},delete et.lineX1,et.lineInnerRadius=function(){return Y(Ir())},delete et.lineY0,et.lineOuterRadius=function(){return Y(Zr())},delete et.lineY1,et.curve=function(Lr){return arguments.length?Lt(V(Lr)):Lt()._curve},et}function G(et,Lt){return[(Lt=+Lt)*Math.cos(et-=Math.PI/2),Lt*Math.sin(et)]}var Z=Array.prototype.slice;function re(et){return et.source}function se(et){return et.target}function oe(et){var Lt=re,jt=se,sr=S,Ir=k,Zr=null;function Lr(){var br,Nr=Z.call(arguments),kn=Lt.apply(this,Nr),_n=jt.apply(this,Nr);if(Zr||(Zr=br=c.path()),et(Zr,+sr.apply(this,(Nr[0]=kn,Nr)),+Ir.apply(this,Nr),+sr.apply(this,(Nr[0]=_n,Nr)),+Ir.apply(this,Nr)),br)return Zr=null,br+""||null}return Lr.source=function(br){return arguments.length?(Lt=br,Lr):Lt},Lr.target=function(br){return arguments.length?(jt=br,Lr):jt},Lr.x=function(br){return arguments.length?(sr=typeof br=="function"?br:M(+br),Lr):sr},Lr.y=function(br){return arguments.length?(Ir=typeof br=="function"?br:M(+br),Lr):Ir},Lr.context=function(br){return arguments.length?(Zr=br==null?null:br,Lr):Zr},Lr}function N(et,Lt,jt,sr,Ir){et.moveTo(Lt,jt),et.bezierCurveTo(Lt=(Lt+sr)/2,jt,Lt,Ir,sr,Ir)}function U(et,Lt,jt,sr,Ir){et.moveTo(Lt,jt),et.bezierCurveTo(Lt,jt=(jt+Ir)/2,sr,jt,sr,Ir)}function q(et,Lt,jt,sr,Ir){var Zr=G(Lt,jt),Lr=G(Lt,jt=(jt+Ir)/2),br=G(sr,jt),Nr=G(sr,Ir);et.moveTo(Zr[0],Zr[1]),et.bezierCurveTo(Lr[0],Lr[1],br[0],br[1],Nr[0],Nr[1])}function Q(){return oe(N)}function W(){return oe(U)}function X(){var et=oe(q);return et.angle=et.x,delete et.x,et.radius=et.y,delete et.y,et}var te={draw:function(et,Lt){var jt=Math.sqrt(Lt/i);et.moveTo(jt,0),et.arc(0,0,jt,0,d)}},ee={draw:function(et,Lt){var jt=Math.sqrt(Lt/5)/2;et.moveTo(-3*jt,-jt),et.lineTo(-jt,-jt),et.lineTo(-jt,-3*jt),et.lineTo(jt,-3*jt),et.lineTo(jt,-jt),et.lineTo(3*jt,-jt),et.lineTo(3*jt,jt),et.lineTo(jt,jt),et.lineTo(jt,3*jt),et.lineTo(-jt,3*jt),et.lineTo(-jt,jt),et.lineTo(-3*jt,jt),et.closePath()}},ie=Math.sqrt(1/3),le=ie*2,ye={draw:function(et,Lt){var jt=Math.sqrt(Lt/le),sr=jt*ie;et.moveTo(0,-jt),et.lineTo(sr,0),et.lineTo(0,jt),et.lineTo(-sr,0),et.closePath()}},ue=.8908130915292852,pe=Math.sin(i/10)/Math.sin(7*i/10),ge=Math.sin(d/10)*pe,Te=-Math.cos(d/10)*pe,_e={draw:function(et,Lt){var jt=Math.sqrt(Lt*ue),sr=ge*jt,Ir=Te*jt;et.moveTo(0,-jt),et.lineTo(sr,Ir);for(var Zr=1;Zr<5;++Zr){var Lr=d*Zr/5,br=Math.cos(Lr),Nr=Math.sin(Lr);et.lineTo(Nr*jt,-br*jt),et.lineTo(br*sr-Nr*Ir,Nr*sr+br*Ir)}et.closePath()}},De={draw:function(et,Lt){var jt=Math.sqrt(Lt),sr=-jt/2;et.rect(sr,sr,jt,jt)}},Oe=Math.sqrt(3),Ue={draw:function(et,Lt){var jt=-Math.sqrt(Lt/(Oe*3));et.moveTo(0,jt*2),et.lineTo(-Oe*jt,-jt),et.lineTo(Oe*jt,-jt),et.closePath()}},xe=-.5,Pe=Math.sqrt(3)/2,Ve=1/Math.sqrt(12),Qe=(Ve/2+1)*3,Fe={draw:function(et,Lt){var jt=Math.sqrt(Lt/Qe),sr=jt/2,Ir=jt*Ve,Zr=sr,Lr=jt*Ve+jt,br=-Zr,Nr=Lr;et.moveTo(sr,Ir),et.lineTo(Zr,Lr),et.lineTo(br,Nr),et.lineTo(xe*sr-Pe*Ir,Pe*sr+xe*Ir),et.lineTo(xe*Zr-Pe*Lr,Pe*Zr+xe*Lr),et.lineTo(xe*br-Pe*Nr,Pe*br+xe*Nr),et.lineTo(xe*sr+Pe*Ir,xe*Ir-Pe*sr),et.lineTo(xe*Zr+Pe*Lr,xe*Lr-Pe*Zr),et.lineTo(xe*br+Pe*Nr,xe*Nr-Pe*br),et.closePath()}},Le=[te,ee,ye,De,_e,Ue,Fe];function Ne(){var et=M(te),Lt=M(64),jt=null;function sr(){var Ir;if(jt||(jt=Ir=c.path()),et.apply(this,arguments).draw(jt,+Lt.apply(this,arguments)),Ir)return jt=null,Ir+""||null}return sr.type=function(Ir){return arguments.length?(et=typeof Ir=="function"?Ir:M(Ir),sr):et},sr.size=function(Ir){return arguments.length?(Lt=typeof Ir=="function"?Ir:M(+Ir),sr):Lt},sr.context=function(Ir){return arguments.length?(jt=Ir==null?null:Ir,sr):jt},sr}function dt(){}function Dt(et,Lt,jt){et._context.bezierCurveTo((2*et._x0+et._x1)/3,(2*et._y0+et._y1)/3,(et._x0+2*et._x1)/3,(et._y0+2*et._y1)/3,(et._x0+4*et._x1+Lt)/6,(et._y0+4*et._y1+jt)/6)}function Xt(et){this._context=et}Xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,Lt):this._context.moveTo(et,Lt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dt(this,et,Lt);break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=Lt}};function Tt(et){return new Xt(et)}function zt(et){this._context=et}zt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1,this._x2=et,this._y2=Lt;break;case 1:this._point=2,this._x3=et,this._y3=Lt;break;case 2:this._point=3,this._x4=et,this._y4=Lt,this._context.moveTo((this._x0+4*this._x1+et)/6,(this._y0+4*this._y1+Lt)/6);break;default:Dt(this,et,Lt);break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=Lt}};function Ut(et){return new zt(et)}function Et(et){this._context=et}Et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var jt=(this._x0+4*this._x1+et)/6,sr=(this._y0+4*this._y1+Lt)/6;this._line?this._context.lineTo(jt,sr):this._context.moveTo(jt,sr);break;case 3:this._point=4;default:Dt(this,et,Lt);break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=Lt}};function Mt(et){return new Et(et)}function rt(et,Lt){this._basis=new Xt(et),this._beta=Lt}rt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var et=this._x,Lt=this._y,jt=et.length-1;if(jt>0)for(var sr=et[0],Ir=Lt[0],Zr=et[jt]-sr,Lr=Lt[jt]-Ir,br=-1,Nr;++br<=jt;)Nr=br/jt,this._basis.point(this._beta*et[br]+(1-this._beta)*(sr+Nr*Zr),this._beta*Lt[br]+(1-this._beta)*(Ir+Nr*Lr));this._x=this._y=null,this._basis.lineEnd()},point:function(et,Lt){this._x.push(+et),this._y.push(+Lt)}};var ct=function et(Lt){function jt(sr){return Lt===1?new Xt(sr):new rt(sr,Lt)}return jt.beta=function(sr){return et(+sr)},jt}(.85);function Ze(et,Lt,jt){et._context.bezierCurveTo(et._x1+et._k*(et._x2-et._x0),et._y1+et._k*(et._y2-et._y0),et._x2+et._k*(et._x1-Lt),et._y2+et._k*(et._y1-jt),et._x2,et._y2)}function ke(et,Lt){this._context=et,this._k=(1-Lt)/6}ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ze(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,Lt):this._context.moveTo(et,Lt);break;case 1:this._point=2,this._x1=et,this._y1=Lt;break;case 2:this._point=3;default:Ze(this,et,Lt);break}this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=Lt}};var Ge=function et(Lt){function jt(sr){return new ke(sr,Lt)}return jt.tension=function(sr){return et(+sr)},jt}(0);function Je(et,Lt){this._context=et,this._k=(1-Lt)/6}Je.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1,this._x3=et,this._y3=Lt;break;case 1:this._point=2,this._context.moveTo(this._x4=et,this._y4=Lt);break;case 2:this._point=3,this._x5=et,this._y5=Lt;break;default:Ze(this,et,Lt);break}this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=Lt}};var it=function et(Lt){function jt(sr){return new Je(sr,Lt)}return jt.tension=function(sr){return et(+sr)},jt}(0);function Pt(et,Lt){this._context=et,this._k=(1-Lt)/6}Pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ze(this,et,Lt);break}this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=Lt}};var At=function et(Lt){function jt(sr){return new Pt(sr,Lt)}return jt.tension=function(sr){return et(+sr)},jt}(0);function Ot(et,Lt,jt){var sr=et._x1,Ir=et._y1,Zr=et._x2,Lr=et._y2;if(et._l01_a>o){var br=2*et._l01_2a+3*et._l01_a*et._l12_a+et._l12_2a,Nr=3*et._l01_a*(et._l01_a+et._l12_a);sr=(sr*br-et._x0*et._l12_2a+et._x2*et._l01_2a)/Nr,Ir=(Ir*br-et._y0*et._l12_2a+et._y2*et._l01_2a)/Nr}if(et._l23_a>o){var kn=2*et._l23_2a+3*et._l23_a*et._l12_a+et._l12_2a,_n=3*et._l23_a*(et._l23_a+et._l12_a);Zr=(Zr*kn+et._x1*et._l23_2a-Lt*et._l12_2a)/_n,Lr=(Lr*kn+et._y1*et._l23_2a-jt*et._l12_2a)/_n}et._context.bezierCurveTo(sr,Ir,Zr,Lr,et._x2,et._y2)}function Jt(et,Lt){this._context=et,this._alpha=Lt}Jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){if(et=+et,Lt=+Lt,this._point){var jt=this._x2-et,sr=this._y2-Lt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(jt*jt+sr*sr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(et,Lt):this._context.moveTo(et,Lt);break;case 1:this._point=2;break;case 2:this._point=3;default:Ot(this,et,Lt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=Lt}};var Bt=function et(Lt){function jt(sr){return Lt?new Jt(sr,Lt):new ke(sr,0)}return jt.alpha=function(sr){return et(+sr)},jt}(.5);function qt(et,Lt){this._context=et,this._alpha=Lt}qt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(et,Lt){if(et=+et,Lt=+Lt,this._point){var jt=this._x2-et,sr=this._y2-Lt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(jt*jt+sr*sr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=et,this._y3=Lt;break;case 1:this._point=2,this._context.moveTo(this._x4=et,this._y4=Lt);break;case 2:this._point=3,this._x5=et,this._y5=Lt;break;default:Ot(this,et,Lt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=Lt}};var rr=function et(Lt){function jt(sr){return Lt?new qt(sr,Lt):new Je(sr,0)}return jt.alpha=function(sr){return et(+sr)},jt}(.5);function er(et,Lt){this._context=et,this._alpha=Lt}er.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){if(et=+et,Lt=+Lt,this._point){var jt=this._x2-et,sr=this._y2-Lt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(jt*jt+sr*sr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ot(this,et,Lt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=Lt}};var pr=function et(Lt){function jt(sr){return Lt?new er(sr,Lt):new Pt(sr,0)}return jt.alpha=function(sr){return et(+sr)},jt}(.5);function Xr(et){this._context=et}Xr.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(et,Lt){et=+et,Lt=+Lt,this._point?this._context.lineTo(et,Lt):(this._point=1,this._context.moveTo(et,Lt))}};function hn(et){return new Xr(et)}function $r(et){return et<0?-1:1}function nt(et,Lt,jt){var sr=et._x1-et._x0,Ir=Lt-et._x1,Zr=(et._y1-et._y0)/(sr||Ir<0&&-0),Lr=(jt-et._y1)/(Ir||sr<0&&-0),br=(Zr*Ir+Lr*sr)/(sr+Ir);return($r(Zr)+$r(Lr))*Math.min(Math.abs(Zr),Math.abs(Lr),.5*Math.abs(br))||0}function Gt(et,Lt){var jt=et._x1-et._x0;return jt?(3*(et._y1-et._y0)/jt-Lt)/2:Lt}function Kt(et,Lt,jt){var sr=et._x0,Ir=et._y0,Zr=et._x1,Lr=et._y1,br=(Zr-sr)/3;et._context.bezierCurveTo(sr+br,Ir+br*Lt,Zr-br,Lr-br*jt,Zr,Lr)}function Ht(et){this._context=et}Ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Kt(this,this._t0,Gt(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){var jt=NaN;if(et=+et,Lt=+Lt,!(et===this._x1&&Lt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(et,Lt):this._context.moveTo(et,Lt);break;case 1:this._point=2;break;case 2:this._point=3,Kt(this,Gt(this,jt=nt(this,et,Lt)),jt);break;default:Kt(this,this._t0,jt=nt(this,et,Lt));break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=Lt,this._t0=jt}}};function _r(et){this._context=new tt(et)}(_r.prototype=Object.create(Ht.prototype)).point=function(et,Lt){Ht.prototype.point.call(this,Lt,et)};function tt(et){this._context=et}tt.prototype={moveTo:function(et,Lt){this._context.moveTo(Lt,et)},closePath:function(){this._context.closePath()},lineTo:function(et,Lt){this._context.lineTo(Lt,et)},bezierCurveTo:function(et,Lt,jt,sr,Ir,Zr){this._context.bezierCurveTo(Lt,et,sr,jt,Zr,Ir)}};function je(et){return new Ht(et)}function st(et){return new _r(et)}function ft(et){this._context=et}ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var et=this._x,Lt=this._y,jt=et.length;if(jt)if(this._line?this._context.lineTo(et[0],Lt[0]):this._context.moveTo(et[0],Lt[0]),jt===2)this._context.lineTo(et[1],Lt[1]);else for(var sr=Me(et),Ir=Me(Lt),Zr=0,Lr=1;Lr<jt;++Zr,++Lr)this._context.bezierCurveTo(sr[0][Zr],Ir[0][Zr],sr[1][Zr],Ir[1][Zr],et[Lr],Lt[Lr]);(this._line||this._line!==0&&jt===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(et,Lt){this._x.push(+et),this._y.push(+Lt)}};function Me(et){var Lt,jt=et.length-1,sr,Ir=new Array(jt),Zr=new Array(jt),Lr=new Array(jt);for(Ir[0]=0,Zr[0]=2,Lr[0]=et[0]+2*et[1],Lt=1;Lt<jt-1;++Lt)Ir[Lt]=1,Zr[Lt]=4,Lr[Lt]=4*et[Lt]+2*et[Lt+1];for(Ir[jt-1]=2,Zr[jt-1]=7,Lr[jt-1]=8*et[jt-1]+et[jt],Lt=1;Lt<jt;++Lt)sr=Ir[Lt]/Zr[Lt-1],Zr[Lt]-=sr,Lr[Lt]-=sr*Lr[Lt-1];for(Ir[jt-1]=Lr[jt-1]/Zr[jt-1],Lt=jt-2;Lt>=0;--Lt)Ir[Lt]=(Lr[Lt]-Ir[Lt+1])/Zr[Lt];for(Zr[jt-1]=(et[jt]+Ir[jt-1])/2,Lt=0;Lt<jt-1;++Lt)Zr[Lt]=2*et[Lt+1]-Ir[Lt+1];return[Ir,Zr]}function Se(et){return new ft(et)}function Ke(et,Lt){this._context=et,this._t=Lt}Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,Lt):this._context.moveTo(et,Lt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Lt),this._context.lineTo(et,Lt);else{var jt=this._x*(1-this._t)+et*this._t;this._context.lineTo(jt,this._y),this._context.lineTo(jt,Lt)}break}}this._x=et,this._y=Lt}};function Xe(et){return new Ke(et,.5)}function ot(et){return new Ke(et,0)}function pt(et){return new Ke(et,1)}function vt(et,Lt){if((Lr=et.length)>1)for(var jt=1,sr,Ir,Zr=et[Lt[0]],Lr,br=Zr.length;jt<Lr;++jt)for(Ir=Zr,Zr=et[Lt[jt]],sr=0;sr<br;++sr)Zr[sr][1]+=Zr[sr][0]=isNaN(Ir[sr][1])?Ir[sr][0]:Ir[sr][1]}function Ct(et){for(var Lt=et.length,jt=new Array(Lt);--Lt>=0;)jt[Lt]=Lt;return jt}function St(et,Lt){return et[Lt]}function Nt(){var et=M([]),Lt=Ct,jt=vt,sr=St;function Ir(Zr){var Lr=et.apply(this,arguments),br,Nr=Zr.length,kn=Lr.length,_n=new Array(kn),Wn;for(br=0;br<kn;++br){for(var Ln=Lr[br],Xn=_n[br]=new Array(Nr),Kn=0,Aa;Kn<Nr;++Kn)Xn[Kn]=Aa=[0,+sr(Zr[Kn],Ln,Kn,Zr)],Aa.data=Zr[Kn];Xn.key=Ln}for(br=0,Wn=Lt(_n);br<kn;++br)_n[Wn[br]].index=br;return jt(_n,Wn),_n}return Ir.keys=function(Zr){return arguments.length?(et=typeof Zr=="function"?Zr:M(Z.call(Zr)),Ir):et},Ir.value=function(Zr){return arguments.length?(sr=typeof Zr=="function"?Zr:M(+Zr),Ir):sr},Ir.order=function(Zr){return arguments.length?(Lt=Zr==null?Ct:typeof Zr=="function"?Zr:M(Z.call(Zr)),Ir):Lt},Ir.offset=function(Zr){return arguments.length?(jt=Zr==null?vt:Zr,Ir):jt},Ir}function ir(et,Lt){if((sr=et.length)>0){for(var jt,sr,Ir=0,Zr=et[0].length,Lr;Ir<Zr;++Ir){for(Lr=jt=0;jt<sr;++jt)Lr+=et[jt][Ir][1]||0;if(Lr)for(jt=0;jt<sr;++jt)et[jt][Ir][1]/=Lr}vt(et,Lt)}}function lr(et,Lt){if((Nr=et.length)>0)for(var jt,sr=0,Ir,Zr,Lr,br,Nr,kn=et[Lt[0]].length;sr<kn;++sr)for(Lr=br=0,jt=0;jt<Nr;++jt)(Zr=(Ir=et[Lt[jt]][sr])[1]-Ir[0])>0?(Ir[0]=Lr,Ir[1]=Lr+=Zr):Zr<0?(Ir[1]=br,Ir[0]=br+=Zr):(Ir[0]=0,Ir[1]=Zr)}function Yr(et,Lt){if((Ir=et.length)>0){for(var jt=0,sr=et[Lt[0]],Ir,Zr=sr.length;jt<Zr;++jt){for(var Lr=0,br=0;Lr<Ir;++Lr)br+=et[Lr][jt][1]||0;sr[jt][1]+=sr[jt][0]=-br/2}vt(et,Lt)}}function Pr(et,Lt){if(!(!((Lr=et.length)>0)||!((Zr=(Ir=et[Lt[0]]).length)>0))){for(var jt=0,sr=1,Ir,Zr,Lr;sr<Zr;++sr){for(var br=0,Nr=0,kn=0;br<Lr;++br){for(var _n=et[Lt[br]],Wn=_n[sr][1]||0,Ln=_n[sr-1][1]||0,Xn=(Wn-Ln)/2,Kn=0;Kn<br;++Kn){var Aa=et[Lt[Kn]],Ta=Aa[sr][1]||0,oi=Aa[sr-1][1]||0;Xn+=Ta-oi}Nr+=Wn,kn+=Xn*Wn}Ir[sr-1][1]+=Ir[sr-1][0]=jt,Nr&&(jt-=kn/Nr)}Ir[sr-1][1]+=Ir[sr-1][0]=jt,vt(et,Lt)}}function wr(et){var Lt=et.map(Jr);return Ct(et).sort(function(jt,sr){return Lt[jt]-Lt[sr]})}function Jr(et){for(var Lt=-1,jt=0,sr=et.length,Ir,Zr=-1/0;++Lt<sr;)(Ir=+et[Lt][1])>Zr&&(Zr=Ir,jt=Lt);return jt}function gr(et){var Lt=et.map(mr);return Ct(et).sort(function(jt,sr){return Lt[jt]-Lt[sr]})}function mr(et){for(var Lt=0,jt=-1,sr=et.length,Ir;++jt<sr;)(Ir=+et[jt][1])&&(Lt+=Ir);return Lt}function Ur(et){return gr(et).reverse()}function Hr(et){var Lt=et.length,jt,sr,Ir=et.map(mr),Zr=wr(et),Lr=0,br=0,Nr=[],kn=[];for(jt=0;jt<Lt;++jt)sr=Zr[jt],Lr<br?(Lr+=Ir[sr],Nr.push(sr)):(br+=Ir[sr],kn.push(sr));return kn.reverse().concat(Nr)}function Tr(et){return Ct(et).reverse()}T.arc=m,T.area=z,T.areaRadial=J,T.curveBasis=Tt,T.curveBasisClosed=Ut,T.curveBasisOpen=Mt,T.curveBundle=ct,T.curveCardinal=Ge,T.curveCardinalClosed=it,T.curveCardinalOpen=At,T.curveCatmullRom=Bt,T.curveCatmullRomClosed=rr,T.curveCatmullRomOpen=pr,T.curveLinear=L,T.curveLinearClosed=hn,T.curveMonotoneX=je,T.curveMonotoneY=st,T.curveNatural=Se,T.curveStep=Xe,T.curveStepAfter=pt,T.curveStepBefore=ot,T.line=P,T.lineRadial=K,T.linkHorizontal=Q,T.linkRadial=X,T.linkVertical=W,T.pie=R,T.pointRadial=G,T.radialArea=J,T.radialLine=K,T.stack=Nt,T.stackOffsetDiverging=lr,T.stackOffsetExpand=ir,T.stackOffsetNone=vt,T.stackOffsetSilhouette=Yr,T.stackOffsetWiggle=Pr,T.stackOrderAppearance=wr,T.stackOrderAscending=gr,T.stackOrderDescending=Ur,T.stackOrderInsideOut=Hr,T.stackOrderNone=Ct,T.stackOrderReverse=Tr,T.symbol=Ne,T.symbolCircle=te,T.symbolCross=ee,T.symbolDiamond=ye,T.symbolSquare=De,T.symbolStar=_e,T.symbolTriangle=Ue,T.symbolWye=Fe,T.symbols=Le,Object.defineProperty(T,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae,g("d3-time")):(T=T||self,c(T.d3=T.d3||{},T.d3))})(this,function(T,c){function M(rt){if(0<=rt.y&&rt.y<100){var ct=new Date(-1,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L);return ct.setFullYear(rt.y),ct}return new Date(rt.y,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L)}function A(rt){if(0<=rt.y&&rt.y<100){var ct=new Date(Date.UTC(-1,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L));return ct.setUTCFullYear(rt.y),ct}return new Date(Date.UTC(rt.y,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L))}function e(rt,ct,Ze){return{y:rt,m:ct,d:Ze,H:0,M:0,S:0,L:0}}function a(rt){var ct=rt.dateTime,Ze=rt.date,ke=rt.time,Ge=rt.periods,Je=rt.days,it=rt.shortDays,Pt=rt.months,At=rt.shortMonths,Ot=p(Ge),Jt=d(Ge),Bt=p(Je),qt=d(Je),rr=p(it),er=d(it),pr=p(Pt),Xr=d(Pt),hn=p(At),$r=d(At),nt={a:pt,A:vt,b:Ct,B:St,c:null,d:F,e:F,f:G,H:V,I:Y,j:K,L:J,m:Z,M:re,p:Nt,q:ir,Q:Ne,s:dt,S:se,u:oe,U:N,V:U,w:q,W:Q,x:null,X:null,y:W,Y:X,Z:te,"%":Le},Gt={a:lr,A:Yr,b:Pr,B:wr,c:null,d:ee,e:ee,f:pe,H:ie,I:le,j:ye,L:ue,m:ge,M:Te,p:Jr,q:gr,Q:Ne,s:dt,S:_e,u:De,U:Oe,V:Ue,w:xe,W:Pe,x:null,X:null,y:Ve,Y:Qe,Z:Fe,"%":Le},Kt={a:st,A:ft,b:Me,B:Se,c:Ke,d:u,e:u,f:I,H:S,I:S,j:L,L:z,m,M:k,p:je,q:h,Q:R,s:B,S:P,u:v,U:x,V:l,w:y,W:_,x:Xe,X:ot,y:w,Y:s,Z:b,"%":D};nt.x=Ht(Ze,nt),nt.X=Ht(ke,nt),nt.c=Ht(ct,nt),Gt.x=Ht(Ze,Gt),Gt.X=Ht(ke,Gt),Gt.c=Ht(ct,Gt);function Ht(mr,Ur){return function(Hr){var Tr=[],et=-1,Lt=0,jt=mr.length,sr,Ir,Zr;for(Hr instanceof Date||(Hr=new Date(+Hr));++et<jt;)mr.charCodeAt(et)===37&&(Tr.push(mr.slice(Lt,et)),(Ir=n[sr=mr.charAt(++et)])!=null?sr=mr.charAt(++et):Ir=sr==="e"?" ":"0",(Zr=Ur[sr])&&(sr=Zr(Hr,Ir)),Tr.push(sr),Lt=et+1);return Tr.push(mr.slice(Lt,et)),Tr.join("")}}function _r(mr,Ur){return function(Hr){var Tr=e(1900,void 0,1),et=tt(Tr,mr,Hr+="",0),Lt,jt;if(et!=Hr.length)return null;if("Q"in Tr)return new Date(Tr.Q);if("s"in Tr)return new Date(Tr.s*1e3+("L"in Tr?Tr.L:0));if(Ur&&!("Z"in Tr)&&(Tr.Z=0),"p"in Tr&&(Tr.H=Tr.H%12+Tr.p*12),Tr.m===void 0&&(Tr.m="q"in Tr?Tr.q:0),"V"in Tr){if(Tr.V<1||Tr.V>53)return null;"w"in Tr||(Tr.w=1),"Z"in Tr?(Lt=A(e(Tr.y,0,1)),jt=Lt.getUTCDay(),Lt=jt>4||jt===0?c.utcMonday.ceil(Lt):c.utcMonday(Lt),Lt=c.utcDay.offset(Lt,(Tr.V-1)*7),Tr.y=Lt.getUTCFullYear(),Tr.m=Lt.getUTCMonth(),Tr.d=Lt.getUTCDate()+(Tr.w+6)%7):(Lt=M(e(Tr.y,0,1)),jt=Lt.getDay(),Lt=jt>4||jt===0?c.timeMonday.ceil(Lt):c.timeMonday(Lt),Lt=c.timeDay.offset(Lt,(Tr.V-1)*7),Tr.y=Lt.getFullYear(),Tr.m=Lt.getMonth(),Tr.d=Lt.getDate()+(Tr.w+6)%7)}else("W"in Tr||"U"in Tr)&&("w"in Tr||(Tr.w="u"in Tr?Tr.u%7:"W"in Tr?1:0),jt="Z"in Tr?A(e(Tr.y,0,1)).getUTCDay():M(e(Tr.y,0,1)).getDay(),Tr.m=0,Tr.d="W"in Tr?(Tr.w+6)%7+Tr.W*7-(jt+5)%7:Tr.w+Tr.U*7-(jt+6)%7);return"Z"in Tr?(Tr.H+=Tr.Z/100|0,Tr.M+=Tr.Z%100,A(Tr)):M(Tr)}}function tt(mr,Ur,Hr,Tr){for(var et=0,Lt=Ur.length,jt=Hr.length,sr,Ir;et<Lt;){if(Tr>=jt)return-1;if(sr=Ur.charCodeAt(et++),sr===37){if(sr=Ur.charAt(et++),Ir=Kt[sr in n?Ur.charAt(et++):sr],!Ir||(Tr=Ir(mr,Hr,Tr))<0)return-1}else if(sr!=Hr.charCodeAt(Tr++))return-1}return Tr}function je(mr,Ur,Hr){var Tr=Ot.exec(Ur.slice(Hr));return Tr?(mr.p=Jt[Tr[0].toLowerCase()],Hr+Tr[0].length):-1}function st(mr,Ur,Hr){var Tr=rr.exec(Ur.slice(Hr));return Tr?(mr.w=er[Tr[0].toLowerCase()],Hr+Tr[0].length):-1}function ft(mr,Ur,Hr){var Tr=Bt.exec(Ur.slice(Hr));return Tr?(mr.w=qt[Tr[0].toLowerCase()],Hr+Tr[0].length):-1}function Me(mr,Ur,Hr){var Tr=hn.exec(Ur.slice(Hr));return Tr?(mr.m=$r[Tr[0].toLowerCase()],Hr+Tr[0].length):-1}function Se(mr,Ur,Hr){var Tr=pr.exec(Ur.slice(Hr));return Tr?(mr.m=Xr[Tr[0].toLowerCase()],Hr+Tr[0].length):-1}function Ke(mr,Ur,Hr){return tt(mr,ct,Ur,Hr)}function Xe(mr,Ur,Hr){return tt(mr,Ze,Ur,Hr)}function ot(mr,Ur,Hr){return tt(mr,ke,Ur,Hr)}function pt(mr){return it[mr.getDay()]}function vt(mr){return Je[mr.getDay()]}function Ct(mr){return At[mr.getMonth()]}function St(mr){return Pt[mr.getMonth()]}function Nt(mr){return Ge[+(mr.getHours()>=12)]}function ir(mr){return 1+~~(mr.getMonth()/3)}function lr(mr){return it[mr.getUTCDay()]}function Yr(mr){return Je[mr.getUTCDay()]}function Pr(mr){return At[mr.getUTCMonth()]}function wr(mr){return Pt[mr.getUTCMonth()]}function Jr(mr){return Ge[+(mr.getUTCHours()>=12)]}function gr(mr){return 1+~~(mr.getUTCMonth()/3)}return{format:function(mr){var Ur=Ht(mr+="",nt);return Ur.toString=function(){return mr},Ur},parse:function(mr){var Ur=_r(mr+="",!1);return Ur.toString=function(){return mr},Ur},utcFormat:function(mr){var Ur=Ht(mr+="",Gt);return Ur.toString=function(){return mr},Ur},utcParse:function(mr){var Ur=_r(mr+="",!0);return Ur.toString=function(){return mr},Ur}}}var n={"-":"",_:" ","0":"0"},t=/^\s*\d+/,r=/^%/,f=/[\\^$*+?|[\]().{}]/g;function o(rt,ct,Ze){var ke=rt<0?"-":"",Ge=(ke?-rt:rt)+"",Je=Ge.length;return ke+(Je<Ze?new Array(Ze-Je+1).join(ct)+Ge:Ge)}function i(rt){return rt.replace(f,"\\$&")}function p(rt){return new RegExp("^(?:"+rt.map(i).join("|")+")","i")}function d(rt){for(var ct={},Ze=-1,ke=rt.length;++Ze<ke;)ct[rt[Ze].toLowerCase()]=Ze;return ct}function y(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+1));return ke?(rt.w=+ke[0],Ze+ke[0].length):-1}function v(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+1));return ke?(rt.u=+ke[0],Ze+ke[0].length):-1}function x(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+2));return ke?(rt.U=+ke[0],Ze+ke[0].length):-1}function l(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+2));return ke?(rt.V=+ke[0],Ze+ke[0].length):-1}function _(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+2));return ke?(rt.W=+ke[0],Ze+ke[0].length):-1}function s(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+4));return ke?(rt.y=+ke[0],Ze+ke[0].length):-1}function w(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+2));return ke?(rt.y=+ke[0]+(+ke[0]>68?1900:2e3),Ze+ke[0].length):-1}function b(rt,ct,Ze){var ke=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ct.slice(Ze,Ze+6));return ke?(rt.Z=ke[1]?0:-(ke[2]+(ke[3]||"00")),Ze+ke[0].length):-1}function h(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+1));return ke?(rt.q=ke[0]*3-3,Ze+ke[0].length):-1}function m(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+2));return ke?(rt.m=ke[0]-1,Ze+ke[0].length):-1}function u(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+2));return ke?(rt.d=+ke[0],Ze+ke[0].length):-1}function L(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+3));return ke?(rt.m=0,rt.d=+ke[0],Ze+ke[0].length):-1}function S(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+2));return ke?(rt.H=+ke[0],Ze+ke[0].length):-1}function k(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+2));return ke?(rt.M=+ke[0],Ze+ke[0].length):-1}function P(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+2));return ke?(rt.S=+ke[0],Ze+ke[0].length):-1}function z(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+3));return ke?(rt.L=+ke[0],Ze+ke[0].length):-1}function I(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+6));return ke?(rt.L=Math.floor(ke[0]/1e3),Ze+ke[0].length):-1}function D(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+1));return ke?Ze+ke[0].length:-1}function R(rt,ct,Ze){var ke=t.exec(ct.slice(Ze));return ke?(rt.Q=+ke[0],Ze+ke[0].length):-1}function B(rt,ct,Ze){var ke=t.exec(ct.slice(Ze));return ke?(rt.s=+ke[0],Ze+ke[0].length):-1}function F(rt,ct){return o(rt.getDate(),ct,2)}function V(rt,ct){return o(rt.getHours(),ct,2)}function Y(rt,ct){return o(rt.getHours()%12||12,ct,2)}function K(rt,ct){return o(1+c.timeDay.count(c.timeYear(rt),rt),ct,3)}function J(rt,ct){return o(rt.getMilliseconds(),ct,3)}function G(rt,ct){return J(rt,ct)+"000"}function Z(rt,ct){return o(rt.getMonth()+1,ct,2)}function re(rt,ct){return o(rt.getMinutes(),ct,2)}function se(rt,ct){return o(rt.getSeconds(),ct,2)}function oe(rt){var ct=rt.getDay();return ct===0?7:ct}function N(rt,ct){return o(c.timeSunday.count(c.timeYear(rt)-1,rt),ct,2)}function U(rt,ct){var Ze=rt.getDay();return rt=Ze>=4||Ze===0?c.timeThursday(rt):c.timeThursday.ceil(rt),o(c.timeThursday.count(c.timeYear(rt),rt)+(c.timeYear(rt).getDay()===4),ct,2)}function q(rt){return rt.getDay()}function Q(rt,ct){return o(c.timeMonday.count(c.timeYear(rt)-1,rt),ct,2)}function W(rt,ct){return o(rt.getFullYear()%100,ct,2)}function X(rt,ct){return o(rt.getFullYear()%1e4,ct,4)}function te(rt){var ct=rt.getTimezoneOffset();return(ct>0?"-":(ct*=-1,"+"))+o(ct/60|0,"0",2)+o(ct%60,"0",2)}function ee(rt,ct){return o(rt.getUTCDate(),ct,2)}function ie(rt,ct){return o(rt.getUTCHours(),ct,2)}function le(rt,ct){return o(rt.getUTCHours()%12||12,ct,2)}function ye(rt,ct){return o(1+c.utcDay.count(c.utcYear(rt),rt),ct,3)}function ue(rt,ct){return o(rt.getUTCMilliseconds(),ct,3)}function pe(rt,ct){return ue(rt,ct)+"000"}function ge(rt,ct){return o(rt.getUTCMonth()+1,ct,2)}function Te(rt,ct){return o(rt.getUTCMinutes(),ct,2)}function _e(rt,ct){return o(rt.getUTCSeconds(),ct,2)}function De(rt){var ct=rt.getUTCDay();return ct===0?7:ct}function Oe(rt,ct){return o(c.utcSunday.count(c.utcYear(rt)-1,rt),ct,2)}function Ue(rt,ct){var Ze=rt.getUTCDay();return rt=Ze>=4||Ze===0?c.utcThursday(rt):c.utcThursday.ceil(rt),o(c.utcThursday.count(c.utcYear(rt),rt)+(c.utcYear(rt).getUTCDay()===4),ct,2)}function xe(rt){return rt.getUTCDay()}function Pe(rt,ct){return o(c.utcMonday.count(c.utcYear(rt)-1,rt),ct,2)}function Ve(rt,ct){return o(rt.getUTCFullYear()%100,ct,2)}function Qe(rt,ct){return o(rt.getUTCFullYear()%1e4,ct,4)}function Fe(){return"+0000"}function Le(){return"%"}function Ne(rt){return+rt}function dt(rt){return Math.floor(+rt/1e3)}var Dt;Xt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Xt(rt){return Dt=a(rt),T.timeFormat=Dt.format,T.timeParse=Dt.parse,T.utcFormat=Dt.utcFormat,T.utcParse=Dt.utcParse,Dt}var Tt="%Y-%m-%dT%H:%M:%S.%LZ";function zt(rt){return rt.toISOString()}var Ut=Date.prototype.toISOString?zt:T.utcFormat(Tt);function Et(rt){var ct=new Date(rt);return isNaN(ct)?null:ct}var Mt=+new Date("2000-01-01T00:00:00.000Z")?Et:T.utcParse(Tt);T.isoFormat=Ut,T.isoParse=Mt,T.timeFormatDefaultLocale=Xt,T.timeFormatLocale=a,Object.defineProperty(T,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae):(T=T||self,c(T.d3=T.d3||{}))})(this,function(T){var c=new Date,M=new Date;function A(xe,Pe,Ve,Qe){function Fe(Le){return xe(Le=arguments.length===0?new Date:new Date(+Le)),Le}return Fe.floor=function(Le){return xe(Le=new Date(+Le)),Le},Fe.ceil=function(Le){return xe(Le=new Date(Le-1)),Pe(Le,1),xe(Le),Le},Fe.round=function(Le){var Ne=Fe(Le),dt=Fe.ceil(Le);return Le-Ne<dt-Le?Ne:dt},Fe.offset=function(Le,Ne){return Pe(Le=new Date(+Le),Ne==null?1:Math.floor(Ne)),Le},Fe.range=function(Le,Ne,dt){var Dt=[],Xt;if(Le=Fe.ceil(Le),dt=dt==null?1:Math.floor(dt),!(Le<Ne)||!(dt>0))return Dt;do Dt.push(Xt=new Date(+Le)),Pe(Le,dt),xe(Le);while(Xt<Le&&Le<Ne);return Dt},Fe.filter=function(Le){return A(function(Ne){if(Ne>=Ne)for(;xe(Ne),!Le(Ne);)Ne.setTime(Ne-1)},function(Ne,dt){if(Ne>=Ne)if(dt<0)for(;++dt<=0;)for(;Pe(Ne,-1),!Le(Ne););else for(;--dt>=0;)for(;Pe(Ne,1),!Le(Ne););})},Ve&&(Fe.count=function(Le,Ne){return c.setTime(+Le),M.setTime(+Ne),xe(c),xe(M),Math.floor(Ve(c,M))},Fe.every=function(Le){return Le=Math.floor(Le),!isFinite(Le)||!(Le>0)?null:Le>1?Fe.filter(Qe?function(Ne){return Qe(Ne)%Le==0}:function(Ne){return Fe.count(0,Ne)%Le==0}):Fe}),Fe}var e=A(function(){},function(xe,Pe){xe.setTime(+xe+Pe)},function(xe,Pe){return Pe-xe});e.every=function(xe){return xe=Math.floor(xe),!isFinite(xe)||!(xe>0)?null:xe>1?A(function(Pe){Pe.setTime(Math.floor(Pe/xe)*xe)},function(Pe,Ve){Pe.setTime(+Pe+Ve*xe)},function(Pe,Ve){return(Ve-Pe)/xe}):e};var a=e.range,n=1e3,t=6e4,r=36e5,f=864e5,o=6048e5,i=A(function(xe){xe.setTime(xe-xe.getMilliseconds())},function(xe,Pe){xe.setTime(+xe+Pe*n)},function(xe,Pe){return(Pe-xe)/n},function(xe){return xe.getUTCSeconds()}),p=i.range,d=A(function(xe){xe.setTime(xe-xe.getMilliseconds()-xe.getSeconds()*n)},function(xe,Pe){xe.setTime(+xe+Pe*t)},function(xe,Pe){return(Pe-xe)/t},function(xe){return xe.getMinutes()}),y=d.range,v=A(function(xe){xe.setTime(xe-xe.getMilliseconds()-xe.getSeconds()*n-xe.getMinutes()*t)},function(xe,Pe){xe.setTime(+xe+Pe*r)},function(xe,Pe){return(Pe-xe)/r},function(xe){return xe.getHours()}),x=v.range,l=A(function(xe){xe.setHours(0,0,0,0)},function(xe,Pe){xe.setDate(xe.getDate()+Pe)},function(xe,Pe){return(Pe-xe-(Pe.getTimezoneOffset()-xe.getTimezoneOffset())*t)/f},function(xe){return xe.getDate()-1}),_=l.range;function s(xe){return A(function(Pe){Pe.setDate(Pe.getDate()-(Pe.getDay()+7-xe)%7),Pe.setHours(0,0,0,0)},function(Pe,Ve){Pe.setDate(Pe.getDate()+Ve*7)},function(Pe,Ve){return(Ve-Pe-(Ve.getTimezoneOffset()-Pe.getTimezoneOffset())*t)/o})}var w=s(0),b=s(1),h=s(2),m=s(3),u=s(4),L=s(5),S=s(6),k=w.range,P=b.range,z=h.range,I=m.range,D=u.range,R=L.range,B=S.range,F=A(function(xe){xe.setDate(1),xe.setHours(0,0,0,0)},function(xe,Pe){xe.setMonth(xe.getMonth()+Pe)},function(xe,Pe){return Pe.getMonth()-xe.getMonth()+(Pe.getFullYear()-xe.getFullYear())*12},function(xe){return xe.getMonth()}),V=F.range,Y=A(function(xe){xe.setMonth(0,1),xe.setHours(0,0,0,0)},function(xe,Pe){xe.setFullYear(xe.getFullYear()+Pe)},function(xe,Pe){return Pe.getFullYear()-xe.getFullYear()},function(xe){return xe.getFullYear()});Y.every=function(xe){return!isFinite(xe=Math.floor(xe))||!(xe>0)?null:A(function(Pe){Pe.setFullYear(Math.floor(Pe.getFullYear()/xe)*xe),Pe.setMonth(0,1),Pe.setHours(0,0,0,0)},function(Pe,Ve){Pe.setFullYear(Pe.getFullYear()+Ve*xe)})};var K=Y.range,J=A(function(xe){xe.setUTCSeconds(0,0)},function(xe,Pe){xe.setTime(+xe+Pe*t)},function(xe,Pe){return(Pe-xe)/t},function(xe){return xe.getUTCMinutes()}),G=J.range,Z=A(function(xe){xe.setUTCMinutes(0,0,0)},function(xe,Pe){xe.setTime(+xe+Pe*r)},function(xe,Pe){return(Pe-xe)/r},function(xe){return xe.getUTCHours()}),re=Z.range,se=A(function(xe){xe.setUTCHours(0,0,0,0)},function(xe,Pe){xe.setUTCDate(xe.getUTCDate()+Pe)},function(xe,Pe){return(Pe-xe)/f},function(xe){return xe.getUTCDate()-1}),oe=se.range;function N(xe){return A(function(Pe){Pe.setUTCDate(Pe.getUTCDate()-(Pe.getUTCDay()+7-xe)%7),Pe.setUTCHours(0,0,0,0)},function(Pe,Ve){Pe.setUTCDate(Pe.getUTCDate()+Ve*7)},function(Pe,Ve){return(Ve-Pe)/o})}var U=N(0),q=N(1),Q=N(2),W=N(3),X=N(4),te=N(5),ee=N(6),ie=U.range,le=q.range,ye=Q.range,ue=W.range,pe=X.range,ge=te.range,Te=ee.range,_e=A(function(xe){xe.setUTCDate(1),xe.setUTCHours(0,0,0,0)},function(xe,Pe){xe.setUTCMonth(xe.getUTCMonth()+Pe)},function(xe,Pe){return Pe.getUTCMonth()-xe.getUTCMonth()+(Pe.getUTCFullYear()-xe.getUTCFullYear())*12},function(xe){return xe.getUTCMonth()}),De=_e.range,Oe=A(function(xe){xe.setUTCMonth(0,1),xe.setUTCHours(0,0,0,0)},function(xe,Pe){xe.setUTCFullYear(xe.getUTCFullYear()+Pe)},function(xe,Pe){return Pe.getUTCFullYear()-xe.getUTCFullYear()},function(xe){return xe.getUTCFullYear()});Oe.every=function(xe){return!isFinite(xe=Math.floor(xe))||!(xe>0)?null:A(function(Pe){Pe.setUTCFullYear(Math.floor(Pe.getUTCFullYear()/xe)*xe),Pe.setUTCMonth(0,1),Pe.setUTCHours(0,0,0,0)},function(Pe,Ve){Pe.setUTCFullYear(Pe.getUTCFullYear()+Ve*xe)})};var Ue=Oe.range;T.timeDay=l,T.timeDays=_,T.timeFriday=L,T.timeFridays=R,T.timeHour=v,T.timeHours=x,T.timeInterval=A,T.timeMillisecond=e,T.timeMilliseconds=a,T.timeMinute=d,T.timeMinutes=y,T.timeMonday=b,T.timeMondays=P,T.timeMonth=F,T.timeMonths=V,T.timeSaturday=S,T.timeSaturdays=B,T.timeSecond=i,T.timeSeconds=p,T.timeSunday=w,T.timeSundays=k,T.timeThursday=u,T.timeThursdays=D,T.timeTuesday=h,T.timeTuesdays=z,T.timeWednesday=m,T.timeWednesdays=I,T.timeWeek=w,T.timeWeeks=k,T.timeYear=Y,T.timeYears=K,T.utcDay=se,T.utcDays=oe,T.utcFriday=te,T.utcFridays=ge,T.utcHour=Z,T.utcHours=re,T.utcMillisecond=e,T.utcMilliseconds=a,T.utcMinute=J,T.utcMinutes=G,T.utcMonday=q,T.utcMondays=le,T.utcMonth=_e,T.utcMonths=De,T.utcSaturday=ee,T.utcSaturdays=Te,T.utcSecond=i,T.utcSeconds=p,T.utcSunday=U,T.utcSundays=ie,T.utcThursday=X,T.utcThursdays=pe,T.utcTuesday=Q,T.utcTuesdays=ye,T.utcWednesday=W,T.utcWednesdays=ue,T.utcWeek=U,T.utcWeeks=ie,T.utcYear=Oe,T.utcYears=Ue,Object.defineProperty(T,"__esModule",{value:!0})})},{}],122:[function(g,ne,ae){arguments[4][121][0].apply(ae,arguments)},{dup:121}],123:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae):(T=T||self,c(T.d3=T.d3||{}))})(this,function(T){var c=0,M=0,A=0,e=1e3,a,n,t=0,r=0,f=0,o=typeof performance=="object"&&performance.now?performance:Date,i=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(m){setTimeout(m,17)};function p(){return r||(i(d),r=o.now()+f)}function d(){r=0}function y(){this._call=this._time=this._next=null}y.prototype=v.prototype={constructor:y,restart:function(m,u,L){if(typeof m!="function")throw new TypeError("callback is not a function");L=(L==null?p():+L)+(u==null?0:+u),!this._next&&n!==this&&(n?n._next=this:a=this,n=this),this._call=m,this._time=L,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}};function v(m,u,L){var S=new y;return S.restart(m,u,L),S}function x(){p(),++c;for(var m=a,u;m;)(u=r-m._time)>=0&&m._call.call(null,u),m=m._next;--c}function l(){r=(t=o.now())+f,c=M=0;try{x()}finally{c=0,s(),r=0}}function _(){var m=o.now(),u=m-t;u>e&&(f-=u,t=m)}function s(){for(var m,u=a,L,S=1/0;u;)u._call?(S>u._time&&(S=u._time),m=u,u=u._next):(L=u._next,u._next=null,u=m?m._next=L:a=L);n=m,w(S)}function w(m){if(!c){M&&(M=clearTimeout(M));var u=m-r;u>24?(m<1/0&&(M=setTimeout(l,m-o.now()-f)),A&&(A=clearInterval(A))):(A||(t=o.now(),A=setInterval(_,e)),c=1,i(l))}}function b(m,u,L){var S=new y;return u=u==null?0:+u,S.restart(function(k){S.stop(),m(k+u)},u,L),S}function h(m,u,L){var S=new y,k=u;return u==null?(S.restart(m,u,L),S):(u=+u,L=L==null?p():+L,S.restart(function P(z){z+=k,S.restart(P,k+=u,L),m(z)},u,L),S)}T.interval=h,T.now=p,T.timeout=b,T.timer=v,T.timerFlush=x,Object.defineProperty(T,"__esModule",{value:!0})})},{}],124:[function(g,ne,ae){ne.exports=function(){for(var T=0;T<arguments.length;T++)if(arguments[T]!==void 0)return arguments[T]}},{}],125:[function(g,ne,ae){ne.exports=A;var T=A.canvas=document.createElement("canvas"),c=T.getContext("2d"),M=e([32,126]);A.createPairs=e,A.ascii=M;function A(a,n){Array.isArray(a)&&(a=a.join(", "));var t={},r,f=16,o=.05;n&&(n.length===2&&typeof n[0]=="number"?r=e(n):Array.isArray(n)?r=n:(n.o?r=e(n.o):n.pairs&&(r=n.pairs),n.fontSize&&(f=n.fontSize),n.threshold!=null&&(o=n.threshold))),r||(r=M),c.font=f+"px "+a;for(var i=0;i<r.length;i++){var p=r[i],d=c.measureText(p[0]).width+c.measureText(p[1]).width,y=c.measureText(p).width;if(Math.abs(d-y)>f*o){var v=(y-d)/f;t[p]=v*1e3}}return t}function e(a){for(var n=[],t=a[0];t<=a[1];t++)for(var r=String.fromCharCode(t),f=a[0];f<a[1];f++){var o=String.fromCharCode(f),i=r+o;n.push(i)}return n}},{}],126:[function(g,ne,ae){var T=g("abs-svg-path"),c=g("normalize-svg-path"),M={M:"moveTo",C:"bezierCurveTo"};ne.exports=function(A,e){A.beginPath(),c(T(e)).forEach(function(a){var n=a[0],t=a.slice(1);A[M[n]].apply(A,t)}),A.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(g,ne,ae){ne.exports=function(T){switch(T){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(g,ne,ae){function T(A,e,a){var n=A[a]|0;if(n<=0)return[];var t=new Array(n),r;if(a===A.length-1)for(r=0;r<n;++r)t[r]=e;else for(r=0;r<n;++r)t[r]=T(A,e,a+1);return t}function c(A,e){var a,n;for(a=new Array(A),n=0;n<A;++n)a[n]=e;return a}function M(A,e){switch(typeof e=="undefined"&&(e=0),typeof A){case"number":if(A>0)return c(A|0,e);break;case"object":if(typeof A.length=="number")return T(A,e,0);break}return[]}ne.exports=M},{}],129:[function(g,ne,ae){ne.exports=T,ne.exports.default=T;function T(R,B,F){F=F||2;var V=B&&B.length,Y=V?B[0]*F:R.length,K=c(R,0,Y,F,!0),J=[];if(!K||K.next===K.prev)return J;var G,Z,re,se,oe,N,U;if(V&&(K=r(R,B,K,F)),R.length>80*F){G=re=R[0],Z=se=R[1];for(var q=F;q<Y;q+=F)oe=R[q],N=R[q+1],oe<G&&(G=oe),N<Z&&(Z=N),oe>re&&(re=oe),N>se&&(se=N);U=Math.max(re-G,se-Z),U=U!==0?1/U:0}return A(K,J,F,G,Z,U),J}function c(R,B,F,V,Y){var K,J;if(Y===D(R,B,F,V)>0)for(K=B;K<F;K+=V)J=P(K,R[K],R[K+1],J);else for(K=F-V;K>=B;K-=V)J=P(K,R[K],R[K+1],J);return J&&w(J,J.next)&&(z(J),J=J.next),J}function M(R,B){if(!R)return R;B||(B=R);var F=R,V;do if(V=!1,!F.steiner&&(w(F,F.next)||s(F.prev,F,F.next)===0)){if(z(F),F=B=F.prev,F===F.next)break;V=!0}else F=F.next;while(V||F!==B);return B}function A(R,B,F,V,Y,K,J){if(!!R){!J&&K&&d(R,V,Y,K);for(var G=R,Z,re;R.prev!==R.next;){if(Z=R.prev,re=R.next,K?a(R,V,Y,K):e(R)){B.push(Z.i/F),B.push(R.i/F),B.push(re.i/F),z(R),R=re.next,G=re.next;continue}if(R=re,R===G){J?J===1?(R=n(M(R),B,F),A(R,B,F,V,Y,K,2)):J===2&&t(R,B,F,V,Y,K):A(M(R),B,F,V,Y,K,1);break}}}}function e(R){var B=R.prev,F=R,V=R.next;if(s(B,F,V)>=0)return!1;for(var Y=R.next.next;Y!==R.prev;){if(l(B.x,B.y,F.x,F.y,V.x,V.y,Y.x,Y.y)&&s(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function a(R,B,F,V){var Y=R.prev,K=R,J=R.next;if(s(Y,K,J)>=0)return!1;for(var G=Y.x<K.x?Y.x<J.x?Y.x:J.x:K.x<J.x?K.x:J.x,Z=Y.y<K.y?Y.y<J.y?Y.y:J.y:K.y<J.y?K.y:J.y,re=Y.x>K.x?Y.x>J.x?Y.x:J.x:K.x>J.x?K.x:J.x,se=Y.y>K.y?Y.y>J.y?Y.y:J.y:K.y>J.y?K.y:J.y,oe=v(G,Z,B,F,V),N=v(re,se,B,F,V),U=R.prevZ,q=R.nextZ;U&&U.z>=oe&&q&&q.z<=N;){if(U!==R.prev&&U!==R.next&&l(Y.x,Y.y,K.x,K.y,J.x,J.y,U.x,U.y)&&s(U.prev,U,U.next)>=0||(U=U.prevZ,q!==R.prev&&q!==R.next&&l(Y.x,Y.y,K.x,K.y,J.x,J.y,q.x,q.y)&&s(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;U&&U.z>=oe;){if(U!==R.prev&&U!==R.next&&l(Y.x,Y.y,K.x,K.y,J.x,J.y,U.x,U.y)&&s(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;q&&q.z<=N;){if(q!==R.prev&&q!==R.next&&l(Y.x,Y.y,K.x,K.y,J.x,J.y,q.x,q.y)&&s(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function n(R,B,F){var V=R;do{var Y=V.prev,K=V.next.next;!w(Y,K)&&b(Y,V,V.next,K)&&L(Y,K)&&L(K,Y)&&(B.push(Y.i/F),B.push(V.i/F),B.push(K.i/F),z(V),z(V.next),V=R=K),V=V.next}while(V!==R);return M(V)}function t(R,B,F,V,Y,K){var J=R;do{for(var G=J.next.next;G!==J.prev;){if(J.i!==G.i&&_(J,G)){var Z=k(J,G);J=M(J,J.next),Z=M(Z,Z.next),A(J,B,F,V,Y,K),A(Z,B,F,V,Y,K);return}G=G.next}J=J.next}while(J!==R)}function r(R,B,F,V){var Y=[],K,J,G,Z,re;for(K=0,J=B.length;K<J;K++)G=B[K]*V,Z=K<J-1?B[K+1]*V:R.length,re=c(R,G,Z,V,!1),re===re.next&&(re.steiner=!0),Y.push(x(re));for(Y.sort(f),K=0;K<Y.length;K++)o(Y[K],F),F=M(F,F.next);return F}function f(R,B){return R.x-B.x}function o(R,B){if(B=i(R,B),B){var F=k(B,R);M(B,B.next),M(F,F.next)}}function i(R,B){var F=B,V=R.x,Y=R.y,K=-1/0,J;do{if(Y<=F.y&&Y>=F.next.y&&F.next.y!==F.y){var G=F.x+(Y-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(G<=V&&G>K){if(K=G,G===V){if(Y===F.y)return F;if(Y===F.next.y)return F.next}J=F.x<F.next.x?F:F.next}}F=F.next}while(F!==B);if(!J)return null;if(V===K)return J;var Z=J,re=J.x,se=J.y,oe=1/0,N;F=J;do V>=F.x&&F.x>=re&&V!==F.x&&l(Y<se?V:K,Y,re,se,Y<se?K:V,Y,F.x,F.y)&&(N=Math.abs(Y-F.y)/(V-F.x),L(F,R)&&(N<oe||N===oe&&(F.x>J.x||F.x===J.x&&p(J,F)))&&(J=F,oe=N)),F=F.next;while(F!==Z);return J}function p(R,B){return s(R.prev,R,B.prev)<0&&s(B.next,R,R.next)<0}function d(R,B,F,V){var Y=R;do Y.z===null&&(Y.z=v(Y.x,Y.y,B,F,V)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==R);Y.prevZ.nextZ=null,Y.prevZ=null,y(Y)}function y(R){var B,F,V,Y,K,J,G,Z,re=1;do{for(F=R,R=null,K=null,J=0;F;){for(J++,V=F,G=0,B=0;B<re&&(G++,V=V.nextZ,!!V);B++);for(Z=re;G>0||Z>0&&V;)G!==0&&(Z===0||!V||F.z<=V.z)?(Y=F,F=F.nextZ,G--):(Y=V,V=V.nextZ,Z--),K?K.nextZ=Y:R=Y,Y.prevZ=K,K=Y;F=V}K.nextZ=null,re*=2}while(J>1);return R}function v(R,B,F,V,Y){return R=32767*(R-F)*Y,B=32767*(B-V)*Y,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,B=(B|B<<8)&16711935,B=(B|B<<4)&252645135,B=(B|B<<2)&858993459,B=(B|B<<1)&1431655765,R|B<<1}function x(R){var B=R,F=R;do(B.x<F.x||B.x===F.x&&B.y<F.y)&&(F=B),B=B.next;while(B!==R);return F}function l(R,B,F,V,Y,K,J,G){return(Y-J)*(B-G)-(R-J)*(K-G)>=0&&(R-J)*(V-G)-(F-J)*(B-G)>=0&&(F-J)*(K-G)-(Y-J)*(V-G)>=0}function _(R,B){return R.next.i!==B.i&&R.prev.i!==B.i&&!u(R,B)&&(L(R,B)&&L(B,R)&&S(R,B)&&(s(R.prev,R,B.prev)||s(R,B.prev,B))||w(R,B)&&s(R.prev,R,R.next)>0&&s(B.prev,B,B.next)>0)}function s(R,B,F){return(B.y-R.y)*(F.x-B.x)-(B.x-R.x)*(F.y-B.y)}function w(R,B){return R.x===B.x&&R.y===B.y}function b(R,B,F,V){var Y=m(s(R,B,F)),K=m(s(R,B,V)),J=m(s(F,V,R)),G=m(s(F,V,B));return!!(Y!==K&&J!==G||Y===0&&h(R,F,B)||K===0&&h(R,V,B)||J===0&&h(F,R,V)||G===0&&h(F,B,V))}function h(R,B,F){return B.x<=Math.max(R.x,F.x)&&B.x>=Math.min(R.x,F.x)&&B.y<=Math.max(R.y,F.y)&&B.y>=Math.min(R.y,F.y)}function m(R){return R>0?1:R<0?-1:0}function u(R,B){var F=R;do{if(F.i!==R.i&&F.next.i!==R.i&&F.i!==B.i&&F.next.i!==B.i&&b(F,F.next,R,B))return!0;F=F.next}while(F!==R);return!1}function L(R,B){return s(R.prev,R,R.next)<0?s(R,B,R.next)>=0&&s(R,R.prev,B)>=0:s(R,B,R.prev)<0||s(R,R.next,B)<0}function S(R,B){var F=R,V=!1,Y=(R.x+B.x)/2,K=(R.y+B.y)/2;do F.y>K!=F.next.y>K&&F.next.y!==F.y&&Y<(F.next.x-F.x)*(K-F.y)/(F.next.y-F.y)+F.x&&(V=!V),F=F.next;while(F!==R);return V}function k(R,B){var F=new I(R.i,R.x,R.y),V=new I(B.i,B.x,B.y),Y=R.next,K=B.prev;return R.next=B,B.prev=R,F.next=Y,Y.prev=F,V.next=F,F.prev=V,K.next=V,V.prev=K,V}function P(R,B,F,V){var Y=new I(R,B,F);return V?(Y.next=V.next,Y.prev=V,V.next.prev=Y,V.next=Y):(Y.prev=Y,Y.next=Y),Y}function z(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function I(R,B,F){this.i=R,this.x=B,this.y=F,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}T.deviation=function(R,B,F,V){var Y=B&&B.length,K=Y?B[0]*F:R.length,J=Math.abs(D(R,0,K,F));if(Y)for(var G=0,Z=B.length;G<Z;G++){var re=B[G]*F,se=G<Z-1?B[G+1]*F:R.length;J-=Math.abs(D(R,re,se,F))}var oe=0;for(G=0;G<V.length;G+=3){var N=V[G]*F,U=V[G+1]*F,q=V[G+2]*F;oe+=Math.abs((R[N]-R[q])*(R[U+1]-R[N+1])-(R[N]-R[U])*(R[q+1]-R[N+1]))}return J===0&&oe===0?0:Math.abs((oe-J)/J)};function D(R,B,F,V){for(var Y=0,K=B,J=F-V;K<F;K+=V)Y+=(R[J]-R[K])*(R[K+1]+R[J+1]),J=K;return Y}T.flatten=function(R){for(var B=R[0][0].length,F={vertices:[],holes:[],dimensions:B},V=0,Y=0;Y<R.length;Y++){for(var K=0;K<R[Y].length;K++)for(var J=0;J<B;J++)F.vertices.push(R[Y][K][J]);Y>0&&(V+=R[Y-1].length,F.holes.push(V))}return F}},{}],130:[function(g,ne,ae){var T=g("strongly-connected-components");ne.exports=function(M,A){var e=[],a=[],n=[],t={},r=[],f;function o(w){n[w]=!1,t.hasOwnProperty(w)&&Object.keys(t[w]).forEach(function(b){delete t[w][b],n[b]&&o(b)})}function i(w){var b=!1;a.push(w),n[w]=!0;var h,m;for(h=0;h<r[w].length;h++)m=r[w][h],m===f?(p(f,a),b=!0):n[m]||(b=i(m));if(b)o(w);else for(h=0;h<r[w].length;h++){m=r[w][h];var u=t[m];u||(u={},t[m]=u),u[m]=!0}return a.pop(),b}function p(w,b){var h=[].concat(b).concat(w);A?A(i):e.push(h)}function d(w){for(var b=0;b<M.length;b++)b<w&&(M[b]=[]),M[b]=M[b].filter(function(h){return h>=w})}function y(w){d(w);for(var b=M,h=T(b),m=h.components.filter(function(I){return I.length>1}),u=1/0,L,S=0;S<m.length;S++)for(var k=0;k<m[S].length;k++)m[S][k]<u&&(u=m[S][k],L=S);var P=m[L];if(!P)return!1;var z=M.map(function(I,D){return P.indexOf(D)===-1?[]:I.filter(function(R){return P.indexOf(R)!==-1})});return{leastVertex:u,adjList:z}}f=0;for(var v=M.length;f<v;){var x=y(f);if(f=x.leastVertex,r=x.adjList,r){for(var l=0;l<r.length;l++)for(var _=0;_<r[l].length;_++){var s=r[l][_];n[+s]=!1,t[s]={}}i(f),f=f+1}else f=v}if(!A)return e}},{"strongly-connected-components":306}],131:[function(g,ne,ae){var T=g("../../object/valid-value");ne.exports=function(){return T(this).length=0,this}},{"../../object/valid-value":162}],132:[function(g,ne,ae){ne.exports=g("./is-implemented")()?Array.from:g("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(g,ne,ae){ne.exports=function(){var T=Array.from,c,M;return typeof T!="function"?!1:(c=["raz","dwa"],M=T(c),Boolean(M&&M!==c&&M[1]==="dwa"))}},{}],134:[function(g,ne,ae){var T=g("es6-symbol").iterator,c=g("../../function/is-arguments"),M=g("../../function/is-function"),A=g("../../number/to-pos-integer"),e=g("../../object/valid-callable"),a=g("../../object/valid-value"),n=g("../../object/is-value"),t=g("../../string/is-string"),r=Array.isArray,f=Function.prototype.call,o={configurable:!0,enumerable:!0,writable:!0,value:null},i=Object.defineProperty;ne.exports=function(p){var d=arguments[1],y=arguments[2],v,x,l,_,s,w,b,h,m,u;if(p=Object(a(p)),n(d)&&e(d),!this||this===Array||!M(this)){if(!d){if(c(p))return s=p.length,s!==1?Array.apply(null,p):(_=new Array(1),_[0]=p[0],_);if(r(p)){for(_=new Array(s=p.length),x=0;x<s;++x)_[x]=p[x];return _}}_=[]}else v=this;if(!r(p)){if((m=p[T])!==void 0){for(b=e(m).call(p),v&&(_=new v),h=b.next(),x=0;!h.done;)u=d?f.call(d,y,h.value,x):h.value,v?(o.value=u,i(_,x,o)):_[x]=u,h=b.next(),++x;s=x}else if(t(p)){for(s=p.length,v&&(_=new v),x=0,l=0;x<s;++x)u=p[x],x+1<s&&(w=u.charCodeAt(0),w>=55296&&w<=56319&&(u+=p[++x])),u=d?f.call(d,y,u,l):u,v?(o.value=u,i(_,l,o)):_[l]=u,++l;s=l}}if(s===void 0)for(s=A(p.length),v&&(_=new v(s)),x=0;x<s;++x)u=d?f.call(d,y,p[x],x):p[x],v?(o.value=u,i(_,x,o)):_[x]=u;return v&&(o.value=null,_.length=s),_}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(g,ne,ae){var T=Object.prototype.toString,c=T.call(function(){return arguments}());ne.exports=function(M){return T.call(M)===c}},{}],136:[function(g,ne,ae){var T=Object.prototype.toString,c=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);ne.exports=function(M){return typeof M=="function"&&c(T.call(M))}},{}],137:[function(g,ne,ae){ne.exports=function(){}},{}],138:[function(g,ne,ae){ne.exports=g("./is-implemented")()?Math.sign:g("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(g,ne,ae){ne.exports=function(){var T=Math.sign;return typeof T!="function"?!1:T(10)===1&&T(-20)===-1}},{}],140:[function(g,ne,ae){ne.exports=function(T){return T=Number(T),isNaN(T)||T===0?T:T>0?1:-1}},{}],141:[function(g,ne,ae){var T=g("../math/sign"),c=Math.abs,M=Math.floor;ne.exports=function(A){return isNaN(A)?0:(A=Number(A),A===0||!isFinite(A)?A:T(A)*M(c(A)))}},{"../math/sign":138}],142:[function(g,ne,ae){var T=g("./to-integer"),c=Math.max;ne.exports=function(M){return c(0,T(M))}},{"./to-integer":141}],143:[function(g,ne,ae){var T=g("./valid-callable"),c=g("./valid-value"),M=Function.prototype.bind,A=Function.prototype.call,e=Object.keys,a=Object.prototype.propertyIsEnumerable;ne.exports=function(n,t){return function(r,f){var o,i=arguments[2],p=arguments[3];return r=Object(c(r)),T(f),o=e(r),p&&o.sort(typeof p=="function"?M.call(p,r):void 0),typeof n!="function"&&(n=o[n]),A.call(n,o,function(d,y){return a.call(r,d)?A.call(f,i,r[d],d,r,y):t})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(g,ne,ae){ne.exports=g("./is-implemented")()?Object.assign:g("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(g,ne,ae){ne.exports=function(){var T=Object.assign,c;return typeof T!="function"?!1:(c={foo:"raz"},T(c,{bar:"dwa"},{trzy:"trzy"}),c.foo+c.bar+c.trzy==="razdwatrzy")}},{}],146:[function(g,ne,ae){var T=g("../keys"),c=g("../valid-value"),M=Math.max;ne.exports=function(A,e){var a,n,t=M(arguments.length,2),r;for(A=Object(c(A)),r=function(f){try{A[f]=e[f]}catch(o){a||(a=o)}},n=1;n<t;++n)e=arguments[n],T(e).forEach(r);if(a!==void 0)throw a;return A}},{"../keys":152,"../valid-value":162}],147:[function(g,ne,ae){var T=g("../array/from"),c=g("./assign"),M=g("./valid-value");ne.exports=function(A){var e=Object(M(A)),a=arguments[1],n=Object(arguments[2]);if(e!==A&&!a)return e;var t={};return a?T(a,function(r){(n.ensure||r in A)&&(t[r]=A[r])}):c(t,A),t}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(g,ne,ae){var T=Object.create,c;g("./set-prototype-of/is-implemented")()||(c=g("./set-prototype-of/shim")),ne.exports=function(){var M,A,e;return!c||c.level!==1?T:(M={},A={},e={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(a){if(a==="__proto__"){A[a]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}A[a]=e}),Object.defineProperties(M,A),Object.defineProperty(c,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:M}),function(a,n){return T(a===null?M:a,n)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(g,ne,ae){ne.exports=g("./_iterate")("forEach")},{"./_iterate":143}],150:[function(g,ne,ae){var T=g("./is-value"),c={function:!0,object:!0};ne.exports=function(M){return T(M)&&c[typeof M]||!1}},{"./is-value":151}],151:[function(g,ne,ae){var T=g("../function/noop")();ne.exports=function(c){return c!==T&&c!==null}},{"../function/noop":137}],152:[function(g,ne,ae){ne.exports=g("./is-implemented")()?Object.keys:g("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(g,ne,ae){ne.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(g,ne,ae){var T=g("../is-value"),c=Object.keys;ne.exports=function(M){return c(T(M)?Object(M):M)}},{"../is-value":151}],155:[function(g,ne,ae){var T=g("./valid-callable"),c=g("./for-each"),M=Function.prototype.call;ne.exports=function(A,e){var a={},n=arguments[2];return T(e),c(A,function(t,r,f,o){a[r]=M.call(e,n,t,r,f,o)}),a}},{"./for-each":149,"./valid-callable":160}],156:[function(g,ne,ae){var T=g("./is-value"),c=Array.prototype.forEach,M=Object.create,A=function(e,a){var n;for(n in e)a[n]=e[n]};ne.exports=function(e){var a=M(null);return c.call(arguments,function(n){!T(n)||A(Object(n),a)}),a}},{"./is-value":151}],157:[function(g,ne,ae){ne.exports=g("./is-implemented")()?Object.setPrototypeOf:g("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(g,ne,ae){var T=Object.create,c=Object.getPrototypeOf,M={};ne.exports=function(){var A=Object.setPrototypeOf,e=arguments[0]||T;return typeof A!="function"?!1:c(A(e(null),M))===M}},{}],159:[function(g,ne,ae){var T=g("../is-object"),c=g("../valid-value"),M=Object.prototype.isPrototypeOf,A=Object.defineProperty,e={configurable:!0,enumerable:!1,writable:!0,value:void 0},a;a=function(n,t){if(c(n),t===null||T(t))return n;throw new TypeError("Prototype must be null or an object")},ne.exports=function(n){var t,r;return n?(n.level===2?n.set?(r=n.set,t=function(f,o){return r.call(a(f,o),o),f}):t=function(f,o){return a(f,o).__proto__=o,f}:t=function f(o,i){var p;return a(o,i),p=M.call(f.nullPolyfill,o),p&&delete f.nullPolyfill.__proto__,i===null&&(i=f.nullPolyfill),o.__proto__=i,p&&A(f.nullPolyfill,"__proto__",e),o},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:n.level})):null}(function(){var n=Object.create(null),t={},r,f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(f){try{r=f.set,r.call(n,t)}catch{}if(Object.getPrototypeOf(n)===t)return{set:r,level:2}}return n.__proto__=t,Object.getPrototypeOf(n)===t?{level:2}:(n={},n.__proto__=t,Object.getPrototypeOf(n)===t?{level:1}:!1)}()),g("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(g,ne,ae){ne.exports=function(T){if(typeof T!="function")throw new TypeError(T+" is not a function");return T}},{}],161:[function(g,ne,ae){var T=g("./is-object");ne.exports=function(c){if(!T(c))throw new TypeError(c+" is not an Object");return c}},{"./is-object":150}],162:[function(g,ne,ae){var T=g("./is-value");ne.exports=function(c){if(!T(c))throw new TypeError("Cannot use null or undefined");return c}},{"./is-value":151}],163:[function(g,ne,ae){ne.exports=g("./is-implemented")()?String.prototype.contains:g("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(g,ne,ae){var T="razdwatrzy";ne.exports=function(){return typeof T.contains!="function"?!1:T.contains("dwa")===!0&&T.contains("foo")===!1}},{}],165:[function(g,ne,ae){var T=String.prototype.indexOf;ne.exports=function(c){return T.call(this,c,arguments[1])>-1}},{}],166:[function(g,ne,ae){var T=Object.prototype.toString,c=T.call("");ne.exports=function(M){return typeof M=="string"||M&&typeof M=="object"&&(M instanceof String||T.call(M)===c)||!1}},{}],167:[function(g,ne,ae){var T=Object.create(null),c=Math.random;ne.exports=function(){var M;do M=c().toString(36).slice(2);while(T[M]);return M}},{}],168:[function(g,ne,ae){var T=g("es5-ext/object/set-prototype-of"),c=g("es5-ext/string/#/contains"),M=g("d"),A=g("es6-symbol"),e=g("./"),a=Object.defineProperty,n;n=ne.exports=function(t,r){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");e.call(this,t),r?c.call(r,"key+value")?r="key+value":c.call(r,"key")?r="key":r="value":r="value",a(this,"__kind__",M("",r))},T&&T(n,e),delete n.prototype.constructor,n.prototype=Object.create(e.prototype,{_resolve:M(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),a(n.prototype,A.toStringTag,M("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(g,ne,ae){var T=g("es5-ext/function/is-arguments"),c=g("es5-ext/object/valid-callable"),M=g("es5-ext/string/is-string"),A=g("./get"),e=Array.isArray,a=Function.prototype.call,n=Array.prototype.some;ne.exports=function(t,r){var f,o=arguments[2],i,p,d,y,v,x,l;if(e(t)||T(t)?f="array":M(t)?f="string":t=A(t),c(r),p=function(){d=!0},f==="array"){n.call(t,function(_){return a.call(r,o,_,p),d});return}if(f==="string"){for(v=t.length,y=0;y<v&&(x=t[y],y+1<v&&(l=x.charCodeAt(0),l>=55296&&l<=56319&&(x+=t[++y])),a.call(r,o,x,p),!d);++y);return}for(i=t.next();!i.done;){if(a.call(r,o,i.value,p),d)return;i=t.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(g,ne,ae){var T=g("es5-ext/function/is-arguments"),c=g("es5-ext/string/is-string"),M=g("./array"),A=g("./string"),e=g("./valid-iterable"),a=g("es6-symbol").iterator;ne.exports=function(n){return typeof e(n)[a]=="function"?n[a]():T(n)?new M(n):c(n)?new A(n):new M(n)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(g,ne,ae){var T=g("es5-ext/array/#/clear"),c=g("es5-ext/object/assign"),M=g("es5-ext/object/valid-callable"),A=g("es5-ext/object/valid-value"),e=g("d"),a=g("d/auto-bind"),n=g("es6-symbol"),t=Object.defineProperty,r=Object.defineProperties,f;ne.exports=f=function(o,i){if(!(this instanceof f))throw new TypeError("Constructor requires 'new'");r(this,{__list__:e("w",A(o)),__context__:e("w",i),__nextIndex__:e("w",0)}),!!i&&(M(i.on),i.on("_add",this._onAdd),i.on("_delete",this._onDelete),i.on("_clear",this._onClear))},delete f.prototype.constructor,r(f.prototype,c({_next:e(function(){var o;if(!!this.__list__){if(this.__redo__&&(o=this.__redo__.shift(),o!==void 0))return o;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:e(function(){return this._createResult(this._next())}),_createResult:e(function(o){return o===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(o)}}),_resolve:e(function(o){return this.__list__[o]}),_unBind:e(function(){this.__list__=null,delete this.__redo__,!!this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:e(function(){return"[object "+(this[n.toStringTag]||"Object")+"]"})},a({_onAdd:e(function(o){if(!(o>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){t(this,"__redo__",e("c",[o]));return}this.__redo__.forEach(function(i,p){i>=o&&(this.__redo__[p]=++i)},this),this.__redo__.push(o)}}),_onDelete:e(function(o){var i;o>=this.__nextIndex__||(--this.__nextIndex__,!!this.__redo__&&(i=this.__redo__.indexOf(o),i!==-1&&this.__redo__.splice(i,1),this.__redo__.forEach(function(p,d){p>o&&(this.__redo__[d]=--p)},this)))}),_onClear:e(function(){this.__redo__&&T.call(this.__redo__),this.__nextIndex__=0})}))),t(f.prototype,n.iterator,e(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(g,ne,ae){var T=g("es5-ext/function/is-arguments"),c=g("es5-ext/object/is-value"),M=g("es5-ext/string/is-string"),A=g("es6-symbol").iterator,e=Array.isArray;ne.exports=function(a){return c(a)?e(a)||M(a)||T(a)?!0:typeof a[A]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(g,ne,ae){var T=g("es5-ext/object/set-prototype-of"),c=g("d"),M=g("es6-symbol"),A=g("./"),e=Object.defineProperty,a;a=ne.exports=function(n){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");n=String(n),A.call(this,n),e(this,"__length__",c("",n.length))},T&&T(a,A),delete a.prototype.constructor,a.prototype=Object.create(A.prototype,{_next:c(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:c(function(n){var t=this.__list__[n],r;return this.__nextIndex__===this.__length__?t:(r=t.charCodeAt(0),r>=55296&&r<=56319?t+this.__list__[this.__nextIndex__++]:t)})}),e(a.prototype,M.toStringTag,c("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(g,ne,ae){var T=g("./is-iterable");ne.exports=function(c){if(!T(c))throw new TypeError(c+" is not iterable");return c}},{"./is-iterable":172}],175:[function(g,ne,ae){ne.exports=g("./is-implemented")()?g("ext/global-this").Symbol:g("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(g,ne,ae){var T=g("ext/global-this"),c={object:!0,symbol:!0};ne.exports=function(){var M=T.Symbol,A;if(typeof M!="function")return!1;A=M("test symbol");try{String(A)}catch{return!1}return!(!c[typeof M.iterator]||!c[typeof M.toPrimitive]||!c[typeof M.toStringTag])}},{"ext/global-this":188}],177:[function(g,ne,ae){ne.exports=function(T){return T?typeof T=="symbol"?!0:!T.constructor||T.constructor.name!=="Symbol"?!1:T[T.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(g,ne,ae){var T=g("d"),c=Object.create,M=Object.defineProperty,A=Object.prototype,e=c(null);ne.exports=function(a){for(var n=0,t,r;e[a+(n||"")];)++n;return a+=n||"",e[a]=!0,t="@@"+a,M(A,t,T.gs(null,function(f){r||(r=!0,M(this,t,T(f)),r=!1)})),t}},{d:106}],179:[function(g,ne,ae){var T=g("d"),c=g("ext/global-this").Symbol;ne.exports=function(M){return Object.defineProperties(M,{hasInstance:T("",c&&c.hasInstance||M("hasInstance")),isConcatSpreadable:T("",c&&c.isConcatSpreadable||M("isConcatSpreadable")),iterator:T("",c&&c.iterator||M("iterator")),match:T("",c&&c.match||M("match")),replace:T("",c&&c.replace||M("replace")),search:T("",c&&c.search||M("search")),species:T("",c&&c.species||M("species")),split:T("",c&&c.split||M("split")),toPrimitive:T("",c&&c.toPrimitive||M("toPrimitive")),toStringTag:T("",c&&c.toStringTag||M("toStringTag")),unscopables:T("",c&&c.unscopables||M("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(g,ne,ae){var T=g("d"),c=g("../../../validate-symbol"),M=Object.create(null);ne.exports=function(A){return Object.defineProperties(A,{for:T(function(e){return M[e]?M[e]:M[e]=A(String(e))}),keyFor:T(function(e){var a;c(e);for(a in M)if(M[a]===e)return a})})}},{"../../../validate-symbol":182,d:106}],181:[function(g,ne,ae){var T=g("d"),c=g("./validate-symbol"),M=g("ext/global-this").Symbol,A=g("./lib/private/generate-name"),e=g("./lib/private/setup/standard-symbols"),a=g("./lib/private/setup/symbol-registry"),n=Object.create,t=Object.defineProperties,r=Object.defineProperty,f,o,i;if(typeof M=="function")try{String(M()),i=!0}catch{}else M=null;o=function(d){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return f(d)},ne.exports=f=function p(d){var y;if(this instanceof p)throw new TypeError("Symbol is not a constructor");return i?M(d):(y=n(o.prototype),d=d===void 0?"":String(d),t(y,{__description__:T("",d),__name__:T("",A(d))}))},e(f),a(f),t(o.prototype,{constructor:T(f),toString:T("",function(){return this.__name__})}),t(f.prototype,{toString:T(function(){return"Symbol ("+c(this).__description__+")"}),valueOf:T(function(){return c(this)})}),r(f.prototype,f.toPrimitive,T("",function(){var p=c(this);return typeof p=="symbol"?p:p.toString()})),r(f.prototype,f.toStringTag,T("c","Symbol")),r(o.prototype,f.toStringTag,T("c",f.prototype[f.toStringTag])),r(o.prototype,f.toPrimitive,T("c",f.prototype[f.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(g,ne,ae){var T=g("./is-symbol");ne.exports=function(c){if(!T(c))throw new TypeError(c+" is not a symbol");return c}},{"./is-symbol":177}],183:[function(g,ne,ae){ne.exports=g("./is-implemented")()?WeakMap:g("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(g,ne,ae){ne.exports=function(){var T,c;if(typeof WeakMap!="function")return!1;try{T=new WeakMap([[c={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(T)!=="[object WeakMap]"||typeof T.set!="function"||T.set({},1)!==T||typeof T.delete!="function"||typeof T.has!="function"||T.get(c)!=="one")}},{}],185:[function(g,ne,ae){ne.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(g,ne,ae){var T=g("es5-ext/object/is-value"),c=g("es5-ext/object/set-prototype-of"),M=g("es5-ext/object/valid-object"),A=g("es5-ext/object/valid-value"),e=g("es5-ext/string/random-uniq"),a=g("d"),n=g("es6-iterator/get"),t=g("es6-iterator/for-of"),r=g("es6-symbol").toStringTag,f=g("./is-native-implemented"),o=Array.isArray,i=Object.defineProperty,p=Object.prototype.hasOwnProperty,d=Object.getPrototypeOf,y;ne.exports=y=function(){var v=arguments[0],x;if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");return x=f&&c&&WeakMap!==y?c(new WeakMap,d(this)):this,T(v)&&(o(v)||(v=n(v))),i(x,"__weakMapData__",a("c","$weakMap$"+e())),v&&t(v,function(l){A(l),x.set(l[0],l[1])}),x},f&&(c&&c(y,WeakMap),y.prototype=Object.create(WeakMap.prototype,{constructor:a(y)})),Object.defineProperties(y.prototype,{delete:a(function(v){return p.call(M(v),this.__weakMapData__)?(delete v[this.__weakMapData__],!0):!1}),get:a(function(v){if(!!p.call(M(v),this.__weakMapData__))return v[this.__weakMapData__]}),has:a(function(v){return p.call(M(v),this.__weakMapData__)}),set:a(function(v,x){return i(M(v),this.__weakMapData__,a("c",x)),this}),toString:a(function(){return"[object WeakMap]"})}),i(y.prototype,r,a("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(g,ne,ae){var T=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};ne.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return T()}try{return __global__||T()}finally{delete Object.prototype.__global__}}()},{}],188:[function(g,ne,ae){ne.exports=g("./is-implemented")()?globalThis:g("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(g,ne,ae){ne.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(g,ne,ae){var T=g("is-string-blank");ne.exports=function(c){var M=typeof c;if(M==="string"){var A=c;if(c=+c,c===0&&T(A))return!1}else if(M!=="number")return!1;return c-c<1}},{"is-string-blank":237}],191:[function(g,ne,ae){var T=g("dtype");ne.exports=c;function c(M,A,e){if(!M)throw new TypeError("must specify data as first parameter");if(e=+(e||0)|0,Array.isArray(M)&&M[0]&&typeof M[0][0]=="number"){var a=M[0].length,n=M.length*a,t,r,f,o;(!A||typeof A=="string")&&(A=new(T(A||"float32"))(n+e));var i=A.length-e;if(n!==i)throw new Error("source length "+n+" ("+a+"x"+M.length+") does not match destination length "+i);for(t=0,f=e;t<M.length;t++)for(r=0;r<a;r++)A[f++]=M[t][r]===null?NaN:M[t][r]}else if(!A||typeof A=="string"){var p=T(A||"float32");if(Array.isArray(M)||A==="array")for(A=new p(M.length+e),t=0,f=e,o=A.length;f<o;f++,t++)A[f]=M[t]===null?NaN:M[t];else e===0?A=new p(M):(A=new p(M.length+e),A.set(M,e))}else A.set(M,e);return A}},{dtype:127}],192:[function(g,ne,ae){var T=g("css-font/stringify"),c=[32,126];ne.exports=M;function M(A){A=A||{};var e=A.shape?A.shape:A.canvas?[A.canvas.width,A.canvas.height]:[512,512],a=A.canvas||document.createElement("canvas"),n=A.font,t=typeof A.step=="number"?[A.step,A.step]:A.step||[32,32],r=A.chars||c;if(n&&typeof n!="string"&&(n=T(n)),!Array.isArray(r))r=String(r).split("");else if(r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"){for(var f=[],o=r[0],i=0;o<=r[1];o++)f[i++]=String.fromCharCode(o);r=f}e=e.slice(),a.width=e[0],a.height=e[1];var p=a.getContext("2d");p.fillStyle="#000",p.fillRect(0,0,a.width,a.height),p.font=n,p.textAlign="center",p.textBaseline="middle",p.fillStyle="#fff";for(var d=t[0]/2,y=t[1]/2,o=0;o<r.length;o++)p.fillText(r[o],d,y),(d+=t[0])>e[0]-t[0]/2&&(d=t[0]/2,y+=t[1]);return a}},{"css-font/stringify":102}],193:[function(g,ne,ae){ne.exports=T,T.canvas=document.createElement("canvas"),T.cache={};function T(e,a){a||(a={}),(typeof e=="string"||Array.isArray(e))&&(a.family=e);var n=Array.isArray(a.family)?a.family.join(", "):a.family;if(!n)throw Error("`family` must be defined");var t=a.size||a.fontSize||a.em||48,r=a.weight||a.fontWeight||"",f=a.style||a.fontStyle||"",e=[f,r,t].join(" ")+"px "+n,o=a.origin||"top";if(T.cache[n]&&t<=T.cache[n].em)return c(T.cache[n],o);var i=a.canvas||T.canvas,p=i.getContext("2d"),d={upper:a.upper!==void 0?a.upper:"H",lower:a.lower!==void 0?a.lower:"x",descent:a.descent!==void 0?a.descent:"p",ascent:a.ascent!==void 0?a.ascent:"h",tittle:a.tittle!==void 0?a.tittle:"i",overshoot:a.overshoot!==void 0?a.overshoot:"O"},y=Math.ceil(t*1.5);i.height=y,i.width=y*.5,p.font=e;var v="H",x={top:0};p.clearRect(0,0,y,y),p.textBaseline="top",p.fillStyle="black",p.fillText(v,0,0);var l=M(p.getImageData(0,0,y,y));p.clearRect(0,0,y,y),p.textBaseline="bottom",p.fillText(v,0,y);var _=M(p.getImageData(0,0,y,y));x.lineHeight=x.bottom=y-_+l,p.clearRect(0,0,y,y),p.textBaseline="alphabetic",p.fillText(v,0,y);var s=M(p.getImageData(0,0,y,y)),w=y-s-1+l;x.baseline=x.alphabetic=w,p.clearRect(0,0,y,y),p.textBaseline="middle",p.fillText(v,0,y*.5);var b=M(p.getImageData(0,0,y,y));x.median=x.middle=y-b-1+l-y*.5,p.clearRect(0,0,y,y),p.textBaseline="hanging",p.fillText(v,0,y*.5);var h=M(p.getImageData(0,0,y,y));x.hanging=y-h-1+l-y*.5,p.clearRect(0,0,y,y),p.textBaseline="ideographic",p.fillText(v,0,y);var m=M(p.getImageData(0,0,y,y));if(x.ideographic=y-m-1+l,d.upper&&(p.clearRect(0,0,y,y),p.textBaseline="top",p.fillText(d.upper,0,0),x.upper=M(p.getImageData(0,0,y,y)),x.capHeight=x.baseline-x.upper),d.lower&&(p.clearRect(0,0,y,y),p.textBaseline="top",p.fillText(d.lower,0,0),x.lower=M(p.getImageData(0,0,y,y)),x.xHeight=x.baseline-x.lower),d.tittle&&(p.clearRect(0,0,y,y),p.textBaseline="top",p.fillText(d.tittle,0,0),x.tittle=M(p.getImageData(0,0,y,y))),d.ascent&&(p.clearRect(0,0,y,y),p.textBaseline="top",p.fillText(d.ascent,0,0),x.ascent=M(p.getImageData(0,0,y,y))),d.descent&&(p.clearRect(0,0,y,y),p.textBaseline="top",p.fillText(d.descent,0,0),x.descent=A(p.getImageData(0,0,y,y))),d.overshoot){p.clearRect(0,0,y,y),p.textBaseline="top",p.fillText(d.overshoot,0,0);var u=A(p.getImageData(0,0,y,y));x.overshoot=u-w}for(var L in x)x[L]/=t;return x.em=t,T.cache[n]=x,c(x,o)}function c(e,a){var n={};typeof a=="string"&&(a=e[a]);for(var t in e)t!=="em"&&(n[t]=e[t]-a);return n}function M(e){for(var a=e.height,n=e.data,t=3;t<n.length;t+=4)if(n[t]!==0)return Math.floor((t-3)*.25/a)}function A(e){for(var a=e.height,n=e.data,t=n.length-1;t>0;t-=4)if(n[t]!==0)return Math.floor((t-3)*.25/a)}},{}],194:[function(g,ne,ae){ne.exports=T;function T(c,M){if(typeof c!="string")throw new TypeError("must specify type string");if(M=M||{},typeof document=="undefined"&&!M.canvas)return null;var A=M.canvas||document.createElement("canvas");typeof M.width=="number"&&(A.width=M.width),typeof M.height=="number"&&(A.height=M.height);var e=M,a;try{var n=[c];c.indexOf("webgl")===0&&n.push("experimental-"+c);for(var t=0;t<n.length;t++)if(a=A.getContext(n[t],e),a)return a}catch{a=null}return a||null}},{}],195:[function(g,ne,ae){ne.exports=T;function T(c,M){var A=M[0],e=M[1],a=M[2],n=M[3],t=M[4],r=M[5],f=M[6],o=M[7],i=M[8],p=M[9],d=M[10],y=M[11],v=M[12],x=M[13],l=M[14],_=M[15];return c[0]=r*(d*_-y*l)-p*(f*_-o*l)+x*(f*y-o*d),c[1]=-(e*(d*_-y*l)-p*(a*_-n*l)+x*(a*y-n*d)),c[2]=e*(f*_-o*l)-r*(a*_-n*l)+x*(a*o-n*f),c[3]=-(e*(f*y-o*d)-r*(a*y-n*d)+p*(a*o-n*f)),c[4]=-(t*(d*_-y*l)-i*(f*_-o*l)+v*(f*y-o*d)),c[5]=A*(d*_-y*l)-i*(a*_-n*l)+v*(a*y-n*d),c[6]=-(A*(f*_-o*l)-t*(a*_-n*l)+v*(a*o-n*f)),c[7]=A*(f*y-o*d)-t*(a*y-n*d)+i*(a*o-n*f),c[8]=t*(p*_-y*x)-i*(r*_-o*x)+v*(r*y-o*p),c[9]=-(A*(p*_-y*x)-i*(e*_-n*x)+v*(e*y-n*p)),c[10]=A*(r*_-o*x)-t*(e*_-n*x)+v*(e*o-n*r),c[11]=-(A*(r*y-o*p)-t*(e*y-n*p)+i*(e*o-n*r)),c[12]=-(t*(p*l-d*x)-i*(r*l-f*x)+v*(r*d-f*p)),c[13]=A*(p*l-d*x)-i*(e*l-a*x)+v*(e*d-a*p),c[14]=-(A*(r*l-f*x)-t*(e*l-a*x)+v*(e*f-a*r)),c[15]=A*(r*d-f*p)-t*(e*d-a*p)+i*(e*f-a*r),c}},{}],196:[function(g,ne,ae){ne.exports=T;function T(c){var M=new Float32Array(16);return M[0]=c[0],M[1]=c[1],M[2]=c[2],M[3]=c[3],M[4]=c[4],M[5]=c[5],M[6]=c[6],M[7]=c[7],M[8]=c[8],M[9]=c[9],M[10]=c[10],M[11]=c[11],M[12]=c[12],M[13]=c[13],M[14]=c[14],M[15]=c[15],M}},{}],197:[function(g,ne,ae){ne.exports=T;function T(c,M){return c[0]=M[0],c[1]=M[1],c[2]=M[2],c[3]=M[3],c[4]=M[4],c[5]=M[5],c[6]=M[6],c[7]=M[7],c[8]=M[8],c[9]=M[9],c[10]=M[10],c[11]=M[11],c[12]=M[12],c[13]=M[13],c[14]=M[14],c[15]=M[15],c}},{}],198:[function(g,ne,ae){ne.exports=T;function T(){var c=new Float32Array(16);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],199:[function(g,ne,ae){ne.exports=T;function T(c){var M=c[0],A=c[1],e=c[2],a=c[3],n=c[4],t=c[5],r=c[6],f=c[7],o=c[8],i=c[9],p=c[10],d=c[11],y=c[12],v=c[13],x=c[14],l=c[15],_=M*t-A*n,s=M*r-e*n,w=M*f-a*n,b=A*r-e*t,h=A*f-a*t,m=e*f-a*r,u=o*v-i*y,L=o*x-p*y,S=o*l-d*y,k=i*x-p*v,P=i*l-d*v,z=p*l-d*x;return _*z-s*P+w*k+b*S-h*L+m*u}},{}],200:[function(g,ne,ae){ne.exports=T;function T(c,M){var A=M[0],e=M[1],a=M[2],n=M[3],t=A+A,r=e+e,f=a+a,o=A*t,i=e*t,p=e*r,d=a*t,y=a*r,v=a*f,x=n*t,l=n*r,_=n*f;return c[0]=1-p-v,c[1]=i+_,c[2]=d-l,c[3]=0,c[4]=i-_,c[5]=1-o-v,c[6]=y+x,c[7]=0,c[8]=d+l,c[9]=y-x,c[10]=1-o-p,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],201:[function(g,ne,ae){ne.exports=T;function T(c,M,A){var e,a,n,t=A[0],r=A[1],f=A[2],o=Math.sqrt(t*t+r*r+f*f);return Math.abs(o)<1e-6?null:(o=1/o,t*=o,r*=o,f*=o,e=Math.sin(M),a=Math.cos(M),n=1-a,c[0]=t*t*n+a,c[1]=r*t*n+f*e,c[2]=f*t*n-r*e,c[3]=0,c[4]=t*r*n-f*e,c[5]=r*r*n+a,c[6]=f*r*n+t*e,c[7]=0,c[8]=t*f*n+r*e,c[9]=r*f*n-t*e,c[10]=f*f*n+a,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}},{}],202:[function(g,ne,ae){ne.exports=T;function T(c,M,A){var e=M[0],a=M[1],n=M[2],t=M[3],r=e+e,f=a+a,o=n+n,i=e*r,p=e*f,d=e*o,y=a*f,v=a*o,x=n*o,l=t*r,_=t*f,s=t*o;return c[0]=1-(y+x),c[1]=p+s,c[2]=d-_,c[3]=0,c[4]=p-s,c[5]=1-(i+x),c[6]=v+l,c[7]=0,c[8]=d+_,c[9]=v-l,c[10]=1-(i+y),c[11]=0,c[12]=A[0],c[13]=A[1],c[14]=A[2],c[15]=1,c}},{}],203:[function(g,ne,ae){ne.exports=T;function T(c,M){return c[0]=M[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=M[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=M[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],204:[function(g,ne,ae){ne.exports=T;function T(c,M){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=M[0],c[13]=M[1],c[14]=M[2],c[15]=1,c}},{}],205:[function(g,ne,ae){ne.exports=T;function T(c,M){var A=Math.sin(M),e=Math.cos(M);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=e,c[6]=A,c[7]=0,c[8]=0,c[9]=-A,c[10]=e,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],206:[function(g,ne,ae){ne.exports=T;function T(c,M){var A=Math.sin(M),e=Math.cos(M);return c[0]=e,c[1]=0,c[2]=-A,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=A,c[9]=0,c[10]=e,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],207:[function(g,ne,ae){ne.exports=T;function T(c,M){var A=Math.sin(M),e=Math.cos(M);return c[0]=e,c[1]=A,c[2]=0,c[3]=0,c[4]=-A,c[5]=e,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],208:[function(g,ne,ae){ne.exports=T;function T(c,M,A,e,a,n,t){var r=1/(A-M),f=1/(a-e),o=1/(n-t);return c[0]=n*2*r,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=n*2*f,c[6]=0,c[7]=0,c[8]=(A+M)*r,c[9]=(a+e)*f,c[10]=(t+n)*o,c[11]=-1,c[12]=0,c[13]=0,c[14]=t*n*2*o,c[15]=0,c}},{}],209:[function(g,ne,ae){ne.exports=T;function T(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],210:[function(g,ne,ae){ne.exports={create:g("./create"),clone:g("./clone"),copy:g("./copy"),identity:g("./identity"),transpose:g("./transpose"),invert:g("./invert"),adjoint:g("./adjoint"),determinant:g("./determinant"),multiply:g("./multiply"),translate:g("./translate"),scale:g("./scale"),rotate:g("./rotate"),rotateX:g("./rotateX"),rotateY:g("./rotateY"),rotateZ:g("./rotateZ"),fromRotation:g("./fromRotation"),fromRotationTranslation:g("./fromRotationTranslation"),fromScaling:g("./fromScaling"),fromTranslation:g("./fromTranslation"),fromXRotation:g("./fromXRotation"),fromYRotation:g("./fromYRotation"),fromZRotation:g("./fromZRotation"),fromQuat:g("./fromQuat"),frustum:g("./frustum"),perspective:g("./perspective"),perspectiveFromFieldOfView:g("./perspectiveFromFieldOfView"),ortho:g("./ortho"),lookAt:g("./lookAt"),str:g("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(g,ne,ae){ne.exports=T;function T(c,M){var A=M[0],e=M[1],a=M[2],n=M[3],t=M[4],r=M[5],f=M[6],o=M[7],i=M[8],p=M[9],d=M[10],y=M[11],v=M[12],x=M[13],l=M[14],_=M[15],s=A*r-e*t,w=A*f-a*t,b=A*o-n*t,h=e*f-a*r,m=e*o-n*r,u=a*o-n*f,L=i*x-p*v,S=i*l-d*v,k=i*_-y*v,P=p*l-d*x,z=p*_-y*x,I=d*_-y*l,D=s*I-w*z+b*P+h*k-m*S+u*L;return D?(D=1/D,c[0]=(r*I-f*z+o*P)*D,c[1]=(a*z-e*I-n*P)*D,c[2]=(x*u-l*m+_*h)*D,c[3]=(d*m-p*u-y*h)*D,c[4]=(f*k-t*I-o*S)*D,c[5]=(A*I-a*k+n*S)*D,c[6]=(l*b-v*u-_*w)*D,c[7]=(i*u-d*b+y*w)*D,c[8]=(t*z-r*k+o*L)*D,c[9]=(e*k-A*z-n*L)*D,c[10]=(v*m-x*b+_*s)*D,c[11]=(p*b-i*m-y*s)*D,c[12]=(r*S-t*P-f*L)*D,c[13]=(A*P-e*S+a*L)*D,c[14]=(x*w-v*h-l*s)*D,c[15]=(i*h-p*w+d*s)*D,c):null}},{}],212:[function(g,ne,ae){var T=g("./identity");ne.exports=c;function c(M,A,e,a){var n,t,r,f,o,i,p,d,y,v,x=A[0],l=A[1],_=A[2],s=a[0],w=a[1],b=a[2],h=e[0],m=e[1],u=e[2];return Math.abs(x-h)<1e-6&&Math.abs(l-m)<1e-6&&Math.abs(_-u)<1e-6?T(M):(p=x-h,d=l-m,y=_-u,v=1/Math.sqrt(p*p+d*d+y*y),p*=v,d*=v,y*=v,n=w*y-b*d,t=b*p-s*y,r=s*d-w*p,v=Math.sqrt(n*n+t*t+r*r),v?(v=1/v,n*=v,t*=v,r*=v):(n=0,t=0,r=0),f=d*r-y*t,o=y*n-p*r,i=p*t-d*n,v=Math.sqrt(f*f+o*o+i*i),v?(v=1/v,f*=v,o*=v,i*=v):(f=0,o=0,i=0),M[0]=n,M[1]=f,M[2]=p,M[3]=0,M[4]=t,M[5]=o,M[6]=d,M[7]=0,M[8]=r,M[9]=i,M[10]=y,M[11]=0,M[12]=-(n*x+t*l+r*_),M[13]=-(f*x+o*l+i*_),M[14]=-(p*x+d*l+y*_),M[15]=1,M)}},{"./identity":209}],213:[function(g,ne,ae){ne.exports=T;function T(c,M,A){var e=M[0],a=M[1],n=M[2],t=M[3],r=M[4],f=M[5],o=M[6],i=M[7],p=M[8],d=M[9],y=M[10],v=M[11],x=M[12],l=M[13],_=M[14],s=M[15],w=A[0],b=A[1],h=A[2],m=A[3];return c[0]=w*e+b*r+h*p+m*x,c[1]=w*a+b*f+h*d+m*l,c[2]=w*n+b*o+h*y+m*_,c[3]=w*t+b*i+h*v+m*s,w=A[4],b=A[5],h=A[6],m=A[7],c[4]=w*e+b*r+h*p+m*x,c[5]=w*a+b*f+h*d+m*l,c[6]=w*n+b*o+h*y+m*_,c[7]=w*t+b*i+h*v+m*s,w=A[8],b=A[9],h=A[10],m=A[11],c[8]=w*e+b*r+h*p+m*x,c[9]=w*a+b*f+h*d+m*l,c[10]=w*n+b*o+h*y+m*_,c[11]=w*t+b*i+h*v+m*s,w=A[12],b=A[13],h=A[14],m=A[15],c[12]=w*e+b*r+h*p+m*x,c[13]=w*a+b*f+h*d+m*l,c[14]=w*n+b*o+h*y+m*_,c[15]=w*t+b*i+h*v+m*s,c}},{}],214:[function(g,ne,ae){ne.exports=T;function T(c,M,A,e,a,n,t){var r=1/(M-A),f=1/(e-a),o=1/(n-t);return c[0]=-2*r,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*f,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*o,c[11]=0,c[12]=(M+A)*r,c[13]=(a+e)*f,c[14]=(t+n)*o,c[15]=1,c}},{}],215:[function(g,ne,ae){ne.exports=T;function T(c,M,A,e,a){var n=1/Math.tan(M/2),t=1/(e-a);return c[0]=n/A,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=n,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=(a+e)*t,c[11]=-1,c[12]=0,c[13]=0,c[14]=2*a*e*t,c[15]=0,c}},{}],216:[function(g,ne,ae){ne.exports=T;function T(c,M,A,e){var a=Math.tan(M.upDegrees*Math.PI/180),n=Math.tan(M.downDegrees*Math.PI/180),t=Math.tan(M.leftDegrees*Math.PI/180),r=Math.tan(M.rightDegrees*Math.PI/180),f=2/(t+r),o=2/(a+n);return c[0]=f,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=o,c[6]=0,c[7]=0,c[8]=-((t-r)*f*.5),c[9]=(a-n)*o*.5,c[10]=e/(A-e),c[11]=-1,c[12]=0,c[13]=0,c[14]=e*A/(A-e),c[15]=0,c}},{}],217:[function(g,ne,ae){ne.exports=T;function T(c,M,A,e){var a=e[0],n=e[1],t=e[2],r=Math.sqrt(a*a+n*n+t*t),f,o,i,p,d,y,v,x,l,_,s,w,b,h,m,u,L,S,k,P,z,I,D,R;return Math.abs(r)<1e-6?null:(r=1/r,a*=r,n*=r,t*=r,f=Math.sin(A),o=Math.cos(A),i=1-o,p=M[0],d=M[1],y=M[2],v=M[3],x=M[4],l=M[5],_=M[6],s=M[7],w=M[8],b=M[9],h=M[10],m=M[11],u=a*a*i+o,L=n*a*i+t*f,S=t*a*i-n*f,k=a*n*i-t*f,P=n*n*i+o,z=t*n*i+a*f,I=a*t*i+n*f,D=n*t*i-a*f,R=t*t*i+o,c[0]=p*u+x*L+w*S,c[1]=d*u+l*L+b*S,c[2]=y*u+_*L+h*S,c[3]=v*u+s*L+m*S,c[4]=p*k+x*P+w*z,c[5]=d*k+l*P+b*z,c[6]=y*k+_*P+h*z,c[7]=v*k+s*P+m*z,c[8]=p*I+x*D+w*R,c[9]=d*I+l*D+b*R,c[10]=y*I+_*D+h*R,c[11]=v*I+s*D+m*R,M!==c&&(c[12]=M[12],c[13]=M[13],c[14]=M[14],c[15]=M[15]),c)}},{}],218:[function(g,ne,ae){ne.exports=T;function T(c,M,A){var e=Math.sin(A),a=Math.cos(A),n=M[4],t=M[5],r=M[6],f=M[7],o=M[8],i=M[9],p=M[10],d=M[11];return M!==c&&(c[0]=M[0],c[1]=M[1],c[2]=M[2],c[3]=M[3],c[12]=M[12],c[13]=M[13],c[14]=M[14],c[15]=M[15]),c[4]=n*a+o*e,c[5]=t*a+i*e,c[6]=r*a+p*e,c[7]=f*a+d*e,c[8]=o*a-n*e,c[9]=i*a-t*e,c[10]=p*a-r*e,c[11]=d*a-f*e,c}},{}],219:[function(g,ne,ae){ne.exports=T;function T(c,M,A){var e=Math.sin(A),a=Math.cos(A),n=M[0],t=M[1],r=M[2],f=M[3],o=M[8],i=M[9],p=M[10],d=M[11];return M!==c&&(c[4]=M[4],c[5]=M[5],c[6]=M[6],c[7]=M[7],c[12]=M[12],c[13]=M[13],c[14]=M[14],c[15]=M[15]),c[0]=n*a-o*e,c[1]=t*a-i*e,c[2]=r*a-p*e,c[3]=f*a-d*e,c[8]=n*e+o*a,c[9]=t*e+i*a,c[10]=r*e+p*a,c[11]=f*e+d*a,c}},{}],220:[function(g,ne,ae){ne.exports=T;function T(c,M,A){var e=Math.sin(A),a=Math.cos(A),n=M[0],t=M[1],r=M[2],f=M[3],o=M[4],i=M[5],p=M[6],d=M[7];return M!==c&&(c[8]=M[8],c[9]=M[9],c[10]=M[10],c[11]=M[11],c[12]=M[12],c[13]=M[13],c[14]=M[14],c[15]=M[15]),c[0]=n*a+o*e,c[1]=t*a+i*e,c[2]=r*a+p*e,c[3]=f*a+d*e,c[4]=o*a-n*e,c[5]=i*a-t*e,c[6]=p*a-r*e,c[7]=d*a-f*e,c}},{}],221:[function(g,ne,ae){ne.exports=T;function T(c,M,A){var e=A[0],a=A[1],n=A[2];return c[0]=M[0]*e,c[1]=M[1]*e,c[2]=M[2]*e,c[3]=M[3]*e,c[4]=M[4]*a,c[5]=M[5]*a,c[6]=M[6]*a,c[7]=M[7]*a,c[8]=M[8]*n,c[9]=M[9]*n,c[10]=M[10]*n,c[11]=M[11]*n,c[12]=M[12],c[13]=M[13],c[14]=M[14],c[15]=M[15],c}},{}],222:[function(g,ne,ae){ne.exports=T;function T(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}},{}],223:[function(g,ne,ae){ne.exports=T;function T(c,M,A){var e=A[0],a=A[1],n=A[2],t,r,f,o,i,p,d,y,v,x,l,_;return M===c?(c[12]=M[0]*e+M[4]*a+M[8]*n+M[12],c[13]=M[1]*e+M[5]*a+M[9]*n+M[13],c[14]=M[2]*e+M[6]*a+M[10]*n+M[14],c[15]=M[3]*e+M[7]*a+M[11]*n+M[15]):(t=M[0],r=M[1],f=M[2],o=M[3],i=M[4],p=M[5],d=M[6],y=M[7],v=M[8],x=M[9],l=M[10],_=M[11],c[0]=t,c[1]=r,c[2]=f,c[3]=o,c[4]=i,c[5]=p,c[6]=d,c[7]=y,c[8]=v,c[9]=x,c[10]=l,c[11]=_,c[12]=t*e+i*a+v*n+M[12],c[13]=r*e+p*a+x*n+M[13],c[14]=f*e+d*a+l*n+M[14],c[15]=o*e+y*a+_*n+M[15]),c}},{}],224:[function(g,ne,ae){ne.exports=T;function T(c,M){if(c===M){var A=M[1],e=M[2],a=M[3],n=M[6],t=M[7],r=M[11];c[1]=M[4],c[2]=M[8],c[3]=M[12],c[4]=A,c[6]=M[9],c[7]=M[13],c[8]=e,c[9]=n,c[11]=M[14],c[12]=a,c[13]=t,c[14]=r}else c[0]=M[0],c[1]=M[4],c[2]=M[8],c[3]=M[12],c[4]=M[1],c[5]=M[5],c[6]=M[9],c[7]=M[13],c[8]=M[2],c[9]=M[6],c[10]=M[10],c[11]=M[14],c[12]=M[3],c[13]=M[7],c[14]=M[11],c[15]=M[15];return c}},{}],225:[function(g,ne,ae){var T=g("css-font"),c=g("pick-by-alias"),M=g("regl"),A=g("gl-util/context"),e=g("es6-weak-map"),a=g("color-normalize"),n=g("font-atlas"),t=g("typedarray-pool"),r=g("parse-rect"),f=g("is-plain-obj"),o=g("parse-unit"),i=g("to-px"),p=g("detect-kerning"),d=g("object-assign"),y=g("font-measure"),v=g("flatten-vertex-data"),x=g("bit-twiddle"),l=x.nextPow2,_=new e,s=!1;if(document.body){var w=document.body.appendChild(document.createElement("div"));w.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(w).fontStretch&&(s=!0),document.body.removeChild(w)}var b=function(u){h(u)?(u={regl:u},this.gl=u.regl._gl):this.gl=A(u),this.shader=_.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=u.regl||M({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),_.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(f(u)?u:{})};b.prototype.createShader=function(){var u=this.regl,L=u({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:u.prop("count"),offset:u.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:u.this("sizeBuffer")},width:{offset:0,stride:8,buffer:u.this("sizeBuffer")},char:u.this("charBuffer"),position:u.this("position")},uniforms:{atlasSize:function(k,P){return[P.atlas.width,P.atlas.height]},atlasDim:function(k,P){return[P.atlas.cols,P.atlas.rows]},atlas:function(k,P){return P.atlas.texture},charStep:function(k,P){return P.atlas.step},em:function(k,P){return P.atlas.em},color:u.prop("color"),opacity:u.prop("opacity"),viewport:u.this("viewportArray"),scale:u.this("scale"),align:u.prop("align"),baseline:u.prop("baseline"),translate:u.this("translate"),positionOffset:u.prop("positionOffset")},primitive:"points",viewport:u.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),S={};return{regl:u,draw:L,atlas:S}},b.prototype.update=function(u){var L=this;if(typeof u=="string")u={text:u};else if(!u)return;u=c(u,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),u.opacity!=null&&(Array.isArray(u.opacity)?this.opacity=u.opacity.map(function(xe){return parseFloat(xe)}):this.opacity=parseFloat(u.opacity)),u.viewport!=null&&(this.viewport=r(u.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),u.kerning!=null&&(this.kerning=u.kerning),u.offset!=null&&(typeof u.offset=="number"&&(u.offset=[u.offset,0]),this.positionOffset=v(u.offset)),u.direction&&(this.direction=u.direction),u.range&&(this.range=u.range,this.scale=[1/(u.range[2]-u.range[0]),1/(u.range[3]-u.range[1])],this.translate=[-u.range[0],-u.range[1]]),u.scale&&(this.scale=u.scale),u.translate&&(this.translate=u.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!u.font&&(u.font=b.baseFontSize+"px sans-serif");var S=!1,k=!1;if(u.font&&(Array.isArray(u.font)?u.font:[u.font]).forEach(function(xe,Pe){if(typeof xe=="string")try{xe=T.parse(xe)}catch{xe=T.parse(b.baseFontSize+"px "+xe)}else xe=T.parse(T.stringify(xe));var Ve=T.stringify({size:b.baseFontSize,family:xe.family,stretch:s?xe.stretch:void 0,variant:xe.variant,weight:xe.weight,style:xe.style}),Qe=o(xe.size),Fe=Math.round(Qe[0]*i(Qe[1]));if(Fe!==L.fontSize[Pe]&&(k=!0,L.fontSize[Pe]=Fe),(!L.font[Pe]||Ve!=L.font[Pe].baseString)&&(S=!0,L.font[Pe]=b.fonts[Ve],!L.font[Pe])){var Le=xe.family.join(", "),Ne=[xe.style];xe.style!=xe.variant&&Ne.push(xe.variant),xe.variant!=xe.weight&&Ne.push(xe.weight),s&&xe.weight!=xe.stretch&&Ne.push(xe.stretch),L.font[Pe]={baseString:Ve,family:Le,weight:xe.weight,stretch:xe.stretch,style:xe.style,variant:xe.variant,width:{},kerning:{},metrics:y(Le,{origin:"top",fontSize:b.baseFontSize,fontStyle:Ne.join(" ")})},b.fonts[Ve]=L.font[Pe]}}),(S||k)&&this.font.forEach(function(xe,Pe){var Ve=T.stringify({size:L.fontSize[Pe],family:xe.family,stretch:s?xe.stretch:void 0,variant:xe.variant,weight:xe.weight,style:xe.style});if(L.fontAtlas[Pe]=L.shader.atlas[Ve],!L.fontAtlas[Pe]){var Qe=xe.metrics;L.shader.atlas[Ve]=L.fontAtlas[Pe]={fontString:Ve,step:Math.ceil(L.fontSize[Pe]*Qe.bottom*.5)*2,em:L.fontSize[Pe],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:L.regl.texture()}}u.text==null&&(u.text=L.text)}),typeof u.text=="string"&&u.position&&u.position.length>2){for(var P=Array(u.position.length*.5),z=0;z<P.length;z++)P[z]=u.text;u.text=P}var I;if(u.text!=null||S){if(this.textOffsets=[0],Array.isArray(u.text)){this.count=u.text[0].length,this.counts=[this.count];for(var D=1;D<u.text.length;D++)this.textOffsets[D]=this.textOffsets[D-1]+u.text[D-1].length,this.count+=u.text[D].length,this.counts.push(u.text[D].length);this.text=u.text.join("")}else this.text=u.text,this.count=this.text.length,this.counts=[this.count];I=[],this.font.forEach(function(xe,Pe){b.atlasContext.font=xe.baseString;for(var Ve=L.fontAtlas[Pe],Qe=0;Qe<L.text.length;Qe++){var Fe=L.text.charAt(Qe);if(Ve.ids[Fe]==null&&(Ve.ids[Fe]=Ve.chars.length,Ve.chars.push(Fe),I.push(Fe)),xe.width[Fe]==null&&(xe.width[Fe]=b.atlasContext.measureText(Fe).width/b.baseFontSize,L.kerning)){var Le=[];for(var Ne in xe.width)Le.push(Ne+Fe,Fe+Ne);d(xe.kerning,p(xe.family,{pairs:Le}))}}})}if(u.position)if(u.position.length>2){for(var R=!u.position[0].length,B=t.mallocFloat(this.count*2),F=0,V=0;F<this.counts.length;F++){var Y=this.counts[F];if(R)for(var K=0;K<Y;K++)B[V++]=u.position[F*2],B[V++]=u.position[F*2+1];else for(var J=0;J<Y;J++)B[V++]=u.position[F][0],B[V++]=u.position[F][1]}this.position.call?this.position({type:"float",data:B}):this.position=this.regl.buffer({type:"float",data:B}),t.freeFloat(B)}else this.position.destroy&&this.position.destroy(),this.position={constant:u.position};if(u.text||S){var G=t.mallocUint8(this.count),Z=t.mallocFloat(this.count*2);this.textWidth=[];for(var re=0,se=0;re<this.counts.length;re++){for(var oe=this.counts[re],N=this.font[re]||this.font[0],U=this.fontAtlas[re]||this.fontAtlas[0],q=0;q<oe;q++){var Q=this.text.charAt(se),W=this.text.charAt(se-1);if(G[se]=U.ids[Q],Z[se*2]=N.width[Q],q){var X=Z[se*2-2],te=Z[se*2],ee=Z[se*2-1],ie=ee+X*.5+te*.5;if(this.kerning){var le=N.kerning[W+Q];le&&(ie+=le*.001)}Z[se*2+1]=ie}else Z[se*2+1]=Z[se*2]*.5;se++}this.textWidth.push(Z.length?Z[se*2-2]*.5+Z[se*2-1]:0)}u.align||(u.align=this.align),this.charBuffer({data:G,type:"uint8",usage:"stream"}),this.sizeBuffer({data:Z,type:"float",usage:"stream"}),t.freeUint8(G),t.freeFloat(Z),I.length&&this.font.forEach(function(xe,Pe){var Ve=L.fontAtlas[Pe],Qe=Ve.step,Fe=Math.floor(b.maxAtlasSize/Qe),Le=Math.min(Fe,Ve.chars.length),Ne=Math.ceil(Ve.chars.length/Le),dt=l(Le*Qe),Dt=l(Ne*Qe);Ve.width=dt,Ve.height=Dt,Ve.rows=Ne,Ve.cols=Le,!!Ve.em&&Ve.texture({data:n({canvas:b.atlasCanvas,font:Ve.fontString,chars:Ve.chars,shape:[dt,Dt],step:[Qe,Qe]})})})}if(u.align&&(this.align=u.align,this.alignOffset=this.textWidth.map(function(xe,Pe){var Ve=Array.isArray(L.align)?L.align.length>1?L.align[Pe]:L.align[0]:L.align;if(typeof Ve=="number")return Ve;switch(Ve){case"right":case"end":return-xe;case"center":case"centre":case"middle":return-xe*.5}return 0})),this.baseline==null&&u.baseline==null&&(u.baseline=0),u.baseline!=null&&(this.baseline=u.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(xe,Pe){var Ve=(L.font[Pe]||L.font[0]).metrics,Qe=0;return Qe+=Ve.bottom*.5,typeof xe=="number"?Qe+=xe-Ve.baseline:Qe+=-Ve[xe],Qe*=-1,Qe})),u.color!=null)if(u.color||(u.color="transparent"),typeof u.color=="string"||!isNaN(u.color))this.color=a(u.color,"uint8");else{var ye;if(typeof u.color[0]=="number"&&u.color.length>this.counts.length){var ue=u.color.length;ye=t.mallocUint8(ue);for(var pe=(u.color.subarray||u.color.slice).bind(u.color),ge=0;ge<ue;ge+=4)ye.set(a(pe(ge,ge+4),"uint8"),ge)}else{var Te=u.color.length;ye=t.mallocUint8(Te*4);for(var _e=0;_e<Te;_e++)ye.set(a(u.color[_e]||0,"uint8"),_e*4)}this.color=ye}if(u.position||u.text||u.color||u.baseline||u.align||u.font||u.offset||u.opacity){var De=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(De){var Oe=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(Oe);for(var Ue=0;Ue<this.batch.length;Ue++)this.batch[Ue]={count:this.counts.length>1?this.counts[Ue]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Ue]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Ue*4,Ue*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Ue]:this.opacity,baseline:this.baselineOffset[Ue]!=null?this.baselineOffset[Ue]:this.baselineOffset[0],align:this.align?this.alignOffset[Ue]!=null?this.alignOffset[Ue]:this.alignOffset[0]:0,atlas:this.fontAtlas[Ue]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Ue*2,Ue*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},b.prototype.destroy=function(){},b.prototype.kerning=!0,b.prototype.position={constant:new Float32Array(2)},b.prototype.translate=null,b.prototype.scale=null,b.prototype.font=null,b.prototype.text="",b.prototype.positionOffset=[0,0],b.prototype.opacity=1,b.prototype.color=new Uint8Array([0,0,0,255]),b.prototype.alignOffset=[0,0],b.maxAtlasSize=1024,b.atlasCanvas=document.createElement("canvas"),b.atlasContext=b.atlasCanvas.getContext("2d",{alpha:!1}),b.baseFontSize=64,b.fonts={};function h(m){return typeof m=="function"&&m._gl&&m.prop&&m.texture&&m.buffer}ne.exports=b},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(g,ne,ae){(function(T){(function(){var c=g("pick-by-alias");ne.exports=function(r){if(r?typeof r=="string"&&(r={container:r}):r={},A(r)?r={container:r}:e(r)?r={container:r}:a(r)?r={gl:r}:r=c(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),r.pixelRatio||(r.pixelRatio=T.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if(typeof r.container=="string"){var f=document.querySelector(r.container);if(!f)throw Error("Element "+r.container+" is not found");r.container=f}A(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=n(),r.container.appendChild(r.canvas),M(r))}else if(!r.canvas)if(typeof document!="undefined")r.container=document.body||document.documentElement,r.canvas=n(),r.container.appendChild(r.canvas),M(r);else throw Error("Not DOM environment. Use headless-gl.");return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(o){try{r.gl=r.canvas.getContext(o,r.attrs)}catch{}return r.gl}),r.gl};function M(t){if(t.container)if(t.container==document.body)document.body.style.width||(t.canvas.width=t.width||t.pixelRatio*T.innerWidth),document.body.style.height||(t.canvas.height=t.height||t.pixelRatio*T.innerHeight);else{var r=t.container.getBoundingClientRect();t.canvas.width=t.width||r.right-r.left,t.canvas.height=t.height||r.bottom-r.top}}function A(t){return typeof t.getContext=="function"&&"width"in t&&"height"in t}function e(t){return typeof t.nodeName=="string"&&typeof t.appendChild=="function"&&typeof t.getBoundingClientRect=="function"}function a(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}function n(){var t=document.createElement("canvas");return t.style.position="absolute",t.style.top=0,t.style.left=0,t}}).call(this)}).call(this,typeof To!="undefined"?To:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"pick-by-alias":253}],227:[function(g,ne,ae){ne.exports=function(T){typeof T=="string"&&(T=[T]);for(var c=[].slice.call(arguments,1),M=[],A=0;A<T.length-1;A++)M.push(T[A],c[A]||"");return M.push(T[A]),M.join("")}},{}],228:[function(g,ne,ae){(function(T){(function(){var c=g("is-browser"),M;typeof T.matchMedia=="function"?M=!T.matchMedia("(hover: none)").matches:M=c,ne.exports=M}).call(this)}).call(this,typeof To!="undefined"?To:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"is-browser":232}],229:[function(g,ne,ae){var T=g("is-browser");function c(){var M=!1;try{var A=Object.defineProperty({},"passive",{get:function(){M=!0}});window.addEventListener("test",null,A),window.removeEventListener("test",null,A)}catch{M=!1}return M}ne.exports=T&&c()},{"is-browser":232}],230:[function(g,ne,ae){ae.read=function(T,c,M,A,e){var a,n,t=e*8-A-1,r=(1<<t)-1,f=r>>1,o=-7,i=M?e-1:0,p=M?-1:1,d=T[c+i];for(i+=p,a=d&(1<<-o)-1,d>>=-o,o+=t;o>0;a=a*256+T[c+i],i+=p,o-=8);for(n=a&(1<<-o)-1,a>>=-o,o+=A;o>0;n=n*256+T[c+i],i+=p,o-=8);if(a===0)a=1-f;else{if(a===r)return n?NaN:(d?-1:1)*(1/0);n=n+Math.pow(2,A),a=a-f}return(d?-1:1)*n*Math.pow(2,a-A)},ae.write=function(T,c,M,A,e,a){var n,t,r,f=a*8-e-1,o=(1<<f)-1,i=o>>1,p=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=A?0:a-1,y=A?1:-1,v=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(t=isNaN(c)?1:0,n=o):(n=Math.floor(Math.log(c)/Math.LN2),c*(r=Math.pow(2,-n))<1&&(n--,r*=2),n+i>=1?c+=p/r:c+=p*Math.pow(2,1-i),c*r>=2&&(n++,r/=2),n+i>=o?(t=0,n=o):n+i>=1?(t=(c*r-1)*Math.pow(2,e),n=n+i):(t=c*Math.pow(2,i-1)*Math.pow(2,e),n=0));e>=8;T[M+d]=t&255,d+=y,t/=256,e-=8);for(n=n<<e|t,f+=e;f>0;T[M+d]=n&255,d+=y,n/=256,f-=8);T[M+d-y]|=v*128}},{}],231:[function(g,ne,ae){typeof Object.create=="function"?ne.exports=function(c,M){M&&(c.super_=M,c.prototype=Object.create(M.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:ne.exports=function(c,M){if(M){c.super_=M;var A=function(){};A.prototype=M.prototype,c.prototype=new A,c.prototype.constructor=c}}},{}],232:[function(g,ne,ae){ne.exports=!0},{}],233:[function(g,ne,ae){ne.exports=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(g,ne,ae){ne.exports=M,ne.exports.isMobile=M,ne.exports.default=M;var T=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,c=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function M(A){A||(A={});var e=A.ua;if(!e&&typeof navigator!="undefined"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;var a=A.tablet?c.test(e):T.test(e);return!a&&A.tablet&&A.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(a=!0),a}},{}],235:[function(g,ne,ae){ne.exports=function(T){var c=typeof T;return T!==null&&(c==="object"||c==="function")}},{}],236:[function(g,ne,ae){var T=Object.prototype.toString;ne.exports=function(c){var M;return T.call(c)==="[object Object]"&&(M=Object.getPrototypeOf(c),M===null||M===Object.getPrototypeOf({}))}},{}],237:[function(g,ne,ae){ne.exports=function(T){for(var c=T.length,M,A=0;A<c;A++)if(M=T.charCodeAt(A),(M<9||M>13)&&M!==32&&M!==133&&M!==160&&M!==5760&&M!==6158&&(M<8192||M>8205)&&M!==8232&&M!==8233&&M!==8239&&M!==8287&&M!==8288&&M!==12288&&M!==65279)return!1;return!0}},{}],238:[function(g,ne,ae){ne.exports=function(c){return typeof c!="string"?!1:(c=c.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(c)&&/[\dz]$/i.test(c)&&c.length>4))}},{}],239:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?ne.exports=c():(T=T||self,T.mapboxgl=c())})(this,function(){var T,c,M;function A(e,a){if(!T)T=a;else if(!c)c=a;else{var n="var sharedChunk = {}; ("+T+")(sharedChunk); ("+c+")(sharedChunk);",t={};T(t),M=a(t),M.workerUrl=window.URL.createObjectURL(new Blob([n],{type:"text/javascript"}))}}return A(["exports"],function(e){function a(E,C){return C={exports:{}},E(C,C.exports),C.exports}var n="1.10.1",t=r;function r(E,C,O,$){this.cx=3*E,this.bx=3*(O-E)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*C,this.by=3*($-C)-this.cy,this.ay=1-this.cy-this.by,this.p1x=E,this.p1y=$,this.p2x=O,this.p2y=$}r.prototype.sampleCurveX=function(E){return((this.ax*E+this.bx)*E+this.cx)*E},r.prototype.sampleCurveY=function(E){return((this.ay*E+this.by)*E+this.cy)*E},r.prototype.sampleCurveDerivativeX=function(E){return(3*this.ax*E+2*this.bx)*E+this.cx},r.prototype.solveCurveX=function(E,C){typeof C=="undefined"&&(C=1e-6);var O,$,he,me,we;for(he=E,we=0;we<8;we++){if(me=this.sampleCurveX(he)-E,Math.abs(me)<C)return he;var Ie=this.sampleCurveDerivativeX(he);if(Math.abs(Ie)<1e-6)break;he=he-me/Ie}if(O=0,$=1,he=E,he<O)return O;if(he>$)return $;for(;O<$;){if(me=this.sampleCurveX(he),Math.abs(me-E)<C)return he;E>me?O=he:$=he,he=($-O)*.5+O}return he},r.prototype.solve=function(E,C){return this.sampleCurveY(this.solveCurveX(E,C))};var f=o;function o(E,C){this.x=E,this.y=C}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(E){return this.clone()._add(E)},sub:function(E){return this.clone()._sub(E)},multByPoint:function(E){return this.clone()._multByPoint(E)},divByPoint:function(E){return this.clone()._divByPoint(E)},mult:function(E){return this.clone()._mult(E)},div:function(E){return this.clone()._div(E)},rotate:function(E){return this.clone()._rotate(E)},rotateAround:function(E,C){return this.clone()._rotateAround(E,C)},matMult:function(E){return this.clone()._matMult(E)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(E){return this.x===E.x&&this.y===E.y},dist:function(E){return Math.sqrt(this.distSqr(E))},distSqr:function(E){var C=E.x-this.x,O=E.y-this.y;return C*C+O*O},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(E){return Math.atan2(this.y-E.y,this.x-E.x)},angleWith:function(E){return this.angleWithSep(E.x,E.y)},angleWithSep:function(E,C){return Math.atan2(this.x*C-this.y*E,this.x*E+this.y*C)},_matMult:function(E){var C=E[0]*this.x+E[1]*this.y,O=E[2]*this.x+E[3]*this.y;return this.x=C,this.y=O,this},_add:function(E){return this.x+=E.x,this.y+=E.y,this},_sub:function(E){return this.x-=E.x,this.y-=E.y,this},_mult:function(E){return this.x*=E,this.y*=E,this},_div:function(E){return this.x/=E,this.y/=E,this},_multByPoint:function(E){return this.x*=E.x,this.y*=E.y,this},_divByPoint:function(E){return this.x/=E.x,this.y/=E.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var E=this.y;return this.y=this.x,this.x=-E,this},_rotate:function(E){var C=Math.cos(E),O=Math.sin(E),$=C*this.x-O*this.y,he=O*this.x+C*this.y;return this.x=$,this.y=he,this},_rotateAround:function(E,C){var O=Math.cos(E),$=Math.sin(E),he=C.x+O*(this.x-C.x)-$*(this.y-C.y),me=C.y+$*(this.x-C.x)+O*(this.y-C.y);return this.x=he,this.y=me,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(E){return E instanceof o?E:Array.isArray(E)?new o(E[0],E[1]):E};function i(E,C){if(Array.isArray(E)){if(!Array.isArray(C)||E.length!==C.length)return!1;for(var O=0;O<E.length;O++)if(!i(E[O],C[O]))return!1;return!0}if(typeof E=="object"&&E!==null&&C!==null){if(typeof C!="object")return!1;var $=Object.keys(E);if($.length!==Object.keys(C).length)return!1;for(var he in E)if(!i(E[he],C[he]))return!1;return!0}return E===C}function p(E){if(E<=0)return 0;if(E>=1)return 1;var C=E*E,O=C*E;return 4*(E<.5?O:3*(E-C)+O-.75)}function d(E,C,O,$){var he=new t(E,C,O,$);return function(me){return he.solve(me)}}var y=d(.25,.1,.25,1);function v(E,C,O){return Math.min(O,Math.max(C,E))}function x(E,C,O){var $=O-C,he=((E-C)%$+$)%$+C;return he===C?O:he}function l(E,C,O){if(!E.length)return O(null,[]);var $=E.length,he=new Array(E.length),me=null;E.forEach(function(we,Ie){C(we,function($e,ut){$e&&(me=$e),he[Ie]=ut,--$==0&&O(me,he)})})}function _(E){var C=[];for(var O in E)C.push(E[O]);return C}function s(E,C){var O=[];for(var $ in E)$ in C||O.push($);return O}function w(E){for(var C=[],O=arguments.length-1;O-- >0;)C[O]=arguments[O+1];for(var $=0,he=C;$<he.length;$+=1){var me=he[$];for(var we in me)E[we]=me[we]}return E}function b(E,C){for(var O={},$=0;$<C.length;$++){var he=C[$];he in E&&(O[he]=E[he])}return O}var h=1;function m(){return h++}function u(){function E(C){return C?(C^Math.random()*16>>C/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,E)}return E()}function L(E){return E?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(E):!1}function S(E,C){E.forEach(function(O){!C[O]||(C[O]=C[O].bind(C))})}function k(E,C){return E.indexOf(C,E.length-C.length)!==-1}function P(E,C,O){var $={};for(var he in E)$[he]=C.call(O||this,E[he],he,E);return $}function z(E,C,O){var $={};for(var he in E)C.call(O||this,E[he],he,E)&&($[he]=E[he]);return $}function I(E){return Array.isArray(E)?E.map(I):typeof E=="object"&&E?P(E,I):E}function D(E,C){for(var O=0;O<E.length;O++)if(C.indexOf(E[O])>=0)return!0;return!1}var R={};function B(E){R[E]||(typeof console!="undefined"&&console.warn(E),R[E]=!0)}function F(E,C,O){return(O.y-E.y)*(C.x-E.x)>(C.y-E.y)*(O.x-E.x)}function V(E){for(var C=0,O=0,$=E.length,he=$-1,me=void 0,we=void 0;O<$;he=O++)me=E[O],we=E[he],C+=(we.x-me.x)*(me.y+we.y);return C}function Y(E){var C=E[0],O=E[1],$=E[2];return O+=90,O*=Math.PI/180,$*=Math.PI/180,{x:C*Math.cos(O)*Math.sin($),y:C*Math.sin(O)*Math.sin($),z:C*Math.cos($)}}function K(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function J(E){var C=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,O={};if(E.replace(C,function(he,me,we,Ie){var $e=we||Ie;return O[me]=$e?$e.toLowerCase():!0,""}),O["max-age"]){var $=parseInt(O["max-age"],10);isNaN($)?delete O["max-age"]:O["max-age"]=$}return O}var G=null;function Z(E){if(G==null){var C=E.navigator?E.navigator.userAgent:null;G=!!E.safari||!!(C&&(/\b(iPad|iPhone|iPod)\b/.test(C)||!!C.match("Safari")&&!C.match("Chrome")))}return G}function re(E){try{var C=self[E];return C.setItem("_mapbox_test_",1),C.removeItem("_mapbox_test_"),!0}catch{return!1}}function se(E){return self.btoa(encodeURIComponent(E).replace(/%([0-9A-F]{2})/g,function(C,O){return String.fromCharCode(Number("0x"+O))}))}function oe(E){return decodeURIComponent(self.atob(E).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var N=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),U=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,q=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Q,W,X={now:N,frame:function(C){var O=U(C);return{cancel:function(){return q(O)}}},getImageData:function(C,O){O===void 0&&(O=0);var $=self.document.createElement("canvas"),he=$.getContext("2d");if(!he)throw new Error("failed to create canvas 2d context");return $.width=C.width,$.height=C.height,he.drawImage(C,0,0,C.width,C.height),he.getImageData(-O,-O,C.width+2*O,C.height+2*O)},resolveURL:function(C){return Q||(Q=self.document.createElement("a")),Q.href=C,Q.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(W==null&&(W=self.matchMedia("(prefers-reduced-motion: reduce)")),W.matches):!1}},te={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ee={supported:!1,testSupport:pe},ie,le=!1,ye,ue=!1;self.document&&(ye=self.document.createElement("img"),ye.onload=function(){ie&&ge(ie),ie=null,ue=!0},ye.onerror=function(){le=!0,ie=null},ye.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function pe(E){le||!ye||(ue?ge(E):ie=E)}function ge(E){var C=E.createTexture();E.bindTexture(E.TEXTURE_2D,C);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,ye),E.isContextLost())return;ee.supported=!0}catch{}E.deleteTexture(C),le=!0}var Te="01";function _e(){for(var E="1",C="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",O="",$=0;$<10;$++)O+=C[Math.floor(Math.random()*62)];var he=12*60*60*1e3,me=[E,Te,O].join(""),we=Date.now()+he;return{token:me,tokenExpiresAt:we}}var De=function(C,O){this._transformRequestFn=C,this._customAccessToken=O,this._createSkuToken()};De.prototype._createSkuToken=function(){var C=_e();this._skuToken=C.token,this._skuTokenExpiresAt=C.tokenExpiresAt},De.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},De.prototype.transformRequest=function(C,O){return this._transformRequestFn?this._transformRequestFn(C,O)||{url:C}:{url:C}},De.prototype.normalizeStyleURL=function(C,O){if(!Oe(C))return C;var $=Fe(C);return $.path="/styles/v1"+$.path,this._makeAPIURL($,this._customAccessToken||O)},De.prototype.normalizeGlyphsURL=function(C,O){if(!Oe(C))return C;var $=Fe(C);return $.path="/fonts/v1"+$.path,this._makeAPIURL($,this._customAccessToken||O)},De.prototype.normalizeSourceURL=function(C,O){if(!Oe(C))return C;var $=Fe(C);return $.path="/v4/"+$.authority+".json",$.params.push("secure"),this._makeAPIURL($,this._customAccessToken||O)},De.prototype.normalizeSpriteURL=function(C,O,$,he){var me=Fe(C);return Oe(C)?(me.path="/styles/v1"+me.path+"/sprite"+O+$,this._makeAPIURL(me,this._customAccessToken||he)):(me.path+=""+O+$,Le(me))},De.prototype.normalizeTileURL=function(C,O){if(this._isSkuTokenExpired()&&this._createSkuToken(),C&&!Oe(C))return C;var $=Fe(C),he=/(\.(png|jpg)\d*)(?=$)/,me=/^.+\/v4\//,we=X.devicePixelRatio>=2||O===512?"@2x":"",Ie=ee.supported?".webp":"$1";$.path=$.path.replace(he,""+we+Ie),$.path=$.path.replace(me,"/"),$.path="/v4"+$.path;var $e=this._customAccessToken||Ve($.params)||te.ACCESS_TOKEN;return te.REQUIRE_ACCESS_TOKEN&&$e&&this._skuToken&&$.params.push("sku="+this._skuToken),this._makeAPIURL($,$e)},De.prototype.canonicalizeTileURL=function(C,O){var $="/v4/",he=/\.[\w]+$/,me=Fe(C);if(!me.path.match(/(^\/v4\/)/)||!me.path.match(he))return C;var we="mapbox://tiles/";we+=me.path.replace($,"");var Ie=me.params;return O&&(Ie=Ie.filter(function($e){return!$e.match(/^access_token=/)})),Ie.length&&(we+="?"+Ie.join("&")),we},De.prototype.canonicalizeTileset=function(C,O){for(var $=O?Oe(O):!1,he=[],me=0,we=C.tiles||[];me<we.length;me+=1){var Ie=we[me];xe(Ie)?he.push(this.canonicalizeTileURL(Ie,$)):he.push(Ie)}return he},De.prototype._makeAPIURL=function(C,O){var $="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",he=Fe(te.API_URL);if(C.protocol=he.protocol,C.authority=he.authority,he.path!=="/"&&(C.path=""+he.path+C.path),!te.REQUIRE_ACCESS_TOKEN)return Le(C);if(O=O||te.ACCESS_TOKEN,!O)throw new Error("An API access token is required to use Mapbox GL. "+$);if(O[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+$);return C.params=C.params.filter(function(me){return me.indexOf("access_token")===-1}),C.params.push("access_token="+O),Le(C)};function Oe(E){return E.indexOf("mapbox:")===0}var Ue=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function xe(E){return Ue.test(E)}function Pe(E){return E.indexOf("sku=")>0&&xe(E)}function Ve(E){for(var C=0,O=E;C<O.length;C+=1){var $=O[C],he=$.match(/^access_token=(.*)$/);if(he)return he[1]}return null}var Qe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Fe(E){var C=E.match(Qe);if(!C)throw new Error("Unable to parse URL object");return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}function Le(E){var C=E.params.length?"?"+E.params.join("&"):"";return E.protocol+"://"+E.authority+E.path+C}var Ne="mapbox.eventData";function dt(E){if(!E)return null;var C=E.split(".");if(!C||C.length!==3)return null;try{var O=JSON.parse(oe(C[1]));return O}catch{return null}}var Dt=function(C){this.type=C,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Dt.prototype.getStorageKey=function(C){var O=dt(te.ACCESS_TOKEN),$="";return O&&O.u?$=se(O.u):$=te.ACCESS_TOKEN||"",C?Ne+"."+C+":"+$:Ne+":"+$},Dt.prototype.fetchEventData=function(){var C=re("localStorage"),O=this.getStorageKey(),$=this.getStorageKey("uuid");if(C)try{var he=self.localStorage.getItem(O);he&&(this.eventData=JSON.parse(he));var me=self.localStorage.getItem($);me&&(this.anonId=me)}catch{B("Unable to read from LocalStorage")}},Dt.prototype.saveEventData=function(){var C=re("localStorage"),O=this.getStorageKey(),$=this.getStorageKey("uuid");if(C)try{self.localStorage.setItem($,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(O,JSON.stringify(this.eventData))}catch{B("Unable to write to LocalStorage")}},Dt.prototype.processRequests=function(C){},Dt.prototype.postEvent=function(C,O,$,he){var me=this;if(!!te.EVENTS_URL){var we=Fe(te.EVENTS_URL);we.params.push("access_token="+(he||te.ACCESS_TOKEN||""));var Ie={event:this.type,created:new Date(C).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:Te,userId:this.anonId},$e=O?w(Ie,O):Ie,ut={url:Le(we),headers:{"Content-Type":"text/plain"},body:JSON.stringify([$e])};this.pendingRequest=Me(ut,function(gt){me.pendingRequest=null,$(gt),me.saveEventData(),me.processRequests(he)})}},Dt.prototype.queueRequest=function(C,O){this.queue.push(C),this.processRequests(O)};var Xt=function(E){function C(){E.call(this,"map.load"),this.success={},this.skuToken=""}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.postMapLoadEvent=function($,he,me,we){this.skuToken=me,(te.EVENTS_URL&&we||te.ACCESS_TOKEN&&Array.isArray($)&&$.some(function(Ie){return Oe(Ie)||xe(Ie)}))&&this.queueRequest({id:he,timestamp:Date.now()},we)},C.prototype.processRequests=function($){var he=this;if(!(this.pendingRequest||this.queue.length===0)){var me=this.queue.shift(),we=me.id,Ie=me.timestamp;we&&this.success[we]||(this.anonId||this.fetchEventData(),L(this.anonId)||(this.anonId=u()),this.postEvent(Ie,{skuToken:this.skuToken},function($e){$e||we&&(he.success[we]=!0)},$))}},C}(Dt),Tt=function(E){function C(O){E.call(this,"appUserTurnstile"),this._customAccessToken=O}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.postTurnstileEvent=function($,he){te.EVENTS_URL&&te.ACCESS_TOKEN&&Array.isArray($)&&$.some(function(me){return Oe(me)||xe(me)})&&this.queueRequest(Date.now(),he)},C.prototype.processRequests=function($){var he=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var me=dt(te.ACCESS_TOKEN),we=me?me.u:te.ACCESS_TOKEN,Ie=we!==this.eventData.tokenU;L(this.anonId)||(this.anonId=u(),Ie=!0);var $e=this.queue.shift();if(this.eventData.lastSuccess){var ut=new Date(this.eventData.lastSuccess),gt=new Date($e),Rt=($e-this.eventData.lastSuccess)/(24*60*60*1e3);Ie=Ie||Rt>=1||Rt<-1||ut.getDate()!==gt.getDate()}else Ie=!0;if(!Ie)return this.processRequests();this.postEvent($e,{"enabled.telemetry":!1},function($t){$t||(he.eventData.lastSuccess=$e,he.eventData.tokenU=we)},$)}},C}(Dt),zt=new Tt,Ut=zt.postTurnstileEvent.bind(zt),Et=new Xt,Mt=Et.postMapLoadEvent.bind(Et),rt="mapbox-tiles",ct=500,Ze=50,ke=1e3*60*7,Ge;function Je(){self.caches&&!Ge&&(Ge=self.caches.open(rt))}var it;function Pt(E,C){if(it===void 0)try{new Response(new ReadableStream),it=!0}catch{it=!1}it?C(E.body):E.blob().then(C)}function At(E,C,O){if(Je(),!!Ge){var $={status:C.status,statusText:C.statusText,headers:new self.Headers};C.headers.forEach(function(we,Ie){return $.headers.set(Ie,we)});var he=J(C.headers.get("Cache-Control")||"");if(!he["no-store"]){he["max-age"]&&$.headers.set("Expires",new Date(O+he["max-age"]*1e3).toUTCString());var me=new Date($.headers.get("Expires")).getTime()-O;me<ke||Pt(C,function(we){var Ie=new self.Response(we,$);Je(),!!Ge&&Ge.then(function($e){return $e.put(Ot(E.url),Ie)}).catch(function($e){return B($e.message)})})}}}function Ot(E){var C=E.indexOf("?");return C<0?E:E.slice(0,C)}function Jt(E,C){if(Je(),!Ge)return C(null);var O=Ot(E.url);Ge.then(function($){$.match(O).then(function(he){var me=Bt(he);$.delete(O),me&&$.put(O,he.clone()),C(null,he,me)}).catch(C)}).catch(C)}function Bt(E){if(!E)return!1;var C=new Date(E.headers.get("Expires")||0),O=J(E.headers.get("Cache-Control")||"");return C>Date.now()&&!O["no-cache"]}var qt=1/0;function rr(E){qt++,qt>Ze&&(E.getActor().send("enforceCacheSizeLimit",ct),qt=0)}function er(E){Je(),!!Ge&&Ge.then(function(C){C.keys().then(function(O){for(var $=0;$<O.length-E;$++)C.delete(O[$])})})}function pr(E){var C=self.caches.delete(rt);E&&C.catch(E).then(function(){return E()})}function Xr(E,C){ct=E,Ze=C}var hn;function $r(){return hn==null&&(hn=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),hn}var nt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(nt);var Gt=function(E){function C(O,$,he){$===401&&xe(he)&&(O+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),E.call(this,O),this.status=$,this.url=he,this.name=this.constructor.name,this.message=O}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},C}(Error),Kt=K()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},Ht=function(E){return/^file:/.test(E)||/^file:/.test(Kt())&&!/^\w+:/.test(E)};function _r(E,C){var O=new self.AbortController,$=new self.Request(E.url,{method:E.method||"GET",body:E.body,credentials:E.credentials,headers:E.headers,referrer:Kt(),signal:O.signal}),he=!1,me=!1,we=Pe($.url);E.type==="json"&&$.headers.set("Accept","application/json");var Ie=function(ut,gt,Rt){if(!me){if(ut&&ut.message!=="SecurityError"&&B(ut),gt&&Rt)return $e(gt);var $t=Date.now();self.fetch($).then(function(Wt){if(Wt.ok){var vr=we?Wt.clone():null;return $e(Wt,vr,$t)}else return C(new Gt(Wt.statusText,Wt.status,E.url))}).catch(function(Wt){Wt.code!==20&&C(new Error(Wt.message))})}},$e=function(ut,gt,Rt){(E.type==="arrayBuffer"?ut.arrayBuffer():E.type==="json"?ut.json():ut.text()).then(function($t){me||(gt&&Rt&&At($,gt,Rt),he=!0,C(null,$t,ut.headers.get("Cache-Control"),ut.headers.get("Expires")))}).catch(function($t){me||C(new Error($t.message))})};return we?Jt($,Ie):Ie(null,null),{cancel:function(){me=!0,he||O.abort()}}}function tt(E,C){var O=new self.XMLHttpRequest;O.open(E.method||"GET",E.url,!0),E.type==="arrayBuffer"&&(O.responseType="arraybuffer");for(var $ in E.headers)O.setRequestHeader($,E.headers[$]);return E.type==="json"&&(O.responseType="text",O.setRequestHeader("Accept","application/json")),O.withCredentials=E.credentials==="include",O.onerror=function(){C(new Error(O.statusText))},O.onload=function(){if((O.status>=200&&O.status<300||O.status===0)&&O.response!==null){var he=O.response;if(E.type==="json")try{he=JSON.parse(O.response)}catch(me){return C(me)}C(null,he,O.getResponseHeader("Cache-Control"),O.getResponseHeader("Expires"))}else C(new Gt(O.statusText,O.status,E.url))},O.send(E.body),{cancel:function(){return O.abort()}}}var je=function(E,C){if(!Ht(E.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return _r(E,C);if(K()&&self.worker&&self.worker.actor){var O=!0;return self.worker.actor.send("getResource",E,C,void 0,O)}}return tt(E,C)},st=function(E,C){return je(w(E,{type:"json"}),C)},ft=function(E,C){return je(w(E,{type:"arrayBuffer"}),C)},Me=function(E,C){return je(w(E,{method:"POST"}),C)};function Se(E){var C=self.document.createElement("a");return C.href=E,C.protocol===self.document.location.protocol&&C.host===self.document.location.host}var Ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Xe(E,C,O,$){var he=new self.Image,me=self.URL;he.onload=function(){C(null,he),me.revokeObjectURL(he.src)},he.onerror=function(){return C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var we=new self.Blob([new Uint8Array(E)],{type:"image/png"});he.cacheControl=O,he.expires=$,he.src=E.byteLength?me.createObjectURL(we):Ke}function ot(E,C){var O=new self.Blob([new Uint8Array(E)],{type:"image/png"});self.createImageBitmap(O).then(function($){C(null,$)}).catch(function($){C(new Error("Could not load image because of "+$.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var pt,vt,Ct=function(){pt=[],vt=0};Ct();var St=function(E,C){if(ee.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),vt>=te.MAX_PARALLEL_IMAGE_REQUESTS){var O={requestParameters:E,callback:C,cancelled:!1,cancel:function(){this.cancelled=!0}};return pt.push(O),O}vt++;var $=!1,he=function(){if(!$)for($=!0,vt--;pt.length&&vt<te.MAX_PARALLEL_IMAGE_REQUESTS;){var we=pt.shift(),Ie=we.requestParameters,$e=we.callback,ut=we.cancelled;ut||(we.cancel=St(Ie,$e).cancel)}},me=ft(E,function(we,Ie,$e,ut){he(),we?C(we):Ie&&($r()?ot(Ie,C):Xe(Ie,C,$e,ut))});return{cancel:function(){me.cancel(),he()}}},Nt=function(E,C){var O=self.document.createElement("video");O.muted=!0,O.onloadstart=function(){C(null,O)};for(var $=0;$<E.length;$++){var he=self.document.createElement("source");Se(E[$])||(O.crossOrigin="Anonymous"),he.src=E[$],O.appendChild(he)}return{cancel:function(){}}};function ir(E,C,O){var $=O[E]&&O[E].indexOf(C)!==-1;$||(O[E]=O[E]||[],O[E].push(C))}function lr(E,C,O){if(O&&O[E]){var $=O[E].indexOf(C);$!==-1&&O[E].splice($,1)}}var Yr=function(C,O){O===void 0&&(O={}),w(this,O),this.type=C},Pr=function(E){function C(O,$){$===void 0&&($={}),E.call(this,"error",w({error:O},$))}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Yr),wr=function(){};wr.prototype.on=function(C,O){return this._listeners=this._listeners||{},ir(C,O,this._listeners),this},wr.prototype.off=function(C,O){return lr(C,O,this._listeners),lr(C,O,this._oneTimeListeners),this},wr.prototype.once=function(C,O){return this._oneTimeListeners=this._oneTimeListeners||{},ir(C,O,this._oneTimeListeners),this},wr.prototype.fire=function(C,O){typeof C=="string"&&(C=new Yr(C,O||{}));var $=C.type;if(this.listens($)){C.target=this;for(var he=this._listeners&&this._listeners[$]?this._listeners[$].slice():[],me=0,we=he;me<we.length;me+=1){var Ie=we[me];Ie.call(this,C)}for(var $e=this._oneTimeListeners&&this._oneTimeListeners[$]?this._oneTimeListeners[$].slice():[],ut=0,gt=$e;ut<gt.length;ut+=1){var Rt=gt[ut];lr($,Rt,this._oneTimeListeners),Rt.call(this,C)}var $t=this._eventedParent;$t&&(w(C,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),$t.fire(C))}else C instanceof Pr&&console.error(C.error);return this},wr.prototype.listens=function(C){return this._listeners&&this._listeners[C]&&this._listeners[C].length>0||this._oneTimeListeners&&this._oneTimeListeners[C]&&this._oneTimeListeners[C].length>0||this._eventedParent&&this._eventedParent.listens(C)},wr.prototype.setEventedParent=function(C,O){return this._eventedParent=C,this._eventedParentData=O,this};var Jr=8,gr={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},mr={"*":{type:"source"}},Ur=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Hr={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},Tr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},et={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Lt={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},jt={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},sr={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Ir={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Zr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Lr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},br={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Nr={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},_n={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wn={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ln={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Xn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Kn={type:"array",value:"*"},Aa={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},Ta={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},oi={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},$a={type:"array",value:"*",minimum:1},Va={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},ti={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Mr=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],vn={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},fn={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},An={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Gn={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ia={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Yn={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},zn={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ea={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},wa={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},si={"*":{type:"string"}},Ft={$version:Jr,$root:gr,sources:mr,source:Ur,source_vector:Hr,source_raster:Tr,source_raster_dem:et,source_geojson:Lt,source_video:jt,source_image:sr,layer:Ir,layout:Zr,layout_background:Lr,layout_fill:br,layout_circle:Nr,layout_heatmap:kn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:_n,layout_symbol:Wn,layout_raster:Ln,layout_hillshade:Xn,filter:Kn,filter_operator:Aa,geometry_type:Ta,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:oi,expression:$a,expression_name:Va,light:ti,paint:Mr,paint_fill:vn,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:fn,paint_circle:An,paint_heatmap:Gn,paint_symbol:ia,paint_raster:Yn,paint_hillshade:zn,paint_background:ea,transition:wa,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:si},cr=function(C,O,$,he){this.message=(C?C+": ":"")+$,he&&(this.identifier=he),O!=null&&O.__line__&&(this.line=O.__line__)};function qr(E){var C=E.key,O=E.value;return O?[new cr(C,O,"constants have been deprecated as of v8")]:[]}function nn(E){for(var C=[],O=arguments.length-1;O-- >0;)C[O]=arguments[O+1];for(var $=0,he=C;$<he.length;$+=1){var me=he[$];for(var we in me)E[we]=me[we]}return E}function on(E){return E instanceof Number||E instanceof String||E instanceof Boolean?E.valueOf():E}function Sn(E){if(Array.isArray(E))return E.map(Sn);if(E instanceof Object&&!(E instanceof Number||E instanceof String||E instanceof Boolean)){var C={};for(var O in E)C[O]=Sn(E[O]);return C}return on(E)}var xn=function(E){function C(O,$){E.call(this,$),this.message=$,this.key=O}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Error),tn=function(C,O){O===void 0&&(O=[]),this.parent=C,this.bindings={};for(var $=0,he=O;$<he.length;$+=1){var me=he[$],we=me[0],Ie=me[1];this.bindings[we]=Ie}};tn.prototype.concat=function(C){return new tn(this,C)},tn.prototype.get=function(C){if(this.bindings[C])return this.bindings[C];if(this.parent)return this.parent.get(C);throw new Error(C+" not found in scope.")},tn.prototype.has=function(C){return this.bindings[C]?!0:this.parent?this.parent.has(C):!1};var xr={kind:"null"},dr={kind:"number"},Rr={kind:"string"},dn={kind:"boolean"},Bn={kind:"color"},aa={kind:"object"},bn={kind:"value"},Zn={kind:"error"},ta={kind:"collator"},pa={kind:"formatted"},ya={kind:"resolvedImage"};function la(E,C){return{kind:"array",itemType:E,N:C}}function Da(E){if(E.kind==="array"){var C=Da(E.itemType);return typeof E.N=="number"?"array<"+C+", "+E.N+">":E.itemType.kind==="value"?"array":"array<"+C+">"}else return E.kind}var oo=[xr,dr,Rr,dn,Bn,pa,aa,la(bn),ya];function Vo(E,C){if(C.kind==="error")return null;if(E.kind==="array"){if(C.kind==="array"&&(C.N===0&&C.itemType.kind==="value"||!Vo(E.itemType,C.itemType))&&(typeof E.N!="number"||E.N===C.N))return null}else{if(E.kind===C.kind)return null;if(E.kind==="value")for(var O=0,$=oo;O<$.length;O+=1){var he=$[O];if(!Vo(he,C))return null}}return"Expected "+Da(E)+" but found "+Da(C)+" instead."}function Zo(E,C){return C.some(function(O){return O.kind===E.kind})}function tl(E,C){return C.some(function(O){return O==="null"?E===null:O==="array"?Array.isArray(E):O==="object"?E&&!Array.isArray(E)&&typeof E=="object":O===typeof E})}var hl=a(function(E,C){var O={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function $(ut){return ut=Math.round(ut),ut<0?0:ut>255?255:ut}function he(ut){return ut<0?0:ut>1?1:ut}function me(ut){return ut[ut.length-1]==="%"?$(parseFloat(ut)/100*255):$(parseInt(ut))}function we(ut){return ut[ut.length-1]==="%"?he(parseFloat(ut)/100):he(parseFloat(ut))}function Ie(ut,gt,Rt){return Rt<0?Rt+=1:Rt>1&&(Rt-=1),Rt*6<1?ut+(gt-ut)*Rt*6:Rt*2<1?gt:Rt*3<2?ut+(gt-ut)*(2/3-Rt)*6:ut}function $e(ut){var gt=ut.replace(/ /g,"").toLowerCase();if(gt in O)return O[gt].slice();if(gt[0]==="#"){if(gt.length===4){var Rt=parseInt(gt.substr(1),16);return Rt>=0&&Rt<=4095?[(Rt&3840)>>4|(Rt&3840)>>8,Rt&240|(Rt&240)>>4,Rt&15|(Rt&15)<<4,1]:null}else if(gt.length===7){var Rt=parseInt(gt.substr(1),16);return Rt>=0&&Rt<=16777215?[(Rt&16711680)>>16,(Rt&65280)>>8,Rt&255,1]:null}return null}var $t=gt.indexOf("("),Wt=gt.indexOf(")");if($t!==-1&&Wt+1===gt.length){var vr=gt.substr(0,$t),Dr=gt.substr($t+1,Wt-($t+1)).split(","),sn=1;switch(vr){case"rgba":if(Dr.length!==4)return null;sn=we(Dr.pop());case"rgb":return Dr.length!==3?null:[me(Dr[0]),me(Dr[1]),me(Dr[2]),sn];case"hsla":if(Dr.length!==4)return null;sn=we(Dr.pop());case"hsl":if(Dr.length!==3)return null;var Qr=(parseFloat(Dr[0])%360+360)%360/360,Mn=we(Dr[1]),yn=we(Dr[2]),Tn=yn<=.5?yn*(Mn+1):yn+Mn-yn*Mn,Rn=yn*2-Tn;return[$(Ie(Rn,Tn,Qr+1/3)*255),$(Ie(Rn,Tn,Qr)*255),$(Ie(Rn,Tn,Qr-1/3)*255),sn];default:return null}}return null}try{C.parseCSSColor=$e}catch{}}),Hl=hl.parseCSSColor,vi=function(C,O,$,he){he===void 0&&(he=1),this.r=C,this.g=O,this.b=$,this.a=he};vi.parse=function(C){if(!!C){if(C instanceof vi)return C;if(typeof C=="string"){var O=Hl(C);if(!!O)return new vi(O[0]/255*O[3],O[1]/255*O[3],O[2]/255*O[3],O[3])}}},vi.prototype.toString=function(){var C=this.toArray(),O=C[0],$=C[1],he=C[2],me=C[3];return"rgba("+Math.round(O)+","+Math.round($)+","+Math.round(he)+","+me+")"},vi.prototype.toArray=function(){var C=this,O=C.r,$=C.g,he=C.b,me=C.a;return me===0?[0,0,0,0]:[O*255/me,$*255/me,he*255/me,me]},vi.black=new vi(0,0,0,1),vi.white=new vi(1,1,1,1),vi.transparent=new vi(0,0,0,0),vi.red=new vi(1,0,0,1);var Vs=function(C,O,$){C?this.sensitivity=O?"variant":"case":this.sensitivity=O?"accent":"base",this.locale=$,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Vs.prototype.compare=function(C,O){return this.collator.compare(C,O)},Vs.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ps=function(C,O,$,he,me){this.text=C,this.image=O,this.scale=$,this.fontStack=he,this.textColor=me},Ui=function(C){this.sections=C};Ui.fromString=function(C){return new Ui([new Ps(C,null,null,null,null)])},Ui.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(C){return C.text.length!==0||C.image&&C.image.name.length!==0})},Ui.factory=function(C){return C instanceof Ui?C:Ui.fromString(C)},Ui.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(C){return C.text}).join("")},Ui.prototype.serialize=function(){for(var C=["format"],O=0,$=this.sections;O<$.length;O+=1){var he=$[O];if(he.image){C.push(["image",he.image.name]);continue}C.push(he.text);var me={};he.fontStack&&(me["text-font"]=["literal",he.fontStack.split(",")]),he.scale&&(me["font-scale"]=he.scale),he.textColor&&(me["text-color"]=["rgba"].concat(he.textColor.toArray())),C.push(me)}return C};var Ao=function(C){this.name=C.name,this.available=C.available};Ao.prototype.toString=function(){return this.name},Ao.fromString=function(C){return C?new Ao({name:C,available:!1}):null},Ao.prototype.serialize=function(){return["image",this.name]};function vl(E,C,O,$){if(!(typeof E=="number"&&E>=0&&E<=255&&typeof C=="number"&&C>=0&&C<=255&&typeof O=="number"&&O>=0&&O<=255)){var he=typeof $=="number"?[E,C,O,$]:[E,C,O];return"Invalid rgba value ["+he.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof $=="undefined"||typeof $=="number"&&$>=0&&$<=1?null:"Invalid rgba value ["+[E,C,O,$].join(", ")+"]: 'a' must be between 0 and 1."}function hs(E){if(E===null)return!0;if(typeof E=="string")return!0;if(typeof E=="boolean")return!0;if(typeof E=="number")return!0;if(E instanceof vi)return!0;if(E instanceof Vs)return!0;if(E instanceof Ui)return!0;if(E instanceof Ao)return!0;if(Array.isArray(E)){for(var C=0,O=E;C<O.length;C+=1){var $=O[C];if(!hs($))return!1}return!0}else if(typeof E=="object"){for(var he in E)if(!hs(E[he]))return!1;return!0}else return!1}function Di(E){if(E===null)return xr;if(typeof E=="string")return Rr;if(typeof E=="boolean")return dn;if(typeof E=="number")return dr;if(E instanceof vi)return Bn;if(E instanceof Vs)return ta;if(E instanceof Ui)return pa;if(E instanceof Ao)return ya;if(Array.isArray(E)){for(var C=E.length,O,$=0,he=E;$<he.length;$+=1){var me=he[$],we=Di(me);if(!O)O=we;else{if(O===we)continue;O=bn;break}}return la(O||bn,C)}else return aa}function rl(E){var C=typeof E;return E===null?"":C==="string"||C==="number"||C==="boolean"?String(E):E instanceof vi||E instanceof Ui||E instanceof Ao?E.toString():JSON.stringify(E)}var Ki=function(C,O){this.type=C,this.value=O};Ki.parse=function(C,O){if(C.length!==2)return O.error("'literal' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(!hs(C[1]))return O.error("invalid value");var $=C[1],he=Di($),me=O.expectedType;return he.kind==="array"&&he.N===0&&me&&me.kind==="array"&&(typeof me.N!="number"||me.N===0)&&(he=me),new Ki(he,$)},Ki.prototype.evaluate=function(){return this.value},Ki.prototype.eachChild=function(){},Ki.prototype.outputDefined=function(){return!0},Ki.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof vi?["rgba"].concat(this.value.toArray()):this.value instanceof Ui?this.value.serialize():this.value};var Fi=function(C){this.name="ExpressionEvaluationError",this.message=C};Fi.prototype.toJSON=function(){return this.message};var no={string:Rr,number:dr,boolean:dn,object:aa},Ji=function(C,O){this.type=C,this.args=O};Ji.parse=function(C,O){if(C.length<2)return O.error("Expected at least one argument.");var $=1,he,me=C[0];if(me==="array"){var we;if(C.length>2){var Ie=C[1];if(typeof Ie!="string"||!(Ie in no)||Ie==="object")return O.error('The item type argument of "array" must be one of string, number, boolean',1);we=no[Ie],$++}else we=bn;var $e;if(C.length>3){if(C[2]!==null&&(typeof C[2]!="number"||C[2]<0||C[2]!==Math.floor(C[2])))return O.error('The length argument to "array" must be a positive integer literal',2);$e=C[2],$++}he=la(we,$e)}else he=no[me];for(var ut=[];$<C.length;$++){var gt=O.parse(C[$],$,bn);if(!gt)return null;ut.push(gt)}return new Ji(he,ut)},Ji.prototype.evaluate=function(C){for(var O=0;O<this.args.length;O++){var $=this.args[O].evaluate(C),he=Vo(this.type,Di($));if(he){if(O===this.args.length-1)throw new Fi("Expected value to be of type "+Da(this.type)+", but found "+Da(Di($))+" instead.")}else return $}return null},Ji.prototype.eachChild=function(C){this.args.forEach(C)},Ji.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Ji.prototype.serialize=function(){var C=this.type,O=[C.kind];if(C.kind==="array"){var $=C.itemType;if($.kind==="string"||$.kind==="number"||$.kind==="boolean"){O.push($.kind);var he=C.N;(typeof he=="number"||this.args.length>1)&&O.push(he)}}return O.concat(this.args.map(function(me){return me.serialize()}))};var es=function(C){this.type=pa,this.sections=C};es.parse=function(C,O){if(C.length<2)return O.error("Expected at least one argument.");var $=C[1];if(!Array.isArray($)&&typeof $=="object")return O.error("First argument must be an image or text section.");for(var he=[],me=!1,we=1;we<=C.length-1;++we){var Ie=C[we];if(me&&typeof Ie=="object"&&!Array.isArray(Ie)){me=!1;var $e=null;if(Ie["font-scale"]&&($e=O.parse(Ie["font-scale"],1,dr),!$e))return null;var ut=null;if(Ie["text-font"]&&(ut=O.parse(Ie["text-font"],1,la(Rr)),!ut))return null;var gt=null;if(Ie["text-color"]&&(gt=O.parse(Ie["text-color"],1,Bn),!gt))return null;var Rt=he[he.length-1];Rt.scale=$e,Rt.font=ut,Rt.textColor=gt}else{var $t=O.parse(C[we],1,bn);if(!$t)return null;var Wt=$t.type.kind;if(Wt!=="string"&&Wt!=="value"&&Wt!=="null"&&Wt!=="resolvedImage")return O.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");me=!0,he.push({content:$t,scale:null,font:null,textColor:null})}}return new es(he)},es.prototype.evaluate=function(C){var O=function($){var he=$.content.evaluate(C);return Di(he)===ya?new Ps("",he,null,null,null):new Ps(rl(he),null,$.scale?$.scale.evaluate(C):null,$.font?$.font.evaluate(C).join(","):null,$.textColor?$.textColor.evaluate(C):null)};return new Ui(this.sections.map(O))},es.prototype.eachChild=function(C){for(var O=0,$=this.sections;O<$.length;O+=1){var he=$[O];C(he.content),he.scale&&C(he.scale),he.font&&C(he.font),he.textColor&&C(he.textColor)}},es.prototype.outputDefined=function(){return!1},es.prototype.serialize=function(){for(var C=["format"],O=0,$=this.sections;O<$.length;O+=1){var he=$[O];C.push(he.content.serialize());var me={};he.scale&&(me["font-scale"]=he.scale.serialize()),he.font&&(me["text-font"]=he.font.serialize()),he.textColor&&(me["text-color"]=he.textColor.serialize()),C.push(me)}return C};var Hs=function(C){this.type=ya,this.input=C};Hs.parse=function(C,O){if(C.length!==2)return O.error("Expected two arguments.");var $=O.parse(C[1],1,Rr);return $?new Hs($):O.error("No image name provided.")},Hs.prototype.evaluate=function(C){var O=this.input.evaluate(C),$=Ao.fromString(O);return $&&C.availableImages&&($.available=C.availableImages.indexOf(O)>-1),$},Hs.prototype.eachChild=function(C){C(this.input)},Hs.prototype.outputDefined=function(){return!1},Hs.prototype.serialize=function(){return["image",this.input.serialize()]};var ru={"to-boolean":dn,"to-color":Bn,"to-number":dr,"to-string":Rr},jo=function(C,O){this.type=C,this.args=O};jo.parse=function(C,O){if(C.length<2)return O.error("Expected at least one argument.");var $=C[0];if(($==="to-boolean"||$==="to-string")&&C.length!==2)return O.error("Expected one argument.");for(var he=ru[$],me=[],we=1;we<C.length;we++){var Ie=O.parse(C[we],we,bn);if(!Ie)return null;me.push(Ie)}return new jo(he,me)},jo.prototype.evaluate=function(C){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(C));if(this.type.kind==="color"){for(var O,$,he=0,me=this.args;he<me.length;he+=1){var we=me[he];if(O=we.evaluate(C),$=null,O instanceof vi)return O;if(typeof O=="string"){var Ie=C.parseColor(O);if(Ie)return Ie}else if(Array.isArray(O)&&(O.length<3||O.length>4?$="Invalid rbga value "+JSON.stringify(O)+": expected an array containing either three or four numeric values.":$=vl(O[0],O[1],O[2],O[3]),!$))return new vi(O[0]/255,O[1]/255,O[2]/255,O[3])}throw new Fi($||"Could not parse color from value '"+(typeof O=="string"?O:String(JSON.stringify(O)))+"'")}else if(this.type.kind==="number"){for(var $e=null,ut=0,gt=this.args;ut<gt.length;ut+=1){var Rt=gt[ut];if($e=Rt.evaluate(C),$e===null)return 0;var $t=Number($e);if(!isNaN($t))return $t}throw new Fi("Could not convert "+JSON.stringify($e)+" to number.")}else return this.type.kind==="formatted"?Ui.fromString(rl(this.args[0].evaluate(C))):this.type.kind==="resolvedImage"?Ao.fromString(rl(this.args[0].evaluate(C))):rl(this.args[0].evaluate(C))},jo.prototype.eachChild=function(C){this.args.forEach(C)},jo.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},jo.prototype.serialize=function(){if(this.type.kind==="formatted")return new es([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Hs(this.args[0]).serialize();var C=["to-"+this.type.kind];return this.eachChild(function(O){C.push(O.serialize())}),C};var nu=["Unknown","Point","LineString","Polygon"],Ds=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Ds.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ds.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?nu[this.feature.type]:this.feature.type:null},Ds.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ds.prototype.canonicalID=function(){return this.canonical},Ds.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ds.prototype.parseColor=function(C){var O=this._parseColorCache[C];return O||(O=this._parseColorCache[C]=vi.parse(C)),O};var Mo=function(C,O,$,he){this.name=C,this.type=O,this._evaluate=$,this.args=he};Mo.prototype.evaluate=function(C){return this._evaluate(C,this.args)},Mo.prototype.eachChild=function(C){this.args.forEach(C)},Mo.prototype.outputDefined=function(){return!1},Mo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(C){return C.serialize()}))},Mo.parse=function(C,O){var $,he=C[0],me=Mo.definitions[he];if(!me)return O.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0);for(var we=Array.isArray(me)?me[0]:me.type,Ie=Array.isArray(me)?[[me[1],me[2]]]:me.overloads,$e=Ie.filter(function(La){var Ra=La[0];return!Array.isArray(Ra)||Ra.length===C.length-1}),ut=null,gt=0,Rt=$e;gt<Rt.length;gt+=1){var $t=Rt[gt],Wt=$t[0],vr=$t[1];ut=new So(O.registry,O.path,null,O.scope);for(var Dr=[],sn=!1,Qr=1;Qr<C.length;Qr++){var Mn=C[Qr],yn=Array.isArray(Wt)?Wt[Qr-1]:Wt.type,Tn=ut.parse(Mn,1+Dr.length,yn);if(!Tn){sn=!0;break}Dr.push(Tn)}if(!sn){if(Array.isArray(Wt)&&Wt.length!==Dr.length){ut.error("Expected "+Wt.length+" arguments, but found "+Dr.length+" instead.");continue}for(var Rn=0;Rn<Dr.length;Rn++){var Vn=Array.isArray(Wt)?Wt[Rn]:Wt.type,sa=Dr[Rn];ut.concat(Rn+1).checkSubtype(Vn,sa.type)}if(ut.errors.length===0)return new Mo(he,we,vr,Dr)}}if($e.length===1)($=O.errors).push.apply($,ut.errors);else{for(var na=$e.length?$e:Ie,Ia=na.map(function(La){var Ra=La[0];return Tu(Ra)}).join(" | "),_a=[],Sa=1;Sa<C.length;Sa++){var ei=O.parse(C[Sa],1+_a.length);if(!ei)return null;_a.push(Da(ei.type))}O.error("Expected arguments of type "+Ia+", but found ("+_a.join(", ")+") instead.")}return null},Mo.register=function(C,O){Mo.definitions=O;for(var $ in O)C[$]=Mo};function Tu(E){return Array.isArray(E)?"("+E.map(Da).join(", ")+")":"("+Da(E.type)+"...)"}var Rs=function(C,O,$){this.type=ta,this.locale=$,this.caseSensitive=C,this.diacriticSensitive=O};Rs.parse=function(C,O){if(C.length!==2)return O.error("Expected one argument.");var $=C[1];if(typeof $!="object"||Array.isArray($))return O.error("Collator options argument must be an object.");var he=O.parse($["case-sensitive"]===void 0?!1:$["case-sensitive"],1,dn);if(!he)return null;var me=O.parse($["diacritic-sensitive"]===void 0?!1:$["diacritic-sensitive"],1,dn);if(!me)return null;var we=null;return $.locale&&(we=O.parse($.locale,1,Rr),!we)?null:new Rs(he,me,we)},Rs.prototype.evaluate=function(C){return new Vs(this.caseSensitive.evaluate(C),this.diacriticSensitive.evaluate(C),this.locale?this.locale.evaluate(C):null)},Rs.prototype.eachChild=function(C){C(this.caseSensitive),C(this.diacriticSensitive),this.locale&&C(this.locale)},Rs.prototype.outputDefined=function(){return!1},Rs.prototype.serialize=function(){var C={};return C["case-sensitive"]=this.caseSensitive.serialize(),C["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(C.locale=this.locale.serialize()),["collator",C]};var bs=8192;function El(E,C){E[0]=Math.min(E[0],C[0]),E[1]=Math.min(E[1],C[1]),E[2]=Math.max(E[2],C[0]),E[3]=Math.max(E[3],C[1])}function Au(E){return(180+E)/360}function Mu(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function Gs(E,C){return!(E[0]<=C[0]||E[2]>=C[2]||E[1]<=C[1]||E[3]>=C[3])}function Cl(E,C){var O=Au(E[0]),$=Mu(E[1]),he=Math.pow(2,C.z);return[Math.round(O*he*bs),Math.round($*he*bs)]}function _s(E,C,O){var $=E[0]-C[0],he=E[1]-C[1],me=E[0]-O[0],we=E[1]-O[1];return $*we-me*he==0&&$*me<=0&&he*we<=0}function Gl(E,C,O){return C[1]>E[1]!=O[1]>E[1]&&E[0]<(O[0]-C[0])*(E[1]-C[1])/(O[1]-C[1])+C[0]}function nl(E,C){for(var O=!1,$=0,he=C.length;$<he;$++)for(var me=C[$],we=0,Ie=me.length;we<Ie-1;we++){if(_s(E,me[we],me[we+1]))return!1;Gl(E,me[we],me[we+1])&&(O=!O)}return O}function Yl(E,C){for(var O=0;O<C.length;O++)if(nl(E,C[O]))return!0;return!1}function au(E,C){return E[0]*C[1]-E[1]*C[0]}function Ll(E,C,O,$){var he=E[0]-O[0],me=E[1]-O[1],we=C[0]-O[0],Ie=C[1]-O[1],$e=$[0]-O[0],ut=$[1]-O[1],gt=he*ut-$e*me,Rt=we*ut-$e*Ie;return gt>0&&Rt<0||gt<0&&Rt>0}function Su(E,C,O,$){var he=[C[0]-E[0],C[1]-E[1]],me=[$[0]-O[0],$[1]-O[1]];return au(me,he)===0?!1:!!(Ll(E,C,O,$)&&Ll(O,$,E,C))}function Ys(E,C,O){for(var $=0,he=O;$<he.length;$+=1)for(var me=he[$],we=0;we<me.length-1;++we)if(Su(E,C,me[we],me[we+1]))return!0;return!1}function Wl(E,C){for(var O=0;O<E.length;++O)if(!nl(E[O],C))return!1;for(var $=0;$<E.length-1;++$)if(Ys(E[$],E[$+1],C))return!1;return!0}function Pl(E,C){for(var O=0;O<C.length;O++)if(Wl(E,C[O]))return!0;return!1}function vs(E,C,O){for(var $=[],he=0;he<E.length;he++){for(var me=[],we=0;we<E[he].length;we++){var Ie=Cl(E[he][we],O);El(C,Ie),me.push(Ie)}$.push(me)}return $}function pl(E,C,O){for(var $=[],he=0;he<E.length;he++){var me=vs(E[he],C,O);$.push(me)}return $}function Xl(E,C,O,$){if(E[0]<O[0]||E[0]>O[2]){var he=$*.5,me=E[0]-O[0]>he?-$:O[0]-E[0]>he?$:0;me===0&&(me=E[0]-O[2]>he?-$:O[2]-E[0]>he?$:0),E[0]+=me}El(C,E)}function iu(E){E[0]=E[1]=1/0,E[2]=E[3]=-1/0}function ou(E,C,O,$){for(var he=Math.pow(2,$.z)*bs,me=[$.x*bs,$.y*bs],we=[],Ie=0,$e=E;Ie<$e.length;Ie+=1)for(var ut=$e[Ie],gt=0,Rt=ut;gt<Rt.length;gt+=1){var $t=Rt[gt],Wt=[$t.x+me[0],$t.y+me[1]];Xl(Wt,C,O,he),we.push(Wt)}return we}function Dl(E,C,O,$){for(var he=Math.pow(2,$.z)*bs,me=[$.x*bs,$.y*bs],we=[],Ie=0,$e=E;Ie<$e.length;Ie+=1){for(var ut=$e[Ie],gt=[],Rt=0,$t=ut;Rt<$t.length;Rt+=1){var Wt=$t[Rt],vr=[Wt.x+me[0],Wt.y+me[1]];El(C,vr),gt.push(vr)}we.push(gt)}if(C[2]-C[0]<=he/2){iu(C);for(var Dr=0,sn=we;Dr<sn.length;Dr+=1)for(var Qr=sn[Dr],Mn=0,yn=Qr;Mn<yn.length;Mn+=1){var Tn=yn[Mn];Xl(Tn,C,O,he)}}return we}function ku(E,C){var O=[1/0,1/0,-1/0,-1/0],$=[1/0,1/0,-1/0,-1/0],he=E.canonicalID();if(C.type==="Polygon"){var me=vs(C.coordinates,$,he),we=ou(E.geometry(),O,$,he);if(!Gs(O,$))return!1;for(var Ie=0,$e=we;Ie<$e.length;Ie+=1){var ut=$e[Ie];if(!nl(ut,me))return!1}}if(C.type==="MultiPolygon"){var gt=pl(C.coordinates,$,he),Rt=ou(E.geometry(),O,$,he);if(!Gs(O,$))return!1;for(var $t=0,Wt=Rt;$t<Wt.length;$t+=1){var vr=Wt[$t];if(!Yl(vr,gt))return!1}}return!0}function su(E,C){var O=[1/0,1/0,-1/0,-1/0],$=[1/0,1/0,-1/0,-1/0],he=E.canonicalID();if(C.type==="Polygon"){var me=vs(C.coordinates,$,he),we=Dl(E.geometry(),O,$,he);if(!Gs(O,$))return!1;for(var Ie=0,$e=we;Ie<$e.length;Ie+=1){var ut=$e[Ie];if(!Wl(ut,me))return!1}}if(C.type==="MultiPolygon"){var gt=pl(C.coordinates,$,he),Rt=Dl(E.geometry(),O,$,he);if(!Gs(O,$))return!1;for(var $t=0,Wt=Rt;$t<Wt.length;$t+=1){var vr=Wt[$t];if(!Pl(vr,gt))return!1}}return!0}var Ko=function(C,O){this.type=dn,this.geojson=C,this.geometries=O};Ko.parse=function(C,O){if(C.length!==2)return O.error("'within' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(hs(C[1])){var $=C[1];if($.type==="FeatureCollection")for(var he=0;he<$.features.length;++he){var me=$.features[he].geometry.type;if(me==="Polygon"||me==="MultiPolygon")return new Ko($,$.features[he].geometry)}else if($.type==="Feature"){var we=$.geometry.type;if(we==="Polygon"||we==="MultiPolygon")return new Ko($,$.geometry)}else if($.type==="Polygon"||$.type==="MultiPolygon")return new Ko($,$)}return O.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ko.prototype.evaluate=function(C){if(C.geometry()!=null&&C.canonicalID()!=null){if(C.geometryType()==="Point")return ku(C,this.geometries);if(C.geometryType()==="LineString")return su(C,this.geometries)}return!1},Ko.prototype.eachChild=function(){},Ko.prototype.outputDefined=function(){return!0},Ko.prototype.serialize=function(){return["within",this.geojson]};function al(E){if(E instanceof Mo){if(E.name==="get"&&E.args.length===1)return!1;if(E.name==="feature-state")return!1;if(E.name==="has"&&E.args.length===1)return!1;if(E.name==="properties"||E.name==="geometry-type"||E.name==="id")return!1;if(/^filter-/.test(E.name))return!1}if(E instanceof Ko)return!1;var C=!0;return E.eachChild(function(O){C&&!al(O)&&(C=!1)}),C}function il(E){if(E instanceof Mo&&E.name==="feature-state")return!1;var C=!0;return E.eachChild(function(O){C&&!il(O)&&(C=!1)}),C}function Zl(E,C){if(E instanceof Mo&&C.indexOf(E.name)>=0)return!1;var O=!0;return E.eachChild(function($){O&&!Zl($,C)&&(O=!1)}),O}var ps=function(C,O){this.type=O.type,this.name=C,this.boundExpression=O};ps.parse=function(C,O){if(C.length!==2||typeof C[1]!="string")return O.error("'var' expression requires exactly one string literal argument.");var $=C[1];return O.scope.has($)?new ps($,O.scope.get($)):O.error('Unknown variable "'+$+'". Make sure "'+$+'" has been bound in an enclosing "let" expression before using it.',1)},ps.prototype.evaluate=function(C){return this.boundExpression.evaluate(C)},ps.prototype.eachChild=function(){},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){return["var",this.name]};var So=function(C,O,$,he,me){O===void 0&&(O=[]),he===void 0&&(he=new tn),me===void 0&&(me=[]),this.registry=C,this.path=O,this.key=O.map(function(we){return"["+we+"]"}).join(""),this.scope=he,this.errors=me,this.expectedType=$};So.prototype.parse=function(C,O,$,he,me){return me===void 0&&(me={}),O?this.concat(O,$,he)._parse(C,me):this._parse(C,me)},So.prototype._parse=function(C,O){(C===null||typeof C=="string"||typeof C=="boolean"||typeof C=="number")&&(C=["literal",C]);function $(gt,Rt,$t){return $t==="assert"?new Ji(Rt,[gt]):$t==="coerce"?new jo(Rt,[gt]):gt}if(Array.isArray(C)){if(C.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var he=C[0];if(typeof he!="string")return this.error("Expression name must be a string, but found "+typeof he+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var me=this.registry[he];if(me){var we=me.parse(C,this);if(!we)return null;if(this.expectedType){var Ie=this.expectedType,$e=we.type;if((Ie.kind==="string"||Ie.kind==="number"||Ie.kind==="boolean"||Ie.kind==="object"||Ie.kind==="array")&&$e.kind==="value")we=$(we,Ie,O.typeAnnotation||"assert");else if((Ie.kind==="color"||Ie.kind==="formatted"||Ie.kind==="resolvedImage")&&($e.kind==="value"||$e.kind==="string"))we=$(we,Ie,O.typeAnnotation||"coerce");else if(this.checkSubtype(Ie,$e))return null}if(!(we instanceof Ki)&&we.type.kind!=="resolvedImage"&&Rl(we)){var ut=new Ds;try{we=new Ki(we.type,we.evaluate(ut))}catch(gt){return this.error(gt.message),null}}return we}return this.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof C=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof C=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof C+" instead.")},So.prototype.concat=function(C,O,$){var he=typeof C=="number"?this.path.concat(C):this.path,me=$?this.scope.concat($):this.scope;return new So(this.registry,he,O||null,me,this.errors)},So.prototype.error=function(C){for(var O=[],$=arguments.length-1;$-- >0;)O[$]=arguments[$+1];var he=""+this.key+O.map(function(me){return"["+me+"]"}).join("");this.errors.push(new xn(he,C))},So.prototype.checkSubtype=function(C,O){var $=Vo(C,O);return $&&this.error($),$};function Rl(E){if(E instanceof ps)return Rl(E.boundExpression);if(E instanceof Mo&&E.name==="error")return!1;if(E instanceof Rs)return!1;if(E instanceof Ko)return!1;var C=E instanceof jo||E instanceof Ji,O=!0;return E.eachChild(function($){C?O=O&&Rl($):O=O&&$ instanceof Ki}),O?al(E)&&Zl(E,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function ws(E,C){for(var O=E.length-1,$=0,he=O,me=0,we,Ie;$<=he;)if(me=Math.floor(($+he)/2),we=E[me],Ie=E[me+1],we<=C){if(me===O||C<Ie)return me;$=me+1}else if(we>C)he=me-1;else throw new Fi("Input is not a number.");return 0}var Ts=function(C,O,$){this.type=C,this.input=O,this.labels=[],this.outputs=[];for(var he=0,me=$;he<me.length;he+=1){var we=me[he],Ie=we[0],$e=we[1];this.labels.push(Ie),this.outputs.push($e)}};Ts.parse=function(C,O){if(C.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!=0)return O.error("Expected an even number of arguments.");var $=O.parse(C[1],1,dr);if(!$)return null;var he=[],me=null;O.expectedType&&O.expectedType.kind!=="value"&&(me=O.expectedType);for(var we=1;we<C.length;we+=2){var Ie=we===1?-1/0:C[we],$e=C[we+1],ut=we,gt=we+1;if(typeof Ie!="number")return O.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ut);if(he.length&&he[he.length-1][0]>=Ie)return O.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ut);var Rt=O.parse($e,gt,me);if(!Rt)return null;me=me||Rt.type,he.push([Ie,Rt])}return new Ts(me,$,he)},Ts.prototype.evaluate=function(C){var O=this.labels,$=this.outputs;if(O.length===1)return $[0].evaluate(C);var he=this.input.evaluate(C);if(he<=O[0])return $[0].evaluate(C);var me=O.length;if(he>=O[me-1])return $[me-1].evaluate(C);var we=ws(O,he);return $[we].evaluate(C)},Ts.prototype.eachChild=function(C){C(this.input);for(var O=0,$=this.outputs;O<$.length;O+=1){var he=$[O];C(he)}},Ts.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},Ts.prototype.serialize=function(){for(var C=["step",this.input.serialize()],O=0;O<this.labels.length;O++)O>0&&C.push(this.labels[O]),C.push(this.outputs[O].serialize());return C};function so(E,C,O){return E*(1-O)+C*O}function dl(E,C,O){return new vi(so(E.r,C.r,O),so(E.g,C.g,O),so(E.b,C.b,O),so(E.a,C.a,O))}function yl(E,C,O){return E.map(function($,he){return so($,C[he],O)})}var Ws=Object.freeze({__proto__:null,number:so,color:dl,array:yl}),ds=.95047,ml=1,ol=1.08883,Il=4/29,xl=6/29,Xs=3*xl*xl,Eu=xl*xl*xl,ts=Math.PI/180,Hu=180/Math.PI;function jl(E){return E>Eu?Math.pow(E,1/3):E/Xs+Il}function sl(E){return E>xl?E*E*E:Xs*(E-Il)}function bl(E){return 255*(E<=.0031308?12.92*E:1.055*Math.pow(E,1/2.4)-.055)}function Zs(E){return E/=255,E<=.04045?E/12.92:Math.pow((E+.055)/1.055,2.4)}function _l(E){var C=Zs(E.r),O=Zs(E.g),$=Zs(E.b),he=jl((.4124564*C+.3575761*O+.1804375*$)/ds),me=jl((.2126729*C+.7151522*O+.072175*$)/ml),we=jl((.0193339*C+.119192*O+.9503041*$)/ol);return{l:116*me-16,a:500*(he-me),b:200*(me-we),alpha:E.a}}function lu(E){var C=(E.l+16)/116,O=isNaN(E.a)?C:C+E.a/500,$=isNaN(E.b)?C:C-E.b/200;return C=ml*sl(C),O=ds*sl(O),$=ol*sl($),new vi(bl(3.2404542*O-1.5371385*C-.4985314*$),bl(-.969266*O+1.8760108*C+.041556*$),bl(.0556434*O-.2040259*C+1.0572252*$),E.alpha)}function uu(E,C,O){return{l:so(E.l,C.l,O),a:so(E.a,C.a,O),b:so(E.b,C.b,O),alpha:so(E.alpha,C.alpha,O)}}function Gu(E){var C=_l(E),O=C.l,$=C.a,he=C.b,me=Math.atan2(he,$)*Hu;return{h:me<0?me+360:me,c:Math.sqrt($*$+he*he),l:O,alpha:E.a}}function Ri(E){var C=E.h*ts,O=E.c,$=E.l;return lu({l:$,a:Math.cos(C)*O,b:Math.sin(C)*O,alpha:E.alpha})}function ll(E,C,O){var $=C-E;return E+O*($>180||$<-180?$-360*Math.round($/360):$)}function js(E,C,O){return{h:ll(E.h,C.h,O),c:so(E.c,C.c,O),l:so(E.l,C.l,O),alpha:so(E.alpha,C.alpha,O)}}var Jo={forward:_l,reverse:lu,interpolate:uu},rs={forward:Gu,reverse:Ri,interpolate:js},wl=Object.freeze({__proto__:null,lab:Jo,hcl:rs}),lo=function(C,O,$,he,me){this.type=C,this.operator=O,this.interpolation=$,this.input=he,this.labels=[],this.outputs=[];for(var we=0,Ie=me;we<Ie.length;we+=1){var $e=Ie[we],ut=$e[0],gt=$e[1];this.labels.push(ut),this.outputs.push(gt)}};lo.interpolationFactor=function(C,O,$,he){var me=0;if(C.name==="exponential")me=fu(O,C.base,$,he);else if(C.name==="linear")me=fu(O,1,$,he);else if(C.name==="cubic-bezier"){var we=C.controlPoints,Ie=new t(we[0],we[1],we[2],we[3]);me=Ie.solve(fu(O,1,$,he))}return me},lo.parse=function(C,O){var $=C[0],he=C[1],me=C[2],we=C.slice(3);if(!Array.isArray(he)||he.length===0)return O.error("Expected an interpolation type expression.",1);if(he[0]==="linear")he={name:"linear"};else if(he[0]==="exponential"){var Ie=he[1];if(typeof Ie!="number")return O.error("Exponential interpolation requires a numeric base.",1,1);he={name:"exponential",base:Ie}}else if(he[0]==="cubic-bezier"){var $e=he.slice(1);if($e.length!==4||$e.some(function(Qr){return typeof Qr!="number"||Qr<0||Qr>1}))return O.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);he={name:"cubic-bezier",controlPoints:$e}}else return O.error("Unknown interpolation type "+String(he[0]),1,0);if(C.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!=0)return O.error("Expected an even number of arguments.");if(me=O.parse(me,2,dr),!me)return null;var ut=[],gt=null;$==="interpolate-hcl"||$==="interpolate-lab"?gt=Bn:O.expectedType&&O.expectedType.kind!=="value"&&(gt=O.expectedType);for(var Rt=0;Rt<we.length;Rt+=2){var $t=we[Rt],Wt=we[Rt+1],vr=Rt+3,Dr=Rt+4;if(typeof $t!="number")return O.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',vr);if(ut.length&&ut[ut.length-1][0]>=$t)return O.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',vr);var sn=O.parse(Wt,Dr,gt);if(!sn)return null;gt=gt||sn.type,ut.push([$t,sn])}return gt.kind!=="number"&&gt.kind!=="color"&&!(gt.kind==="array"&&gt.itemType.kind==="number"&&typeof gt.N=="number")?O.error("Type "+Da(gt)+" is not interpolatable."):new lo(gt,$,he,me,ut)},lo.prototype.evaluate=function(C){var O=this.labels,$=this.outputs;if(O.length===1)return $[0].evaluate(C);var he=this.input.evaluate(C);if(he<=O[0])return $[0].evaluate(C);var me=O.length;if(he>=O[me-1])return $[me-1].evaluate(C);var we=ws(O,he),Ie=O[we],$e=O[we+1],ut=lo.interpolationFactor(this.interpolation,he,Ie,$e),gt=$[we].evaluate(C),Rt=$[we+1].evaluate(C);return this.operator==="interpolate"?Ws[this.type.kind.toLowerCase()](gt,Rt,ut):this.operator==="interpolate-hcl"?rs.reverse(rs.interpolate(rs.forward(gt),rs.forward(Rt),ut)):Jo.reverse(Jo.interpolate(Jo.forward(gt),Jo.forward(Rt),ut))},lo.prototype.eachChild=function(C){C(this.input);for(var O=0,$=this.outputs;O<$.length;O+=1){var he=$[O];C(he)}},lo.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},lo.prototype.serialize=function(){var C;this.interpolation.name==="linear"?C=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?C=["linear"]:C=["exponential",this.interpolation.base]:C=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var O=[this.operator,C,this.input.serialize()],$=0;$<this.labels.length;$++)O.push(this.labels[$],this.outputs[$].serialize());return O};function fu(E,C,O,$){var he=$-O,me=E-O;return he===0?0:C===1?me/he:(Math.pow(C,me)-1)/(Math.pow(C,he)-1)}var ns=function(C,O){this.type=C,this.args=O};ns.parse=function(C,O){if(C.length<2)return O.error("Expectected at least one argument.");var $=null,he=O.expectedType;he&&he.kind!=="value"&&($=he);for(var me=[],we=0,Ie=C.slice(1);we<Ie.length;we+=1){var $e=Ie[we],ut=O.parse($e,1+me.length,$,void 0,{typeAnnotation:"omit"});if(!ut)return null;$=$||ut.type,me.push(ut)}var gt=he&&me.some(function(Rt){return Vo(he,Rt.type)});return gt?new ns(bn,me):new ns($,me)},ns.prototype.evaluate=function(C){for(var O=null,$=0,he,me=0,we=this.args;me<we.length;me+=1){var Ie=we[me];if($++,O=Ie.evaluate(C),O&&O instanceof Ao&&!O.available&&(he||(he=O.name),O=null,$===this.args.length&&(O=he)),O!==null)break}return O},ns.prototype.eachChild=function(C){this.args.forEach(C)},ns.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},ns.prototype.serialize=function(){var C=["coalesce"];return this.eachChild(function(O){C.push(O.serialize())}),C};var Is=function(C,O){this.type=O.type,this.bindings=[].concat(C),this.result=O};Is.prototype.evaluate=function(C){return this.result.evaluate(C)},Is.prototype.eachChild=function(C){for(var O=0,$=this.bindings;O<$.length;O+=1){var he=$[O];C(he[1])}C(this.result)},Is.parse=function(C,O){if(C.length<4)return O.error("Expected at least 3 arguments, but found "+(C.length-1)+" instead.");for(var $=[],he=1;he<C.length-1;he+=2){var me=C[he];if(typeof me!="string")return O.error("Expected string, but found "+typeof me+" instead.",he);if(/[^a-zA-Z0-9_]/.test(me))return O.error("Variable names must contain only alphanumeric characters or '_'.",he);var we=O.parse(C[he+1],he+1);if(!we)return null;$.push([me,we])}var Ie=O.parse(C[C.length-1],C.length-1,O.expectedType,$);return Ie?new Is($,Ie):null},Is.prototype.outputDefined=function(){return this.result.outputDefined()},Is.prototype.serialize=function(){for(var C=["let"],O=0,$=this.bindings;O<$.length;O+=1){var he=$[O],me=he[0],we=he[1];C.push(me,we.serialize())}return C.push(this.result.serialize()),C};var zs=function(C,O,$){this.type=C,this.index=O,this.input=$};zs.parse=function(C,O){if(C.length!==3)return O.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var $=O.parse(C[1],1,dr),he=O.parse(C[2],2,la(O.expectedType||bn));if(!$||!he)return null;var me=he.type;return new zs(me.itemType,$,he)},zs.prototype.evaluate=function(C){var O=this.index.evaluate(C),$=this.input.evaluate(C);if(O<0)throw new Fi("Array index out of bounds: "+O+" < 0.");if(O>=$.length)throw new Fi("Array index out of bounds: "+O+" > "+($.length-1)+".");if(O!==Math.floor(O))throw new Fi("Array index must be an integer, but found "+O+" instead.");return $[O]},zs.prototype.eachChild=function(C){C(this.index),C(this.input)},zs.prototype.outputDefined=function(){return!1},zs.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var As=function(C,O){this.type=dn,this.needle=C,this.haystack=O};As.parse=function(C,O){if(C.length!==3)return O.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var $=O.parse(C[1],1,bn),he=O.parse(C[2],2,bn);return!$||!he?null:Zo($.type,[dn,Rr,dr,xr,bn])?new As($,he):O.error("Expected first argument to be of type boolean, string, number or null, but found "+Da($.type)+" instead")},As.prototype.evaluate=function(C){var O=this.needle.evaluate(C),$=this.haystack.evaluate(C);if(!$)return!1;if(!tl(O,["boolean","string","number","null"]))throw new Fi("Expected first argument to be of type boolean, string, number or null, but found "+Da(Di(O))+" instead.");if(!tl($,["string","array"]))throw new Fi("Expected second argument to be of type array or string, but found "+Da(Di($))+" instead.");return $.indexOf(O)>=0},As.prototype.eachChild=function(C){C(this.needle),C(this.haystack)},As.prototype.outputDefined=function(){return!0},As.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var as=function(C,O,$){this.type=dr,this.needle=C,this.haystack=O,this.fromIndex=$};as.parse=function(C,O){if(C.length<=2||C.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var $=O.parse(C[1],1,bn),he=O.parse(C[2],2,bn);if(!$||!he)return null;if(!Zo($.type,[dn,Rr,dr,xr,bn]))return O.error("Expected first argument to be of type boolean, string, number or null, but found "+Da($.type)+" instead");if(C.length===4){var me=O.parse(C[3],3,dr);return me?new as($,he,me):null}else return new as($,he)},as.prototype.evaluate=function(C){var O=this.needle.evaluate(C),$=this.haystack.evaluate(C);if(!tl(O,["boolean","string","number","null"]))throw new Fi("Expected first argument to be of type boolean, string, number or null, but found "+Da(Di(O))+" instead.");if(!tl($,["string","array"]))throw new Fi("Expected second argument to be of type array or string, but found "+Da(Di($))+" instead.");if(this.fromIndex){var he=this.fromIndex.evaluate(C);return $.indexOf(O,he)}return $.indexOf(O)},as.prototype.eachChild=function(C){C(this.needle),C(this.haystack),this.fromIndex&&C(this.fromIndex)},as.prototype.outputDefined=function(){return!1},as.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var C=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),C]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Vi=function(C,O,$,he,me,we){this.inputType=C,this.type=O,this.input=$,this.cases=he,this.outputs=me,this.otherwise=we};Vi.parse=function(C,O){if(C.length<5)return O.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if(C.length%2!=1)return O.error("Expected an even number of arguments.");var $,he;O.expectedType&&O.expectedType.kind!=="value"&&(he=O.expectedType);for(var me={},we=[],Ie=2;Ie<C.length-1;Ie+=2){var $e=C[Ie],ut=C[Ie+1];Array.isArray($e)||($e=[$e]);var gt=O.concat(Ie);if($e.length===0)return gt.error("Expected at least one branch label.");for(var Rt=0,$t=$e;Rt<$t.length;Rt+=1){var Wt=$t[Rt];if(typeof Wt!="number"&&typeof Wt!="string")return gt.error("Branch labels must be numbers or strings.");if(typeof Wt=="number"&&Math.abs(Wt)>Number.MAX_SAFE_INTEGER)return gt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Wt=="number"&&Math.floor(Wt)!==Wt)return gt.error("Numeric branch labels must be integer values.");if(!$)$=Di(Wt);else if(gt.checkSubtype($,Di(Wt)))return null;if(typeof me[String(Wt)]!="undefined")return gt.error("Branch labels must be unique.");me[String(Wt)]=we.length}var vr=O.parse(ut,Ie,he);if(!vr)return null;he=he||vr.type,we.push(vr)}var Dr=O.parse(C[1],1,bn);if(!Dr)return null;var sn=O.parse(C[C.length-1],C.length-1,he);return!sn||Dr.type.kind!=="value"&&O.concat(1).checkSubtype($,Dr.type)?null:new Vi($,he,Dr,me,we,sn)},Vi.prototype.evaluate=function(C){var O=this.input.evaluate(C),$=Di(O)===this.inputType&&this.outputs[this.cases[O]]||this.otherwise;return $.evaluate(C)},Vi.prototype.eachChild=function(C){C(this.input),this.outputs.forEach(C),C(this.otherwise)},Vi.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})&&this.otherwise.outputDefined()},Vi.prototype.serialize=function(){for(var C=this,O=["match",this.input.serialize()],$=Object.keys(this.cases).sort(),he=[],me={},we=0,Ie=$;we<Ie.length;we+=1){var $e=Ie[we],ut=me[this.cases[$e]];ut===void 0?(me[this.cases[$e]]=he.length,he.push([this.cases[$e],[$e]])):he[ut][1].push($e)}for(var gt=function(Dr){return C.inputType.kind==="number"?Number(Dr):Dr},Rt=0,$t=he;Rt<$t.length;Rt+=1){var Wt=$t[Rt],ut=Wt[0],vr=Wt[1];vr.length===1?O.push(gt(vr[0])):O.push(vr.map(gt)),O.push(this.outputs[outputIndex$1].serialize())}return O.push(this.otherwise.serialize()),O};var ko=function(C,O,$){this.type=C,this.branches=O,this.otherwise=$};ko.parse=function(C,O){if(C.length<4)return O.error("Expected at least 3 arguments, but found only "+(C.length-1)+".");if(C.length%2!=0)return O.error("Expected an odd number of arguments.");var $;O.expectedType&&O.expectedType.kind!=="value"&&($=O.expectedType);for(var he=[],me=1;me<C.length-1;me+=2){var we=O.parse(C[me],me,dn);if(!we)return null;var Ie=O.parse(C[me+1],me+1,$);if(!Ie)return null;he.push([we,Ie]),$=$||Ie.type}var $e=O.parse(C[C.length-1],C.length-1,$);return $e?new ko($,he,$e):null},ko.prototype.evaluate=function(C){for(var O=0,$=this.branches;O<$.length;O+=1){var he=$[O],me=he[0],we=he[1];if(me.evaluate(C))return we.evaluate(C)}return this.otherwise.evaluate(C)},ko.prototype.eachChild=function(C){for(var O=0,$=this.branches;O<$.length;O+=1){var he=$[O],me=he[0],we=he[1];C(me),C(we)}C(this.otherwise)},ko.prototype.outputDefined=function(){return this.branches.every(function(C){C[0];var O=C[1];return O.outputDefined()})&&this.otherwise.outputDefined()},ko.prototype.serialize=function(){var C=["case"];return this.eachChild(function(O){C.push(O.serialize())}),C};var is=function(C,O,$,he){this.type=C,this.input=O,this.beginIndex=$,this.endIndex=he};is.parse=function(C,O){if(C.length<=2||C.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var $=O.parse(C[1],1,bn),he=O.parse(C[2],2,dr);if(!$||!he)return null;if(!Zo($.type,[la(bn),Rr,bn]))return O.error("Expected first argument to be of type array or string, but found "+Da($.type)+" instead");if(C.length===4){var me=O.parse(C[3],3,dr);return me?new is($.type,$,he,me):null}else return new is($.type,$,he)},is.prototype.evaluate=function(C){var O=this.input.evaluate(C),$=this.beginIndex.evaluate(C);if(!tl(O,["string","array"]))throw new Fi("Expected first argument to be of type array or string, but found "+Da(Di(O))+" instead.");if(this.endIndex){var he=this.endIndex.evaluate(C);return O.slice($,he)}return O.slice($)},is.prototype.eachChild=function(C){C(this.input),C(this.beginIndex),this.endIndex&&C(this.endIndex)},is.prototype.outputDefined=function(){return!1},is.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var C=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),C]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function cu(E,C){return E==="=="||E==="!="?C.kind==="boolean"||C.kind==="string"||C.kind==="number"||C.kind==="null"||C.kind==="value":C.kind==="string"||C.kind==="number"||C.kind==="value"}function zl(E,C,O){return C===O}function hu(E,C,O){return C!==O}function mt(E,C,O){return C<O}function It(E,C,O){return C>O}function ur(E,C,O){return C<=O}function tr(E,C,O){return C>=O}function Cr(E,C,O,$){return $.compare(C,O)===0}function rn(E,C,O,$){return!Cr(E,C,O,$)}function pn(E,C,O,$){return $.compare(C,O)<0}function wn(E,C,O,$){return $.compare(C,O)>0}function Cn(E,C,O,$){return $.compare(C,O)<=0}function On(E,C,O,$){return $.compare(C,O)>=0}function gn(E,C,O){var $=E!=="=="&&E!=="!=";return function(){function he(me,we,Ie){this.type=dn,this.lhs=me,this.rhs=we,this.collator=Ie,this.hasUntypedArgument=me.type.kind==="value"||we.type.kind==="value"}return he.parse=function(we,Ie){if(we.length!==3&&we.length!==4)return Ie.error("Expected two or three arguments.");var $e=we[0],ut=Ie.parse(we[1],1,bn);if(!ut)return null;if(!cu($e,ut.type))return Ie.concat(1).error('"'+$e+`" comparisons are not supported for type '`+Da(ut.type)+"'.");var gt=Ie.parse(we[2],2,bn);if(!gt)return null;if(!cu($e,gt.type))return Ie.concat(2).error('"'+$e+`" comparisons are not supported for type '`+Da(gt.type)+"'.");if(ut.type.kind!==gt.type.kind&&ut.type.kind!=="value"&&gt.type.kind!=="value")return Ie.error("Cannot compare types '"+Da(ut.type)+"' and '"+Da(gt.type)+"'.");$&&(ut.type.kind==="value"&&gt.type.kind!=="value"?ut=new Ji(gt.type,[ut]):ut.type.kind!=="value"&&gt.type.kind==="value"&&(gt=new Ji(ut.type,[gt])));var Rt=null;if(we.length===4){if(ut.type.kind!=="string"&&gt.type.kind!=="string"&&ut.type.kind!=="value"&&gt.type.kind!=="value")return Ie.error("Cannot use collator to compare non-string types.");if(Rt=Ie.parse(we[3],3,ta),!Rt)return null}return new he(ut,gt,Rt)},he.prototype.evaluate=function(we){var Ie=this.lhs.evaluate(we),$e=this.rhs.evaluate(we);if($&&this.hasUntypedArgument){var ut=Di(Ie),gt=Di($e);if(ut.kind!==gt.kind||!(ut.kind==="string"||ut.kind==="number"))throw new Fi('Expected arguments for "'+E+'" to be (string, string) or (number, number), but found ('+ut.kind+", "+gt.kind+") instead.")}if(this.collator&&!$&&this.hasUntypedArgument){var Rt=Di(Ie),$t=Di($e);if(Rt.kind!=="string"||$t.kind!=="string")return C(we,Ie,$e)}return this.collator?O(we,Ie,$e,this.collator.evaluate(we)):C(we,Ie,$e)},he.prototype.eachChild=function(we){we(this.lhs),we(this.rhs),this.collator&&we(this.collator)},he.prototype.outputDefined=function(){return!0},he.prototype.serialize=function(){var we=[E];return this.eachChild(function(Ie){we.push(Ie.serialize())}),we},he}()}var In=gn("==",zl,Cr),Pn=gn("!=",hu,rn),Un=gn("<",mt,pn),$n=gn(">",It,wn),Fa=gn("<=",ur,Cn),Ea=gn(">=",tr,On),Ba=function(C,O,$,he,me){this.type=Rr,this.number=C,this.locale=O,this.currency=$,this.minFractionDigits=he,this.maxFractionDigits=me};Ba.parse=function(C,O){if(C.length!==3)return O.error("Expected two arguments.");var $=O.parse(C[1],1,dr);if(!$)return null;var he=C[2];if(typeof he!="object"||Array.isArray(he))return O.error("NumberFormat options argument must be an object.");var me=null;if(he.locale&&(me=O.parse(he.locale,1,Rr),!me))return null;var we=null;if(he.currency&&(we=O.parse(he.currency,1,Rr),!we))return null;var Ie=null;if(he["min-fraction-digits"]&&(Ie=O.parse(he["min-fraction-digits"],1,dr),!Ie))return null;var $e=null;return he["max-fraction-digits"]&&($e=O.parse(he["max-fraction-digits"],1,dr),!$e)?null:new Ba($,me,we,Ie,$e)},Ba.prototype.evaluate=function(C){return new Intl.NumberFormat(this.locale?this.locale.evaluate(C):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(C):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(C):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(C):void 0}).format(this.number.evaluate(C))},Ba.prototype.eachChild=function(C){C(this.number),this.locale&&C(this.locale),this.currency&&C(this.currency),this.minFractionDigits&&C(this.minFractionDigits),this.maxFractionDigits&&C(this.maxFractionDigits)},Ba.prototype.outputDefined=function(){return!1},Ba.prototype.serialize=function(){var C={};return this.locale&&(C.locale=this.locale.serialize()),this.currency&&(C.currency=this.currency.serialize()),this.minFractionDigits&&(C["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(C["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),C]};var Oa=function(C){this.type=dr,this.input=C};Oa.parse=function(C,O){if(C.length!==2)return O.error("Expected 1 argument, but found "+(C.length-1)+" instead.");var $=O.parse(C[1],1);return $?$.type.kind!=="array"&&$.type.kind!=="string"&&$.type.kind!=="value"?O.error("Expected argument of type string or array, but found "+Da($.type)+" instead."):new Oa($):null},Oa.prototype.evaluate=function(C){var O=this.input.evaluate(C);if(typeof O=="string")return O.length;if(Array.isArray(O))return O.length;throw new Fi("Expected value to be of type string or array, but found "+Da(Di(O))+" instead.")},Oa.prototype.eachChild=function(C){C(this.input)},Oa.prototype.outputDefined=function(){return!1},Oa.prototype.serialize=function(){var C=["length"];return this.eachChild(function(O){C.push(O.serialize())}),C};var Jn={"==":In,"!=":Pn,">":$n,"<":Un,">=":Ea,"<=":Fa,array:Ji,at:zs,boolean:Ji,case:ko,coalesce:ns,collator:Rs,format:es,image:Hs,in:As,"index-of":as,interpolate:lo,"interpolate-hcl":lo,"interpolate-lab":lo,length:Oa,let:Is,literal:Ki,match:Vi,number:Ji,"number-format":Ba,object:Ji,slice:is,step:Ts,string:Ji,"to-boolean":jo,"to-color":jo,"to-number":jo,"to-string":jo,var:ps,within:Ko};function ha(E,C){var O=C[0],$=C[1],he=C[2],me=C[3];O=O.evaluate(E),$=$.evaluate(E),he=he.evaluate(E);var we=me?me.evaluate(E):1,Ie=vl(O,$,he,we);if(Ie)throw new Fi(Ie);return new vi(O/255*we,$/255*we,he/255*we,we)}function Ga(E,C){return E in C}function Ka(E,C){var O=C[E];return typeof O=="undefined"?null:O}function di(E,C,O,$){for(;O<=$;){var he=O+$>>1;if(C[he]===E)return!0;C[he]>E?$=he-1:O=he+1}return!1}function gi(E){return{type:E}}Mo.register(Jn,{error:[Zn,[Rr],function(E,C){var O=C[0];throw new Fi(O.evaluate(E))}],typeof:[Rr,[bn],function(E,C){var O=C[0];return Da(Di(O.evaluate(E)))}],"to-rgba":[la(dr,4),[Bn],function(E,C){var O=C[0];return O.evaluate(E).toArray()}],rgb:[Bn,[dr,dr,dr],ha],rgba:[Bn,[dr,dr,dr,dr],ha],has:{type:dn,overloads:[[[Rr],function(E,C){var O=C[0];return Ga(O.evaluate(E),E.properties())}],[[Rr,aa],function(E,C){var O=C[0],$=C[1];return Ga(O.evaluate(E),$.evaluate(E))}]]},get:{type:bn,overloads:[[[Rr],function(E,C){var O=C[0];return Ka(O.evaluate(E),E.properties())}],[[Rr,aa],function(E,C){var O=C[0],$=C[1];return Ka(O.evaluate(E),$.evaluate(E))}]]},"feature-state":[bn,[Rr],function(E,C){var O=C[0];return Ka(O.evaluate(E),E.featureState||{})}],properties:[aa,[],function(E){return E.properties()}],"geometry-type":[Rr,[],function(E){return E.geometryType()}],id:[bn,[],function(E){return E.id()}],zoom:[dr,[],function(E){return E.globals.zoom}],"heatmap-density":[dr,[],function(E){return E.globals.heatmapDensity||0}],"line-progress":[dr,[],function(E){return E.globals.lineProgress||0}],accumulated:[bn,[],function(E){return E.globals.accumulated===void 0?null:E.globals.accumulated}],"+":[dr,gi(dr),function(E,C){for(var O=0,$=0,he=C;$<he.length;$+=1){var me=he[$];O+=me.evaluate(E)}return O}],"*":[dr,gi(dr),function(E,C){for(var O=1,$=0,he=C;$<he.length;$+=1){var me=he[$];O*=me.evaluate(E)}return O}],"-":{type:dr,overloads:[[[dr,dr],function(E,C){var O=C[0],$=C[1];return O.evaluate(E)-$.evaluate(E)}],[[dr],function(E,C){var O=C[0];return-O.evaluate(E)}]]},"/":[dr,[dr,dr],function(E,C){var O=C[0],$=C[1];return O.evaluate(E)/$.evaluate(E)}],"%":[dr,[dr,dr],function(E,C){var O=C[0],$=C[1];return O.evaluate(E)%$.evaluate(E)}],ln2:[dr,[],function(){return Math.LN2}],pi:[dr,[],function(){return Math.PI}],e:[dr,[],function(){return Math.E}],"^":[dr,[dr,dr],function(E,C){var O=C[0],$=C[1];return Math.pow(O.evaluate(E),$.evaluate(E))}],sqrt:[dr,[dr],function(E,C){var O=C[0];return Math.sqrt(O.evaluate(E))}],log10:[dr,[dr],function(E,C){var O=C[0];return Math.log(O.evaluate(E))/Math.LN10}],ln:[dr,[dr],function(E,C){var O=C[0];return Math.log(O.evaluate(E))}],log2:[dr,[dr],function(E,C){var O=C[0];return Math.log(O.evaluate(E))/Math.LN2}],sin:[dr,[dr],function(E,C){var O=C[0];return Math.sin(O.evaluate(E))}],cos:[dr,[dr],function(E,C){var O=C[0];return Math.cos(O.evaluate(E))}],tan:[dr,[dr],function(E,C){var O=C[0];return Math.tan(O.evaluate(E))}],asin:[dr,[dr],function(E,C){var O=C[0];return Math.asin(O.evaluate(E))}],acos:[dr,[dr],function(E,C){var O=C[0];return Math.acos(O.evaluate(E))}],atan:[dr,[dr],function(E,C){var O=C[0];return Math.atan(O.evaluate(E))}],min:[dr,gi(dr),function(E,C){return Math.min.apply(Math,C.map(function(O){return O.evaluate(E)}))}],max:[dr,gi(dr),function(E,C){return Math.max.apply(Math,C.map(function(O){return O.evaluate(E)}))}],abs:[dr,[dr],function(E,C){var O=C[0];return Math.abs(O.evaluate(E))}],round:[dr,[dr],function(E,C){var O=C[0],$=O.evaluate(E);return $<0?-Math.round(-$):Math.round($)}],floor:[dr,[dr],function(E,C){var O=C[0];return Math.floor(O.evaluate(E))}],ceil:[dr,[dr],function(E,C){var O=C[0];return Math.ceil(O.evaluate(E))}],"filter-==":[dn,[Rr,bn],function(E,C){var O=C[0],$=C[1];return E.properties()[O.value]===$.value}],"filter-id-==":[dn,[bn],function(E,C){var O=C[0];return E.id()===O.value}],"filter-type-==":[dn,[Rr],function(E,C){var O=C[0];return E.geometryType()===O.value}],"filter-<":[dn,[Rr,bn],function(E,C){var O=C[0],$=C[1],he=E.properties()[O.value],me=$.value;return typeof he==typeof me&&he<me}],"filter-id-<":[dn,[bn],function(E,C){var O=C[0],$=E.id(),he=O.value;return typeof $==typeof he&&$<he}],"filter->":[dn,[Rr,bn],function(E,C){var O=C[0],$=C[1],he=E.properties()[O.value],me=$.value;return typeof he==typeof me&&he>me}],"filter-id->":[dn,[bn],function(E,C){var O=C[0],$=E.id(),he=O.value;return typeof $==typeof he&&$>he}],"filter-<=":[dn,[Rr,bn],function(E,C){var O=C[0],$=C[1],he=E.properties()[O.value],me=$.value;return typeof he==typeof me&&he<=me}],"filter-id-<=":[dn,[bn],function(E,C){var O=C[0],$=E.id(),he=O.value;return typeof $==typeof he&&$<=he}],"filter->=":[dn,[Rr,bn],function(E,C){var O=C[0],$=C[1],he=E.properties()[O.value],me=$.value;return typeof he==typeof me&&he>=me}],"filter-id->=":[dn,[bn],function(E,C){var O=C[0],$=E.id(),he=O.value;return typeof $==typeof he&&$>=he}],"filter-has":[dn,[bn],function(E,C){var O=C[0];return O.value in E.properties()}],"filter-has-id":[dn,[],function(E){return E.id()!==null&&E.id()!==void 0}],"filter-type-in":[dn,[la(Rr)],function(E,C){var O=C[0];return O.value.indexOf(E.geometryType())>=0}],"filter-id-in":[dn,[la(bn)],function(E,C){var O=C[0];return O.value.indexOf(E.id())>=0}],"filter-in-small":[dn,[Rr,la(bn)],function(E,C){var O=C[0],$=C[1];return $.value.indexOf(E.properties()[O.value])>=0}],"filter-in-large":[dn,[Rr,la(bn)],function(E,C){var O=C[0],$=C[1];return di(E.properties()[O.value],$.value,0,$.value.length-1)}],all:{type:dn,overloads:[[[dn,dn],function(E,C){var O=C[0],$=C[1];return O.evaluate(E)&&$.evaluate(E)}],[gi(dn),function(E,C){for(var O=0,$=C;O<$.length;O+=1){var he=$[O];if(!he.evaluate(E))return!1}return!0}]]},any:{type:dn,overloads:[[[dn,dn],function(E,C){var O=C[0],$=C[1];return O.evaluate(E)||$.evaluate(E)}],[gi(dn),function(E,C){for(var O=0,$=C;O<$.length;O+=1){var he=$[O];if(he.evaluate(E))return!0}return!1}]]},"!":[dn,[dn],function(E,C){var O=C[0];return!O.evaluate(E)}],"is-supported-script":[dn,[Rr],function(E,C){var O=C[0],$=E.globals&&E.globals.isSupportedScript;return $?$(O.evaluate(E)):!0}],upcase:[Rr,[Rr],function(E,C){var O=C[0];return O.evaluate(E).toUpperCase()}],downcase:[Rr,[Rr],function(E,C){var O=C[0];return O.evaluate(E).toLowerCase()}],concat:[Rr,gi(bn),function(E,C){return C.map(function(O){return rl(O.evaluate(E))}).join("")}],"resolved-locale":[Rr,[ta],function(E,C){var O=C[0];return O.evaluate(E).resolvedLocale()}]});function mi(E){return{result:"success",value:E}}function Ai(E){return{result:"error",value:E}}function li(E){return E["property-type"]==="data-driven"||E["property-type"]==="cross-faded-data-driven"}function yo(E){return!!E.expression&&E.expression.parameters.indexOf("zoom")>-1}function qi(E){return!!E.expression&&E.expression.interpolated}function ja(E){return E instanceof Number?"number":E instanceof String?"string":E instanceof Boolean?"boolean":Array.isArray(E)?"array":E===null?"null":typeof E}function va(E){return typeof E=="object"&&E!==null&&!Array.isArray(E)}function xi(E){return E}function uo(E,C){var O=C.type==="color",$=E.stops&&typeof E.stops[0][0]=="object",he=$||E.property!==void 0,me=$||!he,we=E.type||(qi(C)?"exponential":"interval");if(O&&(E=nn({},E),E.stops&&(E.stops=E.stops.map(function(na){return[na[0],vi.parse(na[1])]})),E.default?E.default=vi.parse(E.default):E.default=vi.parse(C.default)),E.colorSpace&&E.colorSpace!=="rgb"&&!wl[E.colorSpace])throw new Error("Unknown color space: "+E.colorSpace);var Ie,$e,ut;if(we==="exponential")Ie=Ro;else if(we==="interval")Ie=Ms;else if(we==="categorical"){Ie=os,$e=Object.create(null);for(var gt=0,Rt=E.stops;gt<Rt.length;gt+=1){var $t=Rt[gt];$e[$t[0]]=$t[1]}ut=typeof E.stops[0][0]}else if(we==="identity")Ie=Ks;else throw new Error('Unknown function type "'+we+'"');if($){for(var Wt={},vr=[],Dr=0;Dr<E.stops.length;Dr++){var sn=E.stops[Dr],Qr=sn[0].zoom;Wt[Qr]===void 0&&(Wt[Qr]={zoom:Qr,type:E.type,property:E.property,default:E.default,stops:[]},vr.push(Qr)),Wt[Qr].stops.push([sn[0].value,sn[1]])}for(var Mn=[],yn=0,Tn=vr;yn<Tn.length;yn+=1){var Rn=Tn[yn];Mn.push([Wt[Rn].zoom,uo(Wt[Rn],C)])}var Vn={name:"linear"};return{kind:"composite",interpolationType:Vn,interpolationFactor:lo.interpolationFactor.bind(void 0,Vn),zoomStops:Mn.map(function(na){return na[0]}),evaluate:function(Ia,_a){var Sa=Ia.zoom;return Ro({stops:Mn,base:E.base},C,Sa).evaluate(Sa,_a)}}}else if(me){var sa=we==="exponential"?{name:"exponential",base:E.base!==void 0?E.base:1}:null;return{kind:"camera",interpolationType:sa,interpolationFactor:lo.interpolationFactor.bind(void 0,sa),zoomStops:E.stops.map(function(na){return na[0]}),evaluate:function(na){var Ia=na.zoom;return Ie(E,C,Ia,$e,ut)}}}else return{kind:"source",evaluate:function(Ia,_a){var Sa=_a&&_a.properties?_a.properties[E.property]:void 0;return Sa===void 0?vo(E.default,C.default):Ie(E,C,Sa,$e,ut)}}}function vo(E,C,O){if(E!==void 0)return E;if(C!==void 0)return C;if(O!==void 0)return O}function os(E,C,O,$,he){var me=typeof O===he?$[O]:void 0;return vo(me,E.default,C.default)}function Ms(E,C,O){if(ja(O)!=="number")return vo(E.default,C.default);var $=E.stops.length;if($===1||O<=E.stops[0][0])return E.stops[0][1];if(O>=E.stops[$-1][0])return E.stops[$-1][1];var he=ws(E.stops.map(function(me){return me[0]}),O);return E.stops[he][1]}function Ro(E,C,O){var $=E.base!==void 0?E.base:1;if(ja(O)!=="number")return vo(E.default,C.default);var he=E.stops.length;if(he===1||O<=E.stops[0][0])return E.stops[0][1];if(O>=E.stops[he-1][0])return E.stops[he-1][1];var me=ws(E.stops.map(function(Rt){return Rt[0]}),O),we=gs(O,$,E.stops[me][0],E.stops[me+1][0]),Ie=E.stops[me][1],$e=E.stops[me+1][1],ut=Ws[C.type]||xi;if(E.colorSpace&&E.colorSpace!=="rgb"){var gt=wl[E.colorSpace];ut=function(Rt,$t){return gt.reverse(gt.interpolate(gt.forward(Rt),gt.forward($t),we))}}return typeof Ie.evaluate=="function"?{evaluate:function(){for(var $t=[],Wt=arguments.length;Wt--;)$t[Wt]=arguments[Wt];var vr=Ie.evaluate.apply(void 0,$t),Dr=$e.evaluate.apply(void 0,$t);if(!(vr===void 0||Dr===void 0))return ut(vr,Dr,we)}}:ut(Ie,$e,we)}function Ks(E,C,O){return C.type==="color"?O=vi.parse(O):C.type==="formatted"?O=Ui.fromString(O.toString()):C.type==="resolvedImage"?O=Ao.fromString(O.toString()):ja(O)!==C.type&&(C.type!=="enum"||!C.values[O])&&(O=void 0),vo(O,E.default,C.default)}function gs(E,C,O,$){var he=$-O,me=E-O;return he===0?0:C===1?me/he:(Math.pow(C,me)-1)/(Math.pow(C,he)-1)}var ss=function(C,O){this.expression=C,this._warningHistory={},this._evaluator=new Ds,this._defaultValue=O?Lu(O):null,this._enumValues=O&&O.type==="enum"?O.values:null};ss.prototype.evaluateWithoutErrorHandling=function(C,O,$,he,me,we){return this._evaluator.globals=C,this._evaluator.feature=O,this._evaluator.featureState=$,this._evaluator.canonical=he,this._evaluator.availableImages=me||null,this._evaluator.formattedSection=we,this.expression.evaluate(this._evaluator)},ss.prototype.evaluate=function(C,O,$,he,me,we){this._evaluator.globals=C,this._evaluator.feature=O||null,this._evaluator.featureState=$||null,this._evaluator.canonical=he,this._evaluator.availableImages=me||null,this._evaluator.formattedSection=we||null;try{var Ie=this.expression.evaluate(this._evaluator);if(Ie==null||typeof Ie=="number"&&Ie!==Ie)return this._defaultValue;if(this._enumValues&&!(Ie in this._enumValues))throw new Fi("Expected value to be one of "+Object.keys(this._enumValues).map(function($e){return JSON.stringify($e)}).join(", ")+", but found "+JSON.stringify(Ie)+" instead.");return Ie}catch($e){return this._warningHistory[$e.message]||(this._warningHistory[$e.message]=!0,typeof console!="undefined"&&console.warn($e.message)),this._defaultValue}};function mo(E){return Array.isArray(E)&&E.length>0&&typeof E[0]=="string"&&E[0]in Jn}function Fl(E,C){var O=new So(Jn,[],C?pu(C):void 0),$=O.parse(E,void 0,void 0,void 0,C&&C.type==="string"?{typeAnnotation:"coerce"}:void 0);return $?mi(new ss($,C)):Ai(O.errors)}var Kl=function(C,O){this.kind=C,this._styleExpression=O,this.isStateDependent=C!=="constant"&&!il(O.expression)};Kl.prototype.evaluateWithoutErrorHandling=function(C,O,$,he,me,we){return this._styleExpression.evaluateWithoutErrorHandling(C,O,$,he,me,we)},Kl.prototype.evaluate=function(C,O,$,he,me,we){return this._styleExpression.evaluate(C,O,$,he,me,we)};var ls=function(C,O,$,he){this.kind=C,this.zoomStops=$,this._styleExpression=O,this.isStateDependent=C!=="camera"&&!il(O.expression),this.interpolationType=he};ls.prototype.evaluateWithoutErrorHandling=function(C,O,$,he,me,we){return this._styleExpression.evaluateWithoutErrorHandling(C,O,$,he,me,we)},ls.prototype.evaluate=function(C,O,$,he,me,we){return this._styleExpression.evaluate(C,O,$,he,me,we)},ls.prototype.interpolationFactor=function(C,O,$){return this.interpolationType?lo.interpolationFactor(this.interpolationType,C,O,$):0};function vu(E,C){if(E=Fl(E,C),E.result==="error")return E;var O=E.value.expression,$=al(O);if(!$&&!li(C))return Ai([new xn("","data expressions not supported")]);var he=Zl(O,["zoom"]);if(!he&&!yo(C))return Ai([new xn("","zoom expressions not supported")]);var me=Cu(O);if(!me&&!he)return Ai([new xn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(me instanceof xn)return Ai([me]);if(me instanceof lo&&!qi(C))return Ai([new xn("",'"interpolate" expressions cannot be used with this property')]);if(!me)return mi($?new Kl("constant",E.value):new Kl("source",E.value));var we=me instanceof lo?me.interpolation:void 0;return mi($?new ls("camera",E.value,me.labels,we):new ls("composite",E.value,me.labels,we))}var Bl=function(C,O){this._parameters=C,this._specification=O,nn(this,uo(this._parameters,this._specification))};Bl.deserialize=function(C){return new Bl(C._parameters,C._specification)},Bl.serialize=function(C){return{_parameters:C._parameters,_specification:C._specification}};function cf(E,C){if(va(E))return new Bl(E,C);if(mo(E)){var O=vu(E,C);if(O.result==="error")throw new Error(O.value.map(function(he){return he.key+": "+he.message}).join(", "));return O.value}else{var $=E;return typeof E=="string"&&C.type==="color"&&($=vi.parse(E)),{kind:"constant",evaluate:function(){return $}}}}function Cu(E){var C=null;if(E instanceof Is)C=Cu(E.result);else if(E instanceof ns)for(var O=0,$=E.args;O<$.length;O+=1){var he=$[O];if(C=Cu(he),C)break}else(E instanceof Ts||E instanceof lo)&&E.input instanceof Mo&&E.input.name==="zoom"&&(C=E);return C instanceof xn||E.eachChild(function(me){var we=Cu(me);we instanceof xn?C=we:!C&&we?C=new xn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&we&&C!==we&&(C=new xn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}function pu(E){var C={color:Bn,string:Rr,number:dr,enum:Rr,boolean:dn,formatted:pa,resolvedImage:ya};return E.type==="array"?la(C[E.value]||bn,E.length):C[E.type]}function Lu(E){return E.type==="color"&&va(E.default)?new vi(0,0,0,0):E.type==="color"?vi.parse(E.default)||null:E.default===void 0?null:E.default}function Ss(E){var C=E.key,O=E.value,$=E.valueSpec||{},he=E.objectElementValidators||{},me=E.style,we=E.styleSpec,Ie=[],$e=ja(O);if($e!=="object")return[new cr(C,O,"object expected, "+$e+" found")];for(var ut in O){var gt=ut.split(".")[0],Rt=$[gt]||$["*"],$t=void 0;if(he[gt])$t=he[gt];else if($[gt])$t=hi;else if(he["*"])$t=he["*"];else if($["*"])$t=hi;else{Ie.push(new cr(C,O[ut],'unknown property "'+ut+'"'));continue}Ie=Ie.concat($t({key:(C&&C+".")+ut,value:O[ut],valueSpec:Rt,style:me,styleSpec:we,object:O,objectKey:ut},O))}for(var Wt in $)he[Wt]||$[Wt].required&&$[Wt].default===void 0&&O[Wt]===void 0&&Ie.push(new cr(C,O,'missing required property "'+Wt+'"'));return Ie}function Yu(E){var C=E.value,O=E.valueSpec,$=E.style,he=E.styleSpec,me=E.key,we=E.arrayElementValidator||hi;if(ja(C)!=="array")return[new cr(me,C,"array expected, "+ja(C)+" found")];if(O.length&&C.length!==O.length)return[new cr(me,C,"array length "+O.length+" expected, length "+C.length+" found")];if(O["min-length"]&&C.length<O["min-length"])return[new cr(me,C,"array length at least "+O["min-length"]+" expected, length "+C.length+" found")];var Ie={type:O.value,values:O.values};he.$version<7&&(Ie.function=O.function),ja(O.value)==="object"&&(Ie=O.value);for(var $e=[],ut=0;ut<C.length;ut++)$e=$e.concat(we({array:C,arrayIndex:ut,value:C[ut],valueSpec:Ie,style:$,styleSpec:he,key:me+"["+ut+"]"}));return $e}function Pu(E){var C=E.key,O=E.value,$=E.valueSpec,he=ja(O);return he==="number"&&O!==O&&(he="NaN"),he!=="number"?[new cr(C,O,"number expected, "+he+" found")]:"minimum"in $&&O<$.minimum?[new cr(C,O,O+" is less than the minimum value "+$.minimum)]:"maximum"in $&&O>$.maximum?[new cr(C,O,O+" is greater than the maximum value "+$.maximum)]:[]}function Du(E){var C=E.valueSpec,O=on(E.value.type),$,he={},me,we,Ie=O!=="categorical"&&E.value.property===void 0,$e=!Ie,ut=ja(E.value.stops)==="array"&&ja(E.value.stops[0])==="array"&&ja(E.value.stops[0][0])==="object",gt=Ss({key:E.key,value:E.value,valueSpec:E.styleSpec.function,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{stops:Rt,default:vr}});return O==="identity"&&Ie&&gt.push(new cr(E.key,E.value,'missing required property "property"')),O!=="identity"&&!E.value.stops&&gt.push(new cr(E.key,E.value,'missing required property "stops"')),O==="exponential"&&E.valueSpec.expression&&!qi(E.valueSpec)&&gt.push(new cr(E.key,E.value,"exponential functions not supported")),E.styleSpec.$version>=8&&($e&&!li(E.valueSpec)?gt.push(new cr(E.key,E.value,"property functions not supported")):Ie&&!yo(E.valueSpec)&&gt.push(new cr(E.key,E.value,"zoom functions not supported"))),(O==="categorical"||ut)&&E.value.property===void 0&&gt.push(new cr(E.key,E.value,'"property" property is required')),gt;function Rt(Dr){if(O==="identity")return[new cr(Dr.key,Dr.value,'identity function may not have a "stops" property')];var sn=[],Qr=Dr.value;return sn=sn.concat(Yu({key:Dr.key,value:Qr,valueSpec:Dr.valueSpec,style:Dr.style,styleSpec:Dr.styleSpec,arrayElementValidator:$t})),ja(Qr)==="array"&&Qr.length===0&&sn.push(new cr(Dr.key,Qr,"array must have at least one stop")),sn}function $t(Dr){var sn=[],Qr=Dr.value,Mn=Dr.key;if(ja(Qr)!=="array")return[new cr(Mn,Qr,"array expected, "+ja(Qr)+" found")];if(Qr.length!==2)return[new cr(Mn,Qr,"array length 2 expected, length "+Qr.length+" found")];if(ut){if(ja(Qr[0])!=="object")return[new cr(Mn,Qr,"object expected, "+ja(Qr[0])+" found")];if(Qr[0].zoom===void 0)return[new cr(Mn,Qr,"object stop key must have zoom")];if(Qr[0].value===void 0)return[new cr(Mn,Qr,"object stop key must have value")];if(we&&we>on(Qr[0].zoom))return[new cr(Mn,Qr[0].zoom,"stop zoom values must appear in ascending order")];on(Qr[0].zoom)!==we&&(we=on(Qr[0].zoom),me=void 0,he={}),sn=sn.concat(Ss({key:Mn+"[0]",value:Qr[0],valueSpec:{zoom:{}},style:Dr.style,styleSpec:Dr.styleSpec,objectElementValidators:{zoom:Pu,value:Wt}}))}else sn=sn.concat(Wt({key:Mn+"[0]",value:Qr[0],valueSpec:{},style:Dr.style,styleSpec:Dr.styleSpec},Qr));return mo(Sn(Qr[1]))?sn.concat([new cr(Mn+"[1]",Qr[1],"expressions are not allowed in function stops.")]):sn.concat(hi({key:Mn+"[1]",value:Qr[1],valueSpec:C,style:Dr.style,styleSpec:Dr.styleSpec}))}function Wt(Dr,sn){var Qr=ja(Dr.value),Mn=on(Dr.value),yn=Dr.value!==null?Dr.value:sn;if(!$)$=Qr;else if(Qr!==$)return[new cr(Dr.key,yn,Qr+" stop domain type must match previous stop domain type "+$)];if(Qr!=="number"&&Qr!=="string"&&Qr!=="boolean")return[new cr(Dr.key,yn,"stop domain value must be a number, string, or boolean")];if(Qr!=="number"&&O!=="categorical"){var Tn="number expected, "+Qr+" found";return li(C)&&O===void 0&&(Tn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new cr(Dr.key,yn,Tn)]}return O==="categorical"&&Qr==="number"&&(!isFinite(Mn)||Math.floor(Mn)!==Mn)?[new cr(Dr.key,yn,"integer expected, found "+Mn)]:O!=="categorical"&&Qr==="number"&&me!==void 0&&Mn<me?[new cr(Dr.key,yn,"stop domain values must appear in ascending order")]:(me=Mn,O==="categorical"&&Mn in he?[new cr(Dr.key,yn,"stop domain values must be unique")]:(he[Mn]=!0,[]))}function vr(Dr){return hi({key:Dr.key,value:Dr.value,valueSpec:C,style:Dr.style,styleSpec:Dr.styleSpec})}}function Io(E){var C=(E.expressionContext==="property"?vu:Fl)(Sn(E.value),E.valueSpec);if(C.result==="error")return C.value.map(function($){return new cr(""+E.key+$.key,E.value,$.message)});var O=C.value.expression||C.value._styleExpression.expression;if(E.expressionContext==="property"&&E.propertyKey==="text-font"&&!O.outputDefined())return[new cr(E.key,E.value,'Invalid data expression for "'+E.propertyKey+'". Output values must be contained as literals within the expression.')];if(E.expressionContext==="property"&&E.propertyType==="layout"&&!il(O))return[new cr(E.key,E.value,'"feature-state" data expressions are not supported with layout properties.')];if(E.expressionContext==="filter"&&!il(O))return[new cr(E.key,E.value,'"feature-state" data expressions are not supported with filters.')];if(E.expressionContext&&E.expressionContext.indexOf("cluster")===0){if(!Zl(O,["zoom","feature-state"]))return[new cr(E.key,E.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(E.expressionContext==="cluster-initial"&&!al(O))return[new cr(E.key,E.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ru(E){var C=E.value,O=E.key,$=ja(C);return $!=="boolean"?[new cr(O,C,"boolean expected, "+$+" found")]:[]}function Ju(E){var C=E.key,O=E.value,$=ja(O);return $!=="string"?[new cr(C,O,"color expected, "+$+" found")]:Hl(O)===null?[new cr(C,O,'color expected, "'+O+'" found')]:[]}function ys(E){var C=E.key,O=E.value,$=E.valueSpec,he=[];return Array.isArray($.values)?$.values.indexOf(on(O))===-1&&he.push(new cr(C,O,"expected one of ["+$.values.join(", ")+"], "+JSON.stringify(O)+" found")):Object.keys($.values).indexOf(on(O))===-1&&he.push(new cr(C,O,"expected one of ["+Object.keys($.values).join(", ")+"], "+JSON.stringify(O)+" found")),he}function du(E){if(E===!0||E===!1)return!0;if(!Array.isArray(E)||E.length===0)return!1;switch(E[0]){case"has":return E.length>=2&&E[1]!=="$id"&&E[1]!=="$type";case"in":return E.length>=3&&(typeof E[1]!="string"||Array.isArray(E[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return E.length!==3||Array.isArray(E[1])||Array.isArray(E[2]);case"any":case"all":for(var C=0,O=E.slice(1);C<O.length;C+=1){var $=O[C];if(!du($)&&typeof $!="boolean")return!1}return!0;default:return!0}}var gu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Iu(E){if(E==null)return{filter:function(){return!0},needGeometry:!1};du(E)||(E=qe(E));var C=Fl(E,gu);if(C.result==="error")throw new Error(C.value.map(function($){return $.key+": "+$.message}).join(", "));var O=He(E);return{filter:function($,he,me){return C.value.evaluate($,he,{},me)},needGeometry:O}}function Re(E,C){return E<C?-1:E>C?1:0}function He(E){if(!Array.isArray(E))return!1;if(E[0]==="within")return!0;for(var C=1;C<E.length;C++)if(He(E[C]))return!0;return!1}function qe(E){if(!E)return!0;var C=E[0];if(E.length<=1)return C!=="any";var O=C==="=="?at(E[1],E[2],"=="):C==="!="?or(at(E[1],E[2],"==")):C==="<"||C===">"||C==="<="||C===">="?at(E[1],E[2],C):C==="any"?bt(E.slice(1)):C==="all"?["all"].concat(E.slice(1).map(qe)):C==="none"?["all"].concat(E.slice(1).map(qe).map(or)):C==="in"?xt(E[1],E.slice(2)):C==="!in"?or(xt(E[1],E.slice(2))):C==="has"?_t(E[1]):C==="!has"?or(_t(E[1])):C==="within"?E:!0;return O}function at(E,C,O){switch(E){case"$type":return["filter-type-"+O,C];case"$id":return["filter-id-"+O,C];default:return["filter-"+O,E,C]}}function bt(E){return["any"].concat(E.map(qe))}function xt(E,C){if(C.length===0)return!1;switch(E){case"$type":return["filter-type-in",["literal",C]];case"$id":return["filter-id-in",["literal",C]];default:return C.length>200&&!C.some(function(O){return typeof O!=typeof C[0]})?["filter-in-large",E,["literal",C.sort(Re)]]:["filter-in-small",E,["literal",C]]}}function _t(E){switch(E){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",E]}}function or(E){return["!",E]}function hr(E){return du(Sn(E.value))?Io(nn({},E,{expressionContext:"filter",valueSpec:{value:"boolean"}})):nr(E)}function nr(E){var C=E.value,O=E.key;if(ja(C)!=="array")return[new cr(O,C,"array expected, "+ja(C)+" found")];var $=E.styleSpec,he,me=[];if(C.length<1)return[new cr(O,C,"filter array must have at least 1 element")];switch(me=me.concat(ys({key:O+"[0]",value:C[0],valueSpec:$.filter_operator,style:E.style,styleSpec:E.styleSpec})),on(C[0])){case"<":case"<=":case">":case">=":C.length>=2&&on(C[1])==="$type"&&me.push(new cr(O,C,'"$type" cannot be use with operator "'+C[0]+'"'));case"==":case"!=":C.length!==3&&me.push(new cr(O,C,'filter array for operator "'+C[0]+'" must have 3 elements'));case"in":case"!in":C.length>=2&&(he=ja(C[1]),he!=="string"&&me.push(new cr(O+"[1]",C[1],"string expected, "+he+" found")));for(var we=2;we<C.length;we++)he=ja(C[we]),on(C[1])==="$type"?me=me.concat(ys({key:O+"["+we+"]",value:C[we],valueSpec:$.geometry_type,style:E.style,styleSpec:E.styleSpec})):he!=="string"&&he!=="number"&&he!=="boolean"&&me.push(new cr(O+"["+we+"]",C[we],"string, number, or boolean expected, "+he+" found"));break;case"any":case"all":case"none":for(var Ie=1;Ie<C.length;Ie++)me=me.concat(nr({key:O+"["+Ie+"]",value:C[Ie],style:E.style,styleSpec:E.styleSpec}));break;case"has":case"!has":he=ja(C[1]),C.length!==2?me.push(new cr(O,C,'filter array for "'+C[0]+'" operator must have 2 elements')):he!=="string"&&me.push(new cr(O+"[1]",C[1],"string expected, "+he+" found"));break;case"within":he=ja(C[1]),C.length!==2?me.push(new cr(O,C,'filter array for "'+C[0]+'" operator must have 2 elements')):he!=="object"&&me.push(new cr(O+"[1]",C[1],"object expected, "+he+" found"));break}return me}function yr(E,C){var O=E.key,$=E.style,he=E.styleSpec,me=E.value,we=E.objectKey,Ie=he[C+"_"+E.layerType];if(!Ie)return[];var $e=we.match(/^(.*)-transition$/);if(C==="paint"&&$e&&Ie[$e[1]]&&Ie[$e[1]].transition)return hi({key:O,value:me,valueSpec:he.transition,style:$,styleSpec:he});var ut=E.valueSpec||Ie[we];if(!ut)return[new cr(O,me,'unknown property "'+we+'"')];var gt;if(ja(me)==="string"&&li(ut)&&!ut.tokens&&(gt=/^{([^}]+)}$/.exec(me)))return[new cr(O,me,'"'+we+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(gt[1])+" }`.")];var Rt=[];return E.layerType==="symbol"&&(we==="text-field"&&$&&!$.glyphs&&Rt.push(new cr(O,me,'use of "text-field" requires a style "glyphs" property')),we==="text-font"&&va(Sn(me))&&on(me.type)==="identity"&&Rt.push(new cr(O,me,'"text-font" does not support identity functions'))),Rt.concat(hi({key:E.key,value:me,valueSpec:ut,style:$,styleSpec:he,expressionContext:"property",propertyType:C,propertyKey:we}))}function Er(E){return yr(E,"paint")}function Vr(E){return yr(E,"layout")}function en(E){var C=[],O=E.value,$=E.key,he=E.style,me=E.styleSpec;!O.type&&!O.ref&&C.push(new cr($,O,'either "type" or "ref" is required'));var we=on(O.type),Ie=on(O.ref);if(O.id)for(var $e=on(O.id),ut=0;ut<E.arrayIndex;ut++){var gt=he.layers[ut];on(gt.id)===$e&&C.push(new cr($,O.id,'duplicate layer id "'+O.id+'", previously used at line '+gt.id.__line__))}if("ref"in O){["type","source","source-layer","filter","layout"].forEach(function(vr){vr in O&&C.push(new cr($,O[vr],'"'+vr+'" is prohibited for ref layers'))});var Rt;he.layers.forEach(function(vr){on(vr.id)===Ie&&(Rt=vr)}),Rt?Rt.ref?C.push(new cr($,O.ref,"ref cannot reference another ref layer")):we=on(Rt.type):C.push(new cr($,O.ref,'ref layer "'+Ie+'" not found'))}else if(we!=="background")if(!O.source)C.push(new cr($,O,'missing required property "source"'));else{var $t=he.sources&&he.sources[O.source],Wt=$t&&on($t.type);$t?Wt==="vector"&&we==="raster"?C.push(new cr($,O.source,'layer "'+O.id+'" requires a raster source')):Wt==="raster"&&we!=="raster"?C.push(new cr($,O.source,'layer "'+O.id+'" requires a vector source')):Wt==="vector"&&!O["source-layer"]?C.push(new cr($,O,'layer "'+O.id+'" must specify a "source-layer"')):Wt==="raster-dem"&&we!=="hillshade"?C.push(new cr($,O.source,"raster-dem source can only be used with layer type 'hillshade'.")):we==="line"&&O.paint&&O.paint["line-gradient"]&&(Wt!=="geojson"||!$t.lineMetrics)&&C.push(new cr($,O,'layer "'+O.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):C.push(new cr($,O.source,'source "'+O.source+'" not found'))}return C=C.concat(Ss({key:$,value:O,valueSpec:me.layer,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return hi({key:$+".type",value:O.type,valueSpec:me.layer.type,style:E.style,styleSpec:E.styleSpec,object:O,objectKey:"type"})},filter:hr,layout:function(Dr){return Ss({layer:O,key:Dr.key,value:Dr.value,style:Dr.style,styleSpec:Dr.styleSpec,objectElementValidators:{"*":function(Qr){return Vr(nn({layerType:we},Qr))}}})},paint:function(Dr){return Ss({layer:O,key:Dr.key,value:Dr.value,style:Dr.style,styleSpec:Dr.styleSpec,objectElementValidators:{"*":function(Qr){return Er(nn({layerType:we},Qr))}}})}}})),C}function mn(E){var C=E.value,O=E.key,$=ja(C);return $!=="string"?[new cr(O,C,"string expected, "+$+" found")]:[]}var Dn={promoteId:da};function Hn(E){var C=E.value,O=E.key,$=E.styleSpec,he=E.style;if(!C.type)return[new cr(O,C,'"type" is required')];var me=on(C.type),we;switch(me){case"vector":case"raster":case"raster-dem":return we=Ss({key:O,value:C,valueSpec:$["source_"+me.replace("-","_")],style:E.style,styleSpec:$,objectElementValidators:Dn}),we;case"geojson":if(we=Ss({key:O,value:C,valueSpec:$.source_geojson,style:he,styleSpec:$,objectElementValidators:Dn}),C.cluster)for(var Ie in C.clusterProperties){var $e=C.clusterProperties[Ie],ut=$e[0],gt=$e[1],Rt=typeof ut=="string"?[ut,["accumulated"],["get",Ie]]:ut;we.push.apply(we,Io({key:O+"."+Ie+".map",value:gt,expressionContext:"cluster-map"})),we.push.apply(we,Io({key:O+"."+Ie+".reduce",value:Rt,expressionContext:"cluster-reduce"}))}return we;case"video":return Ss({key:O,value:C,valueSpec:$.source_video,style:he,styleSpec:$});case"image":return Ss({key:O,value:C,valueSpec:$.source_image,style:he,styleSpec:$});case"canvas":return[new cr(O,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ys({key:O+".type",value:C.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:he,styleSpec:$})}}function da(E){var C=E.key,O=E.value;if(ja(O)==="string")return mn({key:C,value:O});var $=[];for(var he in O)$.push.apply($,mn({key:C+"."+he,value:O[he]}));return $}function ma(E){var C=E.value,O=E.styleSpec,$=O.light,he=E.style,me=[],we=ja(C);if(C===void 0)return me;if(we!=="object")return me=me.concat([new cr("light",C,"object expected, "+we+" found")]),me;for(var Ie in C){var $e=Ie.match(/^(.*)-transition$/);$e&&$[$e[1]]&&$[$e[1]].transition?me=me.concat(hi({key:Ie,value:C[Ie],valueSpec:O.transition,style:he,styleSpec:O})):$[Ie]?me=me.concat(hi({key:Ie,value:C[Ie],valueSpec:$[Ie],style:he,styleSpec:O})):me=me.concat([new cr(Ie,C[Ie],'unknown property "'+Ie+'"')])}return me}function Za(E){return mn(E).length===0?[]:Io(E)}function Ya(E){return mn(E).length===0?[]:Io(E)}var qa={"*":function(){return[]},array:Yu,boolean:Ru,number:Pu,color:Ju,constants:qr,enum:ys,filter:hr,function:Du,layer:en,object:Ss,source:Hn,light:ma,string:mn,formatted:Za,resolvedImage:Ya};function hi(E){var C=E.value,O=E.valueSpec,$=E.styleSpec;if(O.expression&&va(on(C)))return Du(E);if(O.expression&&mo(Sn(C)))return Io(E);if(O.type&&qa[O.type])return qa[O.type](E);var he=Ss(nn({},E,{valueSpec:O.type?$[O.type]:O}));return he}function ao(E){var C=E.value,O=E.key,$=mn(E);return $.length||(C.indexOf("{fontstack}")===-1&&$.push(new cr(O,C,'"glyphs" url must include a "{fontstack}" token')),C.indexOf("{range}")===-1&&$.push(new cr(O,C,'"glyphs" url must include a "{range}" token'))),$}function ri(E,C){C===void 0&&(C=Ft);var O=[];return O=O.concat(hi({key:"",value:E,valueSpec:C.$root,styleSpec:C,style:E,objectElementValidators:{glyphs:ao,"*":function(){return[]}}})),E.constants&&(O=O.concat(qr({key:"constants",value:E.constants,style:E,styleSpec:C}))),Hi(O)}ri.source=fo(Hn),ri.light=fo(ma),ri.layer=fo(en),ri.filter=fo(hr),ri.paintProperty=fo(Er),ri.layoutProperty=fo(Vr);function Hi(E){return[].concat(E).sort(function(C,O){return C.line-O.line})}function fo(E){return function(){for(var C=[],O=arguments.length;O--;)C[O]=arguments[O];return Hi(E.apply(this,C))}}var bo=ri,bi=bo.light,Mi=bo.paintProperty,us=bo.layoutProperty;function po(E,C){var O=!1;if(C&&C.length)for(var $=0,he=C;$<he.length;$+=1){var me=he[$];E.fire(new Pr(new Error(me.message))),O=!0}return O}var Lo=fe,Ho=3;function fe(E,C,O){var $=this.cells=[];if(E instanceof ArrayBuffer){this.arrayBuffer=E;var he=new Int32Array(this.arrayBuffer);E=he[0],C=he[1],O=he[2],this.d=C+2*O;for(var me=0;me<this.d*this.d;me++){var we=he[Ho+me],Ie=he[Ho+me+1];$.push(we===Ie?null:he.subarray(we,Ie))}var $e=he[Ho+$.length],ut=he[Ho+$.length+1];this.keys=he.subarray($e,ut),this.bboxes=he.subarray(ut),this.insert=this._insertReadonly}else{this.d=C+2*O;for(var gt=0;gt<this.d*this.d;gt++)$.push([]);this.keys=[],this.bboxes=[]}this.n=C,this.extent=E,this.padding=O,this.scale=C/E,this.uid=0;var Rt=O/C*E;this.min=-Rt,this.max=E+Rt}fe.prototype.insert=function(E,C,O,$,he){this._forEachCell(C,O,$,he,this._insertCell,this.uid++),this.keys.push(E),this.bboxes.push(C),this.bboxes.push(O),this.bboxes.push($),this.bboxes.push(he)},fe.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},fe.prototype._insertCell=function(E,C,O,$,he,me){this.cells[he].push(me)},fe.prototype.query=function(E,C,O,$,he){var me=this.min,we=this.max;if(E<=me&&C<=me&&we<=O&&we<=$&&!he)return Array.prototype.slice.call(this.keys);var Ie=[],$e={};return this._forEachCell(E,C,O,$,this._queryCell,Ie,$e,he),Ie},fe.prototype._queryCell=function(E,C,O,$,he,me,we,Ie){var $e=this.cells[he];if($e!==null)for(var ut=this.keys,gt=this.bboxes,Rt=0;Rt<$e.length;Rt++){var $t=$e[Rt];if(we[$t]===void 0){var Wt=$t*4;(Ie?Ie(gt[Wt+0],gt[Wt+1],gt[Wt+2],gt[Wt+3]):E<=gt[Wt+2]&&C<=gt[Wt+3]&&O>=gt[Wt+0]&&$>=gt[Wt+1])?(we[$t]=!0,me.push(ut[$t])):we[$t]=!1}}},fe.prototype._forEachCell=function(E,C,O,$,he,me,we,Ie){for(var $e=this._convertToCellCoord(E),ut=this._convertToCellCoord(C),gt=this._convertToCellCoord(O),Rt=this._convertToCellCoord($),$t=$e;$t<=gt;$t++)for(var Wt=ut;Wt<=Rt;Wt++){var vr=this.d*Wt+$t;if(!(Ie&&!Ie(this._convertFromCellCoord($t),this._convertFromCellCoord(Wt),this._convertFromCellCoord($t+1),this._convertFromCellCoord(Wt+1)))&&he.call(this,E,C,O,$,vr,me,we,Ie))return}},fe.prototype._convertFromCellCoord=function(E){return(E-this.padding)/this.scale},fe.prototype._convertToCellCoord=function(E){return Math.max(0,Math.min(this.d-1,Math.floor(E*this.scale)+this.padding))},fe.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var E=this.cells,C=Ho+this.cells.length+1+1,O=0,$=0;$<this.cells.length;$++)O+=this.cells[$].length;var he=new Int32Array(C+O+this.keys.length+this.bboxes.length);he[0]=this.extent,he[1]=this.n,he[2]=this.padding;for(var me=C,we=0;we<E.length;we++){var Ie=E[we];he[Ho+we]=me,he.set(Ie,me),me+=Ie.length}return he[Ho+E.length]=me,he.set(this.keys,me),me+=this.keys.length,he[Ho+E.length+1]=me,he.set(this.bboxes,me),me+=this.bboxes.length,he.buffer};var be=self.ImageData,Ee=self.ImageBitmap,Be={};function ze(E,C,O){O===void 0&&(O={}),Object.defineProperty(C,"_classRegistryKey",{value:E,writeable:!1}),Be[E]={klass:C,omit:O.omit||[],shallow:O.shallow||[]}}ze("Object",Object),Lo.serialize=function(C,O){var $=C.toArrayBuffer();return O&&O.push($),{buffer:$}},Lo.deserialize=function(C){return new Lo(C.buffer)},ze("Grid",Lo),ze("Color",vi),ze("Error",Error),ze("ResolvedImage",Ao),ze("StylePropertyFunction",Bl),ze("StyleExpression",ss,{omit:["_evaluator"]}),ze("ZoomDependentExpression",ls),ze("ZoomConstantExpression",Kl),ze("CompoundExpression",Mo,{omit:["_evaluate"]});for(var We in Jn)Jn[We]._classRegistryKey||ze("Expression_"+We,Jn[We]);function yt(E){return E&&typeof ArrayBuffer!="undefined"&&(E instanceof ArrayBuffer||E.constructor&&E.constructor.name==="ArrayBuffer")}function ht(E){return Ee&&E instanceof Ee}function kt(E,C){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp)return E;if(yt(E)||ht(E))return C&&C.push(E),E;if(ArrayBuffer.isView(E)){var O=E;return C&&C.push(O.buffer),O}if(E instanceof be)return C&&C.push(E.data.buffer),E;if(Array.isArray(E)){for(var $=[],he=0,me=E;he<me.length;he+=1){var we=me[he];$.push(kt(we,C))}return $}if(typeof E=="object"){var Ie=E.constructor,$e=Ie._classRegistryKey;if(!$e)throw new Error("can't serialize object of unregistered class");var ut=Ie.serialize?Ie.serialize(E,C):{};if(!Ie.serialize){for(var gt in E)if(!!E.hasOwnProperty(gt)&&!(Be[$e].omit.indexOf(gt)>=0)){var Rt=E[gt];ut[gt]=Be[$e].shallow.indexOf(gt)>=0?Rt:kt(Rt,C)}E instanceof Error&&(ut.message=E.message)}if(ut.$name)throw new Error("$name property is reserved for worker serialization logic.");return $e!=="Object"&&(ut.$name=$e),ut}throw new Error("can't serialize object of type "+typeof E)}function Vt(E){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp||yt(E)||ht(E)||ArrayBuffer.isView(E)||E instanceof be)return E;if(Array.isArray(E))return E.map(Vt);if(typeof E=="object"){var C=E.$name||"Object",O=Be[C],$=O.klass;if(!$)throw new Error("can't deserialize unregistered class "+C);if($.deserialize)return $.deserialize(E);for(var he=Object.create($.prototype),me=0,we=Object.keys(E);me<we.length;me+=1){var Ie=we[me];if(Ie!=="$name"){var $e=E[Ie];he[Ie]=Be[C].shallow.indexOf(Ie)>=0?$e:Vt($e)}}return he}throw new Error("can't deserialize object of type "+typeof E)}var Zt=function(){this.first=!0};Zt.prototype.update=function(C,O){var $=Math.floor(C);return this.first?(this.first=!1,this.lastIntegerZoom=$,this.lastIntegerZoomTime=0,this.lastZoom=C,this.lastFloorZoom=$,!0):(this.lastFloorZoom>$?(this.lastIntegerZoom=$+1,this.lastIntegerZoomTime=O):this.lastFloorZoom<$&&(this.lastIntegerZoom=$,this.lastIntegerZoomTime=O),C!==this.lastZoom?(this.lastZoom=C,this.lastFloorZoom=$,!0):!1)};var Qt={"Latin-1 Supplement":function(E){return E>=128&&E<=255},Arabic:function(E){return E>=1536&&E<=1791},"Arabic Supplement":function(E){return E>=1872&&E<=1919},"Arabic Extended-A":function(E){return E>=2208&&E<=2303},"Hangul Jamo":function(E){return E>=4352&&E<=4607},"Unified Canadian Aboriginal Syllabics":function(E){return E>=5120&&E<=5759},Khmer:function(E){return E>=6016&&E<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(E){return E>=6320&&E<=6399},"General Punctuation":function(E){return E>=8192&&E<=8303},"Letterlike Symbols":function(E){return E>=8448&&E<=8527},"Number Forms":function(E){return E>=8528&&E<=8591},"Miscellaneous Technical":function(E){return E>=8960&&E<=9215},"Control Pictures":function(E){return E>=9216&&E<=9279},"Optical Character Recognition":function(E){return E>=9280&&E<=9311},"Enclosed Alphanumerics":function(E){return E>=9312&&E<=9471},"Geometric Shapes":function(E){return E>=9632&&E<=9727},"Miscellaneous Symbols":function(E){return E>=9728&&E<=9983},"Miscellaneous Symbols and Arrows":function(E){return E>=11008&&E<=11263},"CJK Radicals Supplement":function(E){return E>=11904&&E<=12031},"Kangxi Radicals":function(E){return E>=12032&&E<=12255},"Ideographic Description Characters":function(E){return E>=12272&&E<=12287},"CJK Symbols and Punctuation":function(E){return E>=12288&&E<=12351},Hiragana:function(E){return E>=12352&&E<=12447},Katakana:function(E){return E>=12448&&E<=12543},Bopomofo:function(E){return E>=12544&&E<=12591},"Hangul Compatibility Jamo":function(E){return E>=12592&&E<=12687},Kanbun:function(E){return E>=12688&&E<=12703},"Bopomofo Extended":function(E){return E>=12704&&E<=12735},"CJK Strokes":function(E){return E>=12736&&E<=12783},"Katakana Phonetic Extensions":function(E){return E>=12784&&E<=12799},"Enclosed CJK Letters and Months":function(E){return E>=12800&&E<=13055},"CJK Compatibility":function(E){return E>=13056&&E<=13311},"CJK Unified Ideographs Extension A":function(E){return E>=13312&&E<=19903},"Yijing Hexagram Symbols":function(E){return E>=19904&&E<=19967},"CJK Unified Ideographs":function(E){return E>=19968&&E<=40959},"Yi Syllables":function(E){return E>=40960&&E<=42127},"Yi Radicals":function(E){return E>=42128&&E<=42191},"Hangul Jamo Extended-A":function(E){return E>=43360&&E<=43391},"Hangul Syllables":function(E){return E>=44032&&E<=55215},"Hangul Jamo Extended-B":function(E){return E>=55216&&E<=55295},"Private Use Area":function(E){return E>=57344&&E<=63743},"CJK Compatibility Ideographs":function(E){return E>=63744&&E<=64255},"Arabic Presentation Forms-A":function(E){return E>=64336&&E<=65023},"Vertical Forms":function(E){return E>=65040&&E<=65055},"CJK Compatibility Forms":function(E){return E>=65072&&E<=65103},"Small Form Variants":function(E){return E>=65104&&E<=65135},"Arabic Presentation Forms-B":function(E){return E>=65136&&E<=65279},"Halfwidth and Fullwidth Forms":function(E){return E>=65280&&E<=65519}};function Ar(E){for(var C=0,O=E;C<O.length;C+=1){var $=O[C];if(Br($.charCodeAt(0)))return!0}return!1}function Kr(E){for(var C=0,O=E;C<O.length;C+=1){var $=O[C];if(!un($.charCodeAt(0)))return!1}return!0}function un(E){return!(Qt.Arabic(E)||Qt["Arabic Supplement"](E)||Qt["Arabic Extended-A"](E)||Qt["Arabic Presentation Forms-A"](E)||Qt["Arabic Presentation Forms-B"](E))}function Sr(E){return E<11904?!1:!!(Qt["Bopomofo Extended"](E)||Qt.Bopomofo(E)||Qt["CJK Compatibility Forms"](E)||Qt["CJK Compatibility Ideographs"](E)||Qt["CJK Compatibility"](E)||Qt["CJK Radicals Supplement"](E)||Qt["CJK Strokes"](E)||Qt["CJK Symbols and Punctuation"](E)||Qt["CJK Unified Ideographs Extension A"](E)||Qt["CJK Unified Ideographs"](E)||Qt["Enclosed CJK Letters and Months"](E)||Qt["Halfwidth and Fullwidth Forms"](E)||Qt.Hiragana(E)||Qt["Ideographic Description Characters"](E)||Qt["Kangxi Radicals"](E)||Qt["Katakana Phonetic Extensions"](E)||Qt.Katakana(E)||Qt["Vertical Forms"](E)||Qt["Yi Radicals"](E)||Qt["Yi Syllables"](E))}function Br(E){return E===746||E===747?!0:E<4352?!1:!!(Qt["Bopomofo Extended"](E)||Qt.Bopomofo(E)||Qt["CJK Compatibility Forms"](E)&&!(E>=65097&&E<=65103)||Qt["CJK Compatibility Ideographs"](E)||Qt["CJK Compatibility"](E)||Qt["CJK Radicals Supplement"](E)||Qt["CJK Strokes"](E)||Qt["CJK Symbols and Punctuation"](E)&&!(E>=12296&&E<=12305)&&!(E>=12308&&E<=12319)&&E!==12336||Qt["CJK Unified Ideographs Extension A"](E)||Qt["CJK Unified Ideographs"](E)||Qt["Enclosed CJK Letters and Months"](E)||Qt["Hangul Compatibility Jamo"](E)||Qt["Hangul Jamo Extended-A"](E)||Qt["Hangul Jamo Extended-B"](E)||Qt["Hangul Jamo"](E)||Qt["Hangul Syllables"](E)||Qt.Hiragana(E)||Qt["Ideographic Description Characters"](E)||Qt.Kanbun(E)||Qt["Kangxi Radicals"](E)||Qt["Katakana Phonetic Extensions"](E)||Qt.Katakana(E)&&E!==12540||Qt["Halfwidth and Fullwidth Forms"](E)&&E!==65288&&E!==65289&&E!==65293&&!(E>=65306&&E<=65310)&&E!==65339&&E!==65341&&E!==65343&&!(E>=65371&&E<=65503)&&E!==65507&&!(E>=65512&&E<=65519)||Qt["Small Form Variants"](E)&&!(E>=65112&&E<=65118)&&!(E>=65123&&E<=65126)||Qt["Unified Canadian Aboriginal Syllabics"](E)||Qt["Unified Canadian Aboriginal Syllabics Extended"](E)||Qt["Vertical Forms"](E)||Qt["Yijing Hexagram Symbols"](E)||Qt["Yi Syllables"](E)||Qt["Yi Radicals"](E))}function Gr(E){return!!(Qt["Latin-1 Supplement"](E)&&(E===167||E===169||E===174||E===177||E===188||E===189||E===190||E===215||E===247)||Qt["General Punctuation"](E)&&(E===8214||E===8224||E===8225||E===8240||E===8241||E===8251||E===8252||E===8258||E===8263||E===8264||E===8265||E===8273)||Qt["Letterlike Symbols"](E)||Qt["Number Forms"](E)||Qt["Miscellaneous Technical"](E)&&(E>=8960&&E<=8967||E>=8972&&E<=8991||E>=8996&&E<=9e3||E===9003||E>=9085&&E<=9114||E>=9150&&E<=9165||E===9167||E>=9169&&E<=9179||E>=9186&&E<=9215)||Qt["Control Pictures"](E)&&E!==9251||Qt["Optical Character Recognition"](E)||Qt["Enclosed Alphanumerics"](E)||Qt["Geometric Shapes"](E)||Qt["Miscellaneous Symbols"](E)&&!(E>=9754&&E<=9759)||Qt["Miscellaneous Symbols and Arrows"](E)&&(E>=11026&&E<=11055||E>=11088&&E<=11097||E>=11192&&E<=11243)||Qt["CJK Symbols and Punctuation"](E)||Qt.Katakana(E)||Qt["Private Use Area"](E)||Qt["CJK Compatibility Forms"](E)||Qt["Small Form Variants"](E)||Qt["Halfwidth and Fullwidth Forms"](E)||E===8734||E===8756||E===8757||E>=9984&&E<=10087||E>=10102&&E<=10131||E===65532||E===65533)}function an(E){return!(Br(E)||Gr(E))}function ln(E){return Qt.Arabic(E)||Qt["Arabic Supplement"](E)||Qt["Arabic Extended-A"](E)||Qt["Arabic Presentation Forms-A"](E)||Qt["Arabic Presentation Forms-B"](E)}function Wr(E){return E>=1424&&E<=2303||Qt["Arabic Presentation Forms-A"](E)||Qt["Arabic Presentation Forms-B"](E)}function Nn(E,C){return!(!C&&Wr(E)||E>=2304&&E<=3583||E>=3840&&E<=4255||Qt.Khmer(E))}function ra(E){for(var C=0,O=E;C<O.length;C+=1){var $=O[C];if(Wr($.charCodeAt(0)))return!0}return!1}function ba(E,C){for(var O=0,$=E;O<$.length;O+=1){var he=$[O];if(!Nn(he.charCodeAt(0),C))return!1}return!0}var oa={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},ka=null,ua=oa.unavailable,Ua=null,Pa=function(E){E&&typeof E=="string"&&E.indexOf("NetworkError")>-1&&(ua=oa.error),ka&&ka(E)};function Ja(){yi.fire(new Yr("pluginStateChange",{pluginStatus:ua,pluginURL:Ua}))}var yi=new wr,co=function(){return ua},Ii=function(E){return E({pluginStatus:ua,pluginURL:Ua}),yi.on("pluginStateChange",E),E},fa=function(E,C,O){if(O===void 0&&(O=!1),ua===oa.deferred||ua===oa.loading||ua===oa.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ua=X.resolveURL(E),ua=oa.deferred,ka=C,Ja(),O||ai()},ai=function(){if(ua!==oa.deferred||!Ua)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ua=oa.loading,Ja(),Ua&&ft({url:Ua},function(E){E?Pa(E):(ua=oa.loaded,Ja())})},Wa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ua===oa.loaded||Wa.applyArabicShaping!=null},isLoading:function(){return ua===oa.loading},setState:function(C){ua=C.pluginStatus,Ua=C.pluginURL},isParsed:function(){return Wa.applyArabicShaping!=null&&Wa.processBidirectionalText!=null&&Wa.processStyledBidirectionalText!=null},getPluginURL:function(){return Ua}},Si=function(){!Wa.isLoading()&&!Wa.isLoaded()&&co()==="deferred"&&ai()},ui=function(C,O){this.zoom=C,O?(this.now=O.now,this.fadeDuration=O.fadeDuration,this.zoomHistory=O.zoomHistory,this.transition=O.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Zt,this.transition={})};ui.prototype.isSupportedScript=function(C){return ba(C,Wa.isLoaded())},ui.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ui.prototype.getCrossfadeParameters=function(){var C=this.zoom,O=C-Math.floor(C),$=this.crossFadingFactor();return C>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:O+(1-O)*$}:{fromScale:.5,toScale:1,t:1-(1-$)*O}};var io=function(C,O){this.property=C,this.value=O,this.expression=cf(O===void 0?C.specification.default:O,C.specification)};io.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},io.prototype.possiblyEvaluate=function(C,O,$){return this.property.possiblyEvaluate(this,C,O,$)};var Qi=function(C){this.property=C,this.value=new io(C,void 0)};Qi.prototype.transitioned=function(C,O){return new Go(this.property,this.value,O,w({},C.transition,this.transition),C.now)},Qi.prototype.untransitioned=function(){return new Go(this.property,this.value,null,{},0)};var go=function(C){this._properties=C,this._values=Object.create(C.defaultTransitionablePropertyValues)};go.prototype.getValue=function(C){return I(this._values[C].value.value)},go.prototype.setValue=function(C,O){this._values.hasOwnProperty(C)||(this._values[C]=new Qi(this._values[C].property)),this._values[C].value=new io(this._values[C].property,O===null?void 0:I(O))},go.prototype.getTransition=function(C){return I(this._values[C].transition)},go.prototype.setTransition=function(C,O){this._values.hasOwnProperty(C)||(this._values[C]=new Qi(this._values[C].property)),this._values[C].transition=I(O)||void 0},go.prototype.serialize=function(){for(var C={},O=0,$=Object.keys(this._values);O<$.length;O+=1){var he=$[O],me=this.getValue(he);me!==void 0&&(C[he]=me);var we=this.getTransition(he);we!==void 0&&(C[he+"-transition"]=we)}return C},go.prototype.transitioned=function(C,O){for(var $=new zo(this._properties),he=0,me=Object.keys(this._values);he<me.length;he+=1){var we=me[he];$._values[we]=this._values[we].transitioned(C,O._values[we])}return $},go.prototype.untransitioned=function(){for(var C=new zo(this._properties),O=0,$=Object.keys(this._values);O<$.length;O+=1){var he=$[O];C._values[he]=this._values[he].untransitioned()}return C};var Go=function(C,O,$,he,me){this.property=C,this.value=O,this.begin=me+he.delay||0,this.end=this.begin+he.duration||0,C.specification.transition&&(he.delay||he.duration)&&(this.prior=$)};Go.prototype.possiblyEvaluate=function(C,O,$){var he=C.now||0,me=this.value.possiblyEvaluate(C,O,$),we=this.prior;if(we){if(he>this.end)return this.prior=null,me;if(this.value.isDataDriven())return this.prior=null,me;if(he<this.begin)return we.possiblyEvaluate(C,O,$);var Ie=(he-this.begin)/(this.end-this.begin);return this.property.interpolate(we.possiblyEvaluate(C,O,$),me,p(Ie))}else return me};var zo=function(C){this._properties=C,this._values=Object.create(C.defaultTransitioningPropertyValues)};zo.prototype.possiblyEvaluate=function(C,O,$){for(var he=new Oi(this._properties),me=0,we=Object.keys(this._values);me<we.length;me+=1){var Ie=we[me];he._values[Ie]=this._values[Ie].possiblyEvaluate(C,O,$)}return he},zo.prototype.hasTransition=function(){for(var C=0,O=Object.keys(this._values);C<O.length;C+=1){var $=O[C];if(this._values[$].prior)return!0}return!1};var Yo=function(C){this._properties=C,this._values=Object.create(C.defaultPropertyValues)};Yo.prototype.getValue=function(C){return I(this._values[C].value)},Yo.prototype.setValue=function(C,O){this._values[C]=new io(this._values[C].property,O===null?void 0:I(O))},Yo.prototype.serialize=function(){for(var C={},O=0,$=Object.keys(this._values);O<$.length;O+=1){var he=$[O],me=this.getValue(he);me!==void 0&&(C[he]=me)}return C},Yo.prototype.possiblyEvaluate=function(C,O,$){for(var he=new Oi(this._properties),me=0,we=Object.keys(this._values);me<we.length;me+=1){var Ie=we[me];he._values[Ie]=this._values[Ie].possiblyEvaluate(C,O,$)}return he};var Gi=function(C,O,$){this.property=C,this.value=O,this.parameters=$};Gi.prototype.isConstant=function(){return this.value.kind==="constant"},Gi.prototype.constantOr=function(C){return this.value.kind==="constant"?this.value.value:C},Gi.prototype.evaluate=function(C,O,$,he){return this.property.evaluate(this.value,this.parameters,C,O,$,he)};var Oi=function(C){this._properties=C,this._values=Object.create(C.defaultPossiblyEvaluatedValues)};Oi.prototype.get=function(C){return this._values[C]};var za=function(C){this.specification=C};za.prototype.possiblyEvaluate=function(C,O){return C.expression.evaluate(O)},za.prototype.interpolate=function(C,O,$){var he=Ws[this.specification.type];return he?he(C,O,$):C};var Xa=function(C,O){this.specification=C,this.overrides=O};Xa.prototype.possiblyEvaluate=function(C,O,$,he){return C.expression.kind==="constant"||C.expression.kind==="camera"?new Gi(this,{kind:"constant",value:C.expression.evaluate(O,null,{},$,he)},O):new Gi(this,C.expression,O)},Xa.prototype.interpolate=function(C,O,$){if(C.value.kind!=="constant"||O.value.kind!=="constant")return C;if(C.value.value===void 0||O.value.value===void 0)return new Gi(this,{kind:"constant",value:void 0},C.parameters);var he=Ws[this.specification.type];return he?new Gi(this,{kind:"constant",value:he(C.value.value,O.value.value,$)},C.parameters):C},Xa.prototype.evaluate=function(C,O,$,he,me,we){return C.kind==="constant"?C.value:C.evaluate(O,$,he,me,we)};var xo=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function($,he,me,we){if($.value===void 0)return new Gi(this,{kind:"constant",value:void 0},he);if($.expression.kind==="constant"){var Ie=$.expression.evaluate(he,null,{},me,we),$e=$.property.specification.type==="resolvedImage",ut=$e&&typeof Ie!="string"?Ie.name:Ie,gt=this._calculate(ut,ut,ut,he);return new Gi(this,{kind:"constant",value:gt},he)}else if($.expression.kind==="camera"){var Rt=this._calculate($.expression.evaluate({zoom:he.zoom-1}),$.expression.evaluate({zoom:he.zoom}),$.expression.evaluate({zoom:he.zoom+1}),he);return new Gi(this,{kind:"constant",value:Rt},he)}else return new Gi(this,$.expression,he)},C.prototype.evaluate=function($,he,me,we,Ie,$e){if($.kind==="source"){var ut=$.evaluate(he,me,we,Ie,$e);return this._calculate(ut,ut,ut,he)}else return $.kind==="composite"?this._calculate($.evaluate({zoom:Math.floor(he.zoom)-1},me,we),$.evaluate({zoom:Math.floor(he.zoom)},me,we),$.evaluate({zoom:Math.floor(he.zoom)+1},me,we),he):$.value},C.prototype._calculate=function($,he,me,we){var Ie=we.zoom;return Ie>we.zoomHistory.lastIntegerZoom?{from:$,to:he}:{from:me,to:he}},C.prototype.interpolate=function($){return $},C}(Xa),eo=function(C){this.specification=C};eo.prototype.possiblyEvaluate=function(C,O,$,he){if(C.value!==void 0)if(C.expression.kind==="constant"){var me=C.expression.evaluate(O,null,{},$,he);return this._calculate(me,me,me,O)}else return this._calculate(C.expression.evaluate(new ui(Math.floor(O.zoom-1),O)),C.expression.evaluate(new ui(Math.floor(O.zoom),O)),C.expression.evaluate(new ui(Math.floor(O.zoom+1),O)),O)},eo.prototype._calculate=function(C,O,$,he){var me=he.zoom;return me>he.zoomHistory.lastIntegerZoom?{from:C,to:O}:{from:$,to:O}},eo.prototype.interpolate=function(C){return C};var Po=function(C){this.specification=C};Po.prototype.possiblyEvaluate=function(C,O,$,he){return!!C.expression.evaluate(O,null,{},$,he)},Po.prototype.interpolate=function(){return!1};var Xi=function(C){this.properties=C,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var O in C){var $=C[O];$.specification.overridable&&this.overridableProperties.push(O);var he=this.defaultPropertyValues[O]=new io($,void 0),me=this.defaultTransitionablePropertyValues[O]=new Qi($);this.defaultTransitioningPropertyValues[O]=me.untransitioned(),this.defaultPossiblyEvaluatedValues[O]=he.possiblyEvaluate({})}};ze("DataDrivenProperty",Xa),ze("DataConstantProperty",za),ze("CrossFadedDataDrivenProperty",xo),ze("CrossFadedProperty",eo),ze("ColorRampProperty",Po);var Wo="-transition",ms=function(E){function C(O,$){if(E.call(this),this.id=O.id,this.type=O.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},O.type!=="custom"&&(O=O,this.metadata=O.metadata,this.minzoom=O.minzoom,this.maxzoom=O.maxzoom,O.type!=="background"&&(this.source=O.source,this.sourceLayer=O["source-layer"],this.filter=O.filter),$.layout&&(this._unevaluatedLayout=new Yo($.layout)),$.paint)){this._transitionablePaint=new go($.paint);for(var he in O.paint)this.setPaintProperty(he,O.paint[he],{validate:!1});for(var me in O.layout)this.setLayoutProperty(me,O.layout[me],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Oi($.paint)}}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},C.prototype.getLayoutProperty=function($){return $==="visibility"?this.visibility:this._unevaluatedLayout.getValue($)},C.prototype.setLayoutProperty=function($,he,me){if(me===void 0&&(me={}),he!=null){var we="layers."+this.id+".layout."+$;if(this._validate(us,we,$,he,me))return}if($==="visibility"){this.visibility=he;return}this._unevaluatedLayout.setValue($,he)},C.prototype.getPaintProperty=function($){return k($,Wo)?this._transitionablePaint.getTransition($.slice(0,-Wo.length)):this._transitionablePaint.getValue($)},C.prototype.setPaintProperty=function($,he,me){if(me===void 0&&(me={}),he!=null){var we="layers."+this.id+".paint."+$;if(this._validate(Mi,we,$,he,me))return!1}if(k($,Wo))return this._transitionablePaint.setTransition($.slice(0,-Wo.length),he||void 0),!1;var Ie=this._transitionablePaint._values[$],$e=Ie.property.specification["property-type"]==="cross-faded-data-driven",ut=Ie.value.isDataDriven(),gt=Ie.value;this._transitionablePaint.setValue($,he),this._handleSpecialPaintPropertyUpdate($);var Rt=this._transitionablePaint._values[$].value,$t=Rt.isDataDriven();return $t||ut||$e||this._handleOverridablePaintPropertyUpdate($,gt,Rt)},C.prototype._handleSpecialPaintPropertyUpdate=function($){},C.prototype._handleOverridablePaintPropertyUpdate=function($,he,me){return!1},C.prototype.isHidden=function($){return this.minzoom&&$<this.minzoom||this.maxzoom&&$>=this.maxzoom?!0:this.visibility==="none"},C.prototype.updateTransitions=function($){this._transitioningPaint=this._transitionablePaint.transitioned($,this._transitioningPaint)},C.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},C.prototype.recalculate=function($,he){$.getCrossfadeParameters&&(this._crossfadeParameters=$.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate($,void 0,he)),this.paint=this._transitioningPaint.possiblyEvaluate($,void 0,he)},C.prototype.serialize=function(){var $={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&($.layout=$.layout||{},$.layout.visibility=this.visibility),z($,function(he,me){return he!==void 0&&!(me==="layout"&&!Object.keys(he).length)&&!(me==="paint"&&!Object.keys(he).length)})},C.prototype._validate=function($,he,me,we,Ie){return Ie===void 0&&(Ie={}),Ie&&Ie.validate===!1?!1:po(this,$.call(bo,{key:he,layerType:this.type,objectKey:me,value:we,styleSpec:Ft,style:{glyphs:!0,sprite:!0}}))},C.prototype.is3D=function(){return!1},C.prototype.isTileClipped=function(){return!1},C.prototype.hasOffscreenPass=function(){return!1},C.prototype.resize=function(){},C.prototype.isStateDependent=function(){for(var $ in this.paint._values){var he=this.paint.get($);if(!(!(he instanceof Gi)||!li(he.property.specification))&&(he.value.kind==="source"||he.value.kind==="composite")&&he.value.isStateDependent)return!0}return!1},C}(wr),Ol={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Zi=function(C,O){this._structArray=C,this._pos1=O*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Qu=128,Tl=5,Bi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Bi.serialize=function(C,O){return C._trim(),O&&(C.isTransferred=!0,O.push(C.arrayBuffer)),{length:C.length,arrayBuffer:C.arrayBuffer}},Bi.deserialize=function(C){var O=Object.create(this.prototype);return O.arrayBuffer=C.arrayBuffer,O.length=C.length,O.capacity=C.arrayBuffer.byteLength/O.bytesPerElement,O._refreshViews(),O},Bi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Bi.prototype.clear=function(){this.length=0},Bi.prototype.resize=function(C){this.reserve(C),this.length=C},Bi.prototype.reserve=function(C){if(C>this.capacity){this.capacity=Math.max(C,Math.floor(this.capacity*Tl),Qu),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var O=this.uint8;this._refreshViews(),O&&this.uint8.set(O)}},Bi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function Do(E,C){C===void 0&&(C=1);var O=0,$=0,he=E.map(function(we){var Ie=Zc(we.type),$e=O=Tf(O,Math.max(C,Ie)),ut=we.components||1;return $=Math.max($,Ie),O+=Ie*ut,{name:we.name,type:we.type,components:ut,offset:$e}}),me=Tf(O,Math.max($,C));return{members:he,size:me,alignment:C}}function Zc(E){return Ol[E].BYTES_PER_ELEMENT}function Tf(E,C){return Math.ceil(E/C)*C}var hf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he){var me=this.length;return this.resize(me+1),this.emplace(me,$,he)},C.prototype.emplace=function($,he,me){var we=$*2;return this.int16[we+0]=he,this.int16[we+1]=me,$},C}(Bi);hf.prototype.bytesPerElement=4,ze("StructArrayLayout2i4",hf);var zu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,$,he,me,we)},C.prototype.emplace=function($,he,me,we,Ie){var $e=$*4;return this.int16[$e+0]=he,this.int16[$e+1]=me,this.int16[$e+2]=we,this.int16[$e+3]=Ie,$},C}(Bi);zu.prototype.bytesPerElement=8,ze("StructArrayLayout4i8",zu);var $u=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e){var ut=this.length;return this.resize(ut+1),this.emplace(ut,$,he,me,we,Ie,$e)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut){var gt=$*6;return this.int16[gt+0]=he,this.int16[gt+1]=me,this.int16[gt+2]=we,this.int16[gt+3]=Ie,this.int16[gt+4]=$e,this.int16[gt+5]=ut,$},C}(Bi);$u.prototype.bytesPerElement=12,ze("StructArrayLayout2i4i12",$u);var Af=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e){var ut=this.length;return this.resize(ut+1),this.emplace(ut,$,he,me,we,Ie,$e)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut){var gt=$*4,Rt=$*8;return this.int16[gt+0]=he,this.int16[gt+1]=me,this.uint8[Rt+4]=we,this.uint8[Rt+5]=Ie,this.uint8[Rt+6]=$e,this.uint8[Rt+7]=ut,$},C}(Bi);Af.prototype.bytesPerElement=8,ze("StructArrayLayout2i4ub8",Af);var Fs=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e,ut,gt,Rt,$t){var Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,$,he,me,we,Ie,$e,ut,gt,Rt,$t)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut,gt,Rt,$t,Wt){var vr=$*9,Dr=$*18;return this.uint16[vr+0]=he,this.uint16[vr+1]=me,this.uint16[vr+2]=we,this.uint16[vr+3]=Ie,this.uint16[vr+4]=$e,this.uint16[vr+5]=ut,this.uint16[vr+6]=gt,this.uint16[vr+7]=Rt,this.uint8[Dr+16]=$t,this.uint8[Dr+17]=Wt,$},C}(Bi);Fs.prototype.bytesPerElement=18,ze("StructArrayLayout8ui2ub18",Fs);var Fu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e,ut,gt,Rt,$t,Wt,vr){var Dr=this.length;return this.resize(Dr+1),this.emplace(Dr,$,he,me,we,Ie,$e,ut,gt,Rt,$t,Wt,vr)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut,gt,Rt,$t,Wt,vr,Dr){var sn=$*12;return this.int16[sn+0]=he,this.int16[sn+1]=me,this.int16[sn+2]=we,this.int16[sn+3]=Ie,this.uint16[sn+4]=$e,this.uint16[sn+5]=ut,this.uint16[sn+6]=gt,this.uint16[sn+7]=Rt,this.int16[sn+8]=$t,this.int16[sn+9]=Wt,this.int16[sn+10]=vr,this.int16[sn+11]=Dr,$},C}(Bi);Fu.prototype.bytesPerElement=24,ze("StructArrayLayout4i4ui4i24",Fu);var Jf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me){var we=this.length;return this.resize(we+1),this.emplace(we,$,he,me)},C.prototype.emplace=function($,he,me,we){var Ie=$*3;return this.float32[Ie+0]=he,this.float32[Ie+1]=me,this.float32[Ie+2]=we,$},C}(Bi);Jf.prototype.bytesPerElement=12,ze("StructArrayLayout3f12",Jf);var Qf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($){var he=this.length;return this.resize(he+1),this.emplace(he,$)},C.prototype.emplace=function($,he){var me=$*1;return this.uint32[me+0]=he,$},C}(Bi);Qf.prototype.bytesPerElement=4,ze("StructArrayLayout1ul4",Qf);var vf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e,ut,gt,Rt){var $t=this.length;return this.resize($t+1),this.emplace($t,$,he,me,we,Ie,$e,ut,gt,Rt)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut,gt,Rt,$t){var Wt=$*10,vr=$*5;return this.int16[Wt+0]=he,this.int16[Wt+1]=me,this.int16[Wt+2]=we,this.int16[Wt+3]=Ie,this.int16[Wt+4]=$e,this.int16[Wt+5]=ut,this.uint32[vr+3]=gt,this.uint16[Wt+8]=Rt,this.uint16[Wt+9]=$t,$},C}(Bi);vf.prototype.bytesPerElement=20,ze("StructArrayLayout6i1ul2ui20",vf);var Mf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e){var ut=this.length;return this.resize(ut+1),this.emplace(ut,$,he,me,we,Ie,$e)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut){var gt=$*6;return this.int16[gt+0]=he,this.int16[gt+1]=me,this.int16[gt+2]=we,this.int16[gt+3]=Ie,this.int16[gt+4]=$e,this.int16[gt+5]=ut,$},C}(Bi);Mf.prototype.bytesPerElement=12,ze("StructArrayLayout2i2i2i12",Mf);var yu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie){var $e=this.length;return this.resize($e+1),this.emplace($e,$,he,me,we,Ie)},C.prototype.emplace=function($,he,me,we,Ie,$e){var ut=$*4,gt=$*8;return this.float32[ut+0]=he,this.float32[ut+1]=me,this.float32[ut+2]=we,this.int16[gt+6]=Ie,this.int16[gt+7]=$e,$},C}(Bi);yu.prototype.bytesPerElement=16,ze("StructArrayLayout2f1f2i16",yu);var Js=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,$,he,me,we)},C.prototype.emplace=function($,he,me,we,Ie){var $e=$*12,ut=$*3;return this.uint8[$e+0]=he,this.uint8[$e+1]=me,this.float32[ut+1]=we,this.float32[ut+2]=Ie,$},C}(Bi);Js.prototype.bytesPerElement=12,ze("StructArrayLayout2ub2f12",Js);var mu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me){var we=this.length;return this.resize(we+1),this.emplace(we,$,he,me)},C.prototype.emplace=function($,he,me,we){var Ie=$*3;return this.uint16[Ie+0]=he,this.uint16[Ie+1]=me,this.uint16[Ie+2]=we,$},C}(Bi);mu.prototype.bytesPerElement=6,ze("StructArrayLayout3ui6",mu);var pf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e,ut,gt,Rt,$t,Wt,vr,Dr,sn,Qr,Mn,yn){var Tn=this.length;return this.resize(Tn+1),this.emplace(Tn,$,he,me,we,Ie,$e,ut,gt,Rt,$t,Wt,vr,Dr,sn,Qr,Mn,yn)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut,gt,Rt,$t,Wt,vr,Dr,sn,Qr,Mn,yn,Tn){var Rn=$*24,Vn=$*12,sa=$*48;return this.int16[Rn+0]=he,this.int16[Rn+1]=me,this.uint16[Rn+2]=we,this.uint16[Rn+3]=Ie,this.uint32[Vn+2]=$e,this.uint32[Vn+3]=ut,this.uint32[Vn+4]=gt,this.uint16[Rn+10]=Rt,this.uint16[Rn+11]=$t,this.uint16[Rn+12]=Wt,this.float32[Vn+7]=vr,this.float32[Vn+8]=Dr,this.uint8[sa+36]=sn,this.uint8[sa+37]=Qr,this.uint8[sa+38]=Mn,this.uint32[Vn+10]=yn,this.int16[Rn+22]=Tn,$},C}(Bi);pf.prototype.bytesPerElement=48,ze("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",pf);var Sf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e,ut,gt,Rt,$t,Wt,vr,Dr,sn,Qr,Mn,yn,Tn,Rn,Vn,sa,na,Ia,_a,Sa,ei,La,Ra){var ci=this.length;return this.resize(ci+1),this.emplace(ci,$,he,me,we,Ie,$e,ut,gt,Rt,$t,Wt,vr,Dr,sn,Qr,Mn,yn,Tn,Rn,Vn,sa,na,Ia,_a,Sa,ei,La,Ra)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut,gt,Rt,$t,Wt,vr,Dr,sn,Qr,Mn,yn,Tn,Rn,Vn,sa,na,Ia,_a,Sa,ei,La,Ra,ci){var Qa=$*34,ki=$*17;return this.int16[Qa+0]=he,this.int16[Qa+1]=me,this.int16[Qa+2]=we,this.int16[Qa+3]=Ie,this.int16[Qa+4]=$e,this.int16[Qa+5]=ut,this.int16[Qa+6]=gt,this.int16[Qa+7]=Rt,this.uint16[Qa+8]=$t,this.uint16[Qa+9]=Wt,this.uint16[Qa+10]=vr,this.uint16[Qa+11]=Dr,this.uint16[Qa+12]=sn,this.uint16[Qa+13]=Qr,this.uint16[Qa+14]=Mn,this.uint16[Qa+15]=yn,this.uint16[Qa+16]=Tn,this.uint16[Qa+17]=Rn,this.uint16[Qa+18]=Vn,this.uint16[Qa+19]=sa,this.uint16[Qa+20]=na,this.uint16[Qa+21]=Ia,this.uint16[Qa+22]=_a,this.uint32[ki+12]=Sa,this.float32[ki+13]=ei,this.float32[ki+14]=La,this.float32[ki+15]=Ra,this.float32[ki+16]=ci,$},C}(Bi);Sf.prototype.bytesPerElement=68,ze("StructArrayLayout8i15ui1ul4f68",Sf);var qu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($){var he=this.length;return this.resize(he+1),this.emplace(he,$)},C.prototype.emplace=function($,he){var me=$*1;return this.float32[me+0]=he,$},C}(Bi);qu.prototype.bytesPerElement=4,ze("StructArrayLayout1f4",qu);var $f=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me){var we=this.length;return this.resize(we+1),this.emplace(we,$,he,me)},C.prototype.emplace=function($,he,me,we){var Ie=$*3;return this.int16[Ie+0]=he,this.int16[Ie+1]=me,this.int16[Ie+2]=we,$},C}(Bi);$f.prototype.bytesPerElement=6,ze("StructArrayLayout3i6",$f);var Bu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me){var we=this.length;return this.resize(we+1),this.emplace(we,$,he,me)},C.prototype.emplace=function($,he,me,we){var Ie=$*2,$e=$*4;return this.uint32[Ie+0]=he,this.uint16[$e+2]=me,this.uint16[$e+3]=we,$},C}(Bi);Bu.prototype.bytesPerElement=8,ze("StructArrayLayout1ul2ui8",Bu);var df=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he){var me=this.length;return this.resize(me+1),this.emplace(me,$,he)},C.prototype.emplace=function($,he,me){var we=$*2;return this.uint16[we+0]=he,this.uint16[we+1]=me,$},C}(Bi);df.prototype.bytesPerElement=4,ze("StructArrayLayout2ui4",df);var ef=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($){var he=this.length;return this.resize(he+1),this.emplace(he,$)},C.prototype.emplace=function($,he){var me=$*1;return this.uint16[me+0]=he,$},C}(Bi);ef.prototype.bytesPerElement=2,ze("StructArrayLayout1ui2",ef);var Ou=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he){var me=this.length;return this.resize(me+1),this.emplace(me,$,he)},C.prototype.emplace=function($,he,me){var we=$*2;return this.float32[we+0]=he,this.float32[we+1]=me,$},C}(Bi);Ou.prototype.bytesPerElement=8,ze("StructArrayLayout2f8",Ou);var qf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,$,he,me,we)},C.prototype.emplace=function($,he,me,we,Ie){var $e=$*4;return this.float32[$e+0]=he,this.float32[$e+1]=me,this.float32[$e+2]=we,this.float32[$e+3]=Ie,$},C}(Bi);qf.prototype.bytesPerElement=16,ze("StructArrayLayout4f16",qf);var mc=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var O={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return O.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},O.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},O.x1.get=function(){return this._structArray.int16[this._pos2+2]},O.y1.get=function(){return this._structArray.int16[this._pos2+3]},O.x2.get=function(){return this._structArray.int16[this._pos2+4]},O.y2.get=function(){return this._structArray.int16[this._pos2+5]},O.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},O.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},O.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},O.anchorPoint.get=function(){return new f(this.anchorPointX,this.anchorPointY)},Object.defineProperties(C.prototype,O),C}(Zi);mc.prototype.size=20;var Nu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function($){return new mc(this,$)},C}(vf);ze("CollisionBoxArray",Nu);var ec=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var O={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return O.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},O.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},O.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},O.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},O.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},O.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},O.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},O.segment.get=function(){return this._structArray.uint16[this._pos2+10]},O.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},O.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},O.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},O.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},O.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},O.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},O.placedOrientation.set=function($){this._structArray.uint8[this._pos1+37]=$},O.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},O.hidden.set=function($){this._structArray.uint8[this._pos1+38]=$},O.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},O.crossTileID.set=function($){this._structArray.uint32[this._pos4+10]=$},O.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(C.prototype,O),C}(Zi);ec.prototype.size=48;var tf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function($){return new ec(this,$)},C}(pf);ze("PlacedSymbolArray",tf);var xc=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var O={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return O.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},O.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},O.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},O.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},O.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},O.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},O.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},O.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},O.key.get=function(){return this._structArray.uint16[this._pos2+8]},O.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},O.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},O.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},O.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},O.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},O.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},O.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},O.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},O.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},O.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},O.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},O.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},O.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},O.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},O.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},O.crossTileID.set=function($){this._structArray.uint32[this._pos4+12]=$},O.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},O.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},O.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},O.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(C.prototype,O),C}(Zi);xc.prototype.size=68;var bc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function($){return new xc(this,$)},C}(Sf);ze("SymbolInstanceArray",bc);var Nl=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getoffsetX=function($){return this.float32[$*1+0]},C}(qu);ze("GlyphOffsetArray",Nl);var _c=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getx=function($){return this.int16[$*3+0]},C.prototype.gety=function($){return this.int16[$*3+1]},C.prototype.gettileUnitDistanceFromAnchor=function($){return this.int16[$*3+2]},C}($f);ze("SymbolLineVertexArray",_c);var wc=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var O={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return O.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},O.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},O.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(C.prototype,O),C}(Zi);wc.prototype.size=8;var tc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function($){return new wc(this,$)},C}(Bu);ze("FeatureIndexArray",tc);var Tc=Do([{name:"a_pos",components:2,type:"Int16"}],4),ce=Tc.members,H=function(C){C===void 0&&(C=[]),this.segments=C};H.prototype.prepareSegment=function(C,O,$,he){var me=this.segments[this.segments.length-1];return C>H.MAX_VERTEX_ARRAY_LENGTH&&B("Max vertices per segment is "+H.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+C),(!me||me.vertexLength+C>H.MAX_VERTEX_ARRAY_LENGTH||me.sortKey!==he)&&(me={vertexOffset:O.length,primitiveOffset:$.length,vertexLength:0,primitiveLength:0},he!==void 0&&(me.sortKey=he),this.segments.push(me)),me},H.prototype.get=function(){return this.segments},H.prototype.destroy=function(){for(var C=0,O=this.segments;C<O.length;C+=1){var $=O[C];for(var he in $.vaos)$.vaos[he].destroy()}},H.simpleSegment=function(C,O,$,he){return new H([{vertexOffset:C,primitiveOffset:O,vertexLength:$,primitiveLength:he,vaos:{},sortKey:0}])},H.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ze("SegmentVector",H);function ve(E,C){return E=v(Math.floor(E),0,255),C=v(Math.floor(C),0,255),256*E+C}var j=Do([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),de=a(function(E){function C(O,$){var he,me,we,Ie,$e,ut,gt,Rt;for(he=O.length&3,me=O.length-he,we=$,$e=3432918353,ut=461845907,Rt=0;Rt<me;)gt=O.charCodeAt(Rt)&255|(O.charCodeAt(++Rt)&255)<<8|(O.charCodeAt(++Rt)&255)<<16|(O.charCodeAt(++Rt)&255)<<24,++Rt,gt=(gt&65535)*$e+(((gt>>>16)*$e&65535)<<16)&4294967295,gt=gt<<15|gt>>>17,gt=(gt&65535)*ut+(((gt>>>16)*ut&65535)<<16)&4294967295,we^=gt,we=we<<13|we>>>19,Ie=(we&65535)*5+(((we>>>16)*5&65535)<<16)&4294967295,we=(Ie&65535)+27492+(((Ie>>>16)+58964&65535)<<16);switch(gt=0,he){case 3:gt^=(O.charCodeAt(Rt+2)&255)<<16;case 2:gt^=(O.charCodeAt(Rt+1)&255)<<8;case 1:gt^=O.charCodeAt(Rt)&255,gt=(gt&65535)*$e+(((gt>>>16)*$e&65535)<<16)&4294967295,gt=gt<<15|gt>>>17,gt=(gt&65535)*ut+(((gt>>>16)*ut&65535)<<16)&4294967295,we^=gt}return we^=O.length,we^=we>>>16,we=(we&65535)*2246822507+(((we>>>16)*2246822507&65535)<<16)&4294967295,we^=we>>>13,we=(we&65535)*3266489909+(((we>>>16)*3266489909&65535)<<16)&4294967295,we^=we>>>16,we>>>0}E.exports=C}),Ae=a(function(E){function C(O,$){for(var he=O.length,me=$^he,we=0,Ie;he>=4;)Ie=O.charCodeAt(we)&255|(O.charCodeAt(++we)&255)<<8|(O.charCodeAt(++we)&255)<<16|(O.charCodeAt(++we)&255)<<24,Ie=(Ie&65535)*1540483477+(((Ie>>>16)*1540483477&65535)<<16),Ie^=Ie>>>24,Ie=(Ie&65535)*1540483477+(((Ie>>>16)*1540483477&65535)<<16),me=(me&65535)*1540483477+(((me>>>16)*1540483477&65535)<<16)^Ie,he-=4,++we;switch(he){case 3:me^=(O.charCodeAt(we+2)&255)<<16;case 2:me^=(O.charCodeAt(we+1)&255)<<8;case 1:me^=O.charCodeAt(we)&255,me=(me&65535)*1540483477+(((me>>>16)*1540483477&65535)<<16)}return me^=me>>>13,me=(me&65535)*1540483477+(((me>>>16)*1540483477&65535)<<16),me^=me>>>15,me>>>0}E.exports=C}),Ce=de,Ye=de,lt=Ae;Ce.murmur3=Ye,Ce.murmur2=lt;var wt=function(){this.ids=[],this.positions=[],this.indexed=!1};wt.prototype.add=function(C,O,$,he){this.ids.push(ar(C)),this.positions.push(O,$,he)},wt.prototype.getPositions=function(C){for(var O=ar(C),$=0,he=this.ids.length-1;$<he;){var me=$+he>>1;this.ids[me]>=O?he=me:$=me+1}for(var we=[];this.ids[$]===O;){var Ie=this.positions[3*$],$e=this.positions[3*$+1],ut=this.positions[3*$+2];we.push({index:Ie,start:$e,end:ut}),$++}return we},wt.serialize=function(C,O){var $=new Float64Array(C.ids),he=new Uint32Array(C.positions);return fr($,he,0,$.length-1),O&&O.push($.buffer,he.buffer),{ids:$,positions:he}},wt.deserialize=function(C){var O=new wt;return O.ids=C.ids,O.positions=C.positions,O.indexed=!0,O};var Yt=Math.pow(2,53)-1;function ar(E){var C=+E;return!isNaN(C)&&C<=Yt?C:Ce(String(E))}function fr(E,C,O,$){for(;O<$;){for(var he=E[O+$>>1],me=O-1,we=$+1;;){do me++;while(E[me]<he);do we--;while(E[we]>he);if(me>=we)break;kr(E,me,we),kr(C,3*me,3*we),kr(C,3*me+1,3*we+1),kr(C,3*me+2,3*we+2)}we-O<$-we?(fr(E,C,O,we),O=we+1):(fr(E,C,we+1,$),$=we)}}function kr(E,C,O){var $=E[C];E[C]=E[O],E[O]=$}ze("FeaturePositionMap",wt);var Fr=function(C,O){this.gl=C.gl,this.location=O},Or=function(E){function C(O,$){E.call(this,O,$),this.current=0}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function($){this.current!==$&&(this.current=$,this.gl.uniform1i(this.location,$))},C}(Fr),zr=function(E){function C(O,$){E.call(this,O,$),this.current=0}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function($){this.current!==$&&(this.current=$,this.gl.uniform1f(this.location,$))},C}(Fr),jr=function(E){function C(O,$){E.call(this,O,$),this.current=[0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function($){($[0]!==this.current[0]||$[1]!==this.current[1])&&(this.current=$,this.gl.uniform2f(this.location,$[0],$[1]))},C}(Fr),cn=function(E){function C(O,$){E.call(this,O,$),this.current=[0,0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function($){($[0]!==this.current[0]||$[1]!==this.current[1]||$[2]!==this.current[2])&&(this.current=$,this.gl.uniform3f(this.location,$[0],$[1],$[2]))},C}(Fr),En=function(E){function C(O,$){E.call(this,O,$),this.current=[0,0,0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function($){($[0]!==this.current[0]||$[1]!==this.current[1]||$[2]!==this.current[2]||$[3]!==this.current[3])&&(this.current=$,this.gl.uniform4f(this.location,$[0],$[1],$[2],$[3]))},C}(Fr),Fn=function(E){function C(O,$){E.call(this,O,$),this.current=vi.transparent}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function($){($.r!==this.current.r||$.g!==this.current.g||$.b!==this.current.b||$.a!==this.current.a)&&(this.current=$,this.gl.uniform4f(this.location,$.r,$.g,$.b,$.a))},C}(Fr),jn=new Float32Array(16),qn=function(E){function C(O,$){E.call(this,O,$),this.current=jn}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function($){if($[12]!==this.current[12]||$[0]!==this.current[0]){this.current=$,this.gl.uniformMatrix4fv(this.location,!1,$);return}for(var he=1;he<16;he++)if($[he]!==this.current[he]){this.current=$,this.gl.uniformMatrix4fv(this.location,!1,$);break}},C}(Fr);function Qn(E){return[ve(255*E.r,255*E.g),ve(255*E.b,255*E.a)]}var ca=function(C,O,$){this.value=C,this.uniformNames=O.map(function(he){return"u_"+he}),this.type=$};ca.prototype.setUniform=function(C,O,$){C.set($.constantOr(this.value))},ca.prototype.getBinding=function(C,O,$){return this.type==="color"?new Fn(C,O):new zr(C,O)};var xa=function(C,O){this.uniformNames=O.map(function($){return"u_"+$}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};xa.prototype.setConstantPatternPositions=function(C,O){this.pixelRatioFrom=O.pixelRatio,this.pixelRatioTo=C.pixelRatio,this.patternFrom=O.tlbr,this.patternTo=C.tlbr},xa.prototype.setUniform=function(C,O,$,he){var me=he==="u_pattern_to"?this.patternTo:he==="u_pattern_from"?this.patternFrom:he==="u_pixel_ratio_to"?this.pixelRatioTo:he==="u_pixel_ratio_from"?this.pixelRatioFrom:null;me&&C.set(me)},xa.prototype.getBinding=function(C,O,$){return $.substr(0,9)==="u_pattern"?new En(C,O):new zr(C,O)};var ga=function(C,O,$,he){this.expression=C,this.type=$,this.maxValue=0,this.paintVertexAttributes=O.map(function(me){return{name:"a_"+me,type:"Float32",components:$==="color"?2:1,offset:0}}),this.paintVertexArray=new he};ga.prototype.populatePaintArray=function(C,O,$,he,me){var we=this.paintVertexArray.length,Ie=this.expression.evaluate(new ui(0),O,{},he,[],me);this.paintVertexArray.resize(C),this._setPaintValue(we,C,Ie)},ga.prototype.updatePaintArray=function(C,O,$,he){var me=this.expression.evaluate({zoom:0},$,he);this._setPaintValue(C,O,me)},ga.prototype._setPaintValue=function(C,O,$){if(this.type==="color")for(var he=Qn($),me=C;me<O;me++)this.paintVertexArray.emplace(me,he[0],he[1]);else{for(var we=C;we<O;we++)this.paintVertexArray.emplace(we,$);this.maxValue=Math.max(this.maxValue,Math.abs($))}},ga.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ga.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ma=function(C,O,$,he,me,we){this.expression=C,this.uniformNames=O.map(function(Ie){return"u_"+Ie+"_t"}),this.type=$,this.useIntegerZoom=he,this.zoom=me,this.maxValue=0,this.paintVertexAttributes=O.map(function(Ie){return{name:"a_"+Ie,type:"Float32",components:$==="color"?4:2,offset:0}}),this.paintVertexArray=new we};Ma.prototype.populatePaintArray=function(C,O,$,he,me){var we=this.expression.evaluate(new ui(this.zoom),O,{},he,[],me),Ie=this.expression.evaluate(new ui(this.zoom+1),O,{},he,[],me),$e=this.paintVertexArray.length;this.paintVertexArray.resize(C),this._setPaintValue($e,C,we,Ie)},Ma.prototype.updatePaintArray=function(C,O,$,he){var me=this.expression.evaluate({zoom:this.zoom},$,he),we=this.expression.evaluate({zoom:this.zoom+1},$,he);this._setPaintValue(C,O,me,we)},Ma.prototype._setPaintValue=function(C,O,$,he){if(this.type==="color")for(var me=Qn($),we=Qn(he),Ie=C;Ie<O;Ie++)this.paintVertexArray.emplace(Ie,me[0],me[1],we[0],we[1]);else{for(var $e=C;$e<O;$e++)this.paintVertexArray.emplace($e,$,he);this.maxValue=Math.max(this.maxValue,Math.abs($),Math.abs(he))}},Ma.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ma.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ma.prototype.setUniform=function(C,O){var $=this.useIntegerZoom?Math.floor(O.zoom):O.zoom,he=v(this.expression.interpolationFactor($,this.zoom,this.zoom+1),0,1);C.set(he)},Ma.prototype.getBinding=function(C,O,$){return new zr(C,O)};var Ca=function(C,O,$,he,me,we){this.expression=C,this.type=O,this.useIntegerZoom=$,this.zoom=he,this.layerId=we,this.zoomInPaintVertexArray=new me,this.zoomOutPaintVertexArray=new me};Ca.prototype.populatePaintArray=function(C,O,$){var he=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(C),this.zoomOutPaintVertexArray.resize(C),this._setPaintValues(he,C,O.patterns&&O.patterns[this.layerId],$)},Ca.prototype.updatePaintArray=function(C,O,$,he,me){this._setPaintValues(C,O,$.patterns&&$.patterns[this.layerId],me)},Ca.prototype._setPaintValues=function(C,O,$,he){if(!(!he||!$)){var me=$.min,we=$.mid,Ie=$.max,$e=he[me],ut=he[we],gt=he[Ie];if(!(!$e||!ut||!gt))for(var Rt=C;Rt<O;Rt++)this.zoomInPaintVertexArray.emplace(Rt,ut.tl[0],ut.tl[1],ut.br[0],ut.br[1],$e.tl[0],$e.tl[1],$e.br[0],$e.br[1],ut.pixelRatio,$e.pixelRatio),this.zoomOutPaintVertexArray.emplace(Rt,ut.tl[0],ut.tl[1],ut.br[0],ut.br[1],gt.tl[0],gt.tl[1],gt.br[0],gt.br[1],ut.pixelRatio,gt.pixelRatio)}},Ca.prototype.upload=function(C){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=C.createVertexBuffer(this.zoomInPaintVertexArray,j.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=C.createVertexBuffer(this.zoomOutPaintVertexArray,j.members,this.expression.isStateDependent))},Ca.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ha=function(C,O,$,he){this.binders={},this.layoutAttributes=he,this._buffers=[];var me=[];for(var we in C.paint._values)if(!!$(we)){var Ie=C.paint.get(we);if(!(!(Ie instanceof Gi)||!li(Ie.property.specification))){var $e=Li(we,C.type),ut=Ie.value,gt=Ie.property.specification.type,Rt=Ie.property.useIntegerZoom,$t=Ie.property.specification["property-type"],Wt=$t==="cross-faded"||$t==="cross-faded-data-driven";if(ut.kind==="constant")this.binders[we]=Wt?new xa(ut.value,$e):new ca(ut.value,$e,gt),me.push("/u_"+we);else if(ut.kind==="source"||Wt){var vr=pi(we,gt,"source");this.binders[we]=Wt?new Ca(ut,gt,Rt,O,vr,C.id):new ga(ut,$e,gt,vr),me.push("/a_"+we)}else{var Dr=pi(we,gt,"composite");this.binders[we]=new Ma(ut,$e,gt,Rt,O,Dr),me.push("/z_"+we)}}}this.cacheKey=me.sort().join("")};Ha.prototype.getMaxValue=function(C){var O=this.binders[C];return O instanceof ga||O instanceof Ma?O.maxValue:0},Ha.prototype.populatePaintArrays=function(C,O,$,he,me){for(var we in this.binders){var Ie=this.binders[we];(Ie instanceof ga||Ie instanceof Ma||Ie instanceof Ca)&&Ie.populatePaintArray(C,O,$,he,me)}},Ha.prototype.setConstantPatternPositions=function(C,O){for(var $ in this.binders){var he=this.binders[$];he instanceof xa&&he.setConstantPatternPositions(C,O)}},Ha.prototype.updatePaintArrays=function(C,O,$,he,me){var we=!1;for(var Ie in C)for(var $e=O.getPositions(Ie),ut=0,gt=$e;ut<gt.length;ut+=1){var Rt=gt[ut],$t=$.feature(Rt.index);for(var Wt in this.binders){var vr=this.binders[Wt];if((vr instanceof ga||vr instanceof Ma||vr instanceof Ca)&&vr.expression.isStateDependent===!0){var Dr=he.paint.get(Wt);vr.expression=Dr.value,vr.updatePaintArray(Rt.start,Rt.end,$t,C[Ie],me),we=!0}}}return we},Ha.prototype.defines=function(){var C=[];for(var O in this.binders){var $=this.binders[O];($ instanceof ca||$ instanceof xa)&&C.push.apply(C,$.uniformNames.map(function(he){return"#define HAS_UNIFORM_"+he}))}return C},Ha.prototype.getPaintVertexBuffers=function(){return this._buffers},Ha.prototype.getUniforms=function(C,O){var $=[];for(var he in this.binders){var me=this.binders[he];if(me instanceof ca||me instanceof xa||me instanceof Ma)for(var we=0,Ie=me.uniformNames;we<Ie.length;we+=1){var $e=Ie[we];if(O[$e]){var ut=me.getBinding(C,O[$e],$e);$.push({name:$e,property:he,binding:ut})}}}return $},Ha.prototype.setUniforms=function(C,O,$,he){for(var me=0,we=O;me<we.length;me+=1){var Ie=we[me],$e=Ie.name,ut=Ie.property,gt=Ie.binding;this.binders[ut].setUniform(gt,he,$.get(ut),$e)}},Ha.prototype.updatePaintBuffers=function(C){this._buffers=[];for(var O in this.binders){var $=this.binders[O];if(C&&$ instanceof Ca){var he=C.fromScale===2?$.zoomInPaintVertexBuffer:$.zoomOutPaintVertexBuffer;he&&this._buffers.push(he)}else($ instanceof ga||$ instanceof Ma)&&$.paintVertexBuffer&&this._buffers.push($.paintVertexBuffer)}},Ha.prototype.upload=function(C){for(var O in this.binders){var $=this.binders[O];($ instanceof ga||$ instanceof Ma||$ instanceof Ca)&&$.upload(C)}this.updatePaintBuffers()},Ha.prototype.destroy=function(){for(var C in this.binders){var O=this.binders[C];(O instanceof ga||O instanceof Ma||O instanceof Ca)&&O.destroy()}};var ni=function(C,O,$,he){he===void 0&&(he=function(){return!0}),this.programConfigurations={};for(var me=0,we=O;me<we.length;me+=1){var Ie=we[me];this.programConfigurations[Ie.id]=new Ha(Ie,$,he,C)}this.needsUpload=!1,this._featureMap=new wt,this._bufferOffset=0};ni.prototype.populatePaintArrays=function(C,O,$,he,me,we){for(var Ie in this.programConfigurations)this.programConfigurations[Ie].populatePaintArrays(C,O,he,me,we);O.id!==void 0&&this._featureMap.add(O.id,$,this._bufferOffset,C),this._bufferOffset=C,this.needsUpload=!0},ni.prototype.updatePaintArrays=function(C,O,$,he){for(var me=0,we=$;me<we.length;me+=1){var Ie=we[me];this.needsUpload=this.programConfigurations[Ie.id].updatePaintArrays(C,this._featureMap,O,Ie,he)||this.needsUpload}},ni.prototype.get=function(C){return this.programConfigurations[C]},ni.prototype.upload=function(C){if(!!this.needsUpload){for(var O in this.programConfigurations)this.programConfigurations[O].upload(C);this.needsUpload=!1}},ni.prototype.destroy=function(){for(var C in this.programConfigurations)this.programConfigurations[C].destroy()};function Li(E,C){var O={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return O[E]||[E.replace(C+"-","").replace(/-/g,"_")]}function fi(E){var C={"line-pattern":{source:Fs,composite:Fs},"fill-pattern":{source:Fs,composite:Fs},"fill-extrusion-pattern":{source:Fs,composite:Fs}};return C[E]}function pi(E,C,O){var $={color:{source:Ou,composite:qf},number:{source:qu,composite:Ou}},he=fi(E);return he&&he[O]||$[C][O]}ze("ConstantBinder",ca),ze("CrossFadedConstantBinder",xa),ze("SourceExpressionBinder",ga),ze("CrossFadedCompositeBinder",Ca),ze("CompositeExpressionBinder",Ma),ze("ProgramConfiguration",Ha,{omit:["_buffers"]}),ze("ProgramConfigurationSet",ni);var Na=8192;function Pi(E){return{min:-1*Math.pow(2,E-1),max:Math.pow(2,E-1)-1}}var zi=Pi(15);function Ni(E){for(var C=Na/E.extent,O=E.loadGeometry(),$=0;$<O.length;$++)for(var he=O[$],me=0;me<he.length;me++){var we=he[me];we.x=Math.round(we.x*C),we.y=Math.round(we.y*C),(we.x<zi.min||we.x>zi.max||we.y<zi.min||we.y>zi.max)&&(B("Geometry exceeds allowed extent, reduce your vector tile buffer size"),we.x=v(we.x,zi.min,zi.max),we.y=v(we.y,zi.min,zi.max))}return O}function _i(E,C,O,$,he){E.emplaceBack(C*2+($+1)/2,O*2+(he+1)/2)}var ji=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new hf,this.indexArray=new mu,this.segments=new H,this.programConfigurations=new ni(ce,C.layers,C.zoom),this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};ji.prototype.populate=function(C,O,$){var he=this.layers[0],me=[],we=null;he.type==="circle"&&(we=he.layout.get("circle-sort-key"));for(var Ie=0,$e=C;Ie<$e.length;Ie+=1){var ut=$e[Ie],gt=ut.feature,Rt=ut.id,$t=ut.index,Wt=ut.sourceLayerIndex,vr=this.layers[0]._featureFilter.needGeometry,Dr={type:gt.type,id:Rt,properties:gt.properties,geometry:vr?Ni(gt):[]};if(!!this.layers[0]._featureFilter.filter(new ui(this.zoom),Dr,$)){vr||(Dr.geometry=Ni(gt));var sn=we?we.evaluate(Dr,{},$):void 0,Qr={id:Rt,properties:gt.properties,type:gt.type,sourceLayerIndex:Wt,index:$t,geometry:Dr.geometry,patterns:{},sortKey:sn};me.push(Qr)}}we&&me.sort(function(_a,Sa){return _a.sortKey-Sa.sortKey});for(var Mn=0,yn=me;Mn<yn.length;Mn+=1){var Tn=yn[Mn],Rn=Tn,Vn=Rn.geometry,sa=Rn.index,na=Rn.sourceLayerIndex,Ia=C[sa].feature;this.addFeature(Tn,Vn,sa,$),O.featureIndex.insert(Ia,Vn,sa,na,this.index)}},ji.prototype.update=function(C,O,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,O,this.stateDependentLayers,$)},ji.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ji.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ji.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,ce),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},ji.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ji.prototype.addFeature=function(C,O,$,he){for(var me=0,we=O;me<we.length;me+=1)for(var Ie=we[me],$e=0,ut=Ie;$e<ut.length;$e+=1){var gt=ut[$e],Rt=gt.x,$t=gt.y;if(!(Rt<0||Rt>=Na||$t<0||$t>=Na)){var Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,C.sortKey),vr=Wt.vertexLength;_i(this.layoutVertexArray,Rt,$t,-1,-1),_i(this.layoutVertexArray,Rt,$t,1,-1),_i(this.layoutVertexArray,Rt,$t,1,1),_i(this.layoutVertexArray,Rt,$t,-1,1),this.indexArray.emplaceBack(vr,vr+1,vr+2),this.indexArray.emplaceBack(vr,vr+3,vr+2),Wt.vertexLength+=4,Wt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,$,{},he)},ze("CircleBucket",ji,{omit:["layers"]});function ii(E,C){for(var O=0;O<E.length;O++)if(Bs(C,E[O]))return!0;for(var $=0;$<C.length;$++)if(Bs(E,C[$]))return!0;return!!Ml(E,C)}function wi(E,C,O){return!!(Bs(E,C)||Ql(C,E,O))}function _o(E,C){if(E.length===1)return $l(C,E[0]);for(var O=0;O<C.length;O++)for(var $=C[O],he=0;he<$.length;he++)if(Bs(E,$[he]))return!0;for(var me=0;me<E.length;me++)if($l(C,E[me]))return!0;for(var we=0;we<C.length;we++)if(Ml(E,C[we]))return!0;return!1}function Fo(E,C,O){for(var $=0;$<C.length;$++){var he=C[$];if(E.length>=3){for(var me=0;me<he.length;me++)if(Bs(E,he[me]))return!0}if(Al(E,he,O))return!0}return!1}function Al(E,C,O){if(E.length>1){if(Ml(E,C))return!0;for(var $=0;$<C.length;$++)if(Ql(C[$],E,O))return!0}for(var he=0;he<E.length;he++)if(Ql(E[he],C,O))return!0;return!1}function Ml(E,C){if(E.length===0||C.length===0)return!1;for(var O=0;O<E.length-1;O++)for(var $=E[O],he=E[O+1],me=0;me<C.length-1;me++){var we=C[me],Ie=C[me+1];if(Jl($,he,we,Ie))return!0}return!1}function Jl(E,C,O,$){return F(E,O,$)!==F(C,O,$)&&F(E,C,O)!==F(E,C,$)}function Ql(E,C,O){var $=O*O;if(C.length===1)return E.distSqr(C[0])<$;for(var he=1;he<C.length;he++){var me=C[he-1],we=C[he];if(xu(E,me,we)<$)return!0}return!1}function xu(E,C,O){var $=C.distSqr(O);if($===0)return E.distSqr(C);var he=((E.x-C.x)*(O.x-C.x)+(E.y-C.y)*(O.y-C.y))/$;return he<0?E.distSqr(C):he>1?E.distSqr(O):E.distSqr(O.sub(C)._mult(he)._add(C))}function $l(E,C){for(var O=!1,$,he,me,we=0;we<E.length;we++){$=E[we];for(var Ie=0,$e=$.length-1;Ie<$.length;$e=Ie++)he=$[Ie],me=$[$e],he.y>C.y!=me.y>C.y&&C.x<(me.x-he.x)*(C.y-he.y)/(me.y-he.y)+he.x&&(O=!O)}return O}function Bs(E,C){for(var O=!1,$=0,he=E.length-1;$<E.length;he=$++){var me=E[$],we=E[he];me.y>C.y!=we.y>C.y&&C.x<(we.x-me.x)*(C.y-me.y)/(we.y-me.y)+me.x&&(O=!O)}return O}function Uu(E,C,O,$,he){for(var me=0,we=E;me<we.length;me+=1){var Ie=we[me];if(C<=Ie.x&&O<=Ie.y&&$>=Ie.x&&he>=Ie.y)return!0}var $e=[new f(C,O),new f(C,he),new f($,he),new f($,O)];if(E.length>2)for(var ut=0,gt=$e;ut<gt.length;ut+=1){var Rt=gt[ut];if(Bs(E,Rt))return!0}for(var $t=0;$t<E.length-1;$t++){var Wt=E[$t],vr=E[$t+1];if(xs(Wt,vr,$e))return!0}return!1}function xs(E,C,O){var $=O[0],he=O[2];if(E.x<$.x&&C.x<$.x||E.x>he.x&&C.x>he.x||E.y<$.y&&C.y<$.y||E.y>he.y&&C.y>he.y)return!1;var me=F(E,C,O[0]);return me!==F(E,C,O[1])||me!==F(E,C,O[2])||me!==F(E,C,O[3])}function ul(E,C,O){var $=C.paint.get(E).value;return $.kind==="constant"?$.value:O.programConfigurations.get(C.id).getMaxValue(E)}function ql(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])}function Ul(E,C,O,$,he){if(!C[0]&&!C[1])return E;var me=f.convert(C)._mult(he);O==="viewport"&&me._rotate(-$);for(var we=[],Ie=0;Ie<E.length;Ie++){var $e=E[Ie];we.push($e.sub(me))}return we}var eu=new Xi({"circle-sort-key":new Xa(Ft.layout_circle["circle-sort-key"])}),kf=new Xi({"circle-radius":new Xa(Ft.paint_circle["circle-radius"]),"circle-color":new Xa(Ft.paint_circle["circle-color"]),"circle-blur":new Xa(Ft.paint_circle["circle-blur"]),"circle-opacity":new Xa(Ft.paint_circle["circle-opacity"]),"circle-translate":new za(Ft.paint_circle["circle-translate"]),"circle-translate-anchor":new za(Ft.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new za(Ft.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new za(Ft.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Xa(Ft.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Xa(Ft.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Xa(Ft.paint_circle["circle-stroke-opacity"])}),Wu={paint:kf,layout:eu},fs=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var E=arguments,C=0,O=arguments.length;O--;)C+=E[O]*E[O];return Math.sqrt(C)});function gf(){var E=new fs(4);return fs!=Float32Array&&(E[1]=0,E[2]=0),E[0]=1,E[3]=1,E}function ks(E,C,O){var $=C[0],he=C[1],me=C[2],we=C[3],Ie=Math.sin(O),$e=Math.cos(O);return E[0]=$*$e+me*Ie,E[1]=he*$e+we*Ie,E[2]=$*-Ie+me*$e,E[3]=he*-Ie+we*$e,E}function yf(){var E=new fs(9);return fs!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[5]=0,E[6]=0,E[7]=0),E[0]=1,E[4]=1,E[8]=1,E}function Ef(E,C){var O=Math.sin(C),$=Math.cos(C);return E[0]=$,E[1]=O,E[2]=0,E[3]=-O,E[4]=$,E[5]=0,E[6]=0,E[7]=0,E[8]=1,E}function Cf(){var E=new fs(16);return fs!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=0,E[12]=0,E[13]=0,E[14]=0),E[0]=1,E[5]=1,E[10]=1,E[15]=1,E}function Ac(E){var C=new fs(16);return C[0]=E[0],C[1]=E[1],C[2]=E[2],C[3]=E[3],C[4]=E[4],C[5]=E[5],C[6]=E[6],C[7]=E[7],C[8]=E[8],C[9]=E[9],C[10]=E[10],C[11]=E[11],C[12]=E[12],C[13]=E[13],C[14]=E[14],C[15]=E[15],C}function Lf(E){return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E}function rf(E,C){var O=C[0],$=C[1],he=C[2],me=C[3],we=C[4],Ie=C[5],$e=C[6],ut=C[7],gt=C[8],Rt=C[9],$t=C[10],Wt=C[11],vr=C[12],Dr=C[13],sn=C[14],Qr=C[15],Mn=O*Ie-$*we,yn=O*$e-he*we,Tn=O*ut-me*we,Rn=$*$e-he*Ie,Vn=$*ut-me*Ie,sa=he*ut-me*$e,na=gt*Dr-Rt*vr,Ia=gt*sn-$t*vr,_a=gt*Qr-Wt*vr,Sa=Rt*sn-$t*Dr,ei=Rt*Qr-Wt*Dr,La=$t*Qr-Wt*sn,Ra=Mn*La-yn*ei+Tn*Sa+Rn*_a-Vn*Ia+sa*na;return Ra?(Ra=1/Ra,E[0]=(Ie*La-$e*ei+ut*Sa)*Ra,E[1]=(he*ei-$*La-me*Sa)*Ra,E[2]=(Dr*sa-sn*Vn+Qr*Rn)*Ra,E[3]=($t*Vn-Rt*sa-Wt*Rn)*Ra,E[4]=($e*_a-we*La-ut*Ia)*Ra,E[5]=(O*La-he*_a+me*Ia)*Ra,E[6]=(sn*Tn-vr*sa-Qr*yn)*Ra,E[7]=(gt*sa-$t*Tn+Wt*yn)*Ra,E[8]=(we*ei-Ie*_a+ut*na)*Ra,E[9]=($*_a-O*ei-me*na)*Ra,E[10]=(vr*Vn-Dr*Tn+Qr*Mn)*Ra,E[11]=(Rt*Tn-gt*Vn-Wt*Mn)*Ra,E[12]=(Ie*Ia-we*Sa-$e*na)*Ra,E[13]=(O*Sa-$*Ia+he*na)*Ra,E[14]=(Dr*yn-vr*Rn-sn*Mn)*Ra,E[15]=(gt*Rn-Rt*yn+$t*Mn)*Ra,E):null}function nf(E,C,O){var $=C[0],he=C[1],me=C[2],we=C[3],Ie=C[4],$e=C[5],ut=C[6],gt=C[7],Rt=C[8],$t=C[9],Wt=C[10],vr=C[11],Dr=C[12],sn=C[13],Qr=C[14],Mn=C[15],yn=O[0],Tn=O[1],Rn=O[2],Vn=O[3];return E[0]=yn*$+Tn*Ie+Rn*Rt+Vn*Dr,E[1]=yn*he+Tn*$e+Rn*$t+Vn*sn,E[2]=yn*me+Tn*ut+Rn*Wt+Vn*Qr,E[3]=yn*we+Tn*gt+Rn*vr+Vn*Mn,yn=O[4],Tn=O[5],Rn=O[6],Vn=O[7],E[4]=yn*$+Tn*Ie+Rn*Rt+Vn*Dr,E[5]=yn*he+Tn*$e+Rn*$t+Vn*sn,E[6]=yn*me+Tn*ut+Rn*Wt+Vn*Qr,E[7]=yn*we+Tn*gt+Rn*vr+Vn*Mn,yn=O[8],Tn=O[9],Rn=O[10],Vn=O[11],E[8]=yn*$+Tn*Ie+Rn*Rt+Vn*Dr,E[9]=yn*he+Tn*$e+Rn*$t+Vn*sn,E[10]=yn*me+Tn*ut+Rn*Wt+Vn*Qr,E[11]=yn*we+Tn*gt+Rn*vr+Vn*Mn,yn=O[12],Tn=O[13],Rn=O[14],Vn=O[15],E[12]=yn*$+Tn*Ie+Rn*Rt+Vn*Dr,E[13]=yn*he+Tn*$e+Rn*$t+Vn*sn,E[14]=yn*me+Tn*ut+Rn*Wt+Vn*Qr,E[15]=yn*we+Tn*gt+Rn*vr+Vn*Mn,E}function Eo(E,C,O){var $=O[0],he=O[1],me=O[2],we,Ie,$e,ut,gt,Rt,$t,Wt,vr,Dr,sn,Qr;return C===E?(E[12]=C[0]*$+C[4]*he+C[8]*me+C[12],E[13]=C[1]*$+C[5]*he+C[9]*me+C[13],E[14]=C[2]*$+C[6]*he+C[10]*me+C[14],E[15]=C[3]*$+C[7]*he+C[11]*me+C[15]):(we=C[0],Ie=C[1],$e=C[2],ut=C[3],gt=C[4],Rt=C[5],$t=C[6],Wt=C[7],vr=C[8],Dr=C[9],sn=C[10],Qr=C[11],E[0]=we,E[1]=Ie,E[2]=$e,E[3]=ut,E[4]=gt,E[5]=Rt,E[6]=$t,E[7]=Wt,E[8]=vr,E[9]=Dr,E[10]=sn,E[11]=Qr,E[12]=we*$+gt*he+vr*me+C[12],E[13]=Ie*$+Rt*he+Dr*me+C[13],E[14]=$e*$+$t*he+sn*me+C[14],E[15]=ut*$+Wt*he+Qr*me+C[15]),E}function Qs(E,C,O){var $=O[0],he=O[1],me=O[2];return E[0]=C[0]*$,E[1]=C[1]*$,E[2]=C[2]*$,E[3]=C[3]*$,E[4]=C[4]*he,E[5]=C[5]*he,E[6]=C[6]*he,E[7]=C[7]*he,E[8]=C[8]*me,E[9]=C[9]*me,E[10]=C[10]*me,E[11]=C[11]*me,E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15],E}function $s(E,C,O){var $=Math.sin(O),he=Math.cos(O),me=C[4],we=C[5],Ie=C[6],$e=C[7],ut=C[8],gt=C[9],Rt=C[10],$t=C[11];return C!==E&&(E[0]=C[0],E[1]=C[1],E[2]=C[2],E[3]=C[3],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15]),E[4]=me*he+ut*$,E[5]=we*he+gt*$,E[6]=Ie*he+Rt*$,E[7]=$e*he+$t*$,E[8]=ut*he-me*$,E[9]=gt*he-we*$,E[10]=Rt*he-Ie*$,E[11]=$t*he-$e*$,E}function Pf(E,C,O){var $=Math.sin(O),he=Math.cos(O),me=C[0],we=C[1],Ie=C[2],$e=C[3],ut=C[4],gt=C[5],Rt=C[6],$t=C[7];return C!==E&&(E[8]=C[8],E[9]=C[9],E[10]=C[10],E[11]=C[11],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15]),E[0]=me*he+ut*$,E[1]=we*he+gt*$,E[2]=Ie*he+Rt*$,E[3]=$e*he+$t*$,E[4]=ut*he-me*$,E[5]=gt*he-we*$,E[6]=Rt*he-Ie*$,E[7]=$t*he-$e*$,E}function rc(E,C,O,$,he){var me=1/Math.tan(C/2),we;return E[0]=me/O,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=me,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,he!=null&&he!==1/0?(we=1/($-he),E[10]=(he+$)*we,E[14]=2*he*$*we):(E[10]=-1,E[14]=-2*$),E}function jc(E,C,O,$,he,me,we){var Ie=1/(C-O),$e=1/($-he),ut=1/(me-we);return E[0]=-2*Ie,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*$e,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=2*ut,E[11]=0,E[12]=(C+O)*Ie,E[13]=(he+$)*$e,E[14]=(we+me)*ut,E[15]=1,E}var Kc=nf;function mf(){var E=new fs(3);return fs!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0),E}function Jc(E){var C=new fs(3);return C[0]=E[0],C[1]=E[1],C[2]=E[2],C}function Df(E,C,O){return E[0]=C[0]+O[0],E[1]=C[1]+O[1],E[2]=C[2]+O[2],E}function Qc(E,C,O){return E[0]=C[0]-O[0],E[1]=C[1]-O[1],E[2]=C[2]-O[2],E}function $c(E,C,O){return E[0]=C[0]*O,E[1]=C[1]*O,E[2]=C[2]*O,E}function nc(E,C){var O=C[0],$=C[1],he=C[2],me=O*O+$*$+he*he;return me>0&&(me=1/Math.sqrt(me)),E[0]=C[0]*me,E[1]=C[1]*me,E[2]=C[2]*me,E}function Bv(E,C){return E[0]*C[0]+E[1]*C[1]+E[2]*C[2]}function Ov(E,C,O){var $=C[0],he=C[1],me=C[2],we=O[0],Ie=O[1],$e=O[2];return E[0]=he*$e-me*Ie,E[1]=me*we-$*$e,E[2]=$*Ie-he*we,E}function Nv(E,C,O){var $=C[0],he=C[1],me=C[2];return E[0]=$*O[0]+he*O[3]+me*O[6],E[1]=$*O[1]+he*O[4]+me*O[7],E[2]=$*O[2]+he*O[5]+me*O[8],E}var Uv=Qc;(function(){var E=mf();return function(C,O,$,he,me,we){var Ie,$e;for(O||(O=3),$||($=0),he?$e=Math.min(he*O+$,C.length):$e=C.length,Ie=$;Ie<$e;Ie+=O)E[0]=C[Ie],E[1]=C[Ie+1],E[2]=C[Ie+2],me(E,E,we),C[Ie]=E[0],C[Ie+1]=E[1],C[Ie+2]=E[2];return C}})();function Vv(){var E=new fs(4);return fs!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0,E[3]=0),E}function Hv(E,C,O){return E[0]=C[0]*O,E[1]=C[1]*O,E[2]=C[2]*O,E[3]=C[3]*O,E}function Gv(E,C){return E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3]}function Mc(E,C,O){var $=C[0],he=C[1],me=C[2],we=C[3];return E[0]=O[0]*$+O[4]*he+O[8]*me+O[12]*we,E[1]=O[1]*$+O[5]*he+O[9]*me+O[13]*we,E[2]=O[2]*$+O[6]*he+O[10]*me+O[14]*we,E[3]=O[3]*$+O[7]*he+O[11]*me+O[15]*we,E}(function(){var E=Vv();return function(C,O,$,he,me,we){var Ie,$e;for(O||(O=4),$||($=0),he?$e=Math.min(he*O+$,C.length):$e=C.length,Ie=$;Ie<$e;Ie+=O)E[0]=C[Ie],E[1]=C[Ie+1],E[2]=C[Ie+2],E[3]=C[Ie+3],me(E,E,we),C[Ie]=E[0],C[Ie+1]=E[1],C[Ie+2]=E[2],C[Ie+3]=E[3];return C}})();function Yv(){var E=new fs(2);return fs!=Float32Array&&(E[0]=0,E[1]=0),E}function Wv(E){var C=E[0],O=E[1];return C*C+O*O}var Xv=Wv;(function(){var E=Yv();return function(C,O,$,he,me,we){var Ie,$e;for(O||(O=2),$||($=0),he?$e=Math.min(he*O+$,C.length):$e=C.length,Ie=$;Ie<$e;Ie+=O)E[0]=C[Ie],E[1]=C[Ie+1],me(E,E,we),C[Ie]=E[0],C[Ie+1]=E[1];return C}})();var Zv=function(E){function C(O){E.call(this,O,Wu)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function($){return new ji($)},C.prototype.queryRadius=function($){var he=$;return ul("circle-radius",this,he)+ul("circle-stroke-width",this,he)+ql(this.paint.get("circle-translate"))},C.prototype.queryIntersectsFeature=function($,he,me,we,Ie,$e,ut,gt){for(var Rt=Ul($,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),$e.angle,ut),$t=this.paint.get("circle-radius").evaluate(he,me),Wt=this.paint.get("circle-stroke-width").evaluate(he,me),vr=$t+Wt,Dr=this.paint.get("circle-pitch-alignment")==="map",sn=Dr?Rt:jv(Rt,gt),Qr=Dr?vr*ut:vr,Mn=0,yn=we;Mn<yn.length;Mn+=1)for(var Tn=yn[Mn],Rn=0,Vn=Tn;Rn<Vn.length;Rn+=1){var sa=Vn[Rn],na=Dr?sa:Ah(sa,gt),Ia=Qr,_a=Mc([],[sa.x,sa.y,0,1],gt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ia*=_a[3]/$e.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ia*=$e.cameraToCenterDistance/_a[3]),wi(sn,na,Ia))return!0}return!1},C}(ms);function Ah(E,C){var O=Mc([],[E.x,E.y,0,1],C);return new f(O[0]/O[3],O[1]/O[3])}function jv(E,C){return E.map(function(O){return Ah(O,C)})}var Mh=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(ji);ze("HeatmapBucket",Mh,{omit:["layers"]});function qc(E,C,O,$){var he=C.width,me=C.height;if(!$)$=new Uint8Array(he*me*O);else if($ instanceof Uint8ClampedArray)$=new Uint8Array($.buffer);else if($.length!==he*me*O)throw new RangeError("mismatched image size");return E.width=he,E.height=me,E.data=$,E}function Sh(E,C,O){var $=C.width,he=C.height;if(!($===E.width&&he===E.height)){var me=qc({},{width:$,height:he},O);eh(E,me,{x:0,y:0},{x:0,y:0},{width:Math.min(E.width,$),height:Math.min(E.height,he)},O),E.width=$,E.height=he,E.data=me.data}}function eh(E,C,O,$,he,me){if(he.width===0||he.height===0)return C;if(he.width>E.width||he.height>E.height||O.x>E.width-he.width||O.y>E.height-he.height)throw new RangeError("out of range source coordinates for image copy");if(he.width>C.width||he.height>C.height||$.x>C.width-he.width||$.y>C.height-he.height)throw new RangeError("out of range destination coordinates for image copy");for(var we=E.data,Ie=C.data,$e=0;$e<he.height;$e++)for(var ut=((O.y+$e)*E.width+O.x)*me,gt=(($.y+$e)*C.width+$.x)*me,Rt=0;Rt<he.width*me;Rt++)Ie[gt+Rt]=we[ut+Rt];return C}var xf=function(C,O){qc(this,C,1,O)};xf.prototype.resize=function(C){Sh(this,C,1)},xf.prototype.clone=function(){return new xf({width:this.width,height:this.height},new Uint8Array(this.data))},xf.copy=function(C,O,$,he,me){eh(C,O,$,he,me,1)};var qs=function(C,O){qc(this,C,4,O)};qs.prototype.resize=function(C){Sh(this,C,4)},qs.prototype.replace=function(C,O){O?this.data.set(C):C instanceof Uint8ClampedArray?this.data=new Uint8Array(C.buffer):this.data=C},qs.prototype.clone=function(){return new qs({width:this.width,height:this.height},new Uint8Array(this.data))},qs.copy=function(C,O,$,he,me){eh(C,O,$,he,me,4)},ze("AlphaImage",xf),ze("RGBAImage",qs);var Kv=new Xi({"heatmap-radius":new Xa(Ft.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Xa(Ft.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new za(Ft.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Po(Ft.paint_heatmap["heatmap-color"]),"heatmap-opacity":new za(Ft.paint_heatmap["heatmap-opacity"])}),Jv={paint:Kv};function kh(E,C){for(var O=new Uint8Array(256*4),$={},he=0,me=0;he<256;he++,me+=4){$[C]=he/255;var we=E.evaluate($);O[me+0]=Math.floor(we.r*255/we.a),O[me+1]=Math.floor(we.g*255/we.a),O[me+2]=Math.floor(we.b*255/we.a),O[me+3]=Math.floor(we.a*255)}return new qs({width:256,height:1},O)}var Qv=function(E){function C(O){E.call(this,O,Jv),this._updateColorRamp()}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function($){return new Mh($)},C.prototype._handleSpecialPaintPropertyUpdate=function($){$==="heatmap-color"&&this._updateColorRamp()},C.prototype._updateColorRamp=function(){var $=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=kh($,"heatmapDensity"),this.colorRampTexture=null},C.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},C}(ms),$v=new Xi({"hillshade-illumination-direction":new za(Ft.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new za(Ft.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new za(Ft.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new za(Ft.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new za(Ft.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new za(Ft.paint_hillshade["hillshade-accent-color"])}),qv={paint:$v},ep=function(E){function C(O){E.call(this,O,qv)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},C}(ms),tp=Do([{name:"a_pos",components:2,type:"Int16"}],4),Eh=tp.members,th=Sc,rp=Sc;function Sc(E,C,O){O=O||2;var $=C&&C.length,he=$?C[0]*O:E.length,me=Ch(E,0,he,O,!0),we=[];if(!me||me.next===me.prev)return we;var Ie,$e,ut,gt,Rt,$t,Wt;if($&&(me=sp(E,C,me,O)),E.length>80*O){Ie=ut=E[0],$e=gt=E[1];for(var vr=O;vr<he;vr+=O)Rt=E[vr],$t=E[vr+1],Rt<Ie&&(Ie=Rt),$t<$e&&($e=$t),Rt>ut&&(ut=Rt),$t>gt&&(gt=$t);Wt=Math.max(ut-Ie,gt-$e),Wt=Wt!==0?1/Wt:0}return ac(me,we,O,Ie,$e,Wt),we}function Ch(E,C,O,$,he){var me,we;if(he===ah(E,C,O,$)>0)for(me=C;me<O;me+=$)we=Dh(me,E[me],E[me+1],we);else for(me=O-$;me>=C;me-=$)we=Dh(me,E[me],E[me+1],we);return we&&kc(we,we.next)&&(oc(we),we=we.next),we}function af(E,C){if(!E)return E;C||(C=E);var O=E,$;do if($=!1,!O.steiner&&(kc(O,O.next)||Bo(O.prev,O,O.next)===0)){if(oc(O),O=C=O.prev,O===O.next)break;$=!0}else O=O.next;while($||O!==C);return C}function ac(E,C,O,$,he,me,we){if(!!E){!we&&me&&hp(E,$,he,me);for(var Ie=E,$e,ut;E.prev!==E.next;){if($e=E.prev,ut=E.next,me?ap(E,$,he,me):np(E)){C.push($e.i/O),C.push(E.i/O),C.push(ut.i/O),oc(E),E=ut.next,Ie=ut.next;continue}if(E=ut,E===Ie){we?we===1?(E=ip(af(E),C,O),ac(E,C,O,$,he,me,2)):we===2&&op(E,C,O,$,he,me):ac(af(E),C,O,$,he,me,1);break}}}}function np(E){var C=E.prev,O=E,$=E.next;if(Bo(C,O,$)>=0)return!1;for(var he=E.next.next;he!==E.prev;){if(Rf(C.x,C.y,O.x,O.y,$.x,$.y,he.x,he.y)&&Bo(he.prev,he,he.next)>=0)return!1;he=he.next}return!0}function ap(E,C,O,$){var he=E.prev,me=E,we=E.next;if(Bo(he,me,we)>=0)return!1;for(var Ie=he.x<me.x?he.x<we.x?he.x:we.x:me.x<we.x?me.x:we.x,$e=he.y<me.y?he.y<we.y?he.y:we.y:me.y<we.y?me.y:we.y,ut=he.x>me.x?he.x>we.x?he.x:we.x:me.x>we.x?me.x:we.x,gt=he.y>me.y?he.y>we.y?he.y:we.y:me.y>we.y?me.y:we.y,Rt=rh(Ie,$e,C,O,$),$t=rh(ut,gt,C,O,$),Wt=E.prevZ,vr=E.nextZ;Wt&&Wt.z>=Rt&&vr&&vr.z<=$t;){if(Wt!==E.prev&&Wt!==E.next&&Rf(he.x,he.y,me.x,me.y,we.x,we.y,Wt.x,Wt.y)&&Bo(Wt.prev,Wt,Wt.next)>=0||(Wt=Wt.prevZ,vr!==E.prev&&vr!==E.next&&Rf(he.x,he.y,me.x,me.y,we.x,we.y,vr.x,vr.y)&&Bo(vr.prev,vr,vr.next)>=0))return!1;vr=vr.nextZ}for(;Wt&&Wt.z>=Rt;){if(Wt!==E.prev&&Wt!==E.next&&Rf(he.x,he.y,me.x,me.y,we.x,we.y,Wt.x,Wt.y)&&Bo(Wt.prev,Wt,Wt.next)>=0)return!1;Wt=Wt.prevZ}for(;vr&&vr.z<=$t;){if(vr!==E.prev&&vr!==E.next&&Rf(he.x,he.y,me.x,me.y,we.x,we.y,vr.x,vr.y)&&Bo(vr.prev,vr,vr.next)>=0)return!1;vr=vr.nextZ}return!0}function ip(E,C,O){var $=E;do{var he=$.prev,me=$.next.next;!kc(he,me)&&Lh(he,$,$.next,me)&&ic(he,me)&&ic(me,he)&&(C.push(he.i/O),C.push($.i/O),C.push(me.i/O),oc($),oc($.next),$=E=me),$=$.next}while($!==E);return af($)}function op(E,C,O,$,he,me){var we=E;do{for(var Ie=we.next.next;Ie!==we.prev;){if(we.i!==Ie.i&&dp(we,Ie)){var $e=Ph(we,Ie);we=af(we,we.next),$e=af($e,$e.next),ac(we,C,O,$,he,me),ac($e,C,O,$,he,me);return}Ie=Ie.next}we=we.next}while(we!==E)}function sp(E,C,O,$){var he=[],me,we,Ie,$e,ut;for(me=0,we=C.length;me<we;me++)Ie=C[me]*$,$e=me<we-1?C[me+1]*$:E.length,ut=Ch(E,Ie,$e,$,!1),ut===ut.next&&(ut.steiner=!0),he.push(pp(ut));for(he.sort(lp),me=0;me<he.length;me++)up(he[me],O),O=af(O,O.next);return O}function lp(E,C){return E.x-C.x}function up(E,C){if(C=fp(E,C),C){var O=Ph(C,E);af(C,C.next),af(O,O.next)}}function fp(E,C){var O=C,$=E.x,he=E.y,me=-1/0,we;do{if(he<=O.y&&he>=O.next.y&&O.next.y!==O.y){var Ie=O.x+(he-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(Ie<=$&&Ie>me){if(me=Ie,Ie===$){if(he===O.y)return O;if(he===O.next.y)return O.next}we=O.x<O.next.x?O:O.next}}O=O.next}while(O!==C);if(!we)return null;if($===me)return we;var $e=we,ut=we.x,gt=we.y,Rt=1/0,$t;O=we;do $>=O.x&&O.x>=ut&&$!==O.x&&Rf(he<gt?$:me,he,ut,gt,he<gt?me:$,he,O.x,O.y)&&($t=Math.abs(he-O.y)/($-O.x),ic(O,E)&&($t<Rt||$t===Rt&&(O.x>we.x||O.x===we.x&&cp(we,O)))&&(we=O,Rt=$t)),O=O.next;while(O!==$e);return we}function cp(E,C){return Bo(E.prev,E,C.prev)<0&&Bo(C.next,E,E.next)<0}function hp(E,C,O,$){var he=E;do he.z===null&&(he.z=rh(he.x,he.y,C,O,$)),he.prevZ=he.prev,he.nextZ=he.next,he=he.next;while(he!==E);he.prevZ.nextZ=null,he.prevZ=null,vp(he)}function vp(E){var C,O,$,he,me,we,Ie,$e,ut=1;do{for(O=E,E=null,me=null,we=0;O;){for(we++,$=O,Ie=0,C=0;C<ut&&(Ie++,$=$.nextZ,!!$);C++);for($e=ut;Ie>0||$e>0&&$;)Ie!==0&&($e===0||!$||O.z<=$.z)?(he=O,O=O.nextZ,Ie--):(he=$,$=$.nextZ,$e--),me?me.nextZ=he:E=he,he.prevZ=me,me=he;O=$}me.nextZ=null,ut*=2}while(we>1);return E}function rh(E,C,O,$,he){return E=32767*(E-O)*he,C=32767*(C-$)*he,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,E|C<<1}function pp(E){var C=E,O=E;do(C.x<O.x||C.x===O.x&&C.y<O.y)&&(O=C),C=C.next;while(C!==E);return O}function Rf(E,C,O,$,he,me,we,Ie){return(he-we)*(C-Ie)-(E-we)*(me-Ie)>=0&&(E-we)*($-Ie)-(O-we)*(C-Ie)>=0&&(O-we)*(me-Ie)-(he-we)*($-Ie)>=0}function dp(E,C){return E.next.i!==C.i&&E.prev.i!==C.i&&!gp(E,C)&&(ic(E,C)&&ic(C,E)&&yp(E,C)&&(Bo(E.prev,E,C.prev)||Bo(E,C.prev,C))||kc(E,C)&&Bo(E.prev,E,E.next)>0&&Bo(C.prev,C,C.next)>0)}function Bo(E,C,O){return(C.y-E.y)*(O.x-C.x)-(C.x-E.x)*(O.y-C.y)}function kc(E,C){return E.x===C.x&&E.y===C.y}function Lh(E,C,O,$){var he=Cc(Bo(E,C,O)),me=Cc(Bo(E,C,$)),we=Cc(Bo(O,$,E)),Ie=Cc(Bo(O,$,C));return!!(he!==me&&we!==Ie||he===0&&Ec(E,O,C)||me===0&&Ec(E,$,C)||we===0&&Ec(O,E,$)||Ie===0&&Ec(O,C,$))}function Ec(E,C,O){return C.x<=Math.max(E.x,O.x)&&C.x>=Math.min(E.x,O.x)&&C.y<=Math.max(E.y,O.y)&&C.y>=Math.min(E.y,O.y)}function Cc(E){return E>0?1:E<0?-1:0}function gp(E,C){var O=E;do{if(O.i!==E.i&&O.next.i!==E.i&&O.i!==C.i&&O.next.i!==C.i&&Lh(O,O.next,E,C))return!0;O=O.next}while(O!==E);return!1}function ic(E,C){return Bo(E.prev,E,E.next)<0?Bo(E,C,E.next)>=0&&Bo(E,E.prev,C)>=0:Bo(E,C,E.prev)<0||Bo(E,E.next,C)<0}function yp(E,C){var O=E,$=!1,he=(E.x+C.x)/2,me=(E.y+C.y)/2;do O.y>me!=O.next.y>me&&O.next.y!==O.y&&he<(O.next.x-O.x)*(me-O.y)/(O.next.y-O.y)+O.x&&($=!$),O=O.next;while(O!==E);return $}function Ph(E,C){var O=new nh(E.i,E.x,E.y),$=new nh(C.i,C.x,C.y),he=E.next,me=C.prev;return E.next=C,C.prev=E,O.next=he,he.prev=O,$.next=O,O.prev=$,me.next=$,$.prev=me,$}function Dh(E,C,O,$){var he=new nh(E,C,O);return $?(he.next=$.next,he.prev=$,$.next.prev=he,$.next=he):(he.prev=he,he.next=he),he}function oc(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function nh(E,C,O){this.i=E,this.x=C,this.y=O,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Sc.deviation=function(E,C,O,$){var he=C&&C.length,me=he?C[0]*O:E.length,we=Math.abs(ah(E,0,me,O));if(he)for(var Ie=0,$e=C.length;Ie<$e;Ie++){var ut=C[Ie]*O,gt=Ie<$e-1?C[Ie+1]*O:E.length;we-=Math.abs(ah(E,ut,gt,O))}var Rt=0;for(Ie=0;Ie<$.length;Ie+=3){var $t=$[Ie]*O,Wt=$[Ie+1]*O,vr=$[Ie+2]*O;Rt+=Math.abs((E[$t]-E[vr])*(E[Wt+1]-E[$t+1])-(E[$t]-E[Wt])*(E[vr+1]-E[$t+1]))}return we===0&&Rt===0?0:Math.abs((Rt-we)/we)};function ah(E,C,O,$){for(var he=0,me=C,we=O-$;me<O;me+=$)he+=(E[we]-E[me])*(E[me+1]+E[we+1]),we=me;return he}Sc.flatten=function(E){for(var C=E[0][0].length,O={vertices:[],holes:[],dimensions:C},$=0,he=0;he<E.length;he++){for(var me=0;me<E[he].length;me++)for(var we=0;we<C;we++)O.vertices.push(E[he][me][we]);he>0&&($+=E[he-1].length,O.holes.push($))}return O},th.default=rp;function mp(E,C,O,$,he){Rh(E,C,O||0,$||E.length-1,he||xp)}function Rh(E,C,O,$,he){for(;$>O;){if($-O>600){var me=$-O+1,we=C-O+1,Ie=Math.log(me),$e=.5*Math.exp(2*Ie/3),ut=.5*Math.sqrt(Ie*$e*(me-$e)/me)*(we-me/2<0?-1:1),gt=Math.max(O,Math.floor(C-we*$e/me+ut)),Rt=Math.min($,Math.floor(C+(me-we)*$e/me+ut));Rh(E,C,gt,Rt,he)}var $t=E[C],Wt=O,vr=$;for(sc(E,O,C),he(E[$],$t)>0&&sc(E,O,$);Wt<vr;){for(sc(E,Wt,vr),Wt++,vr--;he(E[Wt],$t)<0;)Wt++;for(;he(E[vr],$t)>0;)vr--}he(E[O],$t)===0?sc(E,O,vr):(vr++,sc(E,vr,$)),vr<=C&&(O=vr+1),C<=vr&&($=vr-1)}}function sc(E,C,O){var $=E[C];E[C]=E[O],E[O]=$}function xp(E,C){return E<C?-1:E>C?1:0}function ih(E,C){var O=E.length;if(O<=1)return[E];for(var $=[],he,me,we=0;we<O;we++){var Ie=V(E[we]);Ie!==0&&(E[we].area=Math.abs(Ie),me===void 0&&(me=Ie<0),me===Ie<0?(he&&$.push(he),he=[E[we]]):he.push(E[we]))}if(he&&$.push(he),C>1)for(var $e=0;$e<$.length;$e++)$[$e].length<=C||(mp($[$e],C,1,$[$e].length-1,bp),$[$e]=$[$e].slice(0,C));return $}function bp(E,C){return C.area-E.area}function oh(E,C,O){for(var $=O.patternDependencies,he=!1,me=0,we=C;me<we.length;me+=1){var Ie=we[me],$e=Ie.paint.get(E+"-pattern");$e.isConstant()||(he=!0);var ut=$e.constantOr(null);ut&&(he=!0,$[ut.to]=!0,$[ut.from]=!0)}return he}function sh(E,C,O,$,he){for(var me=he.patternDependencies,we=0,Ie=C;we<Ie.length;we+=1){var $e=Ie[we],ut=$e.paint.get(E+"-pattern"),gt=ut.value;if(gt.kind!=="constant"){var Rt=gt.evaluate({zoom:$-1},O,{},he.availableImages),$t=gt.evaluate({zoom:$},O,{},he.availableImages),Wt=gt.evaluate({zoom:$+1},O,{},he.availableImages);Rt=Rt&&Rt.name?Rt.name:Rt,$t=$t&&$t.name?$t.name:$t,Wt=Wt&&Wt.name?Wt.name:Wt,me[Rt]=!0,me[$t]=!0,me[Wt]=!0,O.patterns[$e.id]={min:Rt,mid:$t,max:Wt}}}return O}var _p=500,bu=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new hf,this.indexArray=new mu,this.indexArray2=new df,this.programConfigurations=new ni(Eh,C.layers,C.zoom),this.segments=new H,this.segments2=new H,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};bu.prototype.populate=function(C,O,$){this.hasPattern=oh("fill",this.layers,O);for(var he=this.layers[0].layout.get("fill-sort-key"),me=[],we=0,Ie=C;we<Ie.length;we+=1){var $e=Ie[we],ut=$e.feature,gt=$e.id,Rt=$e.index,$t=$e.sourceLayerIndex,Wt=this.layers[0]._featureFilter.needGeometry,vr={type:ut.type,id:gt,properties:ut.properties,geometry:Wt?Ni(ut):[]};if(!!this.layers[0]._featureFilter.filter(new ui(this.zoom),vr,$)){Wt||(vr.geometry=Ni(ut));var Dr=he?he.evaluate(vr,{},$,O.availableImages):void 0,sn={id:gt,properties:ut.properties,type:ut.type,sourceLayerIndex:$t,index:Rt,geometry:vr.geometry,patterns:{},sortKey:Dr};me.push(sn)}}he&&me.sort(function(_a,Sa){return _a.sortKey-Sa.sortKey});for(var Qr=0,Mn=me;Qr<Mn.length;Qr+=1){var yn=Mn[Qr],Tn=yn,Rn=Tn.geometry,Vn=Tn.index,sa=Tn.sourceLayerIndex;if(this.hasPattern){var na=sh("fill",this.layers,yn,this.zoom,O);this.patternFeatures.push(na)}else this.addFeature(yn,Rn,Vn,$,{});var Ia=C[Vn].feature;O.featureIndex.insert(Ia,Rn,Vn,sa,this.index)}},bu.prototype.update=function(C,O,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,O,this.stateDependentLayers,$)},bu.prototype.addFeatures=function(C,O,$){for(var he=0,me=this.patternFeatures;he<me.length;he+=1){var we=me[he];this.addFeature(we,we.geometry,we.index,O,$)}},bu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bu.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Eh),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.indexBuffer2=C.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(C),this.uploaded=!0},bu.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},bu.prototype.addFeature=function(C,O,$,he,me){for(var we=0,Ie=ih(O,_p);we<Ie.length;we+=1){for(var $e=Ie[we],ut=0,gt=0,Rt=$e;gt<Rt.length;gt+=1){var $t=Rt[gt];ut+=$t.length}for(var Wt=this.segments.prepareSegment(ut,this.layoutVertexArray,this.indexArray),vr=Wt.vertexLength,Dr=[],sn=[],Qr=0,Mn=$e;Qr<Mn.length;Qr+=1){var yn=Mn[Qr];if(yn.length!==0){yn!==$e[0]&&sn.push(Dr.length/2);var Tn=this.segments2.prepareSegment(yn.length,this.layoutVertexArray,this.indexArray2),Rn=Tn.vertexLength;this.layoutVertexArray.emplaceBack(yn[0].x,yn[0].y),this.indexArray2.emplaceBack(Rn+yn.length-1,Rn),Dr.push(yn[0].x),Dr.push(yn[0].y);for(var Vn=1;Vn<yn.length;Vn++)this.layoutVertexArray.emplaceBack(yn[Vn].x,yn[Vn].y),this.indexArray2.emplaceBack(Rn+Vn-1,Rn+Vn),Dr.push(yn[Vn].x),Dr.push(yn[Vn].y);Tn.vertexLength+=yn.length,Tn.primitiveLength+=yn.length}}for(var sa=th(Dr,sn),na=0;na<sa.length;na+=3)this.indexArray.emplaceBack(vr+sa[na],vr+sa[na+1],vr+sa[na+2]);Wt.vertexLength+=ut,Wt.primitiveLength+=sa.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,$,me,he)},ze("FillBucket",bu,{omit:["layers","patternFeatures"]});var wp=new Xi({"fill-sort-key":new Xa(Ft.layout_fill["fill-sort-key"])}),Tp=new Xi({"fill-antialias":new za(Ft.paint_fill["fill-antialias"]),"fill-opacity":new Xa(Ft.paint_fill["fill-opacity"]),"fill-color":new Xa(Ft.paint_fill["fill-color"]),"fill-outline-color":new Xa(Ft.paint_fill["fill-outline-color"]),"fill-translate":new za(Ft.paint_fill["fill-translate"]),"fill-translate-anchor":new za(Ft.paint_fill["fill-translate-anchor"]),"fill-pattern":new xo(Ft.paint_fill["fill-pattern"])}),Ap={paint:Tp,layout:wp},Mp=function(E){function C(O){E.call(this,O,Ap)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.recalculate=function($,he){E.prototype.recalculate.call(this,$,he);var me=this.paint._values["fill-outline-color"];me.value.kind==="constant"&&me.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},C.prototype.createBucket=function($){return new bu($)},C.prototype.queryRadius=function(){return ql(this.paint.get("fill-translate"))},C.prototype.queryIntersectsFeature=function($,he,me,we,Ie,$e,ut){var gt=Ul($,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),$e.angle,ut);return _o(gt,we)},C.prototype.isTileClipped=function(){return!0},C}(ms),Sp=Do([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Ih=Sp.members,zh=If;function If(E,C,O,$,he){this.properties={},this.extent=O,this.type=0,this._pbf=E,this._geometry=-1,this._keys=$,this._values=he,E.readFields(kp,this,C)}function kp(E,C,O){E==1?C.id=O.readVarint():E==2?Ep(O,C):E==3?C.type=O.readVarint():E==4&&(C._geometry=O.pos)}function Ep(E,C){for(var O=E.readVarint()+E.pos;E.pos<O;){var $=C._keys[E.readVarint()],he=C._values[E.readVarint()];C.properties[$]=he}}If.types=["Unknown","Point","LineString","Polygon"],If.prototype.loadGeometry=function(){var E=this._pbf;E.pos=this._geometry;for(var C=E.readVarint()+E.pos,O=1,$=0,he=0,me=0,we=[],Ie;E.pos<C;){if($<=0){var $e=E.readVarint();O=$e&7,$=$e>>3}if($--,O===1||O===2)he+=E.readSVarint(),me+=E.readSVarint(),O===1&&(Ie&&we.push(Ie),Ie=[]),Ie.push(new f(he,me));else if(O===7)Ie&&Ie.push(Ie[0].clone());else throw new Error("unknown command "+O)}return Ie&&we.push(Ie),we},If.prototype.bbox=function(){var E=this._pbf;E.pos=this._geometry;for(var C=E.readVarint()+E.pos,O=1,$=0,he=0,me=0,we=1/0,Ie=-1/0,$e=1/0,ut=-1/0;E.pos<C;){if($<=0){var gt=E.readVarint();O=gt&7,$=gt>>3}if($--,O===1||O===2)he+=E.readSVarint(),me+=E.readSVarint(),he<we&&(we=he),he>Ie&&(Ie=he),me<$e&&($e=me),me>ut&&(ut=me);else if(O!==7)throw new Error("unknown command "+O)}return[we,$e,Ie,ut]},If.prototype.toGeoJSON=function(E,C,O){var $=this.extent*Math.pow(2,O),he=this.extent*E,me=this.extent*C,we=this.loadGeometry(),Ie=If.types[this.type],$e,ut;function gt(Wt){for(var vr=0;vr<Wt.length;vr++){var Dr=Wt[vr],sn=180-(Dr.y+me)*360/$;Wt[vr]=[(Dr.x+he)*360/$-180,360/Math.PI*Math.atan(Math.exp(sn*Math.PI/180))-90]}}switch(this.type){case 1:var Rt=[];for($e=0;$e<we.length;$e++)Rt[$e]=we[$e][0];we=Rt,gt(we);break;case 2:for($e=0;$e<we.length;$e++)gt(we[$e]);break;case 3:for(we=Cp(we),$e=0;$e<we.length;$e++)for(ut=0;ut<we[$e].length;ut++)gt(we[$e][ut]);break}we.length===1?we=we[0]:Ie="Multi"+Ie;var $t={type:"Feature",geometry:{type:Ie,coordinates:we},properties:this.properties};return"id"in this&&($t.id=this.id),$t};function Cp(E){var C=E.length;if(C<=1)return[E];for(var O=[],$,he,me=0;me<C;me++){var we=Lp(E[me]);we!==0&&(he===void 0&&(he=we<0),he===we<0?($&&O.push($),$=[E[me]]):$.push(E[me]))}return $&&O.push($),O}function Lp(E){for(var C=0,O=0,$=E.length,he=$-1,me,we;O<$;he=O++)me=E[O],we=E[he],C+=(we.x-me.x)*(me.y+we.y);return C}var Fh=Bh;function Bh(E,C){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=E,this._keys=[],this._values=[],this._features=[],E.readFields(Pp,this,C),this.length=this._features.length}function Pp(E,C,O){E===15?C.version=O.readVarint():E===1?C.name=O.readString():E===5?C.extent=O.readVarint():E===2?C._features.push(O.pos):E===3?C._keys.push(O.readString()):E===4&&C._values.push(Dp(O))}function Dp(E){for(var C=null,O=E.readVarint()+E.pos;E.pos<O;){var $=E.readVarint()>>3;C=$===1?E.readString():$===2?E.readFloat():$===3?E.readDouble():$===4?E.readVarint64():$===5?E.readVarint():$===6?E.readSVarint():$===7?E.readBoolean():null}return C}Bh.prototype.feature=function(E){if(E<0||E>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[E];var C=this._pbf.readVarint()+this._pbf.pos;return new zh(this._pbf,C,this.extent,this._keys,this._values)};var Rp=Ip;function Ip(E,C){this.layers=E.readFields(zp,{},C)}function zp(E,C,O){if(E===3){var $=new Fh(O,O.readVarint()+O.pos);$.length&&(C[$.name]=$)}}var Fp=Rp,Bp=zh,Op=Fh,zf={VectorTile:Fp,VectorTileFeature:Bp,VectorTileLayer:Op},Np=zf.VectorTileFeature.types,Up=500,lh=Math.pow(2,13);function lc(E,C,O,$,he,me,we,Ie){E.emplaceBack(C,O,Math.floor($*lh)*2+we,he*lh*2,me*lh*2,Math.round(Ie))}var _u=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new $u,this.indexArray=new mu,this.programConfigurations=new ni(Ih,C.layers,C.zoom),this.segments=new H,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};_u.prototype.populate=function(C,O,$){this.features=[],this.hasPattern=oh("fill-extrusion",this.layers,O);for(var he=0,me=C;he<me.length;he+=1){var we=me[he],Ie=we.feature,$e=we.id,ut=we.index,gt=we.sourceLayerIndex,Rt=this.layers[0]._featureFilter.needGeometry,$t={type:Ie.type,id:$e,properties:Ie.properties,geometry:Rt?Ni(Ie):[]};if(!!this.layers[0]._featureFilter.filter(new ui(this.zoom),$t,$)){var Wt={id:$e,sourceLayerIndex:gt,index:ut,geometry:Rt?$t.geometry:Ni(Ie),properties:Ie.properties,type:Ie.type,patterns:{}};typeof Ie.id!="undefined"&&(Wt.id=Ie.id),this.hasPattern?this.features.push(sh("fill-extrusion",this.layers,Wt,this.zoom,O)):this.addFeature(Wt,Wt.geometry,ut,$,{}),O.featureIndex.insert(Ie,Wt.geometry,ut,gt,this.index,!0)}}},_u.prototype.addFeatures=function(C,O,$){for(var he=0,me=this.features;he<me.length;he+=1){var we=me[he],Ie=we.geometry;this.addFeature(we,Ie,we.index,O,$)}},_u.prototype.update=function(C,O,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,O,this.stateDependentLayers,$)},_u.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},_u.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},_u.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Ih),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},_u.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},_u.prototype.addFeature=function(C,O,$,he,me){for(var we=0,Ie=ih(O,Up);we<Ie.length;we+=1){for(var $e=Ie[we],ut=0,gt=0,Rt=$e;gt<Rt.length;gt+=1){var $t=Rt[gt];ut+=$t.length}for(var Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),vr=0,Dr=$e;vr<Dr.length;vr+=1){var sn=Dr[vr];if(sn.length!==0&&!Hp(sn))for(var Qr=0,Mn=0;Mn<sn.length;Mn++){var yn=sn[Mn];if(Mn>=1){var Tn=sn[Mn-1];if(!Vp(yn,Tn)){Wt.vertexLength+4>H.MAX_VERTEX_ARRAY_LENGTH&&(Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Rn=yn.sub(Tn)._perp()._unit(),Vn=Tn.dist(yn);Qr+Vn>32768&&(Qr=0),lc(this.layoutVertexArray,yn.x,yn.y,Rn.x,Rn.y,0,0,Qr),lc(this.layoutVertexArray,yn.x,yn.y,Rn.x,Rn.y,0,1,Qr),Qr+=Vn,lc(this.layoutVertexArray,Tn.x,Tn.y,Rn.x,Rn.y,0,0,Qr),lc(this.layoutVertexArray,Tn.x,Tn.y,Rn.x,Rn.y,0,1,Qr);var sa=Wt.vertexLength;this.indexArray.emplaceBack(sa,sa+2,sa+1),this.indexArray.emplaceBack(sa+1,sa+2,sa+3),Wt.vertexLength+=4,Wt.primitiveLength+=2}}}}if(Wt.vertexLength+ut>H.MAX_VERTEX_ARRAY_LENGTH&&(Wt=this.segments.prepareSegment(ut,this.layoutVertexArray,this.indexArray)),Np[C.type]==="Polygon"){for(var na=[],Ia=[],_a=Wt.vertexLength,Sa=0,ei=$e;Sa<ei.length;Sa+=1){var La=ei[Sa];if(La.length!==0){La!==$e[0]&&Ia.push(na.length/2);for(var Ra=0;Ra<La.length;Ra++){var ci=La[Ra];lc(this.layoutVertexArray,ci.x,ci.y,0,0,1,1,0),na.push(ci.x),na.push(ci.y)}}}for(var Qa=th(na,Ia),ki=0;ki<Qa.length;ki+=3)this.indexArray.emplaceBack(_a+Qa[ki],_a+Qa[ki+2],_a+Qa[ki+1]);Wt.primitiveLength+=Qa.length/3,Wt.vertexLength+=ut}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,$,me,he)},ze("FillExtrusionBucket",_u,{omit:["layers","features"]});function Vp(E,C){return E.x===C.x&&(E.x<0||E.x>Na)||E.y===C.y&&(E.y<0||E.y>Na)}function Hp(E){return E.every(function(C){return C.x<0})||E.every(function(C){return C.x>Na})||E.every(function(C){return C.y<0})||E.every(function(C){return C.y>Na})}var Gp=new Xi({"fill-extrusion-opacity":new za(Ft["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Xa(Ft["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new za(Ft["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new za(Ft["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xo(Ft["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Xa(Ft["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Xa(Ft["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new za(Ft["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),Yp={paint:Gp},Wp=function(E){function C(O){E.call(this,O,Yp)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function($){return new _u($)},C.prototype.queryRadius=function(){return ql(this.paint.get("fill-extrusion-translate"))},C.prototype.is3D=function(){return!0},C.prototype.queryIntersectsFeature=function($,he,me,we,Ie,$e,ut,gt){var Rt=Ul($,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),$e.angle,ut),$t=this.paint.get("fill-extrusion-height").evaluate(he,me),Wt=this.paint.get("fill-extrusion-base").evaluate(he,me),vr=jp(Rt,gt,$e,0),Dr=Zp(we,Wt,$t,gt),sn=Dr[0],Qr=Dr[1];return Xp(sn,Qr,vr)},C}(ms);function uc(E,C){return E.x*C.x+E.y*C.y}function Oh(E,C){if(E.length===1){for(var O=0,$=C[O++],he;!he||$.equals(he);)if(he=C[O++],!he)return 1/0;for(;O<C.length;O++){var me=C[O],we=E[0],Ie=he.sub($),$e=me.sub($),ut=we.sub($),gt=uc(Ie,Ie),Rt=uc(Ie,$e),$t=uc($e,$e),Wt=uc(ut,Ie),vr=uc(ut,$e),Dr=gt*$t-Rt*Rt,sn=($t*Wt-Rt*vr)/Dr,Qr=(gt*vr-Rt*Wt)/Dr,Mn=1-sn-Qr,yn=$.z*Mn+he.z*sn+me.z*Qr;if(isFinite(yn))return yn}return 1/0}else{for(var Tn=1/0,Rn=0,Vn=C;Rn<Vn.length;Rn+=1){var sa=Vn[Rn];Tn=Math.min(Tn,sa.z)}return Tn}}function Xp(E,C,O){var $=1/0;_o(O,C)&&($=Oh(O,C[0]));for(var he=0;he<C.length;he++)for(var me=C[he],we=E[he],Ie=0;Ie<me.length-1;Ie++){var $e=me[Ie],ut=me[Ie+1],gt=we[Ie],Rt=we[Ie+1],$t=[$e,ut,Rt,gt,$e];ii(O,$t)&&($=Math.min($,Oh(O,$t)))}return $===1/0?!1:$}function Zp(E,C,O,$){for(var he=[],me=[],we=$[8]*C,Ie=$[9]*C,$e=$[10]*C,ut=$[11]*C,gt=$[8]*O,Rt=$[9]*O,$t=$[10]*O,Wt=$[11]*O,vr=0,Dr=E;vr<Dr.length;vr+=1){for(var sn=Dr[vr],Qr=[],Mn=[],yn=0,Tn=sn;yn<Tn.length;yn+=1){var Rn=Tn[yn],Vn=Rn.x,sa=Rn.y,na=$[0]*Vn+$[4]*sa+$[12],Ia=$[1]*Vn+$[5]*sa+$[13],_a=$[2]*Vn+$[6]*sa+$[14],Sa=$[3]*Vn+$[7]*sa+$[15],ei=na+we,La=Ia+Ie,Ra=_a+$e,ci=Sa+ut,Qa=na+gt,ki=Ia+Rt,Wi=_a+$t,Ei=Sa+Wt,Ci=new f(ei/ci,La/ci);Ci.z=Ra/ci,Qr.push(Ci);var Ti=new f(Qa/Ei,ki/Ei);Ti.z=Wi/Ei,Mn.push(Ti)}he.push(Qr),me.push(Mn)}return[he,me]}function jp(E,C,O,$){for(var he=[],me=0,we=E;me<we.length;me+=1){var Ie=we[me],$e=[Ie.x,Ie.y,$,1];Mc($e,$e,C),he.push(new f($e[0]/$e[3],$e[1]/$e[3]))}return he}var Kp=Do([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Nh=Kp.members,Jp=zf.VectorTileFeature.types,Uh=63,Qp=Math.cos(75/2*(Math.PI/180)),$p=15,qp=20,ed=15,Vh=1/2,Hh=Math.pow(2,ed-1)/Vh,el=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Af,this.indexArray=new mu,this.programConfigurations=new ni(Nh,C.layers,C.zoom),this.segments=new H,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};el.prototype.populate=function(C,O,$){this.hasPattern=oh("line",this.layers,O);for(var he=this.layers[0].layout.get("line-sort-key"),me=[],we=0,Ie=C;we<Ie.length;we+=1){var $e=Ie[we],ut=$e.feature,gt=$e.id,Rt=$e.index,$t=$e.sourceLayerIndex,Wt=this.layers[0]._featureFilter.needGeometry,vr={type:ut.type,id:gt,properties:ut.properties,geometry:Wt?Ni(ut):[]};if(!!this.layers[0]._featureFilter.filter(new ui(this.zoom),vr,$)){Wt||(vr.geometry=Ni(ut));var Dr=he?he.evaluate(vr,{},$):void 0,sn={id:gt,properties:ut.properties,type:ut.type,sourceLayerIndex:$t,index:Rt,geometry:vr.geometry,patterns:{},sortKey:Dr};me.push(sn)}}he&&me.sort(function(_a,Sa){return _a.sortKey-Sa.sortKey});for(var Qr=0,Mn=me;Qr<Mn.length;Qr+=1){var yn=Mn[Qr],Tn=yn,Rn=Tn.geometry,Vn=Tn.index,sa=Tn.sourceLayerIndex;if(this.hasPattern){var na=sh("line",this.layers,yn,this.zoom,O);this.patternFeatures.push(na)}else this.addFeature(yn,Rn,Vn,$,{});var Ia=C[Vn].feature;O.featureIndex.insert(Ia,Rn,Vn,sa,this.index)}},el.prototype.update=function(C,O,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,O,this.stateDependentLayers,$)},el.prototype.addFeatures=function(C,O,$){for(var he=0,me=this.patternFeatures;he<me.length;he+=1){var we=me[he];this.addFeature(we,we.geometry,we.index,O,$)}},el.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},el.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},el.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Nh),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},el.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},el.prototype.addFeature=function(C,O,$,he,me){for(var we=this.layers[0].layout,Ie=we.get("line-join").evaluate(C,{}),$e=we.get("line-cap"),ut=we.get("line-miter-limit"),gt=we.get("line-round-limit"),Rt=0,$t=O;Rt<$t.length;Rt+=1){var Wt=$t[Rt];this.addLine(Wt,C,Ie,$e,ut,gt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,$,me,he)},el.prototype.addLine=function(C,O,$,he,me,we){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!O.properties&&O.properties.hasOwnProperty("mapbox_clip_start")&&O.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+O.properties.mapbox_clip_start,this.clipEnd=+O.properties.mapbox_clip_end;for(var Ie=0;Ie<C.length-1;Ie++)this.totalDistance+=C[Ie].dist(C[Ie+1]);this.updateScaledDistance()}for(var $e=Jp[O.type]==="Polygon",ut=C.length;ut>=2&&C[ut-1].equals(C[ut-2]);)ut--;for(var gt=0;gt<ut-1&&C[gt].equals(C[gt+1]);)gt++;if(!(ut<($e?3:2))){$==="bevel"&&(me=1.05);var Rt=this.overscaling<=16?$p*Na/(512*this.overscaling):0,$t=this.segments.prepareSegment(ut*10,this.layoutVertexArray,this.indexArray),Wt,vr=void 0,Dr=void 0,sn=void 0,Qr=void 0;this.e1=this.e2=-1,$e&&(Wt=C[ut-2],Qr=C[gt].sub(Wt)._unit()._perp());for(var Mn=gt;Mn<ut;Mn++)if(Dr=Mn===ut-1?$e?C[gt+1]:void 0:C[Mn+1],!(Dr&&C[Mn].equals(Dr))){Qr&&(sn=Qr),Wt&&(vr=Wt),Wt=C[Mn],Qr=Dr?Dr.sub(Wt)._unit()._perp():sn,sn=sn||Qr;var yn=sn.add(Qr);(yn.x!==0||yn.y!==0)&&yn._unit();var Tn=sn.x*Qr.x+sn.y*Qr.y,Rn=yn.x*Qr.x+yn.y*Qr.y,Vn=Rn!==0?1/Rn:1/0,sa=2*Math.sqrt(2-2*Rn),na=Rn<Qp&&vr&&Dr,Ia=sn.x*Qr.y-sn.y*Qr.x>0;if(na&&Mn>gt){var _a=Wt.dist(vr);if(_a>2*Rt){var Sa=Wt.sub(Wt.sub(vr)._mult(Rt/_a)._round());this.updateDistance(vr,Sa),this.addCurrentVertex(Sa,sn,0,0,$t),vr=Sa}}var ei=vr&&Dr,La=ei?$:$e?"butt":he;if(ei&&La==="round"&&(Vn<we?La="miter":Vn<=2&&(La="fakeround")),La==="miter"&&Vn>me&&(La="bevel"),La==="bevel"&&(Vn>2&&(La="flipbevel"),Vn<me&&(La="miter")),vr&&this.updateDistance(vr,Wt),La==="miter")yn._mult(Vn),this.addCurrentVertex(Wt,yn,0,0,$t);else if(La==="flipbevel"){if(Vn>100)yn=Qr.mult(-1);else{var Ra=Vn*sn.add(Qr).mag()/sn.sub(Qr).mag();yn._perp()._mult(Ra*(Ia?-1:1))}this.addCurrentVertex(Wt,yn,0,0,$t),this.addCurrentVertex(Wt,yn.mult(-1),0,0,$t)}else if(La==="bevel"||La==="fakeround"){var ci=-Math.sqrt(Vn*Vn-1),Qa=Ia?ci:0,ki=Ia?0:ci;if(vr&&this.addCurrentVertex(Wt,sn,Qa,ki,$t),La==="fakeround")for(var Wi=Math.round(sa*180/Math.PI/qp),Ei=1;Ei<Wi;Ei++){var Ci=Ei/Wi;if(Ci!==.5){var Ti=Ci-.5,$i=1.0904+Tn*(-3.2452+Tn*(3.55645-Tn*1.43519)),ro=.848013+Tn*(-1.06021+Tn*.215638);Ci=Ci+Ci*Ti*(Ci-1)*($i*Ti*Ti+ro)}var wo=Qr.sub(sn)._mult(Ci)._add(sn)._unit()._mult(Ia?-1:1);this.addHalfVertex(Wt,wo.x,wo.y,!1,Ia,0,$t)}Dr&&this.addCurrentVertex(Wt,Qr,-Qa,-ki,$t)}else if(La==="butt")this.addCurrentVertex(Wt,yn,0,0,$t);else if(La==="square"){var Co=vr?1:-1;this.addCurrentVertex(Wt,yn,Co,Co,$t)}else La==="round"&&(vr&&(this.addCurrentVertex(Wt,sn,0,0,$t),this.addCurrentVertex(Wt,sn,1,1,$t,!0)),Dr&&(this.addCurrentVertex(Wt,Qr,-1,-1,$t,!0),this.addCurrentVertex(Wt,Qr,0,0,$t)));if(na&&Mn<ut-1){var $o=Wt.dist(Dr);if($o>2*Rt){var Uo=Wt.add(Dr.sub(Wt)._mult(Rt/$o)._round());this.updateDistance(Wt,Uo),this.addCurrentVertex(Uo,Qr,0,0,$t),Wt=Uo}}}}},el.prototype.addCurrentVertex=function(C,O,$,he,me,we){we===void 0&&(we=!1);var Ie=O.x+O.y*$,$e=O.y-O.x*$,ut=-O.x+O.y*he,gt=-O.y-O.x*he;this.addHalfVertex(C,Ie,$e,we,!1,$,me),this.addHalfVertex(C,ut,gt,we,!0,-he,me),this.distance>Hh/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(C,O,$,he,me,we))},el.prototype.addHalfVertex=function(C,O,$,he,me,we,Ie){var $e=C.x,ut=C.y,gt=this.scaledDistance*Vh;this.layoutVertexArray.emplaceBack(($e<<1)+(he?1:0),(ut<<1)+(me?1:0),Math.round(Uh*O)+128,Math.round(Uh*$)+128,(we===0?0:we<0?-1:1)+1|(gt&63)<<2,gt>>6);var Rt=Ie.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Rt),Ie.primitiveLength++),me?this.e2=Rt:this.e1=Rt},el.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Hh-1):this.distance},el.prototype.updateDistance=function(C,O){this.distance+=C.dist(O),this.updateScaledDistance()},ze("LineBucket",el,{omit:["layers","patternFeatures"]});var td=new Xi({"line-cap":new za(Ft.layout_line["line-cap"]),"line-join":new Xa(Ft.layout_line["line-join"]),"line-miter-limit":new za(Ft.layout_line["line-miter-limit"]),"line-round-limit":new za(Ft.layout_line["line-round-limit"]),"line-sort-key":new Xa(Ft.layout_line["line-sort-key"])}),rd=new Xi({"line-opacity":new Xa(Ft.paint_line["line-opacity"]),"line-color":new Xa(Ft.paint_line["line-color"]),"line-translate":new za(Ft.paint_line["line-translate"]),"line-translate-anchor":new za(Ft.paint_line["line-translate-anchor"]),"line-width":new Xa(Ft.paint_line["line-width"]),"line-gap-width":new Xa(Ft.paint_line["line-gap-width"]),"line-offset":new Xa(Ft.paint_line["line-offset"]),"line-blur":new Xa(Ft.paint_line["line-blur"]),"line-dasharray":new eo(Ft.paint_line["line-dasharray"]),"line-pattern":new xo(Ft.paint_line["line-pattern"]),"line-gradient":new Po(Ft.paint_line["line-gradient"])}),Gh={paint:rd,layout:td},nd=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function($,he){return he=new ui(Math.floor(he.zoom),{now:he.now,fadeDuration:he.fadeDuration,zoomHistory:he.zoomHistory,transition:he.transition}),E.prototype.possiblyEvaluate.call(this,$,he)},C.prototype.evaluate=function($,he,me,we){return he=w({},he,{zoom:Math.floor(he.zoom)}),E.prototype.evaluate.call(this,$,he,me,we)},C}(Xa),Yh=new nd(Gh.paint.properties["line-width"].specification);Yh.useIntegerZoom=!0;var ad=function(E){function C(O){E.call(this,O,Gh)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._handleSpecialPaintPropertyUpdate=function($){$==="line-gradient"&&this._updateGradient()},C.prototype._updateGradient=function(){var $=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=kh($,"lineProgress"),this.gradientTexture=null},C.prototype.recalculate=function($,he){E.prototype.recalculate.call(this,$,he),this.paint._values["line-floorwidth"]=Yh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,$)},C.prototype.createBucket=function($){return new el($)},C.prototype.queryRadius=function($){var he=$,me=Wh(ul("line-width",this,he),ul("line-gap-width",this,he)),we=ul("line-offset",this,he);return me/2+Math.abs(we)+ql(this.paint.get("line-translate"))},C.prototype.queryIntersectsFeature=function($,he,me,we,Ie,$e,ut){var gt=Ul($,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),$e.angle,ut),Rt=ut/2*Wh(this.paint.get("line-width").evaluate(he,me),this.paint.get("line-gap-width").evaluate(he,me)),$t=this.paint.get("line-offset").evaluate(he,me);return $t&&(we=id(we,$t*ut)),Fo(gt,we,Rt)},C.prototype.isTileClipped=function(){return!0},C}(ms);function Wh(E,C){return C>0?C+2*E:E}function id(E,C){for(var O=[],$=new f(0,0),he=0;he<E.length;he++){for(var me=E[he],we=[],Ie=0;Ie<me.length;Ie++){var $e=me[Ie-1],ut=me[Ie],gt=me[Ie+1],Rt=Ie===0?$:ut.sub($e)._unit()._perp(),$t=Ie===me.length-1?$:gt.sub(ut)._unit()._perp(),Wt=Rt._add($t)._unit(),vr=Wt.x*$t.x+Wt.y*$t.y;Wt._mult(1/vr),we.push(Wt._mult(C)._add(ut))}O.push(we)}return O}var uh=Do([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),od=Do([{name:"a_projected_pos",components:3,type:"Float32"}],4);Do([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var sd=Do([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Do([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var Xh=Do([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ld=Do([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Do([{name:"triangle",components:3,type:"Uint16"}]),Do([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Do([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Do([{type:"Float32",name:"offsetX"}]),Do([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function ud(E,C,O){var $=C.layout.get("text-transform").evaluate(O,{});return $==="uppercase"?E=E.toLocaleUpperCase():$==="lowercase"&&(E=E.toLocaleLowerCase()),Wa.applyArabicShaping&&(E=Wa.applyArabicShaping(E)),E}function fd(E,C,O){return E.sections.forEach(function($){$.text=ud($.text,C,O)}),E}function cd(E){var C={},O={},$=[],he=0;function me(Qr){$.push(E[Qr]),he++}function we(Qr,Mn,yn){var Tn=O[Qr];return delete O[Qr],O[Mn]=Tn,$[Tn].geometry[0].pop(),$[Tn].geometry[0]=$[Tn].geometry[0].concat(yn[0]),Tn}function Ie(Qr,Mn,yn){var Tn=C[Mn];return delete C[Mn],C[Qr]=Tn,$[Tn].geometry[0].shift(),$[Tn].geometry[0]=yn[0].concat($[Tn].geometry[0]),Tn}function $e(Qr,Mn,yn){var Tn=yn?Mn[0][Mn[0].length-1]:Mn[0][0];return Qr+":"+Tn.x+":"+Tn.y}for(var ut=0;ut<E.length;ut++){var gt=E[ut],Rt=gt.geometry,$t=gt.text?gt.text.toString():null;if(!$t){me(ut);continue}var Wt=$e($t,Rt),vr=$e($t,Rt,!0);if(Wt in O&&vr in C&&O[Wt]!==C[vr]){var Dr=Ie(Wt,vr,Rt),sn=we(Wt,vr,$[Dr].geometry);delete C[Wt],delete O[vr],O[$e($t,$[sn].geometry,!0)]=sn,$[Dr].geometry=null}else Wt in O?we(Wt,vr,Rt):vr in C?Ie(Wt,vr,Rt):(me(ut),C[Wt]=he-1,O[vr]=he-1)}return $.filter(function(Qr){return Qr.geometry})}var fc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function hd(E){for(var C="",O=0;O<E.length;O++){var $=E.charCodeAt(O+1)||null,he=E.charCodeAt(O-1)||null,me=(!$||!an($)||fc[E[O+1]])&&(!he||!an(he)||fc[E[O-1]]);me&&fc[E[O]]?C+=fc[E[O]]:C+=E[O]}return C}var cs=24,vd=function(E,C,O,$,he){var me,we,Ie=he*8-$-1,$e=(1<<Ie)-1,ut=$e>>1,gt=-7,Rt=O?he-1:0,$t=O?-1:1,Wt=E[C+Rt];for(Rt+=$t,me=Wt&(1<<-gt)-1,Wt>>=-gt,gt+=Ie;gt>0;me=me*256+E[C+Rt],Rt+=$t,gt-=8);for(we=me&(1<<-gt)-1,me>>=-gt,gt+=$;gt>0;we=we*256+E[C+Rt],Rt+=$t,gt-=8);if(me===0)me=1-ut;else{if(me===$e)return we?NaN:(Wt?-1:1)*(1/0);we=we+Math.pow(2,$),me=me-ut}return(Wt?-1:1)*we*Math.pow(2,me-$)},pd=function(E,C,O,$,he,me){var we,Ie,$e,ut=me*8-he-1,gt=(1<<ut)-1,Rt=gt>>1,$t=he===23?Math.pow(2,-24)-Math.pow(2,-77):0,Wt=$?0:me-1,vr=$?1:-1,Dr=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(Ie=isNaN(C)?1:0,we=gt):(we=Math.floor(Math.log(C)/Math.LN2),C*($e=Math.pow(2,-we))<1&&(we--,$e*=2),we+Rt>=1?C+=$t/$e:C+=$t*Math.pow(2,1-Rt),C*$e>=2&&(we++,$e/=2),we+Rt>=gt?(Ie=0,we=gt):we+Rt>=1?(Ie=(C*$e-1)*Math.pow(2,he),we=we+Rt):(Ie=C*Math.pow(2,Rt-1)*Math.pow(2,he),we=0));he>=8;E[O+Wt]=Ie&255,Wt+=vr,Ie/=256,he-=8);for(we=we<<he|Ie,ut+=he;ut>0;E[O+Wt]=we&255,Wt+=vr,we/=256,ut-=8);E[O+Wt-vr]|=Dr*128},Lc={read:vd,write:pd},Pc=to;function to(E){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(E)?E:new Uint8Array(E||0),this.pos=0,this.type=0,this.length=this.buf.length}to.Varint=0,to.Fixed64=1,to.Bytes=2,to.Fixed32=5;var fh=(1<<16)*(1<<16),Zh=1/fh,dd=12,jh=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");to.prototype={destroy:function(){this.buf=null},readFields:function(E,C,O){for(O=O||this.length;this.pos<O;){var $=this.readVarint(),he=$>>3,me=this.pos;this.type=$&7,E(he,C,this),this.pos===me&&this.skip($)}return C},readMessage:function(E,C){return this.readFields(E,C,this.readVarint()+this.pos)},readFixed32:function(){var E=Dc(this.buf,this.pos);return this.pos+=4,E},readSFixed32:function(){var E=Jh(this.buf,this.pos);return this.pos+=4,E},readFixed64:function(){var E=Dc(this.buf,this.pos)+Dc(this.buf,this.pos+4)*fh;return this.pos+=8,E},readSFixed64:function(){var E=Dc(this.buf,this.pos)+Jh(this.buf,this.pos+4)*fh;return this.pos+=8,E},readFloat:function(){var E=Lc.read(this.buf,this.pos,!0,23,4);return this.pos+=4,E},readDouble:function(){var E=Lc.read(this.buf,this.pos,!0,52,8);return this.pos+=8,E},readVarint:function(E){var C=this.buf,O,$;return $=C[this.pos++],O=$&127,$<128||($=C[this.pos++],O|=($&127)<<7,$<128)||($=C[this.pos++],O|=($&127)<<14,$<128)||($=C[this.pos++],O|=($&127)<<21,$<128)?O:($=C[this.pos],O|=($&15)<<28,gd(O,E,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var E=this.readVarint();return E%2==1?(E+1)/-2:E/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var E=this.readVarint()+this.pos,C=this.pos;return this.pos=E,E-C>=dd&&jh?Ld(this.buf,C,E):Cd(this.buf,C,E)},readBytes:function(){var E=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,E);return this.pos=E,C},readPackedVarint:function(E,C){if(this.type!==to.Bytes)return E.push(this.readVarint(C));var O=Xu(this);for(E=E||[];this.pos<O;)E.push(this.readVarint(C));return E},readPackedSVarint:function(E){if(this.type!==to.Bytes)return E.push(this.readSVarint());var C=Xu(this);for(E=E||[];this.pos<C;)E.push(this.readSVarint());return E},readPackedBoolean:function(E){if(this.type!==to.Bytes)return E.push(this.readBoolean());var C=Xu(this);for(E=E||[];this.pos<C;)E.push(this.readBoolean());return E},readPackedFloat:function(E){if(this.type!==to.Bytes)return E.push(this.readFloat());var C=Xu(this);for(E=E||[];this.pos<C;)E.push(this.readFloat());return E},readPackedDouble:function(E){if(this.type!==to.Bytes)return E.push(this.readDouble());var C=Xu(this);for(E=E||[];this.pos<C;)E.push(this.readDouble());return E},readPackedFixed32:function(E){if(this.type!==to.Bytes)return E.push(this.readFixed32());var C=Xu(this);for(E=E||[];this.pos<C;)E.push(this.readFixed32());return E},readPackedSFixed32:function(E){if(this.type!==to.Bytes)return E.push(this.readSFixed32());var C=Xu(this);for(E=E||[];this.pos<C;)E.push(this.readSFixed32());return E},readPackedFixed64:function(E){if(this.type!==to.Bytes)return E.push(this.readFixed64());var C=Xu(this);for(E=E||[];this.pos<C;)E.push(this.readFixed64());return E},readPackedSFixed64:function(E){if(this.type!==to.Bytes)return E.push(this.readSFixed64());var C=Xu(this);for(E=E||[];this.pos<C;)E.push(this.readSFixed64());return E},skip:function(E){var C=E&7;if(C===to.Varint)for(;this.buf[this.pos++]>127;);else if(C===to.Bytes)this.pos=this.readVarint()+this.pos;else if(C===to.Fixed32)this.pos+=4;else if(C===to.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+C)},writeTag:function(E,C){this.writeVarint(E<<3|C)},realloc:function(E){for(var C=this.length||16;C<this.pos+E;)C*=2;if(C!==this.length){var O=new Uint8Array(C);O.set(this.buf),this.buf=O,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(E){this.realloc(4),Bf(this.buf,E,this.pos),this.pos+=4},writeSFixed32:function(E){this.realloc(4),Bf(this.buf,E,this.pos),this.pos+=4},writeFixed64:function(E){this.realloc(8),Bf(this.buf,E&-1,this.pos),Bf(this.buf,Math.floor(E*Zh),this.pos+4),this.pos+=8},writeSFixed64:function(E){this.realloc(8),Bf(this.buf,E&-1,this.pos),Bf(this.buf,Math.floor(E*Zh),this.pos+4),this.pos+=8},writeVarint:function(E){if(E=+E||0,E>268435455||E<0){yd(E,this);return}this.realloc(4),this.buf[this.pos++]=E&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=(E>>>=7)&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=(E>>>=7)&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=E>>>7&127)))},writeSVarint:function(E){this.writeVarint(E<0?-E*2-1:E*2)},writeBoolean:function(E){this.writeVarint(Boolean(E))},writeString:function(E){E=String(E),this.realloc(E.length*4),this.pos++;var C=this.pos;this.pos=Pd(this.buf,E,this.pos);var O=this.pos-C;O>=128&&Kh(C,O,this),this.pos=C-1,this.writeVarint(O),this.pos+=O},writeFloat:function(E){this.realloc(4),Lc.write(this.buf,E,this.pos,!0,23,4),this.pos+=4},writeDouble:function(E){this.realloc(8),Lc.write(this.buf,E,this.pos,!0,52,8),this.pos+=8},writeBytes:function(E){var C=E.length;this.writeVarint(C),this.realloc(C);for(var O=0;O<C;O++)this.buf[this.pos++]=E[O]},writeRawMessage:function(E,C){this.pos++;var O=this.pos;E(C,this);var $=this.pos-O;$>=128&&Kh(O,$,this),this.pos=O-1,this.writeVarint($),this.pos+=$},writeMessage:function(E,C,O){this.writeTag(E,to.Bytes),this.writeRawMessage(C,O)},writePackedVarint:function(E,C){C.length&&this.writeMessage(E,bd,C)},writePackedSVarint:function(E,C){C.length&&this.writeMessage(E,_d,C)},writePackedBoolean:function(E,C){C.length&&this.writeMessage(E,Ad,C)},writePackedFloat:function(E,C){C.length&&this.writeMessage(E,wd,C)},writePackedDouble:function(E,C){C.length&&this.writeMessage(E,Td,C)},writePackedFixed32:function(E,C){C.length&&this.writeMessage(E,Md,C)},writePackedSFixed32:function(E,C){C.length&&this.writeMessage(E,Sd,C)},writePackedFixed64:function(E,C){C.length&&this.writeMessage(E,kd,C)},writePackedSFixed64:function(E,C){C.length&&this.writeMessage(E,Ed,C)},writeBytesField:function(E,C){this.writeTag(E,to.Bytes),this.writeBytes(C)},writeFixed32Field:function(E,C){this.writeTag(E,to.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(E,C){this.writeTag(E,to.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(E,C){this.writeTag(E,to.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(E,C){this.writeTag(E,to.Fixed64),this.writeSFixed64(C)},writeVarintField:function(E,C){this.writeTag(E,to.Varint),this.writeVarint(C)},writeSVarintField:function(E,C){this.writeTag(E,to.Varint),this.writeSVarint(C)},writeStringField:function(E,C){this.writeTag(E,to.Bytes),this.writeString(C)},writeFloatField:function(E,C){this.writeTag(E,to.Fixed32),this.writeFloat(C)},writeDoubleField:function(E,C){this.writeTag(E,to.Fixed64),this.writeDouble(C)},writeBooleanField:function(E,C){this.writeVarintField(E,Boolean(C))}};function gd(E,C,O){var $=O.buf,he,me;if(me=$[O.pos++],he=(me&112)>>4,me<128||(me=$[O.pos++],he|=(me&127)<<3,me<128)||(me=$[O.pos++],he|=(me&127)<<10,me<128)||(me=$[O.pos++],he|=(me&127)<<17,me<128)||(me=$[O.pos++],he|=(me&127)<<24,me<128)||(me=$[O.pos++],he|=(me&1)<<31,me<128))return Ff(E,he,C);throw new Error("Expected varint not more than 10 bytes")}function Xu(E){return E.type===to.Bytes?E.readVarint()+E.pos:E.pos+1}function Ff(E,C,O){return O?C*4294967296+(E>>>0):(C>>>0)*4294967296+(E>>>0)}function yd(E,C){var O,$;if(E>=0?(O=E%4294967296|0,$=E/4294967296|0):(O=~(-E%4294967296),$=~(-E/4294967296),O^4294967295?O=O+1|0:(O=0,$=$+1|0)),E>=18446744073709552e3||E<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");C.realloc(10),md(O,$,C),xd($,C)}function md(E,C,O){O.buf[O.pos++]=E&127|128,E>>>=7,O.buf[O.pos++]=E&127|128,E>>>=7,O.buf[O.pos++]=E&127|128,E>>>=7,O.buf[O.pos++]=E&127|128,E>>>=7,O.buf[O.pos]=E&127}function xd(E,C){var O=(E&7)<<4;C.buf[C.pos++]|=O|((E>>>=3)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127)))))}function Kh(E,C,O){var $=C<=16383?1:C<=2097151?2:C<=268435455?3:Math.floor(Math.log(C)/(Math.LN2*7));O.realloc($);for(var he=O.pos-1;he>=E;he--)O.buf[he+$]=O.buf[he]}function bd(E,C){for(var O=0;O<E.length;O++)C.writeVarint(E[O])}function _d(E,C){for(var O=0;O<E.length;O++)C.writeSVarint(E[O])}function wd(E,C){for(var O=0;O<E.length;O++)C.writeFloat(E[O])}function Td(E,C){for(var O=0;O<E.length;O++)C.writeDouble(E[O])}function Ad(E,C){for(var O=0;O<E.length;O++)C.writeBoolean(E[O])}function Md(E,C){for(var O=0;O<E.length;O++)C.writeFixed32(E[O])}function Sd(E,C){for(var O=0;O<E.length;O++)C.writeSFixed32(E[O])}function kd(E,C){for(var O=0;O<E.length;O++)C.writeFixed64(E[O])}function Ed(E,C){for(var O=0;O<E.length;O++)C.writeSFixed64(E[O])}function Dc(E,C){return(E[C]|E[C+1]<<8|E[C+2]<<16)+E[C+3]*16777216}function Bf(E,C,O){E[O]=C,E[O+1]=C>>>8,E[O+2]=C>>>16,E[O+3]=C>>>24}function Jh(E,C){return(E[C]|E[C+1]<<8|E[C+2]<<16)+(E[C+3]<<24)}function Cd(E,C,O){for(var $="",he=C;he<O;){var me=E[he],we=null,Ie=me>239?4:me>223?3:me>191?2:1;if(he+Ie>O)break;var $e,ut,gt;Ie===1?me<128&&(we=me):Ie===2?($e=E[he+1],($e&192)==128&&(we=(me&31)<<6|$e&63,we<=127&&(we=null))):Ie===3?($e=E[he+1],ut=E[he+2],($e&192)==128&&(ut&192)==128&&(we=(me&15)<<12|($e&63)<<6|ut&63,(we<=2047||we>=55296&&we<=57343)&&(we=null))):Ie===4&&($e=E[he+1],ut=E[he+2],gt=E[he+3],($e&192)==128&&(ut&192)==128&&(gt&192)==128&&(we=(me&15)<<18|($e&63)<<12|(ut&63)<<6|gt&63,(we<=65535||we>=1114112)&&(we=null))),we===null?(we=65533,Ie=1):we>65535&&(we-=65536,$+=String.fromCharCode(we>>>10&1023|55296),we=56320|we&1023),$+=String.fromCharCode(we),he+=Ie}return $}function Ld(E,C,O){return jh.decode(E.subarray(C,O))}function Pd(E,C,O){for(var $=0,he,me;$<C.length;$++){if(he=C.charCodeAt($),he>55295&&he<57344)if(me)if(he<56320){E[O++]=239,E[O++]=191,E[O++]=189,me=he;continue}else he=me-55296<<10|he-56320|65536,me=null;else{he>56319||$+1===C.length?(E[O++]=239,E[O++]=191,E[O++]=189):me=he;continue}else me&&(E[O++]=239,E[O++]=191,E[O++]=189,me=null);he<128?E[O++]=he:(he<2048?E[O++]=he>>6|192:(he<65536?E[O++]=he>>12|224:(E[O++]=he>>18|240,E[O++]=he>>12&63|128),E[O++]=he>>6&63|128),E[O++]=he&63|128)}return O}var ch=3;function Dd(E,C,O){E===1&&O.readMessage(Rd,C)}function Rd(E,C,O){if(E===3){var $=O.readMessage(Id,{}),he=$.id,me=$.bitmap,we=$.width,Ie=$.height,$e=$.left,ut=$.top,gt=$.advance;C.push({id:he,bitmap:new xf({width:we+2*ch,height:Ie+2*ch},me),metrics:{width:we,height:Ie,left:$e,top:ut,advance:gt}})}}function Id(E,C,O){E===1?C.id=O.readVarint():E===2?C.bitmap=O.readBytes():E===3?C.width=O.readVarint():E===4?C.height=O.readVarint():E===5?C.left=O.readSVarint():E===6?C.top=O.readSVarint():E===7&&(C.advance=O.readVarint())}function zd(E){return new Pc(E).readFields(Dd,[])}var Qh=ch;function $h(E){for(var C=0,O=0,$=0,he=E;$<he.length;$+=1){var me=he[$];C+=me.w*me.h,O=Math.max(O,me.w)}E.sort(function(sn,Qr){return Qr.h-sn.h});for(var we=Math.max(Math.ceil(Math.sqrt(C/.95)),O),Ie=[{x:0,y:0,w:we,h:1/0}],$e=0,ut=0,gt=0,Rt=E;gt<Rt.length;gt+=1)for(var $t=Rt[gt],Wt=Ie.length-1;Wt>=0;Wt--){var vr=Ie[Wt];if(!($t.w>vr.w||$t.h>vr.h)){if($t.x=vr.x,$t.y=vr.y,ut=Math.max(ut,$t.y+$t.h),$e=Math.max($e,$t.x+$t.w),$t.w===vr.w&&$t.h===vr.h){var Dr=Ie.pop();Wt<Ie.length&&(Ie[Wt]=Dr)}else $t.h===vr.h?(vr.x+=$t.w,vr.w-=$t.w):$t.w===vr.w?(vr.y+=$t.h,vr.h-=$t.h):(Ie.push({x:vr.x+$t.w,y:vr.y,w:vr.w-$t.w,h:$t.h}),vr.y+=$t.h,vr.h-=$t.h);break}}return{w:$e,h:ut,fill:C/($e*ut)||0}}var fl=1,Rc=function(C,O){var $=O.pixelRatio,he=O.version,me=O.stretchX,we=O.stretchY,Ie=O.content;this.paddedRect=C,this.pixelRatio=$,this.stretchX=me,this.stretchY=we,this.content=Ie,this.version=he},cc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};cc.tl.get=function(){return[this.paddedRect.x+fl,this.paddedRect.y+fl]},cc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-fl,this.paddedRect.y+this.paddedRect.h-fl]},cc.tlbr.get=function(){return this.tl.concat(this.br)},cc.displaySize.get=function(){return[(this.paddedRect.w-fl*2)/this.pixelRatio,(this.paddedRect.h-fl*2)/this.pixelRatio]},Object.defineProperties(Rc.prototype,cc);var hc=function(C,O){var $={},he={};this.haveRenderCallbacks=[];var me=[];this.addImages(C,$,me),this.addImages(O,he,me);var we=$h(me),Ie=we.w,$e=we.h,ut=new qs({width:Ie||1,height:$e||1});for(var gt in C){var Rt=C[gt],$t=$[gt].paddedRect;qs.copy(Rt.data,ut,{x:0,y:0},{x:$t.x+fl,y:$t.y+fl},Rt.data)}for(var Wt in O){var vr=O[Wt],Dr=he[Wt].paddedRect,sn=Dr.x+fl,Qr=Dr.y+fl,Mn=vr.data.width,yn=vr.data.height;qs.copy(vr.data,ut,{x:0,y:0},{x:sn,y:Qr},vr.data),qs.copy(vr.data,ut,{x:0,y:yn-1},{x:sn,y:Qr-1},{width:Mn,height:1}),qs.copy(vr.data,ut,{x:0,y:0},{x:sn,y:Qr+yn},{width:Mn,height:1}),qs.copy(vr.data,ut,{x:Mn-1,y:0},{x:sn-1,y:Qr},{width:1,height:yn}),qs.copy(vr.data,ut,{x:0,y:0},{x:sn+Mn,y:Qr},{width:1,height:yn})}this.image=ut,this.iconPositions=$,this.patternPositions=he};hc.prototype.addImages=function(C,O,$){for(var he in C){var me=C[he],we={x:0,y:0,w:me.data.width+2*fl,h:me.data.height+2*fl};$.push(we),O[he]=new Rc(we,me),me.hasRenderCallback&&this.haveRenderCallbacks.push(he)}},hc.prototype.patchUpdatedImages=function(C,O){C.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var $ in C.updatedImages)this.patchUpdatedImage(this.iconPositions[$],C.getImage($),O),this.patchUpdatedImage(this.patternPositions[$],C.getImage($),O)},hc.prototype.patchUpdatedImage=function(C,O,$){if(!(!C||!O)&&C.version!==O.version){C.version=O.version;var he=C.tl,me=he[0],we=he[1];$.update(O.data,void 0,{x:me,y:we})}},ze("ImagePosition",Rc),ze("ImageAtlas",hc);var Sl={horizontal:1,vertical:2,horizontalOnly:3},vc=-17;function Fd(E){for(var C=0,O=E;C<O.length;C+=1){var $=O[C];if($.positionedGlyphs.length!==0)return!1}return!0}var qh=57344,ev=63743,Of=function(){this.scale=1,this.fontStack="",this.imageName=null};Of.forText=function(C,O){var $=new Of;return $.scale=C||1,$.fontStack=O,$},Of.forImage=function(C){var O=new Of;return O.imageName=C,O};var Es=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Es.fromFeature=function(C,O){for(var $=new Es,he=0;he<C.sections.length;he++){var me=C.sections[he];me.image?$.addImageSection(me):$.addTextSection(me,O)}return $},Es.prototype.length=function(){return this.text.length},Es.prototype.getSection=function(C){return this.sections[this.sectionIndex[C]]},Es.prototype.getSectionIndex=function(C){return this.sectionIndex[C]},Es.prototype.getCharCode=function(C){return this.text.charCodeAt(C)},Es.prototype.verticalizePunctuation=function(){this.text=hd(this.text)},Es.prototype.trim=function(){for(var C=0,O=0;O<this.text.length&&Vu[this.text.charCodeAt(O)];O++)C++;for(var $=this.text.length,he=this.text.length-1;he>=0&&he>=C&&Vu[this.text.charCodeAt(he)];he--)$--;this.text=this.text.substring(C,$),this.sectionIndex=this.sectionIndex.slice(C,$)},Es.prototype.substring=function(C,O){var $=new Es;return $.text=this.text.substring(C,O),$.sectionIndex=this.sectionIndex.slice(C,O),$.sections=this.sections,$},Es.prototype.toString=function(){return this.text},Es.prototype.getMaxScale=function(){var C=this;return this.sectionIndex.reduce(function(O,$){return Math.max(O,C.sections[$].scale)},0)},Es.prototype.addTextSection=function(C,O){this.text+=C.text,this.sections.push(Of.forText(C.scale,C.fontStack||O));for(var $=this.sections.length-1,he=0;he<C.text.length;++he)this.sectionIndex.push($)},Es.prototype.addImageSection=function(C){var O=C.image?C.image.name:"";if(O.length===0){B("Can't add FormattedSection with an empty image.");return}var $=this.getNextImageSectionCharCode();if(!$){B("Reached maximum number of images "+(ev-qh+2));return}this.text+=String.fromCharCode($),this.sections.push(Of.forImage(O)),this.sectionIndex.push(this.sections.length-1)},Es.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=ev?null:++this.imageSectionID:(this.imageSectionID=qh,this.imageSectionID)};function Bd(E,C){for(var O=[],$=E.text,he=0,me=0,we=C;me<we.length;me+=1){var Ie=we[me];O.push(E.substring(he,Ie)),he=Ie}return he<$.length&&O.push(E.substring(he,$.length)),O}function Ic(E,C,O,$,he,me,we,Ie,$e,ut,gt,Rt,$t,Wt,vr,Dr){var sn=Es.fromFeature(E,he);Rt===Sl.vertical&&sn.verticalizePunctuation();var Qr,Mn=Wa.processBidirectionalText,yn=Wa.processStyledBidirectionalText;if(Mn&&sn.sections.length===1){Qr=[];for(var Tn=Mn(sn.toString(),hh(sn,ut,me,C,$,Wt,vr)),Rn=0,Vn=Tn;Rn<Vn.length;Rn+=1){var sa=Vn[Rn],na=new Es;na.text=sa,na.sections=sn.sections;for(var Ia=0;Ia<sa.length;Ia++)na.sectionIndex.push(0);Qr.push(na)}}else if(yn){Qr=[];for(var _a=yn(sn.text,sn.sectionIndex,hh(sn,ut,me,C,$,Wt,vr)),Sa=0,ei=_a;Sa<ei.length;Sa+=1){var La=ei[Sa],Ra=new Es;Ra.text=La[0],Ra.sectionIndex=La[1],Ra.sections=sn.sections,Qr.push(Ra)}}else Qr=Bd(sn,hh(sn,ut,me,C,$,Wt,vr));var ci=[],Qa={positionedLines:ci,text:sn.toString(),top:gt[1],bottom:gt[1],left:gt[0],right:gt[0],writingMode:Rt,iconsInText:!1,verticalizable:!1};return Ud(Qa,C,O,$,Qr,we,Ie,$e,Rt,ut,$t,Dr),Fd(ci)?!1:Qa}var Vu={};Vu[9]=!0,Vu[10]=!0,Vu[11]=!0,Vu[12]=!0,Vu[13]=!0,Vu[32]=!0;var cl={};cl[10]=!0,cl[32]=!0,cl[38]=!0,cl[40]=!0,cl[41]=!0,cl[43]=!0,cl[45]=!0,cl[47]=!0,cl[173]=!0,cl[183]=!0,cl[8203]=!0,cl[8208]=!0,cl[8211]=!0,cl[8231]=!0;function tv(E,C,O,$,he,me){if(C.imageName){var $e=$[C.imageName];return $e?$e.displaySize[0]*C.scale*cs/me+he:0}else{var we=O[C.fontStack],Ie=we&&we[E];return Ie?Ie.metrics.advance*C.scale+he:0}}function Od(E,C,O,$,he,me){for(var we=0,Ie=0;Ie<E.length();Ie++){var $e=E.getSection(Ie);we+=tv(E.getCharCode(Ie),$e,$,he,C,me)}var ut=Math.max(1,Math.ceil(we/O));return we/ut}function rv(E,C,O,$){var he=Math.pow(E-C,2);return $?E<C?he/2:he*2:he+Math.abs(O)*O}function Nd(E,C,O){var $=0;return E===10&&($-=1e4),O&&($+=150),(E===40||E===65288)&&($+=50),(C===41||C===65289)&&($+=50),$}function nv(E,C,O,$,he,me){for(var we=null,Ie=rv(C,O,he,me),$e=0,ut=$;$e<ut.length;$e+=1){var gt=ut[$e],Rt=C-gt.x,$t=rv(Rt,O,he,me)+gt.badness;$t<=Ie&&(we=gt,Ie=$t)}return{index:E,x:C,priorBreak:we,badness:Ie}}function av(E){return E?av(E.priorBreak).concat(E.index):[]}function hh(E,C,O,$,he,me,we){if(me!=="point")return[];if(!E)return[];for(var Ie=[],$e=Od(E,C,O,$,he,we),ut=E.text.indexOf("\u200B")>=0,gt=0,Rt=0;Rt<E.length();Rt++){var $t=E.getSection(Rt),Wt=E.getCharCode(Rt);if(Vu[Wt]||(gt+=tv(Wt,$t,$,he,C,we)),Rt<E.length()-1){var vr=Sr(Wt);(cl[Wt]||vr||$t.imageName)&&Ie.push(nv(Rt+1,gt,$e,Ie,Nd(Wt,E.getCharCode(Rt+1),vr&&ut),!1))}}return av(nv(E.length(),gt,$e,Ie,0,!0))}function vh(E){var C=.5,O=.5;switch(E){case"right":case"top-right":case"bottom-right":C=1;break;case"left":case"top-left":case"bottom-left":C=0;break}switch(E){case"bottom":case"bottom-right":case"bottom-left":O=1;break;case"top":case"top-right":case"top-left":O=0;break}return{horizontalAlign:C,verticalAlign:O}}function Ud(E,C,O,$,he,me,we,Ie,$e,ut,gt,Rt){for(var $t=0,Wt=vc,vr=0,Dr=0,sn=Ie==="right"?1:Ie==="left"?0:.5,Qr=0,Mn=0,yn=he;Mn<yn.length;Mn+=1){var Tn=yn[Mn];Tn.trim();var Rn=Tn.getMaxScale(),Vn=(Rn-1)*cs,sa={positionedGlyphs:[],lineOffset:0};E.positionedLines[Qr]=sa;var na=sa.positionedGlyphs,Ia=0;if(!Tn.length()){Wt+=me,++Qr;continue}for(var _a=0;_a<Tn.length();_a++){var Sa=Tn.getSection(_a),ei=Tn.getSectionIndex(_a),La=Tn.getCharCode(_a),Ra=0,ci=null,Qa=null,ki=null,Wi=cs,Ei=!($e===Sl.horizontal||!gt&&!Br(La)||gt&&(Vu[La]||ln(La)));if(Sa.imageName){var wo=$[Sa.imageName];if(!wo)continue;ki=Sa.imageName,E.iconsInText=E.iconsInText||!0,Qa=wo.paddedRect;var Co=wo.displaySize;Sa.scale=Sa.scale*cs/Rt,ci={width:Co[0],height:Co[1],left:fl,top:-Qh,advance:Ei?Co[1]:Co[0]};var $o=cs-Co[1]*Sa.scale;Ra=Vn+$o,Wi=ci.advance;var Uo=Ei?Co[0]*Sa.scale-cs*Rn:Co[1]*Sa.scale-cs*Rn;Uo>0&&Uo>Ia&&(Ia=Uo)}else{var Ci=O[Sa.fontStack],Ti=Ci&&Ci[La];if(Ti&&Ti.rect)Qa=Ti.rect,ci=Ti.metrics;else{var $i=C[Sa.fontStack],ro=$i&&$i[La];if(!ro)continue;ci=ro.metrics}Ra=(Rn-Sa.scale)*cs}Ei?(E.verticalizable=!0,na.push({glyph:La,imageName:ki,x:$t,y:Wt+Ra,vertical:Ei,scale:Sa.scale,fontStack:Sa.fontStack,sectionIndex:ei,metrics:ci,rect:Qa}),$t+=Wi*Sa.scale+ut):(na.push({glyph:La,imageName:ki,x:$t,y:Wt+Ra,vertical:Ei,scale:Sa.scale,fontStack:Sa.fontStack,sectionIndex:ei,metrics:ci,rect:Qa}),$t+=ci.advance*Sa.scale+ut)}if(na.length!==0){var Cs=$t-ut;vr=Math.max(Cs,vr),Vd(na,0,na.length-1,sn,Ia)}$t=0;var Ls=me*Rn+Ia;sa.lineOffset=Math.max(Ia,Vn),Wt+=Ls,Dr=Math.max(Ls,Dr),++Qr}var qo=Wt-vc,Os=vh(we),Ns=Os.horizontalAlign,Xo=Os.verticalAlign;Hd(E.positionedLines,sn,Ns,Xo,vr,Dr,me,qo,he.length),E.top+=-Xo*qo,E.bottom=E.top+qo,E.left+=-Ns*vr,E.right=E.left+vr}function Vd(E,C,O,$,he){if(!(!$&&!he))for(var me=E[O],we=me.metrics.advance*me.scale,Ie=(E[O].x+we)*$,$e=C;$e<=O;$e++)E[$e].x-=Ie,E[$e].y+=he}function Hd(E,C,O,$,he,me,we,Ie,$e){var ut=(C-O)*he,gt=0;me!==we?gt=-Ie*$-vc:gt=(-$*$e+.5)*we;for(var Rt=0,$t=E;Rt<$t.length;Rt+=1)for(var Wt=$t[Rt],vr=0,Dr=Wt.positionedGlyphs;vr<Dr.length;vr+=1){var sn=Dr[vr];sn.x+=ut,sn.y+=gt}}function Gd(E,C,O){var $=vh(O),he=$.horizontalAlign,me=$.verticalAlign,we=C[0],Ie=C[1],$e=we-E.displaySize[0]*he,ut=$e+E.displaySize[0],gt=Ie-E.displaySize[1]*me,Rt=gt+E.displaySize[1];return{image:E,top:gt,bottom:Rt,left:$e,right:ut}}function iv(E,C,O,$,he,me){var we=E.image,Ie;if(we.content){var $e=we.content,ut=we.pixelRatio||1;Ie=[$e[0]/ut,$e[1]/ut,we.displaySize[0]-$e[2]/ut,we.displaySize[1]-$e[3]/ut]}var gt=C.left*me,Rt=C.right*me,$t,Wt,vr,Dr;O==="width"||O==="both"?(Dr=he[0]+gt-$[3],Wt=he[0]+Rt+$[1]):(Dr=he[0]+(gt+Rt-we.displaySize[0])/2,Wt=Dr+we.displaySize[0]);var sn=C.top*me,Qr=C.bottom*me;return O==="height"||O==="both"?($t=he[1]+sn-$[0],vr=he[1]+Qr+$[2]):($t=he[1]+(sn+Qr-we.displaySize[1])/2,vr=$t+we.displaySize[1]),{image:we,top:$t,right:Wt,bottom:vr,left:Dr,collisionPadding:Ie}}var Nf=function(E){function C(O,$,he,me){E.call(this,O,$),this.angle=he,me!==void 0&&(this.segment=me)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.clone=function(){return new C(this.x,this.y,this.angle,this.segment)},C}(f);ze("Anchor",Nf);var wu=128;function ph(E,C){var O=C.expression;if(O.kind==="constant"){var $=O.evaluate(new ui(E+1));return{kind:"constant",layoutSize:$}}else{if(O.kind==="source")return{kind:"source"};for(var he=O.zoomStops,me=O.interpolationType,we=0;we<he.length&&he[we]<=E;)we++;we=Math.max(0,we-1);for(var Ie=we;Ie<he.length&&he[Ie]<E+1;)Ie++;Ie=Math.min(he.length-1,Ie);var $e=he[we],ut=he[Ie];if(O.kind==="composite")return{kind:"composite",minZoom:$e,maxZoom:ut,interpolationType:me};var gt=O.evaluate(new ui($e)),Rt=O.evaluate(new ui(ut));return{kind:"camera",minZoom:$e,maxZoom:ut,minSize:gt,maxSize:Rt,interpolationType:me}}}function ov(E,C,O){var $=C.uSize,he=C.uSizeT,me=O.lowerSize,we=O.upperSize;return E.kind==="source"?me/wu:E.kind==="composite"?so(me/wu,we/wu,he):$}function sv(E,C){var O=0,$=0;if(E.kind==="constant")$=E.layoutSize;else if(E.kind!=="source"){var he=E.interpolationType,me=E.minZoom,we=E.maxZoom,Ie=he?v(lo.interpolationFactor(he,C,me,we),0,1):0;E.kind==="camera"?$=so(E.minSize,E.maxSize,Ie):O=Ie}return{uSizeT:O,uSize:$}}var Yd=Object.freeze({__proto__:null,getSizeData:ph,evaluateSizeForFeature:ov,evaluateSizeForZoom:sv,SIZE_PACK_FACTOR:wu});function lv(E,C,O,$,he){if(C.segment===void 0)return!0;for(var me=C,we=C.segment+1,Ie=0;Ie>-O/2;){if(we--,we<0)return!1;Ie-=E[we].dist(me),me=E[we]}Ie+=E[we].dist(E[we+1]),we++;for(var $e=[],ut=0;Ie<O/2;){var gt=E[we-1],Rt=E[we],$t=E[we+1];if(!$t)return!1;var Wt=gt.angleTo(Rt)-Rt.angleTo($t);for(Wt=Math.abs((Wt+3*Math.PI)%(Math.PI*2)-Math.PI),$e.push({distance:Ie,angleDelta:Wt}),ut+=Wt;Ie-$e[0].distance>$;)ut-=$e.shift().angleDelta;if(ut>he)return!1;we++,Ie+=Rt.dist($t)}return!0}function uv(E){for(var C=0,O=0;O<E.length-1;O++)C+=E[O].dist(E[O+1]);return C}function fv(E,C,O){return E?3/5*C*O:0}function cv(E,C){return Math.max(E?E.right-E.left:0,C?C.right-C.left:0)}function Wd(E,C,O,$,he,me){for(var we=fv(O,he,me),Ie=cv(O,$)*me,$e=0,ut=uv(E)/2,gt=0;gt<E.length-1;gt++){var Rt=E[gt],$t=E[gt+1],Wt=Rt.dist($t);if($e+Wt>ut){var vr=(ut-$e)/Wt,Dr=so(Rt.x,$t.x,vr),sn=so(Rt.y,$t.y,vr),Qr=new Nf(Dr,sn,$t.angleTo(Rt),gt);return Qr._round(),!we||lv(E,Qr,Ie,we,C)?Qr:void 0}$e+=Wt}}function Xd(E,C,O,$,he,me,we,Ie,$e){var ut=fv($,me,we),gt=cv($,he),Rt=gt*we,$t=E[0].x===0||E[0].x===$e||E[0].y===0||E[0].y===$e;C-Rt<C/4&&(C=Rt+C/4);var Wt=me*2,vr=$t?C/2*Ie%C:(gt/2+Wt)*we*Ie%C;return hv(E,vr,C,ut,O,Rt,$t,!1,$e)}function hv(E,C,O,$,he,me,we,Ie,$e){for(var ut=me/2,gt=uv(E),Rt=0,$t=C-O,Wt=[],vr=0;vr<E.length-1;vr++){for(var Dr=E[vr],sn=E[vr+1],Qr=Dr.dist(sn),Mn=sn.angleTo(Dr);$t+O<Rt+Qr;){$t+=O;var yn=($t-Rt)/Qr,Tn=so(Dr.x,sn.x,yn),Rn=so(Dr.y,sn.y,yn);if(Tn>=0&&Tn<$e&&Rn>=0&&Rn<$e&&$t-ut>=0&&$t+ut<=gt){var Vn=new Nf(Tn,Rn,Mn,vr);Vn._round(),(!$||lv(E,Vn,me,$,he))&&Wt.push(Vn)}}Rt+=Qr}return!Ie&&!Wt.length&&!we&&(Wt=hv(E,Rt/2,O,$,he,me,we,!0,$e)),Wt}function vv(E,C,O,$,he){for(var me=[],we=0;we<E.length;we++)for(var Ie=E[we],$e=void 0,ut=0;ut<Ie.length-1;ut++){var gt=Ie[ut],Rt=Ie[ut+1];gt.x<C&&Rt.x<C||(gt.x<C?gt=new f(C,gt.y+(Rt.y-gt.y)*((C-gt.x)/(Rt.x-gt.x)))._round():Rt.x<C&&(Rt=new f(C,gt.y+(Rt.y-gt.y)*((C-gt.x)/(Rt.x-gt.x)))._round()),!(gt.y<O&&Rt.y<O)&&(gt.y<O?gt=new f(gt.x+(Rt.x-gt.x)*((O-gt.y)/(Rt.y-gt.y)),O)._round():Rt.y<O&&(Rt=new f(gt.x+(Rt.x-gt.x)*((O-gt.y)/(Rt.y-gt.y)),O)._round()),!(gt.x>=$&&Rt.x>=$)&&(gt.x>=$?gt=new f($,gt.y+(Rt.y-gt.y)*(($-gt.x)/(Rt.x-gt.x)))._round():Rt.x>=$&&(Rt=new f($,gt.y+(Rt.y-gt.y)*(($-gt.x)/(Rt.x-gt.x)))._round()),!(gt.y>=he&&Rt.y>=he)&&(gt.y>=he?gt=new f(gt.x+(Rt.x-gt.x)*((he-gt.y)/(Rt.y-gt.y)),he)._round():Rt.y>=he&&(Rt=new f(gt.x+(Rt.x-gt.x)*((he-gt.y)/(Rt.y-gt.y)),he)._round()),(!$e||!gt.equals($e[$e.length-1]))&&($e=[gt],me.push($e)),$e.push(Rt)))))}return me}var Uf=fl;function pv(E,C,O,$){var he=[],me=E.image,we=me.pixelRatio,Ie=me.paddedRect.w-2*Uf,$e=me.paddedRect.h-2*Uf,ut=E.right-E.left,gt=E.bottom-E.top,Rt=me.stretchX||[[0,Ie]],$t=me.stretchY||[[0,$e]],Wt=function(Ci,Ti){return Ci+Ti[1]-Ti[0]},vr=Rt.reduce(Wt,0),Dr=$t.reduce(Wt,0),sn=Ie-vr,Qr=$e-Dr,Mn=0,yn=vr,Tn=0,Rn=Dr,Vn=0,sa=sn,na=0,Ia=Qr;if(me.content&&$){var _a=me.content;Mn=zc(Rt,0,_a[0]),Tn=zc($t,0,_a[1]),yn=zc(Rt,_a[0],_a[2]),Rn=zc($t,_a[1],_a[3]),Vn=_a[0]-Mn,na=_a[1]-Tn,sa=_a[2]-_a[0]-yn,Ia=_a[3]-_a[1]-Rn}var Sa=function(Ci,Ti,$i,ro){var wo=Fc(Ci.stretch-Mn,yn,ut,E.left),Co=Bc(Ci.fixed-Vn,sa,Ci.stretch,vr),$o=Fc(Ti.stretch-Tn,Rn,gt,E.top),Uo=Bc(Ti.fixed-na,Ia,Ti.stretch,Dr),Cs=Fc($i.stretch-Mn,yn,ut,E.left),Ls=Bc($i.fixed-Vn,sa,$i.stretch,vr),qo=Fc(ro.stretch-Tn,Rn,gt,E.top),Os=Bc(ro.fixed-na,Ia,ro.stretch,Dr),Ns=new f(wo,$o),Xo=new f(Cs,$o),Us=new f(Cs,qo),kl=new f(wo,qo),Ku=new f(Co/we,Uo/we),lf=new f(Ls/we,Os/we),uf=C*Math.PI/180;if(uf){var ff=Math.sin(uf),jf=Math.cos(uf),tu=[jf,-ff,ff,jf];Ns._matMult(tu),Xo._matMult(tu),kl._matMult(tu),Us._matMult(tu)}var Gc=Ci.stretch+Ci.fixed,wh=$i.stretch+$i.fixed,Yc=Ti.stretch+Ti.fixed,Th=ro.stretch+ro.fixed,Vl={x:me.paddedRect.x+Uf+Gc,y:me.paddedRect.y+Uf+Yc,w:wh-Gc,h:Th-Yc},Kf=sa/we/ut,Wc=Ia/we/gt;return{tl:Ns,tr:Xo,bl:kl,br:Us,tex:Vl,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ku,pixelOffsetBR:lf,minFontScaleX:Kf,minFontScaleY:Wc,isSDF:O}};if(!$||!me.stretchX&&!me.stretchY)he.push(Sa({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ie+1},{fixed:0,stretch:$e+1}));else for(var ei=dv(Rt,sn,vr),La=dv($t,Qr,Dr),Ra=0;Ra<ei.length-1;Ra++)for(var ci=ei[Ra],Qa=ei[Ra+1],ki=0;ki<La.length-1;ki++){var Wi=La[ki],Ei=La[ki+1];he.push(Sa(ci,Wi,Qa,Ei))}return he}function zc(E,C,O){for(var $=0,he=0,me=E;he<me.length;he+=1){var we=me[he];$+=Math.max(C,Math.min(O,we[1]))-Math.max(C,Math.min(O,we[0]))}return $}function dv(E,C,O){for(var $=[{fixed:-Uf,stretch:0}],he=0,me=E;he<me.length;he+=1){var we=me[he],Ie=we[0],$e=we[1],ut=$[$.length-1];$.push({fixed:Ie-ut.stretch,stretch:ut.stretch}),$.push({fixed:Ie-ut.stretch,stretch:ut.stretch+($e-Ie)})}return $.push({fixed:C+Uf,stretch:O}),$}function Fc(E,C,O,$){return E/C*O+$}function Bc(E,C,O,$){return E-C*O/$}function Zd(E,C,O,$,he,me,we,Ie){for(var $e=$.layout.get("text-rotate").evaluate(me,{})*Math.PI/180,ut=[],gt=0,Rt=C.positionedLines;gt<Rt.length;gt+=1)for(var $t=Rt[gt],Wt=0,vr=$t.positionedGlyphs;Wt<vr.length;Wt+=1){var Dr=vr[Wt];if(!!Dr.rect){var sn=Dr.rect||{},Qr=1,Mn=Qh+Qr,yn=!0,Tn=1,Rn=0,Vn=(he||Ie)&&Dr.vertical,sa=Dr.metrics.advance*Dr.scale/2;if(Ie&&C.verticalizable){var na=(Dr.scale-1)*cs,Ia=(cs-Dr.metrics.width*Dr.scale)/2;Rn=$t.lineOffset/2-(Dr.imageName?-Ia:na)}if(Dr.imageName){var _a=we[Dr.imageName];yn=_a.sdf,Tn=_a.pixelRatio,Mn=fl/Tn}var Sa=he?[Dr.x+sa,Dr.y]:[0,0],ei=he?[0,0]:[Dr.x+sa+O[0],Dr.y+O[1]-Rn],La=[0,0];Vn&&(La=ei,ei=[0,0]);var Ra=(Dr.metrics.left-Mn)*Dr.scale-sa+ei[0],ci=(-Dr.metrics.top-Mn)*Dr.scale+ei[1],Qa=Ra+sn.w*Dr.scale/Tn,ki=ci+sn.h*Dr.scale/Tn,Wi=new f(Ra,ci),Ei=new f(Qa,ci),Ci=new f(Ra,ki),Ti=new f(Qa,ki);if(Vn){var $i=new f(-sa,sa-vc),ro=-Math.PI/2,wo=cs/2-sa,Co=Dr.imageName?wo:0,$o=new f(5-vc-wo,-Co),Uo=new(Function.prototype.bind.apply(f,[null].concat(La)));Wi._rotateAround(ro,$i)._add($o)._add(Uo),Ei._rotateAround(ro,$i)._add($o)._add(Uo),Ci._rotateAround(ro,$i)._add($o)._add(Uo),Ti._rotateAround(ro,$i)._add($o)._add(Uo)}if($e){var Cs=Math.sin($e),Ls=Math.cos($e),qo=[Ls,-Cs,Cs,Ls];Wi._matMult(qo),Ei._matMult(qo),Ci._matMult(qo),Ti._matMult(qo)}var Os=new f(0,0),Ns=new f(0,0),Xo=0,Us=0;ut.push({tl:Wi,tr:Ei,bl:Ci,br:Ti,tex:sn,writingMode:C.writingMode,glyphOffset:Sa,sectionIndex:Dr.sectionIndex,isSDF:yn,pixelOffsetTL:Os,pixelOffsetBR:Ns,minFontScaleX:Xo,minFontScaleY:Us})}}return ut}var Oc=function(C,O,$,he,me,we,Ie,$e,ut,gt){if(this.boxStartIndex=C.length,ut){var Rt=we.top,$t=we.bottom,Wt=we.collisionPadding;Wt&&(Rt-=Wt[1],$t+=Wt[3]);var vr=$t-Rt;vr>0&&(vr=Math.max(10,vr),this.circleDiameter=vr)}else{var Dr=we.top*Ie-$e,sn=we.bottom*Ie+$e,Qr=we.left*Ie-$e,Mn=we.right*Ie+$e,yn=we.collisionPadding;if(yn&&(Qr-=yn[0]*Ie,Dr-=yn[1]*Ie,Mn+=yn[2]*Ie,sn+=yn[3]*Ie),gt){var Tn=new f(Qr,Dr),Rn=new f(Mn,Dr),Vn=new f(Qr,sn),sa=new f(Mn,sn),na=gt*Math.PI/180;Tn._rotate(na),Rn._rotate(na),Vn._rotate(na),sa._rotate(na),Qr=Math.min(Tn.x,Rn.x,Vn.x,sa.x),Mn=Math.max(Tn.x,Rn.x,Vn.x,sa.x),Dr=Math.min(Tn.y,Rn.y,Vn.y,sa.y),sn=Math.max(Tn.y,Rn.y,Vn.y,sa.y)}C.emplaceBack(O.x,O.y,Qr,Dr,Mn,sn,$,he,me)}this.boxEndIndex=C.length},Vf=function(C,O){if(C===void 0&&(C=[]),O===void 0&&(O=jd),this.data=C,this.length=this.data.length,this.compare=O,this.length>0)for(var $=(this.length>>1)-1;$>=0;$--)this._down($)};Vf.prototype.push=function(C){this.data.push(C),this.length++,this._up(this.length-1)},Vf.prototype.pop=function(){if(this.length!==0){var C=this.data[0],O=this.data.pop();return this.length--,this.length>0&&(this.data[0]=O,this._down(0)),C}},Vf.prototype.peek=function(){return this.data[0]},Vf.prototype._up=function(C){for(var O=this,$=O.data,he=O.compare,me=$[C];C>0;){var we=C-1>>1,Ie=$[we];if(he(me,Ie)>=0)break;$[C]=Ie,C=we}$[C]=me},Vf.prototype._down=function(C){for(var O=this,$=O.data,he=O.compare,me=this.length>>1,we=$[C];C<me;){var Ie=(C<<1)+1,$e=$[Ie],ut=Ie+1;if(ut<this.length&&he($[ut],$e)<0&&(Ie=ut,$e=$[ut]),he($e,we)>=0)break;$[C]=$e,C=Ie}$[C]=we};function jd(E,C){return E<C?-1:E>C?1:0}function Kd(E,C,O){C===void 0&&(C=1),O===void 0&&(O=!1);for(var $=1/0,he=1/0,me=-1/0,we=-1/0,Ie=E[0],$e=0;$e<Ie.length;$e++){var ut=Ie[$e];(!$e||ut.x<$)&&($=ut.x),(!$e||ut.y<he)&&(he=ut.y),(!$e||ut.x>me)&&(me=ut.x),(!$e||ut.y>we)&&(we=ut.y)}var gt=me-$,Rt=we-he,$t=Math.min(gt,Rt),Wt=$t/2,vr=new Vf([],Jd);if($t===0)return new f($,he);for(var Dr=$;Dr<me;Dr+=$t)for(var sn=he;sn<we;sn+=$t)vr.push(new Hf(Dr+Wt,sn+Wt,Wt,E));for(var Qr=$d(E),Mn=vr.length;vr.length;){var yn=vr.pop();(yn.d>Qr.d||!Qr.d)&&(Qr=yn,O&&console.log("found best %d after %d probes",Math.round(1e4*yn.d)/1e4,Mn)),!(yn.max-Qr.d<=C)&&(Wt=yn.h/2,vr.push(new Hf(yn.p.x-Wt,yn.p.y-Wt,Wt,E)),vr.push(new Hf(yn.p.x+Wt,yn.p.y-Wt,Wt,E)),vr.push(new Hf(yn.p.x-Wt,yn.p.y+Wt,Wt,E)),vr.push(new Hf(yn.p.x+Wt,yn.p.y+Wt,Wt,E)),Mn+=4)}return O&&(console.log("num probes: "+Mn),console.log("best distance: "+Qr.d)),Qr.p}function Jd(E,C){return C.max-E.max}function Hf(E,C,O,$){this.p=new f(E,C),this.h=O,this.d=Qd(this.p,$),this.max=this.d+this.h*Math.SQRT2}function Qd(E,C){for(var O=!1,$=1/0,he=0;he<C.length;he++)for(var me=C[he],we=0,Ie=me.length,$e=Ie-1;we<Ie;$e=we++){var ut=me[we],gt=me[$e];ut.y>E.y!=gt.y>E.y&&E.x<(gt.x-ut.x)*(E.y-ut.y)/(gt.y-ut.y)+ut.x&&(O=!O),$=Math.min($,xu(E,ut,gt))}return(O?1:-1)*Math.sqrt($)}function $d(E){for(var C=0,O=0,$=0,he=E[0],me=0,we=he.length,Ie=we-1;me<we;Ie=me++){var $e=he[me],ut=he[Ie],gt=$e.x*ut.y-ut.x*$e.y;O+=($e.x+ut.x)*gt,$+=($e.y+ut.y)*gt,C+=gt*3}return new Hf(O/C,$/C,0,E)}var Gf=7,dh=Number.POSITIVE_INFINITY;function gv(E,C){function O(he,me){var we=0,Ie=0;me<0&&(me=0);var $e=me/Math.sqrt(2);switch(he){case"top-right":case"top-left":Ie=$e-Gf;break;case"bottom-right":case"bottom-left":Ie=-$e+Gf;break;case"bottom":Ie=-me+Gf;break;case"top":Ie=me-Gf;break}switch(he){case"top-right":case"bottom-right":we=-$e;break;case"top-left":case"bottom-left":we=$e;break;case"left":we=me;break;case"right":we=-me;break}return[we,Ie]}function $(he,me,we){var Ie=0,$e=0;switch(me=Math.abs(me),we=Math.abs(we),he){case"top-right":case"top-left":case"top":$e=we-Gf;break;case"bottom-right":case"bottom-left":case"bottom":$e=-we+Gf;break}switch(he){case"top-right":case"bottom-right":case"right":Ie=-me;break;case"top-left":case"bottom-left":case"left":Ie=me;break}return[Ie,$e]}return C[1]!==dh?$(E,C[0],C[1]):O(E,C[0])}function qd(E,C,O,$,he,me,we){E.createArrays();var Ie=512*E.overscaling;E.tilePixelRatio=Na/Ie,E.compareText={},E.iconsNeedLinear=!1;var $e=E.layers[0].layout,ut=E.layers[0]._unevaluatedLayout._values,gt={};if(E.textSizeData.kind==="composite"){var Rt=E.textSizeData,$t=Rt.minZoom,Wt=Rt.maxZoom;gt.compositeTextSizes=[ut["text-size"].possiblyEvaluate(new ui($t),we),ut["text-size"].possiblyEvaluate(new ui(Wt),we)]}if(E.iconSizeData.kind==="composite"){var vr=E.iconSizeData,Dr=vr.minZoom,sn=vr.maxZoom;gt.compositeIconSizes=[ut["icon-size"].possiblyEvaluate(new ui(Dr),we),ut["icon-size"].possiblyEvaluate(new ui(sn),we)]}gt.layoutTextSize=ut["text-size"].possiblyEvaluate(new ui(E.zoom+1),we),gt.layoutIconSize=ut["icon-size"].possiblyEvaluate(new ui(E.zoom+1),we),gt.textMaxSize=ut["text-size"].possiblyEvaluate(new ui(18));for(var Qr=$e.get("text-line-height")*cs,Mn=$e.get("text-rotation-alignment")==="map"&&$e.get("symbol-placement")!=="point",yn=$e.get("text-keep-upright"),Tn=$e.get("text-size"),Rn=function(){var na=sa[Vn],Ia=$e.get("text-font").evaluate(na,{},we).join(","),_a=Tn.evaluate(na,{},we),Sa=gt.layoutTextSize.evaluate(na,{},we),ei=gt.layoutIconSize.evaluate(na,{},we),La={horizontal:{},vertical:void 0},Ra=na.text,ci=[0,0];if(Ra){var Qa=Ra.toString(),ki=$e.get("text-letter-spacing").evaluate(na,{},we)*cs,Wi=Kr(Qa)?ki:0,Ei=$e.get("text-anchor").evaluate(na,{},we),Ci=$e.get("text-variable-anchor");if(!Ci){var Ti=$e.get("text-radial-offset").evaluate(na,{},we);Ti?ci=gv(Ei,[Ti*cs,dh]):ci=$e.get("text-offset").evaluate(na,{},we).map(function(Ku){return Ku*cs})}var $i=Mn?"center":$e.get("text-justify").evaluate(na,{},we),ro=$e.get("symbol-placement"),wo=ro==="point"?$e.get("text-max-width").evaluate(na,{},we)*cs:0,Co=function(){E.allowVerticalPlacement&&Ar(Qa)&&(La.vertical=Ic(Ra,C,O,he,Ia,wo,Qr,Ei,"left",Wi,ci,Sl.vertical,!0,ro,Sa,_a))};if(!Mn&&Ci){for(var $o=$i==="auto"?Ci.map(function(Ku){return gh(Ku)}):[$i],Uo=!1,Cs=0;Cs<$o.length;Cs++){var Ls=$o[Cs];if(!La.horizontal[Ls])if(Uo)La.horizontal[Ls]=La.horizontal[0];else{var qo=Ic(Ra,C,O,he,Ia,wo,Qr,"center",Ls,Wi,ci,Sl.horizontal,!1,ro,Sa,_a);qo&&(La.horizontal[Ls]=qo,Uo=qo.positionedLines.length===1)}}Co()}else{$i==="auto"&&($i=gh(Ei));var Os=Ic(Ra,C,O,he,Ia,wo,Qr,Ei,$i,Wi,ci,Sl.horizontal,!1,ro,Sa,_a);Os&&(La.horizontal[$i]=Os),Co(),Ar(Qa)&&Mn&&yn&&(La.vertical=Ic(Ra,C,O,he,Ia,wo,Qr,Ei,$i,Wi,ci,Sl.vertical,!1,ro,Sa,_a))}}var Ns=void 0,Xo=!1;if(na.icon&&na.icon.name){var Us=$[na.icon.name];Us&&(Ns=Gd(he[na.icon.name],$e.get("icon-offset").evaluate(na,{},we),$e.get("icon-anchor").evaluate(na,{},we)),Xo=Us.sdf,E.sdfIcons===void 0?E.sdfIcons=Us.sdf:E.sdfIcons!==Us.sdf&&B("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Us.pixelRatio!==E.pixelRatio||$e.get("icon-rotate").constantOr(1)!==0)&&(E.iconsNeedLinear=!0))}var kl=mv(La.horizontal)||La.vertical;E.iconsInText=kl?kl.iconsInText:!1,(kl||Ns)&&e0(E,na,La,Ns,$,gt,Sa,ei,ci,Xo,we)},Vn=0,sa=E.features;Vn<sa.length;Vn+=1)Rn();me&&E.generateCollisionDebugBuffers()}function gh(E){switch(E){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function e0(E,C,O,$,he,me,we,Ie,$e,ut,gt){var Rt=me.textMaxSize.evaluate(C,{});Rt===void 0&&(Rt=we);var $t=E.layers[0].layout,Wt=$t.get("icon-offset").evaluate(C,{},gt),vr=mv(O.horizontal),Dr=24,sn=we/Dr,Qr=E.tilePixelRatio*sn,Mn=E.tilePixelRatio*Rt/Dr,yn=E.tilePixelRatio*Ie,Tn=E.tilePixelRatio*$t.get("symbol-spacing"),Rn=$t.get("text-padding")*E.tilePixelRatio,Vn=$t.get("icon-padding")*E.tilePixelRatio,sa=$t.get("text-max-angle")/180*Math.PI,na=$t.get("text-rotation-alignment")==="map"&&$t.get("symbol-placement")!=="point",Ia=$t.get("icon-rotation-alignment")==="map"&&$t.get("symbol-placement")!=="point",_a=$t.get("symbol-placement"),Sa=Tn/2,ei=$t.get("icon-text-fit"),La;$&&ei!=="none"&&(E.allowVerticalPlacement&&O.vertical&&(La=iv($,O.vertical,ei,$t.get("icon-text-fit-padding"),Wt,sn)),vr&&($=iv($,vr,ei,$t.get("icon-text-fit-padding"),Wt,sn)));var Ra=function(jf,tu){tu.x<0||tu.x>=Na||tu.y<0||tu.y>=Na||t0(E,tu,jf,O,$,he,La,E.layers[0],E.collisionBoxArray,C.index,C.sourceLayerIndex,E.index,Qr,Rn,na,$e,yn,Vn,Ia,Wt,C,me,ut,gt,we)};if(_a==="line")for(var ci=0,Qa=vv(C.geometry,0,0,Na,Na);ci<Qa.length;ci+=1)for(var ki=Qa[ci],Wi=Xd(ki,Tn,sa,O.vertical||vr,$,Dr,Mn,E.overscaling,Na),Ei=0,Ci=Wi;Ei<Ci.length;Ei+=1){var Ti=Ci[Ei],$i=vr;(!$i||!r0(E,$i.text,Sa,Ti))&&Ra(ki,Ti)}else if(_a==="line-center")for(var ro=0,wo=C.geometry;ro<wo.length;ro+=1){var Co=wo[ro];if(Co.length>1){var $o=Wd(Co,sa,O.vertical||vr,$,Dr,Mn);$o&&Ra(Co,$o)}}else if(C.type==="Polygon")for(var Uo=0,Cs=ih(C.geometry,0);Uo<Cs.length;Uo+=1){var Ls=Cs[Uo],qo=Kd(Ls,16);Ra(Ls[0],new Nf(qo.x,qo.y,0))}else if(C.type==="LineString")for(var Os=0,Ns=C.geometry;Os<Ns.length;Os+=1){var Xo=Ns[Os];Ra(Xo,new Nf(Xo[0].x,Xo[0].y,0))}else if(C.type==="Point")for(var Us=0,kl=C.geometry;Us<kl.length;Us+=1)for(var Ku=kl[Us],lf=0,uf=Ku;lf<uf.length;lf+=1){var ff=uf[lf];Ra([ff],new Nf(ff.x,ff.y,0))}}var pc=255,of=pc*wu;function yv(E,C,O,$,he,me,we,Ie,$e,ut,gt,Rt,$t,Wt,vr){var Dr=Zd(C,O,Ie,he,me,we,$,E.allowVerticalPlacement),sn=E.textSizeData,Qr=null;sn.kind==="source"?(Qr=[wu*he.layout.get("text-size").evaluate(we,{})],Qr[0]>of&&B(E.layerIds[0]+': Value for "text-size" is >= '+pc+'. Reduce your "text-size".')):sn.kind==="composite"&&(Qr=[wu*Wt.compositeTextSizes[0].evaluate(we,{},vr),wu*Wt.compositeTextSizes[1].evaluate(we,{},vr)],(Qr[0]>of||Qr[1]>of)&&B(E.layerIds[0]+': Value for "text-size" is >= '+pc+'. Reduce your "text-size".')),E.addSymbols(E.text,Dr,Qr,Ie,me,we,ut,C,$e.lineStartIndex,$e.lineLength,$t,vr);for(var Mn=0,yn=gt;Mn<yn.length;Mn+=1){var Tn=yn[Mn];Rt[Tn]=E.text.placedSymbolArray.length-1}return Dr.length*4}function mv(E){for(var C in E)return E[C];return null}function t0(E,C,O,$,he,me,we,Ie,$e,ut,gt,Rt,$t,Wt,vr,Dr,sn,Qr,Mn,yn,Tn,Rn,Vn,sa,na){var Ia,_a=E.addToLineVertexArray(C,O),Sa,ei,La,Ra,ci=0,Qa=0,ki=0,Wi=0,Ei=-1,Ci=-1,Ti={},$i=Ce(""),ro=0,wo=0;if(Ie._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Ia=Ie.layout.get("text-offset").evaluate(Tn,{},sa).map(function(yc){return yc*cs}),ro=Ia[0],wo=Ia[1]):(ro=Ie.layout.get("text-radial-offset").evaluate(Tn,{},sa)*cs,wo=dh),E.allowVerticalPlacement&&$.vertical){var Co=Ie.layout.get("text-rotate").evaluate(Tn,{},sa),$o=Co+90,Uo=$.vertical;La=new Oc($e,C,ut,gt,Rt,Uo,$t,Wt,vr,$o),we&&(Ra=new Oc($e,C,ut,gt,Rt,we,sn,Qr,vr,$o))}if(he){var Cs=Ie.layout.get("icon-rotate").evaluate(Tn,{}),Ls=Ie.layout.get("icon-text-fit")!=="none",qo=pv(he,Cs,Vn,Ls),Os=we?pv(we,Cs,Vn,Ls):void 0;ei=new Oc($e,C,ut,gt,Rt,he,sn,Qr,!1,Cs),ci=qo.length*4;var Ns=E.iconSizeData,Xo=null;Ns.kind==="source"?(Xo=[wu*Ie.layout.get("icon-size").evaluate(Tn,{})],Xo[0]>of&&B(E.layerIds[0]+': Value for "icon-size" is >= '+pc+'. Reduce your "icon-size".')):Ns.kind==="composite"&&(Xo=[wu*Rn.compositeIconSizes[0].evaluate(Tn,{},sa),wu*Rn.compositeIconSizes[1].evaluate(Tn,{},sa)],(Xo[0]>of||Xo[1]>of)&&B(E.layerIds[0]+': Value for "icon-size" is >= '+pc+'. Reduce your "icon-size".')),E.addSymbols(E.icon,qo,Xo,yn,Mn,Tn,!1,C,_a.lineStartIndex,_a.lineLength,-1,sa),Ei=E.icon.placedSymbolArray.length-1,Os&&(Qa=Os.length*4,E.addSymbols(E.icon,Os,Xo,yn,Mn,Tn,Sl.vertical,C,_a.lineStartIndex,_a.lineLength,-1,sa),Ci=E.icon.placedSymbolArray.length-1)}for(var Us in $.horizontal){var kl=$.horizontal[Us];if(!Sa){$i=Ce(kl.text);var Ku=Ie.layout.get("text-rotate").evaluate(Tn,{},sa);Sa=new Oc($e,C,ut,gt,Rt,kl,$t,Wt,vr,Ku)}var lf=kl.positionedLines.length===1;if(ki+=yv(E,C,kl,me,Ie,vr,Tn,Dr,_a,$.vertical?Sl.horizontal:Sl.horizontalOnly,lf?Object.keys($.horizontal):[Us],Ti,Ei,Rn,sa),lf)break}$.vertical&&(Wi+=yv(E,C,$.vertical,me,Ie,vr,Tn,Dr,_a,Sl.vertical,["vertical"],Ti,Ci,Rn,sa));var uf=Sa?Sa.boxStartIndex:E.collisionBoxArray.length,ff=Sa?Sa.boxEndIndex:E.collisionBoxArray.length,jf=La?La.boxStartIndex:E.collisionBoxArray.length,tu=La?La.boxEndIndex:E.collisionBoxArray.length,Gc=ei?ei.boxStartIndex:E.collisionBoxArray.length,wh=ei?ei.boxEndIndex:E.collisionBoxArray.length,Yc=Ra?Ra.boxStartIndex:E.collisionBoxArray.length,Th=Ra?Ra.boxEndIndex:E.collisionBoxArray.length,Vl=-1,Kf=function(yc,Iv){return yc&&yc.circleDiameter?Math.max(yc.circleDiameter,Iv):Iv};Vl=Kf(Sa,Vl),Vl=Kf(La,Vl),Vl=Kf(ei,Vl),Vl=Kf(Ra,Vl);var Wc=Vl>-1?1:0;Wc&&(Vl*=na/cs),E.glyphOffsetArray.length>=Yi.MAX_GLYPHS&&B("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Tn.sortKey!==void 0&&E.addToSortKeyRanges(E.symbolInstances.length,Tn.sortKey),E.symbolInstances.emplaceBack(C.x,C.y,Ti.right>=0?Ti.right:-1,Ti.center>=0?Ti.center:-1,Ti.left>=0?Ti.left:-1,Ti.vertical||-1,Ei,Ci,$i,uf,ff,jf,tu,Gc,wh,Yc,Th,ut,ki,Wi,ci,Qa,Wc,0,$t,ro,wo,Vl)}function r0(E,C,O,$){var he=E.compareText;if(!(C in he))he[C]=[];else for(var me=he[C],we=me.length-1;we>=0;we--)if($.dist(me[we])<O)return!0;return he[C].push($),!1}var n0=zf.VectorTileFeature.types,a0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Nc(E,C,O,$,he,me,we,Ie,$e,ut,gt,Rt,$t){var Wt=Ie?Math.min(of,Math.round(Ie[0])):0,vr=Ie?Math.min(of,Math.round(Ie[1])):0;E.emplaceBack(C,O,Math.round($*32),Math.round(he*32),me,we,(Wt<<1)+($e?1:0),vr,ut*16,gt*16,Rt*256,$t*256)}function yh(E,C,O){E.emplaceBack(C.x,C.y,O),E.emplaceBack(C.x,C.y,O),E.emplaceBack(C.x,C.y,O),E.emplaceBack(C.x,C.y,O)}function i0(E){for(var C=0,O=E.sections;C<O.length;C+=1){var $=O[C];if(ra($.text))return!0}return!1}var Yf=function(C){this.layoutVertexArray=new Fu,this.indexArray=new mu,this.programConfigurations=C,this.segments=new H,this.dynamicLayoutVertexArray=new Jf,this.opacityVertexArray=new Qf,this.placedSymbolArray=new tf};Yf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Yf.prototype.upload=function(C,O,$,he){this.isEmpty()||($&&(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,uh.members),this.indexBuffer=C.createIndexBuffer(this.indexArray,O),this.dynamicLayoutVertexBuffer=C.createVertexBuffer(this.dynamicLayoutVertexArray,od.members,!0),this.opacityVertexBuffer=C.createVertexBuffer(this.opacityVertexArray,a0,!0),this.opacityVertexBuffer.itemSize=1),($||he)&&this.programConfigurations.upload(C))},Yf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ze("SymbolBuffers",Yf);var dc=function(C,O,$){this.layoutVertexArray=new C,this.layoutAttributes=O,this.indexArray=new $,this.segments=new H,this.collisionVertexArray=new Js};dc.prototype.upload=function(C){this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=C.createVertexBuffer(this.collisionVertexArray,sd.members,!0)},dc.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ze("CollisionBuffers",dc);var Yi=function(C){this.collisionBoxArray=C.collisionBoxArray,this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function($e){return $e.id}),this.index=C.index,this.pixelRatio=C.pixelRatio,this.sourceLayerIndex=C.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Lf([]),this.placementViewportMatrix=Lf([]);var O=this.layers[0],$=O._unevaluatedLayout._values;this.textSizeData=ph(this.zoom,$["text-size"]),this.iconSizeData=ph(this.zoom,$["icon-size"]);var he=this.layers[0].layout,me=he.get("symbol-sort-key"),we=he.get("symbol-z-order");this.sortFeaturesByKey=we!=="viewport-y"&&me.constantOr(1)!==void 0;var Ie=we==="viewport-y"||we==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ie&&(he.get("text-allow-overlap")||he.get("icon-allow-overlap")||he.get("text-ignore-placement")||he.get("icon-ignore-placement")),he.get("symbol-placement")==="point"&&(this.writingModes=he.get("text-writing-mode").map(function($e){return Sl[$e]})),this.stateDependentLayerIds=this.layers.filter(function($e){return $e.isStateDependent()}).map(function($e){return $e.id}),this.sourceID=C.sourceID};Yi.prototype.createArrays=function(){this.text=new Yf(new ni(uh.members,this.layers,this.zoom,function(C){return/^text/.test(C)})),this.icon=new Yf(new ni(uh.members,this.layers,this.zoom,function(C){return/^icon/.test(C)})),this.glyphOffsetArray=new Nl,this.lineVertexArray=new _c,this.symbolInstances=new bc},Yi.prototype.calculateGlyphDependencies=function(C,O,$,he,me){for(var we=0;we<C.length;we++)if(O[C.charCodeAt(we)]=!0,($||he)&&me){var Ie=fc[C.charAt(we)];Ie&&(O[Ie.charCodeAt(0)]=!0)}},Yi.prototype.populate=function(C,O,$){var he=this.layers[0],me=he.layout,we=me.get("text-font"),Ie=me.get("text-field"),$e=me.get("icon-image"),ut=(Ie.value.kind!=="constant"||Ie.value.value instanceof Ui&&!Ie.value.value.isEmpty()||Ie.value.value.toString().length>0)&&(we.value.kind!=="constant"||we.value.value.length>0),gt=$e.value.kind!=="constant"||!!$e.value.value||Object.keys($e.parameters).length>0,Rt=me.get("symbol-sort-key");if(this.features=[],!(!ut&&!gt)){for(var $t=O.iconDependencies,Wt=O.glyphDependencies,vr=O.availableImages,Dr=new ui(this.zoom),sn=0,Qr=C;sn<Qr.length;sn+=1){var Mn=Qr[sn],yn=Mn.feature,Tn=Mn.id,Rn=Mn.index,Vn=Mn.sourceLayerIndex,sa=he._featureFilter.needGeometry,na={type:yn.type,id:Tn,properties:yn.properties,geometry:sa?Ni(yn):[]};if(!!he._featureFilter.filter(Dr,na,$)){sa||(na.geometry=Ni(yn));var Ia=void 0;if(ut){var _a=he.getValueAndResolveTokens("text-field",na,$,vr),Sa=Ui.factory(_a);i0(Sa)&&(this.hasRTLText=!0),(!this.hasRTLText||co()==="unavailable"||this.hasRTLText&&Wa.isParsed())&&(Ia=fd(Sa,he,na))}var ei=void 0;if(gt){var La=he.getValueAndResolveTokens("icon-image",na,$,vr);La instanceof Ao?ei=La:ei=Ao.fromString(La)}if(!(!Ia&&!ei)){var Ra=this.sortFeaturesByKey?Rt.evaluate(na,{},$):void 0,ci={id:Tn,text:Ia,icon:ei,index:Rn,sourceLayerIndex:Vn,geometry:Ni(yn),properties:yn.properties,type:n0[yn.type],sortKey:Ra};if(this.features.push(ci),ei&&($t[ei.name]=!0),Ia){var Qa=we.evaluate(na,{},$).join(","),ki=me.get("text-rotation-alignment")==="map"&&me.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Sl.vertical)>=0;for(var Wi=0,Ei=Ia.sections;Wi<Ei.length;Wi+=1){var Ci=Ei[Wi];if(Ci.image)$t[Ci.image.name]=!0;else{var Ti=Ar(Ia.toString()),$i=Ci.fontStack||Qa,ro=Wt[$i]=Wt[$i]||{};this.calculateGlyphDependencies(Ci.text,ro,ki,this.allowVerticalPlacement,Ti)}}}}}}me.get("symbol-placement")==="line"&&(this.features=cd(this.features)),this.sortFeaturesByKey&&this.features.sort(function(wo,Co){return wo.sortKey-Co.sortKey})}},Yi.prototype.update=function(C,O,$){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(C,O,this.layers,$),this.icon.programConfigurations.updatePaintArrays(C,O,this.layers,$))},Yi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Yi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Yi.prototype.upload=function(C){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(C),this.iconCollisionBox.upload(C)),this.text.upload(C,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(C,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Yi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Yi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Yi.prototype.addToLineVertexArray=function(C,O){var $=this.lineVertexArray.length;if(C.segment!==void 0){for(var he=C.dist(O[C.segment+1]),me=C.dist(O[C.segment]),we={},Ie=C.segment+1;Ie<O.length;Ie++)we[Ie]={x:O[Ie].x,y:O[Ie].y,tileUnitDistanceFromAnchor:he},Ie<O.length-1&&(he+=O[Ie+1].dist(O[Ie]));for(var $e=C.segment||0;$e>=0;$e--)we[$e]={x:O[$e].x,y:O[$e].y,tileUnitDistanceFromAnchor:me},$e>0&&(me+=O[$e-1].dist(O[$e]));for(var ut=0;ut<O.length;ut++){var gt=we[ut];this.lineVertexArray.emplaceBack(gt.x,gt.y,gt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:$,lineLength:this.lineVertexArray.length-$}},Yi.prototype.addSymbols=function(C,O,$,he,me,we,Ie,$e,ut,gt,Rt,$t){for(var Wt=C.indexArray,vr=C.layoutVertexArray,Dr=C.segments.prepareSegment(4*O.length,vr,Wt,we.sortKey),sn=this.glyphOffsetArray.length,Qr=Dr.vertexLength,Mn=this.allowVerticalPlacement&&Ie===Sl.vertical?Math.PI/2:0,yn=we.text&&we.text.sections,Tn=0;Tn<O.length;Tn++){var Rn=O[Tn],Vn=Rn.tl,sa=Rn.tr,na=Rn.bl,Ia=Rn.br,_a=Rn.tex,Sa=Rn.pixelOffsetTL,ei=Rn.pixelOffsetBR,La=Rn.minFontScaleX,Ra=Rn.minFontScaleY,ci=Rn.glyphOffset,Qa=Rn.isSDF,ki=Rn.sectionIndex,Wi=Dr.vertexLength,Ei=ci[1];Nc(vr,$e.x,$e.y,Vn.x,Ei+Vn.y,_a.x,_a.y,$,Qa,Sa.x,Sa.y,La,Ra),Nc(vr,$e.x,$e.y,sa.x,Ei+sa.y,_a.x+_a.w,_a.y,$,Qa,ei.x,Sa.y,La,Ra),Nc(vr,$e.x,$e.y,na.x,Ei+na.y,_a.x,_a.y+_a.h,$,Qa,Sa.x,ei.y,La,Ra),Nc(vr,$e.x,$e.y,Ia.x,Ei+Ia.y,_a.x+_a.w,_a.y+_a.h,$,Qa,ei.x,ei.y,La,Ra),yh(C.dynamicLayoutVertexArray,$e,Mn),Wt.emplaceBack(Wi,Wi+1,Wi+2),Wt.emplaceBack(Wi+1,Wi+2,Wi+3),Dr.vertexLength+=4,Dr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ci[0]),(Tn===O.length-1||ki!==O[Tn+1].sectionIndex)&&C.programConfigurations.populatePaintArrays(vr.length,we,we.index,{},$t,yn&&yn[ki])}C.placedSymbolArray.emplaceBack($e.x,$e.y,sn,this.glyphOffsetArray.length-sn,Qr,ut,gt,$e.segment,$?$[0]:0,$?$[1]:0,he[0],he[1],Ie,0,!1,0,Rt)},Yi.prototype._addCollisionDebugVertex=function(C,O,$,he,me,we){return O.emplaceBack(0,0),C.emplaceBack($.x,$.y,he,me,Math.round(we.x),Math.round(we.y))},Yi.prototype.addCollisionDebugVertices=function(C,O,$,he,me,we,Ie){var $e=me.segments.prepareSegment(4,me.layoutVertexArray,me.indexArray),ut=$e.vertexLength,gt=me.layoutVertexArray,Rt=me.collisionVertexArray,$t=Ie.anchorX,Wt=Ie.anchorY;this._addCollisionDebugVertex(gt,Rt,we,$t,Wt,new f(C,O)),this._addCollisionDebugVertex(gt,Rt,we,$t,Wt,new f($,O)),this._addCollisionDebugVertex(gt,Rt,we,$t,Wt,new f($,he)),this._addCollisionDebugVertex(gt,Rt,we,$t,Wt,new f(C,he)),$e.vertexLength+=4;var vr=me.indexArray;vr.emplaceBack(ut,ut+1),vr.emplaceBack(ut+1,ut+2),vr.emplaceBack(ut+2,ut+3),vr.emplaceBack(ut+3,ut),$e.primitiveLength+=4},Yi.prototype.addDebugCollisionBoxes=function(C,O,$,he){for(var me=C;me<O;me++){var we=this.collisionBoxArray.get(me),Ie=we.x1,$e=we.y1,ut=we.x2,gt=we.y2;this.addCollisionDebugVertices(Ie,$e,ut,gt,he?this.textCollisionBox:this.iconCollisionBox,we.anchorPoint,$)}},Yi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new dc(Mf,Xh.members,df),this.iconCollisionBox=new dc(Mf,Xh.members,df);for(var C=0;C<this.symbolInstances.length;C++){var O=this.symbolInstances.get(C);this.addDebugCollisionBoxes(O.textBoxStartIndex,O.textBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.iconBoxStartIndex,O.iconBoxEndIndex,O,!1),this.addDebugCollisionBoxes(O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,!1)}},Yi.prototype._deserializeCollisionBoxesForSymbol=function(C,O,$,he,me,we,Ie,$e,ut){for(var gt={},Rt=O;Rt<$;Rt++){var $t=C.get(Rt);gt.textBox={x1:$t.x1,y1:$t.y1,x2:$t.x2,y2:$t.y2,anchorPointX:$t.anchorPointX,anchorPointY:$t.anchorPointY},gt.textFeatureIndex=$t.featureIndex;break}for(var Wt=he;Wt<me;Wt++){var vr=C.get(Wt);gt.verticalTextBox={x1:vr.x1,y1:vr.y1,x2:vr.x2,y2:vr.y2,anchorPointX:vr.anchorPointX,anchorPointY:vr.anchorPointY},gt.verticalTextFeatureIndex=vr.featureIndex;break}for(var Dr=we;Dr<Ie;Dr++){var sn=C.get(Dr);gt.iconBox={x1:sn.x1,y1:sn.y1,x2:sn.x2,y2:sn.y2,anchorPointX:sn.anchorPointX,anchorPointY:sn.anchorPointY},gt.iconFeatureIndex=sn.featureIndex;break}for(var Qr=$e;Qr<ut;Qr++){var Mn=C.get(Qr);gt.verticalIconBox={x1:Mn.x1,y1:Mn.y1,x2:Mn.x2,y2:Mn.y2,anchorPointX:Mn.anchorPointX,anchorPointY:Mn.anchorPointY},gt.verticalIconFeatureIndex=Mn.featureIndex;break}return gt},Yi.prototype.deserializeCollisionBoxes=function(C){this.collisionArrays=[];for(var O=0;O<this.symbolInstances.length;O++){var $=this.symbolInstances.get(O);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(C,$.textBoxStartIndex,$.textBoxEndIndex,$.verticalTextBoxStartIndex,$.verticalTextBoxEndIndex,$.iconBoxStartIndex,$.iconBoxEndIndex,$.verticalIconBoxStartIndex,$.verticalIconBoxEndIndex))}},Yi.prototype.hasTextData=function(){return this.text.segments.get().length>0},Yi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Yi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Yi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Yi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Yi.prototype.addIndicesForPlacedSymbol=function(C,O){for(var $=C.placedSymbolArray.get(O),he=$.vertexStartIndex+$.numGlyphs*4,me=$.vertexStartIndex;me<he;me+=4)C.indexArray.emplaceBack(me,me+1,me+2),C.indexArray.emplaceBack(me+1,me+2,me+3)},Yi.prototype.getSortedSymbolIndexes=function(C){if(this.sortedAngle===C&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var O=Math.sin(C),$=Math.cos(C),he=[],me=[],we=[],Ie=0;Ie<this.symbolInstances.length;++Ie){we.push(Ie);var $e=this.symbolInstances.get(Ie);he.push(Math.round(O*$e.anchorX+$*$e.anchorY)|0),me.push($e.featureIndex)}return we.sort(function(ut,gt){return he[ut]-he[gt]||me[gt]-me[ut]}),we},Yi.prototype.addToSortKeyRanges=function(C,O){var $=this.sortKeyRanges[this.sortKeyRanges.length-1];$&&$.sortKey===O?$.symbolInstanceEnd=C+1:this.sortKeyRanges.push({sortKey:O,symbolInstanceStart:C,symbolInstanceEnd:C+1})},Yi.prototype.sortFeatures=function(C){var O=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==C&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(C),this.sortedAngle=C,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var $=0,he=this.symbolInstanceIndexes;$<he.length;$+=1){var me=he[$],we=this.symbolInstances.get(me);this.featureSortOrder.push(we.featureIndex),[we.rightJustifiedTextSymbolIndex,we.centerJustifiedTextSymbolIndex,we.leftJustifiedTextSymbolIndex].forEach(function(Ie,$e,ut){Ie>=0&&ut.indexOf(Ie)===$e&&O.addIndicesForPlacedSymbol(O.text,Ie)}),we.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,we.verticalPlacedTextSymbolIndex),we.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,we.placedIconSymbolIndex),we.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,we.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ze("SymbolBucket",Yi,{omit:["layers","collisionBoxArray","features","compareText"]}),Yi.MAX_GLYPHS=65535,Yi.addDynamicAttributes=yh;function o0(E,C){return C.replace(/{([^{}]+)}/g,function(O,$){return $ in E?String(E[$]):""})}var s0=new Xi({"symbol-placement":new za(Ft.layout_symbol["symbol-placement"]),"symbol-spacing":new za(Ft.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new za(Ft.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Xa(Ft.layout_symbol["symbol-sort-key"]),"symbol-z-order":new za(Ft.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new za(Ft.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new za(Ft.layout_symbol["icon-ignore-placement"]),"icon-optional":new za(Ft.layout_symbol["icon-optional"]),"icon-rotation-alignment":new za(Ft.layout_symbol["icon-rotation-alignment"]),"icon-size":new Xa(Ft.layout_symbol["icon-size"]),"icon-text-fit":new za(Ft.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new za(Ft.layout_symbol["icon-text-fit-padding"]),"icon-image":new Xa(Ft.layout_symbol["icon-image"]),"icon-rotate":new Xa(Ft.layout_symbol["icon-rotate"]),"icon-padding":new za(Ft.layout_symbol["icon-padding"]),"icon-keep-upright":new za(Ft.layout_symbol["icon-keep-upright"]),"icon-offset":new Xa(Ft.layout_symbol["icon-offset"]),"icon-anchor":new Xa(Ft.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new za(Ft.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new za(Ft.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new za(Ft.layout_symbol["text-rotation-alignment"]),"text-field":new Xa(Ft.layout_symbol["text-field"]),"text-font":new Xa(Ft.layout_symbol["text-font"]),"text-size":new Xa(Ft.layout_symbol["text-size"]),"text-max-width":new Xa(Ft.layout_symbol["text-max-width"]),"text-line-height":new za(Ft.layout_symbol["text-line-height"]),"text-letter-spacing":new Xa(Ft.layout_symbol["text-letter-spacing"]),"text-justify":new Xa(Ft.layout_symbol["text-justify"]),"text-radial-offset":new Xa(Ft.layout_symbol["text-radial-offset"]),"text-variable-anchor":new za(Ft.layout_symbol["text-variable-anchor"]),"text-anchor":new Xa(Ft.layout_symbol["text-anchor"]),"text-max-angle":new za(Ft.layout_symbol["text-max-angle"]),"text-writing-mode":new za(Ft.layout_symbol["text-writing-mode"]),"text-rotate":new Xa(Ft.layout_symbol["text-rotate"]),"text-padding":new za(Ft.layout_symbol["text-padding"]),"text-keep-upright":new za(Ft.layout_symbol["text-keep-upright"]),"text-transform":new Xa(Ft.layout_symbol["text-transform"]),"text-offset":new Xa(Ft.layout_symbol["text-offset"]),"text-allow-overlap":new za(Ft.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new za(Ft.layout_symbol["text-ignore-placement"]),"text-optional":new za(Ft.layout_symbol["text-optional"])}),l0=new Xi({"icon-opacity":new Xa(Ft.paint_symbol["icon-opacity"]),"icon-color":new Xa(Ft.paint_symbol["icon-color"]),"icon-halo-color":new Xa(Ft.paint_symbol["icon-halo-color"]),"icon-halo-width":new Xa(Ft.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Xa(Ft.paint_symbol["icon-halo-blur"]),"icon-translate":new za(Ft.paint_symbol["icon-translate"]),"icon-translate-anchor":new za(Ft.paint_symbol["icon-translate-anchor"]),"text-opacity":new Xa(Ft.paint_symbol["text-opacity"]),"text-color":new Xa(Ft.paint_symbol["text-color"],{runtimeType:Bn,getOverride:function(E){return E.textColor},hasOverride:function(E){return!!E.textColor}}),"text-halo-color":new Xa(Ft.paint_symbol["text-halo-color"]),"text-halo-width":new Xa(Ft.paint_symbol["text-halo-width"]),"text-halo-blur":new Xa(Ft.paint_symbol["text-halo-blur"]),"text-translate":new za(Ft.paint_symbol["text-translate"]),"text-translate-anchor":new za(Ft.paint_symbol["text-translate-anchor"])}),mh={paint:l0,layout:s0},Wf=function(C){this.type=C.property.overrides?C.property.overrides.runtimeType:xr,this.defaultValue=C};Wf.prototype.evaluate=function(C){if(C.formattedSection){var O=this.defaultValue.property.overrides;if(O&&O.hasOverride(C.formattedSection))return O.getOverride(C.formattedSection)}return C.feature&&C.featureState?this.defaultValue.evaluate(C.feature,C.featureState):this.defaultValue.property.specification.default},Wf.prototype.eachChild=function(C){if(!this.defaultValue.isConstant()){var O=this.defaultValue.value;C(O._styleExpression.expression)}},Wf.prototype.outputDefined=function(){return!1},Wf.prototype.serialize=function(){return null},ze("FormatSectionOverride",Wf,{omit:["defaultValue"]});var u0=function(E){function C(O){E.call(this,O,mh)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.recalculate=function($,he){if(E.prototype.recalculate.call(this,$,he),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var me=this.layout.get("text-writing-mode");if(me){for(var we=[],Ie=0,$e=me;Ie<$e.length;Ie+=1){var ut=$e[Ie];we.indexOf(ut)<0&&we.push(ut)}this.layout._values["text-writing-mode"]=we}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},C.prototype.getValueAndResolveTokens=function($,he,me,we){var Ie=this.layout.get($).evaluate(he,{},me,we),$e=this._unevaluatedLayout._values[$];return!$e.isDataDriven()&&!mo($e.value)&&Ie?o0(he.properties,Ie):Ie},C.prototype.createBucket=function($){return new Yi($)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype._setPaintOverrides=function(){for(var $=0,he=mh.paint.overridableProperties;$<he.length;$+=1){var me=he[$];if(!!C.hasPaintOverride(this.layout,me)){var we=this.paint.get(me),Ie=new Wf(we),$e=new ss(Ie,we.property.specification),ut=null;we.value.kind==="constant"||we.value.kind==="source"?ut=new Kl("source",$e):ut=new ls("composite",$e,we.value.zoomStops,we.value._interpolationType),this.paint._values[me]=new Gi(we.property,ut,we.parameters)}}},C.prototype._handleOverridablePaintPropertyUpdate=function($,he,me){return!this.layout||he.isDataDriven()||me.isDataDriven()?!1:C.hasPaintOverride(this.layout,$)},C.hasPaintOverride=function($,he){var me=$.get("text-field"),we=mh.paint.properties[he],Ie=!1,$e=function(Rt){for(var $t=0,Wt=Rt;$t<Wt.length;$t+=1){var vr=Wt[$t];if(we.overrides&&we.overrides.hasOverride(vr)){Ie=!0;return}}};if(me.value.kind==="constant"&&me.value.value instanceof Ui)$e(me.value.value.sections);else if(me.value.kind==="source"){var ut=function(Rt){if(!Ie)if(Rt instanceof Ki&&Di(Rt.value)===pa){var $t=Rt.value;$e($t.sections)}else Rt instanceof es?$e(Rt.sections):Rt.eachChild(ut)},gt=me.value;gt._styleExpression&&ut(gt._styleExpression.expression)}return Ie},C}(ms),f0=new Xi({"background-color":new za(Ft.paint_background["background-color"]),"background-pattern":new eo(Ft.paint_background["background-pattern"]),"background-opacity":new za(Ft.paint_background["background-opacity"])}),c0={paint:f0},h0=function(E){function C(O){E.call(this,O,c0)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(ms),v0=new Xi({"raster-opacity":new za(Ft.paint_raster["raster-opacity"]),"raster-hue-rotate":new za(Ft.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new za(Ft.paint_raster["raster-brightness-min"]),"raster-brightness-max":new za(Ft.paint_raster["raster-brightness-max"]),"raster-saturation":new za(Ft.paint_raster["raster-saturation"]),"raster-contrast":new za(Ft.paint_raster["raster-contrast"]),"raster-resampling":new za(Ft.paint_raster["raster-resampling"]),"raster-fade-duration":new za(Ft.paint_raster["raster-fade-duration"])}),p0={paint:v0},d0=function(E){function C(O){E.call(this,O,p0)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(ms);function g0(E){var C=[],O=E.id;return O===void 0&&C.push({message:"layers."+O+': missing required property "id"'}),E.render===void 0&&C.push({message:"layers."+O+': missing required method "render"'}),E.renderingMode&&E.renderingMode!=="2d"&&E.renderingMode!=="3d"&&C.push({message:"layers."+O+': property "renderingMode" must be either "2d" or "3d"'}),C}var y0=function(E){function C(O){E.call(this,O,{}),this.implementation=O}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},C.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},C.prototype.recalculate=function(){},C.prototype.updateTransitions=function(){},C.prototype.hasTransition=function(){},C.prototype.serialize=function(){},C.prototype.onAdd=function($){this.implementation.onAdd&&this.implementation.onAdd($,$.painter.context.gl)},C.prototype.onRemove=function($){this.implementation.onRemove&&this.implementation.onRemove($,$.painter.context.gl)},C}(ms),m0={circle:Zv,heatmap:Qv,hillshade:ep,fill:Mp,"fill-extrusion":Wp,line:ad,symbol:u0,background:h0,raster:d0};function x0(E){return E.type==="custom"?new y0(E):new m0[E.type](E)}var xv=self.HTMLImageElement,bv=self.HTMLCanvasElement,_v=self.HTMLVideoElement,wv=self.ImageData,Uc=self.ImageBitmap,bf=function(C,O,$,he){this.context=C,this.format=$,this.texture=C.gl.createTexture(),this.update(O,he)};bf.prototype.update=function(C,O,$){var he=C.width,me=C.height,we=(!this.size||this.size[0]!==he||this.size[1]!==me)&&!$,Ie=this,$e=Ie.context,ut=$e.gl;if(this.useMipmap=Boolean(O&&O.useMipmap),ut.bindTexture(ut.TEXTURE_2D,this.texture),$e.pixelStoreUnpackFlipY.set(!1),$e.pixelStoreUnpack.set(1),$e.pixelStoreUnpackPremultiplyAlpha.set(this.format===ut.RGBA&&(!O||O.premultiply!==!1)),we)this.size=[he,me],C instanceof xv||C instanceof bv||C instanceof _v||C instanceof wv||Uc&&C instanceof Uc?ut.texImage2D(ut.TEXTURE_2D,0,this.format,this.format,ut.UNSIGNED_BYTE,C):ut.texImage2D(ut.TEXTURE_2D,0,this.format,he,me,0,this.format,ut.UNSIGNED_BYTE,C.data);else{var gt=$||{x:0,y:0},Rt=gt.x,$t=gt.y;C instanceof xv||C instanceof bv||C instanceof _v||C instanceof wv||Uc&&C instanceof Uc?ut.texSubImage2D(ut.TEXTURE_2D,0,Rt,$t,ut.RGBA,ut.UNSIGNED_BYTE,C):ut.texSubImage2D(ut.TEXTURE_2D,0,Rt,$t,he,me,ut.RGBA,ut.UNSIGNED_BYTE,C.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ut.generateMipmap(ut.TEXTURE_2D)},bf.prototype.bind=function(C,O,$){var he=this,me=he.context,we=me.gl;we.bindTexture(we.TEXTURE_2D,this.texture),$===we.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&($=we.LINEAR),C!==this.filter&&(we.texParameteri(we.TEXTURE_2D,we.TEXTURE_MAG_FILTER,C),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_MIN_FILTER,$||C),this.filter=C),O!==this.wrap&&(we.texParameteri(we.TEXTURE_2D,we.TEXTURE_WRAP_S,O),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_WRAP_T,O),this.wrap=O)},bf.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},bf.prototype.destroy=function(){var C=this.context,O=C.gl;O.deleteTexture(this.texture),this.texture=null};var xh=function(C){var O=this;this._callback=C,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){O._triggered=!1,O._callback()})};xh.prototype.trigger=function(){var C=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){C._triggered=!1,C._callback()},0))},xh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Xf=function(C,O,$){this.target=C,this.parent=O,this.mapId=$,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new xh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=K()?C:self};Xf.prototype.send=function(C,O,$,he,me){var we=this;me===void 0&&(me=!1);var Ie=Math.round(Math.random()*1e18).toString(36).substring(0,10);$&&(this.callbacks[Ie]=$);var $e=Z(this.globalScope)?void 0:[];return this.target.postMessage({id:Ie,type:C,hasCallback:!!$,targetMapId:he,mustQueue:me,sourceMapId:this.mapId,data:kt(O,$e)},$e),{cancel:function(){$&&delete we.callbacks[Ie],we.target.postMessage({id:Ie,type:"<cancel>",targetMapId:he,sourceMapId:we.mapId})}}},Xf.prototype.receive=function(C){var O=C.data,$=O.id;if(!!$&&!(O.targetMapId&&this.mapId!==O.targetMapId))if(O.type==="<cancel>"){delete this.tasks[$];var he=this.cancelCallbacks[$];delete this.cancelCallbacks[$],he&&he()}else K()||O.mustQueue?(this.tasks[$]=O,this.taskQueue.push($),this.invoker.trigger()):this.processTask($,O)},Xf.prototype.process=function(){if(!!this.taskQueue.length){var C=this.taskQueue.shift(),O=this.tasks[C];delete this.tasks[C],this.taskQueue.length&&this.invoker.trigger(),!!O&&this.processTask(C,O)}},Xf.prototype.processTask=function(C,O){var $=this;if(O.type==="<response>"){var he=this.callbacks[C];delete this.callbacks[C],he&&(O.error?he(Vt(O.error)):he(null,Vt(O.data)))}else{var me=!1,we=Z(this.globalScope)?void 0:[],Ie=O.hasCallback?function($t,Wt){me=!0,delete $.cancelCallbacks[C],$.target.postMessage({id:C,type:"<response>",sourceMapId:$.mapId,error:$t?kt($t):null,data:kt(Wt,we)},we)}:function($t){me=!0},$e=null,ut=Vt(O.data);if(this.parent[O.type])$e=this.parent[O.type](O.sourceMapId,ut,Ie);else if(this.parent.getWorkerSource){var gt=O.type.split("."),Rt=this.parent.getWorkerSource(O.sourceMapId,gt[0],ut.source);$e=Rt[gt[1]](ut,Ie)}else Ie(new Error("Could not find function "+O.type));!me&&$e&&$e.cancel&&(this.cancelCallbacks[C]=$e.cancel)}},Xf.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function b0(E,C,O){C=Math.pow(2,O)-C-1;var $=Tv(E*256,C*256,O),he=Tv((E+1)*256,(C+1)*256,O);return $[0]+","+$[1]+","+he[0]+","+he[1]}function Tv(E,C,O){var $=2*Math.PI*6378137/256/Math.pow(2,O),he=E*$-2*Math.PI*6378137/2,me=C*$-2*Math.PI*6378137/2;return[he,me]}var Oo=function(C,O){C&&(O?this.setSouthWest(C).setNorthEast(O):C.length===4?this.setSouthWest([C[0],C[1]]).setNorthEast([C[2],C[3]]):this.setSouthWest(C[0]).setNorthEast(C[1]))};Oo.prototype.setNorthEast=function(C){return this._ne=C instanceof ho?new ho(C.lng,C.lat):ho.convert(C),this},Oo.prototype.setSouthWest=function(C){return this._sw=C instanceof ho?new ho(C.lng,C.lat):ho.convert(C),this},Oo.prototype.extend=function(C){var O=this._sw,$=this._ne,he,me;if(C instanceof ho)he=C,me=C;else if(C instanceof Oo){if(he=C._sw,me=C._ne,!he||!me)return this}else{if(Array.isArray(C))if(C.length===4||C.every(Array.isArray)){var we=C;return this.extend(Oo.convert(we))}else{var Ie=C;return this.extend(ho.convert(Ie))}return this}return!O&&!$?(this._sw=new ho(he.lng,he.lat),this._ne=new ho(me.lng,me.lat)):(O.lng=Math.min(he.lng,O.lng),O.lat=Math.min(he.lat,O.lat),$.lng=Math.max(me.lng,$.lng),$.lat=Math.max(me.lat,$.lat)),this},Oo.prototype.getCenter=function(){return new ho((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Oo.prototype.getSouthWest=function(){return this._sw},Oo.prototype.getNorthEast=function(){return this._ne},Oo.prototype.getNorthWest=function(){return new ho(this.getWest(),this.getNorth())},Oo.prototype.getSouthEast=function(){return new ho(this.getEast(),this.getSouth())},Oo.prototype.getWest=function(){return this._sw.lng},Oo.prototype.getSouth=function(){return this._sw.lat},Oo.prototype.getEast=function(){return this._ne.lng},Oo.prototype.getNorth=function(){return this._ne.lat},Oo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Oo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Oo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Oo.prototype.contains=function(C){var O=ho.convert(C),$=O.lng,he=O.lat,me=this._sw.lat<=he&&he<=this._ne.lat,we=this._sw.lng<=$&&$<=this._ne.lng;return this._sw.lng>this._ne.lng&&(we=this._sw.lng>=$&&$>=this._ne.lng),me&&we},Oo.convert=function(C){return!C||C instanceof Oo?C:new Oo(C)};var Av=63710088e-1,ho=function(C,O){if(isNaN(C)||isNaN(O))throw new Error("Invalid LngLat object: ("+C+", "+O+")");if(this.lng=+C,this.lat=+O,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ho.prototype.wrap=function(){return new ho(x(this.lng,-180,180),this.lat)},ho.prototype.toArray=function(){return[this.lng,this.lat]},ho.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ho.prototype.distanceTo=function(C){var O=Math.PI/180,$=this.lat*O,he=C.lat*O,me=Math.sin($)*Math.sin(he)+Math.cos($)*Math.cos(he)*Math.cos((C.lng-this.lng)*O),we=Av*Math.acos(Math.min(me,1));return we},ho.prototype.toBounds=function(C){C===void 0&&(C=0);var O=40075017,$=360*C/O,he=$/Math.cos(Math.PI/180*this.lat);return new Oo(new ho(this.lng-he,this.lat-$),new ho(this.lng+he,this.lat+$))},ho.convert=function(C){if(C instanceof ho)return C;if(Array.isArray(C)&&(C.length===2||C.length===3))return new ho(Number(C[0]),Number(C[1]));if(!Array.isArray(C)&&typeof C=="object"&&C!==null)return new ho(Number("lng"in C?C.lng:C.lon),Number(C.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Mv=2*Math.PI*Av;function Sv(E){return Mv*Math.cos(E*Math.PI/180)}function kv(E){return(180+E)/360}function Ev(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function Cv(E,C){return E/Sv(C)}function _0(E){return E*360-180}function bh(E){var C=180-E*360;return 360/Math.PI*Math.atan(Math.exp(C*Math.PI/180))-90}function w0(E,C){return E*Sv(bh(C))}function T0(E){return 1/Math.cos(E*Math.PI/180)}var _f=function(C,O,$){$===void 0&&($=0),this.x=+C,this.y=+O,this.z=+$};_f.fromLngLat=function(C,O){O===void 0&&(O=0);var $=ho.convert(C);return new _f(kv($.lng),Ev($.lat),Cv(O,$.lat))},_f.prototype.toLngLat=function(){return new ho(_0(this.x),bh(this.y))},_f.prototype.toAltitude=function(){return w0(this.z,this.y)},_f.prototype.meterInMercatorCoordinateUnits=function(){return 1/Mv*T0(bh(this.y))};var wf=function(C,O,$){this.z=C,this.x=O,this.y=$,this.key=gc(0,C,C,O,$)};wf.prototype.equals=function(C){return this.z===C.z&&this.x===C.x&&this.y===C.y},wf.prototype.url=function(C,O){var $=b0(this.x,this.y,this.z),he=A0(this.z,this.x,this.y);return C[(this.x+this.y)%C.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(O==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",he).replace("{bbox-epsg-3857}",$)},wf.prototype.getTilePoint=function(C){var O=Math.pow(2,this.z);return new f((C.x*O-this.x)*Na,(C.y*O-this.y)*Na)},wf.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Lv=function(C,O){this.wrap=C,this.canonical=O,this.key=gc(C,O.z,O.z,O.x,O.y)},No=function(C,O,$,he,me){this.overscaledZ=C,this.wrap=O,this.canonical=new wf($,+he,+me),this.key=gc(O,C,$,he,me)};No.prototype.equals=function(C){return this.overscaledZ===C.overscaledZ&&this.wrap===C.wrap&&this.canonical.equals(C.canonical)},No.prototype.scaledTo=function(C){var O=this.canonical.z-C;return C>this.canonical.z?new No(C,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new No(C,this.wrap,C,this.canonical.x>>O,this.canonical.y>>O)},No.prototype.calculateScaledKey=function(C,O){var $=this.canonical.z-C;return C>this.canonical.z?gc(this.wrap*+O,C,this.canonical.z,this.canonical.x,this.canonical.y):gc(this.wrap*+O,C,C,this.canonical.x>>$,this.canonical.y>>$)},No.prototype.isChildOf=function(C){if(C.wrap!==this.wrap)return!1;var O=this.canonical.z-C.canonical.z;return C.overscaledZ===0||C.overscaledZ<this.overscaledZ&&C.canonical.x===this.canonical.x>>O&&C.canonical.y===this.canonical.y>>O},No.prototype.children=function(C){if(this.overscaledZ>=C)return[new No(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var O=this.canonical.z+1,$=this.canonical.x*2,he=this.canonical.y*2;return[new No(O,this.wrap,O,$,he),new No(O,this.wrap,O,$+1,he),new No(O,this.wrap,O,$,he+1),new No(O,this.wrap,O,$+1,he+1)]},No.prototype.isLessThan=function(C){return this.wrap<C.wrap?!0:this.wrap>C.wrap?!1:this.overscaledZ<C.overscaledZ?!0:this.overscaledZ>C.overscaledZ?!1:this.canonical.x<C.canonical.x?!0:this.canonical.x>C.canonical.x?!1:this.canonical.y<C.canonical.y},No.prototype.wrapped=function(){return new No(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},No.prototype.unwrapTo=function(C){return new No(this.overscaledZ,C,this.canonical.z,this.canonical.x,this.canonical.y)},No.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},No.prototype.toUnwrapped=function(){return new Lv(this.wrap,this.canonical)},No.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},No.prototype.getTilePoint=function(C){return this.canonical.getTilePoint(new _f(C.x-this.wrap,C.y))};function gc(E,C,O,$,he){E*=2,E<0&&(E=E*-1-1);var me=1<<O;return(me*me*E+me*he+$).toString(36)+O.toString(36)+C.toString(36)}function A0(E,C,O){for(var $="",he,me=E;me>0;me--)he=1<<me-1,$+=(C&he?1:0)+(O&he?2:0);return $}ze("CanonicalTileID",wf),ze("OverscaledTileID",No,{omit:["posMatrix"]});var Zu=function(C,O,$){if(this.uid=C,O.height!==O.width)throw new RangeError("DEM tiles must be square");if($&&$!=="mapbox"&&$!=="terrarium")return B('"'+$+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=O.height;var he=this.dim=O.height-2;this.data=new Uint32Array(O.data.buffer),this.encoding=$||"mapbox";for(var me=0;me<he;me++)this.data[this._idx(-1,me)]=this.data[this._idx(0,me)],this.data[this._idx(he,me)]=this.data[this._idx(he-1,me)],this.data[this._idx(me,-1)]=this.data[this._idx(me,0)],this.data[this._idx(me,he)]=this.data[this._idx(me,he-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(he,-1)]=this.data[this._idx(he-1,0)],this.data[this._idx(-1,he)]=this.data[this._idx(0,he-1)],this.data[this._idx(he,he)]=this.data[this._idx(he-1,he-1)]};Zu.prototype.get=function(C,O){var $=new Uint8Array(this.data.buffer),he=this._idx(C,O)*4,me=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return me($[he],$[he+1],$[he+2])},Zu.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Zu.prototype._idx=function(C,O){if(C<-1||C>=this.dim+1||O<-1||O>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(O+1)*this.stride+(C+1)},Zu.prototype._unpackMapbox=function(C,O,$){return(C*256*256+O*256+$)/10-1e4},Zu.prototype._unpackTerrarium=function(C,O,$){return C*256+O+$/256-32768},Zu.prototype.getPixels=function(){return new qs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Zu.prototype.backfillBorder=function(C,O,$){if(this.dim!==C.dim)throw new Error("dem dimension mismatch");var he=O*this.dim,me=O*this.dim+this.dim,we=$*this.dim,Ie=$*this.dim+this.dim;switch(O){case-1:he=me-1;break;case 1:me=he+1;break}switch($){case-1:we=Ie-1;break;case 1:Ie=we+1;break}for(var $e=-O*this.dim,ut=-$*this.dim,gt=we;gt<Ie;gt++)for(var Rt=he;Rt<me;Rt++)this.data[this._idx(Rt,gt)]=C.data[this._idx(Rt+$e,gt+ut)]},ze("DEMData",Zu);function M0(E,C){var O={};if(!C)return O;for(var $=function(){var we=me[he],Ie=we.layerIds.map(function(Rt){return C.getLayer(Rt)}).filter(Boolean);if(Ie.length!==0){we.layers=Ie,we.stateDependentLayerIds&&(we.stateDependentLayers=we.stateDependentLayerIds.map(function(Rt){return Ie.filter(function($t){return $t.id===Rt})[0]}));for(var $e=0,ut=Ie;$e<ut.length;$e+=1){var gt=ut[$e];O[gt.id]=we}}},he=0,me=E;he<me.length;he+=1)$();return O}var Vc=function(C){this._stringToNumber={},this._numberToString=[];for(var O=0;O<C.length;O++){var $=C[O];this._stringToNumber[$]=O,this._numberToString[O]=$}};Vc.prototype.encode=function(C){return this._stringToNumber[C]},Vc.prototype.decode=function(C){return this._numberToString[C]};var Hc=function(C,O,$,he,me){this.type="Feature",this._vectorTileFeature=C,C._z=O,C._x=$,C._y=he,this.properties=C.properties,this.id=me},_h={geometry:{configurable:!0}};_h.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},_h.geometry.set=function(E){this._geometry=E},Hc.prototype.toJSON=function(){var C={geometry:this.geometry};for(var O in this)O==="_geometry"||O==="_vectorTileFeature"||(C[O]=this[O]);return C},Object.defineProperties(Hc.prototype,_h);var Zf=function(){this.state={},this.stateChanges={},this.deletedStates={}};Zf.prototype.updateState=function(C,O,$){var he=String(O);if(this.stateChanges[C]=this.stateChanges[C]||{},this.stateChanges[C][he]=this.stateChanges[C][he]||{},w(this.stateChanges[C][he],$),this.deletedStates[C]===null){this.deletedStates[C]={};for(var me in this.state[C])me!==he&&(this.deletedStates[C][me]=null)}else{var we=this.deletedStates[C]&&this.deletedStates[C][he]===null;if(we){this.deletedStates[C][he]={};for(var Ie in this.state[C][he])$[Ie]||(this.deletedStates[C][he][Ie]=null)}else for(var $e in $){var ut=this.deletedStates[C]&&this.deletedStates[C][he]&&this.deletedStates[C][he][$e]===null;ut&&delete this.deletedStates[C][he][$e]}}},Zf.prototype.removeFeatureState=function(C,O,$){var he=this.deletedStates[C]===null;if(!he){var me=String(O);if(this.deletedStates[C]=this.deletedStates[C]||{},$&&O!==void 0)this.deletedStates[C][me]!==null&&(this.deletedStates[C][me]=this.deletedStates[C][me]||{},this.deletedStates[C][me][$]=null);else if(O!==void 0){var we=this.stateChanges[C]&&this.stateChanges[C][me];if(we){this.deletedStates[C][me]={};for($ in this.stateChanges[C][me])this.deletedStates[C][me][$]=null}else this.deletedStates[C][me]=null}else this.deletedStates[C]=null}},Zf.prototype.getState=function(C,O){var $=String(O),he=this.state[C]||{},me=this.stateChanges[C]||{},we=w({},he[$],me[$]);if(this.deletedStates[C]===null)return{};if(this.deletedStates[C]){var Ie=this.deletedStates[C][O];if(Ie===null)return{};for(var $e in Ie)delete we[$e]}return we},Zf.prototype.initializeTileState=function(C,O){C.setFeatureState(this.state,O)},Zf.prototype.coalesceChanges=function(C,O){var $={};for(var he in this.stateChanges){this.state[he]=this.state[he]||{};var me={};for(var we in this.stateChanges[he])this.state[he][we]||(this.state[he][we]={}),w(this.state[he][we],this.stateChanges[he][we]),me[we]=this.state[he][we];$[he]=me}for(var Ie in this.deletedStates){this.state[Ie]=this.state[Ie]||{};var $e={};if(this.deletedStates[Ie]===null)for(var ut in this.state[Ie])$e[ut]={},this.state[Ie][ut]={};else for(var gt in this.deletedStates[Ie]){var Rt=this.deletedStates[Ie][gt]===null;if(Rt)this.state[Ie][gt]={};else for(var $t=0,Wt=Object.keys(this.deletedStates[Ie][gt]);$t<Wt.length;$t+=1){var vr=Wt[$t];delete this.state[Ie][gt][vr]}$e[gt]=this.state[Ie][gt]}$[Ie]=$[Ie]||{},w($[Ie],$e)}if(this.stateChanges={},this.deletedStates={},Object.keys($).length!==0)for(var Dr in C){var sn=C[Dr];sn.setFeatureState($,O)}};var ju=function(C,O){this.tileID=C,this.x=C.canonical.x,this.y=C.canonical.y,this.z=C.canonical.z,this.grid=new Lo(Na,16,0),this.grid3D=new Lo(Na,16,0),this.featureIndexArray=new tc,this.promoteId=O};ju.prototype.insert=function(C,O,$,he,me,we){var Ie=this.featureIndexArray.length;this.featureIndexArray.emplaceBack($,he,me);for(var $e=we?this.grid3D:this.grid,ut=0;ut<O.length;ut++){for(var gt=O[ut],Rt=[1/0,1/0,-1/0,-1/0],$t=0;$t<gt.length;$t++){var Wt=gt[$t];Rt[0]=Math.min(Rt[0],Wt.x),Rt[1]=Math.min(Rt[1],Wt.y),Rt[2]=Math.max(Rt[2],Wt.x),Rt[3]=Math.max(Rt[3],Wt.y)}Rt[0]<Na&&Rt[1]<Na&&Rt[2]>=0&&Rt[3]>=0&&$e.insert(Ie,Rt[0],Rt[1],Rt[2],Rt[3])}},ju.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new zf.VectorTile(new Pc(this.rawTileData)).layers,this.sourceLayerCoder=new Vc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ju.prototype.query=function(C,O,$,he){var me=this;this.loadVTLayers();for(var we=C.params||{},Ie=Na/C.tileSize/C.scale,$e=Iu(we.filter),ut=C.queryGeometry,gt=C.queryPadding*Ie,Rt=Dv(ut),$t=this.grid.query(Rt.minX-gt,Rt.minY-gt,Rt.maxX+gt,Rt.maxY+gt),Wt=Dv(C.cameraQueryGeometry),vr=this.grid3D.query(Wt.minX-gt,Wt.minY-gt,Wt.maxX+gt,Wt.maxY+gt,function(Vn,sa,na,Ia){return Uu(C.cameraQueryGeometry,Vn-gt,sa-gt,na+gt,Ia+gt)}),Dr=0,sn=vr;Dr<sn.length;Dr+=1){var Qr=sn[Dr];$t.push(Qr)}$t.sort(S0);for(var Mn={},yn,Tn=function(Vn){var sa=$t[Vn];if(sa!==yn){yn=sa;var na=me.featureIndexArray.get(sa),Ia=null;me.loadMatchingFeature(Mn,na.bucketIndex,na.sourceLayerIndex,na.featureIndex,$e,we.layers,we.availableImages,O,$,he,function(_a,Sa,ei){return Ia||(Ia=Ni(_a)),Sa.queryIntersectsFeature(ut,_a,ei,Ia,me.z,C.transform,Ie,C.pixelPosMatrix)})}},Rn=0;Rn<$t.length;Rn++)Tn(Rn);return Mn},ju.prototype.loadMatchingFeature=function(C,O,$,he,me,we,Ie,$e,ut,gt,Rt){var $t=this.bucketLayerIDs[O];if(!(we&&!D(we,$t))){var Wt=this.sourceLayerCoder.decode($),vr=this.vtLayers[Wt],Dr=vr.feature(he);if(!!me.filter(new ui(this.tileID.overscaledZ),Dr))for(var sn=this.getId(Dr,Wt),Qr=0;Qr<$t.length;Qr++){var Mn=$t[Qr];if(!(we&&we.indexOf(Mn)<0)){var yn=$e[Mn];if(!!yn){var Tn={};sn!==void 0&&gt&&(Tn=gt.getState(yn.sourceLayer||"_geojsonTileLayer",sn));var Rn=ut[Mn];Rn.paint=Pv(Rn.paint,yn.paint,Dr,Tn,Ie),Rn.layout=Pv(Rn.layout,yn.layout,Dr,Tn,Ie);var Vn=!Rt||Rt(Dr,yn,Tn);if(!!Vn){var sa=new Hc(Dr,this.z,this.x,this.y,sn);sa.layer=Rn;var na=C[Mn];na===void 0&&(na=C[Mn]=[]),na.push({featureIndex:he,feature:sa,intersectionZ:Vn})}}}}}},ju.prototype.lookupSymbolFeatures=function(C,O,$,he,me,we,Ie,$e){var ut={};this.loadVTLayers();for(var gt=Iu(me),Rt=0,$t=C;Rt<$t.length;Rt+=1){var Wt=$t[Rt];this.loadMatchingFeature(ut,$,he,Wt,gt,we,Ie,$e,O)}return ut},ju.prototype.hasLayer=function(C){for(var O=0,$=this.bucketLayerIDs;O<$.length;O+=1)for(var he=$[O],me=0,we=he;me<we.length;me+=1){var Ie=we[me];if(C===Ie)return!0}return!1},ju.prototype.getId=function(C,O){var $=C.id;if(this.promoteId){var he=typeof this.promoteId=="string"?this.promoteId:this.promoteId[O];$=C.properties[he],typeof $=="boolean"&&($=Number($))}return $},ze("FeatureIndex",ju,{omit:["rawTileData","sourceLayerCoder"]});function Pv(E,C,O,$,he){return P(E,function(me,we){var Ie=C instanceof Oi?C.get(we):null;return Ie&&Ie.evaluate?Ie.evaluate(O,$,he):Ie})}function Dv(E){for(var C=1/0,O=1/0,$=-1/0,he=-1/0,me=0,we=E;me<we.length;me+=1){var Ie=we[me];C=Math.min(C,Ie.x),O=Math.min(O,Ie.y),$=Math.max($,Ie.x),he=Math.max(he,Ie.y)}return{minX:C,minY:O,maxX:$,maxY:he}}function S0(E,C){return C-E}var k0=3e4,Qo=function(C,O){this.tileID=C,this.uid=m(),this.uses=0,this.tileSize=O,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Qo.prototype.registerFadeDuration=function(C){var O=C+this.timeAdded;O<X.now()||this.fadeEndTime&&O<this.fadeEndTime||(this.fadeEndTime=O)},Qo.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Qo.prototype.loadVectorData=function(C,O,$){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!C){this.collisionBoxArray=new Nu;return}C.featureIndex&&(this.latestFeatureIndex=C.featureIndex,C.rawTileData?(this.latestRawTileData=C.rawTileData,this.latestFeatureIndex.rawTileData=C.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=C.collisionBoxArray,this.buckets=M0(C.buckets,O.style),this.hasSymbolBuckets=!1;for(var he in this.buckets){var me=this.buckets[he];if(me instanceof Yi)if(this.hasSymbolBuckets=!0,$)me.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var we in this.buckets){var Ie=this.buckets[we];if(Ie instanceof Yi&&Ie.hasRTLText){this.hasRTLText=!0,Si();break}}this.queryPadding=0;for(var $e in this.buckets){var ut=this.buckets[$e];this.queryPadding=Math.max(this.queryPadding,O.style.getLayer($e).queryRadius(ut))}C.imageAtlas&&(this.imageAtlas=C.imageAtlas),C.glyphAtlasImage&&(this.glyphAtlasImage=C.glyphAtlasImage)},Qo.prototype.unloadVectorData=function(){for(var C in this.buckets)this.buckets[C].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Qo.prototype.getBucket=function(C){return this.buckets[C.id]},Qo.prototype.upload=function(C){for(var O in this.buckets){var $=this.buckets[O];$.uploadPending()&&$.upload(C)}var he=C.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new bf(C,this.imageAtlas.image,he.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new bf(C,this.glyphAtlasImage,he.ALPHA),this.glyphAtlasImage=null)},Qo.prototype.prepare=function(C){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(C,this.imageAtlasTexture)},Qo.prototype.queryRenderedFeatures=function(C,O,$,he,me,we,Ie,$e,ut,gt){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:he,cameraQueryGeometry:me,scale:we,tileSize:this.tileSize,pixelPosMatrix:gt,transform:$e,params:Ie,queryPadding:this.queryPadding*ut},C,O,$)},Qo.prototype.querySourceFeatures=function(C,O){var $=this.latestFeatureIndex;if(!(!$||!$.rawTileData)){var he=$.loadVTLayers(),me=O?O.sourceLayer:"",we=he._geojsonTileLayer||he[me];if(!!we)for(var Ie=Iu(O&&O.filter),$e=this.tileID.canonical,ut=$e.z,gt=$e.x,Rt=$e.y,$t={z:ut,x:gt,y:Rt},Wt=0;Wt<we.length;Wt++){var vr=we.feature(Wt);if(Ie.filter(new ui(this.tileID.overscaledZ),vr)){var Dr=$.getId(vr,me),sn=new Hc(vr,ut,gt,Rt,Dr);sn.tile=$t,C.push(sn)}}}},Qo.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Qo.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Qo.prototype.setExpiryData=function(C){var O=this.expirationTime;if(C.cacheControl){var $=J(C.cacheControl);$["max-age"]&&(this.expirationTime=Date.now()+$["max-age"]*1e3)}else C.expires&&(this.expirationTime=new Date(C.expires).getTime());if(this.expirationTime){var he=Date.now(),me=!1;if(this.expirationTime>he)me=!1;else if(!O)me=!0;else if(this.expirationTime<O)me=!0;else{var we=this.expirationTime-O;we?this.expirationTime=he+Math.max(we,k0):me=!0}me?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Qo.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Qo.prototype.setFeatureState=function(C,O){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(C).length===0)){var $=this.latestFeatureIndex.loadVTLayers();for(var he in this.buckets)if(!!O.style.hasLayer(he)){var me=this.buckets[he],we=me.layers[0].sourceLayer||"_geojsonTileLayer",Ie=$[we],$e=C[we];if(!(!Ie||!$e||Object.keys($e).length===0)){me.update($e,Ie,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ut=O&&O.style&&O.style.getLayer(he);ut&&(this.queryPadding=Math.max(this.queryPadding,ut.queryRadius(me)))}}}},Qo.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Qo.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<X.now()},Qo.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Qo.prototype.setHoldDuration=function(C){this.symbolFadeHoldUntil=X.now()+C},Qo.prototype.setDependencies=function(C,O){for(var $={},he=0,me=O;he<me.length;he+=1){var we=me[he];$[we]=!0}this.dependencies[C]=$},Qo.prototype.hasDependency=function(C,O){for(var $=0,he=C;$<he.length;$+=1){var me=he[$],we=this.dependencies[me];if(we)for(var Ie=0,$e=O;Ie<$e.length;Ie+=1){var ut=$e[Ie];if(we[ut])return!0}}return!1};var E0=["type","source","source-layer","minzoom","maxzoom","filter","layout"],sf=self.performance,Rv=function(C){this._marks={start:[C.url,"start"].join("#"),end:[C.url,"end"].join("#"),measure:C.url.toString()},sf.mark(this._marks.start)};Rv.prototype.finish=function(){sf.mark(this._marks.end);var C=sf.getEntriesByName(this._marks.measure);return C.length===0&&(sf.measure(this._marks.measure,this._marks.start,this._marks.end),C=sf.getEntriesByName(this._marks.measure),sf.clearMarks(this._marks.start),sf.clearMarks(this._marks.end),sf.clearMeasures(this._marks.measure)),C},e.Actor=Xf,e.AlphaImage=xf,e.CanonicalTileID=wf,e.CollisionBoxArray=Nu,e.Color=vi,e.DEMData=Zu,e.DataConstantProperty=za,e.DictionaryCoder=Vc,e.EXTENT=Na,e.ErrorEvent=Pr,e.EvaluationParameters=ui,e.Event=Yr,e.Evented=wr,e.FeatureIndex=ju,e.FillBucket=bu,e.FillExtrusionBucket=_u,e.ImageAtlas=hc,e.ImagePosition=Rc,e.LineBucket=el,e.LngLat=ho,e.LngLatBounds=Oo,e.MercatorCoordinate=_f,e.ONE_EM=cs,e.OverscaledTileID=No,e.Point=f,e.Point$1=f,e.Properties=Xi,e.Protobuf=Pc,e.RGBAImage=qs,e.RequestManager=De,e.RequestPerformance=Rv,e.ResourceType=nt,e.SegmentVector=H,e.SourceFeatureState=Zf,e.StructArrayLayout1ui2=ef,e.StructArrayLayout2f1f2i16=yu,e.StructArrayLayout2i4=hf,e.StructArrayLayout3ui6=mu,e.StructArrayLayout4i8=zu,e.SymbolBucket=Yi,e.Texture=bf,e.Tile=Qo,e.Transitionable=go,e.Uniform1f=zr,e.Uniform1i=Or,e.Uniform2f=jr,e.Uniform3f=cn,e.Uniform4f=En,e.UniformColor=Fn,e.UniformMatrix4f=qn,e.UnwrappedTileID=Lv,e.ValidationError=cr,e.WritingMode=Sl,e.ZoomHistory=Zt,e.add=Df,e.addDynamicAttributes=yh,e.asyncAll=l,e.bezier=d,e.bindAll=S,e.browser=X,e.cacheEntryPossiblyAdded=rr,e.clamp=v,e.clearTileCache=pr,e.clipLine=vv,e.clone=Ac,e.clone$1=I,e.clone$2=Jc,e.collisionCircleLayout=ld,e.config=te,e.create=Cf,e.create$1=yf,e.create$2=gf,e.createCommonjsModule=a,e.createExpression=Fl,e.createLayout=Do,e.createStyleLayer=x0,e.cross=Ov,e.deepEqual=i,e.dot=Bv,e.dot$1=Gv,e.ease=y,e.emitValidationErrors=po,e.endsWith=k,e.enforceCacheSizeLimit=er,e.evaluateSizeForFeature=ov,e.evaluateSizeForZoom=sv,e.evaluateVariableOffset=gv,e.evented=yi,e.extend=w,e.featureFilter=Iu,e.filterObject=z,e.fromRotation=Ef,e.getAnchorAlignment=vh,e.getAnchorJustification=gh,e.getArrayBuffer=ft,e.getImage=St,e.getJSON=st,e.getRTLTextPluginStatus=co,e.getReferrer=Kt,e.getVideo=Nt,e.identity=Lf,e.invert=rf,e.isChar=Qt,e.isMapboxURL=Oe,e.keysDifference=s,e.makeRequest=je,e.mapObject=P,e.mercatorXfromLng=kv,e.mercatorYfromLat=Ev,e.mercatorZfromAltitude=Cv,e.mul=Kc,e.multiply=nf,e.mvt=zf,e.normalize=nc,e.number=so,e.offscreenCanvasSupported=$r,e.ortho=jc,e.parseGlyphPBF=zd,e.pbf=Pc,e.performSymbolLayout=qd,e.perspective=rc,e.pick=b,e.plugin=Wa,e.polygonIntersectsPolygon=ii,e.postMapLoadEvent=Mt,e.postTurnstileEvent=Ut,e.potpack=$h,e.refProperties=E0,e.register=ze,e.registerForPluginStateChange=Ii,e.rotate=ks,e.rotateX=$s,e.rotateZ=Pf,e.scale=Qs,e.scale$1=Hv,e.scale$2=$c,e.setCacheLimits=Xr,e.setRTLTextPlugin=fa,e.sphericalToCartesian=Y,e.sqrLen=Xv,e.styleSpec=Ft,e.sub=Uv,e.symbolSize=Yd,e.transformMat3=Nv,e.transformMat4=Mc,e.translate=Eo,e.triggerPluginCompletionEvent=Pa,e.uniqueId=m,e.validateCustomStyleLayer=g0,e.validateLight=bi,e.validateStyle=bo,e.values=_,e.vectorTile=zf,e.version=n,e.warnOnce=B,e.webpSupported=ee,e.window=self,e.wrap=x}),A(["./shared"],function(e){function a(tt){var je=typeof tt;if(je==="number"||je==="boolean"||je==="string"||tt===void 0||tt===null)return JSON.stringify(tt);if(Array.isArray(tt)){for(var st="[",ft=0,Me=tt;ft<Me.length;ft+=1){var Se=Me[ft];st+=a(Se)+","}return st+"]"}for(var Ke=Object.keys(tt).sort(),Xe="{",ot=0;ot<Ke.length;ot++)Xe+=JSON.stringify(Ke[ot])+":"+a(tt[Ke[ot]])+",";return Xe+"}"}function n(tt){for(var je="",st=0,ft=e.refProperties;st<ft.length;st+=1){var Me=ft[st];je+="/"+a(tt[Me])}return je}function t(tt,je){for(var st={},ft=0;ft<tt.length;ft++){var Me=je&&je[tt[ft].id]||n(tt[ft]);je&&(je[tt[ft].id]=Me);var Se=st[Me];Se||(Se=st[Me]=[]),Se.push(tt[ft])}var Ke=[];for(var Xe in st)Ke.push(st[Xe]);return Ke}var r=function(je){this.keyCache={},je&&this.replace(je)};r.prototype.replace=function(je){this._layerConfigs={},this._layers={},this.update(je,[])},r.prototype.update=function(je,st){for(var ft=this,Me=0,Se=je;Me<Se.length;Me+=1){var Ke=Se[Me];this._layerConfigs[Ke.id]=Ke;var Xe=this._layers[Ke.id]=e.createStyleLayer(Ke);Xe._featureFilter=e.featureFilter(Xe.filter),this.keyCache[Ke.id]&&delete this.keyCache[Ke.id]}for(var ot=0,pt=st;ot<pt.length;ot+=1){var vt=pt[ot];delete this.keyCache[vt],delete this._layerConfigs[vt],delete this._layers[vt]}this.familiesBySource={};for(var Ct=t(e.values(this._layerConfigs),this.keyCache),St=0,Nt=Ct;St<Nt.length;St+=1){var ir=Nt[St],lr=ir.map(function(mr){return ft._layers[mr.id]}),Yr=lr[0];if(Yr.visibility!=="none"){var Pr=Yr.source||"",wr=this.familiesBySource[Pr];wr||(wr=this.familiesBySource[Pr]={});var Jr=Yr.sourceLayer||"_geojsonTileLayer",gr=wr[Jr];gr||(gr=wr[Jr]=[]),gr.push(lr)}}};var f=1,o=function(je){var st={},ft=[];for(var Me in je){var Se=je[Me],Ke=st[Me]={};for(var Xe in Se){var ot=Se[+Xe];if(!(!ot||ot.bitmap.width===0||ot.bitmap.height===0)){var pt={x:0,y:0,w:ot.bitmap.width+2*f,h:ot.bitmap.height+2*f};ft.push(pt),Ke[Xe]={rect:pt,metrics:ot.metrics}}}}var vt=e.potpack(ft),Ct=vt.w,St=vt.h,Nt=new e.AlphaImage({width:Ct||1,height:St||1});for(var ir in je){var lr=je[ir];for(var Yr in lr){var Pr=lr[+Yr];if(!(!Pr||Pr.bitmap.width===0||Pr.bitmap.height===0)){var wr=st[ir][Yr].rect;e.AlphaImage.copy(Pr.bitmap,Nt,{x:0,y:0},{x:wr.x+f,y:wr.y+f},Pr.bitmap)}}}this.image=Nt,this.positions=st};e.register("GlyphAtlas",o);var i=function(je){this.tileID=new e.OverscaledTileID(je.tileID.overscaledZ,je.tileID.wrap,je.tileID.canonical.z,je.tileID.canonical.x,je.tileID.canonical.y),this.uid=je.uid,this.zoom=je.zoom,this.pixelRatio=je.pixelRatio,this.tileSize=je.tileSize,this.source=je.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=je.showCollisionBoxes,this.collectResourceTiming=!!je.collectResourceTiming,this.returnDependencies=!!je.returnDependencies,this.promoteId=je.promoteId};i.prototype.parse=function(je,st,ft,Me,Se){var Ke=this;this.status="parsing",this.data=je,this.collisionBoxArray=new e.CollisionBoxArray;var Xe=new e.DictionaryCoder(Object.keys(je.layers).sort()),ot=new e.FeatureIndex(this.tileID,this.promoteId);ot.bucketLayerIDs=[];var pt={},vt={featureIndex:ot,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ft},Ct=st.familiesBySource[this.source];for(var St in Ct){var Nt=je.layers[St];if(!!Nt){Nt.version===1&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+St+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var ir=Xe.encode(St),lr=[],Yr=0;Yr<Nt.length;Yr++){var Pr=Nt.feature(Yr),wr=ot.getId(Pr,St);lr.push({feature:Pr,id:wr,index:Yr,sourceLayerIndex:ir})}for(var Jr=0,gr=Ct[St];Jr<gr.length;Jr+=1){var mr=gr[Jr],Ur=mr[0];if(!(Ur.minzoom&&this.zoom<Math.floor(Ur.minzoom))&&!(Ur.maxzoom&&this.zoom>=Ur.maxzoom)&&Ur.visibility!=="none"){p(mr,this.zoom,ft);var Hr=pt[Ur.id]=Ur.createBucket({index:ot.bucketLayerIDs.length,layers:mr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ir,sourceID:this.source});Hr.populate(lr,vt,this.tileID.canonical),ot.bucketLayerIDs.push(mr.map(function(br){return br.id}))}}}}var Tr,et,Lt,jt,sr=e.mapObject(vt.glyphDependencies,function(br){return Object.keys(br).map(Number)});Object.keys(sr).length?Me.send("getGlyphs",{uid:this.uid,stacks:sr},function(br,Nr){Tr||(Tr=br,et=Nr,Lr.call(Ke))}):et={};var Ir=Object.keys(vt.iconDependencies);Ir.length?Me.send("getImages",{icons:Ir,source:this.source,tileID:this.tileID,type:"icons"},function(br,Nr){Tr||(Tr=br,Lt=Nr,Lr.call(Ke))}):Lt={};var Zr=Object.keys(vt.patternDependencies);Zr.length?Me.send("getImages",{icons:Zr,source:this.source,tileID:this.tileID,type:"patterns"},function(br,Nr){Tr||(Tr=br,jt=Nr,Lr.call(Ke))}):jt={},Lr.call(this);function Lr(){if(Tr)return Se(Tr);if(et&&Lt&&jt){var br=new o(et),Nr=new e.ImageAtlas(Lt,jt);for(var kn in pt){var _n=pt[kn];_n instanceof e.SymbolBucket?(p(_n.layers,this.zoom,ft),e.performSymbolLayout(_n,et,br.positions,Lt,Nr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):_n.hasPattern&&(_n instanceof e.LineBucket||_n instanceof e.FillBucket||_n instanceof e.FillExtrusionBucket)&&(p(_n.layers,this.zoom,ft),_n.addFeatures(vt,this.tileID.canonical,Nr.patternPositions))}this.status="done",Se(null,{buckets:e.values(pt).filter(function(Wn){return!Wn.isEmpty()}),featureIndex:ot,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:br.image,imageAtlas:Nr,glyphMap:this.returnDependencies?et:null,iconMap:this.returnDependencies?Lt:null,glyphPositions:this.returnDependencies?br.positions:null})}}};function p(tt,je,st){for(var ft=new e.EvaluationParameters(je),Me=0,Se=tt;Me<Se.length;Me+=1){var Ke=Se[Me];Ke.recalculate(ft,st)}}function d(tt,je){var st=e.getArrayBuffer(tt.request,function(ft,Me,Se,Ke){ft?je(ft):Me&&je(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Me)),rawData:Me,cacheControl:Se,expires:Ke})});return function(){st.cancel(),je()}}var y=function(je,st,ft,Me){this.actor=je,this.layerIndex=st,this.availableImages=ft,this.loadVectorData=Me||d,this.loading={},this.loaded={}};y.prototype.loadTile=function(je,st){var ft=this,Me=je.uid;this.loading||(this.loading={});var Se=je&&je.request&&je.request.collectResourceTiming?new e.RequestPerformance(je.request):!1,Ke=this.loading[Me]=new i(je);Ke.abort=this.loadVectorData(je,function(Xe,ot){if(delete ft.loading[Me],Xe||!ot)return Ke.status="done",ft.loaded[Me]=Ke,st(Xe);var pt=ot.rawData,vt={};ot.expires&&(vt.expires=ot.expires),ot.cacheControl&&(vt.cacheControl=ot.cacheControl);var Ct={};if(Se){var St=Se.finish();St&&(Ct.resourceTiming=JSON.parse(JSON.stringify(St)))}Ke.vectorTile=ot.vectorTile,Ke.parse(ot.vectorTile,ft.layerIndex,ft.availableImages,ft.actor,function(Nt,ir){if(Nt||!ir)return st(Nt);st(null,e.extend({rawTileData:pt.slice(0)},ir,vt,Ct))}),ft.loaded=ft.loaded||{},ft.loaded[Me]=Ke})},y.prototype.reloadTile=function(je,st){var ft=this,Me=this.loaded,Se=je.uid,Ke=this;if(Me&&Me[Se]){var Xe=Me[Se];Xe.showCollisionBoxes=je.showCollisionBoxes;var ot=function(pt,vt){var Ct=Xe.reloadCallback;Ct&&(delete Xe.reloadCallback,Xe.parse(Xe.vectorTile,Ke.layerIndex,ft.availableImages,Ke.actor,Ct)),st(pt,vt)};Xe.status==="parsing"?Xe.reloadCallback=ot:Xe.status==="done"&&(Xe.vectorTile?Xe.parse(Xe.vectorTile,this.layerIndex,this.availableImages,this.actor,ot):ot())}},y.prototype.abortTile=function(je,st){var ft=this.loading,Me=je.uid;ft&&ft[Me]&&ft[Me].abort&&(ft[Me].abort(),delete ft[Me]),st()},y.prototype.removeTile=function(je,st){var ft=this.loaded,Me=je.uid;ft&&ft[Me]&&delete ft[Me],st()};var v=e.window.ImageBitmap,x=function(){this.loaded={}};x.prototype.loadTile=function(je,st){var ft=je.uid,Me=je.encoding,Se=je.rawImageData,Ke=v&&Se instanceof v?this.getImageData(Se):Se,Xe=new e.DEMData(ft,Ke,Me);this.loaded=this.loaded||{},this.loaded[ft]=Xe,st(null,Xe)},x.prototype.getImageData=function(je){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(je.width,je.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=je.width,this.offscreenCanvas.height=je.height,this.offscreenCanvasContext.drawImage(je,0,0,je.width,je.height);var st=this.offscreenCanvasContext.getImageData(-1,-1,je.width+2,je.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:st.width,height:st.height},st.data)},x.prototype.removeTile=function(je){var st=this.loaded,ft=je.uid;st&&st[ft]&&delete st[ft]};var l=_;function _(tt,je){var st=tt&&tt.type,ft;if(st==="FeatureCollection")for(ft=0;ft<tt.features.length;ft++)_(tt.features[ft],je);else if(st==="GeometryCollection")for(ft=0;ft<tt.geometries.length;ft++)_(tt.geometries[ft],je);else if(st==="Feature")_(tt.geometry,je);else if(st==="Polygon")s(tt.coordinates,je);else if(st==="MultiPolygon")for(ft=0;ft<tt.coordinates.length;ft++)s(tt.coordinates[ft],je);return tt}function s(tt,je){if(tt.length!==0){w(tt[0],je);for(var st=1;st<tt.length;st++)w(tt[st],!je)}}function w(tt,je){for(var st=0,ft=0,Me=tt.length,Se=Me-1;ft<Me;Se=ft++)st+=(tt[ft][0]-tt[Se][0])*(tt[Se][1]+tt[ft][1]);st>=0!=!!je&&tt.reverse()}var b=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,h=function(je){this._feature=je,this.extent=e.EXTENT,this.type=je.type,this.properties=je.tags,"id"in je&&!isNaN(je.id)&&(this.id=parseInt(je.id,10))};h.prototype.loadGeometry=function(){if(this._feature.type===1){for(var je=[],st=0,ft=this._feature.geometry;st<ft.length;st+=1){var Me=ft[st];je.push([new e.Point$1(Me[0],Me[1])])}return je}else{for(var Se=[],Ke=0,Xe=this._feature.geometry;Ke<Xe.length;Ke+=1){for(var ot=Xe[Ke],pt=[],vt=0,Ct=ot;vt<Ct.length;vt+=1){var St=Ct[vt];pt.push(new e.Point$1(St[0],St[1]))}Se.push(pt)}return Se}},h.prototype.toGeoJSON=function(je,st,ft){return b.call(this,je,st,ft)};var m=function(je){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=je.length,this._features=je};m.prototype.feature=function(je){return new h(this._features[je])};var u=e.vectorTile.VectorTileFeature,L=S;function S(tt,je){this.options=je||{},this.features=tt,this.length=tt.length}S.prototype.feature=function(tt){return new k(this.features[tt],this.options.extent)};function k(tt,je){this.id=typeof tt.id=="number"?tt.id:void 0,this.type=tt.type,this.rawGeometry=tt.type===1?[tt.geometry]:tt.geometry,this.properties=tt.tags,this.extent=je||4096}k.prototype.loadGeometry=function(){var tt=this.rawGeometry;this.geometry=[];for(var je=0;je<tt.length;je++){for(var st=tt[je],ft=[],Me=0;Me<st.length;Me++)ft.push(new e.Point$1(st[Me][0],st[Me][1]));this.geometry.push(ft)}return this.geometry},k.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var tt=this.geometry,je=1/0,st=-1/0,ft=1/0,Me=-1/0,Se=0;Se<tt.length;Se++)for(var Ke=tt[Se],Xe=0;Xe<Ke.length;Xe++){var ot=Ke[Xe];je=Math.min(je,ot.x),st=Math.max(st,ot.x),ft=Math.min(ft,ot.y),Me=Math.max(Me,ot.y)}return[je,ft,st,Me]},k.prototype.toGeoJSON=u.prototype.toGeoJSON;var P=R,z=R,I=B,D=L;function R(tt){var je=new e.pbf;return F(tt,je),je.finish()}function B(tt,je){je=je||{};var st={};for(var ft in tt)st[ft]=new L(tt[ft].features,je),st[ft].name=ft,st[ft].version=je.version,st[ft].extent=je.extent;return R({layers:st})}function F(tt,je){for(var st in tt.layers)je.writeMessage(3,V,tt.layers[st])}function V(tt,je){je.writeVarintField(15,tt.version||1),je.writeStringField(1,tt.name||""),je.writeVarintField(5,tt.extent||4096);var st,ft={keys:[],values:[],keycache:{},valuecache:{}};for(st=0;st<tt.length;st++)ft.feature=tt.feature(st),je.writeMessage(2,Y,ft);var Me=ft.keys;for(st=0;st<Me.length;st++)je.writeStringField(3,Me[st]);var Se=ft.values;for(st=0;st<Se.length;st++)je.writeMessage(4,re,Se[st])}function Y(tt,je){var st=tt.feature;st.id!==void 0&&je.writeVarintField(1,st.id),je.writeMessage(2,K,tt),je.writeVarintField(3,st.type),je.writeMessage(4,Z,st)}function K(tt,je){var st=tt.feature,ft=tt.keys,Me=tt.values,Se=tt.keycache,Ke=tt.valuecache;for(var Xe in st.properties){var ot=Se[Xe];typeof ot=="undefined"&&(ft.push(Xe),ot=ft.length-1,Se[Xe]=ot),je.writeVarint(ot);var pt=st.properties[Xe],vt=typeof pt;vt!=="string"&&vt!=="boolean"&&vt!=="number"&&(pt=JSON.stringify(pt));var Ct=vt+":"+pt,St=Ke[Ct];typeof St=="undefined"&&(Me.push(pt),St=Me.length-1,Ke[Ct]=St),je.writeVarint(St)}}function J(tt,je){return(je<<3)+(tt&7)}function G(tt){return tt<<1^tt>>31}function Z(tt,je){for(var st=tt.loadGeometry(),ft=tt.type,Me=0,Se=0,Ke=st.length,Xe=0;Xe<Ke;Xe++){var ot=st[Xe],pt=1;ft===1&&(pt=ot.length),je.writeVarint(J(1,pt));for(var vt=ft===3?ot.length-1:ot.length,Ct=0;Ct<vt;Ct++){Ct===1&&ft!==1&&je.writeVarint(J(2,vt-1));var St=ot[Ct].x-Me,Nt=ot[Ct].y-Se;je.writeVarint(G(St)),je.writeVarint(G(Nt)),Me+=St,Se+=Nt}ft===3&&je.writeVarint(J(7,1))}}function re(tt,je){var st=typeof tt;st==="string"?je.writeStringField(1,tt):st==="boolean"?je.writeBooleanField(7,tt):st==="number"&&(tt%1!=0?je.writeDoubleField(3,tt):tt<0?je.writeSVarintField(6,tt):je.writeVarintField(5,tt))}P.fromVectorTileJs=z,P.fromGeojsonVt=I,P.GeoJSONWrapper=D;function se(tt,je,st,ft,Me,Se){if(!(Me-ft<=st)){var Ke=ft+Me>>1;oe(tt,je,Ke,ft,Me,Se%2),se(tt,je,st,ft,Ke-1,Se+1),se(tt,je,st,Ke+1,Me,Se+1)}}function oe(tt,je,st,ft,Me,Se){for(;Me>ft;){if(Me-ft>600){var Ke=Me-ft+1,Xe=st-ft+1,ot=Math.log(Ke),pt=.5*Math.exp(2*ot/3),vt=.5*Math.sqrt(ot*pt*(Ke-pt)/Ke)*(Xe-Ke/2<0?-1:1),Ct=Math.max(ft,Math.floor(st-Xe*pt/Ke+vt)),St=Math.min(Me,Math.floor(st+(Ke-Xe)*pt/Ke+vt));oe(tt,je,st,Ct,St,Se)}var Nt=je[2*st+Se],ir=ft,lr=Me;for(N(tt,je,ft,st),je[2*Me+Se]>Nt&&N(tt,je,ft,Me);ir<lr;){for(N(tt,je,ir,lr),ir++,lr--;je[2*ir+Se]<Nt;)ir++;for(;je[2*lr+Se]>Nt;)lr--}je[2*ft+Se]===Nt?N(tt,je,ft,lr):(lr++,N(tt,je,lr,Me)),lr<=st&&(ft=lr+1),st<=lr&&(Me=lr-1)}}function N(tt,je,st,ft){U(tt,st,ft),U(je,2*st,2*ft),U(je,2*st+1,2*ft+1)}function U(tt,je,st){var ft=tt[je];tt[je]=tt[st],tt[st]=ft}function q(tt,je,st,ft,Me,Se,Ke){for(var Xe=[0,tt.length-1,0],ot=[],pt,vt;Xe.length;){var Ct=Xe.pop(),St=Xe.pop(),Nt=Xe.pop();if(St-Nt<=Ke){for(var ir=Nt;ir<=St;ir++)pt=je[2*ir],vt=je[2*ir+1],pt>=st&&pt<=Me&&vt>=ft&&vt<=Se&&ot.push(tt[ir]);continue}var lr=Math.floor((Nt+St)/2);pt=je[2*lr],vt=je[2*lr+1],pt>=st&&pt<=Me&&vt>=ft&&vt<=Se&&ot.push(tt[lr]);var Yr=(Ct+1)%2;(Ct===0?st<=pt:ft<=vt)&&(Xe.push(Nt),Xe.push(lr-1),Xe.push(Yr)),(Ct===0?Me>=pt:Se>=vt)&&(Xe.push(lr+1),Xe.push(St),Xe.push(Yr))}return ot}function Q(tt,je,st,ft,Me,Se){for(var Ke=[0,tt.length-1,0],Xe=[],ot=Me*Me;Ke.length;){var pt=Ke.pop(),vt=Ke.pop(),Ct=Ke.pop();if(vt-Ct<=Se){for(var St=Ct;St<=vt;St++)W(je[2*St],je[2*St+1],st,ft)<=ot&&Xe.push(tt[St]);continue}var Nt=Math.floor((Ct+vt)/2),ir=je[2*Nt],lr=je[2*Nt+1];W(ir,lr,st,ft)<=ot&&Xe.push(tt[Nt]);var Yr=(pt+1)%2;(pt===0?st-Me<=ir:ft-Me<=lr)&&(Ke.push(Ct),Ke.push(Nt-1),Ke.push(Yr)),(pt===0?st+Me>=ir:ft+Me>=lr)&&(Ke.push(Nt+1),Ke.push(vt),Ke.push(Yr))}return Xe}function W(tt,je,st,ft){var Me=tt-st,Se=je-ft;return Me*Me+Se*Se}var X=function(tt){return tt[0]},te=function(tt){return tt[1]},ee=function(je,st,ft,Me,Se){st===void 0&&(st=X),ft===void 0&&(ft=te),Me===void 0&&(Me=64),Se===void 0&&(Se=Float64Array),this.nodeSize=Me,this.points=je;for(var Ke=je.length<65536?Uint16Array:Uint32Array,Xe=this.ids=new Ke(je.length),ot=this.coords=new Se(je.length*2),pt=0;pt<je.length;pt++)Xe[pt]=pt,ot[2*pt]=st(je[pt]),ot[2*pt+1]=ft(je[pt]);se(Xe,ot,Me,0,Xe.length-1,0)};ee.prototype.range=function(je,st,ft,Me){return q(this.ids,this.coords,je,st,ft,Me,this.nodeSize)},ee.prototype.within=function(je,st,ft){return Q(this.ids,this.coords,je,st,ft,this.nodeSize)};var ie={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(tt){return tt}},le=function(je){this.options=Ue(Object.create(ie),je),this.trees=new Array(this.options.maxZoom+1)};le.prototype.load=function(je){var st=this.options,ft=st.log,Me=st.minZoom,Se=st.maxZoom,Ke=st.nodeSize;ft&&console.time("total time");var Xe="prepare "+je.length+" points";ft&&console.time(Xe),this.points=je;for(var ot=[],pt=0;pt<je.length;pt++)!je[pt].geometry||ot.push(ue(je[pt],pt));this.trees[Se+1]=new ee(ot,xe,Pe,Ke,Float32Array),ft&&console.timeEnd(Xe);for(var vt=Se;vt>=Me;vt--){var Ct=+Date.now();ot=this._cluster(ot,vt),this.trees[vt]=new ee(ot,xe,Pe,Ke,Float32Array),ft&&console.log("z%d: %d clusters in %dms",vt,ot.length,+Date.now()-Ct)}return ft&&console.timeEnd("total time"),this},le.prototype.getClusters=function(je,st){var ft=((je[0]+180)%360+360)%360-180,Me=Math.max(-90,Math.min(90,je[1])),Se=je[2]===180?180:((je[2]+180)%360+360)%360-180,Ke=Math.max(-90,Math.min(90,je[3]));if(je[2]-je[0]>=360)ft=-180,Se=180;else if(ft>Se){var Xe=this.getClusters([ft,Me,180,Ke],st),ot=this.getClusters([-180,Me,Se,Ke],st);return Xe.concat(ot)}for(var pt=this.trees[this._limitZoom(st)],vt=pt.range(Te(ft),_e(Ke),Te(Se),_e(Me)),Ct=[],St=0,Nt=vt;St<Nt.length;St+=1){var ir=Nt[St],lr=pt.points[ir];Ct.push(lr.numPoints?pe(lr):this.points[lr.index])}return Ct},le.prototype.getChildren=function(je){var st=this._getOriginId(je),ft=this._getOriginZoom(je),Me="No cluster with the specified id.",Se=this.trees[ft];if(!Se)throw new Error(Me);var Ke=Se.points[st];if(!Ke)throw new Error(Me);for(var Xe=this.options.radius/(this.options.extent*Math.pow(2,ft-1)),ot=Se.within(Ke.x,Ke.y,Xe),pt=[],vt=0,Ct=ot;vt<Ct.length;vt+=1){var St=Ct[vt],Nt=Se.points[St];Nt.parentId===je&&pt.push(Nt.numPoints?pe(Nt):this.points[Nt.index])}if(pt.length===0)throw new Error(Me);return pt},le.prototype.getLeaves=function(je,st,ft){st=st||10,ft=ft||0;var Me=[];return this._appendLeaves(Me,je,st,ft,0),Me},le.prototype.getTile=function(je,st,ft){var Me=this.trees[this._limitZoom(je)],Se=Math.pow(2,je),Ke=this.options,Xe=Ke.extent,ot=Ke.radius,pt=ot/Xe,vt=(ft-pt)/Se,Ct=(ft+1+pt)/Se,St={features:[]};return this._addTileFeatures(Me.range((st-pt)/Se,vt,(st+1+pt)/Se,Ct),Me.points,st,ft,Se,St),st===0&&this._addTileFeatures(Me.range(1-pt/Se,vt,1,Ct),Me.points,Se,ft,Se,St),st===Se-1&&this._addTileFeatures(Me.range(0,vt,pt/Se,Ct),Me.points,-1,ft,Se,St),St.features.length?St:null},le.prototype.getClusterExpansionZoom=function(je){for(var st=this._getOriginZoom(je)-1;st<=this.options.maxZoom;){var ft=this.getChildren(je);if(st++,ft.length!==1)break;je=ft[0].properties.cluster_id}return st},le.prototype._appendLeaves=function(je,st,ft,Me,Se){for(var Ke=this.getChildren(st),Xe=0,ot=Ke;Xe<ot.length;Xe+=1){var pt=ot[Xe],vt=pt.properties;if(vt&&vt.cluster?Se+vt.point_count<=Me?Se+=vt.point_count:Se=this._appendLeaves(je,vt.cluster_id,ft,Me,Se):Se<Me?Se++:je.push(pt),je.length===ft)break}return Se},le.prototype._addTileFeatures=function(je,st,ft,Me,Se,Ke){for(var Xe=0,ot=je;Xe<ot.length;Xe+=1){var pt=ot[Xe],vt=st[pt],Ct=vt.numPoints,St={type:1,geometry:[[Math.round(this.options.extent*(vt.x*Se-ft)),Math.round(this.options.extent*(vt.y*Se-Me))]],tags:Ct?ge(vt):this.points[vt.index].properties},Nt=void 0;Ct?Nt=vt.id:this.options.generateId?Nt=vt.index:this.points[vt.index].id&&(Nt=this.points[vt.index].id),Nt!==void 0&&(St.id=Nt),Ke.features.push(St)}},le.prototype._limitZoom=function(je){return Math.max(this.options.minZoom,Math.min(je,this.options.maxZoom+1))},le.prototype._cluster=function(je,st){for(var ft=[],Me=this.options,Se=Me.radius,Ke=Me.extent,Xe=Me.reduce,ot=Se/(Ke*Math.pow(2,st)),pt=0;pt<je.length;pt++){var vt=je[pt];if(!(vt.zoom<=st)){vt.zoom=st;for(var Ct=this.trees[st+1],St=Ct.within(vt.x,vt.y,ot),Nt=vt.numPoints||1,ir=vt.x*Nt,lr=vt.y*Nt,Yr=Xe&&Nt>1?this._map(vt,!0):null,Pr=(pt<<5)+(st+1)+this.points.length,wr=0,Jr=St;wr<Jr.length;wr+=1){var gr=Jr[wr],mr=Ct.points[gr];if(!(mr.zoom<=st)){mr.zoom=st;var Ur=mr.numPoints||1;ir+=mr.x*Ur,lr+=mr.y*Ur,Nt+=Ur,mr.parentId=Pr,Xe&&(Yr||(Yr=this._map(vt,!0)),Xe(Yr,this._map(mr)))}}Nt===1?ft.push(vt):(vt.parentId=Pr,ft.push(ye(ir/Nt,lr/Nt,Pr,Nt,Yr)))}}return ft},le.prototype._getOriginId=function(je){return je-this.points.length>>5},le.prototype._getOriginZoom=function(je){return(je-this.points.length)%32},le.prototype._map=function(je,st){if(je.numPoints)return st?Ue({},je.properties):je.properties;var ft=this.points[je.index].properties,Me=this.options.map(ft);return st&&Me===ft?Ue({},Me):Me};function ye(tt,je,st,ft,Me){return{x:tt,y:je,zoom:1/0,id:st,parentId:-1,numPoints:ft,properties:Me}}function ue(tt,je){var st=tt.geometry.coordinates,ft=st[0],Me=st[1];return{x:Te(ft),y:_e(Me),zoom:1/0,index:je,parentId:-1}}function pe(tt){return{type:"Feature",id:tt.id,properties:ge(tt),geometry:{type:"Point",coordinates:[De(tt.x),Oe(tt.y)]}}}function ge(tt){var je=tt.numPoints,st=je>=1e4?Math.round(je/1e3)+"k":je>=1e3?Math.round(je/100)/10+"k":je;return Ue(Ue({},tt.properties),{cluster:!0,cluster_id:tt.id,point_count:je,point_count_abbreviated:st})}function Te(tt){return tt/360+.5}function _e(tt){var je=Math.sin(tt*Math.PI/180),st=.5-.25*Math.log((1+je)/(1-je))/Math.PI;return st<0?0:st>1?1:st}function De(tt){return(tt-.5)*360}function Oe(tt){var je=(180-tt*360)*Math.PI/180;return 360*Math.atan(Math.exp(je))/Math.PI-90}function Ue(tt,je){for(var st in je)tt[st]=je[st];return tt}function xe(tt){return tt.x}function Pe(tt){return tt.y}function Ve(tt,je,st,ft){for(var Me=ft,Se=st-je>>1,Ke=st-je,Xe,ot=tt[je],pt=tt[je+1],vt=tt[st],Ct=tt[st+1],St=je+3;St<st;St+=3){var Nt=Qe(tt[St],tt[St+1],ot,pt,vt,Ct);if(Nt>Me)Xe=St,Me=Nt;else if(Nt===Me){var ir=Math.abs(St-Se);ir<Ke&&(Xe=St,Ke=ir)}}Me>ft&&(Xe-je>3&&Ve(tt,je,Xe,ft),tt[Xe+2]=Me,st-Xe>3&&Ve(tt,Xe,st,ft))}function Qe(tt,je,st,ft,Me,Se){var Ke=Me-st,Xe=Se-ft;if(Ke!==0||Xe!==0){var ot=((tt-st)*Ke+(je-ft)*Xe)/(Ke*Ke+Xe*Xe);ot>1?(st=Me,ft=Se):ot>0&&(st+=Ke*ot,ft+=Xe*ot)}return Ke=tt-st,Xe=je-ft,Ke*Ke+Xe*Xe}function Fe(tt,je,st,ft){var Me={id:typeof tt=="undefined"?null:tt,type:je,geometry:st,tags:ft,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Le(Me),Me}function Le(tt){var je=tt.geometry,st=tt.type;if(st==="Point"||st==="MultiPoint"||st==="LineString")Ne(tt,je);else if(st==="Polygon"||st==="MultiLineString")for(var ft=0;ft<je.length;ft++)Ne(tt,je[ft]);else if(st==="MultiPolygon")for(ft=0;ft<je.length;ft++)for(var Me=0;Me<je[ft].length;Me++)Ne(tt,je[ft][Me])}function Ne(tt,je){for(var st=0;st<je.length;st+=3)tt.minX=Math.min(tt.minX,je[st]),tt.minY=Math.min(tt.minY,je[st+1]),tt.maxX=Math.max(tt.maxX,je[st]),tt.maxY=Math.max(tt.maxY,je[st+1])}function dt(tt,je){var st=[];if(tt.type==="FeatureCollection")for(var ft=0;ft<tt.features.length;ft++)Dt(st,tt.features[ft],je,ft);else tt.type==="Feature"?Dt(st,tt,je):Dt(st,{geometry:tt},je);return st}function Dt(tt,je,st,ft){if(!!je.geometry){var Me=je.geometry.coordinates,Se=je.geometry.type,Ke=Math.pow(st.tolerance/((1<<st.maxZoom)*st.extent),2),Xe=[],ot=je.id;if(st.promoteId?ot=je.properties[st.promoteId]:st.generateId&&(ot=ft||0),Se==="Point")Xt(Me,Xe);else if(Se==="MultiPoint")for(var pt=0;pt<Me.length;pt++)Xt(Me[pt],Xe);else if(Se==="LineString")Tt(Me,Xe,Ke,!1);else if(Se==="MultiLineString")if(st.lineMetrics){for(pt=0;pt<Me.length;pt++)Xe=[],Tt(Me[pt],Xe,Ke,!1),tt.push(Fe(ot,"LineString",Xe,je.properties));return}else zt(Me,Xe,Ke,!1);else if(Se==="Polygon")zt(Me,Xe,Ke,!0);else if(Se==="MultiPolygon")for(pt=0;pt<Me.length;pt++){var vt=[];zt(Me[pt],vt,Ke,!0),Xe.push(vt)}else if(Se==="GeometryCollection"){for(pt=0;pt<je.geometry.geometries.length;pt++)Dt(tt,{id:ot,geometry:je.geometry.geometries[pt],properties:je.properties},st,ft);return}else throw new Error("Input data is not a valid GeoJSON object.");tt.push(Fe(ot,Se,Xe,je.properties))}}function Xt(tt,je){je.push(Ut(tt[0])),je.push(Et(tt[1])),je.push(0)}function Tt(tt,je,st,ft){for(var Me,Se,Ke=0,Xe=0;Xe<tt.length;Xe++){var ot=Ut(tt[Xe][0]),pt=Et(tt[Xe][1]);je.push(ot),je.push(pt),je.push(0),Xe>0&&(ft?Ke+=(Me*pt-ot*Se)/2:Ke+=Math.sqrt(Math.pow(ot-Me,2)+Math.pow(pt-Se,2))),Me=ot,Se=pt}var vt=je.length-3;je[2]=1,Ve(je,0,vt,st),je[vt+2]=1,je.size=Math.abs(Ke),je.start=0,je.end=je.size}function zt(tt,je,st,ft){for(var Me=0;Me<tt.length;Me++){var Se=[];Tt(tt[Me],Se,st,ft),je.push(Se)}}function Ut(tt){return tt/360+.5}function Et(tt){var je=Math.sin(tt*Math.PI/180),st=.5-.25*Math.log((1+je)/(1-je))/Math.PI;return st<0?0:st>1?1:st}function Mt(tt,je,st,ft,Me,Se,Ke,Xe){if(st/=je,ft/=je,Se>=st&&Ke<ft)return tt;if(Ke<st||Se>=ft)return null;for(var ot=[],pt=0;pt<tt.length;pt++){var vt=tt[pt],Ct=vt.geometry,St=vt.type,Nt=Me===0?vt.minX:vt.minY,ir=Me===0?vt.maxX:vt.maxY;if(Nt>=st&&ir<ft){ot.push(vt);continue}else if(ir<st||Nt>=ft)continue;var lr=[];if(St==="Point"||St==="MultiPoint")rt(Ct,lr,st,ft,Me);else if(St==="LineString")ct(Ct,lr,st,ft,Me,!1,Xe.lineMetrics);else if(St==="MultiLineString")ke(Ct,lr,st,ft,Me,!1);else if(St==="Polygon")ke(Ct,lr,st,ft,Me,!0);else if(St==="MultiPolygon")for(var Yr=0;Yr<Ct.length;Yr++){var Pr=[];ke(Ct[Yr],Pr,st,ft,Me,!0),Pr.length&&lr.push(Pr)}if(lr.length){if(Xe.lineMetrics&&St==="LineString"){for(Yr=0;Yr<lr.length;Yr++)ot.push(Fe(vt.id,St,lr[Yr],vt.tags));continue}(St==="LineString"||St==="MultiLineString")&&(lr.length===1?(St="LineString",lr=lr[0]):St="MultiLineString"),(St==="Point"||St==="MultiPoint")&&(St=lr.length===3?"Point":"MultiPoint"),ot.push(Fe(vt.id,St,lr,vt.tags))}}return ot.length?ot:null}function rt(tt,je,st,ft,Me){for(var Se=0;Se<tt.length;Se+=3){var Ke=tt[Se+Me];Ke>=st&&Ke<=ft&&(je.push(tt[Se]),je.push(tt[Se+1]),je.push(tt[Se+2]))}}function ct(tt,je,st,ft,Me,Se,Ke){for(var Xe=Ze(tt),ot=Me===0?Je:it,pt=tt.start,vt,Ct,St=0;St<tt.length-3;St+=3){var Nt=tt[St],ir=tt[St+1],lr=tt[St+2],Yr=tt[St+3],Pr=tt[St+4],wr=Me===0?Nt:ir,Jr=Me===0?Yr:Pr,gr=!1;Ke&&(vt=Math.sqrt(Math.pow(Nt-Yr,2)+Math.pow(ir-Pr,2))),wr<st?Jr>st&&(Ct=ot(Xe,Nt,ir,Yr,Pr,st),Ke&&(Xe.start=pt+vt*Ct)):wr>ft?Jr<ft&&(Ct=ot(Xe,Nt,ir,Yr,Pr,ft),Ke&&(Xe.start=pt+vt*Ct)):Ge(Xe,Nt,ir,lr),Jr<st&&wr>=st&&(Ct=ot(Xe,Nt,ir,Yr,Pr,st),gr=!0),Jr>ft&&wr<=ft&&(Ct=ot(Xe,Nt,ir,Yr,Pr,ft),gr=!0),!Se&&gr&&(Ke&&(Xe.end=pt+vt*Ct),je.push(Xe),Xe=Ze(tt)),Ke&&(pt+=vt)}var mr=tt.length-3;Nt=tt[mr],ir=tt[mr+1],lr=tt[mr+2],wr=Me===0?Nt:ir,wr>=st&&wr<=ft&&Ge(Xe,Nt,ir,lr),mr=Xe.length-3,Se&&mr>=3&&(Xe[mr]!==Xe[0]||Xe[mr+1]!==Xe[1])&&Ge(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&je.push(Xe)}function Ze(tt){var je=[];return je.size=tt.size,je.start=tt.start,je.end=tt.end,je}function ke(tt,je,st,ft,Me,Se){for(var Ke=0;Ke<tt.length;Ke++)ct(tt[Ke],je,st,ft,Me,Se,!1)}function Ge(tt,je,st,ft){tt.push(je),tt.push(st),tt.push(ft)}function Je(tt,je,st,ft,Me,Se){var Ke=(Se-je)/(ft-je);return tt.push(Se),tt.push(st+(Me-st)*Ke),tt.push(1),Ke}function it(tt,je,st,ft,Me,Se){var Ke=(Se-st)/(Me-st);return tt.push(je+(ft-je)*Ke),tt.push(Se),tt.push(1),Ke}function Pt(tt,je){var st=je.buffer/je.extent,ft=tt,Me=Mt(tt,1,-1-st,st,0,-1,2,je),Se=Mt(tt,1,1-st,2+st,0,-1,2,je);return(Me||Se)&&(ft=Mt(tt,1,-st,1+st,0,-1,2,je)||[],Me&&(ft=At(Me,1).concat(ft)),Se&&(ft=ft.concat(At(Se,-1)))),ft}function At(tt,je){for(var st=[],ft=0;ft<tt.length;ft++){var Me=tt[ft],Se=Me.type,Ke;if(Se==="Point"||Se==="MultiPoint"||Se==="LineString")Ke=Ot(Me.geometry,je);else if(Se==="MultiLineString"||Se==="Polygon"){Ke=[];for(var Xe=0;Xe<Me.geometry.length;Xe++)Ke.push(Ot(Me.geometry[Xe],je))}else if(Se==="MultiPolygon")for(Ke=[],Xe=0;Xe<Me.geometry.length;Xe++){for(var ot=[],pt=0;pt<Me.geometry[Xe].length;pt++)ot.push(Ot(Me.geometry[Xe][pt],je));Ke.push(ot)}st.push(Fe(Me.id,Se,Ke,Me.tags))}return st}function Ot(tt,je){var st=[];st.size=tt.size,tt.start!==void 0&&(st.start=tt.start,st.end=tt.end);for(var ft=0;ft<tt.length;ft+=3)st.push(tt[ft]+je,tt[ft+1],tt[ft+2]);return st}function Jt(tt,je){if(tt.transformed)return tt;var st=1<<tt.z,ft=tt.x,Me=tt.y,Se,Ke,Xe;for(Se=0;Se<tt.features.length;Se++){var ot=tt.features[Se],pt=ot.geometry,vt=ot.type;if(ot.geometry=[],vt===1)for(Ke=0;Ke<pt.length;Ke+=2)ot.geometry.push(Bt(pt[Ke],pt[Ke+1],je,st,ft,Me));else for(Ke=0;Ke<pt.length;Ke++){var Ct=[];for(Xe=0;Xe<pt[Ke].length;Xe+=2)Ct.push(Bt(pt[Ke][Xe],pt[Ke][Xe+1],je,st,ft,Me));ot.geometry.push(Ct)}}return tt.transformed=!0,tt}function Bt(tt,je,st,ft,Me,Se){return[Math.round(st*(tt*ft-Me)),Math.round(st*(je*ft-Se))]}function qt(tt,je,st,ft,Me){for(var Se=je===Me.maxZoom?0:Me.tolerance/((1<<je)*Me.extent),Ke={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:st,y:ft,z:je,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Xe=0;Xe<tt.length;Xe++){Ke.numFeatures++,rr(Ke,tt[Xe],Se,Me);var ot=tt[Xe].minX,pt=tt[Xe].minY,vt=tt[Xe].maxX,Ct=tt[Xe].maxY;ot<Ke.minX&&(Ke.minX=ot),pt<Ke.minY&&(Ke.minY=pt),vt>Ke.maxX&&(Ke.maxX=vt),Ct>Ke.maxY&&(Ke.maxY=Ct)}return Ke}function rr(tt,je,st,ft){var Me=je.geometry,Se=je.type,Ke=[];if(Se==="Point"||Se==="MultiPoint")for(var Xe=0;Xe<Me.length;Xe+=3)Ke.push(Me[Xe]),Ke.push(Me[Xe+1]),tt.numPoints++,tt.numSimplified++;else if(Se==="LineString")er(Ke,Me,tt,st,!1,!1);else if(Se==="MultiLineString"||Se==="Polygon")for(Xe=0;Xe<Me.length;Xe++)er(Ke,Me[Xe],tt,st,Se==="Polygon",Xe===0);else if(Se==="MultiPolygon")for(var ot=0;ot<Me.length;ot++){var pt=Me[ot];for(Xe=0;Xe<pt.length;Xe++)er(Ke,pt[Xe],tt,st,!0,Xe===0)}if(Ke.length){var vt=je.tags||null;if(Se==="LineString"&&ft.lineMetrics){vt={};for(var Ct in je.tags)vt[Ct]=je.tags[Ct];vt.mapbox_clip_start=Me.start/Me.size,vt.mapbox_clip_end=Me.end/Me.size}var St={geometry:Ke,type:Se==="Polygon"||Se==="MultiPolygon"?3:Se==="LineString"||Se==="MultiLineString"?2:1,tags:vt};je.id!==null&&(St.id=je.id),tt.features.push(St)}}function er(tt,je,st,ft,Me,Se){var Ke=ft*ft;if(ft>0&&je.size<(Me?Ke:ft)){st.numPoints+=je.length/3;return}for(var Xe=[],ot=0;ot<je.length;ot+=3)(ft===0||je[ot+2]>Ke)&&(st.numSimplified++,Xe.push(je[ot]),Xe.push(je[ot+1])),st.numPoints++;Me&&pr(Xe,Se),tt.push(Xe)}function pr(tt,je){for(var st=0,ft=0,Me=tt.length,Se=Me-2;ft<Me;Se=ft,ft+=2)st+=(tt[ft]-tt[Se])*(tt[ft+1]+tt[Se+1]);if(st>0===je)for(ft=0,Me=tt.length;ft<Me/2;ft+=2){var Ke=tt[ft],Xe=tt[ft+1];tt[ft]=tt[Me-2-ft],tt[ft+1]=tt[Me-1-ft],tt[Me-2-ft]=Ke,tt[Me-1-ft]=Xe}}function Xr(tt,je){return new hn(tt,je)}function hn(tt,je){je=this.options=nt(Object.create(this.options),je);var st=je.debug;if(st&&console.time("preprocess data"),je.maxZoom<0||je.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(je.promoteId&&je.generateId)throw new Error("promoteId and generateId cannot be used together.");var ft=dt(tt,je);this.tiles={},this.tileCoords=[],st&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",je.indexMaxZoom,je.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ft=Pt(ft,je),ft.length&&this.splitTile(ft,0,0,0),st&&(ft.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}hn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},hn.prototype.splitTile=function(tt,je,st,ft,Me,Se,Ke){for(var Xe=[tt,je,st,ft],ot=this.options,pt=ot.debug;Xe.length;){ft=Xe.pop(),st=Xe.pop(),je=Xe.pop(),tt=Xe.pop();var vt=1<<je,Ct=$r(je,st,ft),St=this.tiles[Ct];if(!St&&(pt>1&&console.time("creation"),St=this.tiles[Ct]=qt(tt,je,st,ft,ot),this.tileCoords.push({z:je,x:st,y:ft}),pt)){pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",je,st,ft,St.numFeatures,St.numPoints,St.numSimplified),console.timeEnd("creation"));var Nt="z"+je;this.stats[Nt]=(this.stats[Nt]||0)+1,this.total++}if(St.source=tt,Me){if(je===ot.maxZoom||je===Me)continue;var ir=1<<Me-je;if(st!==Math.floor(Se/ir)||ft!==Math.floor(Ke/ir))continue}else if(je===ot.indexMaxZoom||St.numPoints<=ot.indexMaxPoints)continue;if(St.source=null,tt.length!==0){pt>1&&console.time("clipping");var lr=.5*ot.buffer/ot.extent,Yr=.5-lr,Pr=.5+lr,wr=1+lr,Jr,gr,mr,Ur,Hr,Tr;Jr=gr=mr=Ur=null,Hr=Mt(tt,vt,st-lr,st+Pr,0,St.minX,St.maxX,ot),Tr=Mt(tt,vt,st+Yr,st+wr,0,St.minX,St.maxX,ot),tt=null,Hr&&(Jr=Mt(Hr,vt,ft-lr,ft+Pr,1,St.minY,St.maxY,ot),gr=Mt(Hr,vt,ft+Yr,ft+wr,1,St.minY,St.maxY,ot),Hr=null),Tr&&(mr=Mt(Tr,vt,ft-lr,ft+Pr,1,St.minY,St.maxY,ot),Ur=Mt(Tr,vt,ft+Yr,ft+wr,1,St.minY,St.maxY,ot),Tr=null),pt>1&&console.timeEnd("clipping"),Xe.push(Jr||[],je+1,st*2,ft*2),Xe.push(gr||[],je+1,st*2,ft*2+1),Xe.push(mr||[],je+1,st*2+1,ft*2),Xe.push(Ur||[],je+1,st*2+1,ft*2+1)}}},hn.prototype.getTile=function(tt,je,st){var ft=this.options,Me=ft.extent,Se=ft.debug;if(tt<0||tt>24)return null;var Ke=1<<tt;je=(je%Ke+Ke)%Ke;var Xe=$r(tt,je,st);if(this.tiles[Xe])return Jt(this.tiles[Xe],Me);Se>1&&console.log("drilling down to z%d-%d-%d",tt,je,st);for(var ot=tt,pt=je,vt=st,Ct;!Ct&&ot>0;)ot--,pt=Math.floor(pt/2),vt=Math.floor(vt/2),Ct=this.tiles[$r(ot,pt,vt)];return!Ct||!Ct.source?null:(Se>1&&console.log("found parent tile z%d-%d-%d",ot,pt,vt),Se>1&&console.time("drilling down"),this.splitTile(Ct.source,ot,pt,vt,tt,je,st),Se>1&&console.timeEnd("drilling down"),this.tiles[Xe]?Jt(this.tiles[Xe],Me):null)};function $r(tt,je,st){return((1<<tt)*st+je)*32+tt}function nt(tt,je){for(var st in je)tt[st]=je[st];return tt}function Gt(tt,je){var st=tt.tileID.canonical;if(!this._geoJSONIndex)return je(null,null);var ft=this._geoJSONIndex.getTile(st.z,st.x,st.y);if(!ft)return je(null,null);var Me=new m(ft.features),Se=P(Me);(Se.byteOffset!==0||Se.byteLength!==Se.buffer.byteLength)&&(Se=new Uint8Array(Se)),je(null,{vectorTile:Me,rawData:Se.buffer})}var Kt=function(tt){function je(st,ft,Me,Se){tt.call(this,st,ft,Me,Gt),Se&&(this.loadGeoJSON=Se)}return tt&&(je.__proto__=tt),je.prototype=Object.create(tt&&tt.prototype),je.prototype.constructor=je,je.prototype.loadData=function(ft,Me){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Me,this._pendingLoadDataParams=ft,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},je.prototype._loadData=function(){var ft=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Me=this._pendingCallback,Se=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Ke=Se&&Se.request&&Se.request.collectResourceTiming?new e.RequestPerformance(Se.request):!1;this.loadGeoJSON(Se,function(Xe,ot){if(Xe||!ot)return Me(Xe);if(typeof ot!="object")return Me(new Error("Input data given to '"+Se.source+"' is not a valid GeoJSON object."));l(ot,!0);try{ft._geoJSONIndex=Se.cluster?new le(Ht(Se)).load(ot.features):Xr(ot,Se.geojsonVtOptions)}catch(Ct){return Me(Ct)}ft.loaded={};var pt={};if(Ke){var vt=Ke.finish();vt&&(pt.resourceTiming={},pt.resourceTiming[Se.source]=JSON.parse(JSON.stringify(vt)))}Me(null,pt)})}},je.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},je.prototype.reloadTile=function(ft,Me){var Se=this.loaded,Ke=ft.uid;return Se&&Se[Ke]?tt.prototype.reloadTile.call(this,ft,Me):this.loadTile(ft,Me)},je.prototype.loadGeoJSON=function(ft,Me){if(ft.request)e.getJSON(ft.request,Me);else if(typeof ft.data=="string")try{return Me(null,JSON.parse(ft.data))}catch{return Me(new Error("Input data given to '"+ft.source+"' is not a valid GeoJSON object."))}else return Me(new Error("Input data given to '"+ft.source+"' is not a valid GeoJSON object."))},je.prototype.removeSource=function(ft,Me){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Me()},je.prototype.getClusterExpansionZoom=function(ft,Me){try{Me(null,this._geoJSONIndex.getClusterExpansionZoom(ft.clusterId))}catch(Se){Me(Se)}},je.prototype.getClusterChildren=function(ft,Me){try{Me(null,this._geoJSONIndex.getChildren(ft.clusterId))}catch(Se){Me(Se)}},je.prototype.getClusterLeaves=function(ft,Me){try{Me(null,this._geoJSONIndex.getLeaves(ft.clusterId,ft.limit,ft.offset))}catch(Se){Me(Se)}},je}(y);function Ht(tt){var je=tt.superclusterOptions,st=tt.clusterProperties;if(!st||!je)return je;for(var ft={},Me={},Se={accumulated:null,zoom:0},Ke={properties:null},Xe=Object.keys(st),ot=0,pt=Xe;ot<pt.length;ot+=1){var vt=pt[ot],Ct=st[vt],St=Ct[0],Nt=Ct[1],ir=e.createExpression(Nt),lr=e.createExpression(typeof St=="string"?[St,["accumulated"],["get",vt]]:St);ft[vt]=ir.value,Me[vt]=lr.value}return je.map=function(Yr){Ke.properties=Yr;for(var Pr={},wr=0,Jr=Xe;wr<Jr.length;wr+=1){var gr=Jr[wr];Pr[gr]=ft[gr].evaluate(Se,Ke)}return Pr},je.reduce=function(Yr,Pr){Ke.properties=Pr;for(var wr=0,Jr=Xe;wr<Jr.length;wr+=1){var gr=Jr[wr];Se.accumulated=Yr[gr],Yr[gr]=Me[gr].evaluate(Se,Ke)}},je}var _r=function(je){var st=this;this.self=je,this.actor=new e.Actor(je,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:y,geojson:Kt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ft,Me){if(st.workerSourceTypes[ft])throw new Error('Worker source with name "'+ft+'" already registered.');st.workerSourceTypes[ft]=Me},this.self.registerRTLTextPlugin=function(ft){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=ft.applyArabicShaping,e.plugin.processBidirectionalText=ft.processBidirectionalText,e.plugin.processStyledBidirectionalText=ft.processStyledBidirectionalText}};return _r.prototype.setReferrer=function(je,st){this.referrer=st},_r.prototype.setImages=function(je,st,ft){this.availableImages[je]=st;for(var Me in this.workerSources[je]){var Se=this.workerSources[je][Me];for(var Ke in Se)Se[Ke].availableImages=st}ft()},_r.prototype.setLayers=function(je,st,ft){this.getLayerIndex(je).replace(st),ft()},_r.prototype.updateLayers=function(je,st,ft){this.getLayerIndex(je).update(st.layers,st.removedIds),ft()},_r.prototype.loadTile=function(je,st,ft){this.getWorkerSource(je,st.type,st.source).loadTile(st,ft)},_r.prototype.loadDEMTile=function(je,st,ft){this.getDEMWorkerSource(je,st.source).loadTile(st,ft)},_r.prototype.reloadTile=function(je,st,ft){this.getWorkerSource(je,st.type,st.source).reloadTile(st,ft)},_r.prototype.abortTile=function(je,st,ft){this.getWorkerSource(je,st.type,st.source).abortTile(st,ft)},_r.prototype.removeTile=function(je,st,ft){this.getWorkerSource(je,st.type,st.source).removeTile(st,ft)},_r.prototype.removeDEMTile=function(je,st){this.getDEMWorkerSource(je,st.source).removeTile(st)},_r.prototype.removeSource=function(je,st,ft){if(!(!this.workerSources[je]||!this.workerSources[je][st.type]||!this.workerSources[je][st.type][st.source])){var Me=this.workerSources[je][st.type][st.source];delete this.workerSources[je][st.type][st.source],Me.removeSource!==void 0?Me.removeSource(st,ft):ft()}},_r.prototype.loadWorkerSource=function(je,st,ft){try{this.self.importScripts(st.url),ft()}catch(Me){ft(Me.toString())}},_r.prototype.syncRTLPluginState=function(je,st,ft){try{e.plugin.setState(st);var Me=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&Me!=null){this.self.importScripts(Me);var Se=e.plugin.isParsed(),Ke=Se?void 0:new Error("RTL Text Plugin failed to import scripts from "+Me);ft(Ke,Se)}}catch(Xe){ft(Xe.toString())}},_r.prototype.getAvailableImages=function(je){var st=this.availableImages[je];return st||(st=[]),st},_r.prototype.getLayerIndex=function(je){var st=this.layerIndexes[je];return st||(st=this.layerIndexes[je]=new r),st},_r.prototype.getWorkerSource=function(je,st,ft){var Me=this;if(this.workerSources[je]||(this.workerSources[je]={}),this.workerSources[je][st]||(this.workerSources[je][st]={}),!this.workerSources[je][st][ft]){var Se={send:function(Ke,Xe,ot){Me.actor.send(Ke,Xe,ot,je)}};this.workerSources[je][st][ft]=new this.workerSourceTypes[st](Se,this.getLayerIndex(je),this.getAvailableImages(je))}return this.workerSources[je][st][ft]},_r.prototype.getDEMWorkerSource=function(je,st){return this.demWorkerSources[je]||(this.demWorkerSources[je]={}),this.demWorkerSources[je][st]||(this.demWorkerSources[je][st]=new x),this.demWorkerSources[je][st]},_r.prototype.enforceCacheSizeLimit=function(je,st){e.enforceCacheSizeLimit(st)},typeof WorkerGlobalScope!="undefined"&&typeof e.window!="undefined"&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new _r(e.window)),_r}),A(["./shared"],function(e){var a=e.createCommonjsModule(function(ce){ce.exports?ce.exports=H:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=H,window.mapboxgl.notSupportedReason=ve);function H(zr){return!ve(zr)}function ve(zr){if(!j())return"not a browser";if(!de())return"insufficent Array support";if(!Ae())return"insufficient Function support";if(!Ce())return"insufficient Object support";if(!Ye())return"insufficient JSON support";if(!lt())return"insufficient worker support";if(!wt())return"insufficient Uint8ClampedArray support";if(!Yt())return"insufficient ArrayBuffer support";if(!ar())return"insufficient Canvas/getImageData support";if(!kr(zr&&zr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function j(){return typeof window!="undefined"&&typeof document!="undefined"}function de(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Ae(){return Function.prototype&&Function.prototype.bind}function Ce(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function Ye(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function lt(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var zr=new Blob([""],{type:"text/javascript"}),jr=URL.createObjectURL(zr),cn,En;try{En=new Worker(jr),cn=!0}catch{cn=!1}return En&&En.terminate(),URL.revokeObjectURL(jr),cn}function wt(){return"Uint8ClampedArray"in window}function Yt(){return ArrayBuffer.isView}function ar(){var zr=document.createElement("canvas");zr.width=zr.height=1;var jr=zr.getContext("2d");if(!jr)return!1;var cn=jr.getImageData(0,0,1,1);return cn&&cn.width===zr.width}var fr={};function kr(zr){return fr[zr]===void 0&&(fr[zr]=Or(zr)),fr[zr]}H.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Fr(zr){var jr=document.createElement("canvas"),cn=Object.create(H.webGLContextAttributes);return cn.failIfMajorPerformanceCaveat=zr,jr.probablySupportsContext?jr.probablySupportsContext("webgl",cn)||jr.probablySupportsContext("experimental-webgl",cn):jr.supportsContext?jr.supportsContext("webgl",cn)||jr.supportsContext("experimental-webgl",cn):jr.getContext("webgl",cn)||jr.getContext("experimental-webgl",cn)}function Or(zr){var jr=Fr(zr);if(!jr)return!1;var cn=jr.createShader(jr.VERTEX_SHADER);return!cn||jr.isContextLost()?!1:(jr.shaderSource(cn,"void main() {}"),jr.compileShader(cn),jr.getShaderParameter(cn,jr.COMPILE_STATUS)===!0)}}),n={};n.create=function(ce,H,ve){var j=e.window.document.createElement(ce);return H!==void 0&&(j.className=H),ve&&ve.appendChild(j),j},n.createNS=function(ce,H){var ve=e.window.document.createElementNS(ce,H);return ve};var t=e.window.document.documentElement.style;function r(ce){if(!t)return ce[0];for(var H=0;H<ce.length;H++)if(ce[H]in t)return ce[H];return ce[0]}var f=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),o;n.disableDrag=function(){t&&f&&(o=t[f],t[f]="none")},n.enableDrag=function(){t&&f&&(t[f]=o)};var i=r(["transform","WebkitTransform"]);n.setTransform=function(ce,H){ce.style[i]=H};var p=!1;try{var d=Object.defineProperty({},"passive",{get:function(){p=!0}});e.window.addEventListener("test",d,d),e.window.removeEventListener("test",d,d)}catch{p=!1}n.addEventListener=function(ce,H,ve,j){j===void 0&&(j={}),"passive"in j&&p?ce.addEventListener(H,ve,j):ce.addEventListener(H,ve,j.capture)},n.removeEventListener=function(ce,H,ve,j){j===void 0&&(j={}),"passive"in j&&p?ce.removeEventListener(H,ve,j):ce.removeEventListener(H,ve,j.capture)};var y=function(ce){ce.preventDefault(),ce.stopPropagation(),e.window.removeEventListener("click",y,!0)};n.suppressClick=function(){e.window.addEventListener("click",y,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",y,!0)},0)},n.mousePos=function(ce,H){var ve=ce.getBoundingClientRect();return new e.Point(H.clientX-ve.left-ce.clientLeft,H.clientY-ve.top-ce.clientTop)},n.touchPos=function(ce,H){for(var ve=ce.getBoundingClientRect(),j=[],de=0;de<H.length;de++)j.push(new e.Point(H[de].clientX-ve.left-ce.clientLeft,H[de].clientY-ve.top-ce.clientTop));return j},n.mouseButton=function(ce){return typeof e.window.InstallTrigger!="undefined"&&ce.button===2&&ce.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:ce.button},n.remove=function(ce){ce.parentNode&&ce.parentNode.removeChild(ce)};function v(ce,H,ve){var j,de,Ae,Ce=e.browser.devicePixelRatio>1?"@2x":"",Ye=e.getJSON(H.transformRequest(H.normalizeSpriteURL(ce,Ce,".json"),e.ResourceType.SpriteJSON),function(Yt,ar){Ye=null,Ae||(Ae=Yt,j=ar,wt())}),lt=e.getImage(H.transformRequest(H.normalizeSpriteURL(ce,Ce,".png"),e.ResourceType.SpriteImage),function(Yt,ar){lt=null,Ae||(Ae=Yt,de=ar,wt())});function wt(){if(Ae)ve(Ae);else if(j&&de){var Yt=e.browser.getImageData(de),ar={};for(var fr in j){var kr=j[fr],Fr=kr.width,Or=kr.height,zr=kr.x,jr=kr.y,cn=kr.sdf,En=kr.pixelRatio,Fn=kr.stretchX,jn=kr.stretchY,qn=kr.content,Qn=new e.RGBAImage({width:Fr,height:Or});e.RGBAImage.copy(Yt,Qn,{x:zr,y:jr},{x:0,y:0},{width:Fr,height:Or}),ar[fr]={data:Qn,pixelRatio:En,sdf:cn,stretchX:Fn,stretchY:jn,content:qn}}ve(null,ar)}}return{cancel:function(){Ye&&(Ye.cancel(),Ye=null),lt&&(lt.cancel(),lt=null)}}}function x(ce){var H=ce.userImage;if(H&&H.render){var ve=H.render();if(ve)return ce.data.replace(new Uint8Array(H.data.buffer)),!0}return!1}var l=1,_=function(ce){function H(){ce.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.isLoaded=function(){return this.loaded},H.prototype.setLoaded=function(j){if(this.loaded!==j&&(this.loaded=j,j)){for(var de=0,Ae=this.requestors;de<Ae.length;de+=1){var Ce=Ae[de],Ye=Ce.ids,lt=Ce.callback;this._notify(Ye,lt)}this.requestors=[]}},H.prototype.getImage=function(j){return this.images[j]},H.prototype.addImage=function(j,de){this._validate(j,de)&&(this.images[j]=de)},H.prototype._validate=function(j,de){var Ae=!0;return this._validateStretch(de.stretchX,de.data&&de.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+j+'" has invalid "stretchX" value'))),Ae=!1),this._validateStretch(de.stretchY,de.data&&de.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+j+'" has invalid "stretchY" value'))),Ae=!1),this._validateContent(de.content,de)||(this.fire(new e.ErrorEvent(new Error('Image "'+j+'" has invalid "content" value'))),Ae=!1),Ae},H.prototype._validateStretch=function(j,de){if(!j)return!0;for(var Ae=0,Ce=0,Ye=j;Ce<Ye.length;Ce+=1){var lt=Ye[Ce];if(lt[0]<Ae||lt[1]<lt[0]||de<lt[1])return!1;Ae=lt[1]}return!0},H.prototype._validateContent=function(j,de){return j?!(j.length!==4||j[0]<0||de.data.width<j[0]||j[1]<0||de.data.height<j[1]||j[2]<0||de.data.width<j[2]||j[3]<0||de.data.height<j[3]||j[2]<j[0]||j[3]<j[1]):!0},H.prototype.updateImage=function(j,de){var Ae=this.images[j];de.version=Ae.version+1,this.images[j]=de,this.updatedImages[j]=!0},H.prototype.removeImage=function(j){var de=this.images[j];delete this.images[j],delete this.patterns[j],de.userImage&&de.userImage.onRemove&&de.userImage.onRemove()},H.prototype.listImages=function(){return Object.keys(this.images)},H.prototype.getImages=function(j,de){var Ae=!0;if(!this.isLoaded())for(var Ce=0,Ye=j;Ce<Ye.length;Ce+=1){var lt=Ye[Ce];this.images[lt]||(Ae=!1)}this.isLoaded()||Ae?this._notify(j,de):this.requestors.push({ids:j,callback:de})},H.prototype._notify=function(j,de){for(var Ae={},Ce=0,Ye=j;Ce<Ye.length;Ce+=1){var lt=Ye[Ce];this.images[lt]||this.fire(new e.Event("styleimagemissing",{id:lt}));var wt=this.images[lt];wt?Ae[lt]={data:wt.data.clone(),pixelRatio:wt.pixelRatio,sdf:wt.sdf,version:wt.version,stretchX:wt.stretchX,stretchY:wt.stretchY,content:wt.content,hasRenderCallback:Boolean(wt.userImage&&wt.userImage.render)}:e.warnOnce('Image "'+lt+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}de(null,Ae)},H.prototype.getPixelSize=function(){var j=this.atlasImage,de=j.width,Ae=j.height;return{width:de,height:Ae}},H.prototype.getPattern=function(j){var de=this.patterns[j],Ae=this.getImage(j);if(!Ae)return null;if(de&&de.position.version===Ae.version)return de.position;if(de)de.position.version=Ae.version;else{var Ce=Ae.data.width+l*2,Ye=Ae.data.height+l*2,lt={w:Ce,h:Ye,x:0,y:0},wt=new e.ImagePosition(lt,Ae);this.patterns[j]={bin:lt,position:wt}}return this._updatePatternAtlas(),this.patterns[j].position},H.prototype.bind=function(j){var de=j.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(j,this.atlasImage,de.RGBA),this.atlasTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE)},H.prototype._updatePatternAtlas=function(){var j=[];for(var de in this.patterns)j.push(this.patterns[de].bin);var Ae=e.potpack(j),Ce=Ae.w,Ye=Ae.h,lt=this.atlasImage;lt.resize({width:Ce||1,height:Ye||1});for(var wt in this.patterns){var Yt=this.patterns[wt],ar=Yt.bin,fr=ar.x+l,kr=ar.y+l,Fr=this.images[wt].data,Or=Fr.width,zr=Fr.height;e.RGBAImage.copy(Fr,lt,{x:0,y:0},{x:fr,y:kr},{width:Or,height:zr}),e.RGBAImage.copy(Fr,lt,{x:0,y:zr-1},{x:fr,y:kr-1},{width:Or,height:1}),e.RGBAImage.copy(Fr,lt,{x:0,y:0},{x:fr,y:kr+zr},{width:Or,height:1}),e.RGBAImage.copy(Fr,lt,{x:Or-1,y:0},{x:fr-1,y:kr},{width:1,height:zr}),e.RGBAImage.copy(Fr,lt,{x:0,y:0},{x:fr+Or,y:kr},{width:1,height:zr})}this.dirty=!0},H.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},H.prototype.dispatchRenderCallbacks=function(j){for(var de=0,Ae=j;de<Ae.length;de+=1){var Ce=Ae[de];if(!this.callbackDispatchedThisFrame[Ce]){this.callbackDispatchedThisFrame[Ce]=!0;var Ye=this.images[Ce],lt=x(Ye);lt&&this.updateImage(Ce,Ye)}}},H}(e.Evented);function s(ce,H,ve,j,de){var Ae=H*256,Ce=Ae+255,Ye=j.transformRequest(j.normalizeGlyphsURL(ve).replace("{fontstack}",ce).replace("{range}",Ae+"-"+Ce),e.ResourceType.Glyphs);e.getArrayBuffer(Ye,function(lt,wt){if(lt)de(lt);else if(wt){for(var Yt={},ar=0,fr=e.parseGlyphPBF(wt);ar<fr.length;ar+=1){var kr=fr[ar];Yt[kr.id]=kr}de(null,Yt)}})}var w=m,b=m,h=1e20;function m(ce,H,ve,j,de,Ae){this.fontSize=ce||24,this.buffer=H===void 0?3:H,this.cutoff=j||.25,this.fontFamily=de||"sans-serif",this.fontWeight=Ae||"normal",this.radius=ve||8;var Ce=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Ce,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Ce*Ce),this.gridInner=new Float64Array(Ce*Ce),this.f=new Float64Array(Ce),this.d=new Float64Array(Ce),this.z=new Float64Array(Ce+1),this.v=new Int16Array(Ce),this.middle=Math.round(Ce/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}m.prototype.draw=function(ce){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(ce,this.buffer,this.middle);for(var H=this.ctx.getImageData(0,0,this.size,this.size),ve=new Uint8ClampedArray(this.size*this.size),j=0;j<this.size*this.size;j++){var de=H.data[j*4+3]/255;this.gridOuter[j]=de===1?0:de===0?h:Math.pow(Math.max(0,.5-de),2),this.gridInner[j]=de===1?h:de===0?0:Math.pow(Math.max(0,de-.5),2)}for(u(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),u(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),j=0;j<this.size*this.size;j++){var Ae=this.gridOuter[j]-this.gridInner[j];ve[j]=Math.max(0,Math.min(255,Math.round(255-255*(Ae/this.radius+this.cutoff))))}return ve};function u(ce,H,ve,j,de,Ae,Ce){for(var Ye=0;Ye<H;Ye++){for(var lt=0;lt<ve;lt++)j[lt]=ce[lt*H+Ye];for(L(j,de,Ae,Ce,ve),lt=0;lt<ve;lt++)ce[lt*H+Ye]=de[lt]}for(lt=0;lt<ve;lt++){for(Ye=0;Ye<H;Ye++)j[Ye]=ce[lt*H+Ye];for(L(j,de,Ae,Ce,H),Ye=0;Ye<H;Ye++)ce[lt*H+Ye]=Math.sqrt(de[Ye])}}function L(ce,H,ve,j,de){ve[0]=0,j[0]=-h,j[1]=+h;for(var Ae=1,Ce=0;Ae<de;Ae++){for(var Ye=(ce[Ae]+Ae*Ae-(ce[ve[Ce]]+ve[Ce]*ve[Ce]))/(2*Ae-2*ve[Ce]);Ye<=j[Ce];)Ce--,Ye=(ce[Ae]+Ae*Ae-(ce[ve[Ce]]+ve[Ce]*ve[Ce]))/(2*Ae-2*ve[Ce]);Ce++,ve[Ce]=Ae,j[Ce]=Ye,j[Ce+1]=+h}for(Ae=0,Ce=0;Ae<de;Ae++){for(;j[Ce+1]<Ae;)Ce++;H[Ae]=(Ae-ve[Ce])*(Ae-ve[Ce])+ce[ve[Ce]]}}w.default=b;var S=function(H,ve){this.requestManager=H,this.localIdeographFontFamily=ve,this.entries={}};S.prototype.setURL=function(H){this.url=H},S.prototype.getGlyphs=function(H,ve){var j=this,de=[];for(var Ae in H)for(var Ce=0,Ye=H[Ae];Ce<Ye.length;Ce+=1){var lt=Ye[Ce];de.push({stack:Ae,id:lt})}e.asyncAll(de,function(wt,Yt){var ar=wt.stack,fr=wt.id,kr=j.entries[ar];kr||(kr=j.entries[ar]={glyphs:{},requests:{},ranges:{}});var Fr=kr.glyphs[fr];if(Fr!==void 0){Yt(null,{stack:ar,id:fr,glyph:Fr});return}if(Fr=j._tinySDF(kr,ar,fr),Fr){kr.glyphs[fr]=Fr,Yt(null,{stack:ar,id:fr,glyph:Fr});return}var Or=Math.floor(fr/256);if(Or*256>65535){Yt(new Error("glyphs > 65535 not supported"));return}if(kr.ranges[Or]){Yt(null,{stack:ar,id:fr,glyph:Fr});return}var zr=kr.requests[Or];zr||(zr=kr.requests[Or]=[],S.loadGlyphRange(ar,Or,j.url,j.requestManager,function(jr,cn){if(cn){for(var En in cn)j._doesCharSupportLocalGlyph(+En)||(kr.glyphs[+En]=cn[+En]);kr.ranges[Or]=!0}for(var Fn=0,jn=zr;Fn<jn.length;Fn+=1){var qn=jn[Fn];qn(jr,cn)}delete kr.requests[Or]})),zr.push(function(jr,cn){jr?Yt(jr):cn&&Yt(null,{stack:ar,id:fr,glyph:cn[fr]||null})})},function(wt,Yt){if(wt)ve(wt);else if(Yt){for(var ar={},fr=0,kr=Yt;fr<kr.length;fr+=1){var Fr=kr[fr],Or=Fr.stack,zr=Fr.id,jr=Fr.glyph;(ar[Or]||(ar[Or]={}))[zr]=jr&&{id:jr.id,bitmap:jr.bitmap.clone(),metrics:jr.metrics}}ve(null,ar)}})},S.prototype._doesCharSupportLocalGlyph=function(H){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](H)||e.isChar["Hangul Syllables"](H)||e.isChar.Hiragana(H)||e.isChar.Katakana(H))},S.prototype._tinySDF=function(H,ve,j){var de=this.localIdeographFontFamily;if(!!de&&!!this._doesCharSupportLocalGlyph(j)){var Ae=H.tinySDF;if(!Ae){var Ce="400";/bold/i.test(ve)?Ce="900":/medium/i.test(ve)?Ce="500":/light/i.test(ve)&&(Ce="200"),Ae=H.tinySDF=new S.TinySDF(24,3,8,.25,de,Ce)}return{id:j,bitmap:new e.AlphaImage({width:30,height:30},Ae.draw(String.fromCharCode(j))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=s,S.TinySDF=w;var k=function(){this.specification=e.styleSpec.light.position};k.prototype.possiblyEvaluate=function(H,ve){return e.sphericalToCartesian(H.expression.evaluate(ve))},k.prototype.interpolate=function(H,ve,j){return{x:e.number(H.x,ve.x,j),y:e.number(H.y,ve.y,j),z:e.number(H.z,ve.z,j)}};var P=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new k,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),z="-transition",I=function(ce){function H(ve){ce.call(this),this._transitionable=new e.Transitionable(P),this.setLight(ve),this._transitioning=this._transitionable.untransitioned()}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getLight=function(){return this._transitionable.serialize()},H.prototype.setLight=function(j,de){if(de===void 0&&(de={}),!this._validate(e.validateLight,j,de))for(var Ae in j){var Ce=j[Ae];e.endsWith(Ae,z)?this._transitionable.setTransition(Ae.slice(0,-z.length),Ce):this._transitionable.setValue(Ae,Ce)}},H.prototype.updateTransitions=function(j){this._transitioning=this._transitionable.transitioned(j,this._transitioning)},H.prototype.hasTransition=function(){return this._transitioning.hasTransition()},H.prototype.recalculate=function(j){this.properties=this._transitioning.possiblyEvaluate(j)},H.prototype._validate=function(j,de,Ae){return Ae&&Ae.validate===!1?!1:e.emitValidationErrors(this,j.call(e.validateStyle,e.extend({value:de,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},H}(e.Evented),D=function(H,ve){this.width=H,this.height=ve,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};D.prototype.getDash=function(H,ve){var j=H.join(",")+String(ve);return this.dashEntry[j]||(this.dashEntry[j]=this.addDash(H,ve)),this.dashEntry[j]},D.prototype.getDashRanges=function(H,ve,j){var de=H.length%2==1,Ae=[],Ce=de?-H[H.length-1]*j:0,Ye=H[0]*j,lt=!0;Ae.push({left:Ce,right:Ye,isDash:lt,zeroLength:H[0]===0});for(var wt=H[0],Yt=1;Yt<H.length;Yt++){lt=!lt;var ar=H[Yt];Ce=wt*j,wt+=ar,Ye=wt*j,Ae.push({left:Ce,right:Ye,isDash:lt,zeroLength:ar===0})}return Ae},D.prototype.addRoundDash=function(H,ve,j){for(var de=ve/2,Ae=-j;Ae<=j;Ae++)for(var Ce=this.nextRow+j+Ae,Ye=this.width*Ce,lt=0,wt=H[lt],Yt=0;Yt<this.width;Yt++){Yt/wt.right>1&&(wt=H[++lt]);var ar=Math.abs(Yt-wt.left),fr=Math.abs(Yt-wt.right),kr=Math.min(ar,fr),Fr=void 0,Or=Ae/j*(de+1);if(wt.isDash){var zr=de-Math.abs(Or);Fr=Math.sqrt(kr*kr+zr*zr)}else Fr=de-Math.sqrt(kr*kr+Or*Or);this.data[Ye+Yt]=Math.max(0,Math.min(255,Fr+128))}},D.prototype.addRegularDash=function(H){for(var ve=H.length-1;ve>=0;--ve){var j=H[ve],de=H[ve+1];j.zeroLength?H.splice(ve,1):de&&de.isDash===j.isDash&&(de.left=j.left,H.splice(ve,1))}var Ae=H[0],Ce=H[H.length-1];Ae.isDash===Ce.isDash&&(Ae.left=Ce.left-this.width,Ce.right=Ae.right+this.width);for(var Ye=this.width*this.nextRow,lt=0,wt=H[lt],Yt=0;Yt<this.width;Yt++){Yt/wt.right>1&&(wt=H[++lt]);var ar=Math.abs(Yt-wt.left),fr=Math.abs(Yt-wt.right),kr=Math.min(ar,fr),Fr=wt.isDash?kr:-kr;this.data[Ye+Yt]=Math.max(0,Math.min(255,Fr+128))}},D.prototype.addDash=function(H,ve){var j=ve?7:0,de=2*j+1;if(this.nextRow+de>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var Ae=0,Ce=0;Ce<H.length;Ce++)Ae+=H[Ce];if(Ae!==0){var Ye=this.width/Ae,lt=this.getDashRanges(H,this.width,Ye);ve?this.addRoundDash(lt,Ye,j):this.addRegularDash(lt)}var wt={y:(this.nextRow+j+.5)/this.height,height:2*j/this.height,width:Ae};return this.nextRow+=de,this.dirty=!0,wt},D.prototype.bind=function(H){var ve=H.gl;this.texture?(ve.bindTexture(ve.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ve.texSubImage2D(ve.TEXTURE_2D,0,0,0,this.width,this.height,ve.ALPHA,ve.UNSIGNED_BYTE,this.data))):(this.texture=ve.createTexture(),ve.bindTexture(ve.TEXTURE_2D,this.texture),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_S,ve.REPEAT),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_T,ve.REPEAT),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_MIN_FILTER,ve.LINEAR),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_MAG_FILTER,ve.LINEAR),ve.texImage2D(ve.TEXTURE_2D,0,ve.ALPHA,this.width,this.height,0,ve.ALPHA,ve.UNSIGNED_BYTE,this.data))};var R=function ce(H,ve){this.workerPool=H,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var j=this.workerPool.acquire(this.id),de=0;de<j.length;de++){var Ae=j[de],Ce=new ce.Actor(Ae,ve,this.id);Ce.name="Worker "+de,this.actors.push(Ce)}};R.prototype.broadcast=function(H,ve,j){j=j||function(){},e.asyncAll(this.actors,function(de,Ae){de.send(H,ve,Ae)},j)},R.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},R.prototype.remove=function(){this.actors.forEach(function(H){H.remove()}),this.actors=[],this.workerPool.release(this.id)},R.Actor=e.Actor;function B(ce,H,ve){var j=function(de,Ae){if(de)return ve(de);if(Ae){var Ce=e.pick(e.extend(Ae,ce),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ae.vector_layers&&(Ce.vectorLayers=Ae.vector_layers,Ce.vectorLayerIds=Ce.vectorLayers.map(function(Ye){return Ye.id})),Ce.tiles=H.canonicalizeTileset(Ce,ce.url),ve(null,Ce)}};return ce.url?e.getJSON(H.transformRequest(H.normalizeSourceURL(ce.url),e.ResourceType.Source),j):e.browser.frame(function(){return j(null,ce)})}var F=function(H,ve,j){this.bounds=e.LngLatBounds.convert(this.validateBounds(H)),this.minzoom=ve||0,this.maxzoom=j||24};F.prototype.validateBounds=function(H){return!Array.isArray(H)||H.length!==4?[-180,-90,180,90]:[Math.max(-180,H[0]),Math.max(-90,H[1]),Math.min(180,H[2]),Math.min(90,H[3])]},F.prototype.contains=function(H){var ve=Math.pow(2,H.z),j={minX:Math.floor(e.mercatorXfromLng(this.bounds.getWest())*ve),minY:Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*ve),maxX:Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*ve),maxY:Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*ve)},de=H.x>=j.minX&&H.x<j.maxX&&H.y>=j.minY&&H.y<j.maxY;return de};var V=function(ce){function H(ve,j,de,Ae){if(ce.call(this),this.id=ve,this.dispatcher=de,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(j,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},j),this._collectResourceTiming=j.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ae)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.load=function(){var j=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,function(de,Ae){j._tileJSONRequest=null,j._loaded=!0,de?j.fire(new e.ErrorEvent(de)):Ae&&(e.extend(j,Ae),Ae.bounds&&(j.tileBounds=new F(Ae.bounds,j.minzoom,j.maxzoom)),e.postTurnstileEvent(Ae.tiles,j.map._requestManager._customAccessToken),e.postMapLoadEvent(Ae.tiles,j.map._getMapId(),j.map._requestManager._skuToken,j.map._requestManager._customAccessToken),j.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),j.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},H.prototype.loaded=function(){return this._loaded},H.prototype.hasTile=function(j){return!this.tileBounds||this.tileBounds.contains(j.canonical)},H.prototype.onAdd=function(j){this.map=j,this.load()},H.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},H.prototype.serialize=function(){return e.extend({},this._options)},H.prototype.loadTile=function(j,de){var Ae=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme)),Ce={request:this.map._requestManager.transformRequest(Ae,e.ResourceType.Tile),uid:j.uid,tileID:j.tileID,zoom:j.tileID.overscaledZ,tileSize:this.tileSize*j.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Ce.request.collectResourceTiming=this._collectResourceTiming,!j.actor||j.state==="expired"?(j.actor=this.dispatcher.getActor(),j.request=j.actor.send("loadTile",Ce,Ye.bind(this))):j.state==="loading"?j.reloadCallback=de:j.request=j.actor.send("reloadTile",Ce,Ye.bind(this));function Ye(lt,wt){if(delete j.request,j.aborted)return de(null);if(lt&&lt.status!==404)return de(lt);wt&&wt.resourceTiming&&(j.resourceTiming=wt.resourceTiming),this.map._refreshExpiredTiles&&wt&&j.setExpiryData(wt),j.loadVectorData(wt,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),de(null),j.reloadCallback&&(this.loadTile(j,j.reloadCallback),j.reloadCallback=null)}},H.prototype.abortTile=function(j){j.request&&(j.request.cancel(),delete j.request),j.actor&&j.actor.send("abortTile",{uid:j.uid,type:this.type,source:this.id},void 0)},H.prototype.unloadTile=function(j){j.unloadVectorData(),j.actor&&j.actor.send("removeTile",{uid:j.uid,type:this.type,source:this.id},void 0)},H.prototype.hasTransition=function(){return!1},H}(e.Evented),Y=function(ce){function H(ve,j,de,Ae){ce.call(this),this.id=ve,this.dispatcher=de,this.setEventedParent(Ae),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},j),e.extend(this,e.pick(j,["url","scheme","tileSize"]))}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.load=function(){var j=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,function(de,Ae){j._tileJSONRequest=null,j._loaded=!0,de?j.fire(new e.ErrorEvent(de)):Ae&&(e.extend(j,Ae),Ae.bounds&&(j.tileBounds=new F(Ae.bounds,j.minzoom,j.maxzoom)),e.postTurnstileEvent(Ae.tiles),e.postMapLoadEvent(Ae.tiles,j.map._getMapId(),j.map._requestManager._skuToken),j.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),j.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},H.prototype.loaded=function(){return this._loaded},H.prototype.onAdd=function(j){this.map=j,this.load()},H.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},H.prototype.serialize=function(){return e.extend({},this._options)},H.prototype.hasTile=function(j){return!this.tileBounds||this.tileBounds.contains(j.canonical)},H.prototype.loadTile=function(j,de){var Ae=this,Ce=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);j.request=e.getImage(this.map._requestManager.transformRequest(Ce,e.ResourceType.Tile),function(Ye,lt){if(delete j.request,j.aborted)j.state="unloaded",de(null);else if(Ye)j.state="errored",de(Ye);else if(lt){Ae.map._refreshExpiredTiles&&j.setExpiryData(lt),delete lt.cacheControl,delete lt.expires;var wt=Ae.map.painter.context,Yt=wt.gl;j.texture=Ae.map.painter.getTileTexture(lt.width),j.texture?j.texture.update(lt,{useMipmap:!0}):(j.texture=new e.Texture(wt,lt,Yt.RGBA,{useMipmap:!0}),j.texture.bind(Yt.LINEAR,Yt.CLAMP_TO_EDGE,Yt.LINEAR_MIPMAP_NEAREST),wt.extTextureFilterAnisotropic&&Yt.texParameterf(Yt.TEXTURE_2D,wt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,wt.extTextureFilterAnisotropicMax)),j.state="loaded",e.cacheEntryPossiblyAdded(Ae.dispatcher),de(null)}})},H.prototype.abortTile=function(j,de){j.request&&(j.request.cancel(),delete j.request),de()},H.prototype.unloadTile=function(j,de){j.texture&&this.map.painter.saveTileTexture(j.texture),de()},H.prototype.hasTransition=function(){return!1},H}(e.Evented),K=function(ce){function H(ve,j,de,Ae){ce.call(this,ve,j,de,Ae),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},j),this.encoding=j.encoding||"mapbox"}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},H.prototype.loadTile=function(j,de){var Ae=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);j.request=e.getImage(this.map._requestManager.transformRequest(Ae,e.ResourceType.Tile),Ce.bind(this)),j.neighboringTiles=this._getNeighboringTiles(j.tileID);function Ce(lt,wt){if(delete j.request,j.aborted)j.state="unloaded",de(null);else if(lt)j.state="errored",de(lt);else if(wt){this.map._refreshExpiredTiles&&j.setExpiryData(wt),delete wt.cacheControl,delete wt.expires;var Yt=e.window.ImageBitmap&&wt instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported(),ar=Yt?wt:e.browser.getImageData(wt,1),fr={uid:j.uid,coord:j.tileID,source:this.id,rawImageData:ar,encoding:this.encoding};(!j.actor||j.state==="expired")&&(j.actor=this.dispatcher.getActor(),j.actor.send("loadDEMTile",fr,Ye.bind(this)))}}function Ye(lt,wt){lt&&(j.state="errored",de(lt)),wt&&(j.dem=wt,j.needsHillshadePrepare=!0,j.state="loaded",de(null))}},H.prototype._getNeighboringTiles=function(j){var de=j.canonical,Ae=Math.pow(2,de.z),Ce=(de.x-1+Ae)%Ae,Ye=de.x===0?j.wrap-1:j.wrap,lt=(de.x+1+Ae)%Ae,wt=de.x+1===Ae?j.wrap+1:j.wrap,Yt={};return Yt[new e.OverscaledTileID(j.overscaledZ,Ye,de.z,Ce,de.y).key]={backfilled:!1},Yt[new e.OverscaledTileID(j.overscaledZ,wt,de.z,lt,de.y).key]={backfilled:!1},de.y>0&&(Yt[new e.OverscaledTileID(j.overscaledZ,Ye,de.z,Ce,de.y-1).key]={backfilled:!1},Yt[new e.OverscaledTileID(j.overscaledZ,j.wrap,de.z,de.x,de.y-1).key]={backfilled:!1},Yt[new e.OverscaledTileID(j.overscaledZ,wt,de.z,lt,de.y-1).key]={backfilled:!1}),de.y+1<Ae&&(Yt[new e.OverscaledTileID(j.overscaledZ,Ye,de.z,Ce,de.y+1).key]={backfilled:!1},Yt[new e.OverscaledTileID(j.overscaledZ,j.wrap,de.z,de.x,de.y+1).key]={backfilled:!1},Yt[new e.OverscaledTileID(j.overscaledZ,wt,de.z,lt,de.y+1).key]={backfilled:!1}),Yt},H.prototype.unloadTile=function(j){j.demTexture&&this.map.painter.saveTileTexture(j.demTexture),j.fbo&&(j.fbo.destroy(),delete j.fbo),j.dem&&delete j.dem,delete j.neighboringTiles,j.state="unloaded",j.actor&&j.actor.send("removeDEMTile",{uid:j.uid,source:this.id})},H}(Y),J=function(ce){function H(ve,j,de,Ae){ce.call(this),this.id=ve,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=de.getActor(),this.setEventedParent(Ae),this._data=j.data,this._options=e.extend({},j),this._collectResourceTiming=j.collectResourceTiming,this._resourceTiming=[],j.maxzoom!==void 0&&(this.maxzoom=j.maxzoom),j.type&&(this.type=j.type),j.attribution&&(this.attribution=j.attribution),this.promoteId=j.promoteId;var Ce=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:j.cluster||!1,geojsonVtOptions:{buffer:(j.buffer!==void 0?j.buffer:128)*Ce,tolerance:(j.tolerance!==void 0?j.tolerance:.375)*Ce,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:j.lineMetrics||!1,generateId:j.generateId||!1},superclusterOptions:{maxZoom:j.clusterMaxZoom!==void 0?Math.min(j.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(j.clusterRadius||50)*Ce,log:!1,generateId:j.generateId||!1},clusterProperties:j.clusterProperties},j.workerOptions)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.load=function(){var j=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(de){if(de){j.fire(new e.ErrorEvent(de));return}var Ae={dataType:"source",sourceDataType:"metadata"};j._collectResourceTiming&&j._resourceTiming&&j._resourceTiming.length>0&&(Ae.resourceTiming=j._resourceTiming,j._resourceTiming=[]),j.fire(new e.Event("data",Ae))})},H.prototype.onAdd=function(j){this.map=j,this.load()},H.prototype.setData=function(j){var de=this;return this._data=j,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ae){if(Ae){de.fire(new e.ErrorEvent(Ae));return}var Ce={dataType:"source",sourceDataType:"content"};de._collectResourceTiming&&de._resourceTiming&&de._resourceTiming.length>0&&(Ce.resourceTiming=de._resourceTiming,de._resourceTiming=[]),de.fire(new e.Event("data",Ce))}),this},H.prototype.getClusterExpansionZoom=function(j,de){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:j,source:this.id},de),this},H.prototype.getClusterChildren=function(j,de){return this.actor.send("geojson.getClusterChildren",{clusterId:j,source:this.id},de),this},H.prototype.getClusterLeaves=function(j,de,Ae,Ce){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:j,limit:de,offset:Ae},Ce),this},H.prototype._updateWorkerData=function(j){var de=this;this._loaded=!1;var Ae=e.extend({},this.workerOptions),Ce=this._data;typeof Ce=="string"?(Ae.request=this.map._requestManager.transformRequest(e.browser.resolveURL(Ce),e.ResourceType.Source),Ae.request.collectResourceTiming=this._collectResourceTiming):Ae.data=JSON.stringify(Ce),this.actor.send(this.type+".loadData",Ae,function(Ye,lt){de._removed||lt&&lt.abandoned||(de._loaded=!0,lt&&lt.resourceTiming&&lt.resourceTiming[de.id]&&(de._resourceTiming=lt.resourceTiming[de.id].slice(0)),de.actor.send(de.type+".coalesce",{source:Ae.source},null),j(Ye))})},H.prototype.loaded=function(){return this._loaded},H.prototype.loadTile=function(j,de){var Ae=this,Ce=j.actor?"reloadTile":"loadTile";j.actor=this.actor;var Ye={type:this.type,uid:j.uid,tileID:j.tileID,zoom:j.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};j.request=this.actor.send(Ce,Ye,function(lt,wt){return delete j.request,j.unloadVectorData(),j.aborted?de(null):lt?de(lt):(j.loadVectorData(wt,Ae.map.painter,Ce==="reloadTile"),de(null))})},H.prototype.abortTile=function(j){j.request&&(j.request.cancel(),delete j.request),j.aborted=!0},H.prototype.unloadTile=function(j){j.unloadVectorData(),this.actor.send("removeTile",{uid:j.uid,type:this.type,source:this.id})},H.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},H.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},H.prototype.hasTransition=function(){return!1},H}(e.Evented),G=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Z=function(ce){function H(ve,j,de,Ae){ce.call(this),this.id=ve,this.dispatcher=de,this.coordinates=j.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ae),this.options=j}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.load=function(j,de){var Ae=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(Ce,Ye){Ae._loaded=!0,Ce?Ae.fire(new e.ErrorEvent(Ce)):Ye&&(Ae.image=Ye,j&&(Ae.coordinates=j),de&&de(),Ae._finishLoading())})},H.prototype.loaded=function(){return this._loaded},H.prototype.updateImage=function(j){var de=this;return!this.image||!j.url?this:(this.options.url=j.url,this.load(j.coordinates,function(){de.texture=null}),this)},H.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},H.prototype.onAdd=function(j){this.map=j,this.load()},H.prototype.setCoordinates=function(j){var de=this;this.coordinates=j;var Ae=j.map(e.MercatorCoordinate.fromLngLat);this.tileID=re(Ae),this.minzoom=this.maxzoom=this.tileID.z;var Ce=Ae.map(function(Ye){return de.tileID.getTilePoint(Ye)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(Ce[0].x,Ce[0].y,0,0),this._boundsArray.emplaceBack(Ce[1].x,Ce[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(Ce[3].x,Ce[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(Ce[2].x,Ce[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},H.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var j=this.map.painter.context,de=j.gl;this.boundsBuffer||(this.boundsBuffer=j.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(j,this.image,de.RGBA),this.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE));for(var Ae in this.tiles){var Ce=this.tiles[Ae];Ce.state!=="loaded"&&(Ce.state="loaded",Ce.texture=this.texture)}}},H.prototype.loadTile=function(j,de){this.tileID&&this.tileID.equals(j.tileID.canonical)?(this.tiles[String(j.tileID.wrap)]=j,j.buckets={},de(null)):(j.state="errored",de(null))},H.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},H.prototype.hasTransition=function(){return!1},H}(e.Evented);function re(ce){for(var H=1/0,ve=1/0,j=-1/0,de=-1/0,Ae=0,Ce=ce;Ae<Ce.length;Ae+=1){var Ye=Ce[Ae];H=Math.min(H,Ye.x),ve=Math.min(ve,Ye.y),j=Math.max(j,Ye.x),de=Math.max(de,Ye.y)}var lt=j-H,wt=de-ve,Yt=Math.max(lt,wt),ar=Math.max(0,Math.floor(-Math.log(Yt)/Math.LN2)),fr=Math.pow(2,ar);return new e.CanonicalTileID(ar,Math.floor((H+j)/2*fr),Math.floor((ve+de)/2*fr))}var se=function(ce){function H(ve,j,de,Ae){ce.call(this,ve,j,de,Ae),this.roundZoom=!0,this.type="video",this.options=j}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.load=function(){var j=this;this._loaded=!1;var de=this.options;this.urls=[];for(var Ae=0,Ce=de.urls;Ae<Ce.length;Ae+=1){var Ye=Ce[Ae];this.urls.push(this.map._requestManager.transformRequest(Ye,e.ResourceType.Source).url)}e.getVideo(this.urls,function(lt,wt){j._loaded=!0,lt?j.fire(new e.ErrorEvent(lt)):wt&&(j.video=wt,j.video.loop=!0,j.video.addEventListener("playing",function(){j.map.triggerRepaint()}),j.map&&j.video.play(),j._finishLoading())})},H.prototype.pause=function(){this.video&&this.video.pause()},H.prototype.play=function(){this.video&&this.video.play()},H.prototype.seek=function(j){if(this.video){var de=this.video.seekable;j<de.start(0)||j>de.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+de.start(0)+" and "+de.end(0)+"-second mark."))):this.video.currentTime=j}},H.prototype.getVideo=function(){return this.video},H.prototype.onAdd=function(j){this.map||(this.map=j,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},H.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var j=this.map.painter.context,de=j.gl;this.boundsBuffer||(this.boundsBuffer=j.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE),de.texSubImage2D(de.TEXTURE_2D,0,0,0,de.RGBA,de.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(j,this.video,de.RGBA),this.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE));for(var Ae in this.tiles){var Ce=this.tiles[Ae];Ce.state!=="loaded"&&(Ce.state="loaded",Ce.texture=this.texture)}}},H.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},H.prototype.hasTransition=function(){return this.video&&!this.video.paused},H}(Z),oe=function(ce){function H(ve,j,de,Ae){ce.call(this,ve,j,de,Ae),j.coordinates?(!Array.isArray(j.coordinates)||j.coordinates.length!==4||j.coordinates.some(function(Ce){return!Array.isArray(Ce)||Ce.length!==2||Ce.some(function(Ye){return typeof Ye!="number"})}))&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'missing required property "coordinates"'))),j.animate&&typeof j.animate!="boolean"&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'optional "animate" property must be a boolean value'))),j.canvas?typeof j.canvas!="string"&&!(j.canvas instanceof e.window.HTMLCanvasElement)&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'missing required property "canvas"'))),this.options=j,this.animate=j.animate!==void 0?j.animate:!0}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},H.prototype.getCanvas=function(){return this.canvas},H.prototype.onAdd=function(j){this.map=j,this.load(),this.canvas&&this.animate&&this.play()},H.prototype.onRemove=function(){this.pause()},H.prototype.prepare=function(){var j=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,j=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,j=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var de=this.map.painter.context,Ae=de.gl;this.boundsBuffer||(this.boundsBuffer=de.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(j||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(de,this.canvas,Ae.RGBA,{premultiply:!0});for(var Ce in this.tiles){var Ye=this.tiles[Ce];Ye.state!=="loaded"&&(Ye.state="loaded",Ye.texture=this.texture)}}},H.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},H.prototype.hasTransition=function(){return this._playing},H.prototype._hasInvalidDimensions=function(){for(var j=0,de=[this.canvas.width,this.canvas.height];j<de.length;j+=1){var Ae=de[j];if(isNaN(Ae)||Ae<=0)return!0}return!1},H}(Z),N={vector:V,raster:Y,"raster-dem":K,geojson:J,video:se,image:Z,canvas:oe},U=function(ce,H,ve,j){var de=new N[H.type](ce,H,ve,j);if(de.id!==ce)throw new Error("Expected Source id to be "+ce+" instead of "+de.id);return e.bindAll(["load","abort","unload","serialize","prepare"],de),de},q=function(ce){return N[ce]},Q=function(ce,H){N[ce]=H};function W(ce,H){var ve=e.identity([]);return e.translate(ve,ve,[1,1,0]),e.scale(ve,ve,[ce.width*.5,ce.height*.5,1]),e.multiply(ve,ve,ce.calculatePosMatrix(H.toUnwrapped()))}function X(ce,H,ve){if(ce)for(var j=0,de=ce;j<de.length;j+=1){var Ae=de[j],Ce=H[Ae];if(Ce&&Ce.source===ve&&Ce.type==="fill-extrusion")return!0}else for(var Ye in H){var lt=H[Ye];if(lt.source===ve&&lt.type==="fill-extrusion")return!0}return!1}function te(ce,H,ve,j,de,Ae){var Ce=X(de&&de.layers,H,ce.id),Ye=Ae.maxPitchScaleFactor(),lt=ce.tilesIn(j,Ye,Ce);lt.sort(le);for(var wt=[],Yt=0,ar=lt;Yt<ar.length;Yt+=1){var fr=ar[Yt];wt.push({wrappedTileID:fr.tileID.wrapped().key,queryResults:fr.tile.queryRenderedFeatures(H,ve,ce._state,fr.queryGeometry,fr.cameraQueryGeometry,fr.scale,de,Ae,Ye,W(ce.transform,fr.tileID))})}var kr=ye(wt);for(var Fr in kr)kr[Fr].forEach(function(Or){var zr=Or.feature,jr=ce.getFeatureState(zr.layer["source-layer"],zr.id);zr.source=zr.layer.source,zr.layer["source-layer"]&&(zr.sourceLayer=zr.layer["source-layer"]),zr.state=jr});return kr}function ee(ce,H,ve,j,de,Ae,Ce){for(var Ye={},lt=Ae.queryRenderedSymbols(j),wt=[],Yt=0,ar=Object.keys(lt).map(Number);Yt<ar.length;Yt+=1){var fr=ar[Yt];wt.push(Ce[fr])}wt.sort(le);for(var kr=function(){var cn=Or[Fr],En=cn.featureIndex.lookupSymbolFeatures(lt[cn.bucketInstanceId],H,cn.bucketIndex,cn.sourceLayerIndex,de.filter,de.layers,de.availableImages,ce);for(var Fn in En){var jn=Ye[Fn]=Ye[Fn]||[],qn=En[Fn];qn.sort(function(ga,Ma){var Ca=cn.featureSortOrder;if(Ca){var Ha=Ca.indexOf(ga.featureIndex),ni=Ca.indexOf(Ma.featureIndex);return ni-Ha}else return Ma.featureIndex-ga.featureIndex});for(var Qn=0,ca=qn;Qn<ca.length;Qn+=1){var xa=ca[Qn];jn.push(xa)}}},Fr=0,Or=wt;Fr<Or.length;Fr+=1)kr();var zr=function(cn){Ye[cn].forEach(function(En){var Fn=En.feature,jn=ce[cn],qn=ve[jn.source],Qn=qn.getFeatureState(Fn.layer["source-layer"],Fn.id);Fn.source=Fn.layer.source,Fn.layer["source-layer"]&&(Fn.sourceLayer=Fn.layer["source-layer"]),Fn.state=Qn})};for(var jr in Ye)zr(jr);return Ye}function ie(ce,H){for(var ve=ce.getRenderableIds().map(function(lt){return ce.getTileByID(lt)}),j=[],de={},Ae=0;Ae<ve.length;Ae++){var Ce=ve[Ae],Ye=Ce.tileID.canonical.key;de[Ye]||(de[Ye]=!0,Ce.querySourceFeatures(j,H))}return j}function le(ce,H){var ve=ce.tileID,j=H.tileID;return ve.overscaledZ-j.overscaledZ||ve.canonical.y-j.canonical.y||ve.wrap-j.wrap||ve.canonical.x-j.canonical.x}function ye(ce){for(var H={},ve={},j=0,de=ce;j<de.length;j+=1){var Ae=de[j],Ce=Ae.queryResults,Ye=Ae.wrappedTileID,lt=ve[Ye]=ve[Ye]||{};for(var wt in Ce)for(var Yt=Ce[wt],ar=lt[wt]=lt[wt]||{},fr=H[wt]=H[wt]||[],kr=0,Fr=Yt;kr<Fr.length;kr+=1){var Or=Fr[kr];ar[Or.featureIndex]||(ar[Or.featureIndex]=!0,fr.push(Or))}}return H}var ue=function(H,ve){this.max=H,this.onRemove=ve,this.reset()};ue.prototype.reset=function(){for(var H in this.data)for(var ve=0,j=this.data[H];ve<j.length;ve+=1){var de=j[ve];de.timeout&&clearTimeout(de.timeout),this.onRemove(de.value)}return this.data={},this.order=[],this},ue.prototype.add=function(H,ve,j){var de=this,Ae=H.wrapped().key;this.data[Ae]===void 0&&(this.data[Ae]=[]);var Ce={value:ve,timeout:void 0};if(j!==void 0&&(Ce.timeout=setTimeout(function(){de.remove(H,Ce)},j)),this.data[Ae].push(Ce),this.order.push(Ae),this.order.length>this.max){var Ye=this._getAndRemoveByKey(this.order[0]);Ye&&this.onRemove(Ye)}return this},ue.prototype.has=function(H){return H.wrapped().key in this.data},ue.prototype.getAndRemove=function(H){return this.has(H)?this._getAndRemoveByKey(H.wrapped().key):null},ue.prototype._getAndRemoveByKey=function(H){var ve=this.data[H].shift();return ve.timeout&&clearTimeout(ve.timeout),this.data[H].length===0&&delete this.data[H],this.order.splice(this.order.indexOf(H),1),ve.value},ue.prototype.getByKey=function(H){var ve=this.data[H];return ve?ve[0].value:null},ue.prototype.get=function(H){if(!this.has(H))return null;var ve=this.data[H.wrapped().key][0];return ve.value},ue.prototype.remove=function(H,ve){if(!this.has(H))return this;var j=H.wrapped().key,de=ve===void 0?0:this.data[j].indexOf(ve),Ae=this.data[j][de];return this.data[j].splice(de,1),Ae.timeout&&clearTimeout(Ae.timeout),this.data[j].length===0&&delete this.data[j],this.onRemove(Ae.value),this.order.splice(this.order.indexOf(j),1),this},ue.prototype.setMaxSize=function(H){for(this.max=H;this.order.length>this.max;){var ve=this._getAndRemoveByKey(this.order[0]);ve&&this.onRemove(ve)}return this},ue.prototype.filter=function(H){var ve=[];for(var j in this.data)for(var de=0,Ae=this.data[j];de<Ae.length;de+=1){var Ce=Ae[de];H(Ce.value)||ve.push(Ce)}for(var Ye=0,lt=ve;Ye<lt.length;Ye+=1){var wt=lt[Ye];this.remove(wt.value.tileID,wt)}};var pe=function(H,ve,j){this.context=H;var de=H.gl;this.buffer=de.createBuffer(),this.dynamicDraw=Boolean(j),this.context.unbindVAO(),H.bindElementBuffer.set(this.buffer),de.bufferData(de.ELEMENT_ARRAY_BUFFER,ve.arrayBuffer,this.dynamicDraw?de.DYNAMIC_DRAW:de.STATIC_DRAW),this.dynamicDraw||delete ve.arrayBuffer};pe.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},pe.prototype.updateData=function(H){var ve=this.context.gl;this.context.unbindVAO(),this.bind(),ve.bufferSubData(ve.ELEMENT_ARRAY_BUFFER,0,H.arrayBuffer)},pe.prototype.destroy=function(){var H=this.context.gl;this.buffer&&(H.deleteBuffer(this.buffer),delete this.buffer)};var ge={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Te=function(H,ve,j,de){this.length=ve.length,this.attributes=j,this.itemSize=ve.bytesPerElement,this.dynamicDraw=de,this.context=H;var Ae=H.gl;this.buffer=Ae.createBuffer(),H.bindVertexBuffer.set(this.buffer),Ae.bufferData(Ae.ARRAY_BUFFER,ve.arrayBuffer,this.dynamicDraw?Ae.DYNAMIC_DRAW:Ae.STATIC_DRAW),this.dynamicDraw||delete ve.arrayBuffer};Te.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Te.prototype.updateData=function(H){var ve=this.context.gl;this.bind(),ve.bufferSubData(ve.ARRAY_BUFFER,0,H.arrayBuffer)},Te.prototype.enableAttributes=function(H,ve){for(var j=0;j<this.attributes.length;j++){var de=this.attributes[j],Ae=ve.attributes[de.name];Ae!==void 0&&H.enableVertexAttribArray(Ae)}},Te.prototype.setVertexAttribPointers=function(H,ve,j){for(var de=0;de<this.attributes.length;de++){var Ae=this.attributes[de],Ce=ve.attributes[Ae.name];Ce!==void 0&&H.vertexAttribPointer(Ce,Ae.components,H[ge[Ae.type]],!1,this.itemSize,Ae.offset+this.itemSize*(j||0))}},Te.prototype.destroy=function(){var H=this.context.gl;this.buffer&&(H.deleteBuffer(this.buffer),delete this.buffer)};var _e=function(H){this.gl=H.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};_e.prototype.get=function(){return this.current},_e.prototype.set=function(H){},_e.prototype.getDefault=function(){return this.default},_e.prototype.setDefault=function(){this.set(this.default)};var De=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return e.Color.transparent},H.prototype.set=function(j){var de=this.current;j.r===de.r&&j.g===de.g&&j.b===de.b&&j.a===de.a&&!this.dirty||(this.gl.clearColor(j.r,j.g,j.b,j.a),this.current=j,this.dirty=!1)},H}(_e),Oe=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return 1},H.prototype.set=function(j){j===this.current&&!this.dirty||(this.gl.clearDepth(j),this.current=j,this.dirty=!1)},H}(_e),Ue=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return 0},H.prototype.set=function(j){j===this.current&&!this.dirty||(this.gl.clearStencil(j),this.current=j,this.dirty=!1)},H}(_e),xe=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return[!0,!0,!0,!0]},H.prototype.set=function(j){var de=this.current;j[0]===de[0]&&j[1]===de[1]&&j[2]===de[2]&&j[3]===de[3]&&!this.dirty||(this.gl.colorMask(j[0],j[1],j[2],j[3]),this.current=j,this.dirty=!1)},H}(_e),Pe=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!0},H.prototype.set=function(j){j===this.current&&!this.dirty||(this.gl.depthMask(j),this.current=j,this.dirty=!1)},H}(_e),Ve=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return 255},H.prototype.set=function(j){j===this.current&&!this.dirty||(this.gl.stencilMask(j),this.current=j,this.dirty=!1)},H}(_e),Qe=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},H.prototype.set=function(j){var de=this.current;j.func===de.func&&j.ref===de.ref&&j.mask===de.mask&&!this.dirty||(this.gl.stencilFunc(j.func,j.ref,j.mask),this.current=j,this.dirty=!1)},H}(_e),Fe=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){var j=this.gl;return[j.KEEP,j.KEEP,j.KEEP]},H.prototype.set=function(j){var de=this.current;j[0]===de[0]&&j[1]===de[1]&&j[2]===de[2]&&!this.dirty||(this.gl.stencilOp(j[0],j[1],j[2]),this.current=j,this.dirty=!1)},H}(_e),Le=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function(j){if(!(j===this.current&&!this.dirty)){var de=this.gl;j?de.enable(de.STENCIL_TEST):de.disable(de.STENCIL_TEST),this.current=j,this.dirty=!1}},H}(_e),Ne=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return[0,1]},H.prototype.set=function(j){var de=this.current;j[0]===de[0]&&j[1]===de[1]&&!this.dirty||(this.gl.depthRange(j[0],j[1]),this.current=j,this.dirty=!1)},H}(_e),dt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function(j){if(!(j===this.current&&!this.dirty)){var de=this.gl;j?de.enable(de.DEPTH_TEST):de.disable(de.DEPTH_TEST),this.current=j,this.dirty=!1}},H}(_e),Dt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.LESS},H.prototype.set=function(j){j===this.current&&!this.dirty||(this.gl.depthFunc(j),this.current=j,this.dirty=!1)},H}(_e),Xt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function(j){if(!(j===this.current&&!this.dirty)){var de=this.gl;j?de.enable(de.BLEND):de.disable(de.BLEND),this.current=j,this.dirty=!1}},H}(_e),Tt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){var j=this.gl;return[j.ONE,j.ZERO]},H.prototype.set=function(j){var de=this.current;j[0]===de[0]&&j[1]===de[1]&&!this.dirty||(this.gl.blendFunc(j[0],j[1]),this.current=j,this.dirty=!1)},H}(_e),zt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return e.Color.transparent},H.prototype.set=function(j){var de=this.current;j.r===de.r&&j.g===de.g&&j.b===de.b&&j.a===de.a&&!this.dirty||(this.gl.blendColor(j.r,j.g,j.b,j.a),this.current=j,this.dirty=!1)},H}(_e),Ut=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.FUNC_ADD},H.prototype.set=function(j){j===this.current&&!this.dirty||(this.gl.blendEquation(j),this.current=j,this.dirty=!1)},H}(_e),Et=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function(j){if(!(j===this.current&&!this.dirty)){var de=this.gl;j?de.enable(de.CULL_FACE):de.disable(de.CULL_FACE),this.current=j,this.dirty=!1}},H}(_e),Mt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.BACK},H.prototype.set=function(j){j===this.current&&!this.dirty||(this.gl.cullFace(j),this.current=j,this.dirty=!1)},H}(_e),rt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.CCW},H.prototype.set=function(j){j===this.current&&!this.dirty||(this.gl.frontFace(j),this.current=j,this.dirty=!1)},H}(_e),ct=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function(j){j===this.current&&!this.dirty||(this.gl.useProgram(j),this.current=j,this.dirty=!1)},H}(_e),Ze=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.TEXTURE0},H.prototype.set=function(j){j===this.current&&!this.dirty||(this.gl.activeTexture(j),this.current=j,this.dirty=!1)},H}(_e),ke=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){var j=this.gl;return[0,0,j.drawingBufferWidth,j.drawingBufferHeight]},H.prototype.set=function(j){var de=this.current;j[0]===de[0]&&j[1]===de[1]&&j[2]===de[2]&&j[3]===de[3]&&!this.dirty||(this.gl.viewport(j[0],j[1],j[2],j[3]),this.current=j,this.dirty=!1)},H}(_e),Ge=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function(j){if(!(j===this.current&&!this.dirty)){var de=this.gl;de.bindFramebuffer(de.FRAMEBUFFER,j),this.current=j,this.dirty=!1}},H}(_e),Je=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function(j){if(!(j===this.current&&!this.dirty)){var de=this.gl;de.bindRenderbuffer(de.RENDERBUFFER,j),this.current=j,this.dirty=!1}},H}(_e),it=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function(j){if(!(j===this.current&&!this.dirty)){var de=this.gl;de.bindTexture(de.TEXTURE_2D,j),this.current=j,this.dirty=!1}},H}(_e),Pt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function(j){if(!(j===this.current&&!this.dirty)){var de=this.gl;de.bindBuffer(de.ARRAY_BUFFER,j),this.current=j,this.dirty=!1}},H}(_e),At=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function(j){var de=this.gl;de.bindBuffer(de.ELEMENT_ARRAY_BUFFER,j),this.current=j,this.dirty=!1},H}(_e),Ot=function(ce){function H(ve){ce.call(this,ve),this.vao=ve.extVertexArrayObject}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function(j){!this.vao||j===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(j),this.current=j,this.dirty=!1)},H}(_e),Jt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return 4},H.prototype.set=function(j){if(!(j===this.current&&!this.dirty)){var de=this.gl;de.pixelStorei(de.UNPACK_ALIGNMENT,j),this.current=j,this.dirty=!1}},H}(_e),Bt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function(j){if(!(j===this.current&&!this.dirty)){var de=this.gl;de.pixelStorei(de.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j),this.current=j,this.dirty=!1}},H}(_e),qt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function(j){if(!(j===this.current&&!this.dirty)){var de=this.gl;de.pixelStorei(de.UNPACK_FLIP_Y_WEBGL,j),this.current=j,this.dirty=!1}},H}(_e),rr=function(ce){function H(ve,j){ce.call(this,ve),this.context=ve,this.parent=j}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H}(_e),er=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.setDirty=function(){this.dirty=!0},H.prototype.set=function(j){if(!(j===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var de=this.gl;de.framebufferTexture2D(de.FRAMEBUFFER,de.COLOR_ATTACHMENT0,de.TEXTURE_2D,j,0),this.current=j,this.dirty=!1}},H}(rr),pr=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.set=function(j){if(!(j===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var de=this.gl;de.framebufferRenderbuffer(de.FRAMEBUFFER,de.DEPTH_ATTACHMENT,de.RENDERBUFFER,j),this.current=j,this.dirty=!1}},H}(rr),Xr=function(H,ve,j,de){this.context=H,this.width=ve,this.height=j;var Ae=H.gl,Ce=this.framebuffer=Ae.createFramebuffer();this.colorAttachment=new er(H,Ce),de&&(this.depthAttachment=new pr(H,Ce))};Xr.prototype.destroy=function(){var H=this.context.gl,ve=this.colorAttachment.get();if(ve&&H.deleteTexture(ve),this.depthAttachment){var j=this.depthAttachment.get();j&&H.deleteRenderbuffer(j)}H.deleteFramebuffer(this.framebuffer)};var hn=519,$r=function(H,ve,j){this.func=H,this.mask=ve,this.range=j};$r.ReadOnly=!1,$r.ReadWrite=!0,$r.disabled=new $r(hn,$r.ReadOnly,[0,1]);var nt=519,Gt=7680,Kt=function(H,ve,j,de,Ae,Ce){this.test=H,this.ref=ve,this.mask=j,this.fail=de,this.depthFail=Ae,this.pass=Ce};Kt.disabled=new Kt({func:nt,mask:0},0,0,Gt,Gt,Gt);var Ht=0,_r=1,tt=771,je=function(H,ve,j){this.blendFunction=H,this.blendColor=ve,this.mask=j};je.Replace=[_r,Ht],je.disabled=new je(je.Replace,e.Color.transparent,[!1,!1,!1,!1]),je.unblended=new je(je.Replace,e.Color.transparent,[!0,!0,!0,!0]),je.alphaBlended=new je([_r,tt],e.Color.transparent,[!0,!0,!0,!0]);var st=1029,ft=2305,Me=function(H,ve,j){this.enable=H,this.mode=ve,this.frontFace=j};Me.disabled=new Me(!1,st,ft),Me.backCCW=new Me(!0,st,ft);var Se=function(H){this.gl=H,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new De(this),this.clearDepth=new Oe(this),this.clearStencil=new Ue(this),this.colorMask=new xe(this),this.depthMask=new Pe(this),this.stencilMask=new Ve(this),this.stencilFunc=new Qe(this),this.stencilOp=new Fe(this),this.stencilTest=new Le(this),this.depthRange=new Ne(this),this.depthTest=new dt(this),this.depthFunc=new Dt(this),this.blend=new Xt(this),this.blendFunc=new Tt(this),this.blendColor=new zt(this),this.blendEquation=new Ut(this),this.cullFace=new Et(this),this.cullFaceSide=new Mt(this),this.frontFace=new rt(this),this.program=new ct(this),this.activeTexture=new Ze(this),this.viewport=new ke(this),this.bindFramebuffer=new Ge(this),this.bindRenderbuffer=new Je(this),this.bindTexture=new it(this),this.bindVertexBuffer=new Pt(this),this.bindElementBuffer=new At(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ot(this),this.pixelStoreUnpack=new Jt(this),this.pixelStoreUnpackPremultiplyAlpha=new Bt(this),this.pixelStoreUnpackFlipY=new qt(this),this.extTextureFilterAnisotropic=H.getExtension("EXT_texture_filter_anisotropic")||H.getExtension("MOZ_EXT_texture_filter_anisotropic")||H.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=H.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=H.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(H.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=H.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=H.getExtension("EXT_disjoint_timer_query")};Se.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Se.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Se.prototype.createIndexBuffer=function(H,ve){return new pe(this,H,ve)},Se.prototype.createVertexBuffer=function(H,ve,j){return new Te(this,H,ve,j)},Se.prototype.createRenderbuffer=function(H,ve,j){var de=this.gl,Ae=de.createRenderbuffer();return this.bindRenderbuffer.set(Ae),de.renderbufferStorage(de.RENDERBUFFER,H,ve,j),this.bindRenderbuffer.set(null),Ae},Se.prototype.createFramebuffer=function(H,ve,j){return new Xr(this,H,ve,j)},Se.prototype.clear=function(H){var ve=H.color,j=H.depth,de=this.gl,Ae=0;ve&&(Ae|=de.COLOR_BUFFER_BIT,this.clearColor.set(ve),this.colorMask.set([!0,!0,!0,!0])),typeof j!="undefined"&&(Ae|=de.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(j),this.depthMask.set(!0)),de.clear(Ae)},Se.prototype.setCullFace=function(H){H.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(H.mode),this.frontFace.set(H.frontFace))},Se.prototype.setDepthMode=function(H){H.func===this.gl.ALWAYS&&!H.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(H.func),this.depthMask.set(H.mask),this.depthRange.set(H.range))},Se.prototype.setStencilMode=function(H){H.test.func===this.gl.ALWAYS&&!H.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(H.mask),this.stencilOp.set([H.fail,H.depthFail,H.pass]),this.stencilFunc.set({func:H.test.func,ref:H.ref,mask:H.test.mask}))},Se.prototype.setColorMode=function(H){e.deepEqual(H.blendFunction,je.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(H.blendFunction),this.blendColor.set(H.blendColor)),this.colorMask.set(H.mask)},Se.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ke=function(ce){function H(ve,j,de){var Ae=this;ce.call(this),this.id=ve,this.dispatcher=de,this.on("data",function(Ce){Ce.dataType==="source"&&Ce.sourceDataType==="metadata"&&(Ae._sourceLoaded=!0),Ae._sourceLoaded&&!Ae._paused&&Ce.dataType==="source"&&Ce.sourceDataType==="content"&&(Ae.reload(),Ae.transform&&Ae.update(Ae.transform))}),this.on("error",function(){Ae._sourceErrored=!0}),this._source=U(ve,j,de,this),this._tiles={},this._cache=new ue(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.onAdd=function(j){this.map=j,this._maxTileCacheSize=j?j._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(j)},H.prototype.onRemove=function(j){this._source&&this._source.onRemove&&this._source.onRemove(j)},H.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var j in this._tiles){var de=this._tiles[j];if(de.state!=="loaded"&&de.state!=="errored")return!1}return!0},H.prototype.getSource=function(){return this._source},H.prototype.pause=function(){this._paused=!0},H.prototype.resume=function(){if(!!this._paused){var j=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,j&&this.reload(),this.transform&&this.update(this.transform)}},H.prototype._loadTile=function(j,de){return this._source.loadTile(j,de)},H.prototype._unloadTile=function(j){if(this._source.unloadTile)return this._source.unloadTile(j,function(){})},H.prototype._abortTile=function(j){if(this._source.abortTile)return this._source.abortTile(j,function(){})},H.prototype.serialize=function(){return this._source.serialize()},H.prototype.prepare=function(j){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var de in this._tiles){var Ae=this._tiles[de];Ae.upload(j),Ae.prepare(this.map.style.imageManager)}},H.prototype.getIds=function(){return e.values(this._tiles).map(function(j){return j.tileID}).sort(Xe).map(function(j){return j.key})},H.prototype.getRenderableIds=function(j){var de=this,Ae=[];for(var Ce in this._tiles)this._isIdRenderable(Ce,j)&&Ae.push(this._tiles[Ce]);return j?Ae.sort(function(Ye,lt){var wt=Ye.tileID,Yt=lt.tileID,ar=new e.Point(wt.canonical.x,wt.canonical.y)._rotate(de.transform.angle),fr=new e.Point(Yt.canonical.x,Yt.canonical.y)._rotate(de.transform.angle);return wt.overscaledZ-Yt.overscaledZ||fr.y-ar.y||fr.x-ar.x}).map(function(Ye){return Ye.tileID.key}):Ae.map(function(Ye){return Ye.tileID}).sort(Xe).map(function(Ye){return Ye.key})},H.prototype.hasRenderableParent=function(j){var de=this.findLoadedParent(j,0);return de?this._isIdRenderable(de.tileID.key):!1},H.prototype._isIdRenderable=function(j,de){return this._tiles[j]&&this._tiles[j].hasData()&&!this._coveredTiles[j]&&(de||!this._tiles[j].holdingForFade())},H.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var j in this._tiles)this._tiles[j].state!=="errored"&&this._reloadTile(j,"reloading")},H.prototype._reloadTile=function(j,de){var Ae=this._tiles[j];!Ae||(Ae.state!=="loading"&&(Ae.state=de),this._loadTile(Ae,this._tileLoaded.bind(this,Ae,j,de)))},H.prototype._tileLoaded=function(j,de,Ae,Ce){if(Ce){j.state="errored",Ce.status!==404?this._source.fire(new e.ErrorEvent(Ce,{tile:j})):this.update(this.transform);return}j.timeAdded=e.browser.now(),Ae==="expired"&&(j.refreshedUponExpiration=!0),this._setTileReloadTimer(de,j),this.getSource().type==="raster-dem"&&j.dem&&this._backfillDEM(j),this._state.initializeTileState(j,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:j,coord:j.tileID}))},H.prototype._backfillDEM=function(j){for(var de=this.getRenderableIds(),Ae=0;Ae<de.length;Ae++){var Ce=de[Ae];if(j.neighboringTiles&&j.neighboringTiles[Ce]){var Ye=this.getTileByID(Ce);lt(j,Ye),lt(Ye,j)}}function lt(wt,Yt){wt.needsHillshadePrepare=!0;var ar=Yt.tileID.canonical.x-wt.tileID.canonical.x,fr=Yt.tileID.canonical.y-wt.tileID.canonical.y,kr=Math.pow(2,wt.tileID.canonical.z),Fr=Yt.tileID.key;ar===0&&fr===0||Math.abs(fr)>1||(Math.abs(ar)>1&&(Math.abs(ar+kr)===1?ar+=kr:Math.abs(ar-kr)===1&&(ar-=kr)),!(!Yt.dem||!wt.dem)&&(wt.dem.backfillBorder(Yt.dem,ar,fr),wt.neighboringTiles&&wt.neighboringTiles[Fr]&&(wt.neighboringTiles[Fr].backfilled=!0)))}},H.prototype.getTile=function(j){return this.getTileByID(j.key)},H.prototype.getTileByID=function(j){return this._tiles[j]},H.prototype._retainLoadedChildren=function(j,de,Ae,Ce){for(var Ye in this._tiles){var lt=this._tiles[Ye];if(!(Ce[Ye]||!lt.hasData()||lt.tileID.overscaledZ<=de||lt.tileID.overscaledZ>Ae)){for(var wt=lt.tileID;lt&&lt.tileID.overscaledZ>de+1;){var Yt=lt.tileID.scaledTo(lt.tileID.overscaledZ-1);lt=this._tiles[Yt.key],lt&&lt.hasData()&&(wt=Yt)}for(var ar=wt;ar.overscaledZ>de;)if(ar=ar.scaledTo(ar.overscaledZ-1),j[ar.key]){Ce[wt.key]=wt;break}}}},H.prototype.findLoadedParent=function(j,de){if(j.key in this._loadedParentTiles){var Ae=this._loadedParentTiles[j.key];return Ae&&Ae.tileID.overscaledZ>=de?Ae:null}for(var Ce=j.overscaledZ-1;Ce>=de;Ce--){var Ye=j.scaledTo(Ce),lt=this._getLoadedTile(Ye);if(lt)return lt}},H.prototype._getLoadedTile=function(j){var de=this._tiles[j.key];if(de&&de.hasData())return de;var Ae=this._cache.getByKey(j.wrapped().key);return Ae},H.prototype.updateCacheSize=function(j){var de=Math.ceil(j.width/this._source.tileSize)+1,Ae=Math.ceil(j.height/this._source.tileSize)+1,Ce=de*Ae,Ye=5,lt=Math.floor(Ce*Ye),wt=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,lt):lt;this._cache.setMaxSize(wt)},H.prototype.handleWrapJump=function(j){var de=this._prevLng===void 0?j:this._prevLng,Ae=j-de,Ce=Ae/360,Ye=Math.round(Ce);if(this._prevLng=j,Ye){var lt={};for(var wt in this._tiles){var Yt=this._tiles[wt];Yt.tileID=Yt.tileID.unwrapTo(Yt.tileID.wrap+Ye),lt[Yt.tileID.key]=Yt}this._tiles=lt;for(var ar in this._timers)clearTimeout(this._timers[ar]),delete this._timers[ar];for(var fr in this._tiles){var kr=this._tiles[fr];this._setTileReloadTimer(fr,kr)}}},H.prototype.update=function(j){var de=this;if(this.transform=j,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(j),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Ae;this.used?this._source.tileID?Ae=j.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ga){return new e.OverscaledTileID(ga.canonical.z,ga.wrap,ga.canonical.z,ga.canonical.x,ga.canonical.y)}):(Ae=j.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ae=Ae.filter(function(ga){return de._source.hasTile(ga)}))):Ae=[];var Ce=j.coveringZoomLevel(this._source),Ye=Math.max(Ce-H.maxOverzooming,this._source.minzoom),lt=Math.max(Ce+H.maxUnderzooming,this._source.minzoom),wt=this._updateRetainedTiles(Ae,Ce);if(ot(this._source.type)){for(var Yt={},ar={},fr=Object.keys(wt),kr=0,Fr=fr;kr<Fr.length;kr+=1){var Or=Fr[kr],zr=wt[Or],jr=this._tiles[Or];if(!(!jr||jr.fadeEndTime&&jr.fadeEndTime<=e.browser.now())){var cn=this.findLoadedParent(zr,Ye);cn&&(this._addTile(cn.tileID),Yt[cn.tileID.key]=cn.tileID),ar[Or]=zr}}this._retainLoadedChildren(ar,Ce,lt,wt);for(var En in Yt)wt[En]||(this._coveredTiles[En]=!0,wt[En]=Yt[En])}for(var Fn in wt)this._tiles[Fn].clearFadeHold();for(var jn=e.keysDifference(this._tiles,wt),qn=0,Qn=jn;qn<Qn.length;qn+=1){var ca=Qn[qn],xa=this._tiles[ca];xa.hasSymbolBuckets&&!xa.holdingForFade()?xa.setHoldDuration(this.map._fadeDuration):(!xa.hasSymbolBuckets||xa.symbolFadeFinished())&&this._removeTile(ca)}this._updateLoadedParentTileCache()}},H.prototype.releaseSymbolFadeTiles=function(){for(var j in this._tiles)this._tiles[j].holdingForFade()&&this._removeTile(j)},H.prototype._updateRetainedTiles=function(j,de){for(var Ae={},Ce={},Ye=Math.max(de-H.maxOverzooming,this._source.minzoom),lt=Math.max(de+H.maxUnderzooming,this._source.minzoom),wt={},Yt=0,ar=j;Yt<ar.length;Yt+=1){var fr=ar[Yt],kr=this._addTile(fr);Ae[fr.key]=fr,!kr.hasData()&&de<this._source.maxzoom&&(wt[fr.key]=fr)}this._retainLoadedChildren(wt,de,lt,Ae);for(var Fr=0,Or=j;Fr<Or.length;Fr+=1){var zr=Or[Fr],jr=this._tiles[zr.key];if(!jr.hasData()){if(de+1>this._source.maxzoom){var cn=zr.children(this._source.maxzoom)[0],En=this.getTile(cn);if(!!En&&En.hasData()){Ae[cn.key]=cn;continue}}else{var Fn=zr.children(this._source.maxzoom);if(Ae[Fn[0].key]&&Ae[Fn[1].key]&&Ae[Fn[2].key]&&Ae[Fn[3].key])continue}for(var jn=jr.wasRequested(),qn=zr.overscaledZ-1;qn>=Ye;--qn){var Qn=zr.scaledTo(qn);if(Ce[Qn.key]||(Ce[Qn.key]=!0,jr=this.getTile(Qn),!jr&&jn&&(jr=this._addTile(Qn)),jr&&(Ae[Qn.key]=Qn,jn=jr.wasRequested(),jr.hasData())))break}}}return Ae},H.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var j in this._tiles){for(var de=[],Ae=void 0,Ce=this._tiles[j].tileID;Ce.overscaledZ>0;){if(Ce.key in this._loadedParentTiles){Ae=this._loadedParentTiles[Ce.key];break}de.push(Ce.key);var Ye=Ce.scaledTo(Ce.overscaledZ-1);if(Ae=this._getLoadedTile(Ye),Ae)break;Ce=Ye}for(var lt=0,wt=de;lt<wt.length;lt+=1){var Yt=wt[lt];this._loadedParentTiles[Yt]=Ae}}},H.prototype._addTile=function(j){var de=this._tiles[j.key];if(de)return de;de=this._cache.getAndRemove(j),de&&(this._setTileReloadTimer(j.key,de),de.tileID=j,this._state.initializeTileState(de,this.map?this.map.painter:null),this._cacheTimers[j.key]&&(clearTimeout(this._cacheTimers[j.key]),delete this._cacheTimers[j.key],this._setTileReloadTimer(j.key,de)));var Ae=Boolean(de);return Ae||(de=new e.Tile(j,this._source.tileSize*j.overscaleFactor()),this._loadTile(de,this._tileLoaded.bind(this,de,j.key,de.state))),de?(de.uses++,this._tiles[j.key]=de,Ae||this._source.fire(new e.Event("dataloading",{tile:de,coord:de.tileID,dataType:"source"})),de):null},H.prototype._setTileReloadTimer=function(j,de){var Ae=this;j in this._timers&&(clearTimeout(this._timers[j]),delete this._timers[j]);var Ce=de.getExpiryTimeout();Ce&&(this._timers[j]=setTimeout(function(){Ae._reloadTile(j,"expired"),delete Ae._timers[j]},Ce))},H.prototype._removeTile=function(j){var de=this._tiles[j];!de||(de.uses--,delete this._tiles[j],this._timers[j]&&(clearTimeout(this._timers[j]),delete this._timers[j]),!(de.uses>0)&&(de.hasData()&&de.state!=="reloading"?this._cache.add(de.tileID,de,de.getExpiryTimeout()):(de.aborted=!0,this._abortTile(de),this._unloadTile(de))))},H.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var j in this._tiles)this._removeTile(j);this._cache.reset()},H.prototype.tilesIn=function(j,de,Ae){var Ce=this,Ye=[],lt=this.transform;if(!lt)return Ye;for(var wt=Ae?lt.getCameraQueryGeometry(j):j,Yt=j.map(function(qn){return lt.pointCoordinate(qn)}),ar=wt.map(function(qn){return lt.pointCoordinate(qn)}),fr=this.getIds(),kr=1/0,Fr=1/0,Or=-1/0,zr=-1/0,jr=0,cn=ar;jr<cn.length;jr+=1){var En=cn[jr];kr=Math.min(kr,En.x),Fr=Math.min(Fr,En.y),Or=Math.max(Or,En.x),zr=Math.max(zr,En.y)}for(var Fn=function(qn){var Qn=Ce._tiles[fr[qn]];if(!Qn.holdingForFade()){var ca=Qn.tileID,xa=Math.pow(2,lt.zoom-Qn.tileID.overscaledZ),ga=de*Qn.queryPadding*e.EXTENT/Qn.tileSize/xa,Ma=[ca.getTilePoint(new e.MercatorCoordinate(kr,Fr)),ca.getTilePoint(new e.MercatorCoordinate(Or,zr))];if(Ma[0].x-ga<e.EXTENT&&Ma[0].y-ga<e.EXTENT&&Ma[1].x+ga>=0&&Ma[1].y+ga>=0){var Ca=Yt.map(function(ni){return ca.getTilePoint(ni)}),Ha=ar.map(function(ni){return ca.getTilePoint(ni)});Ye.push({tile:Qn,tileID:ca,queryGeometry:Ca,cameraQueryGeometry:Ha,scale:xa})}}},jn=0;jn<fr.length;jn++)Fn(jn);return Ye},H.prototype.getVisibleCoordinates=function(j){for(var de=this,Ae=this.getRenderableIds(j).map(function(wt){return de._tiles[wt].tileID}),Ce=0,Ye=Ae;Ce<Ye.length;Ce+=1){var lt=Ye[Ce];lt.posMatrix=this.transform.calculatePosMatrix(lt.toUnwrapped())}return Ae},H.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ot(this._source.type))for(var j in this._tiles){var de=this._tiles[j];if(de.fadeEndTime!==void 0&&de.fadeEndTime>=e.browser.now())return!0}return!1},H.prototype.setFeatureState=function(j,de,Ae){j=j||"_geojsonTileLayer",this._state.updateState(j,de,Ae)},H.prototype.removeFeatureState=function(j,de,Ae){j=j||"_geojsonTileLayer",this._state.removeFeatureState(j,de,Ae)},H.prototype.getFeatureState=function(j,de){return j=j||"_geojsonTileLayer",this._state.getState(j,de)},H.prototype.setDependencies=function(j,de,Ae){var Ce=this._tiles[j];Ce&&Ce.setDependencies(de,Ae)},H.prototype.reloadTilesForDependencies=function(j,de){for(var Ae in this._tiles){var Ce=this._tiles[Ae];Ce.hasDependency(j,de)&&this._reloadTile(Ae,"reloading")}this._cache.filter(function(Ye){return!Ye.hasDependency(j,de)})},H}(e.Evented);Ke.maxOverzooming=10,Ke.maxUnderzooming=3;function Xe(ce,H){var ve=Math.abs(ce.wrap*2)-+(ce.wrap<0),j=Math.abs(H.wrap*2)-+(H.wrap<0);return ce.overscaledZ-H.overscaledZ||j-ve||H.canonical.y-ce.canonical.y||H.canonical.x-ce.canonical.x}function ot(ce){return ce==="raster"||ce==="image"||ce==="video"}function pt(){return new e.window.Worker(Tc.workerUrl)}var vt="mapboxgl_preloaded_worker_pool",Ct=function(){this.active={}};Ct.prototype.acquire=function(H){if(!this.workers)for(this.workers=[];this.workers.length<Ct.workerCount;)this.workers.push(new pt);return this.active[H]=!0,this.workers.slice()},Ct.prototype.release=function(H){delete this.active[H],this.numActive()===0&&(this.workers.forEach(function(ve){ve.terminate()}),this.workers=null)},Ct.prototype.isPreloaded=function(){return!!this.active[vt]},Ct.prototype.numActive=function(){return Object.keys(this.active).length};var St=Math.floor(e.browser.hardwareConcurrency/2);Ct.workerCount=Math.max(Math.min(St,6),1);var Nt;function ir(){return Nt||(Nt=new Ct),Nt}function lr(){var ce=ir();ce.acquire(vt)}function Yr(){var ce=Nt;ce&&(ce.isPreloaded()&&ce.numActive()===1?(ce.release(vt),Nt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function Pr(ce,H){var ve={};for(var j in ce)j!=="ref"&&(ve[j]=ce[j]);return e.refProperties.forEach(function(de){de in H&&(ve[de]=H[de])}),ve}function wr(ce){ce=ce.slice();for(var H=Object.create(null),ve=0;ve<ce.length;ve++)H[ce[ve].id]=ce[ve];for(var j=0;j<ce.length;j++)"ref"in ce[j]&&(ce[j]=Pr(ce[j],H[ce[j].ref]));return ce}function Jr(){var ce={},H=e.styleSpec.$version;for(var ve in e.styleSpec.$root){var j=e.styleSpec.$root[ve];if(j.required){var de=null;ve==="version"?de=H:j.type==="array"?de=[]:de={},de!=null&&(ce[ve]=de)}}return ce}var gr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function mr(ce,H,ve){ve.push({command:gr.addSource,args:[ce,H[ce]]})}function Ur(ce,H,ve){H.push({command:gr.removeSource,args:[ce]}),ve[ce]=!0}function Hr(ce,H,ve,j){Ur(ce,ve,j),mr(ce,H,ve)}function Tr(ce,H,ve){var j;for(j in ce[ve])if(!!ce[ve].hasOwnProperty(j)&&j!=="data"&&!e.deepEqual(ce[ve][j],H[ve][j]))return!1;for(j in H[ve])if(!!H[ve].hasOwnProperty(j)&&j!=="data"&&!e.deepEqual(ce[ve][j],H[ve][j]))return!1;return!0}function et(ce,H,ve,j){ce=ce||{},H=H||{};var de;for(de in ce)!ce.hasOwnProperty(de)||H.hasOwnProperty(de)||Ur(de,ve,j);for(de in H)!H.hasOwnProperty(de)||(ce.hasOwnProperty(de)?e.deepEqual(ce[de],H[de])||(ce[de].type==="geojson"&&H[de].type==="geojson"&&Tr(ce,H,de)?ve.push({command:gr.setGeoJSONSourceData,args:[de,H[de].data]}):Hr(de,H,ve,j)):mr(de,H,ve))}function Lt(ce,H,ve,j,de,Ae){ce=ce||{},H=H||{};var Ce;for(Ce in ce)!ce.hasOwnProperty(Ce)||e.deepEqual(ce[Ce],H[Ce])||ve.push({command:Ae,args:[j,Ce,H[Ce],de]});for(Ce in H)!H.hasOwnProperty(Ce)||ce.hasOwnProperty(Ce)||e.deepEqual(ce[Ce],H[Ce])||ve.push({command:Ae,args:[j,Ce,H[Ce],de]})}function jt(ce){return ce.id}function sr(ce,H){return ce[H.id]=H,ce}function Ir(ce,H,ve){ce=ce||[],H=H||[];var j=ce.map(jt),de=H.map(jt),Ae=ce.reduce(sr,{}),Ce=H.reduce(sr,{}),Ye=j.slice(),lt=Object.create(null),wt,Yt,ar,fr,kr,Fr,Or;for(wt=0,Yt=0;wt<j.length;wt++)ar=j[wt],Ce.hasOwnProperty(ar)?Yt++:(ve.push({command:gr.removeLayer,args:[ar]}),Ye.splice(Ye.indexOf(ar,Yt),1));for(wt=0,Yt=0;wt<de.length;wt++)ar=de[de.length-1-wt],Ye[Ye.length-1-wt]!==ar&&(Ae.hasOwnProperty(ar)?(ve.push({command:gr.removeLayer,args:[ar]}),Ye.splice(Ye.lastIndexOf(ar,Ye.length-Yt),1)):Yt++,Fr=Ye[Ye.length-wt],ve.push({command:gr.addLayer,args:[Ce[ar],Fr]}),Ye.splice(Ye.length-wt,0,ar),lt[ar]=!0);for(wt=0;wt<de.length;wt++)if(ar=de[wt],fr=Ae[ar],kr=Ce[ar],!(lt[ar]||e.deepEqual(fr,kr))){if(!e.deepEqual(fr.source,kr.source)||!e.deepEqual(fr["source-layer"],kr["source-layer"])||!e.deepEqual(fr.type,kr.type)){ve.push({command:gr.removeLayer,args:[ar]}),Fr=Ye[Ye.lastIndexOf(ar)+1],ve.push({command:gr.addLayer,args:[kr,Fr]});continue}Lt(fr.layout,kr.layout,ve,ar,null,gr.setLayoutProperty),Lt(fr.paint,kr.paint,ve,ar,null,gr.setPaintProperty),e.deepEqual(fr.filter,kr.filter)||ve.push({command:gr.setFilter,args:[ar,kr.filter]}),(!e.deepEqual(fr.minzoom,kr.minzoom)||!e.deepEqual(fr.maxzoom,kr.maxzoom))&&ve.push({command:gr.setLayerZoomRange,args:[ar,kr.minzoom,kr.maxzoom]});for(Or in fr)!fr.hasOwnProperty(Or)||Or==="layout"||Or==="paint"||Or==="filter"||Or==="metadata"||Or==="minzoom"||Or==="maxzoom"||(Or.indexOf("paint.")===0?Lt(fr[Or],kr[Or],ve,ar,Or.slice(6),gr.setPaintProperty):e.deepEqual(fr[Or],kr[Or])||ve.push({command:gr.setLayerProperty,args:[ar,Or,kr[Or]]}));for(Or in kr)!kr.hasOwnProperty(Or)||fr.hasOwnProperty(Or)||Or==="layout"||Or==="paint"||Or==="filter"||Or==="metadata"||Or==="minzoom"||Or==="maxzoom"||(Or.indexOf("paint.")===0?Lt(fr[Or],kr[Or],ve,ar,Or.slice(6),gr.setPaintProperty):e.deepEqual(fr[Or],kr[Or])||ve.push({command:gr.setLayerProperty,args:[ar,Or,kr[Or]]}))}}function Zr(ce,H){if(!ce)return[{command:gr.setStyle,args:[H]}];var ve=[];try{if(!e.deepEqual(ce.version,H.version))return[{command:gr.setStyle,args:[H]}];e.deepEqual(ce.center,H.center)||ve.push({command:gr.setCenter,args:[H.center]}),e.deepEqual(ce.zoom,H.zoom)||ve.push({command:gr.setZoom,args:[H.zoom]}),e.deepEqual(ce.bearing,H.bearing)||ve.push({command:gr.setBearing,args:[H.bearing]}),e.deepEqual(ce.pitch,H.pitch)||ve.push({command:gr.setPitch,args:[H.pitch]}),e.deepEqual(ce.sprite,H.sprite)||ve.push({command:gr.setSprite,args:[H.sprite]}),e.deepEqual(ce.glyphs,H.glyphs)||ve.push({command:gr.setGlyphs,args:[H.glyphs]}),e.deepEqual(ce.transition,H.transition)||ve.push({command:gr.setTransition,args:[H.transition]}),e.deepEqual(ce.light,H.light)||ve.push({command:gr.setLight,args:[H.light]});var j={},de=[];et(ce.sources,H.sources,de,j);var Ae=[];ce.layers&&ce.layers.forEach(function(Ce){j[Ce.source]?ve.push({command:gr.removeLayer,args:[Ce.id]}):Ae.push(Ce)}),ve=ve.concat(de),Ir(Ae,H.layers,ve)}catch(Ce){console.warn("Unable to compute style diff:",Ce),ve=[{command:gr.setStyle,args:[H]}]}return ve}var Lr=function(H,ve){this.reset(H,ve)};Lr.prototype.reset=function(H,ve){this.points=H||[],this._distances=[0];for(var j=1;j<this.points.length;j++)this._distances[j]=this._distances[j-1]+this.points[j].dist(this.points[j-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ve||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Lr.prototype.lerp=function(H){if(this.points.length===1)return this.points[0];H=e.clamp(H,0,1);for(var ve=1,j=this._distances[ve],de=H*this.paddedLength+this.padding;j<de&&ve<this._distances.length;)j=this._distances[++ve];var Ae=ve-1,Ce=this._distances[Ae],Ye=j-Ce,lt=Ye>0?(de-Ce)/Ye:0;return this.points[Ae].mult(1-lt).add(this.points[ve].mult(lt))};var br=function(H,ve,j){var de=this.boxCells=[],Ae=this.circleCells=[];this.xCellCount=Math.ceil(H/j),this.yCellCount=Math.ceil(ve/j);for(var Ce=0;Ce<this.xCellCount*this.yCellCount;Ce++)de.push([]),Ae.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=H,this.height=ve,this.xScale=this.xCellCount/H,this.yScale=this.yCellCount/ve,this.boxUid=0,this.circleUid=0};br.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},br.prototype.insert=function(H,ve,j,de,Ae){this._forEachCell(ve,j,de,Ae,this._insertBoxCell,this.boxUid++),this.boxKeys.push(H),this.bboxes.push(ve),this.bboxes.push(j),this.bboxes.push(de),this.bboxes.push(Ae)},br.prototype.insertCircle=function(H,ve,j,de){this._forEachCell(ve-de,j-de,ve+de,j+de,this._insertCircleCell,this.circleUid++),this.circleKeys.push(H),this.circles.push(ve),this.circles.push(j),this.circles.push(de)},br.prototype._insertBoxCell=function(H,ve,j,de,Ae,Ce){this.boxCells[Ae].push(Ce)},br.prototype._insertCircleCell=function(H,ve,j,de,Ae,Ce){this.circleCells[Ae].push(Ce)},br.prototype._query=function(H,ve,j,de,Ae,Ce){if(j<0||H>this.width||de<0||ve>this.height)return Ae?!1:[];var Ye=[];if(H<=0&&ve<=0&&this.width<=j&&this.height<=de){if(Ae)return!0;for(var lt=0;lt<this.boxKeys.length;lt++)Ye.push({key:this.boxKeys[lt],x1:this.bboxes[lt*4],y1:this.bboxes[lt*4+1],x2:this.bboxes[lt*4+2],y2:this.bboxes[lt*4+3]});for(var wt=0;wt<this.circleKeys.length;wt++){var Yt=this.circles[wt*3],ar=this.circles[wt*3+1],fr=this.circles[wt*3+2];Ye.push({key:this.circleKeys[wt],x1:Yt-fr,y1:ar-fr,x2:Yt+fr,y2:ar+fr})}return Ce?Ye.filter(Ce):Ye}else{var kr={hitTest:Ae,seenUids:{box:{},circle:{}}};return this._forEachCell(H,ve,j,de,this._queryCell,Ye,kr,Ce),Ae?Ye.length>0:Ye}},br.prototype._queryCircle=function(H,ve,j,de,Ae){var Ce=H-j,Ye=H+j,lt=ve-j,wt=ve+j;if(Ye<0||Ce>this.width||wt<0||lt>this.height)return de?!1:[];var Yt=[],ar={hitTest:de,circle:{x:H,y:ve,radius:j},seenUids:{box:{},circle:{}}};return this._forEachCell(Ce,lt,Ye,wt,this._queryCellCircle,Yt,ar,Ae),de?Yt.length>0:Yt},br.prototype.query=function(H,ve,j,de,Ae){return this._query(H,ve,j,de,!1,Ae)},br.prototype.hitTest=function(H,ve,j,de,Ae){return this._query(H,ve,j,de,!0,Ae)},br.prototype.hitTestCircle=function(H,ve,j,de){return this._queryCircle(H,ve,j,!0,de)},br.prototype._queryCell=function(H,ve,j,de,Ae,Ce,Ye,lt){var wt=Ye.seenUids,Yt=this.boxCells[Ae];if(Yt!==null)for(var ar=this.bboxes,fr=0,kr=Yt;fr<kr.length;fr+=1){var Fr=kr[fr];if(!wt.box[Fr]){wt.box[Fr]=!0;var Or=Fr*4;if(H<=ar[Or+2]&&ve<=ar[Or+3]&&j>=ar[Or+0]&&de>=ar[Or+1]&&(!lt||lt(this.boxKeys[Fr]))){if(Ye.hitTest)return Ce.push(!0),!0;Ce.push({key:this.boxKeys[Fr],x1:ar[Or],y1:ar[Or+1],x2:ar[Or+2],y2:ar[Or+3]})}}}var zr=this.circleCells[Ae];if(zr!==null)for(var jr=this.circles,cn=0,En=zr;cn<En.length;cn+=1){var Fn=En[cn];if(!wt.circle[Fn]){wt.circle[Fn]=!0;var jn=Fn*3;if(this._circleAndRectCollide(jr[jn],jr[jn+1],jr[jn+2],H,ve,j,de)&&(!lt||lt(this.circleKeys[Fn]))){if(Ye.hitTest)return Ce.push(!0),!0;var qn=jr[jn],Qn=jr[jn+1],ca=jr[jn+2];Ce.push({key:this.circleKeys[Fn],x1:qn-ca,y1:Qn-ca,x2:qn+ca,y2:Qn+ca})}}}},br.prototype._queryCellCircle=function(H,ve,j,de,Ae,Ce,Ye,lt){var wt=Ye.circle,Yt=Ye.seenUids,ar=this.boxCells[Ae];if(ar!==null)for(var fr=this.bboxes,kr=0,Fr=ar;kr<Fr.length;kr+=1){var Or=Fr[kr];if(!Yt.box[Or]){Yt.box[Or]=!0;var zr=Or*4;if(this._circleAndRectCollide(wt.x,wt.y,wt.radius,fr[zr+0],fr[zr+1],fr[zr+2],fr[zr+3])&&(!lt||lt(this.boxKeys[Or])))return Ce.push(!0),!0}}var jr=this.circleCells[Ae];if(jr!==null)for(var cn=this.circles,En=0,Fn=jr;En<Fn.length;En+=1){var jn=Fn[En];if(!Yt.circle[jn]){Yt.circle[jn]=!0;var qn=jn*3;if(this._circlesCollide(cn[qn],cn[qn+1],cn[qn+2],wt.x,wt.y,wt.radius)&&(!lt||lt(this.circleKeys[jn])))return Ce.push(!0),!0}}},br.prototype._forEachCell=function(H,ve,j,de,Ae,Ce,Ye,lt){for(var wt=this._convertToXCellCoord(H),Yt=this._convertToYCellCoord(ve),ar=this._convertToXCellCoord(j),fr=this._convertToYCellCoord(de),kr=wt;kr<=ar;kr++)for(var Fr=Yt;Fr<=fr;Fr++){var Or=this.xCellCount*Fr+kr;if(Ae.call(this,H,ve,j,de,Or,Ce,Ye,lt))return}},br.prototype._convertToXCellCoord=function(H){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(H*this.xScale)))},br.prototype._convertToYCellCoord=function(H){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(H*this.yScale)))},br.prototype._circlesCollide=function(H,ve,j,de,Ae,Ce){var Ye=de-H,lt=Ae-ve,wt=j+Ce;return wt*wt>Ye*Ye+lt*lt},br.prototype._circleAndRectCollide=function(H,ve,j,de,Ae,Ce,Ye){var lt=(Ce-de)/2,wt=Math.abs(H-(de+lt));if(wt>lt+j)return!1;var Yt=(Ye-Ae)/2,ar=Math.abs(ve-(Ae+Yt));if(ar>Yt+j)return!1;if(wt<=lt||ar<=Yt)return!0;var fr=wt-lt,kr=ar-Yt;return fr*fr+kr*kr<=j*j};function Nr(ce,H,ve,j,de){var Ae=e.create();return H?(e.scale(Ae,Ae,[1/de,1/de,1]),ve||e.rotateZ(Ae,Ae,j.angle)):e.multiply(Ae,j.labelPlaneMatrix,ce),Ae}function kn(ce,H,ve,j,de){if(H){var Ae=e.clone(ce);return e.scale(Ae,Ae,[de,de,1]),ve||e.rotateZ(Ae,Ae,-j.angle),Ae}else return j.glCoordMatrix}function _n(ce,H){var ve=[ce.x,ce.y,0,1];Mr(ve,ve,H);var j=ve[3];return{point:new e.Point(ve[0]/j,ve[1]/j),signedDistanceFromCamera:j}}function Wn(ce,H){return .5+.5*(ce/H)}function Ln(ce,H){var ve=ce[0]/ce[3],j=ce[1]/ce[3],de=ve>=-H[0]&&ve<=H[0]&&j>=-H[1]&&j<=H[1];return de}function Xn(ce,H,ve,j,de,Ae,Ce,Ye){var lt=j?ce.textSizeData:ce.iconSizeData,wt=e.evaluateSizeForZoom(lt,ve.transform.zoom),Yt=[256/ve.width*2+1,256/ve.height*2+1],ar=j?ce.text.dynamicLayoutVertexArray:ce.icon.dynamicLayoutVertexArray;ar.clear();for(var fr=ce.lineVertexArray,kr=j?ce.text.placedSymbolArray:ce.icon.placedSymbolArray,Fr=ve.transform.width/ve.transform.height,Or=!1,zr=0;zr<kr.length;zr++){var jr=kr.get(zr);if(jr.hidden||jr.writingMode===e.WritingMode.vertical&&!Or){ti(jr.numGlyphs,ar);continue}Or=!1;var cn=[jr.anchorX,jr.anchorY,0,1];if(e.transformMat4(cn,cn,H),!Ln(cn,Yt)){ti(jr.numGlyphs,ar);continue}var En=cn[3],Fn=Wn(ve.transform.cameraToCenterDistance,En),jn=e.evaluateSizeForFeature(lt,wt,jr),qn=Ce?jn/Fn:jn*Fn,Qn=new e.Point(jr.anchorX,jr.anchorY),ca=_n(Qn,de).point,xa={},ga=Ta(jr,qn,!1,Ye,H,de,Ae,ce.glyphOffsetArray,fr,ar,ca,Qn,xa,Fr);Or=ga.useVertical,(ga.notEnoughRoom||Or||ga.needsFlipping&&Ta(jr,qn,!0,Ye,H,de,Ae,ce.glyphOffsetArray,fr,ar,ca,Qn,xa,Fr).notEnoughRoom)&&ti(jr.numGlyphs,ar)}j?ce.text.dynamicLayoutVertexBuffer.updateData(ar):ce.icon.dynamicLayoutVertexBuffer.updateData(ar)}function Kn(ce,H,ve,j,de,Ae,Ce,Ye,lt,wt,Yt){var ar=Ye.glyphStartIndex+Ye.numGlyphs,fr=Ye.lineStartIndex,kr=Ye.lineStartIndex+Ye.lineLength,Fr=H.getoffsetX(Ye.glyphStartIndex),Or=H.getoffsetX(ar-1),zr=$a(ce*Fr,ve,j,de,Ae,Ce,Ye.segment,fr,kr,lt,wt,Yt);if(!zr)return null;var jr=$a(ce*Or,ve,j,de,Ae,Ce,Ye.segment,fr,kr,lt,wt,Yt);return jr?{first:zr,last:jr}:null}function Aa(ce,H,ve,j){if(ce===e.WritingMode.horizontal){var de=Math.abs(ve.y-H.y),Ae=Math.abs(ve.x-H.x)*j;if(de>Ae)return{useVertical:!0}}return(ce===e.WritingMode.vertical?H.y<ve.y:H.x>ve.x)?{needsFlipping:!0}:null}function Ta(ce,H,ve,j,de,Ae,Ce,Ye,lt,wt,Yt,ar,fr,kr){var Fr=H/24,Or=ce.lineOffsetX*Fr,zr=ce.lineOffsetY*Fr,jr;if(ce.numGlyphs>1){var cn=ce.glyphStartIndex+ce.numGlyphs,En=ce.lineStartIndex,Fn=ce.lineStartIndex+ce.lineLength,jn=Kn(Fr,Ye,Or,zr,ve,Yt,ar,ce,lt,Ae,fr);if(!jn)return{notEnoughRoom:!0};var qn=_n(jn.first.point,Ce).point,Qn=_n(jn.last.point,Ce).point;if(j&&!ve){var ca=Aa(ce.writingMode,qn,Qn,kr);if(ca)return ca}jr=[jn.first];for(var xa=ce.glyphStartIndex+1;xa<cn-1;xa++)jr.push($a(Fr*Ye.getoffsetX(xa),Or,zr,ve,Yt,ar,ce.segment,En,Fn,lt,Ae,fr));jr.push(jn.last)}else{if(j&&!ve){var ga=_n(ar,de).point,Ma=ce.lineStartIndex+ce.segment+1,Ca=new e.Point(lt.getx(Ma),lt.gety(Ma)),Ha=_n(Ca,de),ni=Ha.signedDistanceFromCamera>0?Ha.point:oi(ar,Ca,ga,1,de),Li=Aa(ce.writingMode,ga,ni,kr);if(Li)return Li}var fi=$a(Fr*Ye.getoffsetX(ce.glyphStartIndex),Or,zr,ve,Yt,ar,ce.segment,ce.lineStartIndex,ce.lineStartIndex+ce.lineLength,lt,Ae,fr);if(!fi)return{notEnoughRoom:!0};jr=[fi]}for(var pi=0,Na=jr;pi<Na.length;pi+=1){var Pi=Na[pi];e.addDynamicAttributes(wt,Pi.point,Pi.angle)}return{}}function oi(ce,H,ve,j,de){var Ae=_n(ce.add(ce.sub(H)._unit()),de).point,Ce=ve.sub(Ae);return ve.add(Ce._mult(j/Ce.mag()))}function $a(ce,H,ve,j,de,Ae,Ce,Ye,lt,wt,Yt,ar){var fr=j?ce-H:ce+H,kr=fr>0?1:-1,Fr=0;j&&(kr*=-1,Fr=Math.PI),kr<0&&(Fr+=Math.PI);for(var Or=kr>0?Ye+Ce:Ye+Ce+1,zr=de,jr=de,cn=0,En=0,Fn=Math.abs(fr),jn=[];cn+En<=Fn;){if(Or+=kr,Or<Ye||Or>=lt)return null;if(jr=zr,jn.push(zr),zr=ar[Or],zr===void 0){var qn=new e.Point(wt.getx(Or),wt.gety(Or)),Qn=_n(qn,Yt);if(Qn.signedDistanceFromCamera>0)zr=ar[Or]=Qn.point;else{var ca=Or-kr,xa=cn===0?Ae:new e.Point(wt.getx(ca),wt.gety(ca));zr=oi(xa,qn,jr,Fn-cn+1,Yt)}}cn+=En,En=jr.dist(zr)}var ga=(Fn-cn)/En,Ma=zr.sub(jr),Ca=Ma.mult(ga)._add(jr);Ca._add(Ma._unit()._perp()._mult(ve*kr));var Ha=Fr+Math.atan2(zr.y-jr.y,zr.x-jr.x);return jn.push(Ca),{point:Ca,angle:Ha,path:jn}}var Va=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ti(ce,H){for(var ve=0;ve<ce;ve++){var j=H.length;H.resize(j+4),H.float32.set(Va,j*3)}}function Mr(ce,H,ve){var j=H[0],de=H[1];return ce[0]=ve[0]*j+ve[4]*de+ve[12],ce[1]=ve[1]*j+ve[5]*de+ve[13],ce[3]=ve[3]*j+ve[7]*de+ve[15],ce}var vn=100,fn=function(H,ve,j){ve===void 0&&(ve=new br(H.width+2*vn,H.height+2*vn,25)),j===void 0&&(j=new br(H.width+2*vn,H.height+2*vn,25)),this.transform=H,this.grid=ve,this.ignoredGrid=j,this.pitchfactor=Math.cos(H._pitch)*H.cameraToCenterDistance,this.screenRightBoundary=H.width+vn,this.screenBottomBoundary=H.height+vn,this.gridRightBoundary=H.width+2*vn,this.gridBottomBoundary=H.height+2*vn};fn.prototype.placeCollisionBox=function(H,ve,j,de,Ae){var Ce=this.projectAndGetPerspectiveRatio(de,H.anchorPointX,H.anchorPointY),Ye=j*Ce.perspectiveRatio,lt=H.x1*Ye+Ce.point.x,wt=H.y1*Ye+Ce.point.y,Yt=H.x2*Ye+Ce.point.x,ar=H.y2*Ye+Ce.point.y;return!this.isInsideGrid(lt,wt,Yt,ar)||!ve&&this.grid.hitTest(lt,wt,Yt,ar,Ae)?{box:[],offscreen:!1}:{box:[lt,wt,Yt,ar],offscreen:this.isOffscreen(lt,wt,Yt,ar)}},fn.prototype.placeCollisionCircles=function(H,ve,j,de,Ae,Ce,Ye,lt,wt,Yt,ar,fr,kr){var Fr=[],Or=new e.Point(ve.anchorX,ve.anchorY),zr=_n(Or,Ce),jr=Wn(this.transform.cameraToCenterDistance,zr.signedDistanceFromCamera),cn=Yt?Ae/jr:Ae*jr,En=cn/e.ONE_EM,Fn=_n(Or,Ye).point,jn={},qn=ve.lineOffsetX*En,Qn=ve.lineOffsetY*En,ca=Kn(En,de,qn,Qn,!1,Fn,Or,ve,j,Ye,jn),xa=!1,ga=!1,Ma=!0;if(ca){for(var Ca=fr*.5*jr+kr,Ha=new e.Point(-vn,-vn),ni=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Li=new Lr,fi=ca.first,pi=ca.last,Na=[],Pi=fi.path.length-1;Pi>=1;Pi--)Na.push(fi.path[Pi]);for(var zi=1;zi<pi.path.length;zi++)Na.push(pi.path[zi]);var Ni=Ca*2.5;if(lt){var _i=Na.map(function(eu){return _n(eu,lt)});_i.some(function(eu){return eu.signedDistanceFromCamera<=0})?Na=[]:Na=_i.map(function(eu){return eu.point})}var ji=[];if(Na.length>0){for(var ii=Na[0].clone(),wi=Na[0].clone(),_o=1;_o<Na.length;_o++)ii.x=Math.min(ii.x,Na[_o].x),ii.y=Math.min(ii.y,Na[_o].y),wi.x=Math.max(wi.x,Na[_o].x),wi.y=Math.max(wi.y,Na[_o].y);ii.x>=Ha.x&&wi.x<=ni.x&&ii.y>=Ha.y&&wi.y<=ni.y?ji=[Na]:wi.x<Ha.x||ii.x>ni.x||wi.y<Ha.y||ii.y>ni.y?ji=[]:ji=e.clipLine([Na],Ha.x,Ha.y,ni.x,ni.y)}for(var Fo=0,Al=ji;Fo<Al.length;Fo+=1){var Ml=Al[Fo];Li.reset(Ml,Ca*.25);var Jl=0;Li.length<=.5*Ca?Jl=1:Jl=Math.ceil(Li.paddedLength/Ni)+1;for(var Ql=0;Ql<Jl;Ql++){var xu=Ql/Math.max(Jl-1,1),$l=Li.lerp(xu),Bs=$l.x+vn,Uu=$l.y+vn;Fr.push(Bs,Uu,Ca,0);var xs=Bs-Ca,ul=Uu-Ca,ql=Bs+Ca,Ul=Uu+Ca;if(Ma=Ma&&this.isOffscreen(xs,ul,ql,Ul),ga=ga||this.isInsideGrid(xs,ul,ql,Ul),!H&&this.grid.hitTestCircle(Bs,Uu,Ca,ar)&&(xa=!0,!wt))return{circles:[],offscreen:!1,collisionDetected:xa}}}}return{circles:!wt&&xa||!ga?[]:Fr,offscreen:Ma,collisionDetected:xa}},fn.prototype.queryRenderedSymbols=function(H){if(H.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var ve=[],j=1/0,de=1/0,Ae=-1/0,Ce=-1/0,Ye=0,lt=H;Ye<lt.length;Ye+=1){var wt=lt[Ye],Yt=new e.Point(wt.x+vn,wt.y+vn);j=Math.min(j,Yt.x),de=Math.min(de,Yt.y),Ae=Math.max(Ae,Yt.x),Ce=Math.max(Ce,Yt.y),ve.push(Yt)}for(var ar=this.grid.query(j,de,Ae,Ce).concat(this.ignoredGrid.query(j,de,Ae,Ce)),fr={},kr={},Fr=0,Or=ar;Fr<Or.length;Fr+=1){var zr=Or[Fr],jr=zr.key;if(fr[jr.bucketInstanceId]===void 0&&(fr[jr.bucketInstanceId]={}),!fr[jr.bucketInstanceId][jr.featureIndex]){var cn=[new e.Point(zr.x1,zr.y1),new e.Point(zr.x2,zr.y1),new e.Point(zr.x2,zr.y2),new e.Point(zr.x1,zr.y2)];!e.polygonIntersectsPolygon(ve,cn)||(fr[jr.bucketInstanceId][jr.featureIndex]=!0,kr[jr.bucketInstanceId]===void 0&&(kr[jr.bucketInstanceId]=[]),kr[jr.bucketInstanceId].push(jr.featureIndex))}}return kr},fn.prototype.insertCollisionBox=function(H,ve,j,de,Ae){var Ce=ve?this.ignoredGrid:this.grid,Ye={bucketInstanceId:j,featureIndex:de,collisionGroupID:Ae};Ce.insert(Ye,H[0],H[1],H[2],H[3])},fn.prototype.insertCollisionCircles=function(H,ve,j,de,Ae){for(var Ce=ve?this.ignoredGrid:this.grid,Ye={bucketInstanceId:j,featureIndex:de,collisionGroupID:Ae},lt=0;lt<H.length;lt+=4)Ce.insertCircle(Ye,H[lt],H[lt+1],H[lt+2])},fn.prototype.projectAndGetPerspectiveRatio=function(H,ve,j){var de=[ve,j,0,1];Mr(de,de,H);var Ae=new e.Point((de[0]/de[3]+1)/2*this.transform.width+vn,(-de[1]/de[3]+1)/2*this.transform.height+vn);return{point:Ae,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/de[3])}},fn.prototype.isOffscreen=function(H,ve,j,de){return j<vn||H>=this.screenRightBoundary||de<vn||ve>this.screenBottomBoundary},fn.prototype.isInsideGrid=function(H,ve,j,de){return j>=0&&H<this.gridRightBoundary&&de>=0&&ve<this.gridBottomBoundary},fn.prototype.getViewportMatrix=function(){var H=e.identity([]);return e.translate(H,H,[-vn,-vn,0]),H};function An(ce,H,ve){return H*(e.EXTENT/(ce.tileSize*Math.pow(2,ve-ce.tileID.overscaledZ)))}var Gn=function(H,ve,j,de){H?this.opacity=Math.max(0,Math.min(1,H.opacity+(H.placed?ve:-ve))):this.opacity=de&&j?1:0,this.placed=j};Gn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ia=function(H,ve,j,de,Ae){this.text=new Gn(H?H.text:null,ve,j,Ae),this.icon=new Gn(H?H.icon:null,ve,de,Ae)};ia.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Yn=function(H,ve,j){this.text=H,this.icon=ve,this.skipFade=j},zn=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},ea=function(H,ve,j,de,Ae){this.bucketInstanceId=H,this.featureIndex=ve,this.sourceLayerIndex=j,this.bucketIndex=de,this.tileID=Ae},wa=function(H){this.crossSourceCollisions=H,this.maxGroupID=0,this.collisionGroups={}};wa.prototype.get=function(H){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[H]){var ve=++this.maxGroupID;this.collisionGroups[H]={ID:ve,predicate:function(j){return j.collisionGroupID===ve}}}return this.collisionGroups[H]};function si(ce,H,ve,j,de){var Ae=e.getAnchorAlignment(ce),Ce=Ae.horizontalAlign,Ye=Ae.verticalAlign,lt=-(Ce-.5)*H,wt=-(Ye-.5)*ve,Yt=e.evaluateVariableOffset(ce,j);return new e.Point(lt+Yt[0]*de,wt+Yt[1]*de)}function Ft(ce,H,ve,j,de,Ae){var Ce=ce.x1,Ye=ce.x2,lt=ce.y1,wt=ce.y2,Yt=ce.anchorPointX,ar=ce.anchorPointY,fr=new e.Point(H,ve);return j&&fr._rotate(de?Ae:-Ae),{x1:Ce+fr.x,y1:lt+fr.y,x2:Ye+fr.x,y2:wt+fr.y,anchorPointX:Yt,anchorPointY:ar}}var cr=function(H,ve,j,de){this.transform=H.clone(),this.collisionIndex=new fn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ve,this.retainedQueryData={},this.collisionGroups=new wa(j),this.collisionCircleArrays={},this.prevPlacement=de,de&&(de.prevPlacement=void 0),this.placedOrientations={}};cr.prototype.getBucketParts=function(H,ve,j,de){var Ae=j.getBucket(ve),Ce=j.latestFeatureIndex;if(!(!Ae||!Ce||ve.id!==Ae.layerIds[0])){var Ye=j.collisionBoxArray,lt=Ae.layers[0].layout,wt=Math.pow(2,this.transform.zoom-j.tileID.overscaledZ),Yt=j.tileSize/e.EXTENT,ar=this.transform.calculatePosMatrix(j.tileID.toUnwrapped()),fr=lt.get("text-pitch-alignment")==="map",kr=lt.get("text-rotation-alignment")==="map",Fr=An(j,1,this.transform.zoom),Or=Nr(ar,fr,kr,this.transform,Fr),zr=null;if(fr){var jr=kn(ar,fr,kr,this.transform,Fr);zr=e.multiply([],this.transform.labelPlaneMatrix,jr)}this.retainedQueryData[Ae.bucketInstanceId]=new ea(Ae.bucketInstanceId,Ce,Ae.sourceLayerIndex,Ae.index,j.tileID);var cn={bucket:Ae,layout:lt,posMatrix:ar,textLabelPlaneMatrix:Or,labelToScreenMatrix:zr,scale:wt,textPixelRatio:Yt,holdingForFade:j.holdingForFade(),collisionBoxArray:Ye,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(Ae.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ae.sourceID)};if(de)for(var En=0,Fn=Ae.sortKeyRanges;En<Fn.length;En+=1){var jn=Fn[En],qn=jn.sortKey,Qn=jn.symbolInstanceStart,ca=jn.symbolInstanceEnd;H.push({sortKey:qn,symbolInstanceStart:Qn,symbolInstanceEnd:ca,parameters:cn})}else H.push({symbolInstanceStart:0,symbolInstanceEnd:Ae.symbolInstances.length,parameters:cn})}},cr.prototype.attemptAnchorPlacement=function(H,ve,j,de,Ae,Ce,Ye,lt,wt,Yt,ar,fr,kr,Fr,Or){var zr=[fr.textOffset0,fr.textOffset1],jr=si(H,j,de,zr,Ae),cn=this.collisionIndex.placeCollisionBox(Ft(ve,jr.x,jr.y,Ce,Ye,this.transform.angle),ar,lt,wt,Yt.predicate);if(Or){var En=this.collisionIndex.placeCollisionBox(Ft(Or,jr.x,jr.y,Ce,Ye,this.transform.angle),ar,lt,wt,Yt.predicate);if(En.box.length===0)return}if(cn.box.length>0){var Fn;return this.prevPlacement&&this.prevPlacement.variableOffsets[fr.crossTileID]&&this.prevPlacement.placements[fr.crossTileID]&&this.prevPlacement.placements[fr.crossTileID].text&&(Fn=this.prevPlacement.variableOffsets[fr.crossTileID].anchor),this.variableOffsets[fr.crossTileID]={textOffset:zr,width:j,height:de,anchor:H,textBoxScale:Ae,prevAnchor:Fn},this.markUsedJustification(kr,H,fr,Fr),kr.allowVerticalPlacement&&(this.markUsedOrientation(kr,Fr,fr),this.placedOrientations[fr.crossTileID]=Fr),{shift:jr,placedGlyphBoxes:cn}}},cr.prototype.placeLayerBucketPart=function(H,ve,j){var de=this,Ae=H.parameters,Ce=Ae.bucket,Ye=Ae.layout,lt=Ae.posMatrix,wt=Ae.textLabelPlaneMatrix,Yt=Ae.labelToScreenMatrix,ar=Ae.textPixelRatio,fr=Ae.holdingForFade,kr=Ae.collisionBoxArray,Fr=Ae.partiallyEvaluatedTextSize,Or=Ae.collisionGroup,zr=Ye.get("text-optional"),jr=Ye.get("icon-optional"),cn=Ye.get("text-allow-overlap"),En=Ye.get("icon-allow-overlap"),Fn=Ye.get("text-rotation-alignment")==="map",jn=Ye.get("text-pitch-alignment")==="map",qn=Ye.get("icon-text-fit")!=="none",Qn=Ye.get("symbol-z-order")==="viewport-y",ca=cn&&(En||!Ce.hasIconData()||jr),xa=En&&(cn||!Ce.hasTextData()||zr);!Ce.collisionArrays&&kr&&Ce.deserializeCollisionBoxes(kr);var ga=function(fi,pi){if(!ve[fi.crossTileID]){if(fr){de.placements[fi.crossTileID]=new Yn(!1,!1,!1);return}var Na=!1,Pi=!1,zi=!0,Ni=null,_i={box:null,offscreen:null},ji={box:null,offscreen:null},ii=null,wi=null,_o=null,Fo=0,Al=0,Ml=0;pi.textFeatureIndex?Fo=pi.textFeatureIndex:fi.useRuntimeCollisionCircles&&(Fo=fi.featureIndex),pi.verticalTextFeatureIndex&&(Al=pi.verticalTextFeatureIndex);var Jl=pi.textBox;if(Jl){var Ql=function(Eo){var Qs=e.WritingMode.horizontal;if(Ce.allowVerticalPlacement&&!Eo&&de.prevPlacement){var $s=de.prevPlacement.placedOrientations[fi.crossTileID];$s&&(de.placedOrientations[fi.crossTileID]=$s,Qs=$s,de.markUsedOrientation(Ce,Qs,fi))}return Qs},xu=function(Eo,Qs){if(Ce.allowVerticalPlacement&&fi.numVerticalGlyphVertices>0&&pi.verticalTextBox)for(var $s=0,Pf=Ce.writingModes;$s<Pf.length;$s+=1){var rc=Pf[$s];if(rc===e.WritingMode.vertical?(_i=Qs(),ji=_i):_i=Eo(),_i&&_i.box&&_i.box.length)break}else _i=Eo()};if(Ye.get("text-variable-anchor")){var xs=Ye.get("text-variable-anchor");if(de.prevPlacement&&de.prevPlacement.variableOffsets[fi.crossTileID]){var ul=de.prevPlacement.variableOffsets[fi.crossTileID];xs.indexOf(ul.anchor)>0&&(xs=xs.filter(function(Eo){return Eo!==ul.anchor}),xs.unshift(ul.anchor))}var ql=function(Eo,Qs,$s){for(var Pf=Eo.x2-Eo.x1,rc=Eo.y2-Eo.y1,jc=fi.textBoxScale,Kc=qn&&!En?Qs:null,mf={box:[],offscreen:!1},Jc=cn?xs.length*2:xs.length,Df=0;Df<Jc;++Df){var Qc=xs[Df%xs.length],$c=Df>=xs.length,nc=de.attemptAnchorPlacement(Qc,Eo,Pf,rc,jc,Fn,jn,ar,lt,Or,$c,fi,Ce,$s,Kc);if(nc&&(mf=nc.placedGlyphBoxes,mf&&mf.box&&mf.box.length)){Na=!0,Ni=nc.shift;break}}return mf},Ul=function(){return ql(Jl,pi.iconBox,e.WritingMode.horizontal)},eu=function(){var Eo=pi.verticalTextBox,Qs=_i&&_i.box&&_i.box.length;return Ce.allowVerticalPlacement&&!Qs&&fi.numVerticalGlyphVertices>0&&Eo?ql(Eo,pi.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}};xu(Ul,eu),_i&&(Na=_i.box,zi=_i.offscreen);var kf=Ql(_i&&_i.box);if(!Na&&de.prevPlacement){var Wu=de.prevPlacement.variableOffsets[fi.crossTileID];Wu&&(de.variableOffsets[fi.crossTileID]=Wu,de.markUsedJustification(Ce,Wu.anchor,fi,kf))}}else{var $l=function(Eo,Qs){var $s=de.collisionIndex.placeCollisionBox(Eo,cn,ar,lt,Or.predicate);return $s&&$s.box&&$s.box.length&&(de.markUsedOrientation(Ce,Qs,fi),de.placedOrientations[fi.crossTileID]=Qs),$s},Bs=function(){return $l(Jl,e.WritingMode.horizontal)},Uu=function(){var Eo=pi.verticalTextBox;return Ce.allowVerticalPlacement&&fi.numVerticalGlyphVertices>0&&Eo?$l(Eo,e.WritingMode.vertical):{box:null,offscreen:null}};xu(Bs,Uu),Ql(_i&&_i.box&&_i.box.length)}}if(ii=_i,Na=ii&&ii.box&&ii.box.length>0,zi=ii&&ii.offscreen,fi.useRuntimeCollisionCircles){var fs=Ce.text.placedSymbolArray.get(fi.centerJustifiedTextSymbolIndex),gf=e.evaluateSizeForFeature(Ce.textSizeData,Fr,fs),ks=Ye.get("text-padding"),yf=fi.collisionCircleDiameter;wi=de.collisionIndex.placeCollisionCircles(cn,fs,Ce.lineVertexArray,Ce.glyphOffsetArray,gf,lt,wt,Yt,j,jn,Or.predicate,yf,ks),Na=cn||wi.circles.length>0&&!wi.collisionDetected,zi=zi&&wi.offscreen}if(pi.iconFeatureIndex&&(Ml=pi.iconFeatureIndex),pi.iconBox){var Ef=function(Eo){var Qs=qn&&Ni?Ft(Eo,Ni.x,Ni.y,Fn,jn,de.transform.angle):Eo;return de.collisionIndex.placeCollisionBox(Qs,En,ar,lt,Or.predicate)};ji&&ji.box&&ji.box.length&&pi.verticalIconBox?(_o=Ef(pi.verticalIconBox),Pi=_o.box.length>0):(_o=Ef(pi.iconBox),Pi=_o.box.length>0),zi=zi&&_o.offscreen}var Cf=zr||fi.numHorizontalGlyphVertices===0&&fi.numVerticalGlyphVertices===0,Ac=jr||fi.numIconVertices===0;if(!Cf&&!Ac?Pi=Na=Pi&&Na:Ac?Cf||(Pi=Pi&&Na):Na=Pi&&Na,Na&&ii&&ii.box&&(ji&&ji.box&&Al?de.collisionIndex.insertCollisionBox(ii.box,Ye.get("text-ignore-placement"),Ce.bucketInstanceId,Al,Or.ID):de.collisionIndex.insertCollisionBox(ii.box,Ye.get("text-ignore-placement"),Ce.bucketInstanceId,Fo,Or.ID)),Pi&&_o&&de.collisionIndex.insertCollisionBox(_o.box,Ye.get("icon-ignore-placement"),Ce.bucketInstanceId,Ml,Or.ID),wi&&(Na&&de.collisionIndex.insertCollisionCircles(wi.circles,Ye.get("text-ignore-placement"),Ce.bucketInstanceId,Fo,Or.ID),j)){var Lf=Ce.bucketInstanceId,rf=de.collisionCircleArrays[Lf];rf===void 0&&(rf=de.collisionCircleArrays[Lf]=new zn);for(var nf=0;nf<wi.circles.length;nf+=4)rf.circles.push(wi.circles[nf+0]),rf.circles.push(wi.circles[nf+1]),rf.circles.push(wi.circles[nf+2]),rf.circles.push(wi.collisionDetected?1:0)}de.placements[fi.crossTileID]=new Yn(Na||ca,Pi||xa,zi||Ce.justReloaded),ve[fi.crossTileID]=!0}};if(Qn)for(var Ma=Ce.getSortedSymbolIndexes(this.transform.angle),Ca=Ma.length-1;Ca>=0;--Ca){var Ha=Ma[Ca];ga(Ce.symbolInstances.get(Ha),Ce.collisionArrays[Ha])}else for(var ni=H.symbolInstanceStart;ni<H.symbolInstanceEnd;ni++)ga(Ce.symbolInstances.get(ni),Ce.collisionArrays[ni]);if(j&&Ce.bucketInstanceId in this.collisionCircleArrays){var Li=this.collisionCircleArrays[Ce.bucketInstanceId];e.invert(Li.invProjMatrix,lt),Li.viewportMatrix=this.collisionIndex.getViewportMatrix()}Ce.justReloaded=!1},cr.prototype.markUsedJustification=function(H,ve,j,de){var Ae={left:j.leftJustifiedTextSymbolIndex,center:j.centerJustifiedTextSymbolIndex,right:j.rightJustifiedTextSymbolIndex},Ce;de===e.WritingMode.vertical?Ce=j.verticalPlacedTextSymbolIndex:Ce=Ae[e.getAnchorJustification(ve)];for(var Ye=[j.leftJustifiedTextSymbolIndex,j.centerJustifiedTextSymbolIndex,j.rightJustifiedTextSymbolIndex,j.verticalPlacedTextSymbolIndex],lt=0,wt=Ye;lt<wt.length;lt+=1){var Yt=wt[lt];Yt>=0&&(Ce>=0&&Yt!==Ce?H.text.placedSymbolArray.get(Yt).crossTileID=0:H.text.placedSymbolArray.get(Yt).crossTileID=j.crossTileID)}},cr.prototype.markUsedOrientation=function(H,ve,j){for(var de=ve===e.WritingMode.horizontal||ve===e.WritingMode.horizontalOnly?ve:0,Ae=ve===e.WritingMode.vertical?ve:0,Ce=[j.leftJustifiedTextSymbolIndex,j.centerJustifiedTextSymbolIndex,j.rightJustifiedTextSymbolIndex],Ye=0,lt=Ce;Ye<lt.length;Ye+=1){var wt=lt[Ye];H.text.placedSymbolArray.get(wt).placedOrientation=de}j.verticalPlacedTextSymbolIndex&&(H.text.placedSymbolArray.get(j.verticalPlacedTextSymbolIndex).placedOrientation=Ae)},cr.prototype.commit=function(H){this.commitTime=H,this.zoomAtLastRecencyCheck=this.transform.zoom;var ve=this.prevPlacement,j=!1;this.prevZoomAdjustment=ve?ve.zoomAdjustment(this.transform.zoom):0;var de=ve?ve.symbolFadeChange(H):1,Ae=ve?ve.opacities:{},Ce=ve?ve.variableOffsets:{},Ye=ve?ve.placedOrientations:{};for(var lt in this.placements){var wt=this.placements[lt],Yt=Ae[lt];Yt?(this.opacities[lt]=new ia(Yt,de,wt.text,wt.icon),j=j||wt.text!==Yt.text.placed||wt.icon!==Yt.icon.placed):(this.opacities[lt]=new ia(null,de,wt.text,wt.icon,wt.skipFade),j=j||wt.text||wt.icon)}for(var ar in Ae){var fr=Ae[ar];if(!this.opacities[ar]){var kr=new ia(fr,de,!1,!1);kr.isHidden()||(this.opacities[ar]=kr,j=j||fr.text.placed||fr.icon.placed)}}for(var Fr in Ce)!this.variableOffsets[Fr]&&this.opacities[Fr]&&!this.opacities[Fr].isHidden()&&(this.variableOffsets[Fr]=Ce[Fr]);for(var Or in Ye)!this.placedOrientations[Or]&&this.opacities[Or]&&!this.opacities[Or].isHidden()&&(this.placedOrientations[Or]=Ye[Or]);j?this.lastPlacementChangeTime=H:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=ve?ve.lastPlacementChangeTime:H)},cr.prototype.updateLayerOpacities=function(H,ve){for(var j={},de=0,Ae=ve;de<Ae.length;de+=1){var Ce=Ae[de],Ye=Ce.getBucket(H);Ye&&Ce.latestFeatureIndex&&H.id===Ye.layerIds[0]&&this.updateBucketOpacities(Ye,j,Ce.collisionBoxArray)}},cr.prototype.updateBucketOpacities=function(H,ve,j){var de=this;H.hasTextData()&&H.text.opacityVertexArray.clear(),H.hasIconData()&&H.icon.opacityVertexArray.clear(),H.hasIconCollisionBoxData()&&H.iconCollisionBox.collisionVertexArray.clear(),H.hasTextCollisionBoxData()&&H.textCollisionBox.collisionVertexArray.clear();var Ae=H.layers[0].layout,Ce=new ia(null,0,!1,!1,!0),Ye=Ae.get("text-allow-overlap"),lt=Ae.get("icon-allow-overlap"),wt=Ae.get("text-variable-anchor"),Yt=Ae.get("text-rotation-alignment")==="map",ar=Ae.get("text-pitch-alignment")==="map",fr=Ae.get("icon-text-fit")!=="none",kr=new ia(null,0,Ye&&(lt||!H.hasIconData()||Ae.get("icon-optional")),lt&&(Ye||!H.hasTextData()||Ae.get("text-optional")),!0);!H.collisionArrays&&j&&(H.hasIconCollisionBoxData()||H.hasTextCollisionBoxData())&&H.deserializeCollisionBoxes(j);for(var Fr=function(cn,En,Fn){for(var jn=0;jn<En/4;jn++)cn.opacityVertexArray.emplaceBack(Fn)},Or=function(cn){var En=H.symbolInstances.get(cn),Fn=En.numHorizontalGlyphVertices,jn=En.numVerticalGlyphVertices,qn=En.crossTileID,Qn=ve[qn],ca=de.opacities[qn];Qn?ca=Ce:ca||(ca=kr,de.opacities[qn]=ca),ve[qn]=!0;var xa=Fn>0||jn>0,ga=En.numIconVertices>0,Ma=de.placedOrientations[En.crossTileID],Ca=Ma===e.WritingMode.vertical,Ha=Ma===e.WritingMode.horizontal||Ma===e.WritingMode.horizontalOnly;if(xa){var ni=Rr(ca.text),Li=Ca?dn:ni;Fr(H.text,Fn,Li);var fi=Ha?dn:ni;Fr(H.text,jn,fi);var pi=ca.text.isHidden();[En.rightJustifiedTextSymbolIndex,En.centerJustifiedTextSymbolIndex,En.leftJustifiedTextSymbolIndex].forEach(function(Ml){Ml>=0&&(H.text.placedSymbolArray.get(Ml).hidden=pi||Ca?1:0)}),En.verticalPlacedTextSymbolIndex>=0&&(H.text.placedSymbolArray.get(En.verticalPlacedTextSymbolIndex).hidden=pi||Ha?1:0);var Na=de.variableOffsets[En.crossTileID];Na&&de.markUsedJustification(H,Na.anchor,En,Ma);var Pi=de.placedOrientations[En.crossTileID];Pi&&(de.markUsedJustification(H,"left",En,Pi),de.markUsedOrientation(H,Pi,En))}if(ga){var zi=Rr(ca.icon),Ni=!(fr&&En.verticalPlacedIconSymbolIndex&&Ca);if(En.placedIconSymbolIndex>=0){var _i=Ni?zi:dn;Fr(H.icon,En.numIconVertices,_i),H.icon.placedSymbolArray.get(En.placedIconSymbolIndex).hidden=ca.icon.isHidden()}if(En.verticalPlacedIconSymbolIndex>=0){var ji=Ni?dn:zi;Fr(H.icon,En.numVerticalIconVertices,ji),H.icon.placedSymbolArray.get(En.verticalPlacedIconSymbolIndex).hidden=ca.icon.isHidden()}}if(H.hasIconCollisionBoxData()||H.hasTextCollisionBoxData()){var ii=H.collisionArrays[cn];if(ii){var wi=new e.Point(0,0);if(ii.textBox||ii.verticalTextBox){var _o=!0;if(wt){var Fo=de.variableOffsets[qn];Fo?(wi=si(Fo.anchor,Fo.width,Fo.height,Fo.textOffset,Fo.textBoxScale),Yt&&wi._rotate(ar?de.transform.angle:-de.transform.angle)):_o=!1}ii.textBox&&qr(H.textCollisionBox.collisionVertexArray,ca.text.placed,!_o||Ca,wi.x,wi.y),ii.verticalTextBox&&qr(H.textCollisionBox.collisionVertexArray,ca.text.placed,!_o||Ha,wi.x,wi.y)}var Al=Boolean(!Ha&&ii.verticalIconBox);ii.iconBox&&qr(H.iconCollisionBox.collisionVertexArray,ca.icon.placed,Al,fr?wi.x:0,fr?wi.y:0),ii.verticalIconBox&&qr(H.iconCollisionBox.collisionVertexArray,ca.icon.placed,!Al,fr?wi.x:0,fr?wi.y:0)}}},zr=0;zr<H.symbolInstances.length;zr++)Or(zr);if(H.sortFeatures(this.transform.angle),this.retainedQueryData[H.bucketInstanceId]&&(this.retainedQueryData[H.bucketInstanceId].featureSortOrder=H.featureSortOrder),H.hasTextData()&&H.text.opacityVertexBuffer&&H.text.opacityVertexBuffer.updateData(H.text.opacityVertexArray),H.hasIconData()&&H.icon.opacityVertexBuffer&&H.icon.opacityVertexBuffer.updateData(H.icon.opacityVertexArray),H.hasIconCollisionBoxData()&&H.iconCollisionBox.collisionVertexBuffer&&H.iconCollisionBox.collisionVertexBuffer.updateData(H.iconCollisionBox.collisionVertexArray),H.hasTextCollisionBoxData()&&H.textCollisionBox.collisionVertexBuffer&&H.textCollisionBox.collisionVertexBuffer.updateData(H.textCollisionBox.collisionVertexArray),H.bucketInstanceId in this.collisionCircleArrays){var jr=this.collisionCircleArrays[H.bucketInstanceId];H.placementInvProjMatrix=jr.invProjMatrix,H.placementViewportMatrix=jr.viewportMatrix,H.collisionCircleArray=jr.circles,delete this.collisionCircleArrays[H.bucketInstanceId]}},cr.prototype.symbolFadeChange=function(H){return this.fadeDuration===0?1:(H-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},cr.prototype.zoomAdjustment=function(H){return Math.max(0,(this.transform.zoom-H)/1.5)},cr.prototype.hasTransitions=function(H){return this.stale||H-this.lastPlacementChangeTime<this.fadeDuration},cr.prototype.stillRecent=function(H,ve){var j=this.zoomAtLastRecencyCheck===ve?1-this.zoomAdjustment(ve):1;return this.zoomAtLastRecencyCheck=ve,this.commitTime+this.fadeDuration*j>H},cr.prototype.setStale=function(){this.stale=!0};function qr(ce,H,ve,j,de){ce.emplaceBack(H?1:0,ve?1:0,j||0,de||0),ce.emplaceBack(H?1:0,ve?1:0,j||0,de||0),ce.emplaceBack(H?1:0,ve?1:0,j||0,de||0),ce.emplaceBack(H?1:0,ve?1:0,j||0,de||0)}var nn=Math.pow(2,25),on=Math.pow(2,24),Sn=Math.pow(2,17),xn=Math.pow(2,16),tn=Math.pow(2,9),xr=Math.pow(2,8),dr=Math.pow(2,1);function Rr(ce){if(ce.opacity===0&&!ce.placed)return 0;if(ce.opacity===1&&ce.placed)return 4294967295;var H=ce.placed?1:0,ve=Math.floor(ce.opacity*127);return ve*nn+H*on+ve*Sn+H*xn+ve*tn+H*xr+ve*dr+H}var dn=0,Bn=function(H){this._sortAcrossTiles=H.layout.get("symbol-z-order")!=="viewport-y"&&H.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Bn.prototype.continuePlacement=function(H,ve,j,de,Ae){for(var Ce=this._bucketParts;this._currentTileIndex<H.length;){var Ye=H[this._currentTileIndex];if(ve.getBucketParts(Ce,de,Ye,this._sortAcrossTiles),this._currentTileIndex++,Ae())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ce.sort(function(wt,Yt){return wt.sortKey-Yt.sortKey}));this._currentPartIndex<Ce.length;){var lt=Ce[this._currentPartIndex];if(ve.placeLayerBucketPart(lt,this._seenCrossTileIDs,j),this._currentPartIndex++,Ae())return!0}return!1};var aa=function(H,ve,j,de,Ae,Ce,Ye){this.placement=new cr(H,Ae,Ce,Ye),this._currentPlacementIndex=ve.length-1,this._forceFullPlacement=j,this._showCollisionBoxes=de,this._done=!1};aa.prototype.isDone=function(){return this._done},aa.prototype.continuePlacement=function(H,ve,j){for(var de=this,Ae=e.browser.now(),Ce=function(){var ar=e.browser.now()-Ae;return de._forceFullPlacement?!1:ar>2};this._currentPlacementIndex>=0;){var Ye=H[this._currentPlacementIndex],lt=ve[Ye],wt=this.placement.collisionIndex.transform.zoom;if(lt.type==="symbol"&&(!lt.minzoom||lt.minzoom<=wt)&&(!lt.maxzoom||lt.maxzoom>wt)){this._inProgressLayer||(this._inProgressLayer=new Bn(lt));var Yt=this._inProgressLayer.continuePlacement(j[lt.source],this.placement,this._showCollisionBoxes,lt,Ce);if(Yt)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},aa.prototype.commit=function(H){return this.placement.commit(H),this.placement};var bn=512/e.EXTENT/2,Zn=function(H,ve,j){this.tileID=H,this.indexedSymbolInstances={},this.bucketInstanceId=j;for(var de=0;de<ve.length;de++){var Ae=ve.get(de),Ce=Ae.key;this.indexedSymbolInstances[Ce]||(this.indexedSymbolInstances[Ce]=[]),this.indexedSymbolInstances[Ce].push({crossTileID:Ae.crossTileID,coord:this.getScaledCoordinates(Ae,H)})}};Zn.prototype.getScaledCoordinates=function(H,ve){var j=ve.canonical.z-this.tileID.canonical.z,de=bn/Math.pow(2,j);return{x:Math.floor((ve.canonical.x*e.EXTENT+H.anchorX)*de),y:Math.floor((ve.canonical.y*e.EXTENT+H.anchorY)*de)}},Zn.prototype.findMatches=function(H,ve,j){for(var de=this.tileID.canonical.z<ve.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ve.canonical.z),Ae=0;Ae<H.length;Ae++){var Ce=H.get(Ae);if(!Ce.crossTileID){var Ye=this.indexedSymbolInstances[Ce.key];if(!!Ye)for(var lt=this.getScaledCoordinates(Ce,ve),wt=0,Yt=Ye;wt<Yt.length;wt+=1){var ar=Yt[wt];if(Math.abs(ar.coord.x-lt.x)<=de&&Math.abs(ar.coord.y-lt.y)<=de&&!j[ar.crossTileID]){j[ar.crossTileID]=!0,Ce.crossTileID=ar.crossTileID;break}}}}};var ta=function(){this.maxCrossTileID=0};ta.prototype.generate=function(){return++this.maxCrossTileID};var pa=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};pa.prototype.handleWrapJump=function(H){var ve=Math.round((H-this.lng)/360);if(ve!==0)for(var j in this.indexes){var de=this.indexes[j],Ae={};for(var Ce in de){var Ye=de[Ce];Ye.tileID=Ye.tileID.unwrapTo(Ye.tileID.wrap+ve),Ae[Ye.tileID.key]=Ye}this.indexes[j]=Ae}this.lng=H},pa.prototype.addBucket=function(H,ve,j){if(this.indexes[H.overscaledZ]&&this.indexes[H.overscaledZ][H.key]){if(this.indexes[H.overscaledZ][H.key].bucketInstanceId===ve.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(H.overscaledZ,this.indexes[H.overscaledZ][H.key])}for(var de=0;de<ve.symbolInstances.length;de++){var Ae=ve.symbolInstances.get(de);Ae.crossTileID=0}this.usedCrossTileIDs[H.overscaledZ]||(this.usedCrossTileIDs[H.overscaledZ]={});var Ce=this.usedCrossTileIDs[H.overscaledZ];for(var Ye in this.indexes){var lt=this.indexes[Ye];if(Number(Ye)>H.overscaledZ)for(var wt in lt){var Yt=lt[wt];Yt.tileID.isChildOf(H)&&Yt.findMatches(ve.symbolInstances,H,Ce)}else{var ar=H.scaledTo(Number(Ye)),fr=lt[ar.key];fr&&fr.findMatches(ve.symbolInstances,H,Ce)}}for(var kr=0;kr<ve.symbolInstances.length;kr++){var Fr=ve.symbolInstances.get(kr);Fr.crossTileID||(Fr.crossTileID=j.generate(),Ce[Fr.crossTileID]=!0)}return this.indexes[H.overscaledZ]===void 0&&(this.indexes[H.overscaledZ]={}),this.indexes[H.overscaledZ][H.key]=new Zn(H,ve.symbolInstances,ve.bucketInstanceId),!0},pa.prototype.removeBucketCrossTileIDs=function(H,ve){for(var j in ve.indexedSymbolInstances)for(var de=0,Ae=ve.indexedSymbolInstances[j];de<Ae.length;de+=1){var Ce=Ae[de];delete this.usedCrossTileIDs[H][Ce.crossTileID]}},pa.prototype.removeStaleBuckets=function(H){var ve=!1;for(var j in this.indexes){var de=this.indexes[j];for(var Ae in de)H[de[Ae].bucketInstanceId]||(this.removeBucketCrossTileIDs(j,de[Ae]),delete de[Ae],ve=!0)}return ve};var ya=function(){this.layerIndexes={},this.crossTileIDs=new ta,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ya.prototype.addLayer=function(H,ve,j){var de=this.layerIndexes[H.id];de===void 0&&(de=this.layerIndexes[H.id]=new pa);var Ae=!1,Ce={};de.handleWrapJump(j);for(var Ye=0,lt=ve;Ye<lt.length;Ye+=1){var wt=lt[Ye],Yt=wt.getBucket(H);!Yt||H.id!==Yt.layerIds[0]||(Yt.bucketInstanceId||(Yt.bucketInstanceId=++this.maxBucketInstanceId),de.addBucket(wt.tileID,Yt,this.crossTileIDs)&&(Ae=!0),Ce[Yt.bucketInstanceId]=!0)}return de.removeStaleBuckets(Ce)&&(Ae=!0),Ae},ya.prototype.pruneUnusedLayers=function(H){var ve={};H.forEach(function(de){ve[de]=!0});for(var j in this.layerIndexes)ve[j]||delete this.layerIndexes[j]};var la=function(ce,H){return e.emitValidationErrors(ce,H&&H.filter(function(ve){return ve.identifier!=="source.canvas"}))},Da=e.pick(gr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),oo=e.pick(gr,["setCenter","setZoom","setBearing","setPitch"]),Vo=Jr(),Zo=function(ce){function H(ve,j){var de=this;j===void 0&&(j={}),ce.call(this),this.map=ve,this.dispatcher=new R(ir(),this),this.imageManager=new _,this.imageManager.setEventedParent(this),this.glyphManager=new S(ve._requestManager,j.localIdeographFontFamily),this.lineAtlas=new D(256,512),this.crossTileSymbolIndex=new ya,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var Ae=this;this._rtlTextPluginCallback=H.registerForPluginStateChange(function(Ce){var Ye={pluginStatus:Ce.pluginStatus,pluginURL:Ce.pluginURL};Ae.dispatcher.broadcast("syncRTLPluginState",Ye,function(lt,wt){if(e.triggerPluginCompletionEvent(lt),wt){var Yt=wt.every(function(fr){return fr});if(Yt)for(var ar in Ae.sourceCaches)Ae.sourceCaches[ar].reload()}})}),this.on("data",function(Ce){if(!(Ce.dataType!=="source"||Ce.sourceDataType!=="metadata")){var Ye=de.sourceCaches[Ce.sourceId];if(!!Ye){var lt=Ye.getSource();if(!(!lt||!lt.vectorLayerIds))for(var wt in de._layers){var Yt=de._layers[wt];Yt.source===lt.id&&de._validateLayer(Yt)}}}})}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.loadURL=function(j,de){var Ae=this;de===void 0&&(de={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var Ce=typeof de.validate=="boolean"?de.validate:!e.isMapboxURL(j);j=this.map._requestManager.normalizeStyleURL(j,de.accessToken);var Ye=this.map._requestManager.transformRequest(j,e.ResourceType.Style);this._request=e.getJSON(Ye,function(lt,wt){Ae._request=null,lt?Ae.fire(new e.ErrorEvent(lt)):wt&&Ae._load(wt,Ce)})},H.prototype.loadJSON=function(j,de){var Ae=this;de===void 0&&(de={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){Ae._request=null,Ae._load(j,de.validate!==!1)})},H.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Vo,!1)},H.prototype._load=function(j,de){if(!(de&&la(this,e.validateStyle(j)))){this._loaded=!0,this.stylesheet=j;for(var Ae in j.sources)this.addSource(Ae,j.sources[Ae],{validate:!1});j.sprite?this._loadSprite(j.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(j.glyphs);var Ce=wr(this.stylesheet.layers);this._order=Ce.map(function(Yt){return Yt.id}),this._layers={},this._serializedLayers={};for(var Ye=0,lt=Ce;Ye<lt.length;Ye+=1){var wt=lt[Ye];wt=e.createStyleLayer(wt),wt.setEventedParent(this,{layer:{id:wt.id}}),this._layers[wt.id]=wt,this._serializedLayers[wt.id]=wt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},H.prototype._loadSprite=function(j){var de=this;this._spriteRequest=v(j,this.map._requestManager,function(Ae,Ce){if(de._spriteRequest=null,Ae)de.fire(new e.ErrorEvent(Ae));else if(Ce)for(var Ye in Ce)de.imageManager.addImage(Ye,Ce[Ye]);de.imageManager.setLoaded(!0),de._availableImages=de.imageManager.listImages(),de.dispatcher.broadcast("setImages",de._availableImages),de.fire(new e.Event("data",{dataType:"style"}))})},H.prototype._validateLayer=function(j){var de=this.sourceCaches[j.source];if(!!de){var Ae=j.sourceLayer;if(!!Ae){var Ce=de.getSource();(Ce.type==="geojson"||Ce.vectorLayerIds&&Ce.vectorLayerIds.indexOf(Ae)===-1)&&this.fire(new e.ErrorEvent(new Error('Source layer "'+Ae+'" does not exist on source "'+Ce.id+'" as specified by style layer "'+j.id+'"')))}}},H.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var j in this.sourceCaches)if(!this.sourceCaches[j].loaded())return!1;return!!this.imageManager.isLoaded()},H.prototype._serializeLayers=function(j){for(var de=[],Ae=0,Ce=j;Ae<Ce.length;Ae+=1){var Ye=Ce[Ae],lt=this._layers[Ye];lt.type!=="custom"&&de.push(lt.serialize())}return de},H.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var j in this.sourceCaches)if(this.sourceCaches[j].hasTransition())return!0;for(var de in this._layers)if(this._layers[de].hasTransition())return!0;return!1},H.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},H.prototype.update=function(j){if(!!this._loaded){var de=this._changed;if(this._changed){var Ae=Object.keys(this._updatedLayers),Ce=Object.keys(this._removedLayers);(Ae.length||Ce.length)&&this._updateWorkerLayers(Ae,Ce);for(var Ye in this._updatedSources){var lt=this._updatedSources[Ye];lt==="reload"?this._reloadSource(Ye):lt==="clear"&&this._clearSource(Ye)}this._updateTilesForChangedImages();for(var wt in this._updatedPaintProps)this._layers[wt].updateTransitions(j);this.light.updateTransitions(j),this._resetUpdates()}for(var Yt in this.sourceCaches)this.sourceCaches[Yt].used=!1;for(var ar=0,fr=this._order;ar<fr.length;ar+=1){var kr=fr[ar],Fr=this._layers[kr];Fr.recalculate(j,this._availableImages),!Fr.isHidden(j.zoom)&&Fr.source&&(this.sourceCaches[Fr.source].used=!0)}this.light.recalculate(j),this.z=j.zoom,de&&this.fire(new e.Event("data",{dataType:"style"}))}},H.prototype._updateTilesForChangedImages=function(){var j=Object.keys(this._changedImages);if(j.length){for(var de in this.sourceCaches)this.sourceCaches[de].reloadTilesForDependencies(["icons","patterns"],j);this._changedImages={}}},H.prototype._updateWorkerLayers=function(j,de){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(j),removedIds:de})},H.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},H.prototype.setState=function(j){var de=this;if(this._checkLoaded(),la(this,e.validateStyle(j)))return!1;j=e.clone$1(j),j.layers=wr(j.layers);var Ae=Zr(this.serialize(),j).filter(function(Ye){return!(Ye.command in oo)});if(Ae.length===0)return!1;var Ce=Ae.filter(function(Ye){return!(Ye.command in Da)});if(Ce.length>0)throw new Error("Unimplemented: "+Ce.map(function(Ye){return Ye.command}).join(", ")+".");return Ae.forEach(function(Ye){Ye.command!=="setTransition"&&de[Ye.command].apply(de,Ye.args)}),this.stylesheet=j,!0},H.prototype.addImage=function(j,de){if(this.getImage(j))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(j,de),this._availableImages=this.imageManager.listImages(),this._changedImages[j]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},H.prototype.updateImage=function(j,de){this.imageManager.updateImage(j,de)},H.prototype.getImage=function(j){return this.imageManager.getImage(j)},H.prototype.removeImage=function(j){if(!this.getImage(j))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(j),this._availableImages=this.imageManager.listImages(),this._changedImages[j]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},H.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},H.prototype.addSource=function(j,de,Ae){var Ce=this;if(Ae===void 0&&(Ae={}),this._checkLoaded(),this.sourceCaches[j]!==void 0)throw new Error("There is already a source with this ID");if(!de.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(de).join(", ")+".");var Ye=["vector","raster","geojson","video","image"],lt=Ye.indexOf(de.type)>=0;if(!(lt&&this._validate(e.validateStyle.source,"sources."+j,de,null,Ae))){this.map&&this.map._collectResourceTiming&&(de.collectResourceTiming=!0);var wt=this.sourceCaches[j]=new Ke(j,de,this.dispatcher);wt.style=this,wt.setEventedParent(this,function(){return{isSourceLoaded:Ce.loaded(),source:wt.serialize(),sourceId:j}}),wt.onAdd(this.map),this._changed=!0}},H.prototype.removeSource=function(j){if(this._checkLoaded(),this.sourceCaches[j]===void 0)throw new Error("There is no source with this ID");for(var de in this._layers)if(this._layers[de].source===j)return this.fire(new e.ErrorEvent(new Error('Source "'+j+'" cannot be removed while layer "'+de+'" is using it.')));var Ae=this.sourceCaches[j];delete this.sourceCaches[j],delete this._updatedSources[j],Ae.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:j})),Ae.setEventedParent(null),Ae.clearTiles(),Ae.onRemove&&Ae.onRemove(this.map),this._changed=!0},H.prototype.setGeoJSONSourceData=function(j,de){this._checkLoaded();var Ae=this.sourceCaches[j].getSource();Ae.setData(de),this._changed=!0},H.prototype.getSource=function(j){return this.sourceCaches[j]&&this.sourceCaches[j].getSource()},H.prototype.addLayer=function(j,de,Ae){Ae===void 0&&(Ae={}),this._checkLoaded();var Ce=j.id;if(this.getLayer(Ce)){this.fire(new e.ErrorEvent(new Error('Layer with id "'+Ce+'" already exists on this map')));return}var Ye;if(j.type==="custom"){if(la(this,e.validateCustomStyleLayer(j)))return;Ye=e.createStyleLayer(j)}else{if(typeof j.source=="object"&&(this.addSource(Ce,j.source),j=e.clone$1(j),j=e.extend(j,{source:Ce})),this._validate(e.validateStyle.layer,"layers."+Ce,j,{arrayIndex:-1},Ae))return;Ye=e.createStyleLayer(j),this._validateLayer(Ye),Ye.setEventedParent(this,{layer:{id:Ce}}),this._serializedLayers[Ye.id]=Ye.serialize()}var lt=de?this._order.indexOf(de):this._order.length;if(de&&lt===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+de+'" does not exist on this map.')));return}if(this._order.splice(lt,0,Ce),this._layerOrderChanged=!0,this._layers[Ce]=Ye,this._removedLayers[Ce]&&Ye.source&&Ye.type!=="custom"){var wt=this._removedLayers[Ce];delete this._removedLayers[Ce],wt.type!==Ye.type?this._updatedSources[Ye.source]="clear":(this._updatedSources[Ye.source]="reload",this.sourceCaches[Ye.source].pause())}this._updateLayer(Ye),Ye.onAdd&&Ye.onAdd(this.map)},H.prototype.moveLayer=function(j,de){this._checkLoaded(),this._changed=!0;var Ae=this._layers[j];if(!Ae){this.fire(new e.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be moved.")));return}if(j!==de){var Ce=this._order.indexOf(j);this._order.splice(Ce,1);var Ye=de?this._order.indexOf(de):this._order.length;if(de&&Ye===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+de+'" does not exist on this map.')));return}this._order.splice(Ye,0,j),this._layerOrderChanged=!0}},H.prototype.removeLayer=function(j){this._checkLoaded();var de=this._layers[j];if(!de){this.fire(new e.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be removed.")));return}de.setEventedParent(null);var Ae=this._order.indexOf(j);this._order.splice(Ae,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[j]=de,delete this._layers[j],delete this._serializedLayers[j],delete this._updatedLayers[j],delete this._updatedPaintProps[j],de.onRemove&&de.onRemove(this.map)},H.prototype.getLayer=function(j){return this._layers[j]},H.prototype.hasLayer=function(j){return j in this._layers},H.prototype.setLayerZoomRange=function(j,de,Ae){this._checkLoaded();var Ce=this.getLayer(j);if(!Ce){this.fire(new e.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot have zoom extent.")));return}Ce.minzoom===de&&Ce.maxzoom===Ae||(de!=null&&(Ce.minzoom=de),Ae!=null&&(Ce.maxzoom=Ae),this._updateLayer(Ce))},H.prototype.setFilter=function(j,de,Ae){Ae===void 0&&(Ae={}),this._checkLoaded();var Ce=this.getLayer(j);if(!Ce){this.fire(new e.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be filtered.")));return}if(!e.deepEqual(Ce.filter,de)){if(de==null){Ce.filter=void 0,this._updateLayer(Ce);return}this._validate(e.validateStyle.filter,"layers."+Ce.id+".filter",de,null,Ae)||(Ce.filter=e.clone$1(de),this._updateLayer(Ce))}},H.prototype.getFilter=function(j){return e.clone$1(this.getLayer(j).filter)},H.prototype.setLayoutProperty=function(j,de,Ae,Ce){Ce===void 0&&(Ce={}),this._checkLoaded();var Ye=this.getLayer(j);if(!Ye){this.fire(new e.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be styled.")));return}e.deepEqual(Ye.getLayoutProperty(de),Ae)||(Ye.setLayoutProperty(de,Ae,Ce),this._updateLayer(Ye))},H.prototype.getLayoutProperty=function(j,de){var Ae=this.getLayer(j);if(!Ae){this.fire(new e.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style.")));return}return Ae.getLayoutProperty(de)},H.prototype.setPaintProperty=function(j,de,Ae,Ce){Ce===void 0&&(Ce={}),this._checkLoaded();var Ye=this.getLayer(j);if(!Ye){this.fire(new e.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be styled.")));return}if(!e.deepEqual(Ye.getPaintProperty(de),Ae)){var lt=Ye.setPaintProperty(de,Ae,Ce);lt&&this._updateLayer(Ye),this._changed=!0,this._updatedPaintProps[j]=!0}},H.prototype.getPaintProperty=function(j,de){return this.getLayer(j).getPaintProperty(de)},H.prototype.setFeatureState=function(j,de){this._checkLoaded();var Ae=j.source,Ce=j.sourceLayer,Ye=this.sourceCaches[Ae];if(Ye===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ae+"' does not exist in the map's style.")));return}var lt=Ye.getSource().type;if(lt==="geojson"&&Ce){this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(lt==="vector"&&!Ce){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}j.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Ye.setFeatureState(Ce,j.id,de)},H.prototype.removeFeatureState=function(j,de){this._checkLoaded();var Ae=j.source,Ce=this.sourceCaches[Ae];if(Ce===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ae+"' does not exist in the map's style.")));return}var Ye=Ce.getSource().type,lt=Ye==="vector"?j.sourceLayer:void 0;if(Ye==="vector"&&!lt){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(de&&typeof j.id!="string"&&typeof j.id!="number"){this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Ce.removeFeatureState(lt,j.id,de)},H.prototype.getFeatureState=function(j){this._checkLoaded();var de=j.source,Ae=j.sourceLayer,Ce=this.sourceCaches[de];if(Ce===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+de+"' does not exist in the map's style.")));return}var Ye=Ce.getSource().type;if(Ye==="vector"&&!Ae){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return j.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Ce.getFeatureState(Ae,j.id)},H.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},H.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(j){return j.serialize()}),layers:this._serializeLayers(this._order)},function(j){return j!==void 0})},H.prototype._updateLayer=function(j){this._updatedLayers[j.id]=!0,j.source&&!this._updatedSources[j.source]&&this.sourceCaches[j.source].getSource().type!=="raster"&&(this._updatedSources[j.source]="reload",this.sourceCaches[j.source].pause()),this._changed=!0},H.prototype._flattenAndSortRenderedFeatures=function(j){for(var de=this,Ae=function(Ha){return de._layers[Ha].type==="fill-extrusion"},Ce={},Ye=[],lt=this._order.length-1;lt>=0;lt--){var wt=this._order[lt];if(Ae(wt)){Ce[wt]=lt;for(var Yt=0,ar=j;Yt<ar.length;Yt+=1){var fr=ar[Yt],kr=fr[wt];if(kr)for(var Fr=0,Or=kr;Fr<Or.length;Fr+=1){var zr=Or[Fr];Ye.push(zr)}}}}Ye.sort(function(Ha,ni){return ni.intersectionZ-Ha.intersectionZ});for(var jr=[],cn=this._order.length-1;cn>=0;cn--){var En=this._order[cn];if(Ae(En))for(var Fn=Ye.length-1;Fn>=0;Fn--){var jn=Ye[Fn].feature;if(Ce[jn.layer.id]<cn)break;jr.push(jn),Ye.pop()}else for(var qn=0,Qn=j;qn<Qn.length;qn+=1){var ca=Qn[qn],xa=ca[En];if(xa)for(var ga=0,Ma=xa;ga<Ma.length;ga+=1){var Ca=Ma[ga];jr.push(Ca.feature)}}}return jr},H.prototype.queryRenderedFeatures=function(j,de,Ae){de&&de.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",de.filter,null,de);var Ce={};if(de&&de.layers){if(!Array.isArray(de.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Ye=0,lt=de.layers;Ye<lt.length;Ye+=1){var wt=lt[Ye],Yt=this._layers[wt];if(!Yt)return this.fire(new e.ErrorEvent(new Error("The layer '"+wt+"' does not exist in the map's style and cannot be queried for features."))),[];Ce[Yt.source]=!0}}var ar=[];de.availableImages=this._availableImages;for(var fr in this.sourceCaches)de.layers&&!Ce[fr]||ar.push(te(this.sourceCaches[fr],this._layers,this._serializedLayers,j,de,Ae));return this.placement&&ar.push(ee(this._layers,this._serializedLayers,this.sourceCaches,j,de,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ar)},H.prototype.querySourceFeatures=function(j,de){de&&de.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",de.filter,null,de);var Ae=this.sourceCaches[j];return Ae?ie(Ae,de):[]},H.prototype.addSourceType=function(j,de,Ae){if(H.getSourceType(j))return Ae(new Error('A source type called "'+j+'" already exists.'));if(H.setSourceType(j,de),!de.workerSourceURL)return Ae(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:j,url:de.workerSourceURL},Ae)},H.prototype.getLight=function(){return this.light.getLight()},H.prototype.setLight=function(j,de){de===void 0&&(de={}),this._checkLoaded();var Ae=this.light.getLight(),Ce=!1;for(var Ye in j)if(!e.deepEqual(j[Ye],Ae[Ye])){Ce=!0;break}if(!!Ce){var lt={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(j,de),this.light.updateTransitions(lt)}},H.prototype._validate=function(j,de,Ae,Ce,Ye){return Ye===void 0&&(Ye={}),Ye&&Ye.validate===!1?!1:la(this,j.call(e.validateStyle,e.extend({key:de,style:this.serialize(),value:Ae,styleSpec:e.styleSpec},Ce)))},H.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var j in this._layers){var de=this._layers[j];de.setEventedParent(null)}for(var Ae in this.sourceCaches)this.sourceCaches[Ae].clearTiles(),this.sourceCaches[Ae].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},H.prototype._clearSource=function(j){this.sourceCaches[j].clearTiles()},H.prototype._reloadSource=function(j){this.sourceCaches[j].resume(),this.sourceCaches[j].reload()},H.prototype._updateSources=function(j){for(var de in this.sourceCaches)this.sourceCaches[de].update(j)},H.prototype._generateCollisionBoxes=function(){for(var j in this.sourceCaches)this._reloadSource(j)},H.prototype._updatePlacement=function(j,de,Ae,Ce,Ye){Ye===void 0&&(Ye=!1);for(var lt=!1,wt=!1,Yt={},ar=0,fr=this._order;ar<fr.length;ar+=1){var kr=fr[ar],Fr=this._layers[kr];if(Fr.type==="symbol"){if(!Yt[Fr.source]){var Or=this.sourceCaches[Fr.source];Yt[Fr.source]=Or.getRenderableIds(!0).map(function(qn){return Or.getTileByID(qn)}).sort(function(qn,Qn){return Qn.tileID.overscaledZ-qn.tileID.overscaledZ||(qn.tileID.isLessThan(Qn.tileID)?-1:1)})}var zr=this.crossTileSymbolIndex.addLayer(Fr,Yt[Fr.source],j.center.lng);lt=lt||zr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Ye=Ye||this._layerOrderChanged||Ae===0,(Ye||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),j.zoom))&&(this.pauseablePlacement=new aa(j,this._order,Ye,de,Ae,Ce,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Yt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),wt=!0),lt&&this.pauseablePlacement.placement.setStale()),wt||lt)for(var jr=0,cn=this._order;jr<cn.length;jr+=1){var En=cn[jr],Fn=this._layers[En];Fn.type==="symbol"&&this.placement.updateLayerOpacities(Fn,Yt[Fn.source])}var jn=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now());return jn},H.prototype._releaseSymbolFadeTiles=function(){for(var j in this.sourceCaches)this.sourceCaches[j].releaseSymbolFadeTiles()},H.prototype.getImages=function(j,de,Ae){this.imageManager.getImages(de.icons,Ae),this._updateTilesForChangedImages();var Ce=this.sourceCaches[de.source];Ce&&Ce.setDependencies(de.tileID.key,de.type,de.icons)},H.prototype.getGlyphs=function(j,de,Ae){this.glyphManager.getGlyphs(de.stacks,Ae)},H.prototype.getResource=function(j,de,Ae){return e.makeRequest(de,Ae)},H}(e.Evented);Zo.getSourceType=q,Zo.setSourceType=Q,Zo.registerForPluginStateChange=e.registerForPluginStateChange;var tl=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),hl=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Hl=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,vi=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vs="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Ps=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ui="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Ao=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,vl=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,hs="void main() {gl_FragColor=vec4(1.0);}",Di="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",rl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ki=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Fi=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,no="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",Ji="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",es="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",Hs="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",ru="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",jo="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",nu="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Ds=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Mo=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,Tu=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Rs=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,bs=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,El=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Au=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Mu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Gs=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Cl=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,_s=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Gl=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,nl=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Yl="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",au=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ll="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",Su=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ys=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Wl=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Pl=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,vs=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,pl=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Xl=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,iu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,ou=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Dl="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",ku=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,su=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,Ko=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,al=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,il=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Zl=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,ps=Ri(hl,Hl),So=Ri(vi,Vs),Rl=Ri(Ps,Ui),ws=Ri(Ao,vl),Ts=Ri(hs,Di),so=Ri(rl,Ki),dl=Ri(Fi,no),yl=Ri(Ji,es),Ws=Ri(Hs,ru),ds=Ri(jo,nu),ml=Ri(Ds,Mo),ol=Ri(Tu,Rs),Il=Ri(bs,El),xl=Ri(Au,Mu),Xs=Ri(Gs,Cl),Eu=Ri(_s,Gl),ts=Ri(nl,Yl),Hu=Ri(au,Ll),jl=Ri(Su,Ys),sl=Ri(Wl,Pl),bl=Ri(vs,pl),Zs=Ri(Xl,iu),_l=Ri(ou,Dl),lu=Ri(ku,su),uu=Ri(Ko,al),Gu=Ri(il,Zl);function Ri(ce,H){var ve=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,j={};return ce=ce.replace(ve,function(de,Ae,Ce,Ye,lt){return j[lt]=!0,Ae==="define"?`
#ifndef HAS_UNIFORM_u_`+lt+`
varying `+Ce+" "+Ye+" "+lt+`;
#else
uniform `+Ce+" "+Ye+" u_"+lt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+lt+`
    `+Ce+" "+Ye+" "+lt+" = u_"+lt+`;
#endif
`}),H=H.replace(ve,function(de,Ae,Ce,Ye,lt){var wt=Ye==="float"?"vec2":"vec4",Yt=lt.match(/color/)?"color":wt;return j[lt]?Ae==="define"?`
#ifndef HAS_UNIFORM_u_`+lt+`
uniform lowp float u_`+lt+`_t;
attribute `+Ce+" "+wt+" a_"+lt+`;
varying `+Ce+" "+Ye+" "+lt+`;
#else
uniform `+Ce+" "+Ye+" u_"+lt+`;
#endif
`:Yt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+lt+`
    `+lt+" = a_"+lt+`;
#else
    `+Ce+" "+Ye+" "+lt+" = u_"+lt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+lt+`
    `+lt+" = unpack_mix_"+Yt+"(a_"+lt+", u_"+lt+`_t);
#else
    `+Ce+" "+Ye+" "+lt+" = u_"+lt+`;
#endif
`:Ae==="define"?`
#ifndef HAS_UNIFORM_u_`+lt+`
uniform lowp float u_`+lt+`_t;
attribute `+Ce+" "+wt+" a_"+lt+`;
#else
uniform `+Ce+" "+Ye+" u_"+lt+`;
#endif
`:Yt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+lt+`
    `+Ce+" "+Ye+" "+lt+" = a_"+lt+`;
#else
    `+Ce+" "+Ye+" "+lt+" = u_"+lt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+lt+`
    `+Ce+" "+Ye+" "+lt+" = unpack_mix_"+Yt+"(a_"+lt+", u_"+lt+`_t);
#else
    `+Ce+" "+Ye+" "+lt+" = u_"+lt+`;
#endif
`}),{fragmentSource:ce,vertexSource:H}}var ll=Object.freeze({__proto__:null,prelude:ps,background:So,backgroundPattern:Rl,circle:ws,clippingMask:Ts,heatmap:so,heatmapTexture:dl,collisionBox:yl,collisionCircle:Ws,debug:ds,fill:ml,fillOutline:ol,fillOutlinePattern:Il,fillPattern:xl,fillExtrusion:Xs,fillExtrusionPattern:Eu,hillshadePrepare:ts,hillshade:Hu,line:jl,lineGradient:sl,linePattern:bl,lineSDF:Zs,raster:_l,symbolIcon:lu,symbolSDF:uu,symbolTextAndIcon:Gu}),js=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};js.prototype.bind=function(H,ve,j,de,Ae,Ce,Ye,lt){this.context=H;for(var wt=this.boundPaintVertexBuffers.length!==de.length,Yt=0;!wt&&Yt<de.length;Yt++)this.boundPaintVertexBuffers[Yt]!==de[Yt]&&(wt=!0);var ar=!this.vao||this.boundProgram!==ve||this.boundLayoutVertexBuffer!==j||wt||this.boundIndexBuffer!==Ae||this.boundVertexOffset!==Ce||this.boundDynamicVertexBuffer!==Ye||this.boundDynamicVertexBuffer2!==lt;!H.extVertexArrayObject||ar?this.freshBind(ve,j,de,Ae,Ce,Ye,lt):(H.bindVertexArrayOES.set(this.vao),Ye&&Ye.bind(),Ae&&Ae.dynamicDraw&&Ae.bind(),lt&&lt.bind())},js.prototype.freshBind=function(H,ve,j,de,Ae,Ce,Ye){var lt,wt=H.numAttributes,Yt=this.context,ar=Yt.gl;if(Yt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Yt.extVertexArrayObject.createVertexArrayOES(),Yt.bindVertexArrayOES.set(this.vao),lt=0,this.boundProgram=H,this.boundLayoutVertexBuffer=ve,this.boundPaintVertexBuffers=j,this.boundIndexBuffer=de,this.boundVertexOffset=Ae,this.boundDynamicVertexBuffer=Ce,this.boundDynamicVertexBuffer2=Ye;else{lt=Yt.currentNumAttributes||0;for(var fr=wt;fr<lt;fr++)ar.disableVertexAttribArray(fr)}ve.enableAttributes(ar,H);for(var kr=0,Fr=j;kr<Fr.length;kr+=1){var Or=Fr[kr];Or.enableAttributes(ar,H)}Ce&&Ce.enableAttributes(ar,H),Ye&&Ye.enableAttributes(ar,H),ve.bind(),ve.setVertexAttribPointers(ar,H,Ae);for(var zr=0,jr=j;zr<jr.length;zr+=1){var cn=jr[zr];cn.bind(),cn.setVertexAttribPointers(ar,H,Ae)}Ce&&(Ce.bind(),Ce.setVertexAttribPointers(ar,H,Ae)),de&&de.bind(),Ye&&(Ye.bind(),Ye.setVertexAttribPointers(ar,H,Ae)),Yt.currentNumAttributes=wt},js.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Jo=function(H,ve,j,de,Ae){var Ce=H.gl;this.program=Ce.createProgram();var Ye=j?j.defines():[];Ae&&Ye.push("#define OVERDRAW_INSPECTOR;");var lt=Ye.concat(ps.fragmentSource,ve.fragmentSource).join(`
`),wt=Ye.concat(ps.vertexSource,ve.vertexSource).join(`
`),Yt=Ce.createShader(Ce.FRAGMENT_SHADER);if(Ce.isContextLost()){this.failedToCreate=!0;return}Ce.shaderSource(Yt,lt),Ce.compileShader(Yt),Ce.attachShader(this.program,Yt);var ar=Ce.createShader(Ce.VERTEX_SHADER);if(Ce.isContextLost()){this.failedToCreate=!0;return}Ce.shaderSource(ar,wt),Ce.compileShader(ar),Ce.attachShader(this.program,ar);for(var fr=j?j.layoutAttributes:[],kr=0;kr<fr.length;kr++)Ce.bindAttribLocation(this.program,kr,fr[kr].name);Ce.linkProgram(this.program),Ce.deleteShader(ar),Ce.deleteShader(Yt),this.numAttributes=Ce.getProgramParameter(this.program,Ce.ACTIVE_ATTRIBUTES),this.attributes={};for(var Fr={},Or=0;Or<this.numAttributes;Or++){var zr=Ce.getActiveAttrib(this.program,Or);zr&&(this.attributes[zr.name]=Ce.getAttribLocation(this.program,zr.name))}for(var jr=Ce.getProgramParameter(this.program,Ce.ACTIVE_UNIFORMS),cn=0;cn<jr;cn++){var En=Ce.getActiveUniform(this.program,cn);En&&(Fr[En.name]=Ce.getUniformLocation(this.program,En.name))}this.fixedUniforms=de(H,Fr),this.binderUniforms=j?j.getUniforms(H,Fr):[]};Jo.prototype.draw=function(H,ve,j,de,Ae,Ce,Ye,lt,wt,Yt,ar,fr,kr,Fr,Or,zr){var jr,cn=H.gl;if(!this.failedToCreate){H.program.set(this.program),H.setDepthMode(j),H.setStencilMode(de),H.setColorMode(Ae),H.setCullFace(Ce);for(var En in this.fixedUniforms)this.fixedUniforms[En].set(Ye[En]);Fr&&Fr.setUniforms(H,this.binderUniforms,fr,{zoom:kr});for(var Fn=(jr={},jr[cn.LINES]=2,jr[cn.TRIANGLES]=3,jr[cn.LINE_STRIP]=1,jr)[ve],jn=0,qn=ar.get();jn<qn.length;jn+=1){var Qn=qn[jn],ca=Qn.vaos||(Qn.vaos={}),xa=ca[lt]||(ca[lt]=new js);xa.bind(H,this,wt,Fr?Fr.getPaintVertexBuffers():[],Yt,Qn.vertexOffset,Or,zr),cn.drawElements(ve,Qn.primitiveLength*Fn,cn.UNSIGNED_SHORT,Qn.primitiveOffset*Fn*2)}}};function rs(ce,H,ve){var j=1/An(ve,1,H.transform.tileZoom),de=Math.pow(2,ve.tileID.overscaledZ),Ae=ve.tileSize*Math.pow(2,H.transform.tileZoom)/de,Ce=Ae*(ve.tileID.canonical.x+ve.tileID.wrap*de),Ye=Ae*ve.tileID.canonical.y;return{u_image:0,u_texsize:ve.imageAtlasTexture.size,u_scale:[j,ce.fromScale,ce.toScale],u_fade:ce.t,u_pixel_coord_upper:[Ce>>16,Ye>>16],u_pixel_coord_lower:[Ce&65535,Ye&65535]}}function wl(ce,H,ve,j){var de=ve.imageManager.getPattern(ce.from.toString()),Ae=ve.imageManager.getPattern(ce.to.toString()),Ce=ve.imageManager.getPixelSize(),Ye=Ce.width,lt=Ce.height,wt=Math.pow(2,j.tileID.overscaledZ),Yt=j.tileSize*Math.pow(2,ve.transform.tileZoom)/wt,ar=Yt*(j.tileID.canonical.x+j.tileID.wrap*wt),fr=Yt*j.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:de.tl,u_pattern_br_a:de.br,u_pattern_tl_b:Ae.tl,u_pattern_br_b:Ae.br,u_texsize:[Ye,lt],u_mix:H.t,u_pattern_size_a:de.displaySize,u_pattern_size_b:Ae.displaySize,u_scale_a:H.fromScale,u_scale_b:H.toScale,u_tile_units_to_pixels:1/An(j,1,ve.transform.tileZoom),u_pixel_coord_upper:[ar>>16,fr>>16],u_pixel_coord_lower:[ar&65535,fr&65535]}}var lo=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_lightpos:new e.Uniform3f(ce,H.u_lightpos),u_lightintensity:new e.Uniform1f(ce,H.u_lightintensity),u_lightcolor:new e.Uniform3f(ce,H.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ce,H.u_vertical_gradient),u_opacity:new e.Uniform1f(ce,H.u_opacity)}},fu=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_lightpos:new e.Uniform3f(ce,H.u_lightpos),u_lightintensity:new e.Uniform1f(ce,H.u_lightintensity),u_lightcolor:new e.Uniform3f(ce,H.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ce,H.u_vertical_gradient),u_height_factor:new e.Uniform1f(ce,H.u_height_factor),u_image:new e.Uniform1i(ce,H.u_image),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ce,H.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,H.u_pixel_coord_lower),u_scale:new e.Uniform3f(ce,H.u_scale),u_fade:new e.Uniform1f(ce,H.u_fade),u_opacity:new e.Uniform1f(ce,H.u_opacity)}},ns=function(ce,H,ve,j){var de=H.style.light,Ae=de.properties.get("position"),Ce=[Ae.x,Ae.y,Ae.z],Ye=e.create$1();de.properties.get("anchor")==="viewport"&&e.fromRotation(Ye,-H.transform.angle),e.transformMat3(Ce,Ce,Ye);var lt=de.properties.get("color");return{u_matrix:ce,u_lightpos:Ce,u_lightintensity:de.properties.get("intensity"),u_lightcolor:[lt.r,lt.g,lt.b],u_vertical_gradient:+ve,u_opacity:j}},Is=function(ce,H,ve,j,de,Ae,Ce){return e.extend(ns(ce,H,ve,j),rs(Ae,H,Ce),{u_height_factor:-Math.pow(2,de.overscaledZ)/Ce.tileSize/8})},zs=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix)}},As=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_image:new e.Uniform1i(ce,H.u_image),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ce,H.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,H.u_pixel_coord_lower),u_scale:new e.Uniform3f(ce,H.u_scale),u_fade:new e.Uniform1f(ce,H.u_fade)}},as=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_world:new e.Uniform2f(ce,H.u_world)}},Vi=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_world:new e.Uniform2f(ce,H.u_world),u_image:new e.Uniform1i(ce,H.u_image),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ce,H.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,H.u_pixel_coord_lower),u_scale:new e.Uniform3f(ce,H.u_scale),u_fade:new e.Uniform1f(ce,H.u_fade)}},ko=function(ce){return{u_matrix:ce}},is=function(ce,H,ve,j){return e.extend(ko(ce),rs(ve,H,j))},cu=function(ce,H){return{u_matrix:ce,u_world:H}},zl=function(ce,H,ve,j,de){return e.extend(is(ce,H,ve,j),{u_world:de})},hu=function(ce,H){return{u_camera_to_center_distance:new e.Uniform1f(ce,H.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(ce,H.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(ce,H.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(ce,H.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(ce,H.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(ce,H.u_matrix)}},mt=function(ce,H,ve,j){var de=ce.transform,Ae,Ce;if(j.paint.get("circle-pitch-alignment")==="map"){var Ye=An(ve,1,de.zoom);Ae=!0,Ce=[Ye,Ye]}else Ae=!1,Ce=de.pixelsToGLUnits;return{u_camera_to_center_distance:de.cameraToCenterDistance,u_scale_with_map:+(j.paint.get("circle-pitch-scale")==="map"),u_matrix:ce.translatePosMatrix(H.posMatrix,ve,j.paint.get("circle-translate"),j.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ae,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:Ce}},It=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_camera_to_center_distance:new e.Uniform1f(ce,H.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(ce,H.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(ce,H.u_extrude_scale),u_overscale_factor:new e.Uniform1f(ce,H.u_overscale_factor)}},ur=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_inv_matrix:new e.UniformMatrix4f(ce,H.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(ce,H.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(ce,H.u_viewport_size)}},tr=function(ce,H,ve){var j=An(ve,1,H.zoom),de=Math.pow(2,H.zoom-ve.tileID.overscaledZ),Ae=ve.tileID.overscaleFactor();return{u_matrix:ce,u_camera_to_center_distance:H.cameraToCenterDistance,u_pixels_to_tile_units:j,u_extrude_scale:[H.pixelsToGLUnits[0]/(j*de),H.pixelsToGLUnits[1]/(j*de)],u_overscale_factor:Ae}},Cr=function(ce,H,ve){return{u_matrix:ce,u_inv_matrix:H,u_camera_to_center_distance:ve.cameraToCenterDistance,u_viewport_size:[ve.width,ve.height]}},rn=function(ce,H){return{u_color:new e.UniformColor(ce,H.u_color),u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_overlay:new e.Uniform1i(ce,H.u_overlay),u_overlay_scale:new e.Uniform1f(ce,H.u_overlay_scale)}},pn=function(ce,H,ve){return ve===void 0&&(ve=1),{u_matrix:ce,u_color:H,u_overlay:0,u_overlay_scale:ve}},wn=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix)}},Cn=function(ce){return{u_matrix:ce}},On=function(ce,H){return{u_extrude_scale:new e.Uniform1f(ce,H.u_extrude_scale),u_intensity:new e.Uniform1f(ce,H.u_intensity),u_matrix:new e.UniformMatrix4f(ce,H.u_matrix)}},gn=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_world:new e.Uniform2f(ce,H.u_world),u_image:new e.Uniform1i(ce,H.u_image),u_color_ramp:new e.Uniform1i(ce,H.u_color_ramp),u_opacity:new e.Uniform1f(ce,H.u_opacity)}},In=function(ce,H,ve,j){return{u_matrix:ce,u_extrude_scale:An(H,1,ve),u_intensity:j}},Pn=function(ce,H,ve,j){var de=e.create();e.ortho(de,0,ce.width,ce.height,0,0,1);var Ae=ce.context.gl;return{u_matrix:de,u_world:[Ae.drawingBufferWidth,Ae.drawingBufferHeight],u_image:ve,u_color_ramp:j,u_opacity:H.paint.get("heatmap-opacity")}},Un=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_image:new e.Uniform1i(ce,H.u_image),u_latrange:new e.Uniform2f(ce,H.u_latrange),u_light:new e.Uniform2f(ce,H.u_light),u_shadow:new e.UniformColor(ce,H.u_shadow),u_highlight:new e.UniformColor(ce,H.u_highlight),u_accent:new e.UniformColor(ce,H.u_accent)}},$n=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_image:new e.Uniform1i(ce,H.u_image),u_dimension:new e.Uniform2f(ce,H.u_dimension),u_zoom:new e.Uniform1f(ce,H.u_zoom),u_maxzoom:new e.Uniform1f(ce,H.u_maxzoom),u_unpack:new e.Uniform4f(ce,H.u_unpack)}},Fa=function(ce,H,ve){var j=ve.paint.get("hillshade-shadow-color"),de=ve.paint.get("hillshade-highlight-color"),Ae=ve.paint.get("hillshade-accent-color"),Ce=ve.paint.get("hillshade-illumination-direction")*(Math.PI/180);ve.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ce-=ce.transform.angle);var Ye=!ce.options.moving;return{u_matrix:ce.transform.calculatePosMatrix(H.tileID.toUnwrapped(),Ye),u_image:0,u_latrange:Ba(ce,H.tileID),u_light:[ve.paint.get("hillshade-exaggeration"),Ce],u_shadow:j,u_highlight:de,u_accent:Ae}},Ea=function(ce,H,ve){var j=H.stride,de=e.create();return e.ortho(de,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(de,de,[0,-e.EXTENT,0]),{u_matrix:de,u_image:1,u_dimension:[j,j],u_zoom:ce.overscaledZ,u_maxzoom:ve,u_unpack:H.getUnpackVector()}};function Ba(ce,H){var ve=Math.pow(2,H.canonical.z),j=H.canonical.y;return[new e.MercatorCoordinate(0,j/ve).toLngLat().lat,new e.MercatorCoordinate(0,(j+1)/ve).toLngLat().lat]}var Oa=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_ratio:new e.Uniform1f(ce,H.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,H.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ce,H.u_units_to_pixels)}},Jn=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_ratio:new e.Uniform1f(ce,H.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,H.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ce,H.u_units_to_pixels),u_image:new e.Uniform1i(ce,H.u_image)}},ha=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_ratio:new e.Uniform1f(ce,H.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,H.u_device_pixel_ratio),u_image:new e.Uniform1i(ce,H.u_image),u_units_to_pixels:new e.Uniform2f(ce,H.u_units_to_pixels),u_scale:new e.Uniform3f(ce,H.u_scale),u_fade:new e.Uniform1f(ce,H.u_fade)}},Ga=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_ratio:new e.Uniform1f(ce,H.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,H.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ce,H.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(ce,H.u_patternscale_a),u_patternscale_b:new e.Uniform2f(ce,H.u_patternscale_b),u_sdfgamma:new e.Uniform1f(ce,H.u_sdfgamma),u_image:new e.Uniform1i(ce,H.u_image),u_tex_y_a:new e.Uniform1f(ce,H.u_tex_y_a),u_tex_y_b:new e.Uniform1f(ce,H.u_tex_y_b),u_mix:new e.Uniform1f(ce,H.u_mix)}},Ka=function(ce,H,ve){var j=ce.transform;return{u_matrix:li(ce,H,ve),u_ratio:1/An(H,1,j.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/j.pixelsToGLUnits[0],1/j.pixelsToGLUnits[1]]}},di=function(ce,H,ve){return e.extend(Ka(ce,H,ve),{u_image:0})},gi=function(ce,H,ve,j){var de=ce.transform,Ae=Ai(H,de);return{u_matrix:li(ce,H,ve),u_texsize:H.imageAtlasTexture.size,u_ratio:1/An(H,1,de.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[Ae,j.fromScale,j.toScale],u_fade:j.t,u_units_to_pixels:[1/de.pixelsToGLUnits[0],1/de.pixelsToGLUnits[1]]}},mi=function(ce,H,ve,j,de){var Ae=ce.transform,Ce=ce.lineAtlas,Ye=Ai(H,Ae),lt=ve.layout.get("line-cap")==="round",wt=Ce.getDash(j.from,lt),Yt=Ce.getDash(j.to,lt),ar=wt.width*de.fromScale,fr=Yt.width*de.toScale;return e.extend(Ka(ce,H,ve),{u_patternscale_a:[Ye/ar,-wt.height/2],u_patternscale_b:[Ye/fr,-Yt.height/2],u_sdfgamma:Ce.width/(Math.min(ar,fr)*256*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:wt.y,u_tex_y_b:Yt.y,u_mix:de.t})};function Ai(ce,H){return 1/An(ce,1,H.tileZoom)}function li(ce,H,ve){return ce.translatePosMatrix(H.tileID.posMatrix,H,ve.paint.get("line-translate"),ve.paint.get("line-translate-anchor"))}var yo=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_tl_parent:new e.Uniform2f(ce,H.u_tl_parent),u_scale_parent:new e.Uniform1f(ce,H.u_scale_parent),u_buffer_scale:new e.Uniform1f(ce,H.u_buffer_scale),u_fade_t:new e.Uniform1f(ce,H.u_fade_t),u_opacity:new e.Uniform1f(ce,H.u_opacity),u_image0:new e.Uniform1i(ce,H.u_image0),u_image1:new e.Uniform1i(ce,H.u_image1),u_brightness_low:new e.Uniform1f(ce,H.u_brightness_low),u_brightness_high:new e.Uniform1f(ce,H.u_brightness_high),u_saturation_factor:new e.Uniform1f(ce,H.u_saturation_factor),u_contrast_factor:new e.Uniform1f(ce,H.u_contrast_factor),u_spin_weights:new e.Uniform3f(ce,H.u_spin_weights)}},qi=function(ce,H,ve,j,de){return{u_matrix:ce,u_tl_parent:H,u_scale_parent:ve,u_buffer_scale:1,u_fade_t:j.mix,u_opacity:j.opacity*de.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:de.paint.get("raster-brightness-min"),u_brightness_high:de.paint.get("raster-brightness-max"),u_saturation_factor:xi(de.paint.get("raster-saturation")),u_contrast_factor:va(de.paint.get("raster-contrast")),u_spin_weights:ja(de.paint.get("raster-hue-rotate"))}};function ja(ce){ce*=Math.PI/180;var H=Math.sin(ce),ve=Math.cos(ce);return[(2*ve+1)/3,(-Math.sqrt(3)*H-ve+1)/3,(Math.sqrt(3)*H-ve+1)/3]}function va(ce){return ce>0?1/(1-ce):1+ce}function xi(ce){return ce>0?1-1/(1.001-ce):-ce}var uo=function(ce,H){return{u_is_size_zoom_constant:new e.Uniform1i(ce,H.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ce,H.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ce,H.u_size_t),u_size:new e.Uniform1f(ce,H.u_size),u_camera_to_center_distance:new e.Uniform1f(ce,H.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ce,H.u_pitch),u_rotate_symbol:new e.Uniform1i(ce,H.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ce,H.u_aspect_ratio),u_fade_change:new e.Uniform1f(ce,H.u_fade_change),u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ce,H.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ce,H.u_coord_matrix),u_is_text:new e.Uniform1i(ce,H.u_is_text),u_pitch_with_map:new e.Uniform1i(ce,H.u_pitch_with_map),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_texture:new e.Uniform1i(ce,H.u_texture)}},vo=function(ce,H){return{u_is_size_zoom_constant:new e.Uniform1i(ce,H.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ce,H.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ce,H.u_size_t),u_size:new e.Uniform1f(ce,H.u_size),u_camera_to_center_distance:new e.Uniform1f(ce,H.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ce,H.u_pitch),u_rotate_symbol:new e.Uniform1i(ce,H.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ce,H.u_aspect_ratio),u_fade_change:new e.Uniform1f(ce,H.u_fade_change),u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ce,H.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ce,H.u_coord_matrix),u_is_text:new e.Uniform1i(ce,H.u_is_text),u_pitch_with_map:new e.Uniform1i(ce,H.u_pitch_with_map),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_texture:new e.Uniform1i(ce,H.u_texture),u_gamma_scale:new e.Uniform1f(ce,H.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ce,H.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ce,H.u_is_halo)}},os=function(ce,H){return{u_is_size_zoom_constant:new e.Uniform1i(ce,H.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ce,H.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ce,H.u_size_t),u_size:new e.Uniform1f(ce,H.u_size),u_camera_to_center_distance:new e.Uniform1f(ce,H.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ce,H.u_pitch),u_rotate_symbol:new e.Uniform1i(ce,H.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ce,H.u_aspect_ratio),u_fade_change:new e.Uniform1f(ce,H.u_fade_change),u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ce,H.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ce,H.u_coord_matrix),u_is_text:new e.Uniform1i(ce,H.u_is_text),u_pitch_with_map:new e.Uniform1i(ce,H.u_pitch_with_map),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_texsize_icon:new e.Uniform2f(ce,H.u_texsize_icon),u_texture:new e.Uniform1i(ce,H.u_texture),u_texture_icon:new e.Uniform1i(ce,H.u_texture_icon),u_gamma_scale:new e.Uniform1f(ce,H.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ce,H.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ce,H.u_is_halo)}},Ms=function(ce,H,ve,j,de,Ae,Ce,Ye,lt,wt){var Yt=de.transform;return{u_is_size_zoom_constant:+(ce==="constant"||ce==="source"),u_is_size_feature_constant:+(ce==="constant"||ce==="camera"),u_size_t:H?H.uSizeT:0,u_size:H?H.uSize:0,u_camera_to_center_distance:Yt.cameraToCenterDistance,u_pitch:Yt.pitch/360*2*Math.PI,u_rotate_symbol:+ve,u_aspect_ratio:Yt.width/Yt.height,u_fade_change:de.options.fadeDuration?de.symbolFadeChange:1,u_matrix:Ae,u_label_plane_matrix:Ce,u_coord_matrix:Ye,u_is_text:+lt,u_pitch_with_map:+j,u_texsize:wt,u_texture:0}},Ro=function(ce,H,ve,j,de,Ae,Ce,Ye,lt,wt,Yt){var ar=de.transform;return e.extend(Ms(ce,H,ve,j,de,Ae,Ce,Ye,lt,wt),{u_gamma_scale:j?Math.cos(ar._pitch)*ar.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+Yt})},Ks=function(ce,H,ve,j,de,Ae,Ce,Ye,lt,wt){return e.extend(Ro(ce,H,ve,j,de,Ae,Ce,Ye,!0,lt,!0),{u_texsize_icon:wt,u_texture_icon:1})},gs=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_opacity:new e.Uniform1f(ce,H.u_opacity),u_color:new e.UniformColor(ce,H.u_color)}},ss=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_opacity:new e.Uniform1f(ce,H.u_opacity),u_image:new e.Uniform1i(ce,H.u_image),u_pattern_tl_a:new e.Uniform2f(ce,H.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(ce,H.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(ce,H.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(ce,H.u_pattern_br_b),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_mix:new e.Uniform1f(ce,H.u_mix),u_pattern_size_a:new e.Uniform2f(ce,H.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(ce,H.u_pattern_size_b),u_scale_a:new e.Uniform1f(ce,H.u_scale_a),u_scale_b:new e.Uniform1f(ce,H.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(ce,H.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,H.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(ce,H.u_tile_units_to_pixels)}},mo=function(ce,H,ve){return{u_matrix:ce,u_opacity:H,u_color:ve}},Fl=function(ce,H,ve,j,de,Ae){return e.extend(wl(j,Ae,ve,de),{u_matrix:ce,u_opacity:H})},Kl={fillExtrusion:lo,fillExtrusionPattern:fu,fill:zs,fillPattern:As,fillOutline:as,fillOutlinePattern:Vi,circle:hu,collisionBox:It,collisionCircle:ur,debug:rn,clippingMask:wn,heatmap:On,heatmapTexture:gn,hillshade:Un,hillshadePrepare:$n,line:Oa,lineGradient:Jn,linePattern:ha,lineSDF:Ga,raster:yo,symbolIcon:uo,symbolSDF:vo,symbolTextAndIcon:os,background:gs,backgroundPattern:ss},ls;function vu(ce,H,ve,j,de,Ae,Ce){for(var Ye=ce.context,lt=Ye.gl,wt=ce.useProgram("collisionBox"),Yt=[],ar=0,fr=0,kr=0;kr<j.length;kr++){var Fr=j[kr],Or=H.getTile(Fr),zr=Or.getBucket(ve);if(!!zr){var jr=Fr.posMatrix;(de[0]!==0||de[1]!==0)&&(jr=ce.translatePosMatrix(Fr.posMatrix,Or,de,Ae));var cn=Ce?zr.textCollisionBox:zr.iconCollisionBox,En=zr.collisionCircleArray;if(En.length>0){var Fn=e.create(),jn=jr;e.mul(Fn,zr.placementInvProjMatrix,ce.transform.glCoordMatrix),e.mul(Fn,Fn,zr.placementViewportMatrix),Yt.push({circleArray:En,circleOffset:fr,transform:jn,invTransform:Fn}),ar+=En.length/4,fr=ar}!cn||wt.draw(Ye,lt.LINES,$r.disabled,Kt.disabled,ce.colorModeForRenderPass(),Me.disabled,tr(jr,ce.transform,Or),ve.id,cn.layoutVertexBuffer,cn.indexBuffer,cn.segments,null,ce.transform.zoom,null,null,cn.collisionVertexBuffer)}}if(!(!Ce||!Yt.length)){var qn=ce.useProgram("collisionCircle"),Qn=new e.StructArrayLayout2f1f2i16;Qn.resize(ar*4),Qn._trim();for(var ca=0,xa=0,ga=Yt;xa<ga.length;xa+=1)for(var Ma=ga[xa],Ca=0;Ca<Ma.circleArray.length/4;Ca++){var Ha=Ca*4,ni=Ma.circleArray[Ha+0],Li=Ma.circleArray[Ha+1],fi=Ma.circleArray[Ha+2],pi=Ma.circleArray[Ha+3];Qn.emplace(ca++,ni,Li,fi,pi,0),Qn.emplace(ca++,ni,Li,fi,pi,1),Qn.emplace(ca++,ni,Li,fi,pi,2),Qn.emplace(ca++,ni,Li,fi,pi,3)}(!ls||ls.length<ar*2)&&(ls=Bl(ar));for(var Na=Ye.createIndexBuffer(ls,!0),Pi=Ye.createVertexBuffer(Qn,e.collisionCircleLayout.members,!0),zi=0,Ni=Yt;zi<Ni.length;zi+=1){var _i=Ni[zi],ji=Cr(_i.transform,_i.invTransform,ce.transform);qn.draw(Ye,lt.TRIANGLES,$r.disabled,Kt.disabled,ce.colorModeForRenderPass(),Me.disabled,ji,ve.id,Pi,Na,e.SegmentVector.simpleSegment(0,_i.circleOffset*2,_i.circleArray.length,_i.circleArray.length/2),null,ce.transform.zoom,null,null,null)}Pi.destroy(),Na.destroy()}}function Bl(ce){var H=ce*2,ve=new e.StructArrayLayout3ui6;ve.resize(H),ve._trim();for(var j=0;j<H;j++){var de=j*6;ve.uint16[de+0]=j*4+0,ve.uint16[de+1]=j*4+1,ve.uint16[de+2]=j*4+2,ve.uint16[de+3]=j*4+2,ve.uint16[de+4]=j*4+3,ve.uint16[de+5]=j*4+0}return ve}var cf=e.identity(new Float32Array(16));function Cu(ce,H,ve,j,de){if(ce.renderPass==="translucent"){var Ae=Kt.disabled,Ce=ce.colorModeForRenderPass(),Ye=ve.layout.get("text-variable-anchor");Ye&&Lu(j,ce,ve,H,ve.layout.get("text-rotation-alignment"),ve.layout.get("text-pitch-alignment"),de),ve.paint.get("icon-opacity").constantOr(1)!==0&&Pu(ce,H,ve,j,!1,ve.paint.get("icon-translate"),ve.paint.get("icon-translate-anchor"),ve.layout.get("icon-rotation-alignment"),ve.layout.get("icon-pitch-alignment"),ve.layout.get("icon-keep-upright"),Ae,Ce),ve.paint.get("text-opacity").constantOr(1)!==0&&Pu(ce,H,ve,j,!0,ve.paint.get("text-translate"),ve.paint.get("text-translate-anchor"),ve.layout.get("text-rotation-alignment"),ve.layout.get("text-pitch-alignment"),ve.layout.get("text-keep-upright"),Ae,Ce),H.map.showCollisionBoxes&&(vu(ce,H,ve,j,ve.paint.get("text-translate"),ve.paint.get("text-translate-anchor"),!0),vu(ce,H,ve,j,ve.paint.get("icon-translate"),ve.paint.get("icon-translate-anchor"),!1))}}function pu(ce,H,ve,j,de,Ae){var Ce=e.getAnchorAlignment(ce),Ye=Ce.horizontalAlign,lt=Ce.verticalAlign,wt=-(Ye-.5)*H,Yt=-(lt-.5)*ve,ar=e.evaluateVariableOffset(ce,j);return new e.Point((wt/de+ar[0])*Ae,(Yt/de+ar[1])*Ae)}function Lu(ce,H,ve,j,de,Ae,Ce){for(var Ye=H.transform,lt=de==="map",wt=Ae==="map",Yt=0,ar=ce;Yt<ar.length;Yt+=1){var fr=ar[Yt],kr=j.getTile(fr),Fr=kr.getBucket(ve);if(!(!Fr||!Fr.text||!Fr.text.segments.get().length)){var Or=Fr.textSizeData,zr=e.evaluateSizeForZoom(Or,Ye.zoom),jr=An(kr,1,H.transform.zoom),cn=Nr(fr.posMatrix,wt,lt,H.transform,jr),En=ve.layout.get("icon-text-fit")!=="none"&&Fr.hasIconData();if(zr){var Fn=Math.pow(2,Ye.zoom-kr.tileID.overscaledZ);Ss(Fr,lt,wt,Ce,e.symbolSize,Ye,cn,fr.posMatrix,Fn,zr,En)}}}}function Ss(ce,H,ve,j,de,Ae,Ce,Ye,lt,wt,Yt){var ar=ce.text.placedSymbolArray,fr=ce.text.dynamicLayoutVertexArray,kr=ce.icon.dynamicLayoutVertexArray,Fr={};fr.clear();for(var Or=0;Or<ar.length;Or++){var zr=ar.get(Or),jr=ce.allowVerticalPlacement&&!zr.placedOrientation,cn=!zr.hidden&&zr.crossTileID&&!jr?j[zr.crossTileID]:null;if(!cn)ti(zr.numGlyphs,fr);else{var En=new e.Point(zr.anchorX,zr.anchorY),Fn=_n(En,ve?Ye:Ce),jn=Wn(Ae.cameraToCenterDistance,Fn.signedDistanceFromCamera),qn=de.evaluateSizeForFeature(ce.textSizeData,wt,zr)*jn/e.ONE_EM;ve&&(qn*=ce.tilePixelRatio/lt);for(var Qn=cn.width,ca=cn.height,xa=cn.anchor,ga=cn.textOffset,Ma=cn.textBoxScale,Ca=pu(xa,Qn,ca,ga,Ma,qn),Ha=ve?_n(En.add(Ca),Ce).point:Fn.point.add(H?Ca.rotate(-Ae.angle):Ca),ni=ce.allowVerticalPlacement&&zr.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Li=0;Li<zr.numGlyphs;Li++)e.addDynamicAttributes(fr,Ha,ni);Yt&&zr.associatedIconIndex>=0&&(Fr[zr.associatedIconIndex]={shiftedAnchor:Ha,angle:ni})}}if(Yt){kr.clear();for(var fi=ce.icon.placedSymbolArray,pi=0;pi<fi.length;pi++){var Na=fi.get(pi);if(Na.hidden)ti(Na.numGlyphs,kr);else{var Pi=Fr[pi];if(!Pi)ti(Na.numGlyphs,kr);else for(var zi=0;zi<Na.numGlyphs;zi++)e.addDynamicAttributes(kr,Pi.shiftedAnchor,Pi.angle)}}ce.icon.dynamicLayoutVertexBuffer.updateData(kr)}ce.text.dynamicLayoutVertexBuffer.updateData(fr)}function Yu(ce,H,ve){return ve.iconsInText&&H?"symbolTextAndIcon":ce?"symbolSDF":"symbolIcon"}function Pu(ce,H,ve,j,de,Ae,Ce,Ye,lt,wt,Yt,ar){for(var fr=ce.context,kr=fr.gl,Fr=ce.transform,Or=Ye==="map",zr=lt==="map",jr=Or&&ve.layout.get("symbol-placement")!=="point",cn=Or&&!zr&&!jr,En=ve.layout.get("symbol-sort-key").constantOr(1)!==void 0,Fn=ce.depthModeForSublayer(0,$r.ReadOnly),jn=ve.layout.get("text-variable-anchor"),qn=[],Qn=0,ca=j;Qn<ca.length;Qn+=1){var xa=ca[Qn],ga=H.getTile(xa),Ma=ga.getBucket(ve);if(!!Ma){var Ca=de?Ma.text:Ma.icon;if(!(!Ca||!Ca.segments.get().length)){var Ha=Ca.programConfigurations.get(ve.id),ni=de||Ma.sdfIcons,Li=de?Ma.textSizeData:Ma.iconSizeData,fi=zr||Fr.pitch!==0,pi=ce.useProgram(Yu(ni,de,Ma),Ha),Na=e.evaluateSizeForZoom(Li,Fr.zoom),Pi=void 0,zi=[0,0],Ni=void 0,_i=void 0,ji=null,ii=void 0;if(de){if(Ni=ga.glyphAtlasTexture,_i=kr.LINEAR,Pi=ga.glyphAtlasTexture.size,Ma.iconsInText){zi=ga.imageAtlasTexture.size,ji=ga.imageAtlasTexture;var wi=Li.kind==="composite"||Li.kind==="camera";ii=fi||ce.options.rotating||ce.options.zooming||wi?kr.LINEAR:kr.NEAREST}}else{var _o=ve.layout.get("icon-size").constantOr(0)!==1||Ma.iconsNeedLinear;Ni=ga.imageAtlasTexture,_i=ni||ce.options.rotating||ce.options.zooming||_o||fi?kr.LINEAR:kr.NEAREST,Pi=ga.imageAtlasTexture.size}var Fo=An(ga,1,ce.transform.zoom),Al=Nr(xa.posMatrix,zr,Or,ce.transform,Fo),Ml=kn(xa.posMatrix,zr,Or,ce.transform,Fo),Jl=jn&&Ma.hasTextData(),Ql=ve.layout.get("icon-text-fit")!=="none"&&Jl&&Ma.hasIconData();jr&&Xn(Ma,xa.posMatrix,ce,de,Al,Ml,zr,wt);var xu=ce.translatePosMatrix(xa.posMatrix,ga,Ae,Ce),$l=jr||de&&jn||Ql?cf:Al,Bs=ce.translatePosMatrix(Ml,ga,Ae,Ce,!0),Uu=ni&&ve.paint.get(de?"text-halo-width":"icon-halo-width").constantOr(1)!==0,xs=void 0;ni?Ma.iconsInText?xs=Ks(Li.kind,Na,cn,zr,ce,xu,$l,Bs,Pi,zi):xs=Ro(Li.kind,Na,cn,zr,ce,xu,$l,Bs,de,Pi,!0):xs=Ms(Li.kind,Na,cn,zr,ce,xu,$l,Bs,de,Pi);var ul={program:pi,buffers:Ca,uniformValues:xs,atlasTexture:Ni,atlasTextureIcon:ji,atlasInterpolation:_i,atlasInterpolationIcon:ii,isSDF:ni,hasHalo:Uu};if(En)for(var ql=Ca.segments.get(),Ul=0,eu=ql;Ul<eu.length;Ul+=1){var kf=eu[Ul];qn.push({segments:new e.SegmentVector([kf]),sortKey:kf.sortKey,state:ul})}else qn.push({segments:Ca.segments,sortKey:0,state:ul})}}}En&&qn.sort(function(Ef,Cf){return Ef.sortKey-Cf.sortKey});for(var Wu=0,fs=qn;Wu<fs.length;Wu+=1){var gf=fs[Wu],ks=gf.state;if(fr.activeTexture.set(kr.TEXTURE0),ks.atlasTexture.bind(ks.atlasInterpolation,kr.CLAMP_TO_EDGE),ks.atlasTextureIcon&&(fr.activeTexture.set(kr.TEXTURE1),ks.atlasTextureIcon&&ks.atlasTextureIcon.bind(ks.atlasInterpolationIcon,kr.CLAMP_TO_EDGE)),ks.isSDF){var yf=ks.uniformValues;ks.hasHalo&&(yf.u_is_halo=1,Du(ks.buffers,gf.segments,ve,ce,ks.program,Fn,Yt,ar,yf)),yf.u_is_halo=0}Du(ks.buffers,gf.segments,ve,ce,ks.program,Fn,Yt,ar,ks.uniformValues)}}function Du(ce,H,ve,j,de,Ae,Ce,Ye,lt){var wt=j.context,Yt=wt.gl;de.draw(wt,Yt.TRIANGLES,Ae,Ce,Ye,Me.disabled,lt,ve.id,ce.layoutVertexBuffer,ce.indexBuffer,H,ve.paint,j.transform.zoom,ce.programConfigurations.get(ve.id),ce.dynamicLayoutVertexBuffer,ce.opacityVertexBuffer)}function Io(ce,H,ve,j){if(ce.renderPass==="translucent"){var de=ve.paint.get("circle-opacity"),Ae=ve.paint.get("circle-stroke-width"),Ce=ve.paint.get("circle-stroke-opacity"),Ye=ve.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(de.constantOr(1)===0&&(Ae.constantOr(1)===0||Ce.constantOr(1)===0))){for(var lt=ce.context,wt=lt.gl,Yt=ce.depthModeForSublayer(0,$r.ReadOnly),ar=Kt.disabled,fr=ce.colorModeForRenderPass(),kr=[],Fr=0;Fr<j.length;Fr++){var Or=j[Fr],zr=H.getTile(Or),jr=zr.getBucket(ve);if(!!jr){var cn=jr.programConfigurations.get(ve.id),En=ce.useProgram("circle",cn),Fn=jr.layoutVertexBuffer,jn=jr.indexBuffer,qn=mt(ce,Or,zr,ve),Qn={programConfiguration:cn,program:En,layoutVertexBuffer:Fn,indexBuffer:jn,uniformValues:qn};if(Ye)for(var ca=jr.segments.get(),xa=0,ga=ca;xa<ga.length;xa+=1){var Ma=ga[xa];kr.push({segments:new e.SegmentVector([Ma]),sortKey:Ma.sortKey,state:Qn})}else kr.push({segments:jr.segments,sortKey:0,state:Qn})}}Ye&&kr.sort(function(_i,ji){return _i.sortKey-ji.sortKey});for(var Ca=0,Ha=kr;Ca<Ha.length;Ca+=1){var ni=Ha[Ca],Li=ni.state,fi=Li.programConfiguration,pi=Li.program,Na=Li.layoutVertexBuffer,Pi=Li.indexBuffer,zi=Li.uniformValues,Ni=ni.segments;pi.draw(lt,wt.TRIANGLES,Yt,ar,fr,Me.disabled,zi,ve.id,Na,Pi,Ni,ve.paint,ce.transform.zoom,fi)}}}}function Ru(ce,H,ve,j){if(ve.paint.get("heatmap-opacity")!==0)if(ce.renderPass==="offscreen"){var de=ce.context,Ae=de.gl,Ce=Kt.disabled,Ye=new je([Ae.ONE,Ae.ONE],e.Color.transparent,[!0,!0,!0,!0]);Ju(de,ce,ve),de.clear({color:e.Color.transparent});for(var lt=0;lt<j.length;lt++){var wt=j[lt];if(!H.hasRenderableParent(wt)){var Yt=H.getTile(wt),ar=Yt.getBucket(ve);if(!!ar){var fr=ar.programConfigurations.get(ve.id),kr=ce.useProgram("heatmap",fr),Fr=ce.transform,Or=Fr.zoom;kr.draw(de,Ae.TRIANGLES,$r.disabled,Ce,Ye,Me.disabled,In(wt.posMatrix,Yt,Or,ve.paint.get("heatmap-intensity")),ve.id,ar.layoutVertexBuffer,ar.indexBuffer,ar.segments,ve.paint,ce.transform.zoom,fr)}}}de.viewport.set([0,0,ce.width,ce.height])}else ce.renderPass==="translucent"&&(ce.context.setColorMode(ce.colorModeForRenderPass()),du(ce,ve))}function Ju(ce,H,ve){var j=ce.gl;ce.activeTexture.set(j.TEXTURE1),ce.viewport.set([0,0,H.width/4,H.height/4]);var de=ve.heatmapFbo;if(de)j.bindTexture(j.TEXTURE_2D,de.colorAttachment.get()),ce.bindFramebuffer.set(de.framebuffer);else{var Ae=j.createTexture();j.bindTexture(j.TEXTURE_2D,Ae),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.LINEAR),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,j.LINEAR),de=ve.heatmapFbo=ce.createFramebuffer(H.width/4,H.height/4,!1),ys(ce,H,Ae,de)}}function ys(ce,H,ve,j){var de=ce.gl,Ae=ce.extRenderToTextureHalfFloat?ce.extTextureHalfFloat.HALF_FLOAT_OES:de.UNSIGNED_BYTE;de.texImage2D(de.TEXTURE_2D,0,de.RGBA,H.width/4,H.height/4,0,de.RGBA,Ae,null),j.colorAttachment.set(ve)}function du(ce,H){var ve=ce.context,j=ve.gl,de=H.heatmapFbo;if(!!de){ve.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,de.colorAttachment.get()),ve.activeTexture.set(j.TEXTURE1);var Ae=H.colorRampTexture;Ae||(Ae=H.colorRampTexture=new e.Texture(ve,H.colorRamp,j.RGBA)),Ae.bind(j.LINEAR,j.CLAMP_TO_EDGE),ce.useProgram("heatmapTexture").draw(ve,j.TRIANGLES,$r.disabled,Kt.disabled,ce.colorModeForRenderPass(),Me.disabled,Pn(ce,H,0,1),H.id,ce.viewportBuffer,ce.quadTriangleIndexBuffer,ce.viewportSegments,H.paint,ce.transform.zoom)}}function gu(ce,H,ve,j){if(ce.renderPass==="translucent"){var de=ve.paint.get("line-opacity"),Ae=ve.paint.get("line-width");if(!(de.constantOr(1)===0||Ae.constantOr(1)===0)){var Ce=ce.depthModeForSublayer(0,$r.ReadOnly),Ye=ce.colorModeForRenderPass(),lt=ve.paint.get("line-dasharray"),wt=ve.paint.get("line-pattern"),Yt=wt.constantOr(1),ar=ve.paint.get("line-gradient"),fr=ve.getCrossfadeParameters(),kr=Yt?"linePattern":lt?"lineSDF":ar?"lineGradient":"line",Fr=ce.context,Or=Fr.gl,zr=!0;if(ar){Fr.activeTexture.set(Or.TEXTURE0);var jr=ve.gradientTexture;if(!ve.gradient)return;jr||(jr=ve.gradientTexture=new e.Texture(Fr,ve.gradient,Or.RGBA)),jr.bind(Or.LINEAR,Or.CLAMP_TO_EDGE)}for(var cn=0,En=j;cn<En.length;cn+=1){var Fn=En[cn],jn=H.getTile(Fn);if(!(Yt&&!jn.patternsLoaded())){var qn=jn.getBucket(ve);if(!!qn){var Qn=qn.programConfigurations.get(ve.id),ca=ce.context.program.get(),xa=ce.useProgram(kr,Qn),ga=zr||xa.program!==ca,Ma=wt.constantOr(null);if(Ma&&jn.imageAtlas){var Ca=jn.imageAtlas,Ha=Ca.patternPositions[Ma.to.toString()],ni=Ca.patternPositions[Ma.from.toString()];Ha&&ni&&Qn.setConstantPatternPositions(Ha,ni)}var Li=Yt?gi(ce,jn,ve,fr):lt?mi(ce,jn,ve,lt,fr):ar?di(ce,jn,ve):Ka(ce,jn,ve);Yt?(Fr.activeTexture.set(Or.TEXTURE0),jn.imageAtlasTexture.bind(Or.LINEAR,Or.CLAMP_TO_EDGE),Qn.updatePaintBuffers(fr)):lt&&(ga||ce.lineAtlas.dirty)&&(Fr.activeTexture.set(Or.TEXTURE0),ce.lineAtlas.bind(Fr)),xa.draw(Fr,Or.TRIANGLES,Ce,ce.stencilModeForClipping(Fn),Ye,Me.disabled,Li,ve.id,qn.layoutVertexBuffer,qn.indexBuffer,qn.segments,ve.paint,ce.transform.zoom,Qn),zr=!1}}}}}}function Iu(ce,H,ve,j){var de=ve.paint.get("fill-color"),Ae=ve.paint.get("fill-opacity");if(Ae.constantOr(1)!==0){var Ce=ce.colorModeForRenderPass(),Ye=ve.paint.get("fill-pattern"),lt=ce.opaquePassEnabledForLayer()&&!Ye.constantOr(1)&&de.constantOr(e.Color.transparent).a===1&&Ae.constantOr(0)===1?"opaque":"translucent";if(ce.renderPass===lt){var wt=ce.depthModeForSublayer(1,ce.renderPass==="opaque"?$r.ReadWrite:$r.ReadOnly);Re(ce,H,ve,j,wt,Ce,!1)}if(ce.renderPass==="translucent"&&ve.paint.get("fill-antialias")){var Yt=ce.depthModeForSublayer(ve.getPaintProperty("fill-outline-color")?2:0,$r.ReadOnly);Re(ce,H,ve,j,Yt,Ce,!0)}}}function Re(ce,H,ve,j,de,Ae,Ce){var Ye=ce.context.gl,lt=ve.paint.get("fill-pattern"),wt=lt&&lt.constantOr(1),Yt=ve.getCrossfadeParameters(),ar,fr,kr,Fr,Or;Ce?(fr=wt&&!ve.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ar=Ye.LINES):(fr=wt?"fillPattern":"fill",ar=Ye.TRIANGLES);for(var zr=0,jr=j;zr<jr.length;zr+=1){var cn=jr[zr],En=H.getTile(cn);if(!(wt&&!En.patternsLoaded())){var Fn=En.getBucket(ve);if(!!Fn){var jn=Fn.programConfigurations.get(ve.id),qn=ce.useProgram(fr,jn);wt&&(ce.context.activeTexture.set(Ye.TEXTURE0),En.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),jn.updatePaintBuffers(Yt));var Qn=lt.constantOr(null);if(Qn&&En.imageAtlas){var ca=En.imageAtlas,xa=ca.patternPositions[Qn.to.toString()],ga=ca.patternPositions[Qn.from.toString()];xa&&ga&&jn.setConstantPatternPositions(xa,ga)}var Ma=ce.translatePosMatrix(cn.posMatrix,En,ve.paint.get("fill-translate"),ve.paint.get("fill-translate-anchor"));if(!Ce)Fr=Fn.indexBuffer,Or=Fn.segments,kr=wt?is(Ma,ce,Yt,En):ko(Ma);else{Fr=Fn.indexBuffer2,Or=Fn.segments2;var Ca=[Ye.drawingBufferWidth,Ye.drawingBufferHeight];kr=fr==="fillOutlinePattern"&&wt?zl(Ma,ce,Yt,En,Ca):cu(Ma,Ca)}qn.draw(ce.context,ar,de,ce.stencilModeForClipping(cn),Ae,Me.disabled,kr,ve.id,Fn.layoutVertexBuffer,Fr,Or,ve.paint,ce.transform.zoom,jn)}}}}function He(ce,H,ve,j){var de=ve.paint.get("fill-extrusion-opacity");if(de!==0&&ce.renderPass==="translucent"){var Ae=new $r(ce.context.gl.LEQUAL,$r.ReadWrite,ce.depthRangeFor3D);if(de===1&&!ve.paint.get("fill-extrusion-pattern").constantOr(1)){var Ce=ce.colorModeForRenderPass();qe(ce,H,ve,j,Ae,Kt.disabled,Ce)}else qe(ce,H,ve,j,Ae,Kt.disabled,je.disabled),qe(ce,H,ve,j,Ae,ce.stencilModeFor3D(),ce.colorModeForRenderPass())}}function qe(ce,H,ve,j,de,Ae,Ce){for(var Ye=ce.context,lt=Ye.gl,wt=ve.paint.get("fill-extrusion-pattern"),Yt=wt.constantOr(1),ar=ve.getCrossfadeParameters(),fr=ve.paint.get("fill-extrusion-opacity"),kr=0,Fr=j;kr<Fr.length;kr+=1){var Or=Fr[kr],zr=H.getTile(Or),jr=zr.getBucket(ve);if(!!jr){var cn=jr.programConfigurations.get(ve.id),En=ce.useProgram(Yt?"fillExtrusionPattern":"fillExtrusion",cn);Yt&&(ce.context.activeTexture.set(lt.TEXTURE0),zr.imageAtlasTexture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE),cn.updatePaintBuffers(ar));var Fn=wt.constantOr(null);if(Fn&&zr.imageAtlas){var jn=zr.imageAtlas,qn=jn.patternPositions[Fn.to.toString()],Qn=jn.patternPositions[Fn.from.toString()];qn&&Qn&&cn.setConstantPatternPositions(qn,Qn)}var ca=ce.translatePosMatrix(Or.posMatrix,zr,ve.paint.get("fill-extrusion-translate"),ve.paint.get("fill-extrusion-translate-anchor")),xa=ve.paint.get("fill-extrusion-vertical-gradient"),ga=Yt?Is(ca,ce,xa,fr,Or,ar,zr):ns(ca,ce,xa,fr);En.draw(Ye,Ye.gl.TRIANGLES,de,Ae,Ce,Me.backCCW,ga,ve.id,jr.layoutVertexBuffer,jr.indexBuffer,jr.segments,ve.paint,ce.transform.zoom,cn)}}}function at(ce,H,ve,j){if(!(ce.renderPass!=="offscreen"&&ce.renderPass!=="translucent")){for(var de=ce.context,Ae=H.getSource().maxzoom,Ce=ce.depthModeForSublayer(0,$r.ReadOnly),Ye=ce.colorModeForRenderPass(),lt=ce.renderPass==="translucent"?ce.stencilConfigForOverlap(j):[{},j],wt=lt[0],Yt=lt[1],ar=0,fr=Yt;ar<fr.length;ar+=1){var kr=fr[ar],Fr=H.getTile(kr);Fr.needsHillshadePrepare&&ce.renderPass==="offscreen"?xt(ce,Fr,ve,Ae,Ce,Kt.disabled,Ye):ce.renderPass==="translucent"&&bt(ce,Fr,ve,Ce,wt[kr.overscaledZ],Ye)}de.viewport.set([0,0,ce.width,ce.height])}}function bt(ce,H,ve,j,de,Ae){var Ce=ce.context,Ye=Ce.gl,lt=H.fbo;if(!!lt){var wt=ce.useProgram("hillshade");Ce.activeTexture.set(Ye.TEXTURE0),Ye.bindTexture(Ye.TEXTURE_2D,lt.colorAttachment.get());var Yt=Fa(ce,H,ve);wt.draw(Ce,Ye.TRIANGLES,j,de,Ae,Me.disabled,Yt,ve.id,ce.rasterBoundsBuffer,ce.quadTriangleIndexBuffer,ce.rasterBoundsSegments)}}function xt(ce,H,ve,j,de,Ae,Ce){var Ye=ce.context,lt=Ye.gl,wt=H.dem;if(wt&&wt.data){var Yt=wt.dim,ar=wt.stride,fr=wt.getPixels();if(Ye.activeTexture.set(lt.TEXTURE1),Ye.pixelStoreUnpackPremultiplyAlpha.set(!1),H.demTexture=H.demTexture||ce.getTileTexture(ar),H.demTexture){var kr=H.demTexture;kr.update(fr,{premultiply:!1}),kr.bind(lt.NEAREST,lt.CLAMP_TO_EDGE)}else H.demTexture=new e.Texture(Ye,fr,lt.RGBA,{premultiply:!1}),H.demTexture.bind(lt.NEAREST,lt.CLAMP_TO_EDGE);Ye.activeTexture.set(lt.TEXTURE0);var Fr=H.fbo;if(!Fr){var Or=new e.Texture(Ye,{width:Yt,height:Yt,data:null},lt.RGBA);Or.bind(lt.LINEAR,lt.CLAMP_TO_EDGE),Fr=H.fbo=Ye.createFramebuffer(Yt,Yt,!0),Fr.colorAttachment.set(Or.texture)}Ye.bindFramebuffer.set(Fr.framebuffer),Ye.viewport.set([0,0,Yt,Yt]),ce.useProgram("hillshadePrepare").draw(Ye,lt.TRIANGLES,de,Ae,Ce,Me.disabled,Ea(H.tileID,wt,j),ve.id,ce.rasterBoundsBuffer,ce.quadTriangleIndexBuffer,ce.rasterBoundsSegments),H.needsHillshadePrepare=!1}}function _t(ce,H,ve,j){if(ce.renderPass==="translucent"&&ve.paint.get("raster-opacity")!==0&&!!j.length)for(var de=ce.context,Ae=de.gl,Ce=H.getSource(),Ye=ce.useProgram("raster"),lt=ce.colorModeForRenderPass(),wt=Ce instanceof Z?[{},j]:ce.stencilConfigForOverlap(j),Yt=wt[0],ar=wt[1],fr=ar[ar.length-1].overscaledZ,kr=!ce.options.moving,Fr=0,Or=ar;Fr<Or.length;Fr+=1){var zr=Or[Fr],jr=ce.depthModeForSublayer(zr.overscaledZ-fr,ve.paint.get("raster-opacity")===1?$r.ReadWrite:$r.ReadOnly,Ae.LESS),cn=H.getTile(zr),En=ce.transform.calculatePosMatrix(zr.toUnwrapped(),kr);cn.registerFadeDuration(ve.paint.get("raster-fade-duration"));var Fn=H.findLoadedParent(zr,0),jn=or(cn,Fn,H,ve,ce.transform),qn=void 0,Qn=void 0,ca=ve.paint.get("raster-resampling")==="nearest"?Ae.NEAREST:Ae.LINEAR;de.activeTexture.set(Ae.TEXTURE0),cn.texture.bind(ca,Ae.CLAMP_TO_EDGE,Ae.LINEAR_MIPMAP_NEAREST),de.activeTexture.set(Ae.TEXTURE1),Fn?(Fn.texture.bind(ca,Ae.CLAMP_TO_EDGE,Ae.LINEAR_MIPMAP_NEAREST),qn=Math.pow(2,Fn.tileID.overscaledZ-cn.tileID.overscaledZ),Qn=[cn.tileID.canonical.x*qn%1,cn.tileID.canonical.y*qn%1]):cn.texture.bind(ca,Ae.CLAMP_TO_EDGE,Ae.LINEAR_MIPMAP_NEAREST);var xa=qi(En,Qn||[0,0],qn||1,jn,ve);Ce instanceof Z?Ye.draw(de,Ae.TRIANGLES,jr,Kt.disabled,lt,Me.disabled,xa,ve.id,Ce.boundsBuffer,ce.quadTriangleIndexBuffer,Ce.boundsSegments):Ye.draw(de,Ae.TRIANGLES,jr,Yt[zr.overscaledZ],lt,Me.disabled,xa,ve.id,ce.rasterBoundsBuffer,ce.quadTriangleIndexBuffer,ce.rasterBoundsSegments)}}function or(ce,H,ve,j,de){var Ae=j.paint.get("raster-fade-duration");if(Ae>0){var Ce=e.browser.now(),Ye=(Ce-ce.timeAdded)/Ae,lt=H?(Ce-H.timeAdded)/Ae:-1,wt=ve.getSource(),Yt=de.coveringZoomLevel({tileSize:wt.tileSize,roundZoom:wt.roundZoom}),ar=!H||Math.abs(H.tileID.overscaledZ-Yt)>Math.abs(ce.tileID.overscaledZ-Yt),fr=ar&&ce.refreshedUponExpiration?1:e.clamp(ar?Ye:1-lt,0,1);return ce.refreshedUponExpiration&&Ye>=1&&(ce.refreshedUponExpiration=!1),H?{opacity:1,mix:1-fr}:{opacity:fr,mix:0}}else return{opacity:1,mix:0}}function hr(ce,H,ve){var j=ve.paint.get("background-color"),de=ve.paint.get("background-opacity");if(de!==0){var Ae=ce.context,Ce=Ae.gl,Ye=ce.transform,lt=Ye.tileSize,wt=ve.paint.get("background-pattern");if(!ce.isPatternMissing(wt)){var Yt=!wt&&j.a===1&&de===1&&ce.opaquePassEnabledForLayer()?"opaque":"translucent";if(ce.renderPass===Yt){var ar=Kt.disabled,fr=ce.depthModeForSublayer(0,Yt==="opaque"?$r.ReadWrite:$r.ReadOnly),kr=ce.colorModeForRenderPass(),Fr=ce.useProgram(wt?"backgroundPattern":"background"),Or=Ye.coveringTiles({tileSize:lt});wt&&(Ae.activeTexture.set(Ce.TEXTURE0),ce.imageManager.bind(ce.context));for(var zr=ve.getCrossfadeParameters(),jr=0,cn=Or;jr<cn.length;jr+=1){var En=cn[jr],Fn=ce.transform.calculatePosMatrix(En.toUnwrapped()),jn=wt?Fl(Fn,de,ce,wt,{tileID:En,tileSize:lt},zr):mo(Fn,de,j);Fr.draw(Ae,Ce.TRIANGLES,fr,ar,kr,Me.disabled,jn,ve.id,ce.tileExtentBuffer,ce.quadTriangleIndexBuffer,ce.tileExtentSegments)}}}}}var nr=new e.Color(1,0,0,1),yr=new e.Color(0,1,0,1),Er=new e.Color(0,0,1,1),Vr=new e.Color(1,0,1,1),en=new e.Color(0,1,1,1);function mn(ce){var H=ce.transform.padding,ve=3;Hn(ce,ce.transform.height-(H.top||0),ve,nr),Hn(ce,H.bottom||0,ve,yr),da(ce,H.left||0,ve,Er),da(ce,ce.transform.width-(H.right||0),ve,Vr);var j=ce.transform.centerPoint;Dn(ce,j.x,ce.transform.height-j.y,en)}function Dn(ce,H,ve,j){var de=20,Ae=2;ma(ce,H-Ae/2,ve-de/2,Ae,de,j),ma(ce,H-de/2,ve-Ae/2,de,Ae,j)}function Hn(ce,H,ve,j){ma(ce,0,H+ve/2,ce.transform.width,ve,j)}function da(ce,H,ve,j){ma(ce,H-ve/2,0,ve,ce.transform.height,j)}function ma(ce,H,ve,j,de,Ae){var Ce=ce.context,Ye=Ce.gl;Ye.enable(Ye.SCISSOR_TEST),Ye.scissor(H*e.browser.devicePixelRatio,ve*e.browser.devicePixelRatio,j*e.browser.devicePixelRatio,de*e.browser.devicePixelRatio),Ce.clear({color:Ae}),Ye.disable(Ye.SCISSOR_TEST)}function Za(ce,H,ve){for(var j=0;j<ve.length;j++)Ya(ce,H,ve[j])}function Ya(ce,H,ve){var j=ce.context,de=j.gl,Ae=ve.posMatrix,Ce=ce.useProgram("debug"),Ye=$r.disabled,lt=Kt.disabled,wt=ce.colorModeForRenderPass(),Yt="$debug";j.activeTexture.set(de.TEXTURE0),ce.emptyTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),Ce.draw(j,de.LINE_STRIP,Ye,lt,wt,Me.disabled,pn(Ae,e.Color.red),Yt,ce.debugBuffer,ce.tileBorderIndexBuffer,ce.debugSegments);var ar=H.getTileByID(ve.key).latestRawTileData,fr=ar&&ar.byteLength||0,kr=Math.floor(fr/1024),Fr=H.getTile(ve).tileSize,Or=512/Math.min(Fr,512)*(ve.overscaledZ/ce.transform.zoom)*.5,zr=ve.canonical.toString();ve.overscaledZ!==ve.canonical.z&&(zr+=" => "+ve.overscaledZ);var jr=zr+" "+kr+"kb";qa(ce,jr),Ce.draw(j,de.TRIANGLES,Ye,lt,je.alphaBlended,Me.disabled,pn(Ae,e.Color.transparent,Or),Yt,ce.debugBuffer,ce.quadTriangleIndexBuffer,ce.debugSegments)}function qa(ce,H){ce.initDebugOverlayCanvas();var ve=ce.debugOverlayCanvas,j=ce.context.gl,de=ce.debugOverlayCanvas.getContext("2d");de.clearRect(0,0,ve.width,ve.height),de.shadowColor="white",de.shadowBlur=2,de.lineWidth=1.5,de.strokeStyle="white",de.textBaseline="top",de.font="bold "+36+"px Open Sans, sans-serif",de.fillText(H,5,5),de.strokeText(H,5,5),ce.debugOverlayTexture.update(ve),ce.debugOverlayTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE)}function hi(ce,H,ve){var j=ce.context,de=ve.implementation;if(ce.renderPass==="offscreen"){var Ae=de.prerender;Ae&&(ce.setCustomLayerDefaults(),j.setColorMode(ce.colorModeForRenderPass()),Ae.call(de,j.gl,ce.transform.customLayerMatrix()),j.setDirty(),ce.setBaseState())}else if(ce.renderPass==="translucent"){ce.setCustomLayerDefaults(),j.setColorMode(ce.colorModeForRenderPass()),j.setStencilMode(Kt.disabled);var Ce=de.renderingMode==="3d"?new $r(ce.context.gl.LEQUAL,$r.ReadWrite,ce.depthRangeFor3D):ce.depthModeForSublayer(0,$r.ReadOnly);j.setDepthMode(Ce),de.render(j.gl,ce.transform.customLayerMatrix()),j.setDirty(),ce.setBaseState(),j.bindFramebuffer.set(null)}}var ao={symbol:Cu,circle:Io,heatmap:Ru,line:gu,fill:Iu,"fill-extrusion":He,hillshade:at,raster:_t,background:hr,debug:Za,custom:hi},ri=function(H,ve){this.context=new Se(H),this.transform=ve,this._tileTextures={},this.setup(),this.numSublayers=Ke.maxUnderzooming+Ke.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ya,this.gpuTimers={}};ri.prototype.resize=function(H,ve){if(this.width=H*e.browser.devicePixelRatio,this.height=ve*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var j=0,de=this.style._order;j<de.length;j+=1){var Ae=de[j];this.style._layers[Ae].resize()}},ri.prototype.setup=function(){var H=this.context,ve=new e.StructArrayLayout2i4;ve.emplaceBack(0,0),ve.emplaceBack(e.EXTENT,0),ve.emplaceBack(0,e.EXTENT),ve.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=H.createVertexBuffer(ve,tl.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var j=new e.StructArrayLayout2i4;j.emplaceBack(0,0),j.emplaceBack(e.EXTENT,0),j.emplaceBack(0,e.EXTENT),j.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=H.createVertexBuffer(j,tl.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var de=new e.StructArrayLayout4i8;de.emplaceBack(0,0,0,0),de.emplaceBack(e.EXTENT,0,e.EXTENT,0),de.emplaceBack(0,e.EXTENT,0,e.EXTENT),de.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=H.createVertexBuffer(de,G.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Ae=new e.StructArrayLayout2i4;Ae.emplaceBack(0,0),Ae.emplaceBack(1,0),Ae.emplaceBack(0,1),Ae.emplaceBack(1,1),this.viewportBuffer=H.createVertexBuffer(Ae,tl.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Ce=new e.StructArrayLayout1ui2;Ce.emplaceBack(0),Ce.emplaceBack(1),Ce.emplaceBack(3),Ce.emplaceBack(2),Ce.emplaceBack(0),this.tileBorderIndexBuffer=H.createIndexBuffer(Ce);var Ye=new e.StructArrayLayout3ui6;Ye.emplaceBack(0,1,2),Ye.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=H.createIndexBuffer(Ye),this.emptyTexture=new e.Texture(H,{width:1,height:1,data:new Uint8Array([0,0,0,0])},H.gl.RGBA);var lt=this.context.gl;this.stencilClearMode=new Kt({func:lt.ALWAYS,mask:0},0,255,lt.ZERO,lt.ZERO,lt.ZERO)},ri.prototype.clearStencil=function(){var H=this.context,ve=H.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var j=e.create();e.ortho(j,0,this.width,this.height,0,0,1),e.scale(j,j,[ve.drawingBufferWidth,ve.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(H,ve.TRIANGLES,$r.disabled,this.stencilClearMode,je.disabled,Me.disabled,Cn(j),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ri.prototype._renderTileClippingMasks=function(H,ve){if(!(this.currentStencilSource===H.source||!H.isTileClipped()||!ve||!ve.length)){this.currentStencilSource=H.source;var j=this.context,de=j.gl;this.nextStencilID+ve.length>256&&this.clearStencil(),j.setColorMode(je.disabled),j.setDepthMode($r.disabled);var Ae=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Ce=0,Ye=ve;Ce<Ye.length;Ce+=1){var lt=Ye[Ce],wt=this._tileClippingMaskIDs[lt.key]=this.nextStencilID++;Ae.draw(j,de.TRIANGLES,$r.disabled,new Kt({func:de.ALWAYS,mask:0},wt,255,de.KEEP,de.KEEP,de.REPLACE),je.disabled,Me.disabled,Cn(lt.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ri.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var H=this.nextStencilID++,ve=this.context.gl;return new Kt({func:ve.NOTEQUAL,mask:255},H,255,ve.KEEP,ve.KEEP,ve.REPLACE)},ri.prototype.stencilModeForClipping=function(H){var ve=this.context.gl;return new Kt({func:ve.EQUAL,mask:255},this._tileClippingMaskIDs[H.key],0,ve.KEEP,ve.KEEP,ve.REPLACE)},ri.prototype.stencilConfigForOverlap=function(H){var ve,j=this.context.gl,de=H.sort(function(wt,Yt){return Yt.overscaledZ-wt.overscaledZ}),Ae=de[de.length-1].overscaledZ,Ce=de[0].overscaledZ-Ae+1;if(Ce>1){this.currentStencilSource=void 0,this.nextStencilID+Ce>256&&this.clearStencil();for(var Ye={},lt=0;lt<Ce;lt++)Ye[lt+Ae]=new Kt({func:j.GEQUAL,mask:255},lt+this.nextStencilID,255,j.KEEP,j.KEEP,j.REPLACE);return this.nextStencilID+=Ce,[Ye,de]}return[(ve={},ve[Ae]=Kt.disabled,ve),de]},ri.prototype.colorModeForRenderPass=function(){var H=this.context.gl;if(this._showOverdrawInspector){var ve=8,j=1/ve;return new je([H.CONSTANT_COLOR,H.ONE],new e.Color(j,j,j,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?je.unblended:je.alphaBlended},ri.prototype.depthModeForSublayer=function(H,ve,j){if(!this.opaquePassEnabledForLayer())return $r.disabled;var de=1-((1+this.currentLayer)*this.numSublayers+H)*this.depthEpsilon;return new $r(j||this.context.gl.LEQUAL,ve,[de,de])},ri.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ri.prototype.render=function(H,ve){var j=this;this.style=H,this.options=ve,this.lineAtlas=H.lineAtlas,this.imageManager=H.imageManager,this.glyphManager=H.glyphManager,this.symbolFadeChange=H.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var de=this.style._order,Ae=this.style.sourceCaches;for(var Ce in Ae){var Ye=Ae[Ce];Ye.used&&Ye.prepare(this.context)}var lt={},wt={},Yt={};for(var ar in Ae){var fr=Ae[ar];lt[ar]=fr.getVisibleCoordinates(),wt[ar]=lt[ar].slice().reverse(),Yt[ar]=fr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var kr=0;kr<de.length;kr++){var Fr=de[kr];if(this.style._layers[Fr].is3D()){this.opaquePassCutoff=kr;break}}this.renderPass="offscreen";for(var Or=0,zr=de;Or<zr.length;Or+=1){var jr=zr[Or],cn=this.style._layers[jr];if(!(!cn.hasOffscreenPass()||cn.isHidden(this.transform.zoom))){var En=wt[cn.source];cn.type!=="custom"&&!En.length||this.renderLayer(this,Ae[cn.source],cn,En)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:ve.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ve.showOverdrawInspector,this.depthRangeFor3D=[0,1-(H._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=de.length-1;this.currentLayer>=0;this.currentLayer--){var Fn=this.style._layers[de[this.currentLayer]],jn=Ae[Fn.source],qn=lt[Fn.source];this._renderTileClippingMasks(Fn,qn),this.renderLayer(this,jn,Fn,qn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<de.length;this.currentLayer++){var Qn=this.style._layers[de[this.currentLayer]],ca=Ae[Qn.source],xa=(Qn.type==="symbol"?Yt:wt)[Qn.source];this._renderTileClippingMasks(Qn,lt[Qn.source]),this.renderLayer(this,ca,Qn,xa)}if(this.options.showTileBoundaries){var ga,Ma,Ca=e.values(this.style._layers);Ca.forEach(function(Ha){Ha.source&&!Ha.isHidden(j.transform.zoom)&&(Ha.source!==(Ma&&Ma.id)&&(Ma=j.style.sourceCaches[Ha.source]),(!ga||ga.getSource().maxzoom<Ma.getSource().maxzoom)&&(ga=Ma))}),ga&&ao.debug(this,ga,ga.getVisibleCoordinates())}this.options.showPadding&&mn(this),this.context.setDefault()},ri.prototype.renderLayer=function(H,ve,j,de){j.isHidden(this.transform.zoom)||j.type!=="background"&&j.type!=="custom"&&!de.length||(this.id=j.id,this.gpuTimingStart(j),ao[j.type](H,ve,j,de,this.style.placement.variableOffsets),this.gpuTimingEnd())},ri.prototype.gpuTimingStart=function(H){if(!!this.options.gpuTiming){var ve=this.context.extTimerQuery,j=this.gpuTimers[H.id];j||(j=this.gpuTimers[H.id]={calls:0,cpuTime:0,query:ve.createQueryEXT()}),j.calls++,ve.beginQueryEXT(ve.TIME_ELAPSED_EXT,j.query)}},ri.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var H=this.context.extTimerQuery;H.endQueryEXT(H.TIME_ELAPSED_EXT)}},ri.prototype.collectGpuTimers=function(){var H=this.gpuTimers;return this.gpuTimers={},H},ri.prototype.queryGpuTimers=function(H){var ve={};for(var j in H){var de=H[j],Ae=this.context.extTimerQuery,Ce=Ae.getQueryObjectEXT(de.query,Ae.QUERY_RESULT_EXT)/(1e3*1e3);Ae.deleteQueryEXT(de.query),ve[j]=Ce}return ve},ri.prototype.translatePosMatrix=function(H,ve,j,de,Ae){if(!j[0]&&!j[1])return H;var Ce=Ae?de==="map"?this.transform.angle:0:de==="viewport"?-this.transform.angle:0;if(Ce){var Ye=Math.sin(Ce),lt=Math.cos(Ce);j=[j[0]*lt-j[1]*Ye,j[0]*Ye+j[1]*lt]}var wt=[Ae?j[0]:An(ve,j[0],this.transform.zoom),Ae?j[1]:An(ve,j[1],this.transform.zoom),0],Yt=new Float32Array(16);return e.translate(Yt,H,wt),Yt},ri.prototype.saveTileTexture=function(H){var ve=this._tileTextures[H.size[0]];ve?ve.push(H):this._tileTextures[H.size[0]]=[H]},ri.prototype.getTileTexture=function(H){var ve=this._tileTextures[H];return ve&&ve.length>0?ve.pop():null},ri.prototype.isPatternMissing=function(H){if(!H)return!1;if(!H.from||!H.to)return!0;var ve=this.imageManager.getPattern(H.from.toString()),j=this.imageManager.getPattern(H.to.toString());return!ve||!j},ri.prototype.useProgram=function(H,ve){this.cache=this.cache||{};var j=""+H+(ve?ve.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[j]||(this.cache[j]=new Jo(this.context,ll[H],ve,Kl[H],this._showOverdrawInspector)),this.cache[j]},ri.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ri.prototype.setBaseState=function(){var H=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(H.FUNC_ADD)},ri.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var H=this.context.gl;this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,H.RGBA)}},ri.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Hi=function(H,ve){this.points=H,this.planes=ve};Hi.fromInvProjectionMatrix=function(H,ve,j){var de=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Ae=Math.pow(2,j),Ce=de.map(function(wt){return e.transformMat4([],wt,H)}).map(function(wt){return e.scale$1([],wt,1/wt[3]/ve*Ae)}),Ye=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],lt=Ye.map(function(wt){var Yt=e.sub([],Ce[wt[0]],Ce[wt[1]]),ar=e.sub([],Ce[wt[2]],Ce[wt[1]]),fr=e.normalize([],e.cross([],Yt,ar)),kr=-e.dot(fr,Ce[wt[1]]);return fr.concat(kr)});return new Hi(Ce,lt)};var fo=function(H,ve){this.min=H,this.max=ve,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};fo.prototype.quadrant=function(H){for(var ve=[H%2==0,H<2],j=e.clone$2(this.min),de=e.clone$2(this.max),Ae=0;Ae<ve.length;Ae++)j[Ae]=ve[Ae]?this.min[Ae]:this.center[Ae],de[Ae]=ve[Ae]?this.center[Ae]:this.max[Ae];return de[2]=this.max[2],new fo(j,de)},fo.prototype.distanceX=function(H){var ve=Math.max(Math.min(this.max[0],H[0]),this.min[0]);return ve-H[0]},fo.prototype.distanceY=function(H){var ve=Math.max(Math.min(this.max[1],H[1]),this.min[1]);return ve-H[1]},fo.prototype.intersects=function(H){for(var ve=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],j=!0,de=0;de<H.planes.length;de++){for(var Ae=H.planes[de],Ce=0,Ye=0;Ye<ve.length;Ye++)Ce+=e.dot$1(Ae,ve[Ye])>=0;if(Ce===0)return 0;Ce!==ve.length&&(j=!1)}if(j)return 2;for(var lt=0;lt<3;lt++){for(var wt=Number.MAX_VALUE,Yt=-Number.MAX_VALUE,ar=0;ar<H.points.length;ar++){var fr=H.points[ar][lt]-this.min[lt];wt=Math.min(wt,fr),Yt=Math.max(Yt,fr)}if(Yt<0||wt>this.max[lt]-this.min[lt])return 0}return 1};var bo=function(H,ve,j,de){if(H===void 0&&(H=0),ve===void 0&&(ve=0),j===void 0&&(j=0),de===void 0&&(de=0),isNaN(H)||H<0||isNaN(ve)||ve<0||isNaN(j)||j<0||isNaN(de)||de<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=H,this.bottom=ve,this.left=j,this.right=de};bo.prototype.interpolate=function(H,ve,j){return ve.top!=null&&H.top!=null&&(this.top=e.number(H.top,ve.top,j)),ve.bottom!=null&&H.bottom!=null&&(this.bottom=e.number(H.bottom,ve.bottom,j)),ve.left!=null&&H.left!=null&&(this.left=e.number(H.left,ve.left,j)),ve.right!=null&&H.right!=null&&(this.right=e.number(H.right,ve.right,j)),this},bo.prototype.getCenter=function(H,ve){var j=e.clamp((this.left+H-this.right)/2,0,H),de=e.clamp((this.top+ve-this.bottom)/2,0,ve);return new e.Point(j,de)},bo.prototype.equals=function(H){return this.top===H.top&&this.bottom===H.bottom&&this.left===H.left&&this.right===H.right},bo.prototype.clone=function(){return new bo(this.top,this.bottom,this.left,this.right)},bo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var bi=function(H,ve,j,de,Ae){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Ae===void 0?!0:Ae,this._minZoom=H||0,this._maxZoom=ve||22,this._minPitch=j==null?0:j,this._maxPitch=de==null?60:de,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new bo,this._posMatrixCache={},this._alignedPosMatrixCache={}},Mi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};bi.prototype.clone=function(){var H=new bi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return H.tileSize=this.tileSize,H.latRange=this.latRange,H.width=this.width,H.height=this.height,H._center=this._center,H.zoom=this.zoom,H.angle=this.angle,H._fov=this._fov,H._pitch=this._pitch,H._unmodified=this._unmodified,H._edgeInsets=this._edgeInsets.clone(),H._calcMatrices(),H},Mi.minZoom.get=function(){return this._minZoom},Mi.minZoom.set=function(ce){this._minZoom!==ce&&(this._minZoom=ce,this.zoom=Math.max(this.zoom,ce))},Mi.maxZoom.get=function(){return this._maxZoom},Mi.maxZoom.set=function(ce){this._maxZoom!==ce&&(this._maxZoom=ce,this.zoom=Math.min(this.zoom,ce))},Mi.minPitch.get=function(){return this._minPitch},Mi.minPitch.set=function(ce){this._minPitch!==ce&&(this._minPitch=ce,this.pitch=Math.max(this.pitch,ce))},Mi.maxPitch.get=function(){return this._maxPitch},Mi.maxPitch.set=function(ce){this._maxPitch!==ce&&(this._maxPitch=ce,this.pitch=Math.min(this.pitch,ce))},Mi.renderWorldCopies.get=function(){return this._renderWorldCopies},Mi.renderWorldCopies.set=function(ce){ce===void 0?ce=!0:ce===null&&(ce=!1),this._renderWorldCopies=ce},Mi.worldSize.get=function(){return this.tileSize*this.scale},Mi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Mi.size.get=function(){return new e.Point(this.width,this.height)},Mi.bearing.get=function(){return-this.angle/Math.PI*180},Mi.bearing.set=function(ce){var H=-e.wrap(ce,-180,180)*Math.PI/180;this.angle!==H&&(this._unmodified=!1,this.angle=H,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Mi.pitch.get=function(){return this._pitch/Math.PI*180},Mi.pitch.set=function(ce){var H=e.clamp(ce,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==H&&(this._unmodified=!1,this._pitch=H,this._calcMatrices())},Mi.fov.get=function(){return this._fov/Math.PI*180},Mi.fov.set=function(ce){ce=Math.max(.01,Math.min(60,ce)),this._fov!==ce&&(this._unmodified=!1,this._fov=ce/180*Math.PI,this._calcMatrices())},Mi.zoom.get=function(){return this._zoom},Mi.zoom.set=function(ce){var H=Math.min(Math.max(ce,this.minZoom),this.maxZoom);this._zoom!==H&&(this._unmodified=!1,this._zoom=H,this.scale=this.zoomScale(H),this.tileZoom=Math.floor(H),this.zoomFraction=H-this.tileZoom,this._constrain(),this._calcMatrices())},Mi.center.get=function(){return this._center},Mi.center.set=function(ce){ce.lat===this._center.lat&&ce.lng===this._center.lng||(this._unmodified=!1,this._center=ce,this._constrain(),this._calcMatrices())},Mi.padding.get=function(){return this._edgeInsets.toJSON()},Mi.padding.set=function(ce){this._edgeInsets.equals(ce)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ce,1),this._calcMatrices())},Mi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},bi.prototype.isPaddingEqual=function(H){return this._edgeInsets.equals(H)},bi.prototype.interpolatePadding=function(H,ve,j){this._unmodified=!1,this._edgeInsets.interpolate(H,ve,j),this._constrain(),this._calcMatrices()},bi.prototype.coveringZoomLevel=function(H){var ve=(H.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/H.tileSize));return Math.max(0,ve)},bi.prototype.getVisibleUnwrappedCoordinates=function(H){var ve=[new e.UnwrappedTileID(0,H)];if(this._renderWorldCopies)for(var j=this.pointCoordinate(new e.Point(0,0)),de=this.pointCoordinate(new e.Point(this.width,0)),Ae=this.pointCoordinate(new e.Point(this.width,this.height)),Ce=this.pointCoordinate(new e.Point(0,this.height)),Ye=Math.floor(Math.min(j.x,de.x,Ae.x,Ce.x)),lt=Math.floor(Math.max(j.x,de.x,Ae.x,Ce.x)),wt=1,Yt=Ye-wt;Yt<=lt+wt;Yt++)Yt!==0&&ve.push(new e.UnwrappedTileID(Yt,H));return ve},bi.prototype.coveringTiles=function(H){var ve=this.coveringZoomLevel(H),j=ve;if(H.minzoom!==void 0&&ve<H.minzoom)return[];H.maxzoom!==void 0&&ve>H.maxzoom&&(ve=H.maxzoom);var de=e.MercatorCoordinate.fromLngLat(this.center),Ae=Math.pow(2,ve),Ce=[Ae*de.x,Ae*de.y,0],Ye=Hi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ve),lt=H.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(lt=ve);var wt=3,Yt=function(Ca){return{aabb:new fo([Ca*Ae,0,0],[(Ca+1)*Ae,Ae,0]),zoom:0,x:0,y:0,wrap:Ca,fullyVisible:!1}},ar=[],fr=[],kr=ve,Fr=H.reparseOverscaled?j:ve;if(this._renderWorldCopies)for(var Or=1;Or<=3;Or++)ar.push(Yt(-Or)),ar.push(Yt(Or));for(ar.push(Yt(0));ar.length>0;){var zr=ar.pop(),jr=zr.x,cn=zr.y,En=zr.fullyVisible;if(!En){var Fn=zr.aabb.intersects(Ye);if(Fn===0)continue;En=Fn===2}var jn=zr.aabb.distanceX(Ce),qn=zr.aabb.distanceY(Ce),Qn=Math.max(Math.abs(jn),Math.abs(qn)),ca=wt+(1<<kr-zr.zoom)-2;if(zr.zoom===kr||Qn>ca&&zr.zoom>=lt){fr.push({tileID:new e.OverscaledTileID(zr.zoom===kr?Fr:zr.zoom,zr.wrap,zr.zoom,jr,cn),distanceSq:e.sqrLen([Ce[0]-.5-jr,Ce[1]-.5-cn])});continue}for(var xa=0;xa<4;xa++){var ga=(jr<<1)+xa%2,Ma=(cn<<1)+(xa>>1);ar.push({aabb:zr.aabb.quadrant(xa),zoom:zr.zoom+1,x:ga,y:Ma,wrap:zr.wrap,fullyVisible:En})}}return fr.sort(function(Ca,Ha){return Ca.distanceSq-Ha.distanceSq}).map(function(Ca){return Ca.tileID})},bi.prototype.resize=function(H,ve){this.width=H,this.height=ve,this.pixelsToGLUnits=[2/H,-2/ve],this._constrain(),this._calcMatrices()},Mi.unmodified.get=function(){return this._unmodified},bi.prototype.zoomScale=function(H){return Math.pow(2,H)},bi.prototype.scaleZoom=function(H){return Math.log(H)/Math.LN2},bi.prototype.project=function(H){var ve=e.clamp(H.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(H.lng)*this.worldSize,e.mercatorYfromLat(ve)*this.worldSize)},bi.prototype.unproject=function(H){return new e.MercatorCoordinate(H.x/this.worldSize,H.y/this.worldSize).toLngLat()},Mi.point.get=function(){return this.project(this.center)},bi.prototype.setLocationAtPoint=function(H,ve){var j=this.pointCoordinate(ve),de=this.pointCoordinate(this.centerPoint),Ae=this.locationCoordinate(H),Ce=new e.MercatorCoordinate(Ae.x-(j.x-de.x),Ae.y-(j.y-de.y));this.center=this.coordinateLocation(Ce),this._renderWorldCopies&&(this.center=this.center.wrap())},bi.prototype.locationPoint=function(H){return this.coordinatePoint(this.locationCoordinate(H))},bi.prototype.pointLocation=function(H){return this.coordinateLocation(this.pointCoordinate(H))},bi.prototype.locationCoordinate=function(H){return e.MercatorCoordinate.fromLngLat(H)},bi.prototype.coordinateLocation=function(H){return H.toLngLat()},bi.prototype.pointCoordinate=function(H){var ve=0,j=[H.x,H.y,0,1],de=[H.x,H.y,1,1];e.transformMat4(j,j,this.pixelMatrixInverse),e.transformMat4(de,de,this.pixelMatrixInverse);var Ae=j[3],Ce=de[3],Ye=j[0]/Ae,lt=de[0]/Ce,wt=j[1]/Ae,Yt=de[1]/Ce,ar=j[2]/Ae,fr=de[2]/Ce,kr=ar===fr?0:(ve-ar)/(fr-ar);return new e.MercatorCoordinate(e.number(Ye,lt,kr)/this.worldSize,e.number(wt,Yt,kr)/this.worldSize)},bi.prototype.coordinatePoint=function(H){var ve=[H.x*this.worldSize,H.y*this.worldSize,0,1];return e.transformMat4(ve,ve,this.pixelMatrix),new e.Point(ve[0]/ve[3],ve[1]/ve[3])},bi.prototype.getBounds=function(){return new e.LngLatBounds().extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},bi.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},bi.prototype.setMaxBounds=function(H){H?(this.lngRange=[H.getWest(),H.getEast()],this.latRange=[H.getSouth(),H.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},bi.prototype.calculatePosMatrix=function(H,ve){ve===void 0&&(ve=!1);var j=H.key,de=ve?this._alignedPosMatrixCache:this._posMatrixCache;if(de[j])return de[j];var Ae=H.canonical,Ce=this.worldSize/this.zoomScale(Ae.z),Ye=Ae.x+Math.pow(2,Ae.z)*H.wrap,lt=e.identity(new Float64Array(16));return e.translate(lt,lt,[Ye*Ce,Ae.y*Ce,0]),e.scale(lt,lt,[Ce/e.EXTENT,Ce/e.EXTENT,1]),e.multiply(lt,ve?this.alignedProjMatrix:this.projMatrix,lt),de[j]=new Float32Array(lt),de[j]},bi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},bi.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var H=-90,ve=90,j=-180,de=180,Ae,Ce,Ye,lt,wt=this.size,Yt=this._unmodified;if(this.latRange){var ar=this.latRange;H=e.mercatorYfromLat(ar[1])*this.worldSize,ve=e.mercatorYfromLat(ar[0])*this.worldSize,Ae=ve-H<wt.y?wt.y/(ve-H):0}if(this.lngRange){var fr=this.lngRange;j=e.mercatorXfromLng(fr[0])*this.worldSize,de=e.mercatorXfromLng(fr[1])*this.worldSize,Ce=de-j<wt.x?wt.x/(de-j):0}var kr=this.point,Fr=Math.max(Ce||0,Ae||0);if(Fr){this.center=this.unproject(new e.Point(Ce?(de+j)/2:kr.x,Ae?(ve+H)/2:kr.y)),this.zoom+=this.scaleZoom(Fr),this._unmodified=Yt,this._constraining=!1;return}if(this.latRange){var Or=kr.y,zr=wt.y/2;Or-zr<H&&(lt=H+zr),Or+zr>ve&&(lt=ve-zr)}if(this.lngRange){var jr=kr.x,cn=wt.x/2;jr-cn<j&&(Ye=j+cn),jr+cn>de&&(Ye=de-cn)}(Ye!==void 0||lt!==void 0)&&(this.center=this.unproject(new e.Point(Ye!==void 0?Ye:kr.x,lt!==void 0?lt:kr.y))),this._unmodified=Yt,this._constraining=!1}},bi.prototype._calcMatrices=function(){if(!!this.height){var H=this._fov/2,ve=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(H)*this.height;var j=Math.PI/2+this._pitch,de=this._fov*(.5+ve.y/this.height),Ae=Math.sin(de)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-j-de,.01,Math.PI-.01)),Ce=this.point,Ye=Ce.x,lt=Ce.y,wt=Math.cos(Math.PI/2-this._pitch)*Ae+this.cameraToCenterDistance,Yt=wt*1.01,ar=this.height/50,fr=new Float64Array(16);e.perspective(fr,this._fov,this.width/this.height,ar,Yt),fr[8]=-ve.x*2/this.width,fr[9]=ve.y*2/this.height,e.scale(fr,fr,[1,-1,1]),e.translate(fr,fr,[0,0,-this.cameraToCenterDistance]),e.rotateX(fr,fr,this._pitch),e.rotateZ(fr,fr,this.angle),e.translate(fr,fr,[-Ye,-lt,0]),this.mercatorMatrix=e.scale([],fr,[this.worldSize,this.worldSize,this.worldSize]),e.scale(fr,fr,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=fr,this.invProjMatrix=e.invert([],this.projMatrix);var kr=this.width%2/2,Fr=this.height%2/2,Or=Math.cos(this.angle),zr=Math.sin(this.angle),jr=Ye-Math.round(Ye)+Or*kr+zr*Fr,cn=lt-Math.round(lt)+Or*Fr+zr*kr,En=new Float64Array(fr);if(e.translate(En,En,[jr>.5?jr-1:jr,cn>.5?cn-1:cn,0]),this.alignedProjMatrix=En,fr=e.create(),e.scale(fr,fr,[this.width/2,-this.height/2,1]),e.translate(fr,fr,[1,-1,0]),this.labelPlaneMatrix=fr,fr=e.create(),e.scale(fr,fr,[1,-1,1]),e.translate(fr,fr,[-1,-1,0]),e.scale(fr,fr,[2/this.width,2/this.height,1]),this.glCoordMatrix=fr,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),fr=e.invert(new Float64Array(16),this.pixelMatrix),!fr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=fr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},bi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var H=this.pointCoordinate(new e.Point(0,0)),ve=[H.x*this.worldSize,H.y*this.worldSize,0,1],j=e.transformMat4(ve,ve,this.pixelMatrix);return j[3]/this.cameraToCenterDistance},bi.prototype.getCameraPoint=function(){var H=this._pitch,ve=Math.tan(H)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,ve))},bi.prototype.getCameraQueryGeometry=function(H){var ve=this.getCameraPoint();if(H.length===1)return[H[0],ve];for(var j=ve.x,de=ve.y,Ae=ve.x,Ce=ve.y,Ye=0,lt=H;Ye<lt.length;Ye+=1){var wt=lt[Ye];j=Math.min(j,wt.x),de=Math.min(de,wt.y),Ae=Math.max(Ae,wt.x),Ce=Math.max(Ce,wt.y)}return[new e.Point(j,de),new e.Point(Ae,de),new e.Point(Ae,Ce),new e.Point(j,Ce),new e.Point(j,de)]},Object.defineProperties(bi.prototype,Mi);function us(ce,H){var ve=!1,j=null,de=function(){j=null,ve&&(ce(),j=setTimeout(de,H),ve=!1)};return function(){return ve=!0,j||de(),j}}var po=function(H){this._hashName=H&&encodeURIComponent(H),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=us(this._updateHashUnthrottled.bind(this),30*1e3/100)};po.prototype.addTo=function(H){return this._map=H,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},po.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},po.prototype.getHashString=function(H){var ve=this._map.getCenter(),j=Math.round(this._map.getZoom()*100)/100,de=Math.ceil((j*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ae=Math.pow(10,de),Ce=Math.round(ve.lng*Ae)/Ae,Ye=Math.round(ve.lat*Ae)/Ae,lt=this._map.getBearing(),wt=this._map.getPitch(),Yt="";if(H?Yt+="/"+Ce+"/"+Ye+"/"+j:Yt+=j+"/"+Ye+"/"+Ce,(lt||wt)&&(Yt+="/"+Math.round(lt*10)/10),wt&&(Yt+="/"+Math.round(wt)),this._hashName){var ar=this._hashName,fr=!1,kr=e.window.location.hash.slice(1).split("&").map(function(Fr){var Or=Fr.split("=")[0];return Or===ar?(fr=!0,Or+"="+Yt):Fr}).filter(function(Fr){return Fr});return fr||kr.push(ar+"="+Yt),"#"+kr.join("&")}return"#"+Yt},po.prototype._getCurrentHash=function(){var H=this,ve=e.window.location.hash.replace("#","");if(this._hashName){var j;return ve.split("&").map(function(de){return de.split("=")}).forEach(function(de){de[0]===H._hashName&&(j=de)}),(j&&j[1]||"").split("/")}return ve.split("/")},po.prototype._onHashChange=function(){var H=this._getCurrentHash();if(H.length>=3&&!H.some(function(j){return isNaN(j)})){var ve=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(H[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+H[2],+H[1]],zoom:+H[0],bearing:ve,pitch:+(H[4]||0)}),!0}return!1},po.prototype._updateHashUnthrottled=function(){var H=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",H)}catch{}};var Lo={linearity:.3,easing:e.bezier(0,0,.3,1)},Ho=e.extend({deceleration:2500,maxSpeed:1400},Lo),fe=e.extend({deceleration:20,maxSpeed:1400},Lo),be=e.extend({deceleration:1e3,maxSpeed:360},Lo),Ee=e.extend({deceleration:1e3,maxSpeed:90},Lo),Be=function(H){this._map=H,this.clear()};Be.prototype.clear=function(){this._inertiaBuffer=[]},Be.prototype.record=function(H){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:H})},Be.prototype._drainInertiaBuffer=function(){for(var H=this._inertiaBuffer,ve=e.browser.now(),j=160;H.length>0&&ve-H[0].time>j;)H.shift()},Be.prototype._onMoveEnd=function(H){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var ve={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},j=0,de=this._inertiaBuffer;j<de.length;j+=1){var Ae=de[j],Ce=Ae.settings;ve.zoom+=Ce.zoomDelta||0,ve.bearing+=Ce.bearingDelta||0,ve.pitch+=Ce.pitchDelta||0,Ce.panDelta&&ve.pan._add(Ce.panDelta),Ce.around&&(ve.around=Ce.around),Ce.pinchAround&&(ve.pinchAround=Ce.pinchAround)}var Ye=this._inertiaBuffer[this._inertiaBuffer.length-1],lt=Ye.time-this._inertiaBuffer[0].time,wt={};if(ve.pan.mag()){var Yt=We(ve.pan.mag(),lt,e.extend({},Ho,H||{}));wt.offset=ve.pan.mult(Yt.amount/ve.pan.mag()),wt.center=this._map.transform.center,ze(wt,Yt)}if(ve.zoom){var ar=We(ve.zoom,lt,fe);wt.zoom=this._map.transform.zoom+ar.amount,ze(wt,ar)}if(ve.bearing){var fr=We(ve.bearing,lt,be);wt.bearing=this._map.transform.bearing+e.clamp(fr.amount,-179,179),ze(wt,fr)}if(ve.pitch){var kr=We(ve.pitch,lt,Ee);wt.pitch=this._map.transform.pitch+kr.amount,ze(wt,kr)}if(wt.zoom||wt.bearing){var Fr=ve.pinchAround===void 0?ve.around:ve.pinchAround;wt.around=Fr?this._map.unproject(Fr):this._map.getCenter()}return this.clear(),e.extend(wt,{noMoveStart:!0})}};function ze(ce,H){(!ce.duration||ce.duration<H.duration)&&(ce.duration=H.duration,ce.easing=H.easing)}function We(ce,H,ve){var j=ve.maxSpeed,de=ve.linearity,Ae=ve.deceleration,Ce=e.clamp(ce*de/(H/1e3),-j,j),Ye=Math.abs(Ce)/(Ae*de);return{easing:ve.easing,duration:Ye*1e3,amount:Ce*(Ye/2)}}var yt=function(ce){function H(j,de,Ae,Ce){Ce===void 0&&(Ce={});var Ye=n.mousePos(de.getCanvasContainer(),Ae),lt=de.unproject(Ye);ce.call(this,j,e.extend({point:Ye,lngLat:lt,originalEvent:Ae},Ce)),this._defaultPrevented=!1,this.target=de}ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H;var ve={defaultPrevented:{configurable:!0}};return H.prototype.preventDefault=function(){this._defaultPrevented=!0},ve.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(H.prototype,ve),H}(e.Event),ht=function(ce){function H(j,de,Ae){var Ce=j==="touchend"?Ae.changedTouches:Ae.touches,Ye=n.touchPos(de.getCanvasContainer(),Ce),lt=Ye.map(function(ar){return de.unproject(ar)}),wt=Ye.reduce(function(ar,fr,kr,Fr){return ar.add(fr.div(Fr.length))},new e.Point(0,0)),Yt=de.unproject(wt);ce.call(this,j,{points:Ye,point:wt,lngLats:lt,lngLat:Yt,originalEvent:Ae}),this._defaultPrevented=!1}ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H;var ve={defaultPrevented:{configurable:!0}};return H.prototype.preventDefault=function(){this._defaultPrevented=!0},ve.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(H.prototype,ve),H}(e.Event),kt=function(ce){function H(j,de,Ae){ce.call(this,j,{originalEvent:Ae}),this._defaultPrevented=!1}ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H;var ve={defaultPrevented:{configurable:!0}};return H.prototype.preventDefault=function(){this._defaultPrevented=!0},ve.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(H.prototype,ve),H}(e.Event),Vt=function(H,ve){this._map=H,this._clickTolerance=ve.clickTolerance};Vt.prototype.reset=function(){delete this._mousedownPos},Vt.prototype.wheel=function(H){return this._firePreventable(new kt(H.type,this._map,H))},Vt.prototype.mousedown=function(H,ve){return this._mousedownPos=ve,this._firePreventable(new yt(H.type,this._map,H))},Vt.prototype.mouseup=function(H){this._map.fire(new yt(H.type,this._map,H))},Vt.prototype.click=function(H,ve){this._mousedownPos&&this._mousedownPos.dist(ve)>=this._clickTolerance||this._map.fire(new yt(H.type,this._map,H))},Vt.prototype.dblclick=function(H){return this._firePreventable(new yt(H.type,this._map,H))},Vt.prototype.mouseover=function(H){this._map.fire(new yt(H.type,this._map,H))},Vt.prototype.mouseout=function(H){this._map.fire(new yt(H.type,this._map,H))},Vt.prototype.touchstart=function(H){return this._firePreventable(new ht(H.type,this._map,H))},Vt.prototype.touchmove=function(H){this._map.fire(new ht(H.type,this._map,H))},Vt.prototype.touchend=function(H){this._map.fire(new ht(H.type,this._map,H))},Vt.prototype.touchcancel=function(H){this._map.fire(new ht(H.type,this._map,H))},Vt.prototype._firePreventable=function(H){if(this._map.fire(H),H.defaultPrevented)return{}},Vt.prototype.isEnabled=function(){return!0},Vt.prototype.isActive=function(){return!1},Vt.prototype.enable=function(){},Vt.prototype.disable=function(){};var Zt=function(H){this._map=H};Zt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Zt.prototype.mousemove=function(H){this._map.fire(new yt(H.type,this._map,H))},Zt.prototype.mousedown=function(){this._delayContextMenu=!0},Zt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new yt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Zt.prototype.contextmenu=function(H){this._delayContextMenu?this._contextMenuEvent=H:this._map.fire(new yt(H.type,this._map,H)),this._map.listens("contextmenu")&&H.preventDefault()},Zt.prototype.isEnabled=function(){return!0},Zt.prototype.isActive=function(){return!1},Zt.prototype.enable=function(){},Zt.prototype.disable=function(){};var Qt=function(H,ve){this._map=H,this._el=H.getCanvasContainer(),this._container=H.getContainer(),this._clickTolerance=ve.clickTolerance||1};Qt.prototype.isEnabled=function(){return!!this._enabled},Qt.prototype.isActive=function(){return!!this._active},Qt.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Qt.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Qt.prototype.mousedown=function(H,ve){!this.isEnabled()||!(H.shiftKey&&H.button===0)||(n.disableDrag(),this._startPos=this._lastPos=ve,this._active=!0)},Qt.prototype.mousemoveWindow=function(H,ve){if(!!this._active){var j=ve;if(!(this._lastPos.equals(j)||!this._box&&j.dist(this._startPos)<this._clickTolerance)){var de=this._startPos;this._lastPos=j,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",H));var Ae=Math.min(de.x,j.x),Ce=Math.max(de.x,j.x),Ye=Math.min(de.y,j.y),lt=Math.max(de.y,j.y);n.setTransform(this._box,"translate("+Ae+"px,"+Ye+"px)"),this._box.style.width=Ce-Ae+"px",this._box.style.height=lt-Ye+"px"}}},Qt.prototype.mouseupWindow=function(H,ve){var j=this;if(!!this._active&&H.button===0){var de=this._startPos,Ae=ve;if(this.reset(),n.suppressClick(),de.x===Ae.x&&de.y===Ae.y)this._fireEvent("boxzoomcancel",H);else return this._map.fire(new e.Event("boxzoomend",{originalEvent:H})),{cameraAnimation:function(Ce){return Ce.fitScreenCoordinates(de,Ae,j._map.getBearing(),{linear:!0})}}}},Qt.prototype.keydown=function(H){!this._active||H.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",H))},Qt.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},Qt.prototype._fireEvent=function(H,ve){return this._map.fire(new e.Event(H,{originalEvent:ve}))};function Ar(ce,H){for(var ve={},j=0;j<ce.length;j++)ve[ce[j].identifier]=H[j];return ve}function Kr(ce){for(var H=new e.Point(0,0),ve=0,j=ce;ve<j.length;ve+=1){var de=j[ve];H._add(de)}return H.div(ce.length)}var un=500,Sr=500,Br=30,Gr=function(H){this.reset(),this.numTouches=H.numTouches};Gr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Gr.prototype.touchstart=function(H,ve,j){(this.centroid||j.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=H.timeStamp),j.length===this.numTouches&&(this.centroid=Kr(ve),this.touches=Ar(j,ve)))},Gr.prototype.touchmove=function(H,ve,j){if(!(this.aborted||!this.centroid)){var de=Ar(j,ve);for(var Ae in this.touches){var Ce=this.touches[Ae],Ye=de[Ae];(!Ye||Ye.dist(Ce)>Br)&&(this.aborted=!0)}}},Gr.prototype.touchend=function(H,ve,j){if((!this.centroid||H.timeStamp-this.startTime>Sr)&&(this.aborted=!0),j.length===0){var de=!this.aborted&&this.centroid;if(this.reset(),de)return de}};var an=function(H){this.singleTap=new Gr(H),this.numTaps=H.numTaps,this.reset()};an.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},an.prototype.touchstart=function(H,ve,j){this.singleTap.touchstart(H,ve,j)},an.prototype.touchmove=function(H,ve,j){this.singleTap.touchmove(H,ve,j)},an.prototype.touchend=function(H,ve,j){var de=this.singleTap.touchend(H,ve,j);if(de){var Ae=H.timeStamp-this.lastTime<un,Ce=!this.lastTap||this.lastTap.dist(de)<Br;if((!Ae||!Ce)&&this.reset(),this.count++,this.lastTime=H.timeStamp,this.lastTap=de,this.count===this.numTaps)return this.reset(),de}};var ln=function(){this._zoomIn=new an({numTouches:1,numTaps:2}),this._zoomOut=new an({numTouches:2,numTaps:1}),this.reset()};ln.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ln.prototype.touchstart=function(H,ve,j){this._zoomIn.touchstart(H,ve,j),this._zoomOut.touchstart(H,ve,j)},ln.prototype.touchmove=function(H,ve,j){this._zoomIn.touchmove(H,ve,j),this._zoomOut.touchmove(H,ve,j)},ln.prototype.touchend=function(H,ve,j){var de=this,Ae=this._zoomIn.touchend(H,ve,j),Ce=this._zoomOut.touchend(H,ve,j);if(Ae)return this._active=!0,H.preventDefault(),setTimeout(function(){return de.reset()},0),{cameraAnimation:function(Ye){return Ye.easeTo({duration:300,zoom:Ye.getZoom()+1,around:Ye.unproject(Ae)},{originalEvent:H})}};if(Ce)return this._active=!0,H.preventDefault(),setTimeout(function(){return de.reset()},0),{cameraAnimation:function(Ye){return Ye.easeTo({duration:300,zoom:Ye.getZoom()-1,around:Ye.unproject(Ce)},{originalEvent:H})}}},ln.prototype.touchcancel=function(){this.reset()},ln.prototype.enable=function(){this._enabled=!0},ln.prototype.disable=function(){this._enabled=!1,this.reset()},ln.prototype.isEnabled=function(){return this._enabled},ln.prototype.isActive=function(){return this._active};var Wr=0,Nn=2,ra=function(H){this.reset(),this._clickTolerance=H.clickTolerance||1};ra.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ra.prototype._correctButton=function(H,ve){return!1},ra.prototype._move=function(H,ve){return{}},ra.prototype.mousedown=function(H,ve){if(!this._lastPoint){var j=n.mouseButton(H);!this._correctButton(H,j)||(this._lastPoint=ve,this._eventButton=j)}},ra.prototype.mousemoveWindow=function(H,ve){var j=this._lastPoint;if(!!j&&(H.preventDefault(),!(!this._moved&&ve.dist(j)<this._clickTolerance)))return this._moved=!0,this._lastPoint=ve,this._move(j,ve)},ra.prototype.mouseupWindow=function(H){var ve=n.mouseButton(H);ve===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},ra.prototype.enable=function(){this._enabled=!0},ra.prototype.disable=function(){this._enabled=!1,this.reset()},ra.prototype.isEnabled=function(){return this._enabled},ra.prototype.isActive=function(){return this._active};var ba=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.mousedown=function(j,de){ce.prototype.mousedown.call(this,j,de),this._lastPoint&&(this._active=!0)},H.prototype._correctButton=function(j,de){return de===Wr&&!j.ctrlKey},H.prototype._move=function(j,de){return{around:de,panDelta:de.sub(j)}},H}(ra),oa=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype._correctButton=function(j,de){return de===Wr&&j.ctrlKey||de===Nn},H.prototype._move=function(j,de){var Ae=.8,Ce=(de.x-j.x)*Ae;if(Ce)return this._active=!0,{bearingDelta:Ce}},H.prototype.contextmenu=function(j){j.preventDefault()},H}(ra),ka=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype._correctButton=function(j,de){return de===Wr&&j.ctrlKey||de===Nn},H.prototype._move=function(j,de){var Ae=-.5,Ce=(de.y-j.y)*Ae;if(Ce)return this._active=!0,{pitchDelta:Ce}},H.prototype.contextmenu=function(j){j.preventDefault()},H}(ra),ua=function(H){this._minTouches=1,this._clickTolerance=H.clickTolerance||1,this.reset()};ua.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},ua.prototype.touchstart=function(H,ve,j){return this._calculateTransform(H,ve,j)},ua.prototype.touchmove=function(H,ve,j){if(!!this._active)return H.preventDefault(),this._calculateTransform(H,ve,j)},ua.prototype.touchend=function(H,ve,j){this._calculateTransform(H,ve,j),this._active&&j.length<this._minTouches&&this.reset()},ua.prototype.touchcancel=function(){this.reset()},ua.prototype._calculateTransform=function(H,ve,j){j.length>0&&(this._active=!0);var de=Ar(j,ve),Ae=new e.Point(0,0),Ce=new e.Point(0,0),Ye=0;for(var lt in de){var wt=de[lt],Yt=this._touches[lt];Yt&&(Ae._add(wt),Ce._add(wt.sub(Yt)),Ye++,de[lt]=wt)}if(this._touches=de,!(Ye<this._minTouches||!Ce.mag())){var ar=Ce.div(Ye);if(this._sum._add(ar),!(this._sum.mag()<this._clickTolerance)){var fr=Ae.div(Ye);return{around:fr,panDelta:ar}}}},ua.prototype.enable=function(){this._enabled=!0},ua.prototype.disable=function(){this._enabled=!1,this.reset()},ua.prototype.isEnabled=function(){return this._enabled},ua.prototype.isActive=function(){return this._active};var Ua=function(){this.reset()};Ua.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ua.prototype._start=function(H){},Ua.prototype._move=function(H,ve,j){return{}},Ua.prototype.touchstart=function(H,ve,j){this._firstTwoTouches||j.length<2||(this._firstTwoTouches=[j[0].identifier,j[1].identifier],this._start([ve[0],ve[1]]))},Ua.prototype.touchmove=function(H,ve,j){if(!!this._firstTwoTouches){H.preventDefault();var de=this._firstTwoTouches,Ae=de[0],Ce=de[1],Ye=Pa(j,ve,Ae),lt=Pa(j,ve,Ce);if(!(!Ye||!lt)){var wt=this._aroundCenter?null:Ye.add(lt).div(2);return this._move([Ye,lt],wt,H)}}},Ua.prototype.touchend=function(H,ve,j){if(!!this._firstTwoTouches){var de=this._firstTwoTouches,Ae=de[0],Ce=de[1],Ye=Pa(j,ve,Ae),lt=Pa(j,ve,Ce);Ye&&lt||(this._active&&n.suppressClick(),this.reset())}},Ua.prototype.touchcancel=function(){this.reset()},Ua.prototype.enable=function(H){this._enabled=!0,this._aroundCenter=!!H&&H.around==="center"},Ua.prototype.disable=function(){this._enabled=!1,this.reset()},Ua.prototype.isEnabled=function(){return this._enabled},Ua.prototype.isActive=function(){return this._active};function Pa(ce,H,ve){for(var j=0;j<ce.length;j++)if(ce[j].identifier===ve)return H[j]}var Ja=.1;function yi(ce,H){return Math.log(ce/H)/Math.LN2}var co=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.reset=function(){ce.prototype.reset.call(this),delete this._distance,delete this._startDistance},H.prototype._start=function(j){this._startDistance=this._distance=j[0].dist(j[1])},H.prototype._move=function(j,de){var Ae=this._distance;if(this._distance=j[0].dist(j[1]),!(!this._active&&Math.abs(yi(this._distance,this._startDistance))<Ja))return this._active=!0,{zoomDelta:yi(this._distance,Ae),pinchAround:de}},H}(Ua),Ii=25;function fa(ce,H){return ce.angleWith(H)*180/Math.PI}var ai=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.reset=function(){ce.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},H.prototype._start=function(j){this._startVector=this._vector=j[0].sub(j[1]),this._minDiameter=j[0].dist(j[1])},H.prototype._move=function(j,de){var Ae=this._vector;if(this._vector=j[0].sub(j[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:fa(this._vector,Ae),pinchAround:de}},H.prototype._isBelowThreshold=function(j){this._minDiameter=Math.min(this._minDiameter,j.mag());var de=Math.PI*this._minDiameter,Ae=Ii/de*360,Ce=fa(j,this._startVector);return Math.abs(Ce)<Ae},H}(Ua);function Wa(ce){return Math.abs(ce.y)>Math.abs(ce.x)}var Si=100,ui=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.reset=function(){ce.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},H.prototype._start=function(j){this._lastPoints=j,Wa(j[0].sub(j[1]))&&(this._valid=!1)},H.prototype._move=function(j,de,Ae){var Ce=j[0].sub(this._lastPoints[0]),Ye=j[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Ce,Ye,Ae.timeStamp),!!this._valid){this._lastPoints=j,this._active=!0;var lt=(Ce.y+Ye.y)/2,wt=-.5;return{pitchDelta:lt*wt}}},H.prototype.gestureBeginsVertically=function(j,de,Ae){if(this._valid!==void 0)return this._valid;var Ce=2,Ye=j.mag()>=Ce,lt=de.mag()>=Ce;if(!(!Ye&&!lt)){if(!Ye||!lt)return this._firstMove===void 0&&(this._firstMove=Ae),Ae-this._firstMove<Si?void 0:!1;var wt=j.y>0==de.y>0;return Wa(j)&&Wa(de)&&wt}},H}(Ua),io={panStep:100,bearingStep:15,pitchStep:10},Qi=function(){var H=io;this._panStep=H.panStep,this._bearingStep=H.bearingStep,this._pitchStep=H.pitchStep};Qi.prototype.reset=function(){this._active=!1},Qi.prototype.keydown=function(H){var ve=this;if(!(H.altKey||H.ctrlKey||H.metaKey)){var j=0,de=0,Ae=0,Ce=0,Ye=0;switch(H.keyCode){case 61:case 107:case 171:case 187:j=1;break;case 189:case 109:case 173:j=-1;break;case 37:H.shiftKey?de=-1:(H.preventDefault(),Ce=-1);break;case 39:H.shiftKey?de=1:(H.preventDefault(),Ce=1);break;case 38:H.shiftKey?Ae=1:(H.preventDefault(),Ye=-1);break;case 40:H.shiftKey?Ae=-1:(H.preventDefault(),Ye=1);break;default:return}return{cameraAnimation:function(lt){var wt=lt.getZoom();lt.easeTo({duration:300,easeId:"keyboardHandler",easing:go,zoom:j?Math.round(wt)+j*(H.shiftKey?2:1):wt,bearing:lt.getBearing()+de*ve._bearingStep,pitch:lt.getPitch()+Ae*ve._pitchStep,offset:[-Ce*ve._panStep,-Ye*ve._panStep],center:lt.getCenter()},{originalEvent:H})}}}},Qi.prototype.enable=function(){this._enabled=!0},Qi.prototype.disable=function(){this._enabled=!1,this.reset()},Qi.prototype.isEnabled=function(){return this._enabled},Qi.prototype.isActive=function(){return this._active};function go(ce){return ce*(2-ce)}var Go=4.000244140625,zo=1/100,Yo=1/450,Gi=2,Oi=function(H,ve){this._map=H,this._el=H.getCanvasContainer(),this._handler=ve,this._delta=0,this._defaultZoomRate=zo,this._wheelZoomRate=Yo,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Oi.prototype.setZoomRate=function(H){this._defaultZoomRate=H},Oi.prototype.setWheelZoomRate=function(H){this._wheelZoomRate=H},Oi.prototype.isEnabled=function(){return!!this._enabled},Oi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Oi.prototype.isZooming=function(){return!!this._zooming},Oi.prototype.enable=function(H){this.isEnabled()||(this._enabled=!0,this._aroundCenter=H&&H.around==="center")},Oi.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Oi.prototype.wheel=function(H){if(!!this.isEnabled()){var ve=H.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?H.deltaY*40:H.deltaY,j=e.browser.now(),de=j-(this._lastWheelEventTime||0);this._lastWheelEventTime=j,ve!==0&&ve%Go==0?this._type="wheel":ve!==0&&Math.abs(ve)<4?this._type="trackpad":de>400?(this._type=null,this._lastValue=ve,this._timeout=setTimeout(this._onTimeout,40,H)):this._type||(this._type=Math.abs(de*ve)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ve+=this._lastValue)),H.shiftKey&&ve&&(ve=ve/4),this._type&&(this._lastWheelEvent=H,this._delta-=ve,this._active||this._start(H)),H.preventDefault()}},Oi.prototype._onTimeout=function(H){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(H)},Oi.prototype._start=function(H){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var ve=n.mousePos(this._el,H);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(ve)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Oi.prototype.renderFrame=function(){return this._onScrollFrame()},Oi.prototype._onScrollFrame=function(){var H=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var ve=this._map.transform;if(this._delta!==0){var j=this._type==="wheel"&&Math.abs(this._delta)>Go?this._wheelZoomRate:this._defaultZoomRate,de=Gi/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&de!==0&&(de=1/de);var Ae=typeof this._targetZoom=="number"?ve.zoomScale(this._targetZoom):ve.scale;this._targetZoom=Math.min(ve.maxZoom,Math.max(ve.minZoom,ve.scaleZoom(Ae*de))),this._type==="wheel"&&(this._startZoom=ve.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Ce=typeof this._targetZoom=="number"?this._targetZoom:ve.zoom,Ye=this._startZoom,lt=this._easing,wt=!1,Yt;if(this._type==="wheel"&&Ye&&lt){var ar=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),fr=lt(ar);Yt=e.number(Ye,Ce,fr),ar<1?this._frameId||(this._frameId=!0):wt=!0}else Yt=Ce,wt=!0;return this._active=!0,wt&&(this._active=!1,this._finishTimeout=setTimeout(function(){H._zooming=!1,H._handler._triggerRenderFrame(),delete H._targetZoom,delete H._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!wt,zoomDelta:Yt-ve.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Oi.prototype._smoothOutEasing=function(H){var ve=e.ease;if(this._prevEase){var j=this._prevEase,de=(e.browser.now()-j.start)/j.duration,Ae=j.easing(de+.01)-j.easing(de),Ce=.27/Math.sqrt(Ae*Ae+1e-4)*.01,Ye=Math.sqrt(.27*.27-Ce*Ce);ve=e.bezier(Ce,Ye,.25,1)}return this._prevEase={start:e.browser.now(),duration:H,easing:ve},ve},Oi.prototype.reset=function(){this._active=!1};var za=function(H,ve){this._clickZoom=H,this._tapZoom=ve};za.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},za.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},za.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},za.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Xa=function(){this.reset()};Xa.prototype.reset=function(){this._active=!1},Xa.prototype.dblclick=function(H,ve){return H.preventDefault(),{cameraAnimation:function(j){j.easeTo({duration:300,zoom:j.getZoom()+(H.shiftKey?-1:1),around:j.unproject(ve)},{originalEvent:H})}}},Xa.prototype.enable=function(){this._enabled=!0},Xa.prototype.disable=function(){this._enabled=!1,this.reset()},Xa.prototype.isEnabled=function(){return this._enabled},Xa.prototype.isActive=function(){return this._active};var xo=function(){this._tap=new an({numTouches:1,numTaps:1}),this.reset()};xo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},xo.prototype.touchstart=function(H,ve,j){this._swipePoint||(this._tapTime&&H.timeStamp-this._tapTime>un&&this.reset(),this._tapTime?j.length>0&&(this._swipePoint=ve[0],this._swipeTouch=j[0].identifier):this._tap.touchstart(H,ve,j))},xo.prototype.touchmove=function(H,ve,j){if(!this._tapTime)this._tap.touchmove(H,ve,j);else if(this._swipePoint){if(j[0].identifier!==this._swipeTouch)return;var de=ve[0],Ae=de.y-this._swipePoint.y;return this._swipePoint=de,H.preventDefault(),this._active=!0,{zoomDelta:Ae/128}}},xo.prototype.touchend=function(H,ve,j){if(this._tapTime)this._swipePoint&&j.length===0&&this.reset();else{var de=this._tap.touchend(H,ve,j);de&&(this._tapTime=H.timeStamp)}},xo.prototype.touchcancel=function(){this.reset()},xo.prototype.enable=function(){this._enabled=!0},xo.prototype.disable=function(){this._enabled=!1,this.reset()},xo.prototype.isEnabled=function(){return this._enabled},xo.prototype.isActive=function(){return this._active};var eo=function(H,ve,j){this._el=H,this._mousePan=ve,this._touchPan=j};eo.prototype.enable=function(H){this._inertiaOptions=H||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},eo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},eo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},eo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Po=function(H,ve,j){this._pitchWithRotate=H.pitchWithRotate,this._mouseRotate=ve,this._mousePitch=j};Po.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Po.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Po.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Po.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Xi=function(H,ve,j,de){this._el=H,this._touchZoom=ve,this._touchRotate=j,this._tapDragZoom=de,this._rotationDisabled=!1,this._enabled=!0};Xi.prototype.enable=function(H){this._touchZoom.enable(H),this._rotationDisabled||this._touchRotate.enable(H),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Xi.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Xi.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Xi.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Xi.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Xi.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Wo=function(ce){return ce.zoom||ce.drag||ce.pitch||ce.rotate},ms=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H}(e.Event);function Ol(ce){return ce.panDelta&&ce.panDelta.mag()||ce.zoomDelta||ce.bearingDelta||ce.pitchDelta}var Zi=function(H,ve){this._map=H,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Be(H),this._bearingSnap=ve.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(ve),e.bindAll(["handleEvent","handleWindowEvent"],this);var j=this._el;this._listeners=[[j,"touchstart",{passive:!1}],[j,"touchmove",{passive:!1}],[j,"touchend",void 0],[j,"touchcancel",void 0],[j,"mousedown",void 0],[j,"mousemove",void 0],[j,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[j,"mouseover",void 0],[j,"mouseout",void 0],[j,"dblclick",void 0],[j,"click",void 0],[j,"keydown",{capture:!1}],[j,"keyup",void 0],[j,"wheel",{passive:!1}],[j,"contextmenu",void 0],[e.window,"blur",void 0]];for(var de=0,Ae=this._listeners;de<Ae.length;de+=1){var Ce=Ae[de],Ye=Ce[0],lt=Ce[1],wt=Ce[2];n.addEventListener(Ye,lt,Ye===e.window.document?this.handleWindowEvent:this.handleEvent,wt)}};Zi.prototype.destroy=function(){for(var H=0,ve=this._listeners;H<ve.length;H+=1){var j=ve[H],de=j[0],Ae=j[1],Ce=j[2];n.removeEventListener(de,Ae,de===e.window.document?this.handleWindowEvent:this.handleEvent,Ce)}},Zi.prototype._addDefaultHandlers=function(H){var ve=this._map,j=ve.getCanvasContainer();this._add("mapEvent",new Vt(ve,H));var de=ve.boxZoom=new Qt(ve,H);this._add("boxZoom",de);var Ae=new ln,Ce=new Xa;ve.doubleClickZoom=new za(Ce,Ae),this._add("tapZoom",Ae),this._add("clickZoom",Ce);var Ye=new xo;this._add("tapDragZoom",Ye);var lt=ve.touchPitch=new ui;this._add("touchPitch",lt);var wt=new oa(H),Yt=new ka(H);ve.dragRotate=new Po(H,wt,Yt),this._add("mouseRotate",wt,["mousePitch"]),this._add("mousePitch",Yt,["mouseRotate"]);var ar=new ba(H),fr=new ua(H);ve.dragPan=new eo(j,ar,fr),this._add("mousePan",ar),this._add("touchPan",fr,["touchZoom","touchRotate"]);var kr=new ai,Fr=new co;ve.touchZoomRotate=new Xi(j,Fr,kr,Ye),this._add("touchRotate",kr,["touchPan","touchZoom"]),this._add("touchZoom",Fr,["touchPan","touchRotate"]);var Or=ve.scrollZoom=new Oi(ve,this);this._add("scrollZoom",Or,["mousePan"]);var zr=ve.keyboard=new Qi;this._add("keyboard",zr),this._add("blockableMapEvent",new Zt(ve));for(var jr=0,cn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];jr<cn.length;jr+=1){var En=cn[jr];H.interactive&&H[En]&&ve[En].enable(H[En])}},Zi.prototype._add=function(H,ve,j){this._handlers.push({handlerName:H,handler:ve,allowed:j}),this._handlersById[H]=ve},Zi.prototype.stop=function(){if(!this._updatingCamera){for(var H=0,ve=this._handlers;H<ve.length;H+=1){var j=ve[H],de=j.handler;de.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Zi.prototype.isActive=function(){for(var H=0,ve=this._handlers;H<ve.length;H+=1){var j=ve[H],de=j.handler;if(de.isActive())return!0}return!1},Zi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Zi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Zi.prototype.isMoving=function(){return Boolean(Wo(this._eventsInProgress))||this.isZooming()},Zi.prototype._blockedByActive=function(H,ve,j){for(var de in H)if(de!==j&&(!ve||ve.indexOf(de)<0))return!0;return!1},Zi.prototype.handleWindowEvent=function(H){this.handleEvent(H,H.type+"Window")},Zi.prototype._getMapTouches=function(H){for(var ve=[],j=0,de=H;j<de.length;j+=1){var Ae=de[j],Ce=Ae.target;this._el.contains(Ce)&&ve.push(Ae)}return ve},Zi.prototype.handleEvent=function(H,ve){if(H.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var j=H.type==="renderFrame"?void 0:H,de={needsRenderFrame:!1},Ae={},Ce={},Ye=H.touches?this._getMapTouches(H.touches):void 0,lt=Ye?n.touchPos(this._el,Ye):n.mousePos(this._el,H),wt=0,Yt=this._handlers;wt<Yt.length;wt+=1){var ar=Yt[wt],fr=ar.handlerName,kr=ar.handler,Fr=ar.allowed;if(!!kr.isEnabled()){var Or=void 0;this._blockedByActive(Ce,Fr,fr)?kr.reset():kr[ve||H.type]&&(Or=kr[ve||H.type](H,lt,Ye),this.mergeHandlerResult(de,Ae,Or,fr,j),Or&&Or.needsRenderFrame&&this._triggerRenderFrame()),(Or||kr.isActive())&&(Ce[fr]=kr)}}var zr={};for(var jr in this._previousActiveHandlers)Ce[jr]||(zr[jr]=j);this._previousActiveHandlers=Ce,(Object.keys(zr).length||Ol(de))&&(this._changes.push([de,Ae,zr]),this._triggerRenderFrame()),(Object.keys(Ce).length||Ol(de))&&this._map._stop(!0),this._updatingCamera=!1;var cn=de.cameraAnimation;cn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],cn(this._map))},Zi.prototype.mergeHandlerResult=function(H,ve,j,de,Ae){if(!!j){e.extend(H,j);var Ce={handlerName:de,originalEvent:j.originalEvent||Ae};j.zoomDelta!==void 0&&(ve.zoom=Ce),j.panDelta!==void 0&&(ve.drag=Ce),j.pitchDelta!==void 0&&(ve.pitch=Ce),j.bearingDelta!==void 0&&(ve.rotate=Ce)}},Zi.prototype._applyChanges=function(){for(var H={},ve={},j={},de=0,Ae=this._changes;de<Ae.length;de+=1){var Ce=Ae[de],Ye=Ce[0],lt=Ce[1],wt=Ce[2];Ye.panDelta&&(H.panDelta=(H.panDelta||new e.Point(0,0))._add(Ye.panDelta)),Ye.zoomDelta&&(H.zoomDelta=(H.zoomDelta||0)+Ye.zoomDelta),Ye.bearingDelta&&(H.bearingDelta=(H.bearingDelta||0)+Ye.bearingDelta),Ye.pitchDelta&&(H.pitchDelta=(H.pitchDelta||0)+Ye.pitchDelta),Ye.around!==void 0&&(H.around=Ye.around),Ye.pinchAround!==void 0&&(H.pinchAround=Ye.pinchAround),Ye.noInertia&&(H.noInertia=Ye.noInertia),e.extend(ve,lt),e.extend(j,wt)}this._updateMapTransform(H,ve,j),this._changes=[]},Zi.prototype._updateMapTransform=function(H,ve,j){var de=this._map,Ae=de.transform;if(!Ol(H))return this._fireEvents(ve,j);var Ce=H.panDelta,Ye=H.zoomDelta,lt=H.bearingDelta,wt=H.pitchDelta,Yt=H.around,ar=H.pinchAround;ar!==void 0&&(Yt=ar),de._stop(!0),Yt=Yt||de.transform.centerPoint;var fr=Ae.pointLocation(Ce?Yt.sub(Ce):Yt);lt&&(Ae.bearing+=lt),wt&&(Ae.pitch+=wt),Ye&&(Ae.zoom+=Ye),Ae.setLocationAtPoint(fr,Yt),this._map._update(),H.noInertia||this._inertia.record(H),this._fireEvents(ve,j)},Zi.prototype._fireEvents=function(H,ve){var j=this,de=Wo(this._eventsInProgress),Ae=Wo(H),Ce={};for(var Ye in H){var lt=H[Ye],wt=lt.originalEvent;this._eventsInProgress[Ye]||(Ce[Ye+"start"]=wt),this._eventsInProgress[Ye]=H[Ye]}!de&&Ae&&this._fireEvent("movestart",Ae.originalEvent);for(var Yt in Ce)this._fireEvent(Yt,Ce[Yt]);H.rotate&&(this._bearingChanged=!0),Ae&&this._fireEvent("move",Ae.originalEvent);for(var ar in H){var fr=H[ar],kr=fr.originalEvent;this._fireEvent(ar,kr)}var Fr={},Or;for(var zr in this._eventsInProgress){var jr=this._eventsInProgress[zr],cn=jr.handlerName,En=jr.originalEvent;this._handlersById[cn].isActive()||(delete this._eventsInProgress[zr],Or=ve[cn]||En,Fr[zr+"end"]=Or)}for(var Fn in Fr)this._fireEvent(Fn,Fr[Fn]);var jn=Wo(this._eventsInProgress);if((de||Ae)&&!jn){this._updatingCamera=!0;var qn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Qn=function(ca){return ca!==0&&-j._bearingSnap<ca&&ca<j._bearingSnap};qn?(Qn(qn.bearing||this._map.getBearing())&&(qn.bearing=0),this._map.easeTo(qn,{originalEvent:Or})):(this._map.fire(new e.Event("moveend",{originalEvent:Or})),Qn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Zi.prototype._fireEvent=function(H,ve){this._map.fire(new e.Event(H,ve?{originalEvent:ve}:{}))},Zi.prototype._triggerRenderFrame=function(){var H=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(ve){delete H._frameId,H.handleEvent(new ms("renderFrame",{timeStamp:ve})),H._applyChanges()}))};var Qu=function(ce){function H(ve,j){ce.call(this),this._moving=!1,this._zooming=!1,this.transform=ve,this._bearingSnap=j.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},H.prototype.setCenter=function(j,de){return this.jumpTo({center:j},de)},H.prototype.panBy=function(j,de,Ae){return j=e.Point.convert(j).mult(-1),this.panTo(this.transform.center,e.extend({offset:j},de),Ae)},H.prototype.panTo=function(j,de,Ae){return this.easeTo(e.extend({center:j},de),Ae)},H.prototype.getZoom=function(){return this.transform.zoom},H.prototype.setZoom=function(j,de){return this.jumpTo({zoom:j},de),this},H.prototype.zoomTo=function(j,de,Ae){return this.easeTo(e.extend({zoom:j},de),Ae)},H.prototype.zoomIn=function(j,de){return this.zoomTo(this.getZoom()+1,j,de),this},H.prototype.zoomOut=function(j,de){return this.zoomTo(this.getZoom()-1,j,de),this},H.prototype.getBearing=function(){return this.transform.bearing},H.prototype.setBearing=function(j,de){return this.jumpTo({bearing:j},de),this},H.prototype.getPadding=function(){return this.transform.padding},H.prototype.setPadding=function(j,de){return this.jumpTo({padding:j},de),this},H.prototype.rotateTo=function(j,de,Ae){return this.easeTo(e.extend({bearing:j},de),Ae)},H.prototype.resetNorth=function(j,de){return this.rotateTo(0,e.extend({duration:1e3},j),de),this},H.prototype.resetNorthPitch=function(j,de){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},j),de),this},H.prototype.snapToNorth=function(j,de){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(j,de):this},H.prototype.getPitch=function(){return this.transform.pitch},H.prototype.setPitch=function(j,de){return this.jumpTo({pitch:j},de),this},H.prototype.cameraForBounds=function(j,de){return j=e.LngLatBounds.convert(j),this._cameraForBoxAndBearing(j.getNorthWest(),j.getSouthEast(),0,de)},H.prototype._cameraForBoxAndBearing=function(j,de,Ae,Ce){var Ye={top:0,bottom:0,right:0,left:0};if(Ce=e.extend({padding:Ye,offset:[0,0],maxZoom:this.transform.maxZoom},Ce),typeof Ce.padding=="number"){var lt=Ce.padding;Ce.padding={top:lt,bottom:lt,right:lt,left:lt}}Ce.padding=e.extend(Ye,Ce.padding);var wt=this.transform,Yt=wt.padding,ar=wt.project(e.LngLat.convert(j)),fr=wt.project(e.LngLat.convert(de)),kr=ar.rotate(-Ae*Math.PI/180),Fr=fr.rotate(-Ae*Math.PI/180),Or=new e.Point(Math.max(kr.x,Fr.x),Math.max(kr.y,Fr.y)),zr=new e.Point(Math.min(kr.x,Fr.x),Math.min(kr.y,Fr.y)),jr=Or.sub(zr),cn=(wt.width-(Yt.left+Yt.right+Ce.padding.left+Ce.padding.right))/jr.x,En=(wt.height-(Yt.top+Yt.bottom+Ce.padding.top+Ce.padding.bottom))/jr.y;if(En<0||cn<0){e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Fn=Math.min(wt.scaleZoom(wt.scale*Math.min(cn,En)),Ce.maxZoom),jn=e.Point.convert(Ce.offset),qn=(Ce.padding.left-Ce.padding.right)/2,Qn=(Ce.padding.top-Ce.padding.bottom)/2,ca=new e.Point(jn.x+qn,jn.y+Qn),xa=ca.mult(wt.scale/wt.zoomScale(Fn)),ga=wt.unproject(ar.add(fr).div(2).sub(xa));return{center:ga,zoom:Fn,bearing:Ae}},H.prototype.fitBounds=function(j,de,Ae){return this._fitInternal(this.cameraForBounds(j,de),de,Ae)},H.prototype.fitScreenCoordinates=function(j,de,Ae,Ce,Ye){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(j)),this.transform.pointLocation(e.Point.convert(de)),Ae,Ce),Ce,Ye)},H.prototype._fitInternal=function(j,de,Ae){return j?(de=e.extend(j,de),delete de.padding,de.linear?this.easeTo(de,Ae):this.flyTo(de,Ae)):this},H.prototype.jumpTo=function(j,de){this.stop();var Ae=this.transform,Ce=!1,Ye=!1,lt=!1;return"zoom"in j&&Ae.zoom!==+j.zoom&&(Ce=!0,Ae.zoom=+j.zoom),j.center!==void 0&&(Ae.center=e.LngLat.convert(j.center)),"bearing"in j&&Ae.bearing!==+j.bearing&&(Ye=!0,Ae.bearing=+j.bearing),"pitch"in j&&Ae.pitch!==+j.pitch&&(lt=!0,Ae.pitch=+j.pitch),j.padding!=null&&!Ae.isPaddingEqual(j.padding)&&(Ae.padding=j.padding),this.fire(new e.Event("movestart",de)).fire(new e.Event("move",de)),Ce&&this.fire(new e.Event("zoomstart",de)).fire(new e.Event("zoom",de)).fire(new e.Event("zoomend",de)),Ye&&this.fire(new e.Event("rotatestart",de)).fire(new e.Event("rotate",de)).fire(new e.Event("rotateend",de)),lt&&this.fire(new e.Event("pitchstart",de)).fire(new e.Event("pitch",de)).fire(new e.Event("pitchend",de)),this.fire(new e.Event("moveend",de))},H.prototype.easeTo=function(j,de){var Ae=this;this._stop(!1,j.easeId),j=e.extend({offset:[0,0],duration:500,easing:e.ease},j),(j.animate===!1||!j.essential&&e.browser.prefersReducedMotion)&&(j.duration=0);var Ce=this.transform,Ye=this.getZoom(),lt=this.getBearing(),wt=this.getPitch(),Yt=this.getPadding(),ar="zoom"in j?+j.zoom:Ye,fr="bearing"in j?this._normalizeBearing(j.bearing,lt):lt,kr="pitch"in j?+j.pitch:wt,Fr="padding"in j?j.padding:Ce.padding,Or=e.Point.convert(j.offset),zr=Ce.centerPoint.add(Or),jr=Ce.pointLocation(zr),cn=e.LngLat.convert(j.center||jr);this._normalizeCenter(cn);var En=Ce.project(jr),Fn=Ce.project(cn).sub(En),jn=Ce.zoomScale(ar-Ye),qn,Qn;j.around&&(qn=e.LngLat.convert(j.around),Qn=Ce.locationPoint(qn));var ca={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ar!==Ye,this._rotating=this._rotating||lt!==fr,this._pitching=this._pitching||kr!==wt,this._padding=!Ce.isPaddingEqual(Fr),this._easeId=j.easeId,this._prepareEase(de,j.noMoveStart,ca),clearTimeout(this._easeEndTimeoutID),this._ease(function(xa){if(Ae._zooming&&(Ce.zoom=e.number(Ye,ar,xa)),Ae._rotating&&(Ce.bearing=e.number(lt,fr,xa)),Ae._pitching&&(Ce.pitch=e.number(wt,kr,xa)),Ae._padding&&(Ce.interpolatePadding(Yt,Fr,xa),zr=Ce.centerPoint.add(Or)),qn)Ce.setLocationAtPoint(qn,Qn);else{var ga=Ce.zoomScale(Ce.zoom-Ye),Ma=ar>Ye?Math.min(2,jn):Math.max(.5,jn),Ca=Math.pow(Ma,1-xa),Ha=Ce.unproject(En.add(Fn.mult(xa*Ca)).mult(ga));Ce.setLocationAtPoint(Ce.renderWorldCopies?Ha.wrap():Ha,zr)}Ae._fireMoveEvents(de)},function(xa){Ae._afterEase(de,xa)},j),this},H.prototype._prepareEase=function(j,de,Ae){Ae===void 0&&(Ae={}),this._moving=!0,!de&&!Ae.moving&&this.fire(new e.Event("movestart",j)),this._zooming&&!Ae.zooming&&this.fire(new e.Event("zoomstart",j)),this._rotating&&!Ae.rotating&&this.fire(new e.Event("rotatestart",j)),this._pitching&&!Ae.pitching&&this.fire(new e.Event("pitchstart",j))},H.prototype._fireMoveEvents=function(j){this.fire(new e.Event("move",j)),this._zooming&&this.fire(new e.Event("zoom",j)),this._rotating&&this.fire(new e.Event("rotate",j)),this._pitching&&this.fire(new e.Event("pitch",j))},H.prototype._afterEase=function(j,de){if(!(this._easeId&&de&&this._easeId===de)){delete this._easeId;var Ae=this._zooming,Ce=this._rotating,Ye=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Ae&&this.fire(new e.Event("zoomend",j)),Ce&&this.fire(new e.Event("rotateend",j)),Ye&&this.fire(new e.Event("pitchend",j)),this.fire(new e.Event("moveend",j))}},H.prototype.flyTo=function(j,de){var Ae=this;if(!j.essential&&e.browser.prefersReducedMotion){var Ce=e.pick(j,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ce,de)}this.stop(),j=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},j);var Ye=this.transform,lt=this.getZoom(),wt=this.getBearing(),Yt=this.getPitch(),ar=this.getPadding(),fr="zoom"in j?e.clamp(+j.zoom,Ye.minZoom,Ye.maxZoom):lt,kr="bearing"in j?this._normalizeBearing(j.bearing,wt):wt,Fr="pitch"in j?+j.pitch:Yt,Or="padding"in j?j.padding:Ye.padding,zr=Ye.zoomScale(fr-lt),jr=e.Point.convert(j.offset),cn=Ye.centerPoint.add(jr),En=Ye.pointLocation(cn),Fn=e.LngLat.convert(j.center||En);this._normalizeCenter(Fn);var jn=Ye.project(En),qn=Ye.project(Fn).sub(jn),Qn=j.curve,ca=Math.max(Ye.width,Ye.height),xa=ca/zr,ga=qn.mag();if("minZoom"in j){var Ma=e.clamp(Math.min(j.minZoom,lt,fr),Ye.minZoom,Ye.maxZoom),Ca=ca/Ye.zoomScale(Ma-lt);Qn=Math.sqrt(Ca/ga*2)}var Ha=Qn*Qn;function ni(ii){var wi=(xa*xa-ca*ca+(ii?-1:1)*Ha*Ha*ga*ga)/(2*(ii?xa:ca)*Ha*ga);return Math.log(Math.sqrt(wi*wi+1)-wi)}function Li(ii){return(Math.exp(ii)-Math.exp(-ii))/2}function fi(ii){return(Math.exp(ii)+Math.exp(-ii))/2}function pi(ii){return Li(ii)/fi(ii)}var Na=ni(0),Pi=function(ii){return fi(Na)/fi(Na+Qn*ii)},zi=function(ii){return ca*((fi(Na)*pi(Na+Qn*ii)-Li(Na))/Ha)/ga},Ni=(ni(1)-Na)/Qn;if(Math.abs(ga)<1e-6||!isFinite(Ni)){if(Math.abs(ca-xa)<1e-6)return this.easeTo(j,de);var _i=xa<ca?-1:1;Ni=Math.abs(Math.log(xa/ca))/Qn,zi=function(){return 0},Pi=function(ii){return Math.exp(_i*Qn*ii)}}if("duration"in j)j.duration=+j.duration;else{var ji="screenSpeed"in j?+j.screenSpeed/Qn:+j.speed;j.duration=1e3*Ni/ji}return j.maxDuration&&j.duration>j.maxDuration&&(j.duration=0),this._zooming=!0,this._rotating=wt!==kr,this._pitching=Fr!==Yt,this._padding=!Ye.isPaddingEqual(Or),this._prepareEase(de,!1),this._ease(function(ii){var wi=ii*Ni,_o=1/Pi(wi);Ye.zoom=ii===1?fr:lt+Ye.scaleZoom(_o),Ae._rotating&&(Ye.bearing=e.number(wt,kr,ii)),Ae._pitching&&(Ye.pitch=e.number(Yt,Fr,ii)),Ae._padding&&(Ye.interpolatePadding(ar,Or,ii),cn=Ye.centerPoint.add(jr));var Fo=ii===1?Fn:Ye.unproject(jn.add(qn.mult(zi(wi))).mult(_o));Ye.setLocationAtPoint(Ye.renderWorldCopies?Fo.wrap():Fo,cn),Ae._fireMoveEvents(de)},function(){return Ae._afterEase(de)},j),this},H.prototype.isEasing=function(){return!!this._easeFrameId},H.prototype.stop=function(){return this._stop()},H.prototype._stop=function(j,de){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ae=this._onEaseEnd;delete this._onEaseEnd,Ae.call(this,de)}if(!j){var Ce=this.handlers;Ce&&Ce.stop()}return this},H.prototype._ease=function(j,de,Ae){Ae.animate===!1||Ae.duration===0?(j(1),de()):(this._easeStart=e.browser.now(),this._easeOptions=Ae,this._onEaseFrame=j,this._onEaseEnd=de,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},H.prototype._renderFrameCallback=function(){var j=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(j)),j<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},H.prototype._normalizeBearing=function(j,de){j=e.wrap(j,-180,180);var Ae=Math.abs(j-de);return Math.abs(j-360-de)<Ae&&(j-=360),Math.abs(j+360-de)<Ae&&(j+=360),j},H.prototype._normalizeCenter=function(j){var de=this.transform;if(!(!de.renderWorldCopies||de.lngRange)){var Ae=j.lng-de.center.lng;j.lng+=Ae>180?-360:Ae<-180?360:0}},H}(e.Evented),Tl=function(H){H===void 0&&(H={}),this.options=H,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Tl.prototype.getDefaultPosition=function(){return"bottom-right"},Tl.prototype.onAdd=function(H){var ve=this.options&&this.options.compact;return this._map=H,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),ve&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),ve===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Tl.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Tl.prototype._updateEditLink=function(){var H=this._editLink;H||(H=this._editLink=this._container.querySelector(".mapbox-improve-map"));var ve=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(H){var j=ve.reduce(function(de,Ae,Ce){return Ae.value&&(de+=Ae.key+"="+Ae.value+(Ce<ve.length-1?"&":"")),de},"?");H.href=e.config.FEEDBACK_URL+"/"+j+(this._map._hash?this._map._hash.getHashString(!0):""),H.rel="noopener nofollow"}},Tl.prototype._updateData=function(H){H&&(H.sourceDataType==="metadata"||H.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Tl.prototype._updateAttributions=function(){if(!!this._map.style){var H=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?H=H.concat(this.options.customAttribution.map(function(lt){return typeof lt!="string"?"":lt})):typeof this.options.customAttribution=="string"&&H.push(this.options.customAttribution)),this._map.style.stylesheet){var ve=this._map.style.stylesheet;this.styleOwner=ve.owner,this.styleId=ve.id}var j=this._map.style.sourceCaches;for(var de in j){var Ae=j[de];if(Ae.used){var Ce=Ae.getSource();Ce.attribution&&H.indexOf(Ce.attribution)<0&&H.push(Ce.attribution)}}H.sort(function(lt,wt){return lt.length-wt.length}),H=H.filter(function(lt,wt){for(var Yt=wt+1;Yt<H.length;Yt++)if(H[Yt].indexOf(lt)>=0)return!1;return!0});var Ye=H.join(" | ");Ye!==this._attribHTML&&(this._attribHTML=Ye,H.length?(this._innerContainer.innerHTML=Ye,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Tl.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Bi=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};Bi.prototype.onAdd=function(H){this._map=H,this._container=n.create("div","mapboxgl-ctrl");var ve=n.create("a","mapboxgl-ctrl-logo");return ve.target="_blank",ve.rel="noopener nofollow",ve.href="https://www.mapbox.com/",ve.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ve.setAttribute("rel","noopener nofollow"),this._container.appendChild(ve),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Bi.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Bi.prototype.getDefaultPosition=function(){return"bottom-left"},Bi.prototype._updateLogo=function(H){(!H||H.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Bi.prototype._logoRequired=function(){if(!!this._map.style){var H=this._map.style.sourceCaches;for(var ve in H){var j=H[ve].getSource();if(j.mapbox_logo)return!0}return!1}},Bi.prototype._updateCompact=function(){var H=this._container.children;if(H.length){var ve=H[0];this._map.getCanvasContainer().offsetWidth<250?ve.classList.add("mapboxgl-compact"):ve.classList.remove("mapboxgl-compact")}};var Do=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Do.prototype.add=function(H){var ve=++this._id,j=this._queue;return j.push({callback:H,id:ve,cancelled:!1}),ve},Do.prototype.remove=function(H){for(var ve=this._currentlyRunning,j=ve?this._queue.concat(ve):this._queue,de=0,Ae=j;de<Ae.length;de+=1){var Ce=Ae[de];if(Ce.id===H){Ce.cancelled=!0;return}}},Do.prototype.run=function(H){H===void 0&&(H=0);var ve=this._currentlyRunning=this._queue;this._queue=[];for(var j=0,de=ve;j<de.length;j+=1){var Ae=de[j];if(!Ae.cancelled&&(Ae.callback(H),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Do.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Zc={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Tf=e.window.HTMLImageElement,hf=e.window.HTMLElement,zu=e.window.ImageBitmap,$u=-2,Af=22,Fs=0,Fu=60,Jf={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:$u,maxZoom:Af,minPitch:Fs,maxPitch:Fu,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Qf=function(ce){function H(j){var de=this;if(j=e.extend({},Jf,j),j.minZoom!=null&&j.maxZoom!=null&&j.minZoom>j.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(j.minPitch!=null&&j.maxPitch!=null&&j.minPitch>j.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(j.minPitch!=null&&j.minPitch<Fs)throw new Error("minPitch must be greater than or equal to "+Fs);if(j.maxPitch!=null&&j.maxPitch>Fu)throw new Error("maxPitch must be less than or equal to "+Fu);var Ae=new bi(j.minZoom,j.maxZoom,j.minPitch,j.maxPitch,j.renderWorldCopies);if(ce.call(this,Ae,j),this._interactive=j.interactive,this._maxTileCacheSize=j.maxTileCacheSize,this._failIfMajorPerformanceCaveat=j.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=j.preserveDrawingBuffer,this._antialias=j.antialias,this._trackResize=j.trackResize,this._bearingSnap=j.bearingSnap,this._refreshExpiredTiles=j.refreshExpiredTiles,this._fadeDuration=j.fadeDuration,this._crossSourceCollisions=j.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=j.collectResourceTiming,this._renderTaskQueue=new Do,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Zc,j.locale),this._requestManager=new e.RequestManager(j.transformRequest,j.accessToken),typeof j.container=="string"){if(this._container=e.window.document.getElementById(j.container),!this._container)throw new Error("Container '"+j.container+"' not found.")}else if(j.container instanceof hf)this._container=j.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(j.maxBounds&&this.setMaxBounds(j.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return de._update(!1)}),this.on("moveend",function(){return de._update(!1)}),this.on("zoom",function(){return de._update(!0)}),typeof e.window!="undefined"&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Zi(this,j);var Ce=typeof j.hash=="string"&&j.hash||void 0;this._hash=j.hash&&new po(Ce).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:j.center,zoom:j.zoom,bearing:j.bearing,pitch:j.pitch}),j.bounds&&(this.resize(),this.fitBounds(j.bounds,e.extend({},j.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=j.localIdeographFontFamily,j.style&&this.setStyle(j.style,{localIdeographFontFamily:j.localIdeographFontFamily}),j.attributionControl&&this.addControl(new Tl({customAttribution:j.customAttribution})),this.addControl(new Bi,j.logoPosition),this.on("style.load",function(){de.transform.unmodified&&de.jumpTo(de.style.stylesheet)}),this.on("data",function(Ye){de._update(Ye.dataType==="style"),de.fire(new e.Event(Ye.dataType+"data",Ye))}),this.on("dataloading",function(Ye){de.fire(new e.Event(Ye.dataType+"dataloading",Ye))})}ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H;var ve={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return H.prototype._getMapId=function(){return this._mapId},H.prototype.addControl=function(de,Ae){if(Ae===void 0&&de.getDefaultPosition&&(Ae=de.getDefaultPosition()),Ae===void 0&&(Ae="top-right"),!de||!de.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Ce=de.onAdd(this);this._controls.push(de);var Ye=this._controlPositions[Ae];return Ae.indexOf("bottom")!==-1?Ye.insertBefore(Ce,Ye.firstChild):Ye.appendChild(Ce),this},H.prototype.removeControl=function(de){if(!de||!de.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ae=this._controls.indexOf(de);return Ae>-1&&this._controls.splice(Ae,1),de.onRemove(this),this},H.prototype.resize=function(de){var Ae=this._containerDimensions(),Ce=Ae[0],Ye=Ae[1];this._resizeCanvas(Ce,Ye),this.transform.resize(Ce,Ye),this.painter.resize(Ce,Ye);var lt=!this._moving;return lt&&(this.stop(),this.fire(new e.Event("movestart",de)).fire(new e.Event("move",de))),this.fire(new e.Event("resize",de)),lt&&this.fire(new e.Event("moveend",de)),this},H.prototype.getBounds=function(){return this.transform.getBounds()},H.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},H.prototype.setMaxBounds=function(de){return this.transform.setMaxBounds(e.LngLatBounds.convert(de)),this._update()},H.prototype.setMinZoom=function(de){if(de=de==null?$u:de,de>=$u&&de<=this.transform.maxZoom)return this.transform.minZoom=de,this._update(),this.getZoom()<de&&this.setZoom(de),this;throw new Error("minZoom must be between "+$u+" and the current maxZoom, inclusive")},H.prototype.getMinZoom=function(){return this.transform.minZoom},H.prototype.setMaxZoom=function(de){if(de=de==null?Af:de,de>=this.transform.minZoom)return this.transform.maxZoom=de,this._update(),this.getZoom()>de&&this.setZoom(de),this;throw new Error("maxZoom must be greater than the current minZoom")},H.prototype.getMaxZoom=function(){return this.transform.maxZoom},H.prototype.setMinPitch=function(de){if(de=de==null?Fs:de,de<Fs)throw new Error("minPitch must be greater than or equal to "+Fs);if(de>=Fs&&de<=this.transform.maxPitch)return this.transform.minPitch=de,this._update(),this.getPitch()<de&&this.setPitch(de),this;throw new Error("minPitch must be between "+Fs+" and the current maxPitch, inclusive")},H.prototype.getMinPitch=function(){return this.transform.minPitch},H.prototype.setMaxPitch=function(de){if(de=de==null?Fu:de,de>Fu)throw new Error("maxPitch must be less than or equal to "+Fu);if(de>=this.transform.minPitch)return this.transform.maxPitch=de,this._update(),this.getPitch()>de&&this.setPitch(de),this;throw new Error("maxPitch must be greater than the current minPitch")},H.prototype.getMaxPitch=function(){return this.transform.maxPitch},H.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},H.prototype.setRenderWorldCopies=function(de){return this.transform.renderWorldCopies=de,this._update()},H.prototype.project=function(de){return this.transform.locationPoint(e.LngLat.convert(de))},H.prototype.unproject=function(de){return this.transform.pointLocation(e.Point.convert(de))},H.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},H.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},H.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},H.prototype._createDelegatedListener=function(de,Ae,Ce){var Ye=this,lt;if(de==="mouseenter"||de==="mouseover"){var wt=!1,Yt=function(zr){var jr=Ye.getLayer(Ae)?Ye.queryRenderedFeatures(zr.point,{layers:[Ae]}):[];jr.length?wt||(wt=!0,Ce.call(Ye,new yt(de,Ye,zr.originalEvent,{features:jr}))):wt=!1},ar=function(){wt=!1};return{layer:Ae,listener:Ce,delegates:{mousemove:Yt,mouseout:ar}}}else if(de==="mouseleave"||de==="mouseout"){var fr=!1,kr=function(zr){var jr=Ye.getLayer(Ae)?Ye.queryRenderedFeatures(zr.point,{layers:[Ae]}):[];jr.length?fr=!0:fr&&(fr=!1,Ce.call(Ye,new yt(de,Ye,zr.originalEvent)))},Fr=function(zr){fr&&(fr=!1,Ce.call(Ye,new yt(de,Ye,zr.originalEvent)))};return{layer:Ae,listener:Ce,delegates:{mousemove:kr,mouseout:Fr}}}else{var Or=function(zr){var jr=Ye.getLayer(Ae)?Ye.queryRenderedFeatures(zr.point,{layers:[Ae]}):[];jr.length&&(zr.features=jr,Ce.call(Ye,zr),delete zr.features)};return{layer:Ae,listener:Ce,delegates:(lt={},lt[de]=Or,lt)}}},H.prototype.on=function(de,Ae,Ce){if(Ce===void 0)return ce.prototype.on.call(this,de,Ae);var Ye=this._createDelegatedListener(de,Ae,Ce);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[de]=this._delegatedListeners[de]||[],this._delegatedListeners[de].push(Ye);for(var lt in Ye.delegates)this.on(lt,Ye.delegates[lt]);return this},H.prototype.once=function(de,Ae,Ce){if(Ce===void 0)return ce.prototype.once.call(this,de,Ae);var Ye=this._createDelegatedListener(de,Ae,Ce);for(var lt in Ye.delegates)this.once(lt,Ye.delegates[lt]);return this},H.prototype.off=function(de,Ae,Ce){var Ye=this;if(Ce===void 0)return ce.prototype.off.call(this,de,Ae);var lt=function(wt){for(var Yt=wt[de],ar=0;ar<Yt.length;ar++){var fr=Yt[ar];if(fr.layer===Ae&&fr.listener===Ce){for(var kr in fr.delegates)Ye.off(kr,fr.delegates[kr]);return Yt.splice(ar,1),Ye}}};return this._delegatedListeners&&this._delegatedListeners[de]&&lt(this._delegatedListeners),this},H.prototype.queryRenderedFeatures=function(de,Ae){if(!this.style)return[];Ae===void 0&&de!==void 0&&!(de instanceof e.Point)&&!Array.isArray(de)&&(Ae=de,de=void 0),Ae=Ae||{},de=de||[[0,0],[this.transform.width,this.transform.height]];var Ce;if(de instanceof e.Point||typeof de[0]=="number")Ce=[e.Point.convert(de)];else{var Ye=e.Point.convert(de[0]),lt=e.Point.convert(de[1]);Ce=[Ye,new e.Point(lt.x,Ye.y),lt,new e.Point(Ye.x,lt.y),Ye]}return this.style.queryRenderedFeatures(Ce,Ae,this.transform)},H.prototype.querySourceFeatures=function(de,Ae){return this.style.querySourceFeatures(de,Ae)},H.prototype.setStyle=function(de,Ae){return Ae=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ae),Ae.diff!==!1&&Ae.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&de?(this._diffStyle(de,Ae),this):(this._localIdeographFontFamily=Ae.localIdeographFontFamily,this._updateStyle(de,Ae))},H.prototype._getUIString=function(de){var Ae=this._locale[de];if(Ae==null)throw new Error("Missing UI string '"+de+"'");return Ae},H.prototype._updateStyle=function(de,Ae){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),de)this.style=new Zo(this,Ae||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof de=="string"?this.style.loadURL(de):this.style.loadJSON(de),this},H.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Zo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},H.prototype._diffStyle=function(de,Ae){var Ce=this;if(typeof de=="string"){var Ye=this._requestManager.normalizeStyleURL(de),lt=this._requestManager.transformRequest(Ye,e.ResourceType.Style);e.getJSON(lt,function(wt,Yt){wt?Ce.fire(new e.ErrorEvent(wt)):Yt&&Ce._updateDiff(Yt,Ae)})}else typeof de=="object"&&this._updateDiff(de,Ae)},H.prototype._updateDiff=function(de,Ae){try{this.style.setState(de)&&this._update(!0)}catch(Ce){e.warnOnce("Unable to perform style diff: "+(Ce.message||Ce.error||Ce)+".  Rebuilding the style from scratch."),this._updateStyle(de,Ae)}},H.prototype.getStyle=function(){if(this.style)return this.style.serialize()},H.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},H.prototype.addSource=function(de,Ae){return this._lazyInitEmptyStyle(),this.style.addSource(de,Ae),this._update(!0)},H.prototype.isSourceLoaded=function(de){var Ae=this.style&&this.style.sourceCaches[de];if(Ae===void 0){this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+de+"'")));return}return Ae.loaded()},H.prototype.areTilesLoaded=function(){var de=this.style&&this.style.sourceCaches;for(var Ae in de){var Ce=de[Ae],Ye=Ce._tiles;for(var lt in Ye){var wt=Ye[lt];if(!(wt.state==="loaded"||wt.state==="errored"))return!1}}return!0},H.prototype.addSourceType=function(de,Ae,Ce){return this._lazyInitEmptyStyle(),this.style.addSourceType(de,Ae,Ce)},H.prototype.removeSource=function(de){return this.style.removeSource(de),this._update(!0)},H.prototype.getSource=function(de){return this.style.getSource(de)},H.prototype.addImage=function(de,Ae,Ce){Ce===void 0&&(Ce={});var Ye=Ce.pixelRatio;Ye===void 0&&(Ye=1);var lt=Ce.sdf;lt===void 0&&(lt=!1);var wt=Ce.stretchX,Yt=Ce.stretchY,ar=Ce.content;this._lazyInitEmptyStyle();var fr=0;if(Ae instanceof Tf||zu&&Ae instanceof zu){var kr=e.browser.getImageData(Ae),Fr=kr.width,Or=kr.height,zr=kr.data;this.style.addImage(de,{data:new e.RGBAImage({width:Fr,height:Or},zr),pixelRatio:Ye,stretchX:wt,stretchY:Yt,content:ar,sdf:lt,version:fr})}else{if(Ae.width===void 0||Ae.height===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var jr=Ae.width,cn=Ae.height,En=Ae.data,Fn=Ae;this.style.addImage(de,{data:new e.RGBAImage({width:jr,height:cn},new Uint8Array(En)),pixelRatio:Ye,stretchX:wt,stretchY:Yt,content:ar,sdf:lt,version:fr,userImage:Fn}),Fn.onAdd&&Fn.onAdd(this,de)}},H.prototype.updateImage=function(de,Ae){var Ce=this.style.getImage(de);if(!Ce)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Ye=Ae instanceof Tf||zu&&Ae instanceof zu?e.browser.getImageData(Ae):Ae,lt=Ye.width,wt=Ye.height,Yt=Ye.data;if(lt===void 0||wt===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(lt!==Ce.data.width||wt!==Ce.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var ar=!(Ae instanceof Tf||zu&&Ae instanceof zu);Ce.data.replace(Yt,ar),this.style.updateImage(de,Ce)},H.prototype.hasImage=function(de){return de?!!this.style.getImage(de):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},H.prototype.removeImage=function(de){this.style.removeImage(de)},H.prototype.loadImage=function(de,Ae){e.getImage(this._requestManager.transformRequest(de,e.ResourceType.Image),Ae)},H.prototype.listImages=function(){return this.style.listImages()},H.prototype.addLayer=function(de,Ae){return this._lazyInitEmptyStyle(),this.style.addLayer(de,Ae),this._update(!0)},H.prototype.moveLayer=function(de,Ae){return this.style.moveLayer(de,Ae),this._update(!0)},H.prototype.removeLayer=function(de){return this.style.removeLayer(de),this._update(!0)},H.prototype.getLayer=function(de){return this.style.getLayer(de)},H.prototype.setLayerZoomRange=function(de,Ae,Ce){return this.style.setLayerZoomRange(de,Ae,Ce),this._update(!0)},H.prototype.setFilter=function(de,Ae,Ce){return Ce===void 0&&(Ce={}),this.style.setFilter(de,Ae,Ce),this._update(!0)},H.prototype.getFilter=function(de){return this.style.getFilter(de)},H.prototype.setPaintProperty=function(de,Ae,Ce,Ye){return Ye===void 0&&(Ye={}),this.style.setPaintProperty(de,Ae,Ce,Ye),this._update(!0)},H.prototype.getPaintProperty=function(de,Ae){return this.style.getPaintProperty(de,Ae)},H.prototype.setLayoutProperty=function(de,Ae,Ce,Ye){return Ye===void 0&&(Ye={}),this.style.setLayoutProperty(de,Ae,Ce,Ye),this._update(!0)},H.prototype.getLayoutProperty=function(de,Ae){return this.style.getLayoutProperty(de,Ae)},H.prototype.setLight=function(de,Ae){return Ae===void 0&&(Ae={}),this._lazyInitEmptyStyle(),this.style.setLight(de,Ae),this._update(!0)},H.prototype.getLight=function(){return this.style.getLight()},H.prototype.setFeatureState=function(de,Ae){return this.style.setFeatureState(de,Ae),this._update()},H.prototype.removeFeatureState=function(de,Ae){return this.style.removeFeatureState(de,Ae),this._update()},H.prototype.getFeatureState=function(de){return this.style.getFeatureState(de)},H.prototype.getContainer=function(){return this._container},H.prototype.getCanvasContainer=function(){return this._canvasContainer},H.prototype.getCanvas=function(){return this._canvas},H.prototype._containerDimensions=function(){var de=0,Ae=0;return this._container&&(de=this._container.clientWidth||400,Ae=this._container.clientHeight||300),[de,Ae]},H.prototype._detectMissingCSS=function(){var de=e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");de!=="rgb(250, 128, 114)"&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},H.prototype._setupContainer=function(){var de=this._container;de.classList.add("mapboxgl-map");var Ae=this._missingCSSCanary=n.create("div","mapboxgl-canary",de);Ae.style.visibility="hidden",this._detectMissingCSS();var Ce=this._canvasContainer=n.create("div","mapboxgl-canvas-container",de);this._interactive&&Ce.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",Ce),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Ye=this._containerDimensions();this._resizeCanvas(Ye[0],Ye[1]);var lt=this._controlContainer=n.create("div","mapboxgl-control-container",de),wt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Yt){wt[Yt]=n.create("div","mapboxgl-ctrl-"+Yt,lt)})},H.prototype._resizeCanvas=function(de,Ae){var Ce=e.browser.devicePixelRatio||1;this._canvas.width=Ce*de,this._canvas.height=Ce*Ae,this._canvas.style.width=de+"px",this._canvas.style.height=Ae+"px"},H.prototype._setupPainter=function(){var de=e.extend({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Ae=this._canvas.getContext("webgl",de)||this._canvas.getContext("experimental-webgl",de);if(!Ae){this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new ri(Ae,this.transform),e.webpSupported.testSupport(Ae)},H.prototype._contextLost=function(de){de.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:de}))},H.prototype._contextRestored=function(de){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:de}))},H.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},H.prototype._update=function(de){return this.style?(this._styleDirty=this._styleDirty||de,this._sourcesDirty=!0,this.triggerRepaint(),this):this},H.prototype._requestRenderFrame=function(de){return this._update(),this._renderTaskQueue.add(de)},H.prototype._cancelRenderFrame=function(de){this._renderTaskQueue.remove(de)},H.prototype._render=function(de){var Ae=this,Ce,Ye=0,lt=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Ce=lt.createQueryEXT(),lt.beginQueryEXT(lt.TIME_ELAPSED_EXT,Ce),Ye=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(de),!this._removed){var wt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Yt=this.transform.zoom,ar=e.browser.now();this.style.zoomHistory.update(Yt,ar);var fr=new e.EvaluationParameters(Yt,{now:ar,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),kr=fr.crossFadingFactor();(kr!==1||kr!==this._crossFadingFactor)&&(wt=!0,this._crossFadingFactor=kr),this.style.update(fr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||wt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Fr=e.browser.now()-Ye;lt.endQueryEXT(lt.TIME_ELAPSED_EXT,Ce),setTimeout(function(){var jr=lt.getQueryObjectEXT(Ce,lt.QUERY_RESULT_EXT)/(1e3*1e3);lt.deleteQueryEXT(Ce),Ae.fire(new e.Event("gpu-timing-frame",{cpuTime:Fr,gpuTime:jr}))},50)}if(this.listens("gpu-timing-layer")){var Or=this.painter.collectGpuTimers();setTimeout(function(){var jr=Ae.painter.queryGpuTimers(Or);Ae.fire(new e.Event("gpu-timing-layer",{layerTimes:jr}))},50)}var zr=this._sourcesDirty||this._styleDirty||this._placementDirty;return zr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},H.prototype.remove=function(){this._hash&&this._hash.remove();for(var de=0,Ae=this._controls;de<Ae.length;de+=1){var Ce=Ae[de];Ce.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof e.window!="undefined"&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var Ye=this.painter.context.gl.getExtension("WEBGL_lose_context");Ye&&Ye.loseContext(),vf(this._canvasContainer),vf(this._controlContainer),vf(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},H.prototype.triggerRepaint=function(){var de=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(Ae){de._frame=null,de._render(Ae)}))},H.prototype._onWindowOnline=function(){this._update()},H.prototype._onWindowResize=function(de){this._trackResize&&this.resize({originalEvent:de})._update()},ve.showTileBoundaries.get=function(){return!!this._showTileBoundaries},ve.showTileBoundaries.set=function(j){this._showTileBoundaries!==j&&(this._showTileBoundaries=j,this._update())},ve.showPadding.get=function(){return!!this._showPadding},ve.showPadding.set=function(j){this._showPadding!==j&&(this._showPadding=j,this._update())},ve.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},ve.showCollisionBoxes.set=function(j){this._showCollisionBoxes!==j&&(this._showCollisionBoxes=j,j?this.style._generateCollisionBoxes():this._update())},ve.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},ve.showOverdrawInspector.set=function(j){this._showOverdrawInspector!==j&&(this._showOverdrawInspector=j,this._update())},ve.repaint.get=function(){return!!this._repaint},ve.repaint.set=function(j){this._repaint!==j&&(this._repaint=j,this.triggerRepaint())},ve.vertices.get=function(){return!!this._vertices},ve.vertices.set=function(j){this._vertices=j,this._update()},H.prototype._setCacheLimits=function(de,Ae){e.setCacheLimits(de,Ae)},ve.version.get=function(){return e.version},Object.defineProperties(H.prototype,ve),H}(Qu);function vf(ce){ce.parentNode&&ce.parentNode.removeChild(ce)}var Mf={showCompass:!0,showZoom:!0,visualizePitch:!1},yu=function(H){var ve=this;this.options=e.extend({},Mf,H),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(j){return j.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(j){return ve._map.zoomIn({},{originalEvent:j})}),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(j){return ve._map.zoomOut({},{originalEvent:j})}),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(j){ve.options.visualizePitch?ve._map.resetNorthPitch({},{originalEvent:j}):ve._map.resetNorth({},{originalEvent:j})}),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};yu.prototype._updateZoomButtons=function(){var H=this._map.getZoom();this._zoomInButton.disabled=H===this._map.getMaxZoom(),this._zoomOutButton.disabled=H===this._map.getMinZoom()},yu.prototype._rotateCompassArrow=function(){var H=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=H},yu.prototype.onAdd=function(H){return this._map=H,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Js(this._map,this._compass,this.options.visualizePitch)),this._container},yu.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},yu.prototype._createButton=function(H,ve){var j=n.create("button",H,this._container);return j.type="button",j.addEventListener("click",ve),j},yu.prototype._setButtonTitle=function(H,ve){var j=this._map._getUIString("NavigationControl."+ve);H.title=j,H.setAttribute("aria-label",j)};var Js=function(H,ve,j){j===void 0&&(j=!1),this._clickTolerance=10,this.element=ve,this.mouseRotate=new oa({clickTolerance:H.dragRotate._mouseRotate._clickTolerance}),this.map=H,j&&(this.mousePitch=new ka({clickTolerance:H.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(ve,"mousedown",this.mousedown),n.addEventListener(ve,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(ve,"touchmove",this.touchmove),n.addEventListener(ve,"touchend",this.touchend),n.addEventListener(ve,"touchcancel",this.reset)};Js.prototype.down=function(H,ve){this.mouseRotate.mousedown(H,ve),this.mousePitch&&this.mousePitch.mousedown(H,ve),n.disableDrag()},Js.prototype.move=function(H,ve){var j=this.map,de=this.mouseRotate.mousemoveWindow(H,ve);if(de&&de.bearingDelta&&j.setBearing(j.getBearing()+de.bearingDelta),this.mousePitch){var Ae=this.mousePitch.mousemoveWindow(H,ve);Ae&&Ae.pitchDelta&&j.setPitch(j.getPitch()+Ae.pitchDelta)}},Js.prototype.off=function(){var H=this.element;n.removeEventListener(H,"mousedown",this.mousedown),n.removeEventListener(H,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(H,"touchmove",this.touchmove),n.removeEventListener(H,"touchend",this.touchend),n.removeEventListener(H,"touchcancel",this.reset),this.offTemp()},Js.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(e.window,"mousemove",this.mousemove),n.removeEventListener(e.window,"mouseup",this.mouseup)},Js.prototype.mousedown=function(H){this.down(e.extend({},H,{ctrlKey:!0,preventDefault:function(){return H.preventDefault()}}),n.mousePos(this.element,H)),n.addEventListener(e.window,"mousemove",this.mousemove),n.addEventListener(e.window,"mouseup",this.mouseup)},Js.prototype.mousemove=function(H){this.move(H,n.mousePos(this.element,H))},Js.prototype.mouseup=function(H){this.mouseRotate.mouseupWindow(H),this.mousePitch&&this.mousePitch.mouseupWindow(H),this.offTemp()},Js.prototype.touchstart=function(H){H.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,H.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return H.preventDefault()}},this._startPos))},Js.prototype.touchmove=function(H){H.targetTouches.length!==1?this.reset():(this._lastPos=n.touchPos(this.element,H.targetTouches)[0],this.move({preventDefault:function(){return H.preventDefault()}},this._lastPos))},Js.prototype.touchend=function(H){H.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Js.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function mu(ce,H,ve){if(ce=new e.LngLat(ce.lng,ce.lat),H){var j=new e.LngLat(ce.lng-360,ce.lat),de=new e.LngLat(ce.lng+360,ce.lat),Ae=ve.locationPoint(ce).distSqr(H);ve.locationPoint(j).distSqr(H)<Ae?ce=j:ve.locationPoint(de).distSqr(H)<Ae&&(ce=de)}for(;Math.abs(ce.lng-ve.center.lng)>180;){var Ce=ve.locationPoint(ce);if(Ce.x>=0&&Ce.y>=0&&Ce.x<=ve.width&&Ce.y<=ve.height)break;ce.lng>ve.center.lng?ce.lng-=360:ce.lng+=360}return ce}var pf={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Sf(ce,H,ve){var j=ce.classList;for(var de in pf)j.remove("mapboxgl-"+ve+"-anchor-"+de);j.add("mapboxgl-"+ve+"-anchor-"+H)}var qu=function(ce){function H(ve,j){var de=this;if(ce.call(this),(ve instanceof e.window.HTMLElement||j)&&(ve=e.extend({element:ve},j)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=ve&&ve.anchor||"center",this._color=ve&&ve.color||"#3FB1CE",this._draggable=ve&&ve.draggable||!1,this._state="inactive",this._rotation=ve&&ve.rotation||0,this._rotationAlignment=ve&&ve.rotationAlignment||"auto",this._pitchAlignment=ve&&ve.pitchAlignment&&ve.pitchAlignment!=="auto"?ve.pitchAlignment:this._rotationAlignment,!ve||!ve.element){this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var Ae=n.createNS("http://www.w3.org/2000/svg","svg");Ae.setAttributeNS(null,"display","block"),Ae.setAttributeNS(null,"height","41px"),Ae.setAttributeNS(null,"width","27px"),Ae.setAttributeNS(null,"viewBox","0 0 27 41");var Ce=n.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"stroke","none"),Ce.setAttributeNS(null,"stroke-width","1"),Ce.setAttributeNS(null,"fill","none"),Ce.setAttributeNS(null,"fill-rule","evenodd");var Ye=n.createNS("http://www.w3.org/2000/svg","g");Ye.setAttributeNS(null,"fill-rule","nonzero");var lt=n.createNS("http://www.w3.org/2000/svg","g");lt.setAttributeNS(null,"transform","translate(3.0, 29.0)"),lt.setAttributeNS(null,"fill","#000000");for(var wt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],Yt=0,ar=wt;Yt<ar.length;Yt+=1){var fr=ar[Yt],kr=n.createNS("http://www.w3.org/2000/svg","ellipse");kr.setAttributeNS(null,"opacity","0.04"),kr.setAttributeNS(null,"cx","10.5"),kr.setAttributeNS(null,"cy","5.80029008"),kr.setAttributeNS(null,"rx",fr.rx),kr.setAttributeNS(null,"ry",fr.ry),lt.appendChild(kr)}var Fr=n.createNS("http://www.w3.org/2000/svg","g");Fr.setAttributeNS(null,"fill",this._color);var Or=n.createNS("http://www.w3.org/2000/svg","path");Or.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Fr.appendChild(Or);var zr=n.createNS("http://www.w3.org/2000/svg","g");zr.setAttributeNS(null,"opacity","0.25"),zr.setAttributeNS(null,"fill","#000000");var jr=n.createNS("http://www.w3.org/2000/svg","path");jr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),zr.appendChild(jr);var cn=n.createNS("http://www.w3.org/2000/svg","g");cn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),cn.setAttributeNS(null,"fill","#FFFFFF");var En=n.createNS("http://www.w3.org/2000/svg","g");En.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Fn=n.createNS("http://www.w3.org/2000/svg","circle");Fn.setAttributeNS(null,"fill","#000000"),Fn.setAttributeNS(null,"opacity","0.25"),Fn.setAttributeNS(null,"cx","5.5"),Fn.setAttributeNS(null,"cy","5.5"),Fn.setAttributeNS(null,"r","5.4999962");var jn=n.createNS("http://www.w3.org/2000/svg","circle");jn.setAttributeNS(null,"fill","#FFFFFF"),jn.setAttributeNS(null,"cx","5.5"),jn.setAttributeNS(null,"cy","5.5"),jn.setAttributeNS(null,"r","5.4999962"),En.appendChild(Fn),En.appendChild(jn),Ye.appendChild(lt),Ye.appendChild(Fr),Ye.appendChild(zr),Ye.appendChild(cn),Ye.appendChild(En),Ae.appendChild(Ye),this._element.appendChild(Ae),this._offset=e.Point.convert(ve&&ve.offset||[0,-14])}else this._element=ve.element,this._offset=e.Point.convert(ve&&ve.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(qn){qn.preventDefault()}),this._element.addEventListener("mousedown",function(qn){qn.preventDefault()}),this._element.addEventListener("focus",function(){var qn=de._map.getContainer();qn.scrollTop=0,qn.scrollLeft=0}),Sf(this._element,this._anchor,"marker"),this._popup=null}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.addTo=function(j){return this.remove(),this._map=j,j.getCanvasContainer().appendChild(this._element),j.on("move",this._update),j.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},H.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},H.prototype.getLngLat=function(){return this._lngLat},H.prototype.setLngLat=function(j){return this._lngLat=e.LngLat.convert(j),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},H.prototype.getElement=function(){return this._element},H.prototype.setPopup=function(j){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),j){if(!("offset"in j.options)){var de=41-5.8/2,Ae=13.5,Ce=Math.sqrt(Math.pow(Ae,2)/2);j.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-de],"bottom-left":[Ce,(de-Ae+Ce)*-1],"bottom-right":[-Ce,(de-Ae+Ce)*-1],left:[Ae,(de-Ae)*-1],right:[-Ae,(de-Ae)*-1]}:this._offset}this._popup=j,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},H.prototype._onKeyPress=function(j){var de=j.code,Ae=j.charCode||j.keyCode;(de==="Space"||de==="Enter"||Ae===32||Ae===13)&&this.togglePopup()},H.prototype._onMapClick=function(j){var de=j.originalEvent.target,Ae=this._element;this._popup&&(de===Ae||Ae.contains(de))&&this.togglePopup()},H.prototype.getPopup=function(){return this._popup},H.prototype.togglePopup=function(){var j=this._popup;if(j)j.isOpen()?j.remove():j.addTo(this._map);else return this;return this},H.prototype._update=function(j){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=mu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var de="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?de="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(de="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Ae="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Ae="rotateX(0deg)":this._pitchAlignment==="map"&&(Ae="rotateX("+this._map.getPitch()+"deg)"),(!j||j.type==="moveend")&&(this._pos=this._pos.round()),n.setTransform(this._element,pf[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ae+" "+de)}},H.prototype.getOffset=function(){return this._offset},H.prototype.setOffset=function(j){return this._offset=e.Point.convert(j),this._update(),this},H.prototype._onMove=function(j){this._pos=j.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},H.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new e.Event("dragend")),this._state="inactive"},H.prototype._addDragHandler=function(j){this._element.contains(j.originalEvent.target)&&(j.preventDefault(),this._positionDelta=j.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},H.prototype.setDraggable=function(j){return this._draggable=!!j,this._map&&(j?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},H.prototype.isDraggable=function(){return this._draggable},H.prototype.setRotation=function(j){return this._rotation=j||0,this._update(),this},H.prototype.getRotation=function(){return this._rotation},H.prototype.setRotationAlignment=function(j){return this._rotationAlignment=j||"auto",this._update(),this},H.prototype.getRotationAlignment=function(){return this._rotationAlignment},H.prototype.setPitchAlignment=function(j){return this._pitchAlignment=j&&j!=="auto"?j:this._rotationAlignment,this._update(),this},H.prototype.getPitchAlignment=function(){return this._pitchAlignment},H}(e.Evented),$f={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Bu;function df(ce){Bu!==void 0?ce(Bu):e.window.navigator.permissions!==void 0?e.window.navigator.permissions.query({name:"geolocation"}).then(function(H){Bu=H.state!=="denied",ce(Bu)}):(Bu=!!e.window.navigator.geolocation,ce(Bu))}var ef=0,Ou=!1,qf=function(ce){function H(ve){ce.call(this),this.options=e.extend({},$f,ve),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.onAdd=function(j){return this._map=j,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),df(this._setupUI),this._container},H.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ef=0,Ou=!1},H.prototype._isOutOfMapMaxBounds=function(j){var de=this._map.getMaxBounds(),Ae=j.coords;return de&&(Ae.longitude<de.getWest()||Ae.longitude>de.getEast()||Ae.latitude<de.getSouth()||Ae.latitude>de.getNorth())},H.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},H.prototype._onSuccess=function(j){if(!!this._map){if(this._isOutOfMapMaxBounds(j)){this._setErrorState(),this.fire(new e.Event("outofmaxbounds",j)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=j,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(j),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(j),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",j)),this._finish()}},H.prototype._updateCamera=function(j){var de=new e.LngLat(j.coords.longitude,j.coords.latitude),Ae=j.coords.accuracy,Ce=this._map.getBearing(),Ye=e.extend({bearing:Ce},this.options.fitBoundsOptions);this._map.fitBounds(de.toBounds(Ae),Ye,{geolocateSource:!0})},H.prototype._updateMarker=function(j){if(j){var de=new e.LngLat(j.coords.longitude,j.coords.latitude);this._accuracyCircleMarker.setLngLat(de).addTo(this._map),this._userLocationDotMarker.setLngLat(de).addTo(this._map),this._accuracy=j.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},H.prototype._updateCircleRadius=function(){var j=this._map._container.clientHeight/2,de=this._map.unproject([0,j]),Ae=this._map.unproject([1,j]),Ce=de.distanceTo(Ae),Ye=Math.ceil(2*this._accuracy/Ce);this._circleElement.style.width=Ye+"px",this._circleElement.style.height=Ye+"px"},H.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},H.prototype._onError=function(j){if(!!this._map){if(this.options.trackUserLocation)if(j.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var de=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=de,this._geolocateButton.setAttribute("aria-label",de),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(j.code===3&&Ou)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",j)),this._finish()}},H.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},H.prototype._setupUI=function(j){var de=this;if(this._container.addEventListener("contextmenu",function(Ye){return Ye.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",j===!1){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Ae=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Ae,this._geolocateButton.setAttribute("aria-label",Ae)}else{var Ce=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Ce,this._geolocateButton.setAttribute("aria-label",Ce)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new qu(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new qu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Ye){var lt=Ye.originalEvent&&Ye.originalEvent.type==="resize";!Ye.geolocateSource&&de._watchState==="ACTIVE_LOCK"&&!lt&&(de._watchState="BACKGROUND",de._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),de._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),de.fire(new e.Event("trackuserlocationend")))})},H.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ef--,Ou=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ef++;var j;ef>1?(j={maximumAge:6e5,timeout:0},Ou=!0):(j=this.options.positionOptions,Ou=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,j)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},H.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},H}(e.Evented),mc={maxWidth:100,unit:"metric"},Nu=function(H){this.options=e.extend({},mc,H),e.bindAll(["_onMove","setUnit"],this)};Nu.prototype.getDefaultPosition=function(){return"bottom-left"},Nu.prototype._onMove=function(){ec(this._map,this._container,this.options)},Nu.prototype.onAdd=function(H){return this._map=H,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",H.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Nu.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Nu.prototype.setUnit=function(H){this.options.unit=H,ec(this._map,this._container,this.options)};function ec(ce,H,ve){var j=ve&&ve.maxWidth||100,de=ce._container.clientHeight/2,Ae=ce.unproject([0,de]),Ce=ce.unproject([j,de]),Ye=Ae.distanceTo(Ce);if(ve&&ve.unit==="imperial"){var lt=3.2808*Ye;if(lt>5280){var wt=lt/5280;tf(H,j,wt,ce._getUIString("ScaleControl.Miles"))}else tf(H,j,lt,ce._getUIString("ScaleControl.Feet"))}else if(ve&&ve.unit==="nautical"){var Yt=Ye/1852;tf(H,j,Yt,ce._getUIString("ScaleControl.NauticalMiles"))}else Ye>=1e3?tf(H,j,Ye/1e3,ce._getUIString("ScaleControl.Kilometers")):tf(H,j,Ye,ce._getUIString("ScaleControl.Meters"))}function tf(ce,H,ve,j){var de=bc(ve),Ae=de/ve;ce.style.width=H*Ae+"px",ce.innerHTML=de+"&nbsp;"+j}function xc(ce){var H=Math.pow(10,Math.ceil(-Math.log(ce)/Math.LN10));return Math.round(ce*H)/H}function bc(ce){var H=Math.pow(10,(""+Math.floor(ce)).length-1),ve=ce/H;return ve=ve>=10?10:ve>=5?5:ve>=3?3:ve>=2?2:ve>=1?1:xc(ve),H*ve}var Nl=function(H){this._fullscreen=!1,H&&H.container&&(H.container instanceof e.window.HTMLElement?this._container=H.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Nl.prototype.onAdd=function(H){return this._map=H,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Nl.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Nl.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Nl.prototype._setupUI=function(){var H=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",H).setAttribute("aria-hidden",!0),H.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Nl.prototype._updateTitle=function(){var H=this._getTitle();this._fullscreenButton.setAttribute("aria-label",H),this._fullscreenButton.title=H},Nl.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Nl.prototype._isFullscreen=function(){return this._fullscreen},Nl.prototype._changeIcon=function(){var H=e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement;H===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Nl.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var _c={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},wc=function(ce){function H(ve){ce.call(this),this.options=e.extend(Object.create(_c),ve),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.addTo=function(j){return this._map&&this.remove(),this._map=j,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},H.prototype.isOpen=function(){return!!this._map},H.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},H.prototype.getLngLat=function(){return this._lngLat},H.prototype.setLngLat=function(j){return this._lngLat=e.LngLat.convert(j),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},H.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},H.prototype.getElement=function(){return this._container},H.prototype.setText=function(j){return this.setDOMContent(e.window.document.createTextNode(j))},H.prototype.setHTML=function(j){var de=e.window.document.createDocumentFragment(),Ae=e.window.document.createElement("body"),Ce;for(Ae.innerHTML=j;Ce=Ae.firstChild,!!Ce;)de.appendChild(Ce);return this.setDOMContent(de)},H.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},H.prototype.setMaxWidth=function(j){return this.options.maxWidth=j,this._update(),this},H.prototype.setDOMContent=function(j){return this._createContent(),this._content.appendChild(j),this._update(),this},H.prototype.addClassName=function(j){this._container&&this._container.classList.add(j)},H.prototype.removeClassName=function(j){this._container&&this._container.classList.remove(j)},H.prototype.toggleClassName=function(j){if(this._container)return this._container.classList.toggle(j)},H.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},H.prototype._onMouseUp=function(j){this._update(j.point)},H.prototype._onMouseMove=function(j){this._update(j.point)},H.prototype._onDrag=function(j){this._update(j.point)},H.prototype._update=function(j){var de=this,Ae=this._lngLat||this._trackPointer;if(!(!this._map||!Ae||!this._content)&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(kr){return de._container.classList.add(kr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=mu(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!j))){var Ce=this._pos=this._trackPointer&&j?j:this._map.project(this._lngLat),Ye=this.options.anchor,lt=tc(this.options.offset);if(!Ye){var wt=this._container.offsetWidth,Yt=this._container.offsetHeight,ar;Ce.y+lt.bottom.y<Yt?ar=["top"]:Ce.y>this._map.transform.height-Yt?ar=["bottom"]:ar=[],Ce.x<wt/2?ar.push("left"):Ce.x>this._map.transform.width-wt/2&&ar.push("right"),ar.length===0?Ye="bottom":Ye=ar.join("-")}var fr=Ce.add(lt[Ye]).round();n.setTransform(this._container,pf[Ye]+" translate("+fr.x+"px,"+fr.y+"px)"),Sf(this._container,Ye,"popup")}},H.prototype._onClose=function(){this.remove()},H}(e.Evented);function tc(ce){if(ce)if(typeof ce=="number"){var H=Math.round(Math.sqrt(.5*Math.pow(ce,2)));return{center:new e.Point(0,0),top:new e.Point(0,ce),"top-left":new e.Point(H,H),"top-right":new e.Point(-H,H),bottom:new e.Point(0,-ce),"bottom-left":new e.Point(H,-H),"bottom-right":new e.Point(-H,-H),left:new e.Point(ce,0),right:new e.Point(-ce,0)}}else if(ce instanceof e.Point||Array.isArray(ce)){var ve=e.Point.convert(ce);return{center:ve,top:ve,"top-left":ve,"top-right":ve,bottom:ve,"bottom-left":ve,"bottom-right":ve,left:ve,right:ve}}else return{center:e.Point.convert(ce.center||[0,0]),top:e.Point.convert(ce.top||[0,0]),"top-left":e.Point.convert(ce["top-left"]||[0,0]),"top-right":e.Point.convert(ce["top-right"]||[0,0]),bottom:e.Point.convert(ce.bottom||[0,0]),"bottom-left":e.Point.convert(ce["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(ce["bottom-right"]||[0,0]),left:e.Point.convert(ce.left||[0,0]),right:e.Point.convert(ce.right||[0,0])};else return tc(new e.Point(0,0))}var Tc={version:e.version,supported:a,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Qf,NavigationControl:yu,GeolocateControl:qf,AttributionControl:Tl,ScaleControl:Nu,FullscreenControl:Nl,Popup:wc,Marker:qu,Style:Zo,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:lr,clearPrewarmedResources:Yr,get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(ce){e.config.ACCESS_TOKEN=ce},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(ce){e.config.API_URL=ce},get workerCount(){return Ct.workerCount},set workerCount(ce){Ct.workerCount=ce},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(ce){e.config.MAX_PARALLEL_IMAGE_REQUESTS=ce},clearStorage:function(H){e.clearTileCache(H)},workerUrl:""};return Tc}),M})},{}],240:[function(g,ne,ae){ne.exports=Math.log2||function(T){return Math.log(T)*Math.LOG2E}},{}],241:[function(g,ne,ae){ne.exports=c;var T=g("mouse-event");function c(M,A){A||(A=M,M=window);var e=0,a=0,n=0,t={shift:!1,alt:!1,control:!1,meta:!1},r=!1;function f(w){var b=!1;return"altKey"in w&&(b=b||w.altKey!==t.alt,t.alt=!!w.altKey),"shiftKey"in w&&(b=b||w.shiftKey!==t.shift,t.shift=!!w.shiftKey),"ctrlKey"in w&&(b=b||w.ctrlKey!==t.control,t.control=!!w.ctrlKey),"metaKey"in w&&(b=b||w.metaKey!==t.meta,t.meta=!!w.metaKey),b}function o(w,b){var h=T.x(b),m=T.y(b);"buttons"in b&&(w=b.buttons|0),(w!==e||h!==a||m!==n||f(b))&&(e=w|0,a=h||0,n=m||0,A&&A(e,a,n,t))}function i(w){o(0,w)}function p(){(e||a||n||t.shift||t.alt||t.meta||t.control)&&(a=n=0,e=0,t.shift=t.alt=t.control=t.meta=!1,A&&A(0,0,0,t))}function d(w){f(w)&&A&&A(e,a,n,t)}function y(w){T.buttons(w)===0?o(0,w):o(e,w)}function v(w){o(e|T.buttons(w),w)}function x(w){o(e&~T.buttons(w),w)}function l(){r||(r=!0,M.addEventListener("mousemove",y),M.addEventListener("mousedown",v),M.addEventListener("mouseup",x),M.addEventListener("mouseleave",i),M.addEventListener("mouseenter",i),M.addEventListener("mouseout",i),M.addEventListener("mouseover",i),M.addEventListener("blur",p),M.addEventListener("keyup",d),M.addEventListener("keydown",d),M.addEventListener("keypress",d),M!==window&&(window.addEventListener("blur",p),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}function _(){!r||(r=!1,M.removeEventListener("mousemove",y),M.removeEventListener("mousedown",v),M.removeEventListener("mouseup",x),M.removeEventListener("mouseleave",i),M.removeEventListener("mouseenter",i),M.removeEventListener("mouseout",i),M.removeEventListener("mouseover",i),M.removeEventListener("blur",p),M.removeEventListener("keyup",d),M.removeEventListener("keydown",d),M.removeEventListener("keypress",d),M!==window&&(window.removeEventListener("blur",p),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))}l();var s={element:M};return Object.defineProperties(s,{enabled:{get:function(){return r},set:function(w){w?l():_()},enumerable:!0},buttons:{get:function(){return e},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return t},enumerable:!0}}),s}},{"mouse-event":243}],242:[function(g,ne,ae){var T={left:0,top:0};ne.exports=c;function c(A,e,a){e=e||A.currentTarget||A.srcElement,Array.isArray(a)||(a=[0,0]);var n=A.clientX||0,t=A.clientY||0,r=M(e);return a[0]=n-r.left,a[1]=t-r.top,a}function M(A){return A===window||A===document||A===document.body?T:A.getBoundingClientRect()}},{}],243:[function(g,ne,ae){function T(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var a=e.which;if(a===2)return 4;if(a===3)return 2;if(a>0)return 1<<a-1}else if("button"in e){var a=e.button;if(a===1)return 4;if(a===2)return 2;if(a>=0)return 1<<a}}return 0}ae.buttons=T;function c(e){return e.target||e.srcElement||window}ae.element=c;function M(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var a=c(e),n=a.getBoundingClientRect();return e.clientX-n.left}return 0}ae.x=M;function A(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var a=c(e),n=a.getBoundingClientRect();return e.clientY-n.top}return 0}ae.y=A},{}],244:[function(g,ne,ae){var T=g("to-px");ne.exports=c;function c(M,A,e){typeof M=="function"&&(e=!!A,A=M,M=window);var a=T("ex",M),n=function(t){e&&t.preventDefault();var r=t.deltaX||0,f=t.deltaY||0,o=t.deltaZ||0,i=t.deltaMode,p=1;switch(i){case 1:p=a;break;case 2:p=window.innerHeight;break}if(r*=p,f*=p,o*=p,r||f||o)return A(r,f,o,t)};return M.addEventListener("wheel",n),n}},{"to-px":314}],245:[function(g,ne,ae){(function(T,c){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(A,e,a){e[A]=e[A]||a(),typeof ne!="undefined"&&ne.exports&&(ne.exports=e[A])})("Promise",typeof T!="undefined"?T:this,function(){var A,e,a,n=Object.prototype.toString,t=typeof c!="undefined"?function(w){return c(w)}:setTimeout;try{Object.defineProperty({},"x",{}),A=function(w,b,h,m){return Object.defineProperty(w,b,{value:h,writable:!0,configurable:m!==!1})}}catch{A=function(b,h,m){return b[h]=m,b}}a=function(){var w,b,h;function m(u,L){this.fn=u,this.self=L,this.next=void 0}return{add:function(L,S){h=new m(L,S),b?b.next=h:w=h,b=h,h=void 0},drain:function(){var L=w;for(w=b=e=void 0;L;)L.fn.call(L.self),L=L.next}}}();function r(s,w){a.add(s,w),e||(e=t(a.drain))}function f(s){var w,b=typeof s;return s!=null&&(b=="object"||b=="function")&&(w=s.then),typeof w=="function"?w:!1}function o(){for(var s=0;s<this.chain.length;s++)i(this,this.state===1?this.chain[s].success:this.chain[s].failure,this.chain[s]);this.chain.length=0}function i(s,w,b){var h,m;try{w===!1?b.reject(s.msg):(w===!0?h=s.msg:h=w.call(void 0,s.msg),h===b.promise?b.reject(TypeError("Promise-chain cycle")):(m=f(h))?m.call(h,b.resolve,b.reject):b.resolve(h))}catch(u){b.reject(u)}}function p(s){var w,b=this;if(!b.triggered){b.triggered=!0,b.def&&(b=b.def);try{(w=f(s))?r(function(){var h=new v(b);try{w.call(s,function(){p.apply(h,arguments)},function(){d.apply(h,arguments)})}catch(m){d.call(h,m)}}):(b.msg=s,b.state=1,b.chain.length>0&&r(o,b))}catch(h){d.call(new v(b),h)}}}function d(s){var w=this;w.triggered||(w.triggered=!0,w.def&&(w=w.def),w.msg=s,w.state=2,w.chain.length>0&&r(o,w))}function y(s,w,b,h){for(var m=0;m<w.length;m++)(function(L){s.resolve(w[L]).then(function(k){b(L,k)},h)})(m)}function v(s){this.def=s,this.triggered=!1}function x(s){this.promise=s,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(s){if(typeof s!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var w=new x(this);this.then=function(h,m){var u={success:typeof h=="function"?h:!0,failure:typeof m=="function"?m:!1};return u.promise=new this.constructor(function(S,k){if(typeof S!="function"||typeof k!="function")throw TypeError("Not a function");u.resolve=S,u.reject=k}),w.chain.push(u),w.state!==0&&r(o,w),u.promise},this.catch=function(h){return this.then(void 0,h)};try{s.call(void 0,function(h){p.call(w,h)},function(h){d.call(w,h)})}catch(b){d.call(w,b)}}var _=A({},"constructor",l,!1);return l.prototype=_,A(_,"__NPO__",0,!1),A(l,"resolve",function(w){var b=this;return w&&typeof w=="object"&&w.__NPO__===1?w:new b(function(m,u){if(typeof m!="function"||typeof u!="function")throw TypeError("Not a function");m(w)})}),A(l,"reject",function(w){return new this(function(h,m){if(typeof h!="function"||typeof m!="function")throw TypeError("Not a function");m(w)})}),A(l,"all",function(w){var b=this;return n.call(w)!="[object Array]"?b.reject(TypeError("Not an array")):w.length===0?b.resolve([]):new b(function(m,u){if(typeof m!="function"||typeof u!="function")throw TypeError("Not a function");var L=w.length,S=Array(L),k=0;y(b,w,function(z,I){S[z]=I,++k===L&&m(S)},u)})}),A(l,"race",function(w){var b=this;return n.call(w)!="[object Array]"?b.reject(TypeError("Not an array")):new b(function(m,u){if(typeof m!="function"||typeof u!="function")throw TypeError("Not a function");y(b,w,function(S,k){m(k)},u)})}),l})}).call(this)}).call(this,typeof To!="undefined"?To:typeof self!="undefined"?self:typeof window!="undefined"?window:{},g("timers").setImmediate)},{timers:311}],246:[function(g,ne,ae){var T=Math.PI,c=t(120);ne.exports=M;function M(r){for(var f,o=[],i=0,p=0,d=0,y=0,v=null,x=null,l=0,_=0,s=0,w=r.length;s<w;s++){var b=r[s],h=b[0];switch(h){case"M":d=b[1],y=b[2];break;case"A":b=a(l,_,b[1],b[2],t(b[3]),b[4],b[5],b[6],b[7]),b.unshift("C"),b.length>7&&(o.push(b.splice(0,7)),b.unshift("C"));break;case"S":var m=l,u=_;(f=="C"||f=="S")&&(m+=m-i,u+=u-p),b=["C",m,u,b[1],b[2],b[3],b[4]];break;case"T":f=="Q"||f=="T"?(v=l*2-v,x=_*2-x):(v=l,x=_),b=e(l,_,v,x,b[1],b[2]);break;case"Q":v=b[1],x=b[2],b=e(l,_,b[1],b[2],b[3],b[4]);break;case"L":b=A(l,_,b[1],b[2]);break;case"H":b=A(l,_,b[1],_);break;case"V":b=A(l,_,l,b[1]);break;case"Z":b=A(l,_,d,y);break}f=h,l=b[b.length-2],_=b[b.length-1],b.length>4?(i=b[b.length-4],p=b[b.length-3]):(i=l,p=_),o.push(b)}return o}function A(r,f,o,i){return["C",r,f,o,i,o,i]}function e(r,f,o,i,p,d){return["C",r/3+2/3*o,f/3+2/3*i,p/3+2/3*o,d/3+2/3*i,p,d]}function a(r,f,o,i,p,d,y,v,x,l){if(l)k=l[0],P=l[1],L=l[2],S=l[3];else{var _=n(r,f,-p);r=_.x,f=_.y,_=n(v,x,-p),v=_.x,x=_.y;var s=(r-v)/2,w=(f-x)/2,b=s*s/(o*o)+w*w/(i*i);b>1&&(b=Math.sqrt(b),o=b*o,i=b*i);var h=o*o,m=i*i,u=(d==y?-1:1)*Math.sqrt(Math.abs((h*m-h*w*w-m*s*s)/(h*w*w+m*s*s)));u==1/0&&(u=1);var L=u*o*w/i+(r+v)/2,S=u*-i*s/o+(f+x)/2,k=Math.asin(((f-S)/i).toFixed(9)),P=Math.asin(((x-S)/i).toFixed(9));k=r<L?T-k:k,P=v<L?T-P:P,k<0&&(k=T*2+k),P<0&&(P=T*2+P),y&&k>P&&(k=k-T*2),!y&&P>k&&(P=P-T*2)}if(Math.abs(P-k)>c){var z=P,I=v,D=x;P=k+c*(y&&P>k?1:-1),v=L+o*Math.cos(P),x=S+i*Math.sin(P);var R=a(v,x,o,i,p,0,y,I,D,[P,z,L,S])}var B=Math.tan((P-k)/4),F=4/3*o*B,V=4/3*i*B,Y=[2*r-(r+F*Math.sin(k)),2*f-(f-V*Math.cos(k)),v+F*Math.sin(P),x-V*Math.cos(P),v,x];if(l)return Y;R&&(Y=Y.concat(R));for(var K=0;K<Y.length;){var J=n(Y[K],Y[K+1],p);Y[K++]=J.x,Y[K++]=J.y}return Y}function n(r,f,o){return{x:r*Math.cos(o)-f*Math.sin(o),y:r*Math.sin(o)+f*Math.cos(o)}}function t(r){return r*(T/180)}},{}],247:[function(g,ne,ae){var T=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;function A(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function e(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(n).map(function(o){return n[o]});if(r.join("")!=="0123456789")return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach(function(o){f[o]=o}),Object.keys(Object.assign({},f)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}ne.exports=e()?Object.assign:function(a,n){for(var t,r=A(a),f,o=1;o<arguments.length;o++){t=Object(arguments[o]);for(var i in t)c.call(t,i)&&(r[i]=t[i]);if(T){f=T(t);for(var p=0;p<f.length;p++)M.call(t,f[p])&&(r[f[p]]=t[f[p]])}}return r}},{}],248:[function(g,ne,ae){function T(A,e){if(typeof A!="string")return[A];var a=[A];typeof e=="string"||Array.isArray(e)?e={brackets:e}:e||(e={});var n=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],t=e.escape||"___",r=!!e.flat;n.forEach(function(i){var p=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),d=[];function y(v,x,l){var _=a.push(v.slice(i[0].length,-i[1].length))-1;return d.push(_),t+_+t}a.forEach(function(v,x){for(var l,_=0;v!=l;)if(l=v,v=v.replace(p,y),_++>1e4)throw Error("References have circular dependency. Please, check them.");a[x]=v}),d=d.reverse(),a=a.map(function(v){return d.forEach(function(x){v=v.replace(new RegExp("(\\"+t+x+"\\"+t+")","g"),i[0]+"$1"+i[1])}),v})});var f=new RegExp("\\"+t+"([0-9]+)\\"+t);function o(i,p,d){for(var y=[],v,x=0;v=f.exec(i);){if(x++>1e4)throw Error("Circular references in parenthesis");y.push(i.slice(0,v.index)),y.push(o(p[v[1]],p)),i=i.slice(v.index+v[0].length)}return y.push(i),y}return r?a:o(a[0],a)}function c(A,e){if(e&&e.flat){var a=e&&e.escape||"___",n=A[0],t;if(!n)return"";for(var r=new RegExp("\\"+a+"([0-9]+)\\"+a),f=0;n!=t;){if(f++>1e4)throw Error("Circular references in "+A);t=n,n=n.replace(r,o)}return n}return A.reduce(function i(p,d){return Array.isArray(d)&&(d=d.reduce(i,"")),p+d},"");function o(i,p){if(A[p]==null)throw Error("Reference "+p+"is undefined");return A[p]}}function M(A,e){return Array.isArray(A)?c(A,e):T(A,e)}M.parse=T,M.stringify=c,ne.exports=M},{}],249:[function(g,ne,ae){var T=g("pick-by-alias");ne.exports=c;function c(M){var A;return arguments.length>1&&(M=arguments),typeof M=="string"?M=M.split(/\s/).map(parseFloat):typeof M=="number"&&(M=[M]),M.length&&typeof M[0]=="number"?M.length===1?A={width:M[0],height:M[0],x:0,y:0}:M.length===2?A={width:M[0],height:M[1],x:0,y:0}:A={x:M[0],y:M[1],width:M[2]-M[0]||0,height:M[3]-M[1]||0}:M&&(M=T(M,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),A={x:M.left||0,y:M.top||0},M.width==null?M.right?A.width=M.right-A.x:A.width=0:A.width=M.width,M.height==null?M.bottom?A.height=M.bottom-A.y:A.height=0:A.height=M.height),A}},{"pick-by-alias":253}],250:[function(g,ne,ae){ne.exports=M;var T={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function M(a){var n=[];return a.replace(c,function(t,r,f){var o=r.toLowerCase();for(f=e(f),o=="m"&&f.length>2&&(n.push([r].concat(f.splice(0,2))),o="l",r=r=="m"?"l":"L");;){if(f.length==T[o])return f.unshift(r),n.push(f);if(f.length<T[o])throw new Error("malformed path data");n.push([r].concat(f.splice(0,T[o])))}}),n}var A=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function e(a){var n=a.match(A);return n?n.map(Number):[]}},{}],251:[function(g,ne,ae){ne.exports=function(c,M){M||(M=[0,""]),c=String(c);var A=parseFloat(c,10);return M[0]=A,M[1]=c.match(/[\d.\-\+]*\s*(.*)/)[1]||"",M}},{}],252:[function(g,ne,ae){(function(T){(function(){(function(){var c,M,A,e,a,n;typeof performance!="undefined"&&performance!==null&&performance.now?ne.exports=function(){return performance.now()}:typeof T!="undefined"&&T!==null&&T.hrtime?(ne.exports=function(){return(c()-a)/1e6},M=T.hrtime,c=function(){var t;return t=M(),t[0]*1e9+t[1]},e=c(),n=T.uptime()*1e9,a=e-n):Date.now?(ne.exports=function(){return Date.now()-A},A=Date.now()):(ne.exports=function(){return new Date().getTime()-A},A=new Date().getTime())}).call(this)}).call(this)}).call(this,g("_process"))},{_process:277}],253:[function(g,ne,ae){ne.exports=function(A,e,a){var n={},t,r;if(typeof e=="string"&&(e=c(e)),Array.isArray(e)){var f={};for(r=0;r<e.length;r++)f[e[r]]=!0;e=f}for(t in e)e[t]=c(e[t]);var o={};for(t in e){var i=e[t];if(Array.isArray(i))for(r=0;r<i.length;r++){var p=i[r];if(a&&(o[p]=!0),p in A){if(n[t]=A[p],a)for(var d=r;d<i.length;d++)o[i[d]]=!0;break}}else t in A&&(e[t]&&(n[t]=A[t]),a&&(o[t]=!0))}if(a)for(t in A)o[t]||(n[t]=A[t]);return n};var T={};function c(M){return T[M]?T[M]:(typeof M=="string"&&(M=T[M]=M.split(/\s*,\s*|\s+/)),M)}},{}],254:[function(g,ne,ae){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var T=g("./lib/build-log"),c=g("./lib/epsilon"),M=g("./lib/intersecter"),A=g("./lib/segment-chainer"),e=g("./lib/segment-selector"),a=g("./lib/geojson"),n=!1,t=c(),r;r={buildLog:function(o){return o===!0?n=T():o===!1&&(n=!1),n===!1?!1:n.list},epsilon:function(o){return t.epsilon(o)},segments:function(o){var i=M(!0,t,n);return o.regions.forEach(i.addRegion),{segments:i.calculate(o.inverted),inverted:o.inverted}},combine:function(o,i){var p=M(!1,t,n);return{combined:p.calculate(o.segments,o.inverted,i.segments,i.inverted),inverted1:o.inverted,inverted2:i.inverted}},selectUnion:function(o){return{segments:e.union(o.combined,n),inverted:o.inverted1||o.inverted2}},selectIntersect:function(o){return{segments:e.intersect(o.combined,n),inverted:o.inverted1&&o.inverted2}},selectDifference:function(o){return{segments:e.difference(o.combined,n),inverted:o.inverted1&&!o.inverted2}},selectDifferenceRev:function(o){return{segments:e.differenceRev(o.combined,n),inverted:!o.inverted1&&o.inverted2}},selectXor:function(o){return{segments:e.xor(o.combined,n),inverted:o.inverted1!==o.inverted2}},polygon:function(o){return{regions:A(o.segments,t,n),inverted:o.inverted}},polygonFromGeoJSON:function(o){return a.toPolygon(r,o)},polygonToGeoJSON:function(o){return a.fromPolygon(r,t,o)},union:function(o,i){return f(o,i,r.selectUnion)},intersect:function(o,i){return f(o,i,r.selectIntersect)},difference:function(o,i){return f(o,i,r.selectDifference)},differenceRev:function(o,i){return f(o,i,r.selectDifferenceRev)},xor:function(o,i){return f(o,i,r.selectXor)}};function f(o,i,p){var d=r.segments(o),y=r.segments(i),v=r.combine(d,y),x=p(v);return r.polygon(x)}typeof window=="object"&&(window.PolyBool=r),ne.exports=r},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(g,ne,ae){function T(){var c,M=0,A=!1;function e(a,n){return c.list.push({type:a,data:n?JSON.parse(JSON.stringify(n)):void 0}),c}return c={list:[],segmentId:function(){return M++},checkIntersection:function(a,n){return e("check",{seg1:a,seg2:n})},segmentChop:function(a,n){return e("div_seg",{seg:a,pt:n}),e("chop",{seg:a,pt:n})},statusRemove:function(a){return e("pop_seg",{seg:a})},segmentUpdate:function(a){return e("seg_update",{seg:a})},segmentNew:function(a,n){return e("new_seg",{seg:a,primary:n})},segmentRemove:function(a){return e("rem_seg",{seg:a})},tempStatus:function(a,n,t){return e("temp_status",{seg:a,above:n,below:t})},rewind:function(a){return e("rewind",{seg:a})},status:function(a,n,t){return e("status",{seg:a,above:n,below:t})},vert:function(a){return a===A?c:(A=a,e("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),e("log",{txt:a})},reset:function(){return e("reset")},selected:function(a){return e("selected",{segs:a})},chainStart:function(a){return e("chain_start",{seg:a})},chainRemoveHead:function(a,n){return e("chain_rem_head",{index:a,pt:n})},chainRemoveTail:function(a,n){return e("chain_rem_tail",{index:a,pt:n})},chainNew:function(a,n){return e("chain_new",{pt1:a,pt2:n})},chainMatch:function(a){return e("chain_match",{index:a})},chainClose:function(a){return e("chain_close",{index:a})},chainAddHead:function(a,n){return e("chain_add_head",{index:a,pt:n})},chainAddTail:function(a,n){return e("chain_add_tail",{index:a,pt:n})},chainConnect:function(a,n){return e("chain_con",{index1:a,index2:n})},chainReverse:function(a){return e("chain_rev",{index:a})},chainJoin:function(a,n){return e("chain_join",{index1:a,index2:n})},done:function(){return e("done")}},c}ne.exports=T},{}],256:[function(g,ne,ae){function T(c){typeof c!="number"&&(c=1e-10);var M={epsilon:function(A){return typeof A=="number"&&(c=A),c},pointAboveOrOnLine:function(A,e,a){var n=e[0],t=e[1],r=a[0],f=a[1],o=A[0],i=A[1];return(r-n)*(i-t)-(f-t)*(o-n)>=-c},pointBetween:function(A,e,a){var n=A[1]-e[1],t=a[0]-e[0],r=A[0]-e[0],f=a[1]-e[1],o=r*t+n*f;if(o<c)return!1;var i=t*t+f*f;return!(o-i>-c)},pointsSameX:function(A,e){return Math.abs(A[0]-e[0])<c},pointsSameY:function(A,e){return Math.abs(A[1]-e[1])<c},pointsSame:function(A,e){return M.pointsSameX(A,e)&&M.pointsSameY(A,e)},pointsCompare:function(A,e){return M.pointsSameX(A,e)?M.pointsSameY(A,e)?0:A[1]<e[1]?-1:1:A[0]<e[0]?-1:1},pointsCollinear:function(A,e,a){var n=A[0]-e[0],t=A[1]-e[1],r=e[0]-a[0],f=e[1]-a[1];return Math.abs(n*f-r*t)<c},linesIntersect:function(A,e,a,n){var t=e[0]-A[0],r=e[1]-A[1],f=n[0]-a[0],o=n[1]-a[1],i=t*o-r*f;if(Math.abs(i)<c)return!1;var p=A[0]-a[0],d=A[1]-a[1],y=(f*d-o*p)/i,v=(t*d-r*p)/i,x={alongA:0,alongB:0,pt:[A[0]+y*t,A[1]+y*r]};return y<=-c?x.alongA=-2:y<c?x.alongA=-1:y-1<=-c?x.alongA=0:y-1<c?x.alongA=1:x.alongA=2,v<=-c?x.alongB=-2:v<c?x.alongB=-1:v-1<=-c?x.alongB=0:v-1<c?x.alongB=1:x.alongB=2,x},pointInsideRegion:function(A,e){for(var a=A[0],n=A[1],t=e[e.length-1][0],r=e[e.length-1][1],f=!1,o=0;o<e.length;o++){var i=e[o][0],p=e[o][1];p-n>c!=r-n>c&&(t-i)*(n-p)/(r-p)+i-a>c&&(f=!f),t=i,r=p}return f}};return M}ne.exports=T},{}],257:[function(g,ne,ae){var T={toPolygon:function(c,M){function A(n){if(n.length<=0)return c.segments({inverted:!1,regions:[]});function t(o){var i=o.slice(0,o.length-1);return c.segments({inverted:!1,regions:[i]})}for(var r=t(n[0]),f=1;f<n.length;f++)r=c.selectDifference(c.combine(r,t(n[f])));return r}if(M.type==="Polygon")return c.polygon(A(M.coordinates));if(M.type==="MultiPolygon"){for(var e=c.segments({inverted:!1,regions:[]}),a=0;a<M.coordinates.length;a++)e=c.selectUnion(c.combine(e,A(M.coordinates[a])));return c.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(c,M,A){A=c.polygon(c.segments(A));function e(y,v){return M.pointInsideRegion([(y[0][0]+y[1][0])*.5,(y[0][1]+y[1][1])*.5],v)}function a(y){return{region:y,children:[]}}var n=a(null);function t(y,v){for(var x=0;x<y.children.length;x++){var l=y.children[x];if(e(v,l.region)){t(l,v);return}}for(var _=a(v),x=0;x<y.children.length;x++){var l=y.children[x];e(l.region,v)&&(_.children.push(l),y.children.splice(x,1),x--)}y.children.push(_)}for(var r=0;r<A.regions.length;r++){var f=A.regions[r];f.length<3||t(n,f)}function o(y,v){for(var x=0,l=y[y.length-1][0],_=y[y.length-1][1],s=[],w=0;w<y.length;w++){var b=y[w][0],h=y[w][1];s.push([b,h]),x+=h*l-b*_,l=b,_=h}var m=x<0;return m!==v&&s.reverse(),s.push([s[0][0],s[0][1]]),s}var i=[];function p(y){var v=[o(y.region,!1)];i.push(v);for(var x=0;x<y.children.length;x++)v.push(d(y.children[x]))}function d(y){for(var v=0;v<y.children.length;v++)p(y.children[v]);return o(y.region,!0)}for(var r=0;r<n.children.length;r++)p(n.children[r]);return i.length<=0?{type:"Polygon",coordinates:[]}:i.length==1?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}};ne.exports=T},{}],258:[function(g,ne,ae){var T=g("./linked-list");function c(M,A,e){function a(x,l){return{id:e?e.segmentId():-1,start:x,end:l,myFill:{above:null,below:null},otherFill:null}}function n(x,l,_){return{id:e?e.segmentId():-1,start:x,end:l,myFill:{above:_.myFill.above,below:_.myFill.below},otherFill:null}}var t=T.create();function r(x,l,_,s,w,b){var h=A.pointsCompare(l,w);return h!==0?h:A.pointsSame(_,b)?0:x!==s?x?1:-1:A.pointAboveOrOnLine(_,s?w:b,s?b:w)?1:-1}function f(x,l){t.insertBefore(x,function(_){var s=r(x.isStart,x.pt,l,_.isStart,_.pt,_.other.pt);return s<0})}function o(x,l){var _=T.node({isStart:!0,pt:x.start,seg:x,primary:l,other:null,status:null});return f(_,x.end),_}function i(x,l,_){var s=T.node({isStart:!1,pt:l.end,seg:l,primary:_,other:x,status:null});x.other=s,f(s,x.pt)}function p(x,l){var _=o(x,l);return i(_,x,l),_}function d(x,l){e&&e.segmentChop(x.seg,l),x.other.remove(),x.seg.end=l,x.other.pt=l,f(x.other,x.pt)}function y(x,l){var _=n(l,x.seg.end,x.seg);return d(x,l),p(_,x.primary)}function v(x,l){var _=T.create();function s(R,B){var F=R.seg.start,V=R.seg.end,Y=B.seg.start,K=B.seg.end;return A.pointsCollinear(F,Y,K)?A.pointsCollinear(V,Y,K)||A.pointAboveOrOnLine(V,Y,K)?1:-1:A.pointAboveOrOnLine(F,Y,K)?1:-1}function w(R){return _.findTransition(function(B){var F=s(R,B.ev);return F>0})}function b(R,B){var F=R.seg,V=B.seg,Y=F.start,K=F.end,J=V.start,G=V.end;e&&e.checkIntersection(F,V);var Z=A.linesIntersect(Y,K,J,G);if(Z===!1){if(!A.pointsCollinear(Y,K,J)||A.pointsSame(Y,G)||A.pointsSame(K,J))return!1;var re=A.pointsSame(Y,J),se=A.pointsSame(K,G);if(re&&se)return B;var oe=!re&&A.pointBetween(Y,J,G),N=!se&&A.pointBetween(K,J,G);if(re)return N?y(B,K):y(R,G),B;oe&&(se||(N?y(B,K):y(R,G)),y(B,Y))}else Z.alongA===0&&(Z.alongB===-1?y(R,J):Z.alongB===0?y(R,Z.pt):Z.alongB===1&&y(R,G)),Z.alongB===0&&(Z.alongA===-1?y(B,Y):Z.alongA===0?y(B,Z.pt):Z.alongA===1&&y(B,K));return!1}for(var h=[];!t.isEmpty();){var m=t.getHead();if(e&&e.vert(m.pt[0]),m.isStart){let R=function(){if(L){var B=b(m,L);if(B)return B}return S?b(m,S):!1};e&&e.segmentNew(m.seg,m.primary);var u=w(m),L=u.before?u.before.ev:null,S=u.after?u.after.ev:null;e&&e.tempStatus(m.seg,L?L.seg:!1,S?S.seg:!1);var k=R();if(k){if(M){var P;m.seg.myFill.below===null?P=!0:P=m.seg.myFill.above!==m.seg.myFill.below,P&&(k.seg.myFill.above=!k.seg.myFill.above)}else k.seg.otherFill=m.seg.myFill;e&&e.segmentUpdate(k.seg),m.other.remove(),m.remove()}if(t.getHead()!==m){e&&e.rewind(m.seg);continue}if(M){var P;m.seg.myFill.below===null?P=!0:P=m.seg.myFill.above!==m.seg.myFill.below,S?m.seg.myFill.below=S.seg.myFill.above:m.seg.myFill.below=x,P?m.seg.myFill.above=!m.seg.myFill.below:m.seg.myFill.above=m.seg.myFill.below}else if(m.seg.otherFill===null){var z;S?m.primary===S.primary?z=S.seg.otherFill.above:z=S.seg.myFill.above:z=m.primary?l:x,m.seg.otherFill={above:z,below:z}}e&&e.status(m.seg,L?L.seg:!1,S?S.seg:!1),m.other.status=u.insert(T.node({ev:m}))}else{var I=m.status;if(I===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(_.exists(I.prev)&&_.exists(I.next)&&b(I.prev.ev,I.next.ev),e&&e.statusRemove(I.ev.seg),I.remove(),!m.primary){var D=m.seg.myFill;m.seg.myFill=m.seg.otherFill,m.seg.otherFill=D}h.push(m.seg)}t.getHead().remove()}return e&&e.done(),h}return M?{addRegion:function(x){for(var l,_=x[x.length-1],s=0;s<x.length;s++){l=_,_=x[s];var w=A.pointsCompare(l,_);w!==0&&p(a(w<0?l:_,w<0?_:l),!0)}},calculate:function(x){return v(x,!1)}}:{calculate:function(x,l,_,s){return x.forEach(function(w){p(n(w.start,w.end,w),!0)}),_.forEach(function(w){p(n(w.start,w.end,w),!1)}),v(l,s)}}}ne.exports=c},{"./linked-list":259}],259:[function(g,ne,ae){var T={create:function(){var c={root:{root:!0,next:null},exists:function(M){return!(M===null||M===c.root)},isEmpty:function(){return c.root.next===null},getHead:function(){return c.root.next},insertBefore:function(M,A){for(var e=c.root,a=c.root.next;a!==null;){if(A(a)){M.prev=a.prev,M.next=a,a.prev.next=M,a.prev=M;return}e=a,a=a.next}e.next=M,M.prev=e,M.next=null},findTransition:function(M){for(var A=c.root,e=c.root.next;e!==null&&!M(e);)A=e,e=e.next;return{before:A===c.root?null:A,after:e,insert:function(a){return a.prev=A,a.next=e,A.next=a,e!==null&&(e.prev=a),a}}}};return c},node:function(c){return c.prev=null,c.next=null,c.remove=function(){c.prev.next=c.next,c.next&&(c.next.prev=c.prev),c.prev=null,c.next=null},c}};ne.exports=T},{}],260:[function(g,ne,ae){function T(c,M,A){var e=[],a=[];return c.forEach(function(n){var t=n.start,r=n.end;if(M.pointsSame(t,r)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}A&&A.chainStart(n);var f={index:0,matches_head:!1,matches_pt1:!1},o={index:0,matches_head:!1,matches_pt1:!1},i=f;function p(z,I,D){return i.index=z,i.matches_head=I,i.matches_pt1=D,i===f?(i=o,!1):(i=null,!0)}for(var d=0;d<e.length;d++){var y=e[d],v=y[0];y[1];var x=y[y.length-1];if(y[y.length-2],M.pointsSame(v,t)){if(p(d,!0,!0))break}else if(M.pointsSame(v,r)){if(p(d,!0,!1))break}else if(M.pointsSame(x,t)){if(p(d,!1,!0))break}else if(M.pointsSame(x,r)&&p(d,!1,!1))break}if(i===f){e.push([t,r]),A&&A.chainNew(t,r);return}if(i===o){A&&A.chainMatch(f.index);var l=f.index,_=f.matches_pt1?r:t,s=f.matches_head,y=e[l],w=s?y[0]:y[y.length-1],b=s?y[1]:y[y.length-2],h=s?y[y.length-1]:y[0],m=s?y[y.length-2]:y[1];if(M.pointsCollinear(b,w,_)&&(s?(A&&A.chainRemoveHead(f.index,_),y.shift()):(A&&A.chainRemoveTail(f.index,_),y.pop()),w=b),M.pointsSame(h,_)){e.splice(l,1),M.pointsCollinear(m,h,w)&&(s?(A&&A.chainRemoveTail(f.index,w),y.pop()):(A&&A.chainRemoveHead(f.index,w),y.shift())),A&&A.chainClose(f.index),a.push(y);return}s?(A&&A.chainAddHead(f.index,_),y.unshift(_)):(A&&A.chainAddTail(f.index,_),y.push(_));return}function u(z){A&&A.chainReverse(z),e[z].reverse()}function L(z,I){var D=e[z],R=e[I],B=D[D.length-1],F=D[D.length-2],V=R[0],Y=R[1];M.pointsCollinear(F,B,V)&&(A&&A.chainRemoveTail(z,B),D.pop(),B=F),M.pointsCollinear(B,V,Y)&&(A&&A.chainRemoveHead(I,V),R.shift()),A&&A.chainJoin(z,I),e[z]=D.concat(R),e.splice(I,1)}var S=f.index,k=o.index;A&&A.chainConnect(S,k);var P=e[S].length<e[k].length;f.matches_head?o.matches_head?P?(u(S),L(S,k)):(u(k),L(k,S)):L(k,S):o.matches_head?L(S,k):P?(u(S),L(k,S)):(u(k),L(S,k))}),a}ne.exports=T},{}],261:[function(g,ne,ae){function T(M,A,e){var a=[];return M.forEach(function(n){var t=(n.myFill.above?8:0)+(n.myFill.below?4:0)+(n.otherFill&&n.otherFill.above?2:0)+(n.otherFill&&n.otherFill.below?1:0);A[t]!==0&&a.push({id:e?e.segmentId():-1,start:n.start,end:n.end,myFill:{above:A[t]===1,below:A[t]===2},otherFill:null})}),e&&e.selected(a),a}var c={union:function(M,A){return T(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],A)},intersect:function(M,A){return T(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],A)},difference:function(M,A){return T(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],A)},differenceRev:function(M,A){return T(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],A)},xor:function(M,A){return T(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],A)}};ne.exports=c},{}],262:[function(g,ne,ae){var T=g("stream").Transform,c=g("stream-parser");function M(){T.call(this,{readableObjectMode:!0})}M.prototype=Object.create(T.prototype),M.prototype.constructor=M,c(M.prototype),ae.ParserStream=M,ae.sliceEq=function(e,a,n){for(var t=a,r=0;r<n.length;)if(e[t++]!==n[r++])return!1;return!0},ae.str2arr=function(e,a){var n=[],t=0;if(a&&a==="hex")for(;t<e.length;)n.push(parseInt(e.slice(t,t+2),16)),t+=2;else for(;t<e.length;t++)n.push(e.charCodeAt(t)&255);return n},ae.readUInt16LE=function(e,a){return e[a]|e[a+1]<<8},ae.readUInt16BE=function(e,a){return e[a+1]|e[a]<<8},ae.readUInt32LE=function(e,a){return e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]*16777216},ae.readUInt32BE=function(e,a){return e[a+3]|e[a+2]<<8|e[a+1]<<16|e[a]*16777216};function A(e,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=e,a&&(this.code=a),n&&(this.statusCode=n)}A.prototype=Object.create(Error.prototype),A.prototype.constructor=A,ae.ProbeError=A},{stream:285,"stream-parser":301}],263:[function(g,ne,ae){function T(A,e){var a=new Error(A);return a.code=e,a}function c(A){try{return decodeURIComponent(escape(A))}catch{return A}}function M(A,e,a){this.input=A.subarray(e,a),this.start=e;var n=String.fromCharCode.apply(null,this.input.subarray(0,4));if(n!=="II*\0"&&n!=="MM\0*")throw T("invalid TIFF signature","EBADDATA");this.big_endian=n[0]==="M"}M.prototype.each=function(A){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var a=this.ifds_to_read.shift();!a.offset||this.scan_ifd(a.id,a.offset,A)}},M.prototype.read_uint16=function(A){var e=this.input;if(A+2>e.length)throw T("unexpected EOF","EBADDATA");return this.big_endian?e[A]*256+e[A+1]:e[A]+e[A+1]*256},M.prototype.read_uint32=function(A){var e=this.input;if(A+4>e.length)throw T("unexpected EOF","EBADDATA");return this.big_endian?e[A]*16777216+e[A+1]*65536+e[A+2]*256+e[A+3]:e[A]+e[A+1]*256+e[A+2]*65536+e[A+3]*16777216},M.prototype.is_subifd_link=function(A,e){return A===0&&e===34665||A===0&&e===34853||A===34665&&e===40965},M.prototype.exif_format_length=function(A){switch(A){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(A,e){var a;switch(A){case 1:case 2:return a=this.input[e],a;case 6:return a=this.input[e],a|(a&128)*33554430;case 3:return a=this.read_uint16(e),a;case 8:return a=this.read_uint16(e),a|(a&32768)*131070;case 4:return a=this.read_uint32(e),a;case 9:return a=this.read_uint32(e),a|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},M.prototype.scan_ifd=function(A,e,a){var n=this.read_uint16(e);e+=2;for(var t=0;t<n;t++){var r=this.read_uint16(e),f=this.read_uint16(e+2),o=this.read_uint32(e+4),i=this.exif_format_length(f),p=o*i,d=p<=4?e+8:this.read_uint32(e+8),y=!1;if(d+p>this.input.length)throw T("unexpected EOF","EBADDATA");for(var v=[],x=d,l=0;l<o;l++,x+=i){var _=this.exif_format_read(f,x);if(_===null){v=null;break}v.push(_)}Array.isArray(v)&&f===2&&(v=c(String.fromCharCode.apply(null,v)),v&&v[v.length-1]==="\0"&&(v=v.slice(0,-1))),this.is_subifd_link(A,r)&&Array.isArray(v)&&Number.isInteger(v[0])&&v[0]>0&&(this.ifds_to_read.push({id:r,offset:v[0]}),y=!0);var s={is_big_endian:this.big_endian,ifd:A,tag:r,format:f,count:o,entry_offset:e+this.start,data_length:p,data_offset:d+this.start,value:v,is_subifd_link:y};if(a(s)===!1){this.aborted=!0;return}e+=12}A===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},ne.exports.ExifParser=M,ne.exports.get_orientation=function(A){var e=0;try{return new M(A,0,A.length).each(function(a){if(a.ifd===0&&a.tag===274&&Array.isArray(a.value))return e=a.value[0],!1}),e}catch{return-1}}},{}],264:[function(g,ne,ae){var T=g("./common").readUInt16BE,c=g("./common").readUInt32BE;function M(o,i){if(o.length<4+i)return null;var p=c(o,i);return o.length<p+i||p<8?null:{boxtype:String.fromCharCode.apply(null,o.slice(i+4,i+8)),data:o.slice(i+8,i+p),end:i+p}}ne.exports.unbox=M;function A(o,i){for(var p=0;;){var d=M(o,p);if(!d)break;switch(d.boxtype){case"ispe":i.sizes.push({width:c(d.data,4),height:c(d.data,8)});break;case"irot":i.transforms.push({type:"irot",value:d.data[0]&3});break;case"imir":i.transforms.push({type:"imir",value:d.data[0]&1});break}p=d.end}}function e(o,i,p){for(var d=0,y=0;y<p;y++)d=d*256+(o[i+y]||0);return d}function a(o,i){for(var p=o[4]>>4&15,d=o[4]&15,y=o[5]>>4&15,v=T(o,6),x=8,l=0;l<v;l++){var _=T(o,x);x+=2;var s=T(o,x);x+=2;var w=e(o,x,y);x+=y;var b=T(o,x);if(x+=2,s===0&&b===1){var h=e(o,x,p),m=e(o,x+p,d);i.item_loc[_]={length:m,offset:h+w}}x+=b*(p+d)}}function n(o,i){for(var p=T(o,4),d=6,y=0;y<p;y++){var v=M(o,d);if(!v)break;if(v.boxtype==="infe"){for(var x=T(v.data,4),l="",_=8;_<v.data.length&&v.data[_];_++)l+=String.fromCharCode(v.data[_]);i.item_inf[l]=x}d=v.end}}function t(o,i){for(var p=0;;){var d=M(o,p);if(!d)break;d.boxtype==="ipco"&&A(d.data,i),p=d.end}}function r(o,i){for(var p=4;;){var d=M(o,p);if(!d)break;d.boxtype==="iprp"&&t(d.data,i),d.boxtype==="iloc"&&a(d.data,i),d.boxtype==="iinf"&&n(d.data,i),p=d.end}}function f(o){var i=o.reduce(function(y,v){return y.width>v.width||y.width===v.width&&y.height>v.height?y:v}),p=o.reduce(function(y,v){return y.height>v.height||y.height===v.height&&y.width>v.width?y:v}),d;return i.width>p.height||i.width===p.height&&i.height>p.width?d=i:d=p,d}ne.exports.readSizeFromMeta=function(o){var i={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(r(o,i),!!i.sizes.length){var p=f(i.sizes),d=1;i.transforms.forEach(function(v){var x={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},l={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(v.type==="imir"&&(v.value===0?d=l[d]:(d=l[d],d=x[d],d=x[d])),v.type==="irot")for(var _=0;_<v.value;_++)d=x[d]});var y=null;return i.item_inf.Exif&&(y=i.item_loc[i.item_inf.Exif]),{width:p.width,height:p.height,orientation:i.transforms.length?d:null,variants:i.sizes,exif_location:y}}},ne.exports.getMimeType=function(o){var i=String.fromCharCode.apply(null,o.slice(0,4)),p={};p[i]=!0;for(var d=8;d<o.length;d+=4)p[String.fromCharCode.apply(null,o.slice(d,d+4))]=!0;if(!(!p.mif1&&!p.msf1&&!p.miaf))return i==="avif"||i==="avis"||i==="avio"?{type:"avif",mime:"image/avif"}:i==="heic"||i==="heix"?{type:"heic",mime:"image/heic"}:i==="hevc"||i==="hevx"?{type:"heic",mime:"image/heic-sequence"}:p.avif||p.avis?{type:"avif",mime:"image/avif"}:p.heic||p.heix||p.hevc||p.hevx||p.heis?p.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(g,ne,ae){var T=g("../common").str2arr,c=g("../common").sliceEq,M=g("../common").readUInt32BE,A=g("../miaf_utils"),e=g("../exif_utils"),a=T("ftyp");ne.exports=function(n){if(!!c(n,4,a)){var t=A.unbox(n,0);if(!!t){var r=A.getMimeType(t.data);if(!!r){for(var f,o=t.end;;){var i=A.unbox(n,o);if(!i)break;if(o=i.end,i.boxtype==="mdat")return;if(i.boxtype==="meta"){f=i.data;break}}if(!!f){var p=A.readSizeFromMeta(f);if(!!p){var d={width:p.width,height:p.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(p.variants.length>1&&(d.variants=p.variants),p.orientation&&(d.orientation=p.orientation),p.exif_location&&p.exif_location.offset+p.exif_location.length<=n.length){var y=M(n,p.exif_location.offset),v=n.slice(p.exif_location.offset+y+4,p.exif_location.offset+p.exif_location.length),x=e.get_orientation(v);x>0&&(d.orientation=x)}return d}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(g,ne,ae){var T=g("../common").str2arr,c=g("../common").sliceEq,M=g("../common").readUInt16LE,A=T("BM");ne.exports=function(e){if(!(e.length<26)&&!!c(e,0,A))return{width:M(e,18),height:M(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(g,ne,ae){var T=g("../common").str2arr,c=g("../common").sliceEq,M=g("../common").readUInt16LE,A=T("GIF87a"),e=T("GIF89a");ne.exports=function(a){if(!(a.length<10)&&!(!c(a,0,A)&&!c(a,0,e)))return{width:M(a,6),height:M(a,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(g,ne,ae){var T=g("../common").readUInt16LE,c=0,M=1,A=16;ne.exports=function(e){var a=T(e,0),n=T(e,2),t=T(e,4);if(!(a!==c||n!==M||!t)){for(var r=[],f={width:0,height:0},o=0;o<t;o++){var i=e[6+A*o]||256,p=e[6+A*o+1]||256,d={width:i,height:p};r.push(d),(i>f.width||p>f.height)&&(f=d)}return{width:f.width,height:f.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(g,ne,ae){var T=g("../common").readUInt16BE,c=g("../common").str2arr,M=g("../common").sliceEq,A=g("../exif_utils"),e=c("Exif\0\0");ne.exports=function(a){if(!(a.length<2)&&!(a[0]!==255||a[1]!==216||a[2]!==255))for(var n=2;;){for(;;){if(a.length-n<2)return;if(a[n++]===255)break}for(var t=a[n++],r;t===255;)t=a[n++];if(208<=t&&t<=217||t===1)r=0;else if(192<=t&&t<=254){if(a.length-n<2)return;r=T(a,n)-2,n+=2}else return;if(t===217||t===218)return;var f;if(t===225&&r>=10&&M(a,n,e)&&(f=A.get_orientation(a.slice(n+6,n+r))),r>=5&&192<=t&&t<=207&&t!==196&&t!==200&&t!==204){if(a.length-n<r)return;var o={width:T(a,n+3),height:T(a,n+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return f>0&&(o.orientation=f),o}n+=r}}},{"../common":262,"../exif_utils":263}],270:[function(g,ne,ae){var T=g("../common").str2arr,c=g("../common").sliceEq,M=g("../common").readUInt32BE,A=T(`\x89PNG\r

`),e=T("IHDR");ne.exports=function(a){if(!(a.length<24)&&!!c(a,0,A)&&!!c(a,12,e))return{width:M(a,16),height:M(a,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(g,ne,ae){var T=g("../common").str2arr,c=g("../common").sliceEq,M=g("../common").readUInt32BE,A=T("8BPS\0");ne.exports=function(e){if(!(e.length<6+16)&&!!c(e,0,A))return{width:M(e,6+12),height:M(e,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(g,ne,ae){function T(i){return i===32||i===9||i===13||i===10}function c(i){return typeof i=="number"&&isFinite(i)&&i>0}function M(i){var p=0,d=i.length;for(i[0]===239&&i[1]===187&&i[2]===191&&(p=3);p<d&&T(i[p]);)p++;return p===d?!1:i[p]===60}var A=/<[-_.:a-zA-Z0-9][^>]*>/,e=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,a=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,n=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,t=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,r=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function f(i){var p=i.match(a),d=i.match(n),y=i.match(t);return{width:p&&(p[1]||p[2]),height:d&&(d[1]||d[2]),viewbox:y&&(y[1]||y[2])}}function o(i){return r.test(i)?i.match(r)[0]:"px"}ne.exports=function(i){if(!!M(i)){for(var p="",d=0;d<i.length;d++)p+=String.fromCharCode(i[d]);var y=(p.match(A)||[""])[0];if(!!e.test(y)){var v=f(y),x=parseFloat(v.width),l=parseFloat(v.height);if(v.width&&v.height)return!c(x)||!c(l)?void 0:{width:x,height:l,type:"svg",mime:"image/svg+xml",wUnits:o(v.width),hUnits:o(v.height)};var _=(v.viewbox||"").split(" "),s={width:_[2],height:_[3]},w=parseFloat(s.width),b=parseFloat(s.height);if(!(!c(w)||!c(b))&&o(s.width)===o(s.height)){var h=w/b;return v.width?c(x)?{width:x,height:x/h,type:"svg",mime:"image/svg+xml",wUnits:o(v.width),hUnits:o(v.width)}:void 0:v.height?c(l)?{width:l*h,height:l,type:"svg",mime:"image/svg+xml",wUnits:o(v.height),hUnits:o(v.height)}:void 0:{width:w,height:b,type:"svg",mime:"image/svg+xml",wUnits:o(s.width),hUnits:o(s.height)}}}}}},{}],273:[function(g,ne,ae){var T=g("../common").str2arr,c=g("../common").sliceEq,M=g("../common").readUInt16LE,A=g("../common").readUInt16BE,e=g("../common").readUInt32LE,a=g("../common").readUInt32BE,n=T("II*\0"),t=T("MM\0*");function r(i,p,d){return d?A(i,p):M(i,p)}function f(i,p,d){return d?a(i,p):e(i,p)}function o(i,p,d){var y=r(i,p+2,d),v=f(i,p+4,d);return v!==1||y!==3&&y!==4?null:y===3?r(i,p+8,d):f(i,p+8,d)}ne.exports=function(i){if(!(i.length<8)&&!(!c(i,0,n)&&!c(i,0,t))){var p=i[0]===77,d=f(i,4,p)-8;if(!(d<0)){var y=d+8;if(!(i.length-y<2)){var v=r(i,y+0,p)*12;if(!(v<=0)&&(y+=2,!(i.length-y<v))){var x,l,_,s;for(x=0;x<v;x+=12)s=r(i,y+x,p),s===256?l=o(i,y+x,p):s===257&&(_=o(i,y+x,p));if(l&&_)return{width:l,height:_,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":262}],274:[function(g,ne,ae){var T=g("../common").str2arr,c=g("../common").sliceEq,M=g("../common").readUInt16LE,A=g("../common").readUInt32LE,e=g("../exif_utils"),a=T("RIFF"),n=T("WEBP");function t(o,i){if(!(o[i+3]!==157||o[i+4]!==1||o[i+5]!==42))return{width:M(o,i+6)&16383,height:M(o,i+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(o,i){if(o[i]===47){var p=A(o,i+1);return{width:(p&16383)+1,height:(p>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function f(o,i){return{width:(o[i+6]<<16|o[i+5]<<8|o[i+4])+1,height:(o[i+9]<<i|o[i+8]<<8|o[i+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}ne.exports=function(o){if(!(o.length<16)&&!(!c(o,0,a)&&!c(o,8,n))){var i=12,p=null,d=0,y=A(o,4)+8;if(!(y>o.length)){for(;i+8<y;){if(o[i]===0){i++;continue}var v=String.fromCharCode.apply(null,o.slice(i,i+4)),x=A(o,i+4);v==="VP8 "&&x>=10?p=p||t(o,i+8):v==="VP8L"&&x>=9?p=p||r(o,i+8):v==="VP8X"&&x>=10?p=p||f(o,i+8):v==="EXIF"&&(d=e.get_orientation(o.slice(i+8,i+8+x)),i=1/0),i+=8+x}if(!!p)return d>0&&(p.orientation=d),p}}}},{"../common":262,"../exif_utils":263}],275:[function(g,ne,ae){ne.exports={avif:g("./parse_sync/avif"),bmp:g("./parse_sync/bmp"),gif:g("./parse_sync/gif"),ico:g("./parse_sync/ico"),jpeg:g("./parse_sync/jpeg"),png:g("./parse_sync/png"),psd:g("./parse_sync/psd"),svg:g("./parse_sync/svg"),tiff:g("./parse_sync/tiff"),webp:g("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(g,ne,ae){var T=g("./lib/parsers_sync");function c(M){for(var A=Object.keys(T),e=0;e<A.length;e++){var a=T[A[e]](M);if(a)return a}return null}ne.exports=function(A){return c(A)},ne.exports.parsers=T},{"./lib/parsers_sync":275}],277:[function(g,ne,ae){var T=ne.exports={},c,M;function A(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?c=setTimeout:c=A}catch{c=A}try{typeof clearTimeout=="function"?M=clearTimeout:M=e}catch{M=e}})();function a(v){if(c===setTimeout)return setTimeout(v,0);if((c===A||!c)&&setTimeout)return c=setTimeout,setTimeout(v,0);try{return c(v,0)}catch{try{return c.call(null,v,0)}catch{return c.call(this,v,0)}}}function n(v){if(M===clearTimeout)return clearTimeout(v);if((M===e||!M)&&clearTimeout)return M=clearTimeout,clearTimeout(v);try{return M(v)}catch{try{return M.call(null,v)}catch{return M.call(this,v)}}}var t=[],r=!1,f,o=-1;function i(){!r||!f||(r=!1,f.length?t=f.concat(t):o=-1,t.length&&p())}function p(){if(!r){var v=a(i);r=!0;for(var x=t.length;x;){for(f=t,t=[];++o<x;)f&&f[o].run();o=-1,x=t.length}f=null,r=!1,n(v)}}T.nextTick=function(v){var x=new Array(arguments.length-1);if(arguments.length>1)for(var l=1;l<arguments.length;l++)x[l-1]=arguments[l];t.push(new d(v,x)),t.length===1&&!r&&a(p)};function d(v,x){this.fun=v,this.array=x}d.prototype.run=function(){this.fun.apply(null,this.array)},T.title="browser",T.browser=!0,T.env={},T.argv=[],T.version="",T.versions={};function y(){}T.on=y,T.addListener=y,T.once=y,T.off=y,T.removeListener=y,T.removeAllListeners=y,T.emit=y,T.prependListener=y,T.prependOnceListener=y,T.listeners=function(v){return[]},T.binding=function(v){throw new Error("process.binding is not supported")},T.cwd=function(){return"/"},T.chdir=function(v){throw new Error("process.chdir is not supported")},T.umask=function(){return 0}},{}],278:[function(g,ne,ae){(function(T){(function(){for(var c=g("performance-now"),M=typeof window=="undefined"?T:window,A=["moz","webkit"],e="AnimationFrame",a=M["request"+e],n=M["cancel"+e]||M["cancelRequest"+e],t=0;!a&&t<A.length;t++)a=M[A[t]+"Request"+e],n=M[A[t]+"Cancel"+e]||M[A[t]+"CancelRequest"+e];if(!a||!n){var r=0,f=0,o=[],i=1e3/60;a=function(p){if(o.length===0){var d=c(),y=Math.max(0,i-(d-r));r=y+d,setTimeout(function(){var v=o.slice(0);o.length=0;for(var x=0;x<v.length;x++)if(!v[x].cancelled)try{v[x].callback(r)}catch(l){setTimeout(function(){throw l},0)}},Math.round(y))}return o.push({handle:++f,callback:p,cancelled:!1}),f},n=function(p){for(var d=0;d<o.length;d++)o[d].handle===p&&(o[d].cancelled=!0)}}ne.exports=function(p){return a.call(M,p)},ne.exports.cancel=function(){n.apply(M,arguments)},ne.exports.polyfill=function(p){p||(p=M),p.requestAnimationFrame=a,p.cancelAnimationFrame=n}}).call(this)}).call(this,typeof To!="undefined"?To:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"performance-now":252}],279:[function(g,ne,ae){var T=g("array-bounds"),c=g("color-normalize"),M=g("update-diff"),A=g("pick-by-alias"),e=g("object-assign"),a=g("flatten-vertex-data"),n=g("to-float32"),t=n.float32,r=n.fract32;ne.exports=o;var f=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function o(i,p){if(typeof i=="function"?(p||(p={}),p.regl=i):p=i,p.length&&(p.positions=p),i=p.regl,!i.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var d=i._gl,y,v,x,l,_,s,w={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},b=[];return l=i.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),v=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),_=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),s=i.buffer({usage:"static",type:"float",data:f}),L(p),y=i({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:i.prop("range"),lineWidth:i.prop("lineWidth"),capSize:i.prop("capSize"),opacity:i.prop("opacity"),scale:i.prop("scale"),translate:i.prop("translate"),scaleFract:i.prop("scaleFract"),translateFract:i.prop("translateFract"),viewport:function(k,P){return[P.viewport.x,P.viewport.y,k.viewportWidth,k.viewportHeight]}},attributes:{color:{buffer:l,offset:function(k,P){return P.offset*4},divisor:1},position:{buffer:v,offset:function(k,P){return P.offset*8},divisor:1},positionFract:{buffer:x,offset:function(k,P){return P.offset*8},divisor:1},error:{buffer:_,offset:function(k,P){return P.offset*16},divisor:1},direction:{buffer:s,stride:24,offset:0},lineOffset:{buffer:s,stride:24,offset:8},capOffset:{buffer:s,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:i.prop("viewport")},viewport:i.prop("viewport"),stencil:!1,instances:i.prop("count"),count:f.length}),e(h,{update:L,draw:m,destroy:S,regl:i,gl:d,canvas:d.canvas,groups:b}),h;function h(k){k?L(k):k===null&&S(),m()}function m(k){if(typeof k=="number")return u(k);k&&!Array.isArray(k)&&(k=[k]),i._refresh(),b.forEach(function(P,z){if(!!P){if(k&&(k[z]?P.draw=!0:P.draw=!1),!P.draw){P.draw=!0;return}u(z)}})}function u(k){typeof k=="number"&&(k=b[k]),k!=null&&(!(k&&k.count&&k.color&&k.opacity&&k.positions&&k.positions.length>1)||(k.scaleRatio=[k.scale[0]*k.viewport.width,k.scale[1]*k.viewport.height],y(k),k.after&&k.after(k)))}function L(k){if(!!k){k.length!=null?typeof k[0]=="number"&&(k=[{positions:k}]):Array.isArray(k)||(k=[k]);var P=0,z=0;if(h.groups=b=k.map(function(Y,K){var J=b[K];if(Y)typeof Y=="function"?Y={after:Y}:typeof Y[0]=="number"&&(Y={positions:Y});else return J;return Y=A(Y,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),J||(b[K]=J={id:K,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},Y=e({},w,Y)),M(J,Y,[{lineWidth:function(G){return+G*.5},capSize:function(G){return+G*.5},opacity:parseFloat,errors:function(G){return G=a(G),z+=G.length,G},positions:function(G,Z){return G=a(G,"float64"),Z.count=Math.floor(G.length/2),Z.bounds=T(G,2),Z.offset=P,P+=Z.count,G}},{color:function(G,Z){var re=Z.count;if(G||(G="transparent"),!Array.isArray(G)||typeof G[0]=="number"){var se=G;G=Array(re);for(var oe=0;oe<re;oe++)G[oe]=se}if(G.length<re)throw Error("Not enough colors");for(var N=new Uint8Array(re*4),U=0;U<re;U++){var q=c(G[U],"uint8");N.set(q,U*4)}return N},range:function(G,Z,re){var se=Z.bounds;return G||(G=se),Z.scale=[1/(G[2]-G[0]),1/(G[3]-G[1])],Z.translate=[-G[0],-G[1]],Z.scaleFract=r(Z.scale),Z.translateFract=r(Z.translate),G},viewport:function(G){var Z;return Array.isArray(G)?Z={x:G[0],y:G[1],width:G[2]-G[0],height:G[3]-G[1]}:G?(Z={x:G.x||G.left||0,y:G.y||G.top||0},G.right?Z.width=G.right-Z.x:Z.width=G.w||G.width||0,G.bottom?Z.height=G.bottom-Z.y:Z.height=G.h||G.height||0):Z={x:0,y:0,width:d.drawingBufferWidth,height:d.drawingBufferHeight},Z}}]),J}),P||z){var I=b.reduce(function(Y,K,J){return Y+(K?K.count:0)},0),D=new Float64Array(I*2),R=new Uint8Array(I*4),B=new Float32Array(I*4);b.forEach(function(Y,K){if(!!Y){var J=Y.positions,G=Y.count,Z=Y.offset,re=Y.color,se=Y.errors;!G||(R.set(re,Z*4),B.set(se,Z*4),D.set(J,Z*2))}});var F=t(D);v(F);var V=r(D,F);x(V),l(R),_(B)}}}function S(){v.destroy(),x.destroy(),l.destroy(),_.destroy(),s.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(g,ne,ae){var T=g("color-normalize"),c=g("array-bounds"),M=g("object-assign"),A=g("glslify"),e=g("pick-by-alias"),a=g("flatten-vertex-data"),n=g("earcut"),t=g("array-normalize"),r=g("to-float32"),f=r.float32,o=r.fract32,i=g("es6-weak-map"),p=g("parse-rect"),d=g("array-find-index");ne.exports=y;function y(v,x){if(!(this instanceof y))return new y(v,x);if(typeof v=="function"?(x||(x={}),x.regl=v):x=v,x.length&&(x.positions=x),v=x.regl,!v.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=v._gl,this.regl=v,this.passes=[],this.shaders=y.shaders.has(v)?y.shaders.get(v):y.shaders.set(v,y.createShaders(v)).get(v),this.update(x)}y.dashMult=2,y.maxPatternLength=256,y.precisionThreshold=3e6,y.maxPoints=1e4,y.maxLines=2048,y.shaders=new i,y.createShaders=function(v){var x=v.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),l={primitive:"triangle strip",instances:v.prop("count"),count:4,offset:0,uniforms:{miterMode:function(b,h){return h.join==="round"?2:1},miterLimit:v.prop("miterLimit"),scale:v.prop("scale"),scaleFract:v.prop("scaleFract"),translateFract:v.prop("translateFract"),translate:v.prop("translate"),thickness:v.prop("thickness"),dashTexture:v.prop("dashTexture"),opacity:v.prop("opacity"),pixelRatio:v.context("pixelRatio"),id:v.prop("id"),dashLength:v.prop("dashLength"),viewport:function(b,h){return[h.viewport.x,h.viewport.y,b.viewportWidth,b.viewportHeight]},depth:v.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(b,h){return!h.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:v.prop("viewport")},viewport:v.prop("viewport")},_=v(M({vert:A([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:A([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:v.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},l)),s;try{s=v(M({cull:{enable:!0,face:"back"},vert:A([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:A([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aColor:{buffer:v.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:v.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},l))}catch{s=_}var w=v({primitive:"triangle",elements:function(b,h){return h.triangles},offset:0,vert:A([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:A([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:v.prop("scale"),color:v.prop("fill"),scaleFract:v.prop("scaleFract"),translateFract:v.prop("translateFract"),translate:v.prop("translate"),opacity:v.prop("opacity"),pixelRatio:v.context("pixelRatio"),id:v.prop("id"),viewport:function(b,h){return[h.viewport.x,h.viewport.y,b.viewportWidth,b.viewportHeight]}},attributes:{position:{buffer:v.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:8}},blend:l.blend,depth:{enable:!1},scissor:l.scissor,stencil:l.stencil,viewport:l.viewport});return{fill:w,rect:_,miter:s}},y.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},y.prototype.render=function(){for(var v,x=[],l=arguments.length;l--;)x[l]=arguments[l];x.length&&(v=this).update.apply(v,x),this.draw()},y.prototype.draw=function(){for(var v=this,x=[],l=arguments.length;l--;)x[l]=arguments[l];return(x.length?x:this.passes).forEach(function(_,s){var w;if(_&&Array.isArray(_))return(w=v).draw.apply(w,_);typeof _=="number"&&(_=v.passes[_]),!!(_&&_.count>1&&_.opacity)&&(v.regl._refresh(),_.fill&&_.triangles&&_.triangles.length>2&&v.shaders.fill(_),!!_.thickness&&(_.scale[0]*_.viewport.width>y.precisionThreshold||_.scale[1]*_.viewport.height>y.precisionThreshold||_.join==="rect"||!_.join&&(_.thickness<=2||_.count>=y.maxPoints)?v.shaders.rect(_):v.shaders.miter(_)))}),this},y.prototype.update=function(v){var x=this;if(!!v){v.length!=null?typeof v[0]=="number"&&(v=[{positions:v}]):Array.isArray(v)||(v=[v]);var l=this,_=l.regl,s=l.gl;if(v.forEach(function(u,L){var S=x.passes[L];if(u!==void 0){if(u===null){x.passes[L]=null;return}if(typeof u[0]=="number"&&(u={positions:u}),u=e(u,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(x.passes[L]=S={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:_.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:_.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:_.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:_.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},u=M({},y.defaults,u)),u.thickness!=null&&(S.thickness=parseFloat(u.thickness)),u.opacity!=null&&(S.opacity=parseFloat(u.opacity)),u.miterLimit!=null&&(S.miterLimit=parseFloat(u.miterLimit)),u.overlay!=null&&(S.overlay=!!u.overlay,L<y.maxLines&&(S.depth=2*(y.maxLines-1-L%y.maxLines)/y.maxLines-1)),u.join!=null&&(S.join=u.join),u.hole!=null&&(S.hole=u.hole),u.fill!=null&&(S.fill=u.fill?T(u.fill,"uint8"):null),u.viewport!=null&&(S.viewport=p(u.viewport)),S.viewport||(S.viewport=p([s.drawingBufferWidth,s.drawingBufferHeight])),u.close!=null&&(S.close=u.close),u.positions===null&&(u.positions=[]),u.positions){var k,P;if(u.positions.x&&u.positions.y){var z=u.positions.x,I=u.positions.y;P=S.count=Math.max(z.length,I.length),k=new Float64Array(P*2);for(var D=0;D<P;D++)k[D*2]=z[D],k[D*2+1]=I[D]}else k=a(u.positions,"float64"),P=S.count=Math.floor(k.length/2);var R=S.bounds=c(k,2);if(S.fill){for(var B=[],F={},V=0,Y=0,K=0,J=S.count;Y<J;Y++){var G=k[Y*2],Z=k[Y*2+1];isNaN(G)||isNaN(Z)||G==null||Z==null?(G=k[V*2],Z=k[V*2+1],F[Y]=V):V=Y,B[K++]=G,B[K++]=Z}if(u.splitNull){S.count-1 in F||(F[S.count]=S.count-1);var re=Object.keys(F).map(Number).sort(function(rt,ct){return rt-ct}),se=[],oe=0,N=S.hole!=null?S.hole[0]:null;if(N!=null){var U=d(re,function(rt){return rt>=N});re=re.slice(0,U),re.push(N)}for(var q=function(rt){var ct=B.slice(oe*2,re[rt]*2).concat(N?B.slice(N*2):[]),Ze=(S.hole||[]).map(function(Ge){return Ge-N+(re[rt]-oe)}),ke=n(ct,Ze);ke=ke.map(function(Ge){return Ge+oe+(Ge+oe<re[rt]?0:N-re[rt])}),se.push.apply(se,ke),oe=re[rt]+1},Q=0;Q<re.length;Q++)q(Q);for(var W=0,X=se.length;W<X;W++)F[se[W]]!=null&&(se[W]=F[se[W]]);S.triangles=se}else{for(var te=n(B,S.hole||[]),ee=0,ie=te.length;ee<ie;ee++)F[te[ee]]!=null&&(te[ee]=F[te[ee]]);S.triangles=te}}var le=new Float64Array(k);t(le,2,R);var ye=new Float64Array(P*2+6);S.close?k[0]===k[P*2-2]&&k[1]===k[P*2-1]?(ye[0]=le[P*2-4],ye[1]=le[P*2-3]):(ye[0]=le[P*2-2],ye[1]=le[P*2-1]):(ye[0]=le[0],ye[1]=le[1]),ye.set(le,2),S.close?k[0]===k[P*2-2]&&k[1]===k[P*2-1]?(ye[P*2+2]=le[2],ye[P*2+3]=le[3],S.count-=1):(ye[P*2+2]=le[0],ye[P*2+3]=le[1],ye[P*2+4]=le[2],ye[P*2+5]=le[3]):(ye[P*2+2]=le[P*2-2],ye[P*2+3]=le[P*2-1],ye[P*2+4]=le[P*2-2],ye[P*2+5]=le[P*2-1]);var ue=f(ye);S.positionBuffer(ue);var pe=o(ye,ue);S.positionFractBuffer(pe)}if(u.range?S.range=u.range:S.range||(S.range=S.bounds),(u.range||u.positions)&&S.count){var ge=S.bounds,Te=ge[2]-ge[0],_e=ge[3]-ge[1],De=S.range[2]-S.range[0],Oe=S.range[3]-S.range[1];S.scale=[Te/De,_e/Oe],S.translate=[-S.range[0]/De+ge[0]/De||0,-S.range[1]/Oe+ge[1]/Oe||0],S.scaleFract=o(S.scale),S.translateFract=o(S.translate)}if(u.dashes){var Ue=0,xe;if(!u.dashes||u.dashes.length<2)Ue=1,xe=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ue=0;for(var Pe=0;Pe<u.dashes.length;++Pe)Ue+=u.dashes[Pe];xe=new Uint8Array(Ue*y.dashMult);for(var Ve=0,Qe=255,Fe=0;Fe<2;Fe++)for(var Le=0;Le<u.dashes.length;++Le){for(var Ne=0,dt=u.dashes[Le]*y.dashMult*.5;Ne<dt;++Ne)xe[Ve++]=Qe;Qe^=255}}S.dashLength=Ue,S.dashTexture({channels:1,data:xe,width:xe.length,height:1,mag:"linear",min:"linear"},0,0)}if(u.color){var Dt=S.count,Xt=u.color;Xt||(Xt="transparent");var Tt=new Uint8Array(Dt*4+4);if(!Array.isArray(Xt)||typeof Xt[0]=="number")for(var zt=T(Xt,"uint8"),Ut=0;Ut<Dt+1;Ut++)Tt.set(zt,Ut*4);else{for(var Et=0;Et<Dt;Et++){var Mt=T(Xt[Et],"uint8");Tt.set(Mt,Et*4)}Tt.set(T(Xt[0],"uint8"),Dt*4)}S.colorBuffer({usage:"dynamic",type:"uint8",data:Tt})}}}),v.length<this.passes.length){for(var w=v.length;w<this.passes.length;w++){var b=this.passes[w];!b||(b.colorBuffer.destroy(),b.positionBuffer.destroy(),b.dashTexture.destroy())}this.passes.length=v.length}for(var h=[],m=0;m<this.passes.length;m++)this.passes[m]!==null&&h.push(this.passes[m]);return this.passes=h,this}},y.prototype.destroy=function(){return this.passes.forEach(function(v){v.colorBuffer.destroy(),v.positionBuffer.destroy(),v.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(g,ne,ae){function T(S,k){return A(S)||a(S,k)||n(S,k)||f()}function c(S){return M(S)||e(S)||n(S)||r()}function M(S){if(Array.isArray(S))return t(S)}function A(S){if(Array.isArray(S))return S}function e(S){if(typeof Symbol!="undefined"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}function a(S,k){var P=S==null?null:typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(P!=null){var z=[],I=!0,D=!1,R,B;try{for(P=P.call(S);!(I=(R=P.next()).done)&&(z.push(R.value),!(k&&z.length===k));I=!0);}catch(F){D=!0,B=F}finally{try{!I&&P.return!=null&&P.return()}finally{if(D)throw B}}return z}}function n(S,k){if(!!S){if(typeof S=="string")return t(S,k);var P=Object.prototype.toString.call(S).slice(8,-1);if(P==="Object"&&S.constructor&&(P=S.constructor.name),P==="Map"||P==="Set")return Array.from(S);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return t(S,k)}}function t(S,k){(k==null||k>S.length)&&(k=S.length);for(var P=0,z=new Array(k);P<k;P++)z[P]=S[P];return z}function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=g("color-normalize"),i=g("array-bounds"),p=g("color-id"),d=g("@plotly/point-cluster"),y=g("object-assign"),v=g("glslify"),x=g("pick-by-alias"),l=g("update-diff"),_=g("flatten-vertex-data"),s=g("is-iexplorer"),w=g("to-float32"),b=g("parse-rect"),h=m;function m(S,k){var P=this;if(!(this instanceof m))return new m(S,k);typeof S=="function"?(k||(k={}),k.regl=S):(k=S,S=null),k&&k.length&&(k.positions=k),S=k.regl;var z=S._gl,I,D=[],R={},B=[],F=[null],V=[null],Y=255,K=100;this.tooManyColors=s,I=S.texture({data:new Uint8Array(Y*4),width:Y,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),y(this,{regl:S,gl:z,groups:B,markerCache:V,markerTextures:F,palette:D,paletteIds:R,paletteTexture:I,maxColors:Y,maxSize:K,canvas:z.canvas}),this.update(k);var J={uniforms:{constPointSize:!!k.constPointSize,opacity:S.prop("opacity"),paletteSize:function(se,oe){return[P.tooManyColors?0:Y,I.height]},pixelRatio:S.context("pixelRatio"),scale:S.prop("scale"),scaleFract:S.prop("scaleFract"),translate:S.prop("translate"),translateFract:S.prop("translateFract"),markerTexture:S.prop("markerTexture"),paletteTexture:I},attributes:{x:function(se,oe){return oe.xAttr||{buffer:oe.positionBuffer,stride:8,offset:0}},y:function(se,oe){return oe.yAttr||{buffer:oe.positionBuffer,stride:8,offset:4}},xFract:function(se,oe){return oe.xAttr?{constant:[0,0]}:{buffer:oe.positionFractBuffer,stride:8,offset:0}},yFract:function(se,oe){return oe.yAttr?{constant:[0,0]}:{buffer:oe.positionFractBuffer,stride:8,offset:4}},size:function(se,oe){return oe.size.length?{buffer:oe.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(oe.size*255/P.maxSize)]}},borderSize:function(se,oe){return oe.borderSize.length?{buffer:oe.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(oe.borderSize*255/P.maxSize)]}},colorId:function(se,oe){return oe.color.length?{buffer:oe.colorBuffer,stride:P.tooManyColors?8:4,offset:0}:{constant:P.tooManyColors?D.slice(oe.color*4,oe.color*4+4):[oe.color]}},borderColorId:function(se,oe){return oe.borderColor.length?{buffer:oe.colorBuffer,stride:P.tooManyColors?8:4,offset:P.tooManyColors?4:2}:{constant:P.tooManyColors?D.slice(oe.borderColor*4,oe.borderColor*4+4):[oe.borderColor]}},isActive:function(se,oe){return oe.activation===!0?{constant:[1]}:oe.activation?oe.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:S.prop("viewport")},viewport:S.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:S.prop("elements"),count:S.prop("count"),offset:S.prop("offset"),primitive:"points"},G=y({},J);G.frag=v([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),G.vert=v([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=S(G);var Z=y({},J);Z.frag=v([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),Z.vert=v([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),s&&(Z.frag=Z.frag.replace("smoothstep","smoothStep"),G.frag=G.frag.replace("smoothstep","smoothStep")),this.drawCircle=S(Z)}m.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},m.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},m.prototype.draw=function(){for(var S=this,k=arguments.length,P=new Array(k),z=0;z<k;z++)P[z]=arguments[z];var I=this.groups;if(P.length===1&&Array.isArray(P[0])&&(P[0][0]===null||Array.isArray(P[0][0]))&&(P=P[0]),this.regl._refresh(),P.length)for(var D=0;D<P.length;D++)this.drawItem(D,P[D]);else I.forEach(function(R,B){S.drawItem(B)});return this},m.prototype.drawItem=function(S,k){var P=this.groups,z=P[S];if(typeof k=="number"&&(S=k,z=P[k],k=null),!!(z&&z.count&&z.opacity)){z.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,z,k));for(var I=[],D=1;D<z.activation.length;D++)!z.activation[D]||z.activation[D]!==!0&&!z.activation[D].data.length||I.push.apply(I,c(this.getMarkerDrawOptions(D,z,k)));I.length&&this.drawMarker(I)}},m.prototype.getMarkerDrawOptions=function(S,k,P){var z=k.range,I=k.tree,D=k.viewport,R=k.activation,B=k.selectionBuffer,F=k.count;if(this.regl,!I)return P?[y({},k,{markerTexture:this.markerTextures[S],activation:R[S],count:P.length,elements:P,offset:0})]:[y({},k,{markerTexture:this.markerTextures[S],activation:R[S],offset:0})];var V=[],Y=I.range(z,{lod:!0,px:[(z[2]-z[0])/D.width,(z[3]-z[1])/D.height]});if(P){for(var K=R[S],J=K.data,G=new Uint8Array(F),Z=0;Z<P.length;Z++){var re=P[Z];G[re]=J?J[re]:1}B.subdata(G)}for(var se=Y.length;se--;){var oe=T(Y[se],2),N=oe[0],U=oe[1];V.push(y({},k,{markerTexture:this.markerTextures[S],activation:P?B:R[S],offset:N,count:U-N}))}return V},m.prototype.update=function(){for(var S=this,k=arguments.length,P=new Array(k),z=0;z<k;z++)P[z]=arguments[z];if(!!P.length){P.length===1&&Array.isArray(P[0])&&(P=P[0]);var I=this.groups,D=this.gl,R=this.regl,B=this.maxSize,F=this.maxColors,V=this.palette;this.groups=I=P.map(function(Y,K){var J=I[K];if(Y===void 0)return J;Y===null?Y={positions:null}:typeof Y=="function"?Y={ondraw:Y}:typeof Y[0]=="number"&&(Y={positions:Y}),Y=x(Y,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),Y.positions===null&&(Y.positions=[]),Y.tooManyColors!=null&&(S.tooManyColors=Y.tooManyColors),J||(I[K]=J={id:K,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:R.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},Y=y({},m.defaults,Y)),Y.positions&&!("marker"in Y)&&(Y.marker=J.marker,delete J.marker),Y.marker&&!("positions"in Y)&&(Y.positions=J.positions,delete J.positions);var G=0,Z=0;if(l(J,Y,[{snap:!0,size:function(_e,De){return _e==null&&(_e=m.defaults.size),G+=_e&&_e.length?1:0,_e},borderSize:function(_e,De){return _e==null&&(_e=m.defaults.borderSize),G+=_e&&_e.length?1:0,_e},opacity:parseFloat,color:function(_e,De){return _e==null&&(_e=m.defaults.color),_e=S.updateColor(_e),Z++,_e},borderColor:function(_e,De){return _e==null&&(_e=m.defaults.borderColor),_e=S.updateColor(_e),Z++,_e},bounds:function(_e,De,Oe){return"range"in Oe||(Oe.range=null),_e},positions:function(_e,De,Oe){var Ue=De.snap,xe=De.positionBuffer,Pe=De.positionFractBuffer,Ve=De.selectionBuffer;if(_e.x||_e.y)return _e.x.length?De.xAttr={buffer:R.buffer(_e.x),offset:0,stride:4,count:_e.x.length}:De.xAttr={buffer:_e.x.buffer,offset:_e.x.offset*4||0,stride:(_e.x.stride||1)*4,count:_e.x.count},_e.y.length?De.yAttr={buffer:R.buffer(_e.y),offset:0,stride:4,count:_e.y.length}:De.yAttr={buffer:_e.y.buffer,offset:_e.y.offset*4||0,stride:(_e.y.stride||1)*4,count:_e.y.count},De.count=Math.max(De.xAttr.count,De.yAttr.count),_e;_e=_(_e,"float64");var Qe=De.count=Math.floor(_e.length/2),Fe=De.bounds=Qe?i(_e,2):null;if(!Oe.range&&!De.range&&(delete De.range,Oe.range=Fe),!Oe.marker&&!De.marker&&(delete De.marker,Oe.marker=null),Ue&&(Ue===!0||Qe>Ue)?De.tree=d(_e,{bounds:Fe}):Ue&&Ue.length&&(De.tree=Ue),De.tree){var Le={primitive:"points",usage:"static",data:De.tree,type:"uint32"};De.elements?De.elements(Le):De.elements=R.elements(Le)}var Ne=w.float32(_e);xe({data:Ne,usage:"dynamic"});var dt=w.fract32(_e,Ne);return Pe({data:dt,usage:"dynamic"}),Ve({data:new Uint8Array(Qe),type:"uint8",usage:"stream"}),_e}},{marker:function(_e,De,Oe){var Ue=De.activation;if(Ue.forEach(function(dt){return dt&&dt.destroy&&dt.destroy()}),Ue.length=0,!_e||typeof _e[0]=="number"){var xe=S.addMarker(_e);Ue[xe]=!0}else{for(var Pe=[],Ve=0,Qe=Math.min(_e.length,De.count);Ve<Qe;Ve++){var Fe=S.addMarker(_e[Ve]);Pe[Fe]||(Pe[Fe]=new Uint8Array(De.count)),Pe[Fe][Ve]=1}for(var Le=0;Le<Pe.length;Le++)if(!!Pe[Le]){var Ne={data:Pe[Le],type:"uint8",usage:"static"};Ue[Le]?Ue[Le](Ne):Ue[Le]=R.buffer(Ne),Ue[Le].data=Pe[Le]}}return _e},range:function(_e,De,Oe){var Ue=De.bounds;if(!!Ue)return _e||(_e=Ue),De.scale=[1/(_e[2]-_e[0]),1/(_e[3]-_e[1])],De.translate=[-_e[0],-_e[1]],De.scaleFract=w.fract(De.scale),De.translateFract=w.fract(De.translate),_e},viewport:function(_e){var De=b(_e||[D.drawingBufferWidth,D.drawingBufferHeight]);return De}}]),G){var re=J,se=re.count,oe=re.size,N=re.borderSize,U=re.sizeBuffer,q=new Uint8Array(se*2);if(oe.length||N.length)for(var Q=0;Q<se;Q++)q[Q*2]=Math.round((oe[Q]==null?oe:oe[Q])*255/B),q[Q*2+1]=Math.round((N[Q]==null?N:N[Q])*255/B);U({data:q,usage:"dynamic"})}if(Z){var W=J,X=W.count,te=W.color,ee=W.borderColor,ie=W.colorBuffer,le;if(S.tooManyColors){if(te.length||ee.length){le=new Uint8Array(X*8);for(var ye=0;ye<X;ye++){var ue=te[ye];le[ye*8]=V[ue*4],le[ye*8+1]=V[ue*4+1],le[ye*8+2]=V[ue*4+2],le[ye*8+3]=V[ue*4+3];var pe=ee[ye];le[ye*8+4]=V[pe*4],le[ye*8+5]=V[pe*4+1],le[ye*8+6]=V[pe*4+2],le[ye*8+7]=V[pe*4+3]}}}else if(te.length||ee.length){le=new Uint8Array(X*4+2);for(var ge=0;ge<X;ge++)te[ge]!=null&&(le[ge*4]=te[ge]%F,le[ge*4+1]=Math.floor(te[ge]/F)),ee[ge]!=null&&(le[ge*4+2]=ee[ge]%F,le[ge*4+3]=Math.floor(ee[ge]/F))}ie({data:le||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return J})}},m.prototype.addMarker=function(S){var k=this.markerTextures,P=this.regl,z=this.markerCache,I=S==null?0:z.indexOf(S);if(I>=0)return I;var D;if(S instanceof Uint8Array||S instanceof Uint8ClampedArray)D=S;else{D=new Uint8Array(S.length);for(var R=0,B=S.length;R<B;R++)D[R]=S[R]*255}var F=Math.floor(Math.sqrt(D.length));return I=k.length,z.push(S),k.push(P.texture({channels:1,data:D,radius:F,mag:"linear",min:"linear"})),I},m.prototype.updateColor=function(S){var k=this.paletteIds,P=this.palette,z=this.maxColors;Array.isArray(S)||(S=[S]);var I=[];if(typeof S[0]=="number"){var D=[];if(Array.isArray(S))for(var R=0;R<S.length;R+=4)D.push(S.slice(R,R+4));else for(var B=0;B<S.length;B+=4)D.push(S.subarray(B,B+4));S=D}for(var F=0;F<S.length;F++){var V=S[F];V=o(V,"uint8");var Y=p(V,!1);if(k[Y]==null){var K=P.length;k[Y]=Math.floor(K/4),P[K]=V[0],P[K+1]=V[1],P[K+2]=V[2],P[K+3]=V[3]}I[F]=k[Y]}return!this.tooManyColors&&P.length>z*4&&(this.tooManyColors=!0),this.updatePalette(P),I.length===1?I[0]:I},m.prototype.updatePalette=function(S){if(!this.tooManyColors){var k=this.maxColors,P=this.paletteTexture,z=Math.ceil(S.length*.25/k);if(z>1){S=S.slice();for(var I=S.length*.25%k;I<z*k;I++)S.push(0,0,0,0)}P.height<z&&P.resize(k,z),P.subimage({width:Math.min(S.length*.25,k),height:z,data:S},0,0)}},m.prototype.destroy=function(){return this.groups.forEach(function(S){S.sizeBuffer.destroy(),S.positionBuffer.destroy(),S.positionFractBuffer.destroy(),S.colorBuffer.destroy(),S.activation.forEach(function(k){return k&&k.destroy&&k.destroy()}),S.selectionBuffer.destroy(),S.elements&&S.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(S){return S&&S.destroy&&S.destroy()}),this};var u=g("object-assign"),L=function(k,P){var z=new h(k,P),I=z.render.bind(z);return u(I,{render:I,update:z.update.bind(z),draw:z.draw.bind(z),destroy:z.destroy.bind(z),regl:z.regl,gl:z.gl,canvas:z.gl.canvas,groups:z.groups,markers:z.markerCache,palette:z.palette}),I};ne.exports=L},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(g,ne,ae){var T=g("regl-scatter2d"),c=g("pick-by-alias"),M=g("array-bounds"),A=g("raf"),e=g("array-range"),a=g("parse-rect"),n=g("flatten-vertex-data");ne.exports=t;function t(i,p){if(!(this instanceof t))return new t(i,p);this.traces=[],this.passes={},this.regl=i,this.scatter=T(i),this.canvas=this.scatter.canvas}t.prototype.render=function(){for(var i=this,p,d=[],y=arguments.length;y--;)d[y]=arguments[y];return d.length&&(p=this).update.apply(p,d),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=A(function(){i.draw(),i.dirty=!0,i.planned=null})):(this.draw(),this.dirty=!0,A(function(){i.dirty=!1})),this)},t.prototype.update=function(){for(var i,p=[],d=arguments.length;d--;)p[d]=arguments[d];if(!!p.length){for(var y=0;y<p.length;y++)this.updateItem(y,p[y]);this.traces=this.traces.filter(Boolean);for(var v=[],x=0,l=0;l<this.traces.length;l++){for(var _=this.traces[l],s=this.traces[l].passes,w=0;w<s.length;w++)v.push(this.passes[s[w]]);_.passOffset=x,x+=_.passes.length}return(i=this.scatter).update.apply(i,v),this}},t.prototype.updateItem=function(i,p){var d=this,y=d.regl;if(p===null)return this.traces[i]=null,this;if(!p)return this;var v=c(p,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),x=this.traces[i]||(this.traces[i]={id:i,buffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:a([y._gl.drawingBufferWidth,y._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(v.color!=null&&(x.color=v.color),v.size!=null&&(x.size=v.size),v.marker!=null&&(x.marker=v.marker),v.borderColor!=null&&(x.borderColor=v.borderColor),v.borderSize!=null&&(x.borderSize=v.borderSize),v.opacity!=null&&(x.opacity=v.opacity),v.viewport&&(x.viewport=a(v.viewport)),v.diagonal!=null&&(x.diagonal=v.diagonal),v.upper!=null&&(x.upper=v.upper),v.lower!=null&&(x.lower=v.lower),v.data){x.buffer(n(v.data)),x.columns=v.data.length,x.count=v.data[0].length,x.bounds=[];for(var l=0;l<x.columns;l++)x.bounds[l]=M(v.data[l],1)}var _;v.range&&(x.range=v.range,_=x.range&&typeof x.range[0]!="number"),v.domain&&(x.domain=v.domain);var s=!1;v.padding!=null&&(Array.isArray(v.padding)&&v.padding.length===x.columns&&typeof v.padding[v.padding.length-1]=="number"?(x.padding=v.padding.map(o),s=!0):x.padding=o(v.padding));var w=x.columns,b=x.count,h=x.viewport.width,m=x.viewport.height,u=x.viewport.x,L=x.viewport.y,S=h/w,k=m/w;x.passes=[];for(var P=0;P<w;P++)for(var z=0;z<w;z++)if(!(!x.diagonal&&z===P)&&!(!x.upper&&P>z)&&!(!x.lower&&P<z)){var I=r(x.id,P,z),D=this.passes[I]||(this.passes[I]={});if(v.data&&(v.transpose?D.positions={x:{buffer:x.buffer,offset:z,count:b,stride:w},y:{buffer:x.buffer,offset:P,count:b,stride:w}}:D.positions={x:{buffer:x.buffer,offset:z*b,count:b},y:{buffer:x.buffer,offset:P*b,count:b}},D.bounds=f(x.bounds,P,z)),v.domain||v.viewport||v.data){var R=s?f(x.padding,P,z):x.padding;if(x.domain){var B=f(x.domain,P,z),F=B[0],V=B[1],Y=B[2],K=B[3];D.viewport=[u+F*h+R[0],L+V*m+R[1],u+Y*h-R[2],L+K*m-R[3]]}else D.viewport=[u+z*S+S*R[0],L+P*k+k*R[1],u+(z+1)*S-S*R[2],L+(P+1)*k-k*R[3]]}v.color&&(D.color=x.color),v.size&&(D.size=x.size),v.marker&&(D.marker=x.marker),v.borderSize&&(D.borderSize=x.borderSize),v.borderColor&&(D.borderColor=x.borderColor),v.opacity&&(D.opacity=x.opacity),v.range&&(D.range=_?f(x.range,P,z):x.range||D.bounds),x.passes.push(I)}return this},t.prototype.draw=function(){for(var i,p=[],d=arguments.length;d--;)p[d]=arguments[d];if(!p.length)this.scatter.draw();else{for(var y=[],v=0;v<p.length;v++)if(typeof p[v]=="number"){var x=this.traces[p[v]],l=x.passes,_=x.passOffset;y.push.apply(y,e(_,_+l.length))}else if(p[v].length){var s=p[v],w=this.traces[v],b=w.passes,h=w.passOffset;b=b.map(function(m,u){y[h+u]=s})}(i=this.scatter).draw.apply(i,y)}return this},t.prototype.destroy=function(){return this.traces.forEach(function(i){i.buffer&&i.buffer.destroy&&i.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function r(i,p,d){var y=i.id!=null?i.id:i,v=p,x=d,l=y<<16|(v&255)<<8|x&255;return l}function f(i,p,d){var y,v,x,l,_=i[p],s=i[d];return _.length>2?(y=_[1],v=_[3]):_.length?(y=_[0],v=_[1]):(y=_.y,_.x+_.width,v=_.y+_.height),s.length>2?(x=s[0],l=s[2]):s.length?(x=s[0],l=s[1]):(x=s.x,l=s.x+s.width,s.y+s.height),[x,y,l,v]}function o(i){if(typeof i=="number")return[i,i,i,i];if(i.length===2)return[i[0],i[1],i[0],i[1]];var p=a(i);return[p.x,p.y,p.x+p.width,p.y+p.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?ne.exports=c():T.createREGL=c()})(this,function(){function T(nt,Gt){this.id=ye++,this.type=nt,this.data=Gt}function c(nt){if(nt.length===0)return[];var Gt=nt.charAt(0),Kt=nt.charAt(nt.length-1);if(1<nt.length&&Gt===Kt&&(Gt==='"'||Gt==="'"))return['"'+nt.substr(1,nt.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Gt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(nt))return c(nt.substr(0,Gt.index)).concat(c(Gt[1])).concat(c(nt.substr(Gt.index+Gt[0].length)));if(Gt=nt.split("."),Gt.length===1)return['"'+nt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(nt=[],Kt=0;Kt<Gt.length;++Kt)nt=nt.concat(c(Gt[Kt]));return nt}function M(nt){return"["+c(nt).join("][")+"]"}function A(nt,Gt){if(typeof nt=="function")return new T(0,nt);if(typeof nt=="number"||typeof nt=="boolean")return new T(5,nt);if(Array.isArray(nt))return new T(6,nt.map(function(Kt,Ht){return A(Kt)}));if(nt instanceof T)return nt}function e(){var nt={"":0},Gt=[""];return{id:function(Kt){var Ht=nt[Kt];return Ht||(Ht=nt[Kt]=Gt.length,Gt.push(Kt),Ht)},str:function(Kt){return Gt[Kt]}}}function a(nt,Gt,Kt){function Ht(){var je=window.innerWidth,st=window.innerHeight;nt!==document.body&&(st=_r.getBoundingClientRect(),je=st.right-st.left,st=st.bottom-st.top),_r.width=Kt*je,_r.height=Kt*st}var _r=document.createElement("canvas");le(_r.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),nt.appendChild(_r),nt===document.body&&(_r.style.position="absolute",le(nt.style,{margin:0,padding:0}));var tt;return nt!==document.body&&typeof ResizeObserver=="function"?(tt=new ResizeObserver(function(){setTimeout(Ht)}),tt.observe(nt)):window.addEventListener("resize",Ht,!1),Ht(),{canvas:_r,onDestroy:function(){tt?tt.disconnect():window.removeEventListener("resize",Ht),nt.removeChild(_r)}}}function n(nt,Gt){function Kt(Ht){try{return nt.getContext(Ht,Gt)}catch{return null}}return Kt("webgl")||Kt("experimental-webgl")||Kt("webgl-experimental")}function t(nt){return typeof nt=="string"?nt.split():nt}function r(nt){return typeof nt=="string"?document.querySelector(nt):nt}function f(nt){var Gt=nt||{},Kt,Ht,_r,tt;nt={};var je=[],st=[],ft=typeof window=="undefined"?1:window.devicePixelRatio,Me=!1,Se={},Ke=function(ot){},Xe=function(){};if(typeof Gt=="string"?Kt=document.querySelector(Gt):typeof Gt=="object"&&(typeof Gt.nodeName=="string"&&typeof Gt.appendChild=="function"&&typeof Gt.getBoundingClientRect=="function"?Kt=Gt:typeof Gt.drawArrays=="function"||typeof Gt.drawElements=="function"?(tt=Gt,_r=tt.canvas):("gl"in Gt?tt=Gt.gl:"canvas"in Gt?_r=r(Gt.canvas):"container"in Gt&&(Ht=r(Gt.container)),"attributes"in Gt&&(nt=Gt.attributes),"extensions"in Gt&&(je=t(Gt.extensions)),"optionalExtensions"in Gt&&(st=t(Gt.optionalExtensions)),"onDone"in Gt&&(Ke=Gt.onDone),"profile"in Gt&&(Me=!!Gt.profile),"pixelRatio"in Gt&&(ft=+Gt.pixelRatio),"cachedCode"in Gt&&(Se=Gt.cachedCode))),Kt&&(Kt.nodeName.toLowerCase()==="canvas"?_r=Kt:Ht=Kt),!tt){if(!_r){if(Kt=a(Ht||document.body,Ke,ft),!Kt)return null;_r=Kt.canvas,Xe=Kt.onDestroy}nt.premultipliedAlpha===void 0&&(nt.premultipliedAlpha=!0),tt=n(_r,nt)}return tt?{gl:tt,canvas:_r,container:Ht,extensions:je,optionalExtensions:st,pixelRatio:ft,profile:Me,cachedCode:Se,onDone:Ke,onDestroy:Xe}:(Xe(),Ke("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function o(nt,Gt){function Kt(je){je=je.toLowerCase();var st;try{st=Ht[je]=nt.getExtension(je)}catch{}return!!st}for(var Ht={},_r=0;_r<Gt.extensions.length;++_r){var tt=Gt.extensions[_r];if(!Kt(tt))return Gt.onDestroy(),Gt.onDone('"'+tt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Gt.optionalExtensions.forEach(Kt),{extensions:Ht,restore:function(){Object.keys(Ht).forEach(function(je){if(Ht[je]&&!Kt(je))throw Error("(regl): error restoring extension "+je)})}}}function i(nt,Gt){for(var Kt=Array(nt),Ht=0;Ht<nt;++Ht)Kt[Ht]=Gt(Ht);return Kt}function p(nt){var Gt,Kt;return Gt=(65535<nt)<<4,nt>>>=Gt,Kt=(255<nt)<<3,nt>>>=Kt,Gt|=Kt,Kt=(15<nt)<<2,nt>>>=Kt,Gt|=Kt,Kt=(3<nt)<<1,Gt|Kt|nt>>>Kt>>1}function d(){function nt(Ht){e:{for(var _r=16;268435456>=_r;_r*=16)if(Ht<=_r){Ht=_r;break e}Ht=0}return _r=Kt[p(Ht)>>2],0<_r.length?_r.pop():new ArrayBuffer(Ht)}function Gt(Ht){Kt[p(Ht.byteLength)>>2].push(Ht)}var Kt=i(8,function(){return[]});return{alloc:nt,free:Gt,allocType:function(Ht,_r){var tt=null;switch(Ht){case 5120:tt=new Int8Array(nt(_r),0,_r);break;case 5121:tt=new Uint8Array(nt(_r),0,_r);break;case 5122:tt=new Int16Array(nt(2*_r),0,_r);break;case 5123:tt=new Uint16Array(nt(2*_r),0,_r);break;case 5124:tt=new Int32Array(nt(4*_r),0,_r);break;case 5125:tt=new Uint32Array(nt(4*_r),0,_r);break;case 5126:tt=new Float32Array(nt(4*_r),0,_r);break;default:return null}return tt.length!==_r?tt.subarray(0,_r):tt},freeType:function(Ht){Gt(Ht.buffer)}}}function y(nt){return!!nt&&typeof nt=="object"&&Array.isArray(nt.shape)&&Array.isArray(nt.stride)&&typeof nt.offset=="number"&&nt.shape.length===nt.stride.length&&(Array.isArray(nt.data)||De(nt.data))}function v(nt,Gt,Kt,Ht,_r,tt){for(var je=0;je<Gt;++je)for(var st=nt[je],ft=0;ft<Kt;++ft)for(var Me=st[ft],Se=0;Se<Ht;++Se)_r[tt++]=Me[Se]}function x(nt,Gt,Kt,Ht,_r){for(var tt=1,je=Kt+1;je<Gt.length;++je)tt*=Gt[je];var st=Gt[Kt];if(Gt.length-Kt==4){var ft=Gt[Kt+1],Me=Gt[Kt+2];for(Gt=Gt[Kt+3],je=0;je<st;++je)v(nt[je],ft,Me,Gt,Ht,_r),_r+=tt}else for(je=0;je<st;++je)x(nt[je],Gt,Kt+1,Ht,_r),_r+=tt}function l(nt){return xe[Object.prototype.toString.call(nt)]|0}function _(nt,Gt){for(var Kt=0;Kt<Gt.length;++Kt)nt[Kt]=Gt[Kt]}function s(nt,Gt,Kt,Ht,_r,tt,je){for(var st=0,ft=0;ft<Kt;++ft)for(var Me=0;Me<Ht;++Me)nt[st++]=Gt[_r*ft+tt*Me+je]}function w(nt,Gt,Kt,Ht){function _r(Ke){this.id=ft++,this.buffer=nt.createBuffer(),this.type=Ke,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Kt.profile&&(this.stats={size:0})}function tt(Ke,Xe,ot){Ke.byteLength=Xe.byteLength,nt.bufferData(Ke.type,Xe,ot)}function je(Ke,Xe,ot,pt,vt,Ct){if(Ke.usage=ot,Array.isArray(Xe)){if(Ke.dtype=pt||5126,0<Xe.length)if(Array.isArray(Xe[0])){vt=Fe(Xe);for(var St=pt=1;St<vt.length;++St)pt*=vt[St];Ke.dimension=pt,Xe=Qe(Xe,vt,Ke.dtype),tt(Ke,Xe,ot),Ct?Ke.persistentData=Xe:Te.freeType(Xe)}else typeof Xe[0]=="number"?(Ke.dimension=vt,vt=Te.allocType(Ke.dtype,Xe.length),_(vt,Xe),tt(Ke,vt,ot),Ct?Ke.persistentData=vt:Te.freeType(vt)):De(Xe[0])&&(Ke.dimension=Xe[0].length,Ke.dtype=pt||l(Xe[0])||5126,Xe=Qe(Xe,[Xe.length,Xe[0].length],Ke.dtype),tt(Ke,Xe,ot),Ct?Ke.persistentData=Xe:Te.freeType(Xe))}else if(De(Xe))Ke.dtype=pt||l(Xe),Ke.dimension=vt,tt(Ke,Xe,ot),Ct&&(Ke.persistentData=new Uint8Array(new Uint8Array(Xe.buffer)));else if(y(Xe)){vt=Xe.shape;var Nt=Xe.stride,St=Xe.offset,ir=0,lr=0,Yr=0,Pr=0;vt.length===1?(ir=vt[0],lr=1,Yr=Nt[0],Pr=0):vt.length===2&&(ir=vt[0],lr=vt[1],Yr=Nt[0],Pr=Nt[1]),Ke.dtype=pt||l(Xe.data)||5126,Ke.dimension=lr,vt=Te.allocType(Ke.dtype,ir*lr),s(vt,Xe.data,ir,lr,Yr,Pr,St),tt(Ke,vt,ot),Ct?Ke.persistentData=vt:Te.freeType(vt)}else Xe instanceof ArrayBuffer&&(Ke.dtype=5121,Ke.dimension=vt,tt(Ke,Xe,ot),Ct&&(Ke.persistentData=new Uint8Array(new Uint8Array(Xe))))}function st(Ke){Gt.bufferCount--,Ht(Ke),nt.deleteBuffer(Ke.buffer),Ke.buffer=null,delete Me[Ke.id]}var ft=0,Me={};_r.prototype.bind=function(){nt.bindBuffer(this.type,this.buffer)},_r.prototype.destroy=function(){st(this)};var Se=[];return Kt.profile&&(Gt.getTotalBufferSize=function(){var Ke=0;return Object.keys(Me).forEach(function(Xe){Ke+=Me[Xe].stats.size}),Ke}),{create:function(Ke,Xe,ot,pt){function vt(St){var Nt=35044,ir=null,lr=0,Yr=0,Pr=1;return Array.isArray(St)||De(St)||y(St)||St instanceof ArrayBuffer?ir=St:typeof St=="number"?lr=St|0:St&&("data"in St&&(ir=St.data),"usage"in St&&(Nt=Ve[St.usage]),"type"in St&&(Yr=Pe[St.type]),"dimension"in St&&(Pr=St.dimension|0),"length"in St&&(lr=St.length|0)),Ct.bind(),ir?je(Ct,ir,Nt,Yr,Pr,pt):(lr&&nt.bufferData(Ct.type,lr,Nt),Ct.dtype=Yr||5121,Ct.usage=Nt,Ct.dimension=Pr,Ct.byteLength=lr),Kt.profile&&(Ct.stats.size=Ct.byteLength*Le[Ct.dtype]),vt}Gt.bufferCount++;var Ct=new _r(Xe);return Me[Ct.id]=Ct,ot||vt(Ke),vt._reglType="buffer",vt._buffer=Ct,vt.subdata=function(St,Nt){var ir=(Nt||0)|0,lr;if(Ct.bind(),De(St)||St instanceof ArrayBuffer)nt.bufferSubData(Ct.type,ir,St);else if(Array.isArray(St)){if(0<St.length)if(typeof St[0]=="number"){var Yr=Te.allocType(Ct.dtype,St.length);_(Yr,St),nt.bufferSubData(Ct.type,ir,Yr),Te.freeType(Yr)}else(Array.isArray(St[0])||De(St[0]))&&(lr=Fe(St),Yr=Qe(St,lr,Ct.dtype),nt.bufferSubData(Ct.type,ir,Yr),Te.freeType(Yr))}else if(y(St)){lr=St.shape;var Pr=St.stride,wr=Yr=0,Jr=0,gr=0;lr.length===1?(Yr=lr[0],wr=1,Jr=Pr[0],gr=0):lr.length===2&&(Yr=lr[0],wr=lr[1],Jr=Pr[0],gr=Pr[1]),lr=Array.isArray(St.data)?Ct.dtype:l(St.data),lr=Te.allocType(lr,Yr*wr),s(lr,St.data,Yr,wr,Jr,gr,St.offset),nt.bufferSubData(Ct.type,ir,lr),Te.freeType(lr)}return vt},Kt.profile&&(vt.stats=Ct.stats),vt.destroy=function(){st(Ct)},vt},createStream:function(Ke,Xe){var ot=Se.pop();return ot||(ot=new _r(Ke)),ot.bind(),je(ot,Xe,35040,0,1,!1),ot},destroyStream:function(Ke){Se.push(Ke)},clear:function(){Oe(Me).forEach(st),Se.forEach(st)},getBuffer:function(Ke){return Ke&&Ke._buffer instanceof _r?Ke._buffer:null},restore:function(){Oe(Me).forEach(function(Ke){Ke.buffer=nt.createBuffer(),nt.bindBuffer(Ke.type,Ke.buffer),nt.bufferData(Ke.type,Ke.persistentData||Ke.byteLength,Ke.usage)})},_initBuffer:je}}function b(nt,Gt,Kt,Ht){function _r(Ke){this.id=ft++,st[this.id]=this,this.buffer=Ke,this.primType=4,this.type=this.vertCount=0}function tt(Ke,Xe,ot,pt,vt,Ct,St){Ke.buffer.bind();var Nt;if(Xe?((Nt=St)||De(Xe)&&(!y(Xe)||De(Xe.data))||(Nt=Gt.oes_element_index_uint?5125:5123),Kt._initBuffer(Ke.buffer,Xe,ot,Nt,3)):(nt.bufferData(34963,Ct,ot),Ke.buffer.dtype=Nt||5121,Ke.buffer.usage=ot,Ke.buffer.dimension=3,Ke.buffer.byteLength=Ct),Nt=St,!St){switch(Ke.buffer.dtype){case 5121:case 5120:Nt=5121;break;case 5123:case 5122:Nt=5123;break;case 5125:case 5124:Nt=5125}Ke.buffer.dtype=Nt}Ke.type=Nt,Xe=vt,0>Xe&&(Xe=Ke.buffer.byteLength,Nt===5123?Xe>>=1:Nt===5125&&(Xe>>=2)),Ke.vertCount=Xe,Xe=pt,0>pt&&(Xe=4,pt=Ke.buffer.dimension,pt===1&&(Xe=0),pt===2&&(Xe=1),pt===3&&(Xe=4)),Ke.primType=Xe}function je(Ke){Ht.elementsCount--,delete st[Ke.id],Ke.buffer.destroy(),Ke.buffer=null}var st={},ft=0,Me={uint8:5121,uint16:5123};Gt.oes_element_index_uint&&(Me.uint32=5125),_r.prototype.bind=function(){this.buffer.bind()};var Se=[];return{create:function(Ke,Xe){function ot(Ct){if(Ct)if(typeof Ct=="number")pt(Ct),vt.primType=4,vt.vertCount=Ct|0,vt.type=5121;else{var St=null,Nt=35044,ir=-1,lr=-1,Yr=0,Pr=0;Array.isArray(Ct)||De(Ct)||y(Ct)?St=Ct:("data"in Ct&&(St=Ct.data),"usage"in Ct&&(Nt=Ve[Ct.usage]),"primitive"in Ct&&(ir=Ne[Ct.primitive]),"count"in Ct&&(lr=Ct.count|0),"type"in Ct&&(Pr=Me[Ct.type]),"length"in Ct?Yr=Ct.length|0:(Yr=lr,Pr===5123||Pr===5122?Yr*=2:(Pr===5125||Pr===5124)&&(Yr*=4))),tt(vt,St,Nt,ir,lr,Yr,Pr)}else pt(),vt.primType=4,vt.vertCount=0,vt.type=5121;return ot}var pt=Kt.create(null,34963,!0),vt=new _r(pt._buffer);return Ht.elementsCount++,ot(Ke),ot._reglType="elements",ot._elements=vt,ot.subdata=function(Ct,St){return pt.subdata(Ct,St),ot},ot.destroy=function(){je(vt)},ot},createStream:function(Ke){var Xe=Se.pop();return Xe||(Xe=new _r(Kt.create(null,34963,!0,!1)._buffer)),tt(Xe,Ke,35040,-1,-1,0,0),Xe},destroyStream:function(Ke){Se.push(Ke)},getElements:function(Ke){return typeof Ke=="function"&&Ke._elements instanceof _r?Ke._elements:null},clear:function(){Oe(st).forEach(je)}}}function h(nt){for(var Gt=Te.allocType(5123,nt.length),Kt=0;Kt<nt.length;++Kt)if(isNaN(nt[Kt]))Gt[Kt]=65535;else if(nt[Kt]===1/0)Gt[Kt]=31744;else if(nt[Kt]===-1/0)Gt[Kt]=64512;else{dt[0]=nt[Kt];var Ht=Dt[0],_r=Ht>>>31<<15,tt=(Ht<<1>>>24)-127,Ht=Ht>>13&1023;Gt[Kt]=-24>tt?_r:-14>tt?_r+(Ht+1024>>-14-tt):15<tt?_r+31744:_r+(tt+15<<10)+Ht}return Gt}function m(nt){return Array.isArray(nt)||De(nt)}function u(nt){return"[object "+nt+"]"}function L(nt){return Array.isArray(nt)&&(nt.length===0||typeof nt[0]=="number")}function S(nt){return!!(Array.isArray(nt)&&nt.length!==0&&m(nt[0]))}function k(nt){return Object.prototype.toString.call(nt)}function P(nt){if(!nt)return!1;var Gt=k(nt);return 0<=ke.indexOf(Gt)?!0:L(nt)||S(nt)||y(nt)}function z(nt,Gt){nt.type===36193?(nt.data=h(Gt),Te.freeType(Gt)):nt.data=Gt}function I(nt,Gt,Kt,Ht,_r,tt){if(nt=typeof Je[nt]!="undefined"?Je[nt]:zt[nt]*Ge[Gt],tt&&(nt*=6),_r){for(Ht=0;1<=Kt;)Ht+=nt*Kt*Kt,Kt/=2;return Ht}return nt*Kt*Ht}function D(nt,Gt,Kt,Ht,_r,tt,je){function st(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ft(Mr,vn){Mr.internalformat=vn.internalformat,Mr.format=vn.format,Mr.type=vn.type,Mr.compressed=vn.compressed,Mr.premultiplyAlpha=vn.premultiplyAlpha,Mr.flipY=vn.flipY,Mr.unpackAlignment=vn.unpackAlignment,Mr.colorSpace=vn.colorSpace,Mr.width=vn.width,Mr.height=vn.height,Mr.channels=vn.channels}function Me(Mr,vn){if(typeof vn=="object"&&vn){"premultiplyAlpha"in vn&&(Mr.premultiplyAlpha=vn.premultiplyAlpha),"flipY"in vn&&(Mr.flipY=vn.flipY),"alignment"in vn&&(Mr.unpackAlignment=vn.alignment),"colorSpace"in vn&&(Mr.colorSpace=sr[vn.colorSpace]),"type"in vn&&(Mr.type=Ir[vn.type]);var fn=Mr.width,An=Mr.height,Gn=Mr.channels,ia=!1;"shape"in vn?(fn=vn.shape[0],An=vn.shape[1],vn.shape.length===3&&(Gn=vn.shape[2],ia=!0)):("radius"in vn&&(fn=An=vn.radius),"width"in vn&&(fn=vn.width),"height"in vn&&(An=vn.height),"channels"in vn&&(Gn=vn.channels,ia=!0)),Mr.width=fn|0,Mr.height=An|0,Mr.channels=Gn|0,fn=!1,"format"in vn&&(fn=vn.format,An=Mr.internalformat=Zr[fn],Mr.format=Kn[An],fn in Ir&&!("type"in vn)&&(Mr.type=Ir[fn]),fn in Lr&&(Mr.compressed=!0),fn=!0),!ia&&fn?Mr.channels=zt[Mr.format]:ia&&!fn&&Mr.channels!==Tt[Mr.format]&&(Mr.format=Mr.internalformat=Tt[Mr.channels])}}function Se(Mr){nt.pixelStorei(37440,Mr.flipY),nt.pixelStorei(37441,Mr.premultiplyAlpha),nt.pixelStorei(37443,Mr.colorSpace),nt.pixelStorei(3317,Mr.unpackAlignment)}function Ke(){st.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Xe(Mr,vn){var fn=null;if(P(vn)?fn=vn:vn&&(Me(Mr,vn),"x"in vn&&(Mr.xOffset=vn.x|0),"y"in vn&&(Mr.yOffset=vn.y|0),P(vn.data)&&(fn=vn.data)),vn.copy){var An=_r.viewportWidth,Gn=_r.viewportHeight;Mr.width=Mr.width||An-Mr.xOffset,Mr.height=Mr.height||Gn-Mr.yOffset,Mr.needsCopy=!0}else if(!fn)Mr.width=Mr.width||1,Mr.height=Mr.height||1,Mr.channels=Mr.channels||4;else if(De(fn))Mr.channels=Mr.channels||4,Mr.data=fn,"type"in vn||Mr.type!==5121||(Mr.type=xe[Object.prototype.toString.call(fn)]|0);else if(L(fn)){switch(Mr.channels=Mr.channels||4,An=fn,Gn=An.length,Mr.type){case 5121:case 5123:case 5125:case 5126:Gn=Te.allocType(Mr.type,Gn),Gn.set(An),Mr.data=Gn;break;case 36193:Mr.data=h(An)}Mr.alignment=1,Mr.needsFree=!0}else if(y(fn)){An=fn.data,Array.isArray(An)||Mr.type!==5121||(Mr.type=xe[Object.prototype.toString.call(An)]|0);var Gn=fn.shape,ia=fn.stride,Yn,zn,ea,wa;Gn.length===3?(ea=Gn[2],wa=ia[2]):wa=ea=1,Yn=Gn[0],zn=Gn[1],Gn=ia[0],ia=ia[1],Mr.alignment=1,Mr.width=Yn,Mr.height=zn,Mr.channels=ea,Mr.format=Mr.internalformat=Tt[ea],Mr.needsFree=!0,Yn=wa,fn=fn.offset,ea=Mr.width,wa=Mr.height,zn=Mr.channels;for(var si=Te.allocType(Mr.type===36193?5126:Mr.type,ea*wa*zn),Ft=0,cr=0;cr<wa;++cr)for(var qr=0;qr<ea;++qr)for(var nn=0;nn<zn;++nn)si[Ft++]=An[Gn*qr+ia*cr+Yn*nn+fn];z(Mr,si)}else if(k(fn)===Ut||k(fn)===Et||k(fn)===Mt)k(fn)===Ut||k(fn)===Et?Mr.element=fn:Mr.element=fn.canvas,Mr.width=Mr.element.width,Mr.height=Mr.element.height,Mr.channels=4;else if(k(fn)===rt)Mr.element=fn,Mr.width=fn.width,Mr.height=fn.height,Mr.channels=4;else if(k(fn)===ct)Mr.element=fn,Mr.width=fn.naturalWidth,Mr.height=fn.naturalHeight,Mr.channels=4;else if(k(fn)===Ze)Mr.element=fn,Mr.width=fn.videoWidth,Mr.height=fn.videoHeight,Mr.channels=4;else if(S(fn)){for(An=Mr.width||fn[0].length,Gn=Mr.height||fn.length,ia=Mr.channels,ia=m(fn[0][0])?ia||fn[0][0].length:ia||1,Yn=Ue.shape(fn),ea=1,wa=0;wa<Yn.length;++wa)ea*=Yn[wa];ea=Te.allocType(Mr.type===36193?5126:Mr.type,ea),Ue.flatten(fn,Yn,"",ea),z(Mr,ea),Mr.alignment=1,Mr.width=An,Mr.height=Gn,Mr.channels=ia,Mr.format=Mr.internalformat=Tt[ia],Mr.needsFree=!0}}function ot(Mr,vn,fn,An,Gn){var ia=Mr.element,Yn=Mr.data,zn=Mr.internalformat,ea=Mr.format,wa=Mr.type,si=Mr.width,Ft=Mr.height;Se(Mr),ia?nt.texSubImage2D(vn,Gn,fn,An,ea,wa,ia):Mr.compressed?nt.compressedTexSubImage2D(vn,Gn,fn,An,zn,si,Ft,Yn):Mr.needsCopy?(Ht(),nt.copyTexSubImage2D(vn,Gn,fn,An,Mr.xOffset,Mr.yOffset,si,Ft)):nt.texSubImage2D(vn,Gn,fn,An,si,Ft,ea,wa,Yn)}function pt(){return Aa.pop()||new Ke}function vt(Mr){Mr.needsFree&&Te.freeType(Mr.data),Ke.call(Mr),Aa.push(Mr)}function Ct(){st.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function St(Mr,vn,fn){var An=Mr.images[0]=pt();Mr.mipmask=1,An.width=Mr.width=vn,An.height=Mr.height=fn,An.channels=Mr.channels=4}function Nt(Mr,vn){var fn=null;if(P(vn))fn=Mr.images[0]=pt(),ft(fn,Mr),Xe(fn,vn),Mr.mipmask=1;else if(Me(Mr,vn),Array.isArray(vn.mipmap))for(var An=vn.mipmap,Gn=0;Gn<An.length;++Gn)fn=Mr.images[Gn]=pt(),ft(fn,Mr),fn.width>>=Gn,fn.height>>=Gn,Xe(fn,An[Gn]),Mr.mipmask|=1<<Gn;else fn=Mr.images[0]=pt(),ft(fn,Mr),Xe(fn,vn),Mr.mipmask=1;ft(Mr,Mr.images[0])}function ir(Mr,vn){for(var fn=Mr.images,An=0;An<fn.length&&fn[An];++An){var Gn=fn[An],ia=vn,Yn=An,zn=Gn.element,ea=Gn.data,wa=Gn.internalformat,si=Gn.format,Ft=Gn.type,cr=Gn.width,qr=Gn.height;Se(Gn),zn?nt.texImage2D(ia,Yn,si,si,Ft,zn):Gn.compressed?nt.compressedTexImage2D(ia,Yn,wa,cr,qr,0,ea):Gn.needsCopy?(Ht(),nt.copyTexImage2D(ia,Yn,si,Gn.xOffset,Gn.yOffset,cr,qr,0)):nt.texImage2D(ia,Yn,si,cr,qr,0,si,Ft,ea||null)}}function lr(){var Mr=Ta.pop()||new Ct;st.call(Mr);for(var vn=Mr.mipmask=0;16>vn;++vn)Mr.images[vn]=null;return Mr}function Yr(Mr){for(var vn=Mr.images,fn=0;fn<vn.length;++fn)vn[fn]&&vt(vn[fn]),vn[fn]=null;Ta.push(Mr)}function Pr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function wr(Mr,vn){"min"in vn&&(Mr.minFilter=jt[vn.min],0<=Xt.indexOf(Mr.minFilter)&&!("faces"in vn)&&(Mr.genMipmaps=!0)),"mag"in vn&&(Mr.magFilter=Lt[vn.mag]);var fn=Mr.wrapS,An=Mr.wrapT;if("wrap"in vn){var Gn=vn.wrap;typeof Gn=="string"?fn=An=et[Gn]:Array.isArray(Gn)&&(fn=et[Gn[0]],An=et[Gn[1]])}else"wrapS"in vn&&(fn=et[vn.wrapS]),"wrapT"in vn&&(An=et[vn.wrapT]);if(Mr.wrapS=fn,Mr.wrapT=An,"anisotropic"in vn&&(Mr.anisotropic=vn.anisotropic),"mipmap"in vn){switch(fn=!1,typeof vn.mipmap){case"string":Mr.mipmapHint=Tr[vn.mipmap],fn=Mr.genMipmaps=!0;break;case"boolean":fn=Mr.genMipmaps=vn.mipmap;break;case"object":Mr.genMipmaps=!1,fn=!0}!fn||"min"in vn||(Mr.minFilter=9984)}}function Jr(Mr,vn){nt.texParameteri(vn,10241,Mr.minFilter),nt.texParameteri(vn,10240,Mr.magFilter),nt.texParameteri(vn,10242,Mr.wrapS),nt.texParameteri(vn,10243,Mr.wrapT),Gt.ext_texture_filter_anisotropic&&nt.texParameteri(vn,34046,Mr.anisotropic),Mr.genMipmaps&&(nt.hint(33170,Mr.mipmapHint),nt.generateMipmap(vn))}function gr(Mr){st.call(this),this.mipmask=0,this.internalformat=6408,this.id=oi++,this.refCount=1,this.target=Mr,this.texture=nt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Pr,je.profile&&(this.stats={size:0})}function mr(Mr){nt.activeTexture(33984),nt.bindTexture(Mr.target,Mr.texture)}function Ur(){var Mr=ti[0];Mr?nt.bindTexture(Mr.target,Mr.texture):nt.bindTexture(3553,null)}function Hr(Mr){var vn=Mr.texture,fn=Mr.unit,An=Mr.target;0<=fn&&(nt.activeTexture(33984+fn),nt.bindTexture(An,null),ti[fn]=null),nt.deleteTexture(vn),Mr.texture=null,Mr.params=null,Mr.pixels=null,Mr.refCount=0,delete $a[Mr.id],tt.textureCount--}var Tr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},et={repeat:10497,clamp:33071,mirror:33648},Lt={nearest:9728,linear:9729},jt=le({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Lt),sr={none:0,browser:37444},Ir={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Zr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Lr={};Gt.ext_srgb&&(Zr.srgb=35904,Zr.srgba=35906),Gt.oes_texture_float&&(Ir.float32=Ir.float=5126),Gt.oes_texture_half_float&&(Ir.float16=Ir["half float"]=36193),Gt.webgl_depth_texture&&(le(Zr,{depth:6402,"depth stencil":34041}),le(Ir,{uint16:5123,uint32:5125,"depth stencil":34042})),Gt.webgl_compressed_texture_s3tc&&le(Lr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Gt.webgl_compressed_texture_atc&&le(Lr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Gt.webgl_compressed_texture_pvrtc&&le(Lr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Gt.webgl_compressed_texture_etc1&&(Lr["rgb etc1"]=36196);var br=Array.prototype.slice.call(nt.getParameter(34467));Object.keys(Lr).forEach(function(Mr){var vn=Lr[Mr];0<=br.indexOf(vn)&&(Zr[Mr]=vn)});var Nr=Object.keys(Zr);Kt.textureFormats=Nr;var kn=[];Object.keys(Zr).forEach(function(Mr){kn[Zr[Mr]]=Mr});var _n=[];Object.keys(Ir).forEach(function(Mr){_n[Ir[Mr]]=Mr});var Wn=[];Object.keys(Lt).forEach(function(Mr){Wn[Lt[Mr]]=Mr});var Ln=[];Object.keys(jt).forEach(function(Mr){Ln[jt[Mr]]=Mr});var Xn=[];Object.keys(et).forEach(function(Mr){Xn[et[Mr]]=Mr});var Kn=Nr.reduce(function(Mr,vn){var fn=Zr[vn];return fn===6409||fn===6406||fn===6409||fn===6410||fn===6402||fn===34041||Gt.ext_srgb&&(fn===35904||fn===35906)?Mr[fn]=fn:fn===32855||0<=vn.indexOf("rgba")?Mr[fn]=6408:Mr[fn]=6407,Mr},{}),Aa=[],Ta=[],oi=0,$a={},Va=Kt.maxTextureUnits,ti=Array(Va).map(function(){return null});return le(gr.prototype,{bind:function(){this.bindCount+=1;var Mr=this.unit;if(0>Mr){for(var vn=0;vn<Va;++vn){var fn=ti[vn];if(fn){if(0<fn.bindCount)continue;fn.unit=-1}ti[vn]=this,Mr=vn;break}je.profile&&tt.maxTextureUnits<Mr+1&&(tt.maxTextureUnits=Mr+1),this.unit=Mr,nt.activeTexture(33984+Mr),nt.bindTexture(this.target,this.texture)}return Mr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Hr(this)}}),je.profile&&(tt.getTotalTextureSize=function(){var Mr=0;return Object.keys($a).forEach(function(vn){Mr+=$a[vn].stats.size}),Mr}),{create2D:function(Mr,vn){function fn(Gn,ia){var Yn=An.texInfo;Pr.call(Yn);var zn=lr();return typeof Gn=="number"?typeof ia=="number"?St(zn,Gn|0,ia|0):St(zn,Gn|0,Gn|0):Gn?(wr(Yn,Gn),Nt(zn,Gn)):St(zn,1,1),Yn.genMipmaps&&(zn.mipmask=(zn.width<<1)-1),An.mipmask=zn.mipmask,ft(An,zn),An.internalformat=zn.internalformat,fn.width=zn.width,fn.height=zn.height,mr(An),ir(zn,3553),Jr(Yn,3553),Ur(),Yr(zn),je.profile&&(An.stats.size=I(An.internalformat,An.type,zn.width,zn.height,Yn.genMipmaps,!1)),fn.format=kn[An.internalformat],fn.type=_n[An.type],fn.mag=Wn[Yn.magFilter],fn.min=Ln[Yn.minFilter],fn.wrapS=Xn[Yn.wrapS],fn.wrapT=Xn[Yn.wrapT],fn}var An=new gr(3553);return $a[An.id]=An,tt.textureCount++,fn(Mr,vn),fn.subimage=function(Gn,ia,Yn,zn){ia|=0,Yn|=0,zn|=0;var ea=pt();return ft(ea,An),ea.width=0,ea.height=0,Xe(ea,Gn),ea.width=ea.width||(An.width>>zn)-ia,ea.height=ea.height||(An.height>>zn)-Yn,mr(An),ot(ea,3553,ia,Yn,zn),Ur(),vt(ea),fn},fn.resize=function(Gn,ia){var Yn=Gn|0,zn=ia|0||Yn;if(Yn===An.width&&zn===An.height)return fn;fn.width=An.width=Yn,fn.height=An.height=zn,mr(An);for(var ea=0;An.mipmask>>ea;++ea){var wa=Yn>>ea,si=zn>>ea;if(!wa||!si)break;nt.texImage2D(3553,ea,An.format,wa,si,0,An.format,An.type,null)}return Ur(),je.profile&&(An.stats.size=I(An.internalformat,An.type,Yn,zn,!1,!1)),fn},fn._reglType="texture2d",fn._texture=An,je.profile&&(fn.stats=An.stats),fn.destroy=function(){An.decRef()},fn},createCube:function(Mr,vn,fn,An,Gn,ia){function Yn(wa,si,Ft,cr,qr,nn){var on,Sn=zn.texInfo;for(Pr.call(Sn),on=0;6>on;++on)ea[on]=lr();if(typeof wa=="number"||!wa)for(wa=wa|0||1,on=0;6>on;++on)St(ea[on],wa,wa);else if(typeof wa=="object")if(si)Nt(ea[0],wa),Nt(ea[1],si),Nt(ea[2],Ft),Nt(ea[3],cr),Nt(ea[4],qr),Nt(ea[5],nn);else if(wr(Sn,wa),Me(zn,wa),"faces"in wa)for(wa=wa.faces,on=0;6>on;++on)ft(ea[on],zn),Nt(ea[on],wa[on]);else for(on=0;6>on;++on)Nt(ea[on],wa);for(ft(zn,ea[0]),zn.mipmask=Sn.genMipmaps?(ea[0].width<<1)-1:ea[0].mipmask,zn.internalformat=ea[0].internalformat,Yn.width=ea[0].width,Yn.height=ea[0].height,mr(zn),on=0;6>on;++on)ir(ea[on],34069+on);for(Jr(Sn,34067),Ur(),je.profile&&(zn.stats.size=I(zn.internalformat,zn.type,Yn.width,Yn.height,Sn.genMipmaps,!0)),Yn.format=kn[zn.internalformat],Yn.type=_n[zn.type],Yn.mag=Wn[Sn.magFilter],Yn.min=Ln[Sn.minFilter],Yn.wrapS=Xn[Sn.wrapS],Yn.wrapT=Xn[Sn.wrapT],on=0;6>on;++on)Yr(ea[on]);return Yn}var zn=new gr(34067);$a[zn.id]=zn,tt.cubeCount++;var ea=Array(6);return Yn(Mr,vn,fn,An,Gn,ia),Yn.subimage=function(wa,si,Ft,cr,qr){Ft|=0,cr|=0,qr|=0;var nn=pt();return ft(nn,zn),nn.width=0,nn.height=0,Xe(nn,si),nn.width=nn.width||(zn.width>>qr)-Ft,nn.height=nn.height||(zn.height>>qr)-cr,mr(zn),ot(nn,34069+wa,Ft,cr,qr),Ur(),vt(nn),Yn},Yn.resize=function(wa){if(wa|=0,wa!==zn.width){Yn.width=zn.width=wa,Yn.height=zn.height=wa,mr(zn);for(var si=0;6>si;++si)for(var Ft=0;zn.mipmask>>Ft;++Ft)nt.texImage2D(34069+si,Ft,zn.format,wa>>Ft,wa>>Ft,0,zn.format,zn.type,null);return Ur(),je.profile&&(zn.stats.size=I(zn.internalformat,zn.type,Yn.width,Yn.height,!1,!0)),Yn}},Yn._reglType="textureCube",Yn._texture=zn,je.profile&&(Yn.stats=zn.stats),Yn.destroy=function(){zn.decRef()},Yn},clear:function(){for(var Mr=0;Mr<Va;++Mr)nt.activeTexture(33984+Mr),nt.bindTexture(3553,null),ti[Mr]=null;Oe($a).forEach(Hr),tt.cubeCount=0,tt.textureCount=0},getTexture:function(Mr){return null},restore:function(){for(var Mr=0;Mr<Va;++Mr){var vn=ti[Mr];vn&&(vn.bindCount=0,vn.unit=-1,ti[Mr]=null)}Oe($a).forEach(function(fn){fn.texture=nt.createTexture(),nt.bindTexture(fn.target,fn.texture);for(var An=0;32>An;++An)if((fn.mipmask&1<<An)!=0)if(fn.target===3553)nt.texImage2D(3553,An,fn.internalformat,fn.width>>An,fn.height>>An,0,fn.internalformat,fn.type,null);else for(var Gn=0;6>Gn;++Gn)nt.texImage2D(34069+Gn,An,fn.internalformat,fn.width>>An,fn.height>>An,0,fn.internalformat,fn.type,null);Jr(fn.texInfo,fn.target)})},refresh:function(){for(var Mr=0;Mr<Va;++Mr){var vn=ti[Mr];vn&&(vn.bindCount=0,vn.unit=-1,ti[Mr]=null),nt.activeTexture(33984+Mr),nt.bindTexture(3553,null),nt.bindTexture(34067,null)}}}}function R(nt,Gt,Kt,Ht,_r,tt){function je(gr,mr,Ur){this.target=gr,this.texture=mr,this.renderbuffer=Ur;var Hr=gr=0;mr?(gr=mr.width,Hr=mr.height):Ur&&(gr=Ur.width,Hr=Ur.height),this.width=gr,this.height=Hr}function st(gr){gr&&(gr.texture&&gr.texture._texture.decRef(),gr.renderbuffer&&gr.renderbuffer._renderbuffer.decRef())}function ft(gr,mr,Ur){gr&&(gr.texture?gr.texture._texture.refCount+=1:gr.renderbuffer._renderbuffer.refCount+=1)}function Me(gr,mr){mr&&(mr.texture?nt.framebufferTexture2D(36160,gr,mr.target,mr.texture._texture.texture,0):nt.framebufferRenderbuffer(36160,gr,36161,mr.renderbuffer._renderbuffer.renderbuffer))}function Se(gr){var mr=3553,Ur=null,Hr=null,Tr=gr;return typeof gr=="object"&&(Tr=gr.data,"target"in gr&&(mr=gr.target|0)),gr=Tr._reglType,gr==="texture2d"||gr==="textureCube"?Ur=Tr:gr==="renderbuffer"&&(Hr=Tr,mr=36161),new je(mr,Ur,Hr)}function Ke(gr,mr,Ur,Hr,Tr){return Ur?(gr=Ht.create2D({width:gr,height:mr,format:Hr,type:Tr}),gr._texture.refCount=0,new je(3553,gr,null)):(gr=_r.create({width:gr,height:mr,format:Hr}),gr._renderbuffer.refCount=0,new je(36161,null,gr))}function Xe(gr){return gr&&(gr.texture||gr.renderbuffer)}function ot(gr,mr,Ur){gr&&(gr.texture?gr.texture.resize(mr,Ur):gr.renderbuffer&&gr.renderbuffer.resize(mr,Ur),gr.width=mr,gr.height=Ur)}function pt(){this.id=wr++,Jr[this.id]=this,this.framebuffer=nt.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function vt(gr){gr.colorAttachments.forEach(st),st(gr.depthAttachment),st(gr.stencilAttachment),st(gr.depthStencilAttachment)}function Ct(gr){nt.deleteFramebuffer(gr.framebuffer),gr.framebuffer=null,tt.framebufferCount--,delete Jr[gr.id]}function St(gr){var mr;nt.bindFramebuffer(36160,gr.framebuffer);var Ur=gr.colorAttachments;for(mr=0;mr<Ur.length;++mr)Me(36064+mr,Ur[mr]);for(mr=Ur.length;mr<Kt.maxColorAttachments;++mr)nt.framebufferTexture2D(36160,36064+mr,3553,null,0);nt.framebufferTexture2D(36160,33306,3553,null,0),nt.framebufferTexture2D(36160,36096,3553,null,0),nt.framebufferTexture2D(36160,36128,3553,null,0),Me(36096,gr.depthAttachment),Me(36128,gr.stencilAttachment),Me(33306,gr.depthStencilAttachment),nt.checkFramebufferStatus(36160),nt.isContextLost(),nt.bindFramebuffer(36160,ir.next?ir.next.framebuffer:null),ir.cur=ir.next,nt.getError()}function Nt(gr,mr){function Ur(Tr,et){var Lt,jt=0,sr=0,Ir=!0,Zr=!0;Lt=null;var Lr=!0,br="rgba",Nr="uint8",kn=1,_n=null,Wn=null,Ln=null,Xn=!1;typeof Tr=="number"?(jt=Tr|0,sr=et|0||jt):Tr?("shape"in Tr?(sr=Tr.shape,jt=sr[0],sr=sr[1]):("radius"in Tr&&(jt=sr=Tr.radius),"width"in Tr&&(jt=Tr.width),"height"in Tr&&(sr=Tr.height)),("color"in Tr||"colors"in Tr)&&(Lt=Tr.color||Tr.colors),Lt||("colorCount"in Tr&&(kn=Tr.colorCount|0),"colorTexture"in Tr&&(Lr=!!Tr.colorTexture,br="rgba4"),"colorType"in Tr&&(Nr=Tr.colorType,!Lr)&&(Nr==="half float"||Nr==="float16"?br="rgba16f":(Nr==="float"||Nr==="float32")&&(br="rgba32f")),"colorFormat"in Tr&&(br=Tr.colorFormat,0<=lr.indexOf(br)?Lr=!0:0<=Yr.indexOf(br)&&(Lr=!1))),("depthTexture"in Tr||"depthStencilTexture"in Tr)&&(Xn=!(!Tr.depthTexture&&!Tr.depthStencilTexture)),"depth"in Tr&&(typeof Tr.depth=="boolean"?Ir=Tr.depth:(_n=Tr.depth,Zr=!1)),"stencil"in Tr&&(typeof Tr.stencil=="boolean"?Zr=Tr.stencil:(Wn=Tr.stencil,Ir=!1)),"depthStencil"in Tr&&(typeof Tr.depthStencil=="boolean"?Ir=Zr=Tr.depthStencil:(Ln=Tr.depthStencil,Zr=Ir=!1))):jt=sr=1;var Kn=null,Aa=null,Ta=null,oi=null;if(Array.isArray(Lt))Kn=Lt.map(Se);else if(Lt)Kn=[Se(Lt)];else for(Kn=Array(kn),Lt=0;Lt<kn;++Lt)Kn[Lt]=Ke(jt,sr,Lr,br,Nr);for(jt=jt||Kn[0].width,sr=sr||Kn[0].height,_n?Aa=Se(_n):Ir&&!Zr&&(Aa=Ke(jt,sr,Xn,"depth","uint32")),Wn?Ta=Se(Wn):Zr&&!Ir&&(Ta=Ke(jt,sr,!1,"stencil","uint8")),Ln?oi=Se(Ln):!_n&&!Wn&&Zr&&Ir&&(oi=Ke(jt,sr,Xn,"depth stencil","depth stencil")),Ir=null,Lt=0;Lt<Kn.length;++Lt)ft(Kn[Lt]),Kn[Lt]&&Kn[Lt].texture&&(Zr=At[Kn[Lt].texture._texture.format]*Ot[Kn[Lt].texture._texture.type],Ir===null&&(Ir=Zr));return ft(Aa),ft(Ta),ft(oi),vt(Hr),Hr.width=jt,Hr.height=sr,Hr.colorAttachments=Kn,Hr.depthAttachment=Aa,Hr.stencilAttachment=Ta,Hr.depthStencilAttachment=oi,Ur.color=Kn.map(Xe),Ur.depth=Xe(Aa),Ur.stencil=Xe(Ta),Ur.depthStencil=Xe(oi),Ur.width=Hr.width,Ur.height=Hr.height,St(Hr),Ur}var Hr=new pt;return tt.framebufferCount++,Ur(gr,mr),le(Ur,{resize:function(Tr,et){var Lt=Math.max(Tr|0,1),jt=Math.max(et|0||Lt,1);if(Lt===Hr.width&&jt===Hr.height)return Ur;for(var sr=Hr.colorAttachments,Ir=0;Ir<sr.length;++Ir)ot(sr[Ir],Lt,jt);return ot(Hr.depthAttachment,Lt,jt),ot(Hr.stencilAttachment,Lt,jt),ot(Hr.depthStencilAttachment,Lt,jt),Hr.width=Ur.width=Lt,Hr.height=Ur.height=jt,St(Hr),Ur},_reglType:"framebuffer",_framebuffer:Hr,destroy:function(){Ct(Hr),vt(Hr)},use:function(Tr){ir.setFBO({framebuffer:Ur},Tr)}})}var ir={cur:null,next:null,dirty:!1,setFBO:null},lr=["rgba"],Yr=["rgba4","rgb565","rgb5 a1"];Gt.ext_srgb&&Yr.push("srgba"),Gt.ext_color_buffer_half_float&&Yr.push("rgba16f","rgb16f"),Gt.webgl_color_buffer_float&&Yr.push("rgba32f");var Pr=["uint8"];Gt.oes_texture_half_float&&Pr.push("half float","float16"),Gt.oes_texture_float&&Pr.push("float","float32");var wr=0,Jr={};return le(ir,{getFramebuffer:function(gr){return typeof gr=="function"&&gr._reglType==="framebuffer"&&(gr=gr._framebuffer,gr instanceof pt)?gr:null},create:Nt,createCube:function(gr){function mr(Hr){var Tr,et={color:null},Lt=0,jt=null;Tr="rgba";var sr="uint8",Ir=1;if(typeof Hr=="number"?Lt=Hr|0:Hr?("shape"in Hr?Lt=Hr.shape[0]:("radius"in Hr&&(Lt=Hr.radius|0),"width"in Hr?Lt=Hr.width|0:"height"in Hr&&(Lt=Hr.height|0)),("color"in Hr||"colors"in Hr)&&(jt=Hr.color||Hr.colors),jt||("colorCount"in Hr&&(Ir=Hr.colorCount|0),"colorType"in Hr&&(sr=Hr.colorType),"colorFormat"in Hr&&(Tr=Hr.colorFormat)),"depth"in Hr&&(et.depth=Hr.depth),"stencil"in Hr&&(et.stencil=Hr.stencil),"depthStencil"in Hr&&(et.depthStencil=Hr.depthStencil)):Lt=1,jt)if(Array.isArray(jt))for(Hr=[],Tr=0;Tr<jt.length;++Tr)Hr[Tr]=jt[Tr];else Hr=[jt];else for(Hr=Array(Ir),jt={radius:Lt,format:Tr,type:sr},Tr=0;Tr<Ir;++Tr)Hr[Tr]=Ht.createCube(jt);for(et.color=Array(Hr.length),Tr=0;Tr<Hr.length;++Tr)Ir=Hr[Tr],Lt=Lt||Ir.width,et.color[Tr]={target:34069,data:Hr[Tr]};for(Tr=0;6>Tr;++Tr){for(Ir=0;Ir<Hr.length;++Ir)et.color[Ir].target=34069+Tr;0<Tr&&(et.depth=Ur[0].depth,et.stencil=Ur[0].stencil,et.depthStencil=Ur[0].depthStencil),Ur[Tr]?Ur[Tr](et):Ur[Tr]=Nt(et)}return le(mr,{width:Lt,height:Lt,color:Hr})}var Ur=Array(6);return mr(gr),le(mr,{faces:Ur,resize:function(Hr){var Tr=Hr|0;if(Tr===mr.width)return mr;var et=mr.color;for(Hr=0;Hr<et.length;++Hr)et[Hr].resize(Tr);for(Hr=0;6>Hr;++Hr)Ur[Hr].resize(Tr);return mr.width=mr.height=Tr,mr},_reglType:"framebufferCube",destroy:function(){Ur.forEach(function(Hr){Hr.destroy()})}})},clear:function(){Oe(Jr).forEach(Ct)},restore:function(){ir.cur=null,ir.next=null,ir.dirty=!0,Oe(Jr).forEach(function(gr){gr.framebuffer=nt.createFramebuffer(),St(gr)})}})}function B(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function F(nt,Gt,Kt,Ht,_r,tt,je){function st(St){if(St!==Ct.currentVAO){var Nt=Gt.oes_vertex_array_object;St?Nt.bindVertexArrayOES(St.vao):Nt.bindVertexArrayOES(null),Ct.currentVAO=St}}function ft(St){if(St!==Ct.currentVAO){if(St)St.bindAttrs();else{for(var Nt=Gt.angle_instanced_arrays,ir=0;ir<ot.length;++ir){var lr=ot[ir];lr.buffer?(nt.enableVertexAttribArray(ir),lr.buffer.bind(),nt.vertexAttribPointer(ir,lr.size,lr.type,lr.normalized,lr.stride,lr.offfset),Nt&&lr.divisor&&Nt.vertexAttribDivisorANGLE(ir,lr.divisor)):(nt.disableVertexAttribArray(ir),nt.vertexAttrib4f(ir,lr.x,lr.y,lr.z,lr.w))}je.elements?nt.bindBuffer(34963,je.elements.buffer.buffer):nt.bindBuffer(34963,null)}Ct.currentVAO=St}}function Me(){Oe(vt).forEach(function(St){St.destroy()})}function Se(){this.id=++pt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var St=Gt.oes_vertex_array_object;this.vao=St?St.createVertexArrayOES():null,vt[this.id]=this,this.buffers=[]}function Ke(){Gt.oes_vertex_array_object&&Oe(vt).forEach(function(St){St.refresh()})}var Xe=Kt.maxAttributes,ot=Array(Xe);for(Kt=0;Kt<Xe;++Kt)ot[Kt]=new B;var pt=0,vt={},Ct={Record:B,scope:{},state:ot,currentVAO:null,targetVAO:null,restore:Gt.oes_vertex_array_object?Ke:function(){},createVAO:function(St){function Nt(lr){var Yr;Array.isArray(lr)?(Yr=lr,ir.elements&&ir.ownsElements&&ir.elements.destroy(),ir.elements=null,ir.ownsElements=!1,ir.offset=0,ir.count=0,ir.instances=-1,ir.primitive=4):(lr.elements?(Yr=lr.elements,ir.ownsElements?(typeof Yr=="function"&&Yr._reglType==="elements"?ir.elements.destroy():ir.elements(Yr),ir.ownsElements=!1):tt.getElements(lr.elements)?(ir.elements=lr.elements,ir.ownsElements=!1):(ir.elements=tt.create(lr.elements),ir.ownsElements=!0)):(ir.elements=null,ir.ownsElements=!1),Yr=lr.attributes,ir.offset=0,ir.count=-1,ir.instances=-1,ir.primitive=4,ir.elements&&(ir.count=ir.elements._elements.vertCount,ir.primitive=ir.elements._elements.primType),"offset"in lr&&(ir.offset=lr.offset|0),"count"in lr&&(ir.count=lr.count|0),"instances"in lr&&(ir.instances=lr.instances|0),"primitive"in lr&&(ir.primitive=Ne[lr.primitive])),lr={};var Pr=ir.attributes;Pr.length=Yr.length;for(var wr=0;wr<Yr.length;++wr){var Jr=Yr[wr],gr=Pr[wr]=new B,mr=Jr.data||Jr;if(Array.isArray(mr)||De(mr)||y(mr)){var Ur;ir.buffers[wr]&&(Ur=ir.buffers[wr],De(mr)&&Ur._buffer.byteLength>=mr.byteLength?Ur.subdata(mr):(Ur.destroy(),ir.buffers[wr]=null)),ir.buffers[wr]||(Ur=ir.buffers[wr]=_r.create(Jr,34962,!1,!0)),gr.buffer=_r.getBuffer(Ur),gr.size=gr.buffer.dimension|0,gr.normalized=!1,gr.type=gr.buffer.dtype,gr.offset=0,gr.stride=0,gr.divisor=0,gr.state=1,lr[wr]=1}else _r.getBuffer(Jr)?(gr.buffer=_r.getBuffer(Jr),gr.size=gr.buffer.dimension|0,gr.normalized=!1,gr.type=gr.buffer.dtype,gr.offset=0,gr.stride=0,gr.divisor=0,gr.state=1):_r.getBuffer(Jr.buffer)?(gr.buffer=_r.getBuffer(Jr.buffer),gr.size=(+Jr.size||gr.buffer.dimension)|0,gr.normalized=!!Jr.normalized||!1,gr.type="type"in Jr?Pe[Jr.type]:gr.buffer.dtype,gr.offset=(Jr.offset||0)|0,gr.stride=(Jr.stride||0)|0,gr.divisor=(Jr.divisor||0)|0,gr.state=1):"x"in Jr&&(gr.x=+Jr.x||0,gr.y=+Jr.y||0,gr.z=+Jr.z||0,gr.w=+Jr.w||0,gr.state=2)}for(Ur=0;Ur<ir.buffers.length;++Ur)!lr[Ur]&&ir.buffers[Ur]&&(ir.buffers[Ur].destroy(),ir.buffers[Ur]=null);return ir.refresh(),Nt}var ir=new Se;return Ht.vaoCount+=1,Nt.destroy=function(){for(var lr=0;lr<ir.buffers.length;++lr)ir.buffers[lr]&&ir.buffers[lr].destroy();ir.buffers.length=0,ir.ownsElements&&(ir.elements.destroy(),ir.elements=null,ir.ownsElements=!1),ir.destroy()},Nt._vao=ir,Nt._reglType="vao",Nt(St)},getVAO:function(St){return typeof St=="function"&&St._vao?St._vao:null},destroyBuffer:function(St){for(var Nt=0;Nt<ot.length;++Nt){var ir=ot[Nt];ir.buffer===St&&(nt.disableVertexAttribArray(Nt),ir.buffer=null)}},setVAO:Gt.oes_vertex_array_object?st:ft,clear:Gt.oes_vertex_array_object?Me:function(){}};return Se.prototype.bindAttrs=function(){for(var St=Gt.angle_instanced_arrays,Nt=this.attributes,ir=0;ir<Nt.length;++ir){var lr=Nt[ir];lr.buffer?(nt.enableVertexAttribArray(ir),nt.bindBuffer(34962,lr.buffer.buffer),nt.vertexAttribPointer(ir,lr.size,lr.type,lr.normalized,lr.stride,lr.offset),St&&lr.divisor&&St.vertexAttribDivisorANGLE(ir,lr.divisor)):(nt.disableVertexAttribArray(ir),nt.vertexAttrib4f(ir,lr.x,lr.y,lr.z,lr.w))}for(St=Nt.length;St<Xe;++St)nt.disableVertexAttribArray(St);(St=tt.getElements(this.elements))?nt.bindBuffer(34963,St.buffer.buffer):nt.bindBuffer(34963,null)},Se.prototype.refresh=function(){var St=Gt.oes_vertex_array_object;St&&(St.bindVertexArrayOES(this.vao),this.bindAttrs(),Ct.currentVAO=null,St.bindVertexArrayOES(null))},Se.prototype.destroy=function(){if(this.vao){var St=Gt.oes_vertex_array_object;this===Ct.currentVAO&&(Ct.currentVAO=null,St.bindVertexArrayOES(null)),St.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),vt[this.id]&&(delete vt[this.id],--Ht.vaoCount)},Ct}function V(nt,Gt,Kt,Ht){function _r(pt,vt,Ct,St){this.name=pt,this.id=vt,this.location=Ct,this.info=St}function tt(pt,vt){for(var Ct=0;Ct<pt.length;++Ct)if(pt[Ct].id===vt.id){pt[Ct].location=vt.location;return}pt.push(vt)}function je(pt,vt,Ct){Ct=pt===35632?Me:Se;var St=Ct[vt];if(!St){var Nt=Gt.str(vt),St=nt.createShader(pt);nt.shaderSource(St,Nt),nt.compileShader(St),Ct[vt]=St}return St}function st(pt,vt){this.id=ot++,this.fragId=pt,this.vertId=vt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ht.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ft(pt,vt,Ct){var St;St=je(35632,pt.fragId);var Nt=je(35633,pt.vertId);if(vt=pt.program=nt.createProgram(),nt.attachShader(vt,St),nt.attachShader(vt,Nt),Ct)for(St=0;St<Ct.length;++St)Nt=Ct[St],nt.bindAttribLocation(vt,Nt[0],Nt[1]);nt.linkProgram(vt),Nt=nt.getProgramParameter(vt,35718),Ht.profile&&(pt.stats.uniformsCount=Nt);var ir=pt.uniforms;for(St=0;St<Nt;++St)if(Ct=nt.getActiveUniform(vt,St))if(1<Ct.size)for(var lr=0;lr<Ct.size;++lr){var Yr=Ct.name.replace("[0]","["+lr+"]");tt(ir,new _r(Yr,Gt.id(Yr),nt.getUniformLocation(vt,Yr),Ct))}else tt(ir,new _r(Ct.name,Gt.id(Ct.name),nt.getUniformLocation(vt,Ct.name),Ct));for(Nt=nt.getProgramParameter(vt,35721),Ht.profile&&(pt.stats.attributesCount=Nt),pt=pt.attributes,St=0;St<Nt;++St)(Ct=nt.getActiveAttrib(vt,St))&&tt(pt,new _r(Ct.name,Gt.id(Ct.name),nt.getAttribLocation(vt,Ct.name),Ct))}var Me={},Se={},Ke={},Xe=[],ot=0;return Ht.profile&&(Kt.getMaxUniformsCount=function(){var pt=0;return Xe.forEach(function(vt){vt.stats.uniformsCount>pt&&(pt=vt.stats.uniformsCount)}),pt},Kt.getMaxAttributesCount=function(){var pt=0;return Xe.forEach(function(vt){vt.stats.attributesCount>pt&&(pt=vt.stats.attributesCount)}),pt}),{clear:function(){var pt=nt.deleteShader.bind(nt);Oe(Me).forEach(pt),Me={},Oe(Se).forEach(pt),Se={},Xe.forEach(function(vt){nt.deleteProgram(vt.program)}),Xe.length=0,Ke={},Kt.shaderCount=0},program:function(pt,vt,Ct,St){var Nt=Ke[vt];Nt||(Nt=Ke[vt]={});var ir=Nt[pt];if(ir&&(ir.refCount++,!St))return ir;var lr=new st(vt,pt);return Kt.shaderCount++,ft(lr,Ct,St),ir||(Nt[pt]=lr),Xe.push(lr),le(lr,{destroy:function(){if(lr.refCount--,0>=lr.refCount){nt.deleteProgram(lr.program);var Yr=Xe.indexOf(lr);Xe.splice(Yr,1),Kt.shaderCount--}0>=Nt[lr.vertId].refCount&&(nt.deleteShader(Se[lr.vertId]),delete Se[lr.vertId],delete Ke[lr.fragId][lr.vertId]),Object.keys(Ke[lr.fragId]).length||(nt.deleteShader(Me[lr.fragId]),delete Me[lr.fragId],delete Ke[lr.fragId])}})},restore:function(){Me={},Se={};for(var pt=0;pt<Xe.length;++pt)ft(Xe[pt],null,Xe[pt].attributes.map(function(vt){return[vt.location,vt.name]}))},shader:je,frag:-1,vert:-1}}function Y(nt,Gt,Kt,Ht,_r,tt,je){function st(Me){var Se;Se=Gt.next===null?5121:Gt.next.colorAttachments[0].texture._texture.type;var Ke=0,Xe=0,ot=Ht.framebufferWidth,pt=Ht.framebufferHeight,vt=null;return De(Me)?vt=Me:Me&&(Ke=Me.x|0,Xe=Me.y|0,ot=(Me.width||Ht.framebufferWidth-Ke)|0,pt=(Me.height||Ht.framebufferHeight-Xe)|0,vt=Me.data||null),Kt(),Me=ot*pt*4,vt||(Se===5121?vt=new Uint8Array(Me):Se===5126&&(vt=vt||new Float32Array(Me))),nt.pixelStorei(3333,4),nt.readPixels(Ke,Xe,ot,pt,6408,Se,vt),vt}function ft(Me){var Se;return Gt.setFBO({framebuffer:Me.framebuffer},function(){Se=st(Me)}),Se}return function(Me){return Me&&"framebuffer"in Me?ft(Me):st(Me)}}function K(nt){for(var Gt=Array(nt.length>>2),Ht=0;Ht<Gt.length;Ht++)Gt[Ht]=0;for(Ht=0;Ht<8*nt.length;Ht+=8)Gt[Ht>>5]|=(nt.charCodeAt(Ht/8)&255)<<24-Ht%32;var Kt=8*nt.length;nt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var Ht=Array(64),_r,tt,je,st,ft,Me,Se,Ke,Xe,ot,pt;for(Gt[Kt>>5]|=128<<24-Kt%32,Gt[(Kt+64>>9<<4)+15]=Kt,Ke=0;Ke<Gt.length;Ke+=16){for(Kt=nt[0],_r=nt[1],tt=nt[2],je=nt[3],st=nt[4],ft=nt[5],Me=nt[6],Se=nt[7],Xe=0;64>Xe;Xe++){if(16>Xe)Ht[Xe]=Gt[Xe+Ke];else{ot=Xe,pt=Ht[Xe-2],pt=Z(pt,17)^Z(pt,19)^pt>>>10,pt=re(pt,Ht[Xe-7]);var vt;vt=Ht[Xe-15],vt=Z(vt,7)^Z(vt,18)^vt>>>3,Ht[ot]=re(re(pt,vt),Ht[Xe-16])}ot=st,ot=Z(ot,6)^Z(ot,11)^Z(ot,25),ot=re(re(re(re(Se,ot),st&ft^~st&Me),Jt[Xe]),Ht[Xe]),Se=Kt,Se=Z(Se,2)^Z(Se,13)^Z(Se,22),pt=re(Se,Kt&_r^Kt&tt^_r&tt),Se=Me,Me=ft,ft=st,st=re(je,ot),je=tt,tt=_r,_r=Kt,Kt=re(ot,pt)}nt[0]=re(Kt,nt[0]),nt[1]=re(_r,nt[1]),nt[2]=re(tt,nt[2]),nt[3]=re(je,nt[3]),nt[4]=re(st,nt[4]),nt[5]=re(ft,nt[5]),nt[6]=re(Me,nt[6]),nt[7]=re(Se,nt[7])}for(Gt="",Ht=0;Ht<32*nt.length;Ht+=8)Gt+=String.fromCharCode(nt[Ht>>5]>>>24-Ht%32&255);return Gt}function J(nt){for(var Gt="",Kt,Ht=0;Ht<nt.length;Ht++)Kt=nt.charCodeAt(Ht),Gt+="0123456789abcdef".charAt(Kt>>>4&15)+"0123456789abcdef".charAt(Kt&15);return Gt}function G(nt){for(var Gt="",Kt=-1,Ht,_r;++Kt<nt.length;)Ht=nt.charCodeAt(Kt),_r=Kt+1<nt.length?nt.charCodeAt(Kt+1):0,55296<=Ht&&56319>=Ht&&56320<=_r&&57343>=_r&&(Ht=65536+((Ht&1023)<<10)+(_r&1023),Kt++),127>=Ht?Gt+=String.fromCharCode(Ht):2047>=Ht?Gt+=String.fromCharCode(192|Ht>>>6&31,128|Ht&63):65535>=Ht?Gt+=String.fromCharCode(224|Ht>>>12&15,128|Ht>>>6&63,128|Ht&63):2097151>=Ht&&(Gt+=String.fromCharCode(240|Ht>>>18&7,128|Ht>>>12&63,128|Ht>>>6&63,128|Ht&63));return Gt}function Z(nt,Gt){return nt>>>Gt|nt<<32-Gt}function re(nt,Gt){var Kt=(nt&65535)+(Gt&65535);return(nt>>16)+(Gt>>16)+(Kt>>16)<<16|Kt&65535}function se(nt){return Array.prototype.slice.call(nt)}function oe(nt){return se(nt).join("")}function N(nt){function Gt(){var Se=[],Ke=[];return le(function(){Se.push.apply(Se,se(arguments))},{def:function(){var Xe="v"+_r++;return Ke.push(Xe),0<arguments.length&&(Se.push(Xe,"="),Se.push.apply(Se,se(arguments)),Se.push(";")),Xe},toString:function(){return oe([0<Ke.length?"var "+Ke.join(",")+";":"",oe(Se)])}})}function Kt(){function Se(vt,Ct){Xe(vt,Ct,"=",Ke.def(vt,Ct),";")}var Ke=Gt(),Xe=Gt(),ot=Ke.toString,pt=Xe.toString;return le(function(){Ke.apply(Ke,se(arguments))},{def:Ke.def,entry:Ke,exit:Xe,save:Se,set:function(vt,Ct,St){Se(vt,Ct),Ke(vt,Ct,"=",St,";")},toString:function(){return ot()+pt()}})}var Ht=nt&&nt.cache,_r=0,tt=[],je=[],st=[],ft=Gt(),Me={};return{global:ft,link:function(Se,Ke){var Xe=Ke&&Ke.stable;if(!Xe){for(var ot=0;ot<je.length;++ot)if(je[ot]===Se&&!st[ot])return tt[ot]}return ot="g"+_r++,tt.push(ot),je.push(Se),st.push(Xe),ot},block:Gt,proc:function(Se,Ke){function Xe(){var Ct="a"+ot.length;return ot.push(Ct),Ct}var ot=[];Ke=Ke||0;for(var pt=0;pt<Ke;++pt)Xe();var pt=Kt(),vt=pt.toString;return Me[Se]=le(pt,{arg:Xe,toString:function(){return oe(["function(",ot.join(),"){",vt(),"}"])}})},scope:Kt,cond:function(){var Se=oe(arguments),Ke=Kt(),Xe=Kt(),ot=Ke.toString,pt=Xe.toString;return le(Ke,{then:function(){return Ke.apply(Ke,se(arguments)),this},else:function(){return Xe.apply(Xe,se(arguments)),this},toString:function(){var vt=pt();return vt&&(vt="else{"+vt+"}"),oe(["if(",Se,"){",ot(),"}",vt])}})},compile:function(){var Se=['"use strict";',ft,"return {"];Object.keys(Me).forEach(function(ot){Se.push('"',ot,'":',Me[ot].toString(),",")}),Se.push("}");var Ke=oe(Se).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Xe;return Ht&&(Xe=J(K(G(Ke))),Ht[Xe])?Ht[Xe].apply(null,je):(Ke=Function.apply(null,tt.concat(Ke)),Ht&&(Ht[Xe]=Ke),Ke.apply(null,je))}}}function U(nt){return Array.isArray(nt)||De(nt)||y(nt)}function q(nt){return nt.sort(function(Gt,Kt){return Gt==="viewport"?-1:Kt==="viewport"?1:Gt<Kt?-1:1})}function Q(nt,Gt,Kt,Ht){this.thisDep=nt,this.contextDep=Gt,this.propDep=Kt,this.append=Ht}function W(nt){return nt&&!(nt.thisDep||nt.contextDep||nt.propDep)}function X(nt){return new Q(!1,!1,!1,nt)}function te(nt,Gt){var Kt=nt.type;if(Kt===0)return Kt=nt.data.length,new Q(!0,1<=Kt,2<=Kt,Gt);if(Kt===4)return Kt=nt.data,new Q(Kt.thisDep,Kt.contextDep,Kt.propDep,Gt);if(Kt===5)return new Q(!1,!1,!1,Gt);if(Kt===6){for(var Ht=Kt=!1,_r=!1,tt=0;tt<nt.data.length;++tt){var je=nt.data[tt];je.type===1?_r=!0:je.type===2?Ht=!0:je.type===3?Kt=!0:je.type===0?(Kt=!0,je=je.data,1<=je&&(Ht=!0),2<=je&&(_r=!0)):je.type===4&&(Kt=Kt||je.data.thisDep,Ht=Ht||je.data.contextDep,_r=_r||je.data.propDep)}return new Q(Kt,Ht,_r,Gt)}return new Q(Kt===3,Kt===2,Kt===1,Gt)}function ee(nt,Gt,Kt,Ht,_r,tt,je,st,ft,Me,Se,Ke,Xe,ot,pt,vt){function Ct(Ft){return Ft.replace(".","_")}function St(Ft,cr,qr){var nn=Ct(Ft);ia.push(Ft),Gn[nn]=An[nn]=!!qr,Yn[nn]=cr}function Nt(Ft,cr,qr){var nn=Ct(Ft);ia.push(Ft),Array.isArray(qr)?(An[nn]=qr.slice(),Gn[nn]=qr.slice()):An[nn]=Gn[nn]=qr,zn[nn]=cr}function ir(){var Ft=N({cache:pt}),cr=Ft.link,qr=Ft.global;Ft.id=si++,Ft.batchId="0";var nn=cr(ea),on=Ft.shared={props:"a0"};Object.keys(ea).forEach(function(dr){on[dr]=qr.def(nn,".",dr)});var Sn=Ft.next={},xn=Ft.current={};Object.keys(zn).forEach(function(dr){Array.isArray(An[dr])&&(Sn[dr]=qr.def(on.next,".",dr),xn[dr]=qr.def(on.current,".",dr))});var tn=Ft.constants={};Object.keys(wa).forEach(function(dr){tn[dr]=qr.def(JSON.stringify(wa[dr]))}),Ft.invoke=function(dr,Rr){switch(Rr.type){case 0:var dn=["this",on.context,on.props,Ft.batchId];return dr.def(cr(Rr.data),".call(",dn.slice(0,Math.max(Rr.data.length+1,4)),")");case 1:return dr.def(on.props,Rr.data);case 2:return dr.def(on.context,Rr.data);case 3:return dr.def("this",Rr.data);case 4:return Rr.data.append(Ft,dr),Rr.data.ref;case 5:return Rr.data.toString();case 6:return Rr.data.map(function(Bn){return Ft.invoke(dr,Bn)})}},Ft.attribCache={};var xr={};return Ft.scopeAttrib=function(dr){if(dr=Gt.id(dr),dr in xr)return xr[dr];var Rr=Me.scope[dr];return Rr||(Rr=Me.scope[dr]=new Va),xr[dr]=cr(Rr)},Ft}function lr(Ft){var cr=Ft.static;Ft=Ft.dynamic;var qr;if("profile"in cr){var nn=!!cr.profile;qr=X(function(Sn,xn){return nn}),qr.enable=nn}else if("profile"in Ft){var on=Ft.profile;qr=te(on,function(Sn,xn){return Sn.invoke(xn,on)})}return qr}function Yr(Ft,cr){var qr=Ft.static,nn=Ft.dynamic;if("framebuffer"in qr){var on=qr.framebuffer;return on?(on=st.getFramebuffer(on),X(function(xn,tn){var xr=xn.link(on),dr=xn.shared;return tn.set(dr.framebuffer,".next",xr),dr=dr.context,tn.set(dr,".framebufferWidth",xr+".width"),tn.set(dr,".framebufferHeight",xr+".height"),xr})):X(function(xn,tn){var xr=xn.shared;return tn.set(xr.framebuffer,".next","null"),xr=xr.context,tn.set(xr,".framebufferWidth",xr+".drawingBufferWidth"),tn.set(xr,".framebufferHeight",xr+".drawingBufferHeight"),"null"})}if("framebuffer"in nn){var Sn=nn.framebuffer;return te(Sn,function(xn,tn){var xr=xn.invoke(tn,Sn),dr=xn.shared,Rr=dr.framebuffer,xr=tn.def(Rr,".getFramebuffer(",xr,")");return tn.set(Rr,".next",xr),dr=dr.context,tn.set(dr,".framebufferWidth",xr+"?"+xr+".width:"+dr+".drawingBufferWidth"),tn.set(dr,".framebufferHeight",xr+"?"+xr+".height:"+dr+".drawingBufferHeight"),xr})}return null}function Pr(Ft,cr,qr){function nn(tn){if(tn in on){var xr=on[tn];tn=!0;var dr=xr.x|0,Rr=xr.y|0,dn,Bn;return"width"in xr?dn=xr.width|0:tn=!1,"height"in xr?Bn=xr.height|0:tn=!1,new Q(!tn&&cr&&cr.thisDep,!tn&&cr&&cr.contextDep,!tn&&cr&&cr.propDep,function(bn,Zn){var ta=bn.shared.context,pa=dn;"width"in xr||(pa=Zn.def(ta,".","framebufferWidth","-",dr));var ya=Bn;return"height"in xr||(ya=Zn.def(ta,".","framebufferHeight","-",Rr)),[dr,Rr,pa,ya]})}if(tn in Sn){var aa=Sn[tn];return tn=te(aa,function(bn,Zn){var ta=bn.invoke(Zn,aa),pa=bn.shared.context,ya=Zn.def(ta,".x|0"),la=Zn.def(ta,".y|0"),Da=Zn.def('"width" in ',ta,"?",ta,".width|0:","(",pa,".","framebufferWidth","-",ya,")"),ta=Zn.def('"height" in ',ta,"?",ta,".height|0:","(",pa,".","framebufferHeight","-",la,")");return[ya,la,Da,ta]}),cr&&(tn.thisDep=tn.thisDep||cr.thisDep,tn.contextDep=tn.contextDep||cr.contextDep,tn.propDep=tn.propDep||cr.propDep),tn}return cr?new Q(cr.thisDep,cr.contextDep,cr.propDep,function(bn,Zn){var ta=bn.shared.context;return[0,0,Zn.def(ta,".","framebufferWidth"),Zn.def(ta,".","framebufferHeight")]}):null}var on=Ft.static,Sn=Ft.dynamic;if(Ft=nn("viewport")){var xn=Ft;Ft=new Q(Ft.thisDep,Ft.contextDep,Ft.propDep,function(tn,xr){var dr=xn.append(tn,xr),Rr=tn.shared.context;return xr.set(Rr,".viewportWidth",dr[2]),xr.set(Rr,".viewportHeight",dr[3]),dr})}return{viewport:Ft,scissor_box:nn("scissor.box")}}function wr(Ft,cr){var qr=Ft.static;if(typeof qr.frag=="string"&&typeof qr.vert=="string"){if(0<Object.keys(cr.dynamic).length)return null;var qr=cr.static,nn=Object.keys(qr);if(0<nn.length&&typeof qr[nn[0]]=="number"){for(var on=[],Sn=0;Sn<nn.length;++Sn)on.push([qr[nn[Sn]]|0,nn[Sn]]);return on}}return null}function Jr(Ft,cr,qr){function nn(dr){if(dr in on){var Rr=Gt.id(on[dr]);return dr=X(function(){return Rr}),dr.id=Rr,dr}if(dr in Sn){var dn=Sn[dr];return te(dn,function(Bn,aa){var bn=Bn.invoke(aa,dn);return aa.def(Bn.shared.strings,".id(",bn,")")})}return null}var on=Ft.static,Sn=Ft.dynamic,xn=nn("frag"),tn=nn("vert"),xr=null;return W(xn)&&W(tn)?(xr=Se.program(tn.id,xn.id,null,qr),Ft=X(function(dr,Rr){return dr.link(xr)})):Ft=new Q(xn&&xn.thisDep||tn&&tn.thisDep,xn&&xn.contextDep||tn&&tn.contextDep,xn&&xn.propDep||tn&&tn.propDep,function(dr,Rr){var dn=dr.shared.shader,Bn;Bn=xn?xn.append(dr,Rr):Rr.def(dn,".","frag");var aa;return aa=tn?tn.append(dr,Rr):Rr.def(dn,".","vert"),Rr.def(dn+".program("+aa+","+Bn+")")}),{frag:xn,vert:tn,progVar:Ft,program:xr}}function gr(Ft,cr){function qr(bn,Zn){if(bn in nn){var ta=nn[bn]|0;return Zn?Sn.offset=ta:Sn.instances=ta,X(function(ya,la){return Zn&&(ya.OFFSET=ta),ta})}if(bn in on){var pa=on[bn];return te(pa,function(ya,la){var Da=ya.invoke(la,pa);return Zn&&(ya.OFFSET=Da),Da})}if(Zn){if(xr)return X(function(ya,la){return ya.OFFSET=0});if(xn)return new Q(tn.thisDep,tn.contextDep,tn.propDep,function(ya,la){return la.def(ya.shared.vao+".currentVAO?"+ya.shared.vao+".currentVAO.offset:0")})}else if(xn)return new Q(tn.thisDep,tn.contextDep,tn.propDep,function(ya,la){return la.def(ya.shared.vao+".currentVAO?"+ya.shared.vao+".currentVAO.instances:-1")});return null}var nn=Ft.static,on=Ft.dynamic,Sn={},xn=!1,tn=function(){if("vao"in nn){var bn=nn.vao;return bn!==null&&Me.getVAO(bn)===null&&(bn=Me.createVAO(bn)),xn=!0,Sn.vao=bn,X(function(ta){var pa=Me.getVAO(bn);return pa?ta.link(pa):"null"})}if("vao"in on){xn=!0;var Zn=on.vao;return te(Zn,function(ta,pa){var ya=ta.invoke(pa,Zn);return pa.def(ta.shared.vao+".getVAO("+ya+")")})}return null}(),xr=!1,dr=function(){if("elements"in nn){var bn=nn.elements;if(Sn.elements=bn,U(bn)){var Zn=Sn.elements=tt.create(bn,!0),bn=tt.getElements(Zn);xr=!0}else bn&&(bn=tt.getElements(bn),xr=!0);return Zn=X(function(pa,ya){if(bn){var la=pa.link(bn);return pa.ELEMENTS=la}return pa.ELEMENTS=null}),Zn.value=bn,Zn}if("elements"in on){xr=!0;var ta=on.elements;return te(ta,function(pa,ya){var la=pa.shared,Da=la.isBufferArgs,la=la.elements,oo=pa.invoke(ya,ta),Vo=ya.def("null"),Da=ya.def(Da,"(",oo,")"),oo=pa.cond(Da).then(Vo,"=",la,".createStream(",oo,");").else(Vo,"=",la,".getElements(",oo,");");return ya.entry(oo),ya.exit(pa.cond(Da).then(la,".destroyStream(",Vo,");")),pa.ELEMENTS=Vo})}return xn?new Q(tn.thisDep,tn.contextDep,tn.propDep,function(pa,ya){return ya.def(pa.shared.vao+".currentVAO?"+pa.shared.elements+".getElements("+pa.shared.vao+".currentVAO.elements):null")}):null}(),Rr=qr("offset",!0),dn=function(){if("primitive"in nn){var bn=nn.primitive;return Sn.primitive=bn,X(function(ta,pa){return Ne[bn]})}if("primitive"in on){var Zn=on.primitive;return te(Zn,function(ta,pa){var ya=ta.constants.primTypes,la=ta.invoke(pa,Zn);return pa.def(ya,"[",la,"]")})}return xr?W(dr)?dr.value?X(function(ta,pa){return pa.def(ta.ELEMENTS,".primType")}):X(function(){return 4}):new Q(dr.thisDep,dr.contextDep,dr.propDep,function(ta,pa){var ya=ta.ELEMENTS;return pa.def(ya,"?",ya,".primType:",4)}):xn?new Q(tn.thisDep,tn.contextDep,tn.propDep,function(ta,pa){return pa.def(ta.shared.vao+".currentVAO?"+ta.shared.vao+".currentVAO.primitive:4")}):null}(),Bn=function(){if("count"in nn){var bn=nn.count|0;return Sn.count=bn,X(function(){return bn})}if("count"in on){var Zn=on.count;return te(Zn,function(ta,pa){return ta.invoke(pa,Zn)})}return xr?W(dr)?dr?Rr?new Q(Rr.thisDep,Rr.contextDep,Rr.propDep,function(ta,pa){return pa.def(ta.ELEMENTS,".vertCount-",ta.OFFSET)}):X(function(ta,pa){return pa.def(ta.ELEMENTS,".vertCount")}):X(function(){return-1}):new Q(dr.thisDep||Rr.thisDep,dr.contextDep||Rr.contextDep,dr.propDep||Rr.propDep,function(ta,pa){var ya=ta.ELEMENTS;return ta.OFFSET?pa.def(ya,"?",ya,".vertCount-",ta.OFFSET,":-1"):pa.def(ya,"?",ya,".vertCount:-1")}):xn?new Q(tn.thisDep,tn.contextDep,tn.propDep,function(ta,pa){return pa.def(ta.shared.vao,".currentVAO?",ta.shared.vao,".currentVAO.count:-1")}):null}(),aa=qr("instances",!1);return{elements:dr,primitive:dn,count:Bn,instances:aa,offset:Rr,vao:tn,vaoActive:xn,elementsActive:xr,static:Sn}}function mr(Ft,cr){var qr=Ft.static,nn=Ft.dynamic,on={};return ia.forEach(function(Sn){function xn(xr,dr){if(Sn in qr){var Rr=xr(qr[Sn]);on[tn]=X(function(){return Rr})}else if(Sn in nn){var dn=nn[Sn];on[tn]=te(dn,function(Bn,aa){return dr(Bn,aa,Bn.invoke(aa,dn))})}}var tn=Ct(Sn);switch(Sn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return xn(function(xr){return xr},function(xr,dr,Rr){return Rr});case"depth.func":return xn(function(xr){return er[xr]},function(xr,dr,Rr){return dr.def(xr.constants.compareFuncs,"[",Rr,"]")});case"depth.range":return xn(function(xr){return xr},function(xr,dr,Rr){return xr=dr.def("+",Rr,"[0]"),dr=dr.def("+",Rr,"[1]"),[xr,dr]});case"blend.func":return xn(function(xr){return[rr["srcRGB"in xr?xr.srcRGB:xr.src],rr["dstRGB"in xr?xr.dstRGB:xr.dst],rr["srcAlpha"in xr?xr.srcAlpha:xr.src],rr["dstAlpha"in xr?xr.dstAlpha:xr.dst]]},function(xr,dr,Rr){function dn(Zn,ta){return dr.def('"',Zn,ta,'" in ',Rr,"?",Rr,".",Zn,ta,":",Rr,".",Zn)}xr=xr.constants.blendFuncs;var Bn=dn("src","RGB"),aa=dn("dst","RGB"),Bn=dr.def(xr,"[",Bn,"]"),bn=dr.def(xr,"[",dn("src","Alpha"),"]"),aa=dr.def(xr,"[",aa,"]");return xr=dr.def(xr,"[",dn("dst","Alpha"),"]"),[Bn,aa,bn,xr]});case"blend.equation":return xn(function(xr){if(typeof xr=="string")return[ti[xr],ti[xr]];if(typeof xr=="object")return[ti[xr.rgb],ti[xr.alpha]]},function(xr,dr,Rr){var dn=xr.constants.blendEquations,Bn=dr.def(),aa=dr.def();return xr=xr.cond("typeof ",Rr,'==="string"'),xr.then(Bn,"=",aa,"=",dn,"[",Rr,"];"),xr.else(Bn,"=",dn,"[",Rr,".rgb];",aa,"=",dn,"[",Rr,".alpha];"),dr(xr),[Bn,aa]});case"blend.color":return xn(function(xr){return i(4,function(dr){return+xr[dr]})},function(xr,dr,Rr){return i(4,function(dn){return dr.def("+",Rr,"[",dn,"]")})});case"stencil.mask":return xn(function(xr){return xr|0},function(xr,dr,Rr){return dr.def(Rr,"|0")});case"stencil.func":return xn(function(xr){return[er[xr.cmp||"keep"],xr.ref||0,"mask"in xr?xr.mask:-1]},function(xr,dr,Rr){xr=dr.def('"cmp" in ',Rr,"?",xr.constants.compareFuncs,"[",Rr,".cmp]",":",7680);var dn=dr.def(Rr,".ref|0");return dr=dr.def('"mask" in ',Rr,"?",Rr,".mask|0:-1"),[xr,dn,dr]});case"stencil.opFront":case"stencil.opBack":return xn(function(xr){return[Sn==="stencil.opBack"?1029:1028,pr[xr.fail||"keep"],pr[xr.zfail||"keep"],pr[xr.zpass||"keep"]]},function(xr,dr,Rr){function dn(aa){return dr.def('"',aa,'" in ',Rr,"?",Bn,"[",Rr,".",aa,"]:",7680)}var Bn=xr.constants.stencilOps;return[Sn==="stencil.opBack"?1029:1028,dn("fail"),dn("zfail"),dn("zpass")]});case"polygonOffset.offset":return xn(function(xr){return[xr.factor|0,xr.units|0]},function(xr,dr,Rr){return xr=dr.def(Rr,".factor|0"),dr=dr.def(Rr,".units|0"),[xr,dr]});case"cull.face":return xn(function(xr){var dr=0;return xr==="front"?dr=1028:xr==="back"&&(dr=1029),dr},function(xr,dr,Rr){return dr.def(Rr,'==="front"?',1028,":",1029)});case"lineWidth":return xn(function(xr){return xr},function(xr,dr,Rr){return Rr});case"frontFace":return xn(function(xr){return Xr[xr]},function(xr,dr,Rr){return dr.def(Rr+'==="cw"?2304:2305')});case"colorMask":return xn(function(xr){return xr.map(function(dr){return!!dr})},function(xr,dr,Rr){return i(4,function(dn){return"!!"+Rr+"["+dn+"]"})});case"sample.coverage":return xn(function(xr){return["value"in xr?xr.value:1,!!xr.invert]},function(xr,dr,Rr){return xr=dr.def('"value" in ',Rr,"?+",Rr,".value:1"),dr=dr.def("!!",Rr,".invert"),[xr,dr]})}}),on}function Ur(Ft,cr){var qr=Ft.static,nn=Ft.dynamic,on={};return Object.keys(qr).forEach(function(Sn){var xn=qr[Sn],tn;if(typeof xn=="number"||typeof xn=="boolean")tn=X(function(){return xn});else if(typeof xn=="function"){var xr=xn._reglType;xr==="texture2d"||xr==="textureCube"?tn=X(function(dr){return dr.link(xn)}):(xr==="framebuffer"||xr==="framebufferCube")&&(tn=X(function(dr){return dr.link(xn.color[0])}))}else m(xn)&&(tn=X(function(dr){return dr.global.def("[",i(xn.length,function(Rr){return xn[Rr]}),"]")}));tn.value=xn,on[Sn]=tn}),Object.keys(nn).forEach(function(Sn){var xn=nn[Sn];on[Sn]=te(xn,function(tn,xr){return tn.invoke(xr,xn)})}),on}function Hr(Ft,cr){var qr=Ft.static,nn=Ft.dynamic,on={};return Object.keys(qr).forEach(function(Sn){var xn=qr[Sn],tn=Gt.id(Sn),xr=new Va;if(U(xn))xr.state=1,xr.buffer=_r.getBuffer(_r.create(xn,34962,!1,!0)),xr.type=0;else{var dr=_r.getBuffer(xn);if(dr)xr.state=1,xr.buffer=dr,xr.type=0;else if("constant"in xn){var Rr=xn.constant;xr.buffer="null",xr.state=2,typeof Rr=="number"?xr.x=Rr:Bt.forEach(function(ta,pa){pa<Rr.length&&(xr[ta]=Rr[pa])})}else{var dr=U(xn.buffer)?_r.getBuffer(_r.create(xn.buffer,34962,!1,!0)):_r.getBuffer(xn.buffer),dn=xn.offset|0,Bn=xn.stride|0,aa=xn.size|0,bn=!!xn.normalized,Zn=0;"type"in xn&&(Zn=Pe[xn.type]),xn=xn.divisor|0,xr.buffer=dr,xr.state=1,xr.size=aa,xr.normalized=bn,xr.type=Zn||dr.dtype,xr.offset=dn,xr.stride=Bn,xr.divisor=xn}}on[Sn]=X(function(ta,pa){var ya=ta.attribCache;if(tn in ya)return ya[tn];var la={isStream:!1};return Object.keys(xr).forEach(function(Da){la[Da]=xr[Da]}),xr.buffer&&(la.buffer=ta.link(xr.buffer),la.type=la.type||la.buffer+".dtype"),ya[tn]=la})}),Object.keys(nn).forEach(function(Sn){var xn=nn[Sn];on[Sn]=te(xn,function(tn,xr){function dr(ya){xr(bn[ya],"=",Rr,".",ya,"|0;")}var Rr=tn.invoke(xr,xn),dn=tn.shared,Bn=tn.constants,aa=dn.isBufferArgs,dn=dn.buffer,bn={isStream:xr.def(!1)},Zn=new Va;Zn.state=1,Object.keys(Zn).forEach(function(ya){bn[ya]=xr.def(""+Zn[ya])});var ta=bn.buffer,pa=bn.type;return xr("if(",aa,"(",Rr,")){",bn.isStream,"=true;",ta,"=",dn,".createStream(",34962,",",Rr,");",pa,"=",ta,".dtype;","}else{",ta,"=",dn,".getBuffer(",Rr,");","if(",ta,"){",pa,"=",ta,".dtype;",'}else if("constant" in ',Rr,"){",bn.state,"=",2,";","if(typeof "+Rr+'.constant === "number"){',bn[Bt[0]],"=",Rr,".constant;",Bt.slice(1).map(function(ya){return bn[ya]}).join("="),"=0;","}else{",Bt.map(function(ya,la){return bn[ya]+"="+Rr+".constant.length>"+la+"?"+Rr+".constant["+la+"]:0;"}).join(""),"}}else{","if(",aa,"(",Rr,".buffer)){",ta,"=",dn,".createStream(",34962,",",Rr,".buffer);","}else{",ta,"=",dn,".getBuffer(",Rr,".buffer);","}",pa,'="type" in ',Rr,"?",Bn.glTypes,"[",Rr,".type]:",ta,".dtype;",bn.normalized,"=!!",Rr,".normalized;"),dr("size"),dr("offset"),dr("stride"),dr("divisor"),xr("}}"),xr.exit("if(",bn.isStream,"){",dn,".destroyStream(",ta,");","}"),bn})}),on}function Tr(Ft){var cr=Ft.static,qr=Ft.dynamic,nn={};return Object.keys(cr).forEach(function(on){var Sn=cr[on];nn[on]=X(function(xn,tn){return typeof Sn=="number"||typeof Sn=="boolean"?""+Sn:xn.link(Sn)})}),Object.keys(qr).forEach(function(on){var Sn=qr[on];nn[on]=te(Sn,function(xn,tn){return xn.invoke(tn,Sn)})}),nn}function et(Ft,cr,qr,nn,on){function Sn(Zn){var ta=xr[Zn];ta&&(Rr[Zn]=ta)}var xn=wr(Ft,cr),tn=Yr(Ft),xr=Pr(Ft,tn),dr=gr(Ft),Rr=mr(Ft),dn=Jr(Ft,on,xn);Sn("viewport"),Sn(Ct("scissor.box"));var Bn=0<Object.keys(Rr).length,tn={framebuffer:tn,draw:dr,shader:dn,state:Rr,dirty:Bn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(tn.profile=lr(Ft),tn.uniforms=Ur(qr),tn.drawVAO=tn.scopeVAO=dr.vao,!tn.drawVAO&&dn.program&&!xn&&Kt.angle_instanced_arrays&&dr.static.elements){var aa=!0;if(Ft=dn.program.attributes.map(function(Zn){return Zn=cr.static[Zn],aa=aa&&!!Zn,Zn}),aa&&0<Ft.length){var bn=Me.getVAO(Me.createVAO({attributes:Ft,elements:dr.static.elements}));tn.drawVAO=new Q(null,null,null,function(Zn,ta){return Zn.link(bn)}),tn.useVAO=!0}}return xn?tn.useVAO=!0:tn.attributes=Hr(cr),tn.context=Tr(nn),tn}function Lt(Ft,cr,qr){var nn=Ft.shared.context,on=Ft.scope();Object.keys(qr).forEach(function(Sn){cr.save(nn,"."+Sn);var xn=qr[Sn].append(Ft,cr);Array.isArray(xn)?on(nn,".",Sn,"=[",xn.join(),"];"):on(nn,".",Sn,"=",xn,";")}),cr(on)}function jt(Ft,cr,qr,nn){var on=Ft.shared,Sn=on.gl,xn=on.framebuffer,tn;vn&&(tn=cr.def(on.extensions,".webgl_draw_buffers"));var xr=Ft.constants,on=xr.drawBuffer,xr=xr.backBuffer;Ft=qr?qr.append(Ft,cr):cr.def(xn,".next"),nn||cr("if(",Ft,"!==",xn,".cur){"),cr("if(",Ft,"){",Sn,".bindFramebuffer(",36160,",",Ft,".framebuffer);"),vn&&cr(tn,".drawBuffersWEBGL(",on,"[",Ft,".colorAttachments.length]);"),cr("}else{",Sn,".bindFramebuffer(",36160,",null);"),vn&&cr(tn,".drawBuffersWEBGL(",xr,");"),cr("}",xn,".cur=",Ft,";"),nn||cr("}")}function sr(Ft,cr,qr){var nn=Ft.shared,on=nn.gl,Sn=Ft.current,xn=Ft.next,tn=nn.current,xr=nn.next,dr=Ft.cond(tn,".dirty");ia.forEach(function(Rr){if(Rr=Ct(Rr),!(Rr in qr.state)){var dn,Bn;if(Rr in xn){dn=xn[Rr],Bn=Sn[Rr];var aa=i(An[Rr].length,function(bn){return dr.def(dn,"[",bn,"]")});dr(Ft.cond(aa.map(function(bn,Zn){return bn+"!=="+Bn+"["+Zn+"]"}).join("||")).then(on,".",zn[Rr],"(",aa,");",aa.map(function(bn,Zn){return Bn+"["+Zn+"]="+bn}).join(";"),";"))}else dn=dr.def(xr,".",Rr),aa=Ft.cond(dn,"!==",tn,".",Rr),dr(aa),Rr in Yn?aa(Ft.cond(dn).then(on,".enable(",Yn[Rr],");").else(on,".disable(",Yn[Rr],");"),tn,".",Rr,"=",dn,";"):aa(on,".",zn[Rr],"(",dn,");",tn,".",Rr,"=",dn,";")}}),Object.keys(qr.state).length===0&&dr(tn,".dirty=false;"),cr(dr)}function Ir(Ft,cr,qr,nn){var on=Ft.shared,Sn=Ft.current,xn=on.current,tn=on.gl,xr;q(Object.keys(qr)).forEach(function(dr){var Rr=qr[dr];if(!nn||nn(Rr)){var dn=Rr.append(Ft,cr);if(Yn[dr]){var Bn=Yn[dr];W(Rr)?(xr=Ft.link(dn,{stable:!0}),cr(Ft.cond(xr).then(tn,".enable(",Bn,");").else(tn,".disable(",Bn,");")),cr(xn,".",dr,"=",xr,";")):(cr(Ft.cond(dn).then(tn,".enable(",Bn,");").else(tn,".disable(",Bn,");")),cr(xn,".",dr,"=",dn,";"))}else if(m(dn)){var aa=Sn[dr];cr(tn,".",zn[dr],"(",dn,");",dn.map(function(bn,Zn){return aa+"["+Zn+"]="+bn}).join(";"),";")}else W(Rr)?(xr=Ft.link(dn,{stable:!0}),cr(tn,".",zn[dr],"(",xr,");",xn,".",dr,"=",xr,";")):cr(tn,".",zn[dr],"(",dn,");",xn,".",dr,"=",dn,";")}})}function Zr(Ft,cr){Mr&&(Ft.instancing=cr.def(Ft.shared.extensions,".angle_instanced_arrays"))}function Lr(Ft,cr,qr,nn,on){function Sn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function xn(Zn){aa=cr.def(),Zn(aa,"=",Sn(),";"),typeof on=="string"?Zn(Rr,".count+=",on,";"):Zn(Rr,".count++;"),ot&&(nn?(bn=cr.def(),Zn(bn,"=",Bn,".getNumPendingQueries();")):Zn(Bn,".beginQuery(",Rr,");"))}function tn(Zn){Zn(Rr,".cpuTime+=",Sn(),"-",aa,";"),ot&&(nn?Zn(Bn,".pushScopeStats(",bn,",",Bn,".getNumPendingQueries(),",Rr,");"):Zn(Bn,".endQuery();"))}function xr(Zn){var ta=cr.def(dn,".profile");cr(dn,".profile=",Zn,";"),cr.exit(dn,".profile=",ta,";")}var dr=Ft.shared,Rr=Ft.stats,dn=dr.current,Bn=dr.timer;qr=qr.profile;var aa,bn;if(qr){if(W(qr)){qr.enable?(xn(cr),tn(cr.exit),xr("true")):xr("false");return}qr=qr.append(Ft,cr),xr(qr)}else qr=cr.def(dn,".profile");dr=Ft.block(),xn(dr),cr("if(",qr,"){",dr,"}"),Ft=Ft.block(),tn(Ft),cr.exit("if(",qr,"){",Ft,"}")}function br(Ft,cr,qr,nn,on){function Sn(xr){switch(xr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function xn(xr,dr,Rr){function dn(){cr("if(!",Zn,".buffer){",aa,".enableVertexAttribArray(",bn,");}");var la=Rr.type,Da;Da=Rr.size?cr.def(Rr.size,"||",dr):dr,cr("if(",Zn,".type!==",la,"||",Zn,".size!==",Da,"||",ya.map(function(oo){return Zn+"."+oo+"!=="+Rr[oo]}).join("||"),"){",aa,".bindBuffer(",34962,",",ta,".buffer);",aa,".vertexAttribPointer(",[bn,Da,la,Rr.normalized,Rr.stride,Rr.offset],");",Zn,".type=",la,";",Zn,".size=",Da,";",ya.map(function(oo){return Zn+"."+oo+"="+Rr[oo]+";"}).join(""),"}"),Mr&&(la=Rr.divisor,cr("if(",Zn,".divisor!==",la,"){",Ft.instancing,".vertexAttribDivisorANGLE(",[bn,la],");",Zn,".divisor=",la,";}"))}function Bn(){cr("if(",Zn,".buffer){",aa,".disableVertexAttribArray(",bn,");",Zn,".buffer=null;","}if(",Bt.map(function(la,Da){return Zn+"."+la+"!=="+pa[Da]}).join("||"),"){",aa,".vertexAttrib4f(",bn,",",pa,");",Bt.map(function(la,Da){return Zn+"."+la+"="+pa[Da]+";"}).join(""),"}")}var aa=tn.gl,bn=cr.def(xr,".location"),Zn=cr.def(tn.attributes,"[",bn,"]");xr=Rr.state;var ta=Rr.buffer,pa=[Rr.x,Rr.y,Rr.z,Rr.w],ya=["buffer","normalized","offset","stride"];xr===1?dn():xr===2?Bn():(cr("if(",xr,"===",1,"){"),dn(),cr("}else{"),Bn(),cr("}"))}var tn=Ft.shared;nn.forEach(function(xr){var dr=xr.name,Rr=qr.attributes[dr],dn;if(Rr){if(!on(Rr))return;dn=Rr.append(Ft,cr)}else{if(!on(hn))return;var Bn=Ft.scopeAttrib(dr);dn={},Object.keys(new Va).forEach(function(aa){dn[aa]=cr.def(Bn,".",aa)})}xn(Ft.link(xr),Sn(xr.info.type),dn)})}function Nr(Ft,cr,qr,nn,on,Sn){for(var xn=Ft.shared,tn=xn.gl,xr,dr=0;dr<nn.length;++dr){var Rr=nn[dr],dn=Rr.name,Bn=Rr.info.type,aa=qr.uniforms[dn],Rr=Ft.link(Rr)+".location",bn;if(aa){if(!on(aa))continue;if(W(aa)){if(dn=aa.value,Bn===35678||Bn===35680)Bn=Ft.link(dn._texture||dn.color[0]._texture),cr(tn,".uniform1i(",Rr,",",Bn+".bind());"),cr.exit(Bn,".unbind();");else if(Bn===35674||Bn===35675||Bn===35676)dn=Ft.global.def("new Float32Array(["+Array.prototype.slice.call(dn)+"])"),aa=2,Bn===35675?aa=3:Bn===35676&&(aa=4),cr(tn,".uniformMatrix",aa,"fv(",Rr,",false,",dn,");");else{switch(Bn){case 5126:xr="1f";break;case 35664:xr="2f";break;case 35665:xr="3f";break;case 35666:xr="4f";break;case 35670:xr="1i";break;case 5124:xr="1i";break;case 35671:xr="2i";break;case 35667:xr="2i";break;case 35672:xr="3i";break;case 35668:xr="3i";break;case 35673:xr="4i";break;case 35669:xr="4i"}cr(tn,".uniform",xr,"(",Rr,",",m(dn)?Array.prototype.slice.call(dn):dn,");")}continue}else bn=aa.append(Ft,cr)}else{if(!on(hn))continue;bn=cr.def(xn.uniforms,"[",Gt.id(dn),"]")}switch(Bn===35678?cr("if(",bn,"&&",bn,'._reglType==="framebuffer"){',bn,"=",bn,".color[0];","}"):Bn===35680&&cr("if(",bn,"&&",bn,'._reglType==="framebufferCube"){',bn,"=",bn,".color[0];","}"),dn=1,Bn){case 35678:case 35680:Bn=cr.def(bn,"._texture"),cr(tn,".uniform1i(",Rr,",",Bn,".bind());"),cr.exit(Bn,".unbind();");continue;case 5124:case 35670:xr="1i";break;case 35667:case 35671:xr="2i",dn=2;break;case 35668:case 35672:xr="3i",dn=3;break;case 35669:case 35673:xr="4i",dn=4;break;case 5126:xr="1f";break;case 35664:xr="2f",dn=2;break;case 35665:xr="3f",dn=3;break;case 35666:xr="4f",dn=4;break;case 35674:xr="Matrix2fv";break;case 35675:xr="Matrix3fv";break;case 35676:xr="Matrix4fv"}if(xr.charAt(0)==="M"){cr(tn,".uniform",xr,"(",Rr,",");var Rr=Math.pow(Bn-35674+2,2),Zn=Ft.global.def("new Float32Array(",Rr,")");Array.isArray(bn)?cr("false,(",i(Rr,function(ya){return Zn+"["+ya+"]="+bn[ya]}),",",Zn,")"):cr("false,(Array.isArray(",bn,")||",bn," instanceof Float32Array)?",bn,":(",i(Rr,function(ya){return Zn+"["+ya+"]="+bn+"["+ya+"]"}),",",Zn,")"),cr(");")}else{if(1<dn){for(var Bn=[],ta=[],aa=0;aa<dn;++aa)Array.isArray(bn)?ta.push(bn[aa]):ta.push(cr.def(bn+"["+aa+"]")),Sn&&Bn.push(cr.def());Sn&&cr("if(!",Ft.batchId,"||",Bn.map(function(pa,ya){return pa+"!=="+ta[ya]}).join("||"),"){",Bn.map(function(pa,ya){return pa+"="+ta[ya]+";"}).join("")),cr(tn,".uniform",xr,"(",Rr,",",ta.join(","),");")}else Sn&&(Bn=cr.def(),cr("if(!",Ft.batchId,"||",Bn,"!==",bn,"){",Bn,"=",bn,";")),cr(tn,".uniform",xr,"(",Rr,",",bn,");");Sn&&cr("}")}}}function kn(Ft,cr,qr,nn){function on(la){var Da=Rr[la];return Da?Da.contextDep&&nn.contextDynamic||Da.propDep?Da.append(Ft,qr):Da.append(Ft,cr):cr.def(dr,".",la)}function Sn(){function la(){qr(ta,".drawElementsInstancedANGLE(",[Bn,bn,pa,aa+"<<(("+pa+"-5121)>>1)",Zn],");")}function Da(){qr(ta,".drawArraysInstancedANGLE(",[Bn,aa,bn,Zn],");")}dn&&dn!=="null"?ya?la():(qr("if(",dn,"){"),la(),qr("}else{"),Da(),qr("}")):Da()}function xn(){function la(){qr(xr+".drawElements("+[Bn,bn,pa,aa+"<<(("+pa+"-5121)>>1)"]+");")}function Da(){qr(xr+".drawArrays("+[Bn,aa,bn]+");")}dn&&dn!=="null"?ya?la():(qr("if(",dn,"){"),la(),qr("}else{"),Da(),qr("}")):Da()}var tn=Ft.shared,xr=tn.gl,dr=tn.draw,Rr=nn.draw,dn=function(){var la=Rr.elements,Da=cr;return la?((la.contextDep&&nn.contextDynamic||la.propDep)&&(Da=qr),la=la.append(Ft,Da),Rr.elementsActive&&Da("if("+la+")"+xr+".bindBuffer(34963,"+la+".buffer.buffer);")):(la=Da.def(),Da(la,"=",dr,".","elements",";","if(",la,"){",xr,".bindBuffer(",34963,",",la,".buffer.buffer);}","else if(",tn.vao,".currentVAO){",la,"=",Ft.shared.elements+".getElements("+tn.vao,".currentVAO.elements);",fn?"":"if("+la+")"+xr+".bindBuffer(34963,"+la+".buffer.buffer);","}")),la}(),Bn=on("primitive"),aa=on("offset"),bn=function(){var la=Rr.count,Da=cr;return la?((la.contextDep&&nn.contextDynamic||la.propDep)&&(Da=qr),la=la.append(Ft,Da)):la=Da.def(dr,".","count"),la}();if(typeof bn=="number"){if(bn===0)return}else qr("if(",bn,"){"),qr.exit("}");var Zn,ta;Mr&&(Zn=on("instances"),ta=Ft.instancing);var pa=dn+".type",ya=Rr.elements&&W(Rr.elements)&&!Rr.vaoActive;Mr&&(typeof Zn!="number"||0<=Zn)?typeof Zn=="string"?(qr("if(",Zn,">0){"),Sn(),qr("}else if(",Zn,"<0){"),xn(),qr("}")):Sn():xn()}function _n(Ft,cr,qr,nn,on){return cr=ir(),on=cr.proc("body",on),Mr&&(cr.instancing=on.def(cr.shared.extensions,".angle_instanced_arrays")),Ft(cr,on,qr,nn),cr.compile().body}function Wn(Ft,cr,qr,nn){Zr(Ft,cr),qr.useVAO?qr.drawVAO?cr(Ft.shared.vao,".setVAO(",qr.drawVAO.append(Ft,cr),");"):cr(Ft.shared.vao,".setVAO(",Ft.shared.vao,".targetVAO);"):(cr(Ft.shared.vao,".setVAO(null);"),br(Ft,cr,qr,nn.attributes,function(){return!0})),Nr(Ft,cr,qr,nn.uniforms,function(){return!0},!1),kn(Ft,cr,cr,qr)}function Ln(Ft,cr){var qr=Ft.proc("draw",1);Zr(Ft,qr),Lt(Ft,qr,cr.context),jt(Ft,qr,cr.framebuffer),sr(Ft,qr,cr),Ir(Ft,qr,cr.state),Lr(Ft,qr,cr,!1,!0);var nn=cr.shader.progVar.append(Ft,qr);if(qr(Ft.shared.gl,".useProgram(",nn,".program);"),cr.shader.program)Wn(Ft,qr,cr,cr.shader.program);else{qr(Ft.shared.vao,".setVAO(null);");var on=Ft.global.def("{}"),Sn=qr.def(nn,".id"),xn=qr.def(on,"[",Sn,"]");qr(Ft.cond(xn).then(xn,".call(this,a0);").else(xn,"=",on,"[",Sn,"]=",Ft.link(function(tn){return _n(Wn,Ft,cr,tn,1)}),"(",nn,");",xn,".call(this,a0);"))}0<Object.keys(cr.state).length&&qr(Ft.shared.current,".dirty=true;"),Ft.shared.vao&&qr(Ft.shared.vao,".setVAO(null);")}function Xn(Ft,cr,qr,nn){function on(){return!0}Ft.batchId="a1",Zr(Ft,cr),br(Ft,cr,qr,nn.attributes,on),Nr(Ft,cr,qr,nn.uniforms,on,!1),kn(Ft,cr,cr,qr)}function Kn(Ft,cr,qr,nn){function on(dn){return dn.contextDep&&xn||dn.propDep}function Sn(dn){return!on(dn)}Zr(Ft,cr);var xn=qr.contextDep,tn=cr.def(),xr=cr.def();Ft.shared.props=xr,Ft.batchId=tn;var dr=Ft.scope(),Rr=Ft.scope();cr(dr.entry,"for(",tn,"=0;",tn,"<","a1",";++",tn,"){",xr,"=","a0","[",tn,"];",Rr,"}",dr.exit),qr.needsContext&&Lt(Ft,Rr,qr.context),qr.needsFramebuffer&&jt(Ft,Rr,qr.framebuffer),Ir(Ft,Rr,qr.state,on),qr.profile&&on(qr.profile)&&Lr(Ft,Rr,qr,!1,!0),nn?(qr.useVAO?qr.drawVAO?on(qr.drawVAO)?Rr(Ft.shared.vao,".setVAO(",qr.drawVAO.append(Ft,Rr),");"):dr(Ft.shared.vao,".setVAO(",qr.drawVAO.append(Ft,dr),");"):dr(Ft.shared.vao,".setVAO(",Ft.shared.vao,".targetVAO);"):(dr(Ft.shared.vao,".setVAO(null);"),br(Ft,dr,qr,nn.attributes,Sn),br(Ft,Rr,qr,nn.attributes,on)),Nr(Ft,dr,qr,nn.uniforms,Sn,!1),Nr(Ft,Rr,qr,nn.uniforms,on,!0),kn(Ft,dr,Rr,qr)):(cr=Ft.global.def("{}"),nn=qr.shader.progVar.append(Ft,Rr),xr=Rr.def(nn,".id"),dr=Rr.def(cr,"[",xr,"]"),Rr(Ft.shared.gl,".useProgram(",nn,".program);","if(!",dr,"){",dr,"=",cr,"[",xr,"]=",Ft.link(function(dn){return _n(Xn,Ft,qr,dn,2)}),"(",nn,");}",dr,".call(this,a0[",tn,"],",tn,");"))}function Aa(Ft,cr){function qr(dr){return dr.contextDep&&on||dr.propDep}var nn=Ft.proc("batch",2);Ft.batchId="0",Zr(Ft,nn);var on=!1,Sn=!0;Object.keys(cr.context).forEach(function(dr){on=on||cr.context[dr].propDep}),on||(Lt(Ft,nn,cr.context),Sn=!1);var xn=cr.framebuffer,tn=!1;if(xn?(xn.propDep?on=tn=!0:xn.contextDep&&on&&(tn=!0),tn||jt(Ft,nn,xn)):jt(Ft,nn,null),cr.state.viewport&&cr.state.viewport.propDep&&(on=!0),sr(Ft,nn,cr),Ir(Ft,nn,cr.state,function(dr){return!qr(dr)}),cr.profile&&qr(cr.profile)||Lr(Ft,nn,cr,!1,"a1"),cr.contextDep=on,cr.needsContext=Sn,cr.needsFramebuffer=tn,Sn=cr.shader.progVar,Sn.contextDep&&on||Sn.propDep)Kn(Ft,nn,cr,null);else if(Sn=Sn.append(Ft,nn),nn(Ft.shared.gl,".useProgram(",Sn,".program);"),cr.shader.program)Kn(Ft,nn,cr,cr.shader.program);else{nn(Ft.shared.vao,".setVAO(null);");var xn=Ft.global.def("{}"),tn=nn.def(Sn,".id"),xr=nn.def(xn,"[",tn,"]");nn(Ft.cond(xr).then(xr,".call(this,a0,a1);").else(xr,"=",xn,"[",tn,"]=",Ft.link(function(dn){return _n(Kn,Ft,cr,dn,2)}),"(",Sn,");",xr,".call(this,a0,a1);"))}0<Object.keys(cr.state).length&&nn(Ft.shared.current,".dirty=true;"),Ft.shared.vao&&nn(Ft.shared.vao,".setVAO(null);")}function Ta(Ft,cr){function qr(tn){var xr=cr.shader[tn];xr&&(xr=xr.append(Ft,nn),isNaN(xr)?nn.set(on.shader,"."+tn,xr):nn.set(on.shader,"."+tn,Ft.link(xr,{stable:!0})))}var nn=Ft.proc("scope",3);Ft.batchId="a2";var on=Ft.shared,Sn=on.current;if(Lt(Ft,nn,cr.context),cr.framebuffer&&cr.framebuffer.append(Ft,nn),q(Object.keys(cr.state)).forEach(function(tn){var xr=cr.state[tn],dr=xr.append(Ft,nn);m(dr)?dr.forEach(function(Rr,dn){isNaN(Rr)?nn.set(Ft.next[tn],"["+dn+"]",Rr):nn.set(Ft.next[tn],"["+dn+"]",Ft.link(Rr,{stable:!0}))}):W(xr)?nn.set(on.next,"."+tn,Ft.link(dr,{stable:!0})):nn.set(on.next,"."+tn,dr)}),Lr(Ft,nn,cr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(tn){var xr=cr.draw[tn];xr&&(xr=xr.append(Ft,nn),isNaN(xr)?nn.set(on.draw,"."+tn,xr):nn.set(on.draw,"."+tn,Ft.link(xr),{stable:!0}))}),Object.keys(cr.uniforms).forEach(function(tn){var xr=cr.uniforms[tn].append(Ft,nn);Array.isArray(xr)&&(xr="["+xr.map(function(dr){return isNaN(dr)?dr:Ft.link(dr,{stable:!0})})+"]"),nn.set(on.uniforms,"["+Ft.link(Gt.id(tn),{stable:!0})+"]",xr)}),Object.keys(cr.attributes).forEach(function(tn){var xr=cr.attributes[tn].append(Ft,nn),dr=Ft.scopeAttrib(tn);Object.keys(new Va).forEach(function(Rr){nn.set(dr,"."+Rr,xr[Rr])})}),cr.scopeVAO){var xn=cr.scopeVAO.append(Ft,nn);isNaN(xn)?nn.set(on.vao,".targetVAO",xn):nn.set(on.vao,".targetVAO",Ft.link(xn,{stable:!0}))}qr("vert"),qr("frag"),0<Object.keys(cr.state).length&&(nn(Sn,".dirty=true;"),nn.exit(Sn,".dirty=true;")),nn("a1(",Ft.shared.context,",a0,",Ft.batchId,");")}function oi(Ft){if(typeof Ft=="object"&&!m(Ft)){for(var cr=Object.keys(Ft),qr=0;qr<cr.length;++qr)if(ue.isDynamic(Ft[cr[qr]]))return!0;return!1}}function $a(Ft,cr,qr){function nn(dn,Bn){xn.forEach(function(aa){var bn=on[aa];ue.isDynamic(bn)&&(bn=dn.invoke(Bn,bn),Bn(Rr,".",aa,"=",bn,";"))})}var on=cr.static[qr];if(on&&oi(on)){var Sn=Ft.global,xn=Object.keys(on),tn=!1,xr=!1,dr=!1,Rr=Ft.global.def("{}");xn.forEach(function(dn){var Bn=on[dn];if(ue.isDynamic(Bn))typeof Bn=="function"&&(Bn=on[dn]=ue.unbox(Bn)),dn=te(Bn,null),tn=tn||dn.thisDep,dr=dr||dn.propDep,xr=xr||dn.contextDep;else{switch(Sn(Rr,".",dn,"="),typeof Bn){case"number":Sn(Bn);break;case"string":Sn('"',Bn,'"');break;case"object":Array.isArray(Bn)&&Sn("[",Bn.join(),"]");break;default:Sn(Ft.link(Bn))}Sn(";")}}),cr.dynamic[qr]=new ue.DynamicVariable(4,{thisDep:tn,contextDep:xr,propDep:dr,ref:Rr,append:nn}),delete cr.static[qr]}}var Va=Me.Record,ti={add:32774,subtract:32778,"reverse subtract":32779};Kt.ext_blend_minmax&&(ti.min=32775,ti.max=32776);var Mr=Kt.angle_instanced_arrays,vn=Kt.webgl_draw_buffers,fn=Kt.oes_vertex_array_object,An={dirty:!0,profile:vt.profile},Gn={},ia=[],Yn={},zn={};St("dither",3024),St("blend.enable",3042),Nt("blend.color","blendColor",[0,0,0,0]),Nt("blend.equation","blendEquationSeparate",[32774,32774]),Nt("blend.func","blendFuncSeparate",[1,0,1,0]),St("depth.enable",2929,!0),Nt("depth.func","depthFunc",513),Nt("depth.range","depthRange",[0,1]),Nt("depth.mask","depthMask",!0),Nt("colorMask","colorMask",[!0,!0,!0,!0]),St("cull.enable",2884),Nt("cull.face","cullFace",1029),Nt("frontFace","frontFace",2305),Nt("lineWidth","lineWidth",1),St("polygonOffset.enable",32823),Nt("polygonOffset.offset","polygonOffset",[0,0]),St("sample.alpha",32926),St("sample.enable",32928),Nt("sample.coverage","sampleCoverage",[1,!1]),St("stencil.enable",2960),Nt("stencil.mask","stencilMask",-1),Nt("stencil.func","stencilFunc",[519,0,-1]),Nt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Nt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),St("scissor.enable",3089),Nt("scissor.box","scissor",[0,0,nt.drawingBufferWidth,nt.drawingBufferHeight]),Nt("viewport","viewport",[0,0,nt.drawingBufferWidth,nt.drawingBufferHeight]);var ea={gl:nt,context:Xe,strings:Gt,next:Gn,current:An,draw:Ke,elements:tt,buffer:_r,shader:Se,attributes:Me.state,vao:Me,uniforms:ft,framebuffer:st,extensions:Kt,timer:ot,isBufferArgs:U},wa={primTypes:Ne,compareFuncs:er,blendFuncs:rr,blendEquations:ti,stencilOps:pr,glTypes:Pe,orientationType:Xr};vn&&(wa.backBuffer=[1029],wa.drawBuffer=i(Ht.maxDrawbuffers,function(Ft){return Ft===0?[0]:i(Ft,function(cr){return 36064+cr})}));var si=0;return{next:Gn,current:An,procs:function(){var Ft=ir(),cr=Ft.proc("poll"),qr=Ft.proc("refresh"),nn=Ft.block();cr(nn),qr(nn);var on=Ft.shared,Sn=on.gl,xn=on.next,tn=on.current;nn(tn,".dirty=false;"),jt(Ft,cr),jt(Ft,qr,null,!0);var xr;Mr&&(xr=Ft.link(Mr)),Kt.oes_vertex_array_object&&qr(Ft.link(Kt.oes_vertex_array_object),".bindVertexArrayOES(null);");var on=qr.def(on.attributes),dr=qr.def(0),Rr=Ft.cond(dr,".buffer");Rr.then(Sn,".enableVertexAttribArray(i);",Sn,".bindBuffer(",34962,",",dr,".buffer.buffer);",Sn,".vertexAttribPointer(i,",dr,".size,",dr,".type,",dr,".normalized,",dr,".stride,",dr,".offset);").else(Sn,".disableVertexAttribArray(i);",Sn,".vertexAttrib4f(i,",dr,".x,",dr,".y,",dr,".z,",dr,".w);",dr,".buffer=null;");var dn=Ft.link(Ht.maxAttributes,{stable:!0});return qr("for(var i=0;i<",dn,";++i){",dr,"=",on,"[i];",Rr,"}"),Mr&&qr("for(var i=0;i<",dn,";++i){",xr,".vertexAttribDivisorANGLE(i,",on,"[i].divisor);","}"),qr(Ft.shared.vao,".currentVAO=null;",Ft.shared.vao,".setVAO(",Ft.shared.vao,".targetVAO);"),Object.keys(Yn).forEach(function(Bn){var aa=Yn[Bn],bn=nn.def(xn,".",Bn),Zn=Ft.block();Zn("if(",bn,"){",Sn,".enable(",aa,")}else{",Sn,".disable(",aa,")}",tn,".",Bn,"=",bn,";"),qr(Zn),cr("if(",bn,"!==",tn,".",Bn,"){",Zn,"}")}),Object.keys(zn).forEach(function(Bn){var aa=zn[Bn],bn=An[Bn],Zn,ta,pa=Ft.block();pa(Sn,".",aa,"("),m(bn)?(aa=bn.length,Zn=Ft.global.def(xn,".",Bn),ta=Ft.global.def(tn,".",Bn),pa(i(aa,function(ya){return Zn+"["+ya+"]"}),");",i(aa,function(ya){return ta+"["+ya+"]="+Zn+"["+ya+"];"}).join("")),cr("if(",i(aa,function(ya){return Zn+"["+ya+"]!=="+ta+"["+ya+"]"}).join("||"),"){",pa,"}")):(Zn=nn.def(xn,".",Bn),ta=nn.def(tn,".",Bn),pa(Zn,");",tn,".",Bn,"=",Zn,";"),cr("if(",Zn,"!==",ta,"){",pa,"}")),qr(pa)}),Ft.compile()}(),compile:function(Ft,cr,qr,nn,on){var Sn=ir();Sn.stats=Sn.link(on),Object.keys(cr.static).forEach(function(tn){$a(Sn,cr,tn)}),qt.forEach(function(tn){$a(Sn,Ft,tn)});var xn=et(Ft,cr,qr,nn,Sn);return xn.shader.program&&(xn.shader.program.attributes.sort(function(tn,xr){return tn.name<xr.name?-1:1}),xn.shader.program.uniforms.sort(function(tn,xr){return tn.name<xr.name?-1:1})),Ln(Sn,xn),Ta(Sn,xn),Aa(Sn,xn),le(Sn.compile(),{destroy:function(){xn.shader.program.destroy()}})}}}function ie(nt,Gt){for(var Kt=0;Kt<nt.length;++Kt)if(nt[Kt]===Gt)return Kt;return-1}var le=function(nt,Gt){for(var Kt=Object.keys(Gt),Ht=0;Ht<Kt.length;++Ht)nt[Kt[Ht]]=Gt[Kt[Ht]];return nt},ye=0,ue={DynamicVariable:T,define:function(nt,Gt){return new T(nt,M(Gt+""))},isDynamic:function(nt){return typeof nt=="function"&&!nt._reglType||nt instanceof T},unbox:A,accessor:M},pe={next:typeof requestAnimationFrame=="function"?function(nt){return requestAnimationFrame(nt)}:function(nt){return setTimeout(nt,16)},cancel:typeof cancelAnimationFrame=="function"?function(nt){return cancelAnimationFrame(nt)}:clearTimeout},ge=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date},Te=d();Te.zero=d();var _e=function(nt,Gt){var Kt=1;Gt.ext_texture_filter_anisotropic&&(Kt=nt.getParameter(34047));var Ht=1,_r=1;Gt.webgl_draw_buffers&&(Ht=nt.getParameter(34852),_r=nt.getParameter(36063));var tt=!!Gt.oes_texture_float;if(tt){tt=nt.createTexture(),nt.bindTexture(3553,tt),nt.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var je=nt.createFramebuffer();if(nt.bindFramebuffer(36160,je),nt.framebufferTexture2D(36160,36064,3553,tt,0),nt.bindTexture(3553,null),nt.checkFramebufferStatus(36160)!==36053)tt=!1;else{nt.viewport(0,0,1,1),nt.clearColor(1,0,0,1),nt.clear(16384);var st=Te.allocType(5126,4);nt.readPixels(0,0,1,1,6408,5126,st),nt.getError()?tt=!1:(nt.deleteFramebuffer(je),nt.deleteTexture(tt),tt=st[0]===1),Te.freeType(st)}}return st=!0,typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(st=nt.createTexture(),je=Te.allocType(5121,36),nt.activeTexture(33984),nt.bindTexture(34067,st),nt.texImage2D(34069,0,6408,3,3,0,6408,5121,je),Te.freeType(je),nt.bindTexture(34067,null),nt.deleteTexture(st),st=!nt.getError()),{colorBits:[nt.getParameter(3410),nt.getParameter(3411),nt.getParameter(3412),nt.getParameter(3413)],depthBits:nt.getParameter(3414),stencilBits:nt.getParameter(3415),subpixelBits:nt.getParameter(3408),extensions:Object.keys(Gt).filter(function(ft){return!!Gt[ft]}),maxAnisotropic:Kt,maxDrawbuffers:Ht,maxColorAttachments:_r,pointSizeDims:nt.getParameter(33901),lineWidthDims:nt.getParameter(33902),maxViewportDims:nt.getParameter(3386),maxCombinedTextureUnits:nt.getParameter(35661),maxCubeMapSize:nt.getParameter(34076),maxRenderbufferSize:nt.getParameter(34024),maxTextureUnits:nt.getParameter(34930),maxTextureSize:nt.getParameter(3379),maxAttributes:nt.getParameter(34921),maxVertexUniforms:nt.getParameter(36347),maxVertexTextureUnits:nt.getParameter(35660),maxVaryingVectors:nt.getParameter(36348),maxFragmentUniforms:nt.getParameter(36349),glsl:nt.getParameter(35724),renderer:nt.getParameter(7937),vendor:nt.getParameter(7936),version:nt.getParameter(7938),readFloat:tt,npotTextureCube:st}},De=function(nt){return nt instanceof Uint8Array||nt instanceof Uint16Array||nt instanceof Uint32Array||nt instanceof Int8Array||nt instanceof Int16Array||nt instanceof Int32Array||nt instanceof Float32Array||nt instanceof Float64Array||nt instanceof Uint8ClampedArray},Oe=function(nt){return Object.keys(nt).map(function(Gt){return nt[Gt]})},Ue={shape:function(nt){for(var Gt=[];nt.length;nt=nt[0])Gt.push(nt.length);return Gt},flatten:function(nt,Gt,Kt,Ht){var _r=1;if(Gt.length)for(var tt=0;tt<Gt.length;++tt)_r*=Gt[tt];else _r=0;switch(Kt=Ht||Te.allocType(Kt,_r),Gt.length){case 0:break;case 1:for(Ht=Gt[0],Gt=0;Gt<Ht;++Gt)Kt[Gt]=nt[Gt];break;case 2:for(Ht=Gt[0],Gt=Gt[1],tt=_r=0;tt<Ht;++tt)for(var je=nt[tt],st=0;st<Gt;++st)Kt[_r++]=je[st];break;case 3:v(nt,Gt[0],Gt[1],Gt[2],Kt,0);break;default:x(nt,Gt,0,Kt,0)}return Kt}},xe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Pe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ve={dynamic:35048,stream:35040,static:35044},Qe=Ue.flatten,Fe=Ue.shape,Le=[];Le[5120]=1,Le[5122]=2,Le[5124]=4,Le[5121]=1,Le[5123]=2,Le[5125]=4,Le[5126]=4;var Ne={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},dt=new Float32Array(1),Dt=new Uint32Array(dt.buffer),Xt=[9984,9986,9985,9987],Tt=[0,6409,6410,6407,6408],zt={};zt[6409]=zt[6406]=zt[6402]=1,zt[34041]=zt[6410]=2,zt[6407]=zt[35904]=3,zt[6408]=zt[35906]=4;var Ut=u("HTMLCanvasElement"),Et=u("OffscreenCanvas"),Mt=u("CanvasRenderingContext2D"),rt=u("ImageBitmap"),ct=u("HTMLImageElement"),Ze=u("HTMLVideoElement"),ke=Object.keys(xe).concat([Ut,Et,Mt,rt,ct,Ze]),Ge=[];Ge[5121]=1,Ge[5126]=4,Ge[36193]=2,Ge[5123]=2,Ge[5125]=4;var Je=[];Je[32854]=2,Je[32855]=2,Je[36194]=2,Je[34041]=4,Je[33776]=.5,Je[33777]=.5,Je[33778]=1,Je[33779]=1,Je[35986]=.5,Je[35987]=1,Je[34798]=1,Je[35840]=.5,Je[35841]=.25,Je[35842]=.5,Je[35843]=.25,Je[36196]=.5;var it=[];it[32854]=2,it[32855]=2,it[36194]=2,it[33189]=2,it[36168]=1,it[34041]=4,it[35907]=4,it[34836]=16,it[34842]=8,it[34843]=6;var Pt=function(nt,Gt,Kt,Ht,_r){function tt(Ke){this.id=Me++,this.refCount=1,this.renderbuffer=Ke,this.format=32854,this.height=this.width=0,_r.profile&&(this.stats={size:0})}function je(Ke){var Xe=Ke.renderbuffer;nt.bindRenderbuffer(36161,null),nt.deleteRenderbuffer(Xe),Ke.renderbuffer=null,Ke.refCount=0,delete Se[Ke.id],Ht.renderbufferCount--}var st={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Gt.ext_srgb&&(st.srgba=35907),Gt.ext_color_buffer_half_float&&(st.rgba16f=34842,st.rgb16f=34843),Gt.webgl_color_buffer_float&&(st.rgba32f=34836);var ft=[];Object.keys(st).forEach(function(Ke){ft[st[Ke]]=Ke});var Me=0,Se={};return tt.prototype.decRef=function(){0>=--this.refCount&&je(this)},_r.profile&&(Ht.getTotalRenderbufferSize=function(){var Ke=0;return Object.keys(Se).forEach(function(Xe){Ke+=Se[Xe].stats.size}),Ke}),{create:function(Ke,Xe){function ot(vt,Ct){var St=0,Nt=0,ir=32854;if(typeof vt=="object"&&vt?("shape"in vt?(Nt=vt.shape,St=Nt[0]|0,Nt=Nt[1]|0):("radius"in vt&&(St=Nt=vt.radius|0),"width"in vt&&(St=vt.width|0),"height"in vt&&(Nt=vt.height|0)),"format"in vt&&(ir=st[vt.format])):typeof vt=="number"?(St=vt|0,Nt=typeof Ct=="number"?Ct|0:St):vt||(St=Nt=1),St!==pt.width||Nt!==pt.height||ir!==pt.format)return ot.width=pt.width=St,ot.height=pt.height=Nt,pt.format=ir,nt.bindRenderbuffer(36161,pt.renderbuffer),nt.renderbufferStorage(36161,ir,St,Nt),_r.profile&&(pt.stats.size=it[pt.format]*pt.width*pt.height),ot.format=ft[pt.format],ot}var pt=new tt(nt.createRenderbuffer());return Se[pt.id]=pt,Ht.renderbufferCount++,ot(Ke,Xe),ot.resize=function(vt,Ct){var St=vt|0,Nt=Ct|0||St;return St===pt.width&&Nt===pt.height||(ot.width=pt.width=St,ot.height=pt.height=Nt,nt.bindRenderbuffer(36161,pt.renderbuffer),nt.renderbufferStorage(36161,pt.format,St,Nt),_r.profile&&(pt.stats.size=it[pt.format]*pt.width*pt.height)),ot},ot._reglType="renderbuffer",ot._renderbuffer=pt,_r.profile&&(ot.stats=pt.stats),ot.destroy=function(){pt.decRef()},ot},clear:function(){Oe(Se).forEach(je)},restore:function(){Oe(Se).forEach(function(Ke){Ke.renderbuffer=nt.createRenderbuffer(),nt.bindRenderbuffer(36161,Ke.renderbuffer),nt.renderbufferStorage(36161,Ke.format,Ke.width,Ke.height)}),nt.bindRenderbuffer(36161,null)}}},At=[];At[6408]=4,At[6407]=3;var Ot=[];Ot[5121]=1,Ot[5126]=4,Ot[36193]=2;var Jt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Bt=["x","y","z","w"],qt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),rr={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},er={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},pr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Xr={cw:2304,ccw:2305},hn=new Q(!1,!1,!1,function(){}),$r=function(nt,Gt){function Kt(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Ht(Se,Ke,Xe){var ot=je.pop()||new Kt;ot.startQueryIndex=Se,ot.endQueryIndex=Ke,ot.sum=0,ot.stats=Xe,st.push(ot)}if(!Gt.ext_disjoint_timer_query)return null;var _r=[],tt=[],je=[],st=[],ft=[],Me=[];return{beginQuery:function(Se){var Ke=_r.pop()||Gt.ext_disjoint_timer_query.createQueryEXT();Gt.ext_disjoint_timer_query.beginQueryEXT(35007,Ke),tt.push(Ke),Ht(tt.length-1,tt.length,Se)},endQuery:function(){Gt.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Ht,update:function(){var Se,Ke;if(Se=tt.length,Se!==0){Me.length=Math.max(Me.length,Se+1),ft.length=Math.max(ft.length,Se+1),ft[0]=0;var Xe=Me[0]=0;for(Ke=Se=0;Ke<tt.length;++Ke){var ot=tt[Ke];Gt.ext_disjoint_timer_query.getQueryObjectEXT(ot,34919)?(Xe+=Gt.ext_disjoint_timer_query.getQueryObjectEXT(ot,34918),_r.push(ot)):tt[Se++]=ot,ft[Ke+1]=Xe,Me[Ke+1]=Se}for(tt.length=Se,Ke=Se=0;Ke<st.length;++Ke){var Xe=st[Ke],pt=Xe.startQueryIndex,ot=Xe.endQueryIndex;Xe.sum+=ft[ot]-ft[pt],pt=Me[pt],ot=Me[ot],ot===pt?(Xe.stats.gpuTime+=Xe.sum/1e6,je.push(Xe)):(Xe.startQueryIndex=pt,Xe.endQueryIndex=ot,st[Se++]=Xe)}st.length=Se}},getNumPendingQueries:function(){return tt.length},clear:function(){_r.push.apply(_r,tt);for(var Se=0;Se<_r.length;Se++)Gt.ext_disjoint_timer_query.deleteQueryEXT(_r[Se]);tt.length=0,_r.length=0},restore:function(){tt.length=0,_r.length=0}}};return function(nt){function Gt(){if(Lr.length===0)lr&&lr.update(),_n=null;else{_n=pe.next(Gt),Se();for(var Ln=Lr.length-1;0<=Ln;--Ln){var Xn=Lr[Ln];Xn&&Xn(Jr,null,0)}ot.flush(),lr&&lr.update()}}function Kt(){!_n&&0<Lr.length&&(_n=pe.next(Gt))}function Ht(){_n&&(pe.cancel(Gt),_n=null)}function _r(Ln){Ln.preventDefault(),Ht(),br.forEach(function(Xn){Xn()})}function tt(Ln){ot.getError(),vt.restore(),Tr.restore(),mr.restore(),et.restore(),Lt.restore(),jt.restore(),Hr.restore(),lr&&lr.restore(),sr.procs.refresh(),Kt(),Nr.forEach(function(Xn){Xn()})}function je(Ln){function Xn(An,Gn){var ia={},Yn={};return Object.keys(An).forEach(function(zn){var ea=An[zn];if(ue.isDynamic(ea))Yn[zn]=ue.unbox(ea,zn);else{if(Gn&&Array.isArray(ea)){for(var wa=0;wa<ea.length;++wa)if(ue.isDynamic(ea[wa])){Yn[zn]=ue.unbox(ea,zn);return}}ia[zn]=ea}}),{dynamic:Yn,static:ia}}function Kn(An){for(;fn.length<An;)fn.push(null);return fn}var Aa=Xn(Ln.context||{},!0),Ta=Xn(Ln.uniforms||{},!0),oi=Xn(Ln.attributes||{},!1);Ln=Xn(function(An){function Gn(Yn){if(Yn in ia){var zn=ia[Yn];delete ia[Yn],Object.keys(zn).forEach(function(ea){ia[Yn+"."+ea]=zn[ea]})}}var ia=le({},An);return delete ia.uniforms,delete ia.attributes,delete ia.context,delete ia.vao,"stencil"in ia&&ia.stencil.op&&(ia.stencil.opBack=ia.stencil.opFront=ia.stencil.op,delete ia.stencil.op),Gn("blend"),Gn("depth"),Gn("cull"),Gn("stencil"),Gn("polygonOffset"),Gn("scissor"),Gn("sample"),"vao"in An&&(ia.vao=An.vao),ia}(Ln),!1);var $a={gpuTime:0,cpuTime:0,count:0},Va=sr.compile(Ln,oi,Ta,Aa,$a),ti=Va.draw,Mr=Va.batch,vn=Va.scope,fn=[];return le(function(An,Gn){var ia;if(typeof An=="function")return vn.call(this,null,An,0);if(typeof Gn=="function")if(typeof An=="number")for(ia=0;ia<An;++ia)vn.call(this,null,Gn,ia);else if(Array.isArray(An))for(ia=0;ia<An.length;++ia)vn.call(this,An[ia],Gn,ia);else return vn.call(this,An,Gn,0);else if(typeof An=="number"){if(0<An)return Mr.call(this,Kn(An|0),An|0)}else if(Array.isArray(An)){if(An.length)return Mr.call(this,An,An.length)}else return ti.call(this,An)},{stats:$a,destroy:function(){Va.destroy()}})}function st(Ln,Xn){var Kn=0;sr.procs.poll();var Aa=Xn.color;Aa&&(ot.clearColor(+Aa[0]||0,+Aa[1]||0,+Aa[2]||0,+Aa[3]||0),Kn|=16384),"depth"in Xn&&(ot.clearDepth(+Xn.depth),Kn|=256),"stencil"in Xn&&(ot.clearStencil(Xn.stencil|0),Kn|=1024),ot.clear(Kn)}function ft(Ln){return Lr.push(Ln),Kt(),{cancel:function(){function Xn(){var Aa=ie(Lr,Xn);Lr[Aa]=Lr[Lr.length-1],--Lr.length,0>=Lr.length&&Ht()}var Kn=ie(Lr,Ln);Lr[Kn]=Xn}}}function Me(){var Ln=Ir.viewport,Xn=Ir.scissor_box;Ln[0]=Ln[1]=Xn[0]=Xn[1]=0,Jr.viewportWidth=Jr.framebufferWidth=Jr.drawingBufferWidth=Ln[2]=Xn[2]=ot.drawingBufferWidth,Jr.viewportHeight=Jr.framebufferHeight=Jr.drawingBufferHeight=Ln[3]=Xn[3]=ot.drawingBufferHeight}function Se(){Jr.tick+=1,Jr.time=Xe(),Me(),sr.procs.poll()}function Ke(){et.refresh(),Me(),sr.procs.refresh(),lr&&lr.update()}function Xe(){return(ge()-Yr)/1e3}if(nt=f(nt),!nt)return null;var ot=nt.gl,pt=ot.getContextAttributes();ot.isContextLost();var vt=o(ot,nt);if(!vt)return null;var Ct=e(),St={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Nt=nt.cachedCode||{},ir=vt.extensions,lr=$r(ot,ir),Yr=ge(),Pr=ot.drawingBufferWidth,wr=ot.drawingBufferHeight,Jr={tick:0,time:0,viewportWidth:Pr,viewportHeight:wr,framebufferWidth:Pr,framebufferHeight:wr,drawingBufferWidth:Pr,drawingBufferHeight:wr,pixelRatio:nt.pixelRatio},Pr={elements:null,primitive:4,count:-1,offset:0,instances:-1},gr=_e(ot,ir),mr=w(ot,St,nt,function(Ln){return Hr.destroyBuffer(Ln)}),Ur=b(ot,ir,mr,St),Hr=F(ot,ir,gr,St,mr,Ur,Pr),Tr=V(ot,Ct,St,nt),et=D(ot,ir,gr,function(){sr.procs.poll()},Jr,St,nt),Lt=Pt(ot,ir,gr,St,nt),jt=R(ot,ir,gr,et,Lt,St),sr=ee(ot,Ct,ir,gr,mr,Ur,et,jt,{},Hr,Tr,Pr,Jr,lr,Nt,nt),Ct=Y(ot,jt,sr.procs.poll,Jr),Ir=sr.next,Zr=ot.canvas,Lr=[],br=[],Nr=[],kn=[nt.onDestroy],_n=null;Zr&&(Zr.addEventListener("webglcontextlost",_r,!1),Zr.addEventListener("webglcontextrestored",tt,!1));var Wn=jt.setFBO=je({framebuffer:ue.define.call(null,1,"framebuffer")});return Ke(),pt=le(je,{clear:function(Ln){if("framebuffer"in Ln)if(Ln.framebuffer&&Ln.framebuffer_reglType==="framebufferCube")for(var Xn=0;6>Xn;++Xn)Wn(le({framebuffer:Ln.framebuffer.faces[Xn]},Ln),st);else Wn(Ln,st);else st(null,Ln)},prop:ue.define.bind(null,1),context:ue.define.bind(null,2),this:ue.define.bind(null,3),draw:je({}),buffer:function(Ln){return mr.create(Ln,34962,!1,!1)},elements:function(Ln){return Ur.create(Ln,!1)},texture:et.create2D,cube:et.createCube,renderbuffer:Lt.create,framebuffer:jt.create,framebufferCube:jt.createCube,vao:Hr.createVAO,attributes:pt,frame:ft,on:function(Ln,Xn){var Kn;switch(Ln){case"frame":return ft(Xn);case"lost":Kn=br;break;case"restore":Kn=Nr;break;case"destroy":Kn=kn}return Kn.push(Xn),{cancel:function(){for(var Aa=0;Aa<Kn.length;++Aa)if(Kn[Aa]===Xn){Kn[Aa]=Kn[Kn.length-1],Kn.pop();break}}}},limits:gr,hasExtension:function(Ln){return 0<=gr.extensions.indexOf(Ln.toLowerCase())},read:Ct,destroy:function(){Lr.length=0,Ht(),Zr&&(Zr.removeEventListener("webglcontextlost",_r),Zr.removeEventListener("webglcontextrestored",tt)),Tr.clear(),jt.clear(),Lt.clear(),Hr.clear(),et.clear(),Ur.clear(),mr.clear(),lr&&lr.clear(),kn.forEach(function(Ln){Ln()})},_gl:ot,_refresh:Ke,poll:function(){Se(),lr&&lr.update()},now:Xe,stats:St,getCachedCode:function(){return Nt},preloadCachedCode:function(Ln){Object.entries(Ln).forEach(function(Xn){Nt[Xn[0]]=Xn[1]})}}),nt.onDone(null,pt),pt}})},{}],284:[function(g,ne,ae){var T=g("buffer"),c=T.Buffer;function M(e,a){for(var n in e)a[n]=e[n]}c.from&&c.alloc&&c.allocUnsafe&&c.allocUnsafeSlow?ne.exports=T:(M(T,ae),ae.Buffer=A);function A(e,a,n){return c(e,a,n)}A.prototype=Object.create(c.prototype),M(c,A),A.from=function(e,a,n){if(typeof e=="number")throw new TypeError("Argument must not be a number");return c(e,a,n)},A.alloc=function(e,a,n){if(typeof e!="number")throw new TypeError("Argument must be a number");var t=c(e);return a!==void 0?typeof n=="string"?t.fill(a,n):t.fill(a):t.fill(0),t},A.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return c(e)},A.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return T.SlowBuffer(e)}},{buffer:85}],285:[function(g,ne,ae){ne.exports=M;var T=g("events").EventEmitter,c=g("inherits");c(M,T),M.Readable=g("readable-stream/lib/_stream_readable.js"),M.Writable=g("readable-stream/lib/_stream_writable.js"),M.Duplex=g("readable-stream/lib/_stream_duplex.js"),M.Transform=g("readable-stream/lib/_stream_transform.js"),M.PassThrough=g("readable-stream/lib/_stream_passthrough.js"),M.finished=g("readable-stream/lib/internal/streams/end-of-stream.js"),M.pipeline=g("readable-stream/lib/internal/streams/pipeline.js"),M.Stream=M;function M(){T.call(this)}M.prototype.pipe=function(A,e){var a=this;function n(d){A.writable&&A.write(d)===!1&&a.pause&&a.pause()}a.on("data",n);function t(){a.readable&&a.resume&&a.resume()}A.on("drain",t),!A._isStdio&&(!e||e.end!==!1)&&(a.on("end",f),a.on("close",o));var r=!1;function f(){r||(r=!0,A.end())}function o(){r||(r=!0,typeof A.destroy=="function"&&A.destroy())}function i(d){if(p(),T.listenerCount(this,"error")===0)throw d}a.on("error",i),A.on("error",i);function p(){a.removeListener("data",n),A.removeListener("drain",t),a.removeListener("end",f),a.removeListener("close",o),a.removeListener("error",i),A.removeListener("error",i),a.removeListener("end",p),a.removeListener("close",p),A.removeListener("close",p)}return a.on("end",p),a.on("close",p),A.on("close",p),A.emit("pipe",a),A}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(g,ne,ae){function T(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r}var c={};function M(t,r,f){f||(f=Error);function o(p,d,y){return typeof r=="string"?r:r(p,d,y)}var i=function(p){T(d,p);function d(y,v,x){return p.call(this,o(y,v,x))||this}return d}(f);i.prototype.name=f.name,i.prototype.code=t,c[t]=i}function A(t,r){if(Array.isArray(t)){var f=t.length;return t=t.map(function(o){return String(o)}),f>2?"one of ".concat(r," ").concat(t.slice(0,f-1).join(", "),", or ")+t[f-1]:f===2?"one of ".concat(r," ").concat(t[0]," or ").concat(t[1]):"of ".concat(r," ").concat(t[0])}else return"of ".concat(r," ").concat(String(t))}function e(t,r,f){return t.substr(!f||f<0?0:+f,r.length)===r}function a(t,r,f){return(f===void 0||f>t.length)&&(f=t.length),t.substring(f-r.length,f)===r}function n(t,r,f){return typeof f!="number"&&(f=0),f+r.length>t.length?!1:t.indexOf(r,f)!==-1}M("ERR_INVALID_OPT_VALUE",function(t,r){return'The value "'+r+'" is invalid for option "'+t+'"'},TypeError),M("ERR_INVALID_ARG_TYPE",function(t,r,f){var o;typeof r=="string"&&e(r,"not ")?(o="must not be",r=r.replace(/^not /,"")):o="must be";var i;if(a(t," argument"))i="The ".concat(t," ").concat(o," ").concat(A(r,"type"));else{var p=n(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(p," ").concat(o," ").concat(A(r,"type"))}return i+=". Received type ".concat(typeof f),i},TypeError),M("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),M("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),M("ERR_STREAM_PREMATURE_CLOSE","Premature close"),M("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),M("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),M("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),M("ERR_STREAM_WRITE_AFTER_END","write after end"),M("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),M("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),M("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ne.exports.codes=c},{}],287:[function(g,ne,ae){(function(T){(function(){var c=Object.keys||function(o){var i=[];for(var p in o)i.push(p);return i};ne.exports=t;var M=g("./_stream_readable"),A=g("./_stream_writable");g("inherits")(t,M);for(var e=c(A.prototype),a=0;a<e.length;a++){var n=e[a];t.prototype[n]||(t.prototype[n]=A.prototype[n])}function t(o){if(!(this instanceof t))return new t(o);M.call(this,o),A.call(this,o),this.allowHalfOpen=!0,o&&(o.readable===!1&&(this.readable=!1),o.writable===!1&&(this.writable=!1),o.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",r)))}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function r(){this._writableState.ended||T.nextTick(f,this)}function f(o){o.end()}Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(i){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=i,this._writableState.destroyed=i)}})}).call(this)}).call(this,g("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(g,ne,ae){ne.exports=c;var T=g("./_stream_transform");g("inherits")(c,T);function c(M){if(!(this instanceof c))return new c(M);T.call(this,M)}c.prototype._transform=function(M,A,e){e(null,M)}},{"./_stream_transform":290,inherits:231}],289:[function(g,ne,ae){(function(T,c){(function(){ne.exports=k;var M;k.ReadableState=S,g("events").EventEmitter;var A=function(te,ee){return te.listeners(ee).length},e=g("./internal/streams/stream"),a=g("buffer").Buffer,n=c.Uint8Array||function(){};function t(X){return a.from(X)}function r(X){return a.isBuffer(X)||X instanceof n}var f=g("util"),o;f&&f.debuglog?o=f.debuglog("stream"):o=function(){};var i=g("./internal/streams/buffer_list"),p=g("./internal/streams/destroy"),d=g("./internal/streams/state"),y=d.getHighWaterMark,v=g("../errors").codes,x=v.ERR_INVALID_ARG_TYPE,l=v.ERR_STREAM_PUSH_AFTER_EOF,_=v.ERR_METHOD_NOT_IMPLEMENTED,s=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,w,b,h;g("inherits")(k,e);var m=p.errorOrDestroy,u=["error","close","destroy","pause","resume"];function L(X,te,ee){if(typeof X.prependListener=="function")return X.prependListener(te,ee);!X._events||!X._events[te]?X.on(te,ee):Array.isArray(X._events[te])?X._events[te].unshift(ee):X._events[te]=[ee,X._events[te]]}function S(X,te,ee){M=M||g("./_stream_duplex"),X=X||{},typeof ee!="boolean"&&(ee=te instanceof M),this.objectMode=!!X.objectMode,ee&&(this.objectMode=this.objectMode||!!X.readableObjectMode),this.highWaterMark=y(this,X,"readableHighWaterMark",ee),this.buffer=new i,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=X.emitClose!==!1,this.autoDestroy=!!X.autoDestroy,this.destroyed=!1,this.defaultEncoding=X.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,X.encoding&&(w||(w=g("string_decoder/").StringDecoder),this.decoder=new w(X.encoding),this.encoding=X.encoding)}function k(X){if(M=M||g("./_stream_duplex"),!(this instanceof k))return new k(X);var te=this instanceof M;this._readableState=new S(X,this,te),this.readable=!0,X&&(typeof X.read=="function"&&(this._read=X.read),typeof X.destroy=="function"&&(this._destroy=X.destroy)),e.call(this)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(te){!this._readableState||(this._readableState.destroyed=te)}}),k.prototype.destroy=p.destroy,k.prototype._undestroy=p.undestroy,k.prototype._destroy=function(X,te){te(X)},k.prototype.push=function(X,te){var ee=this._readableState,ie;return ee.objectMode?ie=!0:typeof X=="string"&&(te=te||ee.defaultEncoding,te!==ee.encoding&&(X=a.from(X,te),te=""),ie=!0),P(this,X,te,!1,ie)},k.prototype.unshift=function(X){return P(this,X,null,!0,!1)};function P(X,te,ee,ie,le){o("readableAddChunk",te);var ye=X._readableState;if(te===null)ye.reading=!1,F(X,ye);else{var ue;if(le||(ue=I(ye,te)),ue)m(X,ue);else if(ye.objectMode||te&&te.length>0)if(typeof te!="string"&&!ye.objectMode&&Object.getPrototypeOf(te)!==a.prototype&&(te=t(te)),ie)ye.endEmitted?m(X,new s):z(X,ye,te,!0);else if(ye.ended)m(X,new l);else{if(ye.destroyed)return!1;ye.reading=!1,ye.decoder&&!ee?(te=ye.decoder.write(te),ye.objectMode||te.length!==0?z(X,ye,te,!1):K(X,ye)):z(X,ye,te,!1)}else ie||(ye.reading=!1,K(X,ye))}return!ye.ended&&(ye.length<ye.highWaterMark||ye.length===0)}function z(X,te,ee,ie){te.flowing&&te.length===0&&!te.sync?(te.awaitDrain=0,X.emit("data",ee)):(te.length+=te.objectMode?1:ee.length,ie?te.buffer.unshift(ee):te.buffer.push(ee),te.needReadable&&V(X)),K(X,te)}function I(X,te){var ee;return!r(te)&&typeof te!="string"&&te!==void 0&&!X.objectMode&&(ee=new x("chunk",["string","Buffer","Uint8Array"],te)),ee}k.prototype.isPaused=function(){return this._readableState.flowing===!1},k.prototype.setEncoding=function(X){w||(w=g("string_decoder/").StringDecoder);var te=new w(X);this._readableState.decoder=te,this._readableState.encoding=this._readableState.decoder.encoding;for(var ee=this._readableState.buffer.head,ie="";ee!==null;)ie+=te.write(ee.data),ee=ee.next;return this._readableState.buffer.clear(),ie!==""&&this._readableState.buffer.push(ie),this._readableState.length=ie.length,this};var D=1073741824;function R(X){return X>=D?X=D:(X--,X|=X>>>1,X|=X>>>2,X|=X>>>4,X|=X>>>8,X|=X>>>16,X++),X}function B(X,te){return X<=0||te.length===0&&te.ended?0:te.objectMode?1:X!==X?te.flowing&&te.length?te.buffer.head.data.length:te.length:(X>te.highWaterMark&&(te.highWaterMark=R(X)),X<=te.length?X:te.ended?te.length:(te.needReadable=!0,0))}k.prototype.read=function(X){o("read",X),X=parseInt(X,10);var te=this._readableState,ee=X;if(X!==0&&(te.emittedReadable=!1),X===0&&te.needReadable&&((te.highWaterMark!==0?te.length>=te.highWaterMark:te.length>0)||te.ended))return o("read: emitReadable",te.length,te.ended),te.length===0&&te.ended?q(this):V(this),null;if(X=B(X,te),X===0&&te.ended)return te.length===0&&q(this),null;var ie=te.needReadable;o("need readable",ie),(te.length===0||te.length-X<te.highWaterMark)&&(ie=!0,o("length less than watermark",ie)),te.ended||te.reading?(ie=!1,o("reading or ended",ie)):ie&&(o("do read"),te.reading=!0,te.sync=!0,te.length===0&&(te.needReadable=!0),this._read(te.highWaterMark),te.sync=!1,te.reading||(X=B(ee,te)));var le;return X>0?le=U(X,te):le=null,le===null?(te.needReadable=te.length<=te.highWaterMark,X=0):(te.length-=X,te.awaitDrain=0),te.length===0&&(te.ended||(te.needReadable=!0),ee!==X&&te.ended&&q(this)),le!==null&&this.emit("data",le),le};function F(X,te){if(o("onEofChunk"),!te.ended){if(te.decoder){var ee=te.decoder.end();ee&&ee.length&&(te.buffer.push(ee),te.length+=te.objectMode?1:ee.length)}te.ended=!0,te.sync?V(X):(te.needReadable=!1,te.emittedReadable||(te.emittedReadable=!0,Y(X)))}}function V(X){var te=X._readableState;o("emitReadable",te.needReadable,te.emittedReadable),te.needReadable=!1,te.emittedReadable||(o("emitReadable",te.flowing),te.emittedReadable=!0,T.nextTick(Y,X))}function Y(X){var te=X._readableState;o("emitReadable_",te.destroyed,te.length,te.ended),!te.destroyed&&(te.length||te.ended)&&(X.emit("readable"),te.emittedReadable=!1),te.needReadable=!te.flowing&&!te.ended&&te.length<=te.highWaterMark,N(X)}function K(X,te){te.readingMore||(te.readingMore=!0,T.nextTick(J,X,te))}function J(X,te){for(;!te.reading&&!te.ended&&(te.length<te.highWaterMark||te.flowing&&te.length===0);){var ee=te.length;if(o("maybeReadMore read 0"),X.read(0),ee===te.length)break}te.readingMore=!1}k.prototype._read=function(X){m(this,new _("_read()"))},k.prototype.pipe=function(X,te){var ee=this,ie=this._readableState;switch(ie.pipesCount){case 0:ie.pipes=X;break;case 1:ie.pipes=[ie.pipes,X];break;default:ie.pipes.push(X);break}ie.pipesCount+=1,o("pipe count=%d opts=%j",ie.pipesCount,te);var le=(!te||te.end!==!1)&&X!==T.stdout&&X!==T.stderr,ye=le?pe:Pe;ie.endEmitted?T.nextTick(ye):ee.once("end",ye),X.on("unpipe",ue);function ue(Ve,Qe){o("onunpipe"),Ve===ee&&Qe&&Qe.hasUnpiped===!1&&(Qe.hasUnpiped=!0,_e())}function pe(){o("onend"),X.end()}var ge=G(ee);X.on("drain",ge);var Te=!1;function _e(){o("cleanup"),X.removeListener("close",Ue),X.removeListener("finish",xe),X.removeListener("drain",ge),X.removeListener("error",Oe),X.removeListener("unpipe",ue),ee.removeListener("end",pe),ee.removeListener("end",Pe),ee.removeListener("data",De),Te=!0,ie.awaitDrain&&(!X._writableState||X._writableState.needDrain)&&ge()}ee.on("data",De);function De(Ve){o("ondata");var Qe=X.write(Ve);o("dest.write",Qe),Qe===!1&&((ie.pipesCount===1&&ie.pipes===X||ie.pipesCount>1&&W(ie.pipes,X)!==-1)&&!Te&&(o("false write response, pause",ie.awaitDrain),ie.awaitDrain++),ee.pause())}function Oe(Ve){o("onerror",Ve),Pe(),X.removeListener("error",Oe),A(X,"error")===0&&m(X,Ve)}L(X,"error",Oe);function Ue(){X.removeListener("finish",xe),Pe()}X.once("close",Ue);function xe(){o("onfinish"),X.removeListener("close",Ue),Pe()}X.once("finish",xe);function Pe(){o("unpipe"),ee.unpipe(X)}return X.emit("pipe",ee),ie.flowing||(o("pipe resume"),ee.resume()),X};function G(X){return function(){var ee=X._readableState;o("pipeOnDrain",ee.awaitDrain),ee.awaitDrain&&ee.awaitDrain--,ee.awaitDrain===0&&A(X,"data")&&(ee.flowing=!0,N(X))}}k.prototype.unpipe=function(X){var te=this._readableState,ee={hasUnpiped:!1};if(te.pipesCount===0)return this;if(te.pipesCount===1)return X&&X!==te.pipes?this:(X||(X=te.pipes),te.pipes=null,te.pipesCount=0,te.flowing=!1,X&&X.emit("unpipe",this,ee),this);if(!X){var ie=te.pipes,le=te.pipesCount;te.pipes=null,te.pipesCount=0,te.flowing=!1;for(var ye=0;ye<le;ye++)ie[ye].emit("unpipe",this,{hasUnpiped:!1});return this}var ue=W(te.pipes,X);return ue===-1?this:(te.pipes.splice(ue,1),te.pipesCount-=1,te.pipesCount===1&&(te.pipes=te.pipes[0]),X.emit("unpipe",this,ee),this)},k.prototype.on=function(X,te){var ee=e.prototype.on.call(this,X,te),ie=this._readableState;return X==="data"?(ie.readableListening=this.listenerCount("readable")>0,ie.flowing!==!1&&this.resume()):X==="readable"&&!ie.endEmitted&&!ie.readableListening&&(ie.readableListening=ie.needReadable=!0,ie.flowing=!1,ie.emittedReadable=!1,o("on readable",ie.length,ie.reading),ie.length?V(this):ie.reading||T.nextTick(re,this)),ee},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(X,te){var ee=e.prototype.removeListener.call(this,X,te);return X==="readable"&&T.nextTick(Z,this),ee},k.prototype.removeAllListeners=function(X){var te=e.prototype.removeAllListeners.apply(this,arguments);return(X==="readable"||X===void 0)&&T.nextTick(Z,this),te};function Z(X){var te=X._readableState;te.readableListening=X.listenerCount("readable")>0,te.resumeScheduled&&!te.paused?te.flowing=!0:X.listenerCount("data")>0&&X.resume()}function re(X){o("readable nexttick read 0"),X.read(0)}k.prototype.resume=function(){var X=this._readableState;return X.flowing||(o("resume"),X.flowing=!X.readableListening,se(this,X)),X.paused=!1,this};function se(X,te){te.resumeScheduled||(te.resumeScheduled=!0,T.nextTick(oe,X,te))}function oe(X,te){o("resume",te.reading),te.reading||X.read(0),te.resumeScheduled=!1,X.emit("resume"),N(X),te.flowing&&!te.reading&&X.read(0)}k.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function N(X){var te=X._readableState;for(o("flow",te.flowing);te.flowing&&X.read()!==null;);}k.prototype.wrap=function(X){var te=this,ee=this._readableState,ie=!1;X.on("end",function(){if(o("wrapped end"),ee.decoder&&!ee.ended){var ue=ee.decoder.end();ue&&ue.length&&te.push(ue)}te.push(null)}),X.on("data",function(ue){if(o("wrapped data"),ee.decoder&&(ue=ee.decoder.write(ue)),!(ee.objectMode&&ue==null)&&!(!ee.objectMode&&(!ue||!ue.length))){var pe=te.push(ue);pe||(ie=!0,X.pause())}});for(var le in X)this[le]===void 0&&typeof X[le]=="function"&&(this[le]=function(pe){return function(){return X[pe].apply(X,arguments)}}(le));for(var ye=0;ye<u.length;ye++)X.on(u[ye],this.emit.bind(this,u[ye]));return this._read=function(ue){o("wrapped _read",ue),ie&&(ie=!1,X.resume())},this},typeof Symbol=="function"&&(k.prototype[Symbol.asyncIterator]=function(){return b===void 0&&(b=g("./internal/streams/async_iterator")),b(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(te){this._readableState&&(this._readableState.flowing=te)}}),k._fromList=U,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function U(X,te){if(te.length===0)return null;var ee;return te.objectMode?ee=te.buffer.shift():!X||X>=te.length?(te.decoder?ee=te.buffer.join(""):te.buffer.length===1?ee=te.buffer.first():ee=te.buffer.concat(te.length),te.buffer.clear()):ee=te.buffer.consume(X,te.decoder),ee}function q(X){var te=X._readableState;o("endReadable",te.endEmitted),te.endEmitted||(te.ended=!0,T.nextTick(Q,te,X))}function Q(X,te){if(o("endReadableNT",X.endEmitted,X.length),!X.endEmitted&&X.length===0&&(X.endEmitted=!0,te.readable=!1,te.emit("end"),X.autoDestroy)){var ee=te._writableState;(!ee||ee.autoDestroy&&ee.finished)&&te.destroy()}}typeof Symbol=="function"&&(k.from=function(X,te){return h===void 0&&(h=g("./internal/streams/from")),h(k,X,te)});function W(X,te){for(var ee=0,ie=X.length;ee<ie;ee++)if(X[ee]===te)return ee;return-1}}).call(this)}).call(this,g("_process"),typeof To!="undefined"?To:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(g,ne,ae){ne.exports=t;var T=g("../errors").codes,c=T.ERR_METHOD_NOT_IMPLEMENTED,M=T.ERR_MULTIPLE_CALLBACK,A=T.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=T.ERR_TRANSFORM_WITH_LENGTH_0,a=g("./_stream_duplex");g("inherits")(t,a);function n(o,i){var p=this._transformState;p.transforming=!1;var d=p.writecb;if(d===null)return this.emit("error",new M);p.writechunk=null,p.writecb=null,i!=null&&this.push(i),d(o);var y=this._readableState;y.reading=!1,(y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}function t(o){if(!(this instanceof t))return new t(o);a.call(this,o),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,o&&(typeof o.transform=="function"&&(this._transform=o.transform),typeof o.flush=="function"&&(this._flush=o.flush)),this.on("prefinish",r)}function r(){var o=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(i,p){f(o,i,p)}):f(this,null,null)}t.prototype.push=function(o,i){return this._transformState.needTransform=!1,a.prototype.push.call(this,o,i)},t.prototype._transform=function(o,i,p){p(new c("_transform()"))},t.prototype._write=function(o,i,p){var d=this._transformState;if(d.writecb=p,d.writechunk=o,d.writeencoding=i,!d.transforming){var y=this._readableState;(d.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},t.prototype._read=function(o){var i=this._transformState;i.writechunk!==null&&!i.transforming?(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform)):i.needTransform=!0},t.prototype._destroy=function(o,i){a.prototype._destroy.call(this,o,function(p){i(p)})};function f(o,i,p){if(i)return o.emit("error",i);if(p!=null&&o.push(p),o._writableState.length)throw new e;if(o._transformState.transforming)throw new A;return o.push(null)}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(g,ne,ae){(function(T,c){(function(){ne.exports=S;function M(N){var U=this;this.next=null,this.entry=null,this.finish=function(){oe(U,N)}}var A;S.WritableState=u;var e={deprecate:g("util-deprecate")},a=g("./internal/streams/stream"),n=g("buffer").Buffer,t=c.Uint8Array||function(){};function r(N){return n.from(N)}function f(N){return n.isBuffer(N)||N instanceof t}var o=g("./internal/streams/destroy"),i=g("./internal/streams/state"),p=i.getHighWaterMark,d=g("../errors").codes,y=d.ERR_INVALID_ARG_TYPE,v=d.ERR_METHOD_NOT_IMPLEMENTED,x=d.ERR_MULTIPLE_CALLBACK,l=d.ERR_STREAM_CANNOT_PIPE,_=d.ERR_STREAM_DESTROYED,s=d.ERR_STREAM_NULL_VALUES,w=d.ERR_STREAM_WRITE_AFTER_END,b=d.ERR_UNKNOWN_ENCODING,h=o.errorOrDestroy;g("inherits")(S,a);function m(){}function u(N,U,q){A=A||g("./_stream_duplex"),N=N||{},typeof q!="boolean"&&(q=U instanceof A),this.objectMode=!!N.objectMode,q&&(this.objectMode=this.objectMode||!!N.writableObjectMode),this.highWaterMark=p(this,N,"writableHighWaterMark",q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Q=N.decodeStrings===!1;this.decodeStrings=!Q,this.defaultEncoding=N.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(W){F(U,W)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=N.emitClose!==!1,this.autoDestroy=!!N.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new M(this)}u.prototype.getBuffer=function(){for(var U=this.bufferedRequest,q=[];U;)q.push(U),U=U.next;return q},function(){try{Object.defineProperty(u.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(U){return L.call(this,U)?!0:this!==S?!1:U&&U._writableState instanceof u}})):L=function(U){return U instanceof this};function S(N){A=A||g("./_stream_duplex");var U=this instanceof A;if(!U&&!L.call(S,this))return new S(N);this._writableState=new u(N,this,U),this.writable=!0,N&&(typeof N.write=="function"&&(this._write=N.write),typeof N.writev=="function"&&(this._writev=N.writev),typeof N.destroy=="function"&&(this._destroy=N.destroy),typeof N.final=="function"&&(this._final=N.final)),a.call(this)}S.prototype.pipe=function(){h(this,new l)};function k(N,U){var q=new w;h(N,q),T.nextTick(U,q)}function P(N,U,q,Q){var W;return q===null?W=new s:typeof q!="string"&&!U.objectMode&&(W=new y("chunk",["string","Buffer"],q)),W?(h(N,W),T.nextTick(Q,W),!1):!0}S.prototype.write=function(N,U,q){var Q=this._writableState,W=!1,X=!Q.objectMode&&f(N);return X&&!n.isBuffer(N)&&(N=r(N)),typeof U=="function"&&(q=U,U=null),X?U="buffer":U||(U=Q.defaultEncoding),typeof q!="function"&&(q=m),Q.ending?k(this,q):(X||P(this,Q,N,q))&&(Q.pendingcb++,W=I(this,Q,X,N,U,q)),W},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var N=this._writableState;N.corked&&(N.corked--,!N.writing&&!N.corked&&!N.bufferProcessing&&N.bufferedRequest&&K(this,N))},S.prototype.setDefaultEncoding=function(U){if(typeof U=="string"&&(U=U.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((U+"").toLowerCase())>-1))throw new b(U);return this._writableState.defaultEncoding=U,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function z(N,U,q){return!N.objectMode&&N.decodeStrings!==!1&&typeof U=="string"&&(U=n.from(U,q)),U}Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(N,U,q,Q,W,X){if(!q){var te=z(U,Q,W);Q!==te&&(q=!0,W="buffer",Q=te)}var ee=U.objectMode?1:Q.length;U.length+=ee;var ie=U.length<U.highWaterMark;if(ie||(U.needDrain=!0),U.writing||U.corked){var le=U.lastBufferedRequest;U.lastBufferedRequest={chunk:Q,encoding:W,isBuf:q,callback:X,next:null},le?le.next=U.lastBufferedRequest:U.bufferedRequest=U.lastBufferedRequest,U.bufferedRequestCount+=1}else D(N,U,!1,ee,Q,W,X);return ie}function D(N,U,q,Q,W,X,te){U.writelen=Q,U.writecb=te,U.writing=!0,U.sync=!0,U.destroyed?U.onwrite(new _("write")):q?N._writev(W,U.onwrite):N._write(W,X,U.onwrite),U.sync=!1}function R(N,U,q,Q,W){--U.pendingcb,q?(T.nextTick(W,Q),T.nextTick(re,N,U),N._writableState.errorEmitted=!0,h(N,Q)):(W(Q),N._writableState.errorEmitted=!0,h(N,Q),re(N,U))}function B(N){N.writing=!1,N.writecb=null,N.length-=N.writelen,N.writelen=0}function F(N,U){var q=N._writableState,Q=q.sync,W=q.writecb;if(typeof W!="function")throw new x;if(B(q),U)R(N,q,Q,U,W);else{var X=J(q)||N.destroyed;!X&&!q.corked&&!q.bufferProcessing&&q.bufferedRequest&&K(N,q),Q?T.nextTick(V,N,q,X,W):V(N,q,X,W)}}function V(N,U,q,Q){q||Y(N,U),U.pendingcb--,Q(),re(N,U)}function Y(N,U){U.length===0&&U.needDrain&&(U.needDrain=!1,N.emit("drain"))}function K(N,U){U.bufferProcessing=!0;var q=U.bufferedRequest;if(N._writev&&q&&q.next){var Q=U.bufferedRequestCount,W=new Array(Q),X=U.corkedRequestsFree;X.entry=q;for(var te=0,ee=!0;q;)W[te]=q,q.isBuf||(ee=!1),q=q.next,te+=1;W.allBuffers=ee,D(N,U,!0,U.length,W,"",X.finish),U.pendingcb++,U.lastBufferedRequest=null,X.next?(U.corkedRequestsFree=X.next,X.next=null):U.corkedRequestsFree=new M(U),U.bufferedRequestCount=0}else{for(;q;){var ie=q.chunk,le=q.encoding,ye=q.callback,ue=U.objectMode?1:ie.length;if(D(N,U,!1,ue,ie,le,ye),q=q.next,U.bufferedRequestCount--,U.writing)break}q===null&&(U.lastBufferedRequest=null)}U.bufferedRequest=q,U.bufferProcessing=!1}S.prototype._write=function(N,U,q){q(new v("_write()"))},S.prototype._writev=null,S.prototype.end=function(N,U,q){var Q=this._writableState;return typeof N=="function"?(q=N,N=null,U=null):typeof U=="function"&&(q=U,U=null),N!=null&&this.write(N,U),Q.corked&&(Q.corked=1,this.uncork()),Q.ending||se(this,Q,q),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function J(N){return N.ending&&N.length===0&&N.bufferedRequest===null&&!N.finished&&!N.writing}function G(N,U){N._final(function(q){U.pendingcb--,q&&h(N,q),U.prefinished=!0,N.emit("prefinish"),re(N,U)})}function Z(N,U){!U.prefinished&&!U.finalCalled&&(typeof N._final=="function"&&!U.destroyed?(U.pendingcb++,U.finalCalled=!0,T.nextTick(G,N,U)):(U.prefinished=!0,N.emit("prefinish")))}function re(N,U){var q=J(U);if(q&&(Z(N,U),U.pendingcb===0&&(U.finished=!0,N.emit("finish"),U.autoDestroy))){var Q=N._readableState;(!Q||Q.autoDestroy&&Q.endEmitted)&&N.destroy()}return q}function se(N,U,q){U.ending=!0,re(N,U),q&&(U.finished?T.nextTick(q):N.once("finish",q)),U.ended=!0,N.writable=!1}function oe(N,U,q){var Q=N.entry;for(N.entry=null;Q;){var W=Q.callback;U.pendingcb--,W(q),Q=Q.next}U.corkedRequestsFree.next=N}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(U){!this._writableState||(this._writableState.destroyed=U)}}),S.prototype.destroy=o.destroy,S.prototype._undestroy=o.undestroy,S.prototype._destroy=function(N,U){U(N)}}).call(this)}).call(this,g("_process"),typeof To!="undefined"?To:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(g,ne,ae){(function(T){(function(){var c;function M(_,s,w){return s in _?Object.defineProperty(_,s,{value:w,enumerable:!0,configurable:!0,writable:!0}):_[s]=w,_}var A=g("./end-of-stream"),e=Symbol("lastResolve"),a=Symbol("lastReject"),n=Symbol("error"),t=Symbol("ended"),r=Symbol("lastPromise"),f=Symbol("handlePromise"),o=Symbol("stream");function i(_,s){return{value:_,done:s}}function p(_){var s=_[e];if(s!==null){var w=_[o].read();w!==null&&(_[r]=null,_[e]=null,_[a]=null,s(i(w,!1)))}}function d(_){T.nextTick(p,_)}function y(_,s){return function(w,b){_.then(function(){if(s[t]){w(i(void 0,!0));return}s[f](w,b)},b)}}var v=Object.getPrototypeOf(function(){}),x=Object.setPrototypeOf((c={get stream(){return this[o]},next:function(){var s=this,w=this[n];if(w!==null)return Promise.reject(w);if(this[t])return Promise.resolve(i(void 0,!0));if(this[o].destroyed)return new Promise(function(u,L){T.nextTick(function(){s[n]?L(s[n]):u(i(void 0,!0))})});var b=this[r],h;if(b)h=new Promise(y(b,this));else{var m=this[o].read();if(m!==null)return Promise.resolve(i(m,!1));h=new Promise(this[f])}return this[r]=h,h}},M(c,Symbol.asyncIterator,function(){return this}),M(c,"return",function(){var s=this;return new Promise(function(w,b){s[o].destroy(null,function(h){if(h){b(h);return}w(i(void 0,!0))})})}),c),v),l=function(s){var w,b=Object.create(x,(w={},M(w,o,{value:s,writable:!0}),M(w,e,{value:null,writable:!0}),M(w,a,{value:null,writable:!0}),M(w,n,{value:null,writable:!0}),M(w,t,{value:s._readableState.endEmitted,writable:!0}),M(w,f,{value:function(m,u){var L=b[o].read();L?(b[r]=null,b[e]=null,b[a]=null,m(i(L,!1))):(b[e]=m,b[a]=u)},writable:!0}),w));return b[r]=null,A(s,function(h){if(h&&h.code!=="ERR_STREAM_PREMATURE_CLOSE"){var m=b[a];m!==null&&(b[r]=null,b[e]=null,b[a]=null,m(h)),b[n]=h;return}var u=b[e];u!==null&&(b[r]=null,b[e]=null,b[a]=null,u(i(void 0,!0))),b[t]=!0}),s.on("readable",d.bind(null,b)),b};ne.exports=l}).call(this)}).call(this,g("_process"))},{"./end-of-stream":295,_process:277}],293:[function(g,ne,ae){function T(p,d){var y=Object.keys(p);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(p);d&&(v=v.filter(function(x){return Object.getOwnPropertyDescriptor(p,x).enumerable})),y.push.apply(y,v)}return y}function c(p){for(var d=1;d<arguments.length;d++){var y=arguments[d]!=null?arguments[d]:{};d%2?T(Object(y),!0).forEach(function(v){M(p,v,y[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(y)):T(Object(y)).forEach(function(v){Object.defineProperty(p,v,Object.getOwnPropertyDescriptor(y,v))})}return p}function M(p,d,y){return d in p?Object.defineProperty(p,d,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[d]=y,p}function A(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function e(p,d){for(var y=0;y<d.length;y++){var v=d[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}function a(p,d,y){return d&&e(p.prototype,d),y&&e(p,y),p}var n=g("buffer"),t=n.Buffer,r=g("util"),f=r.inspect,o=f&&f.custom||"inspect";function i(p,d,y){t.prototype.copy.call(p,d,y)}ne.exports=function(){function p(){A(this,p),this.head=null,this.tail=null,this.length=0}return a(p,[{key:"push",value:function(y){var v={data:y,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(y){var v={data:y,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var y=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,y}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(y){if(this.length===0)return"";for(var v=this.head,x=""+v.data;v=v.next;)x+=y+v.data;return x}},{key:"concat",value:function(y){if(this.length===0)return t.alloc(0);for(var v=t.allocUnsafe(y>>>0),x=this.head,l=0;x;)i(x.data,v,l),l+=x.data.length,x=x.next;return v}},{key:"consume",value:function(y,v){var x;return y<this.head.data.length?(x=this.head.data.slice(0,y),this.head.data=this.head.data.slice(y)):y===this.head.data.length?x=this.shift():x=v?this._getString(y):this._getBuffer(y),x}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(y){var v=this.head,x=1,l=v.data;for(y-=l.length;v=v.next;){var _=v.data,s=y>_.length?_.length:y;if(s===_.length?l+=_:l+=_.slice(0,y),y-=s,y===0){s===_.length?(++x,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=_.slice(s));break}++x}return this.length-=x,l}},{key:"_getBuffer",value:function(y){var v=t.allocUnsafe(y),x=this.head,l=1;for(x.data.copy(v),y-=x.data.length;x=x.next;){var _=x.data,s=y>_.length?_.length:y;if(_.copy(v,v.length-y,0,s),y-=s,y===0){s===_.length?(++l,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=_.slice(s));break}++l}return this.length-=l,v}},{key:o,value:function(y,v){return f(this,c({},v,{depth:0,customInspect:!1}))}}]),p}()},{buffer:85,util:83}],294:[function(g,ne,ae){(function(T){(function(){function c(t,r){var f=this,o=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return o||i?(r?r(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,T.nextTick(a,this,t)):T.nextTick(a,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(p){!r&&p?f._writableState?f._writableState.errorEmitted?T.nextTick(A,f):(f._writableState.errorEmitted=!0,T.nextTick(M,f,p)):T.nextTick(M,f,p):r?(T.nextTick(A,f),r(p)):T.nextTick(A,f)}),this)}function M(t,r){a(t,r),A(t)}function A(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function e(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(t,r){t.emit("error",r)}function n(t,r){var f=t._readableState,o=t._writableState;f&&f.autoDestroy||o&&o.autoDestroy?t.destroy(r):t.emit("error",r)}ne.exports={destroy:c,undestroy:e,errorOrDestroy:n}}).call(this)}).call(this,g("_process"))},{_process:277}],295:[function(g,ne,ae){var T=g("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function c(a){var n=!1;return function(){if(!n){n=!0;for(var t=arguments.length,r=new Array(t),f=0;f<t;f++)r[f]=arguments[f];a.apply(this,r)}}}function M(){}function A(a){return a.setHeader&&typeof a.abort=="function"}function e(a,n,t){if(typeof n=="function")return e(a,null,n);n||(n={}),t=c(t||M);var r=n.readable||n.readable!==!1&&a.readable,f=n.writable||n.writable!==!1&&a.writable,o=function(){a.writable||p()},i=a._writableState&&a._writableState.finished,p=function(){f=!1,i=!0,r||t.call(a)},d=a._readableState&&a._readableState.endEmitted,y=function(){r=!1,d=!0,f||t.call(a)},v=function(s){t.call(a,s)},x=function(){var s;if(r&&!d)return(!a._readableState||!a._readableState.ended)&&(s=new T),t.call(a,s);if(f&&!i)return(!a._writableState||!a._writableState.ended)&&(s=new T),t.call(a,s)},l=function(){a.req.on("finish",p)};return A(a)?(a.on("complete",p),a.on("abort",x),a.req?l():a.on("request",l)):f&&!a._writableState&&(a.on("end",o),a.on("close",o)),a.on("end",y),a.on("finish",p),n.error!==!1&&a.on("error",v),a.on("close",x),function(){a.removeListener("complete",p),a.removeListener("abort",x),a.removeListener("request",l),a.req&&a.req.removeListener("finish",p),a.removeListener("end",o),a.removeListener("close",o),a.removeListener("finish",p),a.removeListener("end",y),a.removeListener("error",v),a.removeListener("close",x)}}ne.exports=e},{"../../../errors":286}],296:[function(g,ne,ae){ne.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(g,ne,ae){var T;function c(p){var d=!1;return function(){d||(d=!0,p.apply(void 0,arguments))}}var M=g("../../../errors").codes,A=M.ERR_MISSING_ARGS,e=M.ERR_STREAM_DESTROYED;function a(p){if(p)throw p}function n(p){return p.setHeader&&typeof p.abort=="function"}function t(p,d,y,v){v=c(v);var x=!1;p.on("close",function(){x=!0}),T===void 0&&(T=g("./end-of-stream")),T(p,{readable:d,writable:y},function(_){if(_)return v(_);x=!0,v()});var l=!1;return function(_){if(!x&&!l){if(l=!0,n(p))return p.abort();if(typeof p.destroy=="function")return p.destroy();v(_||new e("pipe"))}}}function r(p){p()}function f(p,d){return p.pipe(d)}function o(p){return!p.length||typeof p[p.length-1]!="function"?a:p.pop()}function i(){for(var p=arguments.length,d=new Array(p),y=0;y<p;y++)d[y]=arguments[y];var v=o(d);if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new A("streams");var x,l=d.map(function(_,s){var w=s<d.length-1,b=s>0;return t(_,w,b,function(h){x||(x=h),h&&l.forEach(r),!w&&(l.forEach(r),v(x))})});return d.reduce(f)}ne.exports=i},{"../../../errors":286,"./end-of-stream":295}],298:[function(g,ne,ae){var T=g("../../../errors").codes.ERR_INVALID_OPT_VALUE;function c(A,e,a){return A.highWaterMark!=null?A.highWaterMark:e?A[a]:null}function M(A,e,a,n){var t=c(e,n,a);if(t!=null){if(!(isFinite(t)&&Math.floor(t)===t)||t<0){var r=n?a:"highWaterMark";throw new T(r,t)}return Math.floor(t)}return A.objectMode?16:16*1024}ne.exports={getHighWaterMark:M}},{"../../../errors":286}],299:[function(g,ne,ae){ne.exports=g("events").EventEmitter},{events:84}],300:[function(g,ne,ae){var T=g("safe-buffer").Buffer,c=T.isEncoding||function(l){switch(l=""+l,l&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function M(l){if(!l)return"utf8";for(var _;;)switch(l){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return l;default:if(_)return;l=(""+l).toLowerCase(),_=!0}}function A(l){var _=M(l);if(typeof _!="string"&&(T.isEncoding===c||!c(l)))throw new Error("Unknown encoding: "+l);return _||l}ae.StringDecoder=e;function e(l){this.encoding=A(l);var _;switch(this.encoding){case"utf16le":this.text=i,this.end=p,_=4;break;case"utf8":this.fillLast=r,_=4;break;case"base64":this.text=d,this.end=y,_=3;break;default:this.write=v,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=T.allocUnsafe(_)}e.prototype.write=function(l){if(l.length===0)return"";var _,s;if(this.lastNeed){if(_=this.fillLast(l),_===void 0)return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<l.length?_?_+this.text(l,s):this.text(l,s):_||""},e.prototype.end=o,e.prototype.text=f,e.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length};function a(l){return l<=127?0:l>>5==6?2:l>>4==14?3:l>>3==30?4:l>>6==2?-1:-2}function n(l,_,s){var w=_.length-1;if(w<s)return 0;var b=a(_[w]);return b>=0?(b>0&&(l.lastNeed=b-1),b):--w<s||b===-2?0:(b=a(_[w]),b>=0?(b>0&&(l.lastNeed=b-2),b):--w<s||b===-2?0:(b=a(_[w]),b>=0?(b>0&&(b===2?b=0:l.lastNeed=b-3),b):0))}function t(l,_,s){if((_[0]&192)!=128)return l.lastNeed=0,"\uFFFD";if(l.lastNeed>1&&_.length>1){if((_[1]&192)!=128)return l.lastNeed=1,"\uFFFD";if(l.lastNeed>2&&_.length>2&&(_[2]&192)!=128)return l.lastNeed=2,"\uFFFD"}}function r(l){var _=this.lastTotal-this.lastNeed,s=t(this,l);if(s!==void 0)return s;if(this.lastNeed<=l.length)return l.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,_,0,l.length),this.lastNeed-=l.length}function f(l,_){var s=n(this,l,_);if(!this.lastNeed)return l.toString("utf8",_);this.lastTotal=s;var w=l.length-(s-this.lastNeed);return l.copy(this.lastChar,0,w),l.toString("utf8",_,w)}function o(l){var _=l&&l.length?this.write(l):"";return this.lastNeed?_+"\uFFFD":_}function i(l,_){if((l.length-_)%2==0){var s=l.toString("utf16le",_);if(s){var w=s.charCodeAt(s.length-1);if(w>=55296&&w<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",_,l.length-1)}function p(l){var _=l&&l.length?this.write(l):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,s)}return _}function d(l,_){var s=(l.length-_)%3;return s===0?l.toString("base64",_):(this.lastNeed=3-s,this.lastTotal=3,s===1?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",_,l.length-s))}function y(l){var _=l&&l.length?this.write(l):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function v(l){return l.toString(this.encoding)}function x(l){return l&&l.length?this.write(l):""}},{"safe-buffer":284}],301:[function(g,ne,ae){(function(T,c){(function(){var M=g("assert"),A=g("debug")("stream-parser");ne.exports=r;var e=-1,a=0,n=1,t=2;function r(s){var w=s&&typeof s._transform=="function",b=s&&typeof s._write=="function";if(!w&&!b)throw new Error("must pass a Writable or Transform stream in");A("extending Parser into stream"),s._bytes=o,s._skipBytes=i,w&&(s._passthrough=p),w?s._transform=y:s._write=d}function f(s){A("initializing parser stream"),s._parserBytesLeft=0,s._parserBuffers=[],s._parserBuffered=0,s._parserState=e,s._parserCallback=null,typeof s.push=="function"&&(s._parserOutput=s.push.bind(s)),s._parserInit=!0}function o(s,w){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(s)&&s>0,'can only buffer a finite number of bytes > 0, got "'+s+'"'),this._parserInit||f(this),A("buffering %o bytes",s),this._parserBytesLeft=s,this._parserCallback=w,this._parserState=a}function i(s,w){M(!this._parserCallback,'there is already a "callback" set!'),M(s>0,'can only skip > 0 bytes, got "'+s+'"'),this._parserInit||f(this),A("skipping %o bytes",s),this._parserBytesLeft=s,this._parserCallback=w,this._parserState=n}function p(s,w){M(!this._parserCallback,'There is already a "callback" set!'),M(s>0,'can only pass through > 0 bytes, got "'+s+'"'),this._parserInit||f(this),A("passing through %o bytes",s),this._parserBytesLeft=s,this._parserCallback=w,this._parserState=t}function d(s,w,b){this._parserInit||f(this),A("write(%o bytes)",s.length),typeof w=="function"&&(b=w),l(this,s,null,b)}function y(s,w,b){this._parserInit||f(this),A("transform(%o bytes)",s.length),typeof w!="function"&&(w=this._parserOutput),l(this,s,w,b)}function v(s,w,b,h){return s._parserBytesLeft<=0?h(new Error("got data but not currently parsing anything")):w.length<=s._parserBytesLeft?function(){return x(s,w,b,h)}:function(){var m=w.slice(0,s._parserBytesLeft);return x(s,m,b,function(u){if(u)return h(u);if(w.length>m.length)return function(){return v(s,w.slice(m.length),b,h)}})}}function x(s,w,b,h){if(s._parserBytesLeft-=w.length,A("%o bytes left for stream piece",s._parserBytesLeft),s._parserState===a?(s._parserBuffers.push(w),s._parserBuffered+=w.length):s._parserState===t&&b(w),s._parserBytesLeft===0){var m=s._parserCallback;if(m&&s._parserState===a&&s._parserBuffers.length>1&&(w=c.concat(s._parserBuffers,s._parserBuffered)),s._parserState!==a&&(w=null),s._parserCallback=null,s._parserBuffered=0,s._parserState=e,s._parserBuffers.splice(0),m){var u=[];w&&u.push(w),b&&u.push(b);var L=m.length>u.length;L&&u.push(_(h));var S=m.apply(s,u);if(!L||h===S)return h}}else return h}var l=_(v);function _(s){return function(){for(var w=s.apply(this,arguments);typeof w=="function";)w=w();return w}}}).call(this)}).call(this,g("_process"),g("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(g,ne,ae){(function(T){(function(){ae=ne.exports=g("./debug"),ae.log=A,ae.formatArgs=M,ae.save=e,ae.load=a,ae.useColors=c,ae.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:n(),ae.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function c(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}ae.formatters.j=function(t){try{return JSON.stringify(t)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}};function M(t){var r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+ae.humanize(this.diff),!!r){var f="color: "+this.color;t.splice(1,0,f,"color: inherit");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(p){p!=="%%"&&(o++,p==="%c"&&(i=o))}),t.splice(i,0,f)}}function A(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function e(t){try{t==null?ae.storage.removeItem("debug"):ae.storage.debug=t}catch{}}function a(){var t;try{t=ae.storage.debug}catch{}return!t&&typeof T!="undefined"&&"env"in T&&(t={}.DEBUG),t}ae.enable(a());function n(){try{return window.localStorage}catch{}}}).call(this)}).call(this,g("_process"))},{"./debug":303,_process:277}],303:[function(g,ne,ae){ae=ne.exports=M.debug=M.default=M,ae.coerce=n,ae.disable=e,ae.enable=A,ae.enabled=a,ae.humanize=g("ms"),ae.names=[],ae.skips=[],ae.formatters={};var T;function c(t){var r=0,f;for(f in t)r=(r<<5)-r+t.charCodeAt(f),r|=0;return ae.colors[Math.abs(r)%ae.colors.length]}function M(t){function r(){if(!!r.enabled){var f=r,o=+new Date,i=o-(T||o);f.diff=i,f.prev=T,f.curr=o,T=o;for(var p=new Array(arguments.length),d=0;d<p.length;d++)p[d]=arguments[d];p[0]=ae.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var y=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(x,l){if(x==="%%")return x;y++;var _=ae.formatters[l];if(typeof _=="function"){var s=p[y];x=_.call(f,s),p.splice(y,1),y--}return x}),ae.formatArgs.call(f,p);var v=r.log||ae.log||console.log.bind(console);v.apply(f,p)}}return r.namespace=t,r.enabled=ae.enabled(t),r.useColors=ae.useColors(),r.color=c(t),typeof ae.init=="function"&&ae.init(r),r}function A(t){ae.save(t),ae.names=[],ae.skips=[];for(var r=(typeof t=="string"?t:"").split(/[\s,]+/),f=r.length,o=0;o<f;o++)!r[o]||(t=r[o].replace(/\*/g,".*?"),t[0]==="-"?ae.skips.push(new RegExp("^"+t.substr(1)+"$")):ae.names.push(new RegExp("^"+t+"$")))}function e(){ae.enable("")}function a(t){var r,f;for(r=0,f=ae.skips.length;r<f;r++)if(ae.skips[r].test(t))return!1;for(r=0,f=ae.names.length;r<f;r++)if(ae.names[r].test(t))return!0;return!1}function n(t){return t instanceof Error?t.stack||t.message:t}},{ms:304}],304:[function(g,ne,ae){var T=1e3,c=T*60,M=c*60,A=M*24,e=A*365.25;ne.exports=function(f,o){o=o||{};var i=typeof f;if(i==="string"&&f.length>0)return a(f);if(i==="number"&&isNaN(f)===!1)return o.long?t(f):n(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function a(f){if(f=String(f),!(f.length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(f);if(!!o){var i=parseFloat(o[1]),p=(o[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return i*e;case"days":case"day":case"d":return i*A;case"hours":case"hour":case"hrs":case"hr":case"h":return i*M;case"minutes":case"minute":case"mins":case"min":case"m":return i*c;case"seconds":case"second":case"secs":case"sec":case"s":return i*T;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function n(f){return f>=A?Math.round(f/A)+"d":f>=M?Math.round(f/M)+"h":f>=c?Math.round(f/c)+"m":f>=T?Math.round(f/T)+"s":f+"ms"}function t(f){return r(f,A,"day")||r(f,M,"hour")||r(f,c,"minute")||r(f,T,"second")||f+" ms"}function r(f,o,i){if(!(f<o))return f<o*1.5?Math.floor(f/o)+" "+i:Math.ceil(f/o)+" "+i+"s"}},{}],305:[function(g,ne,ae){var T=g("parenthesis");ne.exports=function(M,A,e){if(M==null)throw Error("First argument should be a string");if(A==null)throw Error("Separator should be a string or a RegExp");e?(typeof e=="string"||Array.isArray(e))&&(e={ignore:e}):e={},e.escape==null&&(e.escape=!0),e.ignore==null?e.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof e.ignore=="string"&&(e.ignore=[e.ignore]),e.ignore=e.ignore.map(function(p){return p.length===1&&(p=p+p),p}));var a=T.parse(M,{flat:!0,brackets:e.ignore}),n=a[0],t=n.split(A);if(e.escape){for(var r=[],f=0;f<t.length;f++){var o=t[f],i=t[f+1];o[o.length-1]==="\\"&&o[o.length-2]!=="\\"?(r.push(o+A+i),f++):r.push(o)}t=r}for(var f=0;f<t.length;f++)a[0]=t[f],t[f]=T.stringify(a,{flat:!0});return t}},{parenthesis:248}],306:[function(g,ne,ae){ne.exports=T;function T(c){for(var M=c.length,A=new Array(M),e=new Array(M),a=new Array(M),n=new Array(M),t=new Array(M),r=new Array(M),f=0;f<M;++f)A[f]=-1,e[f]=0,a[f]=!1,n[f]=0,t[f]=-1,r[f]=[];var o=0,i=[],p=[];function d(l){var _=[l],s=[l];for(A[l]=e[l]=o,a[l]=!0,o+=1;s.length>0;){l=s[s.length-1];var w=c[l];if(n[l]<w.length){for(var b=n[l];b<w.length;++b){var h=w[b];if(A[h]<0){A[h]=e[h]=o,a[h]=!0,o+=1,_.push(h),s.push(h);break}else a[h]&&(e[l]=Math.min(e[l],e[h])|0);t[h]>=0&&r[l].push(t[h])}n[l]=b}else{if(e[l]===A[l]){for(var m=[],u=[],L=0,b=_.length-1;b>=0;--b){var S=_[b];if(a[S]=!1,m.push(S),u.push(r[S]),L+=r[S].length,t[S]=i.length,S===l){_.length=b;break}}i.push(m);for(var k=new Array(L),b=0;b<u.length;b++)for(var P=0;P<u[b].length;P++)k[--L]=u[b][P];p.push(k)}s.pop()}}}for(var f=0;f<M;++f)A[f]<0&&d(f);for(var y,f=0;f<p.length;f++){var v=p[f];if(v.length!==0){v.sort(function(_,s){return _-s}),y=[v[0]];for(var x=1;x<v.length;x++)v[x]!==v[x-1]&&y.push(v[x]);p[f]=y}}return{components:i,adjacencyList:p}}},{}],307:[function(g,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0});var T=function(){function t(r,f){var o=[],i=!0,p=!1,d=void 0;try{for(var y=r[Symbol.iterator](),v;!(i=(v=y.next()).done)&&(o.push(v.value),!(f&&o.length===f));i=!0);}catch(x){p=!0,d=x}finally{try{!i&&y.return&&y.return()}finally{if(p)throw d}}return o}return function(r,f){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return t(r,f);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=Math.PI*2,M=function(r,f,o,i,p,d,y){var v=r.x,x=r.y;v*=f,x*=o;var l=i*v-p*x,_=p*v+i*x;return{x:l+d,y:_+y}},A=function(r,f){var o=f===1.5707963267948966?.551915024494:f===-1.5707963267948966?-.551915024494:4/3*Math.tan(f/4),i=Math.cos(r),p=Math.sin(r),d=Math.cos(r+f),y=Math.sin(r+f);return[{x:i-p*o,y:p+i*o},{x:d+y*o,y:y-d*o},{x:d,y}]},e=function(r,f,o,i){var p=r*i-f*o<0?-1:1,d=r*o+f*i;return d>1&&(d=1),d<-1&&(d=-1),p*Math.acos(d)},a=function(r,f,o,i,p,d,y,v,x,l,_,s){var w=Math.pow(p,2),b=Math.pow(d,2),h=Math.pow(_,2),m=Math.pow(s,2),u=w*b-w*m-b*h;u<0&&(u=0),u/=w*m+b*h,u=Math.sqrt(u)*(y===v?-1:1);var L=u*p/d*s,S=u*-d/p*_,k=l*L-x*S+(r+o)/2,P=x*L+l*S+(f+i)/2,z=(_-L)/p,I=(s-S)/d,D=(-_-L)/p,R=(-s-S)/d,B=e(1,0,z,I),F=e(z,I,D,R);return v===0&&F>0&&(F-=c),v===1&&F<0&&(F+=c),[k,P,B,F]},n=function(r){var f=r.px,o=r.py,i=r.cx,p=r.cy,d=r.rx,y=r.ry,v=r.xAxisRotation,x=v===void 0?0:v,l=r.largeArcFlag,_=l===void 0?0:l,s=r.sweepFlag,w=s===void 0?0:s,b=[];if(d===0||y===0)return[];var h=Math.sin(x*c/360),m=Math.cos(x*c/360),u=m*(f-i)/2+h*(o-p)/2,L=-h*(f-i)/2+m*(o-p)/2;if(u===0&&L===0)return[];d=Math.abs(d),y=Math.abs(y);var S=Math.pow(u,2)/Math.pow(d,2)+Math.pow(L,2)/Math.pow(y,2);S>1&&(d*=Math.sqrt(S),y*=Math.sqrt(S));var k=a(f,o,i,p,d,y,_,w,h,m,u,L),P=T(k,4),z=P[0],I=P[1],D=P[2],R=P[3],B=Math.abs(R)/(c/4);Math.abs(1-B)<1e-7&&(B=1);var F=Math.max(Math.ceil(B),1);R/=F;for(var V=0;V<F;V++)b.push(A(D,R)),D+=R;return b.map(function(Y){var K=M(Y[0],d,y,m,h,z,I),J=K.x,G=K.y,Z=M(Y[1],d,y,m,h,z,I),re=Z.x,se=Z.y,oe=M(Y[2],d,y,m,h,z,I),N=oe.x,U=oe.y;return{x1:J,y1:G,x2:re,y2:se,x:N,y:U}})};ae.default=n,ne.exports=ae.default},{}],308:[function(g,ne,ae){var T=g("parse-svg-path"),c=g("abs-svg-path"),M=g("normalize-svg-path"),A=g("is-svg-path"),e=g("assert");ne.exports=a;function a(n){if(Array.isArray(n)&&n.length===1&&typeof n[0]=="string"&&(n=n[0]),typeof n=="string"&&(e(A(n),"String is not an SVG path."),n=T(n)),e(Array.isArray(n),"Argument should be a string or an array of path segments."),n=c(n),n=M(n),!n.length)return[0,0,0,0];for(var t=[1/0,1/0,-1/0,-1/0],r=0,f=n.length;r<f;r++)for(var o=n[r].slice(1),i=0;i<o.length;i+=2)o[i+0]<t[0]&&(t[0]=o[i+0]),o[i+1]<t[1]&&(t[1]=o[i+1]),o[i+0]>t[2]&&(t[2]=o[i+0]),o[i+1]>t[3]&&(t[3]=o[i+1]);return t}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(g,ne,ae){ne.exports=c;var T=g("svg-arc-to-cubic-bezier");function c(e){for(var a,n=[],t=0,r=0,f=0,o=0,i=null,p=null,d=0,y=0,v=0,x=e.length;v<x;v++){var l=e[v],_=l[0];switch(_){case"M":f=l[1],o=l[2];break;case"A":var s=T({px:d,py:y,cx:l[6],cy:l[7],rx:l[1],ry:l[2],xAxisRotation:l[3],largeArcFlag:l[4],sweepFlag:l[5]});if(!s.length)continue;for(var w=0,b;w<s.length;w++)b=s[w],l=["C",b.x1,b.y1,b.x2,b.y2,b.x,b.y],w<s.length-1&&n.push(l);break;case"S":var h=d,m=y;(a=="C"||a=="S")&&(h+=h-t,m+=m-r),l=["C",h,m,l[1],l[2],l[3],l[4]];break;case"T":a=="Q"||a=="T"?(i=d*2-i,p=y*2-p):(i=d,p=y),l=A(d,y,i,p,l[1],l[2]);break;case"Q":i=l[1],p=l[2],l=A(d,y,l[1],l[2],l[3],l[4]);break;case"L":l=M(d,y,l[1],l[2]);break;case"H":l=M(d,y,l[1],y);break;case"V":l=M(d,y,d,l[1]);break;case"Z":l=M(d,y,f,o);break}a=_,d=l[l.length-2],y=l[l.length-1],l.length>4?(t=l[l.length-4],r=l[l.length-3]):(t=d,r=y),n.push(l)}return n}function M(e,a,n,t){return["C",e,a,n,t,n,t]}function A(e,a,n,t,r,f){return["C",e/3+2/3*n,a/3+2/3*t,r/3+2/3*n,f/3+2/3*t,r,f]}},{"svg-arc-to-cubic-bezier":307}],310:[function(g,ne,ae){var T=g("svg-path-bounds"),c=g("parse-svg-path"),M=g("draw-svg-path"),A=g("is-svg-path"),e=g("bitmap-sdf"),a=document.createElement("canvas"),n=a.getContext("2d");ne.exports=t;function t(o,i){if(!A(o))throw Error("Argument should be valid svg path string");i||(i={});var p,d;i.shape?(p=i.shape[0],d=i.shape[1]):(p=a.width=i.w||i.width||200,d=a.height=i.h||i.height||200);var y=Math.min(p,d),v=i.stroke||0,x=i.viewbox||i.viewBox||T(o),l=[p/(x[2]-x[0]),d/(x[3]-x[1])],_=Math.min(l[0]||0,l[1]||0)/2;if(n.fillStyle="black",n.fillRect(0,0,p,d),n.fillStyle="white",v&&(typeof v!="number"&&(v=1),v>0?n.strokeStyle="white":n.strokeStyle="black",n.lineWidth=Math.abs(v)),n.translate(p*.5,d*.5),n.scale(_,_),f()){var s=new Path2D(o);n.fill(s),v&&n.stroke(s)}else{var w=c(o);M(n,w),n.fill(),v&&n.stroke()}n.setTransform(1,0,0,1,0,0);var b=e(n,{cutoff:i.cutoff!=null?i.cutoff:.5,radius:i.radius!=null?i.radius:y*.5});return b}var r;function f(){if(r!=null)return r;var o=document.createElement("canvas").getContext("2d");if(o.canvas.width=o.canvas.height=1,!window.Path2D)return r=!1;var i=new Path2D("M0,0h1v1h-1v-1Z");o.fillStyle="black",o.fill(i);var p=o.getImageData(0,0,1,1);return r=p&&p.data&&p.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(g,ne,ae){(function(T,c){(function(){var M=g("process/browser.js").nextTick,A=Function.prototype.apply,e=Array.prototype.slice,a={},n=0;ae.setTimeout=function(){return new t(A.call(setTimeout,window,arguments),clearTimeout)},ae.setInterval=function(){return new t(A.call(setInterval,window,arguments),clearInterval)},ae.clearTimeout=ae.clearInterval=function(r){r.close()};function t(r,f){this._id=r,this._clearFn=f}t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},ae.enroll=function(r,f){clearTimeout(r._idleTimeoutId),r._idleTimeout=f},ae.unenroll=function(r){clearTimeout(r._idleTimeoutId),r._idleTimeout=-1},ae._unrefActive=ae.active=function(r){clearTimeout(r._idleTimeoutId);var f=r._idleTimeout;f>=0&&(r._idleTimeoutId=setTimeout(function(){r._onTimeout&&r._onTimeout()},f))},ae.setImmediate=typeof T=="function"?T:function(r){var f=n++,o=arguments.length<2?!1:e.call(arguments,1);return a[f]=!0,M(function(){a[f]&&(o?r.apply(null,o):r.call(null),ae.clearImmediate(f))}),f},ae.clearImmediate=typeof c=="function"?c:function(r){delete a[r]}}).call(this)}).call(this,g("timers").setImmediate,g("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(g,ne,ae){(function(T){var c=/^\s+/,M=/\s+$/,A=0,e=T.round,a=T.min,n=T.max,t=T.random;function r(W,X){if(W=W||"",X=X||{},W instanceof r)return W;if(!(this instanceof r))return new r(W,X);var te=f(W);this._originalInput=W,this._r=te.r,this._g=te.g,this._b=te.b,this._a=te.a,this._roundA=e(100*this._a)/100,this._format=X.format||te.format,this._gradientType=X.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=te.ok,this._tc_id=A++}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var W=this.toRgb();return(W.r*299+W.g*587+W.b*114)/1e3},getLuminance:function(){var W=this.toRgb(),X,te,ee,ie,le,ye;return X=W.r/255,te=W.g/255,ee=W.b/255,X<=.03928?ie=X/12.92:ie=T.pow((X+.055)/1.055,2.4),te<=.03928?le=te/12.92:le=T.pow((te+.055)/1.055,2.4),ee<=.03928?ye=ee/12.92:ye=T.pow((ee+.055)/1.055,2.4),.2126*ie+.7152*le+.0722*ye},setAlpha:function(W){return this._a=F(W),this._roundA=e(100*this._a)/100,this},toHsv:function(){var W=d(this._r,this._g,this._b);return{h:W.h*360,s:W.s,v:W.v,a:this._a}},toHsvString:function(){var W=d(this._r,this._g,this._b),X=e(W.h*360),te=e(W.s*100),ee=e(W.v*100);return this._a==1?"hsv("+X+", "+te+"%, "+ee+"%)":"hsva("+X+", "+te+"%, "+ee+"%, "+this._roundA+")"},toHsl:function(){var W=i(this._r,this._g,this._b);return{h:W.h*360,s:W.s,l:W.l,a:this._a}},toHslString:function(){var W=i(this._r,this._g,this._b),X=e(W.h*360),te=e(W.s*100),ee=e(W.l*100);return this._a==1?"hsl("+X+", "+te+"%, "+ee+"%)":"hsla("+X+", "+te+"%, "+ee+"%, "+this._roundA+")"},toHex:function(W){return v(this._r,this._g,this._b,W)},toHexString:function(W){return"#"+this.toHex(W)},toHex8:function(W){return x(this._r,this._g,this._b,this._a,W)},toHex8String:function(W){return"#"+this.toHex8(W)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(V(this._r,255)*100)+"%",g:e(V(this._g,255)*100)+"%",b:e(V(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+e(V(this._r,255)*100)+"%, "+e(V(this._g,255)*100)+"%, "+e(V(this._b,255)*100)+"%)":"rgba("+e(V(this._r,255)*100)+"%, "+e(V(this._g,255)*100)+"%, "+e(V(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:R[v(this._r,this._g,this._b,!0)]||!1},toFilter:function(W){var X="#"+l(this._r,this._g,this._b,this._a),te=X,ee=this._gradientType?"GradientType = 1, ":"";if(W){var ie=r(W);te="#"+l(ie._r,ie._g,ie._b,ie._a)}return"progid:DXImageTransform.Microsoft.gradient("+ee+"startColorstr="+X+",endColorstr="+te+")"},toString:function(W){var X=!!W;W=W||this._format;var te=!1,ee=this._a<1&&this._a>=0,ie=!X&&ee&&(W==="hex"||W==="hex6"||W==="hex3"||W==="hex4"||W==="hex8"||W==="name");return ie?W==="name"&&this._a===0?this.toName():this.toRgbString():(W==="rgb"&&(te=this.toRgbString()),W==="prgb"&&(te=this.toPercentageRgbString()),(W==="hex"||W==="hex6")&&(te=this.toHexString()),W==="hex3"&&(te=this.toHexString(!0)),W==="hex4"&&(te=this.toHex8String(!0)),W==="hex8"&&(te=this.toHex8String()),W==="name"&&(te=this.toName()),W==="hsl"&&(te=this.toHslString()),W==="hsv"&&(te=this.toHsvString()),te||this.toHexString())},clone:function(){return r(this.toString())},_applyModification:function(W,X){var te=W.apply(null,[this].concat([].slice.call(X)));return this._r=te._r,this._g=te._g,this._b=te._b,this.setAlpha(te._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(h,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(_,arguments)},saturate:function(){return this._applyModification(s,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(u,arguments)},_applyCombination:function(W,X){return W.apply(null,[this].concat([].slice.call(X)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},r.fromRatio=function(W,X){if(typeof W=="object"){var te={};for(var ee in W)W.hasOwnProperty(ee)&&(ee==="a"?te[ee]=W[ee]:te[ee]=re(W[ee]));W=te}return r(W,X)};function f(W){var X={r:0,g:0,b:0},te=1,ee=null,ie=null,le=null,ye=!1,ue=!1;return typeof W=="string"&&(W=q(W)),typeof W=="object"&&(U(W.r)&&U(W.g)&&U(W.b)?(X=o(W.r,W.g,W.b),ye=!0,ue=String(W.r).substr(-1)==="%"?"prgb":"rgb"):U(W.h)&&U(W.s)&&U(W.v)?(ee=re(W.s),ie=re(W.v),X=y(W.h,ee,ie),ye=!0,ue="hsv"):U(W.h)&&U(W.s)&&U(W.l)&&(ee=re(W.s),le=re(W.l),X=p(W.h,ee,le),ye=!0,ue="hsl"),W.hasOwnProperty("a")&&(te=W.a)),te=F(te),{ok:ye,format:W.format||ue,r:a(255,n(X.r,0)),g:a(255,n(X.g,0)),b:a(255,n(X.b,0)),a:te}}function o(W,X,te){return{r:V(W,255)*255,g:V(X,255)*255,b:V(te,255)*255}}function i(W,X,te){W=V(W,255),X=V(X,255),te=V(te,255);var ee=n(W,X,te),ie=a(W,X,te),le,ye,ue=(ee+ie)/2;if(ee==ie)le=ye=0;else{var pe=ee-ie;switch(ye=ue>.5?pe/(2-ee-ie):pe/(ee+ie),ee){case W:le=(X-te)/pe+(X<te?6:0);break;case X:le=(te-W)/pe+2;break;case te:le=(W-X)/pe+4;break}le/=6}return{h:le,s:ye,l:ue}}function p(W,X,te){var ee,ie,le;W=V(W,360),X=V(X,100),te=V(te,100);function ye(ge,Te,_e){return _e<0&&(_e+=1),_e>1&&(_e-=1),_e<1/6?ge+(Te-ge)*6*_e:_e<1/2?Te:_e<2/3?ge+(Te-ge)*(2/3-_e)*6:ge}if(X===0)ee=ie=le=te;else{var ue=te<.5?te*(1+X):te+X-te*X,pe=2*te-ue;ee=ye(pe,ue,W+1/3),ie=ye(pe,ue,W),le=ye(pe,ue,W-1/3)}return{r:ee*255,g:ie*255,b:le*255}}function d(W,X,te){W=V(W,255),X=V(X,255),te=V(te,255);var ee=n(W,X,te),ie=a(W,X,te),le,ye,ue=ee,pe=ee-ie;if(ye=ee===0?0:pe/ee,ee==ie)le=0;else{switch(ee){case W:le=(X-te)/pe+(X<te?6:0);break;case X:le=(te-W)/pe+2;break;case te:le=(W-X)/pe+4;break}le/=6}return{h:le,s:ye,v:ue}}function y(W,X,te){W=V(W,360)*6,X=V(X,100),te=V(te,100);var ee=T.floor(W),ie=W-ee,le=te*(1-X),ye=te*(1-ie*X),ue=te*(1-(1-ie)*X),pe=ee%6,ge=[te,ye,le,le,ue,te][pe],Te=[ue,te,te,ye,le,le][pe],_e=[le,le,ue,te,te,ye][pe];return{r:ge*255,g:Te*255,b:_e*255}}function v(W,X,te,ee){var ie=[Z(e(W).toString(16)),Z(e(X).toString(16)),Z(e(te).toString(16))];return ee&&ie[0].charAt(0)==ie[0].charAt(1)&&ie[1].charAt(0)==ie[1].charAt(1)&&ie[2].charAt(0)==ie[2].charAt(1)?ie[0].charAt(0)+ie[1].charAt(0)+ie[2].charAt(0):ie.join("")}function x(W,X,te,ee,ie){var le=[Z(e(W).toString(16)),Z(e(X).toString(16)),Z(e(te).toString(16)),Z(se(ee))];return ie&&le[0].charAt(0)==le[0].charAt(1)&&le[1].charAt(0)==le[1].charAt(1)&&le[2].charAt(0)==le[2].charAt(1)&&le[3].charAt(0)==le[3].charAt(1)?le[0].charAt(0)+le[1].charAt(0)+le[2].charAt(0)+le[3].charAt(0):le.join("")}function l(W,X,te,ee){var ie=[Z(se(ee)),Z(e(W).toString(16)),Z(e(X).toString(16)),Z(e(te).toString(16))];return ie.join("")}r.equals=function(W,X){return!W||!X?!1:r(W).toRgbString()==r(X).toRgbString()},r.random=function(){return r.fromRatio({r:t(),g:t(),b:t()})};function _(W,X){X=X===0?0:X||10;var te=r(W).toHsl();return te.s-=X/100,te.s=Y(te.s),r(te)}function s(W,X){X=X===0?0:X||10;var te=r(W).toHsl();return te.s+=X/100,te.s=Y(te.s),r(te)}function w(W){return r(W).desaturate(100)}function b(W,X){X=X===0?0:X||10;var te=r(W).toHsl();return te.l+=X/100,te.l=Y(te.l),r(te)}function h(W,X){X=X===0?0:X||10;var te=r(W).toRgb();return te.r=n(0,a(255,te.r-e(255*-(X/100)))),te.g=n(0,a(255,te.g-e(255*-(X/100)))),te.b=n(0,a(255,te.b-e(255*-(X/100)))),r(te)}function m(W,X){X=X===0?0:X||10;var te=r(W).toHsl();return te.l-=X/100,te.l=Y(te.l),r(te)}function u(W,X){var te=r(W).toHsl(),ee=(te.h+X)%360;return te.h=ee<0?360+ee:ee,r(te)}function L(W){var X=r(W).toHsl();return X.h=(X.h+180)%360,r(X)}function S(W){var X=r(W).toHsl(),te=X.h;return[r(W),r({h:(te+120)%360,s:X.s,l:X.l}),r({h:(te+240)%360,s:X.s,l:X.l})]}function k(W){var X=r(W).toHsl(),te=X.h;return[r(W),r({h:(te+90)%360,s:X.s,l:X.l}),r({h:(te+180)%360,s:X.s,l:X.l}),r({h:(te+270)%360,s:X.s,l:X.l})]}function P(W){var X=r(W).toHsl(),te=X.h;return[r(W),r({h:(te+72)%360,s:X.s,l:X.l}),r({h:(te+216)%360,s:X.s,l:X.l})]}function z(W,X,te){X=X||6,te=te||30;var ee=r(W).toHsl(),ie=360/te,le=[r(W)];for(ee.h=(ee.h-(ie*X>>1)+720)%360;--X;)ee.h=(ee.h+ie)%360,le.push(r(ee));return le}function I(W,X){X=X||6;for(var te=r(W).toHsv(),ee=te.h,ie=te.s,le=te.v,ye=[],ue=1/X;X--;)ye.push(r({h:ee,s:ie,v:le})),le=(le+ue)%1;return ye}r.mix=function(W,X,te){te=te===0?0:te||50;var ee=r(W).toRgb(),ie=r(X).toRgb(),le=te/100,ye={r:(ie.r-ee.r)*le+ee.r,g:(ie.g-ee.g)*le+ee.g,b:(ie.b-ee.b)*le+ee.b,a:(ie.a-ee.a)*le+ee.a};return r(ye)},r.readability=function(W,X){var te=r(W),ee=r(X);return(T.max(te.getLuminance(),ee.getLuminance())+.05)/(T.min(te.getLuminance(),ee.getLuminance())+.05)},r.isReadable=function(W,X,te){var ee=r.readability(W,X),ie,le;switch(le=!1,ie=Q(te),ie.level+ie.size){case"AAsmall":case"AAAlarge":le=ee>=4.5;break;case"AAlarge":le=ee>=3;break;case"AAAsmall":le=ee>=7;break}return le},r.mostReadable=function(W,X,te){var ee=null,ie=0,le,ye,ue,pe;te=te||{},ye=te.includeFallbackColors,ue=te.level,pe=te.size;for(var ge=0;ge<X.length;ge++)le=r.readability(W,X[ge]),le>ie&&(ie=le,ee=r(X[ge]));return r.isReadable(W,ee,{level:ue,size:pe})||!ye?ee:(te.includeFallbackColors=!1,r.mostReadable(W,["#fff","#000"],te))};var D=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=r.hexNames=B(D);function B(W){var X={};for(var te in W)W.hasOwnProperty(te)&&(X[W[te]]=te);return X}function F(W){return W=parseFloat(W),(isNaN(W)||W<0||W>1)&&(W=1),W}function V(W,X){J(W)&&(W="100%");var te=G(W);return W=a(X,n(0,parseFloat(W))),te&&(W=parseInt(W*X,10)/100),T.abs(W-X)<1e-6?1:W%X/parseFloat(X)}function Y(W){return a(1,n(0,W))}function K(W){return parseInt(W,16)}function J(W){return typeof W=="string"&&W.indexOf(".")!=-1&&parseFloat(W)===1}function G(W){return typeof W=="string"&&W.indexOf("%")!=-1}function Z(W){return W.length==1?"0"+W:""+W}function re(W){return W<=1&&(W=W*100+"%"),W}function se(W){return T.round(parseFloat(W)*255).toString(16)}function oe(W){return K(W)/255}var N=function(){var W="[-\\+]?\\d+%?",X="[-\\+]?\\d*\\.\\d+%?",te="(?:"+X+")|(?:"+W+")",ee="[\\s|\\(]+("+te+")[,|\\s]+("+te+")[,|\\s]+("+te+")\\s*\\)?",ie="[\\s|\\(]+("+te+")[,|\\s]+("+te+")[,|\\s]+("+te+")[,|\\s]+("+te+")\\s*\\)?";return{CSS_UNIT:new RegExp(te),rgb:new RegExp("rgb"+ee),rgba:new RegExp("rgba"+ie),hsl:new RegExp("hsl"+ee),hsla:new RegExp("hsla"+ie),hsv:new RegExp("hsv"+ee),hsva:new RegExp("hsva"+ie),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function U(W){return!!N.CSS_UNIT.exec(W)}function q(W){W=W.replace(c,"").replace(M,"").toLowerCase();var X=!1;if(D[W])W=D[W],X=!0;else if(W=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var te;return(te=N.rgb.exec(W))?{r:te[1],g:te[2],b:te[3]}:(te=N.rgba.exec(W))?{r:te[1],g:te[2],b:te[3],a:te[4]}:(te=N.hsl.exec(W))?{h:te[1],s:te[2],l:te[3]}:(te=N.hsla.exec(W))?{h:te[1],s:te[2],l:te[3],a:te[4]}:(te=N.hsv.exec(W))?{h:te[1],s:te[2],v:te[3]}:(te=N.hsva.exec(W))?{h:te[1],s:te[2],v:te[3],a:te[4]}:(te=N.hex8.exec(W))?{r:K(te[1]),g:K(te[2]),b:K(te[3]),a:oe(te[4]),format:X?"name":"hex8"}:(te=N.hex6.exec(W))?{r:K(te[1]),g:K(te[2]),b:K(te[3]),format:X?"name":"hex"}:(te=N.hex4.exec(W))?{r:K(te[1]+""+te[1]),g:K(te[2]+""+te[2]),b:K(te[3]+""+te[3]),a:oe(te[4]+""+te[4]),format:X?"name":"hex8"}:(te=N.hex3.exec(W))?{r:K(te[1]+""+te[1]),g:K(te[2]+""+te[2]),b:K(te[3]+""+te[3]),format:X?"name":"hex"}:!1}function Q(W){var X,te;return W=W||{level:"AA",size:"small"},X=(W.level||"AA").toUpperCase(),te=(W.size||"small").toLowerCase(),X!=="AA"&&X!=="AAA"&&(X="AA"),te!=="small"&&te!=="large"&&(te="small"),{level:X,size:te}}typeof ne!="undefined"&&ne.exports?ne.exports=r:window.tinycolor=r})(Math)},{}],313:[function(g,ne,ae){ne.exports=M,ne.exports.float32=ne.exports.float=M,ne.exports.fract32=ne.exports.fract=c;var T=new Float32Array(1);function c(A,e){if(A.length){if(A instanceof Float32Array)return new Float32Array(A.length);e instanceof Float32Array||(e=M(A));for(var a=0,n=e.length;a<n;a++)e[a]=A[a]-e[a];return e}return M(A-M(A))}function M(A){return A.length?A instanceof Float32Array?A:new Float32Array(A):(T[0]=A,T[0])}},{}],314:[function(g,ne,ae){var T=g("parse-unit");ne.exports=e;var c=96;function M(a,n){var t=T(getComputedStyle(a).getPropertyValue(n));return t[0]*e(t[1],a)}function A(a,n){var t=document.createElement("div");t.style["font-size"]="128"+a,n.appendChild(t);var r=M(t,"font-size")/128;return n.removeChild(t),r}function e(a,n){switch(n=n||document.body,a=(a||"px").trim().toLowerCase(),(n===window||n===document)&&(n=document.body),a){case"%":return n.clientHeight/100;case"ch":case"ex":return A(a,n);case"em":return M(n,"font-size");case"rem":return M(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return c;case"cm":return c/2.54;case"mm":return c/25.4;case"pt":return c/72;case"pc":return c/6}return 1}},{"parse-unit":251}],315:[function(g,ne,ae){(function(T,c){typeof ae=="object"&&typeof ne!="undefined"?c(ae):(T=T||self,c(T.topojson=T.topojson||{}))})(this,function(T){function c(s){return s}function M(s){if(s==null)return c;var w,b,h=s.scale[0],m=s.scale[1],u=s.translate[0],L=s.translate[1];return function(S,k){k||(w=b=0);var P=2,z=S.length,I=new Array(z);for(I[0]=(w+=S[0])*h+u,I[1]=(b+=S[1])*m+L;P<z;)I[P]=S[P],++P;return I}}function A(s){var w=M(s.transform),b,h=1/0,m=h,u=-h,L=-h;function S(P){P=w(P),P[0]<h&&(h=P[0]),P[0]>u&&(u=P[0]),P[1]<m&&(m=P[1]),P[1]>L&&(L=P[1])}function k(P){switch(P.type){case"GeometryCollection":P.geometries.forEach(k);break;case"Point":S(P.coordinates);break;case"MultiPoint":P.coordinates.forEach(S);break}}s.arcs.forEach(function(P){for(var z=-1,I=P.length,D;++z<I;)D=w(P[z],z),D[0]<h&&(h=D[0]),D[0]>u&&(u=D[0]),D[1]<m&&(m=D[1]),D[1]>L&&(L=D[1])});for(b in s.objects)k(s.objects[b]);return[h,m,u,L]}function e(s,w){for(var b,h=s.length,m=h-w;m<--h;)b=s[m],s[m++]=s[h],s[h]=b}function a(s,w){return typeof w=="string"&&(w=s.objects[w]),w.type==="GeometryCollection"?{type:"FeatureCollection",features:w.geometries.map(function(b){return n(s,b)})}:n(s,w)}function n(s,w){var b=w.id,h=w.bbox,m=w.properties==null?{}:w.properties,u=t(s,w);return b==null&&h==null?{type:"Feature",properties:m,geometry:u}:h==null?{type:"Feature",id:b,properties:m,geometry:u}:{type:"Feature",id:b,bbox:h,properties:m,geometry:u}}function t(s,w){var b=M(s.transform),h=s.arcs;function m(z,I){I.length&&I.pop();for(var D=h[z<0?~z:z],R=0,B=D.length;R<B;++R)I.push(b(D[R],R));z<0&&e(I,B)}function u(z){return b(z)}function L(z){for(var I=[],D=0,R=z.length;D<R;++D)m(z[D],I);return I.length<2&&I.push(I[0]),I}function S(z){for(var I=L(z);I.length<4;)I.push(I[0]);return I}function k(z){return z.map(S)}function P(z){var I=z.type,D;switch(I){case"GeometryCollection":return{type:I,geometries:z.geometries.map(P)};case"Point":D=u(z.coordinates);break;case"MultiPoint":D=z.coordinates.map(u);break;case"LineString":D=L(z.arcs);break;case"MultiLineString":D=z.arcs.map(L);break;case"Polygon":D=k(z.arcs);break;case"MultiPolygon":D=z.arcs.map(k);break;default:return null}return{type:I,coordinates:D}}return P(w)}function r(s,w){var b={},h={},m={},u=[],L=-1;w.forEach(function(P,z){var I=s.arcs[P<0?~P:P],D;I.length<3&&!I[1][0]&&!I[1][1]&&(D=w[++L],w[L]=P,w[z]=D)}),w.forEach(function(P){var z=S(P),I=z[0],D=z[1],R,B;if(R=m[I])if(delete m[R.end],R.push(P),R.end=D,B=h[D]){delete h[B.start];var F=B===R?R:R.concat(B);h[F.start=R.start]=m[F.end=B.end]=F}else h[R.start]=m[R.end]=R;else if(R=h[D])if(delete h[R.start],R.unshift(P),R.start=I,B=m[I]){delete m[B.end];var V=B===R?R:B.concat(R);h[V.start=B.start]=m[V.end=R.end]=V}else h[R.start]=m[R.end]=R;else R=[P],h[R.start=I]=m[R.end=D]=R});function S(P){var z=s.arcs[P<0?~P:P],I=z[0],D;return s.transform?(D=[0,0],z.forEach(function(R){D[0]+=R[0],D[1]+=R[1]})):D=z[z.length-1],P<0?[D,I]:[I,D]}function k(P,z){for(var I in P){var D=P[I];delete z[D.start],delete D.start,delete D.end,D.forEach(function(R){b[R<0?~R:R]=1}),u.push(D)}}return k(m,h),k(h,m),w.forEach(function(P){b[P<0?~P:P]||u.push([P])}),u}function f(s){return t(s,o.apply(this,arguments))}function o(s,w,b){var h,m,u;if(arguments.length>1)h=i(s,w,b);else for(m=0,h=new Array(u=s.arcs.length);m<u;++m)h[m]=m;return{type:"MultiLineString",arcs:r(s,h)}}function i(s,w,b){var h=[],m=[],u;function L(I){var D=I<0?~I:I;(m[D]||(m[D]=[])).push({i:I,g:u})}function S(I){I.forEach(L)}function k(I){I.forEach(S)}function P(I){I.forEach(k)}function z(I){switch(u=I,I.type){case"GeometryCollection":I.geometries.forEach(z);break;case"LineString":S(I.arcs);break;case"MultiLineString":case"Polygon":k(I.arcs);break;case"MultiPolygon":P(I.arcs);break}}return z(w),m.forEach(b==null?function(I){h.push(I[0].i)}:function(I){b(I[0].g,I[I.length-1].g)&&h.push(I[0].i)}),h}function p(s){for(var w=-1,b=s.length,h,m=s[b-1],u=0;++w<b;)h=m,m=s[w],u+=h[0]*m[1]-h[1]*m[0];return Math.abs(u)}function d(s){return t(s,y.apply(this,arguments))}function y(s,w){var b={},h=[],m=[];w.forEach(u);function u(k){switch(k.type){case"GeometryCollection":k.geometries.forEach(u);break;case"Polygon":L(k.arcs);break;case"MultiPolygon":k.arcs.forEach(L);break}}function L(k){k.forEach(function(P){P.forEach(function(z){(b[z=z<0?~z:z]||(b[z]=[])).push(k)})}),h.push(k)}function S(k){return p(t(s,{type:"Polygon",arcs:[k]}).coordinates[0])}return h.forEach(function(k){if(!k._){var P=[],z=[k];for(k._=1,m.push(P);k=z.pop();)P.push(k),k.forEach(function(I){I.forEach(function(D){b[D<0?~D:D].forEach(function(R){R._||(R._=1,z.push(R))})})})}}),h.forEach(function(k){delete k._}),{type:"MultiPolygon",arcs:m.map(function(k){var P=[],z;if(k.forEach(function(F){F.forEach(function(V){V.forEach(function(Y){b[Y<0?~Y:Y].length<2&&P.push(Y)})})}),P=r(s,P),(z=P.length)>1)for(var I=1,D=S(P[0]),R,B;I<z;++I)(R=S(P[I]))>D&&(B=P[0],P[0]=P[I],P[I]=B,D=R);return P}).filter(function(k){return k.length>0})}}function v(s,w){for(var b=0,h=s.length;b<h;){var m=b+h>>>1;s[m]<w?b=m+1:h=m}return b}function x(s){var w={},b=s.map(function(){return[]});function h(F,V){F.forEach(function(Y){Y<0&&(Y=~Y);var K=w[Y];K?K.push(V):w[Y]=[V]})}function m(F,V){F.forEach(function(Y){h(Y,V)})}function u(F,V){F.type==="GeometryCollection"?F.geometries.forEach(function(Y){u(Y,V)}):F.type in L&&L[F.type](F.arcs,V)}var L={LineString:h,MultiLineString:m,Polygon:m,MultiPolygon:function(F,V){F.forEach(function(Y){m(Y,V)})}};s.forEach(u);for(var S in w)for(var k=w[S],P=k.length,z=0;z<P;++z)for(var I=z+1;I<P;++I){var D=k[z],R=k[I],B;(B=b[D])[S=v(B,R)]!==R&&B.splice(S,0,R),(B=b[R])[S=v(B,D)]!==D&&B.splice(S,0,D)}return b}function l(s){if(s==null)return c;var w,b,h=s.scale[0],m=s.scale[1],u=s.translate[0],L=s.translate[1];return function(S,k){k||(w=b=0);var P=2,z=S.length,I=new Array(z),D=Math.round((S[0]-u)/h),R=Math.round((S[1]-L)/m);for(I[0]=D-w,w=D,I[1]=R-b,b=R;P<z;)I[P]=S[P],++P;return I}}function _(s,w){if(s.transform)throw new Error("already quantized");if(!w||!w.scale){if(!((L=Math.floor(w))>=2))throw new Error("n must be \u22652");k=s.bbox||A(s);var b=k[0],h=k[1],m=k[2],u=k[3],L;w={scale:[m-b?(m-b)/(L-1):1,u-h?(u-h)/(L-1):1],translate:[b,h]}}else k=s.bbox;var S=l(w),k,P,z=s.objects,I={};function D(F){return S(F)}function R(F){var V;switch(F.type){case"GeometryCollection":V={type:"GeometryCollection",geometries:F.geometries.map(R)};break;case"Point":V={type:"Point",coordinates:D(F.coordinates)};break;case"MultiPoint":V={type:"MultiPoint",coordinates:F.coordinates.map(D)};break;default:return F}return F.id!=null&&(V.id=F.id),F.bbox!=null&&(V.bbox=F.bbox),F.properties!=null&&(V.properties=F.properties),V}function B(F){var V=0,Y=1,K=F.length,J,G=new Array(K);for(G[0]=S(F[0],0);++V<K;)((J=S(F[V],V))[0]||J[1])&&(G[Y++]=J);return Y===1&&(G[Y++]=[0,0]),G.length=Y,G}for(P in z)I[P]=R(z[P]);return{type:"Topology",bbox:k,transform:w,objects:I,arcs:s.arcs.map(B)}}T.bbox=A,T.feature=a,T.merge=d,T.mergeArcs=y,T.mesh=f,T.meshArcs=o,T.neighbors=x,T.quantize=_,T.transform=M,T.untransform=l,Object.defineProperty(T,"__esModule",{value:!0})})},{}],316:[function(g,ne,ae){var T=g("../prototype/is");ne.exports=function(c){if(typeof c!="function"||!hasOwnProperty.call(c,"length"))return!1;try{if(typeof c.length!="number"||typeof c.call!="function"||typeof c.apply!="function")return!1}catch{return!1}return!T(c)}},{"../prototype/is":323}],317:[function(g,ne,ae){var T=g("../value/is"),c=g("../object/is"),M=g("../string/coerce"),A=g("./to-short-string"),e=function(a,n){return a.replace("%v",A(n))};ne.exports=function(a,n,t){if(!c(t))throw new TypeError(e(n,a));if(!T(a)){if("default"in t)return t.default;if(t.isOptional)return null}var r=M(t.errorMessage);throw T(r)||(r=n),new TypeError(e(r,a))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(g,ne,ae){ne.exports=function(T){try{return T.toString()}catch{try{return String(T)}catch{return null}}}},{}],319:[function(g,ne,ae){var T=g("./safe-to-string"),c=/[\n\r\u2028\u2029]/g;ne.exports=function(M){var A=T(M);return A===null?"<Non-coercible to string value>":(A.length>100&&(A=A.slice(0,99)+"\u2026"),A=A.replace(c,function(e){switch(e){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),A)}},{"./safe-to-string":318}],320:[function(g,ne,ae){var T=g("../value/is"),c={object:!0,function:!0,undefined:!0};ne.exports=function(M){return T(M)?hasOwnProperty.call(c,typeof M):!1}},{"../value/is":326}],321:[function(g,ne,ae){var T=g("../lib/resolve-exception"),c=g("./is");ne.exports=function(M){return c(M)?M:T(M,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(g,ne,ae){var T=g("../function/is"),c=/^\s*class[\s{/}]/,M=Function.prototype.toString;ne.exports=function(A){return!(!T(A)||c.test(M.call(A)))}},{"../function/is":316}],323:[function(g,ne,ae){var T=g("../object/is");ne.exports=function(c){if(!T(c))return!1;try{return c.constructor?c.constructor.prototype===c:!1}catch{return!1}}},{"../object/is":320}],324:[function(g,ne,ae){var T=g("../value/is"),c=g("../object/is"),M=Object.prototype.toString;ne.exports=function(A){if(!T(A))return null;if(c(A)){var e=A.toString;if(typeof e!="function"||e===M)return null}try{return""+A}catch{return null}}},{"../object/is":320,"../value/is":326}],325:[function(g,ne,ae){var T=g("../lib/resolve-exception"),c=g("./is");ne.exports=function(M){return c(M)?M:T(M,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(g,ne,ae){var T=void 0;ne.exports=function(c){return c!==T&&c!==null}},{}],327:[function(g,ne,ae){(function(T){(function(){var c=g("bit-twiddle"),M=g("dup"),A=g("buffer").Buffer;T.__TYPEDARRAY_POOL||(T.__TYPEDARRAY_POOL={UINT8:M([32,0]),UINT16:M([32,0]),UINT32:M([32,0]),BIGUINT64:M([32,0]),INT8:M([32,0]),INT16:M([32,0]),INT32:M([32,0]),BIGINT64:M([32,0]),FLOAT:M([32,0]),DOUBLE:M([32,0]),DATA:M([32,0]),UINT8C:M([32,0]),BUFFER:M([32,0])});var e=typeof Uint8ClampedArray!="undefined",a=typeof BigUint64Array!="undefined",n=typeof BigInt64Array!="undefined",t=T.__TYPEDARRAY_POOL;t.UINT8C||(t.UINT8C=M([32,0])),t.BIGUINT64||(t.BIGUINT64=M([32,0])),t.BIGINT64||(t.BIGINT64=M([32,0])),t.BUFFER||(t.BUFFER=M([32,0]));var r=t.DATA,f=t.BUFFER;ae.free=function(k){if(A.isBuffer(k))f[c.log2(k.length)].push(k);else{if(Object.prototype.toString.call(k)!=="[object ArrayBuffer]"&&(k=k.buffer),!k)return;var P=k.length||k.byteLength,z=c.log2(P)|0;r[z].push(k)}};function o(S){if(!!S){var k=S.length||S.byteLength,P=c.log2(k);r[P].push(S)}}function i(S){o(S.buffer)}ae.freeUint8=ae.freeUint16=ae.freeUint32=ae.freeBigUint64=ae.freeInt8=ae.freeInt16=ae.freeInt32=ae.freeBigInt64=ae.freeFloat32=ae.freeFloat=ae.freeFloat64=ae.freeDouble=ae.freeUint8Clamped=ae.freeDataView=i,ae.freeArrayBuffer=o,ae.freeBuffer=function(k){f[c.log2(k.length)].push(k)},ae.malloc=function(k,P){if(P===void 0||P==="arraybuffer")return p(k);switch(P){case"uint8":return d(k);case"uint16":return y(k);case"uint32":return v(k);case"int8":return x(k);case"int16":return l(k);case"int32":return _(k);case"float":case"float32":return s(k);case"double":case"float64":return w(k);case"uint8_clamped":return b(k);case"bigint64":return m(k);case"biguint64":return h(k);case"buffer":return L(k);case"data":case"dataview":return u(k);default:return null}return null};function p(S){var S=c.nextPow2(S),k=c.log2(S),P=r[k];return P.length>0?P.pop():new ArrayBuffer(S)}ae.mallocArrayBuffer=p;function d(S){return new Uint8Array(p(S),0,S)}ae.mallocUint8=d;function y(S){return new Uint16Array(p(2*S),0,S)}ae.mallocUint16=y;function v(S){return new Uint32Array(p(4*S),0,S)}ae.mallocUint32=v;function x(S){return new Int8Array(p(S),0,S)}ae.mallocInt8=x;function l(S){return new Int16Array(p(2*S),0,S)}ae.mallocInt16=l;function _(S){return new Int32Array(p(4*S),0,S)}ae.mallocInt32=_;function s(S){return new Float32Array(p(4*S),0,S)}ae.mallocFloat32=ae.mallocFloat=s;function w(S){return new Float64Array(p(8*S),0,S)}ae.mallocFloat64=ae.mallocDouble=w;function b(S){return e?new Uint8ClampedArray(p(S),0,S):d(S)}ae.mallocUint8Clamped=b;function h(S){return a?new BigUint64Array(p(8*S),0,S):null}ae.mallocBigUint64=h;function m(S){return n?new BigInt64Array(p(8*S),0,S):null}ae.mallocBigInt64=m;function u(S){return new DataView(p(S),0,S)}ae.mallocDataView=u;function L(S){S=c.nextPow2(S);var k=c.log2(S),P=f[k];return P.length>0?P.pop():new A(S)}ae.mallocBuffer=L,ae.clearCache=function(){for(var k=0;k<32;++k)t.UINT8[k].length=0,t.UINT16[k].length=0,t.UINT32[k].length=0,t.INT8[k].length=0,t.INT16[k].length=0,t.INT32[k].length=0,t.FLOAT[k].length=0,t.DOUBLE[k].length=0,t.BIGUINT64[k].length=0,t.BIGINT64[k].length=0,t.UINT8C[k].length=0,r[k].length=0,f[k].length=0}}).call(this)}).call(this,typeof To!="undefined"?To:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(g,ne,ae){var T=/[\'\"]/;ne.exports=function(M){return M?(T.test(M.charAt(0))&&(M=M.substr(1)),T.test(M.charAt(M.length-1))&&(M=M.substr(0,M.length-1)),M):""}},{}],329:[function(g,ne,ae){ne.exports=function(c,M,A){Array.isArray(A)||(A=[].slice.call(arguments,2));for(var e=0,a=A.length;e<a;e++){var n=A[e];for(var t in n)if(!(M[t]!==void 0&&!Array.isArray(M[t])&&c[t]===M[t])&&t in M){var r;if(n[t]===!0)r=M[t];else{if(n[t]===!1)continue;if(typeof n[t]=="function"&&(r=n[t](M[t],c,M),r===void 0))continue}c[t]=r}}return c}},{}],330:[function(g,ne,ae){(function(T){(function(){ne.exports=c;function c(A,e){if(M("noDeprecation"))return A;var a=!1;function n(){if(!a){if(M("throwDeprecation"))throw new Error(e);M("traceDeprecation")?console.trace(e):console.warn(e),a=!0}return A.apply(this,arguments)}return n}function M(A){try{if(!T.localStorage)return!1}catch{return!1}var e=T.localStorage[A];return e==null?!1:String(e).toLowerCase()==="true"}}).call(this)}).call(this,typeof To!="undefined"?To:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],331:[function(g,ne,ae){var T=g("get-canvas-context");ne.exports=function(M){return T("webgl",M)}},{"get-canvas-context":194}],332:[function(g,ne,ae){var T=g("../main"),c=g("object-assign"),M=T.instance();function A(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}A.prototype=new T.baseCalendar,c(A.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(p,d){if(typeof p=="string"){var y=p.match(a);return y?y[0]:""}var v=this._validateYear(p),x=p.month(),l=""+this.toChineseMonth(v,x);return d&&l.length<2&&(l="0"+l),this.isIntercalaryMonth(v,x)&&(l+="i"),l},monthNames:function(p){if(typeof p=="string"){var d=p.match(n);return d?d[0]:""}var y=this._validateYear(p),v=p.month(),x=this.toChineseMonth(y,v),l=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][x-1];return this.isIntercalaryMonth(y,v)&&(l="\u95F0"+l),l},monthNamesShort:function(p){if(typeof p=="string"){var d=p.match(t);return d?d[0]:""}var y=this._validateYear(p),v=p.month(),x=this.toChineseMonth(y,v),l=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][x-1];return this.isIntercalaryMonth(y,v)&&(l="\u95F0"+l),l},parseMonth:function(p,d){p=this._validateYear(p);var y=parseInt(d),v;if(isNaN(y))d[0]==="\u95F0"&&(v=!0,d=d.substring(1)),d[d.length-1]==="\u6708"&&(d=d.substring(0,d.length-1)),y=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(d);else{var x=d[d.length-1];v=x==="i"||x==="I"}var l=this.toMonthIndex(p,y,v);return l},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(p,d){if(p.year&&(p=p.year()),typeof p!="number"||p<1888||p>2111)throw d.replace(/\{0\}/,this.local.name);return p},toMonthIndex:function(p,d,y){var v=this.intercalaryMonth(p),x=y&&d!==v;if(x||d<1||d>12)throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);var l;return v?!y&&d<=v?l=d-1:l=d:l=d-1,l},toChineseMonth:function(p,d){p.year&&(p=p.year(),d=p.month());var y=this.intercalaryMonth(p),v=y?12:11;if(d<0||d>v)throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);var x;return y?d<y?x=d+1:x=d:x=d+1,x},intercalaryMonth:function(p){p=this._validateYear(p);var d=r[p-r[0]],y=d>>13;return y},isIntercalaryMonth:function(p,d){p.year&&(p=p.year(),d=p.month());var y=this.intercalaryMonth(p);return!!y&&y===d},leapYear:function(p){return this.intercalaryMonth(p)!==0},weekOfYear:function(p,d,y){var v=this._validateYear(p,T.local.invalidyear),x=f[v-f[0]],l=x>>9&4095,_=x>>5&15,s=x&31,w;w=M.newDate(l,_,s),w.add(4-(w.dayOfWeek()||7),"d");var b=this.toJD(p,d,y)-w.toJD();return 1+Math.floor(b/7)},monthsInYear:function(p){return this.leapYear(p)?13:12},daysInMonth:function(p,d){p.year&&(d=p.month(),p=p.year()),p=this._validateYear(p);var y=r[p-r[0]],v=y>>13,x=v?12:11;if(d>x)throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);var l=y&1<<12-d?30:29;return l},weekDay:function(p,d,y){return(this.dayOfWeek(p,d,y)||7)<6},toJD:function(p,d,y){var v=this._validate(p,l,y,T.local.invalidDate);p=this._validateYear(v.year()),d=v.month(),y=v.day();var x=this.isIntercalaryMonth(p,d),l=this.toChineseMonth(p,d),_=i(p,l,y,x);return M.toJD(_.year,_.month,_.day)},fromJD:function(p){var d=M.fromJD(p),y=o(d.year(),d.month(),d.day()),v=this.toMonthIndex(y.year,y.month,y.isIntercalary);return this.newDate(y.year,v,y.day)},fromString:function(p){var d=p.match(e),y=this._validateYear(+d[1]),v=+d[2],x=!!d[3],l=this.toMonthIndex(y,v,x),_=+d[4];return this.newDate(y,l,_)},add:function(p,d,y){var v=p.year(),x=p.month(),l=this.isIntercalaryMonth(v,x),_=this.toChineseMonth(v,x),s=Object.getPrototypeOf(A.prototype).add.call(this,p,d,y);if(y==="y"){var w=s.year(),b=s.month(),h=this.isIntercalaryMonth(w,_),m=l&&h?this.toMonthIndex(w,_,!0):this.toMonthIndex(w,_,!1);m!==b&&s.month(m)}return s}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,n=/^闰?十?[一二三四五六七八九]?月/m,t=/^闰?十?[一二三四五六七八九]?/m;T.calendars.chinese=A;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],f=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function o(p,d,y,v){var x,l;if(typeof p=="object")x=p,l=d||{};else{var _=typeof p=="number"&&p>=1888&&p<=2111;if(!_)throw new Error("Solar year outside range 1888-2111");var s=typeof d=="number"&&d>=1&&d<=12;if(!s)throw new Error("Solar month outside range 1 - 12");var w=typeof y=="number"&&y>=1&&y<=31;if(!w)throw new Error("Solar day outside range 1 - 31");x={year:p,month:d,day:y},l=v||{}}var b=f[x.year-f[0]],h=x.year<<9|x.month<<5|x.day;l.year=h>=b?x.year:x.year-1,b=f[l.year-f[0]];var m=b>>9&4095,u=b>>5&15,L=b&31,S,k=new Date(m,u-1,L),P=new Date(x.year,x.month-1,x.day);S=Math.round((P-k)/(24*3600*1e3));var z=r[l.year-r[0]],I;for(I=0;I<13;I++){var D=z&1<<12-I?30:29;if(S<D)break;S-=D}var R=z>>13;return!R||I<R?(l.isIntercalary=!1,l.month=1+I):I===R?(l.isIntercalary=!0,l.month=I):(l.isIntercalary=!1,l.month=I),l.day=1+S,l}function i(p,d,y,v,x){var l,_;if(typeof p=="object")_=p,l=d||{};else{var s=typeof p=="number"&&p>=1888&&p<=2111;if(!s)throw new Error("Lunar year outside range 1888-2111");var w=typeof d=="number"&&d>=1&&d<=12;if(!w)throw new Error("Lunar month outside range 1 - 12");var b=typeof y=="number"&&y>=1&&y<=30;if(!b)throw new Error("Lunar day outside range 1 - 30");var h;typeof v=="object"?(h=!1,l=v):(h=!!v,l=x||{}),_={year:p,month:d,day:y,isIntercalary:h}}var m;m=_.day-1;var u=r[_.year-r[0]],L=u>>13,S;L&&(_.month>L||_.isIntercalary)?S=_.month:S=_.month-1;for(var k=0;k<S;k++){var P=u&1<<12-k?30:29;m+=P}var z=f[_.year-f[0]],I=z>>9&4095,D=z>>5&15,R=z&31,B=new Date(I,D-1,R+m);return l.year=B.getFullYear(),l.month=1+B.getMonth(),l.day=B.getDate(),l}},{"../main":346,"object-assign":247}],333:[function(g,ne,ae){var T=g("../main"),c=g("object-assign");function M(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}M.prototype=new T.baseCalendar,c(M.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(A){var e=this._validate(A,this.minMonth,this.minDay,T.local.invalidYear),A=e.year()+(e.year()<0?1:0);return A%4==3||A%4==-1},monthsInYear:function(A){return this._validate(A,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear),13},weekOfYear:function(A,e,a){var n=this.newDate(A,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(A,e){var a=this._validate(A,e,this.minDay,T.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(A,e,a){return(this.dayOfWeek(A,e,a)||7)<6},toJD:function(A,e,a){var n=this._validate(A,e,a,T.local.invalidDate);return A=n.year(),A<0&&A++,n.day()+(n.month()-1)*30+(A-1)*365+Math.floor(A/4)+this.jdEpoch-1},fromJD:function(A){var e=Math.floor(A)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(A)+.5-this.newDate(a,1,1).toJD();var n=Math.floor(e/30)+1,t=e-(n-1)*30+1;return this.newDate(a,n,t)}}),T.calendars.coptic=M},{"../main":346,"object-assign":247}],334:[function(g,ne,ae){var T=g("../main"),c=g("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new T.baseCalendar,c(M.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,T.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,T.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,T.local.invalidYear),400},weekOfYear:function(e,a,n){var t=this.newDate(e,a,n);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,T.local.invalidMonth);return this.daysPerMonth[n.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,a,n){var t=this._validate(e,a,n,T.local.invalidDate);return(t.day()+1)%8},weekDay:function(e,a,n){var t=this.dayOfWeek(e,a,n);return t>=2&&t<=6},extraInfo:function(e,a,n){var t=this._validate(e,a,n,T.local.invalidDate);return{century:A[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(e,a,n){var t=this._validate(e,a,n,T.local.invalidDate);return e=t.year()+(t.year()<0?1:0),a=t.month(),n=t.day(),n+(a>1?16:0)+(a>2?(a-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(e/400)+1;e-=(a-1)*400,e+=e>15?16:0;var n=Math.floor(e/32)+1,t=e-(n-1)*32+1;return this.newDate(a<=0?a-1:a,n,t)}});var A={20:"Fruitbat",21:"Anchovy"};T.calendars.discworld=M},{"../main":346,"object-assign":247}],335:[function(g,ne,ae){var T=g("../main"),c=g("object-assign");function M(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}M.prototype=new T.baseCalendar,c(M.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(A){var e=this._validate(A,this.minMonth,this.minDay,T.local.invalidYear),A=e.year()+(e.year()<0?1:0);return A%4==3||A%4==-1},monthsInYear:function(A){return this._validate(A,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear),13},weekOfYear:function(A,e,a){var n=this.newDate(A,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(A,e){var a=this._validate(A,e,this.minDay,T.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(A,e,a){return(this.dayOfWeek(A,e,a)||7)<6},toJD:function(A,e,a){var n=this._validate(A,e,a,T.local.invalidDate);return A=n.year(),A<0&&A++,n.day()+(n.month()-1)*30+(A-1)*365+Math.floor(A/4)+this.jdEpoch-1},fromJD:function(A){var e=Math.floor(A)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(A)+.5-this.newDate(a,1,1).toJD();var n=Math.floor(e/30)+1,t=e-(n-1)*30+1;return this.newDate(a,n,t)}}),T.calendars.ethiopian=M},{"../main":346,"object-assign":247}],336:[function(g,ne,ae){var T=g("../main"),c=g("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new T.baseCalendar,c(M.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,T.local.invalidYear);return this._leapYear(a.year())},_leapYear:function(e){return e=e<0?e+1:e,A(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,T.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,a,n){var t=this.newDate(e,a,n);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,T.local.invalidYear);return e=a.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,a){return e.year&&(a=e.month(),e=e.year()),this._validate(e,a,this.minDay,T.local.invalidMonth),a===12&&this.leapYear(e)||a===8&&A(this.daysInYear(e),10)===5?30:a===9&&A(this.daysInYear(e),10)===3?29:this.daysPerMonth[a-1]},weekDay:function(e,a,n){return this.dayOfWeek(e,a,n)!==6},extraInfo:function(e,a,n){var t=this._validate(e,a,n,T.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(e,a,n){var t=this._validate(e,a,n,T.local.invalidDate);e=t.year(),a=t.month(),n=t.day();var r=e<=0?e+1:e,f=this.jdEpoch+this._delay1(r)+this._delay2(r)+n+1;if(a<7){for(var o=7;o<=this.monthsInYear(e);o++)f+=this.daysInMonth(e,o);for(var o=1;o<a;o++)f+=this.daysInMonth(e,o)}else for(var o=7;o<a;o++)f+=this.daysInMonth(e,o);return f},_delay1:function(e){var a=Math.floor((235*e-234)/19),n=12084+13753*a,t=a*29+Math.floor(n/25920);return A(3*(t+1),7)<3&&t++,t},_delay2:function(e){var a=this._delay1(e-1),n=this._delay1(e),t=this._delay1(e+1);return t-n==356?2:n-a==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var a=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(a===-1?1:a+1,7,1);)a++;for(var n=e<this.toJD(a,1,1)?7:1;e>this.toJD(a,n,this.daysInMonth(a,n));)n++;var t=e-this.toJD(a,n,1)+1;return this.newDate(a,n,t)}});function A(e,a){return e-a*Math.floor(e/a)}T.calendars.hebrew=M},{"../main":346,"object-assign":247}],337:[function(g,ne,ae){var T=g("../main"),c=g("object-assign");function M(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}M.prototype=new T.baseCalendar,c(M.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(A){var e=this._validate(A,this.minMonth,this.minDay,T.local.invalidYear);return(e.year()*11+14)%30<11},weekOfYear:function(A,e,a){var n=this.newDate(A,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(A){return this.leapYear(A)?355:354},daysInMonth:function(A,e){var a=this._validate(A,e,this.minDay,T.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(A,e,a){return this.dayOfWeek(A,e,a)!==5},toJD:function(A,e,a){var n=this._validate(A,e,a,T.local.invalidDate);return A=n.year(),e=n.month(),a=n.day(),A=A<=0?A+1:A,a+Math.ceil(29.5*(e-1))+(A-1)*354+Math.floor((3+11*A)/30)+this.jdEpoch-1},fromJD:function(A){A=Math.floor(A)+.5;var e=Math.floor((30*(A-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var a=Math.min(12,Math.ceil((A-29-this.toJD(e,1,1))/29.5)+1),n=A-this.toJD(e,a,1)+1;return this.newDate(e,a,n)}}),T.calendars.islamic=M},{"../main":346,"object-assign":247}],338:[function(g,ne,ae){var T=g("../main"),c=g("object-assign");function M(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}M.prototype=new T.baseCalendar,c(M.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(A){var e=this._validate(A,this.minMonth,this.minDay,T.local.invalidYear),A=e.year()<0?e.year()+1:e.year();return A%4==0},weekOfYear:function(A,e,a){var n=this.newDate(A,e,a);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(A,e){var a=this._validate(A,e,this.minDay,T.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(A,e,a){return(this.dayOfWeek(A,e,a)||7)<6},toJD:function(A,e,a){var n=this._validate(A,e,a,T.local.invalidDate);return A=n.year(),e=n.month(),a=n.day(),A<0&&A++,e<=2&&(A--,e+=12),Math.floor(365.25*(A+4716))+Math.floor(30.6001*(e+1))+a-1524.5},fromJD:function(A){var e=Math.floor(A+.5),a=e+1524,n=Math.floor((a-122.1)/365.25),t=Math.floor(365.25*n),r=Math.floor((a-t)/30.6001),f=r-Math.floor(r<14?1:13),o=n-Math.floor(f>2?4716:4715),i=a-t-Math.floor(30.6001*r);return o<=0&&o--,this.newDate(o,f,i)}}),T.calendars.julian=M},{"../main":346,"object-assign":247}],339:[function(g,ne,ae){var T=g("../main"),c=g("object-assign");function M(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}M.prototype=new T.baseCalendar,c(M.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(a){return this._validate(a,this.minMonth,this.minDay,T.local.invalidYear),!1},formatYear:function(a){var n=this._validate(a,this.minMonth,this.minDay,T.local.invalidYear);a=n.year();var t=Math.floor(a/400);a=a%400,a+=a<0?400:0;var r=Math.floor(a/20);return t+"."+r+"."+a%20},forYear:function(a){if(a=a.split("."),a.length<3)throw"Invalid Mayan year";for(var n=0,t=0;t<a.length;t++){var r=parseInt(a[t],10);if(Math.abs(r)>19||t>0&&r<0)throw"Invalid Mayan year";n=n*20+r}return n},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,T.local.invalidYear),18},weekOfYear:function(a,n,t){return this._validate(a,n,t,T.local.invalidDate),0},daysInYear:function(a){return this._validate(a,this.minMonth,this.minDay,T.local.invalidYear),360},daysInMonth:function(a,n){return this._validate(a,n,this.minDay,T.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(a,n,t){var r=this._validate(a,n,t,T.local.invalidDate);return r.day()},weekDay:function(a,n,t){return this._validate(a,n,t,T.local.invalidDate),!0},extraInfo:function(a,n,t){var r=this._validate(a,n,t,T.local.invalidDate),f=r.toJD(),o=this._toHaab(f),i=this._toTzolkin(f);return{haabMonthName:this.local.haabMonths[o[0]-1],haabMonth:o[0],haabDay:o[1],tzolkinDayName:this.local.tzolkinMonths[i[0]-1],tzolkinDay:i[0],tzolkinTrecena:i[1]}},_toHaab:function(a){a-=this.jdEpoch;var n=A(a+8+(18-1)*20,365);return[Math.floor(n/20)+1,A(n,20)]},_toTzolkin:function(a){return a-=this.jdEpoch,[e(a+20,20),e(a+4,13)]},toJD:function(a,n,t){var r=this._validate(a,n,t,T.local.invalidDate);return r.day()+r.month()*20+r.year()*360+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var n=Math.floor(a/360);a=a%360,a+=a<0?360:0;var t=Math.floor(a/20),r=a%20;return this.newDate(n,t,r)}});function A(a,n){return a-n*Math.floor(a/n)}function e(a,n){return A(a-1,n)+1}T.calendars.mayan=M},{"../main":346,"object-assign":247}],340:[function(g,ne,ae){var T=g("../main"),c=g("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new T.baseCalendar;var A=T.instance("gregorian");c(M.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear);return A.leapYear(a.year()+(a.year()<1?1:0)+1469)},weekOfYear:function(e,a,n){var t=this.newDate(e,a,n);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,T.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===12&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return(this.dayOfWeek(e,a,n)||7)<6},toJD:function(e,a,n){var t=this._validate(e,a,n,T.local.invalidMonth),e=t.year();e<0&&e++;for(var r=t.day(),f=1;f<t.month();f++)r+=this.daysPerMonth[f-1];return r+A.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var a=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(a+1,1,1);)a++;for(var n=e-Math.floor(this.toJD(a,1,1)+.5)+1,t=1;n>this.daysInMonth(a,t);)n-=this.daysInMonth(a,t),t++;return this.newDate(a,t,n)}}),T.calendars.nanakshahi=M},{"../main":346,"object-assign":247}],341:[function(g,ne,ae){var T=g("../main"),c=g("object-assign");function M(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}M.prototype=new T.baseCalendar,c(M.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(A){return this.daysInYear(A)!==this.daysPerYear},weekOfYear:function(A,e,a){var n=this.newDate(A,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(A){var e=this._validate(A,this.minMonth,this.minDay,T.local.invalidYear);if(A=e.year(),typeof this.NEPALI_CALENDAR_DATA[A]=="undefined")return this.daysPerYear;for(var a=0,n=this.minMonth;n<=12;n++)a+=this.NEPALI_CALENDAR_DATA[A][n];return a},daysInMonth:function(A,e){return A.year&&(e=A.month(),A=A.year()),this._validate(A,e,this.minDay,T.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[A]=="undefined"?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[A][e]},weekDay:function(A,e,a){return this.dayOfWeek(A,e,a)!==6},toJD:function(A,e,a){var n=this._validate(A,e,a,T.local.invalidDate);A=n.year(),e=n.month(),a=n.day();var t=T.instance(),r=0,f=e,o=A;this._createMissingCalendarData(A);var i=A-(f>9||f===9&&a>=this.NEPALI_CALENDAR_DATA[o][0]?56:57);for(e!==9&&(r=a,f--);f!==9;)f<=0&&(f=12,o--),r+=this.NEPALI_CALENDAR_DATA[o][f],f--;return e===9?(r+=a-this.NEPALI_CALENDAR_DATA[o][0],r<0&&(r+=t.daysInYear(i))):r+=this.NEPALI_CALENDAR_DATA[o][9]-this.NEPALI_CALENDAR_DATA[o][0],t.newDate(i,1,1).add(r,"d").toJD()},fromJD:function(A){var e=T.instance(),a=e.fromJD(A),n=a.year(),t=a.dayOfYear(),r=n+56;this._createMissingCalendarData(r);for(var f=9,o=this.NEPALI_CALENDAR_DATA[r][0],i=this.NEPALI_CALENDAR_DATA[r][f]-o+1;t>i;)f++,f>12&&(f=1,r++),i+=this.NEPALI_CALENDAR_DATA[r][f];var p=this.NEPALI_CALENDAR_DATA[r][f]-(i-t);return this.newDate(r,f,p)},_createMissingCalendarData:function(A){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var a=A-1;a<A+2;a++)typeof this.NEPALI_CALENDAR_DATA[a]=="undefined"&&(this.NEPALI_CALENDAR_DATA[a]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),T.calendars.nepali=M},{"../main":346,"object-assign":247}],342:[function(g,ne,ae){var T=g("../main"),c=g("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new T.baseCalendar,c(M.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,T.local.invalidYear);return((a.year()-(a.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,a,n){var t=this.newDate(e,a,n);return t.add(-((t.dayOfWeek()+1)%7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,T.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===12&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return this.dayOfWeek(e,a,n)!==5},toJD:function(e,a,n){var t=this._validate(e,a,n,T.local.invalidDate);e=t.year(),a=t.month(),n=t.day();var r=e-(e>=0?474:473),f=474+A(r,2820);return n+(a<=7?(a-1)*31:(a-1)*30+6)+Math.floor((f*682-110)/2816)+(f-1)*365+Math.floor(r/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var a=e-this.toJD(475,1,1),n=Math.floor(a/1029983),t=A(a,1029983),r=2820;if(t!==1029982){var f=Math.floor(t/366),o=A(t,366);r=Math.floor((2134*f+2816*o+2815)/1028522)+f+1}var i=r+2820*n+474;i=i<=0?i-1:i;var p=e-this.toJD(i,1,1)+1,d=p<=186?Math.ceil(p/31):Math.ceil((p-6)/30),y=e-this.toJD(i,d,1)+1;return this.newDate(i,d,y)}});function A(e,a){return e-a*Math.floor(e/a)}T.calendars.persian=M,T.calendars.jalali=M},{"../main":346,"object-assign":247}],343:[function(g,ne,ae){var T=g("../main"),c=g("object-assign"),M=T.instance();function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new T.baseCalendar,c(A.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,T.local.invalidYear),e=this._t2gYear(a.year());return M.leapYear(e)},weekOfYear:function(e,a,n){var t=this._validate(e,this.minMonth,this.minDay,T.local.invalidYear),e=this._t2gYear(t.year());return M.weekOfYear(e,t.month(),t.day())},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,T.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return(this.dayOfWeek(e,a,n)||7)<6},toJD:function(e,a,n){var t=this._validate(e,a,n,T.local.invalidDate),e=this._t2gYear(t.year());return M.toJD(e,t.month(),t.day())},fromJD:function(e){var a=M.fromJD(e),n=this._g2tYear(a.year());return this.newDate(n,a.month(),a.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),T.calendars.taiwan=A},{"../main":346,"object-assign":247}],344:[function(g,ne,ae){var T=g("../main"),c=g("object-assign"),M=T.instance();function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new T.baseCalendar,c(A.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,T.local.invalidYear),e=this._t2gYear(a.year());return M.leapYear(e)},weekOfYear:function(e,a,n){var t=this._validate(e,this.minMonth,this.minDay,T.local.invalidYear),e=this._t2gYear(t.year());return M.weekOfYear(e,t.month(),t.day())},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,T.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return(this.dayOfWeek(e,a,n)||7)<6},toJD:function(e,a,n){var t=this._validate(e,a,n,T.local.invalidDate),e=this._t2gYear(t.year());return M.toJD(e,t.month(),t.day())},fromJD:function(e){var a=M.fromJD(e),n=this._g2tYear(a.year());return this.newDate(n,a.month(),a.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),T.calendars.thai=A},{"../main":346,"object-assign":247}],345:[function(g,ne,ae){var T=g("../main"),c=g("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new T.baseCalendar,c(M.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,T.local.invalidYear);return this.daysInYear(a.year())===355},weekOfYear:function(e,a,n){var t=this.newDate(e,a,n);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var a=0,n=1;n<=12;n++)a+=this.daysInMonth(e,n);return a},daysInMonth:function(e,a){for(var n=this._validate(e,a,this.minDay,T.local.invalidMonth),t=n.toJD()-24e5+.5,r=0,f=0;f<A.length;f++){if(A[f]>t)return A[r]-A[r-1];r++}return 30},weekDay:function(e,a,n){return this.dayOfWeek(e,a,n)!==5},toJD:function(e,a,n){var t=this._validate(e,a,n,T.local.invalidDate),r=12*(t.year()-1)+t.month()-15292,f=t.day()+A[r-1]-1;return f+24e5-.5},fromJD:function(e){for(var a=e-24e5+.5,n=0,t=0;t<A.length&&!(A[t]>a);t++)n++;var r=n+15292,f=Math.floor((r-1)/12),o=f+1,i=r-12*f,p=a-A[n-1]+1;return this.newDate(o,i,p)},isValid:function(e,a,n){var t=T.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(e=e.year!=null?e.year:e,t=e>=1276&&e<=1500),t},_validate:function(e,a,n,t){var r=T.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw t.replace(/\{0\}/,this.local.name);return r}}),T.calendars.ummalqura=M;var A=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(g,ne,ae){var T=g("object-assign");function c(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}T(c.prototype,{instance:function(t,r){t=(t||"gregorian").toLowerCase(),r=r||"";var f=this._localCals[t+"-"+r];if(!f&&this.calendars[t]&&(f=new this.calendars[t](r),this._localCals[t+"-"+r]=f),!f)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return f},newDate:function(t,r,f,o,i){return o=(t!=null&&t.year?t.calendar():typeof o=="string"?this.instance(o,i):o)||this.instance(),o.newDate(t,r,f)},substituteDigits:function(t){return function(r){return(r+"").replace(/[0-9]/g,function(f){return t[f]})}},substituteChineseDigits:function(t,r){return function(f){for(var o="",i=0;f>0;){var p=f%10;o=(p===0?"":t[p]+r[i])+o,i++,f=Math.floor(f/10)}return o.indexOf(t[1]+r[1])===0&&(o=o.substr(1)),o||t[0]}}});function M(t,r,f,o){if(this._calendar=t,this._year=r,this._month=f,this._day=o,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function A(t,r){return t=""+t,"000000".substring(0,r-t.length)+t}T(M.prototype,{newDate:function(t,r,f){return this._calendar.newDate(t==null?this:t,r,f)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,r,f){if(!this._calendar.isValid(t,r,f))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=r,this._day=f,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,r){return this._calendar.add(this,t,r)},set:function(t,r){return this._calendar.set(this,t,r)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var r=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return r===0?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+A(Math.abs(this.year()),4)+"-"+A(this.month(),2)+"-"+A(this.day(),2)}});function e(){this.shortYearCutoff="+10"}T(e.prototype,{_validateLevel:0,newDate:function(t,r,f){return t==null?this.today():(t.year&&(this._validate(t,r,f,n.local.invalidDate||n.regionalOptions[""].invalidDate),f=t.day(),r=t.month(),t=t.year()),new M(this,t,r,f))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){var r=this._validate(t,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return r.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var r=this._validate(t,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+A(Math.abs(r.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear),12},monthOfYear:function(t,r){var f=this._validate(t,r,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return(f.month()+this.monthsInYear(f)-this.firstMonth)%this.monthsInYear(f)+this.minMonth},fromMonthOfYear:function(t,r){var f=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,f,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth),f},daysInYear:function(t){var r=this._validate(t,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(t,r,f){var o=this._validate(t,r,f,n.local.invalidDate||n.regionalOptions[""].invalidDate);return o.toJD()-this.newDate(o.year(),this.fromMonthOfYear(o.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,r,f){var o=this._validate(t,r,f,n.local.invalidDate||n.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(o))+2)%this.daysInWeek()},extraInfo:function(t,r,f){return this._validate(t,r,f,n.local.invalidDate||n.regionalOptions[""].invalidDate),{}},add:function(t,r,f){return this._validate(t,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,r,f),r,f)},_add:function(t,r,f){if(this._validateLevel++,f==="d"||f==="w"){var o=t.toJD()+r*(f==="w"?this.daysInWeek():1),i=t.calendar().fromJD(o);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var p=t.year()+(f==="y"?r:0),d=t.monthOfYear()+(f==="m"?r:0),i=t.day(),y=function(l){for(;d<l.minMonth;)p--,d+=l.monthsInYear(p);for(var _=l.monthsInYear(p);d>_-1+l.minMonth;)p++,d-=_,_=l.monthsInYear(p)};f==="y"?(t.month()!==this.fromMonthOfYear(p,d)&&(d=this.newDate(p,t.month(),this.minDay).monthOfYear()),d=Math.min(d,this.monthsInYear(p)),i=Math.min(i,this.daysInMonth(p,this.fromMonthOfYear(p,d)))):f==="m"&&(y(this),i=Math.min(i,this.daysInMonth(p,this.fromMonthOfYear(p,d))));var v=[p,this.fromMonthOfYear(p,d),i];return this._validateLevel--,v}catch(x){throw this._validateLevel--,x}},_correctAdd:function(t,r,f,o){if(!this.hasYearZero&&(o==="y"||o==="m")&&(r[0]===0||t.year()>0!=r[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[o],p=f<0?-1:1;r=this._add(t,f*i[0]+p*i[1],i[2])}return t.date(r[0],r[1],r[2])},set:function(t,r,f){this._validate(t,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate);var o=f==="y"?r:t.year(),i=f==="m"?r:t.month(),p=f==="d"?r:t.day();return(f==="y"||f==="m")&&(p=Math.min(p,this.daysInMonth(o,i))),t.date(o,i,p)},isValid:function(t,r,f){this._validateLevel++;var o=this.hasYearZero||t!==0;if(o){var i=this.newDate(t,r,this.minDay);o=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(i)&&f>=this.minDay&&f-this.minDay<this.daysInMonth(i)}return this._validateLevel--,o},toJSDate:function(t,r,f){var o=this._validate(t,r,f,n.local.invalidDate||n.regionalOptions[""].invalidDate);return n.instance().fromJD(this.toJD(o)).toJSDate()},fromJSDate:function(t){return this.fromJD(n.instance().fromJSDate(t).toJD())},_validate:function(t,r,f,o){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,r,f))throw o.replace(/\{0\}/,this.local.name);var i=this.newDate(t,r,f);return this._validateLevel--,i}catch(p){throw this._validateLevel--,p}}});function a(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}a.prototype=new e,T(a.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var r=this._validate(t,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear),t=r.year()+(r.year()<0?1:0);return t%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,r,f){var o=this.newDate(t,r,f);return o.add(4-(o.dayOfWeek()||7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(t,r){var f=this._validate(t,r,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(t,r,f){return(this.dayOfWeek(t,r,f)||7)<6},toJD:function(t,r,f){var o=this._validate(t,r,f,n.local.invalidDate||n.regionalOptions[""].invalidDate);t=o.year(),r=o.month(),f=o.day(),t<0&&t++,r<3&&(r+=12,t--);var i=Math.floor(t/100),p=2-i+Math.floor(i/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(r+1))+f+p-1524.5},fromJD:function(t){var r=Math.floor(t+.5),f=Math.floor((r-186721625e-2)/36524.25);f=r+1+f-Math.floor(f/4);var o=f+1524,i=Math.floor((o-122.1)/365.25),p=Math.floor(365.25*i),d=Math.floor((o-p)/30.6001),y=o-p-Math.floor(d*30.6001),v=d-(d>13.5?13:1),x=i-(v>2.5?4716:4715);return x<=0&&x--,this.newDate(x,v,y)},toJSDate:function(t,r,f){var o=this._validate(t,r,f,n.local.invalidDate||n.regionalOptions[""].invalidDate),i=new Date(o.year(),o.month()-1,o.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var n=ne.exports=new c;n.cdate=M,n.baseCalendar=e,n.calendars.gregorian=a},{"object-assign":247}],347:[function(g,ne,ae){var T=g("object-assign"),c=g("./main");T(c.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),c.local=c.regionalOptions[""],T(c.cdate.prototype,{formatDate:function(M,A){return typeof M!="string"&&(A=M,M=""),this._calendar.formatDate(M||"",this,A)}}),T(c.baseCalendar.prototype,{UNIX_EPOCH:c.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:c.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(M,A,e){if(typeof M!="string"&&(e=A,A=M,M=""),!A)return"";if(A.calendar()!==this)throw c.local.invalidFormat||c.regionalOptions[""].invalidFormat;M=M||this.local.dateFormat,e=e||{};var a=e.dayNamesShort||this.local.dayNamesShort,n=e.dayNames||this.local.dayNames,t=e.monthNumbers||this.local.monthNumbers,r=e.monthNamesShort||this.local.monthNamesShort,f=e.monthNames||this.local.monthNames;e.calculateWeek||this.local.calculateWeek;for(var o=function(b,h){for(var m=1;w+m<M.length&&M.charAt(w+m)===b;)m++;return w+=m-1,Math.floor(m/(h||1))>1},i=function(b,h,m,u){var L=""+h;if(o(b,u))for(;L.length<m;)L="0"+L;return L},p=function(b,h,m,u){return o(b)?u[h]:m[h]},d=this,y=function(b){return typeof t=="function"?t.call(d,b,o("m")):l(i("m",b.month(),2))},v=function(b,h){return h?typeof f=="function"?f.call(d,b):f[b.month()-d.minMonth]:typeof r=="function"?r.call(d,b):r[b.month()-d.minMonth]},x=this.local.digits,l=function(b){return e.localNumbers&&x?x(b):b},_="",s=!1,w=0;w<M.length;w++)if(s)M.charAt(w)==="'"&&!o("'")?s=!1:_+=M.charAt(w);else switch(M.charAt(w)){case"d":_+=l(i("d",A.day(),2));break;case"D":_+=p("D",A.dayOfWeek(),a,n);break;case"o":_+=i("o",A.dayOfYear(),3);break;case"w":_+=i("w",A.weekOfYear(),2);break;case"m":_+=y(A);break;case"M":_+=v(A,o("M"));break;case"y":_+=o("y",2)?A.year():(A.year()%100<10?"0":"")+A.year()%100;break;case"Y":o("Y",2),_+=A.formatYear();break;case"J":_+=A.toJD();break;case"@":_+=(A.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":_+=(A.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":o("'")?_+="'":s=!0;break;default:_+=M.charAt(w)}return _},parseDate:function(M,A,e){if(A==null)throw c.local.invalidArguments||c.regionalOptions[""].invalidArguments;if(A=typeof A=="object"?A.toString():A+"",A==="")return null;M=M||this.local.dateFormat,e=e||{};var a=e.shortYearCutoff||this.shortYearCutoff;a=typeof a!="string"?a:this.today().year()%100+parseInt(a,10);for(var n=e.dayNamesShort||this.local.dayNamesShort,t=e.dayNames||this.local.dayNames,r=e.parseMonth||this.local.parseMonth,f=e.monthNumbers||this.local.monthNumbers,o=e.monthNamesShort||this.local.monthNamesShort,i=e.monthNames||this.local.monthNames,p=-1,d=-1,y=-1,v=-1,x=-1,l=!1,_=!1,s=function(I,D){for(var R=1;k+R<M.length&&M.charAt(k+R)===I;)R++;return k+=R-1,Math.floor(R/(D||1))>1},w=function(I,D){var R=s(I,D),B=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],F=new RegExp("^-?\\d{1,"+B+"}"),V=A.substring(S).match(F);if(!V)throw(c.local.missingNumberAt||c.regionalOptions[""].missingNumberAt).replace(/\{0\}/,S);return S+=V[0].length,parseInt(V[0],10)},b=this,h=function(){if(typeof f=="function"){s("m");var I=f.call(b,A.substring(S));return S+=I.length,I}return w("m")},m=function(I,D,R,B){for(var F=s(I,B)?R:D,V=0;V<F.length;V++)if(A.substr(S,F[V].length).toLowerCase()===F[V].toLowerCase())return S+=F[V].length,V+b.minMonth;throw(c.local.unknownNameAt||c.regionalOptions[""].unknownNameAt).replace(/\{0\}/,S)},u=function(){if(typeof i=="function"){var I=s("M")?i.call(b,A.substring(S)):o.call(b,A.substring(S));return S+=I.length,I}return m("M",o,i)},L=function(){if(A.charAt(S)!==M.charAt(k))throw(c.local.unexpectedLiteralAt||c.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,S);S++},S=0,k=0;k<M.length;k++)if(_)M.charAt(k)==="'"&&!s("'")?_=!1:L();else switch(M.charAt(k)){case"d":v=w("d");break;case"D":m("D",n,t);break;case"o":x=w("o");break;case"w":w("w");break;case"m":y=h();break;case"M":y=u();break;case"y":var P=k;l=!s("y",2),k=P,d=w("y",2);break;case"Y":d=w("Y",2);break;case"J":p=w("J")+.5,A.charAt(S)==="."&&(S++,w("J"));break;case"@":p=w("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":p=w("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":S=A.length;break;case"'":s("'")?L():_=!0;break;default:L()}if(S<A.length)throw c.local.unexpectedText||c.regionalOptions[""].unexpectedText;if(d===-1?d=this.today().year():d<100&&l&&(d+=a===-1?1900:this.today().year()-this.today().year()%100-(d<=a?0:100)),typeof y=="string"&&(y=r.call(this,d,y)),x>-1){y=1,v=x;for(var z=this.daysInMonth(d,y);v>z;z=this.daysInMonth(d,y))y++,v-=z}return p>-1?this.fromJD(p):this.newDate(d,y,v)},determineDate:function(M,A,e,a,n){e&&typeof e!="object"&&(n=a,a=e,e=null),typeof a!="string"&&(n=a,a="");var t=this,r=function(f){try{return t.parseDate(a,f,n)}catch{}f=f.toLowerCase();for(var o=(f.match(/^c/)&&e?e.newDate():null)||t.today(),i=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,p=i.exec(f);p;)o.add(parseInt(p[1],10),p[2]||"d"),p=i.exec(f);return o};return A=A?A.newDate():null,M=M==null?A:typeof M=="string"?r(M):typeof M=="number"?isNaN(M)||M===1/0||M===-1/0?A:t.today().add(M,"d"):t.newDate(M),M}})},{"./main":346,"object-assign":247}],348:[function(g,ne,ae){ne.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(g,ne,ae){var T=g("./arrow_paths"),c=g("../../plots/font_attributes"),M=g("../../plots/cartesian/constants"),A=g("../../plot_api/plot_template").templatedArray;g("../../constants/axis_placeable_objects"),ne.exports=A("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:c({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:T.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:T.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",M.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",M.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:c({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/cartesian/axes"),M=g("./draw").draw;ne.exports=function(n){var t=n._fullLayout,r=T.filterVisible(t.annotations);if(r.length&&n._fullData.length)return T.syncOrAsync([M,A],n)};function A(a){var n=a._fullLayout;T.filterVisible(n.annotations).forEach(function(t){var r=c.getFromId(a,t.xref),f=c.getFromId(a,t.yref),o=c.getRefType(t.xref),i=c.getRefType(t.yref);t._extremes={},o==="range"&&e(t,r),i==="range"&&e(t,f)})}function e(a,n){var t=n._id,r=t.charAt(0),f=a[r],o=a["a"+r],i=a[r+"ref"],p=a["a"+r+"ref"],d=a["_"+r+"padplus"],y=a["_"+r+"padminus"],v={x:1,y:-1}[r]*a[r+"shift"],x=3*a.arrowsize*a.arrowwidth||0,l=x+v,_=x-v,s=3*a.startarrowsize*a.arrowwidth||0,w=s+v,b=s-v,h;if(p===i){var m=c.findExtremes(n,[n.r2c(f)],{ppadplus:l,ppadminus:_}),u=c.findExtremes(n,[n.r2c(o)],{ppadplus:Math.max(d,w),ppadminus:Math.max(y,b)});h={min:[m.min[0],u.min[0]],max:[m.max[0],u.max[0]]}}else w=o?w+o:w,b=o?b-o:b,h=c.findExtremes(n,[n.r2c(f)],{ppadplus:Math.max(d,l,w),ppadminus:Math.max(y,_,b)});a._extremes[t]=h}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(g,ne,ae){var T=g("../../lib"),c=g("../../registry"),M=g("../../plot_api/plot_template").arrayEditor;ne.exports={hasClickToShow:A,onClick:e};function A(t,r){var f=a(t,r);return f.on.length>0||f.explicitOff.length>0}function e(t,r){var f=a(t,r),o=f.on,i=f.off.concat(f.explicitOff),p={},d=t._fullLayout.annotations,y,v;if(!!(o.length||i.length)){for(y=0;y<o.length;y++)v=M(t.layout,"annotations",d[o[y]]),v.modifyItem("visible",!0),T.extendFlat(p,v.getUpdateObj());for(y=0;y<i.length;y++)v=M(t.layout,"annotations",d[i[y]]),v.modifyItem("visible",!1),T.extendFlat(p,v.getUpdateObj());return c.call("update",t,{},p)}}function a(t,r){var f=t._fullLayout.annotations,o=[],i=[],p=[],d=(r||[]).length,y,v,x,l,_,s,w,b;for(y=0;y<f.length;y++)if(x=f[y],l=x.clicktoshow,l){for(v=0;v<d;v++)if(_=r[v],s=_.xaxis,w=_.yaxis,s._id===x.xref&&w._id===x.yref&&s.d2r(_.x)===n(x._xclick,s)&&w.d2r(_.y)===n(x._yclick,w)){x.visible?l==="onout"?b=i:b=p:b=o,b.push(y);break}v===d&&x.visible&&l==="onout"&&i.push(y)}return{on:o,off:i,explicitOff:p}}function n(t,r){return r.type==="log"?r.l2r(t):r.d2r(t)}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(g,ne,ae){var T=g("../../lib"),c=g("../color");ne.exports=function(A,e,a,n){n("opacity");var t=n("bgcolor"),r=n("bordercolor"),f=c.opacity(r);n("borderpad");var o=n("borderwidth"),i=n("showarrow");n("text",i?" ":a._dfltTitle.annotation),n("textangle"),T.coerceFont(n,"font",a.font),n("width"),n("align");var p=n("height");if(p&&n("valign"),i){var d=n("arrowside"),y,v;d.indexOf("end")!==-1&&(y=n("arrowhead"),v=n("arrowsize")),d.indexOf("start")!==-1&&(n("startarrowhead",y),n("startarrowsize",v)),n("arrowcolor",f?e.bordercolor:c.defaultLine),n("arrowwidth",(f&&o||1)*2),n("standoff"),n("startstandoff")}var x=n("hovertext"),l=a.hoverlabel||{};if(x){var _=n("hoverlabel.bgcolor",l.bgcolor||(c.opacity(t)?c.rgb(t):c.defaultLine)),s=n("hoverlabel.bordercolor",l.bordercolor||c.contrast(_));T.coerceFont(n,"hoverlabel.font",{family:l.font.family,size:l.font.size,color:l.font.color||s})}n("captureevents",!!x)}},{"../../lib":503,"../color":366}],353:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib/to_log_range");ne.exports=function(A,e,a,n){e=e||{};var t=a==="log"&&e.type==="linear",r=a==="linear"&&e.type==="log";if(!(t||r))return;var f=A._fullLayout.annotations,o=e._id.charAt(0),i,p;function d(v){var x=i[v],l=null;t?l=c(x,e.range):l=Math.pow(10,x),T(l)||(l=null),n(p+v,l)}for(var y=0;y<f.length;y++)i=f[y],p="annotations["+y+"].",i[o+"ref"]===e._id&&d(o),i["a"+o+"ref"]===e._id&&d("a"+o)}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/cartesian/axes"),M=g("../../plots/array_container_defaults"),A=g("./common_defaults"),e=g("./attributes");ne.exports=function(t,r){M(t,r,{name:"annotations",handleItemDefaults:a})};function a(n,t,r){function f(L,S){return T.coerce(n,t,e,L,S)}var o=f("visible"),i=f("clicktoshow");if(!!(o||i)){A(n,t,r,f);for(var p=t.showarrow,d=["x","y"],y=[-10,-30],v={_fullLayout:r},x=0;x<2;x++){var l=d[x],_=c.coerceRef(n,t,v,l,"","paper");if(_!=="paper"){var s=c.getFromId(v,_);s._annIndices.push(t._index)}if(c.coercePosition(t,v,f,_,l,.5),p){var w="a"+l,b=c.coerceRef(n,t,v,w,"pixel",["pixel","paper"]);b!=="pixel"&&b!==_&&(b=t[w]="pixel");var h=b==="pixel"?y[x]:.4;c.coercePosition(t,v,f,b,w,h)}f(l+"anchor"),f(l+"shift")}if(T.noneOrAll(n,t,["x","y"]),p&&T.noneOrAll(n,t,["ax","ay"]),i){var m=f("xclick"),u=f("yclick");t._xclick=m===void 0?t.x:c.cleanPosition(m,v,t.xref),t._yclick=u===void 0?t.y:c.cleanPosition(u,v,t.yref)}}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../registry"),M=g("../../plots/plots"),A=g("../../lib"),e=A.strTranslate,a=g("../../plots/cartesian/axes"),n=g("../color"),t=g("../drawing"),r=g("../fx"),f=g("../../lib/svg_text_utils"),o=g("../../lib/setcursor"),i=g("../dragelement"),p=g("../../plot_api/plot_template").arrayEditor,d=g("./draw_arrow_head");ne.exports={draw:y,drawOne:v,drawRaw:l};function y(_){var s=_._fullLayout;s._infolayer.selectAll(".annotation").remove();for(var w=0;w<s.annotations.length;w++)s.annotations[w].visible&&v(_,w);return M.previousPromises(_)}function v(_,s){var w=_._fullLayout,b=w.annotations[s]||{},h=a.getFromId(_,b.xref),m=a.getFromId(_,b.yref);h&&h.setScale(),m&&m.setScale(),l(_,b,s,!1,h,m)}function x(_,s,w,b,h){var m=h[w],u=h[w+"ref"],L=w.indexOf("y")!==-1,S=a.getRefType(u)==="domain",k=L?b.h:b.w;return _?S?m+(L?-s:s)/_._length:_.p2r(_.r2p(m)+s):m+(L?-s:s)/k}function l(_,s,w,b,h,m){var u=_._fullLayout,L=_._fullLayout._size,S=_._context.edits,k,P;b?(k="annotation-"+b,P=b+".annotations"):(k="annotation",P="annotations");var z=p(_.layout,P,s),I=z.modifyBase,D=z.modifyItem,R=z.getUpdateObj;u._infolayer.selectAll("."+k+'[data-index="'+w+'"]').remove();var B="clip"+u._uid+"_ann"+w;if(!s._input||s.visible===!1){T.selectAll("#"+B).remove();return}var F={x:{},y:{}},V=+s.textangle||0,Y=u._infolayer.append("g").classed(k,!0).attr("data-index",String(w)).style("opacity",s.opacity),K=Y.append("g").classed("annotation-text-g",!0),J=S[s.showarrow?"annotationTail":"annotationPosition"],G=s.captureevents||S.annotationText||J;function Z(le){var ye={index:w,annotation:s._input,fullAnnotation:s,event:le};return b&&(ye.subplotId=b),ye}var re=K.append("g").style("pointer-events",G?"all":null).call(o,"pointer").on("click",function(){_._dragging=!1,_.emit("plotly_clickannotation",Z(T.event))});s.hovertext&&re.on("mouseover",function(){var le=s.hoverlabel,ye=le.font,ue=this.getBoundingClientRect(),pe=_.getBoundingClientRect();r.loneHover({x0:ue.left-pe.left,x1:ue.right-pe.left,y:(ue.top+ue.bottom)/2-pe.top,text:s.hovertext,color:le.bgcolor,borderColor:le.bordercolor,fontFamily:ye.family,fontSize:ye.size,fontColor:ye.color},{container:u._hoverlayer.node(),outerContainer:u._paper.node(),gd:_})}).on("mouseout",function(){r.loneUnhover(u._hoverlayer.node())});var se=s.borderwidth,oe=s.borderpad,N=se+oe,U=re.append("rect").attr("class","bg").style("stroke-width",se+"px").call(n.stroke,s.bordercolor).call(n.fill,s.bgcolor),q=s.width||s.height,Q=u._topclips.selectAll("#"+B).data(q?[0]:[]);Q.enter().append("clipPath").classed("annclip",!0).attr("id",B).append("rect"),Q.exit().remove();var W=s.font,X=u._meta?A.templateString(s.text,u._meta):s.text,te=re.append("text").classed("annotation-text",!0).text(X);function ee(le){return le.call(t.font,W).attr({"text-anchor":{left:"start",right:"end"}[s.align]||"middle"}),f.convertToTspans(le,_,ie),le}function ie(){var le=te.selectAll("a");if(le.size()===1&&le.text()===te.text()){var ye=re.insert("a",":first-child").attr({"xlink:xlink:href":le.attr("xlink:href"),"xlink:xlink:show":le.attr("xlink:show")}).style({cursor:"pointer"});ye.node().appendChild(U.node())}var ue=re.select(".annotation-text-math-group"),pe=!ue.empty(),ge=t.bBox((pe?ue:te).node()),Te=ge.width,_e=ge.height,De=s.width||Te,Oe=s.height||_e,Ue=Math.round(De+2*N),xe=Math.round(Oe+2*N);function Pe(Gt,Kt){return Kt==="auto"&&(Gt<1/3?Kt="left":Gt>2/3?Kt="right":Kt="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Kt]}for(var Ve=!1,Qe=["x","y"],Fe=0;Fe<Qe.length;Fe++){var Le=Qe[Fe],Ne=s[Le+"ref"]||Le,dt=s["a"+Le+"ref"],Dt={x:h,y:m}[Le],Xt=(V+(Le==="x"?0:-90))*Math.PI/180,Tt=Ue*Math.cos(Xt),zt=xe*Math.sin(Xt),Ut=Math.abs(Tt)+Math.abs(zt),Et=s[Le+"anchor"],Mt=s[Le+"shift"]*(Le==="x"?1:-1),rt=F[Le],ct,Ze,ke,Ge,Je,it=a.getRefType(Ne);if(Dt&&it!=="domain"){var Pt=Dt.r2fraction(s[Le]);(Pt<0||Pt>1)&&(dt===Ne?(Pt=Dt.r2fraction(s["a"+Le]),(Pt<0||Pt>1)&&(Ve=!0)):Ve=!0),ct=Dt._offset+Dt.r2p(s[Le]),Ge=.5}else{var At=it==="domain";Le==="x"?(ke=s[Le],ct=At?Dt._offset+Dt._length*ke:ct=L.l+L.w*ke):(ke=1-s[Le],ct=At?Dt._offset+Dt._length*ke:ct=L.t+L.h*ke),Ge=s.showarrow?.5:ke}if(s.showarrow){rt.head=ct;var Ot=s["a"+Le];if(Je=Tt*Pe(.5,s.xanchor)-zt*Pe(.5,s.yanchor),dt===Ne){var Jt=a.getRefType(dt);Jt==="domain"?(Le==="y"&&(Ot=1-Ot),rt.tail=Dt._offset+Dt._length*Ot):Jt==="paper"?Le==="y"?(Ot=1-Ot,rt.tail=L.t+L.h*Ot):rt.tail=L.l+L.w*Ot:rt.tail=Dt._offset+Dt.r2p(Ot),Ze=Je}else rt.tail=ct+Ot,Ze=Je+Ot;rt.text=rt.tail+Je;var Bt=u[Le==="x"?"width":"height"];if(Ne==="paper"&&(rt.head=A.constrain(rt.head,1,Bt-1)),dt==="pixel"){var qt=-Math.max(rt.tail-3,rt.text),rr=Math.min(rt.tail+3,rt.text)-Bt;qt>0?(rt.tail+=qt,rt.text+=qt):rr>0&&(rt.tail-=rr,rt.text-=rr)}rt.tail+=Mt,rt.head+=Mt}else Je=Ut*Pe(Ge,Et),Ze=Je,rt.text=ct+Je;rt.text+=Mt,Je+=Mt,Ze+=Mt,s["_"+Le+"padplus"]=Ut/2+Ze,s["_"+Le+"padminus"]=Ut/2-Ze,s["_"+Le+"size"]=Ut,s["_"+Le+"shift"]=Je}if(Ve){re.remove();return}var er=0,pr=0;if(s.align!=="left"&&(er=(De-Te)*(s.align==="center"?.5:1)),s.valign!=="top"&&(pr=(Oe-_e)*(s.valign==="middle"?.5:1)),pe)ue.select("svg").attr({x:N+er-1,y:N+pr}).call(t.setClipUrl,q?B:null,_);else{var Xr=N+pr-ge.top,hn=N+er-ge.left;te.call(f.positionText,hn,Xr).call(t.setClipUrl,q?B:null,_)}Q.select("rect").call(t.setRect,N,N,De,Oe),U.call(t.setRect,se/2,se/2,Ue-se,xe-se),re.call(t.setTranslate,Math.round(F.x.text-Ue/2),Math.round(F.y.text-xe/2)),K.attr({transform:"rotate("+V+","+F.x.text+","+F.y.text+")"});var $r=function(Gt,Kt){Y.selectAll(".annotation-arrow-g").remove();var Ht=F.x.head,_r=F.y.head,tt=F.x.tail+Gt,je=F.y.tail+Kt,st=F.x.text+Gt,ft=F.y.text+Kt,Me=A.rotationXYMatrix(V,st,ft),Se=A.apply2DTransform(Me),Ke=A.apply2DTransform2(Me),Xe=+U.attr("width"),ot=+U.attr("height"),pt=st-.5*Xe,vt=pt+Xe,Ct=ft-.5*ot,St=Ct+ot,Nt=[[pt,Ct,pt,St],[pt,St,vt,St],[vt,St,vt,Ct],[vt,Ct,pt,Ct]].map(Ke);if(!Nt.reduce(function(et,Lt){return et^!!A.segmentsIntersect(Ht,_r,Ht+1e6,_r+1e6,Lt[0],Lt[1],Lt[2],Lt[3])},!1)){Nt.forEach(function(et){var Lt=A.segmentsIntersect(tt,je,Ht,_r,et[0],et[1],et[2],et[3]);Lt&&(tt=Lt.x,je=Lt.y)});var ir=s.arrowwidth,lr=s.arrowcolor,Yr=s.arrowside,Pr=Y.append("g").style({opacity:n.opacity(lr)}).classed("annotation-arrow-g",!0),wr=Pr.append("path").attr("d","M"+tt+","+je+"L"+Ht+","+_r).style("stroke-width",ir+"px").call(n.stroke,n.rgb(lr));if(d(wr,Yr,s),S.annotationPosition&&wr.node().parentNode&&!b){var Jr=Ht,gr=_r;if(s.standoff){var mr=Math.sqrt(Math.pow(Ht-tt,2)+Math.pow(_r-je,2));Jr+=s.standoff*(tt-Ht)/mr,gr+=s.standoff*(je-_r)/mr}var Ur=Pr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(tt-Jr)+","+(je-gr),transform:e(Jr,gr)}).style("stroke-width",ir+6+"px").call(n.stroke,"rgba(0,0,0,0)").call(n.fill,"rgba(0,0,0,0)"),Hr,Tr;i.init({element:Ur.node(),gd:_,prepFn:function(){var et=t.getTranslate(re);Hr=et.x,Tr=et.y,h&&h.autorange&&I(h._name+".autorange",!0),m&&m.autorange&&I(m._name+".autorange",!0)},moveFn:function(et,Lt){var jt=Se(Hr,Tr),sr=jt[0]+et,Ir=jt[1]+Lt;re.call(t.setTranslate,sr,Ir),D("x",x(h,et,"x",L,s)),D("y",x(m,Lt,"y",L,s)),s.axref===s.xref&&D("ax",x(h,et,"ax",L,s)),s.ayref===s.yref&&D("ay",x(m,Lt,"ay",L,s)),Pr.attr("transform",e(et,Lt)),K.attr({transform:"rotate("+V+","+sr+","+Ir+")"})},doneFn:function(){c.call("_guiRelayout",_,R());var et=document.querySelector(".js-notes-box-panel");et&&et.redraw(et.selectedObj)}})}}};if(s.showarrow&&$r(0,0),J){var nt;i.init({element:re.node(),gd:_,prepFn:function(){nt=K.attr("transform")},moveFn:function(Gt,Kt){var Ht="pointer";if(s.showarrow)s.axref===s.xref?D("ax",x(h,Gt,"ax",L,s)):D("ax",s.ax+Gt),s.ayref===s.yref?D("ay",x(m,Kt,"ay",L.w,s)):D("ay",s.ay+Kt),$r(Gt,Kt);else{if(b)return;var _r,tt;if(h)_r=x(h,Gt,"x",L,s);else{var je=s._xsize/L.w,st=s.x+(s._xshift-s.xshift)/L.w-je/2;_r=i.align(st+Gt/L.w,je,0,1,s.xanchor)}if(m)tt=x(m,Kt,"y",L,s);else{var ft=s._ysize/L.h,Me=s.y-(s._yshift+s.yshift)/L.h-ft/2;tt=i.align(Me-Kt/L.h,ft,0,1,s.yanchor)}D("x",_r),D("y",tt),(!h||!m)&&(Ht=i.getCursor(h?.5:_r,m?.5:tt,s.xanchor,s.yanchor))}K.attr({transform:e(Gt,Kt)+nt}),o(re,Ht)},clickFn:function(Gt,Kt){s.captureevents&&_.emit("plotly_clickannotation",Z(Kt))},doneFn:function(){o(re),c.call("_guiRelayout",_,R());var Gt=document.querySelector(".js-notes-box-panel");Gt&&Gt.redraw(Gt.selectedObj)}})}}S.annotationText?te.call(f.makeEditable,{delegate:re,gd:_}).call(ee).on("edit",function(le){s.text=le,this.call(ee),D("text",le),h&&h.autorange&&I(h._name+".autorange",!0),m&&m.autorange&&I(m._name+".autorange",!0),c.call("_guiRelayout",_,R())}):te.call(ee)}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../color"),M=g("./arrow_paths"),A=g("../../lib"),e=A.strScale,a=A.strRotate,n=A.strTranslate;ne.exports=function(r,f,o){var i=r.node(),p=M[o.arrowhead||0],d=M[o.startarrowhead||0],y=(o.arrowwidth||1)*(o.arrowsize||1),v=(o.arrowwidth||1)*(o.startarrowsize||1),x=f.indexOf("start")>=0,l=f.indexOf("end")>=0,_=p.backoff*y+o.standoff,s=d.backoff*v+o.startstandoff,w,b,h,m;if(i.nodeName==="line"){w={x:+r.attr("x1"),y:+r.attr("y1")},b={x:+r.attr("x2"),y:+r.attr("y2")};var u=w.x-b.x,L=w.y-b.y;if(h=Math.atan2(L,u),m=h+Math.PI,_&&s&&_+s>Math.sqrt(u*u+L*L)){K();return}if(_){if(_*_>u*u+L*L){K();return}var S=_*Math.cos(h),k=_*Math.sin(h);b.x+=S,b.y+=k,r.attr({x2:b.x,y2:b.y})}if(s){if(s*s>u*u+L*L){K();return}var P=s*Math.cos(h),z=s*Math.sin(h);w.x-=P,w.y-=z,r.attr({x1:w.x,y1:w.y})}}else if(i.nodeName==="path"){var I=i.getTotalLength(),D="";if(I<_+s){K();return}var R=i.getPointAtLength(0),B=i.getPointAtLength(.1);h=Math.atan2(R.y-B.y,R.x-B.x),w=i.getPointAtLength(Math.min(s,I)),D="0px,"+s+"px,";var F=i.getPointAtLength(I),V=i.getPointAtLength(I-.1);m=Math.atan2(F.y-V.y,F.x-V.x),b=i.getPointAtLength(Math.max(0,I-_));var Y=D?s+_:_;D+=I-Y+"px,"+I+"px",r.style("stroke-dasharray",D)}function K(){r.style("stroke-dasharray","0px,100px")}function J(G,Z,re,se){!G.path||(G.noRotate&&(re=0),T.select(i.parentNode).append("path").attr({class:r.attr("class"),d:G.path,transform:n(Z.x,Z.y)+a(re*180/Math.PI)+e(se)}).style({fill:c.rgb(o.arrowcolor),"stroke-width":0}))}x&&J(d,w,h,v),l&&J(p,b,m,y)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(g,ne,ae){var T=g("./draw"),c=g("./click");ne.exports={moduleType:"component",name:"annotations",layoutAttributes:g("./attributes"),supplyLayoutDefaults:g("./defaults"),includeBasePlot:g("../../plots/cartesian/include_components")("annotations"),calcAutorange:g("./calc_autorange"),draw:T.draw,drawOne:T.drawOne,drawRaw:T.drawRaw,hasClickToShow:c.hasClickToShow,onClick:c.onClick,convertCoords:g("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(g,ne,ae){var T=g("../annotations/attributes"),c=g("../../plot_api/edit_types").overrideAll,M=g("../../plot_api/plot_template").templatedArray;ne.exports=c(M("annotation",{visible:T.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:T.xanchor,xshift:T.xshift,yanchor:T.yanchor,yshift:T.yshift,text:T.text,textangle:T.textangle,font:T.font,width:T.width,height:T.height,opacity:T.opacity,align:T.align,valign:T.valign,bgcolor:T.bgcolor,bordercolor:T.bordercolor,borderpad:T.borderpad,borderwidth:T.borderwidth,showarrow:T.showarrow,arrowcolor:T.arrowcolor,arrowhead:T.arrowhead,startarrowhead:T.startarrowhead,arrowside:T.arrowside,arrowsize:T.arrowsize,startarrowsize:T.startarrowsize,arrowwidth:T.arrowwidth,standoff:T.standoff,startstandoff:T.startstandoff,hovertext:T.hovertext,hoverlabel:T.hoverlabel,captureevents:T.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/cartesian/axes");ne.exports=function(e){for(var a=e.fullSceneLayout,n=a.annotations,t=0;t<n.length;t++)M(n[t],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()};function M(A,e){var a=e.fullSceneLayout,n=a.domain,t=e.fullLayout._size,r={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};A._xa={},T.extendFlat(A._xa,r),c.setConvert(A._xa),A._xa._offset=t.l+n.x[0]*t.w,A._xa.l2p=function(){return .5*(1+A._pdata[0]/A._pdata[3])*t.w*(n.x[1]-n.x[0])},A._ya={},T.extendFlat(A._ya,r),c.setConvert(A._ya),A._ya._offset=t.t+(1-n.y[1])*t.h,A._ya.l2p=function(){return .5*(1-A._pdata[1]/A._pdata[3])*t.h*(n.y[1]-n.y[0])}}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/cartesian/axes"),M=g("../../plots/array_container_defaults"),A=g("../annotations/common_defaults"),e=g("./attributes");ne.exports=function(t,r,f){M(t,r,{name:"annotations",handleItemDefaults:a,fullLayout:f.fullLayout})};function a(n,t,r,f){function o(d,y){return T.coerce(n,t,e,d,y)}function i(d){var y=d+"axis",v={_fullLayout:{}};return v._fullLayout[y]=r[y],c.coercePosition(t,v,o,d,d,.5)}var p=o("visible");!p||(A(n,t,f.fullLayout,o),i("x"),i("y"),i("z"),T.noneOrAll(n,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",o("xanchor"),o("yanchor"),o("xshift"),o("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",o("ax",-10),o("ay",-30),T.noneOrAll(n,t,["ax","ay"])))}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(g,ne,ae){var T=g("../annotations/draw").drawRaw,c=g("../../plots/gl3d/project"),M=["x","y","z"];ne.exports=function(e){for(var a=e.fullSceneLayout,n=e.dataScale,t=a.annotations,r=0;r<t.length;r++){for(var f=t[r],o=!1,i=0;i<3;i++){var p=M[i],d=f[p],y=a[p+"axis"],v=y.r2fraction(d);if(v<0||v>1){o=!0;break}}o?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+r+'"]').remove():(f._pdata=c(e.glplot.cameraParams,[a.xaxis.r2l(f.x)*n[0],a.yaxis.r2l(f.y)*n[1],a.zaxis.r2l(f.z)*n[2]]),T(e.graphDiv,f,r,e.id,f._xa,f._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(g,ne,ae){var T=g("../../registry"),c=g("../../lib");ne.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:g("./attributes")}}},layoutAttributes:g("./attributes"),handleDefaults:g("./defaults"),includeBasePlot:M,convert:g("./convert"),draw:g("./draw")};function M(A,e){var a=T.subplotsRegistry.gl3d;if(!!a)for(var n=a.attrRegex,t=Object.keys(A),r=0;r<t.length;r++){var f=t[r];n.test(f)&&(A[f].annotations||[]).length&&(c.pushUnique(e._basePlotModules,a),c.pushUnique(e._subplots.gl3d,f))}}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(g,ne,ae){ne.exports=g("world-calendars/dist/main"),g("world-calendars/dist/plus"),g("world-calendars/dist/calendars/chinese"),g("world-calendars/dist/calendars/coptic"),g("world-calendars/dist/calendars/discworld"),g("world-calendars/dist/calendars/ethiopian"),g("world-calendars/dist/calendars/hebrew"),g("world-calendars/dist/calendars/islamic"),g("world-calendars/dist/calendars/julian"),g("world-calendars/dist/calendars/mayan"),g("world-calendars/dist/calendars/nanakshahi"),g("world-calendars/dist/calendars/nepali"),g("world-calendars/dist/calendars/persian"),g("world-calendars/dist/calendars/taiwan"),g("world-calendars/dist/calendars/thai"),g("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(g,ne,ae){var T=g("./calendars"),c=g("../../lib"),M=g("../../constants/numerical"),A=M.EPOCHJD,e=M.ONEDAY,a={valType:"enumerated",values:c.sortObjectKeys(T.calendars),editType:"calc",dflt:"gregorian"},n=function(h,m,u,L){var S={};return S[u]=a,c.coerce(h,m,S,u,L)},t=function(h,m,u,L){for(var S=0;S<u.length;S++)n(h,m,u[S]+"calendar",L.calendar)},r={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},f={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},o={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},i="##",p={d:{"0":"dd","-":"d"},e:{"0":"d","-":"d"},a:{"0":"D","-":"D"},A:{"0":"DD","-":"DD"},j:{"0":"oo","-":"o"},W:{"0":"ww","-":"w"},m:{"0":"mm","-":"m"},b:{"0":"M","-":"M"},B:{"0":"MM","-":"MM"},y:{"0":"yy","-":"yy"},Y:{"0":"yyyy","-":"yyyy"},U:i,w:i,c:{"0":"D M d %X yyyy","-":"D M d %X yyyy"},x:{"0":"mm/dd/yyyy","-":"mm/dd/yyyy"}};function d(h,m,u){for(var L=Math.floor((m+.05)/e)+A,S=v(u).fromJD(L),k=0,P,z,I,D,R;(k=h.indexOf("%",k))!==-1;)P=h.charAt(k+1),P==="0"||P==="-"||P==="_"?(I=3,z=h.charAt(k+2),P==="_"&&(P="-")):(z=P,P="0",I=2),D=p[z],D?(D===i?R=i:R=S.formatDate(D[P]),h=h.substr(0,k)+R+h.substr(k+I),k+=R.length):k+=I;return h}var y={};function v(h){var m=y[h];return m||(m=y[h]=T.instance(h),m)}function x(h){return c.extendFlat({},a,{description:h})}function l(h){return"Sets the calendar system to use with `"+h+"` date data."}var _={xcalendar:x(l("x"))},s=c.extendFlat({},_,{ycalendar:x(l("y"))}),w=c.extendFlat({},s,{zcalendar:x(l("z"))}),b=x(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ne.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:s,bar:s,box:s,heatmap:s,contour:s,histogram:s,histogram2d:s,histogram2dcontour:s,scatter3d:w,surface:w,mesh3d:w,scattergl:s,ohlc:_,candlestick:_},layout:{calendar:x(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:b},yaxis:{calendar:b},scene:{xaxis:{calendar:b},yaxis:{calendar:b},zaxis:{calendar:b}},polar:{radialaxis:{calendar:b}}},transforms:{filter:{valuecalendar:x(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:x(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:a,handleDefaults:n,handleTraceDefaults:t,CANONICAL_SUNDAY:f,CANONICAL_TICK:r,DFLTRANGE:o,getCal:v,worldCalFmt:d}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(g,ne,ae){ae.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ae.defaultLine="#444",ae.lightLine="#eee",ae.background="#fff",ae.borderLine="#BEC8D9",ae.lightFraction=100*(14-4)/(15-4)},{}],366:[function(g,ne,ae){var T=g("tinycolor2"),c=g("fast-isnumeric"),M=g("../../lib/array").isTypedArray,A=ne.exports={},e=g("./attributes");A.defaults=e.defaults;var a=A.defaultLine=e.defaultLine;A.lightLine=e.lightLine;var n=A.background=e.background;A.tinyRGB=function(r){var f=r.toRgb();return"rgb("+Math.round(f.r)+", "+Math.round(f.g)+", "+Math.round(f.b)+")"},A.rgb=function(r){return A.tinyRGB(T(r))},A.opacity=function(r){return r?T(r).getAlpha():0},A.addOpacity=function(r,f){var o=T(r).toRgb();return"rgba("+Math.round(o.r)+", "+Math.round(o.g)+", "+Math.round(o.b)+", "+f+")"},A.combine=function(r,f){var o=T(r).toRgb();if(o.a===1)return T(r).toRgbString();var i=T(f||n).toRgb(),p=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},d={r:p.r*(1-o.a)+o.r*o.a,g:p.g*(1-o.a)+o.g*o.a,b:p.b*(1-o.a)+o.b*o.a};return T(d).toRgbString()},A.contrast=function(r,f,o){var i=T(r);i.getAlpha()!==1&&(i=T(A.combine(r,n)));var p=i.isDark()?f?i.lighten(f):n:o?i.darken(o):a;return p.toString()},A.stroke=function(r,f){var o=T(f);r.style({stroke:A.tinyRGB(o),"stroke-opacity":o.getAlpha()})},A.fill=function(r,f){var o=T(f);r.style({fill:A.tinyRGB(o),"fill-opacity":o.getAlpha()})},A.clean=function(r){if(!(!r||typeof r!="object")){var f=Object.keys(r),o,i,p,d;for(o=0;o<f.length;o++)if(p=f[o],d=r[p],p.substr(p.length-5)==="color")if(Array.isArray(d))for(i=0;i<d.length;i++)d[i]=t(d[i]);else r[p]=t(d);else if(p.substr(p.length-10)==="colorscale"&&Array.isArray(d))for(i=0;i<d.length;i++)Array.isArray(d[i])&&(d[i][1]=t(d[i][1]));else if(Array.isArray(d)){var y=d[0];if(!Array.isArray(y)&&y&&typeof y=="object")for(i=0;i<d.length;i++)A.clean(d[i])}else d&&typeof d=="object"&&!M(d)&&A.clean(d)}};function t(r){if(c(r)||typeof r!="string")return r;var f=r.trim();if(f.substr(0,3)!=="rgb")return r;var o=f.match(/^rgba?\s*\(([^()]*)\)$/);if(!o)return r;var i=o[1].trim().split(/\s*[\s,]\s*/),p=f.charAt(3)==="a"&&i.length===4;if(!p&&i.length!==3)return r;for(var d=0;d<i.length;d++){if(!i[d].length||(i[d]=Number(i[d]),!(i[d]>=0)))return r;if(d===3)i[d]>1&&(i[d]=1);else if(i[d]>=1)return r}var y=Math.round(i[0]*255)+", "+Math.round(i[1]*255)+", "+Math.round(i[2]*255);return p?"rgba("+y+", "+i[3]+")":"rgb("+y+")"}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(g,ne,ae){var T=g("../../plots/cartesian/layout_attributes"),c=g("../../plots/font_attributes"),M=g("../../lib/extend").extendFlat,A=g("../../plot_api/edit_types").overrideAll;ne.exports=A({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:T.linecolor,outlinewidth:T.linewidth,bordercolor:T.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:T.tickmode,nticks:T.nticks,tick0:T.tick0,dtick:T.dtick,tickvals:T.tickvals,ticktext:T.ticktext,ticks:M({},T.ticks,{dflt:""}),ticklabeloverflow:M({},T.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:T.ticklen,tickwidth:T.tickwidth,tickcolor:T.tickcolor,ticklabelstep:T.ticklabelstep,showticklabels:T.showticklabels,tickfont:c({}),tickangle:T.tickangle,tickformat:T.tickformat,tickformatstops:T.tickformatstops,tickprefix:T.tickprefix,showtickprefix:T.showtickprefix,ticksuffix:T.ticksuffix,showticksuffix:T.showticksuffix,separatethousands:T.separatethousands,exponentformat:T.exponentformat,minexponent:T.minexponent,showexponent:T.showexponent,title:{text:{valType:"string"},font:c({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:c({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(g,ne,ae){ne.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plot_api/plot_template"),M=g("../../plots/cartesian/tick_value_defaults"),A=g("../../plots/cartesian/tick_mark_defaults"),e=g("../../plots/cartesian/tick_label_defaults"),a=g("../../plots/cartesian/prefix_suffix_defaults"),n=g("./attributes");ne.exports=function(r,f,o){var i=c.newContainer(f,"colorbar"),p=r.colorbar||{};function d(S,k){return T.coerce(p,i,n,S,k)}var y=o.margin||{t:0,b:0,l:0,r:0},v=o.width-y.l-y.r,x=o.height-y.t-y.b,l=d("orientation"),_=l==="v",s=d("thicknessmode");d("thickness",s==="fraction"?30/(_?v:x):30);var w=d("lenmode");d("len",w==="fraction"?1:_?x:v),d("x",_?1.02:.5),d("xanchor",_?"left":"center"),d("xpad"),d("y",_?.5:1.02),d("yanchor",_?"middle":"bottom"),d("ypad"),T.noneOrAll(p,i,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor");var b=T.coerce(p,i,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:_?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");d("ticklabeloverflow",b.indexOf("inside")!==-1?"hide past domain":"hide past div"),M(p,i,d,"linear");var h=o.font,m={outerTicks:!1,font:h};b.indexOf("inside")!==-1&&(m.bgColor="black"),a(p,i,d,"linear",m),e(p,i,d,"linear",m),A(p,i,d,"linear",m),d("title.text",o._dfltTitle.colorbar);var u=i.tickfont,L=T.extendFlat({},u,{color:h.color,size:T.bigFont(u.size)});T.coerceFont(d,"title.font",L),d("title.side",_?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("tinycolor2"),M=g("../../plots/plots"),A=g("../../registry"),e=g("../../plots/cartesian/axes"),a=g("../dragelement"),n=g("../../lib"),t=n.strTranslate,r=g("../../lib/extend").extendFlat,f=g("../../lib/setcursor"),o=g("../drawing"),i=g("../color"),p=g("../titles"),d=g("../../lib/svg_text_utils"),y=g("../colorscale/helpers").flipScale,v=g("../../plots/cartesian/axis_defaults"),x=g("../../plots/cartesian/position_defaults"),l=g("../../plots/cartesian/layout_attributes"),_=g("../../constants/alignment"),s=_.LINE_SPACING,w=_.FROM_TL,b=_.FROM_BR,h=g("./constants").cn;function m(z){var I=z._fullLayout,D=I._infolayer.selectAll("g."+h.colorbar).data(u(z),function(R){return R._id});D.enter().append("g").attr("class",function(R){return R._id}).classed(h.colorbar,!0),D.each(function(R){var B=T.select(this);n.ensureSingle(B,"rect",h.cbbg),n.ensureSingle(B,"g",h.cbfills),n.ensureSingle(B,"g",h.cblines),n.ensureSingle(B,"g",h.cbaxis,function(V){V.classed(h.crisp,!0)}),n.ensureSingle(B,"g",h.cbtitleunshift,function(V){V.append("g").classed(h.cbtitle,!0)}),n.ensureSingle(B,"rect",h.cboutline);var F=L(B,R,z);F&&F.then&&(z._promises||[]).push(F),z._context.edits.colorbarPosition&&S(B,R,z)}),D.exit().each(function(R){M.autoMargin(z,R._id)}).remove(),D.order()}function u(z){var I=z._fullLayout,D=z.calcdata,R=[],B,F,V,Y;function K(W){return r(W,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function J(){typeof Y.calc=="function"?Y.calc(z,V,B):(B._fillgradient=F.reversescale?y(F.colorscale):F.colorscale,B._zrange=[F[Y.min],F[Y.max]])}for(var G=0;G<D.length;G++){var Z=D[G];V=Z[0].trace;var re=V._module.colorbar;if(V.visible===!0&&re)for(var se=Array.isArray(re),oe=se?re:[re],N=0;N<oe.length;N++){Y=oe[N];var U=Y.container;F=U?V[U]:V,F&&F.showscale&&(B=K(F.colorbar),B._id="cb"+V.uid+(se&&U?"-"+U:""),B._traceIndex=V.index,B._propPrefix=(U?U+".":"")+"colorbar.",B._meta=V._meta,J(),R.push(B))}}for(var q in I._colorAxes)if(F=I[q],F.showscale){var Q=I._colorAxes[q];B=K(F.colorbar),B._id="cb"+q,B._propPrefix=q+".colorbar.",B._meta=I._meta,Y={min:"cmin",max:"cmax"},Q[0]!=="heatmap"&&(V=Q[1],Y.calc=V._module.colorbar.calc),J(),R.push(B)}return R}function L(z,I,D){var R=I.orientation==="v",B=I.len,F=I.lenmode,V=I.thickness,Y=I.thicknessmode,K=I.outlinewidth,J=I.borderwidth,G=I.bgcolor,Z=I.xanchor,re=I.yanchor,se=I.xpad,oe=I.ypad,N=I.x,U=R?I.y:1-I.y,q=D._fullLayout,Q=q._size,W=I._fillcolor,X=I._line,te=I.title,ee=te.side,ie=I._zrange||T.extent((typeof W=="function"?W:X.color).domain()),le=typeof X.color=="function"?X.color:function(){return X.color},ye=typeof W=="function"?W:function(){return W},ue=I._levels,pe=k(D,I,ie),ge=pe.fill,Te=pe.line,_e=Math.round(V*(Y==="fraction"?R?Q.w:Q.h:1)),De=_e/(R?Q.w:Q.h),Oe=Math.round(B*(F==="fraction"?R?Q.h:Q.w:1)),Ue=Oe/(R?Q.h:Q.w),xe=Math.round(R?N*Q.w+se:U*Q.h+oe),Pe={center:.5,right:1}[Z]||0,Ve={top:1,middle:.5}[re]||0,Qe=R?N-Pe*De:U-Ve*De,Fe=R?U-Ve*Ue:N-Pe*Ue,Le=Math.round(R?Q.h*(1-Fe):Q.w*Fe);I._lenFrac=Ue,I._thickFrac=De,I._uFrac=Qe,I._vFrac=Fe;var Ne=I._axis=P(D,I,ie);Ne.position=De+(R?N+se/Q.w:U+oe/Q.h);var dt=["top","bottom"].indexOf(ee)!==-1;if(R&&dt&&(Ne.title.side=ee,Ne.titlex=N+se/Q.w,Ne.titley=Fe+(te.side==="top"?Ue-oe/Q.h:oe/Q.h)),!R&&!dt&&(Ne.title.side=ee,Ne.titley=U+oe/Q.h,Ne.titlex=Fe+se/Q.w),X.color&&I.tickmode==="auto"){Ne.tickmode="linear",Ne.tick0=ue.start;var Dt=ue.size,Xt=n.constrain(Oe/50,4,15)+1,Tt=(ie[1]-ie[0])/((I.nticks||Xt)*Dt);if(Tt>1){var zt=Math.pow(10,Math.floor(Math.log(Tt)/Math.LN10));Dt*=zt*n.roundUp(Tt/zt,[2,5,10]),(Math.abs(ue.start)/ue.size+1e-6)%1<2e-6&&(Ne.tick0=0)}Ne.dtick=Dt}Ne.domain=R?[Fe+oe/Q.h,Fe+Ue-oe/Q.h]:[Fe+se/Q.w,Fe+Ue-se/Q.w],Ne.setScale(),z.attr("transform",t(Math.round(Q.l),Math.round(Q.t)));var Ut=z.select("."+h.cbtitleunshift).attr("transform",t(-Math.round(Q.l),-Math.round(Q.t))),Et=Ne.ticklabelposition,Mt=Ne.title.font.size,rt=z.select("."+h.cbaxis),ct,Ze=0,ke=0;function Ge(Ot,Jt){var Bt={propContainer:Ne,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:q._dfltTitle.colorbar,containerGroup:z.select("."+h.cbtitle)},qt=Ot.charAt(0)==="h"?Ot.substr(1):"h"+Ot;z.selectAll("."+qt+",."+qt+"-math-group").remove(),p.draw(D,Ot,r(Bt,Jt||{}))}function Je(){if(R&&dt||!R&&!dt){var Ot,Jt;ee==="top"&&(Ot=se+Q.l+Q.w*N,Jt=oe+Q.t+Q.h*(1-Fe-Ue)+3+Mt*.75),ee==="bottom"&&(Ot=se+Q.l+Q.w*N,Jt=oe+Q.t+Q.h*(1-Fe)-3-Mt*.25),ee==="right"&&(Jt=oe+Q.t+Q.h*U+3+Mt*.75,Ot=se+Q.l+Q.w*Fe),Ge(Ne._id+"title",{attributes:{x:Ot,y:Jt,"text-anchor":R?"start":"middle"}})}}function it(){if(R&&!dt||!R&&dt){var Ot=Ne.position||0,Jt=Ne._offset+Ne._length/2,Bt,qt;if(ee==="right")qt=Jt,Bt=Q.l+Q.w*Ot+10+Mt*(Ne.showticklabels?1:.5);else if(Bt=Jt,ee==="bottom"&&(qt=Q.t+Q.h*Ot+10+(Et.indexOf("inside")===-1?Ne.tickfont.size:0)+(Ne.ticks!=="intside"&&I.ticklen||0)),ee==="top"){var rr=te.text.split("<br>").length;qt=Q.t+Q.h*Ot+10-_e-s*Mt*rr}Ge((R?"h":"v")+Ne._id+"title",{avoid:{selection:T.select(D).selectAll("g."+Ne._id+"tick"),side:ee,offsetTop:R?0:Q.t,offsetLeft:R?Q.l:0,maxShift:R?q.width:q.height},attributes:{x:Bt,y:qt,"text-anchor":"middle"},transform:{rotate:R?-90:0,offset:0}})}}function Pt(){if(!R&&!dt||R&&dt){var Ot=z.select("."+h.cbtitle),Jt=Ot.select("text"),Bt=[-K/2,K/2],qt=Ot.select(".h"+Ne._id+"title-math-group").node(),rr=15.6;Jt.node()&&(rr=parseInt(Jt.node().style.fontSize,10)*s);var er;if(qt?(er=o.bBox(qt),ke=er.width,Ze=er.height,Ze>rr&&(Bt[1]-=(Ze-rr)/2)):Jt.node()&&!Jt.classed(h.jsPlaceholder)&&(er=o.bBox(Jt.node()),ke=er.width,Ze=er.height),R){if(Ze){if(Ze+=5,ee==="top")Ne.domain[1]-=Ze/Q.h,Bt[1]*=-1;else{Ne.domain[0]+=Ze/Q.h;var pr=d.lineCount(Jt);Bt[1]+=(1-pr)*rr}Ot.attr("transform",t(Bt[0],Bt[1])),Ne.setScale()}}else ke&&(ee==="right"&&(Ne.domain[0]+=(ke+Mt/2)/Q.w),Ot.attr("transform",t(Bt[0],Bt[1])),Ne.setScale())}z.selectAll("."+h.cbfills+",."+h.cblines).attr("transform",R?t(0,Math.round(Q.h*(1-Ne.domain[1]))):t(Math.round(Q.w*Ne.domain[0]),0)),rt.attr("transform",R?t(0,Math.round(-Q.t)):t(Math.round(-Q.l),0));var Xr=z.select("."+h.cbfills).selectAll("rect."+h.cbfill).attr("style","").data(ge);Xr.enter().append("rect").classed(h.cbfill,!0).style("stroke","none"),Xr.exit().remove();var hn=ie.map(Ne.c2p).map(Math.round).sort(function(Ht,_r){return Ht-_r});Xr.each(function(Ht,_r){var tt=[_r===0?ie[0]:(ge[_r]+ge[_r-1])/2,_r===ge.length-1?ie[1]:(ge[_r]+ge[_r+1])/2].map(Ne.c2p).map(Math.round);R&&(tt[1]=n.constrain(tt[1]+(tt[1]>tt[0])?1:-1,hn[0],hn[1]));var je=T.select(this).attr(R?"x":"y",xe).attr(R?"y":"x",T.min(tt)).attr(R?"width":"height",Math.max(_e,2)).attr(R?"height":"width",Math.max(T.max(tt)-T.min(tt),2));if(I._fillgradient)o.gradient(je,D,I._id,R?"vertical":"horizontalreversed",I._fillgradient,"fill");else{var st=ye(Ht).replace("e-","");je.attr("fill",c(st).toHexString())}});var $r=z.select("."+h.cblines).selectAll("path."+h.cbline).data(X.color&&X.width?Te:[]);$r.enter().append("path").classed(h.cbline,!0),$r.exit().remove(),$r.each(function(Ht){var _r=xe,tt=Math.round(Ne.c2p(Ht))+X.width/2%1;T.select(this).attr("d","M"+(R?_r+","+tt:tt+","+_r)+(R?"h":"v")+_e).call(o.lineGroupStyle,X.width,le(Ht),X.dash)}),rt.selectAll("g."+Ne._id+"tick,path").remove();var nt=xe+_e+(K||0)/2-(I.ticks==="outside"?1:0),Gt=e.calcTicks(Ne),Kt=e.getTickSigns(Ne)[2];return e.drawTicks(D,Ne,{vals:Ne.ticks==="inside"?e.clipEnds(Ne,Gt):Gt,layer:rt,path:e.makeTickPath(Ne,nt,Kt),transFn:e.makeTransTickFn(Ne)}),e.drawLabels(D,Ne,{vals:Gt,layer:rt,transFn:e.makeTransTickLabelFn(Ne),labelFns:e.makeLabelFns(Ne,nt)})}function At(){var Ot,Jt=_e+K/2;Et.indexOf("inside")===-1&&(Ot=o.bBox(rt.node()),Jt+=R?Ot.width:Ot.height),ct=Ut.select("text");var Bt=0,qt=R&&ee==="top",rr=!R&&ee==="right",er=0;if(ct.node()&&!ct.classed(h.jsPlaceholder)){var pr,Xr=Ut.select(".h"+Ne._id+"title-math-group").node();Xr&&(R&&dt||!R&&!dt)?(Ot=o.bBox(Xr),Bt=Ot.width,pr=Ot.height):(Ot=o.bBox(Ut.node()),Bt=Ot.right-Q.l-(R?xe:Le),pr=Ot.bottom-Q.t-(R?Le:xe),!R&&ee==="top"&&(Jt+=Ot.height,er=Ot.height)),rr&&(ct.attr("transform",t(Bt/2+Mt/2,0)),Bt*=2),Jt=Math.max(Jt,R?Bt:pr)}var hn=(R?se:oe)*2+Jt+J+K/2,$r=0;!R&&te.text&&re==="bottom"&&U<=0&&($r=hn/2,hn+=$r,er+=$r),q._hColorbarMoveTitle=$r,q._hColorbarMoveCBTitle=er;var nt=J+K;z.select("."+h.cbbg).attr("x",(R?xe:Le)-nt/2-(R?se:0)).attr("y",(R?Le:xe)-(R?Oe:oe+er-$r)).attr(R?"width":"height",Math.max(hn-$r,2)).attr(R?"height":"width",Math.max(Oe+nt,2)).call(i.fill,G).call(i.stroke,I.bordercolor).style("stroke-width",J);var Gt=rr?Math.max(Bt-10,0):0;if(z.selectAll("."+h.cboutline).attr("x",(R?xe:Le+se)+Gt).attr("y",(R?Le+oe-Oe:xe)+(qt?Ze:0)).attr(R?"width":"height",Math.max(_e,2)).attr(R?"height":"width",Math.max(Oe-(R?2*oe+Ze:2*se+Gt),2)).call(i.stroke,I.outlinecolor).style({fill:"none","stroke-width":K}),z.attr("transform",t(Q.l-(R?Pe*hn:0),Q.t-(R?0:(1-Ve)*hn-er))),!R&&(J||c(G).getAlpha()&&!c.equals(q.paper_bgcolor,G))){var Kt=rt.selectAll("text"),Ht=Kt[0].length,_r=z.select("."+h.cbbg).node(),tt=o.bBox(_r),je=o.getTranslate(z),st=2;Kt.each(function(pt,vt){var Ct=0,St=Ht-1;if(vt===Ct||vt===St){var Nt=o.bBox(this),ir=o.getTranslate(this),lr;if(vt===St){var Yr=Nt.right+ir.x,Pr=tt.right+je.x+Le-J-st+N;lr=Pr-Yr,lr>0&&(lr=0)}else if(vt===Ct){var wr=Nt.left+ir.x,Jr=tt.left+je.x+Le+J+st;lr=Jr-wr,lr<0&&(lr=0)}lr&&(Ht<3?this.setAttribute("transform","translate("+lr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var ft={},Me=w[Z],Se=b[Z],Ke=w[re],Xe=b[re],ot=hn-_e;R?(F==="pixels"?(ft.y=U,ft.t=Oe*Ke,ft.b=Oe*Xe):(ft.t=ft.b=0,ft.yt=U+B*Ke,ft.yb=U-B*Xe),Y==="pixels"?(ft.x=N,ft.l=hn*Me,ft.r=hn*Se):(ft.l=ot*Me,ft.r=ot*Se,ft.xl=N-V*Me,ft.xr=N+V*Se)):(F==="pixels"?(ft.x=N,ft.l=Oe*Me,ft.r=Oe*Se):(ft.l=ft.r=0,ft.xl=N+B*Me,ft.xr=N-B*Se),Y==="pixels"?(ft.y=1-U,ft.t=hn*Ke,ft.b=hn*Xe):(ft.t=ot*Ke,ft.b=ot*Xe,ft.yt=U-V*Ke,ft.yb=U+V*Xe)),M.autoMargin(D,I._id,ft)}return n.syncOrAsync([M.previousPromises,Je,Pt,it,M.previousPromises,At],D)}function S(z,I,D){var R=I.orientation==="v",B=D._fullLayout,F=B._size,V,Y,K;a.init({element:z.node(),gd:D,prepFn:function(){V=z.attr("transform"),f(z)},moveFn:function(J,G){z.attr("transform",V+t(J,G)),Y=a.align((R?I._uFrac:I._vFrac)+J/F.w,R?I._thickFrac:I._lenFrac,0,1,I.xanchor),K=a.align((R?I._vFrac:1-I._uFrac)-G/F.h,R?I._lenFrac:I._thickFrac,0,1,I.yanchor);var Z=a.getCursor(Y,K,I.xanchor,I.yanchor);f(z,Z)},doneFn:function(){if(f(z),Y!==void 0&&K!==void 0){var J={};J[I._propPrefix+"x"]=Y,J[I._propPrefix+"y"]=K,I._traceIndex!==void 0?A.call("_guiRestyle",D,J,I._traceIndex):A.call("_guiRelayout",D,J)}}})}function k(z,I,D){var R=I._levels,B=[],F=[],V,Y,K=R.end+R.size/100,J=R.size,G=1.001*D[0]-.001*D[1],Z=1.001*D[1]-.001*D[0];for(Y=0;Y<1e5&&(V=R.start+Y*J,!(J>0?V>=K:V<=K));Y++)V>G&&V<Z&&B.push(V);if(I._fillgradient)F=[0];else if(typeof I._fillcolor=="function"){var re=I._filllevels;if(re)for(K=re.end+re.size/100,J=re.size,Y=0;Y<1e5&&(V=re.start+Y*J,!(J>0?V>=K:V<=K));Y++)V>D[0]&&V<D[1]&&F.push(V);else F=B.map(function(se){return se-R.size/2}),F.push(F[F.length-1]+R.size)}else I._fillcolor&&typeof I._fillcolor=="string"&&(F=[0]);return R.size<0&&(B.reverse(),F.reverse()),{line:B,fill:F}}function P(z,I,D){var R=z._fullLayout,B=I.orientation==="v",F={type:"linear",range:D,tickmode:I.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,showticklabels:I.showticklabels,ticklabelposition:I.ticklabelposition,ticklabeloverflow:I.ticklabeloverflow,ticklabelstep:I.ticklabelstep,tickfont:I.tickfont,tickangle:I.tickangle,tickformat:I.tickformat,exponentformat:I.exponentformat,minexponent:I.minexponent,separatethousands:I.separatethousands,showexponent:I.showexponent,showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,title:I.title,showline:!0,anchor:"free",side:B?"right":"bottom",position:1},V=B?"y":"x",Y={type:"linear",_id:V+I._id},K={letter:V,font:R.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:R.calendar};function J(G,Z){return n.coerce(F,Y,l,G,Z)}return v(F,Y,J,K,R),x(F,Y,J,K),Y}ne.exports={draw:m}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(g,ne,ae){var T=g("../../lib");ne.exports=function(M){return T.isPlainObject(M.colorbar)}},{"../../lib":503}],372:[function(g,ne,ae){ne.exports={moduleType:"component",name:"colorbar",attributes:g("./attributes"),supplyDefaults:g("./defaults"),draw:g("./draw").draw,hasColorbar:g("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(g,ne,ae){var T=g("../colorbar/attributes"),c=g("../../lib/regex").counter,M=g("../../lib/sort_object_keys"),A=g("./scales.js").scales;M(A),ne.exports=function(a,n){a=a||"",n=n||{};var t=n.cLetter||"c";"onlyIfNumerical"in n?n.onlyIfNumerical:Boolean(a);var r="noScale"in n?n.noScale:a==="marker.line",f="showScaleDflt"in n?n.showScaleDflt:t==="z",o=typeof n.colorscaleDflt=="string"?A[n.colorscaleDflt]:null,i=n.editTypeOverride||"",p;"colorAttr"in n?p=n.colorAttr:p={z:"z",c:"color"}[t];var d=t+"auto",y=t+"min",v=t+"max",x=t+"mid",l={};l[y]=l[v]=void 0;var _={};_[d]=!1;var s={};return p==="color"&&(s.color={valType:"color",arrayOk:!0,editType:i||"style"},n.anim&&(s.color.anim=!0)),s[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:l},s[y]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:_},s[v]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:_},s[x]={valType:"number",dflt:null,editType:"calc",impliedEdits:l},s.colorscale={valType:"colorscale",editType:"calc",dflt:o,impliedEdits:{autocolorscale:!1}},s.autocolorscale={valType:"boolean",dflt:n.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},s.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(s.showscale={valType:"boolean",dflt:f,editType:"calc"},s.colorbar=T),n.noColorAxis||(s.coloraxis={valType:"subplotid",regex:c("coloraxis"),dflt:null,editType:"calc"}),s}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib"),M=g("./helpers").extractOpts;ne.exports=function(e,a,n){var t=e._fullLayout,r=n.vals,f=n.containerStr,o=f?c.nestedProperty(a,f).get():a,i=M(o),p=i.auto!==!1,d=i.min,y=i.max,v=i.mid,x=function(){return c.aggNums(Math.min,null,r)},l=function(){return c.aggNums(Math.max,null,r)};if(d===void 0?d=x():p&&(o._colorAx&&T(d)?d=Math.min(d,x()):d=x()),y===void 0?y=l():p&&(o._colorAx&&T(y)?y=Math.max(y,l()):y=l()),p&&v!==void 0&&(y-v>v-d?d=v-(y-v):y-v<v-d&&(y=v+(v-d))),d===y&&(d-=.5,y+=.5),i._sync("min",d),i._sync("max",y),i.autocolorscale){var _;d*y<0?_=t.colorscale.diverging:d>=0?_=t.colorscale.sequential:_=t.colorscale.sequentialminus,i._sync("colorscale",_)}}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(g,ne,ae){var T=g("../../lib"),c=g("./helpers").hasColorscale,M=g("./helpers").extractOpts;ne.exports=function(e,a){function n(d,y){var v=d["_"+y];v!==void 0&&(d[y]=v)}function t(d,y){var v=y.container?T.nestedProperty(d,y.container).get():d;if(v)if(v.coloraxis)v._colorAx=a[v.coloraxis];else{var x=M(v),l=x.auto;(l||x.min===void 0)&&n(v,y.min),(l||x.max===void 0)&&n(v,y.max),x.autocolorscale&&n(v,"colorscale")}}for(var r=0;r<e.length;r++){var f=e[r],o=f._module.colorbar;if(o)if(Array.isArray(o))for(var i=0;i<o.length;i++)t(f,o[i]);else t(f,o);c(f,"marker.line")&&t(f,{container:"marker.line",min:"cmin",max:"cmax"})}for(var p in a._colorAxes)t(a[p],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib"),M=g("../colorbar/has_colorbar"),A=g("../colorbar/defaults"),e=g("./scales").isValid,a=g("../../registry").traceIs;function n(t,r){var f=r.slice(0,r.length-1);return r?c.nestedProperty(t,f).get()||{}:t}ne.exports=function t(r,f,o,i,p){var d=p.prefix,y=p.cLetter,v="_module"in f,x=n(r,d),l=n(f,d),_=n(f._template||{},d)||{},s=function(){return delete r.coloraxis,delete f.coloraxis,t(r,f,o,i,p)};if(v){var w=o._colorAxes||{},b=i(d+"coloraxis");if(b){var h=a(f,"contour")&&c.nestedProperty(f,"contours.coloring").get()||"heatmap",m=w[b];m?(m[2].push(s),m[0]!==h&&(m[0]=!1,c.warn(["Ignoring coloraxis:",b,"setting","as it is linked to incompatible colorscales."].join(" ")))):w[b]=[h,f,[s]];return}}var u=x[y+"min"],L=x[y+"max"],S=T(u)&&T(L)&&u<L,k=i(d+y+"auto",!S);k?i(d+y+"mid"):(i(d+y+"min"),i(d+y+"max"));var P=x.colorscale,z=_.colorscale,I;if(P!==void 0&&(I=!e(P)),z!==void 0&&(I=!e(z)),i(d+"autocolorscale",I),i(d+"colorscale"),i(d+"reversescale"),d!=="marker.line."){var D;d&&v&&(D=M(x));var R=i(d+"showscale",D);R&&(d&&_&&(l._template=_),A(x,l,o))}}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("tinycolor2"),M=g("fast-isnumeric"),A=g("../../lib"),e=g("../color"),a=g("./scales").isValid;function n(v,x,l){var _=x?A.nestedProperty(v,x).get()||{}:v,s=_[l||"color"],w=!1;if(A.isArrayOrTypedArray(s)){for(var b=0;b<s.length;b++)if(M(s[b])){w=!0;break}}return A.isPlainObject(_)&&(w||_.showscale===!0||M(_.cmin)&&M(_.cmax)||a(_.colorscale)||A.isPlainObject(_.colorbar))}var t=["showscale","autocolorscale","colorscale","reversescale","colorbar"],r=["min","max","mid","auto"];function f(v){var x=v._colorAx,l=x||v,_={},s,w,b;for(w=0;w<t.length;w++)b=t[w],_[b]=l[b];if(x)for(s="c",w=0;w<r.length;w++)b=r[w],_[b]=l["c"+b];else{var h;for(w=0;w<r.length;w++){if(b=r[w],h="c"+b,h in l){_[b]=l[h];continue}h="z"+b,h in l&&(_[b]=l[h])}s=h.charAt(0)}return _._sync=function(m,u){var L=r.indexOf(m)!==-1?s+m:m;l[L]=l["_"+L]=u},_}function o(v){for(var x=f(v),l=x.min,_=x.max,s=x.reversescale?i(x.colorscale):x.colorscale,w=s.length,b=new Array(w),h=new Array(w),m=0;m<w;m++){var u=s[m];b[m]=l+u[0]*(_-l),h[m]=u[1]}return{domain:b,range:h}}function i(v){for(var x=v.length,l=new Array(x),_=x-1,s=0;_>=0;_--,s++){var w=v[_];l[s]=[1-w[0],w[1]]}return l}function p(v,x){x=x||{};for(var l=v.domain,_=v.range,s=_.length,w=new Array(s),b=0;b<s;b++){var h=c(_[b]).toRgb();w[b]=[h.r,h.g,h.b,h.a]}var m=T.scale.linear().domain(l).range(w).clamp(!0),u=x.noNumericCheck,L=x.returnArray,S;return u&&L?S=m:u?S=function(k){return y(m(k))}:L?S=function(k){return M(k)?m(k):c(k).isValid()?k:e.defaultLine}:S=function(k){return M(k)?y(m(k)):c(k).isValid()?k:e.defaultLine},S.domain=m.domain,S.range=function(){return _},S}function d(v,x){return p(o(v),x)}function y(v){var x={r:v[0],g:v[1],b:v[2],a:v[3]};return c(x).toRgbString()}ne.exports={hasColorscale:n,extractOpts:f,extractScale:o,flipScale:i,makeColorScaleFunc:p,makeColorScaleFuncFromTrace:d}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(g,ne,ae){var T=g("./scales"),c=g("./helpers");ne.exports={moduleType:"component",name:"colorscale",attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyLayoutDefaults:g("./layout_defaults"),handleDefaults:g("./defaults"),crossTraceDefaults:g("./cross_trace_defaults"),calc:g("./calc"),scales:T.scales,defaultScale:T.defaultScale,getScale:T.get,isValidScale:T.isValid,hasColorscale:c.hasColorscale,extractOpts:c.extractOpts,extractScale:c.extractScale,flipScale:c.flipScale,makeColorScaleFunc:c.makeColorScaleFunc,makeColorScaleFuncFromTrace:c.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(g,ne,ae){var T=g("../../lib/extend").extendFlat,c=g("./attributes"),M=g("./scales").scales;ne.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:M.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:M.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:M.RdBu,editType:"calc"}},coloraxis:T({_isSubplotObj:!0,editType:"calc"},c("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plot_api/plot_template"),M=g("./layout_attributes"),A=g("./defaults");ne.exports=function(a,n){function t(v,x){return T.coerce(a,n,M,v,x)}t("colorscale.sequential"),t("colorscale.sequentialminus"),t("colorscale.diverging");var r=n._colorAxes,f,o;function i(v,x){return T.coerce(f,o,M.coloraxis,v,x)}for(var p in r){var d=r[p];if(d[0])f=a[p]||{},o=c.newContainer(n,p,"coloraxis"),o._name=p,A(f,o,n,i,{prefix:"",cLetter:"c"});else{for(var y=0;y<d[2].length;y++)d[2][y]();delete n._colorAxes[p]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(g,ne,ae){var T=g("tinycolor2"),c={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},M=c.RdBu;function A(n,t){if(t||(t=M),!n)return t;function r(){try{n=c[n]||JSON.parse(n)}catch{n=t}}return typeof n=="string"&&(r(),typeof n=="string"&&r()),e(n)?n:t}function e(n){var t=0;if(!Array.isArray(n)||n.length<2||!n[0]||!n[n.length-1]||+n[0][0]!=0||+n[n.length-1][0]!=1)return!1;for(var r=0;r<n.length;r++){var f=n[r];if(f.length!==2||+f[0]<t||!T(f[1]).isValid())return!1;t=+f[0]}return!0}function a(n){return c[n]!==void 0?!0:e(n)}ne.exports={scales:c,defaultScale:M,get:A,isValid:a}},{tinycolor2:312}],382:[function(g,ne,ae){ne.exports=function(c,M,A,e,a){var n=(c-A)/(e-A),t=n+M/(e-A),r=(n+t)/2;return a==="left"||a==="bottom"?n:a==="center"||a==="middle"?r:a==="right"||a==="top"?t:n<2/3-r?n:t>4/3-r?t:r}},{}],383:[function(g,ne,ae){var T=g("../../lib"),c=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ne.exports=function(A,e,a,n){return a==="left"?A=0:a==="center"?A=1:a==="right"?A=2:A=T.constrain(Math.floor(A*3),0,2),n==="bottom"?e=0:n==="middle"?e=1:n==="top"?e=2:e=T.constrain(Math.floor(e*3),0,2),c[e][A]}},{"../../lib":503}],384:[function(g,ne,ae){ae.selectMode=function(T){return T==="lasso"||T==="select"},ae.drawMode=function(T){return T==="drawclosedpath"||T==="drawopenpath"||T==="drawline"||T==="drawrect"||T==="drawcircle"},ae.openMode=function(T){return T==="drawline"||T==="drawopenpath"},ae.rectMode=function(T){return T==="select"||T==="drawline"||T==="drawrect"||T==="drawcircle"},ae.freeMode=function(T){return T==="lasso"||T==="drawclosedpath"||T==="drawopenpath"},ae.selectingOrDrawing=function(T){return ae.freeMode(T)||ae.rectMode(T)}},{}],385:[function(g,ne,ae){var T=g("mouse-event-offset"),c=g("has-hover"),M=g("has-passive-events"),A=g("../../lib").removeElement,e=g("../../plots/cartesian/constants"),a=ne.exports={};a.align=g("./align"),a.getCursor=g("./cursor");var n=g("./unhover");a.unhover=n.wrapped,a.unhoverRaw=n.raw,a.init=function(o){var i=o.gd,p=1,d=i._context.doubleClickDelay,y=o.element,v,x,l,_,s,w,b,h;i._mouseDownTime||(i._mouseDownTime=0),y.style.pointerEvents="all",y.onmousedown=L,M?(y._ontouchstart&&y.removeEventListener("touchstart",y._ontouchstart),y._ontouchstart=L,y.addEventListener("touchstart",L,{passive:!1})):y.ontouchstart=L;function m(P,z,I){return Math.abs(P)<I&&(P=0),Math.abs(z)<I&&(z=0),[P,z]}var u=o.clampFn||m;function L(P){i._dragged=!1,i._dragging=!0;var z=r(P);v=z[0],x=z[1],b=P.target,w=P,h=P.buttons===2||P.ctrlKey,typeof P.clientX=="undefined"&&typeof P.clientY=="undefined"&&(P.clientX=v,P.clientY=x),l=new Date().getTime(),l-i._mouseDownTime<d?p+=1:(p=1,i._mouseDownTime=l),o.prepFn&&o.prepFn(P,v,x),c&&!h?(s=t(),s.style.cursor=window.getComputedStyle(y).cursor):c||(s=document,_=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(y).cursor),document.addEventListener("mouseup",k),document.addEventListener("touchend",k),o.dragmode!==!1&&(P.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(P){P.preventDefault();var z=r(P),I=o.minDrag||e.MINDRAG,D=u(z[0]-v,z[1]-x,I),R=D[0],B=D[1];(R||B)&&(i._dragged=!0,a.unhover(i,P)),i._dragged&&o.moveFn&&!h&&(i._dragdata={element:y,dx:R,dy:B},o.moveFn(R,B))}function k(P){if(delete i._dragdata,o.dragmode!==!1&&(P.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k),c?A(s):_&&(s.documentElement.style.cursor=_,_=null),!i._dragging){i._dragged=!1;return}if(i._dragging=!1,new Date().getTime()-i._mouseDownTime>d&&(p=Math.max(p-1,1)),i._dragged)o.doneFn&&o.doneFn();else if(o.clickFn&&o.clickFn(p,w),!h){var z;try{z=new MouseEvent("click",P)}catch{var I=r(P);z=document.createEvent("MouseEvents"),z.initMouseEvent("click",P.bubbles,P.cancelable,P.view,P.detail,P.screenX,P.screenY,I[0],I[1],P.ctrlKey,P.altKey,P.shiftKey,P.metaKey,P.button,P.relatedTarget)}b.dispatchEvent(z)}i._dragging=!1,i._dragged=!1}};function t(){var f=document.createElement("div");f.className="dragcover";var o=f.style;return o.position="fixed",o.left=0,o.right=0,o.top=0,o.bottom=0,o.zIndex=999999999,o.background="none",document.body.appendChild(f),f}a.coverSlip=t;function r(f){return T(f.changedTouches?f.changedTouches[0]:f,document.body)}},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(g,ne,ae){var T=g("../../lib/events"),c=g("../../lib/throttle"),M=g("../../lib/dom").getGraphDiv,A=g("../fx/constants"),e=ne.exports={};e.wrapped=function(a,n,t){a=M(a),a._fullLayout&&c.clear(a._fullLayout._uid+A.HOVERID),e.raw(a,n,t)},e.raw=function(n,t){var r=n._fullLayout,f=n._hoverdata;t||(t={}),!(t.target&&!n._dragged&&T.triggerHandler(n,"plotly_beforehover",t)===!1)&&(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),n._hoverdata=void 0,t.target&&f&&n.emit("plotly_unhover",{event:t,points:f}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(g,ne,ae){ae.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},ae.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=c.numberFormat,A=g("fast-isnumeric"),e=g("tinycolor2"),a=g("../../registry"),n=g("../color"),t=g("../colorscale"),r=c.strTranslate,f=g("../../lib/svg_text_utils"),o=g("../../constants/xmlns_namespaces"),i=g("../../constants/alignment"),p=i.LINE_SPACING,d=g("../../constants/interactions").DESELECTDIM,y=g("../../traces/scatter/subtypes"),v=g("../../traces/scatter/make_bubble_size_func"),x=g("../../components/fx/helpers").appendArrayPointValue,l=ne.exports={};l.font=function(Z,re,se,oe){c.isPlainObject(re)&&(oe=re.color,se=re.size,re=re.family),re&&Z.style("font-family",re),se+1&&Z.style("font-size",se+"px"),oe&&Z.call(n.fill,oe)},l.setPosition=function(Z,re,se){Z.attr("x",re).attr("y",se)},l.setSize=function(Z,re,se){Z.attr("width",re).attr("height",se)},l.setRect=function(Z,re,se,oe,N){Z.call(l.setPosition,re,se).call(l.setSize,oe,N)},l.translatePoint=function(Z,re,se,oe){var N=se.c2p(Z.x),U=oe.c2p(Z.y);if(A(N)&&A(U)&&re.node())re.node().nodeName==="text"?re.attr("x",N).attr("y",U):re.attr("transform",r(N,U));else return!1;return!0},l.translatePoints=function(Z,re,se){Z.each(function(oe){var N=T.select(this);l.translatePoint(oe,N,re,se)})},l.hideOutsideRangePoint=function(Z,re,se,oe,N,U){re.attr("display",se.isPtWithinRange(Z,N)&&oe.isPtWithinRange(Z,U)?null:"none")},l.hideOutsideRangePoints=function(Z,re){if(!!re._hasClipOnAxisFalse){var se=re.xaxis,oe=re.yaxis;Z.each(function(N){var U=N[0].trace,q=U.xcalendar,Q=U.ycalendar,W=a.traceIs(U,"bar-like")?".bartext":".point,.textpoint";Z.selectAll(W).each(function(X){l.hideOutsideRangePoint(X,T.select(this),se,oe,q,Q)})})}},l.crispRound=function(Z,re,se){return!re||!A(re)?se||0:Z._context.staticPlot?re:re<1?1:Math.round(re)},l.singleLineStyle=function(Z,re,se,oe,N){re.style("fill","none");var U=(((Z||[])[0]||{}).trace||{}).line||{},q=se||U.width||0,Q=N||U.dash||"";n.stroke(re,oe||U.color),l.dashLine(re,Q,q)},l.lineGroupStyle=function(Z,re,se,oe){Z.style("fill","none").each(function(N){var U=(((N||[])[0]||{}).trace||{}).line||{},q=re||U.width||0,Q=oe||U.dash||"";T.select(this).call(n.stroke,se||U.color).call(l.dashLine,Q,q)})},l.dashLine=function(Z,re,se){se=+se||0,re=l.dashStyle(re,se),Z.style({"stroke-dasharray":re,"stroke-width":se+"px"})},l.dashStyle=function(Z,re){re=+re||1;var se=Math.max(re,3);return Z==="solid"?Z="":Z==="dot"?Z=se+"px,"+se+"px":Z==="dash"?Z=3*se+"px,"+3*se+"px":Z==="longdash"?Z=5*se+"px,"+5*se+"px":Z==="dashdot"?Z=3*se+"px,"+se+"px,"+se+"px,"+se+"px":Z==="longdashdot"&&(Z=5*se+"px,"+2*se+"px,"+se+"px,"+2*se+"px"),Z};function _(Z,re,se){var oe=re.fillpattern,N=oe&&l.getPatternAttr(oe.shape,0,"");if(N){var U=l.getPatternAttr(oe.bgcolor,0,null),q=l.getPatternAttr(oe.fgcolor,0,null),Q=oe.fgopacity,W=l.getPatternAttr(oe.size,0,8),X=l.getPatternAttr(oe.solidity,0,.3),te=re.uid;l.pattern(Z,"point",se,te,N,W,X,void 0,oe.fillmode,U,q,Q)}else re.fillcolor&&Z.call(n.fill,re.fillcolor)}l.singleFillStyle=function(Z,re){var se=T.select(Z.node()),oe=se.data(),N=((oe[0]||[])[0]||{}).trace||{};_(Z,N,re)},l.fillGroupStyle=function(Z,re){Z.style("stroke-width",0).each(function(se){var oe=T.select(this);se[0].trace&&_(oe,se[0].trace,re)})};var s=g("./symbol_defs");l.symbolNames=[],l.symbolFuncs=[],l.symbolNeedLines={},l.symbolNoDot={},l.symbolNoFill={},l.symbolList=[],Object.keys(s).forEach(function(Z){var re=s[Z],se=re.n;l.symbolList.push(se,String(se),Z,se+100,String(se+100),Z+"-open"),l.symbolNames[se]=Z,l.symbolFuncs[se]=re.f,re.needLine&&(l.symbolNeedLines[se]=!0),re.noDot?l.symbolNoDot[se]=!0:l.symbolList.push(se+200,String(se+200),Z+"-dot",se+300,String(se+300),Z+"-open-dot"),re.noFill&&(l.symbolNoFill[se]=!0)});var w=l.symbolNames.length,b="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";l.symbolNumber=function(Z){if(A(Z))Z=+Z;else if(typeof Z=="string"){var re=0;Z.indexOf("-open")>0&&(re=100,Z=Z.replace("-open","")),Z.indexOf("-dot")>0&&(re+=200,Z=Z.replace("-dot","")),Z=l.symbolNames.indexOf(Z),Z>=0&&(Z+=re)}return Z%100>=w||Z>=400?0:Math.floor(Math.max(Z,0))};function h(Z,re){var se=Z%100;return l.symbolFuncs[se](re)+(Z>=200?b:"")}var m={x1:1,x2:0,y1:0,y2:0},u={x1:0,x2:0,y1:1,y2:0},L=M("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:m},horizontalreversed:{node:"linearGradient",attrs:m,reversed:!0},vertical:{node:"linearGradient",attrs:u},verticalreversed:{node:"linearGradient",attrs:u,reversed:!0}};l.gradient=function(Z,re,se,oe,N,U){for(var q=N.length,Q=S[oe],W=new Array(q),X=0;X<q;X++)Q.reversed?W[q-1-X]=[L((1-N[X][0])*100),N[X][1]]:W[X]=[L(N[X][0]*100),N[X][1]];var te=re._fullLayout,ee="g"+te._uid+"-"+se,ie=te._defs.select(".gradients").selectAll("#"+ee).data([oe+W.join(";")],c.identity);ie.exit().remove(),ie.enter().append(Q.node).each(function(){var le=T.select(this);Q.attrs&&le.attr(Q.attrs),le.attr("id",ee);var ye=le.selectAll("stop").data(W);ye.exit().remove(),ye.enter().append("stop"),ye.each(function(ue){var pe=e(ue[1]);T.select(this).attr({offset:ue[0]+"%","stop-color":n.tinyRGB(pe),"stop-opacity":pe.getAlpha()})})}),Z.style(U,K(ee,re)).style(U+"-opacity",null),Z.classed("gradient_filled",!0)},l.pattern=function(Z,re,se,oe,N,U,q,Q,W,X,te,ee){var ie=re==="legend";Q&&(W==="overlay"?(X=Q,te=n.contrast(X)):(X=void 0,te=Q));var le=se._fullLayout,ye="p"+le._uid+"-"+oe,ue,pe,ge=function(Ve,Qe,Fe,Le,Ne){return Le+(Ne-Le)*(Ve-Qe)/(Fe-Qe)},Te,_e,De,Oe,Ue={};switch(N){case"/":ue=U*Math.sqrt(2),pe=U*Math.sqrt(2),Te="M-"+ue/4+","+pe/4+"l"+ue/2+",-"+pe/2+"M0,"+pe+"L"+ue+",0M"+ue/4*3+","+pe/4*5+"l"+ue/2+",-"+pe/2,_e=q*U,Oe="path",Ue={d:Te,opacity:ee,stroke:te,"stroke-width":_e+"px"};break;case"\\":ue=U*Math.sqrt(2),pe=U*Math.sqrt(2),Te="M"+ue/4*3+",-"+pe/4+"l"+ue/2+","+pe/2+"M0,0L"+ue+","+pe+"M-"+ue/4+","+pe/4*3+"l"+ue/2+","+pe/2,_e=q*U,Oe="path",Ue={d:Te,opacity:ee,stroke:te,"stroke-width":_e+"px"};break;case"x":ue=U*Math.sqrt(2),pe=U*Math.sqrt(2),Te="M-"+ue/4+","+pe/4+"l"+ue/2+",-"+pe/2+"M0,"+pe+"L"+ue+",0M"+ue/4*3+","+pe/4*5+"l"+ue/2+",-"+pe/2+"M"+ue/4*3+",-"+pe/4+"l"+ue/2+","+pe/2+"M0,0L"+ue+","+pe+"M-"+ue/4+","+pe/4*3+"l"+ue/2+","+pe/2,_e=U-U*Math.sqrt(1-q),Oe="path",Ue={d:Te,opacity:ee,stroke:te,"stroke-width":_e+"px"};break;case"|":ue=U,pe=U,Oe="path",Te="M"+ue/2+",0L"+ue/2+","+pe,_e=q*U,Oe="path",Ue={d:Te,opacity:ee,stroke:te,"stroke-width":_e+"px"};break;case"-":ue=U,pe=U,Oe="path",Te="M0,"+pe/2+"L"+ue+","+pe/2,_e=q*U,Oe="path",Ue={d:Te,opacity:ee,stroke:te,"stroke-width":_e+"px"};break;case"+":ue=U,pe=U,Oe="path",Te="M"+ue/2+",0L"+ue/2+","+pe+"M0,"+pe/2+"L"+ue+","+pe/2,_e=U-U*Math.sqrt(1-q),Oe="path",Ue={d:Te,opacity:ee,stroke:te,"stroke-width":_e+"px"};break;case".":ue=U,pe=U,q<Math.PI/4?De=Math.sqrt(q*U*U/Math.PI):De=ge(q,Math.PI/4,1,U/2,U/Math.sqrt(2)),Oe="circle",Ue={cx:ue/2,cy:pe/2,r:De,opacity:ee,fill:te};break}var xe=[N||"noSh",X||"noBg",te||"noFg",U,q].join(";"),Pe=le._defs.select(".patterns").selectAll("#"+ye).data([xe],c.identity);Pe.exit().remove(),Pe.enter().append("pattern").each(function(){var Ve=T.select(this);if(Ve.attr({id:ye,width:ue+"px",height:pe+"px",patternUnits:"userSpaceOnUse",patternTransform:ie?"scale(0.8)":""}),X){var Qe=Ve.selectAll("rect").data([0]);Qe.exit().remove(),Qe.enter().append("rect").attr({width:ue+"px",height:pe+"px",fill:X})}var Fe=Ve.selectAll(Oe).data([0]);Fe.exit().remove(),Fe.enter().append(Oe).attr(Ue)}),Z.style("fill",K(ye,se)).style("fill-opacity",null),Z.classed("pattern_filled",!0)},l.initGradients=function(Z){var re=Z._fullLayout,se=c.ensureSingle(re._defs,"g","gradients");se.selectAll("linearGradient,radialGradient").remove(),T.select(Z).selectAll(".gradient_filled").classed("gradient_filled",!1)},l.initPatterns=function(Z){var re=Z._fullLayout,se=c.ensureSingle(re._defs,"g","patterns");se.selectAll("pattern").remove(),T.select(Z).selectAll(".pattern_filled").classed("pattern_filled",!1)},l.getPatternAttr=function(Z,re,se){return Z&&c.isArrayOrTypedArray(Z)?re<Z.length?Z[re]:se:Z},l.pointStyle=function(Z,re,se){if(!!Z.size()){var oe=l.makePointStyleFns(re);Z.each(function(N){l.singlePointStyle(N,T.select(this),re,oe,se)})}},l.singlePointStyle=function(Z,re,se,oe,N){var U=se.marker,q=U.line;if(re.style("opacity",oe.selectedOpacityFn?oe.selectedOpacityFn(Z):Z.mo===void 0?U.opacity:Z.mo),oe.ms2mrc){var Q;Z.ms==="various"||U.size==="various"?Q=3:Q=oe.ms2mrc(Z.ms),Z.mrc=Q,oe.selectedSizeFn&&(Q=Z.mrc=oe.selectedSizeFn(Z));var W=l.symbolNumber(Z.mx||U.symbol)||0;Z.om=W%200>=100,re.attr("d",h(W,Q))}var X=!1,te,ee,ie;if(Z.so)ie=q.outlierwidth,ee=q.outliercolor,te=U.outliercolor;else{var le=(q||{}).width;ie=(Z.mlw+1||le+1||(Z.trace?(Z.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in Z?ee=Z.mlcc=oe.lineScale(Z.mlc):c.isArrayOrTypedArray(q.color)?ee=n.defaultLine:ee=q.color,c.isArrayOrTypedArray(U.color)&&(te=n.defaultLine,X=!0),"mc"in Z?te=Z.mcc=oe.markerScale(Z.mc):te=U.color||"rgba(0,0,0,0)",oe.selectedColorFn&&(te=oe.selectedColorFn(Z))}if(Z.om)re.call(n.stroke,te).style({"stroke-width":(ie||1)+"px",fill:"none"});else{re.style("stroke-width",(Z.isBlank?0:ie)+"px");var ye=U.gradient,ue=Z.mgt;ue?X=!0:ue=ye&&ye.type,c.isArrayOrTypedArray(ue)&&(ue=ue[0],S[ue]||(ue=0));var pe=U.pattern,ge=pe&&l.getPatternAttr(pe.shape,Z.i,"");if(ue&&ue!=="none"){var Te=Z.mgc;Te?X=!0:Te=ye.color;var _e=se.uid;X&&(_e+="-"+Z.i),l.gradient(re,N,_e,ue,[[0,Te],[1,te]],"fill")}else if(ge){var De=l.getPatternAttr(pe.bgcolor,Z.i,null),Oe=l.getPatternAttr(pe.fgcolor,Z.i,null),Ue=pe.fgopacity,xe=l.getPatternAttr(pe.size,Z.i,8),Pe=l.getPatternAttr(pe.solidity,Z.i,.3),Ve=Z.mcc||c.isArrayOrTypedArray(pe.shape)||c.isArrayOrTypedArray(pe.bgcolor)||c.isArrayOrTypedArray(pe.size)||c.isArrayOrTypedArray(pe.solidity),Qe=se.uid;Ve&&(Qe+="-"+Z.i),l.pattern(re,"point",N,Qe,ge,xe,Pe,Z.mcc,pe.fillmode,De,Oe,Ue)}else n.fill(re,te);ie&&n.stroke(re,ee)}},l.makePointStyleFns=function(Z){var re={},se=Z.marker;return re.markerScale=l.tryColorscale(se,""),re.lineScale=l.tryColorscale(se,"line"),a.traceIs(Z,"symbols")&&(re.ms2mrc=y.isBubble(Z)?v(Z):function(){return(se.size||6)/2}),Z.selectedpoints&&c.extendFlat(re,l.makeSelectedPointStyleFns(Z)),re},l.makeSelectedPointStyleFns=function(Z){var re={},se=Z.selected||{},oe=Z.unselected||{},N=Z.marker||{},U=se.marker||{},q=oe.marker||{},Q=N.opacity,W=U.opacity,X=q.opacity,te=W!==void 0,ee=X!==void 0;(c.isArrayOrTypedArray(Q)||te||ee)&&(re.selectedOpacityFn=function(De){var Oe=De.mo===void 0?N.opacity:De.mo;return De.selected?te?W:Oe:ee?X:d*Oe});var ie=N.color,le=U.color,ye=q.color;(le||ye)&&(re.selectedColorFn=function(De){var Oe=De.mcc||ie;return De.selected?le||Oe:ye||Oe});var ue=N.size,pe=U.size,ge=q.size,Te=pe!==void 0,_e=ge!==void 0;return a.traceIs(Z,"symbols")&&(Te||_e)&&(re.selectedSizeFn=function(De){var Oe=De.mrc||ue/2;return De.selected?Te?pe/2:Oe:_e?ge/2:Oe}),re},l.makeSelectedTextStyleFns=function(Z){var re={},se=Z.selected||{},oe=Z.unselected||{},N=Z.textfont||{},U=se.textfont||{},q=oe.textfont||{},Q=N.color,W=U.color,X=q.color;return re.selectedTextColorFn=function(te){var ee=te.tc||Q;return te.selected?W||ee:X||(W?ee:n.addOpacity(ee,d))},re},l.selectedPointStyle=function(Z,re){if(!(!Z.size()||!re.selectedpoints)){var se=l.makeSelectedPointStyleFns(re),oe=re.marker||{},N=[];se.selectedOpacityFn&&N.push(function(U,q){U.style("opacity",se.selectedOpacityFn(q))}),se.selectedColorFn&&N.push(function(U,q){n.fill(U,se.selectedColorFn(q))}),se.selectedSizeFn&&N.push(function(U,q){var Q=q.mx||oe.symbol||0,W=se.selectedSizeFn(q);U.attr("d",h(l.symbolNumber(Q),W)),q.mrc2=W}),N.length&&Z.each(function(U){for(var q=T.select(this),Q=0;Q<N.length;Q++)N[Q](q,U)})}},l.tryColorscale=function(Z,re){var se=re?c.nestedProperty(Z,re).get():Z;if(se){var oe=se.color;if((se.colorscale||se._colorAx)&&c.isArrayOrTypedArray(oe))return t.makeColorScaleFuncFromTrace(se)}return c.identity};var k={start:1,end:-1,middle:0,bottom:1,top:-1};function P(Z,re,se,oe,N){var U=T.select(Z.node().parentNode),q=re.indexOf("top")!==-1?"top":re.indexOf("bottom")!==-1?"bottom":"middle",Q=re.indexOf("left")!==-1?"end":re.indexOf("right")!==-1?"start":"middle",W=oe?oe/.8+1:0,X=(f.lineCount(Z)-1)*p+1,te=k[Q]*W,ee=se*.75+k[q]*W+(k[q]-1)*X*se/2;Z.attr("text-anchor",Q),N||U.attr("transform",r(te,ee))}function z(Z,re){var se=Z.ts||re.textfont.size;return A(se)&&se>0?se:0}l.textPointStyle=function(Z,re,se){if(!!Z.size()){var oe;if(re.selectedpoints){var N=l.makeSelectedTextStyleFns(re);oe=N.selectedTextColorFn}var U=re.texttemplate,q=se._fullLayout;Z.each(function(Q){var W=T.select(this),X=U?c.extractOption(Q,re,"txt","texttemplate"):c.extractOption(Q,re,"tx","text");if(!X&&X!==0){W.remove();return}if(U){var te=re._module.formatLabels,ee=te?te(Q,re,q):{},ie={};x(ie,re,Q.i);var le=re._meta||{};X=c.texttemplateString(X,ee,q._d3locale,ie,Q,le)}var ye=Q.tp||re.textposition,ue=z(Q,re),pe=oe?oe(Q):Q.tc||re.textfont.color;W.call(l.font,Q.tf||re.textfont.family,ue,pe).text(X).call(f.convertToTspans,se).call(P,ye,ue,Q.mrc)})}},l.selectedTextStyle=function(Z,re){if(!(!Z.size()||!re.selectedpoints)){var se=l.makeSelectedTextStyleFns(re);Z.each(function(oe){var N=T.select(this),U=se.selectedTextColorFn(oe),q=oe.tp||re.textposition,Q=z(oe,re);n.fill(N,U);var W=a.traceIs(re,"bar-like");P(N,q,Q,oe.mrc2||oe.mrc,W)})}};var I=.5;l.smoothopen=function(Z,re){if(Z.length<3)return"M"+Z.join("L");var se="M"+Z[0],oe=[],N;for(N=1;N<Z.length-1;N++)oe.push(D(Z[N-1],Z[N],Z[N+1],re));for(se+="Q"+oe[0][0]+" "+Z[1],N=2;N<Z.length-1;N++)se+="C"+oe[N-2][1]+" "+oe[N-1][0]+" "+Z[N];return se+="Q"+oe[Z.length-3][1]+" "+Z[Z.length-1],se},l.smoothclosed=function(Z,re){if(Z.length<3)return"M"+Z.join("L")+"Z";var se="M"+Z[0],oe=Z.length-1,N=[D(Z[oe],Z[0],Z[1],re)],U;for(U=1;U<oe;U++)N.push(D(Z[U-1],Z[U],Z[U+1],re));for(N.push(D(Z[oe-1],Z[oe],Z[0],re)),U=1;U<=oe;U++)se+="C"+N[U-1][1]+" "+N[U][0]+" "+Z[U];return se+="C"+N[oe][1]+" "+N[0][0]+" "+Z[0]+"Z",se};function D(Z,re,se,oe){var N=Z[0]-re[0],U=Z[1]-re[1],q=se[0]-re[0],Q=se[1]-re[1],W=Math.pow(N*N+U*U,I/2),X=Math.pow(q*q+Q*Q,I/2),te=(X*X*N-W*W*q)*oe,ee=(X*X*U-W*W*Q)*oe,ie=3*X*(W+X),le=3*W*(W+X);return[[T.round(re[0]+(ie&&te/ie),2),T.round(re[1]+(ie&&ee/ie),2)],[T.round(re[0]-(le&&te/le),2),T.round(re[1]-(le&&ee/le),2)]]}var R={hv:function(Z,re){return"H"+T.round(re[0],2)+"V"+T.round(re[1],2)},vh:function(Z,re){return"V"+T.round(re[1],2)+"H"+T.round(re[0],2)},hvh:function(Z,re){return"H"+T.round((Z[0]+re[0])/2,2)+"V"+T.round(re[1],2)+"H"+T.round(re[0],2)},vhv:function(Z,re){return"V"+T.round((Z[1]+re[1])/2,2)+"H"+T.round(re[0],2)+"V"+T.round(re[1],2)}},B=function(Z,re){return"L"+T.round(re[0],2)+","+T.round(re[1],2)};l.steps=function(Z){var re=R[Z]||B;return function(se){for(var oe="M"+T.round(se[0][0],2)+","+T.round(se[0][1],2),N=1;N<se.length;N++)oe+=re(se[N-1],se[N]);return oe}},l.makeTester=function(){var Z=c.ensureSingleById(T.select("body"),"svg","js-plotly-tester",function(se){se.attr(o.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),re=c.ensureSingle(Z,"path","js-reference-point",function(se){se.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});l.tester=Z,l.testref=re},l.savedBBoxes={};var F=0,V=1e4;l.bBox=function(Z,re,se){se||(se=Y(Z));var oe;if(se){if(oe=l.savedBBoxes[se],oe)return c.extendFlat({},oe)}else if(Z.childNodes.length===1){var N=Z.childNodes[0];if(se=Y(N),se){var U=+N.getAttribute("x")||0,q=+N.getAttribute("y")||0,Q=N.getAttribute("transform");if(!Q){var W=l.bBox(N,!1,se);return U&&(W.left+=U,W.right+=U),q&&(W.top+=q,W.bottom+=q),W}if(se+="~"+U+"~"+q+"~"+Q,oe=l.savedBBoxes[se],oe)return c.extendFlat({},oe)}}var X,te;re?X=Z:(te=l.tester.node(),X=Z.cloneNode(!0),te.appendChild(X)),T.select(X).attr("transform",null).call(f.positionText,0,0);var ee=X.getBoundingClientRect(),ie=l.testref.node().getBoundingClientRect();re||te.removeChild(X);var le={height:ee.height,width:ee.width,left:ee.left-ie.left,top:ee.top-ie.top,right:ee.right-ie.left,bottom:ee.bottom-ie.top};return F>=V&&(l.savedBBoxes={},F=0),se&&(l.savedBBoxes[se]=le),F++,c.extendFlat({},le)};function Y(Z){var re=Z.getAttribute("data-unformatted");if(re!==null)return re+Z.getAttribute("data-math")+Z.getAttribute("text-anchor")+Z.getAttribute("style")}l.setClipUrl=function(Z,re,se){Z.attr("clip-path",K(re,se))};function K(Z,re){if(!Z)return null;var se=re._context,oe=se._exportedPlot?"":se._baseUrl||"";return oe?"url('"+oe+"#"+Z+"')":"url(#"+Z+")"}l.getTranslate=function(Z){var re=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,se=Z.attr?"attr":"getAttribute",oe=Z[se]("transform")||"",N=oe.replace(re,function(U,q,Q){return[q,Q].join(" ")}).split(" ");return{x:+N[0]||0,y:+N[1]||0}},l.setTranslate=function(Z,re,se){var oe=/(\btranslate\(.*?\);?)/,N=Z.attr?"attr":"getAttribute",U=Z.attr?"attr":"setAttribute",q=Z[N]("transform")||"";return re=re||0,se=se||0,q=q.replace(oe,"").trim(),q+=r(re,se),q=q.trim(),Z[U]("transform",q),q},l.getScale=function(Z){var re=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,se=Z.attr?"attr":"getAttribute",oe=Z[se]("transform")||"",N=oe.replace(re,function(U,q,Q){return[q,Q].join(" ")}).split(" ");return{x:+N[0]||1,y:+N[1]||1}},l.setScale=function(Z,re,se){var oe=/(\bscale\(.*?\);?)/,N=Z.attr?"attr":"getAttribute",U=Z.attr?"attr":"setAttribute",q=Z[N]("transform")||"";return re=re||1,se=se||1,q=q.replace(oe,"").trim(),q+="scale("+re+","+se+")",q=q.trim(),Z[U]("transform",q),q};var J=/\s*sc.*/;l.setPointGroupScale=function(Z,re,se){if(re=re||1,se=se||1,!!Z){var oe=re===1&&se===1?"":"scale("+re+","+se+")";Z.each(function(){var N=(this.getAttribute("transform")||"").replace(J,"");N+=oe,N=N.trim(),this.setAttribute("transform",N)})}};var G=/translate\([^)]*\)\s*$/;l.setTextPointsScale=function(Z,re,se){!Z||Z.each(function(){var oe,N=T.select(this),U=N.select("text");if(!!U.node()){var q=parseFloat(U.attr("x")||0),Q=parseFloat(U.attr("y")||0),W=(N.attr("transform")||"").match(G);re===1&&se===1?oe=[]:oe=[r(q,Q),"scale("+re+","+se+")",r(-q,-Q)],W&&oe.push(W),N.attr("transform",oe.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":944,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(g,ne,ae){var T=g("@plotly/d3");ne.exports={circle:{n:0,f:function(c){var M=T.round(c,2);return"M"+M+",0A"+M+","+M+" 0 1,1 0,-"+M+"A"+M+","+M+" 0 0,1 "+M+",0Z"}},square:{n:1,f:function(c){var M=T.round(c,2);return"M"+M+","+M+"H-"+M+"V-"+M+"H"+M+"Z"}},diamond:{n:2,f:function(c){var M=T.round(c*1.3,2);return"M"+M+",0L0,"+M+"L-"+M+",0L0,-"+M+"Z"}},cross:{n:3,f:function(c){var M=T.round(c*.4,2),A=T.round(c*1.2,2);return"M"+A+","+M+"H"+M+"V"+A+"H-"+M+"V"+M+"H-"+A+"V-"+M+"H-"+M+"V-"+A+"H"+M+"V-"+M+"H"+A+"Z"}},x:{n:4,f:function(c){var M=T.round(c*.8/Math.sqrt(2),2),A="l"+M+","+M,e="l"+M+",-"+M,a="l-"+M+",-"+M,n="l-"+M+","+M;return"M0,"+M+A+e+a+e+a+n+a+n+A+n+A+"Z"}},"triangle-up":{n:5,f:function(c){var M=T.round(c*2/Math.sqrt(3),2),A=T.round(c/2,2),e=T.round(c,2);return"M-"+M+","+A+"H"+M+"L0,-"+e+"Z"}},"triangle-down":{n:6,f:function(c){var M=T.round(c*2/Math.sqrt(3),2),A=T.round(c/2,2),e=T.round(c,2);return"M-"+M+",-"+A+"H"+M+"L0,"+e+"Z"}},"triangle-left":{n:7,f:function(c){var M=T.round(c*2/Math.sqrt(3),2),A=T.round(c/2,2),e=T.round(c,2);return"M"+A+",-"+M+"V"+M+"L-"+e+",0Z"}},"triangle-right":{n:8,f:function(c){var M=T.round(c*2/Math.sqrt(3),2),A=T.round(c/2,2),e=T.round(c,2);return"M-"+A+",-"+M+"V"+M+"L"+e+",0Z"}},"triangle-ne":{n:9,f:function(c){var M=T.round(c*.6,2),A=T.round(c*1.2,2);return"M-"+A+",-"+M+"H"+M+"V"+A+"Z"}},"triangle-se":{n:10,f:function(c){var M=T.round(c*.6,2),A=T.round(c*1.2,2);return"M"+M+",-"+A+"V"+M+"H-"+A+"Z"}},"triangle-sw":{n:11,f:function(c){var M=T.round(c*.6,2),A=T.round(c*1.2,2);return"M"+A+","+M+"H-"+M+"V-"+A+"Z"}},"triangle-nw":{n:12,f:function(c){var M=T.round(c*.6,2),A=T.round(c*1.2,2);return"M-"+M+","+A+"V-"+M+"H"+A+"Z"}},pentagon:{n:13,f:function(c){var M=T.round(c*.951,2),A=T.round(c*.588,2),e=T.round(-c,2),a=T.round(c*-.309,2),n=T.round(c*.809,2);return"M"+M+","+a+"L"+A+","+n+"H-"+A+"L-"+M+","+a+"L0,"+e+"Z"}},hexagon:{n:14,f:function(c){var M=T.round(c,2),A=T.round(c/2,2),e=T.round(c*Math.sqrt(3)/2,2);return"M"+e+",-"+A+"V"+A+"L0,"+M+"L-"+e+","+A+"V-"+A+"L0,-"+M+"Z"}},hexagon2:{n:15,f:function(c){var M=T.round(c,2),A=T.round(c/2,2),e=T.round(c*Math.sqrt(3)/2,2);return"M-"+A+","+e+"H"+A+"L"+M+",0L"+A+",-"+e+"H-"+A+"L-"+M+",0Z"}},octagon:{n:16,f:function(c){var M=T.round(c*.924,2),A=T.round(c*.383,2);return"M-"+A+",-"+M+"H"+A+"L"+M+",-"+A+"V"+A+"L"+A+","+M+"H-"+A+"L-"+M+","+A+"V-"+A+"Z"}},star:{n:17,f:function(c){var M=c*1.4,A=T.round(M*.225,2),e=T.round(M*.951,2),a=T.round(M*.363,2),n=T.round(M*.588,2),t=T.round(-M,2),r=T.round(M*-.309,2),f=T.round(M*.118,2),o=T.round(M*.809,2),i=T.round(M*.382,2);return"M"+A+","+r+"H"+e+"L"+a+","+f+"L"+n+","+o+"L0,"+i+"L-"+n+","+o+"L-"+a+","+f+"L-"+e+","+r+"H-"+A+"L0,"+t+"Z"}},hexagram:{n:18,f:function(c){var M=T.round(c*.66,2),A=T.round(c*.38,2),e=T.round(c*.76,2);return"M-"+e+",0l-"+A+",-"+M+"h"+e+"l"+A+",-"+M+"l"+A+","+M+"h"+e+"l-"+A+","+M+"l"+A+","+M+"h-"+e+"l-"+A+","+M+"l-"+A+",-"+M+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(c){var M=T.round(c*Math.sqrt(3)*.8,2),A=T.round(c*.8,2),e=T.round(c*1.6,2),a=T.round(c*4,2),n="A "+a+","+a+" 0 0 1 ";return"M-"+M+","+A+n+M+","+A+n+"0,-"+e+n+"-"+M+","+A+"Z"}},"star-triangle-down":{n:20,f:function(c){var M=T.round(c*Math.sqrt(3)*.8,2),A=T.round(c*.8,2),e=T.round(c*1.6,2),a=T.round(c*4,2),n="A "+a+","+a+" 0 0 1 ";return"M"+M+",-"+A+n+"-"+M+",-"+A+n+"0,"+e+n+M+",-"+A+"Z"}},"star-square":{n:21,f:function(c){var M=T.round(c*1.1,2),A=T.round(c*2,2),e="A "+A+","+A+" 0 0 1 ";return"M-"+M+",-"+M+e+"-"+M+","+M+e+M+","+M+e+M+",-"+M+e+"-"+M+",-"+M+"Z"}},"star-diamond":{n:22,f:function(c){var M=T.round(c*1.4,2),A=T.round(c*1.9,2),e="A "+A+","+A+" 0 0 1 ";return"M-"+M+",0"+e+"0,"+M+e+M+",0"+e+"0,-"+M+e+"-"+M+",0Z"}},"diamond-tall":{n:23,f:function(c){var M=T.round(c*.7,2),A=T.round(c*1.4,2);return"M0,"+A+"L"+M+",0L0,-"+A+"L-"+M+",0Z"}},"diamond-wide":{n:24,f:function(c){var M=T.round(c*1.4,2),A=T.round(c*.7,2);return"M0,"+A+"L"+M+",0L0,-"+A+"L-"+M+",0Z"}},hourglass:{n:25,f:function(c){var M=T.round(c,2);return"M"+M+","+M+"H-"+M+"L"+M+",-"+M+"H-"+M+"Z"},noDot:!0},bowtie:{n:26,f:function(c){var M=T.round(c,2);return"M"+M+","+M+"V-"+M+"L-"+M+","+M+"V-"+M+"Z"},noDot:!0},"circle-cross":{n:27,f:function(c){var M=T.round(c,2);return"M0,"+M+"V-"+M+"M"+M+",0H-"+M+"M"+M+",0A"+M+","+M+" 0 1,1 0,-"+M+"A"+M+","+M+" 0 0,1 "+M+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(c){var M=T.round(c,2),A=T.round(c/Math.sqrt(2),2);return"M"+A+","+A+"L-"+A+",-"+A+"M"+A+",-"+A+"L-"+A+","+A+"M"+M+",0A"+M+","+M+" 0 1,1 0,-"+M+"A"+M+","+M+" 0 0,1 "+M+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(c){var M=T.round(c,2);return"M0,"+M+"V-"+M+"M"+M+",0H-"+M+"M"+M+","+M+"H-"+M+"V-"+M+"H"+M+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(c){var M=T.round(c,2);return"M"+M+","+M+"L-"+M+",-"+M+"M"+M+",-"+M+"L-"+M+","+M+"M"+M+","+M+"H-"+M+"V-"+M+"H"+M+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(c){var M=T.round(c*1.3,2);return"M"+M+",0L0,"+M+"L-"+M+",0L0,-"+M+"ZM0,-"+M+"V"+M+"M-"+M+",0H"+M},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(c){var M=T.round(c*1.3,2),A=T.round(c*.65,2);return"M"+M+",0L0,"+M+"L-"+M+",0L0,-"+M+"ZM-"+A+",-"+A+"L"+A+","+A+"M-"+A+","+A+"L"+A+",-"+A},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(c){var M=T.round(c*1.4,2);return"M0,"+M+"V-"+M+"M"+M+",0H-"+M},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(c){var M=T.round(c,2);return"M"+M+","+M+"L-"+M+",-"+M+"M"+M+",-"+M+"L-"+M+","+M},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(c){var M=T.round(c*1.2,2),A=T.round(c*.85,2);return"M0,"+M+"V-"+M+"M"+M+",0H-"+M+"M"+A+","+A+"L-"+A+",-"+A+"M"+A+",-"+A+"L-"+A+","+A},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(c){var M=T.round(c/2,2),A=T.round(c,2);return"M"+M+","+A+"V-"+A+"m-"+A+",0V"+A+"M"+A+","+M+"H-"+A+"m0,-"+A+"H"+A},needLine:!0,noFill:!0},"y-up":{n:37,f:function(c){var M=T.round(c*1.2,2),A=T.round(c*1.6,2),e=T.round(c*.8,2);return"M-"+M+","+e+"L0,0M"+M+","+e+"L0,0M0,-"+A+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(c){var M=T.round(c*1.2,2),A=T.round(c*1.6,2),e=T.round(c*.8,2);return"M-"+M+",-"+e+"L0,0M"+M+",-"+e+"L0,0M0,"+A+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(c){var M=T.round(c*1.2,2),A=T.round(c*1.6,2),e=T.round(c*.8,2);return"M"+e+","+M+"L0,0M"+e+",-"+M+"L0,0M-"+A+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(c){var M=T.round(c*1.2,2),A=T.round(c*1.6,2),e=T.round(c*.8,2);return"M-"+e+","+M+"L0,0M-"+e+",-"+M+"L0,0M"+A+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(c){var M=T.round(c*1.4,2);return"M"+M+",0H-"+M},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(c){var M=T.round(c*1.4,2);return"M0,"+M+"V-"+M},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(c){var M=T.round(c,2);return"M"+M+",-"+M+"L-"+M+","+M},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(c){var M=T.round(c,2);return"M"+M+","+M+"L-"+M+",-"+M},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(c){var M=T.round(c,2),A=T.round(c*2,2);return"M0,0L-"+M+","+A+"H"+M+"Z"},noDot:!0},"arrow-down":{n:46,f:function(c){var M=T.round(c,2),A=T.round(c*2,2);return"M0,0L-"+M+",-"+A+"H"+M+"Z"},noDot:!0},"arrow-left":{n:47,f:function(c){var M=T.round(c*2,2),A=T.round(c,2);return"M0,0L"+M+",-"+A+"V"+A+"Z"},noDot:!0},"arrow-right":{n:48,f:function(c){var M=T.round(c*2,2),A=T.round(c,2);return"M0,0L-"+M+",-"+A+"V"+A+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(c){var M=T.round(c,2),A=T.round(c*2,2);return"M-"+M+",0H"+M+"M0,0L-"+M+","+A+"H"+M+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(c){var M=T.round(c,2),A=T.round(c*2,2);return"M-"+M+",0H"+M+"M0,0L-"+M+",-"+A+"H"+M+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(c){var M=T.round(c*2,2),A=T.round(c,2);return"M0,-"+A+"V"+A+"M0,0L"+M+",-"+A+"V"+A+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(c){var M=T.round(c*2,2),A=T.round(c,2);return"M0,-"+A+"V"+A+"M0,0L-"+M+",-"+A+"V"+A+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(g,ne,ae){ne.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../registry"),M=g("../../plots/cartesian/axes"),A=g("../../lib"),e=g("./compute_error");ne.exports=function(t){for(var r=t.calcdata,f=0;f<r.length;f++){var o=r[f],i=o[0].trace;if(i.visible===!0&&c.traceIs(i,"errorBarsOK")){var p=M.getFromId(t,i.xaxis),d=M.getFromId(t,i.yaxis);a(o,i,p,"x"),a(o,i,d,"y")}}};function a(n,t,r,f){var o=t["error_"+f]||{},i=o.visible&&["linear","log"].indexOf(r.type)!==-1,p=[];if(!!i){for(var d=e(o),y=0;y<n.length;y++){var v=n[y],x=v.i;if(x===void 0)x=y;else if(x===null)continue;var l=v[f];if(!!T(r.c2l(l))){var _=d(l,x);if(T(_[0])&&T(_[1])){var s=v[f+"s"]=l-_[0],w=v[f+"h"]=l+_[1];p.push(s,w)}}}var b=r._id,h=t._extremes[b],m=M.findExtremes(r,p,A.extendFlat({tozero:h.opts.tozero},{padded:!0}));h.min=h.min.concat(m.min),h.max=h.max.concat(m.max)}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(g,ne,ae){ne.exports=function(M){var A=M.type,e=M.symmetric;if(A==="data"){var a=M.array||[];if(e)return function(o,i){var p=+a[i];return[p,p]};var n=M.arrayminus||[];return function(o,i){var p=+a[i],d=+n[i];return!isNaN(p)||!isNaN(d)?[d||0,p||0]:[NaN,NaN]}}else{var t=T(A,M.value),r=T(A,M.valueminus);return e||M.valueminus===void 0?function(o){var i=t(o);return[i,i]}:function(o){return[r(o),t(o)]}}};function T(c,M){if(c==="percent")return function(A){return Math.abs(A*M/100)};if(c==="constant")return function(){return Math.abs(M)};if(c==="sqrt")return function(A){return Math.sqrt(Math.abs(A))}}},{}],393:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../registry"),M=g("../../lib"),A=g("../../plot_api/plot_template"),e=g("./attributes");ne.exports=function(a,n,t,r){var f="error_"+r.axis,o=A.newContainer(n,f),i=a[f]||{};function p(s,w){return M.coerce(i,o,e,s,w)}var d=i.array!==void 0||i.value!==void 0||i.type==="sqrt",y=p("visible",d);if(y!==!1){var v=p("type","array"in i?"data":"percent"),x=!0;v!=="sqrt"&&(x=p("symmetric",!((v==="data"?"arrayminus":"valueminus")in i))),v==="data"?(p("array"),p("traceref"),x||(p("arrayminus"),p("tracerefminus"))):(v==="percent"||v==="constant")&&(p("value"),x||p("valueminus"));var l="copy_"+r.inherit+"style";if(r.inherit){var _=n["error_"+r.inherit];(_||{}).visible&&p(l,!(i.color||T(i.thickness)||T(i.width)))}(!r.inherit||!o[l])&&(p("color",t),p("thickness"),p("width",c.traceIs(n,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plot_api/edit_types").overrideAll,M=g("./attributes"),A={error_x:T.extendFlat({},M),error_y:T.extendFlat({},M)};delete A.error_x.copy_zstyle,delete A.error_y.copy_zstyle,delete A.error_y.copy_ystyle;var e={error_x:T.extendFlat({},M),error_y:T.extendFlat({},M),error_z:T.extendFlat({},M)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,ne.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:A,bar:A,histogram:A,scatter3d:c(e,"calc","nested"),scattergl:c(A,"calc","nested")}},supplyDefaults:g("./defaults"),calc:g("./calc"),makeComputeError:g("./compute_error"),plot:g("./plot"),style:g("./style"),hoverInfo:a};function a(n,t,r){(t.error_y||{}).visible&&(r.yerr=n.yh-n.y,t.error_y.symmetric||(r.yerrneg=n.y-n.ys)),(t.error_x||{}).visible&&(r.xerr=n.xh-n.x,t.error_x.symmetric||(r.xerrneg=n.x-n.xs))}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("fast-isnumeric"),M=g("../drawing"),A=g("../../traces/scatter/subtypes");ne.exports=function(n,t,r,f){var o,i=r.xaxis,p=r.yaxis,d=f&&f.duration>0;t.each(function(y){var v=y[0].trace,x=v.error_x||{},l=v.error_y||{},_;v.ids&&(_=function(h){return h.id});var s=A.hasMarkers(v)&&v.marker.maxdisplayed>0;!l.visible&&!x.visible&&(y=[]);var w=T.select(this).selectAll("g.errorbar").data(y,_);if(w.exit().remove(),!!y.length){x.visible||w.selectAll("path.xerror").remove(),l.visible||w.selectAll("path.yerror").remove(),w.style("opacity",1);var b=w.enter().append("g").classed("errorbar",!0);d&&b.style("opacity",0).transition().duration(f.duration).style("opacity",1),M.setClipUrl(w,r.layerClipId,n),w.each(function(h){var m=T.select(this),u=e(h,i,p);if(!(s&&!h.vis)){var L,S=m.select("path.yerror");if(l.visible&&c(u.x)&&c(u.yh)&&c(u.ys)){var k=l.width;L="M"+(u.x-k)+","+u.yh+"h"+2*k+"m-"+k+",0V"+u.ys,u.noYS||(L+="m-"+k+",0h"+2*k),o=!S.size(),o?S=m.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(S=S.transition().duration(f.duration).ease(f.easing)),S.attr("d",L)}else S.remove();var P=m.select("path.xerror");if(x.visible&&c(u.y)&&c(u.xh)&&c(u.xs)){var z=(x.copy_ystyle?l:x).width;L="M"+u.xh+","+(u.y-z)+"v"+2*z+"m0,-"+z+"H"+u.xs,u.noXS||(L+="m0,-"+z+"v"+2*z),o=!P.size(),o?P=m.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):d&&(P=P.transition().duration(f.duration).ease(f.easing)),P.attr("d",L)}else P.remove()}})}})};function e(a,n,t){var r={x:n.c2p(a.x),y:t.c2p(a.y)};return a.yh!==void 0&&(r.yh=t.c2p(a.yh),r.ys=t.c2p(a.ys),c(r.ys)||(r.noYS=!0,r.ys=t.c2p(a.ys,!0))),a.xh!==void 0&&(r.xh=n.c2p(a.xh),r.xs=n.c2p(a.xs),c(r.xs)||(r.noXS=!0,r.xs=n.c2p(a.xs,!0))),r}},{"../../traces/scatter/subtypes":952,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../color");ne.exports=function(A){A.each(function(e){var a=e[0].trace,n=a.error_y||{},t=a.error_x||{},r=T.select(this);r.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(c.stroke,n.color),t.copy_ystyle&&(t=n),r.selectAll("path.xerror").style("stroke-width",t.thickness+"px").call(c.stroke,t.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(g,ne,ae){var T=g("../../plots/font_attributes"),c=g("./layout_attributes").hoverlabel,M=g("../../lib/extend").extendFlat;ne.exports={hoverlabel:{bgcolor:M({},c.bgcolor,{arrayOk:!0}),bordercolor:M({},c.bordercolor,{arrayOk:!0}),font:T({arrayOk:!0,editType:"none"}),align:M({},c.align,{arrayOk:!0}),namelength:M({},c.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(g,ne,ae){var T=g("../../lib"),c=g("../../registry");ne.exports=function(e){var a=e.calcdata,n=e._fullLayout;function t(p){return function(d){return T.coerceHoverinfo({hoverinfo:d},{_module:p._module},n)}}for(var r=0;r<a.length;r++){var f=a[r],o=f[0].trace;if(!c.traceIs(o,"pie-like")){var i=c.traceIs(o,"2dMap")?M:T.fillArray;i(o.hoverinfo,f,"hi",t(o)),o.hovertemplate&&i(o.hovertemplate,f,"ht"),!!o.hoverlabel&&(i(o.hoverlabel.bgcolor,f,"hbg"),i(o.hoverlabel.bordercolor,f,"hbc"),i(o.hoverlabel.font.size,f,"hts"),i(o.hoverlabel.font.color,f,"htc"),i(o.hoverlabel.font.family,f,"htf"),i(o.hoverlabel.namelength,f,"hnl"),i(o.hoverlabel.align,f,"hta"))}}};function M(A,e,a,n){n=n||T.identity,Array.isArray(A)&&(e[0][a]=n(A))}},{"../../lib":503,"../../registry":638}],399:[function(g,ne,ae){var T=g("../../registry"),c=g("./hover").hover;ne.exports=function(A,e,a){var n=T.getComponentMethod("annotations","onClick")(A,A._hoverdata);a!==void 0&&c(A,e,a,!0);function t(){A.emit("plotly_click",{points:A._hoverdata,event:e})}A._hoverdata&&e&&e.target&&(n&&n.then?n.then(t):t(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(g,ne,ae){ne.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(g,ne,ae){var T=g("../../lib"),c=g("./attributes"),M=g("./hoverlabel_defaults");ne.exports=function(e,a,n,t){function r(o,i){return T.coerce(e,a,c,o,i)}var f=T.extendFlat({},t.hoverlabel);a.hovertemplate&&(f.namelength=-1),M(e,a,r,f)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(g,ne,ae){var T=g("../../lib");ae.getSubplot=function(n){return n.subplot||n.xaxis+n.yaxis||n.geo},ae.isTraceInSubplots=function(n,t){if(n.type==="splom"){for(var r=n.xaxes||[],f=n.yaxes||[],o=0;o<r.length;o++)for(var i=0;i<f.length;i++)if(t.indexOf(r[o]+f[i])!==-1)return!0;return!1}return t.indexOf(ae.getSubplot(n))!==-1},ae.flat=function(n,t){for(var r=new Array(n.length),f=0;f<n.length;f++)r[f]=t;return r},ae.p2c=function(n,t){for(var r=new Array(n.length),f=0;f<n.length;f++)r[f]=n[f].p2c(t);return r},ae.getDistanceFunction=function(n,t,r,f){return n==="closest"?f||ae.quadrature(t,r):n.charAt(0)==="x"?t:r},ae.getClosest=function(n,t,r){if(r.index!==!1)r.index>=0&&r.index<n.length?r.distance=0:r.index=!1;else for(var f=0;f<n.length;f++){var o=t(n[f]);o<=r.distance&&(r.index=f,r.distance=o)}return r},ae.inbox=function(n,t,r){return n*t<0||n===0?r:1/0},ae.quadrature=function(n,t){return function(r){var f=n(r),o=t(r);return Math.sqrt(f*f+o*o)}},ae.makeEventData=function(n,t,r){var f="index"in n?n.index:n.pointNumber,o={data:t._input,fullData:t,curveNumber:t.index,pointNumber:f};if(t._indexToPoints){var i=t._indexToPoints[f];i.length===1?o.pointIndex=i[0]:o.pointIndices=i}else o.pointIndex=f;return t._module.eventData?o=t._module.eventData(o,n,t,r,f):("xVal"in n?o.x=n.xVal:"x"in n&&(o.x=n.x),"yVal"in n?o.y=n.yVal:"y"in n&&(o.y=n.y),n.xa&&(o.xaxis=n.xa),n.ya&&(o.yaxis=n.ya),n.zLabelVal!==void 0&&(o.z=n.zLabelVal)),ae.appendArrayPointValue(o,t,f),o},ae.appendArrayPointValue=function(n,t,r){var f=t._arrayAttrs;if(!!f)for(var o=0;o<f.length;o++){var i=f[o],p=M(i);if(n[p]===void 0){var d=T.nestedProperty(t,i).get(),y=A(d,r);y!==void 0&&(n[p]=y)}}},ae.appendArrayMultiPointValues=function(n,t,r){var f=t._arrayAttrs;if(!!f)for(var o=0;o<f.length;o++){var i=f[o],p=M(i);if(n[p]===void 0){for(var d=T.nestedProperty(t,i).get(),y=new Array(r.length),v=0;v<r.length;v++)y[v]=A(d,r[v]);n[p]=y}}};var c={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function M(n){return c[n]||n}function A(n,t){if(Array.isArray(t)){if(Array.isArray(n)&&Array.isArray(n[t[0]]))return n[t[0]][t[1]]}else return n[t]}var e={x:!0,y:!0},a={"x unified":!0,"y unified":!0};ae.isUnifiedHover=function(n){return typeof n!="string"?!1:!!a[n]},ae.isXYhover=function(n){return typeof n!="string"?!1:!!e[n]}},{"../../lib":503}],403:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("fast-isnumeric"),M=g("tinycolor2"),A=g("../../lib"),e=A.strTranslate,a=A.strRotate,n=g("../../lib/events"),t=g("../../lib/svg_text_utils"),r=g("../../lib/override_cursor"),f=g("../drawing"),o=g("../color"),i=g("../dragelement"),p=g("../../plots/cartesian/axes"),d=g("../../registry"),y=g("./helpers"),v=g("./constants"),x=g("../legend/defaults"),l=g("../legend/draw"),_=v.YANGLE,s=Math.PI*_/180,w=1/Math.sin(s),b=Math.cos(s),h=Math.sin(s),m=v.HOVERARROWSIZE,u=v.HOVERTEXTPAD,L={box:!0,ohlc:!0,violin:!0,candlestick:!0},S={scatter:!0,scattergl:!0,splom:!0};ae.hover=function(U,q,Q,W){U=A.getGraphDiv(U);var X=q.target;A.throttle(U._fullLayout._uid+v.HOVERID,v.HOVERMINTIME,function(){k(U,q,Q,W,X)})},ae.loneHover=function(U,q){var Q=!0;Array.isArray(U)||(Q=!1,U=[U]);var W=q.gd,X=re(W),te=se(W),ee=U.map(function(_e){var De=_e._x0||_e.x0||_e.x||0,Oe=_e._x1||_e.x1||_e.x||0,Ue=_e._y0||_e.y0||_e.y||0,xe=_e._y1||_e.y1||_e.y||0,Pe=_e.eventData;if(Pe){var Ve=Math.min(De,Oe),Qe=Math.max(De,Oe),Fe=Math.min(Ue,xe),Le=Math.max(Ue,xe),Ne=_e.trace;if(d.traceIs(Ne,"gl3d")){var dt=W._fullLayout[Ne.scene]._scene.container,Dt=dt.offsetLeft,Xt=dt.offsetTop;Ve+=Dt,Qe+=Dt,Fe+=Xt,Le+=Xt}Pe.bbox={x0:Ve+te,x1:Qe+te,y0:Fe+X,y1:Le+X},q.inOut_bbox&&q.inOut_bbox.push(Pe.bbox)}else Pe=!1;return{color:_e.color||o.defaultLine,x0:_e.x0||_e.x||0,x1:_e.x1||_e.x||0,y0:_e.y0||_e.y||0,y1:_e.y1||_e.y||0,xLabel:_e.xLabel,yLabel:_e.yLabel,zLabel:_e.zLabel,text:_e.text,name:_e.name,idealAlign:_e.idealAlign,borderColor:_e.borderColor,fontFamily:_e.fontFamily,fontSize:_e.fontSize,fontColor:_e.fontColor,nameLength:_e.nameLength,textAlign:_e.textAlign,trace:_e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:_e.hovertemplate||!1,hovertemplateLabels:_e.hovertemplateLabels||!1,eventData:Pe}}),ie=!1,le=I(ee,{gd:W,hovermode:"closest",rotateLabels:ie,bgColor:q.bgColor||o.background,container:T.select(q.container),outerContainer:q.outerContainer||q.container}),ye=5,ue=0,pe=0;le.sort(function(_e,De){return _e.y0-De.y0}).each(function(_e,De){var Oe=_e.y0-_e.by/2;Oe-ye<ue?_e.offset=ue-Oe+ye:_e.offset=0,ue=Oe+_e.by+_e.offset,De===q.anchorIndex&&(pe=_e.offset)}).each(function(_e){_e.offset-=pe});var ge=W._fullLayout._invScaleX,Te=W._fullLayout._invScaleY;return B(le,ie,ge,Te),Q?le:le.node()};function k(N,U,q,Q,W){q||(q="xy");var X=Array.isArray(q)?q:[q],te=N._fullLayout,ee=te._plots||[],ie=ee[q],le=te._has("cartesian");if(ie){var ye=ie.overlays.map(function(sr){return sr.id});X=X.concat(ye)}for(var ue=X.length,pe=new Array(ue),ge=new Array(ue),Te=!1,_e=0;_e<ue;_e++){var De=X[_e];if(ee[De])Te=!0,pe[_e]=ee[De].xaxis,ge[_e]=ee[De].yaxis;else if(te[De]&&te[De]._subplot){var Oe=te[De]._subplot;pe[_e]=Oe.xaxis,ge[_e]=Oe.yaxis}else{A.warn("Unrecognized subplot: "+De);return}}var Ue=U.hovermode||te.hovermode;if(Ue&&!Te&&(Ue="closest"),["x","y","closest","x unified","y unified"].indexOf(Ue)===-1||!N.calcdata||N.querySelector(".zoombox")||N._dragging)return i.unhoverRaw(N,U);var xe=te.hoverdistance;xe===-1&&(xe=1/0);var Pe=te.spikedistance;Pe===-1&&(Pe=1/0);var Ve=[],Qe=[],Fe,Le,Ne,dt,Dt,Xt,Tt,zt,Ut,Et,Mt,rt,ct,Ze={hLinePoint:null,vLinePoint:null},ke=!1;if(Array.isArray(U))for(Ue="array",Ne=0;Ne<U.length;Ne++)Dt=N.calcdata[U[Ne].curveNumber||0],Dt&&(Xt=Dt[0].trace,Dt[0].trace.hoverinfo!=="skip"&&(Qe.push(Dt),Xt.orientation==="h"&&(ke=!0)));else{for(dt=0;dt<N.calcdata.length;dt++)Dt=N.calcdata[dt],Xt=Dt[0].trace,Xt.hoverinfo!=="skip"&&y.isTraceInSubplots(Xt,X)&&(Qe.push(Dt),Xt.orientation==="h"&&(ke=!0));var Ge=!W,Je,it;if(Ge)"xpx"in U?Je=U.xpx:Je=pe[0]._length/2,"ypx"in U?it=U.ypx:it=ge[0]._length/2;else{if(n.triggerHandler(N,"plotly_beforehover",U)===!1)return;var Pt=W.getBoundingClientRect();Je=U.clientX-Pt.left,it=U.clientY-Pt.top,te._calcInverseTransform(N);var At=A.apply3DTransform(te._invTransform)(Je,it);if(Je=At[0],it=At[1],Je<0||Je>pe[0]._length||it<0||it>ge[0]._length)return i.unhoverRaw(N,U)}if(U.pointerX=Je+pe[0]._offset,U.pointerY=it+ge[0]._offset,"xval"in U?Fe=y.flat(X,U.xval):Fe=y.p2c(pe,Je),"yval"in U?Le=y.flat(X,U.yval):Le=y.p2c(ge,it),!c(Fe[0])||!c(Le[0]))return A.warn("Fx.hover failed",U,N),i.unhoverRaw(N,U)}var Ot=1/0;function Jt(sr,Ir){for(dt=0;dt<Qe.length;dt++)if(Dt=Qe[dt],!(!Dt||!Dt[0]||!Dt[0].trace)&&(Xt=Dt[0].trace,!(Xt.visible!==!0||Xt._length===0)&&["carpet","contourcarpet"].indexOf(Xt._module.name)===-1)){if(Xt.type==="splom"?(zt=0,Tt=X[zt]):(Tt=y.getSubplot(Xt),zt=X.indexOf(Tt)),Ut=Ue,y.isUnifiedHover(Ut)&&(Ut=Ut.charAt(0)),rt={cd:Dt,trace:Xt,xa:pe[zt],ya:ge[zt],maxHoverDistance:xe,maxSpikeDistance:Pe,index:!1,distance:Math.min(Ot,xe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:o.defaultLine,name:Xt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},te[Tt]&&(rt.subplot=te[Tt]._subplot),te._splomScenes&&te._splomScenes[Xt.uid]&&(rt.scene=te._splomScenes[Xt.uid]),ct=Ve.length,Ut==="array"){var Zr=U[dt];"pointNumber"in Zr?(rt.index=Zr.pointNumber,Ut="closest"):(Ut="","xval"in Zr&&(Et=Zr.xval,Ut="x"),"yval"in Zr&&(Mt=Zr.yval,Ut=Ut?"closest":"y"))}else sr!==void 0&&Ir!==void 0?(Et=sr,Mt=Ir):(Et=Fe[zt],Mt=Le[zt]);if(xe!==0)if(Xt._module&&Xt._module.hoverPoints){var Lr=Xt._module.hoverPoints(rt,Et,Mt,Ut,{finiteRange:!0,hoverLayer:te._hoverlayer});if(Lr)for(var br,Nr=0;Nr<Lr.length;Nr++)br=Lr[Nr],c(br.x0)&&c(br.y0)&&Ve.push(F(br,Ue))}else A.log("Unrecognized trace type in hover:",Xt);if(Ue==="closest"&&Ve.length>ct&&(Ve.splice(0,ct),Ot=Ve[0].distance),le&&Pe!==0&&Ve.length===0){rt.distance=Pe,rt.index=!1;var kn=Xt._module.hoverPoints(rt,Et,Mt,"closest",{hoverLayer:te._hoverlayer});if(kn&&(kn=kn.filter(function(Aa){return Aa.spikeDistance<=Pe})),kn&&kn.length){var _n,Wn=kn.filter(function(Aa){return Aa.xa.showspikes&&Aa.xa.spikesnap!=="hovered data"});if(Wn.length){var Ln=Wn[0];c(Ln.x0)&&c(Ln.y0)&&(_n=qt(Ln),(!Ze.vLinePoint||Ze.vLinePoint.spikeDistance>_n.spikeDistance)&&(Ze.vLinePoint=_n))}var Xn=kn.filter(function(Aa){return Aa.ya.showspikes&&Aa.ya.spikesnap!=="hovered data"});if(Xn.length){var Kn=Xn[0];c(Kn.x0)&&c(Kn.y0)&&(_n=qt(Kn),(!Ze.hLinePoint||Ze.hLinePoint.spikeDistance>_n.spikeDistance)&&(Ze.hLinePoint=_n))}}}}}Jt();function Bt(sr,Ir,Zr){for(var Lr=null,br=1/0,Nr,kn=0;kn<sr.length;kn++)Nr=sr[kn].spikeDistance,Zr&&kn===0&&(Nr=-1/0),Nr<=br&&Nr<=Ir&&(Lr=sr[kn],br=Nr);return Lr}function qt(sr){return sr?{xa:sr.xa,ya:sr.ya,x:sr.xSpike!==void 0?sr.xSpike:(sr.x0+sr.x1)/2,y:sr.ySpike!==void 0?sr.ySpike:(sr.y0+sr.y1)/2,distance:sr.distance,spikeDistance:sr.spikeDistance,curveNumber:sr.trace.index,color:sr.color,pointNumber:sr.index}:null}var rr={fullLayout:te,container:te._hoverlayer,event:U},er=N._spikepoints,pr={vLinePoint:Ze.vLinePoint,hLinePoint:Ze.hLinePoint};N._spikepoints=pr;var Xr=function(){Ve.sort(function(sr,Ir){return sr.distance-Ir.distance}),Ve=G(Ve,Ue)};Xr();var hn=Ue.charAt(0),$r=(hn==="x"||hn==="y")&&Ve[0]&&S[Ve[0].trace.type];if(le&&Pe!==0&&Ve.length!==0){var nt=Ve.filter(function(sr){return sr.ya.showspikes}),Gt=Bt(nt,Pe,$r);Ze.hLinePoint=qt(Gt);var Kt=Ve.filter(function(sr){return sr.xa.showspikes}),Ht=Bt(Kt,Pe,$r);Ze.vLinePoint=qt(Ht)}if(Ve.length===0){var _r=i.unhoverRaw(N,U);return le&&(Ze.hLinePoint!==null||Ze.vLinePoint!==null)&&K(er)&&V(N,Ze,rr),_r}if(le&&K(er)&&V(N,Ze,rr),y.isXYhover(Ut)&&Ve[0].length!==0&&Ve[0].trace.type!=="splom"){var tt=Ve[0];L[tt.trace.type]?Ve=Ve.filter(function(sr){return sr.trace.index===tt.trace.index}):Ve=[tt];var je=Ve.length,st=Z("x",tt,te),ft=Z("y",tt,te);Jt(st,ft);var Me=[],Se={},Ke=0,Xe=function(sr){var Ir=L[sr.trace.type]?P(sr):sr.trace.index;if(!Se[Ir])Ke++,Se[Ir]=Ke,Me.push(sr);else{var Zr=Se[Ir]-1,Lr=Me[Zr];Zr>0&&Math.abs(sr.distance)<Math.abs(Lr.distance)&&(Me[Zr]=sr)}},ot;for(ot=0;ot<je;ot++)Xe(Ve[ot]);for(ot=Ve.length-1;ot>je-1;ot--)Xe(Ve[ot]);Ve=Me,Xr()}var pt=N._hoverdata,vt=[],Ct=re(N),St=se(N);for(Ne=0;Ne<Ve.length;Ne++){var Nt=Ve[Ne],ir=y.makeEventData(Nt,Nt.trace,Nt.cd);if(Nt.hovertemplate!==!1){var lr=!1;Nt.cd[Nt.index]&&Nt.cd[Nt.index].ht&&(lr=Nt.cd[Nt.index].ht),Nt.hovertemplate=lr||Nt.trace.hovertemplate||!1}if(Nt.xa&&Nt.ya){var Yr=Nt.x0+Nt.xa._offset,Pr=Nt.x1+Nt.xa._offset,wr=Nt.y0+Nt.ya._offset,Jr=Nt.y1+Nt.ya._offset,gr=Math.min(Yr,Pr),mr=Math.max(Yr,Pr),Ur=Math.min(wr,Jr),Hr=Math.max(wr,Jr);ir.bbox={x0:gr+St,x1:mr+St,y0:Ur+Ct,y1:Hr+Ct}}Nt.eventData=[ir],vt.push(ir)}N._hoverdata=vt;var Tr=Ue==="y"&&(Qe.length>1||Ve.length>1)||Ue==="closest"&&ke&&Ve.length>1,et=o.combine(te.plot_bgcolor||o.background,te.paper_bgcolor),Lt=I(Ve,{gd:N,hovermode:Ue,rotateLabels:Tr,bgColor:et,container:te._hoverlayer,outerContainer:te._paper.node(),commonLabelOpts:te.hoverlabel,hoverdistance:te.hoverdistance});if(y.isUnifiedHover(Ue)||(R(Lt,Tr?"xa":"ya",te),B(Lt,Tr,te._invScaleX,te._invScaleY)),W&&W.tagName){var jt=d.getComponentMethod("annotations","hasClickToShow")(N,vt);r(T.select(W),jt?"pointer":"")}!W||Q||!Y(N,U,pt)||(pt&&N.emit("plotly_unhover",{event:U,points:pt}),N.emit("plotly_hover",{event:U,points:N._hoverdata,xaxes:pe,yaxes:ge,xvals:Fe,yvals:Le}))}function P(N){return[N.trace.index,N.index,N.x0,N.y0,N.name,N.attr,N.xa?N.xa._id:"",N.ya?N.ya._id:""].join(",")}var z=/<extra>([\s\S]*)<\/extra>/;function I(N,U){var q=U.gd,Q=q._fullLayout,W=U.hovermode,X=U.rotateLabels,te=U.bgColor,ee=U.container,ie=U.outerContainer,le=U.commonLabelOpts||{};if(N.length===0)return[[]];var ye=U.fontFamily||v.HOVERFONT,ue=U.fontSize||v.HOVERFONTSIZE,pe=N[0],ge=pe.xa,Te=pe.ya,_e=W.charAt(0),De=pe[_e+"Label"],Oe=oe(q,ie),Ue=Oe.top,xe=Oe.width,Pe=Oe.height,Ve=De!==void 0&&pe.distance<=U.hoverdistance&&(W==="x"||W==="y");if(Ve){var Qe=!0,Fe,Le;for(Fe=0;Fe<N.length;Fe++)if(Qe&&N[Fe].zLabel===void 0&&(Qe=!1),Le=N[Fe].hoverinfo||N[Fe].trace.hoverinfo,Le){var Ne=Array.isArray(Le)?Le:Le.split("+");if(Ne.indexOf("all")===-1&&Ne.indexOf(W)===-1){Ve=!1;break}}Qe&&(Ve=!1)}var dt=ee.selectAll("g.axistext").data(Ve?[0]:[]);if(dt.enter().append("g").classed("axistext",!0),dt.exit().remove(),dt.each(function(){var Ht=T.select(this),_r=A.ensureSingle(Ht,"path","",function(Jr){Jr.style({"stroke-width":"1px"})}),tt=A.ensureSingle(Ht,"text","",function(Jr){Jr.attr("data-notex",1)}),je=le.bgcolor||o.defaultLine,st=le.bordercolor||o.contrast(je),ft=o.contrast(je),Me={family:le.font.family||ye,size:le.font.size||ue,color:le.font.color||ft};_r.style({fill:je,stroke:st}),tt.text(De).call(f.font,Me).call(t.positionText,0,0).call(t.convertToTspans,q),Ht.attr("transform","");var Se=oe(q,tt.node()),Ke,Xe;if(W==="x"){var ot=ge.side==="top"?"-":"";tt.attr("text-anchor","middle").call(t.positionText,0,ge.side==="top"?Ue-Se.bottom-m-u:Ue-Se.top+m+u),Ke=ge._offset+(pe.x0+pe.x1)/2,Xe=Te._offset+(ge.side==="top"?0:Te._length);var pt=Se.width/2+u;Ke<pt?(Ke=pt,_r.attr("d","M-"+(pt-m)+",0L-"+(pt-m*2)+","+ot+m+"H"+(u+Se.width/2)+"v"+ot+(u*2+Se.height)+"H-"+pt+"V"+ot+m+"Z")):Ke>Q.width-pt?(Ke=Q.width-pt,_r.attr("d","M"+(pt-m)+",0L"+pt+","+ot+m+"v"+ot+(u*2+Se.height)+"H-"+pt+"V"+ot+m+"H"+(pt-m*2)+"Z")):_r.attr("d","M0,0L"+m+","+ot+m+"H"+(u+Se.width/2)+"v"+ot+(u*2+Se.height)+"H-"+(u+Se.width/2)+"V"+ot+m+"H-"+m+"Z")}else{var vt,Ct,St;Te.side==="right"?(vt="start",Ct=1,St="",Ke=ge._offset+ge._length):(vt="end",Ct=-1,St="-",Ke=ge._offset),Xe=Te._offset+(pe.y0+pe.y1)/2,tt.attr("text-anchor",vt),_r.attr("d","M0,0L"+St+m+","+m+"V"+(u+Se.height/2)+"h"+St+(u*2+Se.width)+"V-"+(u+Se.height/2)+"H"+St+m+"V-"+m+"Z");var Nt=Se.height/2,ir=Ue-Se.top-Nt,lr="clip"+Q._uid+"commonlabel"+Te._id,Yr;if(Ke<Se.width+2*u+m){Yr="M-"+(m+u)+"-"+Nt+"h-"+(Se.width-u)+"V"+Nt+"h"+(Se.width-u)+"Z";var Pr=Se.width-Ke+u;t.positionText(tt,Pr,ir),vt==="end"&&tt.selectAll("tspan").each(function(){var Jr=T.select(this),gr=f.tester.append("text").text(Jr.text()).call(f.font,Me),mr=oe(q,gr.node());Math.round(mr.width)<Math.round(Se.width)&&Jr.attr("x",Pr-mr.width),gr.remove()})}else t.positionText(tt,Ct*(u+m),ir),Yr=null;var wr=Q._topclips.selectAll("#"+lr).data(Yr?[0]:[]);wr.enter().append("clipPath").attr("id",lr).append("path"),wr.exit().remove(),wr.select("path").attr("d",Yr),f.setClipUrl(tt,Yr?lr:null,q)}Ht.attr("transform",e(Ke,Xe))}),y.isUnifiedHover(W)){ee.selectAll("g.hovertext").remove();var Dt=N.filter(function(Ht){return Ht.hoverinfo!=="none"});if(Dt.length===0)return;var Xt=Q.hoverlabel,Tt=Xt.font,zt={showlegend:!0,legend:{title:{text:De,font:Tt},font:Tt,bgcolor:Xt.bgcolor,bordercolor:Xt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:Q.legend?Q.legend.traceorder:void 0,orientation:"v"}},Ut={font:Tt};x(zt,Ut,q._fullData);var Et=Ut.legend;Et.entries=[];for(var Mt=0;Mt<Dt.length;Mt++){var rt=Dt[Mt];if(rt.hoverinfo!=="none"){var ct=D(rt,!0,W,Q,De),Ze=ct[0],ke=ct[1];rt.name=ke,ke!==""?rt.text=ke+" : "+Ze:rt.text=Ze;var Ge=rt.cd[rt.index];Ge&&(Ge.mc&&(rt.mc=Ge.mc),Ge.mcc&&(rt.mc=Ge.mcc),Ge.mlc&&(rt.mlc=Ge.mlc),Ge.mlcc&&(rt.mlc=Ge.mlcc),Ge.mlw&&(rt.mlw=Ge.mlw),Ge.mrc&&(rt.mrc=Ge.mrc),Ge.dir&&(rt.dir=Ge.dir)),rt._distinct=!0,Et.entries.push([rt])}}Et.entries.sort(function(Ht,_r){return Ht[0].trace.index-_r[0].trace.index}),Et.layer=ee,Et._inHover=!0,Et._groupTitleFont=Xt.grouptitlefont,l(q,Et);var Je=ee.select("g.legend"),it=oe(q,Je.node()),Pt=it.width+2*u,At=it.height+2*u,Ot=Dt[0],Jt=(Ot.x0+Ot.x1)/2,Bt=(Ot.y0+Ot.y1)/2,qt=!(d.traceIs(Ot.trace,"bar-like")||d.traceIs(Ot.trace,"box-violin")),rr,er;_e==="y"?qt?(er=Bt-u,rr=Bt+u):(er=Math.min.apply(null,Dt.map(function(Ht){return Math.min(Ht.y0,Ht.y1)})),rr=Math.max.apply(null,Dt.map(function(Ht){return Math.max(Ht.y0,Ht.y1)}))):er=rr=A.mean(Dt.map(function(Ht){return(Ht.y0+Ht.y1)/2}))-At/2;var pr,Xr;_e==="x"?qt?(pr=Jt+u,Xr=Jt-u):(pr=Math.max.apply(null,Dt.map(function(Ht){return Math.max(Ht.x0,Ht.x1)})),Xr=Math.min.apply(null,Dt.map(function(Ht){return Math.min(Ht.x0,Ht.x1)}))):pr=Xr=A.mean(Dt.map(function(Ht){return(Ht.x0+Ht.x1)/2}))-Pt/2;var hn=ge._offset,$r=Te._offset;rr+=$r,pr+=hn,Xr+=hn-Pt,er+=$r-At;var nt,Gt;return pr+Pt<xe&&pr>=0?nt=pr:Xr+Pt<xe&&Xr>=0?nt=Xr:hn+Pt<xe?nt=hn:pr-Jt<Jt-Xr+Pt?nt=xe-Pt:nt=0,nt+=u,rr+At<Pe&&rr>=0?Gt=rr:er+At<Pe&&er>=0?Gt=er:$r+At<Pe?Gt=$r:rr-Bt<Bt-er+At?Gt=Pe-At:Gt=0,Gt+=u,Je.attr("transform",e(nt-1,Gt-1)),Je}var Kt=ee.selectAll("g.hovertext").data(N,function(Ht){return P(Ht)});return Kt.enter().append("g").classed("hovertext",!0).each(function(){var Ht=T.select(this);Ht.append("rect").call(o.fill,o.addOpacity(te,.8)),Ht.append("text").classed("name",!0),Ht.append("path").style("stroke-width","1px"),Ht.append("text").classed("nums",!0).call(f.font,ye,ue)}),Kt.exit().remove(),Kt.each(function(Ht){var _r=T.select(this).attr("transform",""),tt=Ht.color;Array.isArray(tt)&&(tt=tt[Ht.eventData[0].pointNumber]);var je=Ht.bgcolor||tt,st=o.combine(o.opacity(je)?je:o.defaultLine,te),ft=o.combine(o.opacity(tt)?tt:o.defaultLine,te),Me=Ht.borderColor||o.contrast(st),Se=D(Ht,Ve,W,Q,De,_r),Ke=Se[0],Xe=Se[1],ot=_r.select("text.nums").call(f.font,Ht.fontFamily||ye,Ht.fontSize||ue,Ht.fontColor||Me).text(Ke).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,q),pt=_r.select("text.name"),vt=0,Ct=0;if(Xe&&Xe!==Ke){pt.call(f.font,Ht.fontFamily||ye,Ht.fontSize||ue,ft).text(Xe).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,q);var St=oe(q,pt.node());vt=St.width+2*u,Ct=St.height+2*u}else pt.remove(),_r.select("rect").remove();_r.select("path").style({fill:st,stroke:Me});var Nt=Ht.xa._offset+(Ht.x0+Ht.x1)/2,ir=Ht.ya._offset+(Ht.y0+Ht.y1)/2,lr=Math.abs(Ht.x1-Ht.x0),Yr=Math.abs(Ht.y1-Ht.y0),Pr=oe(q,ot.node()),wr=Pr.width/Q._invScaleX,Jr=Pr.height/Q._invScaleY;Ht.ty0=(Ue-Pr.top)/Q._invScaleY,Ht.bx=wr+2*u,Ht.by=Math.max(Jr+2*u,Ct),Ht.anchor="start",Ht.txwidth=wr,Ht.tx2width=vt,Ht.offset=0;var gr=(wr+m+u+vt)*Q._invScaleX,mr,Ur;if(X)Ht.pos=Nt,mr=ir+Yr/2+gr<=Pe,Ur=ir-Yr/2-gr>=0,(Ht.idealAlign==="top"||!mr)&&Ur?(ir-=Yr/2,Ht.anchor="end"):mr?(ir+=Yr/2,Ht.anchor="start"):Ht.anchor="middle";else if(Ht.pos=ir,mr=Nt+lr/2+gr<=xe,Ur=Nt-lr/2-gr>=0,(Ht.idealAlign==="left"||!mr)&&Ur)Nt-=lr/2,Ht.anchor="end";else if(mr)Nt+=lr/2,Ht.anchor="start";else{Ht.anchor="middle";var Hr=gr/2,Tr=Nt+Hr-xe,et=Nt-Hr;Tr>0&&(Nt-=Tr),et<0&&(Nt+=-et)}ot.attr("text-anchor",Ht.anchor),vt&&pt.attr("text-anchor",Ht.anchor),_r.attr("transform",e(Nt,ir)+(X?a(_):""))}),Kt}function D(N,U,q,Q,W,X){var te="",ee="";N.nameOverride!==void 0&&(N.name=N.nameOverride),N.name&&(N.trace._meta&&(N.name=A.templateString(N.name,N.trace._meta)),te=J(N.name,N.nameLength));var ie=q.charAt(0),le=ie==="x"?"y":"x";N.zLabel!==void 0?(N.xLabel!==void 0&&(ee+="x: "+N.xLabel+"<br>"),N.yLabel!==void 0&&(ee+="y: "+N.yLabel+"<br>"),N.trace.type!=="choropleth"&&N.trace.type!=="choroplethmapbox"&&(ee+=(ee?"z: ":"")+N.zLabel)):U&&N[ie+"Label"]===W?ee=N[le+"Label"]||"":N.xLabel===void 0?N.yLabel!==void 0&&N.trace.type!=="scattercarpet"&&(ee=N.yLabel):N.yLabel===void 0?ee=N.xLabel:ee="("+N.xLabel+", "+N.yLabel+")",(N.text||N.text===0)&&!Array.isArray(N.text)&&(ee+=(ee?"<br>":"")+N.text),N.extraText!==void 0&&(ee+=(ee?"<br>":"")+N.extraText),X&&ee===""&&!N.hovertemplate&&(te===""&&X.remove(),ee=te);var ye=N.hovertemplate||!1;if(ye){var ue=N.hovertemplateLabels||N;N[ie+"Label"]!==W&&(ue[ie+"other"]=ue[ie+"Val"],ue[ie+"otherLabel"]=ue[ie+"Label"]),ee=A.hovertemplateString(ye,ue,Q._d3locale,N.eventData[0]||{},N.trace._meta),ee=ee.replace(z,function(pe,ge){return te=J(ge,N.nameLength),""})}return[ee,te]}function R(N,U,q){var Q=0,W=1,X=N.size(),te=new Array(X),ee=0;N.each(function(Fe){var Le=Fe[U],Ne=Le._id.charAt(0)==="x",dt=Le.range;ee===0&&dt&&dt[0]>dt[1]!==Ne&&(W=-1),te[ee++]=[{datum:Fe,traceIndex:Fe.trace.index,dp:0,pos:Fe.pos,posref:Fe.posref,size:Fe.by*(Ne?w:1)/2,pmin:0,pmax:Ne?q.width:q.height}]}),te.sort(function(Fe,Le){return Fe[0].posref-Le[0].posref||W*(Le[0].traceIndex-Fe[0].traceIndex)});var ie,le,ye,ue,pe,ge,Te;function _e(Fe){var Le=Fe[0],Ne=Fe[Fe.length-1];if(le=Le.pmin-Le.pos-Le.dp+Le.size,ye=Ne.pos+Ne.dp+Ne.size-Le.pmax,le>.01){for(pe=Fe.length-1;pe>=0;pe--)Fe[pe].dp+=le;ie=!1}if(!(ye<.01)){if(le<-.01){for(pe=Fe.length-1;pe>=0;pe--)Fe[pe].dp-=ye;ie=!1}if(!!ie){var dt=0;for(ue=0;ue<Fe.length;ue++)ge=Fe[ue],ge.pos+ge.dp+ge.size>Le.pmax&&dt++;for(ue=Fe.length-1;ue>=0&&!(dt<=0);ue--)ge=Fe[ue],ge.pos>Le.pmax-1&&(ge.del=!0,dt--);for(ue=0;ue<Fe.length&&!(dt<=0);ue++)if(ge=Fe[ue],ge.pos<Le.pmin+1)for(ge.del=!0,dt--,ye=ge.size*2,pe=Fe.length-1;pe>=0;pe--)Fe[pe].dp-=ye;for(ue=Fe.length-1;ue>=0&&!(dt<=0);ue--)ge=Fe[ue],ge.pos+ge.dp+ge.size>Le.pmax&&(ge.del=!0,dt--)}}}for(;!ie&&Q<=X;){for(Q++,ie=!0,ue=0;ue<te.length-1;){var De=te[ue],Oe=te[ue+1],Ue=De[De.length-1],xe=Oe[0];if(le=Ue.pos+Ue.dp+Ue.size-xe.pos-xe.dp+xe.size,le>.01&&Ue.pmin===xe.pmin&&Ue.pmax===xe.pmax){for(pe=Oe.length-1;pe>=0;pe--)Oe[pe].dp+=le;for(De.push.apply(De,Oe),te.splice(ue+1,1),Te=0,pe=De.length-1;pe>=0;pe--)Te+=De[pe].dp;for(ye=Te/De.length,pe=De.length-1;pe>=0;pe--)De[pe].dp-=ye;ie=!1}else ue++}te.forEach(_e)}for(ue=te.length-1;ue>=0;ue--){var Pe=te[ue];for(pe=Pe.length-1;pe>=0;pe--){var Ve=Pe[pe],Qe=Ve.datum;Qe.offset=Ve.dp,Qe.del=Ve.del}}}function B(N,U,q,Q){var W=function(te){return te*q},X=function(te){return te*Q};N.each(function(te){var ee=T.select(this);if(te.del)return ee.remove();var ie=ee.select("text.nums"),le=te.anchor,ye=le==="end"?-1:1,ue={start:1,end:-1,middle:0}[le],pe=ue*(m+u),ge=pe+ue*(te.txwidth+u),Te=0,_e=te.offset,De=le==="middle";De&&(pe-=te.tx2width/2,ge+=te.txwidth/2+u),U&&(_e*=-h,Te=te.offset*b),ee.select("path").attr("d",De?"M-"+W(te.bx/2+te.tx2width/2)+","+X(_e-te.by/2)+"h"+W(te.bx)+"v"+X(te.by)+"h-"+W(te.bx)+"Z":"M0,0L"+W(ye*m+Te)+","+X(m+_e)+"v"+X(te.by/2-m)+"h"+W(ye*te.bx)+"v-"+X(te.by)+"H"+W(ye*m+Te)+"V"+X(_e-m)+"Z");var Oe=Te+pe,Ue=_e+te.ty0-te.by/2+u,xe=te.textAlign||"auto";xe!=="auto"&&(xe==="left"&&le!=="start"?(ie.attr("text-anchor","start"),Oe=De?-te.bx/2-te.tx2width/2+u:-te.bx-u):xe==="right"&&le!=="end"&&(ie.attr("text-anchor","end"),Oe=De?te.bx/2-te.tx2width/2-u:te.bx+u)),ie.call(t.positionText,W(Oe),X(Ue)),te.tx2width&&(ee.select("text.name").call(t.positionText,W(ge+ue*u+Te),X(_e+te.ty0-te.by/2+u)),ee.select("rect").call(f.setRect,W(ge+(ue-1)*te.tx2width/2+Te),X(_e-te.by/2-1),W(te.tx2width),X(te.by+2)))})}function F(N,U){var q=N.index,Q=N.trace||{},W=N.cd[0],X=N.cd[q]||{};function te(pe){return pe||c(pe)&&pe===0}var ee=Array.isArray(q)?function(pe,ge){var Te=A.castOption(W,q,pe);return te(Te)?Te:A.extractOption({},Q,"",ge)}:function(pe,ge){return A.extractOption(X,Q,pe,ge)};function ie(pe,ge,Te){var _e=ee(ge,Te);te(_e)&&(N[pe]=_e)}if(ie("hoverinfo","hi","hoverinfo"),ie("bgcolor","hbg","hoverlabel.bgcolor"),ie("borderColor","hbc","hoverlabel.bordercolor"),ie("fontFamily","htf","hoverlabel.font.family"),ie("fontSize","hts","hoverlabel.font.size"),ie("fontColor","htc","hoverlabel.font.color"),ie("nameLength","hnl","hoverlabel.namelength"),ie("textAlign","hta","hoverlabel.align"),N.posref=U==="y"||U==="closest"&&Q.orientation==="h"?N.xa._offset+(N.x0+N.x1)/2:N.ya._offset+(N.y0+N.y1)/2,N.x0=A.constrain(N.x0,0,N.xa._length),N.x1=A.constrain(N.x1,0,N.xa._length),N.y0=A.constrain(N.y0,0,N.ya._length),N.y1=A.constrain(N.y1,0,N.ya._length),N.xLabelVal!==void 0&&(N.xLabel="xLabel"in N?N.xLabel:p.hoverLabelText(N.xa,N.xLabelVal,Q.xhoverformat),N.xVal=N.xa.c2d(N.xLabelVal)),N.yLabelVal!==void 0&&(N.yLabel="yLabel"in N?N.yLabel:p.hoverLabelText(N.ya,N.yLabelVal,Q.yhoverformat),N.yVal=N.ya.c2d(N.yLabelVal)),N.zLabelVal!==void 0&&N.zLabel===void 0&&(N.zLabel=String(N.zLabelVal)),!isNaN(N.xerr)&&!(N.xa.type==="log"&&N.xerr<=0)){var le=p.tickText(N.xa,N.xa.c2l(N.xerr),"hover").text;N.xerrneg!==void 0?N.xLabel+=" +"+le+" / -"+p.tickText(N.xa,N.xa.c2l(N.xerrneg),"hover").text:N.xLabel+=" \xB1 "+le,U==="x"&&(N.distance+=1)}if(!isNaN(N.yerr)&&!(N.ya.type==="log"&&N.yerr<=0)){var ye=p.tickText(N.ya,N.ya.c2l(N.yerr),"hover").text;N.yerrneg!==void 0?N.yLabel+=" +"+ye+" / -"+p.tickText(N.ya,N.ya.c2l(N.yerrneg),"hover").text:N.yLabel+=" \xB1 "+ye,U==="y"&&(N.distance+=1)}var ue=N.hoverinfo||N.trace.hoverinfo;return ue&&ue!=="all"&&(ue=Array.isArray(ue)?ue:ue.split("+"),ue.indexOf("x")===-1&&(N.xLabel=void 0),ue.indexOf("y")===-1&&(N.yLabel=void 0),ue.indexOf("z")===-1&&(N.zLabel=void 0),ue.indexOf("text")===-1&&(N.text=void 0),ue.indexOf("name")===-1&&(N.name=void 0)),N}function V(N,U,q){var Q=q.container,W=q.fullLayout,X=W._size,te=q.event,ee=!!U.hLinePoint,ie=!!U.vLinePoint,le,ye;if(Q.selectAll(".spikeline").remove(),!!(ie||ee)){var ue=o.combine(W.plot_bgcolor,W.paper_bgcolor);if(ee){var pe=U.hLinePoint,ge,Te;le=pe&&pe.xa,ye=pe&&pe.ya;var _e=ye.spikesnap;_e==="cursor"?(ge=te.pointerX,Te=te.pointerY):(ge=le._offset+pe.x,Te=ye._offset+pe.y);var De=M.readability(pe.color,ue)<1.5?o.contrast(ue):pe.color,Oe=ye.spikemode,Ue=ye.spikethickness,xe=ye.spikecolor||De,Pe=p.getPxPosition(N,ye),Ve,Qe;if(Oe.indexOf("toaxis")!==-1||Oe.indexOf("across")!==-1){if(Oe.indexOf("toaxis")!==-1&&(Ve=Pe,Qe=ge),Oe.indexOf("across")!==-1){var Fe=ye._counterDomainMin,Le=ye._counterDomainMax;ye.anchor==="free"&&(Fe=Math.min(Fe,ye.position),Le=Math.max(Le,ye.position)),Ve=X.l+Fe*X.w,Qe=X.l+Le*X.w}Q.insert("line",":first-child").attr({x1:Ve,x2:Qe,y1:Te,y2:Te,"stroke-width":Ue,stroke:xe,"stroke-dasharray":f.dashStyle(ye.spikedash,Ue)}).classed("spikeline",!0).classed("crisp",!0),Q.insert("line",":first-child").attr({x1:Ve,x2:Qe,y1:Te,y2:Te,"stroke-width":Ue+2,stroke:ue}).classed("spikeline",!0).classed("crisp",!0)}Oe.indexOf("marker")!==-1&&Q.insert("circle",":first-child").attr({cx:Pe+(ye.side!=="right"?Ue:-Ue),cy:Te,r:Ue,fill:xe}).classed("spikeline",!0)}if(ie){var Ne=U.vLinePoint,dt,Dt;le=Ne&&Ne.xa,ye=Ne&&Ne.ya;var Xt=le.spikesnap;Xt==="cursor"?(dt=te.pointerX,Dt=te.pointerY):(dt=le._offset+Ne.x,Dt=ye._offset+Ne.y);var Tt=M.readability(Ne.color,ue)<1.5?o.contrast(ue):Ne.color,zt=le.spikemode,Ut=le.spikethickness,Et=le.spikecolor||Tt,Mt=p.getPxPosition(N,le),rt,ct;if(zt.indexOf("toaxis")!==-1||zt.indexOf("across")!==-1){if(zt.indexOf("toaxis")!==-1&&(rt=Mt,ct=Dt),zt.indexOf("across")!==-1){var Ze=le._counterDomainMin,ke=le._counterDomainMax;le.anchor==="free"&&(Ze=Math.min(Ze,le.position),ke=Math.max(ke,le.position)),rt=X.t+(1-ke)*X.h,ct=X.t+(1-Ze)*X.h}Q.insert("line",":first-child").attr({x1:dt,x2:dt,y1:rt,y2:ct,"stroke-width":Ut,stroke:Et,"stroke-dasharray":f.dashStyle(le.spikedash,Ut)}).classed("spikeline",!0).classed("crisp",!0),Q.insert("line",":first-child").attr({x1:dt,x2:dt,y1:rt,y2:ct,"stroke-width":Ut+2,stroke:ue}).classed("spikeline",!0).classed("crisp",!0)}zt.indexOf("marker")!==-1&&Q.insert("circle",":first-child").attr({cx:dt,cy:Mt-(le.side!=="top"?Ut:-Ut),r:Ut,fill:Et}).classed("spikeline",!0)}}}function Y(N,U,q){if(!q||q.length!==N._hoverdata.length)return!0;for(var Q=q.length-1;Q>=0;Q--){var W=q[Q],X=N._hoverdata[Q];if(W.curveNumber!==X.curveNumber||String(W.pointNumber)!==String(X.pointNumber)||String(W.pointNumbers)!==String(X.pointNumbers))return!0}return!1}function K(N,U){return!U||U.vLinePoint!==N._spikepoints.vLinePoint||U.hLinePoint!==N._spikepoints.hLinePoint}function J(N,U){return t.plainText(N||"",{len:U,allowedTags:["br","sub","sup","b","i","em"]})}function G(N,U){for(var q=U.charAt(0),Q=[],W=[],X=[],te=0;te<N.length;te++){var ee=N[te];d.traceIs(ee.trace,"bar-like")||d.traceIs(ee.trace,"box-violin")?X.push(ee):ee.trace[q+"period"]?W.push(ee):Q.push(ee)}return Q.concat(W).concat(X)}function Z(N,U,q){var Q=U[N+"a"],W=U[N+"Val"],X=U.cd[0];if(Q.type==="category")W=Q._categoriesMap[W];else if(Q.type==="date"){var te=U.trace[N+"periodalignment"];if(te){var ee=U.cd[U.index],ie=ee[N+"Start"];ie===void 0&&(ie=ee[N]);var le=ee[N+"End"];le===void 0&&(le=ee[N]);var ye=le-ie;te==="end"?W+=ye:te==="middle"&&(W+=ye/2)}W=Q.d2c(W)}return X&&X.t&&X.t.posLetter===Q._id&&(q.boxmode==="group"||q.violinmode==="group")&&(W+=X.t.dPos),W}function re(N){return N.offsetTop+N.clientTop}function se(N){return N.offsetLeft+N.clientLeft}function oe(N,U){var q=N._fullLayout,Q=U.getBoundingClientRect(),W=Q.x,X=Q.y,te=W+Q.width,ee=X+Q.height,ie=A.apply3DTransform(q._invTransform)(W,X),le=A.apply3DTransform(q._invTransform)(te,ee),ye=ie[0],ue=ie[1],pe=le[0],ge=le[1];return{x:ye,y:ue,width:pe-ye,height:ge-ue,top:Math.min(ue,ge),left:Math.min(ye,pe),right:Math.max(ye,pe),bottom:Math.max(ue,ge)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(g,ne,ae){var T=g("../../lib"),c=g("../color"),M=g("./helpers").isUnifiedHover;ne.exports=function(e,a,n,t){t=t||{};var r=a.legend;function f(o){t.font[o]||(t.font[o]=r?a.legend.font[o]:a.font[o])}a&&M(a.hovermode)&&(t.font||(t.font={}),f("size"),f("family"),f("color"),r?(t.bgcolor||(t.bgcolor=c.combine(a.legend.bgcolor,a.paper_bgcolor)),t.bordercolor||(t.bordercolor=a.legend.bordercolor)):t.bgcolor||(t.bgcolor=a.paper_bgcolor)),n("hoverlabel.bgcolor",t.bgcolor),n("hoverlabel.bordercolor",t.bordercolor),n("hoverlabel.namelength",t.namelength),T.coerceFont(n,"hoverlabel.font",t.font),n("hoverlabel.align",t.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(g,ne,ae){var T=g("../../lib"),c=g("./layout_attributes");ne.exports=function(A,e){function a(n,t){return e[n]!==void 0?e[n]:T.coerce(A,e,c,n,t)}return a("clickmode"),a("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=g("../dragelement"),A=g("./helpers"),e=g("./layout_attributes"),a=g("./hover");ne.exports={moduleType:"component",name:"fx",constants:g("./constants"),schema:{layout:e},attributes:g("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:g("./layout_global_defaults"),supplyDefaults:g("./defaults"),supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc"),getDistanceFunction:A.getDistanceFunction,getClosest:A.getClosest,inbox:A.inbox,quadrature:A.quadrature,appendArrayPointValue:A.appendArrayPointValue,castHoverOption:t,castHoverinfo:r,hover:a.hover,unhover:M.unhover,loneHover:a.loneHover,loneUnhover:n,click:g("./click")};function n(f){var o=c.isD3Selection(f)?f:T.select(f);o.selectAll("g.hovertext").remove(),o.selectAll(".spikeline").remove()}function t(f,o,i){return c.castOption(f,o,"hoverlabel."+i)}function r(f,o,i){function p(d){return c.coerceHoverinfo({hoverinfo:d},{_module:f._module},o)}return c.castOption(f,i,"hoverinfo",p)}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(g,ne,ae){var T=g("./constants"),c=g("../../plots/font_attributes"),M=c({editType:"none"});M.family.dflt=T.HOVERFONT,M.size.dflt=T.HOVERFONTSIZE,ne.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:M,grouptitlefont:c({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(g,ne,ae){var T=g("../../lib"),c=g("./layout_attributes"),M=g("./hovermode_defaults"),A=g("./hoverlabel_defaults");ne.exports=function(a,n){function t(d,y){return T.coerce(a,n,c,d,y)}var r=M(a,n);r&&(t("hoverdistance"),t("spikedistance"));var f=t("dragmode");f==="select"&&t("selectdirection");var o=n._has("mapbox"),i=n._has("geo"),p=n._basePlotModules.length;n.dragmode==="zoom"&&((o||i)&&p===1||o&&i&&p===2)&&(n.dragmode="pan"),A(a,n,t),T.coerceFont(t,"hoverlabel.grouptitlefont",n.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(g,ne,ae){var T=g("../../lib"),c=g("./hoverlabel_defaults"),M=g("./layout_attributes");ne.exports=function(e,a){function n(t,r){return T.coerce(e,a,M,t,r)}c(e,a,n)}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(g,ne,ae){var T=g("../../lib"),c=g("../../lib/regex").counter,M=g("../../plots/domain").attributes,A=g("../../plots/cartesian/constants").idRegex,e=g("../../plot_api/plot_template"),a={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[c("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[A.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[A.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:M({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function n(i,p,d){var y=p[d+"axes"],v=Object.keys((i._splomAxes||{})[d]||{});if(Array.isArray(y))return y;if(v.length)return v}function t(i,p){var d=i.grid||{},y=n(p,d,"x"),v=n(p,d,"y");if(!i.grid&&!y&&!v)return;var x=Array.isArray(d.subplots)&&Array.isArray(d.subplots[0]),l=Array.isArray(y),_=Array.isArray(v),s=l&&y!==d.xaxes&&_&&v!==d.yaxes,w,b;x?(w=d.subplots.length,b=d.subplots[0].length):(_&&(w=v.length),l&&(b=y.length));var h=e.newContainer(p,"grid");function m(B,F){return T.coerce(d,h,a,B,F)}var u=m("rows",w),L=m("columns",b);if(!(u*L>1)){delete p.grid;return}if(!x&&!l&&!_){var S=m("pattern")==="independent";S&&(x=!0)}h._hasSubplotGrid=x;var k=m("roworder"),P=k==="top to bottom",z=x?.2:.1,I=x?.3:.1,D,R;s&&p._splomGridDflt&&(D=p._splomGridDflt.xside,R=p._splomGridDflt.yside),h._domains={x:r("x",m,z,D,L),y:r("y",m,I,R,u,P)}}function r(i,p,d,y,v,x){var l=p(i+"gap",d),_=p("domain."+i);p(i+"side",y);for(var s=new Array(v),w=_[0],b=(_[1]-w)/(v-l),h=b*(1-l),m=0;m<v;m++){var u=w+b*m;s[x?v-1-m:m]=[u,u+h]}return s}function f(i,p){var d=p.grid;if(!(!d||!d._domains)){var y=i.grid||{},v=p._subplots,x=d._hasSubplotGrid,l=d.rows,_=d.columns,s=d.pattern==="independent",w,b,h,m,u,L,S,k=d._axisMap={};if(x){var P=y.subplots||[];L=d.subplots=new Array(l);var z=1;for(w=0;w<l;w++){var I=L[w]=new Array(_),D=P[w]||[];for(b=0;b<_;b++)if(s?(u=z===1?"xy":"x"+z+"y"+z,z++):u=D[b],I[b]="",v.cartesian.indexOf(u)!==-1){if(S=u.indexOf("y"),h=u.slice(0,S),m=u.slice(S),k[h]!==void 0&&k[h]!==b||k[m]!==void 0&&k[m]!==w)continue;I[b]=u,k[h]=b,k[m]=w}}}else{var R=n(p,y,"x"),B=n(p,y,"y");d.xaxes=o(R,v.xaxis,_,k,"x"),d.yaxes=o(B,v.yaxis,l,k,"y")}var F=d._anchors={},V=d.roworder==="top to bottom";for(var Y in k){var K=Y.charAt(0),J=d[K+"side"],G,Z,re;if(J.length<8)F[Y]="free";else if(K==="x"){if(J.charAt(0)==="t"===V?(G=0,Z=1,re=l):(G=l-1,Z=-1,re=-1),x){var se=k[Y];for(w=G;w!==re;w+=Z)if(u=L[w][se],!!u&&(S=u.indexOf("y"),u.slice(0,S)===Y)){F[Y]=u.slice(S);break}}else for(w=G;w!==re;w+=Z)if(m=d.yaxes[w],v.cartesian.indexOf(Y+m)!==-1){F[Y]=m;break}}else if(J.charAt(0)==="l"?(G=0,Z=1,re=_):(G=_-1,Z=-1,re=-1),x){var oe=k[Y];for(w=G;w!==re;w+=Z)if(u=L[oe][w],!!u&&(S=u.indexOf("y"),u.slice(S)===Y)){F[Y]=u.slice(0,S);break}}else for(w=G;w!==re;w+=Z)if(h=d.xaxes[w],v.cartesian.indexOf(h+Y)!==-1){F[Y]=h;break}}}}function o(i,p,d,y,v){var x=new Array(d),l;function _(s,w){p.indexOf(w)!==-1&&y[w]===void 0?(x[s]=w,y[w]=s):x[s]=""}if(Array.isArray(i))for(l=0;l<d;l++)_(l,i[l]);else for(_(0,v),l=1;l<d;l++)_(l,v+(l+1));return x}ne.exports={moduleType:"component",name:"grid",schema:{layout:{grid:a}},layoutAttributes:a,sizeDefaults:t,contentDefaults:f}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(g,ne,ae){var T=g("../../plots/cartesian/constants"),c=g("../../plot_api/plot_template").templatedArray;g("../../constants/axis_placeable_objects"),ne.exports=c("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",T.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",T.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib/to_log_range");ne.exports=function(A,e,a,n){e=e||{};var t=a==="log"&&e.type==="linear",r=a==="linear"&&e.type==="log";if(!!(t||r)){for(var f=A._fullLayout.images,o=e._id.charAt(0),i,p,d=0;d<f.length;d++)if(i=f[d],p="images["+d+"].",i[o+"ref"]===e._id){var y=i[o],v=i["size"+o],x=null,l=null;if(t){x=c(y,e.range);var _=v/Math.pow(10,x)/2;l=2*Math.log(_+Math.sqrt(1+_*_))/Math.LN10}else x=Math.pow(10,y),l=x*(Math.pow(10,v/2)-Math.pow(10,-v/2));T(x)?T(l)||(l=null):(x=null,l=null),n(p+o,x),n(p+"size"+o,l)}}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/cartesian/axes"),M=g("../../plots/array_container_defaults"),A=g("./attributes"),e="images";ne.exports=function(t,r){var f={name:e,handleItemDefaults:a};M(t,r,f)};function a(n,t,r){function f(_,s){return T.coerce(n,t,A,_,s)}var o=f("source"),i=f("visible",!!o);if(!i)return t;f("layer"),f("xanchor"),f("yanchor"),f("sizex"),f("sizey"),f("sizing"),f("opacity");for(var p={_fullLayout:r},d=["x","y"],y=0;y<2;y++){var v=d[y],x=c.coerceRef(n,t,p,v,"paper",void 0);if(x!=="paper"){var l=c.getFromId(p,x);l._imgIndices.push(t._index)}c.coercePosition(t,p,f,x,v,0)}return t}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../drawing"),M=g("../../plots/cartesian/axes"),A=g("../../plots/cartesian/axis_ids"),e=g("../../constants/xmlns_namespaces");ne.exports=function(n){var t=n._fullLayout,r=[],f={},o=[],i,p;for(p=0;p<t.images.length;p++){var d=t.images[p];if(d.visible)if(d.layer==="below"&&d.xref!=="paper"&&d.yref!=="paper"){i=A.ref2id(d.xref)+A.ref2id(d.yref);var y=t._plots[i];if(!y){o.push(d);continue}y.mainplot&&(i=y.mainplot.id),f[i]||(f[i]=[]),f[i].push(d)}else d.layer==="above"?r.push(d):o.push(d)}var v={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function x(m){var u=T.select(this);if(this._imgSrc!==m.source)if(u.attr("xmlns",e.svg),m.source&&m.source.slice(0,5)==="data:")u.attr("xlink:href",m.source),this._imgSrc=m.source;else{var L=new Promise(function(S){var k=new Image;this.img=k,k.setAttribute("crossOrigin","anonymous"),k.onerror=P,k.onload=function(){var z=document.createElement("canvas");z.width=this.width,z.height=this.height;var I=z.getContext("2d",{willReadFrequently:!0});I.drawImage(this,0,0);var D=z.toDataURL("image/png");u.attr("xlink:href",D),S()},u.on("error",P),k.src=m.source,this._imgSrc=m.source;function P(){u.remove(),S()}}.bind(this));n._promises.push(L)}}function l(m){var u=T.select(this),L=M.getFromId(n,m.xref),S=M.getFromId(n,m.yref),k=M.getRefType(m.xref)==="domain",P=M.getRefType(m.yref)==="domain",z=t._size,I,D;L!==void 0?I=typeof m.xref=="string"&&k?L._length*m.sizex:Math.abs(L.l2p(m.sizex)-L.l2p(0)):I=m.sizex*z.w,S!==void 0?D=typeof m.yref=="string"&&P?S._length*m.sizey:Math.abs(S.l2p(m.sizey)-S.l2p(0)):D=m.sizey*z.h;var R=I*v.x[m.xanchor].offset,B=D*v.y[m.yanchor].offset,F=v.x[m.xanchor].sizing+v.y[m.yanchor].sizing,V,Y;switch(L!==void 0?V=typeof m.xref=="string"&&k?L._length*m.x+L._offset:L.r2p(m.x)+L._offset:V=m.x*z.w+z.l,V+=R,S!==void 0?Y=typeof m.yref=="string"&&P?S._length*(1-m.y)+S._offset:S.r2p(m.y)+S._offset:Y=z.h-m.y*z.h+z.t,Y+=B,m.sizing){case"fill":F+=" slice";break;case"stretch":F="none";break}u.attr({x:V,y:Y,width:I,height:D,preserveAspectRatio:F,opacity:m.opacity});var K=L&&M.getRefType(m.xref)!=="domain"?L._id:"",J=S&&M.getRefType(m.yref)!=="domain"?S._id:"",G=K+J;c.setClipUrl(u,G?"clip"+t._uid+G:null,n)}var _=t._imageLowerLayer.selectAll("image").data(o),s=t._imageUpperLayer.selectAll("image").data(r);_.enter().append("image"),s.enter().append("image"),_.exit().remove(),s.exit().remove(),_.each(function(m){x.bind(this)(m),l.bind(this)(m)}),s.each(function(m){x.bind(this)(m),l.bind(this)(m)});var w=Object.keys(t._plots);for(p=0;p<w.length;p++){i=w[p];var b=t._plots[i];if(!!b.imagelayer){var h=b.imagelayer.selectAll("image").data(f[i]||[]);h.enter().append("image"),h.exit().remove(),h.each(function(m){x.bind(this)(m),l.bind(this)(m)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(g,ne,ae){ne.exports={moduleType:"component",name:"images",layoutAttributes:g("./attributes"),supplyLayoutDefaults:g("./defaults"),includeBasePlot:g("../../plots/cartesian/include_components")("images"),draw:g("./draw"),convertCoords:g("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(g,ne,ae){var T=g("../../plots/font_attributes"),c=g("../color/attributes");ne.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:T({editType:"legend"}),grouptitlefont:T({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:T({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(g,ne,ae){ne.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(g,ne,ae){var T=g("../../registry"),c=g("../../lib"),M=g("../../plot_api/plot_template"),A=g("../../plots/attributes"),e=g("./attributes"),a=g("../../plots/layout_attributes"),n=g("./helpers");ne.exports=function(r,f,o){var i=r.legend||{},p=M.newContainer(f,"legend");function d(D,R){return c.coerce(i,p,e,D,R)}for(var y,v=function(D,R){var B=y._input,F=y;return c.coerce(B,F,A,D,R)},x=f.font||{},l=c.coerceFont(d,"grouptitlefont",c.extendFlat({},x,{size:Math.round(x.size*1.1)})),_=0,s=!1,w="normal",b=0;b<o.length;b++)y=o[b],!!y.visible&&((y.showlegend||y._dfltShowLegend&&!(y._module&&y._module.attributes&&y._module.attributes.showlegend&&y._module.attributes.showlegend.dflt===!1))&&(_++,y.showlegend&&(s=!0,(T.traceIs(y,"pie-like")||y._input.showlegend===!0)&&_++),c.coerceFont(v,"legendgrouptitle.font",l)),(T.traceIs(y,"bar")&&f.barmode==="stack"||["tonextx","tonexty"].indexOf(y.fill)!==-1)&&(w=n.isGrouped({traceorder:w})?"grouped+reversed":"reversed"),y.legendgroup!==void 0&&y.legendgroup!==""&&(w=n.isReversed({traceorder:w})?"reversed+grouped":"grouped"));var h=c.coerce(r,f,a,"showlegend",s&&_>1);if(h===!1&&(f.legend=void 0),!(h===!1&&!i.uirevision)&&(d("uirevision",f.uirevision),h!==!1)){d("bgcolor",f.paper_bgcolor),d("bordercolor"),d("borderwidth");var m=c.coerceFont(d,"font",f.font),u=d("orientation"),L=u==="h",S,k,P;L?(S=0,T.getComponentMethod("rangeslider","isVisible")(r.xaxis)?(k=1.1,P="bottom"):(k=-.1,P="top")):(S=1.02,k=1,P="auto"),d("traceorder",w),n.isGrouped(f.legend)&&d("tracegroupgap"),d("itemsizing"),d("itemwidth"),d("itemclick"),d("itemdoubleclick"),d("groupclick"),d("x",S),d("xanchor"),d("y",k),d("yanchor",P),d("valign"),c.noneOrAll(i,p,["x","y"]);var z=d("title.text");if(z){d("title.side",L?"left":"top");var I=c.extendFlat({},m,{size:c.bigFont(m.size)});c.coerceFont(d,"title.font",I)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=g("../../plots/plots"),A=g("../../registry"),e=g("../../lib/events"),a=g("../dragelement"),n=g("../drawing"),t=g("../color"),r=g("../../lib/svg_text_utils"),f=g("./handle_click"),o=g("./constants"),i=g("../../constants/alignment"),p=i.LINE_SPACING,d=i.FROM_TL,y=i.FROM_BR,v=g("./get_legend_data"),x=g("./style"),l=g("./helpers"),_=1;ne.exports=function(R,B){return B||(B=R._fullLayout.legend||{}),s(R,B)};function s(D,R){var B=D._fullLayout,F="legend"+B._uid,V,Y=R._inHover;if(Y?(V=R.layer,F+="-hover"):V=B._infolayer,!!V){D._legendMouseDownTime||(D._legendMouseDownTime=0);var K;if(Y){if(!R.entries)return;K=v(R.entries,R)}else{if(!D.calcdata)return;K=B.showlegend&&v(D.calcdata,R)}var J=B.hiddenlabels||[];if(!Y&&(!B.showlegend||!K.length))return V.selectAll(".legend").remove(),B._topdefs.select("#"+F).remove(),M.autoMargin(D,"legend");var G=c.ensureSingle(V,"g","legend",function(W){Y||W.attr("pointer-events","all")}),Z=c.ensureSingleById(B._topdefs,"clipPath",F,function(W){W.append("rect")}),re=c.ensureSingle(G,"rect","bg",function(W){W.attr("shape-rendering","crispEdges")});re.call(t.stroke,R.bordercolor).call(t.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px");var se=c.ensureSingle(G,"g","scrollbox"),oe=R.title;if(R._titleWidth=0,R._titleHeight=0,oe.text){var N=c.ensureSingle(se,"text","legendtitletext");N.attr("text-anchor","start").call(n.font,oe.font).text(oe.text),u(N,se,D,R,_)}else se.selectAll(".legendtitletext").remove();var U=c.ensureSingle(G,"rect","scrollbar",function(W){W.attr(o.scrollBarEnterAttrs).call(t.fill,o.scrollBarColor)}),q=se.selectAll("g.groups").data(K);q.enter().append("g").attr("class","groups"),q.exit().remove();var Q=q.selectAll("g.traces").data(c.identity);Q.enter().append("g").attr("class","traces"),Q.exit().remove(),Q.style("opacity",function(W){var X=W[0].trace;return A.traceIs(X,"pie-like")?J.indexOf(W[0].label)!==-1?.5:1:X.visible==="legendonly"?.5:1}).each(function(){T.select(this).call(b,D,R)}).call(x,D,R).each(function(){Y||T.select(this).call(m,D)}),c.syncOrAsync([M.previousPromises,function(){return k(D,q,Q,R)},function(){var W=B._size,X=R.borderwidth;if(!Y){var te=P(D);if(te)return;var ee=W.l+W.w*R.x-d[z(R)]*R._width,ie=W.t+W.h*(1-R.y)-d[I(R)]*R._effHeight;if(B.margin.autoexpand){var le=ee,ye=ie;ee=c.constrain(ee,0,B.width-R._width),ie=c.constrain(ie,0,B.height-R._effHeight),ee!==le&&c.log("Constrain legend.x to make legend fit inside graph"),ie!==ye&&c.log("Constrain legend.y to make legend fit inside graph")}n.setTranslate(G,ee,ie)}if(U.on(".drag",null),G.on("wheel",null),Y||R._height<=R._maxHeight||D._context.staticPlot){var ue=R._effHeight;Y&&(ue=R._height),re.attr({width:R._width-X,height:ue-X,x:X/2,y:X/2}),n.setTranslate(se,0,0),Z.select("rect").attr({width:R._width-2*X,height:ue-2*X,x:X,y:X}),n.setClipUrl(se,F,D),n.setRect(U,0,0,0,0),delete R._scrollY}else{var pe=Math.max(o.scrollBarMinHeight,R._effHeight*R._effHeight/R._height),ge=R._effHeight-pe-2*o.scrollBarMargin,Te=R._height-R._effHeight,_e=ge/Te,De=Math.min(R._scrollY||0,Te);re.attr({width:R._width-2*X+o.scrollBarWidth+o.scrollBarMargin,height:R._effHeight-X,x:X/2,y:X/2}),Z.select("rect").attr({width:R._width-2*X+o.scrollBarWidth+o.scrollBarMargin,height:R._effHeight-2*X,x:X,y:X+De}),n.setClipUrl(se,F,D),Le(De,pe,_e),G.on("wheel",function(){De=c.constrain(R._scrollY+T.event.deltaY/ge*Te,0,Te),Le(De,pe,_e),De!==0&&De!==Te&&T.event.preventDefault()});var Oe,Ue,xe,Pe=function(Tt,zt,Ut){var Et=(Ut-zt)/_e+Tt;return c.constrain(Et,0,Te)},Ve=function(Tt,zt,Ut){var Et=(zt-Ut)/_e+Tt;return c.constrain(Et,0,Te)},Qe=T.behavior.drag().on("dragstart",function(){var Tt=T.event.sourceEvent;Tt.type==="touchstart"?Oe=Tt.changedTouches[0].clientY:Oe=Tt.clientY,xe=De}).on("drag",function(){var Tt=T.event.sourceEvent;Tt.buttons===2||Tt.ctrlKey||(Tt.type==="touchmove"?Ue=Tt.changedTouches[0].clientY:Ue=Tt.clientY,De=Pe(xe,Oe,Ue),Le(De,pe,_e))});U.call(Qe);var Fe=T.behavior.drag().on("dragstart",function(){var Tt=T.event.sourceEvent;Tt.type==="touchstart"&&(Oe=Tt.changedTouches[0].clientY,xe=De)}).on("drag",function(){var Tt=T.event.sourceEvent;Tt.type==="touchmove"&&(Ue=Tt.changedTouches[0].clientY,De=Ve(xe,Oe,Ue),Le(De,pe,_e))});se.call(Fe)}function Le(Tt,zt,Ut){R._scrollY=D._fullLayout.legend._scrollY=Tt,n.setTranslate(se,0,-Tt),n.setRect(U,R._width,o.scrollBarMargin+Tt*Ut,o.scrollBarWidth,zt),Z.select("rect").attr("y",X+Tt)}if(D._context.edits.legendPosition){var Ne,dt,Dt,Xt;G.classed("cursor-move",!0),a.init({element:G.node(),gd:D,prepFn:function(){var Tt=n.getTranslate(G);Dt=Tt.x,Xt=Tt.y},moveFn:function(Tt,zt){var Ut=Dt+Tt,Et=Xt+zt;n.setTranslate(G,Ut,Et),Ne=a.align(Ut,0,W.l,W.l+W.w,R.xanchor),dt=a.align(Et,0,W.t+W.h,W.t,R.yanchor)},doneFn:function(){Ne!==void 0&&dt!==void 0&&A.call("_guiRelayout",D,{"legend.x":Ne,"legend.y":dt})},clickFn:function(Tt,zt){var Ut=V.selectAll("g.traces").filter(function(){var Et=this.getBoundingClientRect();return zt.clientX>=Et.left&&zt.clientX<=Et.right&&zt.clientY>=Et.top&&zt.clientY<=Et.bottom});Ut.size()>0&&w(D,G,Ut,Tt,zt)}})}}],D)}}function w(D,R,B,F,V){var Y=B.data()[0][0].trace,K={event:V,node:B.node(),curveNumber:Y.index,expandedIndex:Y._expandedIndex,data:D.data,layout:D.layout,frames:D._transitionData._frames,config:D._context,fullData:D._fullData,fullLayout:D._fullLayout};Y._group&&(K.group=Y._group),A.traceIs(Y,"pie-like")&&(K.label=B.datum()[0].label);var J=e.triggerHandler(D,"plotly_legendclick",K);if(J!==!1){if(F===1)R._clickTimeout=setTimeout(function(){!D._fullLayout||f(B,D,F)},D._context.doubleClickDelay);else if(F===2){R._clickTimeout&&clearTimeout(R._clickTimeout),D._legendMouseDownTime=0;var G=e.triggerHandler(D,"plotly_legenddoubleclick",K);G!==!1&&f(B,D,F)}}}function b(D,R,B){var F=D.data()[0][0],V=F.trace,Y=A.traceIs(V,"pie-like"),K=!B._inHover&&R._context.edits.legendText&&!Y,J=B._maxNameLength,G,Z;F.groupTitle?(G=F.groupTitle.text,Z=F.groupTitle.font):(Z=B.font,B.entries?G=F.text:(G=Y?F.label:V.name,V._meta&&(G=c.templateString(G,V._meta))));var re=c.ensureSingle(D,"text","legendtext");re.attr("text-anchor","start").call(n.font,Z).text(K?h(G,J):G);var se=B.itemwidth+o.itemGap*2;r.positionText(re,se,0),K?re.call(r.makeEditable,{gd:R,text:G}).call(u,D,R,B).on("edit",function(oe){this.text(h(oe,J)).call(u,D,R,B);var N=F.trace._fullInput||{},U={};if(A.hasTransform(N,"groupby")){var q=A.getTransformIndices(N,"groupby"),Q=q[q.length-1],W=c.keyedContainer(N,"transforms["+Q+"].styles","target","value.name");W.set(F.trace._group,oe),U=W.constructUpdate()}else U.name=oe;return A.call("_guiRestyle",R,U,V.index)}):u(re,D,R,B)}function h(D,R){var B=Math.max(4,R);if(D&&D.trim().length>=B/2)return D;D=D||"";for(var F=B-D.length;F>0;F--)D+=" ";return D}function m(D,R){var B=R._context.doubleClickDelay,F,V=1,Y=c.ensureSingle(D,"rect","legendtoggle",function(K){R._context.staticPlot||K.style("cursor","pointer").attr("pointer-events","all"),K.call(t.fill,"rgba(0,0,0,0)")});R._context.staticPlot||(Y.on("mousedown",function(){F=new Date().getTime(),F-R._legendMouseDownTime<B?V+=1:(V=1,R._legendMouseDownTime=F)}),Y.on("mouseup",function(){if(!(R._dragged||R._editing)){var K=R._fullLayout.legend;new Date().getTime()-R._legendMouseDownTime>B&&(V=Math.max(V-1,1)),w(R,K,D,V,T.event)}}))}function u(D,R,B,F,V){F._inHover&&D.attr("data-notex",!0),r.convertToTspans(D,B,function(){L(R,B,F,V)})}function L(D,R,B,F){var V=D.data()[0][0];if(!B._inHover&&V&&!V.trace.showlegend){D.remove();return}var Y=D.select("g[class*=math-group]"),K=Y.node();B||(B=R._fullLayout.legend);var J=B.borderwidth,G;F===_?G=B.title.font:V.groupTitle?G=V.groupTitle.font:G=B.font;var Z=G.size*p,re,se;if(K){var oe=n.bBox(K);re=oe.height,se=oe.width,F===_?n.setTranslate(Y,J,J+re*.75):n.setTranslate(Y,0,re*.25)}else{var N=D.select(F===_?".legendtitletext":".legendtext"),U=r.lineCount(N),q=N.node();if(re=Z*U,se=q?n.bBox(q).width:0,F===_)B.title.side==="left"&&(se+=o.itemGap*2),r.positionText(N,J+o.titlePad,J+Z);else{var Q=o.itemGap*2+B.itemwidth;V.groupTitle&&(Q=o.itemGap,se-=B.itemwidth),r.positionText(N,Q,-Z*((U-1)/2-.3))}}F===_?(B._titleWidth=se,B._titleHeight=re):(V.lineHeight=Z,V.height=Math.max(re,16)+3,V.width=se)}function S(D){var R=0,B=0,F=D.title.side;return F&&(F.indexOf("left")!==-1&&(R=D._titleWidth),F.indexOf("top")!==-1&&(B=D._titleHeight)),[R,B]}function k(D,R,B,F){var V=D._fullLayout;F||(F=V.legend);var Y=V._size,K=l.isVertical(F),J=l.isGrouped(F),G=F.borderwidth,Z=2*G,re=o.itemGap,se=F.itemwidth+re*2,oe=2*(G+re),N=I(F),U=F.y<0||F.y===0&&N==="top",q=F.y>1||F.y===1&&N==="bottom",Q=F.tracegroupgap;F._maxHeight=Math.max(U||q?V.height/2:Y.h,30);var W=0;F._width=0,F._height=0;var X=S(F);if(K)B.each(function(Ne){var dt=Ne[0].height;n.setTranslate(this,G+X[0],G+X[1]+F._height+dt/2+re),F._height+=dt,F._width=Math.max(F._width,Ne[0].width)}),W=se+F._width,F._width+=re+se+Z,F._height+=oe,J&&(R.each(function(Ne,dt){n.setTranslate(this,0,dt*F.tracegroupgap)}),F._height+=(F._lgroupsLength-1)*F.tracegroupgap);else{var te=z(F),ee=F.x<0||F.x===0&&te==="right",ie=F.x>1||F.x===1&&te==="left",le=q||U,ye=V.width/2;F._maxWidth=Math.max(ee?le&&te==="left"?Y.l+Y.w:ye:ie?le&&te==="right"?Y.r+Y.w:ye:Y.w,2*se);var ue=0,pe=0;B.each(function(Ne){var dt=Ne[0].width+se;ue=Math.max(ue,dt),pe+=dt}),W=null;var ge=0;if(J){var Te=0,_e=0,De=0;R.each(function(){var Ne=0,dt=0;T.select(this).selectAll("g.traces").each(function(Xt){var Tt=Xt[0].width,zt=Xt[0].height;n.setTranslate(this,X[0],X[1]+G+re+zt/2+dt),dt+=zt,Ne=Math.max(Ne,se+Tt)});var Dt=Ne+re;_e>0&&Dt+G+_e>F._maxWidth?(ge=Math.max(ge,_e),_e=0,De+=Te+Q,Te=dt):Te=Math.max(Te,dt),n.setTranslate(this,_e,De),_e+=Dt}),F._width=Math.max(ge,_e)+G,F._height=De+Te+oe}else{var Oe=B.size(),Ue=pe+Z+(Oe-1)*re<F._maxWidth,xe=0,Pe=0,Ve=0,Qe=0;B.each(function(Ne){var dt=Ne[0].height,Dt=se+Ne[0].width,Xt=(Ue?Dt:ue)+re;Xt+G+Pe-re>=F._maxWidth&&(ge=Math.max(ge,Qe),Pe=0,Ve+=xe,F._height+=xe,xe=0),n.setTranslate(this,X[0]+G+Pe,X[1]+G+Ve+dt/2+re),Qe=Pe+Dt+re,Pe+=Xt,xe=Math.max(xe,dt)}),Ue?(F._width=Pe+Z,F._height=xe+oe):(F._width=Math.max(ge,Qe)+Z,F._height+=xe+oe)}}F._width=Math.ceil(Math.max(F._width+X[0],F._titleWidth+2*(G+o.titlePad))),F._height=Math.ceil(Math.max(F._height+X[1],F._titleHeight+2*(G+o.itemGap))),F._effHeight=Math.min(F._height,F._maxHeight);var Fe=D._context.edits,Le=Fe.legendText||Fe.legendPosition;B.each(function(Ne){var dt=T.select(this).select(".legendtoggle"),Dt=Ne[0].height,Xt=Le?se:W||se+Ne[0].width;K||(Xt+=re/2),n.setRect(dt,0,-Dt/2,Xt,Dt)})}function P(D){var R=D._fullLayout,B=R.legend,F=z(B),V=I(B);return M.autoMargin(D,"legend",{x:B.x,y:B.y,l:B._width*d[F],r:B._width*y[F],b:B._effHeight*y[V],t:B._effHeight*d[V]})}function z(D){return c.isRightAnchor(D)?"right":c.isCenterAnchor(D)?"center":"left"}function I(D){return c.isBottomAnchor(D)?"bottom":c.isMiddleAnchor(D)?"middle":"top"}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(g,ne,ae){var T=g("../../registry"),c=g("./helpers");ne.exports=function(A,e){var a=e._inHover,n=c.isGrouped(e),t=c.isReversed(e),r={},f=[],o=!1,i={},p=0,d=0,y,v;function x(B,F){if(B===""||!c.isGrouped(e)){var V="~~i"+p;f.push(V),r[V]=[F],p++}else f.indexOf(B)===-1?(f.push(B),o=!0,r[B]=[F]):r[B].push(F)}for(y=0;y<A.length;y++){var l=A[y],_=l[0],s=_.trace,w=s.legendgroup;if(!(!a&&(!s.visible||!s.showlegend)))if(T.traceIs(s,"pie-like"))for(i[w]||(i[w]={}),v=0;v<l.length;v++){var b=l[v].label;i[w][b]||(x(w,{label:b,color:l[v].color,i:l[v].i,trace:s,pts:l[v].pts}),i[w][b]=!0,d=Math.max(d,(b||"").length))}else x(w,_),d=Math.max(d,(s.name||"").length)}if(!f.length)return[];var h=!o||!n,m=[];for(y=0;y<f.length;y++){var u=r[f[y]];h?m.push(u[0]):m.push(u)}for(h&&(m=[m]),y=0;y<m.length;y++){var L=1/0;for(v=0;v<m[y].length;v++){var S=m[y][v].trace.legendrank;L>S&&(L=S)}m[y][0]._groupMinRank=L,m[y][0]._preGroupSort=y}var k=function(B,F){return B[0]._groupMinRank-F[0]._groupMinRank||B[0]._preGroupSort-F[0]._preGroupSort},P=function(B,F){return B.trace.legendrank-F.trace.legendrank||B._preSort-F._preSort};for(m.forEach(function(B,F){B[0]._preGroupSort=F}),m.sort(k),y=0;y<m.length;y++){m[y].forEach(function(B,F){B._preSort=F}),m[y].sort(P);var z=m[y][0].trace,I=null;for(v=0;v<m[y].length;v++){var D=m[y][v].trace.legendgrouptitle;if(D&&D.text){I=D,a&&(D.font=e._groupTitleFont);break}}if(t&&m[y].reverse(),I){var R=!1;for(v=0;v<m[y].length;v++)if(T.traceIs(m[y][v].trace,"pie-like")){R=!0;break}m[y].unshift({i:-1,groupTitle:I,noClick:R,trace:{showlegend:z.showlegend,legendgroup:z.legendgroup,visible:e.groupclick==="toggleitem"?!0:z.visible}})}for(v=0;v<m[y].length;v++)m[y][v]=[m[y][v]]}return e._lgroupsLength=m.length,e._maxNameLength=d,m}},{"../../registry":638,"./helpers":422}],421:[function(g,ne,ae){var T=g("../../lib"),c=g("../../registry"),M=!0;ne.exports=function(e,a,n){var t=a._fullLayout;if(a._dragged||a._editing)return;var r=t.legend.itemclick,f=t.legend.itemdoubleclick,o=t.legend.groupclick;n===1&&r==="toggle"&&f==="toggleothers"&&M&&a.data&&a._context.showTips&&T.notifier(T._(a,"Double-click on legend to isolate one trace"),"long"),M=!1;var i;if(n===1?i=r:n===2&&(i=f),!i)return;var p=o==="togglegroup",d=t.hiddenlabels?t.hiddenlabels.slice():[],y=e.data()[0][0];if(y.groupTitle&&y.noClick)return;var v=a._fullData,x=y.trace,l=x.legendgroup,_,s,w,b,h,m,u={},L=[],S=[],k=[];function P(oe,N,U){var q=L.indexOf(oe),Q=u[N];return Q||(Q=u[N]=[]),L.indexOf(oe)===-1&&(L.push(oe),q=L.length-1),Q[q]=U,q}function z(oe,N){if(!(y.groupTitle&&!p)){var U=oe._fullInput;if(c.hasTransform(U,"groupby")){var q=S[U.index];if(!q){var Q=c.getTransformIndices(U,"groupby"),W=Q[Q.length-1];q=T.keyedContainer(U,"transforms["+W+"].styles","target","value.visible"),S[U.index]=q}var X=q.get(oe._group);X===void 0&&(X=!0),X!==!1&&q.set(oe._group,N),k[U.index]=P(U.index,"visible",U.visible!==!1)}else{var te=U.visible===!1?!1:N;P(U.index,"visible",te)}}}if(c.traceIs(x,"pie-like")){var I=y.label,D=d.indexOf(I);i==="toggle"?D===-1?d.push(I):d.splice(D,1):i==="toggleothers"&&(d=[],a.calcdata[0].forEach(function(oe){I!==oe.label&&d.push(oe.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===d.length&&D===-1&&(d=[])),c.call("_guiRelayout",a,"hiddenlabels",d)}else{var R=l&&l.length,B=[],F;if(R)for(_=0;_<v.length;_++)F=v[_],!!F.visible&&F.legendgroup===l&&B.push(_);if(i==="toggle"){var V;switch(x.visible){case!0:V="legendonly";break;case!1:V=!1;break;case"legendonly":V=!0;break}if(R)if(p)for(_=0;_<v.length;_++)v[_].visible!==!1&&v[_].legendgroup===l&&z(v[_],V);else z(x,V);else z(x,V)}else if(i==="toggleothers"){var Y,K,J,G,Z=!0;for(_=0;_<v.length;_++)if(Y=v[_]===x,J=v[_].showlegend!==!0,!(Y||J)&&(K=R&&v[_].legendgroup===l,!K&&v[_].visible===!0&&!c.traceIs(v[_],"notLegendIsolatable"))){Z=!1;break}for(_=0;_<v.length;_++)if(v[_].visible!==!1&&!c.traceIs(v[_],"notLegendIsolatable"))switch(x.visible){case"legendonly":z(v[_],!0);break;case!0:G=Z?!0:"legendonly",Y=v[_]===x,J=v[_].showlegend!==!0&&!v[_].legendgroup,K=Y||R&&v[_].legendgroup===l,z(v[_],K||J?!0:G);break}}for(_=0;_<S.length;_++)if(w=S[_],!!w){var re=w.constructUpdate(),se=Object.keys(re);for(s=0;s<se.length;s++)b=se[s],m=u[b]=u[b]||[],m[k[_]]=re[b]}for(h=Object.keys(u),_=0;_<h.length;_++)for(b=h[_],s=0;s<L.length;s++)u[b].hasOwnProperty(s)||(u[b][s]=void 0);c.call("_guiRestyle",a,u,L)}}},{"../../lib":503,"../../registry":638}],422:[function(g,ne,ae){ae.isGrouped=function(c){return(c.traceorder||"").indexOf("grouped")!==-1},ae.isVertical=function(c){return c.orientation!=="h"},ae.isReversed=function(c){return(c.traceorder||"").indexOf("reversed")!==-1}},{}],423:[function(g,ne,ae){ne.exports={moduleType:"component",name:"legend",layoutAttributes:g("./attributes"),supplyLayoutDefaults:g("./defaults"),draw:g("./draw"),style:g("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../registry"),M=g("../../lib"),A=M.strTranslate,e=g("../drawing"),a=g("../color"),n=g("../colorscale/helpers").extractOpts,t=g("../../traces/scatter/subtypes"),r=g("../../traces/pie/style_one"),f=g("../../traces/pie/helpers").castOption,o=g("./constants"),i=12,p=5,d=2,y=10,v=5;ne.exports=function(w,b,h){var m=b._fullLayout;h||(h=m.legend);var u=h.itemsizing==="constant",L=h.itemwidth,S=(L+o.itemGap*2)/2,k=A(S,0),P=function(se,oe,N,U){var q;if(se+1)q=se;else if(oe&&oe.width>0)q=oe.width;else return 0;return u?U:Math.min(q,N)};w.each(function(se){var oe=T.select(this),N=M.ensureSingle(oe,"g","layers");N.style("opacity",se[0].trace.opacity);var U=h.valign,q=se[0].lineHeight,Q=se[0].height;if(U==="middle"||!q||!Q)N.attr("transform",null);else{var W={top:1,bottom:-1}[U],X=W*(.5*(q-Q+3));N.attr("transform",A(0,X))}var te=N.selectAll("g.legendfill").data([se]);te.enter().append("g").classed("legendfill",!0);var ee=N.selectAll("g.legendlines").data([se]);ee.enter().append("g").classed("legendlines",!0);var ie=N.selectAll("g.legendsymbols").data([se]);ie.enter().append("g").classed("legendsymbols",!0),ie.selectAll("g.legendpoints").data([se]).enter().append("g").classed("legendpoints",!0)}).each(re).each(D).each(B).each(R).each(V).each(G).each(J).each(z).each(I).each(Y).each(K);function z(se){var oe=l(se),N=oe.showFill,U=oe.showLine,q=oe.showGradientLine,Q=oe.showGradientFill,W=oe.anyFill,X=oe.anyLine,te=se[0],ee=te.trace,ie,le,ye=n(ee),ue=ye.colorscale,pe=ye.reversescale,ge=function(Pe){if(Pe.size())if(N)e.fillGroupStyle(Pe,b);else{var Ve="legendfill-"+ee.uid;e.gradient(Pe,b,Ve,x(pe),ue,"fill")}},Te=function(Pe){if(Pe.size()){var Ve="legendline-"+ee.uid;e.lineGroupStyle(Pe),e.gradient(Pe,b,Ve,x(pe),ue,"stroke")}},_e=t.hasMarkers(ee)||!W?"M5,0":X?"M5,-2":"M5,-3",De=T.select(this),Oe=De.select(".legendfill").selectAll("path").data(N||Q?[se]:[]);if(Oe.enter().append("path").classed("js-fill",!0),Oe.exit().remove(),Oe.attr("d",_e+"h"+L+"v6h-"+L+"z").call(ge),U||q){var Ue=P(void 0,ee.line,y,p);le=M.minExtend(ee,{line:{width:Ue}}),ie=[M.minExtend(te,{trace:le})]}var xe=De.select(".legendlines").selectAll("path").data(U||q?[ie]:[]);xe.enter().append("path").classed("js-line",!0),xe.exit().remove(),xe.attr("d",_e+(q?"l"+L+",0.0001":"h"+L)).call(U?e.lineGroupStyle:Te)}function I(se){var oe=l(se),N=oe.anyFill,U=oe.anyLine,q=oe.showLine,Q=oe.showMarker,W=se[0],X=W.trace,te=!Q&&!U&&!N&&t.hasText(X),ee,ie;function le(Oe,Ue,xe,Pe){var Ve=M.nestedProperty(X,Oe).get(),Qe=M.isArrayOrTypedArray(Ve)&&Ue?Ue(Ve):Ve;if(u&&Qe&&Pe!==void 0&&(Qe=Pe),xe){if(Qe<xe[0])return xe[0];if(Qe>xe[1])return xe[1]}return Qe}function ye(Oe){return W._distinct&&W.index&&Oe[W.index]?Oe[W.index]:Oe[0]}if(Q||te||q){var ue={},pe={};if(Q){ue.mc=le("marker.color",ye),ue.mx=le("marker.symbol",ye),ue.mo=le("marker.opacity",M.mean,[.2,1]),ue.mlc=le("marker.line.color",ye),ue.mlw=le("marker.line.width",M.mean,[0,5],d),pe.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var ge=le("marker.size",M.mean,[2,16],i);ue.ms=ge,pe.marker.size=ge}q&&(pe.line={width:le("line.width",ye,[0,10],p)}),te&&(ue.tx="Aa",ue.tp=le("textposition",ye),ue.ts=10,ue.tc=le("textfont.color",ye),ue.tf=le("textfont.family",ye)),ee=[M.minExtend(W,ue)],ie=M.minExtend(X,pe),ie.selectedpoints=null,ie.texttemplate=null}var Te=T.select(this).select("g.legendpoints"),_e=Te.selectAll("path.scatterpts").data(Q?ee:[]);_e.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",k),_e.exit().remove(),_e.call(e.pointStyle,ie,b),Q&&(ee[0].mrc=3);var De=Te.selectAll("g.pointtext").data(te?ee:[]);De.enter().append("g").classed("pointtext",!0).append("text").attr("transform",k),De.exit().remove(),De.selectAll("text").call(e.textPointStyle,ie,b)}function D(se){var oe=se[0].trace,N=oe.type==="waterfall";if(se[0]._distinct&&N){var U=se[0].trace[se[0].dir].marker;return se[0].mc=U.color,se[0].mlw=U.line.width,se[0].mlc=U.line.color,F(se,this,"waterfall")}var q=[];oe.visible&&N&&(q=se[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var Q=T.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(q);Q.enter().append("path").classed("legendwaterfall",!0).attr("transform",k).style("stroke-miterlimit",1),Q.exit().remove(),Q.each(function(W){var X=T.select(this),te=oe[W[0]].marker,ee=P(void 0,te.line,v,d);X.attr("d",W[1]).style("stroke-width",ee+"px").call(a.fill,te.color),ee&&X.call(a.stroke,te.line.color)})}function R(se){F(se,this)}function B(se){F(se,this,"funnel")}function F(se,oe,N){var U=se[0].trace,q=U.marker||{},Q=q.line||{},W=N?U.visible&&U.type===N:c.traceIs(U,"bar"),X=T.select(oe).select("g.legendpoints").selectAll("path.legend"+N).data(W?[se]:[]);X.enter().append("path").classed("legend"+N,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),X.exit().remove(),X.each(function(te){var ee=T.select(this),ie=te[0],le=P(ie.mlw,q.line,v,d);ee.style("stroke-width",le+"px");var ye=ie.mcc;if(!h._inHover&&"mc"in ie){var ue=n(q),pe=ue.mid;pe===void 0&&(pe=(ue.max+ue.min)/2),ye=e.tryColorscale(q,"")(pe)}var ge=ye||ie.mc||q.color,Te=q.pattern,_e=Te&&e.getPatternAttr(Te.shape,0,"");if(_e){var De=e.getPatternAttr(Te.bgcolor,0,null),Oe=e.getPatternAttr(Te.fgcolor,0,null),Ue=Te.fgopacity,xe=_(Te.size,8,10),Pe=_(Te.solidity,.5,1),Ve="legend-"+U.uid;ee.call(e.pattern,"legend",b,Ve,_e,xe,Pe,ye,Te.fillmode,De,Oe,Ue)}else ee.call(a.fill,ge);le&&a.stroke(ee,ie.mlc||Q.color)})}function V(se){var oe=se[0].trace,N=T.select(this).select("g.legendpoints").selectAll("path.legendbox").data(oe.visible&&c.traceIs(oe,"box-violin")?[se]:[]);N.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),N.exit().remove(),N.each(function(){var U=T.select(this);if((oe.boxpoints==="all"||oe.points==="all")&&a.opacity(oe.fillcolor)===0&&a.opacity((oe.line||{}).color)===0){var q=M.minExtend(oe,{marker:{size:u?i:M.constrain(oe.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});N.call(e.pointStyle,q,b)}else{var Q=P(void 0,oe.line,v,d);U.style("stroke-width",Q+"px").call(a.fill,oe.fillcolor),Q&&a.stroke(U,oe.line.color)}})}function Y(se){var oe=se[0].trace,N=T.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(oe.visible&&oe.type==="candlestick"?[se,se]:[]);N.enter().append("path").classed("legendcandle",!0).attr("d",function(U,q){return q?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",k).style("stroke-miterlimit",1),N.exit().remove(),N.each(function(U,q){var Q=T.select(this),W=oe[q?"increasing":"decreasing"],X=P(void 0,W.line,v,d);Q.style("stroke-width",X+"px").call(a.fill,W.fillcolor),X&&a.stroke(Q,W.line.color)})}function K(se){var oe=se[0].trace,N=T.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(oe.visible&&oe.type==="ohlc"?[se,se]:[]);N.enter().append("path").classed("legendohlc",!0).attr("d",function(U,q){return q?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",k).style("stroke-miterlimit",1),N.exit().remove(),N.each(function(U,q){var Q=T.select(this),W=oe[q?"increasing":"decreasing"],X=P(void 0,W.line,v,d);Q.style("fill","none").call(e.dashLine,W.line.dash,X),X&&a.stroke(Q,W.line.color)})}function J(se){Z(se,this,"pie")}function G(se){Z(se,this,"funnelarea")}function Z(se,oe,N){var U=se[0],q=U.trace,Q=N?q.visible&&q.type===N:c.traceIs(q,N),W=T.select(oe).select("g.legendpoints").selectAll("path.legend"+N).data(Q?[se]:[]);if(W.enter().append("path").classed("legend"+N,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),W.exit().remove(),W.size()){var X=(q.marker||{}).line,te=P(f(X.width,U.pts),X,v,d),ee=M.minExtend(q,{marker:{line:{width:te}}});ee.marker.line.color=X.color;var ie=M.minExtend(U,{trace:ee});r(W,ie,ee)}}function re(se){var oe=se[0].trace,N,U=[];if(oe.visible)switch(oe.type){case"histogram2d":case"heatmap":U=[["M-15,-2V4H15V-2Z"]],N=!0;break;case"choropleth":case"choroplethmapbox":U=[["M-6,-6V6H6V-6Z"]],N=!0;break;case"densitymapbox":U=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],N="radial";break;case"cone":U=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],N=!1;break;case"streamtube":U=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],N=!1;break;case"surface":U=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],N=!0;break;case"mesh3d":U=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],N=!1;break;case"volume":U=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],N=!0;break;case"isosurface":U=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],N=!1;break}var q=T.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(U);q.enter().append("path").classed("legend3dandfriends",!0).attr("transform",k).style("stroke-miterlimit",1),q.exit().remove(),q.each(function(Q,W){var X=T.select(this),te=n(oe),ee=te.colorscale,ie=te.reversescale,le=function(ge){if(ge.size()){var Te="legendfill-"+oe.uid;e.gradient(ge,b,Te,x(ie,N==="radial"),ee,"fill")}},ye;if(ee){if(!N){var pe=ee.length;ye=W===0?ee[ie?pe-1:0][1]:W===1?ee[ie?0:pe-1][1]:ee[Math.floor((pe-1)/2)][1]}}else{var ue=oe.vertexcolor||oe.facecolor||oe.color;ye=M.isArrayOrTypedArray(ue)?ue[W]||ue[0]:ue}X.attr("d",Q[0]),ye?X.call(a.fill,ye):X.call(le)})}};function x(s,w){var b=w?"radial":"horizontal";return b+(s?"":"reversed")}function l(s){var w=s[0].trace,b=w.contours,h=t.hasLines(w),m=t.hasMarkers(w),u=w.visible&&w.fill&&w.fill!=="none",L=!1,S=!1;if(b){var k=b.coloring;k==="lines"?L=!0:h=k==="none"||k==="heatmap"||b.showlines,b.type==="constraint"?u=b._operation!=="=":(k==="fill"||k==="heatmap")&&(S=!0)}return{showMarker:m,showLine:h,showFill:u,showGradientLine:L,showGradientFill:S,anyLine:h||L,anyFill:u||S}}function _(s,w,b){return s&&M.isArrayOrTypedArray(s)?w:s>b?b:s}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":906,"../../traces/pie/style_one":912,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(g,ne,ae){g("./constants"),ne.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(g,ne,ae){var T=g("../../registry"),c=g("../../plots/plots"),M=g("../../plots/cartesian/axis_ids"),A=g("../../fonts/ploticon"),e=g("../shapes/draw").eraseActiveShape,a=g("../../lib"),n=a._,t=ne.exports={};t.toImage={name:"toImage",title:function(s){var w=s._context.toImageButtonOptions||{},b=w.format||"png";return b==="png"?n(s,"Download plot as a png"):n(s,"Download plot")},icon:A.camera,click:function(s){var w=s._context.toImageButtonOptions,b={format:w.format||"png"};a.notifier(n(s,"Taking snapshot - this may take a few seconds"),"long"),b.format!=="svg"&&a.isIE()&&(a.notifier(n(s,"IE only supports svg.  Changing format to svg."),"long"),b.format="svg"),["filename","width","height","scale"].forEach(function(h){h in w&&(b[h]=w[h])}),T.call("downloadImage",s,b).then(function(h){a.notifier(n(s,"Snapshot succeeded")+" - "+h,"long")}).catch(function(){a.notifier(n(s,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(s){return n(s,"Edit in Chart Studio")},icon:A.disk,click:function(s){c.sendDataToCloud(s)}},t.editInChartStudio={name:"editInChartStudio",title:function(s){return n(s,"Edit in Chart Studio")},icon:A.pencil,click:function(s){c.sendDataToCloud(s)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(s){return n(s,"Zoom")},attr:"dragmode",val:"zoom",icon:A.zoombox,click:r},t.pan2d={name:"pan2d",_cat:"pan",title:function(s){return n(s,"Pan")},attr:"dragmode",val:"pan",icon:A.pan,click:r},t.select2d={name:"select2d",_cat:"select",title:function(s){return n(s,"Box Select")},attr:"dragmode",val:"select",icon:A.selectbox,click:r},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(s){return n(s,"Lasso Select")},attr:"dragmode",val:"lasso",icon:A.lasso,click:r},t.drawclosedpath={name:"drawclosedpath",title:function(s){return n(s,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:A.drawclosedpath,click:r},t.drawopenpath={name:"drawopenpath",title:function(s){return n(s,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:A.drawopenpath,click:r},t.drawline={name:"drawline",title:function(s){return n(s,"Draw line")},attr:"dragmode",val:"drawline",icon:A.drawline,click:r},t.drawrect={name:"drawrect",title:function(s){return n(s,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:A.drawrect,click:r},t.drawcircle={name:"drawcircle",title:function(s){return n(s,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:A.drawcircle,click:r},t.eraseshape={name:"eraseshape",title:function(s){return n(s,"Erase active shape")},icon:A.eraseshape,click:e},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(s){return n(s,"Zoom in")},attr:"zoom",val:"in",icon:A.zoom_plus,click:r},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(s){return n(s,"Zoom out")},attr:"zoom",val:"out",icon:A.zoom_minus,click:r},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(s){return n(s,"Autoscale")},attr:"zoom",val:"auto",icon:A.autoscale,click:r},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(s){return n(s,"Reset axes")},attr:"zoom",val:"reset",icon:A.home,click:r},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(s){return n(s,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:A.tooltip_basic,gravity:"ne",click:r},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(s){return n(s,"Compare data on hover")},attr:"hovermode",val:function(s){return s._fullLayout._isHoriz?"y":"x"},icon:A.tooltip_compare,gravity:"ne",click:r};function r(s,w){var b=w.currentTarget,h=b.getAttribute("data-attr"),m=b.getAttribute("data-val")||!0,u=s._fullLayout,L={},S=M.list(s,null,!0),k=u._cartesianSpikesEnabled,P,z;if(h==="zoom"){var I=m==="in"?.5:2,D=(1+I)/2,R=(1-I)/2,B;for(z=0;z<S.length;z++)if(P=S[z],!P.fixedrange)if(B=P._name,m==="auto")L[B+".autorange"]=!0;else if(m==="reset"){if(P._rangeInitial===void 0)L[B+".autorange"]=!0;else{var F=P._rangeInitial.slice();L[B+".range[0]"]=F[0],L[B+".range[1]"]=F[1]}P._showSpikeInitial!==void 0&&(L[B+".showspikes"]=P._showSpikeInitial,k==="on"&&!P._showSpikeInitial&&(k="off"))}else{var V=[P.r2l(P.range[0]),P.r2l(P.range[1])],Y=[D*V[0]+R*V[1],D*V[1]+R*V[0]];L[B+".range[0]"]=P.l2r(Y[0]),L[B+".range[1]"]=P.l2r(Y[1])}}else h==="hovermode"&&(m==="x"||m==="y")&&(m=u._isHoriz?"y":"x",b.setAttribute("data-val",m)),L[h]=m;u._cartesianSpikesEnabled=k,T.call("_guiRelayout",s,L)}t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(s){return n(s,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:A.zoombox,click:f},t.pan3d={name:"pan3d",_cat:"pan",title:function(s){return n(s,"Pan")},attr:"scene.dragmode",val:"pan",icon:A.pan,click:f},t.orbitRotation={name:"orbitRotation",title:function(s){return n(s,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:A["3d_rotate"],click:f},t.tableRotation={name:"tableRotation",title:function(s){return n(s,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:A["z-axis"],click:f};function f(s,w){for(var b=w.currentTarget,h=b.getAttribute("data-attr"),m=b.getAttribute("data-val")||!0,u=s._fullLayout._subplots.gl3d||[],L={},S=h.split("."),k=0;k<u.length;k++)L[u[k]+"."+S[1]]=m;var P=m==="pan"?m:"zoom";L.dragmode=P,T.call("_guiRelayout",s,L)}t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(s){return n(s,"Reset camera to default")},attr:"resetDefault",icon:A.home,click:o},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(s){return n(s,"Reset camera to last save")},attr:"resetLastSave",icon:A.movie,click:o};function o(s,w){for(var b=w.currentTarget,h=b.getAttribute("data-attr"),m=h==="resetLastSave",u=h==="resetDefault",L=s._fullLayout,S=L._subplots.gl3d||[],k={},P=0;P<S.length;P++){var z=S[P],I=z+".camera",D=z+".aspectratio",R=z+".aspectmode",B=L[z]._scene,F;m?(k[I+".up"]=B.viewInitial.up,k[I+".eye"]=B.viewInitial.eye,k[I+".center"]=B.viewInitial.center,F=!0):u&&(k[I+".up"]=null,k[I+".eye"]=null,k[I+".center"]=null,F=!0),F&&(k[D+".x"]=B.viewInitial.aspectratio.x,k[D+".y"]=B.viewInitial.aspectratio.y,k[D+".z"]=B.viewInitial.aspectratio.z,k[R]=B.viewInitial.aspectmode)}T.call("_guiRelayout",s,k)}t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(s){return n(s,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:A.tooltip_basic,gravity:"ne",click:p};function i(s,w){var b=w.currentTarget,h=b._previousVal,m=s._fullLayout,u=m._subplots.gl3d||[],L=["xaxis","yaxis","zaxis"],S={},k={};if(h)k=h,b._previousVal=null;else{for(var P=0;P<u.length;P++){var z=u[P],I=m[z],D=z+".hovermode";S[D]=I.hovermode,k[D]=!1;for(var R=0;R<3;R++){var B=L[R],F=z+"."+B+".showspikes";k[F]=!1,S[F]=I[B].showspikes}}b._previousVal=S}return k}function p(s,w){var b=i(s,w);T.call("_guiRelayout",s,b)}t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(s){return n(s,"Zoom in")},attr:"zoom",val:"in",icon:A.zoom_plus,click:d},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(s){return n(s,"Zoom out")},attr:"zoom",val:"out",icon:A.zoom_minus,click:d},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(s){return n(s,"Reset")},attr:"reset",val:null,icon:A.autoscale,click:d},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(s){return n(s,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:A.tooltip_basic,gravity:"ne",click:v};function d(s,w){for(var b=w.currentTarget,h=b.getAttribute("data-attr"),m=b.getAttribute("data-val")||!0,u=s._fullLayout,L=u._subplots.geo||[],S=0;S<L.length;S++){var k=L[S],P=u[k];if(h==="zoom"){var z=P.projection.scale,I=m==="in"?2*z:.5*z;T.call("_guiRelayout",s,k+".projection.scale",I)}}h==="reset"&&_(s,"geo")}t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(s){return n(s,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:A.tooltip_basic,gravity:"ne",click:v},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(s){return n(s,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:A.tooltip_basic,gravity:"ne",click:v};function y(s){var w=s._fullLayout;return w.hovermode?!1:w._has("cartesian")?w._isHoriz?"y":"x":"closest"}function v(s){var w=y(s);T.call("_guiRelayout",s,"hovermode",w)}t.resetViewSankey={name:"resetSankeyGroup",title:function(s){return n(s,"Reset view")},icon:A.home,click:function(s){for(var w={"node.groups":[],"node.x":[],"node.y":[]},b=0;b<s._fullData.length;b++){var h=s._fullData[b]._viewInitial;w["node.groups"].push(h.node.groups.slice()),w["node.x"].push(h.node.x.slice()),w["node.y"].push(h.node.y.slice())}T.call("restyle",s,w)}},t.toggleHover={name:"toggleHover",title:function(s){return n(s,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:A.tooltip_basic,gravity:"ne",click:function(s,w){var b=i(s,w);b.hovermode=y(s),T.call("_guiRelayout",s,b)}},t.resetViews={name:"resetViews",title:function(s){return n(s,"Reset views")},icon:A.home,click:function(s,w){var b=w.currentTarget;b.setAttribute("data-attr","zoom"),b.setAttribute("data-val","reset"),r(s,w),b.setAttribute("data-attr","resetLastSave"),o(s,w),_(s,"geo"),_(s,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(s){return n(s,"Toggle Spike Lines")},icon:A.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(s){var w=s._fullLayout,b=w._cartesianSpikesEnabled;w._cartesianSpikesEnabled=b==="on"?"off":"on",T.call("_guiRelayout",s,x(s))}};function x(s){for(var w=s._fullLayout,b=w._cartesianSpikesEnabled==="on",h=M.list(s,null,!0),m={},u=0;u<h.length;u++){var L=h[u];m[L._name+".showspikes"]=b?!0:L._showSpikeInitial}return m}t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(s){return n(s,"Reset view")},attr:"reset",icon:A.home,click:function(s){_(s,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(s){return n(s,"Zoom in")},attr:"zoom",val:"in",icon:A.zoom_plus,click:l},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(s){return n(s,"Zoom out")},attr:"zoom",val:"out",icon:A.zoom_minus,click:l};function l(s,w){for(var b=w.currentTarget,h=b.getAttribute("data-val"),m=s._fullLayout,u=m._subplots.mapbox||[],L=1.05,S={},k=0;k<u.length;k++){var P=u[k],z=m[P].zoom,I=h==="in"?L*z:z/L;S[P+".zoom"]=I}T.call("_guiRelayout",s,S)}function _(s,w){for(var b=s._fullLayout,h=b._subplots[w]||[],m={},u=0;u<h.length;u++)for(var L=h[u],S=b[L]._subplot,k=S.viewInitial,P=Object.keys(k),z=0;z<P.length;z++){var I=P[z];m[L+"."+I]=k[I]}T.call("_guiRelayout",s,m)}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(g,ne,ae){var T=g("./buttons"),c=Object.keys(T),M=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],A=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(M),e=[],a=function(n){if(A.indexOf(n._cat||n.name)===-1){var t=n.name,r=(n._cat||n.name).toLowerCase();e.indexOf(t)===-1&&e.push(t),e.indexOf(r)===-1&&e.push(r)}};c.forEach(function(n){a(T[n])}),e.sort(),ne.exports={DRAW_MODES:M,backButtons:A,foreButtons:e}},{"./buttons":426}],428:[function(g,ne,ae){var T=g("../../lib"),c=g("../color"),M=g("../../plot_api/plot_template"),A=g("./attributes");ne.exports=function(a,n){var t=a.modebar||{},r=M.newContainer(n,"modebar");function f(i,p){return T.coerce(t,r,A,i,p)}f("orientation"),f("bgcolor",c.addOpacity(n.paper_bgcolor,.5));var o=c.contrast(c.rgb(n.modebar.bgcolor));f("color",c.addOpacity(o,.3)),f("activecolor",c.addOpacity(o,.7)),f("uirevision",n.uirevision),f("add"),f("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(g,ne,ae){ne.exports={moduleType:"component",name:"modebar",layoutAttributes:g("./attributes"),supplyLayoutDefaults:g("./defaults"),manage:g("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(g,ne,ae){var T=g("../../plots/cartesian/axis_ids"),c=g("../../traces/scatter/subtypes"),M=g("../../registry"),A=g("../fx/helpers").isUnifiedHover,e=g("./modebar"),a=g("./buttons"),n=g("./constants").DRAW_MODES,t=g("../../lib").extendDeep;ne.exports=function(v){var x=v._fullLayout,l=v._context,_=x._modeBar;if(!l.displayModeBar&&!l.watermark){_&&(_.destroy(),delete x._modeBar);return}if(!Array.isArray(l.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(l.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var s=l.modeBarButtons,w;Array.isArray(s)&&s.length?w=d(s):!l.displayModeBar&&l.watermark?w=[]:w=r(v),_?_.update(v,w):x._modeBar=e(v,w)};function r(y){var v=y._fullLayout,x=y._fullData,l=y._context;function _(W,X){if(typeof X=="string"){if(X.toLowerCase()===W.toLowerCase())return!0}else{var te=X.name,ee=X._cat||X.name;if(te===W||ee===W.toLowerCase())return!0}return!1}var s=v.modebar.add;typeof s=="string"&&(s=[s]);var w=v.modebar.remove;typeof w=="string"&&(w=[w]);var b=l.modeBarButtonsToAdd.concat(s.filter(function(W){for(var X=0;X<l.modeBarButtonsToRemove.length;X++)if(_(W,l.modeBarButtonsToRemove[X]))return!1;return!0})),h=l.modeBarButtonsToRemove.concat(w.filter(function(W){for(var X=0;X<l.modeBarButtonsToAdd.length;X++)if(_(W,l.modeBarButtonsToAdd[X]))return!1;return!0})),m=v._has("cartesian"),u=v._has("gl3d"),L=v._has("geo"),S=v._has("pie"),k=v._has("funnelarea"),P=v._has("gl2d"),z=v._has("ternary"),I=v._has("mapbox"),D=v._has("polar"),R=v._has("smith"),B=v._has("sankey"),F=f(v),V=A(v.hovermode),Y=[];function K(W){if(!!W.length){for(var X=[],te=0;te<W.length;te++){for(var ee=W[te],ie=a[ee],le=ie.name.toLowerCase(),ye=(ie._cat||ie.name).toLowerCase(),ue=!1,pe=0;pe<h.length;pe++){var ge=h[pe].toLowerCase();if(ge===le||ge===ye){ue=!0;break}}ue||X.push(a[ee])}Y.push(X)}}var J=["toImage"];l.showEditInChartStudio?J.push("editInChartStudio"):l.showSendToCloud&&J.push("sendDataToCloud"),K(J);var G=[],Z=[],re=[],se=[];(m||P||S||k||z)+L+u+I+D+R>1?(Z=["toggleHover"],re=["resetViews"]):L?(G=["zoomInGeo","zoomOutGeo"],Z=["hoverClosestGeo"],re=["resetGeo"]):u?(Z=["hoverClosest3d"],re=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(G=["zoomInMapbox","zoomOutMapbox"],Z=["toggleHover"],re=["resetViewMapbox"]):P?Z=["hoverClosestGl2d"]:S?Z=["hoverClosestPie"]:B?(Z=["hoverClosestCartesian","hoverCompareCartesian"],re=["resetViewSankey"]):Z=["toggleHover"],m&&(Z=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(i(x)||V)&&(Z=[]),(m||P)&&!F&&(G=["zoomIn2d","zoomOut2d","autoScale2d"],re[0]!=="resetViews"&&(re=["resetScale2d"])),u?se=["zoom3d","pan3d","orbitRotation","tableRotation"]:(m||P)&&!F||z?se=["zoom2d","pan2d"]:I||L?se=["pan2d"]:D&&(se=["zoom2d"]),o(x)&&se.push("select2d","lasso2d");var oe=[],N=function(W){oe.indexOf(W)===-1&&Z.indexOf(W)!==-1&&oe.push(W)};if(Array.isArray(b)){for(var U=[],q=0;q<b.length;q++){var Q=b[q];typeof Q=="string"?(Q=Q.toLowerCase(),n.indexOf(Q)!==-1?(v._has("mapbox")||v._has("cartesian"))&&se.push(Q):Q==="togglespikelines"?N("toggleSpikelines"):Q==="togglehover"?N("toggleHover"):Q==="hovercompare"?N("hoverCompareCartesian"):Q==="hoverclosest"?(N("hoverClosestCartesian"),N("hoverClosestGeo"),N("hoverClosest3d"),N("hoverClosestGl2d"),N("hoverClosestPie")):Q==="v1hovermode"&&(N("toggleHover"),N("hoverClosestCartesian"),N("hoverCompareCartesian"),N("hoverClosestGeo"),N("hoverClosest3d"),N("hoverClosestGl2d"),N("hoverClosestPie"))):U.push(Q)}b=U}return K(se),K(G.concat(re)),K(oe),p(Y,b)}function f(y){for(var v=T.list({_fullLayout:y},null,!0),x=0;x<v.length;x++)if(!v[x].fixedrange)return!1;return!0}function o(y){for(var v=!1,x=0;x<y.length&&!v;x++){var l=y[x];!l._module||!l._module.selectPoints||(M.traceIs(l,"scatter-like")?(c.hasMarkers(l)||c.hasText(l))&&(v=!0):M.traceIs(l,"box-violin")?(l.boxpoints==="all"||l.points==="all")&&(v=!0):v=!0)}return v}function i(y){for(var v=0;v<y.length;v++)if(!M.traceIs(y[v],"noHover"))return!1;return!0}function p(y,v){if(v.length)if(Array.isArray(v[0]))for(var x=0;x<v.length;x++)y.push(v[x]);else y.push(v);return y}function d(y){for(var v=t([],y),x=0;x<v.length;x++)for(var l=v[x],_=0;_<l.length;_++){var s=l[_];if(typeof s=="string")if(a[s]!==void 0)v[x][_]=a[s];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return v}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":952,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("fast-isnumeric"),M=g("../../lib"),A=g("../../fonts/ploticon"),e=g("../../version").version,a=new DOMParser;function n(o){this.container=o.container,this.element=document.createElement("div"),this.update(o.graphInfo,o.buttons),this.container.appendChild(this.element)}var t=n.prototype;t.update=function(o,i){this.graphInfo=o;var p=this.graphInfo._context,d=this.graphInfo._fullLayout,y="modebar-"+d._uid;this.element.setAttribute("id",y),this._uid=y,this.element.className="modebar",p.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),d.modebar.orientation==="v"&&(this.element.className+=" vertical",i=i.reverse());var v=d.modebar,x=p.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";M.deleteRelatedStyleRule(y),M.addRelatedStyleRule(y,x+"#"+y+" .modebar-group","background-color: "+v.bgcolor),M.addRelatedStyleRule(y,"#"+y+" .modebar-btn .icon path","fill: "+v.color),M.addRelatedStyleRule(y,"#"+y+" .modebar-btn:hover .icon path","fill: "+v.activecolor),M.addRelatedStyleRule(y,"#"+y+" .modebar-btn.active .icon path","fill: "+v.activecolor);var l=!this.hasButtons(i),_=this.hasLogo!==p.displaylogo,s=this.locale!==p.locale;if(this.locale=p.locale,(l||_||s)&&(this.removeAllButtons(),this.updateButtons(i),p.watermark||p.displaylogo)){var w=this.getLogo();p.watermark&&(w.className=w.className+" watermark"),d.modebar.orientation==="v"?this.element.insertBefore(w,this.element.childNodes[0]):this.element.appendChild(w),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(o){var i=this;this.buttons=o,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(p){var d=i.createGroup();p.forEach(function(y){var v=y.name;if(!v)throw new Error("must provide button 'name' in button config");if(i.buttonsNames.indexOf(v)!==-1)throw new Error("button name '"+v+"' is taken");i.buttonsNames.push(v);var x=i.createButton(y);i.buttonElements.push(x),d.appendChild(x)}),i.element.appendChild(d)})},t.createGroup=function(){var o=document.createElement("div");return o.className="modebar-group",o},t.createButton=function(o){var i=this,p=document.createElement("a");p.setAttribute("rel","tooltip"),p.className="modebar-btn";var d=o.title;d===void 0?d=o.name:typeof d=="function"&&(d=d(this.graphInfo)),(d||d===0)&&p.setAttribute("data-title",d),o.attr!==void 0&&p.setAttribute("data-attr",o.attr);var y=o.val;y!==void 0&&(typeof y=="function"&&(y=y(this.graphInfo)),p.setAttribute("data-val",y));var v=o.click;if(typeof v!="function")throw new Error("must provide button 'click' function in button config");p.addEventListener("click",function(l){o.click(i.graphInfo,l),i.updateActiveButton(l.currentTarget)}),p.setAttribute("data-toggle",o.toggle||!1),o.toggle&&T.select(p).classed("active",!0);var x=o.icon;return typeof x=="function"?p.appendChild(x()):p.appendChild(this.createIcon(x||A.question)),p.setAttribute("data-gravity",o.gravity||"n"),p},t.createIcon=function(o){var i=c(o.height)?Number(o.height):o.ascent-o.descent,p="http://www.w3.org/2000/svg",d;if(o.path){d=document.createElementNS(p,"svg"),d.setAttribute("viewBox",[0,0,o.width,i].join(" ")),d.setAttribute("class","icon");var y=document.createElementNS(p,"path");y.setAttribute("d",o.path),o.transform?y.setAttribute("transform",o.transform):o.ascent!==void 0&&y.setAttribute("transform","matrix(1 0 0 -1 0 "+o.ascent+")"),d.appendChild(y)}if(o.svg){var v=a.parseFromString(o.svg,"application/xml");d=v.childNodes[0]}return d.setAttribute("height","1em"),d.setAttribute("width","1em"),d},t.updateActiveButton=function(o){var i=this.graphInfo._fullLayout,p=o!==void 0?o.getAttribute("data-attr"):null;this.buttonElements.forEach(function(d){var y=d.getAttribute("data-val")||!0,v=d.getAttribute("data-attr"),x=d.getAttribute("data-toggle")==="true",l=T.select(d);if(x)v===p&&l.classed("active",!l.classed("active"));else{var _=v===null?v:M.nestedProperty(i,v).get();l.classed("active",_===y)}})},t.hasButtons=function(o){var i=this.buttons;if(!i||o.length!==i.length)return!1;for(var p=0;p<o.length;++p){if(o[p].length!==i[p].length)return!1;for(var d=0;d<o[p].length;d++)if(o[p][d].name!==i[p][d].name)return!1}return!0};function r(o){return o+" (v"+e+")"}t.getLogo=function(){var o=this.createGroup(),i=document.createElement("a");return i.href="https://plotly.com/",i.target="_blank",i.setAttribute("data-title",r(M._(this.graphInfo,"Produced with Plotly.js"))),i.className="modebar-btn plotlyjsicon modebar-btn--logo",i.appendChild(this.createIcon(A.newplotlylogo)),o.appendChild(i),o},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){M.removeElement(this.container.querySelector(".modebar")),M.deleteRelatedStyleRule(this._uid)};function f(o,i){var p=o._fullLayout,d=new n({graphInfo:o,container:p._modebardiv.node(),buttons:i});return p._privateplot&&T.select(d.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),d}ne.exports=f},{"../../fonts/ploticon":482,"../../lib":503,"../../version":1123,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(g,ne,ae){var T=g("../../plots/font_attributes"),c=g("../color/attributes"),M=g("../../plot_api/plot_template").templatedArray,A=M("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ne.exports={visible:{valType:"boolean",editType:"plot"},buttons:A,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:T({editType:"plot"}),bgcolor:{valType:"color",dflt:c.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(g,ne,ae){ne.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(g,ne,ae){var T=g("../../lib"),c=g("../color"),M=g("../../plot_api/plot_template"),A=g("../../plots/array_container_defaults"),e=g("./attributes"),a=g("./constants");ne.exports=function(f,o,i,p,d){var y=f.rangeselector||{},v=M.newContainer(o,"rangeselector");function x(b,h){return T.coerce(y,v,e,b,h)}var l=A(y,v,{name:"buttons",handleItemDefaults:n,calendar:d}),_=x("visible",l.length>0);if(_){var s=t(o,i,p);x("x",s[0]),x("y",s[1]),T.noneOrAll(f,o,["x","y"]),x("xanchor"),x("yanchor"),T.coerceFont(x,"font",i.font);var w=x("bgcolor");x("activecolor",c.contrast(w,a.lightAmount,a.darkAmount)),x("bordercolor"),x("borderwidth")}};function n(r,f,o,i){var p=i.calendar;function d(x,l){return T.coerce(r,f,e.buttons,x,l)}var y=d("visible");if(y){var v=d("step");v!=="all"&&(p&&p!=="gregorian"&&(v==="month"||v==="year")?f.stepmode="backward":d("stepmode"),d("count")),d("label")}}function t(r,f,o){for(var i=o.filter(function(v){return f[v].anchor===r._id}),p=0,d=0;d<i.length;d++){var y=f[i[d]].domain;y&&(p=Math.max(y[1],p))}return[r.domain[0],p+a.yPad]}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../registry"),M=g("../../plots/plots"),A=g("../color"),e=g("../drawing"),a=g("../../lib"),n=a.strTranslate,t=g("../../lib/svg_text_utils"),r=g("../../plots/cartesian/axis_ids"),f=g("../../constants/alignment"),o=f.LINE_SPACING,i=f.FROM_TL,p=f.FROM_BR,d=g("./constants"),y=g("./get_update_object");ne.exports=function(u){var L=u._fullLayout,S=L._infolayer.selectAll(".rangeselector").data(v(u),x);S.enter().append("g").classed("rangeselector",!0),S.exit().remove(),S.style({cursor:"pointer","pointer-events":"all"}),S.each(function(k){var P=T.select(this),z=k,I=z.rangeselector,D=P.selectAll("g.button").data(a.filterVisible(I.buttons));D.enter().append("g").classed("button",!0),D.exit().remove(),D.each(function(R){var B=T.select(this),F=y(z,R);R._isActive=l(z,R,F),B.call(_,I,R),B.call(w,I,R,u),B.on("click",function(){u._dragged||c.call("_guiRelayout",u,F)}),B.on("mouseover",function(){R._isHovered=!0,B.call(_,I,R)}),B.on("mouseout",function(){R._isHovered=!1,B.call(_,I,R)})}),h(u,D,I,z._name,P)})};function v(m){for(var u=r.list(m,"x",!0),L=[],S=0;S<u.length;S++){var k=u[S];k.rangeselector&&k.rangeselector.visible&&L.push(k)}return L}function x(m){return m._id}function l(m,u,L){if(u.step==="all")return m.autorange===!0;var S=Object.keys(L);return m.range[0]===L[S[0]]&&m.range[1]===L[S[1]]}function _(m,u,L){var S=a.ensureSingle(m,"rect","selector-rect",function(k){k.attr("shape-rendering","crispEdges")});S.attr({rx:d.rx,ry:d.ry}),S.call(A.stroke,u.bordercolor).call(A.fill,s(u,L)).style("stroke-width",u.borderwidth+"px")}function s(m,u){return u._isActive||u._isHovered?m.activecolor:m.bgcolor}function w(m,u,L,S){function k(z){t.convertToTspans(z,S)}var P=a.ensureSingle(m,"text","selector-text",function(z){z.attr("text-anchor","middle")});P.call(e.font,u.font).text(b(L,S._fullLayout._meta)).call(k)}function b(m,u){return m.label?u?a.templateString(m.label,u):m.label:m.step==="all"?"all":m.count+m.step.charAt(0)}function h(m,u,L,S,k){var P=0,z=0,I=L.borderwidth;u.each(function(){var Y=T.select(this),K=Y.select(".selector-text"),J=L.font.size*o,G=Math.max(J*t.lineCount(K),16)+3;z=Math.max(z,G)}),u.each(function(){var Y=T.select(this),K=Y.select(".selector-rect"),J=Y.select(".selector-text"),G=J.node()&&e.bBox(J.node()).width,Z=L.font.size*o,re=t.lineCount(J),se=Math.max(G+10,d.minButtonWidth);Y.attr("transform",n(I+P,I)),K.attr({x:0,y:0,width:se,height:z}),t.positionText(J,se/2,z/2-(re-1)*Z/2+3),P+=se+5});var D=m._fullLayout._size,R=D.l+D.w*L.x,B=D.t+D.h*(1-L.y),F="left";a.isRightAnchor(L)&&(R-=P,F="right"),a.isCenterAnchor(L)&&(R-=P/2,F="center");var V="top";a.isBottomAnchor(L)&&(B-=z,V="bottom"),a.isMiddleAnchor(L)&&(B-=z/2,V="middle"),P=Math.ceil(P),z=Math.ceil(z),R=Math.round(R),B=Math.round(B),M.autoMargin(m,S+"-range-selector",{x:L.x,y:L.y,l:P*i[F],r:P*p[F],b:z*p[V],t:z*i[V]}),k.attr("transform",n(R,B))}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(g,ne,ae){var T=g("d3-time"),c=g("../../lib").titleCase;ne.exports=function(e,a){var n=e._name,t={};if(a.step==="all")t[n+".autorange"]=!0;else{var r=M(e,a);t[n+".range[0]"]=r[0],t[n+".range[1]"]=r[1]}return t};function M(A,e){var a=A.range,n=new Date(A.r2l(a[1])),t=e.step,r=T["utc"+c(t)],f=e.count,o;switch(e.stepmode){case"backward":o=A.l2r(+r.offset(n,-f));break;case"todate":var i=r.offset(n,-f);o=A.l2r(+r.ceil(i));break}var p=a[1];return[o,p]}},{"../../lib":503,"d3-time":122}],437:[function(g,ne,ae){ne.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:g("./attributes")}}},layoutAttributes:g("./attributes"),handleDefaults:g("./defaults"),draw:g("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(g,ne,ae){var T=g("../color/attributes");ne.exports={bgcolor:{valType:"color",dflt:T.background,editType:"plot"},bordercolor:{valType:"color",dflt:T.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(g,ne,ae){var T=g("../../plots/cartesian/axis_ids").list,c=g("../../plots/cartesian/autorange").getAutoRange,M=g("./constants");ne.exports=function(e){for(var a=T(e,"x",!0),n=0;n<a.length;n++){var t=a[n],r=t[M.name];r&&r.visible&&r.autorange&&(r._input.autorange=!0,r._input.range=r.range=c(e,t))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(g,ne,ae){ne.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plot_api/plot_template"),M=g("../../plots/cartesian/axis_ids"),A=g("./attributes"),e=g("./oppaxis_attributes");ne.exports=function(n,t,r){var f=n[r],o=t[r];if(!(f.rangeslider||t._requestRangeslider[o._id]))return;T.isPlainObject(f.rangeslider)||(f.rangeslider={});var i=f.rangeslider,p=c.newContainer(o,"rangeslider");function d(S,k){return T.coerce(i,p,A,S,k)}var y,v;function x(S,k){return T.coerce(y,v,e,S,k)}var l=d("visible");if(!!l){d("bgcolor",t.plot_bgcolor),d("bordercolor"),d("borderwidth"),d("thickness"),d("autorange",!o.isValidRange(i.range)),d("range");var _=t._subplots;if(_)for(var s=_.cartesian.filter(function(S){return S.substr(0,S.indexOf("y"))===M.name2id(r)}).map(function(S){return S.substr(S.indexOf("y"),S.length)}),w=T.simpleMap(s,M.id2name),b=0;b<w.length;b++){var h=w[b];y=i[h]||{},v=c.newContainer(p,h,"yaxis");var m=t[h],u;y.range&&m.isValidRange(y.range)&&(u="fixed");var L=x("rangemode",u);L!=="match"&&x("range",m.range.slice())}p._input=i}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../registry"),M=g("../../plots/plots"),A=g("../../lib"),e=A.strTranslate,a=g("../drawing"),n=g("../color"),t=g("../titles"),r=g("../../plots/cartesian"),f=g("../../plots/cartesian/axis_ids"),o=g("../dragelement"),i=g("../../lib/setcursor"),p=g("./constants");ne.exports=function(m){for(var u=m._fullLayout,L=u._rangeSliderData,S=0;S<L.length;S++){var k=L[S][p.name];k._clipId=k._id+"-"+u._uid}function P(I){return I._name}var z=u._infolayer.selectAll("g."+p.containerClassName).data(L,P);z.exit().each(function(I){var D=I[p.name];u._topdefs.select("#"+D._clipId).remove()}).remove(),L.length!==0&&(z.enter().append("g").classed(p.containerClassName,!0).attr("pointer-events","all"),z.each(function(I){var D=T.select(this),R=I[p.name],B=u[f.id2name(I.anchor)],F=R[f.id2name(I.anchor)];if(R.range){var V=A.simpleMap(R.range,I.r2l),Y=A.simpleMap(I.range,I.r2l),K;Y[0]<Y[1]?K=[Math.min(V[0],Y[0]),Math.max(V[1],Y[1])]:K=[Math.max(V[0],Y[0]),Math.min(V[1],Y[1])],R.range=R._input.range=A.simpleMap(K,I.l2r)}I.cleanRange("rangeslider.range");var J=u._size,G=I.domain;R._width=J.w*(G[1]-G[0]);var Z=Math.round(J.l+J.w*G[0]),re=Math.round(J.t+J.h*(1-I._counterDomainMin)+(I.side==="bottom"?I._depth:0)+R._offsetShift+p.extraPad);D.attr("transform",e(Z,re)),R._rl=A.simpleMap(R.range,I.r2l);var se=R._rl[0],oe=R._rl[1],N=oe-se;if(R.p2d=function(ye){return ye/R._width*N+se},R.d2p=function(ye){return(ye-se)/N*R._width},I.rangebreaks){var U=I.locateBreaks(se,oe);if(U.length){var q,Q,W=0;for(q=0;q<U.length;q++)Q=U[q],W+=Q.max-Q.min;var X=R._width/(oe-se-W),te=[-X*se];for(q=0;q<U.length;q++)Q=U[q],te.push(te[te.length-1]-X*(Q.max-Q.min));for(R.d2p=function(ye){for(var ue=te[0],pe=0;pe<U.length;pe++){var ge=U[pe];if(ye>=ge.max)ue=te[pe+1];else if(ye<ge.min)break}return ue+X*ye},q=0;q<U.length;q++)Q=U[q],Q.pmin=R.d2p(Q.min),Q.pmax=R.d2p(Q.max);R.p2d=function(ye){for(var ue=te[0],pe=0;pe<U.length;pe++){var ge=U[pe];if(ye>=ge.pmax)ue=te[pe+1];else if(ye<ge.pmin)break}return(ye-ue)/X}}}if(F.rangemode!=="match"){var ee=B.r2l(F.range[0]),ie=B.r2l(F.range[1]),le=ie-ee;R.d2pOppAxis=function(ye){return(ye-ee)/le*R._height}}D.call(x,m,I,R).call(l,m,I,R).call(_,m,I,R).call(w,m,I,R,F).call(b,m,I,R).call(h,m,I,R),d(D,m,I,R),v(D,m,I,R,B,F),I.side==="bottom"&&t.draw(m,I._id+"title",{propContainer:I,propName:I._name+".title",placeholder:u._dfltTitle.x,attributes:{x:I._offset+I._length/2,y:re+R._height+R._offsetShift+10+1.5*I.title.font.size,"text-anchor":"middle"}})}))};function d(m,u,L,S){if(u._context.staticPlot)return;var k=m.select("rect."+p.slideBoxClassName).node(),P=m.select("rect."+p.grabAreaMinClassName).node(),z=m.select("rect."+p.grabAreaMaxClassName).node();function I(){var D=T.event,R=D.target,B=D.clientX||D.touches[0].clientX,F=B-m.node().getBoundingClientRect().left,V=S.d2p(L._rl[0]),Y=S.d2p(L._rl[1]),K=o.coverSlip();this.addEventListener("touchmove",J),this.addEventListener("touchend",G),K.addEventListener("mousemove",J),K.addEventListener("mouseup",G);function J(Z){var re=Z.clientX||Z.touches[0].clientX,se=+re-B,oe,N,U;switch(R){case k:U="ew-resize",oe=V+se,N=Y+se;break;case P:U="col-resize",oe=V+se,N=Y;break;case z:U="col-resize",oe=V,N=Y+se;break;default:U="ew-resize",oe=F,N=F+se;break}if(N<oe){var q=N;N=oe,oe=q}S._pixelMin=oe,S._pixelMax=N,i(T.select(K),U),y(m,u,L,S)}function G(){K.removeEventListener("mousemove",J),K.removeEventListener("mouseup",G),this.removeEventListener("touchmove",J),this.removeEventListener("touchend",G),A.removeElement(K)}}m.on("mousedown",I),m.on("touchstart",I)}function y(m,u,L,S){function k(I){return L.l2r(A.constrain(I,S._rl[0],S._rl[1]))}var P=k(S.p2d(S._pixelMin)),z=k(S.p2d(S._pixelMax));window.requestAnimationFrame(function(){c.call("_guiRelayout",u,L._name+".range",[P,z])})}function v(m,u,L,S,k,P){var z=p.handleWidth/2;function I(Z){return A.constrain(Z,0,S._width)}function D(Z){return A.constrain(Z,0,S._height)}function R(Z){return A.constrain(Z,-z,S._width+z)}var B=I(S.d2p(L._rl[0])),F=I(S.d2p(L._rl[1]));if(m.select("rect."+p.slideBoxClassName).attr("x",B).attr("width",F-B),m.select("rect."+p.maskMinClassName).attr("width",B),m.select("rect."+p.maskMaxClassName).attr("x",F).attr("width",S._width-F),P.rangemode!=="match"){var V=S._height-D(S.d2pOppAxis(k._rl[1])),Y=S._height-D(S.d2pOppAxis(k._rl[0]));m.select("rect."+p.maskMinOppAxisClassName).attr("x",B).attr("height",V).attr("width",F-B),m.select("rect."+p.maskMaxOppAxisClassName).attr("x",B).attr("y",Y).attr("height",S._height-Y).attr("width",F-B),m.select("rect."+p.slideBoxClassName).attr("y",V).attr("height",Y-V)}var K=.5,J=Math.round(R(B-z))-K,G=Math.round(R(F-z))+K;m.select("g."+p.grabberMinClassName).attr("transform",e(J,K)),m.select("g."+p.grabberMaxClassName).attr("transform",e(G,K))}function x(m,u,L,S){var k=A.ensureSingle(m,"rect",p.bgClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),P=S.borderwidth%2==0?S.borderwidth:S.borderwidth-1,z=-S._offsetShift,I=a.crispRound(u,S.borderwidth);k.attr({width:S._width+P,height:S._height+P,transform:e(z,z),fill:S.bgcolor,stroke:S.bordercolor,"stroke-width":I})}function l(m,u,L,S){var k=u._fullLayout,P=A.ensureSingleById(k._topdefs,"clipPath",S._clipId,function(z){z.append("rect").attr({x:0,y:0})});P.select("rect").attr({width:S._width,height:S._height})}function _(m,u,L,S){var k=u.calcdata,P=m.selectAll("g."+p.rangePlotClassName).data(L._subplotsWith,A.identity);P.enter().append("g").attr("class",function(I){return p.rangePlotClassName+" "+I}).call(a.setClipUrl,S._clipId,u),P.order(),P.exit().remove();var z;P.each(function(I,D){var R=T.select(this),B=D===0,F=f.getFromId(u,I,"y"),V=F._name,Y=S[V],K={data:[],layout:{xaxis:{type:L.type,domain:[0,1],range:S.range.slice(),calendar:L.calendar},width:S._width,height:S._height,margin:{t:0,b:0,l:0,r:0}},_context:u._context};L.rangebreaks&&(K.layout.xaxis.rangebreaks=L.rangebreaks),K.layout[V]={type:F.type,domain:[0,1],range:Y.rangemode!=="match"?Y.range.slice():F.range.slice(),calendar:F.calendar},F.rangebreaks&&(K.layout[V].rangebreaks=F.rangebreaks),M.supplyDefaults(K);var J=K._fullLayout.xaxis,G=K._fullLayout[V];J.clearCalc(),J.setScale(),G.clearCalc(),G.setScale();var Z={id:I,plotgroup:R,xaxis:J,yaxis:G,isRangePlot:!0};B?z=Z:(Z.mainplot="xy",Z.mainplotinfo=z),r.rangePlot(u,Z,s(k,I))})}function s(m,u){for(var L=[],S=0;S<m.length;S++){var k=m[S],P=k[0].trace;P.xaxis+P.yaxis===u&&L.push(k)}return L}function w(m,u,L,S,k){var P=A.ensureSingle(m,"rect",p.maskMinClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})});P.attr("height",S._height).call(n.fill,p.maskColor);var z=A.ensureSingle(m,"rect",p.maskMaxClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});if(z.attr("height",S._height).call(n.fill,p.maskColor),k.rangemode!=="match"){var I=A.ensureSingle(m,"rect",p.maskMinOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});I.attr("width",S._width).call(n.fill,p.maskOppAxisColor);var D=A.ensureSingle(m,"rect",p.maskMaxOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});D.attr("width",S._width).style("border-top",p.maskOppBorder).call(n.fill,p.maskOppAxisColor)}}function b(m,u,L,S){if(!u._context.staticPlot){var k=A.ensureSingle(m,"rect",p.slideBoxClassName,function(P){P.attr({y:0,cursor:p.slideBoxCursor,"shape-rendering":"crispEdges"})});k.attr({height:S._height,fill:p.slideBoxFill})}}function h(m,u,L,S){var k=A.ensureSingle(m,"g",p.grabberMinClassName),P=A.ensureSingle(m,"g",p.grabberMaxClassName),z={x:0,width:p.handleWidth,rx:p.handleRadius,fill:n.background,stroke:n.defaultLine,"stroke-width":p.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(S._height/4),height:Math.round(S._height/2)},D=A.ensureSingle(k,"rect",p.handleMinClassName,function(Y){Y.attr(z)});D.attr(I);var R=A.ensureSingle(P,"rect",p.handleMaxClassName,function(Y){Y.attr(z)});R.attr(I);var B={width:p.grabAreaWidth,x:0,y:0,fill:p.grabAreaFill,cursor:u._context.staticPlot?void 0:p.grabAreaCursor},F=A.ensureSingle(k,"rect",p.grabAreaMinClassName,function(Y){Y.attr(B)});F.attr("height",S._height);var V=A.ensureSingle(P,"rect",p.grabAreaMaxClassName,function(Y){Y.attr(B)});V.attr("height",S._height)}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(g,ne,ae){var T=g("../../plots/cartesian/axis_ids"),c=g("../../lib/svg_text_utils"),M=g("./constants"),A=g("../../constants/alignment").LINE_SPACING,e=M.name;function a(n){var t=n&&n[e];return t&&t.visible}ae.isVisible=a,ae.makeData=function(n){var t=T.list({_fullLayout:n},"x",!0),r=n.margin,f=[];if(!n._has("gl2d"))for(var o=0;o<t.length;o++){var i=t[o];if(a(i)){f.push(i);var p=i[e];p._id=e+i._id,p._height=(n.height-r.b-r.t)*p.thickness,p._offsetShift=Math.floor(p.borderwidth/2)}}n._rangeSliderData=f},ae.autoMarginOpts=function(n,t){var r=n._fullLayout,f=t[e],o=t._id.charAt(0),i=0,p=0;if(t.side==="bottom"&&(i=t._depth,t.title.text!==r._dfltTitle[o])){p=1.5*t.title.font.size+10+f._offsetShift;var d=(t.title.text.match(c.BR_TAG_ALL)||[]).length;p+=d*t.title.font.size*A}return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:f._height+i+Math.max(r.margin.b,p),pad:M.extraPad+f._offsetShift*2}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(g,ne,ae){var T=g("../../lib"),c=g("./attributes"),M=g("./oppaxis_attributes"),A=g("./helpers");ne.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:T.extendFlat({},c,{yaxis:M})}}},layoutAttributes:g("./attributes"),handleDefaults:g("./defaults"),calcAutorange:g("./calc_autorange"),draw:g("./draw"),isVisible:A.isVisible,makeData:A.makeData,autoMarginOpts:A.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(g,ne,ae){ne.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(g,ne,ae){var T=g("../annotations/attributes"),c=g("../../traces/scatter/attributes").line,M=g("../drawing/attributes").dash,A=g("../../lib/extend").extendFlat,e=g("../../plot_api/plot_template").templatedArray;g("../../constants/axis_placeable_objects"),ne.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:A({},T.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:A({},T.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:A({},c.color,{editType:"arraydraw"}),width:A({},c.width,{editType:"calc+arraydraw"}),dash:A({},M,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/cartesian/axes"),M=g("./constants"),A=g("./helpers");ne.exports=function(f){var o=f._fullLayout,i=T.filterVisible(o.shapes);if(!(!i.length||!f._fullData.length))for(var p=0;p<i.length;p++){var d=i[p];d._extremes={};var y,v,x=c.getRefType(d.xref),l=c.getRefType(d.yref);if(d.xref!=="paper"&&x!=="domain"){var _=d.xsizemode==="pixel"?d.xanchor:d.x0,s=d.xsizemode==="pixel"?d.xanchor:d.x1;y=c.getFromId(f,d.xref),v=t(y,_,s,d.path,M.paramIsX),v&&(d._extremes[y._id]=c.findExtremes(y,v,e(d)))}if(d.yref!=="paper"&&l!=="domain"){var w=d.ysizemode==="pixel"?d.yanchor:d.y0,b=d.ysizemode==="pixel"?d.yanchor:d.y1;y=c.getFromId(f,d.yref),v=t(y,w,b,d.path,M.paramIsY),v&&(d._extremes[y._id]=c.findExtremes(y,v,a(d)))}}};function e(r){return n(r.line.width,r.xsizemode,r.x0,r.x1,r.path,!1)}function a(r){return n(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function n(r,f,o,i,p,d){var y=r/2,v=d;if(f==="pixel"){var x=p?A.extractPathCoords(p,d?M.paramIsY:M.paramIsX):[o,i],l=T.aggNums(Math.max,null,x),_=T.aggNums(Math.min,null,x),s=_<0?Math.abs(_)+y:y,w=l>0?l+y:y;return{ppad:y,ppadplus:v?s:w,ppadminus:v?w:s}}else return{ppad:y}}function t(r,f,o,i,p){var d=r.type==="category"||r.type==="multicategory"?r.r2c:r.d2c;if(f!==void 0)return[d(f),d(o)];if(!!i){var y=1/0,v=-1/0,x=i.match(M.segmentRE),l,_,s,w,b;for(r.type==="date"&&(d=A.decodeDate(d)),l=0;l<x.length;l++)_=x[l],s=p[_.charAt(0)].drawn,s!==void 0&&(w=x[l].substr(1).match(M.paramRE),!(!w||w.length<s)&&(b=d(w[s]),b<y&&(y=b),b>v&&(v=b)));if(v>=y)return[y,v]}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(g,ne,ae){ne.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/cartesian/axes"),M=g("../../plots/array_container_defaults"),A=g("./attributes"),e=g("./helpers");ne.exports=function(t,r){M(t,r,{name:"shapes",handleItemDefaults:a})};function a(n,t,r){function f(V,Y){return T.coerce(n,t,A,V,Y)}var o=f("visible");if(!!o){var i=f("path"),p=i?"path":"rect",d=f("type",p);t.type!=="path"&&delete t.path,f("editable"),f("layer"),f("opacity"),f("fillcolor"),f("fillrule");var y=f("line.width");y&&(f("line.color"),f("line.dash"));for(var v=f("xsizemode"),x=f("ysizemode"),l=["x","y"],_=0;_<2;_++){var s=l[_],w=s+"anchor",b=s==="x"?v:x,h={_fullLayout:r},m,u,L,S=c.coerceRef(n,t,h,s,void 0,"paper"),k=c.getRefType(S);if(k==="range"?(m=c.getFromId(h,S),m._shapeIndices.push(t._index),L=e.rangeToShapePosition(m),u=e.shapePositionToRange(m)):u=L=T.identity,d!=="path"){var P=.25,z=.75,I=s+"0",D=s+"1",R=n[I],B=n[D];n[I]=u(n[I],!0),n[D]=u(n[D],!0),b==="pixel"?(f(I,0),f(D,10)):(c.coercePosition(t,h,f,S,I,P),c.coercePosition(t,h,f,S,D,z)),t[I]=L(t[I]),t[D]=L(t[D]),n[I]=R,n[D]=B}if(b==="pixel"){var F=n[w];n[w]=u(n[w],!0),c.coercePosition(t,h,f,S,w,.25),t[w]=L(t[w]),n[w]=F}}d==="path"?f("path"):T.noneOrAll(n,t,["x0","x1","y0","y1"])}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(g,ne,ae){var T=g("../../registry"),c=g("../../lib"),M=g("../../plots/cartesian/axes"),A=g("./draw_newshape/helpers").readPaths,e=g("./draw_newshape/display_outlines"),a=g("../../plots/cartesian/handle_outline").clearOutlineControllers,n=g("../color"),t=g("../drawing"),r=g("../../plot_api/plot_template").arrayEditor,f=g("../dragelement"),o=g("../../lib/setcursor"),i=g("./constants"),p=g("./helpers");ne.exports={draw:d,drawOne:x,eraseActiveShape:u};function d(L){var S=L._fullLayout;S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove();for(var k in S._plots){var P=S._plots[k].shapelayer;P&&P.selectAll("path").remove()}for(var z=0;z<S.shapes.length;z++)S.shapes[z].visible&&x(L,z)}function y(L){return!!L._fullLayout._drawing}function v(L){return!L._context.edits.shapePosition}function x(L,S){L._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var k=p.makeOptionsAndPlotinfo(L,S),P=k.options,z=k.plotinfo;if(!P._input||P.visible===!1)return;if(P.layer!=="below")D(L._fullLayout._shapeUpperLayer);else if(P.xref==="paper"||P.yref==="paper")D(L._fullLayout._shapeLowerLayer);else if(z._hadPlotinfo){var I=z.mainplotinfo||z;D(I.shapelayer)}else D(L._fullLayout._shapeLowerLayer);function D(R){var B=s(L,P),F={"data-index":S,"fill-rule":P.fillrule,d:B},V=P.opacity,Y=P.fillcolor,K=P.line.width?P.line.color:"rgba(0,0,0,0)",J=P.line.width,G=P.line.dash;!J&&P.editable===!0&&(J=5,G="solid");var Z=B[B.length-1]!=="Z",re=v(L)&&P.editable&&L._fullLayout._activeShapeIndex===S;re&&(Y=Z?"rgba(0,0,0,0)":L._fullLayout.activeshape.fillcolor,V=L._fullLayout.activeshape.opacity);var se=R.append("path").attr(F).style("opacity",V).call(n.stroke,K).call(n.fill,Y).call(t.dashLine,G,J);l(se,L,P);var oe;if((re||L._context.edits.shapePosition)&&(oe=r(L.layout,"shapes",P)),re){se.style({cursor:"move"});var N={element:se.node(),plotinfo:z,gd:L,editHelpers:oe,isActiveShape:!0},U=A(B,L);e(U,se,N)}else L._context.edits.shapePosition?_(L,se,P,S,R,oe):P.editable===!0&&se.style("pointer-events",Z||n.opacity(Y)*V<=.5?"stroke":"all");se.node().addEventListener("click",function(){return h(L,se)})}}function l(L,S,k){var P=(k.xref+k.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");t.setClipUrl(L,P?"clip"+S._fullLayout._uid+P:null,S)}function _(L,S,k,P,z,I){var D=10,R=10,B=k.xsizemode==="pixel",F=k.ysizemode==="pixel",V=k.type==="line",Y=k.type==="path",K=I.modifyItem,J,G,Z,re,se,oe,N,U,q,Q,W,X,te,ee,ie,le=M.getFromId(L,k.xref),ye=M.getRefType(k.xref),ue=M.getFromId(L,k.yref),pe=M.getRefType(k.yref),ge=p.getDataToPixel(L,le,!1,ye),Te=p.getDataToPixel(L,ue,!0,pe),_e=p.getPixelToData(L,le,!1,ye),De=p.getPixelToData(L,ue,!0,pe),Oe=Pe(),Ue={element:Oe.node(),gd:L,prepFn:Fe,doneFn:Le,clickFn:Ne},xe;f.init(Ue),Oe.node().onmousemove=Qe;function Pe(){return V?Ve():S}function Ve(){var Ut=10,Et=Math.max(k.line.width,Ut),Mt=z.append("g").attr("data-index",P);Mt.append("path").attr("d",S.attr("d")).style({cursor:"move","stroke-width":Et,"stroke-opacity":"0"});var rt={"fill-opacity":"0"},ct=Math.max(Et/2,Ut);return Mt.append("circle").attr({"data-line-point":"start-point",cx:B?ge(k.xanchor)+k.x0:ge(k.x0),cy:F?Te(k.yanchor)-k.y0:Te(k.y0),r:ct}).style(rt).classed("cursor-grab",!0),Mt.append("circle").attr({"data-line-point":"end-point",cx:B?ge(k.xanchor)+k.x1:ge(k.x1),cy:F?Te(k.yanchor)-k.y1:Te(k.y1),r:ct}).style(rt).classed("cursor-grab",!0),Mt}function Qe(Ut){if(y(L)){xe=null;return}if(V)Ut.target.tagName==="path"?xe="move":xe=Ut.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Et=Ue.element.getBoundingClientRect(),Mt=Et.right-Et.left,rt=Et.bottom-Et.top,ct=Ut.clientX-Et.left,Ze=Ut.clientY-Et.top,ke=!Y&&Mt>D&&rt>R&&!Ut.shiftKey?f.getCursor(ct/Mt,1-Ze/rt):"move";o(S,ke),xe=ke.split("-")[0]}}function Fe(Ut){y(L)||(B&&(se=ge(k.xanchor)),F&&(oe=Te(k.yanchor)),k.type==="path"?ie=k.path:(J=B?k.x0:ge(k.x0),G=F?k.y0:Te(k.y0),Z=B?k.x1:ge(k.x1),re=F?k.y1:Te(k.y1)),J<Z?(q=J,te="x0",Q=Z,ee="x1"):(q=Z,te="x1",Q=J,ee="x0"),!F&&G<re||F&&G>re?(N=G,W="y0",U=re,X="y1"):(N=re,W="y1",U=G,X="y0"),Qe(Ut),Xt(z,k),zt(S,k,L),Ue.moveFn=xe==="move"?dt:Dt,Ue.altKey=Ut.altKey)}function Le(){y(L)||(o(S),Tt(z),l(S,L,k),T.call("_guiRelayout",L,I.getUpdateObj()))}function Ne(){y(L)||Tt(z)}function dt(Ut,Et){if(k.type==="path"){var Mt=function(Ze){return Ze},rt=Mt,ct=Mt;B?K("xanchor",k.xanchor=_e(se+Ut)):(rt=function(ke){return _e(ge(ke)+Ut)},le&&le.type==="date"&&(rt=p.encodeDate(rt))),F?K("yanchor",k.yanchor=De(oe+Et)):(ct=function(ke){return De(Te(ke)+Et)},ue&&ue.type==="date"&&(ct=p.encodeDate(ct))),K("path",k.path=b(ie,rt,ct))}else B?K("xanchor",k.xanchor=_e(se+Ut)):(K("x0",k.x0=_e(J+Ut)),K("x1",k.x1=_e(Z+Ut))),F?K("yanchor",k.yanchor=De(oe+Et)):(K("y0",k.y0=De(G+Et)),K("y1",k.y1=De(re+Et)));S.attr("d",s(L,k)),Xt(z,k)}function Dt(Ut,Et){if(Y){var Mt=function(pr){return pr},rt=Mt,ct=Mt;B?K("xanchor",k.xanchor=_e(se+Ut)):(rt=function(Xr){return _e(ge(Xr)+Ut)},le&&le.type==="date"&&(rt=p.encodeDate(rt))),F?K("yanchor",k.yanchor=De(oe+Et)):(ct=function(Xr){return De(Te(Xr)+Et)},ue&&ue.type==="date"&&(ct=p.encodeDate(ct))),K("path",k.path=b(ie,rt,ct))}else if(V){if(xe==="resize-over-start-point"){var Ze=J+Ut,ke=F?G-Et:G+Et;K("x0",k.x0=B?Ze:_e(Ze)),K("y0",k.y0=F?ke:De(ke))}else if(xe==="resize-over-end-point"){var Ge=Z+Ut,Je=F?re-Et:re+Et;K("x1",k.x1=B?Ge:_e(Ge)),K("y1",k.y1=F?Je:De(Je))}}else{var it=function(pr){return xe.indexOf(pr)!==-1},Pt=it("n"),At=it("s"),Ot=it("w"),Jt=it("e"),Bt=Pt?N+Et:N,qt=At?U+Et:U,rr=Ot?q+Ut:q,er=Jt?Q+Ut:Q;F&&(Pt&&(Bt=N-Et),At&&(qt=U-Et)),(!F&&qt-Bt>R||F&&Bt-qt>R)&&(K(W,k[W]=F?Bt:De(Bt)),K(X,k[X]=F?qt:De(qt))),er-rr>D&&(K(te,k[te]=B?rr:_e(rr)),K(ee,k[ee]=B?er:_e(er)))}S.attr("d",s(L,k)),Xt(z,k)}function Xt(Ut,Et){(B||F)&&Mt();function Mt(){var rt=Et.type!=="path",ct=Ut.selectAll(".visual-cue").data([0]),Ze=1;ct.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Ze}).classed("visual-cue",!0);var ke=ge(B?Et.xanchor:c.midRange(rt?[Et.x0,Et.x1]:p.extractPathCoords(Et.path,i.paramIsX))),Ge=Te(F?Et.yanchor:c.midRange(rt?[Et.y0,Et.y1]:p.extractPathCoords(Et.path,i.paramIsY)));if(ke=p.roundPositionForSharpStrokeRendering(ke,Ze),Ge=p.roundPositionForSharpStrokeRendering(Ge,Ze),B&&F){var Je="M"+(ke-1-Ze)+","+(Ge-1-Ze)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";ct.attr("d",Je)}else if(B){var it="M"+(ke-1-Ze)+","+(Ge-9-Ze)+"v18 h2 v-18 Z";ct.attr("d",it)}else{var Pt="M"+(ke-9-Ze)+","+(Ge-1-Ze)+"h18 v2 h-18 Z";ct.attr("d",Pt)}}}function Tt(Ut){Ut.selectAll(".visual-cue").remove()}function zt(Ut,Et,Mt){var rt=Et.xref,ct=Et.yref,Ze=M.getFromId(Mt,rt),ke=M.getFromId(Mt,ct),Ge="";rt!=="paper"&&!Ze.autorange&&(Ge+=rt),ct!=="paper"&&!ke.autorange&&(Ge+=ct),t.setClipUrl(Ut,Ge?"clip"+Mt._fullLayout._uid+Ge:null,Mt)}}function s(L,S){var k=S.type,P=M.getRefType(S.xref),z=M.getRefType(S.yref),I=M.getFromId(L,S.xref),D=M.getFromId(L,S.yref),R=L._fullLayout._size,B,F,V,Y,K,J,G,Z;if(I?P==="domain"?F=function(te){return I._offset+I._length*te}:(B=p.shapePositionToRange(I),F=function(te){return I._offset+I.r2p(B(te,!0))}):F=function(te){return R.l+R.w*te},D?z==="domain"?Y=function(te){return D._offset+D._length*(1-te)}:(V=p.shapePositionToRange(D),Y=function(te){return D._offset+D.r2p(V(te,!0))}):Y=function(te){return R.t+R.h*(1-te)},k==="path")return I&&I.type==="date"&&(F=p.decodeDate(F)),D&&D.type==="date"&&(Y=p.decodeDate(Y)),w(S,F,Y);if(S.xsizemode==="pixel"){var re=F(S.xanchor);K=re+S.x0,J=re+S.x1}else K=F(S.x0),J=F(S.x1);if(S.ysizemode==="pixel"){var se=Y(S.yanchor);G=se-S.y0,Z=se-S.y1}else G=Y(S.y0),Z=Y(S.y1);if(k==="line")return"M"+K+","+G+"L"+J+","+Z;if(k==="rect")return"M"+K+","+G+"H"+J+"V"+Z+"H"+K+"Z";var oe=(K+J)/2,N=(G+Z)/2,U=Math.abs(oe-K),q=Math.abs(N-G),Q="A"+U+","+q,W=oe+U+","+N,X=oe+","+(N-q);return"M"+W+Q+" 0 1,1 "+X+Q+" 0 0,1 "+W+"Z"}function w(L,S,k){var P=L.path,z=L.xsizemode,I=L.ysizemode,D=L.xanchor,R=L.yanchor;return P.replace(i.segmentRE,function(B){var F=0,V=B.charAt(0),Y=i.paramIsX[V],K=i.paramIsY[V],J=i.numParams[V],G=B.substr(1).replace(i.paramRE,function(Z){return Y[F]?z==="pixel"?Z=S(D)+Number(Z):Z=S(Z):K[F]&&(I==="pixel"?Z=k(R)-Number(Z):Z=k(Z)),F++,F>J&&(Z="X"),Z});return F>J&&(G=G.replace(/[\s,]*X.*/,""),c.log("Ignoring extra params in segment "+B)),V+G})}function b(L,S,k){return L.replace(i.segmentRE,function(P){var z=0,I=P.charAt(0),D=i.paramIsX[I],R=i.paramIsY[I],B=i.numParams[I],F=P.substr(1).replace(i.paramRE,function(V){return z>=B||(D[z]?V=S(V):R[z]&&(V=k(V)),z++),V});return I+F})}function h(L,S){if(!!v(L)){var k=S.node(),P=+k.getAttribute("data-index");if(P>=0){if(P===L._fullLayout._activeShapeIndex){m(L);return}L._fullLayout._activeShapeIndex=P,L._fullLayout._deactivateShape=m,d(L)}}}function m(L){if(!!v(L)){var S=L._fullLayout._activeShapeIndex;S>=0&&(a(L),delete L._fullLayout._activeShapeIndex,d(L))}}function u(L){if(!!v(L)){a(L);var S=L._fullLayout._activeShapeIndex,k=(L.layout||{}).shapes||[];if(S<k.length){for(var P=[],z=0;z<k.length;z++)z!==S&&P.push(k[z]);delete L._fullLayout._activeShapeIndex,T.call("_guiRelayout",L,{shapes:P})}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(g,ne,ae){var T=g("../../drawing/attributes").dash,c=g("../../../lib/extend").extendFlat;ne.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:c({},T,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(g,ne,ae){var T=32;ne.exports={CIRCLE_SIDES:T,i000:0,i090:T/4,i180:T/2,i270:T/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(g,ne,ae){var T=g("../../color");ne.exports=function(M,A,e){e("newshape.drawdirection"),e("newshape.layer"),e("newshape.fillcolor"),e("newshape.fillrule"),e("newshape.opacity");var a=e("newshape.line.width");if(a){var n=(M||{}).plot_bgcolor||"#FFF";e("newshape.line.color",T.contrast(n)),e("newshape.line.dash")}e("activeshape.fillcolor"),e("activeshape.opacity")}},{"../../color":366}],454:[function(g,ne,ae){var T=g("../../dragelement"),c=g("../../dragelement/helpers"),M=c.drawMode,A=g("../../../registry"),e=g("./constants"),a=e.i000,n=e.i090,t=e.i180,r=e.i270,f=g("../../../plots/cartesian/handle_outline"),o=f.clearOutlineControllers,i=g("./helpers"),p=i.pointsShapeRectangle,d=i.pointsShapeEllipse,y=i.writePaths,v=g("./newshapes");ne.exports=function l(_,s,w,b){b||(b=0);var h=w.gd;function m(){l(_,s,w,b++),d(_[0])&&u({redrawing:!0})}function u(Q){w.isActiveShape=!1;var W=v(s,w);Object.keys(W).length&&A.call((Q||{}).redrawing?"relayout":"_guiRelayout",h,W)}var L=w.isActiveShape,S=h._fullLayout,k=S._zoomlayer,P=w.dragmode,z=M(P);z?h._fullLayout._drawing=!0:h._fullLayout._activeShapeIndex>=0&&o(h),s.attr("d",y(_));var I,D,R,B,F;if(L&&!b){F=x([],_);var V=k.append("g").attr("class","outline-controllers");re(V),q()}function Y(Q){R=+Q.srcElement.getAttribute("data-i"),B=+Q.srcElement.getAttribute("data-j"),I[R][B].moveFn=K}function K(Q,W){if(!!_.length){var X=F[R][B][1],te=F[R][B][2],ee=_[R],ie=ee.length;if(p(ee)){for(var le=0;le<ie;le++)if(le!==B){var ye=ee[le];ye[1]===ee[B][1]&&(ye[1]=X+Q),ye[2]===ee[B][2]&&(ye[2]=te+W)}if(ee[B][1]=X+Q,ee[B][2]=te+W,!p(ee))for(var ue=0;ue<ie;ue++)for(var pe=0;pe<ee[ue].length;pe++)ee[ue][pe]=F[R][ue][pe]}else ee[B][1]=X+Q,ee[B][2]=te+W;m()}}function J(){u()}function G(){if(!!_.length&&!!_[R]&&!!_[R].length){for(var Q=[],W=0;W<_[R].length;W++)W!==B&&Q.push(_[R][W]);Q.length>1&&!(Q.length===2&&Q[1][0]==="Z")&&(B===0&&(Q[0][0]="M"),_[R]=Q,m(),u())}}function Z(Q,W){if(Q===2){R=+W.srcElement.getAttribute("data-i"),B=+W.srcElement.getAttribute("data-j");var X=_[R];!p(X)&&!d(X)&&G()}}function re(Q){I=[];for(var W=0;W<_.length;W++){var X=_[W],te=p(X),ee=!te&&d(X);I[W]=[];for(var ie=0;ie<X.length;ie++)if(X[ie][0]!=="Z"&&!(ee&&ie!==a&&ie!==n&&ie!==t&&ie!==r)){var le=X[ie][1],ye=X[ie][2],ue=Q.append("circle").classed("cursor-grab",!0).attr("data-i",W).attr("data-j",ie).attr("cx",le).attr("cy",ye).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});I[W][ie]={element:ue.node(),gd:h,prepFn:Y,doneFn:J,clickFn:Z},T.init(I[W][ie])}}}function se(Q,W){if(!!_.length)for(var X=0;X<_.length;X++)for(var te=0;te<_[X].length;te++)for(var ee=0;ee+2<_[X][te].length;ee+=2)_[X][te][ee+1]=F[X][te][ee+1]+Q,_[X][te][ee+2]=F[X][te][ee+2]+W}function oe(Q,W){se(Q,W),m()}function N(Q){R=+Q.srcElement.getAttribute("data-i"),R||(R=0),D[R].moveFn=oe}function U(){u()}function q(){if(D=[],!!_.length){var Q=0;D[Q]={element:s[0][0],gd:h,prepFn:N,doneFn:U},T.init(D[Q])}}};function x(l,_){for(var s=0;s<_.length;s++){var w=_[s];l[s]=[];for(var b=0;b<w.length;b++){l[s][b]=[];for(var h=0;h<w[b].length;h++)l[s][b][h]=w[b][h]}}return l}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(g,ne,ae){var T=g("parse-svg-path"),c=g("./constants"),M=c.CIRCLE_SIDES,A=c.SQRT2,e=g("../../../plots/cartesian/helpers"),a=e.p2r,n=e.r2p,t=[0,3,4,5,6,1,2],r=[0,3,4,1,2];ae.writePaths=function(i){var p=i.length;if(!p)return"M0,0Z";for(var d="",y=0;y<p;y++)for(var v=i[y].length,x=0;x<v;x++){var l=i[y][x][0];if(l==="Z")d+="Z";else for(var _=i[y][x].length,s=0;s<_;s++){var w=s;l==="Q"||l==="S"?w=r[s]:l==="C"&&(w=t[s]),d+=i[y][x][w],s>0&&s<_-1&&(d+=",")}}return d},ae.readPaths=function(i,p,d,y){var v=T(i),x=[],l=-1,_=function(){l++,x[l]=[]},s,w=0,b=0,h,m,u=function(){h=w,m=b};u();for(var L=0;L<v.length;L++){var S=[],k,P,z,I,D=v[L][0],R=D;switch(D){case"M":_(),w=+v[L][1],b=+v[L][2],S.push([R,w,b]),u();break;case"Q":case"S":k=+v[L][1],z=+v[L][2],w=+v[L][3],b=+v[L][4],S.push([R,w,b,k,z]);break;case"C":k=+v[L][1],z=+v[L][2],P=+v[L][3],I=+v[L][4],w=+v[L][5],b=+v[L][6],S.push([R,w,b,k,z,P,I]);break;case"T":case"L":w=+v[L][1],b=+v[L][2],S.push([R,w,b]);break;case"H":R="L",w=+v[L][1],S.push([R,w,b]);break;case"V":R="L",b=+v[L][1],S.push([R,w,b]);break;case"A":R="L";var B=+v[L][1],F=+v[L][2];+v[L][4]||(B=-B,F=-F);var V=w-B,Y=b;for(s=1;s<=M/2;s++){var K=2*Math.PI*s/M;S.push([R,V+B*Math.cos(K),Y+F*Math.sin(K)])}break;case"Z":(w!==h||b!==m)&&(w=h,b=m,S.push([R,w,b]));break}for(var J=(d||{}).domain,G=p._fullLayout._size,Z=d&&d.xsizemode==="pixel",re=d&&d.ysizemode==="pixel",se=y===!1,oe=0;oe<S.length;oe++){for(s=0;s+2<7;s+=2){var N=S[oe][s+1],U=S[oe][s+2];N===void 0||U===void 0||(w=N,b=U,d&&(d.xaxis&&d.xaxis.p2r?(se&&(N-=d.xaxis._offset),Z?N=n(d.xaxis,d.xanchor)+N:N=a(d.xaxis,N)):(se&&(N-=G.l),J?N=J.x[0]+N/G.w:N=N/G.w),d.yaxis&&d.yaxis.p2r?(se&&(U-=d.yaxis._offset),re?U=n(d.yaxis,d.yanchor)-U:U=a(d.yaxis,U)):(se&&(U-=G.t),J?U=J.y[1]-U/G.h:U=1-U/G.h)),S[oe][s+1]=N,S[oe][s+2]=U)}x[l].push(S[oe].slice())}}return x};function f(i,p){return Math.abs(i-p)<=1e-6}function o(i,p){var d=p[1]-i[1],y=p[2]-i[2];return Math.sqrt(d*d+y*y)}ae.pointsShapeRectangle=function(i){var p=i.length;if(p!==5)return!1;for(var d=1;d<3;d++){var y=i[0][d]-i[1][d],v=i[3][d]-i[2][d];if(!f(y,v))return!1;var x=i[0][d]-i[3][d],l=i[1][d]-i[2][d];if(!f(x,l))return!1}return!f(i[0][1],i[1][1])&&!f(i[0][1],i[3][1])?!1:!!(o(i[0],i[1])*o(i[0],i[3]))},ae.pointsShapeEllipse=function(i){var p=i.length;if(p!==M+1)return!1;p=M;for(var d=0;d<p;d++){var y=(p*2-d)%p,v=(p/2+y)%p,x=(p/2+d)%p;if(!f(o(i[d],i[x]),o(i[y],i[v])))return!1}return!0},ae.handleEllipse=function(i,p,d){if(!i)return[p,d];var y=ae.ellipseOver({x0:p[0],y0:p[1],x1:d[0],y1:d[1]}),v=(y.x1+y.x0)/2,x=(y.y1+y.y0)/2,l=(y.x1-y.x0)/2,_=(y.y1-y.y0)/2;l||(l=_=_/A),_||(_=l=l/A);for(var s=[],w=0;w<M;w++){var b=w*2*Math.PI/M;s.push([v+l*Math.cos(b),x+_*Math.sin(b)])}return s},ae.ellipseOver=function(i){var p=i.x0,d=i.y0,y=i.x1,v=i.y1,x=y-p,l=v-d;p-=x,d-=l;var _=(p+y)/2,s=(d+v)/2,w=A;return x*=w,l*=w,{x0:_-x,y0:s-l,x1:_+x,y1:s+l}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(g,ne,ae){var T=g("../../dragelement/helpers"),c=T.drawMode,M=T.openMode,A=g("./constants"),e=A.i000,a=A.i090,n=A.i180,t=A.i270,r=A.cos45,f=A.sin45,o=g("../../../plots/cartesian/helpers"),i=o.p2r,p=o.r2p,d=g("../../../plots/cartesian/handle_outline"),y=d.clearSelect,v=g("./helpers"),x=v.readPaths,l=v.writePaths,_=v.ellipseOver;ne.exports=function(b,h){if(!!b.length){var m=b[0][0];if(!!m){var u=m.getAttribute("d"),L=h.gd,S=L._fullLayout.newshape,k=h.plotinfo,P=k.xaxis,z=k.yaxis,I=!!k.domain||!k.xaxis,D=!!k.domain||!k.yaxis,R=h.isActiveShape,B=h.dragmode,F=(L.layout||{}).shapes||[];if(!c(B)&&R!==void 0){var V=L._fullLayout._activeShapeIndex;if(V<F.length)switch(L._fullLayout.shapes[V].type){case"rect":B="drawrect";break;case"circle":B="drawcircle";break;case"line":B="drawline";break;case"path":var Y=F[V].path||"";Y[Y.length-1]==="Z"?B="drawclosedpath":B="drawopenpath";break}}var K=M(B),J=x(u,L,k,R),G={editable:!0,xref:I?"paper":P._id,yref:D?"paper":z._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};K||(G.fillcolor=S.fillcolor,G.fillrule=S.fillrule);var Z;if(J.length===1&&(Z=J[0]),Z&&B==="drawrect")G.type="rect",G.x0=Z[0][1],G.y0=Z[0][2],G.x1=Z[2][1],G.y1=Z[2][2];else if(Z&&B==="drawline")G.type="line",G.x0=Z[0][1],G.y0=Z[0][2],G.x1=Z[1][1],G.y1=Z[1][2];else if(Z&&B==="drawcircle"){G.type="circle";var re=Z[e][1],se=Z[a][1],oe=Z[n][1],N=Z[t][1],U=Z[e][2],q=Z[a][2],Q=Z[n][2],W=Z[t][2],X=k.xaxis&&(k.xaxis.type==="date"||k.xaxis.type==="log"),te=k.yaxis&&(k.yaxis.type==="date"||k.yaxis.type==="log");X&&(re=p(k.xaxis,re),se=p(k.xaxis,se),oe=p(k.xaxis,oe),N=p(k.xaxis,N)),te&&(U=p(k.yaxis,U),q=p(k.yaxis,q),Q=p(k.yaxis,Q),W=p(k.yaxis,W));var ee=(se+N)/2,ie=(U+Q)/2,le=(N-se+oe-re)/2,ye=(W-q+Q-U)/2,ue=_({x0:ee,y0:ie,x1:ee+le*r,y1:ie+ye*f});X&&(ue.x0=i(k.xaxis,ue.x0),ue.x1=i(k.xaxis,ue.x1)),te&&(ue.y0=i(k.yaxis,ue.y0),ue.y1=i(k.yaxis,ue.y1)),G.x0=ue.x0,G.y0=ue.y0,G.x1=ue.x1,G.y1=ue.y1}else G.type="path",P&&z&&s(J,P,z),G.path=l(J),Z=null;y(L);for(var pe=h.editHelpers,ge=(pe||{}).modifyItem,Te=[],_e=0;_e<F.length;_e++){var De=L._fullLayout.shapes[_e];if(Te[_e]=De._input,R!==void 0&&_e===L._fullLayout._activeShapeIndex){var Oe=G;switch(De.type){case"line":case"rect":case"circle":ge("x0",Oe.x0),ge("x1",Oe.x1),ge("y0",Oe.y0),ge("y1",Oe.y1);break;case"path":ge("path",Oe.path);break}}}return R===void 0?(Te.push(G),Te):pe?pe.getUpdateObj():{}}}};function s(w,b,h){var m=b.type==="date",u=h.type==="date";if(!m&&!u)return w;for(var L=0;L<w.length;L++)for(var S=0;S<w[L].length;S++)for(var k=0;k+2<w[L][S].length;k+=2)m&&(w[L][S][k+1]=w[L][S][k+1].replace(" ","_")),u&&(w[L][S][k+2]=w[L][S][k+2].replace(" ","_"));return w}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(g,ne,ae){var T=g("./constants"),c=g("../../lib");ae.rangeToShapePosition=function(M){return M.type==="log"?M.r2d:function(A){return A}},ae.shapePositionToRange=function(M){return M.type==="log"?M.d2r:function(A){return A}},ae.decodeDate=function(M){return function(A){return A.replace&&(A=A.replace("_"," ")),M(A)}},ae.encodeDate=function(M){return function(A){return M(A).replace(" ","_")}},ae.extractPathCoords=function(M,A){var e=[],a=M.match(T.segmentRE);return a.forEach(function(n){var t=A[n.charAt(0)].drawn;if(t!==void 0){var r=n.substr(1).match(T.paramRE);!r||r.length<t||e.push(c.cleanNumber(r[t]))}}),e},ae.getDataToPixel=function(M,A,e,a){var n=M._fullLayout._size,t;if(A)if(a==="domain")t=function(f){return A._length*(e?1-f:f)+A._offset};else{var r=ae.shapePositionToRange(A);t=function(f){return A._offset+A.r2p(r(f,!0))},A.type==="date"&&(t=ae.decodeDate(t))}else e?t=function(f){return n.t+n.h*(1-f)}:t=function(f){return n.l+n.w*f};return t},ae.getPixelToData=function(M,A,e,a){var n=M._fullLayout._size,t;if(A)if(a==="domain")t=function(f){var o=(f-A._offset)/A._length;return e?1-o:o};else{var r=ae.rangeToShapePosition(A);t=function(f){return r(A.p2r(f-A._offset))}}else e?t=function(f){return 1-(f-n.t)/n.h}:t=function(f){return(f-n.l)/n.w};return t},ae.roundPositionForSharpStrokeRendering=function(M,A){var e=Math.round(A%2)===1,a=Math.round(M);return e?a+.5:a},ae.makeOptionsAndPlotinfo=function(M,A){var e=M._fullLayout.shapes[A]||{},a=M._fullLayout._plots[e.xref+e.yref],n=!!a;return n?a._hadPlotinfo=!0:(a={},e.xref&&e.xref!=="paper"&&(a.xaxis=M._fullLayout[e.xref+"axis"]),e.yref&&e.yref!=="paper"&&(a.yaxis=M._fullLayout[e.yref+"axis"])),a.xsizemode=e.xsizemode,a.ysizemode=e.ysizemode,a.xanchor=e.xanchor,a.yanchor=e.yanchor,{options:e,plotinfo:a}}},{"../../lib":503,"./constants":448}],458:[function(g,ne,ae){var T=g("./draw");ne.exports={moduleType:"component",name:"shapes",layoutAttributes:g("./attributes"),supplyLayoutDefaults:g("./defaults"),supplyDrawNewShapeDefaults:g("./draw_newshape/defaults"),includeBasePlot:g("../../plots/cartesian/include_components")("shapes"),calcAutorange:g("./calc_autorange"),draw:T.draw,drawOne:T.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(g,ne,ae){var T=g("../../plots/font_attributes"),c=g("../../plots/pad_attributes"),M=g("../../lib/extend").extendDeepAll,A=g("../../plot_api/edit_types").overrideAll,e=g("../../plots/animation_attributes"),a=g("../../plot_api/plot_template").templatedArray,n=g("./constants"),t=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ne.exports=A(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:M(c({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:T({})},font:T({}),activebgcolor:{valType:"color",dflt:n.gripBgActiveColor},bgcolor:{valType:"color",dflt:n.railBgColor},bordercolor:{valType:"color",dflt:n.railBorderColor},borderwidth:{valType:"number",min:0,dflt:n.railBorderWidth},ticklen:{valType:"number",min:0,dflt:n.tickLength},tickcolor:{valType:"color",dflt:n.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:n.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(g,ne,ae){ne.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/array_container_defaults"),M=g("./attributes"),A=g("./constants"),e=A.name,a=M.steps;ne.exports=function(f,o){c(f,o,{name:e,handleItemDefaults:n})};function n(r,f,o){function i(s,w){return T.coerce(r,f,M,s,w)}for(var p=c(r,f,{name:"steps",handleItemDefaults:t}),d=0,y=0;y<p.length;y++)p[y].visible&&d++;var v;if(d<2?v=f.visible=!1:v=i("visible"),!!v){f._stepCount=d;var x=f._visibleSteps=T.filterVisible(p),l=i("active");(p[l]||{}).visible||(f.active=x[0]._index),i("x"),i("y"),T.noneOrAll(r,f,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),T.coerceFont(i,"font",o.font);var _=i("currentvalue.visible");_&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),T.coerceFont(i,"currentvalue.font",f.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}function t(r,f){function o(d,y){return T.coerce(r,f,a,d,y)}var i;if(r.method!=="skip"&&!Array.isArray(r.args)?i=f.visible=!1:i=o("visible"),i){o("method"),o("args");var p=o("label","step-"+f._index);o("value",p),o("execute")}}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../plots/plots"),M=g("../color"),A=g("../drawing"),e=g("../../lib"),a=e.strTranslate,n=g("../../lib/svg_text_utils"),t=g("../../plot_api/plot_template").arrayEditor,r=g("./constants"),f=g("../../constants/alignment"),o=f.LINE_SPACING,i=f.FROM_TL,p=f.FROM_BR;ne.exports=function(B){var F=B._fullLayout,V=y(F,B),Y=F._infolayer.selectAll("g."+r.containerClassName).data(V.length>0?[0]:[]);Y.enter().append("g").classed(r.containerClassName,!0).style("cursor","ew-resize");function K(re){re._commandObserver&&(re._commandObserver.remove(),delete re._commandObserver),c.autoMargin(B,d(re))}if(Y.exit().each(function(){T.select(this).selectAll("g."+r.groupClassName).each(K)}).remove(),V.length!==0){var J=Y.selectAll("g."+r.groupClassName).data(V,v);J.enter().append("g").classed(r.groupClassName,!0),J.exit().each(K).remove();for(var G=0;G<V.length;G++){var Z=V[G];x(B,Z)}J.each(function(re){var se=T.select(this);S(re),c.manageCommandObserver(B,re,re._visibleSteps,function(oe){var N=se.data()[0];N.active!==oe.index&&(N._dragging||m(B,se,N,oe.index,!1,!0))}),l(B,T.select(this),re)})}};function d(R){return r.autoMarginIdRoot+R._index}function y(R,B){for(var F=R[r.name],V=[],Y=0;Y<F.length;Y++){var K=F[Y];!K.visible||(K._gd=B,V.push(K))}return V}function v(R){return R._index}function x(R,B){var F=A.tester.selectAll("g."+r.labelGroupClass).data(B._visibleSteps);F.enter().append("g").classed(r.labelGroupClass,!0);var V=0,Y=0;F.each(function(q){var Q=T.select(this),W=w(Q,{step:q},B),X=W.node();if(X){var te=A.bBox(X);Y=Math.max(Y,te.height),V=Math.max(V,te.width)}}),F.remove();var K=B._dims={};K.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var J=R._fullLayout._size;K.lx=J.l+J.w*B.x,K.ly=J.t+J.h*(1-B.y),B.lenmode==="fraction"?K.outerLength=Math.round(J.w*B.len):K.outerLength=B.len,K.inputAreaStart=0,K.inputAreaLength=Math.round(K.outerLength-B.pad.l-B.pad.r);var G=K.inputAreaLength-2*r.stepInset,Z=G/(B._stepCount-1),re=V+r.labelPadding;if(K.labelStride=Math.max(1,Math.ceil(re/Z)),K.labelHeight=Y,K.currentValueMaxWidth=0,K.currentValueHeight=0,K.currentValueTotalHeight=0,K.currentValueMaxLines=1,B.currentvalue.visible){var se=A.tester.append("g");F.each(function(q){var Q=_(se,B,q.label),W=Q.node()&&A.bBox(Q.node())||{width:0,height:0},X=n.lineCount(Q);K.currentValueMaxWidth=Math.max(K.currentValueMaxWidth,Math.ceil(W.width)),K.currentValueHeight=Math.max(K.currentValueHeight,Math.ceil(W.height)),K.currentValueMaxLines=Math.max(K.currentValueMaxLines,X)}),K.currentValueTotalHeight=K.currentValueHeight+B.currentvalue.offset,se.remove()}K.height=K.currentValueTotalHeight+r.tickOffset+B.ticklen+r.labelOffset+K.labelHeight+B.pad.t+B.pad.b;var oe="left";e.isRightAnchor(B)&&(K.lx-=K.outerLength,oe="right"),e.isCenterAnchor(B)&&(K.lx-=K.outerLength/2,oe="center");var N="top";e.isBottomAnchor(B)&&(K.ly-=K.height,N="bottom"),e.isMiddleAnchor(B)&&(K.ly-=K.height/2,N="middle"),K.outerLength=Math.ceil(K.outerLength),K.height=Math.ceil(K.height),K.lx=Math.round(K.lx),K.ly=Math.round(K.ly);var U={y:B.y,b:K.height*p[N],t:K.height*i[N]};B.lenmode==="fraction"?(U.l=0,U.xl=B.x-B.len*i[oe],U.r=0,U.xr=B.x+B.len*p[oe]):(U.x=B.x,U.l=K.outerLength*i[oe],U.r=K.outerLength*p[oe]),c.autoMargin(R,d(B),U)}function l(R,B,F){(F.steps[F.active]||{}).visible||(F.active=F._visibleSteps[0]._index),B.call(_,F).call(D,F).call(b,F).call(L,F).call(I,R,F).call(s,R,F);var V=F._dims;A.setTranslate(B,V.lx+F.pad.l,V.ly+F.pad.t),B.call(k,F,!1),B.call(_,F)}function _(R,B,F){if(!!B.currentvalue.visible){var V=B._dims,Y,K;switch(B.currentvalue.xanchor){case"right":Y=V.inputAreaLength-r.currentValueInset-V.currentValueMaxWidth,K="left";break;case"center":Y=V.inputAreaLength*.5,K="middle";break;default:Y=r.currentValueInset,K="left"}var J=e.ensureSingle(R,"text",r.labelClass,function(N){N.attr({"text-anchor":K,"data-notex":1})}),G=B.currentvalue.prefix?B.currentvalue.prefix:"";if(typeof F=="string")G+=F;else{var Z=B.steps[B.active].label,re=B._gd._fullLayout._meta;re&&(Z=e.templateString(Z,re)),G+=Z}B.currentvalue.suffix&&(G+=B.currentvalue.suffix),J.call(A.font,B.currentvalue.font).text(G).call(n.convertToTspans,B._gd);var se=n.lineCount(J),oe=(V.currentValueMaxLines+1-se)*B.currentvalue.font.size*o;return n.positionText(J,Y,oe),J}}function s(R,B,F){var V=e.ensureSingle(R,"rect",r.gripRectClass,function(Y){Y.call(u,B,R,F).style("pointer-events","all")});V.attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(M.stroke,F.bordercolor).call(M.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function w(R,B,F){var V=e.ensureSingle(R,"text",r.labelClass,function(J){J.attr({"text-anchor":"middle","data-notex":1})}),Y=B.step.label,K=F._gd._fullLayout._meta;return K&&(Y=e.templateString(Y,K)),V.call(A.font,F.font).text(Y).call(n.convertToTspans,F._gd),V}function b(R,B){var F=e.ensureSingle(R,"g",r.labelsClass),V=B._dims,Y=F.selectAll("g."+r.labelGroupClass).data(V.labelSteps);Y.enter().append("g").classed(r.labelGroupClass,!0),Y.exit().remove(),Y.each(function(K){var J=T.select(this);J.call(w,K,B),A.setTranslate(J,P(B,K.fraction),r.tickOffset+B.ticklen+B.font.size*o+r.labelOffset+V.currentValueTotalHeight)})}function h(R,B,F,V,Y){var K=Math.round(V*(F._stepCount-1)),J=F._visibleSteps[K]._index;J!==F.active&&m(R,B,F,J,!0,Y)}function m(R,B,F,V,Y,K){var J=F.active;F.active=V,t(R.layout,r.name,F).applyUpdate("active",V);var G=F.steps[F.active];B.call(k,F,K),B.call(_,F),R.emit("plotly_sliderchange",{slider:F,step:F.steps[F.active],interaction:Y,previousActive:J}),G&&G.method&&Y&&(B._nextMethod?(B._nextMethod.step=G,B._nextMethod.doCallback=Y,B._nextMethod.doTransition=K):(B._nextMethod={step:G,doCallback:Y,doTransition:K},B._nextMethodRaf=window.requestAnimationFrame(function(){var Z=B._nextMethod.step;!Z.method||(Z.execute&&c.executeAPICommand(R,Z.method,Z.args),B._nextMethod=null,B._nextMethodRaf=null)})))}function u(R,B,F){var V=F.node(),Y=T.select(B);function K(){return F.data()[0]}function J(){var G=K();B.emit("plotly_sliderstart",{slider:G});var Z=F.select("."+r.gripRectClass);T.event.stopPropagation(),T.event.preventDefault(),Z.call(M.fill,G.activebgcolor);var re=z(G,T.mouse(V)[0]);h(B,F,G,re,!0),G._dragging=!0;function se(){var N=K(),U=z(N,T.mouse(V)[0]);h(B,F,N,U,!1)}Y.on("mousemove",se),Y.on("touchmove",se);function oe(){var N=K();N._dragging=!1,Z.call(M.fill,N.bgcolor),Y.on("mouseup",null),Y.on("mousemove",null),Y.on("touchend",null),Y.on("touchmove",null),B.emit("plotly_sliderend",{slider:N,step:N.steps[N.active]})}Y.on("mouseup",oe),Y.on("touchend",oe)}R.on("mousedown",J),R.on("touchstart",J)}function L(R,B){var F=R.selectAll("rect."+r.tickRectClass).data(B._visibleSteps),V=B._dims;F.enter().append("rect").classed(r.tickRectClass,!0),F.exit().remove(),F.attr({width:B.tickwidth+"px","shape-rendering":"crispEdges"}),F.each(function(Y,K){var J=K%V.labelStride==0,G=T.select(this);G.attr({height:J?B.ticklen:B.minorticklen}).call(M.fill,B.tickcolor),A.setTranslate(G,P(B,K/(B._stepCount-1))-.5*B.tickwidth,(J?r.tickOffset:r.minorTickOffset)+V.currentValueTotalHeight)})}function S(R){var B=R._dims;B.labelSteps=[];for(var F=R._stepCount,V=0;V<F;V+=B.labelStride)B.labelSteps.push({fraction:V/(F-1),step:R._visibleSteps[V]})}function k(R,B,F){for(var V=R.select("rect."+r.gripRectClass),Y=0,K=0;K<B._stepCount;K++)if(B._visibleSteps[K]._index===B.active){Y=K;break}var J=P(B,Y/(B._stepCount-1));if(!B._invokingCommand){var G=V;F&&B.transition.duration>0&&(G=G.transition().duration(B.transition.duration).ease(B.transition.easing)),G.attr("transform",a(J-r.gripWidth*.5,B._dims.currentValueTotalHeight))}}function P(R,B){var F=R._dims;return F.inputAreaStart+r.stepInset+(F.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,B))}function z(R,B){var F=R._dims;return Math.min(1,Math.max(0,(B-r.stepInset-F.inputAreaStart)/(F.inputAreaLength-2*r.stepInset-2*F.inputAreaStart)))}function I(R,B,F){var V=F._dims,Y=e.ensureSingle(R,"rect",r.railTouchRectClass,function(K){K.call(u,B,R,F).style("pointer-events","all")});Y.attr({width:V.inputAreaLength,height:Math.max(V.inputAreaWidth,r.tickOffset+F.ticklen+V.labelHeight)}).call(M.fill,F.bgcolor).attr("opacity",0),A.setTranslate(Y,0,V.currentValueTotalHeight)}function D(R,B){var F=B._dims,V=F.inputAreaLength-r.railInset*2,Y=e.ensureSingle(R,"rect",r.railRectClass);Y.attr({width:V,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(M.stroke,B.bordercolor).call(M.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px"),A.setTranslate(Y,r.railInset,(F.inputAreaWidth-r.railWidth)*.5+F.currentValueTotalHeight)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(g,ne,ae){var T=g("./constants");ne.exports={moduleType:"component",name:T.name,layoutAttributes:g("./attributes"),supplyLayoutDefaults:g("./defaults"),draw:g("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("fast-isnumeric"),M=g("../../plots/plots"),A=g("../../registry"),e=g("../../lib"),a=e.strTranslate,n=g("../drawing"),t=g("../color"),r=g("../../lib/svg_text_utils"),f=g("../../constants/interactions"),o=g("../../constants/alignment").OPPOSITE_SIDE,i=/ [XY][0-9]* /;function p(d,y,v){var x=v.propContainer,l=v.propName,_=v.placeholder,s=v.traceIndex,w=v.avoid||{},b=v.attributes,h=v.transform,m=v.containerGroup,u=d._fullLayout,L=1,S=!1,k=x.title,P=(k&&k.text?k.text:"").trim(),z=k&&k.font?k.font:{},I=z.family,D=z.size,R=z.color,B;l==="title.text"?B="titleText":l.indexOf("axis")!==-1?B="axisTitleText":l.indexOf("colorbar"!==-1)&&(B="colorbarTitleText");var F=d._context.edits[B];P===""?L=0:P.replace(i," % ")===_.replace(i," % ")&&(L=.2,S=!0,F||(P="")),v._meta?P=e.templateString(P,v._meta):u._meta&&(P=e.templateString(P,u._meta));var V=P||F,Y;m||(m=e.ensureSingle(u._infolayer,"g","g-"+y),Y=u._hColorbarMoveTitle);var K=m.selectAll("text").data(V?[0]:[]);if(K.enter().append("text"),K.text(P).attr("class",y),K.exit().remove(),!V)return m;function J(se){e.syncOrAsync([G,Z],se)}function G(se){var oe;return!h&&Y&&(h={}),h?(oe="",h.rotate&&(oe+="rotate("+[h.rotate,b.x,b.y]+")"),(h.offset||Y)&&(oe+=a(0,(h.offset||0)-(Y||0)))):oe=null,se.attr("transform",oe),se.style({"font-family":I,"font-size":T.round(D,2)+"px",fill:t.rgb(R),opacity:L*t.opacity(R),"font-weight":M.fontWeight}).attr(b).call(r.convertToTspans,d),M.previousPromises(d)}function Z(se){var oe=T.select(se.node().parentNode);if(w&&w.selection&&w.side&&P){oe.attr("transform",null);var N=o[w.side],U=w.side==="left"||w.side==="top"?-1:1,q=c(w.pad)?w.pad:2,Q=n.bBox(oe.node()),W={left:0,top:0,right:u.width,bottom:u.height},X=w.maxShift||U*(W[w.side]-Q[w.side]),te=0;if(X<0)te=X;else{var ee=w.offsetLeft||0,ie=w.offsetTop||0;Q.left-=ee,Q.right-=ee,Q.top-=ie,Q.bottom-=ie,w.selection.each(function(){var ye=n.bBox(this);e.bBoxIntersect(Q,ye,q)&&(te=Math.max(te,U*(ye[w.side]-Q[N])+q))}),te=Math.min(X,te)}if(te>0||X<0){var le={left:[-te,0],right:[te,0],top:[0,-te],bottom:[0,te]}[w.side];oe.attr("transform",a(le[0],le[1]))}}}K.call(J);function re(){L=0,S=!0,K.text(_).on("mouseover.opacity",function(){T.select(this).transition().duration(f.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){T.select(this).transition().duration(f.HIDE_PLACEHOLDER).style("opacity",0)})}return F&&(P?K.on(".opacity",null):re(),K.call(r.makeEditable,{gd:d}).on("edit",function(se){s!==void 0?A.call("_guiRestyle",d,l,se,s):A.call("_guiRelayout",d,l,se)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(J)}).on("input",function(se){this.text(se||" ").call(r.positionText,b.x,b.y)})),K.classed("js-placeholder",S),m}ne.exports={draw:p}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(g,ne,ae){var T=g("../../plots/font_attributes"),c=g("../color/attributes"),M=g("../../lib/extend").extendFlat,A=g("../../plot_api/edit_types").overrideAll,e=g("../../plots/pad_attributes"),a=g("../../plot_api/plot_template").templatedArray,n=a("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ne.exports=A(a("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:n,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:M(e({editType:"arraydraw"}),{}),font:T({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:c.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(g,ne,ae){ne.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],467:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/array_container_defaults"),M=g("./attributes"),A=g("./constants"),e=A.name,a=M.buttons;ne.exports=function(f,o){var i={name:e,handleItemDefaults:n};c(f,o,i)};function n(r,f,o){function i(y,v){return T.coerce(r,f,M,y,v)}var p=c(r,f,{name:"buttons",handleItemDefaults:t}),d=i("visible",p.length>0);!d||(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),T.noneOrAll(r,f,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),T.coerceFont(i,"font",o.font),i("bgcolor",o.paper_bgcolor),i("bordercolor"),i("borderwidth"))}function t(r,f){function o(p,d){return T.coerce(r,f,a,p,d)}var i=o("visible",r.method==="skip"||Array.isArray(r.args));i&&(o("method"),o("args"),o("args2"),o("label"),o("execute"))}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../plots/plots"),M=g("../color"),A=g("../drawing"),e=g("../../lib"),a=g("../../lib/svg_text_utils"),n=g("../../plot_api/plot_template").arrayEditor,t=g("../../constants/alignment").LINE_SPACING,r=g("./constants"),f=g("./scrollbox");ne.exports=function(z){var I=z._fullLayout,D=e.filterVisible(I[r.name]);function R(Z){c.autoMargin(z,L(Z))}var B=I._menulayer.selectAll("g."+r.containerClassName).data(D.length>0?[0]:[]);if(B.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),B.exit().each(function(){T.select(this).selectAll("g."+r.headerGroupClassName).each(R)}).remove(),D.length!==0){var F=B.selectAll("g."+r.headerGroupClassName).data(D,o);F.enter().append("g").classed(r.headerGroupClassName,!0);for(var V=e.ensureSingle(B,"g",r.dropdownButtonGroupClassName,function(Z){Z.style("pointer-events","all")}),Y=0;Y<D.length;Y++){var K=D[Y];u(z,K)}var J="updatemenus"+I._uid,G=new f(z,V,J);F.enter().size()&&(V.node().parentNode.appendChild(V.node()),V.call(k)),F.exit().each(function(Z){V.call(k),R(Z)}).remove(),F.each(function(Z){var re=T.select(this),se=Z.type==="dropdown"?V:null;c.manageCommandObserver(z,Z,Z.buttons,function(oe){d(z,Z,Z.buttons[oe.index],re,se,G,oe.index,!0)}),Z.type==="dropdown"?(y(z,re,V,G,Z),p(V,Z)&&v(z,re,V,G,Z)):v(z,re,null,null,Z)})}};function o(P){return P._index}function i(P){return+P.attr(r.menuIndexAttrName)==-1}function p(P,z){return+P.attr(r.menuIndexAttrName)===z._index}function d(P,z,I,D,R,B,F,V){z.active=F,n(P.layout,r.name,z).applyUpdate("active",F),z.type==="buttons"?v(P,D,null,null,z):z.type==="dropdown"&&(R.attr(r.menuIndexAttrName,"-1"),y(P,D,R,B,z),V||v(P,D,R,B,z))}function y(P,z,I,D,R){var B=e.ensureSingle(z,"g",r.headerClassName,function(Z){Z.style("pointer-events","all")}),F=R._dims,V=R.active,Y=R.buttons[V]||r.blankHeaderOpts,K={y:R.pad.t,yPad:0,x:R.pad.l,xPad:0,index:0},J={width:F.headerWidth,height:F.headerHeight};B.call(_,R,Y,P).call(S,R,K,J);var G=e.ensureSingle(z,"text",r.headerArrowClassName,function(Z){Z.attr("text-anchor","end").call(A.font,R.font).text(r.arrowSymbol[R.direction])});G.attr({x:F.headerWidth-r.arrowOffsetX+R.pad.l,y:F.headerHeight/2+r.textOffsetY+R.pad.t}),B.on("click",function(){I.call(k,String(p(I,R)?-1:R._index)),v(P,z,I,D,R)}),B.on("mouseover",function(){B.call(h)}),B.on("mouseout",function(){B.call(m,R)}),A.setTranslate(z,F.lx,F.ly)}function v(P,z,I,D,R){I||(I=z,I.attr("pointer-events","all"));var B=!i(I)||R.type==="buttons"?R.buttons:[],F=R.type==="dropdown"?r.dropdownButtonClassName:r.buttonClassName,V=I.selectAll("g."+F).data(e.filterVisible(B)),Y=V.enter().append("g").classed(F,!0),K=V.exit();R.type==="dropdown"?(Y.attr("opacity","0").transition().attr("opacity","1"),K.transition().attr("opacity","0").remove()):K.remove();var J=0,G=0,Z=R._dims,re=["up","down"].indexOf(R.direction)!==-1;R.type==="dropdown"&&(re?G=Z.headerHeight+r.gapButtonHeader:J=Z.headerWidth+r.gapButtonHeader),R.type==="dropdown"&&R.direction==="up"&&(G=-r.gapButtonHeader+r.gapButton-Z.openHeight),R.type==="dropdown"&&R.direction==="left"&&(J=-r.gapButtonHeader+r.gapButton-Z.openWidth);var se={x:Z.lx+J+R.pad.l,y:Z.ly+G+R.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},oe={l:se.x+R.borderwidth,t:se.y+R.borderwidth};V.each(function(N,U){var q=T.select(this);q.call(_,R,N,P).call(S,R,se),q.on("click",function(){T.event.defaultPrevented||(N.execute&&(N.args2&&R.active===U?(d(P,R,N,z,I,D,-1),c.executeAPICommand(P,N.method,N.args2)):(d(P,R,N,z,I,D,U),c.executeAPICommand(P,N.method,N.args))),P.emit("plotly_buttonclicked",{menu:R,button:N,active:R.active}))}),q.on("mouseover",function(){q.call(h)}),q.on("mouseout",function(){q.call(m,R),V.call(b,R)})}),V.call(b,R),re?(oe.w=Math.max(Z.openWidth,Z.headerWidth),oe.h=se.y-oe.t):(oe.w=se.x-oe.l,oe.h=Math.max(Z.openHeight,Z.headerHeight)),oe.direction=R.direction,D&&(V.size()?x(P,z,I,D,R,oe):l(D))}function x(P,z,I,D,R,B){var F=R.direction,V=F==="up"||F==="down",Y=R._dims,K=R.active,J,G,Z;if(V)for(G=0,Z=0;Z<K;Z++)G+=Y.heights[Z]+r.gapButton;else for(J=0,Z=0;Z<K;Z++)J+=Y.widths[Z]+r.gapButton;D.enable(B,J,G),D.hbar&&D.hbar.attr("opacity","0").transition().attr("opacity","1"),D.vbar&&D.vbar.attr("opacity","0").transition().attr("opacity","1")}function l(P){var z=!!P.hbar,I=!!P.vbar;z&&P.hbar.transition().attr("opacity","0").each("end",function(){z=!1,I||P.disable()}),I&&P.vbar.transition().attr("opacity","0").each("end",function(){I=!1,z||P.disable()})}function _(P,z,I,D){P.call(s,z).call(w,z,I,D)}function s(P,z){var I=e.ensureSingle(P,"rect",r.itemRectClassName,function(D){D.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})});I.call(M.stroke,z.bordercolor).call(M.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function w(P,z,I,D){var R=e.ensureSingle(P,"text",r.itemTextClassName,function(V){V.attr({"text-anchor":"start","data-notex":1})}),B=I.label,F=D._fullLayout._meta;F&&(B=e.templateString(B,F)),R.call(A.font,z.font).text(B).call(a.convertToTspans,D)}function b(P,z){var I=z.active;P.each(function(D,R){var B=T.select(this);R===I&&z.showactive&&B.select("rect."+r.itemRectClassName).call(M.fill,r.activeColor)})}function h(P){P.select("rect."+r.itemRectClassName).call(M.fill,r.hoverColor)}function m(P,z){P.select("rect."+r.itemRectClassName).call(M.fill,z.bgcolor)}function u(P,z){var I=z._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},D=A.tester.selectAll("g."+r.dropdownButtonClassName).data(e.filterVisible(z.buttons));D.enter().append("g").classed(r.dropdownButtonClassName,!0);var R=["up","down"].indexOf(z.direction)!==-1;D.each(function(J,G){var Z=T.select(this);Z.call(_,z,J,P);var re=Z.select("."+r.itemTextClassName),se=re.node()&&A.bBox(re.node()).width,oe=Math.max(se+r.textPadX,r.minWidth),N=z.font.size*t,U=a.lineCount(re),q=Math.max(N*U,r.minHeight)+r.textOffsetY;q=Math.ceil(q),oe=Math.ceil(oe),I.widths[G]=oe,I.heights[G]=q,I.height1=Math.max(I.height1,q),I.width1=Math.max(I.width1,oe),R?(I.totalWidth=Math.max(I.totalWidth,oe),I.openWidth=I.totalWidth,I.totalHeight+=q+r.gapButton,I.openHeight+=q+r.gapButton):(I.totalWidth+=oe+r.gapButton,I.openWidth+=oe+r.gapButton,I.totalHeight=Math.max(I.totalHeight,q),I.openHeight=I.totalHeight)}),R?I.totalHeight-=r.gapButton:I.totalWidth-=r.gapButton,I.headerWidth=I.width1+r.arrowPadX,I.headerHeight=I.height1,z.type==="dropdown"&&(R?(I.width1+=r.arrowPadX,I.totalHeight=I.height1):I.totalWidth=I.width1,I.totalWidth+=r.arrowPadX),D.remove();var B=I.totalWidth+z.pad.l+z.pad.r,F=I.totalHeight+z.pad.t+z.pad.b,V=P._fullLayout._size;I.lx=V.l+V.w*z.x,I.ly=V.t+V.h*(1-z.y);var Y="left";e.isRightAnchor(z)&&(I.lx-=B,Y="right"),e.isCenterAnchor(z)&&(I.lx-=B/2,Y="center");var K="top";e.isBottomAnchor(z)&&(I.ly-=F,K="bottom"),e.isMiddleAnchor(z)&&(I.ly-=F/2,K="middle"),I.totalWidth=Math.ceil(I.totalWidth),I.totalHeight=Math.ceil(I.totalHeight),I.lx=Math.round(I.lx),I.ly=Math.round(I.ly),c.autoMargin(P,L(z),{x:z.x,y:z.y,l:B*({right:1,center:.5}[Y]||0),r:B*({left:1,center:.5}[Y]||0),b:F*({top:1,middle:.5}[K]||0),t:F*({bottom:1,middle:.5}[K]||0)})}function L(P){return r.autoMarginIdRoot+P._index}function S(P,z,I,D){D=D||{};var R=P.select("."+r.itemRectClassName),B=P.select("."+r.itemTextClassName),F=z.borderwidth,V=I.index,Y=z._dims;A.setTranslate(P,F+I.x,F+I.y);var K=["up","down"].indexOf(z.direction)!==-1,J=D.height||(K?Y.heights[V]:Y.height1);R.attr({x:0,y:0,width:D.width||(K?Y.width1:Y.widths[V]),height:J});var G=z.font.size*t,Z=a.lineCount(B),re=(Z-1)*G/2;a.positionText(B,r.textOffsetX,J/2-re+r.textOffsetY),K?I.y+=Y.heights[V]+I.yPad:I.x+=Y.widths[V]+I.xPad,I.index++}function k(P,z){P.attr(r.menuIndexAttrName,z||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(g,ne,ae){arguments[4][463][0].apply(ae,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(g,ne,ae){ne.exports=e;var T=g("@plotly/d3"),c=g("../color"),M=g("../drawing"),A=g("../../lib");function e(a,n,t){this.gd=a,this.container=n,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(n,t,r){var f=this.gd._fullLayout,o=f.width,i=f.height;this.position=n;var p=this.position.l,d=this.position.w,y=this.position.t,v=this.position.h,x=this.position.direction,l=x==="down",_=x==="left",s=x==="right",w=x==="up",b=d,h=v,m,u,L,S;!l&&!_&&!s&&!w&&(this.position.direction="down",l=!0);var k=l||w;k?(m=p,u=m+b,l?(L=y,S=Math.min(L+h,i),h=S-L):(S=y+h,L=Math.max(S-h,0),h=S-L)):(L=y,S=L+h,_?(u=p+b,m=Math.max(u-b,0),b=u-m):(m=p,u=Math.min(m+b,o),b=u-m)),this._box={l:m,t:L,w:b,h};var P=d>b,z=e.barLength+2*e.barPad,I=e.barWidth+2*e.barPad,D=p,R=y+v;R+I>i&&(R=i-I);var B=this.container.selectAll("rect.scrollbar-horizontal").data(P?[0]:[]);B.exit().on(".drag",null).remove(),B.enter().append("rect").classed("scrollbar-horizontal",!0).call(c.fill,e.barColor),P?(this.hbar=B.attr({rx:e.barRadius,ry:e.barRadius,x:D,y:R,width:z,height:I}),this._hbarXMin=D+z/2,this._hbarTranslateMax=b-z):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var F=v>h,V=e.barWidth+2*e.barPad,Y=e.barLength+2*e.barPad,K=p+d,J=y;K+V>o&&(K=o-V);var G=this.container.selectAll("rect.scrollbar-vertical").data(F?[0]:[]);G.exit().on(".drag",null).remove(),G.enter().append("rect").classed("scrollbar-vertical",!0).call(c.fill,e.barColor),F?(this.vbar=G.attr({rx:e.barRadius,ry:e.barRadius,x:K,y:J,width:V,height:Y}),this._vbarYMin=J+Y/2,this._vbarTranslateMax=h-Y):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var Z=this.id,re=m-.5,se=F?u+V+.5:u+.5,oe=L-.5,N=P?S+I+.5:S+.5,U=f._topdefs.selectAll("#"+Z).data(P||F?[0]:[]);if(U.exit().remove(),U.enter().append("clipPath").attr("id",Z).append("rect"),P||F?(this._clipRect=U.select("rect").attr({x:Math.floor(re),y:Math.floor(oe),width:Math.ceil(se)-Math.floor(re),height:Math.ceil(N)-Math.floor(oe)}),this.container.call(M.setClipUrl,Z,this.gd),this.bg.attr({x:p,y,width:d,height:v})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(M.setClipUrl,null),delete this._clipRect),P||F){var q=T.behavior.drag().on("dragstart",function(){T.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(q);var Q=T.behavior.drag().on("dragstart",function(){T.event.sourceEvent.preventDefault(),T.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));P&&this.hbar.on(".drag",null).call(Q),F&&this.vbar.on(".drag",null).call(Q)}this.setTranslate(t,r)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(M.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var n=this.translateX,t=this.translateY;this.hbar&&(n-=T.event.dx),this.vbar&&(t-=T.event.dy),this.setTranslate(n,t)},e.prototype._onBoxWheel=function(){var n=this.translateX,t=this.translateY;this.hbar&&(n+=T.event.deltaY),this.vbar&&(t+=T.event.deltaY),this.setTranslate(n,t)},e.prototype._onBarDrag=function(){var n=this.translateX,t=this.translateY;if(this.hbar){var r=n+this._hbarXMin,f=r+this._hbarTranslateMax,o=A.constrain(T.event.x,r,f),i=(o-r)/(f-r),p=this.position.w-this._box.w;n=i*p}if(this.vbar){var d=t+this._vbarYMin,y=d+this._vbarTranslateMax,v=A.constrain(T.event.y,d,y),x=(v-d)/(y-d),l=this.position.h-this._box.h;t=x*l}this.setTranslate(n,t)},e.prototype.setTranslate=function(n,t){var r=this.position.w-this._box.w,f=this.position.h-this._box.h;if(n=A.constrain(n||0,0,r),t=A.constrain(t||0,0,f),this.translateX=n,this.translateY=t,this.container.call(M.setTranslate,this._box.l-this.position.l-n,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+n-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar){var o=n/r;this.hbar.call(M.setTranslate,n+o*this._hbarTranslateMax,t)}if(this.vbar){var i=t/f;this.vbar.call(M.setTranslate,n,t+i*this._vbarTranslateMax)}}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(g,ne,ae){ne.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(g,ne,ae){ne.exports={axisRefDescription:function(T,c,M){return["If set to a",T,"axis id (e.g. *"+T+"* or","*"+T+"2*), the `"+T+"` position refers to a",T,"coordinate. If set to *paper*, the `"+T+"`","position refers to the distance from the",c,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",c,"("+M+"). If set to a",T,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",c,"of the domain of that axis: e.g.,","*"+T+"2 domain* refers to the domain of the second",T," axis and a",T,"position of 0.5 refers to the","point between the",c,"and the",M,"of the domain of the","second",T,"axis."].join(" ")}}},{}],473:[function(g,ne,ae){ne.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],474:[function(g,ne,ae){ne.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(g,ne,ae){ne.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(g,ne,ae){ne.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(g,ne,ae){ne.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],478:[function(g,ne,ae){ne.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(g,ne,ae){ne.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(g,ne,ae){ae.xmlns="http://www.w3.org/2000/xmlns/",ae.svg="http://www.w3.org/2000/svg",ae.xlink="http://www.w3.org/1999/xlink",ae.svgAttrs={xmlns:ae.svg,"xmlns:xlink":ae.xlink}},{}],481:[function(g,ne,ae){ae.version=g("./version").version,g("native-promise-only"),g("../build/plotcss");for(var T=g("./registry"),c=ae.register=T.register,M=g("./plot_api"),A=Object.keys(M),e=0;e<A.length;e++){var a=A[e];a.charAt(0)!=="_"&&(ae[a]=M[a]),c({moduleType:"apiMethod",name:a,fn:M[a]})}c(g("./traces/scatter")),c([g("./components/legend"),g("./components/fx"),g("./components/annotations"),g("./components/annotations3d"),g("./components/shapes"),g("./components/images"),g("./components/updatemenus"),g("./components/sliders"),g("./components/rangeslider"),g("./components/rangeselector"),g("./components/grid"),g("./components/errorbars"),g("./components/colorscale"),g("./components/colorbar"),g("./components/modebar")]),c([g("./locale-en"),g("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(c(window.PlotlyLocales),delete window.PlotlyLocales),ae.Icons=g("./fonts/ploticon");var n=g("./components/fx"),t=g("./plots/plots");ae.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},ae.Fx={hover:n.hover,unhover:n.unhover,loneHover:n.loneHover,loneUnhover:n.loneUnhover},ae.Snapshot=g("./snapshot"),ae.PlotSchema=g("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":939,"./version":1123,"native-promise-only":245}],482:[function(g,ne,ae){ne.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(g,ne,ae){ae.isLeftAnchor=function(c){return c.xanchor==="left"||c.xanchor==="auto"&&c.x<=1/3},ae.isCenterAnchor=function(c){return c.xanchor==="center"||c.xanchor==="auto"&&c.x>1/3&&c.x<2/3},ae.isRightAnchor=function(c){return c.xanchor==="right"||c.xanchor==="auto"&&c.x>=2/3},ae.isTopAnchor=function(c){return c.yanchor==="top"||c.yanchor==="auto"&&c.y>=2/3},ae.isMiddleAnchor=function(c){return c.yanchor==="middle"||c.yanchor==="auto"&&c.y>1/3&&c.y<2/3},ae.isBottomAnchor=function(c){return c.yanchor==="bottom"||c.yanchor==="auto"&&c.y<=1/3}},{}],484:[function(g,ne,ae){var T=g("./mod"),c=T.mod,M=T.modHalf,A=Math.PI,e=2*A;function a(x){return x/180*A}function n(x){return x/A*180}function t(x){return Math.abs(x[1]-x[0])>e-1e-14}function r(x,l){return M(l-x,e)}function f(x,l){return Math.abs(r(x,l))}function o(x,l){if(t(l))return!0;var _,s;l[0]<l[1]?(_=l[0],s=l[1]):(_=l[1],s=l[0]),_=c(_,e),s=c(s,e),_>s&&(s+=e);var w=c(x,e),b=w+e;return w>=_&&w<=s||b>=_&&b<=s}function i(x,l,_,s){if(!o(l,s))return!1;var w,b;return _[0]<_[1]?(w=_[0],b=_[1]):(w=_[1],b=_[0]),x>=w&&x<=b}function p(x,l,_,s,w,b,h){w=w||0,b=b||0;var m=t([_,s]),u,L,S,k,P;m?(u=0,L=A,S=e):_<s?(u=_,S=s):(u=s,S=_),x<l?(k=x,P=l):(k=l,P=x);function z(B,F){return[B*Math.cos(F)+w,b-B*Math.sin(F)]}var I=Math.abs(S-u)<=A?0:1;function D(B,F,V){return"A"+[B,B]+" "+[0,I,V]+" "+z(B,F)}var R;return m?k===null?R="M"+z(P,u)+D(P,L,0)+D(P,S,0)+"Z":R="M"+z(k,u)+D(k,L,0)+D(k,S,0)+"ZM"+z(P,u)+D(P,L,1)+D(P,S,1)+"Z":k===null?(R="M"+z(P,u)+D(P,S,0),h&&(R+="L0,0Z")):R="M"+z(k,u)+"L"+z(P,u)+D(P,S,0)+"L"+z(k,S)+D(k,u,1)+"Z",R}function d(x,l,_,s,w){return p(null,x,l,_,s,w,0)}function y(x,l,_,s,w){return p(null,x,l,_,s,w,1)}function v(x,l,_,s,w,b){return p(x,l,_,s,w,b,1)}ne.exports={deg2rad:a,rad2deg:n,angleDelta:r,angleDist:f,isFullCircle:t,isAngleInsideSector:o,isPtInsideSector:i,pathArc:d,pathSector:y,pathAnnulus:v}},{"./mod":510}],485:[function(g,ne,ae){var T=Array.isArray,c=ArrayBuffer,M=DataView;function A(t){return c.isView(t)&&!(t instanceof M)}ae.isTypedArray=A;function e(t){return T(t)||A(t)}ae.isArrayOrTypedArray=e;function a(t){return!e(t[0])}ae.isArray1D=a,ae.ensureArray=function(t,r){return T(t)||(t=[]),t.length=r,t},ae.concat=function(){var t=[],r=!0,f=0,o,i,p,d,y,v,x,l;for(p=0;p<arguments.length;p++)d=arguments[p],v=d.length,v&&(i?t.push(d):(i=d,y=v),T(d)?o=!1:(r=!1,f?o!==d.constructor&&(o=!1):o=d.constructor),f+=v);if(!f)return[];if(!t.length)return i;if(r)return i.concat.apply(i,t);if(o){for(x=new o(f),x.set(i),p=0;p<t.length;p++)d=t[p],x.set(d,y),y+=d.length;return x}for(x=new Array(f),l=0;l<i.length;l++)x[l]=i[l];for(p=0;p<t.length;p++){for(d=t[p],l=0;l<d.length;l++)x[y+l]=d[l];y+=l}return x},ae.maxRowLength=function(t){return n(t,Math.max,0)},ae.minRowLength=function(t){return n(t,Math.min,1/0)};function n(t,r,f){if(e(t))if(e(t[0])){for(var o=f,i=0;i<t.length;i++)o=r(o,t[i].length);return o}else return t.length;return 0}},{}],486:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../constants/numerical").BADNUM,M=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ne.exports=function(e){return typeof e=="string"&&(e=e.replace(M,"")),T(e)?Number(e):c}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(g,ne,ae){ne.exports=function(c){var M=c._fullLayout;M._glcanvas&&M._glcanvas.size()&&M._glcanvas.each(function(A){A.regl&&A.regl.clear({color:!0,depth:!0})})}},{}],488:[function(g,ne,ae){ne.exports=function(c){c._responsiveChartHandler&&(window.removeEventListener("resize",c._responsiveChartHandler),delete c._responsiveChartHandler)}},{}],489:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("tinycolor2"),M=g("../plots/attributes"),A=g("../components/colorscale/scales"),e=g("../components/color"),a=g("../constants/interactions").DESELECTDIM,n=g("./nested_property"),t=g("./regex").counter,r=g("./mod").modHalf,f=g("./array").isArrayOrTypedArray;ae.valObjectMeta={data_array:{coerceFunction:function(i,p,d){f(i)?p.set(i):d!==void 0&&p.set(d)}},enumerated:{coerceFunction:function(i,p,d,y){y.coerceNumber&&(i=+i),y.values.indexOf(i)===-1?p.set(d):p.set(i)},validateFunction:function(i,p){p.coerceNumber&&(i=+i);for(var d=p.values,y=0;y<d.length;y++){var v=String(d[y]);if(v.charAt(0)==="/"&&v.charAt(v.length-1)==="/"){var x=new RegExp(v.substr(1,v.length-2));if(x.test(i))return!0}else if(i===d[y])return!0}return!1}},boolean:{coerceFunction:function(i,p,d){i===!0||i===!1?p.set(i):p.set(d)}},number:{coerceFunction:function(i,p,d,y){!T(i)||y.min!==void 0&&i<y.min||y.max!==void 0&&i>y.max?p.set(d):p.set(+i)}},integer:{coerceFunction:function(i,p,d,y){i%1||!T(i)||y.min!==void 0&&i<y.min||y.max!==void 0&&i>y.max?p.set(d):p.set(+i)}},string:{coerceFunction:function(i,p,d,y){if(typeof i!="string"){var v=typeof i=="number";y.strict===!0||!v?p.set(d):p.set(String(i))}else y.noBlank&&!i?p.set(d):p.set(i)}},color:{coerceFunction:function(i,p,d){c(i).isValid()?p.set(i):p.set(d)}},colorlist:{coerceFunction:function(i,p,d){function y(v){return c(v).isValid()}!Array.isArray(i)||!i.length?p.set(d):i.every(y)?p.set(i):p.set(d)}},colorscale:{coerceFunction:function(i,p,d){p.set(A.get(i,d))}},angle:{coerceFunction:function(i,p,d){i==="auto"?p.set("auto"):T(i)?p.set(r(+i,360)):p.set(d)}},subplotid:{coerceFunction:function(i,p,d,y){var v=y.regex||t(d);if(typeof i=="string"&&v.test(i)){p.set(i);return}p.set(d)},validateFunction:function(i,p){var d=p.dflt;return i===d?!0:typeof i!="string"?!1:!!t(d).test(i)}},flaglist:{coerceFunction:function(i,p,d,y){if(typeof i!="string"){p.set(d);return}if((y.extras||[]).indexOf(i)!==-1){p.set(i);return}for(var v=i.split("+"),x=0;x<v.length;){var l=v[x];y.flags.indexOf(l)===-1||v.indexOf(l)<x?v.splice(x,1):x++}v.length?p.set(v.join("+")):p.set(d)}},any:{coerceFunction:function(i,p,d){i===void 0?p.set(d):p.set(i)}},info_array:{coerceFunction:function(i,p,d,y){function v(z,I,D){var R,B={set:function(F){R=F}};return D===void 0&&(D=I.dflt),ae.valObjectMeta[I.valType].coerceFunction(z,B,D,I),R}var x=y.dimensions===2||y.dimensions==="1-2"&&Array.isArray(i)&&Array.isArray(i[0]);if(!Array.isArray(i)){p.set(d);return}var l=y.items,_=[],s=Array.isArray(l),w=s&&x&&Array.isArray(l[0]),b=x&&s&&!w,h=s&&!b?l.length:i.length,m,u,L,S,k,P;if(d=Array.isArray(d)?d:[],x)for(m=0;m<h;m++)for(_[m]=[],L=Array.isArray(i[m])?i[m]:[],b?k=l.length:s?k=l[m].length:k=L.length,u=0;u<k;u++)b?S=l[u]:s?S=l[m][u]:S=l,P=v(L[u],S,(d[m]||[])[u]),P!==void 0&&(_[m][u]=P);else for(m=0;m<h;m++)P=v(i[m],s?l[m]:l,d[m]),P!==void 0&&(_[m]=P);p.set(_)},validateFunction:function(i,p){if(!Array.isArray(i))return!1;var d=p.items,y=Array.isArray(d),v=p.dimensions===2;if(!p.freeLength&&i.length!==d.length)return!1;for(var x=0;x<i.length;x++)if(v){if(!Array.isArray(i[x])||!p.freeLength&&i[x].length!==d[x].length)return!1;for(var l=0;l<i[x].length;l++)if(!o(i[x][l],y?d[x][l]:d))return!1}else if(!o(i[x],y?d[x]:d))return!1;return!0}}},ae.coerce=function(i,p,d,y,v){var x=n(d,y).get(),l=n(i,y),_=n(p,y),s=l.get(),w=p._template;if(s===void 0&&w&&(s=n(w,y).get(),w=0),v===void 0&&(v=x.dflt),x.arrayOk&&f(s))return _.set(s),s;var b=ae.valObjectMeta[x.valType].coerceFunction;b(s,_,v,x);var h=_.get();return w&&h===v&&!o(s,x)&&(s=n(w,y).get(),b(s,_,v,x),h=_.get()),h},ae.coerce2=function(i,p,d,y,v){var x=n(i,y),l=ae.coerce(i,p,d,y,v),_=x.get();return _!=null?l:!1},ae.coerceFont=function(i,p,d){var y={};return d=d||{},y.family=i(p+".family",d.family),y.size=i(p+".size",d.size),y.color=i(p+".color",d.color),y},ae.coercePattern=function(i,p,d,y){var v=i(p+".shape");if(v){i(p+".solidity"),i(p+".size");var x=i(p+".fillmode"),l=x==="overlay";if(!y){var _=i(p+".bgcolor",l?d:void 0);i(p+".fgcolor",l?e.contrast(_):d)}i(p+".fgopacity",l?.5:1)}},ae.coerceHoverinfo=function(i,p,d){var y=p._module.attributes,v=y.hoverinfo?y:M,x=v.hoverinfo,l;if(d._dataLength===1){var _=x.dflt==="all"?x.flags.slice():x.dflt.split("+");_.splice(_.indexOf("name"),1),l=_.join("+")}return ae.coerce(i,p,v,"hoverinfo",l)},ae.coerceSelectionMarkerOpacity=function(i,p){if(!!i.marker){var d=i.marker.opacity;if(d!==void 0){var y,v;!f(d)&&!i.selected&&!i.unselected&&(y=d,v=a*d),p("selected.marker.opacity",y),p("unselected.marker.opacity",v)}}};function o(i,p){var d=ae.valObjectMeta[p.valType];if(p.arrayOk&&f(i))return!0;if(d.validateFunction)return d.validateFunction(i,p);var y={},v=y,x={set:function(l){v=l}};return d.coerceFunction(i,x,y,p),v!==y}ae.validate=o},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(g,ne,ae){var T=g("d3-time-format").timeFormat,c=g("fast-isnumeric"),M=g("./loggers"),A=g("./mod").mod,e=g("../constants/numerical"),a=e.BADNUM,n=e.ONEDAY,t=e.ONEHOUR,r=e.ONEMIN,f=e.ONESEC,o=e.EPOCHJD,i=g("../registry"),p=g("d3-time-format").utcFormat,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,v=new Date().getFullYear()-70;function x(R){return R&&i.componentsRegistry.calendars&&typeof R=="string"&&R!=="gregorian"}ae.dateTick0=function(R,B){var F=l(R,!!B);if(B<2)return F;var V=ae.dateTime2ms(F,R);return V+=n*(B-1),ae.ms2DateTime(V,0,R)};function l(R,B){return x(R)?B?i.getComponentMethod("calendars","CANONICAL_SUNDAY")[R]:i.getComponentMethod("calendars","CANONICAL_TICK")[R]:B?"2000-01-02":"2000-01-01"}ae.dfltRange=function(R){return x(R)?i.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},ae.isJSDate=function(R){return typeof R=="object"&&R!==null&&typeof R.getTime=="function"};var _,s;ae.dateTime2ms=function(R,B){if(ae.isJSDate(R)){var F=R.getTimezoneOffset()*r,V=(R.getUTCMinutes()-R.getMinutes())*r+(R.getUTCSeconds()-R.getSeconds())*f+(R.getUTCMilliseconds()-R.getMilliseconds());if(V){var Y=3*r;F=F-Y/2+A(V-F+Y/2,Y)}return R=Number(R)-F,R>=_&&R<=s?R:a}if(typeof R!="string"&&typeof R!="number")return a;R=String(R);var K=x(B),J=R.charAt(0);K&&(J==="G"||J==="g")&&(R=R.substr(1),B="");var G=K&&B.substr(0,7)==="chinese",Z=R.match(G?y:d);if(!Z)return a;var re=Z[1],se=Z[3]||"1",oe=Number(Z[5]||1),N=Number(Z[7]||0),U=Number(Z[9]||0),q=Number(Z[11]||0);if(K){if(re.length===2)return a;re=Number(re);var Q;try{var W=i.getComponentMethod("calendars","getCal")(B);if(G){var X=se.charAt(se.length-1)==="i";se=parseInt(se,10),Q=W.newDate(re,W.toMonthIndex(re,se,X),oe)}else Q=W.newDate(re,Number(se),oe)}catch{return a}return Q?(Q.toJD()-o)*n+N*t+U*r+q*f:a}re.length===2?re=(Number(re)+2e3-v)%100+v:re=Number(re),se-=1;var te=new Date(Date.UTC(2e3,se,oe,N,U));return te.setUTCFullYear(re),te.getUTCMonth()!==se||te.getUTCDate()!==oe?a:te.getTime()+q*f},_=ae.MIN_MS=ae.dateTime2ms("-9999"),s=ae.MAX_MS=ae.dateTime2ms("9999-12-31 23:59:59.9999"),ae.isDateTime=function(R,B){return ae.dateTime2ms(R,B)!==a};function w(R,B){return String(R+Math.pow(10,B)).substr(1)}var b=90*n,h=3*t,m=5*r;ae.ms2DateTime=function(R,B,F){if(typeof R!="number"||!(R>=_&&R<=s))return a;B||(B=0);var V=Math.floor(A(R+.05,1)*10),Y=Math.round(R-V/10),K,J,G,Z,re,se;if(x(F)){var oe=Math.floor(Y/n)+o,N=Math.floor(A(R,n));try{K=i.getComponentMethod("calendars","getCal")(F).fromJD(oe).formatDate("yyyy-mm-dd")}catch{K=p("G%Y-%m-%d")(new Date(Y))}if(K.charAt(0)==="-")for(;K.length<11;)K="-0"+K.substr(1);else for(;K.length<10;)K="0"+K;J=B<b?Math.floor(N/t):0,G=B<b?Math.floor(N%t/r):0,Z=B<h?Math.floor(N%r/f):0,re=B<m?N%f*10+V:0}else se=new Date(Y),K=p("%Y-%m-%d")(se),J=B<b?se.getUTCHours():0,G=B<b?se.getUTCMinutes():0,Z=B<h?se.getUTCSeconds():0,re=B<m?se.getUTCMilliseconds()*10+V:0;return u(K,J,G,Z,re)},ae.ms2DateTimeLocal=function(R){if(!(R>=_+n&&R<=s-n))return a;var B=Math.floor(A(R+.05,1)*10),F=new Date(Math.round(R-B/10)),V=T("%Y-%m-%d")(F),Y=F.getHours(),K=F.getMinutes(),J=F.getSeconds(),G=F.getUTCMilliseconds()*10+B;return u(V,Y,K,J,G)};function u(R,B,F,V,Y){if((B||F||V||Y)&&(R+=" "+w(B,2)+":"+w(F,2),(V||Y)&&(R+=":"+w(V,2),Y))){for(var K=4;Y%10==0;)K-=1,Y/=10;R+="."+w(Y,K)}return R}ae.cleanDate=function(R,B,F){if(R===a)return B;if(ae.isJSDate(R)||typeof R=="number"&&isFinite(R)){if(x(F))return M.error("JS Dates and milliseconds are incompatible with world calendars",R),B;if(R=ae.ms2DateTimeLocal(+R),!R&&B!==void 0)return B}else if(!ae.isDateTime(R,F))return M.error("unrecognized date",R),B;return R};var L=/%\d?f/g,S=/%h/g,k={"1":"1","2":"1","3":"2","4":"2"};function P(R,B,F,V){R=R.replace(L,function(K){var J=Math.min(+K.charAt(1)||6,6),G=(B/1e3%1+2).toFixed(J).substr(2).replace(/0+$/,"")||"0";return G});var Y=new Date(Math.floor(B+.05));if(R=R.replace(S,function(){return k[F("%q")(Y)]}),x(V))try{R=i.getComponentMethod("calendars","worldCalFmt")(R,B,V)}catch{return"Invalid"}return F(R)(Y)}var z=[59,59.9,59.99,59.999,59.9999];function I(R,B){var F=A(R+.05,n),V=w(Math.floor(F/t),2)+":"+w(A(Math.floor(F/r),60),2);if(B!=="M"){c(B)||(B=0);var Y=Math.min(A(R/f,60),z[B]),K=(100+Y).toFixed(B).substr(1);B>0&&(K=K.replace(/0+$/,"").replace(/[\.]$/,"")),V+=":"+K}return V}ae.formatDate=function(R,B,F,V,Y,K){if(Y=x(Y)&&Y,!B)if(F==="y")B=K.year;else if(F==="m")B=K.month;else if(F==="d")B=K.dayMonth+`
`+K.year;else return I(R,F)+`
`+P(K.dayMonthYear,R,V,Y);return P(B,R,V,Y)};var D=3*n;ae.incrementMonth=function(R,B,F){F=x(F)&&F;var V=A(R,n);if(R=Math.round(R-V),F)try{var Y=Math.round(R/n)+o,K=i.getComponentMethod("calendars","getCal")(F),J=K.fromJD(Y);return B%12?K.add(J,B,"m"):K.add(J,B/12,"y"),(J.toJD()-o)*n+V}catch{M.error("invalid ms "+R+" in calendar "+F)}var G=new Date(R+D);return G.setUTCMonth(G.getUTCMonth()+B)+V-D},ae.findExactDates=function(R,B){for(var F=0,V=0,Y=0,K=0,J,G,Z=x(B)&&i.getComponentMethod("calendars","getCal")(B),re=0;re<R.length;re++){if(G=R[re],!c(G)){K++;continue}if(!(G%n))if(Z)try{J=Z.fromJD(G/n+o),J.day()===1?J.month()===1?F++:V++:Y++}catch{}else J=new Date(G),J.getUTCDate()===1?J.getUTCMonth()===0?F++:V++:Y++}V+=F,Y+=V;var se=R.length-K;return{exactYears:F/se,exactMonths:V/se,exactDays:Y/se}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("./loggers"),M=g("./matrix"),A=g("gl-mat4");function e(v){var x;if(typeof v=="string"){if(x=document.getElementById(v),x===null)throw new Error("No DOM element with id '"+v+"' exists on the page.");return x}else if(v==null)throw new Error("DOM element provided is null or undefined");return v}function a(v){var x=T.select(v);return x.node()instanceof HTMLElement&&x.size()&&x.classed("js-plotly-plot")}function n(v){var x=v&&v.parentNode;x&&x.removeChild(v)}function t(v,x){r("global",v,x)}function r(v,x,l){var _="plotly.js-style-"+v,s=document.getElementById(_);s||(s=document.createElement("style"),s.setAttribute("id",_),s.appendChild(document.createTextNode("")),document.head.appendChild(s));var w=s.sheet;w.insertRule?w.insertRule(x+"{"+l+"}",0):w.addRule?w.addRule(x,l,0):c.warn("addStyleRule failed")}function f(v){var x="plotly.js-style-"+v,l=document.getElementById(x);l&&n(l)}function o(v){var x=p(v),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return x.forEach(function(_){var s=i(_);if(s){var w=M.convertCssMatrix(s);l=A.multiply(l,l,w)}}),l}function i(v){var x=window.getComputedStyle(v,null),l=x.getPropertyValue("-webkit-transform")||x.getPropertyValue("-moz-transform")||x.getPropertyValue("-ms-transform")||x.getPropertyValue("-o-transform")||x.getPropertyValue("transform");return l==="none"?null:l.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(_){return+_})}function p(v){for(var x=[];d(v);)x.push(v),v=v.parentNode;return x}function d(v){return v&&(v instanceof Element||v instanceof HTMLElement)}function y(v,x){return v&&x&&v.x===x.x&&v.y===x.y&&v.top===x.top&&v.left===x.left&&v.right===x.right&&v.bottom===x.bottom}ne.exports={getGraphDiv:e,isPlotDiv:a,removeElement:n,addStyleRule:t,addRelatedStyleRule:r,deleteRelatedStyleRule:f,getFullTransformMatrix:o,getElementTransformMatrix:i,getElementAndAncestors:p,equalDomRects:y}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(g,ne,ae){var T=g("events").EventEmitter,c={init:function(M){if(M._ev instanceof T)return M;var A=new T,e=new T;return M._ev=A,M._internalEv=e,M.on=A.on.bind(A),M.once=A.once.bind(A),M.removeListener=A.removeListener.bind(A),M.removeAllListeners=A.removeAllListeners.bind(A),M._internalOn=e.on.bind(e),M._internalOnce=e.once.bind(e),M._removeInternalListener=e.removeListener.bind(e),M._removeAllInternalListeners=e.removeAllListeners.bind(e),M.emit=function(a,n){typeof jQuery!="undefined"&&jQuery(M).trigger(a,n),A.emit(a,n),e.emit(a,n)},M},triggerHandler:function(M,A,e){var a,n;typeof jQuery!="undefined"&&(a=jQuery(M).triggerHandler(A,e));var t=M._ev;if(!t)return a;var r=t._events[A];if(!r)return a;function f(i){if(i.listener){if(t.removeListener(A,i.listener),!i.fired)return i.fired=!0,i.listener.apply(t,[e])}else return i.apply(t,[e])}r=Array.isArray(r)?r:[r];var o;for(o=0;o<r.length-1;o++)f(r[o]);return n=f(r[o]),a!==void 0?a:n},purge:function(M){return delete M._ev,delete M.on,delete M.once,delete M.removeListener,delete M.removeAllListeners,delete M.emit,delete M._ev,delete M._internalEv,delete M._internalOn,delete M._internalOnce,delete M._removeInternalListener,delete M._removeAllInternalListeners,M}};ne.exports=c},{events:84}],493:[function(g,ne,ae){var T=g("./is_plain_object.js"),c=Array.isArray;function M(e,a){var n,t;for(n=0;n<e.length;n++){if(t=e[n],t!==null&&typeof t=="object")return!1;t!==void 0&&(a[n]=t)}return!0}ae.extendFlat=function(){return A(arguments,!1,!1,!1)},ae.extendDeep=function(){return A(arguments,!0,!1,!1)},ae.extendDeepAll=function(){return A(arguments,!0,!0,!1)},ae.extendDeepNoArrays=function(){return A(arguments,!0,!1,!0)};function A(e,a,n,t){var r=e[0],f=e.length,o,i,p,d,y,v,x;if(f===2&&c(r)&&c(e[1])&&r.length===0){if(x=M(e[1],r),x)return r;r.splice(0,r.length)}for(var l=1;l<f;l++){o=e[l];for(i in o)p=r[i],d=o[i],t&&c(d)?r[i]=d:a&&d&&(T(d)||(y=c(d)))?(y?(y=!1,v=p&&c(p)?p:[]):v=p&&T(p)?p:{},r[i]=A([v,d],a,n,t)):(typeof d!="undefined"||n)&&(r[i]=d)}return r}},{"./is_plain_object.js":504}],494:[function(g,ne,ae){ne.exports=function(c){for(var M={},A=[],e=0,a=0;a<c.length;a++){var n=c[a];M[n]!==1&&(M[n]=1,A[e++]=n)}return A}},{}],495:[function(g,ne,ae){ne.exports=function(e){for(var a=M(e)?c:T,n=[],t=0;t<e.length;t++){var r=e[t];a(r)&&n.push(r)}return n};function T(A){return A.visible===!0}function c(A){var e=A[0].trace;return e.visible===!0&&e._length!==0}function M(A){return Array.isArray(A)&&Array.isArray(A[0])&&A[0][0]&&A[0][0].trace}},{}],496:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("country-regex"),M=g("@turf/area"),A=g("@turf/centroid"),e=g("@turf/bbox"),a=g("./identity"),n=g("./loggers"),t=g("./is_plain_object"),r=g("./nested_property"),f=g("./polygon"),o=Object.keys(c),i={"ISO-3":a,"USA-states":a,"country names":p};function p(w){for(var b=0;b<o.length;b++){var h=o[b],m=new RegExp(c[h]);if(m.test(w.trim().toLowerCase()))return h}return n.log("Unrecognized country name: "+w+"."),!1}function d(w,b,h){if(!b||typeof b!="string")return!1;var m=i[w](b),u,L,S;if(m){if(w==="USA-states")for(u=[],S=0;S<h.length;S++)L=h[S],L.properties&&L.properties.gu&&L.properties.gu==="USA"&&u.push(L);else u=h;for(S=0;S<u.length;S++)if(L=u[S],L.id===m)return L;n.log(["Location with id",m,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function y(w){var b=w.geometry,h=b.coordinates,m=w.id,u=[],L,S,k,P;function z(I){for(var D=0;D<I.length-1;D++)if(I[D][0]>0&&I[D+1][0]<0)return D;return null}switch(m==="RUS"||m==="FJI"?L=function(I){var D;if(z(I)===null)D=I;else for(D=new Array(I.length),P=0;P<I.length;P++)D[P]=[I[P][0]<0?I[P][0]+360:I[P][0],I[P][1]];u.push(f.tester(D))}:m==="ATA"?L=function(I){var D=z(I);if(D===null)return u.push(f.tester(I));var R=new Array(I.length+1),B=0;for(P=0;P<I.length;P++)P>D?R[B++]=[I[P][0]+360,I[P][1]]:P===D?(R[B++]=I[P],R[B++]=[I[P][0],-90]):R[B++]=I[P];var F=f.tester(R);F.pts.pop(),u.push(F)}:L=function(I){u.push(f.tester(I))},b.type){case"MultiPolygon":for(S=0;S<h.length;S++)for(k=0;k<h[S].length;k++)L(h[S][k]);break;case"Polygon":for(S=0;S<h.length;S++)L(h[S]);break}return u}function v(w){var b=w.geojson,h=window.PlotlyGeoAssets||{},m=typeof b=="string"?h[b]:b;return t(m)?m:(n.error("Oops ... something went wrong when fetching "+b),!1)}function x(w){var b=w[0].trace,h=v(b);if(!h)return!1;var m={},u=[],L;for(L=0;L<b._length;L++){var S=w[L];(S.loc||S.loc===0)&&(m[S.loc]=S)}function k(I){var D=r(I,b.featureidkey||"id").get(),R=m[D];if(R){var B=I.geometry;if(B.type==="Polygon"||B.type==="MultiPolygon"){var F={type:"Feature",id:D,geometry:B,properties:{}};F.properties.ct=l(F),R.fIn=I,R.fOut=F,u.push(F)}else n.log(["Location",R.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete m[D]}switch(h.type){case"FeatureCollection":var P=h.features;for(L=0;L<P.length;L++)k(P[L]);break;case"Feature":k(h);break;default:return n.warn(["Invalid GeoJSON type",(h.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var z in m)n.log(["Location *"+z+"*","does not have a matching feature with id-key","*"+b.featureidkey+"*."].join(" "));return u}function l(w){var b=w.geometry,h;if(b.type==="MultiPolygon")for(var m=b.coordinates,u=0,L=0;L<m.length;L++){var S={type:"Polygon",coordinates:m[L]},k=M.default(S);k>u&&(u=k,h=S)}else h=b;return A.default(h).geometry.coordinates}function _(w){var b=window.PlotlyGeoAssets||{},h=[];function m(P){return new Promise(function(z,I){T.json(P,function(D,R){if(D){delete b[P];var B=D.status===404?'GeoJSON at URL "'+P+'" does not exist.':"Unexpected error while fetching from "+P;return I(new Error(B))}return b[P]=R,z(R)})})}function u(P){return new Promise(function(z,I){var D=0,R=setInterval(function(){if(b[P]&&b[P]!=="pending")return clearInterval(R),z(b[P]);if(D>100)return clearInterval(R),I("Unexpected error while fetching from "+P);D++},50)})}for(var L=0;L<w.length;L++){var S=w[L][0].trace,k=S.geojson;typeof k=="string"&&(b[k]?b[k]==="pending"&&h.push(u(k)):(b[k]="pending",h.push(m(k))))}return h}function s(w){return e.default(w)}ne.exports={locationToFeature:d,feature2polygons:y,getTraceGeojson:v,extractTraceFeature:x,fetchTraceGeoData:_,computeBbox:s}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(g,ne,ae){var T=g("../constants/numerical").BADNUM;ae.calcTraceToLineCoords=function(c){for(var M=c[0].trace,A=M.connectgaps,e=[],a=[],n=0;n<c.length;n++){var t=c[n],r=t.lonlat;r[0]!==T?a.push(r):!A&&a.length>0&&(e.push(a),a=[])}return a.length>0&&e.push(a),e},ae.makeLine=function(c){return c.length===1?{type:"LineString",coordinates:c[0]}:{type:"MultiLineString",coordinates:c}},ae.makePolygon=function(c){if(c.length===1)return{type:"Polygon",coordinates:c};for(var M=new Array(c.length),A=0;A<c.length;A++)M[A]=[c[A]];return{type:"MultiPolygon",coordinates:M}},ae.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(g,ne,ae){var T=g("./mod").mod;ae.segmentsIntersect=c;function c(n,t,r,f,o,i,p,d){var y=r-n,v=o-n,x=p-o,l=f-t,_=i-t,s=d-i,w=y*s-x*l;if(w===0)return null;var b=(v*s-x*_)/w,h=(v*l-y*_)/w;return h<0||h>1||b<0||b>1?null:{x:n+y*b,y:t+l*b}}ae.segmentDistance=function(t,r,f,o,i,p,d,y){if(c(t,r,f,o,i,p,d,y))return 0;var v=f-t,x=o-r,l=d-i,_=y-p,s=v*v+x*x,w=l*l+_*_,b=Math.min(M(v,x,s,i-t,p-r),M(v,x,s,d-t,y-r),M(l,_,w,t-i,r-p),M(l,_,w,f-i,o-p));return Math.sqrt(b)};function M(n,t,r,f,o){var i=f*n+o*t;if(i<0)return f*f+o*o;if(i>r){var p=f-n,d=o-t;return p*p+d*d}else{var y=f*t-o*n;return y*y/r}}var A,e,a;ae.getTextLocation=function(t,r,f,o){if((t!==e||o!==a)&&(A={},e=t,a=o),A[f])return A[f];var i=t.getPointAtLength(T(f-o/2,r)),p=t.getPointAtLength(T(f+o/2,r)),d=Math.atan((p.y-i.y)/(p.x-i.x)),y=t.getPointAtLength(T(f,r)),v=(y.x*4+i.x+p.x)/6,x=(y.y*4+i.y+p.y)/6,l={x:v,y:x,theta:d};return A[f]=l,l},ae.clearLocationCache=function(){e=null},ae.getVisibleSegment=function(t,r,f){var o=r.left,i=r.right,p=r.top,d=r.bottom,y=0,v=t.getTotalLength(),x=v,l,_;function s(b){var h=t.getPointAtLength(b);b===0?l=h:b===v&&(_=h);var m=h.x<o?o-h.x:h.x>i?h.x-i:0,u=h.y<p?p-h.y:h.y>d?h.y-d:0;return Math.sqrt(m*m+u*u)}for(var w=s(y);w;){if(y+=w+f,y>x)return;w=s(y)}for(w=s(x);w;){if(x-=w+f,y>x)return;w=s(x)}return{min:y,max:x,len:x-y,total:v,isClosed:y===0&&x===v&&Math.abs(l.x-_.x)<.1&&Math.abs(l.y-_.y)<.1}},ae.findPointOnPath=function(t,r,f,o){o=o||{};for(var i=o.pathLength||t.getTotalLength(),p=o.tolerance||.001,d=o.iterationLimit||30,y=t.getPointAtLength(0)[f]>t.getPointAtLength(i)[f]?-1:1,v=0,x=0,l=i,_,s,w;v<d;){if(_=(x+l)/2,s=t.getPointAtLength(_),w=s[f]-r,Math.abs(w)<p)return s;y*w>0?l=_:x=_,v++}return s}},{"./mod":510}],499:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("tinycolor2"),M=g("color-normalize"),A=g("../components/colorscale"),e=g("../components/color/attributes").defaultLine,a=g("./array").isArrayOrTypedArray,n=M(e),t=1;function r(d,y){var v=d;return v[3]*=y,v}function f(d){if(T(d))return n;var y=M(d);return y.length?y:n}function o(d){return T(d)?d:t}function i(d,y,v){var x=d.color,l=a(x),_=a(y),s=A.extractOpts(d),w=[],b,h,m,u,L;if(s.colorscale!==void 0?b=A.makeColorScaleFuncFromTrace(d):b=f,l?h=function(k,P){return k[P]===void 0?n:M(b(k[P]))}:h=f,_?m=function(k,P){return k[P]===void 0?t:o(k[P])}:m=o,l||_)for(var S=0;S<v;S++)u=h(x,S),L=m(y,S),w[S]=r(u,L);else w=r(M(x),y);return w}function p(d){var y=A.extractOpts(d),v=y.colorscale;return y.reversescale&&(v=A.flipScale(y.colorscale)),v.map(function(x){var l=x[0],_=c(x[1]),s=_.toRgb();return{index:l,rgb:[s.r,s.g,s.b,s.a]}})}ne.exports={formatColor:i,parseColorScale:p}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(g,ne,ae){var T=g("./identity");function c(M){return[M]}ne.exports={keyFun:function(M){return M.key},repeat:c,descend:T,wrap:c,unwrap:function(M){return M[0]}}},{"./identity":501}],501:[function(g,ne,ae){ne.exports=function(c){return c}},{}],502:[function(g,ne,ae){ne.exports=function(c,M){if(!M)return c;var A=1/Math.abs(M),e=A>1?(A*c+A*M)/A:c+M,a=String(e).length;if(a>16){var n=String(M).length,t=String(c).length;if(a>=t+n){var r=parseFloat(e).toPrecision(12);r.indexOf("e+")===-1&&(e=+r)}}return e}},{}],503:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("d3-time-format").utcFormat,M=g("d3-format").format,A=g("fast-isnumeric"),e=g("../constants/numerical"),a=e.FP_SAFE,n=-a,t=e.BADNUM,r=ne.exports={};r.adjustFormat=function(se){return!se||/^\d[.]\df/.test(se)||/[.]\d%/.test(se)?se:se==="0.f"?"~f":/^\d%/.test(se)?"~%":/^\ds/.test(se)?"~s":!/^[~,.0$]/.test(se)&&/[&fps]/.test(se)?"~"+se:se};var f={};r.warnBadFormat=function(re){var se=String(re);f[se]||(f[se]=1,r.warn('encountered bad format: "'+se+'"'))},r.noFormat=function(re){return String(re)},r.numberFormat=function(re){var se;try{se=M(r.adjustFormat(re))}catch{return r.warnBadFormat(re),r.noFormat}return se},r.nestedProperty=g("./nested_property"),r.keyedContainer=g("./keyed_container"),r.relativeAttr=g("./relative_attr"),r.isPlainObject=g("./is_plain_object"),r.toLogRange=g("./to_log_range"),r.relinkPrivateKeys=g("./relink_private");var o=g("./array");r.isTypedArray=o.isTypedArray,r.isArrayOrTypedArray=o.isArrayOrTypedArray,r.isArray1D=o.isArray1D,r.ensureArray=o.ensureArray,r.concat=o.concat,r.maxRowLength=o.maxRowLength,r.minRowLength=o.minRowLength;var i=g("./mod");r.mod=i.mod,r.modHalf=i.modHalf;var p=g("./coerce");r.valObjectMeta=p.valObjectMeta,r.coerce=p.coerce,r.coerce2=p.coerce2,r.coerceFont=p.coerceFont,r.coercePattern=p.coercePattern,r.coerceHoverinfo=p.coerceHoverinfo,r.coerceSelectionMarkerOpacity=p.coerceSelectionMarkerOpacity,r.validate=p.validate;var d=g("./dates");r.dateTime2ms=d.dateTime2ms,r.isDateTime=d.isDateTime,r.ms2DateTime=d.ms2DateTime,r.ms2DateTimeLocal=d.ms2DateTimeLocal,r.cleanDate=d.cleanDate,r.isJSDate=d.isJSDate,r.formatDate=d.formatDate,r.incrementMonth=d.incrementMonth,r.dateTick0=d.dateTick0,r.dfltRange=d.dfltRange,r.findExactDates=d.findExactDates,r.MIN_MS=d.MIN_MS,r.MAX_MS=d.MAX_MS;var y=g("./search");r.findBin=y.findBin,r.sorterAsc=y.sorterAsc,r.sorterDes=y.sorterDes,r.distinctVals=y.distinctVals,r.roundUp=y.roundUp,r.sort=y.sort,r.findIndexOfMin=y.findIndexOfMin,r.sortObjectKeys=g("./sort_object_keys");var v=g("./stats");r.aggNums=v.aggNums,r.len=v.len,r.mean=v.mean,r.median=v.median,r.midRange=v.midRange,r.variance=v.variance,r.stdev=v.stdev,r.interp=v.interp;var x=g("./matrix");r.init2dArray=x.init2dArray,r.transposeRagged=x.transposeRagged,r.dot=x.dot,r.translationMatrix=x.translationMatrix,r.rotationMatrix=x.rotationMatrix,r.rotationXYMatrix=x.rotationXYMatrix,r.apply3DTransform=x.apply3DTransform,r.apply2DTransform=x.apply2DTransform,r.apply2DTransform2=x.apply2DTransform2,r.convertCssMatrix=x.convertCssMatrix,r.inverseTransformMatrix=x.inverseTransformMatrix;var l=g("./angles");r.deg2rad=l.deg2rad,r.rad2deg=l.rad2deg,r.angleDelta=l.angleDelta,r.angleDist=l.angleDist,r.isFullCircle=l.isFullCircle,r.isAngleInsideSector=l.isAngleInsideSector,r.isPtInsideSector=l.isPtInsideSector,r.pathArc=l.pathArc,r.pathSector=l.pathSector,r.pathAnnulus=l.pathAnnulus;var _=g("./anchor_utils");r.isLeftAnchor=_.isLeftAnchor,r.isCenterAnchor=_.isCenterAnchor,r.isRightAnchor=_.isRightAnchor,r.isTopAnchor=_.isTopAnchor,r.isMiddleAnchor=_.isMiddleAnchor,r.isBottomAnchor=_.isBottomAnchor;var s=g("./geometry2d");r.segmentsIntersect=s.segmentsIntersect,r.segmentDistance=s.segmentDistance,r.getTextLocation=s.getTextLocation,r.clearLocationCache=s.clearLocationCache,r.getVisibleSegment=s.getVisibleSegment,r.findPointOnPath=s.findPointOnPath;var w=g("./extend");r.extendFlat=w.extendFlat,r.extendDeep=w.extendDeep,r.extendDeepAll=w.extendDeepAll,r.extendDeepNoArrays=w.extendDeepNoArrays;var b=g("./loggers");r.log=b.log,r.warn=b.warn,r.error=b.error;var h=g("./regex");r.counterRegex=h.counter;var m=g("./throttle");r.throttle=m.throttle,r.throttleDone=m.done,r.clearThrottle=m.clear;var u=g("./dom");r.getGraphDiv=u.getGraphDiv,r.isPlotDiv=u.isPlotDiv,r.removeElement=u.removeElement,r.addStyleRule=u.addStyleRule,r.addRelatedStyleRule=u.addRelatedStyleRule,r.deleteRelatedStyleRule=u.deleteRelatedStyleRule,r.getFullTransformMatrix=u.getFullTransformMatrix,r.getElementTransformMatrix=u.getElementTransformMatrix,r.getElementAndAncestors=u.getElementAndAncestors,r.equalDomRects=u.equalDomRects,r.clearResponsive=g("./clear_responsive"),r.preserveDrawingBuffer=g("./preserve_drawing_buffer"),r.makeTraceGroups=g("./make_trace_groups"),r._=g("./localize"),r.notifier=g("./notifier"),r.filterUnique=g("./filter_unique"),r.filterVisible=g("./filter_visible"),r.pushUnique=g("./push_unique"),r.increment=g("./increment"),r.cleanNumber=g("./clean_number"),r.ensureNumber=function(se){return A(se)?(se=Number(se),se>a||se<n?t:se):t},r.isIndex=function(re,se){return se!==void 0&&re>=se?!1:A(re)&&re>=0&&re%1==0},r.noop=g("./noop"),r.identity=g("./identity"),r.repeat=function(re,se){for(var oe=new Array(se),N=0;N<se;N++)oe[N]=re;return oe},r.swapAttrs=function(re,se,oe,N){oe||(oe="x"),N||(N="y");for(var U=0;U<se.length;U++){var q=se[U],Q=r.nestedProperty(re,q.replace("?",oe)),W=r.nestedProperty(re,q.replace("?",N)),X=Q.get();Q.set(W.get()),W.set(X)}},r.raiseToTop=function(se){se.parentNode.appendChild(se)},r.cancelTransition=function(re){return re.transition().duration(0)},r.constrain=function(re,se,oe){return se>oe?Math.max(oe,Math.min(se,re)):Math.max(se,Math.min(oe,re))},r.bBoxIntersect=function(re,se,oe){return oe=oe||0,re.left<=se.right+oe&&se.left<=re.right+oe&&re.top<=se.bottom+oe&&se.top<=re.bottom+oe},r.simpleMap=function(re,se,oe,N,U){for(var q=re.length,Q=new Array(q),W=0;W<q;W++)Q[W]=se(re[W],oe,N,U);return Q},r.randstr=function re(se,oe,N,U){if(N||(N=16),oe===void 0&&(oe=24),oe<=0)return"0";var q=Math.log(Math.pow(2,oe))/Math.log(N),Q="",W,X,te;for(W=2;q===1/0;W*=2)q=Math.log(Math.pow(2,oe/W))/Math.log(N)*W;var ee=q-Math.floor(q);for(W=0;W<Math.floor(q);W++)te=Math.floor(Math.random()*N).toString(N),Q=te+Q;ee&&(X=Math.pow(N,ee),te=Math.floor(Math.random()*X).toString(N),Q=te+Q);var ie=parseInt(Q,N);return se&&se[Q]||ie!==1/0&&ie>=Math.pow(2,oe)?U>10?(r.warn("randstr failed uniqueness"),Q):re(se,oe,N,(U||0)+1):Q},r.OptionControl=function(re,se){re||(re={}),se||(se="opt");var oe={};return oe.optionList=[],oe._newoption=function(N){N[se]=re,oe[N.name]=N,oe.optionList.push(N)},oe["_"+se]=re,oe},r.smooth=function(re,se){if(se=Math.round(se)||0,se<2)return re;var oe=re.length,N=2*oe,U=2*se-1,q=new Array(U),Q=new Array(oe),W,X,te,ee;for(W=0;W<U;W++)q[W]=(1-Math.cos(Math.PI*(W+1)/se))/(2*se);for(W=0;W<oe;W++){for(ee=0,X=0;X<U;X++)te=W+X+1-se,te<-oe?te-=N*Math.round(te/N):te>=N&&(te-=N*Math.floor(te/N)),te<0?te=-1-te:te>=oe&&(te=N-1-te),ee+=re[te]*q[X];Q[W]=ee}return Q},r.syncOrAsync=function(re,se,oe){var N,U;function q(){return r.syncOrAsync(re,se,oe)}for(;re.length;)if(U=re.splice(0,1)[0],N=U(se),N&&N.then)return N.then(q);return oe&&oe(se)},r.stripTrailingSlash=function(re){return re.substr(-1)==="/"?re.substr(0,re.length-1):re},r.noneOrAll=function(re,se,oe){if(!!re){var N=!1,U=!0,q,Q;for(q=0;q<oe.length;q++)Q=re[oe[q]],Q!=null?N=!0:U=!1;if(N&&!U)for(q=0;q<oe.length;q++)re[oe[q]]=se[oe[q]]}},r.mergeArray=function(re,se,oe,N){var U=typeof N=="function";if(r.isArrayOrTypedArray(re))for(var q=Math.min(re.length,se.length),Q=0;Q<q;Q++){var W=re[Q];se[Q][oe]=U?N(W):W}},r.mergeArrayCastPositive=function(re,se,oe){return r.mergeArray(re,se,oe,function(N){var U=+N;return isFinite(U)&&U>0?U:0})},r.fillArray=function(re,se,oe,N){if(N=N||r.identity,r.isArrayOrTypedArray(re))for(var U=0;U<se.length;U++)se[U][oe]=N(re[U])},r.castOption=function(re,se,oe,N){N=N||r.identity;var U=r.nestedProperty(re,oe).get();return r.isArrayOrTypedArray(U)?Array.isArray(se)&&r.isArrayOrTypedArray(U[se[0]])?N(U[se[0]][se[1]]):N(U[se]):U},r.extractOption=function(re,se,oe,N){if(oe in re)return re[oe];var U=r.nestedProperty(se,N).get();if(!Array.isArray(U))return U};function L(re){var se={};for(var oe in re)for(var N=re[oe],U=0;U<N.length;U++)se[N[U]]=+oe;return se}r.tagSelected=function(re,se,oe){var N=se.selectedpoints,U=se._indexToPoints,q;U&&(q=L(U));function Q(ie){return ie!==void 0&&ie<re.length}for(var W=0;W<N.length;W++){var X=N[W];if(r.isIndex(X)||r.isArrayOrTypedArray(X)&&r.isIndex(X[0])&&r.isIndex(X[1])){var te=q?q[X]:X,ee=oe?oe[te]:te;Q(ee)&&(re[ee].selected=1)}}},r.selIndices2selPoints=function(re){var se=re.selectedpoints,oe=re._indexToPoints;if(oe){for(var N=L(oe),U=[],q=0;q<se.length;q++){var Q=se[q];if(r.isIndex(Q)){var W=N[Q];r.isIndex(W)&&U.push(W)}}return U}else return se},r.getTargetArray=function(re,se){var oe=se.target;if(typeof oe=="string"&&oe){var N=r.nestedProperty(re,oe).get();return Array.isArray(N)?N:!1}else if(Array.isArray(oe))return oe;return!1},r.minExtend=function(re,se){var oe={};typeof se!="object"&&(se={});var N=3,U=Object.keys(re),q,Q,W;for(q=0;q<U.length;q++)Q=U[q],W=re[Q],!(Q.charAt(0)==="_"||typeof W=="function")&&(Q==="module"?oe[Q]=W:Array.isArray(W)?Q==="colorscale"?oe[Q]=W.slice():oe[Q]=W.slice(0,N):r.isTypedArray(W)?oe[Q]=W.subarray(0,N):W&&typeof W=="object"?oe[Q]=r.minExtend(re[Q],se[Q]):oe[Q]=W);for(U=Object.keys(se),q=0;q<U.length;q++)Q=U[q],W=se[Q],(typeof W!="object"||!(Q in oe)||typeof oe[Q]!="object")&&(oe[Q]=W);return oe},r.titleCase=function(re){return re.charAt(0).toUpperCase()+re.substr(1)},r.containsAny=function(re,se){for(var oe=0;oe<se.length;oe++)if(re.indexOf(se[oe])!==-1)return!0;return!1},r.isIE=function(){return typeof window.navigator.msSaveBlob!="undefined"};var S=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return S.test(window.navigator.userAgent)};var k=/iPad|iPhone|iPod/;r.isIOS=function(){return k.test(window.navigator.userAgent)};var P=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var re=P.exec(window.navigator.userAgent);if(re&&re.length===2){var se=parseInt(re[1]);if(!isNaN(se))return se}return null},r.isD3Selection=function(re){return re instanceof T.selection},r.ensureSingle=function(re,se,oe,N){var U=re.select(se+(oe?"."+oe:""));if(U.size())return U;var q=re.append(se);return oe&&q.classed(oe,!0),N&&q.call(N),q},r.ensureSingleById=function(re,se,oe,N){var U=re.select(se+"#"+oe);if(U.size())return U;var q=re.append(se).attr("id",oe);return N&&q.call(N),q},r.objectFromPath=function(re,se){for(var oe=re.split("."),N,U=N={},q=0;q<oe.length;q++){var Q=oe[q],W=null,X=oe[q].match(/(.*)\[([0-9]+)\]/);X?(Q=X[1],W=X[2],N=N[Q]=[],q===oe.length-1?N[W]=se:N[W]={},N=N[W]):(q===oe.length-1?N[Q]=se:N[Q]={},N=N[Q])}return U};var z=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;r.expandObjectPaths=function(re){var se,oe,N,U,q,Q,W;if(typeof re=="object"&&!Array.isArray(re))for(oe in re)re.hasOwnProperty(oe)&&((se=oe.match(z))?(U=re[oe],N=se[1],delete re[oe],re[N]=r.extendDeepNoArrays(re[N]||{},r.objectFromPath(oe,r.expandObjectPaths(U))[N])):(se=oe.match(I))?(U=re[oe],N=se[1],q=parseInt(se[2]),delete re[oe],re[N]=re[N]||[],se[3]==="."?(W=se[4],Q=re[N][q]=re[N][q]||{},r.extendDeepNoArrays(Q,r.objectFromPath(W,r.expandObjectPaths(U)))):re[N][q]=r.expandObjectPaths(U)):re[oe]=r.expandObjectPaths(re[oe]));return re},r.numSeparate=function(re,se,oe){if(oe||(oe=!1),typeof se!="string"||se.length===0)throw new Error("Separator string required for formatting!");typeof re=="number"&&(re=String(re));var N=/(\d+)(\d{3})/,U=se.charAt(0),q=se.charAt(1),Q=re.split("."),W=Q[0],X=Q.length>1?U+Q[1]:"";if(q&&(Q.length>1||W.length>4||oe))for(;N.test(W);)W=W.replace(N,"$1"+q+"$2");return W+X},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;r.templateString=function(re,se){var oe={};return re.replace(r.TEMPLATE_STRING_REGEX,function(N,U){var q;return D.test(U)?q=se[U]:(oe[U]=oe[U]||r.nestedProperty(se,U).get,q=oe[U]()),r.isValidTextValue(q)?q:""})};var R={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return V.apply(R,arguments)};var B={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return V.apply(B,arguments)};var F=/^[:|\|]/;function V(re,se,oe){var N=this,U=arguments;se||(se={});var q={};return re.replace(r.TEMPLATE_STRING_REGEX,function(Q,W,X){var te=W==="xother"||W==="yother",ee=W==="_xother"||W==="_yother",ie=W==="_xother_"||W==="_yother_",le=W==="xother_"||W==="yother_",ye=te||ee||le||ie,ue=W;(ee||ie)&&(ue=ue.substring(1)),(le||ie)&&(ue=ue.substring(0,ue.length-1));var pe;if(ye){if(pe=se[ue],pe===void 0)return""}else{var ge,Te;for(Te=3;Te<U.length;Te++)if(ge=U[Te],!!ge){if(ge.hasOwnProperty(ue)){pe=ge[ue];break}if(D.test(ue)||(pe=r.nestedProperty(ge,ue).get(),pe=q[ue]||r.nestedProperty(ge,ue).get(),pe&&(q[ue]=pe)),pe!==void 0)break}}if(pe===void 0&&N)return N.count<N.max&&(r.warn("Variable '"+ue+"' in "+N.name+" could not be found!"),pe=Q),N.count===N.max&&r.warn("Too many "+N.name+" warnings - additional warnings will be suppressed"),N.count++,Q;if(X){var _e;if(X[0]===":"&&(_e=oe?oe.numberFormat:r.numberFormat,pe=_e(X.replace(F,""))(pe)),X[0]==="|"){_e=oe?oe.timeFormat:c;var De=r.dateTime2ms(pe);pe=r.formatDate(De,X.replace(F,""),!1,_e)}}else{var Oe=ue+"Label";se.hasOwnProperty(Oe)&&(pe=se[Oe])}return ye&&(pe="("+pe+")",(ee||ie)&&(pe=" "+pe),(le||ie)&&(pe=pe+" ")),pe})}var Y=48,K=57;r.subplotSort=function(re,se){for(var oe=Math.min(re.length,se.length)+1,N=0,U=0,q=0;q<oe;q++){var Q=re.charCodeAt(q)||0,W=se.charCodeAt(q)||0,X=Q>=Y&&Q<=K,te=W>=Y&&W<=K;if(X&&(N=10*N+Q-Y),te&&(U=10*U+W-Y),!X||!te){if(N!==U)return N-U;if(Q!==W)return Q-W}}return U-N};var J=2e9;r.seedPseudoRandom=function(){J=2e9},r.pseudoRandom=function(){var re=J;return J=(69069*J+1)%4294967296,Math.abs(J-re)<429496729?r.pseudoRandom():J/4294967296},r.fillText=function(re,se,oe){var N=Array.isArray(oe)?function(Q){oe.push(Q)}:function(Q){oe.text=Q},U=r.extractOption(re,se,"htx","hovertext");if(r.isValidTextValue(U))return N(U);var q=r.extractOption(re,se,"tx","text");if(r.isValidTextValue(q))return N(q)},r.isValidTextValue=function(re){return re||re===0},r.formatPercent=function(re,se){se=se||0;for(var oe=(Math.round(100*re*Math.pow(10,se))*Math.pow(.1,se)).toFixed(se)+"%",N=0;N<se;N++)oe.indexOf(".")!==-1&&(oe=oe.replace("0%","%"),oe=oe.replace(".%","%"));return oe},r.isHidden=function(re){var se=window.getComputedStyle(re).display;return!se||se==="none"},r.strTranslate=function(re,se){return re||se?"translate("+re+","+se+")":""},r.strRotate=function(re){return re?"rotate("+re+")":""},r.strScale=function(re){return re!==1?"scale("+re+")":""},r.getTextTransform=function(re){var se=re.noCenter,oe=re.textX,N=re.textY,U=re.targetX,q=re.targetY,Q=re.anchorX||0,W=re.anchorY||0,X=re.rotate,te=re.scale;return te?te>1&&(te=1):te=0,r.strTranslate(U-te*(oe+Q),q-te*(N+W))+r.strScale(te)+(X?"rotate("+X+(se?"":" "+oe+" "+N)+")":"")},r.ensureUniformFontSize=function(re,se){var oe=r.extendFlat({},se);return oe.size=Math.max(se.size,re._fullLayout.uniformtext.minsize||0),oe},r.join2=function(re,se,oe){var N=re.length;return N>1?re.slice(0,-1).join(se)+oe+re[N-1]:re.join(se)},r.bigFont=function(re){return Math.round(1.2*re)};var G=r.getFirefoxVersion(),Z=G!==null&&G<86;r.getPositionFromD3Event=function(){return Z?[T.event.layerX,T.event.layerY]:[T.event.offsetX,T.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(g,ne,ae){ne.exports=function(c){return window&&window.process&&window.process.versions?Object.prototype.toString.call(c)==="[object Object]":Object.prototype.toString.call(c)==="[object Object]"&&Object.getPrototypeOf(c).hasOwnProperty("hasOwnProperty")}},{}],505:[function(g,ne,ae){var T=g("./nested_property"),c=/^\w*$/,M=0,A=1,e=2,a=3,n=4;ne.exports=function(r,f,o,i){o=o||"name",i=i||"value";var p,d,y,v={};f&&f.length?(y=T(r,f),d=y.get()):d=r,f=f||"";var x={};if(d)for(p=0;p<d.length;p++)x[d[p][o]]=p;var l=c.test(i),_={set:function(s,w){var b=w===null?n:M;if(!d){if(!y||b===n)return;d=[],y.set(d)}var h=x[s];if(h===void 0){if(b===n)return;b=b|a,h=d.length,x[s]=h}else w!==(l?d[h][i]:T(d[h],i).get())&&(b=b|e);var m=d[h]=d[h]||{};return m[o]=s,l?m[i]=w:T(m,i).set(w),w!==null&&(b=b&~n),v[h]=v[h]|b,_},get:function(s){if(!!d){var w=x[s];if(w!==void 0)return l?d[w][i]:T(d[w],i).get()}},rename:function(s,w){var b=x[s];return b===void 0||(v[b]=v[b]|A,x[w]=b,delete x[s],d[b][o]=w),_},remove:function(s){var w=x[s];if(w===void 0)return _;var b=d[w];if(Object.keys(b).length>2)return v[w]=v[w]|e,_.set(s,null);if(l){for(p=w;p<d.length;p++)v[p]=v[p]|a;for(p=w;p<d.length;p++)x[d[p][o]]--;d.splice(w,1),delete x[s]}else T(b,i).set(null),v[w]=v[w]|e|n;return _},constructUpdate:function(){for(var s,w,b={},h=Object.keys(v),m=0;m<h.length;m++)w=h[m],s=f+"["+w+"]",d[w]?(v[w]&A&&(b[s+"."+o]=d[w][o]),v[w]&e&&(l?b[s+"."+i]=v[w]&n?null:d[w][i]:b[s+"."+i]=v[w]&n?null:T(d[w],i).get())):b[s]=null;return b}};return _}},{"./nested_property":511}],506:[function(g,ne,ae){var T=g("../registry");ne.exports=function(M,A){for(var e=M._context.locale,a=0;a<2;a++){for(var n=M._context.locales,t=0;t<2;t++){var r=(n[e]||{}).dictionary;if(r){var f=r[A];if(f)return f}n=T.localeRegistry}var o=e.split("-")[0];if(o===e)break;e=o}return A}},{"../registry":638}],507:[function(g,ne,ae){var T=g("../plot_api/plot_config").dfltConfig,c=g("./notifier"),M=ne.exports={};M.log=function(){var A;if(T.logging>1){var e=["LOG:"];for(A=0;A<arguments.length;A++)e.push(arguments[A]);console.trace.apply(console,e)}if(T.notifyOnLogging>1){var a=[];for(A=0;A<arguments.length;A++)a.push(arguments[A]);c(a.join("<br>"),"long")}},M.warn=function(){var A;if(T.logging>0){var e=["WARN:"];for(A=0;A<arguments.length;A++)e.push(arguments[A]);console.trace.apply(console,e)}if(T.notifyOnLogging>0){var a=[];for(A=0;A<arguments.length;A++)a.push(arguments[A]);c(a.join("<br>"),"stick")}},M.error=function(){var A;if(T.logging>0){var e=["ERROR:"];for(A=0;A<arguments.length;A++)e.push(arguments[A]);console.error.apply(console,e)}if(T.notifyOnLogging>0){var a=[];for(A=0;A<arguments.length;A++)a.push(arguments[A]);c(a.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(g,ne,ae){var T=g("@plotly/d3");ne.exports=function(M,A,e){var a=M.selectAll("g."+e.replace(/\s/g,".")).data(A,function(t){return t[0].trace.uid});a.exit().remove(),a.enter().append("g").attr("class",e),a.order();var n=M.classed("rangeplot")?"nodeRangePlot3":"node3";return a.each(function(t){t[0][n]=T.select(this)}),a}},{"@plotly/d3":58}],509:[function(g,ne,ae){var T=g("gl-mat4");ae.init2dArray=function(c,M){for(var A=new Array(c),e=0;e<c;e++)A[e]=new Array(M);return A},ae.transposeRagged=function(c){var M=0,A=c.length,e,a;for(e=0;e<A;e++)M=Math.max(M,c[e].length);var n=new Array(M);for(e=0;e<M;e++)for(n[e]=new Array(A),a=0;a<A;a++)n[e][a]=c[a][e];return n},ae.dot=function(c,M){if(!(c.length&&M.length)||c.length!==M.length)return null;var A=c.length,e,a;if(c[0].length)for(e=new Array(A),a=0;a<A;a++)e[a]=ae.dot(c[a],M);else if(M[0].length){var n=ae.transposeRagged(M);for(e=new Array(n.length),a=0;a<n.length;a++)e[a]=ae.dot(c,n[a])}else for(e=0,a=0;a<A;a++)e+=c[a]*M[a];return e},ae.translationMatrix=function(c,M){return[[1,0,c],[0,1,M],[0,0,1]]},ae.rotationMatrix=function(c){var M=c*Math.PI/180;return[[Math.cos(M),-Math.sin(M),0],[Math.sin(M),Math.cos(M),0],[0,0,1]]},ae.rotationXYMatrix=function(c,M,A){return ae.dot(ae.dot(ae.translationMatrix(M,A),ae.rotationMatrix(c)),ae.translationMatrix(-M,-A))},ae.apply3DTransform=function(c){return function(){var M=arguments,A=arguments.length===1?M[0]:[M[0],M[1],M[2]||0];return ae.dot(c,[A[0],A[1],A[2],1]).slice(0,3)}},ae.apply2DTransform=function(c){return function(){var M=arguments;M.length===3&&(M=M[0]);var A=arguments.length===1?M[0]:[M[0],M[1]];return ae.dot(c,[A[0],A[1],1]).slice(0,2)}},ae.apply2DTransform2=function(c){var M=ae.apply2DTransform(c);return function(A){return M(A.slice(0,2)).concat(M(A.slice(2,4)))}},ae.convertCssMatrix=function(c){if(c){var M=c.length;if(M===16)return c;if(M===6)return[c[0],c[1],0,0,c[2],c[3],0,0,0,0,1,0,c[4],c[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ae.inverseTransformMatrix=function(c){var M=[];return T.invert(M,c),[[M[0],M[1],M[2],M[3]],[M[4],M[5],M[6],M[7]],[M[8],M[9],M[10],M[11]],[M[12],M[13],M[14],M[15]]]}},{"gl-mat4":210}],510:[function(g,ne,ae){function T(M,A){var e=M%A;return e<0?e+A:e}function c(M,A){return Math.abs(M)>A/2?M-Math.round(M/A)*A:M}ne.exports={mod:T,modHalf:c}},{}],511:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("./array").isArrayOrTypedArray;ne.exports=function(i,p){if(T(p))p=String(p);else if(typeof p!="string"||p.substr(p.length-4)==="[-1]")throw"bad property string";for(var d=0,y=p.split("."),v,x,l;d<y.length;){if(v=String(y[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),v){if(v[1])y[d]=v[1];else if(d===0)y.splice(0,1);else throw"bad property string";for(x=v[2].substr(1,v[2].length-2).split("]["),l=0;l<x.length;l++)d++,y.splice(d,0,Number(x[l]))}d++}return typeof i!="object"?f(i,p,y):{set:a(i,y,p),get:M(i,y),astr:p,parts:y,obj:i}};function M(o,i){return function(){var p=o,d,y,v,x,l;for(x=0;x<i.length-1;x++){if(d=i[x],d===-1){for(y=!0,v=[],l=0;l<p.length;l++)v[l]=M(p[l],i.slice(x+1))(),v[l]!==v[0]&&(y=!1);return y?v[0]:v}if(typeof d=="number"&&!c(p)||(p=p[d],typeof p!="object"||p===null))return}if(!(typeof p!="object"||p===null)&&(v=p[i[x]],v!==null))return v}}var A=/(^|\.)args\[/;function e(o,i){return o===void 0||o===null&&!i.match(A)}function a(o,i,p){return function(d){var y=o,v="",x=e(d,p),l,_;for(_=0;_<i.length-1;_++){if(l=i[_],typeof l=="number"&&!c(y))throw"array index but container is not an array";if(l===-1){if(x=!t(y,i.slice(_+1),d,p),x)break;return}if(!r(y,l,i[_+1],x))break;if(y=y[l],typeof y!="object"||y===null)throw"container is not an object";v=n(v,l)}if(x){if(_===i.length-1&&(delete y[i[_]],Array.isArray(y)&&+i[_]==y.length-1))for(;y.length&&y[y.length-1]===void 0;)y.pop()}else y[i[_]]=d}}function n(o,i){var p=i;return T(i)?p="["+i+"]":o&&(p="."+i),o+p}function t(o,i,p,d){var y=c(p),v=!0,x=p,l=d.replace("-1",0),_=y?!1:e(p,l),s=i[0],w;for(w=0;w<o.length;w++)l=d.replace("-1",w),y&&(x=p[w%p.length],_=e(x,l)),_&&(v=!1),!!r(o,w,s,_)&&a(o[w],i,d.replace("-1",w))(x);return v}function r(o,i,p,d){if(o[i]===void 0){if(d)return!1;typeof p=="number"?o[i]=[]:o[i]={}}return!0}function f(o,i,p){return{set:function(){throw"bad container"},get:function(){},astr:i,parts:p,obj:o}}},{"./array":485,"fast-isnumeric":190}],512:[function(g,ne,ae){ne.exports=function(){}},{}],513:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("fast-isnumeric"),M=[];ne.exports=function(A,e){if(M.indexOf(A)!==-1)return;M.push(A);var a=1e3;c(e)?a=e:e==="long"&&(a=3e3);var n=T.select("body").selectAll(".plotly-notifier").data([0]);n.enter().append("div").classed("plotly-notifier",!0);var t=n.selectAll(".notifier-note").data(M);function r(f){f.duration(700).style("opacity",0).each("end",function(o){var i=M.indexOf(o);i!==-1&&M.splice(i,1),T.select(this).remove()})}t.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(f){var o=T.select(this);o.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){o.transition().call(r)});for(var i=o.append("p"),p=f.split(/<br\s*\/?>/g),d=0;d<p.length;d++)d&&i.append("br"),i.append("span").text(p[d]);e==="stick"?o.transition().duration(350).style("opacity",1):o.transition().duration(700).style("opacity",1).transition().delay(a).call(r)})}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(g,ne,ae){var T=g("./setcursor"),c="data-savedcursor",M="!!";ne.exports=function(e,a){var n=e.attr(c);if(a){if(!n){for(var t=(e.attr("class")||"").split(" "),r=0;r<t.length;r++){var f=t[r];f.indexOf("cursor-")===0&&e.attr(c,f.substr(7)).classed(f,!1)}e.attr(c)||e.attr(c,M)}T(e,a)}else n&&(e.attr(c,null),n===M?T(e):T(e,n))}},{"./setcursor":524}],515:[function(g,ne,ae){var T=g("./matrix").dot,c=g("../constants/numerical").BADNUM,M=ne.exports={};M.tester=function(e){var a=e.slice(),n=a[0][0],t=n,r=a[0][1],f=r,o;for(a.push(a[0]),o=1;o<a.length;o++)n=Math.min(n,a[o][0]),t=Math.max(t,a[o][0]),r=Math.min(r,a[o][1]),f=Math.max(f,a[o][1]);var i=!1,p;a.length===5&&(a[0][0]===a[1][0]?a[2][0]===a[3][0]&&a[0][1]===a[3][1]&&a[1][1]===a[2][1]&&(i=!0,p=function(l){return l[0]===a[0][0]}):a[0][1]===a[1][1]&&a[2][1]===a[3][1]&&a[0][0]===a[3][0]&&a[1][0]===a[2][0]&&(i=!0,p=function(l){return l[1]===a[0][1]}));function d(l,_){var s=l[0],w=l[1];return!(s===c||s<n||s>t||w===c||w<r||w>f||_&&p(l))}function y(l,_){var s=l[0],w=l[1];if(s===c||s<n||s>t||w===c||w<r||w>f)return!1;var b=a.length,h=a[0][0],m=a[0][1],u=0,L,S,k,P,z;for(L=1;L<b;L++)if(S=h,k=m,h=a[L][0],m=a[L][1],P=Math.min(S,h),!(s<P||s>Math.max(S,h)||w>Math.max(k,m)))if(w<Math.min(k,m))s!==P&&u++;else{if(h===S?z=w:z=k+(s-S)*(m-k)/(h-S),w===z)return!(L===1&&_);w<=z&&s!==P&&u++}return u%2==1}var v=!0,x=a[0];for(o=1;o<a.length;o++)if(x[0]!==a[o][0]||x[1]!==a[o][1]){v=!1;break}return{xmin:n,xmax:t,ymin:r,ymax:f,pts:a,contains:i?d:y,isRect:i,degenerate:v}},M.isSegmentBent=function(e,a,n,t){var r=e[a],f=[e[n][0]-r[0],e[n][1]-r[1]],o=T(f,f),i=Math.sqrt(o),p=[-f[1]/i,f[0]/i],d,y,v;for(d=a+1;d<n;d++)if(y=[e[d][0]-r[0],e[d][1]-r[1]],v=T(y,f),v<0||v>o||Math.abs(T(y,p))>t)return!0;return!1},M.filter=function(e,a){var n=[e[0]],t=0,r=0;function f(i){e.push(i);var p=n.length,d=t;n.splice(r+1);for(var y=d+1;y<e.length;y++)(y===e.length-1||M.isSegmentBent(e,d,y+1,a))&&(n.push(e[y]),n.length<p-2&&(t=y,r=n.length-1),d=y)}if(e.length>1){var o=e.pop();f(o)}return{addPt:f,raw:e,filtered:n}}},{"../constants/numerical":479,"./matrix":509}],516:[function(g,ne,ae){(function(T){(function(){var c=g("./show_no_webgl_msg"),M=g("regl");ne.exports=function(e,a,n){var t=e._fullLayout,r=!0;return t._glcanvas.each(function(f){if(f.regl){f.regl.preloadCachedCode(n);return}if(!(f.pick&&!t._has("parcoords"))){try{f.regl=M({canvas:this,attributes:{antialias:!f.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||T.devicePixelRatio,extensions:a||[],cachedCode:n||{}})}catch{r=!1}f.regl||(r=!1),r&&this.addEventListener("webglcontextlost",function(o){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:o,layer:f.key})},!1)}}),r||c({container:t._glcontainer.node()}),r}}).call(this)}).call(this,typeof To!="undefined"?To:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("is-mobile");ne.exports=function(e){var a;if(e&&e.hasOwnProperty("userAgent")?a=e.userAgent:a=M(),typeof a!="string")return!0;var n=c({ua:{headers:{"user-agent":a}},tablet:!0,featureDetect:!1});if(!n)for(var t=a.split(" "),r=1;r<t.length;r++){var f=t[r];if(f.indexOf("Safari")!==-1)for(var o=r-1;o>-1;o--){var i=t[o];if(i.substr(0,8)==="Version/"){var p=i.substr(8).split(".")[0];if(T(p)&&(p=+p),p>=13)return!0}}}return n};function M(){var A;return typeof navigator!="undefined"&&(A=navigator.userAgent),A&&A.headers&&typeof A.headers["user-agent"]=="string"&&(A=A.headers["user-agent"]),A}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(g,ne,ae){ne.exports=function(c,M){if(M instanceof RegExp){for(var A=M.toString(),e=0;e<c.length;e++)if(c[e]instanceof RegExp&&c[e].toString()===A)return c;c.push(M)}else(M||M===0)&&c.indexOf(M)===-1&&c.push(M);return c}},{}],519:[function(g,ne,ae){var T=g("../lib"),c=g("../plot_api/plot_config").dfltConfig;function M(e,a){for(var n=[],t,r=0;r<a.length;r++)t=a[r],t===e?n[r]=t:typeof t=="object"?n[r]=Array.isArray(t)?T.extendDeep([],t):T.extendDeepAll({},t):n[r]=t;return n}var A={};A.add=function(e,a,n,t,r){var f,o;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(f={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,f),e.undoQueue.index+=1):f=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,f&&(f.undo.calls.unshift(a),f.undo.args.unshift(n),f.redo.calls.push(t),f.redo.args.push(r)),e.undoQueue.queue.length>c.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)},A.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},A.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},A.undo=function(a){var n,t;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index<=0)){for(a.undoQueue.index--,n=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,t=0;t<n.undo.calls.length;t++)A.plotDo(a,n.undo.calls[t],n.undo.args[t]);a.undoQueue.inSequence=!1,a.autoplay=!1}},A.redo=function(a){var n,t;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){for(n=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,t=0;t<n.redo.calls.length;t++)A.plotDo(a,n.redo.calls[t],n.redo.args[t]);a.undoQueue.inSequence=!1,a.autoplay=!1,a.undoQueue.index++}},A.plotDo=function(e,a,n){e.autoplay=!0,n=M(e,n),a.apply(null,n)},ne.exports=A},{"../lib":503,"../plot_api/plot_config":541}],520:[function(g,ne,ae){ae.counter=function(T,c,M,A){var e=(c||"")+(M?"":"$"),a=A===!1?"":"^";return T==="xy"?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(a+T+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(g,ne,ae){var T=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,c=/^[^\.\[\]]+$/;ne.exports=function(M,A){for(;A;){var e=M.match(T);if(e)M=e[1];else if(M.match(c))M="";else throw new Error("bad relativeAttr call:"+[M,A]);if(A.charAt(0)==="^")A=A.slice(1);else break}return M&&A.charAt(0)!=="["?M+"."+A:M+A}},{}],522:[function(g,ne,ae){var T=g("./array").isArrayOrTypedArray,c=g("./is_plain_object");ne.exports=function M(A,e){for(var a in e){var n=e[a],t=A[a];if(t!==n)if(a.charAt(0)==="_"||typeof n=="function"){if(a in A)continue;A[a]=n}else if(T(n)&&T(t)&&c(n[0])){if(a==="customdata"||a==="ids")continue;for(var r=Math.min(n.length,t.length),f=0;f<r;f++)t[f]!==n[f]&&c(n[f])&&c(t[f])&&M(t[f],n[f])}else c(n)&&c(t)&&(M(t,n),Object.keys(t).length||delete A[a])}}},{"./array":485,"./is_plain_object":504}],523:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("./loggers"),M=g("./identity"),A=g("../constants/numerical").BADNUM,e=1e-9;ae.findBin=function(f,o,i){if(T(o.start))return i?Math.ceil((f-o.start)/o.size-e)-1:Math.floor((f-o.start)/o.size+e);var p=0,d=o.length,y=0,v=d>1?(o[d-1]-o[0])/(d-1):1,x,l;for(v>=0?l=i?a:n:l=i?r:t,f+=v*e*(i?-1:1)*(v>=0?1:-1);p<d&&y++<100;)x=Math.floor((p+d)/2),l(o[x],f)?p=x+1:d=x;return y>90&&c.log("Long binary search..."),p-1};function a(f,o){return f<o}function n(f,o){return f<=o}function t(f,o){return f>o}function r(f,o){return f>=o}ae.sorterAsc=function(f,o){return f-o},ae.sorterDes=function(f,o){return o-f},ae.distinctVals=function(f){var o=f.slice();o.sort(ae.sorterAsc);var i;for(i=o.length-1;i>-1&&o[i]===A;i--);for(var p=o[i]-o[0]||1,d=p/(i||1)/1e4,y=[],v,x=0;x<=i;x++){var l=o[x],_=l-v;v===void 0?(y.push(l),v=l):_>d&&(p=Math.min(p,_),y.push(l),v=l)}return{vals:y,minDiff:p}},ae.roundUp=function(f,o,i){for(var p=0,d=o.length-1,y,v=0,x=i?0:1,l=i?1:0,_=i?Math.ceil:Math.floor;p<d&&v++<100;)y=_((p+d)/2),o[y]<=f?p=y+x:d=y-l;return o[p]},ae.sort=function(f,o){for(var i=0,p=0,d=1;d<f.length;d++){var y=o(f[d],f[d-1]);if(y<0?i=1:y>0&&(p=1),i&&p)return f.sort(o)}return p?f:f.reverse()},ae.findIndexOfMin=function(f,o){o=o||M;for(var i=1/0,p,d=0;d<f.length;d++){var y=o(f[d]);y<i&&(i=y,p=d)}return p}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(g,ne,ae){ne.exports=function(c,M){(c.attr("class")||"").split(" ").forEach(function(A){A.indexOf("cursor-")===0&&c.classed(A,!1)}),M&&c.classed("cursor-"+M,!0)}},{}],525:[function(g,ne,ae){var T=g("../components/color"),c=function(){};ne.exports=function(A){for(var e in A)typeof A[e]=="function"&&(A[e]=c);A.destroy=function(){A.container.parentNode.removeChild(A.container)};var a=document.createElement("div");a.className="no-webgl",a.style.cursor="pointer",a.style.fontSize="24px",a.style.color=T.defaults[0],a.style.position="absolute",a.style.left=a.style.top="0px",a.style.width=a.style.height="100%",a.style["background-color"]=T.lightLine,a.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",a.appendChild(n),A.container.appendChild(a),A.container.style.background="#FFFFFF",A.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(g,ne,ae){ne.exports=function(c){return Object.keys(c).sort()}},{}],527:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("./array").isArrayOrTypedArray;ae.aggNums=function(M,A,e,a){var n,t;if((!a||a>e.length)&&(a=e.length),T(A)||(A=!1),c(e[0])){for(t=new Array(a),n=0;n<a;n++)t[n]=ae.aggNums(M,A,e[n]);e=t}for(n=0;n<a;n++)T(A)?T(e[n])&&(A=M(+A,+e[n])):A=e[n];return A},ae.len=function(M){return ae.aggNums(function(A){return A+1},0,M)},ae.mean=function(M,A){return A||(A=ae.len(M)),ae.aggNums(function(e,a){return e+a},0,M)/A},ae.midRange=function(M){if(!(M===void 0||M.length===0))return(ae.aggNums(Math.max,null,M)+ae.aggNums(Math.min,null,M))/2},ae.variance=function(M,A,e){return A||(A=ae.len(M)),T(e)||(e=ae.mean(M,A)),ae.aggNums(function(a,n){return a+Math.pow(n-e,2)},0,M)/A},ae.stdev=function(M,A,e){return Math.sqrt(ae.variance(M,A,e))},ae.median=function(M){var A=M.slice().sort();return ae.interp(A,.5)},ae.interp=function(M,A){if(!T(A))throw"n should be a finite number";if(A=A*M.length-.5,A<0)return M[0];if(A>M.length-1)return M[M.length-1];var e=A%1;return e*M[Math.ceil(A)]+(1-e)*M[Math.floor(A)]}},{"./array":485,"fast-isnumeric":190}],528:[function(g,ne,ae){var T=g("color-normalize");function c(M){return M?T(M):[0,0,0,1]}ne.exports=c},{"color-normalize":89}],529:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../lib"),M=c.strTranslate,A=g("../constants/xmlns_namespaces"),e=g("../constants/alignment").LINE_SPACING,a=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;ae.convertToTspans=function(F,V,Y){var K=F.text(),J=!F.attr("data-notex")&&V&&V._context.typesetMath&&typeof MathJax!="undefined"&&K.match(a),G=T.select(F.node().parentNode);if(G.empty())return;var Z=F.attr("class")?F.attr("class").split(" ")[0]:"text";Z+="-math",G.selectAll("svg."+Z).remove(),G.selectAll("g."+Z+"-group").remove(),F.style("display",null).attr({"data-unformatted":K,"data-math":"N"});function re(){G.empty()||(Z=F.attr("class")+"-math",G.select("svg."+Z).remove()),F.text("").style("white-space","pre");var se=I(F.node(),K);se&&F.style("pointer-events","all"),ae.positionText(F),Y&&Y.call(F)}return J?(V&&V._promises||[]).push(new Promise(function(se){F.style("display","none");var oe=parseInt(F.node().style.fontSize,10),N={fontSize:oe};o(J[2],N,function(U,q,Q){G.selectAll("svg."+Z).remove(),G.selectAll("g."+Z+"-group").remove();var W=U&&U.select("svg");if(!W||!W.node()){re(),se();return}var X=G.append("g").classed(Z+"-group",!0).attr({"pointer-events":"none","data-unformatted":K,"data-math":"Y"});X.node().appendChild(W.node()),q&&q.node()&&W.node().insertBefore(q.node().cloneNode(!0),W.node().firstChild);var te=Q.width,ee=Q.height;W.attr({class:Z,height:ee,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ie=F.node().style.fill||"black",le=W.select("g");le.attr({fill:ie,stroke:ie});var ye=le.node().getBoundingClientRect(),ue=ye.width,pe=ye.height;(ue>te||pe>ee)&&(W.style("overflow","hidden"),ye=W.node().getBoundingClientRect(),ue=ye.width,pe=ye.height);var ge=+F.attr("x"),Te=+F.attr("y"),_e=oe||F.node().getBoundingClientRect().height,De=-_e/4;if(Z[0]==="y")X.attr({transform:"rotate("+[-90,ge,Te]+")"+M(-ue/2,De-pe/2)});else if(Z[0]==="l")Te=De-pe/2;else if(Z[0]==="a"&&Z.indexOf("atitle")!==0)ge=0,Te=De;else{var Oe=F.attr("text-anchor");ge=ge-ue*(Oe==="middle"?.5:Oe==="end"?1:0),Te=Te+De-pe/2}W.attr({x:ge,y:Te}),Y&&Y.call(F,X),se(X)})})):re(),F};var n=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g;function r(F){return F.replace(n,"\\lt ").replace(t,"\\gt ")}var f=[["$","$"],["\\(","\\)"]];function o(F,V,Y){var K=parseInt((MathJax.version||"").split(".")[0]);if(K!==2&&K!==3){c.warn("No MathJax version:",MathJax.version);return}var J,G,Z,re,se=function(){return G=c.extendDeepAll({},MathJax.Hub.config),Z=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:f},displayAlign:"left"})},oe=function(){G=c.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=f},N=function(){if(J=MathJax.Hub.config.menuSettings.renderer,J!=="SVG")return MathJax.Hub.setRenderer("SVG")},U=function(){J=MathJax.config.startup.output,J!=="svg"&&(MathJax.config.startup.output="svg")},q=function(){var ie="math-output-"+c.randstr({},64);re=T.select("body").append("div").attr({id:ie}).style({visibility:"hidden",position:"absolute","font-size":V.fontSize+"px"}).text(r(F));var le=re.node();return K===2?MathJax.Hub.Typeset(le):MathJax.typeset([le])},Q=function(){var ie=re.select(K===2?".MathJax_SVG":".MathJax"),le=!ie.empty()&&re.select("svg").node();if(!le)c.log("There was an error in the tex syntax.",F),Y();else{var ye=le.getBoundingClientRect(),ue;K===2?ue=T.select("body").select("#MathJax_SVG_glyphs"):ue=ie.select("defs"),Y(ie,ue,ye)}re.remove()},W=function(){if(J!=="SVG")return MathJax.Hub.setRenderer(J)},X=function(){J!=="svg"&&(MathJax.config.startup.output=J)},te=function(){return Z!==void 0&&(MathJax.Hub.processSectionDelay=Z),MathJax.Hub.Config(G)},ee=function(){MathJax.config=G};K===2?MathJax.Hub.Queue(se,N,q,Q,W,te):K===3&&(oe(),U(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){q(),Q(),X(),ee()}))}var i={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},p={sub:"0.3em",sup:"-0.6em"},d={sub:"-0.21em",sup:"0.42em"},y="\u200B",v=["http:","https:","mailto:","",void 0,":"],x=ae.NEWLINES=/(\r\n?|\n)/g,l=/(<[^<>]*>)/,_=/<(\/?)([^ >]*)(\s+(.*))?>/i,s=/<br(\s+.*)?>/i;ae.BR_TAG_ALL=/<br(\s+.*)?>/gi;var w=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,b=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,h=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,m=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function u(F,V){if(!F)return null;var Y=F.match(V),K=Y&&(Y[3]||Y[4]);return K&&P(K)}var L=/(^|;)\s*color:/;ae.plainText=function(F,V){V=V||{};for(var Y=V.len!==void 0&&V.len!==-1?V.len:1/0,K=V.allowedTags!==void 0?V.allowedTags:["br"],J="...",G=J.length,Z=F.split(l),re=[],se="",oe=0,N=0;N<Z.length;N++){var U=Z[N],q=U.match(_),Q=q&&q[2].toLowerCase();if(Q)K.indexOf(Q)!==-1&&(re.push(U),se=Q);else{var W=U.length;if(oe+W<Y)re.push(U),oe+=W;else if(oe<Y){var X=Y-oe;se&&(se!=="br"||X<=G||W<=G)&&re.pop(),Y>G?re.push(U.substr(0,X-G)+J):re.push(U.substr(0,X));break}se=""}}return re.join("")};var S={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},k=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function P(F){return F.replace(k,function(V,Y){var K;return Y.charAt(0)==="#"?K=z(Y.charAt(1)==="x"?parseInt(Y.substr(2),16):parseInt(Y.substr(1),10)):K=S[Y],K||V})}ae.convertEntities=P;function z(F){if(!(F>1114111)){var V=String.fromCodePoint;if(V)return V(F);var Y=String.fromCharCode;return F<=65535?Y(F):Y((F>>10)+55232,F%1024+56320)}}function I(F,V){V=V.replace(x," ");var Y=!1,K=[],J,G=-1;function Z(){G++;var pe=document.createElementNS(A.svg,"tspan");T.select(pe).attr({class:"line",dy:G*e+"em"}),F.appendChild(pe),J=pe;var ge=K;if(K=[{node:pe}],ge.length>1)for(var Te=1;Te<ge.length;Te++)re(ge[Te])}function re(pe){var ge=pe.type,Te={},_e;if(ge==="a"){_e="a";var De=pe.target,Oe=pe.href,Ue=pe.popup;Oe&&(Te={"xlink:xlink:show":De==="_blank"||De.charAt(0)!=="_"?"new":"replace",target:De,"xlink:xlink:href":Oe},Ue&&(Te.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ue+'");return false;'))}else _e="tspan";pe.style&&(Te.style=pe.style);var xe=document.createElementNS(A.svg,_e);if(ge==="sup"||ge==="sub"){se(J,y),J.appendChild(xe);var Pe=document.createElementNS(A.svg,"tspan");se(Pe,y),T.select(Pe).attr("dy",d[ge]),Te.dy=p[ge],J.appendChild(xe),J.appendChild(Pe)}else J.appendChild(xe);T.select(xe).attr(Te),J=pe.node=xe,K.push(pe)}function se(pe,ge){pe.appendChild(document.createTextNode(ge))}function oe(pe){if(K.length===1){c.log("Ignoring unexpected end tag </"+pe+">.",V);return}var ge=K.pop();pe!==ge.type&&c.log("Start tag <"+ge.type+"> doesnt match end tag <"+pe+">. Pretending it did match.",V),J=K[K.length-1].node}var N=s.test(V);N?Z():(J=F,K=[{node:F}]);for(var U=V.split(l),q=0;q<U.length;q++){var Q=U[q],W=Q.match(_),X=W&&W[2].toLowerCase(),te=i[X];if(X==="br")Z();else if(te===void 0)se(J,P(Q));else if(W[1])oe(X);else{var ee=W[4],ie={type:X},le=u(ee,w);if(le?(le=le.replace(L,"$1 fill:"),te&&(le+=";"+te)):te&&(le=te),le&&(ie.style=le),X==="a"){Y=!0;var ye=u(ee,b);if(ye){var ue=D(ye);ue&&(ie.href=ue,ie.target=u(ee,h)||"_blank",ie.popup=u(ee,m))}}re(ie)}}return Y}function D(F){var V=encodeURI(decodeURI(F)),Y=document.createElement("a"),K=document.createElement("a");Y.href=F,K.href=V;var J=Y.protocol,G=K.protocol;return v.indexOf(J)!==-1&&v.indexOf(G)!==-1?V:""}ae.sanitizeHTML=function(V){V=V.replace(x," ");for(var Y=document.createElement("p"),K=Y,J=[],G=V.split(l),Z=0;Z<G.length;Z++){var re=G[Z],se=re.match(_),oe=se&&se[2].toLowerCase();if(oe in i)if(se[1])J.length&&(K=J.pop());else{var N=se[4],U=u(N,w),q=U?{style:U}:{};if(oe==="a"){var Q=u(N,b);if(Q){var W=D(Q);if(W){q.href=W;var X=u(N,h);X&&(q.target=X)}}}var te=document.createElement(oe);K.appendChild(te),T.select(te).attr(q),K=te,J.push(te)}else K.appendChild(document.createTextNode(P(re)))}var ee="innerHTML";return Y[ee]},ae.lineCount=function(V){return V.selectAll("tspan.line").size()||1},ae.positionText=function(V,Y,K){return V.each(function(){var J=T.select(this);function G(se,oe){return oe===void 0?(oe=J.attr(se),oe===null&&(J.attr(se,0),oe=0)):J.attr(se,oe),oe}var Z=G("x",Y),re=G("y",K);this.nodeName==="text"&&J.selectAll("tspan.line").attr({x:Z,y:re})})};function R(F,V,Y){var K=Y.horizontalAlign,J=Y.verticalAlign||"top",G=F.node().getBoundingClientRect(),Z=V.node().getBoundingClientRect(),re,se,oe;return J==="bottom"?se=function(){return G.bottom-re.height}:J==="middle"?se=function(){return G.top+(G.height-re.height)/2}:se=function(){return G.top},K==="right"?oe=function(){return G.right-re.width}:K==="center"?oe=function(){return G.left+(G.width-re.width)/2}:oe=function(){return G.left},function(){re=this.node().getBoundingClientRect();var N=oe()-Z.left,U=se()-Z.top,q=Y.gd||{};if(Y.gd){q._fullLayout._calcInverseTransform(q);var Q=c.apply3DTransform(q._fullLayout._invTransform)(N,U);N=Q[0],U=Q[1]}return this.style({top:U+"px",left:N+"px","z-index":1e3}),this}}var B="1px ";ae.makeTextShadow=function(F){var V=B,Y=B,K=B;return V+Y+K+F+", -"+V+"-"+Y+K+F+", "+V+"-"+Y+K+F+", -"+V+Y+K+F},ae.makeEditable=function(F,V){var Y=V.gd,K=V.delegate,J=T.dispatch("edit","input","cancel"),G=K||F;if(F.style({"pointer-events":K?"none":"all"}),F.size()!==1)throw new Error("boo");function Z(){se(),F.style({opacity:0});var oe=G.attr("class"),N;oe?N="."+oe.split(" ")[0]+"-math-group":N="[class*=-math-group]",N&&T.select(F.node().parentNode).select(N).style({opacity:0})}function re(oe){var N=oe.node(),U=document.createRange();U.selectNodeContents(N);var q=window.getSelection();q.removeAllRanges(),q.addRange(U),N.focus()}function se(){var oe=T.select(Y),N=oe.select(".svg-container"),U=N.append("div"),q=F.node().style,Q=parseFloat(q.fontSize||12),W=V.text;W===void 0&&(W=F.attr("data-unformatted")),U.classed("plugin-editable editable",!0).style({position:"absolute","font-family":q.fontFamily||"Arial","font-size":Q,color:V.fill||q.fill||"black",opacity:1,"background-color":V.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Q/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(W).call(R(F,N,V)).on("blur",function(){Y._editing=!1,F.text(this.textContent).style({opacity:1});var X=T.select(this).attr("class"),te;X?te="."+X.split(" ")[0]+"-math-group":te="[class*=-math-group]",te&&T.select(F.node().parentNode).select(te).style({opacity:0});var ee=this.textContent;T.select(this).transition().duration(0).remove(),T.select(document).on("mouseup",null),J.edit.call(F,ee)}).on("focus",function(){var X=this;Y._editing=!0,T.select(document).on("mouseup",function(){if(T.event.target===X)return!1;document.activeElement===U.node()&&U.node().blur()})}).on("keyup",function(){T.event.which===27?(Y._editing=!1,F.style({opacity:1}),T.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),J.cancel.call(F,this.textContent)):(J.input.call(F,this.textContent),T.select(this).call(R(F,N,V)))}).on("keydown",function(){T.event.which===13&&this.blur()}).call(re)}return V.immediate?Z():G.on("click",Z),T.rebind(F,J,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(g,ne,ae){var T={};ae.throttle=function(A,e,a){var n=T[A],t=Date.now();if(!n){for(var r in T)T[r].ts<t-6e4&&delete T[r];n=T[A]={ts:0,timer:null}}c(n);function f(){a(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}if(t>n.ts+e){f();return}n.timer=setTimeout(function(){f(),n.timer=null},e)},ae.done=function(M){var A=T[M];return!A||!A.timer?Promise.resolve():new Promise(function(e){var a=A.onDone;A.onDone=function(){a&&a(),e(),A.onDone=null}})},ae.clear=function(M){if(M)c(T[M]),delete T[M];else for(var A in T)ae.clear(A)};function c(M){M&&M.timer!==null&&(clearTimeout(M.timer),M.timer=null)}},{}],531:[function(g,ne,ae){var T=g("fast-isnumeric");ne.exports=function(M,A){if(M>0)return Math.log(M)/Math.LN10;var e=Math.log(Math.min(A[0],A[1]))/Math.LN10;return T(e)||(e=Math.log(Math.max(A[0],A[1]))/Math.LN10-6),e}},{"fast-isnumeric":190}],532:[function(g,ne,ae){var T=ne.exports={},c=g("../plots/geo/constants").locationmodeToLayer,M=g("topojson-client").feature;T.getTopojsonName=function(A){return[A.scope.replace(/ /g,"-"),"_",A.resolution.toString(),"m"].join("")},T.getTopojsonPath=function(A,e){return A+e+".json"},T.getTopojsonFeatures=function(A,e){var a=c[A.locationmode],n=e.objects[a];return M(e,n).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(g,ne,ae){ne.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(g,ne,ae){ne.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(g,ne,ae){var T=g("../registry");ne.exports=function(M){for(var A=T.layoutArrayContainers,e=T.layoutArrayRegexes,a=M.split("[")[0],n,t,r=0;r<e.length;r++)if(t=M.match(e[r]),t&&t.index===0){n=t[0];break}if(n||(n=A[A.indexOf(a)]),!n)return!1;var f=M.substr(n.length);return f?(t=f.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),t?{array:n,index:Number(t[1]),property:t[3]||""}:!1):{array:n,index:"",property:""}}},{"../registry":638}],536:[function(g,ne,ae){var T=g("../lib"),c=T.extendFlat,M=T.isPlainObject,A={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},a=A.flags.slice().concat(["fullReplot"]),n=e.flags.slice().concat("layoutReplot");ne.exports={traces:A,layout:e,traceFlags:function(){return t(a)},layoutFlags:function(){return t(n)},update:function(o,i){var p=i.editType;if(p&&p!=="none")for(var d=p.split("+"),y=0;y<d.length;y++)o[d[y]]=!0},overrideAll:r};function t(o){for(var i={},p=0;p<o.length;p++)i[o[p]]=!1;return i}function r(o,i,p){var d=c({},o);for(var y in d){var v=d[y];M(v)&&(d[y]=f(v,i,p,y))}return p==="from-root"&&(d.editType=i),d}function f(o,i,p,d){if(o.valType){var y=c({},o);if(y.editType=i,Array.isArray(o.items)){y.items=new Array(o.items.length);for(var v=0;v<o.items.length;v++)y.items[v]=f(o.items[v],i)}return y}else return r(o,i,d.charAt(0)==="_"?"nested":"from-root")}},{"../lib":503}],537:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("gl-mat4/fromQuat"),M=g("../registry"),A=g("../lib"),e=g("../plots/plots"),a=g("../plots/cartesian/axis_ids"),n=g("../components/color"),t=a.cleanId,r=a.getFromTrace,f=M.traceIs;ae.clearPromiseQueue=function(s){Array.isArray(s._promises)&&s._promises.length>0&&A.log("Clearing previous rejected promises from queue."),s._promises=[]},ae.cleanLayout=function(s){var w,b;s||(s={}),s.xaxis1&&(s.xaxis||(s.xaxis=s.xaxis1),delete s.xaxis1),s.yaxis1&&(s.yaxis||(s.yaxis=s.yaxis1),delete s.yaxis1),s.scene1&&(s.scene||(s.scene=s.scene1),delete s.scene1);var h=(e.subplotsRegistry.cartesian||{}).attrRegex,m=(e.subplotsRegistry.polar||{}).attrRegex,u=(e.subplotsRegistry.ternary||{}).attrRegex,L=(e.subplotsRegistry.gl3d||{}).attrRegex,S=Object.keys(s);for(w=0;w<S.length;w++){var k=S[w];if(h&&h.test(k)){var P=s[k];P.anchor&&P.anchor!=="free"&&(P.anchor=t(P.anchor)),P.overlaying&&(P.overlaying=t(P.overlaying)),P.type||(P.isdate?P.type="date":P.islog?P.type="log":P.isdate===!1&&P.islog===!1&&(P.type="linear")),(P.autorange==="withzero"||P.autorange==="tozero")&&(P.autorange=!0,P.rangemode="tozero"),delete P.islog,delete P.isdate,delete P.categories,v(P,"domain")&&delete P.domain,P.autotick!==void 0&&(P.tickmode===void 0&&(P.tickmode=P.autotick?"auto":"linear"),delete P.autotick),i(P)}else if(m&&m.test(k)){var z=s[k];i(z.radialaxis)}else if(u&&u.test(k)){var I=s[k];i(I.aaxis),i(I.baxis),i(I.caxis)}else if(L&&L.test(k)){var D=s[k],R=D.cameraposition;if(Array.isArray(R)&&R[0].length===4){var B=R[0],F=R[1],V=R[2],Y=c([],B),K=[];for(b=0;b<3;++b)K[b]=F[b]+V*Y[2+4*b];D.camera={eye:{x:K[0],y:K[1],z:K[2]},center:{x:F[0],y:F[1],z:F[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}i(D.xaxis),i(D.yaxis),i(D.zaxis)}}var J=Array.isArray(s.annotations)?s.annotations.length:0;for(w=0;w<J;w++){var G=s.annotations[w];!A.isPlainObject(G)||(G.ref&&(G.ref==="paper"?(G.xref="paper",G.yref="paper"):G.ref==="data"&&(G.xref="x",G.yref="y"),delete G.ref),o(G,"xref"),o(G,"yref"))}var Z=Array.isArray(s.shapes)?s.shapes.length:0;for(w=0;w<Z;w++){var re=s.shapes[w];!A.isPlainObject(re)||(o(re,"xref"),o(re,"yref"))}var se=Array.isArray(s.images)?s.images.length:0;for(w=0;w<se;w++){var oe=s.images[w];!A.isPlainObject(oe)||(o(oe,"xref"),o(oe,"yref"))}var N=s.legend;return N&&(N.x>3?(N.x=1.02,N.xanchor="left"):N.x<-2&&(N.x=-.02,N.xanchor="right"),N.y>3?(N.y=1.02,N.yanchor="bottom"):N.y<-2&&(N.y=-.02,N.yanchor="top")),i(s),s.dragmode==="rotate"&&(s.dragmode="orbit"),n.clean(s),s.template&&s.template.layout&&ae.cleanLayout(s.template.layout),s};function o(s,w){var b=s[w],h=w.charAt(0);b&&b!=="paper"&&(s[w]=t(b,h,!0))}function i(s){s&&((typeof s.title=="string"||typeof s.title=="number")&&(s.title={text:s.title}),w("titlefont","font"),w("titleposition","position"),w("titleside","side"),w("titleoffset","offset"));function w(b,h){var m=s[b],u=s.title&&s.title[h];m&&!u&&(s.title||(s.title={}),s.title[h]=s[b],delete s[b])}}ae.cleanData=function(s){for(var w=0;w<s.length;w++){var b=s[w],h;if(b.type==="histogramy"&&"xbins"in b&&!("ybins"in b)&&(b.ybins=b.xbins,delete b.xbins),b.error_y&&"opacity"in b.error_y){var m=n.defaults,u=b.error_y.color||(f(b,"bar")?n.defaultLine:m[w%m.length]);b.error_y.color=n.addOpacity(n.rgb(u),n.opacity(u)*b.error_y.opacity),delete b.error_y.opacity}if("bardir"in b&&(b.bardir==="h"&&(f(b,"bar")||b.type.substr(0,9)==="histogram")&&(b.orientation="h",ae.swapXYData(b)),delete b.bardir),b.type==="histogramy"&&ae.swapXYData(b),(b.type==="histogramx"||b.type==="histogramy")&&(b.type="histogram"),"scl"in b&&!("colorscale"in b)&&(b.colorscale=b.scl,delete b.scl),"reversescl"in b&&!("reversescale"in b)&&(b.reversescale=b.reversescl,delete b.reversescl),b.xaxis&&(b.xaxis=t(b.xaxis,"x")),b.yaxis&&(b.yaxis=t(b.yaxis,"y")),f(b,"gl3d")&&b.scene&&(b.scene=e.subplotsRegistry.gl3d.cleanId(b.scene)),!f(b,"pie-like")&&!f(b,"bar-like"))if(Array.isArray(b.textposition))for(h=0;h<b.textposition.length;h++)b.textposition[h]=y(b.textposition[h]);else b.textposition&&(b.textposition=y(b.textposition));var L=M.getModule(b);if(L&&L.colorbar){var S=L.colorbar.container,k=S?b[S]:b;k&&k.colorscale&&(k.colorscale==="YIGnBu"&&(k.colorscale="YlGnBu"),k.colorscale==="YIOrRd"&&(k.colorscale="YlOrRd"))}if(b.type==="surface"&&A.isPlainObject(b.contours)){var P=["x","y","z"];for(h=0;h<P.length;h++){var z=b.contours[P[h]];!A.isPlainObject(z)||(z.highlightColor&&(z.highlightcolor=z.highlightColor,delete z.highlightColor),z.highlightWidth&&(z.highlightwidth=z.highlightWidth,delete z.highlightWidth))}}if(b.type==="candlestick"||b.type==="ohlc"){var I=(b.increasing||{}).showlegend!==!1,D=(b.decreasing||{}).showlegend!==!1,R=p(b.increasing),B=p(b.decreasing);if(R!==!1&&B!==!1){var F=d(R,B,I,D);F&&(b.name=F)}else(R||B)&&!b.name&&(b.name=R||B)}if(Array.isArray(b.transforms)){var V=b.transforms;for(h=0;h<V.length;h++){var Y=V[h];if(!!A.isPlainObject(Y))switch(Y.type){case"filter":Y.filtersrc&&(Y.target=Y.filtersrc,delete Y.filtersrc),Y.calendar&&(Y.valuecalendar||(Y.valuecalendar=Y.calendar),delete Y.calendar);break;case"groupby":if(Y.styles=Y.styles||Y.style,Y.styles&&!Array.isArray(Y.styles)){var K=Y.styles,J=Object.keys(K);Y.styles=[];for(var G=0;G<J.length;G++)Y.styles.push({target:J[G],value:K[J[G]]})}break}}}v(b,"line")&&delete b.line,"marker"in b&&(v(b.marker,"line")&&delete b.marker.line,v(b,"marker")&&delete b.marker),n.clean(b),b.autobinx&&(delete b.autobinx,delete b.xbins),b.autobiny&&(delete b.autobiny,delete b.ybins),i(b),b.colorbar&&i(b.colorbar),b.marker&&b.marker.colorbar&&i(b.marker.colorbar),b.line&&b.line.colorbar&&i(b.line.colorbar),b.aaxis&&i(b.aaxis),b.baxis&&i(b.baxis)}};function p(s){if(!A.isPlainObject(s))return!1;var w=s.name;return delete s.name,delete s.showlegend,(typeof w=="string"||typeof w=="number")&&String(w)}function d(s,w,b,h){if(b&&!h)return s;if(h&&!b||!s.trim())return w;if(!w.trim())return s;var m=Math.min(s.length,w.length),u;for(u=0;u<m&&s.charAt(u)===w.charAt(u);u++);var L=s.substr(0,u);return L.trim()}function y(s){var w="middle",b="center";return typeof s=="string"&&(s.indexOf("top")!==-1?w="top":s.indexOf("bottom")!==-1&&(w="bottom"),s.indexOf("left")!==-1?b="left":s.indexOf("right")!==-1&&(b="right")),w+" "+b}function v(s,w){return w in s&&typeof s[w]=="object"&&Object.keys(s[w]).length===0}ae.swapXYData=function(s){var w;if(A.swapAttrs(s,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(s.z)&&Array.isArray(s.z[0])&&(s.transpose?delete s.transpose:s.transpose=!0),s.error_x&&s.error_y){var b=s.error_y,h="copy_ystyle"in b?b.copy_ystyle:!(b.color||b.thickness||b.width);A.swapAttrs(s,["error_?.copy_ystyle"]),h&&A.swapAttrs(s,["error_?.color","error_?.thickness","error_?.width"])}if(typeof s.hoverinfo=="string"){var m=s.hoverinfo.split("+");for(w=0;w<m.length;w++)m[w]==="x"?m[w]="y":m[w]==="y"&&(m[w]="x");s.hoverinfo=m.join("+")}},ae.coerceTraceIndices=function(s,w){if(T(w))return[w];if(!Array.isArray(w)||!w.length)return s.data.map(function(m,u){return u});if(Array.isArray(w)){for(var b=[],h=0;h<w.length;h++)A.isIndex(w[h],s.data.length)?b.push(w[h]):A.warn("trace index (",w[h],") is not a number or is out of bounds");return b}return w},ae.manageArrayContainers=function(s,w,b){var h=s.obj,m=s.parts,u=m.length,L=m[u-1],S=T(L);if(S&&w===null){var k=m.slice(0,u-1).join("."),P=A.nestedProperty(h,k).get();P.splice(L,1)}else S&&s.get()===void 0&&s.get()===void 0&&(b[s.astr]=null),s.set(w)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function l(s){var w=s.search(x);if(w>0)return s.substr(0,w)}ae.hasParent=function(s,w){for(var b=l(w);b;){if(b in s)return!0;b=l(b)}return!1};var _=["x","y","z"];ae.clearAxisTypes=function(s,w,b){for(var h=0;h<w.length;h++)for(var m=s._fullData[h],u=0;u<3;u++){var L=r(s,m,_[u]);if(L&&L.type!=="log"){var S=L._name,k=L._id.substr(1);if(k.substr(0,5)==="scene"){if(b[k]!==void 0)continue;S=k+"."+S}var P=S+".type";b[S]===void 0&&b[P]===void 0&&A.nestedProperty(s.layout,P).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(g,ne,ae){var T=g("./plot_api");ae._doPlot=T._doPlot,ae.newPlot=T.newPlot,ae.restyle=T.restyle,ae.relayout=T.relayout,ae.redraw=T.redraw,ae.update=T.update,ae._guiRestyle=T._guiRestyle,ae._guiRelayout=T._guiRelayout,ae._guiUpdate=T._guiUpdate,ae._storeDirectGUIEdit=T._storeDirectGUIEdit,ae.react=T.react,ae.extendTraces=T.extendTraces,ae.prependTraces=T.prependTraces,ae.addTraces=T.addTraces,ae.deleteTraces=T.deleteTraces,ae.moveTraces=T.moveTraces,ae.purge=T.purge,ae.addFrames=T.addFrames,ae.deleteFrames=T.deleteFrames,ae.animate=T.animate,ae.setPlotConfig=T.setPlotConfig,ae.toImage=g("./to_image"),ae.validate=g("./validate"),ae.downloadImage=g("../snapshot/download");var c=g("./template_api");ae.makeTemplate=c.makeTemplate,ae.validateTemplate=c.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(g,ne,ae){var T=g("../lib/is_plain_object"),c=g("../lib/noop"),M=g("../lib/loggers"),A=g("../lib/search").sorterAsc,e=g("../registry");ae.containerArrayMatch=g("./container_array_match");var a=ae.isAddVal=function(r){return r==="add"||T(r)},n=ae.isRemoveVal=function(r){return r===null||r==="remove"};ae.applyContainerArrayChanges=function(r,f,o,i,p){var d=f.astr,y=e.getComponentMethod(d,"supplyLayoutDefaults"),v=e.getComponentMethod(d,"draw"),x=e.getComponentMethod(d,"drawOne"),l=i.replot||i.recalc||y===c||v===c,_=r.layout,s=r._fullLayout;if(o[""]){Object.keys(o).length>1&&M.warn("Full array edits are incompatible with other edits",d);var w=o[""][""];if(n(w))f.set(null);else if(Array.isArray(w))f.set(w);else return M.warn("Unrecognized full array edit value",d,w),!0;return l?!1:(y(_,s),v(r),!0)}var b=Object.keys(o).map(Number).sort(A),h=f.get(),m=h||[],u=p(s,d).get(),L=[],S=-1,k=m.length,P,z,I,D,R,B,F,V;for(P=0;P<b.length;P++){if(I=b[P],D=o[I],R=Object.keys(D),B=D[""],F=a(B),I<0||I>m.length-(F?0:1)){M.warn("index out of range",d,I);continue}if(B!==void 0)R.length>1&&M.warn("Insertion & removal are incompatible with edits to the same index.",d,I),n(B)?L.push(I):F?(B==="add"&&(B={}),m.splice(I,0,B),u&&u.splice(I,0,{})):M.warn("Unrecognized full object edit value",d,I,B),S===-1&&(S=I);else for(z=0;z<R.length;z++)V=d+"["+I+"].",p(m[I],R[z],V).set(D[R[z]])}for(P=L.length-1;P>=0;P--)m.splice(L[P],1),u&&u.splice(L[P],1);if(m.length?h||f.set(m):f.set(null),l)return!1;if(y(_,s),x!==c){var Y;if(S===-1)Y=b;else{for(k=Math.max(m.length,k),Y=[],P=0;P<b.length&&(I=b[P],!(I>=S));P++)Y.push(I);for(P=S;P<k;P++)Y.push(P)}for(P=0;P<Y.length;P++)x(r,Y[P])}else v(r);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("fast-isnumeric"),M=g("has-hover"),A=g("../lib"),e=A.nestedProperty,a=g("../lib/events"),n=g("../lib/queue"),t=g("../registry"),r=g("./plot_schema"),f=g("../plots/plots"),o=g("../plots/cartesian/axes"),i=g("../components/drawing"),p=g("../components/color"),d=g("../plots/cartesian/graph_interact").initInteractions,y=g("../constants/xmlns_namespaces"),v=g("../plots/cartesian/select").clearSelect,x=g("./plot_config").dfltConfig,l=g("./manage_arrays"),_=g("./helpers"),s=g("./subroutines"),w=g("./edit_types"),b=g("../plots/cartesian/constants").AX_NAME_PATTERN,h=0,m=5;function u(ke,Ge,Je,it){var Pt;if(ke=A.getGraphDiv(ke),a.init(ke),A.isPlainObject(Ge)){var At=Ge;Ge=At.data,Je=At.layout,it=At.config,Pt=At.frames}var Ot=a.triggerHandler(ke,"plotly_beforeplot",[Ge,Je,it]);if(Ot===!1)return Promise.reject();!Ge&&!Je&&!A.isPlotDiv(ke)&&A.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ke);function Jt(){if(Pt)return ae.addFrames(ke,Pt)}z(ke,it),Je||(Je={}),T.select(ke).classed("js-plotly-plot",!0),i.makeTester(),Array.isArray(ke._promises)||(ke._promises=[]);var Bt=(ke.data||[]).length===0&&Array.isArray(Ge);Array.isArray(Ge)&&(_.cleanData(Ge),Bt?ke.data=Ge:ke.data.push.apply(ke.data,Ge),ke.empty=!1),(!ke.layout||Bt)&&(ke.layout=_.cleanLayout(Je)),f.supplyDefaults(ke);var qt=ke._fullLayout,rr=qt._has("cartesian");qt._replotting=!0,(Bt||qt._shouldCreateBgLayer)&&(Ze(ke),qt._shouldCreateBgLayer&&delete qt._shouldCreateBgLayer),i.initGradients(ke),i.initPatterns(ke),Bt&&o.saveShowSpikeInitial(ke);var er=!ke.calcdata||ke.calcdata.length!==(ke._fullData||[]).length;er&&f.doCalcdata(ke);for(var pr=0;pr<ke.calcdata.length;pr++)ke.calcdata[pr][0].trace=ke._fullData[pr];ke._context.responsive?ke._responsiveChartHandler||(ke._responsiveChartHandler=function(){A.isHidden(ke)||f.resize(ke)},window.addEventListener("resize",ke._responsiveChartHandler)):A.clearResponsive(ke);var Xr=A.extendFlat({},qt._size),hn=0;function $r(){for(var ft=qt._basePlotModules,Me=0;Me<ft.length;Me++)ft[Me].drawFramework&&ft[Me].drawFramework(ke);!qt._glcanvas&&qt._has("gl")&&(qt._glcanvas=qt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(ot){return ot.key}),qt._glcanvas.enter().append("canvas").attr("class",function(ot){return"gl-canvas gl-canvas-"+ot.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Se=ke._context.plotGlPixelRatio;if(qt._glcanvas){qt._glcanvas.attr("width",qt.width*Se).attr("height",qt.height*Se).style("width",qt.width+"px").style("height",qt.height+"px");var Ke=qt._glcanvas.data()[0].regl;if(Ke&&(Math.floor(qt.width*Se)!==Ke._gl.drawingBufferWidth||Math.floor(qt.height*Se)!==Ke._gl.drawingBufferHeight)){var Xe="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(hn)A.error(Xe);else return A.log(Xe+" Clearing graph and plotting again."),f.cleanPlot([],{},ke._fullData,qt),f.supplyDefaults(ke),qt=ke._fullLayout,f.doCalcdata(ke),hn++,$r()}}return qt.modebar.orientation==="h"?qt._modebardiv.style("height",null).style("width","100%"):qt._modebardiv.style("width",null).style("height",qt.height+"px"),f.previousPromises(ke)}function nt(){if(f.clearAutoMarginIds(ke),s.drawMarginPushers(ke),o.allowAutoMargin(ke),qt._has("pie"))for(var ft=ke._fullData,Me=0;Me<ft.length;Me++){var Se=ft[Me];Se.type==="pie"&&Se.automargin&&f.allowAutoMargin(ke,"pie."+Se.uid+".automargin")}return f.doAutoMargin(ke),f.previousPromises(ke)}function Gt(){if(!!f.didMarginChange(Xr,qt._size))return A.syncOrAsync([nt,s.layoutStyles],ke)}function Kt(){if(!er){Ht();return}return A.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),Ht],ke)}function Ht(){ke._transitioning||(s.doAutoRangeAndConstraints(ke),Bt&&o.saveRangeInitial(ke),t.getComponentMethod("rangeslider","calcAutorange")(ke))}function _r(){return o.draw(ke,Bt?"":"redraw")}var tt=[f.previousPromises,Jt,$r,nt,Gt];rr&&tt.push(Kt),tt.push(s.layoutStyles),rr&&tt.push(_r,function(Me){Me._fullLayout._insideTickLabelsAutorange&&ie(Me,Me._fullLayout._insideTickLabelsAutorange).then(function(){Me._fullLayout._insideTickLabelsAutorange=void 0})}),tt.push(s.drawData,s.finalDraw,d,f.addLinks,f.rehover,f.redrag,f.doAutoMargin,je,f.previousPromises);function je(ft){ft._fullLayout._insideTickLabelsAutorange&&Bt&&o.saveRangeInitial(ft,!0)}var st=A.syncOrAsync(tt,ke);return(!st||!st.then)&&(st=Promise.resolve()),st.then(function(){return L(ke),ke})}function L(ke){var Ge=ke._fullLayout;Ge._redrawFromAutoMarginCount?Ge._redrawFromAutoMarginCount--:ke.emit("plotly_afterplot")}function S(ke){return A.extendFlat(x,ke)}function k(ke,Ge){try{ke._fullLayout._paper.style("background",Ge)}catch(Je){A.error(Je)}}function P(ke,Ge){var Je=p.combine(Ge,"white");k(ke,Je)}function z(ke,Ge){if(!ke._context){ke._context=A.extendDeep({},x);var Je=T.select("base");ke._context._baseUrl=Je.size()&&Je.attr("href")?window.location.href.split("#")[0]:""}var it=ke._context,Pt,At,Ot;if(Ge){for(At=Object.keys(Ge),Pt=0;Pt<At.length;Pt++)Ot=At[Pt],!(Ot==="editable"||Ot==="edits")&&Ot in it&&(Ot==="setBackground"&&Ge[Ot]==="opaque"?it[Ot]=P:it[Ot]=Ge[Ot]);Ge.plot3dPixelRatio&&!it.plotGlPixelRatio&&(it.plotGlPixelRatio=it.plot3dPixelRatio);var Jt=Ge.editable;if(Jt!==void 0)for(it.editable=Jt,At=Object.keys(it.edits),Pt=0;Pt<At.length;Pt++)it.edits[At[Pt]]=Jt;if(Ge.edits)for(At=Object.keys(Ge.edits),Pt=0;Pt<At.length;Pt++)Ot=At[Pt],Ot in it.edits&&(it.edits[Ot]=Ge.edits[Ot]);it._exportedPlot=Ge._exportedPlot}it.staticPlot&&(it.editable=!1,it.edits={},it.autosizable=!1,it.scrollZoom=!1,it.doubleClick=!1,it.showTips=!1,it.showLink=!1,it.displayModeBar=!1),it.displayModeBar==="hover"&&!M&&(it.displayModeBar=!0),(it.setBackground==="transparent"||typeof it.setBackground!="function")&&(it.setBackground=k),it._hasZeroHeight=it._hasZeroHeight||ke.clientHeight===0,it._hasZeroWidth=it._hasZeroWidth||ke.clientWidth===0;var Bt=it.scrollZoom,qt=it._scrollZoom={};if(Bt===!0)qt.cartesian=1,qt.gl3d=1,qt.geo=1,qt.mapbox=1;else if(typeof Bt=="string"){var rr=Bt.split("+");for(Pt=0;Pt<rr.length;Pt++)qt[rr[Pt]]=1}else Bt!==!1&&(qt.gl3d=1,qt.geo=1,qt.mapbox=1)}function I(ke){if(ke=A.getGraphDiv(ke),!A.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke);return _.cleanData(ke.data),_.cleanLayout(ke.layout),ke.calcdata=void 0,ae._doPlot(ke).then(function(){return ke.emit("plotly_redraw"),ke})}function D(ke,Ge,Je,it){return ke=A.getGraphDiv(ke),f.cleanPlot([],{},ke._fullData||[],ke._fullLayout||{}),f.purge(ke),ae._doPlot(ke,Ge,Je,it)}function R(ke,Ge){var Je=Ge+1,it=[],Pt,At;for(Pt=0;Pt<ke.length;Pt++)At=ke[Pt],At<0?it.push(Je+At):it.push(At);return it}function B(ke,Ge,Je){var it,Pt;for(it=0;it<Ge.length;it++){if(Pt=Ge[it],Pt!==parseInt(Pt,10))throw new Error("all values in "+Je+" must be integers");if(Pt>=ke.data.length||Pt<-ke.data.length)throw new Error(Je+" must be valid indices for gd.data.");if(Ge.indexOf(Pt,it+1)>-1||Pt>=0&&Ge.indexOf(-ke.data.length+Pt)>-1||Pt<0&&Ge.indexOf(ke.data.length+Pt)>-1)throw new Error("each index in "+Je+" must be unique.")}}function F(ke,Ge,Je){if(!Array.isArray(ke.data))throw new Error("gd.data must be an array.");if(typeof Ge=="undefined")throw new Error("currentIndices is a required argument.");if(Array.isArray(Ge)||(Ge=[Ge]),B(ke,Ge,"currentIndices"),typeof Je!="undefined"&&!Array.isArray(Je)&&(Je=[Je]),typeof Je!="undefined"&&B(ke,Je,"newIndices"),typeof Je!="undefined"&&Ge.length!==Je.length)throw new Error("current and new indices must be of equal length.")}function V(ke,Ge,Je){var it,Pt;if(!Array.isArray(ke.data))throw new Error("gd.data must be an array.");if(typeof Ge=="undefined")throw new Error("traces must be defined.");for(Array.isArray(Ge)||(Ge=[Ge]),it=0;it<Ge.length;it++)if(Pt=Ge[it],typeof Pt!="object"||Array.isArray(Pt)||Pt===null)throw new Error("all values in traces array must be non-array objects");if(typeof Je!="undefined"&&!Array.isArray(Je)&&(Je=[Je]),typeof Je!="undefined"&&Je.length!==Ge.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function Y(ke,Ge,Je,it){var Pt=A.isPlainObject(it);if(!Array.isArray(ke.data))throw new Error("gd.data must be an array");if(!A.isPlainObject(Ge))throw new Error("update must be a key:value object");if(typeof Je=="undefined")throw new Error("indices must be an integer or array of integers");B(ke,Je,"indices");for(var At in Ge){if(!Array.isArray(Ge[At])||Ge[At].length!==Je.length)throw new Error("attribute "+At+" must be an array of length equal to indices array length");if(Pt&&(!(At in it)||!Array.isArray(it[At])||it[At].length!==Ge[At].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function K(ke,Ge,Je,it){var Pt=A.isPlainObject(it),At=[],Ot,Jt,Bt,qt,rr;Array.isArray(Je)||(Je=[Je]),Je=R(Je,ke.data.length-1);for(var er in Ge)for(var pr=0;pr<Je.length;pr++){if(Ot=ke.data[Je[pr]],Bt=e(Ot,er),Jt=Bt.get(),qt=Ge[er][pr],!A.isArrayOrTypedArray(qt))throw new Error("attribute: "+er+" index: "+pr+" must be an array");if(!A.isArrayOrTypedArray(Jt))throw new Error("cannot extend missing or non-array attribute: "+er);if(Jt.constructor!==qt.constructor)throw new Error("cannot extend array with an array of a different type: "+er);rr=Pt?it[er][pr]:it,c(rr)||(rr=-1),At.push({prop:Bt,target:Jt,insert:qt,maxp:Math.floor(rr)})}return At}function J(ke,Ge,Je,it,Pt){Y(ke,Ge,Je,it);for(var At=K(ke,Ge,Je,it),Ot={},Jt={},Bt=0;Bt<At.length;Bt++){var qt=At[Bt].prop,rr=At[Bt].maxp,er=Pt(At[Bt].target,At[Bt].insert,rr);qt.set(er[0]),Array.isArray(Ot[qt.astr])||(Ot[qt.astr]=[]),Ot[qt.astr].push(er[1]),Array.isArray(Jt[qt.astr])||(Jt[qt.astr]=[]),Jt[qt.astr].push(At[Bt].target.length)}return{update:Ot,maxPoints:Jt}}function G(ke,Ge){var Je=new ke.constructor(ke.length+Ge.length);return Je.set(ke),Je.set(Ge,ke.length),Je}function Z(ke,Ge,Je,it){ke=A.getGraphDiv(ke);function Pt(Bt,qt,rr){var er,pr;if(A.isTypedArray(Bt))if(rr<0){var Xr=new Bt.constructor(0),hn=G(Bt,qt);rr<0?(er=hn,pr=Xr):(er=Xr,pr=hn)}else if(er=new Bt.constructor(rr),pr=new Bt.constructor(Bt.length+qt.length-rr),rr===qt.length)er.set(qt),pr.set(Bt);else if(rr<qt.length){var $r=qt.length-rr;er.set(qt.subarray($r)),pr.set(Bt),pr.set(qt.subarray(0,$r),Bt.length)}else{var nt=rr-qt.length,Gt=Bt.length-nt;er.set(Bt.subarray(Gt)),er.set(qt,nt),pr.set(Bt.subarray(0,Gt))}else er=Bt.concat(qt),pr=rr>=0&&rr<er.length?er.splice(0,er.length-rr):[];return[er,pr]}var At=J(ke,Ge,Je,it,Pt),Ot=ae.redraw(ke),Jt=[ke,At.update,Je,At.maxPoints];return n.add(ke,ae.prependTraces,Jt,Z,arguments),Ot}function re(ke,Ge,Je,it){ke=A.getGraphDiv(ke);function Pt(Bt,qt,rr){var er,pr;if(A.isTypedArray(Bt))if(rr<=0){var Xr=new Bt.constructor(0),hn=G(qt,Bt);rr<0?(er=hn,pr=Xr):(er=Xr,pr=hn)}else if(er=new Bt.constructor(rr),pr=new Bt.constructor(Bt.length+qt.length-rr),rr===qt.length)er.set(qt),pr.set(Bt);else if(rr<qt.length){var $r=qt.length-rr;er.set(qt.subarray(0,$r)),pr.set(qt.subarray($r)),pr.set(Bt,$r)}else{var nt=rr-qt.length;er.set(qt),er.set(Bt.subarray(0,nt),qt.length),pr.set(Bt.subarray(nt))}else er=qt.concat(Bt),pr=rr>=0&&rr<er.length?er.splice(rr,er.length):[];return[er,pr]}var At=J(ke,Ge,Je,it,Pt),Ot=ae.redraw(ke),Jt=[ke,At.update,Je,At.maxPoints];return n.add(ke,ae.extendTraces,Jt,re,arguments),Ot}function se(ke,Ge,Je){ke=A.getGraphDiv(ke);var it=[],Pt=ae.deleteTraces,At=se,Ot=[ke,it],Jt=[ke,Ge],Bt,qt;for(V(ke,Ge,Je),Array.isArray(Ge)||(Ge=[Ge]),Ge=Ge.map(function(rr){return A.extendFlat({},rr)}),_.cleanData(Ge),Bt=0;Bt<Ge.length;Bt++)ke.data.push(Ge[Bt]);for(Bt=0;Bt<Ge.length;Bt++)it.push(-Ge.length+Bt);if(typeof Je=="undefined")return qt=ae.redraw(ke),n.add(ke,Pt,Ot,At,Jt),qt;Array.isArray(Je)||(Je=[Je]);try{F(ke,it,Je)}catch(rr){throw ke.data.splice(ke.data.length-Ge.length,Ge.length),rr}return n.startSequence(ke),n.add(ke,Pt,Ot,At,Jt),qt=ae.moveTraces(ke,it,Je),n.stopSequence(ke),qt}function oe(ke,Ge){ke=A.getGraphDiv(ke);var Je=[],it=ae.addTraces,Pt=oe,At=[ke,Je,Ge],Ot=[ke,Ge],Jt,Bt;if(typeof Ge=="undefined")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ge)||(Ge=[Ge]),B(ke,Ge,"indices"),Ge=R(Ge,ke.data.length-1),Ge.sort(A.sorterDes),Jt=0;Jt<Ge.length;Jt+=1)Bt=ke.data.splice(Ge[Jt],1)[0],Je.push(Bt);var qt=ae.redraw(ke);return n.add(ke,it,At,Pt,Ot),qt}function N(ke,Ge,Je){ke=A.getGraphDiv(ke);var it=[],Pt=[],At=N,Ot=N,Jt=[ke,Je,Ge],Bt=[ke,Ge,Je],qt;if(F(ke,Ge,Je),Ge=Array.isArray(Ge)?Ge:[Ge],typeof Je=="undefined")for(Je=[],qt=0;qt<Ge.length;qt++)Je.push(-Ge.length+qt);for(Je=Array.isArray(Je)?Je:[Je],Ge=R(Ge,ke.data.length-1),Je=R(Je,ke.data.length-1),qt=0;qt<ke.data.length;qt++)Ge.indexOf(qt)===-1&&it.push(ke.data[qt]);for(qt=0;qt<Ge.length;qt++)Pt.push({newIndex:Je[qt],trace:ke.data[Ge[qt]]});for(Pt.sort(function(er,pr){return er.newIndex-pr.newIndex}),qt=0;qt<Pt.length;qt+=1)it.splice(Pt[qt].newIndex,0,Pt[qt].trace);ke.data=it;var rr=ae.redraw(ke);return n.add(ke,At,Jt,Ot,Bt),rr}function U(ke,Ge,Je,it){ke=A.getGraphDiv(ke),_.clearPromiseQueue(ke);var Pt={};if(typeof Ge=="string")Pt[Ge]=Je;else if(A.isPlainObject(Ge))Pt=A.extendFlat({},Ge),it===void 0&&(it=Je);else return A.warn("Restyle fail.",Ge,Je,it),Promise.reject();Object.keys(Pt).length&&(ke.changed=!0);var At=_.coerceTraceIndices(ke,it),Ot=te(ke,Pt,At),Jt=Ot.flags;Jt.calc&&(ke.calcdata=void 0),Jt.clearAxisTypes&&_.clearAxisTypes(ke,At,{});var Bt=[];Jt.fullReplot?Bt.push(ae._doPlot):(Bt.push(f.previousPromises),f.supplyDefaults(ke),Jt.markerSize&&(f.doCalcdata(ke),ye(Bt)),Jt.style&&Bt.push(s.doTraceStyle),Jt.colorbars&&Bt.push(s.doColorBars),Bt.push(L)),Bt.push(f.rehover,f.redrag),n.add(ke,U,[ke,Ot.undoit,Ot.traces],U,[ke,Ot.redoit,Ot.traces]);var qt=A.syncOrAsync(Bt,ke);return(!qt||!qt.then)&&(qt=Promise.resolve()),qt.then(function(){return ke.emit("plotly_restyle",Ot.eventData),ke})}function q(ke){return ke===void 0?null:ke}function Q(ke,Ge){return Ge?function(Je,it,Pt){var At=e(Je,it),Ot=At.set;return At.set=function(Jt){var Bt=(Pt||"")+it;W(Bt,At.get(),Jt,ke),Ot(Jt)},At}:e}function W(ke,Ge,Je,it){if(Array.isArray(Ge)||Array.isArray(Je))for(var Pt=Array.isArray(Ge)?Ge:[],At=Array.isArray(Je)?Je:[],Ot=Math.max(Pt.length,At.length),Jt=0;Jt<Ot;Jt++)W(ke+"["+Jt+"]",Pt[Jt],At[Jt],it);else if(A.isPlainObject(Ge)||A.isPlainObject(Je)){var Bt=A.isPlainObject(Ge)?Ge:{},qt=A.isPlainObject(Je)?Je:{},rr=A.extendFlat({},Bt,qt);for(var er in rr)W(ke+"."+er,Bt[er],qt[er],it)}else it[ke]===void 0&&(it[ke]=q(Ge))}function X(ke,Ge,Je){for(var it in Je){var Pt=e(ke,it);W(it,Pt.get(),Je[it],Ge)}}function te(ke,Ge,Je){var it=ke._fullLayout,Pt=ke._fullData,At=ke.data,Ot=it._guiEditing,Jt=Q(it._preGUI,Ot),Bt=A.extendDeepAll({},Ge),qt;ee(Ge);var rr=w.traceFlags(),er={},pr={},Xr;function hn(){return Je.map(function(){})}function $r(jt){var sr=o.id2name(jt);Xr.indexOf(sr)===-1&&Xr.push(sr)}function nt(jt){return"LAYOUT"+jt+".autorange"}function Gt(jt){return"LAYOUT"+jt+".range"}function Kt(jt){for(var sr=jt;sr<Pt.length;sr++)if(Pt[sr]._input===At[jt])return Pt[sr]}function Ht(jt,sr,Ir){if(Array.isArray(jt)){jt.forEach(function(Nr){Ht(Nr,sr,Ir)});return}if(!(jt in Ge||_.hasParent(Ge,jt))){var Zr;if(jt.substr(0,6)==="LAYOUT")Zr=Jt(ke.layout,jt.replace("LAYOUT",""));else{var Lr=Je[Ir],br=it._tracePreGUI[Kt(Lr)._fullInput.uid];Zr=Q(br,Ot)(At[Lr],jt)}jt in pr||(pr[jt]=hn()),pr[jt][Ir]===void 0&&(pr[jt][Ir]=q(Zr.get())),sr!==void 0&&Zr.set(sr)}}function _r(jt){return function(sr){return Pt[sr][jt]}}function tt(jt){return function(sr,Ir){return sr===!1?Pt[Je[Ir]][jt]:null}}for(var je in Ge){if(_.hasParent(Ge,je))throw new Error("cannot set "+je+" and a parent attribute simultaneously");var st=Ge[je],ft,Me,Se,Ke,Xe,ot;if((je==="autobinx"||je==="autobiny")&&(je=je.charAt(je.length-1)+"bins",Array.isArray(st)?st=st.map(tt(je)):st===!1?st=Je.map(_r(je)):st=null),er[je]=st,je.substr(0,6)==="LAYOUT"){Se=Jt(ke.layout,je.replace("LAYOUT","")),pr[je]=[q(Se.get())],Se.set(Array.isArray(st)?st[0]:st),rr.calc=!0;continue}for(pr[je]=hn(),qt=0;qt<Je.length;qt++){ft=At[Je[qt]],Me=Kt(Je[qt]);var pt=it._tracePreGUI[Me._fullInput.uid];if(Se=Q(pt,Ot)(ft,je),Ke=Se.get(),Xe=Array.isArray(st)?st[qt%st.length]:st,Xe!==void 0){var vt=Se.parts[Se.parts.length-1],Ct=je.substr(0,je.length-vt.length-1),St=Ct?Ct+".":"",Nt=Ct?e(Me,Ct).get():Me;if(ot=r.getTraceValObject(Me,Se.parts),ot&&ot.impliedEdits&&Xe!==null)for(var ir in ot.impliedEdits)Ht(A.relativeAttr(je,ir),ot.impliedEdits[ir],qt);else if((vt==="thicknessmode"||vt==="lenmode")&&Ke!==Xe&&(Xe==="fraction"||Xe==="pixels")&&Nt){var lr=it._size,Yr=Nt.orient,Pr=Yr==="top"||Yr==="bottom";if(vt==="thicknessmode"){var wr=Pr?lr.h:lr.w;Ht(St+"thickness",Nt.thickness*(Xe==="fraction"?1/wr:wr),qt)}else{var Jr=Pr?lr.w:lr.h;Ht(St+"len",Nt.len*(Xe==="fraction"?1/Jr:Jr),qt)}}else if(je==="type"&&(Xe==="pie"!=(Ke==="pie")||Xe==="funnelarea"!=(Ke==="funnelarea"))){var gr="x",mr="y";(Xe==="bar"||Ke==="bar")&&ft.orientation==="h"&&(gr="y",mr="x"),A.swapAttrs(ft,["?","?src"],"labels",gr),A.swapAttrs(ft,["d?","?0"],"label",gr),A.swapAttrs(ft,["?","?src"],"values",mr),Ke==="pie"||Ke==="funnelarea"?(e(ft,"marker.color").set(e(ft,"marker.colors").get()),it._pielayer.selectAll("g.trace").remove()):t.traceIs(ft,"cartesian")&&e(ft,"marker.colors").set(e(ft,"marker.color").get())}pr[je][qt]=q(Ke);var Ur=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Ur.indexOf(je)!==-1){if(je==="orientation"){Se.set(Xe);var Hr=ft.x&&!ft.y?"h":"v";if((Se.get()||Hr)===Me.orientation)continue}else je==="orientationaxes"&&(ft.orientation={v:"h",h:"v"}[Me.orientation]);_.swapXYData(ft),rr.calc=rr.clearAxisTypes=!0}else f.dataArrayContainers.indexOf(Se.parts[0])!==-1?(_.manageArrayContainers(Se,Xe,pr),rr.calc=!0):(ot?ot.arrayOk&&!t.traceIs(Me,"regl")&&(A.isArrayOrTypedArray(Xe)||A.isArrayOrTypedArray(Ke))?rr.calc=!0:w.update(rr,ot):rr.calc=!0,Se.set(Xe))}}if(["swapxyaxes","orientationaxes"].indexOf(je)!==-1&&o.swap(ke,Je),je==="orientationaxes"){var Tr=e(ke.layout,"hovermode"),et=Tr.get();et==="x"?Tr.set("y"):et==="y"?Tr.set("x"):et==="x unified"?Tr.set("y unified"):et==="y unified"&&Tr.set("x unified")}if(["orientation","type"].indexOf(je)!==-1){for(Xr=[],qt=0;qt<Je.length;qt++){var Lt=At[Je[qt]];t.traceIs(Lt,"cartesian")&&($r(Lt.xaxis||"x"),$r(Lt.yaxis||"y"))}Ht(Xr.map(nt),!0,0),Ht(Xr.map(Gt),[0,1],0)}}return(rr.calc||rr.plot)&&(rr.fullReplot=!0),{flags:rr,undoit:pr,redoit:er,traces:Je,eventData:A.extendDeepNoArrays([],[Bt,Je])}}function ee(ke){var Ge=A.counterRegex("axis",".title",!1,!1),Je=/colorbar\.title$/,it=Object.keys(ke),Pt,At,Ot;for(Pt=0;Pt<it.length;Pt++)At=it[Pt],Ot=ke[At],(At==="title"||Ge.test(At)||Je.test(At))&&(typeof Ot=="string"||typeof Ot=="number")?Jt(At,At.replace("title","title.text")):At.indexOf("titlefont")>-1&&At.indexOf("grouptitlefont")===-1?Jt(At,At.replace("titlefont","title.font")):At.indexOf("titleposition")>-1?Jt(At,At.replace("titleposition","title.position")):At.indexOf("titleside")>-1?Jt(At,At.replace("titleside","title.side")):At.indexOf("titleoffset")>-1&&Jt(At,At.replace("titleoffset","title.offset"));function Jt(Bt,qt){ke[qt]=ke[Bt],delete ke[Bt]}}function ie(ke,Ge,Je){ke=A.getGraphDiv(ke),_.clearPromiseQueue(ke);var it={};if(typeof Ge=="string")it[Ge]=Je;else if(A.isPlainObject(Ge))it=A.extendFlat({},Ge);else return A.warn("Relayout fail.",Ge,Je),Promise.reject();Object.keys(it).length&&(ke.changed=!0);var Pt=Te(ke,it),At=Pt.flags;At.calc&&(ke.calcdata=void 0);var Ot=[f.previousPromises];At.layoutReplot?Ot.push(s.layoutReplot):Object.keys(it).length&&(le(ke,At,Pt)||f.supplyDefaults(ke),At.legend&&Ot.push(s.doLegend),At.layoutstyle&&Ot.push(s.layoutStyles),At.axrange&&ye(Ot,Pt.rangesAltered),At.ticks&&Ot.push(s.doTicksRelayout),At.modebar&&Ot.push(s.doModeBar),At.camera&&Ot.push(s.doCamera),At.colorbars&&Ot.push(s.doColorBars),Ot.push(L)),Ot.push(f.rehover,f.redrag),n.add(ke,ie,[ke,Pt.undoit],ie,[ke,Pt.redoit]);var Jt=A.syncOrAsync(Ot,ke);return(!Jt||!Jt.then)&&(Jt=Promise.resolve(ke)),Jt.then(function(){return ke.emit("plotly_relayout",Pt.eventData),ke})}function le(ke,Ge,Je){var it=ke._fullLayout;if(!Ge.axrange)return!1;for(var Pt in Ge)if(Pt!=="axrange"&&Ge[Pt])return!1;for(var At in Je.rangesAltered){var Ot=o.id2name(At),Jt=ke.layout[Ot],Bt=it[Ot];if(Bt.autorange=Jt.autorange,Jt.range&&(Bt.range=Jt.range.slice()),Bt.cleanRange(),Bt._matchGroup){for(var qt in Bt._matchGroup)if(qt!==At){var rr=it[o.id2name(qt)];rr.autorange=Bt.autorange,rr.range=Bt.range.slice(),rr._input.range=Bt.range.slice()}}}return!0}function ye(ke,Ge){var Je=Ge?function(it){var Pt=[],At=!0;for(var Ot in Ge){var Jt=o.getFromId(it,Ot);if(Pt.push(Ot),(Jt.ticklabelposition||"").indexOf("inside")!==-1&&Jt._anchorAxis&&Pt.push(Jt._anchorAxis._id),Jt._matchGroup)for(var Bt in Jt._matchGroup)Ge[Bt]||Pt.push(Bt);Jt.automargin&&(At=!1)}return o.draw(it,Pt,{skipTitle:At})}:function(it){return o.draw(it,"redraw")};ke.push(v,s.doAutoRangeAndConstraints,Je,s.drawData,s.finalDraw)}var ue=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,pe=/^[xyz]axis[0-9]*\.autorange$/,ge=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Te(ke,Ge){var Je=ke.layout,it=ke._fullLayout,Pt=it._guiEditing,At=Q(it._preGUI,Pt),Ot=Object.keys(Ge),Jt=o.list(ke),Bt=A.extendDeepAll({},Ge),qt={},rr,er,pr;for(ee(Ge),Ot=Object.keys(Ge),er=0;er<Ot.length;er++)if(Ot[er].indexOf("allaxes")===0){for(pr=0;pr<Jt.length;pr++){var Xr=Jt[pr]._id.substr(1),hn=Xr.indexOf("scene")!==-1?Xr+".":"",$r=Ot[er].replace("allaxes",hn+Jt[pr]._name);Ge[$r]||(Ge[$r]=Ge[Ot[er]])}delete Ge[Ot[er]]}var nt=w.layoutFlags(),Gt={},Kt={};function Ht(Lr,br){if(Array.isArray(Lr)){Lr.forEach(function(kn){Ht(kn,br)});return}if(!(Lr in Ge||_.hasParent(Ge,Lr))){var Nr=At(Je,Lr);Lr in Kt||(Kt[Lr]=q(Nr.get())),br!==void 0&&Nr.set(br)}}var _r={},tt;function je(Lr){var br=o.name2id(Lr.split(".")[0]);return _r[br]=1,br}for(var st in Ge){if(_.hasParent(Ge,st))throw new Error("cannot set "+st+" and a parent attribute simultaneously");for(var ft=At(Je,st),Me=Ge[st],Se=ft.parts.length,Ke=Se-1;Ke>0&&typeof ft.parts[Ke]!="string";)Ke--;var Xe=ft.parts[Ke],ot=ft.parts[Ke-1]+"."+Xe,pt=ft.parts.slice(0,Ke).join("."),vt=e(ke.layout,pt).get(),Ct=e(it,pt).get(),St=ft.get();if(Me!==void 0){Gt[st]=Me,Kt[st]=Xe==="reverse"?Me:q(St);var Nt=r.getLayoutValObject(it,ft.parts);if(Nt&&Nt.impliedEdits&&Me!==null)for(var ir in Nt.impliedEdits)Ht(A.relativeAttr(st,ir),Nt.impliedEdits[ir]);if(["width","height"].indexOf(st)!==-1)if(Me){Ht("autosize",null);var lr=st==="height"?"width":"height";Ht(lr,it[lr])}else it[st]=ke._initialAutoSize[st];else if(st==="autosize")Ht("width",Me?null:it.width),Ht("height",Me?null:it.height);else if(ot.match(ue))je(ot),e(it,pt+"._inputRange").set(null);else if(ot.match(pe)){je(ot),e(it,pt+"._inputRange").set(null);var Yr=e(it,pt).get();Yr._inputDomain&&(Yr._input.domain=Yr._inputDomain.slice())}else ot.match(ge)&&e(it,pt+"._inputDomain").set(null);if(Xe==="type"){tt=vt;var Pr=Ct.type==="linear"&&Me==="log",wr=Ct.type==="log"&&Me==="linear";if(Pr||wr){if(!tt||!tt.range)Ht(pt+".autorange",!0);else if(Ct.autorange)Pr&&(tt.range=tt.range[1]>tt.range[0]?[1,2]:[2,1]);else{var Jr=tt.range[0],gr=tt.range[1];Pr?(Jr<=0&&gr<=0&&Ht(pt+".autorange",!0),Jr<=0?Jr=gr/1e6:gr<=0&&(gr=Jr/1e6),Ht(pt+".range[0]",Math.log(Jr)/Math.LN10),Ht(pt+".range[1]",Math.log(gr)/Math.LN10)):(Ht(pt+".range[0]",Math.pow(10,Jr)),Ht(pt+".range[1]",Math.pow(10,gr)))}Array.isArray(it._subplots.polar)&&it._subplots.polar.length&&it[ft.parts[0]]&&ft.parts[1]==="radialaxis"&&delete it[ft.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(ke,Ct,Me,Ht),t.getComponentMethod("images","convertCoords")(ke,Ct,Me,Ht)}else Ht(pt+".autorange",!0),Ht(pt+".range",null);e(it,pt+"._inputRange").set(null)}else if(Xe.match(b)){var mr=e(it,st).get(),Ur=(Me||{}).type;(!Ur||Ur==="-")&&(Ur="linear"),t.getComponentMethod("annotations","convertCoords")(ke,mr,Ur,Ht),t.getComponentMethod("images","convertCoords")(ke,mr,Ur,Ht)}var Hr=l.containerArrayMatch(st);if(Hr){rr=Hr.array,er=Hr.index;var Tr=Hr.property,et=Nt||{editType:"calc"};er!==""&&Tr===""&&(l.isAddVal(Me)?Kt[st]=null:l.isRemoveVal(Me)?Kt[st]=(e(Je,rr).get()||[])[er]:A.warn("unrecognized full object value",Ge)),w.update(nt,et),qt[rr]||(qt[rr]={});var Lt=qt[rr][er];Lt||(Lt=qt[rr][er]={}),Lt[Tr]=Me,delete Ge[st]}else Xe==="reverse"?(vt.range?vt.range.reverse():(Ht(pt+".autorange",!0),vt.range=[1,0]),Ct.autorange?nt.calc=!0:nt.plot=!0):(st==="dragmode"&&(Me===!1&&St!==!1||Me!==!1&&St===!1)||it._has("scatter-like")&&it._has("regl")&&st==="dragmode"&&(Me==="lasso"||Me==="select")&&!(St==="lasso"||St==="select")||it._has("gl2d")?nt.plot=!0:Nt?w.update(nt,Nt):nt.calc=!0,ft.set(Me))}}for(rr in qt){var jt=l.applyContainerArrayChanges(ke,At(Je,rr),qt[rr],nt,At);jt||(nt.plot=!0)}for(var sr in _r){tt=o.getFromId(ke,sr);var Ir=tt&&tt._constraintGroup;if(Ir){nt.calc=!0;for(var Zr in Ir)_r[Zr]||(o.getFromId(ke,Zr)._constraintShrinkable=!0)}}return(_e(ke)||Ge.height||Ge.width)&&(nt.plot=!0),(nt.plot||nt.calc)&&(nt.layoutReplot=!0),{flags:nt,rangesAltered:_r,undoit:Kt,redoit:Gt,eventData:Bt}}function _e(ke){var Ge=ke._fullLayout,Je=Ge.width,it=Ge.height;return ke.layout.autosize&&f.plotAutoSize(ke,ke.layout,Ge),Ge.width!==Je||Ge.height!==it}function De(ke,Ge,Je,it){ke=A.getGraphDiv(ke),_.clearPromiseQueue(ke),A.isPlainObject(Ge)||(Ge={}),A.isPlainObject(Je)||(Je={}),Object.keys(Ge).length&&(ke.changed=!0),Object.keys(Je).length&&(ke.changed=!0);var Pt=_.coerceTraceIndices(ke,it),At=te(ke,A.extendFlat({},Ge),Pt),Ot=At.flags,Jt=Te(ke,A.extendFlat({},Je)),Bt=Jt.flags;(Ot.calc||Bt.calc)&&(ke.calcdata=void 0),Ot.clearAxisTypes&&_.clearAxisTypes(ke,Pt,Je);var qt=[];Bt.layoutReplot?qt.push(s.layoutReplot):Ot.fullReplot?qt.push(ae._doPlot):(qt.push(f.previousPromises),le(ke,Bt,Jt)||f.supplyDefaults(ke),Ot.style&&qt.push(s.doTraceStyle),(Ot.colorbars||Bt.colorbars)&&qt.push(s.doColorBars),Bt.legend&&qt.push(s.doLegend),Bt.layoutstyle&&qt.push(s.layoutStyles),Bt.axrange&&ye(qt,Jt.rangesAltered),Bt.ticks&&qt.push(s.doTicksRelayout),Bt.modebar&&qt.push(s.doModeBar),Bt.camera&&qt.push(s.doCamera),qt.push(L)),qt.push(f.rehover,f.redrag),n.add(ke,De,[ke,At.undoit,Jt.undoit,At.traces],De,[ke,At.redoit,Jt.redoit,At.traces]);var rr=A.syncOrAsync(qt,ke);return(!rr||!rr.then)&&(rr=Promise.resolve(ke)),rr.then(function(){return ke.emit("plotly_update",{data:At.eventData,layout:Jt.eventData}),ke})}function Oe(ke){return function(Je){Je._fullLayout._guiEditing=!0;var it=ke.apply(null,arguments);return Je._fullLayout._guiEditing=!1,it}}var Ue=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],xe=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Pe(ke,Ge){for(var Je=0;Je<Ge.length;Je++){var it=Ge[Je],Pt=ke.match(it.pattern);if(Pt){var At=Pt[1]||"";return{head:At,tail:ke.substr(At.length+1),attr:it.attr}}}}function Ve(ke,Ge){var Je=e(Ge,ke).get();if(Je!==void 0)return Je;var it=ke.split(".");for(it.pop();it.length>1;)if(it.pop(),Je=e(Ge,it.join(".")+".uirevision").get(),Je!==void 0)return Je;return Ge.uirevision}function Qe(ke,Ge){for(var Je=0;Je<Ge.length;Je++)if(Ge[Je]._fullInput.uid===ke)return Je;return-1}function Fe(ke,Ge,Je){for(var it=0;it<Ge.length;it++)if(Ge[it].uid===ke)return it;return!Ge[Je]||Ge[Je].uid?-1:Je}function Le(ke,Ge){var Je=A.isPlainObject(ke),it=Array.isArray(ke);return Je||it?(Je&&A.isPlainObject(Ge)||it&&Array.isArray(Ge))&&JSON.stringify(ke)===JSON.stringify(Ge):ke===Ge}function Ne(ke,Ge,Je,it){var Pt=it._preGUI,At,Ot,Jt,Bt,qt,rr,er,pr,Xr,hn,$r=[],nt={},Gt={};for(At in Pt){if(qt=Pe(At,Ue),qt){if(Xr=qt.head,hn=qt.tail,Ot=qt.attr||Xr+".uirevision",Jt=e(it,Ot).get(),Bt=Jt&&Ve(Ot,Ge),Bt&&Bt===Jt){if(rr=Pt[At],rr===null&&(rr=void 0),er=e(Ge,At),pr=er.get(),Le(pr,rr)){pr===void 0&&hn==="autorange"&&$r.push(Xr),er.set(q(e(it,At).get()));continue}else if(hn==="autorange"||hn.substr(0,6)==="range["){var Kt=Pt[Xr+".range[0]"],Ht=Pt[Xr+".range[1]"],_r=Pt[Xr+".autorange"];if(_r||_r===null&&Kt===null&&Ht===null){if(!(Xr in nt)){var tt=e(Ge,Xr).get();nt[Xr]=tt&&(tt.autorange||tt.autorange!==!1&&(!tt.range||tt.range.length!==2))}if(nt[Xr]){er.set(q(e(it,At).get()));continue}}}}}else A.warn("unrecognized GUI edit: "+At);delete Pt[At],qt&&qt.tail.substr(0,6)==="range["&&(Gt[qt.head]=1)}for(var je=0;je<$r.length;je++){var st=$r[je];if(Gt[st]){var ft=e(Ge,st).get();ft&&delete ft.autorange}}var Me=it._tracePreGUI;for(var Se in Me){var Ke=Me[Se],Xe=null,ot;for(At in Ke){if(!Xe){var pt=Qe(Se,Je);if(pt<0){delete Me[Se];break}var vt=Je[pt];ot=vt._fullInput;var Ct=Fe(Se,ke,ot.index);if(Ct<0){delete Me[Se];break}Xe=ke[Ct]}if(qt=Pe(At,xe),qt){if(qt.attr?(Jt=e(it,qt.attr).get(),Bt=Jt&&Ve(qt.attr,Ge)):(Jt=ot.uirevision,Bt=Xe.uirevision,Bt===void 0&&(Bt=Ge.uirevision)),Bt&&Bt===Jt&&(rr=Ke[At],rr===null&&(rr=void 0),er=e(Xe,At),pr=er.get(),Le(pr,rr))){er.set(q(e(ot,At).get()));continue}}else A.warn("unrecognized GUI edit: "+At+" in trace uid "+Se);delete Ke[At]}}}function dt(ke,Ge,Je,it){var Pt,At;function Ot(){return ae.addFrames(ke,Pt)}ke=A.getGraphDiv(ke),_.clearPromiseQueue(ke);var Jt=ke._fullData,Bt=ke._fullLayout;if(!A.isPlotDiv(ke)||!Jt||!Bt)At=ae.newPlot(ke,Ge,Je,it);else{if(A.isPlainObject(Ge)){var qt=Ge;Ge=qt.data,Je=qt.layout,it=qt.config,Pt=qt.frames}var rr=!1;if(it){var er=A.extendDeep({},ke._context);ke._context=void 0,z(ke,it),rr=zt(er,ke._context)}ke.data=Ge||[],_.cleanData(ke.data),ke.layout=Je||{},_.cleanLayout(ke.layout),Ne(ke.data,ke.layout,Jt,Bt),f.supplyDefaults(ke,{skipUpdateCalc:!0});var pr=ke._fullData,Xr=ke._fullLayout,hn=Xr.datarevision===void 0,$r=Xr.transition,nt=Xt(ke,Bt,Xr,hn,$r),Gt=nt.newDataRevision,Kt=Dt(ke,Jt,pr,hn,$r,Gt);if(_e(ke)&&(nt.layoutReplot=!0),Kt.calc||nt.calc){ke.calcdata=void 0;for(var Ht=Object.getOwnPropertyNames(Xr),_r=0;_r<Ht.length;_r++){var tt=Ht[_r],je=tt.substring(0,5);if(je==="xaxis"||je==="yaxis"){var st=Xr[tt]._emptyCategories;st&&st()}}}else f.supplyDefaultsUpdateCalc(ke.calcdata,pr);var ft=[];if(Pt&&(ke._transitionData={},f.createTransitionData(ke),ft.push(Ot)),Xr.transition&&!rr&&(Kt.anim||nt.anim))nt.ticks&&ft.push(s.doTicksRelayout),f.doCalcdata(ke),s.doAutoRangeAndConstraints(ke),ft.push(function(){return f.transitionFromReact(ke,Kt,nt,Bt)});else if(Kt.fullReplot||nt.layoutReplot||rr)ke._fullLayout._skipDefaults=!0,ft.push(ae._doPlot);else{for(var Me in nt.arrays){var Se=nt.arrays[Me];if(Se.length){var Ke=t.getComponentMethod(Me,"drawOne");if(Ke!==A.noop)for(var Xe=0;Xe<Se.length;Xe++)Ke(ke,Se[Xe]);else{var ot=t.getComponentMethod(Me,"draw");if(ot===A.noop)throw new Error("cannot draw components: "+Me);ot(ke)}}}ft.push(f.previousPromises),Kt.style&&ft.push(s.doTraceStyle),(Kt.colorbars||nt.colorbars)&&ft.push(s.doColorBars),nt.legend&&ft.push(s.doLegend),nt.layoutstyle&&ft.push(s.layoutStyles),nt.axrange&&ye(ft),nt.ticks&&ft.push(s.doTicksRelayout),nt.modebar&&ft.push(s.doModeBar),nt.camera&&ft.push(s.doCamera),ft.push(L)}ft.push(f.rehover,f.redrag),At=A.syncOrAsync(ft,ke),(!At||!At.then)&&(At=Promise.resolve(ke))}return At.then(function(){return ke.emit("plotly_react",{data:Ge,layout:Je}),ke})}function Dt(ke,Ge,Je,it,Pt,At){var Ot=Ge.length===Je.length;if(!Pt&&!Ot)return{fullReplot:!0,calc:!0};var Jt=w.traceFlags();Jt.arrays={},Jt.nChanges=0,Jt.nChangesAnim=0;var Bt,qt;function rr(Xr){var hn=r.getTraceValObject(qt,Xr);return!qt._module.animatable&&hn.anim&&(hn.anim=!1),hn}var er={getValObject:rr,flags:Jt,immutable:it,transition:Pt,newDataRevision:At,gd:ke},pr={};for(Bt=0;Bt<Ge.length;Bt++)if(Je[Bt]){if(qt=Je[Bt]._fullInput,f.hasMakesDataTransform(qt)&&(qt=Je[Bt]),pr[qt.uid])continue;pr[qt.uid]=1,Tt(Ge[Bt]._fullInput,qt,[],er)}return(Jt.calc||Jt.plot)&&(Jt.fullReplot=!0),Pt&&Jt.nChanges&&Jt.nChangesAnim&&(Jt.anim=Jt.nChanges===Jt.nChangesAnim&&Ot?"all":"some"),Jt}function Xt(ke,Ge,Je,it,Pt){var At=w.layoutFlags();At.arrays={},At.rangesAltered={},At.nChanges=0,At.nChangesAnim=0;function Ot(Bt){return r.getLayoutValObject(Je,Bt)}var Jt={getValObject:Ot,flags:At,immutable:it,transition:Pt,gd:ke};return Tt(Ge,Je,[],Jt),(At.plot||At.calc)&&(At.layoutReplot=!0),Pt&&At.nChanges&&At.nChangesAnim&&(At.anim=At.nChanges===At.nChangesAnim?"all":"some"),At}function Tt(ke,Ge,Je,it){var Pt,At,Ot,Jt=it.getValObject,Bt=it.flags,qt=it.immutable,rr=it.inArray,er=it.arrayIndex;function pr(){var pt=Pt.editType;if(rr&&pt.indexOf("arraydraw")!==-1){A.pushUnique(Bt.arrays[rr],er);return}w.update(Bt,Pt),pt!=="none"&&Bt.nChanges++,it.transition&&Pt.anim&&Bt.nChangesAnim++,(ue.test(Ot)||pe.test(Ot))&&(Bt.rangesAltered[Je[0]]=1),ge.test(Ot)&&e(Ge,"_inputDomain").set(null),At==="datarevision"&&(Bt.newDataRevision=1)}function Xr(pt){return pt.valType==="data_array"||pt.arrayOk}for(At in ke){if(Bt.calc&&!it.transition)return;var hn=ke[At],$r=Ge[At],nt=Je.concat(At);if(Ot=nt.join("."),!(At.charAt(0)==="_"||typeof hn=="function"||hn===$r)){if((At==="tick0"||At==="dtick")&&Je[0]!=="geo"){var Gt=Ge.tickmode;if(Gt==="auto"||Gt==="array"||!Gt)continue}if(!(At==="range"&&Ge.autorange)&&!((At==="zmin"||At==="zmax")&&Ge.type==="contourcarpet")&&(Pt=Jt(nt),!!Pt&&!(Pt._compareAsJSON&&JSON.stringify(hn)===JSON.stringify($r)))){var Kt=Pt.valType,Ht,_r=Xr(Pt),tt=Array.isArray(hn),je=Array.isArray($r);if(tt&&je){var st="_input_"+At,ft=ke[st],Me=Ge[st];if(Array.isArray(ft)&&ft===Me)continue}if($r===void 0)_r&&tt?Bt.calc=!0:pr();else if(Pt._isLinkedToArray){var Se=[],Ke=!1;rr||(Bt.arrays[At]=Se);var Xe=Math.min(hn.length,$r.length),ot=Math.max(hn.length,$r.length);if(Xe!==ot)if(Pt.editType==="arraydraw")Ke=!0;else{pr();continue}for(Ht=0;Ht<Xe;Ht++)Tt(hn[Ht],$r[Ht],nt.concat(Ht),A.extendFlat({inArray:At,arrayIndex:Ht},it));if(Ke)for(Ht=Xe;Ht<ot;Ht++)Se.push(Ht)}else!Kt&&A.isPlainObject(hn)?Tt(hn,$r,nt,it):_r?tt&&je?(qt&&(Bt.calc=!0),(qt||it.newDataRevision)&&pr()):tt!==je?Bt.calc=!0:pr():tt&&je?(hn.length!==$r.length||String(hn)!==String($r))&&pr():pr()}}}for(At in Ge)if(!(At in ke||At.charAt(0)==="_"||typeof Ge[At]=="function"))if(Pt=Jt(Je.concat(At)),Xr(Pt)&&Array.isArray(Ge[At])){Bt.calc=!0;return}else pr()}function zt(ke,Ge){var Je;for(Je in ke)if(Je.charAt(0)!=="_"){var it=ke[Je],Pt=Ge[Je];if(it!==Pt)if(A.isPlainObject(it)&&A.isPlainObject(Pt)){if(zt(it,Pt))return!0}else if(Array.isArray(it)&&Array.isArray(Pt)){if(it.length!==Pt.length)return!0;for(var At=0;At<it.length;At++)if(it[At]!==Pt[At])if(A.isPlainObject(it[At])&&A.isPlainObject(Pt[At])){if(zt(it[At],Pt[At]))return!0}else return!0}else return!0}}function Ut(ke,Ge,Je){if(ke=A.getGraphDiv(ke),!A.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var it=ke._transitionData;it._frameQueue||(it._frameQueue=[]),Je=f.supplyAnimationDefaults(Je);var Pt=Je.transition,At=Je.frame;it._frameWaitingCnt===void 0&&(it._frameWaitingCnt=0);function Ot(qt){return Array.isArray(Pt)?qt>=Pt.length?Pt[0]:Pt[qt]:Pt}function Jt(qt){return Array.isArray(At)?qt>=At.length?At[0]:At[qt]:At}function Bt(qt,rr){var er=0;return function(){if(qt&&++er===rr)return qt()}}return new Promise(function(qt,rr){function er(){if(it._frameQueue.length!==0){for(;it._frameQueue.length;){var Xe=it._frameQueue.pop();Xe.onInterrupt&&Xe.onInterrupt()}ke.emit("plotly_animationinterrupted",[])}}function pr(Xe){if(Xe.length!==0){for(var ot=0;ot<Xe.length;ot++){var pt;Xe[ot].type==="byname"?pt=f.computeFrame(ke,Xe[ot].name):pt=Xe[ot].data;var vt=Jt(ot),Ct=Ot(ot);Ct.duration=Math.min(Ct.duration,vt.duration);var St={frame:pt,name:Xe[ot].name,frameOpts:vt,transitionOpts:Ct};ot===Xe.length-1&&(St.onComplete=Bt(qt,2),St.onInterrupt=rr),it._frameQueue.push(St)}Je.mode==="immediate"&&(it._lastFrameAt=-1/0),it._animationRaf||$r()}}function Xr(){ke.emit("plotly_animated"),window.cancelAnimationFrame(it._animationRaf),it._animationRaf=null}function hn(){it._currentFrame&&it._currentFrame.onComplete&&it._currentFrame.onComplete();var Xe=it._currentFrame=it._frameQueue.shift();if(Xe){var ot=Xe.name?Xe.name.toString():null;ke._fullLayout._currentFrame=ot,it._lastFrameAt=Date.now(),it._timeToNext=Xe.frameOpts.duration,f.transition(ke,Xe.frame.data,Xe.frame.layout,_.coerceTraceIndices(ke,Xe.frame.traces),Xe.frameOpts,Xe.transitionOpts).then(function(){Xe.onComplete&&Xe.onComplete()}),ke.emit("plotly_animatingframe",{name:ot,frame:Xe.frame,animation:{frame:Xe.frameOpts,transition:Xe.transitionOpts}})}else Xr()}function $r(){ke.emit("plotly_animating"),it._lastFrameAt=-1/0,it._timeToNext=0,it._runningTransitions=0,it._currentFrame=null;var Xe=function(){it._animationRaf=window.requestAnimationFrame(Xe),Date.now()-it._lastFrameAt>it._timeToNext&&hn()};Xe()}var nt=0;function Gt(Xe){return Array.isArray(Pt)?nt>=Pt.length?Xe.transitionOpts=Pt[nt]:Xe.transitionOpts=Pt[0]:Xe.transitionOpts=Pt,nt++,Xe}var Kt,Ht,_r=[],tt=Ge==null,je=Array.isArray(Ge),st=!tt&&!je&&A.isPlainObject(Ge);if(st)_r.push({type:"object",data:Gt(A.extendFlat({},Ge))});else if(tt||["string","number"].indexOf(typeof Ge)!==-1)for(Kt=0;Kt<it._frames.length;Kt++)Ht=it._frames[Kt],!!Ht&&(tt||String(Ht.group)===String(Ge))&&_r.push({type:"byname",name:String(Ht.name),data:Gt({name:Ht.name})});else if(je)for(Kt=0;Kt<Ge.length;Kt++){var ft=Ge[Kt];["number","string"].indexOf(typeof ft)!==-1?(ft=String(ft),_r.push({type:"byname",name:ft,data:Gt({name:ft})})):A.isPlainObject(ft)&&_r.push({type:"object",data:Gt(A.extendFlat({},ft))})}for(Kt=0;Kt<_r.length;Kt++)if(Ht=_r[Kt],Ht.type==="byname"&&!it._frameHash[Ht.data.name]){A.warn('animate failure: frame not found: "'+Ht.data.name+'"'),rr();return}["next","immediate"].indexOf(Je.mode)!==-1&&er(),Je.direction==="reverse"&&_r.reverse();var Me=ke._fullLayout._currentFrame;if(Me&&Je.fromcurrent){var Se=-1;for(Kt=0;Kt<_r.length;Kt++)if(Ht=_r[Kt],Ht.type==="byname"&&Ht.name===Me){Se=Kt;break}if(Se>0&&Se<_r.length-1){var Ke=[];for(Kt=0;Kt<_r.length;Kt++)Ht=_r[Kt],(_r[Kt].type!=="byname"||Kt>Se)&&Ke.push(Ht);_r=Ke}}_r.length>0?pr(_r):(ke.emit("plotly_animated"),qt())})}function Et(ke,Ge,Je){if(ke=A.getGraphDiv(ke),Ge==null)return Promise.resolve();if(!A.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var it,Pt,At,Ot,Jt=ke._transitionData._frames,Bt=ke._transitionData._frameHash;if(!Array.isArray(Ge))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ge);var qt=Jt.length+Ge.length*2,rr=[],er={};for(it=Ge.length-1;it>=0;it--)if(!!A.isPlainObject(Ge[it])){var pr=Ge[it].name,Xr=(Bt[pr]||er[pr]||{}).name,hn=Ge[it].name,$r=Bt[Xr]||er[Xr];Xr&&hn&&typeof hn=="number"&&$r&&h<m&&(h++,A.warn('addFrames: overwriting frame "'+(Bt[Xr]||er[Xr]).name+'" with a frame whose name of type "number" also equates to "'+Xr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),h===m&&A.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),er[pr]={name:pr},rr.push({frame:f.supplyFrameDefaults(Ge[it]),index:Je&&Je[it]!==void 0&&Je[it]!==null?Je[it]:qt+it})}rr.sort(function(st,ft){return st.index>ft.index?-1:st.index<ft.index?1:0});var nt=[],Gt=[],Kt=Jt.length;for(it=rr.length-1;it>=0;it--){if(Pt=rr[it].frame,typeof Pt.name=="number"&&A.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Pt.name)for(;Bt[Pt.name="frame "+ke._transitionData._counter++];);if(Bt[Pt.name]){for(At=0;At<Jt.length&&(Jt[At]||{}).name!==Pt.name;At++);nt.push({type:"replace",index:At,value:Pt}),Gt.unshift({type:"replace",index:At,value:Jt[At]})}else Ot=Math.max(0,Math.min(rr[it].index,Kt)),nt.push({type:"insert",index:Ot,value:Pt}),Gt.unshift({type:"delete",index:Ot}),Kt++}var Ht=f.modifyFrames,_r=f.modifyFrames,tt=[ke,Gt],je=[ke,nt];return n&&n.add(ke,Ht,tt,_r,je),f.modifyFrames(ke,nt)}function Mt(ke,Ge){if(ke=A.getGraphDiv(ke),!A.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke);var Je,it,Pt=ke._transitionData._frames,At=[],Ot=[];if(!Ge)for(Ge=[],Je=0;Je<Pt.length;Je++)Ge.push(Je);for(Ge=Ge.slice(),Ge.sort(),Je=Ge.length-1;Je>=0;Je--)it=Ge[Je],At.push({type:"delete",index:it}),Ot.unshift({type:"insert",index:it,value:Pt[it]});var Jt=f.modifyFrames,Bt=f.modifyFrames,qt=[ke,Ot],rr=[ke,At];return n&&n.add(ke,Jt,qt,Bt,rr),f.modifyFrames(ke,At)}function rt(ke){ke=A.getGraphDiv(ke);var Ge=ke._fullLayout||{},Je=ke._fullData||[];return f.cleanPlot([],{},Je,Ge),f.purge(ke),a.purge(ke),Ge._container&&Ge._container.remove(),delete ke._context,ke}function ct(ke){var Ge=ke._fullLayout,Je=ke.getBoundingClientRect();if(!A.equalDomRects(Je,Ge._lastBBox)){var it=Ge._invTransform=A.inverseTransformMatrix(A.getFullTransformMatrix(ke));Ge._invScaleX=Math.sqrt(it[0][0]*it[0][0]+it[0][1]*it[0][1]+it[0][2]*it[0][2]),Ge._invScaleY=Math.sqrt(it[1][0]*it[1][0]+it[1][1]*it[1][1]+it[1][2]*it[1][2]),Ge._lastBBox=Je}}function Ze(ke){var Ge=T.select(ke),Je=ke._fullLayout;if(Je._calcInverseTransform=ct,Je._calcInverseTransform(ke),Je._container=Ge.selectAll(".plot-container").data([0]),Je._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Je._paperdiv=Je._container.selectAll(".svg-container").data([0]),Je._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Je._glcontainer=Je._paperdiv.selectAll(".gl-container").data([{}]),Je._glcontainer.enter().append("div").classed("gl-container",!0),Je._paperdiv.selectAll(".main-svg").remove(),Je._paperdiv.select(".modebar-container").remove(),Je._paper=Je._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Je._toppaper=Je._paperdiv.append("svg").classed("main-svg",!0),Je._modebardiv=Je._paperdiv.append("div"),delete Je._modeBar,Je._hoverpaper=Je._paperdiv.append("svg").classed("main-svg",!0),!Je._uid){var it={};T.selectAll("defs").each(function(){this.id&&(it[this.id.split("-")[1]]=1)}),Je._uid=A.randstr(it)}Je._paperdiv.selectAll(".main-svg").attr(y.svgAttrs),Je._defs=Je._paper.append("defs").attr("id","defs-"+Je._uid),Je._clips=Je._defs.append("g").classed("clips",!0),Je._topdefs=Je._toppaper.append("defs").attr("id","topdefs-"+Je._uid),Je._topclips=Je._topdefs.append("g").classed("clips",!0),Je._bgLayer=Je._paper.append("g").classed("bglayer",!0),Je._draggers=Je._paper.append("g").classed("draglayer",!0);var Pt=Je._paper.append("g").classed("layer-below",!0);Je._imageLowerLayer=Pt.append("g").classed("imagelayer",!0),Je._shapeLowerLayer=Pt.append("g").classed("shapelayer",!0),Je._cartesianlayer=Je._paper.append("g").classed("cartesianlayer",!0),Je._polarlayer=Je._paper.append("g").classed("polarlayer",!0),Je._smithlayer=Je._paper.append("g").classed("smithlayer",!0),Je._ternarylayer=Je._paper.append("g").classed("ternarylayer",!0),Je._geolayer=Je._paper.append("g").classed("geolayer",!0),Je._funnelarealayer=Je._paper.append("g").classed("funnelarealayer",!0),Je._pielayer=Je._paper.append("g").classed("pielayer",!0),Je._iciclelayer=Je._paper.append("g").classed("iciclelayer",!0),Je._treemaplayer=Je._paper.append("g").classed("treemaplayer",!0),Je._sunburstlayer=Je._paper.append("g").classed("sunburstlayer",!0),Je._indicatorlayer=Je._toppaper.append("g").classed("indicatorlayer",!0),Je._glimages=Je._paper.append("g").classed("glimages",!0);var At=Je._toppaper.append("g").classed("layer-above",!0);Je._imageUpperLayer=At.append("g").classed("imagelayer",!0),Je._shapeUpperLayer=At.append("g").classed("shapelayer",!0),Je._infolayer=Je._toppaper.append("g").classed("infolayer",!0),Je._menulayer=Je._toppaper.append("g").classed("menulayer",!0),Je._zoomlayer=Je._toppaper.append("g").classed("zoomlayer",!0),Je._hoverlayer=Je._hoverpaper.append("g").classed("hoverlayer",!0),Je._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),ke.emit("plotly_framework")}ae.animate=Ut,ae.addFrames=Et,ae.deleteFrames=Mt,ae.addTraces=se,ae.deleteTraces=oe,ae.extendTraces=Z,ae.moveTraces=N,ae.prependTraces=re,ae.newPlot=D,ae._doPlot=u,ae.purge=rt,ae.react=dt,ae.redraw=I,ae.relayout=ie,ae.restyle=U,ae.setPlotConfig=S,ae.update=De,ae._guiRelayout=Oe(ie),ae._guiRestyle=Oe(U),ae._guiUpdate=Oe(De),ae._storeDirectGUIEdit=X},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(g,ne,ae){var T={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},c={};function M(A,e){for(var a in A){var n=A[a];n.valType?e[a]=n.dflt:(e[a]||(e[a]={}),M(n,e[a]))}}M(T,c),ne.exports={configAttributes:T,dfltConfig:c}},{}],542:[function(g,ne,ae){var T=g("../registry"),c=g("../lib"),M=g("../plots/attributes"),A=g("../plots/layout_attributes"),e=g("../plots/frame_attributes"),a=g("../plots/animation_attributes"),n=g("./plot_config").configAttributes,t=g("./edit_types"),r=c.extendDeepAll,f=c.isPlainObject,o=c.isArrayOrTypedArray,i=c.nestedProperty,p=c.valObjectMeta,d="_isSubplotObj",y="_isLinkedToArray",v="_arrayAttrRegexps",x="_deprecated",l=[d,y,v,x];ae.IS_SUBPLOT_OBJ=d,ae.IS_LINKED_TO_ARRAY=y,ae.DEPRECATED=x,ae.UNDERSCORE_ATTRS=l,ae.get=function(){var D={};T.allTypes.forEach(function(B){D[B]=b(B)});var R={};return Object.keys(T.transformsRegistry).forEach(function(B){R[B]=m(B)}),{defs:{valObjects:p,metaKeys:l.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:D,layout:h(),transforms:R,frames:u(),animation:L(a),config:L(n)}},ae.crawl=function(D,R,B,F){var V=B||0;F=F||"",Object.keys(D).forEach(function(Y){var K=D[Y];if(l.indexOf(Y)===-1){var J=(F?F+".":"")+Y;R(K,Y,D,V,J),!ae.isValObject(K)&&f(K)&&Y!=="impliedEdits"&&ae.crawl(K,R,V+1,J)}})},ae.isValObject=function(D){return D&&D.valType!==void 0},ae.findArrayAttributes=function(D){var R=[],B=[],F=[],V,Y;function K(oe,N,U,q){B=B.slice(0,q).concat([N]),F=F.slice(0,q).concat([oe&&oe._isLinkedToArray]);var Q=oe&&(oe.valType==="data_array"||oe.arrayOk===!0)&&!(B[q-1]==="colorbar"&&(N==="ticktext"||N==="tickvals"));!Q||J(V,0,"")}function J(oe,N,U){var q=oe[B[N]],Q=U+B[N];if(N===B.length-1)o(q)&&R.push(Y+Q);else if(F[N]){if(Array.isArray(q))for(var W=0;W<q.length;W++)f(q[W])&&J(q[W],N+1,Q+"["+W+"].")}else f(q)&&J(q,N+1,Q+".")}V=D,Y="",ae.crawl(M,K),D._module&&D._module.attributes&&ae.crawl(D._module.attributes,K);var G=D.transforms;if(G)for(var Z=0;Z<G.length;Z++){var re=G[Z],se=re._module;se&&(Y="transforms["+Z+"].",V=re,ae.crawl(se.attributes,K))}return R},ae.getTraceValObject=function(D,R){var B=R[0],F=1,V,Y;if(B==="transforms"){if(R.length===1)return M.transforms;var K=D.transforms;if(!Array.isArray(K)||!K.length)return!1;var J=R[1];if(!w(J)||J>=K.length)return!1;V=(T.transformsRegistry[K[J].type]||{}).attributes,Y=V&&V[R[2]],F=3}else{var G=D._module;if(G||(G=(T.modules[D.type||M.type.dflt]||{})._module),!G)return!1;if(V=G.attributes,Y=V&&V[B],!Y){var Z=G.basePlotModule;Z&&Z.attributes&&(Y=Z.attributes[B])}Y||(Y=M[B])}return s(Y,R,F)},ae.getLayoutValObject=function(D,R){var B=_(D,R[0]);return s(B,R,1)};function _(D,R){var B,F,V,Y,K=D._basePlotModules;if(K){var J;for(B=0;B<K.length;B++){if(V=K[B],V.attrRegex&&V.attrRegex.test(R)){if(V.layoutAttrOverrides)return V.layoutAttrOverrides;!J&&V.layoutAttributes&&(J=V.layoutAttributes)}var G=V.baseLayoutAttrOverrides;if(G&&R in G)return G[R]}if(J)return J}var Z=D._modules;if(Z){for(B=0;B<Z.length;B++)if(Y=Z[B].layoutAttributes,Y&&R in Y)return Y[R]}for(F in T.componentsRegistry){if(V=T.componentsRegistry[F],V.name==="colorscale"&&R.indexOf("coloraxis")===0)return V.layoutAttributes[R];if(!V.schema&&R===V.name)return V.layoutAttributes}return R in A?A[R]:!1}function s(D,R,B){if(!D)return!1;if(D._isLinkedToArray){if(w(R[B]))B++;else if(B<R.length)return!1}for(;B<R.length;B++){var F=D[R[B]];if(f(F))D=F;else break;if(B===R.length-1)break;if(D._isLinkedToArray){if(B++,!w(R[B]))return!1}else if(D.valType==="info_array"){B++;var V=R[B];if(!w(V))return!1;var Y=D.items;if(Array.isArray(Y)){if(V>=Y.length)return!1;if(D.dimensions===2){if(B++,R.length===B)return D;var K=R[B];if(!w(K))return!1;D=Y[V][K]}else D=Y[V]}else D=Y}}return D}function w(D){return D===Math.round(D)&&D>=0}function b(D){var R,B;R=T.modules[D]._module,B=R.basePlotModule;var F={};F.type=null;var V=r({},M),Y=r({},R.attributes);ae.crawl(Y,function(G,Z,re,se,oe){i(V,oe).set(void 0),G===void 0&&i(Y,oe).set(void 0)}),r(F,V),T.traceIs(D,"noOpacity")&&delete F.opacity,T.traceIs(D,"showLegend")||(delete F.showlegend,delete F.legendgroup),T.traceIs(D,"noHover")&&(delete F.hoverinfo,delete F.hoverlabel),R.selectPoints||delete F.selectedpoints,r(F,Y),B.attributes&&r(F,B.attributes),F.type=D;var K={meta:R.meta||{},categories:R.categories||{},animatable:Boolean(R.animatable),type:D,attributes:L(F)};if(R.layoutAttributes){var J={};r(J,R.layoutAttributes),K.layoutAttributes=L(J)}return R.animatable||ae.crawl(K,function(G){ae.isValObject(G)&&"anim"in G&&delete G.anim}),K}function h(){var D={},R,B;r(D,A);for(R in T.subplotsRegistry)if(B=T.subplotsRegistry[R],!!B.layoutAttributes)if(Array.isArray(B.attr))for(var F=0;F<B.attr.length;F++)z(D,B,B.attr[F]);else{var V=B.attr==="subplot"?B.name:B.attr;z(D,B,V)}for(R in T.componentsRegistry){B=T.componentsRegistry[R];var Y=B.schema;if(Y&&(Y.subplots||Y.layout)){var K=Y.subplots;if(K&&K.xaxis&&!K.yaxis)for(var J in K.xaxis)delete D.yaxis[J]}else B.name==="colorscale"?r(D,B.layoutAttributes):B.layoutAttributes&&I(D,B.layoutAttributes,B.name)}return{layoutAttributes:L(D)}}function m(D){var R=T.transformsRegistry[D],B=r({},R.attributes);return Object.keys(T.componentsRegistry).forEach(function(F){var V=T.componentsRegistry[F];V.schema&&V.schema.transforms&&V.schema.transforms[D]&&Object.keys(V.schema.transforms[D]).forEach(function(Y){I(B,V.schema.transforms[D][Y],Y)})}),{attributes:L(B)}}function u(){var D={frames:r({},e)};return L(D),D.frames}function L(D){return S(D),k(D),P(D),D}function S(D){function R(F){return{valType:"string",editType:"none"}}function B(F,V,Y){ae.isValObject(F)?(F.arrayOk===!0||F.valType==="data_array")&&(Y[V+"src"]=R()):f(F)&&(F.role="object")}ae.crawl(D,B)}function k(D){function R(B,F,V){if(!!B){var Y=B[y];!Y||(delete B[y],V[F]={items:{}},V[F].items[Y]=B,V[F].role="object")}}ae.crawl(D,R)}function P(D){function R(B){for(var F in B)if(f(B[F]))R(B[F]);else if(Array.isArray(B[F]))for(var V=0;V<B[F].length;V++)R(B[F][V]);else B[F]instanceof RegExp&&(B[F]=B[F].toString())}R(D)}function z(D,R,B){var F=i(D,B),V=r({},R.layoutAttributes);V[d]=!0,F.set(V)}function I(D,R,B){var F=i(D,B);F.set(r(F.get()||{},R))}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(g,ne,ae){var T=g("../lib"),c=g("../plots/attributes"),M="templateitemname",A={name:{valType:"string",editType:"none"}};A[M]={valType:"string",editType:"calc"},ae.templatedArray=function(n,t){return t._isLinkedToArray=n,t.name=A.name,t[M]=A[M],t},ae.traceTemplater=function(n){var t={},r,f;for(r in n)f=n[r],Array.isArray(f)&&f.length&&(t[r]=0);function o(i){r=T.coerce(i,{},c,"type");var p={type:r,_template:null};if(r in t){f=n[r];var d=t[r]%f.length;t[r]++,p._template=f[d]}return p}return{newTrace:o}},ae.newContainer=function(n,t,r){var f=n._template,o=f&&(f[t]||r&&f[r]);T.isPlainObject(o)||(o=null);var i=n[t]={_template:o};return i},ae.arrayTemplater=function(n,t,r){var f=n._template,o=f&&f[a(t)],i=f&&f[t];(!Array.isArray(i)||!i.length)&&(i=[]);var p={};function d(v){var x={name:v.name,_input:v},l=x[M]=v[M];if(!e(l))return x._template=o,x;for(var _=0;_<i.length;_++){var s=i[_];if(s.name===l)return p[l]=1,x._template=s,x}return x[r]=v[r]||!1,x._template=!1,x}function y(){for(var v=[],x=0;x<i.length;x++){var l=i[x],_=l.name;if(e(_)&&!p[_]){var s={_template:l,name:_,_input:{_templateitemname:_}};s[M]=l[M],v.push(s),p[_]=1}}return v}return{newItem:d,defaultItems:y}};function e(n){return n&&typeof n=="string"}function a(n){var t=n.length-1;return n.charAt(t)!=="s"&&T.warn("bad argument to arrayDefaultKey: "+n),n.substr(0,n.length-1)+"defaults"}ae.arrayDefaultKey=a,ae.arrayEditor=function(n,t,r){var f=(T.nestedProperty(n,t).get()||[]).length,o=r._index,i=o>=f&&(r._input||{})._templateitemname;i&&(o=f);var p=t+"["+o+"]",d;function y(){d={},i&&(d[p]={},d[p][M]=i)}y();function v(s,w){d[s]=w}function x(s,w){i?T.nestedProperty(d[p],s).set(w):d[p+"."+s]=w}function l(){var s=d;return y(),s}function _(s,w){s&&x(s,w);var b=l();for(var h in b)T.nestedProperty(n,h).set(b[h])}return{modifyBase:v,modifyItem:x,getUpdateObj:l,applyUpdate:_}}},{"../lib":503,"../plots/attributes":550}],544:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../registry"),M=g("../plots/plots"),A=g("../lib"),e=g("../lib/clear_gl_canvases"),a=g("../components/color"),n=g("../components/drawing"),t=g("../components/titles"),r=g("../components/modebar"),f=g("../plots/cartesian/axes"),o=g("../constants/alignment"),i=g("../plots/cartesian/constraints"),p=i.enforce,d=i.clean,y=g("../plots/cartesian/autorange").doAutoRange,v="start",x="middle",l="end";ae.layoutStyles=function(k){return A.syncOrAsync([M.doAutoMargin,s],k)};function _(k,P,z){for(var I=0;I<z.length;I++){var D=z[I][0],R=z[I][1];if(!(D[0]>=k[1]||D[1]<=k[0])&&R[0]<P[1]&&R[1]>P[0])return!0}return!1}function s(k){var P=k._fullLayout,z=P._size,I=z.p,D=f.list(k,"",!0),R,B,F,V,Y,K;if(P._paperdiv.style({width:k._context.responsive&&P.autosize&&!k._context._hasZeroWidth&&!k.layout.width?"100%":P.width+"px",height:k._context.responsive&&P.autosize&&!k._context._hasZeroHeight&&!k.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(n.setSize,P.width,P.height),k._context.setBackground(k,P.paper_bgcolor),ae.drawMainTitle(k),r.manage(k),!P._has("cartesian"))return M.previousPromises(k);function J(zt,Ut,Et){var Mt=zt._lw/2;if(zt._id.charAt(0)==="x"){if(Ut){if(Et==="top")return Ut._offset-I-Mt}else return z.t+z.h*(1-(zt.position||0))+Mt%1;return Ut._offset+Ut._length+I+Mt}if(Ut){if(Et==="right")return Ut._offset+Ut._length+I+Mt}else return z.l+z.w*(zt.position||0)+Mt%1;return Ut._offset-I-Mt}for(R=0;R<D.length;R++){V=D[R];var G=V._anchorAxis;V._linepositions={},V._lw=n.crispRound(k,V.linewidth,1),V._mainLinePosition=J(V,G,V.side),V._mainMirrorPosition=V.mirror&&G?J(V,G,o.OPPOSITE_SIDE[V.side]):null}var Z=[],re=[],se=[],oe=a.opacity(P.paper_bgcolor)===1&&a.opacity(P.plot_bgcolor)===1&&P.paper_bgcolor===P.plot_bgcolor;for(B in P._plots)if(F=P._plots[B],F.mainplot)F.bg&&F.bg.remove(),F.bg=void 0;else{var N=F.xaxis.domain,U=F.yaxis.domain,q=F.plotgroup;if(_(N,U,se)){var Q=q.node(),W=F.bg=A.ensureSingle(q,"rect","bg");Q.insertBefore(W.node(),Q.childNodes[0]),re.push(B)}else q.select("rect.bg").remove(),se.push([N,U]),oe||(Z.push(B),re.push(B))}var X=P._bgLayer.selectAll(".bg").data(Z);for(X.enter().append("rect").classed("bg",!0),X.exit().remove(),X.each(function(zt){P._plots[zt].bg=T.select(this)}),R=0;R<re.length;R++)F=P._plots[re[R]],Y=F.xaxis,K=F.yaxis,F.bg&&Y._offset!==void 0&&K._offset!==void 0&&F.bg.call(n.setRect,Y._offset-I,K._offset-I,Y._length+2*I,K._length+2*I).call(a.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(B in P._plots){F=P._plots[B],Y=F.xaxis,K=F.yaxis;var te=F.clipId="clip"+P._uid+B+"plot",ee=A.ensureSingleById(P._clips,"clipPath",te,function(zt){zt.classed("plotclip",!0).append("rect")});F.clipRect=ee.select("rect").attr({width:Y._length,height:K._length}),n.setTranslate(F.plot,Y._offset,K._offset);var ie,le;F._hasClipOnAxisFalse?(ie=null,le=te):(ie=te,le=null),n.setClipUrl(F.plot,ie,k),F.layerClipId=le}var ye,ue,pe,ge,Te,_e,De,Oe,Ue,xe,Pe,Ve,Qe;function Fe(zt){return"M"+ye+","+zt+"H"+ue}function Le(zt){return"M"+Y._offset+","+zt+"h"+Y._length}function Ne(zt){return"M"+zt+","+Oe+"V"+De}function dt(zt){return"M"+zt+","+K._offset+"v"+K._length}function Dt(zt,Ut,Et){if(!zt.showline||B!==zt._mainSubplot)return"";if(!zt._anchorAxis)return Et(zt._mainLinePosition);var Mt=Ut(zt._mainLinePosition);return zt.mirror&&(Mt+=Ut(zt._mainMirrorPosition)),Mt}for(B in P._plots){F=P._plots[B],Y=F.xaxis,K=F.yaxis;var Xt="M0,0";w(Y,B)&&(Te=h(Y,"left",K,D),ye=Y._offset-(Te?I+Te:0),_e=h(Y,"right",K,D),ue=Y._offset+Y._length+(_e?I+_e:0),pe=J(Y,K,"bottom"),ge=J(Y,K,"top"),Qe=!Y._anchorAxis||B!==Y._mainSubplot,Qe&&(Y.mirror==="allticks"||Y.mirror==="all")&&(Y._linepositions[B]=[pe,ge]),Xt=Dt(Y,Fe,Le),Qe&&Y.showline&&(Y.mirror==="all"||Y.mirror==="allticks")&&(Xt+=Fe(pe)+Fe(ge)),F.xlines.style("stroke-width",Y._lw+"px").call(a.stroke,Y.showline?Y.linecolor:"rgba(0,0,0,0)")),F.xlines.attr("d",Xt);var Tt="M0,0";w(K,B)&&(Pe=h(K,"bottom",Y,D),De=K._offset+K._length+(Pe?I:0),Ve=h(K,"top",Y,D),Oe=K._offset-(Ve?I:0),Ue=J(K,Y,"left"),xe=J(K,Y,"right"),Qe=!K._anchorAxis||B!==K._mainSubplot,Qe&&(K.mirror==="allticks"||K.mirror==="all")&&(K._linepositions[B]=[Ue,xe]),Tt=Dt(K,Ne,dt),Qe&&K.showline&&(K.mirror==="all"||K.mirror==="allticks")&&(Tt+=Ne(Ue)+Ne(xe)),F.ylines.style("stroke-width",K._lw+"px").call(a.stroke,K.showline?K.linecolor:"rgba(0,0,0,0)")),F.ylines.attr("d",Tt)}return f.makeClipPaths(k),M.previousPromises(k)}function w(k,P){return(k.ticks||k.showline)&&(P===k._mainSubplot||k.mirror==="all"||k.mirror==="allticks")}function b(k,P,z){if(!z.showline||!z._lw)return!1;if(z.mirror==="all"||z.mirror==="allticks")return!0;var I=z._anchorAxis;if(!I)return!1;var D=o.FROM_BL[P];return z.side===P?I.domain[D]===k.domain[D]:z.mirror&&I.domain[1-D]===k.domain[1-D]}function h(k,P,z,I){if(b(k,P,z))return z._lw;for(var D=0;D<I.length;D++){var R=I[D];if(R._mainAxis===z._mainAxis&&b(k,P,R))return R._lw}return 0}ae.drawMainTitle=function(k){var P=k._fullLayout,z=L(P),I=S(P);t.draw(k,"gtitle",{propContainer:P,propName:"title.text",placeholder:P._dfltTitle.plot,attributes:{x:m(P,z),y:u(P,I),"text-anchor":z,dy:I}})};function m(k,P){var z=k.title,I=k._size,D=0;switch(P===v?D=z.pad.l:P===l&&(D=-z.pad.r),z.xref){case"paper":return I.l+I.w*z.x+D;case"container":default:return k.width*z.x+D}}function u(k,P){var z=k.title,I=k._size,D=0;if(P==="0em"||!P?D=-z.pad.b:P===o.CAP_SHIFT+"em"&&(D=z.pad.t),z.y==="auto")return I.t/2;switch(z.yref){case"paper":return I.t+I.h-I.h*z.y+D;case"container":default:return k.height-k.height*z.y+D}}function L(k){var P=k.title,z=x;return A.isRightAnchor(P)?z=l:A.isLeftAnchor(P)&&(z=v),z}function S(k){var P=k.title,z="0em";return A.isTopAnchor(P)?z=o.CAP_SHIFT+"em":A.isMiddleAnchor(P)&&(z=o.MID_SHIFT+"em"),z}ae.doTraceStyle=function(k){var P=k.calcdata,z=[],I;for(I=0;I<P.length;I++){var D=P[I],R=D[0]||{},B=R.trace||{},F=B._module||{},V=F.arraysToCalcdata;V&&V(D,B);var Y=F.editStyle;Y&&z.push({fn:Y,cd0:R})}if(z.length){for(I=0;I<z.length;I++){var K=z[I];K.fn(k,K.cd0)}e(k),ae.redrawReglTraces(k)}return M.style(k),c.getComponentMethod("legend","draw")(k),M.previousPromises(k)},ae.doColorBars=function(k){return c.getComponentMethod("colorbar","draw")(k),M.previousPromises(k)},ae.layoutReplot=function(k){var P=k.layout;return k.layout=void 0,c.call("_doPlot",k,"",P)},ae.doLegend=function(k){return c.getComponentMethod("legend","draw")(k),M.previousPromises(k)},ae.doTicksRelayout=function(k){return f.draw(k,"redraw"),k._fullLayout._hasOnlyLargeSploms&&(c.subplotsRegistry.splom.updateGrid(k),e(k),ae.redrawReglTraces(k)),ae.drawMainTitle(k),M.previousPromises(k)},ae.doModeBar=function(k){var P=k._fullLayout;r.manage(k);for(var z=0;z<P._basePlotModules.length;z++){var I=P._basePlotModules[z].updateFx;I&&I(k)}return M.previousPromises(k)},ae.doCamera=function(k){for(var P=k._fullLayout,z=P._subplots.gl3d,I=0;I<z.length;I++){var D=P[z[I]],R=D._scene;R.setViewport(D)}},ae.drawData=function(k){var P=k._fullLayout;e(k);for(var z=P._basePlotModules,I=0;I<z.length;I++)z[I].plot(k);return ae.redrawReglTraces(k),M.style(k),c.getComponentMethod("shapes","draw")(k),c.getComponentMethod("annotations","draw")(k),c.getComponentMethod("images","draw")(k),P._replotting=!1,M.previousPromises(k)},ae.redrawReglTraces=function(k){var P=k._fullLayout;if(P._has("regl")){var z=k._fullData,I=[],D=[],R,B;for(P._hasOnlyLargeSploms&&P._splomGrid.draw(),R=0;R<z.length;R++){var F=z[R];F.visible===!0&&F._length!==0&&(F.type==="splom"?P._splomScenes[F.uid].draw():F.type==="scattergl"?A.pushUnique(I,F.xaxis+F.yaxis):F.type==="scatterpolargl"&&A.pushUnique(D,F.subplot))}for(R=0;R<I.length;R++)B=P._plots[I[R]],B._scene&&B._scene.draw();for(R=0;R<D.length;R++)B=P[D[R]]._subplot,B._scene&&B._scene.draw()}},ae.doAutoRangeAndConstraints=function(k){for(var P=f.list(k,"",!0),z,I={},D=0;D<P.length;D++)if(z=P[D],!I[z._id]){I[z._id]=1,d(k,z),y(k,z);var R=z._matchGroup;if(R)for(var B in R){var F=f.getFromId(k,B);y(k,F,z.range),I[B]=1}}p(k)},ae.finalDraw=function(k){c.getComponentMethod("rangeslider","draw")(k),c.getComponentMethod("rangeselector","draw")(k)},ae.drawMarginPushers=function(k){c.getComponentMethod("legend","draw")(k),c.getComponentMethod("rangeselector","draw")(k),c.getComponentMethod("sliders","draw")(k),c.getComponentMethod("updatemenus","draw")(k),c.getComponentMethod("colorbar","draw")(k)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(g,ne,ae){var T=g("../lib"),c=T.isPlainObject,M=g("./plot_schema"),A=g("../plots/plots"),e=g("../plots/attributes"),a=g("./plot_template"),n=g("./plot_config").dfltConfig;ae.makeTemplate=function(v){v=T.isPlainObject(v)?v:T.getGraphDiv(v),v=T.extendDeep({_context:n},{data:v.data,layout:v.layout}),A.supplyDefaults(v);var x=v.data||[],l=v.layout||{};l._basePlotModules=v._fullLayout._basePlotModules,l._modules=v._fullLayout._modules;var _={data:{},layout:{}};x.forEach(function(P){var z={};f(P,z,i.bind(null,P));var I=T.coerce(P,{},e,"type"),D=_.data[I];D||(D=_.data[I]=[]),D.push(z)}),f(l,_.layout,o.bind(null,l)),delete _.layout.template;var s=l.template;if(c(s)){var w=s.layout,b,h,m,u,L,S;c(w)&&t(w,_.layout);var k=s.data;if(c(k)){for(h in _.data)if(m=k[h],Array.isArray(m)){for(L=_.data[h],S=L.length,u=m.length,b=0;b<S;b++)t(m[b%u],L[b]);for(b=S;b<u;b++)L.push(T.extendDeep({},m[b]))}for(h in k)h in _.data||(_.data[h]=T.extendDeep([],k[h]))}}return _};function t(v,x){v=T.extendDeep({},v);var l=Object.keys(v).sort(),_,s;function w(L,S,k){if(c(S)&&c(L))t(L,S);else if(Array.isArray(S)&&Array.isArray(L)){var P=a.arrayTemplater({_template:v},k);for(s=0;s<S.length;s++){var z=S[s],I=P.newItem(z)._template;I&&t(I,z)}var D=P.defaultItems();for(s=0;s<D.length;s++)S.push(D[s]._template);for(s=0;s<S.length;s++)delete S[s].templateitemname}}for(_=0;_<l.length;_++){var b=l[_],h=v[b];if(b in x?w(h,x[b],b):x[b]=h,r(b)===b)for(var m in x){var u=r(m);m!==u&&u===b&&!(m in v)&&w(h,x[m],b)}}}function r(v){return v.replace(/[0-9]+$/,"")}function f(v,x,l,_,s){var w=s&&l(s);for(var b in v){var h=v[b],m=p(v,b,_),u=p(v,b,s),L=l(u);if(!L){var S=r(b);S!==b&&(u=p(v,S,s),L=l(u))}if(!(w&&w===L)&&!(!L||L._noTemplating||L.valType==="data_array"||L.arrayOk&&Array.isArray(h)))if(!L.valType&&c(h))f(h,x,l,m,u);else if(L._isLinkedToArray&&Array.isArray(h))for(var k=!1,P=0,z={},I=0;I<h.length;I++){var D=h[I];if(c(D)){var R=D.name;if(R)z[R]||(f(D,x,l,p(h,P,m),p(h,P,u)),P++,z[R]=1);else if(!k){var B=a.arrayDefaultKey(b),F=p(v,B,_),V=p(h,P,m);f(D,x,l,V,p(h,P,u));var Y=T.nestedProperty(x,V),K=T.nestedProperty(x,F);K.set(Y.get()),Y.set(null),k=!0}}}else{var J=T.nestedProperty(x,m);J.set(h)}}}function o(v,x){return M.getLayoutValObject(v,T.nestedProperty({},x).parts)}function i(v,x){return M.getTraceValObject(v,T.nestedProperty({},x).parts)}function p(v,x,l){var _;return l?Array.isArray(v)?_=l+"["+x+"]":_=l+"."+x:_=x,_}ae.validateTemplate=function(v,x){var l=T.extendDeep({},{_context:n,data:v.data,layout:v.layout}),_=l.layout||{};c(x)||(x=_.template||{});var s=x.layout,w=x.data,b=[];l.layout=_,l.layout.template=x,A.supplyDefaults(l);var h=l._fullLayout,m=l._fullData,u={};function L(F,V){for(var Y in F)if(Y.charAt(0)!=="_"&&c(F[Y])){var K=r(Y),J=[],G;for(G=0;G<V.length;G++)J.push(p(F,Y,V[G])),K!==Y&&J.push(p(F,K,V[G]));for(G=0;G<J.length;G++)u[J[G]]=1;L(F[Y],J)}}function S(F,V){for(var Y in F)if(Y.indexOf("defaults")===-1&&c(F[Y])){var K=p(F,Y,V);u[K]?S(F[Y],K):b.push({code:"unused",path:K})}}if(c(s)?(L(h,["layout"]),S(s,"layout")):b.push({code:"layout"}),!c(w))b.push({code:"data"});else{for(var k={},P,z=0;z<m.length;z++){var I=m[z];P=I.type,k[P]=(k[P]||0)+1,I._fullInput._template||b.push({code:"missing",index:I._fullInput.index,traceType:P})}for(P in w){var D=w[P].length,R=k[P]||0;D>R?b.push({code:"unused",traceType:P,templateCount:D,dataCount:R}):R>D&&b.push({code:"reused",traceType:P,templateCount:D,dataCount:R})}}function B(F,V){for(var Y in F)if(Y.charAt(0)!=="_"){var K=F[Y],J=p(F,Y,V);c(K)?(Array.isArray(F)&&K._template===!1&&K.templateitemname&&b.push({code:"missing",path:J,templateitemname:K.templateitemname}),B(K,J)):Array.isArray(K)&&d(K)&&B(K,J)}}if(B({data:m,layout:h},""),b.length)return b.map(y)};function d(v){for(var x=0;x<v.length;x++)if(c(v[x]))return!0}function y(v){var x;switch(v.code){case"data":x="The template has no key data.";break;case"layout":x="The template has no key layout.";break;case"missing":v.path?x="There are no templates for item "+v.path+" with name "+v.templateitemname:x="There are no templates for trace "+v.index+", of type "+v.traceType+".";break;case"unused":v.path?x="The template item at "+v.path+" was not used in constructing the plot.":v.dataCount?x="Some of the templates of type "+v.traceType+" were not used. The template has "+v.templateCount+" traces, the data only has "+v.dataCount+" of this type.":x="The template has "+v.templateCount+" traces of type "+v.traceType+" but there are none in the data.";break;case"reused":x="Some of the templates of type "+v.traceType+" were used more than once. The template has "+v.templateCount+" traces, the data has "+v.dataCount+" of this type.";break}return v.msg=x,v}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("./plot_api"),M=g("../plots/plots"),A=g("../lib"),e=g("../snapshot/helpers"),a=g("../snapshot/tosvg"),n=g("../snapshot/svgtoimg"),t=g("../version").version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function f(o,i){i=i||{};var p,d,y,v;A.isPlainObject(o)?(p=o.data||[],d=o.layout||{},y=o.config||{},v={}):(o=A.getGraphDiv(o),p=A.extendDeep([],o.data),d=A.extendDeep({},o.layout),y=o._context,v=o._fullLayout||{});function x(R){return!(R in i)||A.validate(i[R],r[R])}if(!x("width")&&i.width!==null||!x("height")&&i.height!==null)throw new Error("Height and width should be pixel values.");if(!x("format"))throw new Error("Export format is not "+A.join2(r.format.values,", "," or ")+".");var l={};function _(R,B){return A.coerce(i,l,r,R,B)}var s=_("format"),w=_("width"),b=_("height"),h=_("scale"),m=_("setBackground"),u=_("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var S=A.extendFlat({},d);w?S.width=w:i.width===null&&T(v.width)&&(S.width=v.width),b?S.height=b:i.height===null&&T(v.height)&&(S.height=v.height);var k=A.extendFlat({},y,{_exportedPlot:!0,staticPlot:!0,setBackground:m}),P=e.getRedrawFunc(L);function z(){return new Promise(function(R){setTimeout(R,e.getDelay(L._fullLayout))})}function I(){return new Promise(function(R,B){var F=a(L,s,h),V=L._fullLayout.width,Y=L._fullLayout.height;function K(){c.purge(L),document.body.removeChild(L)}if(s==="full-json"){var J=M.graphJson(L,!1,"keepdata","object",!0,!0);return J.version=t,J=JSON.stringify(J),K(),R(u?J:e.encodeJSON(J))}if(K(),s==="svg")return R(u?F:e.encodeSVG(F));var G=document.createElement("canvas");G.id=A.randstr(),n({format:s,width:V,height:Y,scale:h,canvas:G,svg:F,promise:!0}).then(R).catch(B)})}function D(R){return u?R.replace(e.IMAGE_URL_PREFIX,""):R}return new Promise(function(R,B){c.newPlot(L,p,S,k).then(P).then(z).then(I).then(function(F){R(D(F))}).catch(function(F){B(F)})})}ne.exports=f},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1123,"./plot_api":540,"fast-isnumeric":190}],547:[function(g,ne,ae){var T=g("../lib"),c=g("../plots/plots"),M=g("./plot_schema"),A=g("./plot_config").dfltConfig,e=T.isPlainObject,a=Array.isArray,n=T.isArrayOrTypedArray;ne.exports=function(_,s){_===void 0&&(_=[]),s===void 0&&(s={});var w=M.get(),b=[],h={_context:T.extendFlat({},A)},m,u;a(_)?(h.data=T.extendDeep([],_),m=_):(h.data=[],m=[],b.push(i("array","data"))),e(s)?(h.layout=T.extendDeep({},s),u=s):(h.layout={},u={},arguments.length>1&&b.push(i("object","layout"))),c.supplyDefaults(h);for(var L=h._fullData,S=m.length,k=0;k<S;k++){var P=m[k],z=["data",k];if(!e(P)){b.push(i("object",z));continue}var I=L[k],D=I.type,R=w.traces[D].attributes;R.type={valType:"enumerated",values:[D]},I.visible===!1&&P.visible!==!1&&b.push(i("invisible",z)),t(P,I,R,b,z);var B=P.transforms,F=I.transforms;if(B){a(B)||b.push(i("array",z,["transforms"])),z.push("transforms");for(var V=0;V<B.length;V++){var Y=["transforms",V],K=B[V].type;if(!e(B[V])){b.push(i("object",z,Y));continue}var J=w.transforms[K]?w.transforms[K].attributes:{};J.type={valType:"enumerated",values:Object.keys(w.transforms)},t(B[V],F[V],J,b,z,Y)}}}var G=h._fullLayout,Z=r(w,L);return t(u,G,Z,b,"layout"),b.length===0?void 0:b};function t(l,_,s,w,b,h){h=h||[];for(var m=Object.keys(l),u=0;u<m.length;u++){var L=m[u];if(L!=="transforms"){var S=h.slice();S.push(L);var k=l[L],P=_[L],z=d(s,L),I=(z||{}).valType,D=I==="info_array",R=I==="colorscale",B=(z||{}).items;if(!p(s,L))w.push(i("schema",b,S));else if(e(k)&&e(P)&&I!=="any")t(k,P,z,w,b,S);else if(D&&a(k)){k.length>P.length&&w.push(i("unused",b,S.concat(P.length)));var F=P.length,V=Array.isArray(B);V&&(F=Math.min(F,B.length));var Y,K,J,G,Z;if(z.dimensions===2)for(K=0;K<F;K++)if(a(k[K])){k[K].length>P[K].length&&w.push(i("unused",b,S.concat(K,P[K].length)));var re=P[K].length;for(Y=0;Y<(V?Math.min(re,B[K].length):re);Y++)J=V?B[K][Y]:B,G=k[K][Y],Z=P[K][Y],T.validate(G,J)?Z!==G&&Z!==+G&&w.push(i("dynamic",b,S.concat(K,Y),G,Z)):w.push(i("value",b,S.concat(K,Y),G))}else w.push(i("array",b,S.concat(K),k[K]));else for(K=0;K<F;K++)J=V?B[K]:B,G=k[K],Z=P[K],T.validate(G,J)?Z!==G&&Z!==+G&&w.push(i("dynamic",b,S.concat(K),G,Z)):w.push(i("value",b,S.concat(K),G))}else if(z.items&&!D&&a(k)){var se=B[Object.keys(B)[0]],oe=[],N,U;for(N=0;N<P.length;N++){var q=P[N]._index||N;if(U=S.slice(),U.push(q),e(k[q])&&e(P[N])){oe.push(q);var Q=k[q],W=P[N];e(Q)&&Q.visible!==!1&&W.visible===!1?w.push(i("invisible",b,U)):t(Q,W,se,w,b,U)}}for(N=0;N<k.length;N++)U=S.slice(),U.push(N),e(k[N])?oe.indexOf(N)===-1&&w.push(i("unused",b,U)):w.push(i("object",b,U,k[N]))}else!e(k)&&e(P)?w.push(i("object",b,S,k)):!n(k)&&n(P)&&!D&&!R?w.push(i("array",b,S,k)):L in _?T.validate(k,z)?z.valType==="enumerated"&&(z.coerceNumber&&k!==+P||k!==P)&&w.push(i("dynamic",b,S,k,P)):w.push(i("value",b,S,k)):w.push(i("unused",b,S,k))}}return w}function r(l,_){for(var s=l.layout.layoutAttributes,w=0;w<_.length;w++){var b=_[w],h=l.traces[b.type],m=h.layoutAttributes;m&&(b.subplot?T.extendFlat(s[h.attributes.subplot.dflt],m):T.extendFlat(s,m))}return s}var f={object:function(l,_){var s;return l==="layout"&&_===""?s="The layout argument":l[0]==="data"&&_===""?s="Trace "+l[1]+" in the data argument":s=o(l)+"key "+_,s+" must be linked to an object container"},array:function(l,_){var s;return l==="data"?s="The data argument":s=o(l)+"key "+_,s+" must be linked to an array container"},schema:function(l,_){return o(l)+"key "+_+" is not part of the schema"},unused:function(l,_,s){var w=e(s)?"container":"key";return o(l)+w+" "+_+" did not get coerced"},dynamic:function(l,_,s,w){return[o(l)+"key",_,"(set to '"+s+"')","got reset to","'"+w+"'","during defaults."].join(" ")},invisible:function(l,_){return(_?o(l)+"item "+_:"Trace "+l[1])+" got defaulted to be not visible"},value:function(l,_,s){return[o(l)+"key "+_,"is set to an invalid value ("+s+")"].join(" ")}};function o(l){return a(l)?"In data trace "+l[1]+", ":"In "+l+", "}function i(l,_,s,w,b){s=s||"";var h,m;a(_)?(h=_[0],m=_[1]):(h=_,m=null);var u=x(s),L=f[l](_,u,w,b);return T.log(L),{code:l,container:h,trace:m,path:s,astr:u,msg:L}}function p(l,_){var s=v(_),w=s.keyMinusId,b=s.id;return w in l&&l[w]._isSubplotObj&&b?!0:_ in l}function d(l,_){if(_ in l)return l[_];var s=v(_);return l[s.keyMinusId]}var y=T.counterRegex("([a-z]+)");function v(l){var _=l.match(y);return{keyMinusId:_&&_[1],id:_&&_[2]}}function x(l){if(!a(l))return String(l);for(var _="",s=0;s<l.length;s++){var w=l[s];typeof w=="number"?_=_.substr(0,_.length-1)+"["+w+"]":_+=w,s<l.length-1&&(_+=".")}return _}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(g,ne,ae){ne.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(g,ne,ae){var T=g("../lib"),c=g("../plot_api/plot_template");ne.exports=function(A,e,a){var n=a.name,t=a.inclusionAttr||"visible",r=e[n],f=T.isArrayOrTypedArray(A[n])?A[n]:[],o=e[n]=[],i=c.arrayTemplater(e,n,t),p,d;for(p=0;p<f.length;p++){var y=f[p];T.isPlainObject(y)?d=i.newItem(y):(d=i.newItem({}),d[t]=!1),d._index=p,d[t]!==!1&&a.handleItemDefaults(y,d,e,a),o.push(d)}var v=i.defaultItems();for(p=0;p<v.length;p++)d=v[p],d._index=o.length,a.handleItemDefaults({},d,e,a,{}),o.push(d);if(T.isArrayOrTypedArray(r)){var x=Math.min(r.length,o.length);for(p=0;p<x;p++)T.relinkPrivateKeys(o[p],r[p])}return o}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(g,ne,ae){var T=g("./font_attributes"),c=g("../components/fx/attributes");ne.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:T({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:c.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib"),M=c.dateTime2ms,A=c.incrementMonth,e=g("../../constants/numerical"),a=e.ONEAVGMONTH;ne.exports=function(t,r,f,o){if(r.type!=="date")return{vals:o};var i=t[f+"periodalignment"];if(!i)return{vals:o};var p=t[f+"period"],d;if(T(p)){if(p=+p,p<=0)return{vals:o}}else if(typeof p=="string"&&p.charAt(0)==="M"){var y=+p.substring(1);if(y>0&&Math.round(y)===y)d=y;else return{vals:o}}for(var v=r.calendar,x=i==="start",l=i==="end",_=t[f+"period0"],s=M(_,v)||0,w=[],b=[],h=[],m=o.length,u=0;u<m;u++){var L=o[u],S,k,P;if(d){for(S=Math.round((L-s)/(d*a)),P=A(s,d*S,v);P>L;)P=A(P,-d,v);for(;P<=L;)P=A(P,d,v);k=A(P,-d,v)}else{for(S=Math.round((L-s)/p),P=s+S*p;P>L;)P-=p;for(;P<=L;)P+=p;k=P-p}w[u]=x?k:l?P:(k+P)/2,b[u]=k,h[u]=P}return{vals:w,starts:b,ends:h}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(g,ne,ae){ne.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("fast-isnumeric"),M=g("../../lib"),A=g("../../constants/numerical").FP_SAFE,e=g("../../registry"),a=g("../../components/drawing"),n=g("./axis_ids"),t=n.getFromId,r=n.isLinked;ne.exports={getAutoRange:f,makePadFn:i,doAutoRange:v,findExtremes:x,concatExtremes:y};function f(m,u){var L,S,k=[],P=m._fullLayout,z=i(P,u,0),I=i(P,u,1),D=y(m,u),R=D.min,B=D.max;if(R.length===0||B.length===0)return M.simpleMap(u.range,u.r2l);var F=R[0].val,V=B[0].val;for(L=1;L<R.length&&F===V;L++)F=Math.min(F,R[L].val);for(L=1;L<B.length&&F===V;L++)V=Math.max(V,B[L].val);var Y=!1;if(u.range){var K=M.simpleMap(u.range,u.r2l);Y=K[1]<K[0]}u.autorange==="reversed"&&(Y=!0,u.autorange=!0);var J=u.rangemode,G=J==="tozero",Z=J==="nonnegative",re=u._length,se=re/10,oe=0,N,U,q,Q,W,X;for(L=0;L<R.length;L++)for(N=R[L],S=0;S<B.length;S++)U=B[S],X=U.val-N.val-o(u,N.val,U.val),X>0&&(W=re-z(N)-I(U),W>se?X/W>oe&&(q=N,Q=U,oe=X/W):X/re>oe&&(q={val:N.val,nopad:1},Q={val:U.val,nopad:1},oe=X/re));function te(ue,pe){return Math.max(ue,I(pe))}if(F===V){var ee=F-1,ie=F+1;if(G)if(F===0)k=[0,1];else{var le=(F>0?B:R).reduce(te,0),ye=F/(1-Math.min(.5,le/re));k=F>0?[0,ye]:[ye,0]}else Z?k=[Math.max(0,ee),Math.max(1,ie)]:k=[ee,ie]}else G?(q.val>=0&&(q={val:0,nopad:1}),Q.val<=0&&(Q={val:0,nopad:1})):Z&&(q.val-oe*z(q)<0&&(q={val:0,nopad:1}),Q.val<=0&&(Q={val:1,nopad:1})),oe=(Q.val-q.val-o(u,N.val,U.val))/(re-z(q)-I(Q)),k=[q.val-oe*z(q),Q.val+oe*I(Q)];return Y&&k.reverse(),M.simpleMap(k,u.l2r||Number)}function o(m,u,L){var S=0;if(m.rangebreaks)for(var k=m.locateBreaks(u,L),P=0;P<k.length;P++){var z=k[P];S+=z.max-z.min}return S}function i(m,u,L){var S=.05*u._length,k=u._anchorAxis||{};if((u.ticklabelposition||"").indexOf("inside")!==-1||(k.ticklabelposition||"").indexOf("inside")!==-1){var P=u.autorange==="reversed";if(!P){var z=M.simpleMap(u.range,u.r2l);P=z[1]<z[0]}P&&(L=!L)}var I=0;return r(m,u._id)||(I=d(m,u,L)),S=Math.max(I,S),u.constrain==="domain"&&u._inputDomain&&(S*=(u._inputDomain[1]-u._inputDomain[0])/(u.domain[1]-u.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?S:I)}}var p=3;function d(m,u,L){var S=0,k=u._id.charAt(0)==="x";for(var P in m._plots){var z=m._plots[P];if(!(u._id!==z.xaxis._id&&u._id!==z.yaxis._id)){var I=(k?z.yaxis:z.xaxis)||{};if((I.ticklabelposition||"").indexOf("inside")!==-1&&(!L&&(I.side==="left"||I.side==="bottom")||L&&(I.side==="top"||I.side==="right"))){if(I._vals){var D=M.deg2rad(I._tickAngles[I._id+"tick"]||0),R=Math.abs(Math.cos(D)),B=Math.abs(Math.sin(D));if(!I._vals[0].bb){var F=I._id+"tick",V=I._selections[F];V.each(function(re){var se=T.select(this),oe=se.select(".text-math-group");oe.empty()&&(re.bb=a.bBox(se.node()))})}for(var Y=0;Y<I._vals.length;Y++){var K=I._vals[Y],J=K.bb;if(J){var G=2*p+J.width,Z=2*p+J.height;S=Math.max(S,k?Math.max(G*R,Z*B):Math.max(Z*R,G*B))}}}I.ticks==="inside"&&I.ticklabelposition==="inside"&&(S+=I.ticklen||0)}}}return S}function y(m,u,L){var S=u._id,k=m._fullData,P=m._fullLayout,z=[],I=[],D,R,B;function F(G,Z){for(D=0;D<Z.length;D++){var re=G[Z[D]],se=(re._extremes||{})[S];if(re.visible===!0&&se){for(R=0;R<se.min.length;R++)B=se.min[R],l(z,B.val,B.pad,{extrapad:B.extrapad});for(R=0;R<se.max.length;R++)B=se.max[R],_(I,B.val,B.pad,{extrapad:B.extrapad})}}}if(F(k,u._traceIndices),F(P.annotations||[],u._annIndices||[]),F(P.shapes||[],u._shapeIndices||[]),u._matchGroup&&!L){for(var V in u._matchGroup)if(V!==u._id){var Y=t(m,V),K=y(m,Y,!0),J=u._length/Y._length;for(R=0;R<K.min.length;R++)B=K.min[R],l(z,B.val,B.pad*J,{extrapad:B.extrapad});for(R=0;R<K.max.length;R++)B=K.max[R],_(I,B.val,B.pad*J,{extrapad:B.extrapad})}}return{min:z,max:I}}function v(m,u,L){if(u.setScale(),u.autorange){u.range=L?L.slice():f(m,u),u._r=u.range.slice(),u._rl=M.simpleMap(u._r,u.r2l);var S=u._input,k={};k[u._attr+".range"]=u.range,k[u._attr+".autorange"]=u.autorange,e.call("_storeDirectGUIEdit",m.layout,m._fullLayout._preGUI,k),S.range=u.range.slice(),S.autorange=u.autorange}var P=u._anchorAxis;if(P&&P.rangeslider){var z=P.rangeslider[u._name];z&&z.rangemode==="auto"&&(z.range=f(m,u)),P._input.rangeslider[u._name]=M.extendFlat({},z)}}function x(m,u,L){L||(L={}),m._m||m.setScale();var S=[],k=[],P=u.length,z=L.padded||!1,I=L.tozero&&(m.type==="linear"||m.type==="-"),D=m.type==="log",R=!1,B=L.vpadLinearized||!1,F,V,Y,K,J,G,Z,re,se;function oe(ee){if(Array.isArray(ee))return R=!0,function(le){return Math.max(Number(ee[le]||0),0)};var ie=Math.max(Number(ee||0),0);return function(){return ie}}var N=oe((m._m>0?L.ppadplus:L.ppadminus)||L.ppad||0),U=oe((m._m>0?L.ppadminus:L.ppadplus)||L.ppad||0),q=oe(L.vpadplus||L.vpad),Q=oe(L.vpadminus||L.vpad);if(!R){if(re=1/0,se=-1/0,D)for(F=0;F<P;F++)V=u[F],V<re&&V>0&&(re=V),V>se&&V<A&&(se=V);else for(F=0;F<P;F++)V=u[F],V<re&&V>-A&&(re=V),V>se&&V<A&&(se=V);u=[re,se],P=2}var W={tozero:I,extrapad:z};function X(ee){Y=u[ee],!!c(Y)&&(G=N(ee),Z=U(ee),B?(K=m.c2l(Y)-Q(ee),J=m.c2l(Y)+q(ee)):(re=Y-Q(ee),se=Y+q(ee),D&&re<se/10&&(re=se/10),K=m.c2l(re),J=m.c2l(se)),I&&(K=Math.min(0,K),J=Math.max(0,J)),w(K)&&l(S,K,Z,W),w(J)&&_(k,J,G,W))}var te=Math.min(6,P);for(F=0;F<te;F++)X(F);for(F=P-1;F>=te;F--)X(F);return{min:S,max:k,opts:L}}function l(m,u,L,S){s(m,u,L,S,b)}function _(m,u,L,S){s(m,u,L,S,h)}function s(m,u,L,S,k){for(var P=S.tozero,z=S.extrapad,I=!0,D=0;D<m.length&&I;D++){var R=m[D];if(k(R.val,u)&&R.pad>=L&&(R.extrapad||!z)){I=!1;break}else k(u,R.val)&&R.pad<=L&&(z||!R.extrapad)&&(m.splice(D,1),D--)}if(I){var B=P&&u===0;m.push({val:u,pad:B?0:L,extrapad:B?!1:z})}}function w(m){return c(m)&&Math.abs(m)<A}function b(m,u){return m<=u}function h(m,u){return m>=u}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("fast-isnumeric"),M=g("../../plots/plots"),A=g("../../registry"),e=g("../../lib"),a=e.strTranslate,n=g("../../lib/svg_text_utils"),t=g("../../components/titles"),r=g("../../components/color"),f=g("../../components/drawing"),o=g("./layout_attributes"),i=g("./clean_ticks"),p=g("../../constants/numerical"),d=p.ONEMAXYEAR,y=p.ONEAVGYEAR,v=p.ONEMINYEAR,x=p.ONEMAXQUARTER,l=p.ONEAVGQUARTER,_=p.ONEMINQUARTER,s=p.ONEMAXMONTH,w=p.ONEAVGMONTH,b=p.ONEMINMONTH,h=p.ONEWEEK,m=p.ONEDAY,u=m/2,L=p.ONEHOUR,S=p.ONEMIN,k=p.ONESEC,P=p.MINUS_SIGN,z=p.BADNUM,I={K:"zeroline"},D={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},B={K:"tick",L:"path"},F={K:"tick",L:"text"},V=g("../../constants/alignment"),Y=V.MID_SHIFT,K=V.CAP_SHIFT,J=V.LINE_SPACING,G=V.OPPOSITE_SIDE,Z=3,re=ne.exports={};re.setConvert=g("./set_convert");var se=g("./axis_autotype"),oe=g("./axis_ids"),N=oe.idSort,U=oe.isLinked;re.id2name=oe.id2name,re.name2id=oe.name2id,re.cleanId=oe.cleanId,re.list=oe.list,re.listIds=oe.listIds,re.getFromId=oe.getFromId,re.getFromTrace=oe.getFromTrace;var q=g("./autorange");re.getAutoRange=q.getAutoRange,re.findExtremes=q.findExtremes;var Q=1e-4;function W(Me){var Se=(Me[1]-Me[0])*Q;return[Me[0]-Se,Me[1]+Se]}re.coerceRef=function(Me,Se,Ke,Xe,ot,pt){var vt=Xe.charAt(Xe.length-1),Ct=Ke._fullLayout._subplots[vt+"axis"],St=Xe+"ref",Nt={};return ot||(ot=Ct[0]||(typeof pt=="string"?pt:pt[0])),pt||(pt=ot),Ct=Ct.concat(Ct.map(function(ir){return ir+" domain"})),Nt[St]={valType:"enumerated",values:Ct.concat(pt?typeof pt=="string"?[pt]:pt:[]),dflt:ot},e.coerce(Me,Se,Nt,St)},re.getRefType=function(Me){return Me===void 0?Me:Me==="paper"?"paper":Me==="pixel"?"pixel":/( domain)$/.test(Me)?"domain":"range"},re.coercePosition=function(Me,Se,Ke,Xe,ot,pt){var vt,Ct,St=re.getRefType(Xe);if(St!=="range")vt=e.ensureNumber,Ct=Ke(ot,pt);else{var Nt=re.getFromId(Se,Xe);pt=Nt.fraction2r(pt),Ct=Ke(ot,pt),vt=Nt.cleanPos}Me[ot]=vt(Ct)},re.cleanPosition=function(Me,Se,Ke){var Xe=Ke==="paper"||Ke==="pixel"?e.ensureNumber:re.getFromId(Se,Ke).cleanPos;return Xe(Me)},re.redrawComponents=function(Me,Se){Se=Se||re.listIds(Me);var Ke=Me._fullLayout;function Xe(ot,pt,vt,Ct){for(var St=A.getComponentMethod(ot,pt),Nt={},ir=0;ir<Se.length;ir++)for(var lr=Ke[re.id2name(Se[ir])],Yr=lr[vt],Pr=0;Pr<Yr.length;Pr++){var wr=Yr[Pr];if(!Nt[wr]&&(St(Me,wr),Nt[wr]=1,Ct))return}}Xe("annotations","drawOne","_annIndices"),Xe("shapes","drawOne","_shapeIndices"),Xe("images","draw","_imgIndices",!0)};var X=re.getDataConversions=function(Me,Se,Ke,Xe){var ot,pt=Ke==="x"||Ke==="y"||Ke==="z"?Ke:Xe;if(Array.isArray(pt)){if(ot={type:se(Xe,void 0,{autotypenumbers:Me._fullLayout.autotypenumbers}),_categories:[]},re.setConvert(ot),ot.type==="category")for(var vt=0;vt<Xe.length;vt++)ot.d2c(Xe[vt])}else ot=re.getFromTrace(Me,Se,pt);return ot?{d2c:ot.d2c,c2d:ot.c2d}:pt==="ids"?{d2c:ee,c2d:ee}:{d2c:te,c2d:te}};function te(Me){return+Me}function ee(Me){return String(Me)}re.getDataToCoordFunc=function(Me,Se,Ke,Xe){return X(Me,Se,Ke,Xe).d2c},re.counterLetter=function(Me){var Se=Me.charAt(0);if(Se==="x")return"y";if(Se==="y")return"x"},re.minDtick=function(Me,Se,Ke,Xe){["log","category","multicategory"].indexOf(Me.type)!==-1||!Xe?Me._minDtick=0:Me._minDtick===void 0?(Me._minDtick=Se,Me._forceTick0=Ke):Me._minDtick&&((Me._minDtick/Se+1e-6)%1<2e-6&&((Ke-Me._forceTick0)/Se%1+1.000001)%1<2e-6?(Me._minDtick=Se,Me._forceTick0=Ke):((Se/Me._minDtick+1e-6)%1>2e-6||((Ke-Me._forceTick0)/Me._minDtick%1+1.000001)%1>2e-6)&&(Me._minDtick=0))},re.saveRangeInitial=function(Me,Se){for(var Ke=re.list(Me,"",!0),Xe=!1,ot=0;ot<Ke.length;ot++){var pt=Ke[ot],vt=pt._rangeInitial===void 0,Ct=vt||!(pt.range[0]===pt._rangeInitial[0]&&pt.range[1]===pt._rangeInitial[1]);(vt&&pt.autorange===!1||Se&&Ct)&&(pt._rangeInitial=pt.range.slice(),Xe=!0)}return Xe},re.saveShowSpikeInitial=function(Me,Se){for(var Ke=re.list(Me,"",!0),Xe=!1,ot="on",pt=0;pt<Ke.length;pt++){var vt=Ke[pt],Ct=vt._showSpikeInitial===void 0,St=Ct||vt.showspikes!==vt._showspikes;(Ct||Se&&St)&&(vt._showSpikeInitial=vt.showspikes,Xe=!0),ot==="on"&&!vt.showspikes&&(ot="off")}return Me._fullLayout._cartesianSpikesEnabled=ot,Xe},re.autoBin=function(Me,Se,Ke,Xe,ot,pt){var vt=e.aggNums(Math.min,null,Me),Ct=e.aggNums(Math.max,null,Me);if(Se.type==="category"||Se.type==="multicategory")return{start:vt-.5,end:Ct+.5,size:Math.max(1,Math.round(pt)||1),_dataSpan:Ct-vt};ot||(ot=Se.calendar);var St;if(Se.type==="log"?St={type:"linear",range:[vt,Ct]}:St={type:Se.type,range:e.simpleMap([vt,Ct],Se.c2r,0,ot),calendar:ot},re.setConvert(St),pt=pt&&i.dtick(pt,St.type),pt)St.dtick=pt,St.tick0=i.tick0(void 0,St.type,ot);else{var Nt;if(Ke)Nt=(Ct-vt)/Ke;else{var ir=e.distinctVals(Me),lr=Math.pow(10,Math.floor(Math.log(ir.minDiff)/Math.LN10)),Yr=lr*e.roundUp(ir.minDiff/lr,[.9,1.9,4.9,9.9],!0);Nt=Math.max(Yr,2*e.stdev(Me)/Math.pow(Me.length,Xe?.25:.4)),c(Nt)||(Nt=1)}re.autoTicks(St,Nt)}var Pr=St.dtick,wr=re.tickIncrement(re.tickFirst(St),Pr,"reverse",ot),Jr,gr;if(typeof Pr=="number")wr=ie(wr,Me,St,vt,Ct),gr=1+Math.floor((Ct-wr)/Pr),Jr=wr+gr*Pr;else for(St.dtick.charAt(0)==="M"&&(wr=le(wr,Me,Pr,vt,ot)),Jr=wr,gr=0;Jr<=Ct;)Jr=re.tickIncrement(Jr,Pr,!1,ot),gr++;return{start:Se.c2r(wr,0,ot),end:Se.c2r(Jr,0,ot),size:Pr,_dataSpan:Ct-vt}};function ie(Me,Se,Ke,Xe,ot){var pt=0,vt=0,Ct=0,St=0;function Nt(Pr){return(1+(Pr-Me)*100/Ke.dtick)%100<2}for(var ir=0;ir<Se.length;ir++)Se[ir]%1==0?Ct++:c(Se[ir])||St++,Nt(Se[ir])&&pt++,Nt(Se[ir]+Ke.dtick/2)&&vt++;var lr=Se.length-St;if(Ct===lr&&Ke.type!=="date")Ke.dtick<1?Me=Xe-.5*Ke.dtick:(Me-=.5,Me+Ke.dtick<Xe&&(Me+=Ke.dtick));else if(vt<lr*.1&&(pt>lr*.3||Nt(Xe)||Nt(ot))){var Yr=Ke.dtick/2;Me+=Me+Yr<Xe?Yr:-Yr}return Me}function le(Me,Se,Ke,Xe,ot){var pt=e.findExactDates(Se,ot),vt=.8;if(pt.exactDays>vt){var Ct=Number(Ke.substr(1));pt.exactYears>vt&&Ct%12==0?Me=re.tickIncrement(Me,"M6","reverse")+m*1.5:pt.exactMonths>vt?Me=re.tickIncrement(Me,"M1","reverse")+m*15.5:Me-=u;var St=re.tickIncrement(Me,Ke);if(St<=Xe)return St}return Me}re.prepMinorTicks=function(Me,Se,Ke){if(!Se.minor.dtick){delete Me.dtick;var Xe=Se.dtick&&c(Se._tmin),ot;if(Xe){var pt=re.tickIncrement(Se._tmin,Se.dtick,!0);ot=[Se._tmin,pt*.99+Se._tmin*.01]}else{var vt=e.simpleMap(Se.range,Se.r2l);ot=[vt[0],.8*vt[0]+.2*vt[1]]}if(Me.range=e.simpleMap(ot,Se.l2r),Me._isMinor=!0,re.prepTicks(Me,Ke),Xe){var Ct=c(Se.dtick),St=c(Me.dtick),Nt=Ct?Se.dtick:+Se.dtick.substring(1),ir=St?Me.dtick:+Me.dtick.substring(1);Ct&&St?ye(Nt,ir)?Nt===2*h&&ir===2*m&&(Me.dtick=h):Nt===2*h&&ir===3*m?Me.dtick=h:Nt===h&&!(Se._input.minor||{}).nticks?Me.dtick=m:ue(Nt/ir,2.5)?Me.dtick=Nt/2:Me.dtick=Nt:String(Se.dtick).charAt(0)==="M"?St?Me.dtick="M1":ye(Nt,ir)?Nt>=12&&ir===2&&(Me.dtick="M3"):Me.dtick=Se.dtick:String(Me.dtick).charAt(0)==="L"?String(Se.dtick).charAt(0)==="L"?ye(Nt,ir)||(Me.dtick=ue(Nt/ir,2.5)?Se.dtick/2:Se.dtick):Me.dtick="D1":Me.dtick==="D2"&&+Se.dtick>1&&(Me.dtick=1)}Me.range=Se.range}Se.minor._tick0Init===void 0&&(Me.tick0=Se.tick0)};function ye(Me,Se){return Math.abs((Me/Se+.5)%1-.5)<.001}function ue(Me,Se){return Math.abs(Me/Se-1)<.001}re.prepTicks=function(Me,Se){var Ke=e.simpleMap(Me.range,Me.r2l,void 0,void 0,Se);if(Me.tickmode==="auto"||!Me.dtick){var Xe=Me.nticks,ot;Xe||(Me.type==="category"||Me.type==="multicategory"?(ot=Me.tickfont?e.bigFont(Me.tickfont.size||12):15,Xe=Me._length/ot):(ot=Me._id.charAt(0)==="y"?40:80,Xe=e.constrain(Me._length/ot,4,9)+1),Me._name==="radialaxis"&&(Xe*=2)),Me.minor&&Me.minor.tickmode!=="array"||Me.tickmode==="array"&&(Xe*=100),Me._roughDTick=Math.abs(Ke[1]-Ke[0])/Xe,re.autoTicks(Me,Me._roughDTick),Me._minDtick>0&&Me.dtick<Me._minDtick*2&&(Me.dtick=Me._minDtick,Me.tick0=Me.l2r(Me._forceTick0))}Me.ticklabelmode==="period"&&ge(Me),Me.tick0||(Me.tick0=Me.type==="date"?"2000-01-01":0),Me.type==="date"&&Me.dtick<.1&&(Me.dtick=.1),Le(Me)};function pe(Me){return+Me.substring(1)}function ge(Me){var Se;function Ke(){return!(c(Me.dtick)||Me.dtick.charAt(0)!=="M")}var Xe=Ke(),ot=re.getTickFormat(Me);if(ot){var pt=Me._dtickInit!==Me.dtick;/%[fLQsSMX]/.test(ot)||(/%[HI]/.test(ot)?(Se=L,pt&&!Xe&&Me.dtick<L&&(Me.dtick=L)):/%p/.test(ot)?(Se=u,pt&&!Xe&&Me.dtick<u&&(Me.dtick=u)):/%[Aadejuwx]/.test(ot)?(Se=m,pt&&!Xe&&Me.dtick<m&&(Me.dtick=m)):/%[UVW]/.test(ot)?(Se=h,pt&&!Xe&&Me.dtick<h&&(Me.dtick=h)):/%[Bbm]/.test(ot)?(Se=w,pt&&(Xe?pe(Me.dtick)<1:Me.dtick<b)&&(Me.dtick="M1")):/%[q]/.test(ot)?(Se=l,pt&&(Xe?pe(Me.dtick)<3:Me.dtick<_)&&(Me.dtick="M3")):/%[Yy]/.test(ot)&&(Se=y,pt&&(Xe?pe(Me.dtick)<12:Me.dtick<v)&&(Me.dtick="M12")))}Xe=Ke(),Xe&&Me.tick0===Me._dowTick0&&(Me.tick0=Me._rawTick0),Me._definedDelta=Se}function Te(Me,Se,Ke){for(var Xe=0;Xe<Me.length;Xe++){var ot=Me[Xe].value,pt=Xe,vt=Xe+1;Xe<Me.length-1?(pt=Xe,vt=Xe+1):Xe>0?(pt=Xe-1,vt=Xe):(pt=Xe,vt=Xe);var Ct=Me[pt].value,St=Me[vt].value,Nt=Math.abs(St-Ct),ir=Ke||Nt,lr=0;ir>=v?Nt>=v&&Nt<=d?lr=Nt:lr=y:Ke===l&&ir>=_?Nt>=_&&Nt<=x?lr=Nt:lr=l:ir>=b?Nt>=b&&Nt<=s?lr=Nt:lr=w:Ke===h&&ir>=h?lr=h:ir>=m?lr=m:Ke===u&&ir>=u?lr=u:Ke===L&&ir>=L&&(lr=L);var Yr;lr>=Nt&&(lr=Nt,Yr=!0);var Pr=ot+lr;if(Se.rangebreaks&&lr>0){for(var wr=84,Jr=0,gr=0;gr<wr;gr++){var mr=(gr+.5)/wr;Se.maskBreaks(ot*(1-mr)+mr*Pr)!==z&&Jr++}lr*=Jr/wr,lr||(Me[Xe].drop=!0),Yr&&Nt>h&&(lr=Nt)}(lr>0||Xe===0)&&(Me[Xe].periodX=ot+lr/2)}}re.calcTicks=function(Se,Ke){for(var Xe=Se.type,ot=Se.calendar,pt=Se.ticklabelstep,vt=Se.ticklabelmode==="period",Ct=e.simpleMap(Se.range,Se.r2l,void 0,void 0,Ke),St=Ct[1]<Ct[0],Nt=Math.min(Ct[0],Ct[1]),ir=Math.max(Ct[0],Ct[1]),lr=Math.max(1e3,Se._length||0),Yr=[],Pr=[],wr=[],Jr=[],gr=Se.minor&&(Se.minor.ticks||Se.minor.showgrid),mr=1;mr>=(gr?0:1);mr--){var Ur=!mr;mr?(Se._dtickInit=Se.dtick,Se._tick0Init=Se.tick0):(Se.minor._dtickInit=Se.minor.dtick,Se.minor._tick0Init=Se.minor.tick0);var Hr=mr?Se:e.extendFlat({},Se,Se.minor);if(Ur?re.prepMinorTicks(Hr,Se,Ke):re.prepTicks(Hr,Ke),Hr.tickmode==="array"){mr?(wr=[],Yr=_e(Se)):(Jr=[],Pr=_e(Se));continue}var Tr=W(Ct),et=Tr[0],Lt=Tr[1],jt=c(Hr.dtick),sr=Xe==="log"&&!(jt||Hr.dtick.charAt(0)==="L"),Ir=re.tickFirst(Hr,Ke);if(mr){if(Se._tmin=Ir,Ir<et!==St)break;(Xe==="category"||Xe==="multicategory")&&(Lt=St?Math.max(-.5,Lt):Math.min(Se._categories.length-.5,Lt))}var Zr=null,Lr=Ir,br;if(mr){var Nr;jt?Nr=Se.dtick:Xe==="date"?typeof Se.dtick=="string"&&Se.dtick.charAt(0)==="M"&&(Nr=w*Se.dtick.substring(1)):Nr=Se._roughDTick,br=Math.round((Se.r2l(Lr)-Se.r2l(Se.tick0))/Nr)-1}var kn=Hr.dtick;for(Hr.rangebreaks&&Hr._tick0Init!==Hr.tick0&&(Lr=je(Lr,Se),St||(Lr=re.tickIncrement(Lr,kn,!St,ot))),mr&&vt&&(Lr=re.tickIncrement(Lr,kn,!St,ot),br--);St?Lr>=Lt:Lr<=Lt;Lr=re.tickIncrement(Lr,kn,St,ot)){if(mr&&br++,Hr.rangebreaks&&!St){if(Lr<et)continue;if(Hr.maskBreaks(Lr)===z&&je(Lr,Hr)>=ir)break}if(wr.length>lr||Lr===Zr)break;Zr=Lr;var _n={value:Lr};mr?(sr&&Lr!==(Lr|0)&&(_n.simpleLabel=!0),pt>1&&br%pt&&(_n.skipLabel=!0),wr.push(_n)):(_n.minor=!0,Jr.push(_n))}}if(gr){var Wn=Se.minor.ticks==="inside"&&Se.ticks==="outside"||Se.minor.ticks==="outside"&&Se.ticks==="inside";if(!Wn){for(var Ln=wr.map(function(wa){return wa.value}),Xn=[],Kn=0;Kn<Jr.length;Kn++){var Aa=Jr[Kn],Ta=Aa.value;if(Ln.indexOf(Ta)===-1){for(var oi=!1,$a=0;!oi&&$a<wr.length;$a++)1e7+wr[$a].value===1e7+Ta&&(oi=!0);oi||Xn.push(Aa)}}Jr=Xn}}vt&&Te(wr,Se,Se._definedDelta);var Va;if(Se.rangebreaks){var ti=Se._id.charAt(0)==="y",Mr=1;Se.tickmode==="auto"&&(Mr=Se.tickfont?Se.tickfont.size:12);var vn=NaN;for(Va=wr.length-1;Va>-1;Va--){if(wr[Va].drop){wr.splice(Va,1);continue}wr[Va].value=je(wr[Va].value,Se);var fn=Se.c2p(wr[Va].value);(ti?vn>fn-Mr:vn<fn+Mr)?wr.splice(St?Va+1:Va,1):vn=fn}}tt(Se)&&Math.abs(Ct[1]-Ct[0])===360&&wr.pop(),Se._tmax=(wr[wr.length-1]||{}).value,Se._prevDateHead="",Se._inCalcTicks=!0;var An,Gn=function(wa){wa.text="",Se._prevDateHead=An};wr=wr.concat(Jr);var ia,Yn;for(Va=0;Va<wr.length;Va++){var zn=wr[Va].minor,ea=wr[Va].value;zn?Pr.push({x:ea,minor:!0}):(An=Se._prevDateHead,ia=re.tickText(Se,ea,!1,wr[Va].simpleLabel),Yn=wr[Va].periodX,Yn!==void 0&&(ia.periodX=Yn,(Yn>ir||Yn<Nt)&&(Yn>ir&&(ia.periodX=ir),Yn<Nt&&(ia.periodX=Nt),Gn(ia))),wr[Va].skipLabel&&Gn(ia),Yr.push(ia))}return Yr=Yr.concat(Pr),Se._inCalcTicks=!1,vt&&Yr.length&&(Yr[0].noTick=!0),Yr};function _e(Me){var Se=e.simpleMap(Me.range,Me.r2l),Ke=W(Se),Xe=Math.min(Ke[0],Ke[1]),ot=Math.max(Ke[0],Ke[1]),pt=Me.type==="category"?Me.d2l_noadd:Me.d2l;Me.type==="log"&&String(Me.dtick).charAt(0)!=="L"&&(Me.dtick="L"+Math.pow(10,Math.floor(Math.min(Me.range[0],Me.range[1]))-1));for(var vt=[],Ct=0;Ct<=1;Ct++)if(!(Ct&&!Me.minor)){var St=Ct?Me.minor.tickvals:Me.tickvals,Nt=Ct?[]:Me.ticktext;if(!!St){Array.isArray(Nt)||(Nt=[]);for(var ir=0;ir<St.length;ir++){var lr=pt(St[ir]);if(lr>Xe&&lr<ot){var Yr=Nt[ir]===void 0?re.tickText(Me,lr):Ne(Me,lr,String(Nt[ir]));Ct&&(Yr.minor=!0,Yr.text=""),vt.push(Yr)}}}}return Me.rangebreaks&&(vt=vt.filter(function(Pr){return Me.maskBreaks(Pr.x)!==z})),vt}var De=[2,5,10],Oe=[1,2,3,6,12],Ue=[1,2,5,10,15,30],xe=[1,2,3,7,14],Pe=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ve=[-.301,0,.301,.699,1],Qe=[15,30,45,90,180];function Fe(Me,Se,Ke){return Se*e.roundUp(Me/Se,Ke)}re.autoTicks=function(Me,Se,Ke){var Xe;function ot(lr){return Math.pow(lr,Math.floor(Math.log(Se)/Math.LN10))}if(Me.type==="date"){Me.tick0=e.dateTick0(Me.calendar,0);var pt=2*Se;if(pt>y)Se/=y,Xe=ot(10),Me.dtick="M"+12*Fe(Se,Xe,De);else if(pt>w)Se/=w,Me.dtick="M"+Fe(Se,1,Oe);else if(pt>m){if(Me.dtick=Fe(Se,m,Me._hasDayOfWeekBreaks?[1,2,7,14]:xe),!Ke){var vt=re.getTickFormat(Me),Ct=Me.ticklabelmode==="period";Ct&&(Me._rawTick0=Me.tick0),/%[uVW]/.test(vt)?Me.tick0=e.dateTick0(Me.calendar,2):Me.tick0=e.dateTick0(Me.calendar,1),Ct&&(Me._dowTick0=Me.tick0)}}else pt>L?Me.dtick=Fe(Se,L,Oe):pt>S?Me.dtick=Fe(Se,S,Ue):pt>k?Me.dtick=Fe(Se,k,Ue):(Xe=ot(10),Me.dtick=Fe(Se,Xe,De))}else if(Me.type==="log"){Me.tick0=0;var St=e.simpleMap(Me.range,Me.r2l);if(Me._isMinor&&(Se*=1.5),Se>.7)Me.dtick=Math.ceil(Se);else if(Math.abs(St[1]-St[0])<1){var Nt=1.5*Math.abs((St[1]-St[0])/Se);Se=Math.abs(Math.pow(10,St[1])-Math.pow(10,St[0]))/Nt,Xe=ot(10),Me.dtick="L"+Fe(Se,Xe,De)}else Me.dtick=Se>.3?"D2":"D1"}else Me.type==="category"||Me.type==="multicategory"?(Me.tick0=0,Me.dtick=Math.ceil(Math.max(Se,1))):tt(Me)?(Me.tick0=0,Xe=1,Me.dtick=Fe(Se,Xe,Qe)):(Me.tick0=0,Xe=ot(10),Me.dtick=Fe(Se,Xe,De));if(Me.dtick===0&&(Me.dtick=1),!c(Me.dtick)&&typeof Me.dtick!="string"){var ir=Me.dtick;throw Me.dtick=1,"ax.dtick error: "+String(ir)}};function Le(Me){var Se=Me.dtick;if(Me._tickexponent=0,!c(Se)&&typeof Se!="string"&&(Se=1),(Me.type==="category"||Me.type==="multicategory")&&(Me._tickround=null),Me.type==="date"){var Ke=Me.r2l(Me.tick0),Xe=Me.l2r(Ke).replace(/(^-|i)/g,""),ot=Xe.length;if(String(Se).charAt(0)==="M")ot>10||Xe.substr(5)!=="01-01"?Me._tickround="d":Me._tickround=+Se.substr(1)%12==0?"y":"m";else if(Se>=m&&ot<=10||Se>=m*15)Me._tickround="d";else if(Se>=S&&ot<=16||Se>=L)Me._tickround="M";else if(Se>=k&&ot<=19||Se>=S)Me._tickround="S";else{var pt=Me.l2r(Ke+Se).replace(/^-/,"").length;Me._tickround=Math.max(ot,pt)-20,Me._tickround<0&&(Me._tickround=4)}}else if(c(Se)||Se.charAt(0)==="L"){var vt=Me.range.map(Me.r2d||Number);c(Se)||(Se=Number(Se.substr(1))),Me._tickround=2-Math.floor(Math.log(Se)/Math.LN10+.01);var Ct=Math.max(Math.abs(vt[0]),Math.abs(vt[1])),St=Math.floor(Math.log(Ct)/Math.LN10+.01),Nt=Me.minexponent===void 0?3:Me.minexponent;Math.abs(St)>Nt&&(rt(Me.exponentformat)&&!ct(St)?Me._tickexponent=3*Math.round((St-1)/3):Me._tickexponent=St)}else Me._tickround=null}re.tickIncrement=function(Me,Se,Ke,Xe){var ot=Ke?-1:1;if(c(Se))return e.increment(Me,ot*Se);var pt=Se.charAt(0),vt=ot*Number(Se.substr(1));if(pt==="M")return e.incrementMonth(Me,vt,Xe);if(pt==="L")return Math.log(Math.pow(10,Me)+vt)/Math.LN10;if(pt==="D"){var Ct=Se==="D2"?Ve:Pe,St=Me+ot*.01,Nt=e.roundUp(e.mod(St,1),Ct,Ke);return Math.floor(St)+Math.log(T.round(Math.pow(10,Nt),1))/Math.LN10}throw"unrecognized dtick "+String(Se)},re.tickFirst=function(Me,Se){var Ke=Me.r2l||Number,Xe=e.simpleMap(Me.range,Ke,void 0,void 0,Se),ot=Xe[1]<Xe[0],pt=ot?Math.floor:Math.ceil,vt=W(Xe)[0],Ct=Me.dtick,St=Ke(Me.tick0);if(c(Ct)){var Nt=pt((vt-St)/Ct)*Ct+St;return(Me.type==="category"||Me.type==="multicategory")&&(Nt=e.constrain(Nt,0,Me._categories.length-1)),Nt}var ir=Ct.charAt(0),lr=Number(Ct.substr(1));if(ir==="M"){for(var Yr=0,Pr=St,wr,Jr,gr;Yr<10;){if(wr=re.tickIncrement(Pr,Ct,ot,Me.calendar),(wr-vt)*(Pr-vt)<=0)return ot?Math.min(Pr,wr):Math.max(Pr,wr);Jr=(vt-(Pr+wr)/2)/(wr-Pr),gr=ir+(Math.abs(Math.round(Jr))||1)*lr,Pr=re.tickIncrement(Pr,gr,Jr<0?!ot:ot,Me.calendar),Yr++}return e.error("tickFirst did not converge",Me),Pr}else{if(ir==="L")return Math.log(pt((Math.pow(10,vt)-St)/lr)*lr+St)/Math.LN10;if(ir==="D"){var mr=Ct==="D2"?Ve:Pe,Ur=e.roundUp(e.mod(vt,1),mr,ot);return Math.floor(vt)+Math.log(T.round(Math.pow(10,Ur),1))/Math.LN10}else throw"unrecognized dtick "+String(Ct)}},re.tickText=function(Me,Se,Ke,Xe){var ot=Ne(Me,Se),pt=Me.tickmode==="array",vt=Ke||pt,Ct=Me.type,St=Ct==="category"?Me.d2l_noadd:Me.d2l,Nt;if(pt&&Array.isArray(Me.ticktext)){var ir=e.simpleMap(Me.range,Me.r2l),lr=(Math.abs(ir[1]-ir[0])-(Me._lBreaks||0))/1e4;for(Nt=0;Nt<Me.ticktext.length&&!(Math.abs(Se-St(Me.tickvals[Nt]))<lr);Nt++);if(Nt<Me.ticktext.length)return ot.text=String(Me.ticktext[Nt]),ot}function Yr(Jr){if(Jr===void 0)return!0;if(Ke)return Jr==="none";var gr={first:Me._tmin,last:Me._tmax}[Jr];return Jr!=="all"&&Se!==gr}var Pr=Ke?"never":Me.exponentformat!=="none"&&Yr(Me.showexponent)?"hide":"";if(Ct==="date"?dt(Me,ot,Ke,vt):Ct==="log"?Dt(Me,ot,Ke,vt,Pr):Ct==="category"?Xt(Me,ot):Ct==="multicategory"?Tt(Me,ot,Ke):tt(Me)?Ut(Me,ot,Ke,vt,Pr):zt(Me,ot,Ke,vt,Pr),Xe||(Me.tickprefix&&!Yr(Me.showtickprefix)&&(ot.text=Me.tickprefix+ot.text),Me.ticksuffix&&!Yr(Me.showticksuffix)&&(ot.text+=Me.ticksuffix)),Me.tickson==="boundaries"||Me.showdividers){var wr=function(Jr){var gr=Me.l2p(Jr);return gr>=0&&gr<=Me._length?Jr:null};ot.xbnd=[wr(ot.x-.5),wr(ot.x+Me.dtick-.5)]}return ot},re.hoverLabelText=function(Me,Se,Ke){Ke&&(Me=e.extendFlat({},Me,{hoverformat:Ke}));var Xe=Array.isArray(Se)?Se[0]:Se,ot=Array.isArray(Se)?Se[1]:void 0;if(ot!==void 0&&ot!==Xe)return re.hoverLabelText(Me,Xe,Ke)+" - "+re.hoverLabelText(Me,ot,Ke);var pt=Me.type==="log"&&Xe<=0,vt=re.tickText(Me,Me.c2l(pt?-Xe:Xe),"hover").text;return pt?Xe===0?"0":P+vt:vt};function Ne(Me,Se,Ke){var Xe=Me.tickfont||{};return{x:Se,dx:0,dy:0,text:Ke||"",fontSize:Xe.size,font:Xe.family,fontColor:Xe.color}}function dt(Me,Se,Ke,Xe){var ot=Me._tickround,pt=Ke&&Me.hoverformat||re.getTickFormat(Me);Xe&&(c(ot)?ot=4:ot={y:"m",m:"d",d:"M",M:"S",S:4}[ot]);var vt=e.formatDate(Se.x,pt,ot,Me._dateFormat,Me.calendar,Me._extraFormat),Ct,St=vt.indexOf(`
`);if(St!==-1&&(Ct=vt.substr(St+1),vt=vt.substr(0,St)),Xe&&(vt==="00:00:00"||vt==="00:00"?(vt=Ct,Ct=""):vt.length===8&&(vt=vt.replace(/:00$/,""))),Ct)if(Ke)ot==="d"?vt+=", "+Ct:vt=Ct+(vt?", "+vt:"");else if(!Me._inCalcTicks||Me._prevDateHead!==Ct)Me._prevDateHead=Ct,vt+="<br>"+Ct;else{var Nt=st(Me),ir=Me._trueSide||Me.side;(!Nt&&ir==="top"||Nt&&ir==="bottom")&&(vt+="<br> ")}Se.text=vt}function Dt(Me,Se,Ke,Xe,ot){var pt=Me.dtick,vt=Se.x,Ct=Me.tickformat,St=typeof pt=="string"&&pt.charAt(0);if(ot==="never"&&(ot=""),Xe&&St!=="L"&&(pt="L3",St="L"),Ct||St==="L")Se.text=Ze(Math.pow(10,vt),Me,ot,Xe);else if(c(pt)||St==="D"&&e.mod(vt+.01,1)<.1){var Nt=Math.round(vt),ir=Math.abs(Nt),lr=Me.exponentformat;lr==="power"||rt(lr)&&ct(Nt)?(Nt===0?Se.text=1:Nt===1?Se.text="10":Se.text="10<sup>"+(Nt>1?"":P)+ir+"</sup>",Se.fontSize*=1.25):(lr==="e"||lr==="E")&&ir>2?Se.text="1"+lr+(Nt>0?"+":P)+ir:(Se.text=Ze(Math.pow(10,vt),Me,"","fakehover"),pt==="D1"&&Me._id.charAt(0)==="y"&&(Se.dy-=Se.fontSize/6))}else if(St==="D")Se.text=String(Math.round(Math.pow(10,e.mod(vt,1)))),Se.fontSize*=.75;else throw"unrecognized dtick "+String(pt);if(Me.dtick==="D1"){var Yr=String(Se.text).charAt(0);(Yr==="0"||Yr==="1")&&(Me._id.charAt(0)==="y"?Se.dx-=Se.fontSize/4:(Se.dy+=Se.fontSize/2,Se.dx+=(Me.range[1]>Me.range[0]?1:-1)*Se.fontSize*(vt<0?.5:.25)))}}function Xt(Me,Se){var Ke=Me._categories[Math.round(Se.x)];Ke===void 0&&(Ke=""),Se.text=String(Ke)}function Tt(Me,Se,Ke){var Xe=Math.round(Se.x),ot=Me._categories[Xe]||[],pt=ot[1]===void 0?"":String(ot[1]),vt=ot[0]===void 0?"":String(ot[0]);Ke?Se.text=vt+" - "+pt:(Se.text=pt,Se.text2=vt)}function zt(Me,Se,Ke,Xe,ot){ot==="never"?ot="":Me.showexponent==="all"&&Math.abs(Se.x/Me.dtick)<1e-6&&(ot="hide"),Se.text=Ze(Se.x,Me,ot,Xe)}function Ut(Me,Se,Ke,Xe,ot){if(Me.thetaunit==="radians"&&!Ke){var pt=Se.x/180;if(pt===0)Se.text="0";else{var vt=Et(pt);if(vt[1]>=100)Se.text=Ze(e.deg2rad(Se.x),Me,ot,Xe);else{var Ct=Se.x<0;vt[1]===1?vt[0]===1?Se.text="\u03C0":Se.text=vt[0]+"\u03C0":Se.text=["<sup>",vt[0],"</sup>","\u2044","<sub>",vt[1],"</sub>","\u03C0"].join(""),Ct&&(Se.text=P+Se.text)}}}else Se.text=Ze(Se.x,Me,ot,Xe)}function Et(Me){function Se(Ct,St){return Math.abs(Ct-St)<=1e-6}function Ke(Ct,St){return Se(St,0)?Ct:Ke(St,Ct%St)}function Xe(Ct){for(var St=1;!Se(Math.round(Ct*St)/St,Ct);)St*=10;return St}var ot=Xe(Me),pt=Me*ot,vt=Math.abs(Ke(pt,ot));return[Math.round(pt/vt),Math.round(ot/vt)]}var Mt=["f","p","n","\u03BC","m","","k","M","G","T"];function rt(Me){return Me==="SI"||Me==="B"}function ct(Me){return Me>14||Me<-15}function Ze(Me,Se,Ke,Xe){var ot=Me<0,pt=Se._tickround,vt=Ke||Se.exponentformat||"B",Ct=Se._tickexponent,St=re.getTickFormat(Se),Nt=Se.separatethousands;if(Xe){var ir={exponentformat:vt,minexponent:Se.minexponent,dtick:Se.showexponent==="none"?Se.dtick:c(Me)&&Math.abs(Me)||1,range:Se.showexponent==="none"?Se.range.map(Se.r2d):[0,Me||1]};Le(ir),pt=(Number(ir._tickround)||0)+4,Ct=ir._tickexponent,Se.hoverformat&&(St=Se.hoverformat)}if(St)return Se._numFormat(St)(Me).replace(/-/g,P);var lr=Math.pow(10,-pt)/2;if(vt==="none"&&(Ct=0),Me=Math.abs(Me),Me<lr)Me="0",ot=!1;else{if(Me+=lr,Ct&&(Me*=Math.pow(10,-Ct),pt+=Ct),pt===0)Me=String(Math.floor(Me));else if(pt<0){Me=String(Math.round(Me)),Me=Me.substr(0,Me.length+pt);for(var Yr=pt;Yr<0;Yr++)Me+="0"}else{Me=String(Me);var Pr=Me.indexOf(".")+1;Pr&&(Me=Me.substr(0,Pr+pt).replace(/\.?0+$/,""))}Me=e.numSeparate(Me,Se._separators,Nt)}if(Ct&&vt!=="hide"){rt(vt)&&ct(Ct)&&(vt="power");var wr;Ct<0?wr=P+-Ct:vt!=="power"?wr="+"+Ct:wr=String(Ct),vt==="e"||vt==="E"?Me+=vt+wr:vt==="power"?Me+="\xD710<sup>"+wr+"</sup>":vt==="B"&&Ct===9?Me+="B":rt(vt)&&(Me+=Mt[Ct/3+5])}return ot?P+Me:Me}re.getTickFormat=function(Me){var Se;function Ke(St){return typeof St!="string"?St:Number(St.replace("M",""))*w}function Xe(St,Nt){var ir=["L","D"];if(typeof St==typeof Nt){if(typeof St=="number")return St-Nt;var lr=ir.indexOf(St.charAt(0)),Yr=ir.indexOf(Nt.charAt(0));return lr===Yr?Number(St.replace(/(L|D)/g,""))-Number(Nt.replace(/(L|D)/g,"")):lr-Yr}else return typeof St=="number"?1:-1}function ot(St,Nt,ir){var lr=ir||function(wr){return wr},Yr=Nt[0],Pr=Nt[1];return(!Yr&&typeof Yr!="number"||lr(Yr)<=lr(St))&&(!Pr&&typeof Pr!="number"||lr(Pr)>=lr(St))}function pt(St,Nt){var ir=Nt[0]===null,lr=Nt[1]===null,Yr=Xe(St,Nt[0])>=0,Pr=Xe(St,Nt[1])<=0;return(ir||Yr)&&(lr||Pr)}var vt,Ct;if(Me.tickformatstops&&Me.tickformatstops.length>0)switch(Me.type){case"date":case"linear":{for(Se=0;Se<Me.tickformatstops.length;Se++)if(Ct=Me.tickformatstops[Se],Ct.enabled&&ot(Me.dtick,Ct.dtickrange,Ke)){vt=Ct;break}break}case"log":{for(Se=0;Se<Me.tickformatstops.length;Se++)if(Ct=Me.tickformatstops[Se],Ct.enabled&&pt(Me.dtick,Ct.dtickrange)){vt=Ct;break}break}}return vt?vt.value:Me.tickformat},re.getSubplots=function(Me,Se){var Ke=Me._fullLayout._subplots,Xe=Ke.cartesian.concat(Ke.gl2d||[]),ot=Se?re.findSubplotsWithAxis(Xe,Se):Xe;return ot.sort(function(pt,vt){var Ct=pt.substr(1).split("y"),St=vt.substr(1).split("y");return Ct[0]===St[0]?+Ct[1]-+St[1]:+Ct[0]-+St[0]}),ot},re.findSubplotsWithAxis=function(Me,Se){for(var Ke=new RegExp(Se._id.charAt(0)==="x"?"^"+Se._id+"y":Se._id+"$"),Xe=[],ot=0;ot<Me.length;ot++){var pt=Me[ot];Ke.test(pt)&&Xe.push(pt)}return Xe},re.makeClipPaths=function(Me){var Se=Me._fullLayout;if(!Se._hasOnlyLargeSploms){var Ke={_offset:0,_length:Se.width,_id:""},Xe={_offset:0,_length:Se.height,_id:""},ot=re.list(Me,"x",!0),pt=re.list(Me,"y",!0),vt=[],Ct,St;for(Ct=0;Ct<ot.length;Ct++)for(vt.push({x:ot[Ct],y:Xe}),St=0;St<pt.length;St++)Ct===0&&vt.push({x:Ke,y:pt[St]}),vt.push({x:ot[Ct],y:pt[St]});var Nt=Se._clips.selectAll(".axesclip").data(vt,function(ir){return ir.x._id+ir.y._id});Nt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(ir){return"clip"+Se._uid+ir.x._id+ir.y._id}).append("rect"),Nt.exit().remove(),Nt.each(function(ir){T.select(this).select("rect").attr({x:ir.x._offset||0,y:ir.y._offset||0,width:ir.x._length||1,height:ir.y._length||1})})}},re.draw=function(Me,Se,Ke){var Xe=Me._fullLayout;Se==="redraw"&&Xe._paper.selectAll("g.subplot").each(function(pt){var vt=pt[0],Ct=Xe._plots[vt];if(Ct){var St=Ct.xaxis,Nt=Ct.yaxis;Ct.xaxislayer.selectAll("."+St._id+"tick").remove(),Ct.yaxislayer.selectAll("."+Nt._id+"tick").remove(),Ct.xaxislayer.selectAll("."+St._id+"tick2").remove(),Ct.yaxislayer.selectAll("."+Nt._id+"tick2").remove(),Ct.xaxislayer.selectAll("."+St._id+"divider").remove(),Ct.yaxislayer.selectAll("."+Nt._id+"divider").remove(),Ct.minorGridlayer&&Ct.minorGridlayer.selectAll("path").remove(),Ct.gridlayer&&Ct.gridlayer.selectAll("path").remove(),Ct.zerolinelayer&&Ct.zerolinelayer.selectAll("path").remove(),Xe._infolayer.select(".g-"+St._id+"title").remove(),Xe._infolayer.select(".g-"+Nt._id+"title").remove()}});var ot=!Se||Se==="redraw"?re.listIds(Me):Se;return e.syncOrAsync(ot.map(function(pt){return function(){if(!!pt){var vt=re.getFromId(Me,pt),Ct=re.drawOne(Me,vt,Ke);return vt._r=vt.range.slice(),vt._rl=e.simpleMap(vt._r,vt.r2l),Ct}}}))},re.drawOne=function(Me,Se,Ke){Ke=Ke||{};var Xe,ot,pt;Se.setScale();var vt=Me._fullLayout,Ct=Se._id,St=Ct.charAt(0),Nt=re.counterLetter(Ct),ir=vt._plots[Se._mainSubplot];if(!ir)return;var lr=ir[St+"axislayer"],Yr=Se._mainLinePosition,Pr=Se._mainMirrorPosition,wr=Se._vals=re.calcTicks(Se),Jr=[Se.mirror,Yr,Pr].join("_");for(Xe=0;Xe<wr.length;Xe++)wr[Xe].axInfo=Jr;Se._selections={},Se._tickAngles&&(Se._prevTickAngles=Se._tickAngles),Se._tickAngles={},Se._depth=null;var gr={};function mr(wa){var si=Ct+(wa||"tick");return gr[si]||(gr[si]=it(Se,si)),gr[si]}if(!!Se.visible){var Ur=re.makeTransTickFn(Se),Hr=re.makeTransTickLabelFn(Se),Tr,et,Lt=Se.ticks==="inside",jt=Se.ticks==="outside";if(Se.tickson==="boundaries"){var sr=ke(Se,wr);et=re.clipEnds(Se,sr),Tr=Lt?et:sr}else et=re.clipEnds(Se,wr),Tr=Lt&&Se.ticklabelmode!=="period"?et:wr;var Ir=Se._gridVals=et,Zr=Je(Se,wr);if(!vt._hasOnlyLargeSploms){var Lr=Se._subplotsWith,br={};for(Xe=0;Xe<Lr.length;Xe++){ot=Lr[Xe],pt=vt._plots[ot];var Nr=pt[Nt+"axis"],kn=Nr._mainAxis._id;if(!br[kn]){br[kn]=1;var _n=St==="x"?"M0,"+Nr._offset+"v"+Nr._length:"M"+Nr._offset+",0h"+Nr._length;re.drawGrid(Me,Se,{vals:Ir,counterAxis:Nr,layer:pt.gridlayer.select("."+Ct),minorLayer:pt.minorGridlayer.select("."+Ct),path:_n,transFn:Ur}),re.drawZeroLine(Me,Se,{counterAxis:Nr,layer:pt.zerolinelayer,path:_n,transFn:Ur})}}}var Wn,Ln=re.getTickSigns(Se),Xn=re.getTickSigns(Se,"minor");if(Se.ticks||Se.minor&&Se.minor.ticks){var Kn=re.makeTickPath(Se,Yr,Ln[2]),Aa=re.makeTickPath(Se,Yr,Xn[2],{minor:!0}),Ta,oi,$a,Va;if(Se._anchorAxis&&Se.mirror&&Se.mirror!==!0?(Ta=re.makeTickPath(Se,Pr,Ln[3]),oi=re.makeTickPath(Se,Pr,Xn[3],{minor:!0}),$a=Kn+Ta,Va=Aa+oi):(Ta="",oi="",$a=Kn,Va=Aa),Se.showdividers&&jt&&Se.tickson==="boundaries"){var ti={};for(Xe=0;Xe<Zr.length;Xe++)ti[Zr[Xe].x]=1;Wn=function(wa){return ti[wa.x]?Ta:$a}}else Wn=function(wa){return wa.minor?Va:$a}}if(re.drawTicks(Me,Se,{vals:Tr,layer:lr,path:Wn,transFn:Ur}),Se.mirror==="allticks"){var Mr=Object.keys(Se._linepositions||{});for(Xe=0;Xe<Mr.length;Xe++){ot=Mr[Xe],pt=vt._plots[ot];var vn=Se._linepositions[ot]||[],fn=vn[0],An=vn[1],Gn=vn[2],ia=re.makeTickPath(Se,fn,Gn?Ln[0]:Xn[0],{minor:Gn})+re.makeTickPath(Se,An,Gn?Ln[1]:Xn[1],{minor:Gn});re.drawTicks(Me,Se,{vals:Tr,layer:pt[St+"axislayer"],path:ia,transFn:Ur})}}var Yn=[];if(Yn.push(function(){return re.drawLabels(Me,Se,{vals:wr,layer:lr,plotinfo:pt,transFn:Hr,labelFns:re.makeLabelFns(Se,Yr)})}),Se.type==="multicategory"){var zn={x:2,y:10}[St];Yn.push(function(){var wa={x:"height",y:"width"}[St],si=mr()[wa]+zn+(Se._tickAngles[Ct+"tick"]?Se.tickfont.size*J:0);return re.drawLabels(Me,Se,{vals:Ge(Se,wr),layer:lr,cls:Ct+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Ur,labelFns:re.makeLabelFns(Se,Yr+si*Ln[4])})}),Yn.push(function(){return Se._depth=Ln[4]*(mr("tick2")[Se.side]-Yr),Jt(Me,Se,{vals:Zr,layer:lr,path:re.makeTickPath(Se,Yr,Ln[4],{len:Se._depth}),transFn:Ur})})}else Se.title.hasOwnProperty("standoff")&&Yn.push(function(){Se._depth=Ln[4]*(mr()[Se.side]-Yr)});var ea=A.getComponentMethod("rangeslider","isVisible")(Se);return Yn.push(function(){var wa=Se.side.charAt(0),si=G[Se.side].charAt(0),Ft=re.getPxPosition(Me,Se),cr=jt?Se.ticklen:0,qr,nn,on,Sn;if((Se.automargin||ea)&&(Se.type==="multicategory"?qr=mr("tick2"):(qr=mr(),St==="x"&&wa==="b"&&(Se._depth=Math.max(qr.width>0?qr.bottom-Ft:0,cr)))),Se.automargin){nn={x:0,y:0,r:0,l:0,t:0,b:0};var xn=[0,1];if(St==="x"){if(wa==="b"?nn[wa]=Se._depth:(nn[wa]=Se._depth=Math.max(qr.width>0?Ft-qr.top:0,cr),xn.reverse()),qr.width>0){var tn=qr.right-(Se._offset+Se._length);tn>0&&(nn.xr=1,nn.r=tn);var xr=Se._offset-qr.left;xr>0&&(nn.xl=0,nn.l=xr)}}else if(wa==="l"?nn[wa]=Se._depth=Math.max(qr.height>0?Ft-qr.left:0,cr):(nn[wa]=Se._depth=Math.max(qr.height>0?qr.right-Ft:0,cr),xn.reverse()),qr.height>0){var dr=qr.bottom-(Se._offset+Se._length);dr>0&&(nn.yb=0,nn.b=dr);var Rr=Se._offset-qr.top;Rr>0&&(nn.yt=1,nn.t=Rr)}nn[Nt]=Se.anchor==="free"?Se.position:Se._anchorAxis.domain[xn[0]],Se.title.text!==vt._dfltTitle[St]&&(nn[wa]+=Bt(Se)+(Se.title.standoff||0)),Se.mirror&&Se.anchor!=="free"&&(on={x:0,y:0,r:0,l:0,t:0,b:0},on[si]=Se.linewidth,Se.mirror&&Se.mirror!==!0&&(on[si]+=cr),Se.mirror===!0||Se.mirror==="ticks"?on[Nt]=Se._anchorAxis.domain[xn[1]]:(Se.mirror==="all"||Se.mirror==="allticks")&&(on[Nt]=[Se._counterDomainMin,Se._counterDomainMax][xn[1]]))}ea&&(Sn=A.getComponentMethod("rangeslider","autoMarginOpts")(Me,Se)),M.autoMargin(Me,hn(Se),nn),M.autoMargin(Me,$r(Se),on),M.autoMargin(Me,nt(Se),Sn)}),!Ke.skipTitle&&!(ea&&Se.side==="bottom")&&Yn.push(function(){return qt(Me,Se)}),e.syncOrAsync(Yn)}};function ke(Me,Se){var Ke=[],Xe,ot=function(pt,vt){var Ct=pt.xbnd[vt];Ct!==null&&Ke.push(e.extendFlat({},pt,{x:Ct}))};if(Se.length){for(Xe=0;Xe<Se.length;Xe++)ot(Se[Xe],0);ot(Se[Xe-1],1)}return Ke}function Ge(Me,Se){for(var Ke=[],Xe={},ot=0;ot<Se.length;ot++){var pt=Se[ot];Xe[pt.text2]?Xe[pt.text2].push(pt.x):Xe[pt.text2]=[pt.x]}for(var vt in Xe)Ke.push(Ne(Me,e.interp(Xe[vt],.5),vt));return Ke}function Je(Me,Se){var Ke=[],Xe,ot,pt=Se.length&&Se[Se.length-1].x<Se[0].x,vt=function(St,Nt){var ir=St.xbnd[Nt];ir!==null&&Ke.push(e.extendFlat({},St,{x:ir}))};if(Me.showdividers&&Se.length){for(Xe=0;Xe<Se.length;Xe++){var Ct=Se[Xe];Ct.text2!==ot&&vt(Ct,pt?1:0),ot=Ct.text2}vt(Se[Xe-1],pt?0:1)}return Ke}function it(Me,Se){var Ke,Xe,ot,pt;return Me._selections[Se].size()?(Ke=1/0,Xe=-1/0,ot=1/0,pt=-1/0,Me._selections[Se].each(function(){var vt=Xr(this),Ct=f.bBox(vt.node().parentNode);Ke=Math.min(Ke,Ct.top),Xe=Math.max(Xe,Ct.bottom),ot=Math.min(ot,Ct.left),pt=Math.max(pt,Ct.right)})):(Ke=0,Xe=0,ot=0,pt=0),{top:Ke,bottom:Xe,left:ot,right:pt,height:Xe-Ke,width:pt-ot}}re.getTickSigns=function(Me,Se){var Ke=Me._id.charAt(0),Xe={x:"top",y:"right"}[Ke],ot=Me.side===Xe?1:-1,pt=[-1,1,ot,-ot],vt=Se?(Me.minor||{}).ticks:Me.ticks;return vt!=="inside"==(Ke==="x")&&(pt=pt.map(function(Ct){return-Ct})),Me.side&&pt.push({l:-1,t:-1,r:1,b:1}[Me.side.charAt(0)]),pt},re.makeTransTickFn=function(Me){return Me._id.charAt(0)==="x"?function(Se){return a(Me._offset+Me.l2p(Se.x),0)}:function(Se){return a(0,Me._offset+Me.l2p(Se.x))}},re.makeTransTickLabelFn=function(Me){var Se=At(Me),Ke=Se[0],Xe=Se[1];return Me._id.charAt(0)==="x"?function(ot){return a(Ke+Me._offset+Me.l2p(Pt(ot)),Xe)}:function(ot){return a(Xe,Ke+Me._offset+Me.l2p(Pt(ot)))}};function Pt(Me){return Me.periodX!==void 0?Me.periodX:Me.x}function At(Me){var Se=Me.ticklabelposition||"",Ke=function(Pr){return Se.indexOf(Pr)!==-1},Xe=Ke("top"),ot=Ke("left"),pt=Ke("right"),vt=Ke("bottom"),Ct=Ke("inside"),St=vt||ot||Xe||pt;if(!St&&!Ct)return[0,0];var Nt=Me.side,ir=St?(Me.tickwidth||0)/2:0,lr=Z,Yr=Me.tickfont?Me.tickfont.size:12;return(vt||Xe)&&(ir+=Yr*K,lr+=(Me.linewidth||0)/2),(ot||pt)&&(ir+=(Me.linewidth||0)/2,lr+=Z),Ct&&Nt==="top"&&(lr-=Yr*(1-K)),(ot||Xe)&&(ir=-ir),(Nt==="bottom"||Nt==="right")&&(lr=-lr),[St?ir:0,Ct?lr:0]}re.makeTickPath=function(Me,Se,Ke,Xe){Xe||(Xe={});var ot=Xe.minor;if(ot&&!Me.minor)return"";var pt=Xe.len!==void 0?Xe.len:ot?Me.minor.ticklen:Me.ticklen,vt=Me._id.charAt(0),Ct=(Me.linewidth||1)/2;return vt==="x"?"M0,"+(Se+Ct*Ke)+"v"+pt*Ke:"M"+(Se+Ct*Ke)+",0h"+pt*Ke},re.makeLabelFns=function(Me,Se,Ke){var Xe=Me.ticklabelposition||"",ot=function(br){return Xe.indexOf(br)!==-1},pt=ot("top"),vt=ot("left"),Ct=ot("right"),St=ot("bottom"),Nt=St||vt||pt||Ct,ir=ot("inside"),lr=Xe==="inside"&&Me.ticks==="inside"||!ir&&Me.ticks==="outside"&&Me.tickson!=="boundaries",Yr=0,Pr=0,wr=lr?Me.ticklen:0;if(ir?wr*=-1:Nt&&(wr=0),lr&&(Yr+=wr,Ke)){var Jr=e.deg2rad(Ke);Yr=wr*Math.cos(Jr)+1,Pr=wr*Math.sin(Jr)}Me.showticklabels&&(lr||Me.showline)&&(Yr+=.2*Me.tickfont.size),Yr+=(Me.linewidth||1)/2*(ir?-1:1);var gr={labelStandoff:Yr,labelShift:Pr},mr,Ur,Hr,Tr,et=0,Lt=Me.side,jt=Me._id.charAt(0),sr=Me.tickangle,Ir;if(jt==="x")Ir=!ir&&Lt==="bottom"||ir&&Lt==="top",Tr=Ir?1:-1,ir&&(Tr*=-1),mr=Pr*Tr,Ur=Se+Yr*Tr,Hr=Ir?1:-.2,Math.abs(sr)===90&&(ir?Hr+=Y:sr===-90&&Lt==="bottom"?Hr=K:sr===90&&Lt==="top"?Hr=Y:Hr=.5,et=Y/2*(sr/90)),gr.xFn=function(br){return br.dx+mr+et*br.fontSize},gr.yFn=function(br){return br.dy+Ur+br.fontSize*Hr},gr.anchorFn=function(br,Nr){if(Nt){if(vt)return"end";if(Ct)return"start"}return!c(Nr)||Nr===0||Nr===180?"middle":Nr*Tr<0!==ir?"end":"start"},gr.heightFn=function(br,Nr,kn){return Nr<-60||Nr>60?-.5*kn:Me.side==="top"!==ir?-kn:0};else if(jt==="y"){if(Ir=!ir&&Lt==="left"||ir&&Lt==="right",Tr=Ir?1:-1,ir&&(Tr*=-1),mr=Yr,Ur=Pr*Tr,Hr=0,!ir&&Math.abs(sr)===90&&(sr===-90&&Lt==="left"||sr===90&&Lt==="right"?Hr=K:Hr=.5),ir){var Zr=c(sr)?+sr:0;if(Zr!==0){var Lr=e.deg2rad(Zr);et=Math.abs(Math.sin(Lr))*K*Tr,Hr=0}}gr.xFn=function(br){return br.dx+Se-(mr+br.fontSize*Hr)*Tr+et*br.fontSize},gr.yFn=function(br){return br.dy+Ur+br.fontSize*Y},gr.anchorFn=function(br,Nr){return c(Nr)&&Math.abs(Nr)===90?"middle":Ir?"end":"start"},gr.heightFn=function(br,Nr,kn){return Me.side==="right"&&(Nr*=-1),Nr<-30?-kn:Nr<30?-.5*kn:0}}return gr};function Ot(Me){return[Me.text,Me.x,Me.axInfo,Me.font,Me.fontSize,Me.fontColor].join("_")}re.drawTicks=function(Me,Se,Ke){Ke=Ke||{};var Xe=Se._id+"tick",ot=[].concat(Se.minor&&Se.minor.ticks?Ke.vals.filter(function(vt){return vt.minor&&!vt.noTick}):[]).concat(Se.ticks?Ke.vals.filter(function(vt){return!vt.minor&&!vt.noTick}):[]),pt=Ke.layer.selectAll("path."+Xe).data(ot,Ot);pt.exit().remove(),pt.enter().append("path").classed(Xe,1).classed("ticks",1).classed("crisp",Ke.crisp!==!1).each(function(vt){return r.stroke(T.select(this),vt.minor?Se.minor.tickcolor:Se.tickcolor)}).style("stroke-width",function(vt){return f.crispRound(Me,vt.minor?Se.minor.tickwidth:Se.tickwidth,1)+"px"}).attr("d",Ke.path).style("display",null),ft(Se,[B]),pt.attr("transform",Ke.transFn)},re.drawGrid=function(Me,Se,Ke){Ke=Ke||{};var Xe=Se._id+"grid",ot=Se.minor&&Se.minor.showgrid,pt=ot?Ke.vals.filter(function(mr){return mr.minor}):[],vt=Se.showgrid?Ke.vals.filter(function(mr){return!mr.minor}):[],Ct=Ke.counterAxis;if(Ct&&re.shouldShowZeroLine(Me,Se,Ct))for(var St=Se.tickmode==="array",Nt=0;Nt<vt.length;Nt++){var ir=vt[Nt].x;if(St?!ir:Math.abs(ir)<Se.dtick/100)if(vt=vt.slice(0,Nt).concat(vt.slice(Nt+1)),St)Nt--;else break}Se._gw=f.crispRound(Me,Se.gridwidth,1);for(var lr=ot?f.crispRound(Me,Se.minor.gridwidth,1):0,Yr=Ke.layer,Pr=Ke.minorLayer,wr=1;wr>=0;wr--){var Jr=wr?Yr:Pr;if(!!Jr){var gr=Jr.selectAll("path."+Xe).data(wr?vt:pt,Ot);gr.exit().remove(),gr.enter().append("path").classed(Xe,1).classed("crisp",Ke.crisp!==!1),gr.attr("transform",Ke.transFn).attr("d",Ke.path).each(function(mr){return r.stroke(T.select(this),mr.minor?Se.minor.gridcolor:Se.gridcolor||"#ddd")}).style("stroke-dasharray",function(mr){return f.dashStyle(mr.minor?Se.minor.griddash:Se.griddash,mr.minor?Se.minor.gridwidth:Se.gridwidth)}).style("stroke-width",function(mr){return(mr.minor?lr:Se._gw)+"px"}).style("display",null),typeof Ke.path=="function"&&gr.attr("d",Ke.path)}}ft(Se,[D,R])},re.drawZeroLine=function(Me,Se,Ke){Ke=Ke||Ke;var Xe=Se._id+"zl",ot=re.shouldShowZeroLine(Me,Se,Ke.counterAxis),pt=Ke.layer.selectAll("path."+Xe).data(ot?[{x:0,id:Se._id}]:[]);pt.exit().remove(),pt.enter().append("path").classed(Xe,1).classed("zl",1).classed("crisp",Ke.crisp!==!1).each(function(){Ke.layer.selectAll("path").sort(function(vt,Ct){return N(vt.id,Ct.id)})}),pt.attr("transform",Ke.transFn).attr("d",Ke.path).call(r.stroke,Se.zerolinecolor||r.defaultLine).style("stroke-width",f.crispRound(Me,Se.zerolinewidth,Se._gw||1)+"px").style("display",null),ft(Se,[I])},re.drawLabels=function(Me,Se,Ke){Ke=Ke||{};var Xe=Me._fullLayout,ot=Se._id,pt=ot.charAt(0),vt=Ke.cls||ot+"tick",Ct=Ke.vals.filter(function(Tr){return Tr.text}),St=Ke.labelFns,Nt=Ke.secondary?0:Se.tickangle,ir=(Se._prevTickAngles||{})[vt],lr=Ke.layer.selectAll("g."+vt).data(Se.showticklabels?Ct:[],Ot),Yr=[];lr.enter().append("g").classed(vt,1).append("text").attr("text-anchor","middle").each(function(Tr){var et=T.select(this),Lt=Me._promises.length;et.call(n.positionText,St.xFn(Tr),St.yFn(Tr)).call(f.font,Tr.font,Tr.fontSize,Tr.fontColor).text(Tr.text).call(n.convertToTspans,Me),Me._promises[Lt]?Yr.push(Me._promises.pop().then(function(){Pr(et,Nt)})):Pr(et,Nt)}),ft(Se,[F]),lr.exit().remove(),Ke.repositionOnUpdate&&lr.each(function(Tr){T.select(this).select("text").call(n.positionText,St.xFn(Tr),St.yFn(Tr))});function Pr(Tr,et){Tr.each(function(Lt){var jt=T.select(this),sr=jt.select(".text-math-group"),Ir=St.anchorFn(Lt,et),Zr=Ke.transFn.call(jt.node(),Lt)+(c(et)&&+et!=0?" rotate("+et+","+St.xFn(Lt)+","+(St.yFn(Lt)-Lt.fontSize/2)+")":""),Lr=n.lineCount(jt),br=J*Lt.fontSize,Nr=St.heightFn(Lt,c(et)?+et:0,(Lr-1)*br);if(Nr&&(Zr+=a(0,Nr)),sr.empty()){var kn=jt.select("text");kn.attr({transform:Zr,"text-anchor":Ir}),kn.style("opacity",1),Se._adjustTickLabelsOverflow&&Se._adjustTickLabelsOverflow()}else{var _n=f.bBox(sr.node()).width,Wn=_n*{end:-.5,start:.5}[Ir];sr.attr("transform",Zr+a(Wn,0))}})}Se._adjustTickLabelsOverflow=function(){var Tr=Se.ticklabeloverflow;if(!(!Tr||Tr==="allow")){var et=Tr.indexOf("hide")!==-1,Lt=Se._id.charAt(0)==="x",jt=0,sr=Lt?Me._fullLayout.width:Me._fullLayout.height;if(Tr.indexOf("domain")!==-1){var Ir=e.simpleMap(Se.range,Se.r2l);jt=Se.l2p(Ir[0])+Se._offset,sr=Se.l2p(Ir[1])+Se._offset}var Zr=Math.min(jt,sr),Lr=Math.max(jt,sr),br=Se.side,Nr=1/0,kn=-1/0;lr.each(function(Xn){var Kn=T.select(this),Aa=Kn.select(".text-math-group");if(Aa.empty()){var Ta=f.bBox(Kn.node()),oi=0;Lt?(Ta.right>Lr||Ta.left<Zr)&&(oi=1):(Ta.bottom>Lr||Ta.top+(Se.tickangle?0:Xn.fontSize/4)<Zr)&&(oi=1);var $a=Kn.select("text");oi?et&&$a.style("opacity",0):($a.style("opacity",1),br==="bottom"||br==="right"?Nr=Math.min(Nr,Lt?Ta.top:Ta.left):Nr=-1/0,br==="top"||br==="left"?kn=Math.max(kn,Lt?Ta.bottom:Ta.right):kn=1/0)}});for(var _n in Xe._plots){var Wn=Xe._plots[_n];if(!(Se._id!==Wn.xaxis._id&&Se._id!==Wn.yaxis._id)){var Ln=Lt?Wn.yaxis:Wn.xaxis;Ln&&(Ln["_visibleLabelMin_"+Se._id]=Nr,Ln["_visibleLabelMax_"+Se._id]=kn)}}}},Se._hideCounterAxisInsideTickLabels=function(Tr){var et=Se._id.charAt(0)==="x",Lt=[];for(var jt in Xe._plots){var sr=Xe._plots[jt];Se._id!==sr.xaxis._id&&Se._id!==sr.yaxis._id||Lt.push(et?sr.yaxis:sr.xaxis)}Lt.forEach(function(Ir,Zr){Ir&&st(Ir)&&(Tr||[I,R,D,B,F]).forEach(function(Lr){var br=Lr.K==="tick"&&Lr.L==="text"&&Se.ticklabelmode==="period",Nr=Xe._plots[Se._mainSubplot],kn;Lr.K===I.K?kn=Nr.zerolinelayer.selectAll("."+Se._id+"zl"):Lr.K===R.K?kn=Nr.minorGridlayer.selectAll("."+Se._id):Lr.K===D.K?kn=Nr.gridlayer.selectAll("."+Se._id):kn=Nr[Se._id.charAt(0)+"axislayer"],kn.each(function(){var _n=T.select(this);Lr.L&&(_n=_n.selectAll(Lr.L)),_n.each(function(Wn){var Ln=Se.l2p(br?Pt(Wn):Wn.x)+Se._offset,Xn=T.select(this);Ln<Se["_visibleLabelMax_"+Ir._id]&&Ln>Se["_visibleLabelMin_"+Ir._id]?Xn.style("display","none"):Lr.K==="tick"&&!Zr&&Xn.style("display",null)})})})})},Pr(lr,ir+1?ir:Nt);function wr(){return Yr.length&&Promise.all(Yr)}var Jr=null;function gr(){if(Pr(lr,Nt),Ct.length&&pt==="x"&&!c(Nt)&&(Se.type!=="log"||String(Se.dtick).charAt(0)!=="D")){Jr=0;var Tr=0,et=[],Lt;if(lr.each(function(Ta){Tr=Math.max(Tr,Ta.fontSize);var oi=Se.l2p(Ta.x),$a=Xr(this),Va=f.bBox($a.node());et.push({top:0,bottom:10,height:10,left:oi-Va.width/2,right:oi+Va.width/2+2,width:Va.width+2})}),(Se.tickson==="boundaries"||Se.showdividers)&&!Ke.secondary){var jt=2;for(Se.ticks&&(jt+=Se.tickwidth/2),Lt=0;Lt<et.length;Lt++){var sr=Ct[Lt].xbnd,Ir=et[Lt];if(sr[0]!==null&&Ir.left-Se.l2p(sr[0])<jt||sr[1]!==null&&Se.l2p(sr[1])-Ir.right<jt){Jr=90;break}}}else{var Zr=Ct.length,Lr=Math.abs((Ct[Zr-1].x-Ct[0].x)*Se._m)/(Zr-1),br=Se.ticklabelposition||"",Nr=function(Ta){return br.indexOf(Ta)!==-1},kn=Nr("top"),_n=Nr("left"),Wn=Nr("right"),Ln=Nr("bottom"),Xn=Ln||_n||kn||Wn,Kn=Xn?(Se.tickwidth||0)+2*Z:0,Aa=Lr<Tr*2.5||Se.type==="multicategory"||Se._name==="realaxis";for(Lt=0;Lt<et.length-1;Lt++)if(e.bBoxIntersect(et[Lt],et[Lt+1],Kn)){Jr=Aa?90:30;break}}Jr&&Pr(lr,Jr)}}Se._selections&&(Se._selections[vt]=lr);var mr=[wr];Se.automargin&&Xe._redrawFromAutoMarginCount&&ir===90?(Jr=90,mr.push(function(){Pr(lr,ir)})):mr.push(gr),Se._tickAngles&&mr.push(function(){Se._tickAngles[vt]=Jr===null?c(Nt)?Nt:0:Jr});var Ur=Se._anchorAxis;Ur&&Ur.autorange&&st(Se)&&!U(Xe,Se._id)&&(Xe._insideTickLabelsAutorange||(Xe._insideTickLabelsAutorange={}),Xe._insideTickLabelsAutorange[Ur._name+".autorange"]=Ur.autorange,mr.push(function(){lr.each(function(et,Lt){var jt=Xr(this),sr=jt.select(".text-math-group");sr.empty()&&(Se._vals[Lt].bb=f.bBox(jt.node()))})}));var Hr=e.syncOrAsync(mr);return Hr&&Hr.then&&Me._promises.push(Hr),Hr};function Jt(Me,Se,Ke){var Xe=Se._id+"divider",ot=Ke.vals,pt=Ke.layer.selectAll("path."+Xe).data(ot,Ot);pt.exit().remove(),pt.enter().insert("path",":first-child").classed(Xe,1).classed("crisp",1).call(r.stroke,Se.dividercolor).style("stroke-width",f.crispRound(Me,Se.dividerwidth,1)+"px"),pt.attr("transform",Ke.transFn).attr("d",Ke.path)}re.getPxPosition=function(Me,Se){var Ke=Me._fullLayout._size,Xe=Se._id.charAt(0),ot=Se.side,pt;if(Se.anchor!=="free"?pt=Se._anchorAxis:Xe==="x"?pt={_offset:Ke.t+(1-(Se.position||0))*Ke.h,_length:0}:Xe==="y"&&(pt={_offset:Ke.l+(Se.position||0)*Ke.w,_length:0}),ot==="top"||ot==="left")return pt._offset;if(ot==="bottom"||ot==="right")return pt._offset+pt._length};function Bt(Me){var Se=Me.title.font.size,Ke=(Me.title.text.match(n.BR_TAG_ALL)||[]).length;return Me.title.hasOwnProperty("standoff")?Ke?Se*(K+Ke*J):Se*K:Ke?Se*(Ke+1)*J:Se}function qt(Me,Se){var Ke=Me._fullLayout,Xe=Se._id,ot=Xe.charAt(0),pt=Se.title.font.size,vt;if(Se.title.hasOwnProperty("standoff"))vt=Se._depth+Se.title.standoff+Bt(Se);else{var Ct=st(Se);if(Se.type==="multicategory")vt=Se._depth;else{var St=1.5*pt;Ct&&(St=.5*pt,Se.ticks==="outside"&&(St+=Se.ticklen)),vt=10+St+(Se.linewidth?Se.linewidth-1:0)}Ct||(ot==="x"?vt+=Se.side==="top"?pt*(Se.showticklabels?1:0):pt*(Se.showticklabels?1.5:.5):vt+=Se.side==="right"?pt*(Se.showticklabels?1:.5):pt*(Se.showticklabels?.5:0))}var Nt=re.getPxPosition(Me,Se),ir,lr,Yr;ot==="x"?(lr=Se._offset+Se._length/2,Yr=Se.side==="top"?Nt-vt:Nt+vt):(Yr=Se._offset+Se._length/2,lr=Se.side==="right"?Nt+vt:Nt-vt,ir={rotate:"-90",offset:0});var Pr;if(Se.type!=="multicategory"){var wr=Se._selections[Se._id+"tick"];if(Pr={selection:wr,side:Se.side},wr&&wr.node()&&wr.node().parentNode){var Jr=f.getTranslate(wr.node().parentNode);Pr.offsetLeft=Jr.x,Pr.offsetTop=Jr.y}Se.title.hasOwnProperty("standoff")&&(Pr.pad=0)}return t.draw(Me,Xe+"title",{propContainer:Se,propName:Se._name+".title.text",placeholder:Ke._dfltTitle[ot],avoid:Pr,transform:ir,attributes:{x:lr,y:Yr,"text-anchor":"middle"}})}re.shouldShowZeroLine=function(Me,Se,Ke){var Xe=e.simpleMap(Se.range,Se.r2l);return Xe[0]*Xe[1]<=0&&Se.zeroline&&(Se.type==="linear"||Se.type==="-")&&!(Se.rangebreaks&&Se.maskBreaks(0)===z)&&(rr(Se,0)||!er(Me,Se,Ke,Xe)||pr(Me,Se))},re.clipEnds=function(Me,Se){return Se.filter(function(Ke){return rr(Me,Ke.x)})};function rr(Me,Se){var Ke=Me.l2p(Se);return Ke>1&&Ke<Me._length-1}function er(Me,Se,Ke,Xe){var ot=Ke._mainAxis;if(!ot)return;var pt=Me._fullLayout,vt=Se._id.charAt(0),Ct=re.counterLetter(Se._id),St=Se._offset+(Math.abs(Xe[0])<Math.abs(Xe[1])==(vt==="x")?0:Se._length);function Nt(wr){if(!wr.showline||!wr.linewidth)return!1;var Jr=Math.max((wr.linewidth+Se.zerolinewidth)/2,1);function gr(Hr){return typeof Hr=="number"&&Math.abs(Hr-St)<Jr}if(gr(wr._mainLinePosition)||gr(wr._mainMirrorPosition))return!0;var mr=wr._linepositions||{};for(var Ur in mr)if(gr(mr[Ur][0])||gr(mr[Ur][1]))return!0}var ir=pt._plots[Ke._mainSubplot];if(!(ir.mainplotinfo||ir).overlays.length)return Nt(Ke);for(var lr=re.list(Me,Ct),Yr=0;Yr<lr.length;Yr++){var Pr=lr[Yr];if(Pr._mainAxis===ot&&Nt(Pr))return!0}}function pr(Me,Se){for(var Ke=Me._fullData,Xe=Se._mainSubplot,ot=Se._id.charAt(0),pt=0;pt<Ke.length;pt++){var vt=Ke[pt];if(vt.visible===!0&&vt.xaxis+vt.yaxis===Xe&&(A.traceIs(vt,"bar-like")&&vt.orientation==={x:"h",y:"v"}[ot]||vt.fill&&vt.fill.charAt(vt.fill.length-1)===ot))return!0}return!1}function Xr(Me){var Se=T.select(Me),Ke=Se.select(".text-math-group");return Ke.empty()?Se.select("text"):Ke}re.allowAutoMargin=function(Me){for(var Se=re.list(Me,"",!0),Ke=0;Ke<Se.length;Ke++){var Xe=Se[Ke];Xe.automargin&&(M.allowAutoMargin(Me,hn(Xe)),Xe.mirror&&M.allowAutoMargin(Me,$r(Xe))),A.getComponentMethod("rangeslider","isVisible")(Xe)&&M.allowAutoMargin(Me,nt(Xe))}};function hn(Me){return Me._id+".automargin"}function $r(Me){return hn(Me)+".mirror"}function nt(Me){return Me._id+".rangeslider"}re.swap=function(Me,Se){for(var Ke=Gt(Me,Se),Xe=0;Xe<Ke.length;Xe++)Ht(Me,Ke[Xe].x,Ke[Xe].y)};function Gt(Me,Se){var Ke=[],Xe,ot;for(Xe=0;Xe<Se.length;Xe++){var pt=[],vt=Me._fullData[Se[Xe]].xaxis,Ct=Me._fullData[Se[Xe]].yaxis;if(!(!vt||!Ct)){for(ot=0;ot<Ke.length;ot++)(Ke[ot].x.indexOf(vt)!==-1||Ke[ot].y.indexOf(Ct)!==-1)&&pt.push(ot);if(!pt.length){Ke.push({x:[vt],y:[Ct]});continue}var St=Ke[pt[0]],Nt;if(pt.length>1)for(ot=1;ot<pt.length;ot++)Nt=Ke[pt[ot]],Kt(St.x,Nt.x),Kt(St.y,Nt.y);Kt(St.x,[vt]),Kt(St.y,[Ct])}}return Ke}function Kt(Me,Se){for(var Ke=0;Ke<Se.length;Ke++)Me.indexOf(Se[Ke])===-1&&Me.push(Se[Ke])}function Ht(Me,Se,Ke){var Xe=[],ot=[],pt=Me.layout,vt,Ct;for(vt=0;vt<Se.length;vt++)Xe.push(re.getFromId(Me,Se[vt]));for(vt=0;vt<Ke.length;vt++)ot.push(re.getFromId(Me,Ke[vt]));var St=Object.keys(o),Nt=["anchor","domain","overlaying","position","side","tickangle","editType"],ir=["linear","log"];for(vt=0;vt<St.length;vt++){var lr=St[vt],Yr=Xe[0][lr],Pr=ot[0][lr],wr=!0,Jr=!1,gr=!1;if(!(lr.charAt(0)==="_"||typeof Yr=="function"||Nt.indexOf(lr)!==-1)){for(Ct=1;Ct<Xe.length&&wr;Ct++){var mr=Xe[Ct][lr];lr==="type"&&ir.indexOf(Yr)!==-1&&ir.indexOf(mr)!==-1&&Yr!==mr?Jr=!0:mr!==Yr&&(wr=!1)}for(Ct=1;Ct<ot.length&&wr;Ct++){var Ur=ot[Ct][lr];lr==="type"&&ir.indexOf(Pr)!==-1&&ir.indexOf(Ur)!==-1&&Pr!==Ur?gr=!0:ot[Ct][lr]!==Pr&&(wr=!1)}wr&&(Jr&&(pt[Xe[0]._name].type="linear"),gr&&(pt[ot[0]._name].type="linear"),_r(pt,lr,Xe,ot,Me._fullLayout._dfltTitle))}}for(vt=0;vt<Me._fullLayout.annotations.length;vt++){var Hr=Me._fullLayout.annotations[vt];Se.indexOf(Hr.xref)!==-1&&Ke.indexOf(Hr.yref)!==-1&&e.swapAttrs(pt.annotations[vt],["?"])}}function _r(Me,Se,Ke,Xe,ot){var pt=e.nestedProperty,vt=pt(Me[Ke[0]._name],Se).get(),Ct=pt(Me[Xe[0]._name],Se).get(),St;for(Se==="title"&&(vt&&vt.text===ot.x&&(vt.text=ot.y),Ct&&Ct.text===ot.y&&(Ct.text=ot.x)),St=0;St<Ke.length;St++)pt(Me,Ke[St]._name+"."+Se).set(Ct);for(St=0;St<Xe.length;St++)pt(Me,Xe[St]._name+"."+Se).set(vt)}function tt(Me){return Me._id==="angularaxis"}function je(Me,Se){for(var Ke=Se._rangebreaks.length,Xe=0;Xe<Ke;Xe++){var ot=Se._rangebreaks[Xe];if(Me>=ot.min&&Me<ot.max)return ot.max}return Me}function st(Me){return(Me.ticklabelposition||"").indexOf("inside")!==-1}function ft(Me,Se){st(Me._anchorAxis||{})&&Me._hideCounterAxisInsideTickLabels&&Me._hideCounterAxisInsideTickLabels(Se)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib"),M=g("../../constants/numerical").BADNUM,A=c.isArrayOrTypedArray,e=c.isDateTime,a=c.cleanNumber,n=Math.round;ne.exports=function(y,v,x){var l=y,_=x.noMultiCategory;if(A(l)&&!l.length)return"-";if(!_&&p(l))return"multicategory";if(_&&Array.isArray(l[0])){for(var s=[],w=0;w<l.length;w++)if(A(l[w]))for(var b=0;b<l[w].length;b++)s.push(l[w][b]);l=s}if(f(l,v))return"date";var h=x.autotypenumbers!=="strict";return i(l,h)?"category":r(l,h)?"linear":"-"};function t(d,y){return y?T(d):typeof d=="number"}function r(d,y){for(var v=d.length,x=0;x<v;x++)if(t(d[x],y))return!0;return!1}function f(d,y){for(var v=d.length,x=o(v),l=0,_=0,s={},w=0;w<v;w+=x){var b=n(w),h=d[b],m=String(h);s[m]||(s[m]=1,e(h,y)&&l++,T(h)&&_++)}return l>_*2}function o(d){return Math.max(1,(d-1)/1e3)}function i(d,y){for(var v=d.length,x=o(v),l=0,_=0,s={},w=0;w<v;w+=x){var b=n(w),h=d[b],m=String(h);if(!s[m]){s[m]=1;var u=typeof h;u==="boolean"?_++:(y?a(h)!==M:u==="number")?l++:u==="string"&&_++}}return _>l*2}function p(d){return A(d[0])&&A(d[1])}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../registry"),M=g("../../lib"),A=g("../../plot_api/plot_template"),e=g("../array_container_defaults"),a=g("./layout_attributes"),n=g("./tick_value_defaults"),t=g("./tick_mark_defaults"),r=g("./tick_label_defaults"),f=g("./prefix_suffix_defaults"),o=g("./category_order_defaults"),i=g("./line_grid_defaults"),p=g("./set_convert"),d=g("./constants").WEEKDAY_PATTERN,y=g("./constants").HOUR_PATTERN;ne.exports=function(s,w,b,h,m){var u=h.letter,L=h.font||{},S=h.splomStash||{},k=b("visible",!h.visibleDflt),P=w._template||{},z=w.type||P.type||"-",I;if(z==="date"){var D=c.getComponentMethod("calendars","handleDefaults");D(s,w,"calendar",h.calendar),h.noTicklabelmode||(I=b("ticklabelmode"))}var R="";(!h.noTicklabelposition||z==="multicategory")&&(R=M.coerce(s,w,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:I==="period"?["outside","inside"]:u==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),h.noTicklabeloverflow||b("ticklabeloverflow",R.indexOf("inside")!==-1?"hide past domain":z==="category"||z==="multicategory"?"allow":"hide past div"),p(w,m);var B=!w.isValidRange(s.range);B&&h.reverseDflt&&(B="reversed");var F=b("autorange",B);F&&(z==="linear"||z==="-")&&b("rangemode"),b("range"),w.cleanRange(),o(s,w,b,h),z!=="category"&&!h.noHover&&b("hoverformat");var V=b("color"),Y=V!==a.color.dflt?V:L.color,K=S.label||m._dfltTitle[u];if(f(s,w,b,z,h),!k)return w;b("title.text",K),M.coerceFont(b,"title.font",{family:L.family,size:M.bigFont(L.size),color:Y}),n(s,w,b,z);var J=h.hasMinor;if(J&&(A.newContainer(w,"minor"),n(s,w,b,z,{isMinor:!0})),r(s,w,b,z,h),t(s,w,b,h),J){var G=h.isMinor;h.isMinor=!0,t(s,w,b,h),h.isMinor=G}i(s,w,b,{dfltColor:V,bgColor:h.bgColor,showGrid:h.showGrid,hasMinor:J,attributes:a}),J&&!w.minor.ticks&&!w.minor.showgrid&&delete w.minor,(w.showline||w.ticks)&&b("mirror"),h.automargin&&b("automargin");var Z=z==="multicategory";if(!h.noTickson&&(z==="category"||Z)&&(w.ticks||w.showgrid)){var re;Z&&(re="boundaries");var se=b("tickson",re);se==="boundaries"&&delete w.ticklabelposition}if(Z){var oe=b("showdividers");oe&&(b("dividercolor"),b("dividerwidth"))}if(z==="date")if(e(s,w,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:v}),!w.rangebreaks.length)delete w.rangebreaks;else{for(var N=0;N<w.rangebreaks.length;N++)if(w.rangebreaks[N].pattern===d){w._hasDayOfWeekBreaks=!0;break}if(p(w,m),m._has("scattergl")||m._has("splom"))for(var U=0;U<h.data.length;U++){var q=h.data[U];(q.type==="scattergl"||q.type==="splom")&&(q.visible=!1,M.warn(q.type+" traces do not work on axes with rangebreaks. Setting trace "+q.index+" to `visible: false`."))}}return w};function v(_,s,w){function b(I,D){return M.coerce(_,s,a.rangebreaks,I,D)}var h=b("enabled");if(h){var m=b("bounds");if(m&&m.length>=2){var u="",L,S;if(m.length===2){for(L=0;L<2;L++)if(S=l(m[L]),S){u=d;break}}var k=b("pattern",u);if(k===d)for(L=0;L<2;L++)S=l(m[L]),S&&(s.bounds[L]=m[L]=S-1);if(k)for(L=0;L<2;L++)switch(S=m[L],k){case d:if(!T(S)){s.enabled=!1;return}if(S=+S,S!==Math.floor(S)||S<0||S>=7){s.enabled=!1;return}s.bounds[L]=m[L]=S;break;case y:if(!T(S)){s.enabled=!1;return}if(S=+S,S<0||S>24){s.enabled=!1;return}s.bounds[L]=m[L]=S;break}if(w.autorange===!1){var P=w.range;if(P[0]<P[1]){if(m[0]<P[0]&&m[1]>P[1]){s.enabled=!1;return}}else if(m[0]>P[0]&&m[1]<P[1]){s.enabled=!1;return}}}else{var z=b("values");if(z&&z.length)b("dvalue");else{s.enabled=!1;return}}}}var x={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function l(_){if(typeof _=="string")return x[_.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(g,ne,ae){var T=g("../../constants/docs"),c=T.FORMAT_LINK,M=T.DATE_FORMAT_LINK;function A(n,t){return{valType:"string",dflt:"",editType:"none",description:(t?e:a)("hover text",n)+["By default the values are formatted using "+(t?"generic number format":"`"+n+"axis.hoverformat`")+"."].join(" ")}}function e(n,t){return["Sets the "+n+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+c+"."].join(" ")}function a(n,t){return e(n,t)+[" And for dates see: "+M+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ne.exports={axisHoverFormat:A,descriptionOnlyNumbers:e,descriptionWithDates:a}},{"../../constants/docs":474}],558:[function(g,ne,ae){var T=g("../../registry"),c=g("./constants");ae.id2name=function(e){if(!(typeof e!="string"||!e.match(c.AX_ID_PATTERN))){var a=e.split(" ")[0].substr(1);return a==="1"&&(a=""),e.charAt(0)+"axis"+a}},ae.name2id=function(e){if(!!e.match(c.AX_NAME_PATTERN)){var a=e.substr(5);return a==="1"&&(a=""),e.charAt(0)+a}},ae.cleanId=function(e,a,n){var t=/( domain)$/.test(e);if(!(typeof e!="string"||!e.match(c.AX_ID_PATTERN))&&!(a&&e.charAt(0)!==a)&&!(t&&!n)){var r=e.split(" ")[0].substr(1).replace(/^0+/,"");return r==="1"&&(r=""),e.charAt(0)+r+(t&&n?" domain":"")}},ae.list=function(A,e,a){var n=A._fullLayout;if(!n)return[];var t=ae.listIds(A,e),r=new Array(t.length),f;for(f=0;f<t.length;f++){var o=t[f];r[f]=n[o.charAt(0)+"axis"+o.substr(1)]}if(!a){var i=n._subplots.gl3d||[];for(f=0;f<i.length;f++){var p=n[i[f]];e?r.push(p[e+"axis"]):r.push(p.xaxis,p.yaxis,p.zaxis)}}return r},ae.listIds=function(A,e){var a=A._fullLayout;if(!a)return[];var n=a._subplots;return e?n[e+"axis"]:n.xaxis.concat(n.yaxis)},ae.getFromId=function(A,e,a){var n=A._fullLayout;return e=e===void 0||typeof e!="string"?e:e.replace(" domain",""),a==="x"?e=e.replace(/y[0-9]*/,""):a==="y"&&(e=e.replace(/x[0-9]*/,"")),n[ae.id2name(e)]},ae.getFromTrace=function(A,e,a){var n=A._fullLayout,t=null;if(T.traceIs(e,"gl3d")){var r=e.scene;r.substr(0,5)==="scene"&&(t=n[r][a+"axis"])}else t=ae.getFromId(A,e[a+"axis"]||a);return t},ae.idSort=function(A,e){var a=A.charAt(0),n=e.charAt(0);return a!==n?a>n?1:-1:+(A.substr(1)||1)-+(e.substr(1)||1)},ae.ref2id=function(A){return/^[xyz]/.test(A)?A.split(" ")[0]:!1};function M(A,e){if(e&&e.length){for(var a=0;a<e.length;a++)if(e[a][A])return!0}return!1}ae.isLinked=function(A,e){return M(e,A._axisMatchGroups)||M(e,A._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(g,ne,ae){function T(c,M){var A=M.dataAttr||c._id.charAt(0),e={},a,n,t;if(M.axData)a=M.axData;else for(a=[],n=0;n<M.data.length;n++){var r=M.data[n];r[A+"axis"]===c._id&&a.push(r)}for(n=0;n<a.length;n++){var f=a[n][A];for(t=0;t<f.length;t++){var o=f[t];o!=null&&(e[o]=1)}}return Object.keys(e)}ne.exports=function(M,A,e,a){if(A.type==="category"){var n=M.categoryarray,t=Array.isArray(n)&&n.length>0,r;t&&(r="array");var f=e("categoryorder",r),o;f==="array"&&(o=e("categoryarray")),!t&&f==="array"&&(f=A.categoryorder="trace"),f==="trace"?A._initialCategories=[]:f==="array"?A._initialCategories=o.slice():(o=T(A,a).sort(),f==="category ascending"?A._initialCategories=o:f==="category descending"&&(A._initialCategories=o.reverse()))}}},{}],560:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib"),M=g("../../constants/numerical"),A=M.ONEDAY,e=M.ONEWEEK;ae.dtick=function(a,n){var t=n==="log",r=n==="date",f=n==="category",o=r?A:1;if(!a)return o;if(T(a))return a=Number(a),a<=0?o:f?Math.max(1,Math.round(a)):r?Math.max(.1,a):a;if(typeof a!="string"||!(r||t))return o;var i=a.charAt(0),p=a.substr(1);return p=T(p)?Number(p):0,p<=0||!(r&&i==="M"&&p===Math.round(p)||t&&i==="L"||t&&i==="D"&&(p===1||p===2))?o:a},ae.tick0=function(a,n,t,r){if(n==="date")return c.cleanDate(a,c.dateTick0(t,r%e==0?1:0));if(!(r==="D1"||r==="D2"))return T(a)?Number(a):0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(g,ne,ae){var T=g("../../lib/regex").counter;ne.exports={idRegex:{x:T("x","( domain)?"),y:T("y","( domain)?")},attrRegex:T("[xy]axis"),xAxisMatch:T("xaxis"),yAxisMatch:T("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(g,ne,ae){var T=g("../../lib"),c=g("./autorange"),M=g("./axis_ids").id2name,A=g("./layout_attributes"),e=g("./scale_zoom"),a=g("./set_convert"),n=g("../../constants/numerical").ALMOST_EQUAL,t=g("../../constants/alignment").FROM_BL;ae.handleDefaults=function(v,x,l){var _=l.axIds,s=l.axHasImage,w=x._axisConstraintGroups=[],b=x._axisMatchGroups=[],h,m,u,L,S,k,P,z;for(h=0;h<_.length;h++)L=M(_[h]),S=v[L],k=x[L],r(S,k,{axIds:_,layoutOut:x,hasImage:s[L]});function I(G,Z){for(h=0;h<G.length;h++){m=G[h];for(u in m)x[M(u)][Z]=m}}for(I(b,"_matchGroup"),h=0;h<w.length;h++){m=w[h];for(u in m)if(k=x[M(u)],k.fixedrange){for(var D in m){var R=M(D);(v[R]||{}).fixedrange===!1&&T.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),x[R].fixedrange=!0}break}}for(h=0;h<w.length;){m=w[h];for(u in m){k=x[M(u)],k._matchGroup&&Object.keys(k._matchGroup).length===Object.keys(m).length&&(w.splice(h,1),h--);break}h++}I(w,"_constraintGroup");var B=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],F=!1,V=!1;function Y(){z=k[P],P==="rangebreaks"&&(V=k._hasDayOfWeekBreaks)}for(h=0;h<b.length;h++){m=b[h];for(var K=0;K<B.length;K++){P=B[K],z=null;var J;for(u in m)if(L=M(u),S=v[L],k=x[L],P in k){if(!k.matches&&(J=k,P in S)){Y();break}z===null&&P in S&&Y()}if(P==="range"&&z&&(F=!0),P==="autorange"&&z===null&&F&&(z=!1),z===null&&P in J&&(z=J[P]),z!==null)for(u in m)k=x[M(u)],k[P]=P==="range"?z.slice():z,P==="rangebreaks"&&(k._hasDayOfWeekBreaks=V,a(k,x))}}};function r(v,x,l){var _=l.axIds,s=l.layoutOut,w=l.hasImage,b=s._axisConstraintGroups,h=s._axisMatchGroups,m=x._id,u=m.charAt(0),L=((s._splomAxes||{})[u]||{})[m]||{},S=x._id,k=S.charAt(0)==="x";x._matchGroup=null,x._constraintGroup=null;function P(oe,N){return T.coerce(v,x,A,oe,N)}P("constrain",w?"domain":"range"),T.coerce(v,x,{constraintoward:{valType:"enumerated",values:k?["left","center","right"]:["bottom","middle","top"],dflt:k?"center":"middle"}},"constraintoward");var z=x.type,I,D,R=[];for(I=0;I<_.length;I++)if(D=_[I],D!==S){var B=s[M(D)];B.type===z&&R.push(D)}var F=o(b,S);if(F){var V=[];for(I=0;I<R.length;I++)D=R[I],F[D]||V.push(D);R=V}var Y=R.length,K,J;Y&&(v.matches||L.matches)&&(K=T.coerce(v,x,{matches:{valType:"enumerated",values:R,dflt:R.indexOf(L.matches)!==-1?L.matches:void 0}},"matches"));var G=w&&!k?x.anchor:void 0;if(Y&&!K&&(v.scaleanchor||G)&&(J=T.coerce(v,x,{scaleanchor:{valType:"enumerated",values:R}},"scaleanchor",G)),K){x._matchGroup=i(h,S,K,1);var Z=s[M(K)],re=f(s,x)/f(s,Z);k!==(K.charAt(0)==="x")&&(re=(k?"x":"y")+re),i(b,S,K,re)}else v.matches&&_.indexOf(v.matches)!==-1&&T.warn("ignored "+x._name+'.matches: "'+v.matches+'" to avoid an infinite loop');if(J){var se=P("scaleratio");se||(se=x.scaleratio=1),i(b,S,J,se)}else v.scaleanchor&&_.indexOf(v.scaleanchor)!==-1&&T.warn("ignored "+x._name+'.scaleanchor: "'+v.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function f(v,x){var l=x.domain;return l||(l=v[M(x.overlaying)].domain),l[1]-l[0]}function o(v,x){for(var l=0;l<v.length;l++)if(v[l][x])return v[l];return null}function i(v,x,l,_){var s,w,b,h,m,u=o(v,x);u===null?(u={},u[x]=1,m=v.length,v.push(u)):m=v.indexOf(u);var L=Object.keys(u);for(s=0;s<v.length;s++)if(b=v[s],s!==m&&b[l]){var S=b[l];for(w=0;w<L.length;w++)h=L[w],b[h]=p(S,p(_,u[h]));v.splice(m,1);return}if(_!==1)for(w=0;w<L.length;w++){var k=L[w];u[k]=p(_,u[k])}u[l]=1}function p(v,x){var l="",_="",s,w;typeof v=="string"&&(l=v.match(/^[xy]*/)[0],s=l.length,v=+v.substr(s)),typeof x=="string"&&(_=x.match(/^[xy]*/)[0],w=_.length,x=+x.substr(w));var b=v*x;return!s&&!w?b:!s||!w||l.charAt(0)===_.charAt(0)?l+_+v*x:s===w?b:(s>w?l.substr(w):_.substr(s))+b}function d(v,x){for(var l=x._size,_=l.h/l.w,s={},w=Object.keys(v),b=0;b<w.length;b++){var h=w[b],m=v[h];if(typeof m=="string"){var u=m.match(/^[xy]*/)[0],L=u.length;m=+m.substr(L);for(var S=u.charAt(0)==="y"?_:1/_,k=0;k<L;k++)m*=S}s[h]=m}return s}ae.enforce=function(x){var l=x._fullLayout,_=l._axisConstraintGroups||[],s,w,b,h,m,u,L,S;for(s=0;s<_.length;s++){b=d(_[s],l);var k=Object.keys(b),P=1/0,z=0,I=1/0,D={},R={},B=!1;for(w=0;w<k.length;w++)h=k[w],R[h]=m=l[M(h)],m._inputDomain?m.domain=m._inputDomain.slice():m._inputDomain=m.domain.slice(),m._inputRange||(m._inputRange=m.range.slice()),m.setScale(),D[h]=u=Math.abs(m._m)/b[h],P=Math.min(P,u),(m.constrain==="domain"||!m._constraintShrinkable)&&(I=Math.min(I,u)),delete m._constraintShrinkable,z=Math.max(z,u),m.constrain==="domain"&&(B=!0);if(!(P>n*z&&!B)){for(w=0;w<k.length;w++)if(h=k[w],u=D[h],m=R[h],L=m.constrain,u!==I||L==="domain")if(S=u/I,L==="range")e(m,S);else{var F=m._inputDomain,V=(m.domain[1]-m.domain[0])/(F[1]-F[0]),Y=(m.r2l(m.range[1])-m.r2l(m.range[0]))/(m.r2l(m._inputRange[1])-m.r2l(m._inputRange[0]));if(S/=V,S*Y<1){m.domain=m._input.domain=F.slice(),e(m,S);continue}if(Y<1&&(m.range=m._input.range=m._inputRange.slice(),S*=Y),m.autorange){var K=m.r2l(m.range[0]),J=m.r2l(m.range[1]),G=(K+J)/2,Z=G,re=G,se=Math.abs(J-G),oe=G-se*S*1.0001,N=G+se*S*1.0001,U=c.makePadFn(l,m,0),q=c.makePadFn(l,m,1);y(m,S);var Q=Math.abs(m._m),W=c.concatExtremes(x,m),X=W.min,te=W.max,ee,ie;for(ie=0;ie<X.length;ie++)ee=X[ie].val-U(X[ie])/Q,ee>oe&&ee<Z&&(Z=ee);for(ie=0;ie<te.length;ie++)ee=te[ie].val+q(te[ie])/Q,ee<N&&ee>re&&(re=ee);var le=(re-Z)/(2*se);S/=le,Z=m.l2r(Z),re=m.l2r(re),m.range=m._input.range=K<J?[Z,re]:[re,Z]}y(m,S)}}}},ae.getAxisGroup=function(x,l){for(var _=x._axisMatchGroups,s=0;s<_.length;s++){var w=_[s];if(w[l])return"g"+s}return l},ae.clean=function(x,l){if(l._inputDomain){for(var _=!1,s=l._id,w=x._fullLayout._axisConstraintGroups,b=0;b<w.length;b++)if(w[b][s]){_=!0;break}(!_||l.constrain!=="domain")&&(l._input.domain=l.domain=l._inputDomain,delete l._inputDomain)}};function y(v,x){var l=v._inputDomain,_=t[v.constraintoward],s=l[0]+(l[1]-l[0])*_;v.domain=v._input.domain=[s+(l[0]-s)/x,s+(l[1]-s)/x],v.setScale()}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=c.numberFormat,A=g("tinycolor2"),e=g("has-passive-events"),a=g("../../registry"),n=c.strTranslate,t=g("../../lib/svg_text_utils"),r=g("../../components/color"),f=g("../../components/drawing"),o=g("../../components/fx"),i=g("./axes"),p=g("../../lib/setcursor"),d=g("../../components/dragelement"),y=g("../../components/dragelement/helpers"),v=y.selectingOrDrawing,x=y.freeMode,l=g("../../constants/alignment").FROM_TL,_=g("../../lib/clear_gl_canvases"),s=g("../../plot_api/subroutines").redrawReglTraces,w=g("../plots"),b=g("./axis_ids").getFromId,h=g("./select").prepSelect,m=g("./select").clearSelect,u=g("./select").selectOnClick,L=g("./scale_zoom"),S=g("./constants"),k=S.MINDRAG,P=S.MINZOOM,z=!0;function I(ee,ie,le,ye,ue,pe,ge,Te){var _e=ee._fullLayout._zoomlayer,De=ge+Te==="nsew",Oe=(ge+Te).length===1,Ue,xe,Pe,Ve,Qe,Fe,Le,Ne,dt,Dt,Xt,Tt,zt,Ut,Et,Mt,rt,ct,Ze,ke,Ge,Je,it;function Pt(){if(Ue=ie.xaxis,xe=ie.yaxis,dt=Ue._length,Dt=xe._length,Le=Ue._offset,Ne=xe._offset,Pe={},Pe[Ue._id]=Ue,Ve={},Ve[xe._id]=xe,ge&&Te)for(var Pr=ie.overlays,wr=0;wr<Pr.length;wr++){var Jr=Pr[wr].xaxis;Pe[Jr._id]=Jr;var gr=Pr[wr].yaxis;Ve[gr._id]=gr}Qe=te(Pe),Fe=te(Ve),zt=B(Qe,Te),Ut=B(Fe,ge),Et=!Ut&&!zt,Tt=W(ee,ee._fullLayout._axisMatchGroups,Pe,Ve),Xt=W(ee,ee._fullLayout._axisConstraintGroups,Pe,Ve,Tt);var mr=Xt.isSubplotConstrained||Tt.isSubplotConstrained;Mt=Te||mr,rt=ge||mr;var Ur=ee._fullLayout;ct=Ur._has("scattergl"),Ze=Ur._has("splom"),ke=Ur._has("svg")}Pt();var At=J(Ut+zt,ee._fullLayout.dragmode,De),Ot=R(ie,ge+Te+"drag",At,le,ye,ue,pe);if(Et&&!De)return Ot.onmousedown=null,Ot.style.pointerEvents="none",Ot;var Jt={element:Ot,gd:ee,plotinfo:ie};Jt.prepFn=function(Pr,wr,Jr){var gr=Jt.dragmode,mr=ee._fullLayout.dragmode;mr!==gr&&(Jt.dragmode=mr),Pt(),Je=ee._fullLayout._invScaleX,it=ee._fullLayout._invScaleY,Et||(De?Pr.shiftKey?mr==="pan"?mr="zoom":v(mr)||(mr="pan"):Pr.ctrlKey&&(mr="pan"):mr="pan"),x(mr)?Jt.minDrag=1:Jt.minDrag=void 0,v(mr)?(Jt.xaxes=Qe,Jt.yaxes=Fe,h(Pr,wr,Jr,Jt,mr)):(Jt.clickFn=qt,v(gr)&&Bt(),Et||(mr==="zoom"?(Jt.moveFn=tt,Jt.doneFn=st,Jt.minDrag=1,_r(Pr,wr,Jr)):mr==="pan"&&(Jt.moveFn=ot,Jt.doneFn=St))),ee._fullLayout._redrag=function(){var Ur=ee._dragdata;if(Ur&&Ur.element===Ot){var Hr=ee._fullLayout.dragmode;v(Hr)||(Pt(),Nt([0,0,dt,Dt]),Jt.moveFn(Ur.dx,Ur.dy))}}};function Bt(){Jt.plotinfo.selection=!1,m(ee)}function qt(Pr,wr){var Jr=Jt.gd;if(Jr._fullLayout._activeShapeIndex>=0){Jr._fullLayout._deactivateShape(Jr);return}var gr=Jr._fullLayout.clickmode;if(oe(Jr),Pr===2&&!Oe&&Ct(),De)gr.indexOf("select")>-1&&u(wr,Jr,Qe,Fe,ie.id,Jt),gr.indexOf("event")>-1&&o.click(Jr,wr,ie.id);else if(Pr===1&&Oe){var mr=ge?xe:Ue,Ur=ge==="s"||Te==="w"?0:1,Hr=mr._name+".range["+Ur+"]",Tr=F(mr,Ur),et="left",Lt="middle";if(mr.fixedrange)return;ge?(Lt=ge==="n"?"top":"bottom",mr.side==="right"&&(et="right")):Te==="e"&&(et="right"),Jr._context.showAxisRangeEntryBoxes&&T.select(Ot).call(t.makeEditable,{gd:Jr,immediate:!0,background:Jr._fullLayout.paper_bgcolor,text:String(Tr),fill:mr.tickfont?mr.tickfont.color:"#444",horizontalAlign:et,verticalAlign:Lt}).on("edit",function(jt){var sr=mr.d2r(jt);sr!==void 0&&a.call("_guiRelayout",Jr,Hr,sr)})}}d.init(Jt);var rr,er,pr,Xr,hn,$r,nt,Gt,Kt,Ht;function _r(Pr,wr,Jr){var gr=Ot.getBoundingClientRect();rr=wr-gr.left,er=Jr-gr.top,ee._fullLayout._calcInverseTransform(ee);var mr=c.apply3DTransform(ee._fullLayout._invTransform)(rr,er);rr=mr[0],er=mr[1],pr={l:rr,r:rr,w:0,t:er,b:er,h:0},Xr=ee._hmpixcount?ee._hmlumcount/ee._hmpixcount:A(ee._fullLayout.plot_bgcolor).getLuminance(),hn="M0,0H"+dt+"V"+Dt+"H0V0",$r=!1,nt="xy",Ht=!1,Gt=G(_e,Xr,Le,Ne,hn),Kt=Z(_e,Le,Ne)}function tt(Pr,wr){if(ee._transitioningWithDuration)return!1;var Jr=Math.max(0,Math.min(dt,Je*Pr+rr)),gr=Math.max(0,Math.min(Dt,it*wr+er)),mr=Math.abs(Jr-rr),Ur=Math.abs(gr-er);pr.l=Math.min(rr,Jr),pr.r=Math.max(rr,Jr),pr.t=Math.min(er,gr),pr.b=Math.max(er,gr);function Hr(){nt="",pr.r=pr.l,pr.t=pr.b,Kt.attr("d","M0,0Z")}if(Xt.isSubplotConstrained)mr>P||Ur>P?(nt="xy",mr/dt>Ur/Dt?(Ur=mr*Dt/dt,er>gr?pr.t=er-Ur:pr.b=er+Ur):(mr=Ur*dt/Dt,rr>Jr?pr.l=rr-mr:pr.r=rr+mr),Kt.attr("d",Q(pr))):Hr();else if(Tt.isSubplotConstrained)if(mr>P||Ur>P){nt="xy";var Tr=Math.min(pr.l/dt,(Dt-pr.b)/Dt),et=Math.max(pr.r/dt,(Dt-pr.t)/Dt);pr.l=Tr*dt,pr.r=et*dt,pr.b=(1-Tr)*Dt,pr.t=(1-et)*Dt,Kt.attr("d",Q(pr))}else Hr();else!Ut||Ur<Math.min(Math.max(mr*.6,k),P)?mr<k||!zt?Hr():(pr.t=0,pr.b=Dt,nt="x",Kt.attr("d",U(pr,er))):!zt||mr<Math.min(Ur*.6,P)?(pr.l=0,pr.r=dt,nt="y",Kt.attr("d",q(pr,rr))):(nt="xy",Kt.attr("d",Q(pr)));pr.w=pr.r-pr.l,pr.h=pr.b-pr.t,nt&&(Ht=!0),ee._dragged=Ht,re(Gt,Kt,pr,hn,$r,Xr),je(),ee.emit("plotly_relayouting",Ge),$r=!0}function je(){Ge={},(nt==="xy"||nt==="x")&&(V(Qe,pr.l/dt,pr.r/dt,Ge,Xt.xaxes),pt("x",Ge)),(nt==="xy"||nt==="y")&&(V(Fe,(Dt-pr.b)/Dt,(Dt-pr.t)/Dt,Ge,Xt.yaxes),pt("y",Ge))}function st(){je(),oe(ee),St(),N(ee)}var ft=[0,0,dt,Dt],Me=null,Se=S.REDRAWDELAY,Ke=ie.mainplot?ee._fullLayout._plots[ie.mainplot]:ie;function Xe(Pr){if(!ee._context._scrollZoom.cartesian&&!ee._fullLayout._enablescrollzoom)return;if(Bt(),ee._transitioningWithDuration){Pr.preventDefault(),Pr.stopPropagation();return}Pt(),clearTimeout(Me);var wr=-Pr.deltaY;if(isFinite(wr)||(wr=Pr.wheelDelta/10),!isFinite(wr)){c.log("Did not find wheel motion attributes: ",Pr);return}var Jr=Math.exp(-Math.min(Math.max(wr,-20),20)/200),gr=Ke.draglayer.select(".nsewdrag").node().getBoundingClientRect(),mr=(Pr.clientX-gr.left)/gr.width,Ur=(gr.bottom-Pr.clientY)/gr.height,Hr;function Tr(et,Lt,jt){if(et.fixedrange)return;var sr=c.simpleMap(et.range,et.r2l),Ir=sr[0]+(sr[1]-sr[0])*Lt;function Zr(Lr){return et.l2r(Ir+(Lr-Ir)*jt)}et.range=sr.map(Zr)}if(Mt){for(Te||(mr=.5),Hr=0;Hr<Qe.length;Hr++)Tr(Qe[Hr],mr,Jr);pt("x"),ft[2]*=Jr,ft[0]+=ft[2]*mr*(1/Jr-1)}if(rt){for(ge||(Ur=.5),Hr=0;Hr<Fe.length;Hr++)Tr(Fe[Hr],Ur,Jr);pt("y"),ft[3]*=Jr,ft[1]+=ft[3]*(1-Ur)*(1/Jr-1)}Nt(ft),vt(),ee.emit("plotly_relayouting",Ge),Me=setTimeout(function(){!ee._fullLayout||(ft=[0,0,dt,Dt],St())},Se),Pr.preventDefault()}ge.length*Te.length!=1&&X(Ot,Xe);function ot(Pr,wr){if(Pr=Pr*Je,wr=wr*it,ee._transitioningWithDuration)return;if(ee._fullLayout._replotting=!0,zt==="ew"||Ut==="ns"){var Jr=zt?-Pr:0,gr=Ut?-wr:0;if(Tt.isSubplotConstrained){if(zt&&Ut){var mr=(Pr/dt-wr/Dt)/2;Pr=mr*dt,wr=-mr*Dt,Jr=-Pr,gr=-wr}Ut?Jr=-gr*dt/Dt:gr=-Jr*Dt/dt}zt&&(Y(Qe,Pr),pt("x")),Ut&&(Y(Fe,wr),pt("y")),Nt([Jr,gr,dt,Dt]),vt(),ee.emit("plotly_relayouting",Ge);return}function Ur(Zr,Lr,br){for(var Nr=1-Lr,kn,_n,Wn=0;Wn<Zr.length;Wn++){var Ln=Zr[Wn];if(!Ln.fixedrange){kn=Ln,_n=Ln._rl[Nr]+(Ln._rl[Lr]-Ln._rl[Nr])/K(br/Ln._length);var Xn=Ln.l2r(_n);Xn!==!1&&Xn!==void 0&&(Ln.range[Lr]=Xn)}}return kn._length*(kn._rl[Lr]-_n)/(kn._rl[Lr]-kn._rl[Nr])}var Hr=zt==="w"==(Ut==="n")?1:-1;if(zt&&Ut&&(Xt.isSubplotConstrained||Tt.isSubplotConstrained)){var Tr=(Pr/dt+Hr*wr/Dt)/2;Pr=Tr*dt,wr=Hr*Tr*Dt}var et,Lt;if(zt==="w"?Pr=Ur(Qe,0,Pr):zt==="e"?Pr=Ur(Qe,1,-Pr):zt||(Pr=0),Ut==="n"?wr=Ur(Fe,1,wr):Ut==="s"?wr=Ur(Fe,0,-wr):Ut||(wr=0),et=zt==="w"?Pr:0,Lt=Ut==="n"?wr:0,Xt.isSubplotConstrained&&!Tt.isSubplotConstrained||Tt.isSubplotConstrained&&zt&&Ut&&Hr>0){var jt;if(Tt.isSubplotConstrained||!zt&&Ut.length===1){for(jt=0;jt<Qe.length;jt++)Qe[jt].range=Qe[jt]._r.slice(),L(Qe[jt],1-wr/Dt);Pr=wr*dt/Dt,et=Pr/2}if(Tt.isSubplotConstrained||!Ut&&zt.length===1){for(jt=0;jt<Fe.length;jt++)Fe[jt].range=Fe[jt]._r.slice(),L(Fe[jt],1-Pr/dt);wr=Pr*Dt/dt,Lt=wr/2}}(!Tt.isSubplotConstrained||!Ut)&&pt("x"),(!Tt.isSubplotConstrained||!zt)&&pt("y");var sr=dt-Pr,Ir=Dt-wr;Tt.isSubplotConstrained&&!(zt&&Ut)&&(zt?(Lt=et?0:Pr*Dt/dt,Ir=sr*Dt/dt):(et=Lt?0:wr*dt/Dt,sr=Ir*dt/Dt)),Nt([et,Lt,sr,Ir]),vt(),ee.emit("plotly_relayouting",Ge)}function pt(Pr,wr){for(var Jr=Tt.isSubplotConstrained?{x:Fe,y:Qe}[Pr]:Tt[Pr+"axes"],gr=Tt.isSubplotConstrained?{x:Qe,y:Fe}[Pr]:[],mr=0;mr<Jr.length;mr++){var Ur=Jr[mr],Hr=Ur._id,Tr=Tt.xLinks[Hr]||Tt.yLinks[Hr],et=gr[0]||Pe[Tr]||Ve[Tr];et&&(wr?(wr[Ur._name+".range[0]"]=wr[et._name+".range[0]"],wr[Ur._name+".range[1]"]=wr[et._name+".range[1]"]):Ur.range=et.range.slice())}}function vt(){var Pr=[],wr;function Jr(Ur){for(wr=0;wr<Ur.length;wr++)Ur[wr].fixedrange||Pr.push(Ur[wr]._id)}for(Mt&&(Jr(Qe),Jr(Xt.xaxes),Jr(Tt.xaxes)),rt&&(Jr(Fe),Jr(Xt.yaxes),Jr(Tt.yaxes)),Ge={},wr=0;wr<Pr.length;wr++){var gr=Pr[wr],mr=b(ee,gr);i.drawOne(ee,mr,{skipTitle:!0}),Ge[mr._name+".range[0]"]=mr.range[0],Ge[mr._name+".range[1]"]=mr.range[1]}i.redrawComponents(ee,Pr)}function Ct(){if(!ee._transitioningWithDuration){var Pr=ee._context.doubleClick,wr=[];zt&&(wr=wr.concat(Qe)),Ut&&(wr=wr.concat(Fe)),Tt.xaxes&&(wr=wr.concat(Tt.xaxes)),Tt.yaxes&&(wr=wr.concat(Tt.yaxes));var Jr={},gr,mr,Ur;if(Pr==="reset+autosize"){for(Pr="autosize",mr=0;mr<wr.length;mr++)if(gr=wr[mr],gr._rangeInitial&&(gr.range[0]!==gr._rangeInitial[0]||gr.range[1]!==gr._rangeInitial[1])||!gr._rangeInitial&&!gr.autorange){Pr="reset";break}}if(Pr==="autosize")for(mr=0;mr<wr.length;mr++)gr=wr[mr],gr.fixedrange||(Jr[gr._name+".autorange"]=!0);else if(Pr==="reset")for((zt||Xt.isSubplotConstrained)&&(wr=wr.concat(Xt.xaxes)),Ut&&!Xt.isSubplotConstrained&&(wr=wr.concat(Xt.yaxes)),Xt.isSubplotConstrained&&(zt?Ut||(wr=wr.concat(Fe)):wr=wr.concat(Qe)),mr=0;mr<wr.length;mr++)gr=wr[mr],gr.fixedrange||(gr._rangeInitial?(Ur=gr._rangeInitial,Jr[gr._name+".range[0]"]=Ur[0],Jr[gr._name+".range[1]"]=Ur[1]):Jr[gr._name+".autorange"]=!0);ee.emit("plotly_doubleclick",null),a.call("_guiRelayout",ee,Jr)}}function St(){Nt([0,0,dt,Dt]),c.syncOrAsync([w.previousPromises,function(){ee._fullLayout._replotting=!1,a.call("_guiRelayout",ee,Ge)}],ee)}function Nt(Pr){var wr=ee._fullLayout,Jr=wr._plots,gr=wr._subplots.cartesian,mr,Ur,Hr,Tr;if(Ze&&a.subplotsRegistry.splom.drag(ee),ct){for(mr=0;mr<gr.length;mr++)if(Ur=Jr[gr[mr]],Hr=Ur.xaxis,Tr=Ur.yaxis,Ur._scene){var et=c.simpleMap(Hr.range,Hr.r2l),Lt=c.simpleMap(Tr.range,Tr.r2l);Ur._scene.update({range:[et[0],Lt[0],et[1],Lt[1]]})}}if((Ze||ct)&&(_(ee),s(ee)),ke){var jt=Pr[2]/Ue._length,sr=Pr[3]/xe._length;for(mr=0;mr<gr.length;mr++){Ur=Jr[gr[mr]],Hr=Ur.xaxis,Tr=Ur.yaxis;var Ir=(Mt||Tt.isSubplotConstrained)&&!Hr.fixedrange&&Pe[Hr._id],Zr=(rt||Tt.isSubplotConstrained)&&!Tr.fixedrange&&Ve[Tr._id],Lr,br,Nr,kn;if(Ir?(Lr=jt,Nr=Te||Tt.isSubplotConstrained?Pr[0]:Yr(Hr,Lr)):Tt.xaHash[Hr._id]?(Lr=jt,Nr=Pr[0]*Hr._length/Ue._length):Tt.yaHash[Hr._id]?(Lr=sr,Nr=Ut==="ns"?-Pr[1]*Hr._length/xe._length:Yr(Hr,Lr,{n:"top",s:"bottom"}[Ut])):(Lr=ir(Hr,jt,sr),Nr=lr(Hr,Lr)),Zr?(br=sr,kn=ge||Tt.isSubplotConstrained?Pr[1]:Yr(Tr,br)):Tt.yaHash[Tr._id]?(br=sr,kn=Pr[1]*Tr._length/xe._length):Tt.xaHash[Tr._id]?(br=jt,kn=zt==="ew"?-Pr[0]*Tr._length/Ue._length:Yr(Tr,br,{e:"right",w:"left"}[zt])):(br=ir(Tr,jt,sr),kn=lr(Tr,br)),!(!Lr&&!br)){Lr||(Lr=1),br||(br=1);var _n=Hr._offset-Nr/Lr,Wn=Tr._offset-kn/br;Ur.clipRect.call(f.setTranslate,Nr,kn).call(f.setScale,Lr,br),Ur.plot.call(f.setTranslate,_n,Wn).call(f.setScale,1/Lr,1/br),(Lr!==Ur.xScaleFactor||br!==Ur.yScaleFactor)&&(f.setPointGroupScale(Ur.zoomScalePts,Lr,br),f.setTextPointsScale(Ur.zoomScaleTxt,Lr,br)),f.hideOutsideRangePoints(Ur.clipOnAxisFalseTraces,Ur),Ur.xScaleFactor=Lr,Ur.yScaleFactor=br}}}}function ir(Pr,wr,Jr){return Pr.fixedrange?0:Mt&&Xt.xaHash[Pr._id]?wr:rt&&(Xt.isSubplotConstrained?Xt.xaHash:Xt.yaHash)[Pr._id]?Jr:0}function lr(Pr,wr){return wr?(Pr.range=Pr._r.slice(),L(Pr,wr),Yr(Pr,wr)):0}function Yr(Pr,wr,Jr){return Pr._length*(1-wr)*l[Jr||Pr.constraintoward||"middle"]}return Ot}function D(ee,ie,le,ye){var ue=c.ensureSingle(ee.draglayer,ie,le,function(pe){pe.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ee.id)});return ue.call(p,ye),ue.node()}function R(ee,ie,le,ye,ue,pe,ge){var Te=D(ee,"rect",ie,le);return T.select(Te).call(f.setRect,ye,ue,pe,ge),Te}function B(ee,ie){for(var le=0;le<ee.length;le++)if(!ee[le].fixedrange)return ie;return""}function F(ee,ie){var le=ee.range[ie],ye=Math.abs(le-ee.range[1-ie]),ue;return ee.type==="date"?le:ee.type==="log"?(ue=Math.ceil(Math.max(0,-Math.log(ye)/Math.LN10))+3,M("."+ue+"g")(Math.pow(10,le))):(ue=Math.floor(Math.log(Math.abs(le))/Math.LN10)-Math.floor(Math.log(ye)/Math.LN10)+4,M("."+String(ue)+"g")(le))}function V(ee,ie,le,ye,ue){for(var pe=0;pe<ee.length;pe++){var ge=ee[pe];if(!ge.fixedrange)if(ge.rangebreaks){var Te=ge._id.charAt(0)==="y",_e=Te?1-ie:ie,De=Te?1-le:le;ye[ge._name+".range[0]"]=ge.l2r(ge.p2l(_e*ge._length)),ye[ge._name+".range[1]"]=ge.l2r(ge.p2l(De*ge._length))}else{var Oe=ge._rl[0],Ue=ge._rl[1]-Oe;ye[ge._name+".range[0]"]=ge.l2r(Oe+Ue*ie),ye[ge._name+".range[1]"]=ge.l2r(Oe+Ue*le)}}if(ue&&ue.length){var xe=(ie+(1-le))/2;V(ue,xe,1-xe,ye,[])}}function Y(ee,ie){for(var le=0;le<ee.length;le++){var ye=ee[le];if(!ye.fixedrange)if(ye.rangebreaks){var ue=0,pe=ye._length,ge=ye.p2l(ue+ie)-ye.p2l(ue),Te=ye.p2l(pe+ie)-ye.p2l(pe),_e=(ge+Te)/2;ye.range=[ye.l2r(ye._rl[0]-_e),ye.l2r(ye._rl[1]-_e)]}else ye.range=[ye.l2r(ye._rl[0]-ie/ye._m),ye.l2r(ye._rl[1]-ie/ye._m)]}}function K(ee){return 1-(ee>=0?Math.min(ee,.9):1/(1/Math.max(ee,-.3)+3.222))}function J(ee,ie,le){return ee?ee==="nsew"?le?"":ie==="pan"?"move":"crosshair":ee.toLowerCase()+"-resize":"pointer"}function G(ee,ie,le,ye,ue){return ee.append("path").attr("class","zoombox").style({fill:ie>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",n(le,ye)).attr("d",ue+"Z")}function Z(ee,ie,le){return ee.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",n(ie,le)).attr("d","M0,0Z")}function re(ee,ie,le,ye,ue,pe){ee.attr("d",ye+"M"+le.l+","+le.t+"v"+le.h+"h"+le.w+"v-"+le.h+"h-"+le.w+"Z"),se(ee,ie,ue,pe)}function se(ee,ie,le,ye){le||(ee.transition().style("fill",ye>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ie.transition().style("opacity",1).duration(200))}function oe(ee){T.select(ee).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function N(ee){z&&ee.data&&ee._context.showTips&&(c.notifier(c._(ee,"Double-click to zoom back out"),"long"),z=!1)}function U(ee,ie){return"M"+(ee.l-.5)+","+(ie-P-.5)+"h-3v"+(2*P+1)+"h3ZM"+(ee.r+.5)+","+(ie-P-.5)+"h3v"+(2*P+1)+"h-3Z"}function q(ee,ie){return"M"+(ie-P-.5)+","+(ee.t-.5)+"v-3h"+(2*P+1)+"v3ZM"+(ie-P-.5)+","+(ee.b+.5)+"v3h"+(2*P+1)+"v-3Z"}function Q(ee){var ie=Math.floor(Math.min(ee.b-ee.t,ee.r-ee.l,P)/2);return"M"+(ee.l-3.5)+","+(ee.t-.5+ie)+"h3v"+-ie+"h"+ie+"v-3h-"+(ie+3)+"ZM"+(ee.r+3.5)+","+(ee.t-.5+ie)+"h-3v"+-ie+"h"+-ie+"v-3h"+(ie+3)+"ZM"+(ee.r+3.5)+","+(ee.b+.5-ie)+"h-3v"+ie+"h"+-ie+"v3h"+(ie+3)+"ZM"+(ee.l-3.5)+","+(ee.b+.5-ie)+"h3v"+ie+"h"+ie+"v3h-"+(ie+3)+"Z"}function W(ee,ie,le,ye,ue){for(var pe=!1,ge={},Te={},_e,De,Oe,Ue,xe=(ue||{}).xaHash,Pe=(ue||{}).yaHash,Ve=0;Ve<ie.length;Ve++){var Qe=ie[Ve];for(_e in le)if(Qe[_e]){for(Oe in Qe)!(ue&&(xe[Oe]||Pe[Oe]))&&!(Oe.charAt(0)==="x"?le:ye)[Oe]&&(ge[Oe]=_e);for(De in ye)!(ue&&(xe[De]||Pe[De]))&&Qe[De]&&(pe=!0)}for(De in ye)if(Qe[De])for(Ue in Qe)!(ue&&(xe[Ue]||Pe[Ue]))&&!(Ue.charAt(0)==="x"?le:ye)[Ue]&&(Te[Ue]=De)}pe&&(c.extendFlat(ge,Te),Te={});var Fe={},Le=[];for(Oe in ge){var Ne=b(ee,Oe);Le.push(Ne),Fe[Ne._id]=Ne}var dt={},Dt=[];for(Ue in Te){var Xt=b(ee,Ue);Dt.push(Xt),dt[Xt._id]=Xt}return{xaHash:Fe,yaHash:dt,xaxes:Le,yaxes:Dt,xLinks:ge,yLinks:Te,isSubplotConstrained:pe}}function X(ee,ie){if(!e)ee.onwheel!==void 0?ee.onwheel=ie:ee.onmousewheel!==void 0?ee.onmousewheel=ie:ee.isAddedWheelEvent||(ee.isAddedWheelEvent=!0,ee.addEventListener("wheel",ie,{passive:!1}));else{var le=ee.onwheel!==void 0?"wheel":"mousewheel";ee._onwheel&&ee.removeEventListener(le,ee._onwheel),ee._onwheel=ie,ee.addEventListener(le,ie,{passive:!1})}}function te(ee){var ie=[];for(var le in ee)ie.push(ee[le]);return ie}ne.exports={makeDragBox:I,makeDragger:D,makeRectDragger:R,makeZoombox:G,makeCorners:Z,updateZoombox:re,xyCorners:Q,transitionZoombox:se,removeZoombox:oe,showDoubleClickNotifier:N,attachWheelEventHandler:X}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/fx"),M=g("../../components/dragelement"),A=g("../../lib/setcursor"),e=g("./dragbox").makeDragBox,a=g("./constants").DRAGGERSIZE;ae.initInteractions=function(t){var r=t._fullLayout;if(t._context.staticPlot){T.select(t).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var f=Object.keys(r._plots||{}).sort(function(i,p){if((r._plots[i].mainplot&&!0)===(r._plots[p].mainplot&&!0)){var d=i.split("y"),y=p.split("y");return d[0]===y[0]?Number(d[1]||1)-Number(y[1]||1):Number(d[0]||1)-Number(y[0]||1)}return r._plots[i].mainplot?1:-1});f.forEach(function(i){var p=r._plots[i],d=p.xaxis,y=p.yaxis;if(!p.mainplot){var v=e(t,p,d._offset,y._offset,d._length,y._length,"ns","ew");v.onmousemove=function(_){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===i&&t._fullLayout._plots[i]&&c.hover(t,_,i)},c.hover(t,_,i),t._fullLayout._lasthover=v,t._fullLayout._hoversubplot=i},v.onmouseout=function(_){t._dragging||(t._fullLayout._hoversubplot=null,M.unhover(t,_))},t._context.showAxisDragHandles&&(e(t,p,d._offset-a,y._offset-a,a,a,"n","w"),e(t,p,d._offset+d._length,y._offset-a,a,a,"n","e"),e(t,p,d._offset-a,y._offset+y._length,a,a,"s","w"),e(t,p,d._offset+d._length,y._offset+y._length,a,a,"s","e"))}if(t._context.showAxisDragHandles){if(i===d._mainSubplot){var x=d._mainLinePosition;d.side==="top"&&(x-=a),e(t,p,d._offset+d._length*.1,x,d._length*.8,a,"","ew"),e(t,p,d._offset,x,d._length*.1,a,"","w"),e(t,p,d._offset+d._length*.9,x,d._length*.1,a,"","e")}if(i===y._mainSubplot){var l=y._mainLinePosition;y.side!=="right"&&(l-=a),e(t,p,l,y._offset+y._length*.1,a,y._length*.8,"ns",""),e(t,p,l,y._offset+y._length*.9,a,y._length*.1,"s",""),e(t,p,l,y._offset,a,y._length*.1,"n","")}}});var o=r._hoverlayer.node();o.onmousemove=function(i){i.target=t._fullLayout._lasthover,c.hover(t,i,r._hoversubplot)},o.onclick=function(i){i.target=t._fullLayout._lasthover,c.click(t,i)},o.onmousedown=function(i){t._fullLayout._lasthover.onmousedown(i)},ae.updateFx(t)}},ae.updateFx=function(n){var t=n._fullLayout,r=t.dragmode==="pan"?"move":"crosshair";A(t._draggers,r)}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(g,ne,ae){function T(M){var A=M._fullLayout._zoomlayer;A&&A.selectAll(".outline-controllers").remove()}function c(M){var A=M._fullLayout._zoomlayer;A&&A.selectAll(".select-outline").remove(),M._fullLayout._drawing=!1}ne.exports={clearOutlineControllers:T,clearSelect:c}},{}],566:[function(g,ne,ae){var T=g("../../lib").strTranslate;function c(a,n){switch(a.type){case"log":return a.p2d(n);case"date":return a.p2r(n,0,a.calendar);default:return a.p2r(n)}}function M(a,n){switch(a.type){case"log":return a.d2p(n);case"date":return a.r2p(n,0,a.calendar);default:return a.r2p(n)}}function A(a){var n=a._id.charAt(0)==="y"?1:0;return function(t){return c(a,t[n])}}function e(a){return T(a.xaxis._offset,a.yaxis._offset)}ne.exports={p2r:c,r2p:M,axValue:A,getTransform:e}},{"../../lib":503}],567:[function(g,ne,ae){var T=g("../../registry"),c=g("../../lib"),M=g("./axis_ids");ne.exports=function(e){return function(n,t){var r=n[e];if(!!Array.isArray(r))for(var f=T.subplotsRegistry.cartesian,o=f.idRegex,i=t._subplots,p=i.xaxis,d=i.yaxis,y=i.cartesian,v=t._has("cartesian")||t._has("gl2d"),x=0;x<r.length;x++){var l=r[x];if(!!c.isPlainObject(l)){var _=M.cleanId(l.xref,"x",!1),s=M.cleanId(l.yref,"y",!1),w=o.x.test(_),b=o.y.test(s);if(w||b){v||c.pushUnique(t._basePlotModules,f);var h=!1;w&&p.indexOf(_)===-1&&(p.push(_),h=!0),b&&d.indexOf(s)===-1&&(d.push(s),h=!0),h&&w&&b&&y.push(_+s)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../registry"),M=g("../../lib"),A=g("../plots"),e=g("../../components/drawing"),a=g("../get_data").getModuleCalcData,n=g("./axis_ids"),t=g("./constants"),r=g("../../constants/xmlns_namespaces"),f=M.ensureSingle;function o(x,l,_){return M.ensureSingle(x,l,_,function(s){s.datum(_)})}ae.name="cartesian",ae.attr=["xaxis","yaxis"],ae.idRoot=["x","y"],ae.idRegex=t.idRegex,ae.attrRegex=t.attrRegex,ae.attributes=g("./attributes"),ae.layoutAttributes=g("./layout_attributes"),ae.supplyLayoutDefaults=g("./layout_defaults"),ae.transitionAxes=g("./transition_axes"),ae.finalizeSubplots=function(x,l){var _=l._subplots,s=_.xaxis,w=_.yaxis,b=_.cartesian,h=b.concat(_.gl2d||[]),m={},u={},L,S,k;for(L=0;L<h.length;L++){var P=h[L].split("y");m[P[0]]=1,u["y"+P[1]]=1}for(L=0;L<s.length;L++)S=s[L],m[S]||(k=(x[n.id2name(S)]||{}).anchor,t.idRegex.y.test(k)||(k="y"),b.push(S+k),h.push(S+k),u[k]||(u[k]=1,M.pushUnique(w,k)));for(L=0;L<w.length;L++)k=w[L],u[k]||(S=(x[n.id2name(k)]||{}).anchor,t.idRegex.x.test(S)||(S="x"),b.push(S+k),h.push(S+k),m[S]||(m[S]=1,M.pushUnique(s,S)));if(!h.length){S="",k="";for(var z in x)if(t.attrRegex.test(z)){var I=z.charAt(0);I==="x"?(!S||+z.substr(5)<+S.substr(5))&&(S=z):(!k||+z.substr(5)<+k.substr(5))&&(k=z)}S=S?n.name2id(S):"x",k=k?n.name2id(k):"y",s.push(S),w.push(k),b.push(S+k)}},ae.plot=function(x,l,_,s){var w=x._fullLayout,b=w._subplots.cartesian,h=x.calcdata,m;if(!Array.isArray(l))for(l=[],m=0;m<h.length;m++)l.push(m);for(m=0;m<b.length;m++){for(var u=b[m],L=w._plots[u],S=[],k,P=0;P<h.length;P++){var z=h[P],I=z[0].trace;I.xaxis+I.yaxis===u&&((l.indexOf(I.index)!==-1||I.carpet)&&(k&&k[0].trace.xaxis+k[0].trace.yaxis===u&&["tonextx","tonexty","tonext"].indexOf(I.fill)!==-1&&S.indexOf(k)===-1&&S.push(k),S.push(z)),k=z)}i(x,L,S,_,s)}};function i(x,l,_,s,w){for(var b=t.traceLayerClasses,h=x._fullLayout,m=h._modules,u,L,S,k=[],P=[],z=0;z<m.length;z++){u=m[z];var I=u.name,D=c.modules[I].categories;if(D.svg){var R=u.layerName||I+"layer",B=u.plot;L=a(_,B),S=L[0],_=L[1],S.length&&k.push({i:b.indexOf(R),className:R,plotMethod:B,cdModule:S}),D.zoomScale&&P.push("."+R)}}k.sort(function(Y,K){return Y.i-K.i});var F=l.plot.selectAll("g.mlayer").data(k,function(Y){return Y.className});if(F.enter().append("g").attr("class",function(Y){return Y.className}).classed("mlayer",!0).classed("rangeplot",l.isRangePlot),F.exit().remove(),F.order(),F.each(function(Y){var K=T.select(this),J=Y.className;Y.plotMethod(x,l,Y.cdModule,K,s,w),t.clipOnAxisFalseQuery.indexOf("."+J)===-1&&e.setClipUrl(K,l.layerClipId,x)}),h._has("scattergl")&&(u=c.getModule("scattergl"),S=a(_,u)[0],u.plot(x,l,S)),!x._context.staticPlot&&(l._hasClipOnAxisFalse&&(l.clipOnAxisFalseTraces=l.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var V=l.plot.selectAll(P.join(",")).selectAll(".trace");l.zoomScalePts=V.selectAll("path.point"),l.zoomScaleTxt=V.selectAll(".textpoint")}}ae.clean=function(x,l,_,s){var w=s._plots||{},b=l._plots||{},h=s._subplots||{},m,u,L;if(s._hasOnlyLargeSploms&&!l._hasOnlyLargeSploms)for(L in w)m=w[L],m.plotgroup&&m.plotgroup.remove();var S=s._has&&s._has("gl"),k=l._has&&l._has("gl");if(S&&!k)for(L in w)m=w[L],m._scene&&m._scene.destroy();if(h.xaxis&&h.yaxis){var P=n.listIds({_fullLayout:s});for(u=0;u<P.length;u++){var z=P[u];l[n.id2name(z)]||s._infolayer.selectAll(".g-"+z+"title").remove()}}var I=s._has&&s._has("cartesian"),D=l._has&&l._has("cartesian");if(I&&!D)y(s._cartesianlayer.selectAll(".subplot"),s),s._defs.selectAll(".axesclip").remove(),delete s._axisConstraintGroups,delete s._axisMatchGroups;else if(h.cartesian)for(u=0;u<h.cartesian.length;u++){var R=h.cartesian[u];if(!b[R]){var B="."+R+",."+R+"-x,."+R+"-y";s._cartesianlayer.selectAll(B).remove(),v(R,s)}}},ae.drawFramework=function(x){var l=x._fullLayout,_=p(x),s=l._cartesianlayer.selectAll(".subplot").data(_,String);s.enter().append("g").attr("class",function(w){return"subplot "+w[0]}),s.order(),s.exit().call(y,l),s.each(function(w){var b=w[0],h=l._plots[b];h.plotgroup=T.select(this),d(x,h),h.draglayer=f(l._draggers,"g",b)})},ae.rangePlot=function(x,l,_){d(x,l),i(x,l,_),A.style(x)};function p(x){var l=x._fullLayout,_=l._subplots.cartesian,s=_.length,w,b,h,m,u,L,S=[],k=[];for(w=0;w<s;w++){h=_[w],m=l._plots[h],u=m.xaxis,L=m.yaxis;var P=u._mainAxis,z=L._mainAxis,I=P._id+z._id,D=l._plots[I];m.overlays=[],I!==h&&D?(m.mainplot=I,m.mainplotinfo=D,k.push(h)):(m.mainplot=void 0,m.mainplotinfo=void 0,S.push(h))}for(w=0;w<k.length;w++)h=k[w],m=l._plots[h],m.mainplotinfo.overlays.push(m);var R=S.concat(k),B=new Array(s);for(w=0;w<s;w++){h=R[w],m=l._plots[h],u=m.xaxis,L=m.yaxis;var F=[h,u.layer,L.layer,u.overlaying||"",L.overlaying||""];for(b=0;b<m.overlays.length;b++)F.push(m.overlays[b].id);B[w]=F}return B}function d(x,l){var _=l.plotgroup,s=l.id,w=t.layerValue2layerClass[l.xaxis.layer],b=t.layerValue2layerClass[l.yaxis.layer],h=x._fullLayout._hasOnlyLargeSploms;if(l.mainplot){var u=l.mainplotinfo,L=u.plotgroup,S=s+"-x",k=s+"-y";l.minorGridlayer=u.minorGridlayer,l.gridlayer=u.gridlayer,l.zerolinelayer=u.zerolinelayer,f(u.overlinesBelow,"path",S),f(u.overlinesBelow,"path",k),f(u.overaxesBelow,"g",S),f(u.overaxesBelow,"g",k),l.plot=f(u.overplot,"g",s),f(u.overlinesAbove,"path",S),f(u.overlinesAbove,"path",k),f(u.overaxesAbove,"g",S),f(u.overaxesAbove,"g",k),l.xlines=L.select(".overlines-"+w).select("."+S),l.ylines=L.select(".overlines-"+b).select("."+k),l.xaxislayer=L.select(".overaxes-"+w).select("."+S),l.yaxislayer=L.select(".overaxes-"+b).select("."+k)}else if(h)l.xlines=f(_,"path","xlines-above"),l.ylines=f(_,"path","ylines-above"),l.xaxislayer=f(_,"g","xaxislayer-above"),l.yaxislayer=f(_,"g","yaxislayer-above");else{var m=f(_,"g","layer-subplot");l.shapelayer=f(m,"g","shapelayer"),l.imagelayer=f(m,"g","imagelayer"),l.minorGridlayer=f(_,"g","minor-gridlayer"),l.gridlayer=f(_,"g","gridlayer"),l.zerolinelayer=f(_,"g","zerolinelayer"),f(_,"path","xlines-below"),f(_,"path","ylines-below"),l.overlinesBelow=f(_,"g","overlines-below"),f(_,"g","xaxislayer-below"),f(_,"g","yaxislayer-below"),l.overaxesBelow=f(_,"g","overaxes-below"),l.plot=f(_,"g","plot"),l.overplot=f(_,"g","overplot"),l.xlines=f(_,"path","xlines-above"),l.ylines=f(_,"path","ylines-above"),l.overlinesAbove=f(_,"g","overlines-above"),f(_,"g","xaxislayer-above"),f(_,"g","yaxislayer-above"),l.overaxesAbove=f(_,"g","overaxes-above"),l.xlines=_.select(".xlines-"+w),l.ylines=_.select(".ylines-"+b),l.xaxislayer=_.select(".xaxislayer-"+w),l.yaxislayer=_.select(".yaxislayer-"+b)}h||(o(l.minorGridlayer,"g",l.xaxis._id),o(l.minorGridlayer,"g",l.yaxis._id),l.minorGridlayer.selectAll("g").map(function(P){return P[0]}).sort(n.idSort),o(l.gridlayer,"g",l.xaxis._id),o(l.gridlayer,"g",l.yaxis._id),l.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(n.idSort)),l.xlines.style("fill","none").classed("crisp",!0),l.ylines.style("fill","none").classed("crisp",!0)}function y(x,l){if(!!x){var _={};x.each(function(u){var L=u[0],S=T.select(this);S.remove(),v(L,l),_[L]=!0});for(var s in l._plots)for(var w=l._plots[s],b=w.overlays||[],h=0;h<b.length;h++){var m=b[h];_[m.id]&&m.plot.selectAll(".trace").remove()}}}function v(x,l){l._draggers.selectAll("g."+x).remove(),l._defs.select("#clip"+l._uid+x+"plot").remove()}ae.toSVG=function(x){var l=x._fullLayout._glimages,_=T.select(x).selectAll(".svg-container"),s=_.filter(function(b,h){return h===_.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function w(){var b=this,h=b.toDataURL("image/png"),m=l.append("svg:image");m.attr({xmlns:r.svg,"xlink:href":h,preserveAspectRatio:"none",x:0,y:0,width:b.style.width,height:b.style.height})}s.each(w)},ae.updateFx=g("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(g,ne,ae){var T=g("../font_attributes"),c=g("../../components/color/attributes"),M=g("../../components/drawing/attributes").dash,A=g("../../lib/extend").extendFlat,e=g("../../plot_api/plot_template").templatedArray,a=g("../../plots/cartesian/axis_format_attributes").descriptionWithDates,n=g("../../constants/numerical").ONEDAY,t=g("./constants"),r=t.HOUR_PATTERN,f=t.WEEKDAY_PATTERN,o={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function i(m){return{valType:"integer",min:0,dflt:m?5:0,editType:"ticks"}}var p={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},d={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},y={valType:"data_array",editType:"ticks"},v={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function x(m){var u={valType:"number",min:0,editType:"ticks"};return m||(u.dflt=5),u}function l(m){var u={valType:"number",min:0,editType:"ticks"};return m||(u.dflt=1),u}var _={valType:"color",dflt:c.defaultLine,editType:"ticks"},s={valType:"color",dflt:c.lightLine,editType:"ticks"};function w(m){var u={valType:"number",min:0,editType:"ticks"};return m||(u.dflt=1),u}var b=A({},M,{editType:"ticks"}),h={valType:"boolean",editType:"ticks"};ne.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:c.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:T({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[f,r,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:n},editType:"calc"}),tickmode:o,nticks:i(),tick0:p,dtick:d,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:y,ticktext:{valType:"data_array",editType:"ticks"},ticks:v,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:x(),tickwidth:l(),tickcolor:_,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:A({},M,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:T({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:a("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:a("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:c.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:h,gridcolor:s,gridwidth:w(),griddash:b,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:c.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:c.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:o,nticks:i("minor"),tick0:p,dtick:d,tickvals:y,ticks:v,ticklen:x("minor"),tickwidth:l("minor"),tickcolor:_,gridcolor:s,gridwidth:w("minor"),griddash:b,showgrid:h,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:T({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/color"),M=g("../../components/fx/helpers").isUnifiedHover,A=g("../../components/fx/hovermode_defaults"),e=g("../../plot_api/plot_template"),a=g("../layout_attributes"),n=g("./layout_attributes"),t=g("./type_defaults"),r=g("./axis_defaults"),f=g("./constraints"),o=g("./position_defaults"),i=g("./axis_ids"),p=i.id2name,d=i.name2id,y=g("./constants").AX_ID_PATTERN,v=g("../../registry"),x=v.traceIs,l=v.getComponentMethod;function _(s,w,b){Array.isArray(s[w])?s[w].push(b):s[w]=[b]}ne.exports=function(w,b,h){var m=b.autotypenumbers,u={},L={},S={},k={},P={},z={},I={},D={},R={},B={},F,V;for(F=0;F<h.length;F++){var Y=h[F];if(!(!x(Y,"cartesian")&&!x(Y,"gl2d"))){var K;if(Y.xaxis)K=p(Y.xaxis),_(u,K,Y);else if(Y.xaxes)for(V=0;V<Y.xaxes.length;V++)_(u,p(Y.xaxes[V]),Y);var J;if(Y.yaxis)J=p(Y.yaxis),_(u,J,Y);else if(Y.yaxes)for(V=0;V<Y.yaxes.length;V++)_(u,p(Y.yaxes[V]),Y);if(Y.type==="funnel"?Y.orientation==="h"?(K&&(L[K]=!0),J&&(I[J]=!0)):J&&(S[J]=!0):Y.type==="image"?(J&&(D[J]=!0),K&&(D[K]=!0)):(J&&(P[J]=!0,z[J]=!0),(!x(Y,"carpet")||Y.type==="carpet"&&!Y._cheater)&&K&&(k[K]=!0)),Y.type==="carpet"&&Y._cheater&&K&&(L[K]=!0),x(Y,"2dMap")&&(R[K]=!0,R[J]=!0),x(Y,"oriented")){var G=Y.orientation==="h"?J:K;B[G]=!0}}}var Z=b._subplots,re=Z.xaxis,se=Z.yaxis,oe=T.simpleMap(re,p),N=T.simpleMap(se,p),U=oe.concat(N),q=c.background;re.length&&se.length&&(q=T.coerce(w,b,a,"plot_bgcolor"));var Q=c.combine(q,b.paper_bgcolor),W,X,te,ee,ie;function le(){var Ze=u[W]||[];ie._traceIndices=Ze.map(function(ke){return ke._expandedIndex}),ie._annIndices=[],ie._shapeIndices=[],ie._imgIndices=[],ie._subplotsWith=[],ie._counterAxes=[],ie._name=ie._attr=W,ie._id=X}function ye(Ze,ke){return T.coerce(ee,ie,n,Ze,ke)}function ue(Ze,ke){return T.coerce2(ee,ie,n,Ze,ke)}function pe(Ze){return Ze==="x"?se:re}function ge(Ze,ke){for(var Ge=Ze==="x"?oe:N,Je=[],it=0;it<Ge.length;it++){var Pt=Ge[it];Pt!==ke&&!(w[Pt]||{}).overlaying&&Je.push(d(Pt))}return Je}var Te={x:pe("x"),y:pe("y")},_e=Te.x.concat(Te.y),De={},Oe=[];function Ue(){var Ze=ee.matches;y.test(Ze)&&_e.indexOf(Ze)===-1&&(De[Ze]=ee.type,Oe=Object.keys(De))}var xe=A(w,b),Pe=M(xe);for(F=0;F<U.length;F++){W=U[F],X=d(W),te=W.charAt(0),T.isPlainObject(w[W])||(w[W]={}),ee=w[W],ie=e.newContainer(b,W,te+"axis"),le();var Ve=te==="x"&&!k[W]&&L[W]||te==="y"&&!P[W]&&S[W],Qe=te==="y"&&(!z[W]&&I[W]||D[W]),Fe={hasMinor:!0,letter:te,font:b.font,outerTicks:R[W],showGrid:!B[W],data:u[W]||[],bgColor:Q,calendar:b.calendar,automargin:!0,visibleDflt:Ve,reverseDflt:Qe,autotypenumbersDflt:m,splomStash:((b._splomAxes||{})[te]||{})[X]};ye("uirevision",b.uirevision),t(ee,ie,ye,Fe),r(ee,ie,ye,Fe,b);var Le=Pe&&te===xe.charAt(0),Ne=ue("spikecolor",Pe?ie.color:void 0),dt=ue("spikethickness",Pe?1.5:void 0),Dt=ue("spikedash",Pe?"dot":void 0),Xt=ue("spikemode",Pe?"across":void 0),Tt=ue("spikesnap"),zt=ye("showspikes",!!Le||!!Ne||!!dt||!!Dt||!!Xt||!!Tt);zt||(delete ie.spikecolor,delete ie.spikethickness,delete ie.spikedash,delete ie.spikemode,delete ie.spikesnap),o(ee,ie,ye,{letter:te,counterAxes:Te[te],overlayableAxes:ge(te,W),grid:b.grid}),ye("title.standoff"),Ue(),ie._input=ee}for(F=0;F<Oe.length;){X=Oe[F++],W=p(X),te=W.charAt(0),T.isPlainObject(w[W])||(w[W]={}),ee=w[W],ie=e.newContainer(b,W,te+"axis"),le();var Ut={letter:te,font:b.font,outerTicks:R[W],showGrid:!B[W],data:[],bgColor:Q,calendar:b.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:m,splomStash:((b._splomAxes||{})[te]||{})[X]};ye("uirevision",b.uirevision),ie.type=De[X]||"linear",r(ee,ie,ye,Ut,b),o(ee,ie,ye,{letter:te,counterAxes:Te[te],overlayableAxes:ge(te,W),grid:b.grid}),ye("fixedrange"),Ue(),ie._input=ee}var Et=l("rangeslider","handleDefaults"),Mt=l("rangeselector","handleDefaults");for(F=0;F<oe.length;F++)W=oe[F],ee=w[W],ie=b[W],Et(w,b,W),ie.type==="date"&&Mt(ee,ie,b,N,ie.calendar),ye("fixedrange");for(F=0;F<N.length;F++){W=N[F],ee=w[W],ie=b[W];var rt=b[p(ie.anchor)],ct=l("rangeslider","isVisible")(rt);ye("fixedrange",ct)}f.handleDefaults(w,b,{axIds:_e.concat(Oe).sort(i.idSort),axHasImage:D})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(g,ne,ae){var T=g("tinycolor2").mix,c=g("../../components/color/attributes"),M=g("../../lib");ne.exports=function(e,a,n,t){t=t||{};var r=t.dfltColor;function f(S,k){return M.coerce2(e,a,t.attributes,S,k)}var o=f("linecolor",r),i=f("linewidth"),p=n("showline",t.showLine||!!o||!!i);p||(delete a.linecolor,delete a.linewidth);var d=T(r,t.bgColor,t.blend||c.lightFraction).toRgbString(),y=f("gridcolor",d),v=f("gridwidth"),x=f("griddash"),l=n("showgrid",t.showGrid||!!y||!!v||!!x);if(l||(delete a.gridcolor,delete a.gridwidth,delete a.griddash),t.hasMinor){var _=T(a.gridcolor,t.bgColor,67).toRgbString(),s=f("minor.gridcolor",_),w=f("minor.gridwidth",a.gridwidth||1),b=f("minor.griddash",a.griddash||"solid"),h=n("minor.showgrid",!!s||!!w||!!b);h||(delete a.minor.gridcolor,delete a.minor.gridwidth,delete a.minor.griddash)}if(!t.noZeroLine){var m=f("zerolinecolor",r),u=f("zerolinewidth"),L=n("zeroline",t.showGrid||!!m||!!u);L||(delete a.zerolinecolor,delete a.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib");ne.exports=function(A,e,a,n){var t=n.counterAxes||[],r=n.overlayableAxes||[],f=n.letter,o=n.grid,i,p,d,y;o&&(p=o._domains[f][o._axisMap[e._id]],i=o._anchors[e._id],p&&(d=o[f+"side"].split(" ")[0],y=o.domain[f][d==="right"||d==="top"?1:0])),p=p||[0,1],i=i||(T(A.position)?"free":t[0]||"free"),d=d||(f==="x"?"bottom":"left"),y=y||0;var v=c.coerce(A,e,{anchor:{valType:"enumerated",values:["free"].concat(t),dflt:i}},"anchor");v==="free"&&a("position",y),c.coerce(A,e,{side:{valType:"enumerated",values:f==="x"?["bottom","top"]:["left","right"],dflt:d}},"side");var x=!1;if(r.length&&(x=c.coerce(A,e,{overlaying:{valType:"enumerated",values:[!1].concat(r),dflt:!1}},"overlaying")),!x){var l=a("domain",p);l[0]>l[1]-1/4096&&(e.domain=p),c.noneOrAll(A.domain,e.domain,p)}return a("layer"),e}},{"../../lib":503,"fast-isnumeric":190}],573:[function(g,ne,ae){var T=g("./show_dflt");ne.exports=function(M,A,e,a,n){n||(n={});var t=n.tickSuffixDflt,r=T(M),f=e("tickprefix");f&&e("showtickprefix",r);var o=e("ticksuffix",t);o&&e("showticksuffix",r)}},{"./show_dflt":577}],574:[function(g,ne,ae){var T=g("../../constants/alignment").FROM_BL;ne.exports=function(M,A,e){e===void 0&&(e=T[M.constraintoward||"center"]);var a=[M.r2l(M.range[0]),M.r2l(M.range[1])],n=a[0]+(a[1]-a[0])*e;M.range=M._input.range=[M.l2r(n+(a[0]-n)*A),M.l2r(n+(a[1]-n)*A)],M.setScale()}},{"../../constants/alignment":471}],575:[function(g,ne,ae){var T=g("polybooljs"),c=g("../../registry"),M=g("../../components/drawing").dashStyle,A=g("../../components/color"),e=g("../../components/fx"),a=g("../../components/fx/helpers").makeEventData,n=g("../../components/dragelement/helpers"),t=n.freeMode,r=n.rectMode,f=n.drawMode,o=n.openMode,i=n.selectMode,p=g("../../components/shapes/draw_newshape/display_outlines"),d=g("../../components/shapes/draw_newshape/helpers").handleEllipse,y=g("../../components/shapes/draw_newshape/newshapes"),v=g("../../lib"),x=g("../../lib/polygon"),l=g("../../lib/throttle"),_=g("./axis_ids").getFromId,s=g("../../lib/clear_gl_canvases"),w=g("../../plot_api/subroutines").redrawReglTraces,b=g("./constants"),h=b.MINSELECT,m=x.filter,u=x.tester,L=g("./handle_outline").clearSelect,S=g("./helpers"),k=S.p2r,P=S.axValue,z=S.getTransform;function I(W,X,te,ee,ie){var le=t(ie),ye=r(ie),ue=o(ie),pe=f(ie),ge=i(ie),Te=ie==="drawline",_e=ie==="drawcircle",De=Te||_e,Oe=ee.gd,Ue=Oe._fullLayout,xe=Ue._zoomlayer,Pe=ee.element.getBoundingClientRect(),Ve=ee.plotinfo,Qe=z(Ve),Fe=X-Pe.left,Le=te-Pe.top;Ue._calcInverseTransform(Oe);var Ne=v.apply3DTransform(Ue._invTransform)(Fe,Le);Fe=Ne[0],Le=Ne[1];var dt=Ue._invScaleX,Dt=Ue._invScaleY,Xt=Fe,Tt=Le,zt="M"+Fe+","+Le,Ut=ee.xaxes[0]._length,Et=ee.yaxes[0]._length,Mt=ee.xaxes.concat(ee.yaxes),rt=W.altKey&&!(f(ie)&&ue),ct,Ze,ke,Ge,Je,it,Pt;Y(W,Oe,ee),le&&(ct=m([[Fe,Le]],b.BENDPX));var At=xe.selectAll("path.select-outline-"+Ve.id).data(pe?[0]:[1,2]),Ot=Ue.newshape;At.enter().append("path").attr("class",function(Xr){return"select-outline select-outline-"+Xr+" select-outline-"+Ve.id}).style(pe?{opacity:Ot.opacity/2,fill:ue?void 0:Ot.fillcolor,stroke:Ot.line.color,"stroke-dasharray":M(Ot.line.dash,Ot.line.width),"stroke-width":Ot.line.width+"px"}:{}).attr("fill-rule",Ot.fillrule).classed("cursor-move",!!pe).attr("transform",Qe).attr("d",zt+"Z");var Jt=xe.append("path").attr("class","zoombox-corners").style({fill:A.background,stroke:A.defaultLine,"stroke-width":1}).attr("transform",Qe).attr("d","M0,0Z"),Bt=Ue._uid+b.SELECTID,qt=[],rr=J(Oe,ee.xaxes,ee.yaxes,ee.subplot);function er(Xr,hn){return Xr-hn}var pr;Ve.fillRangeItems?pr=Ve.fillRangeItems:ye?pr=function(Xr,hn){var $r=Xr.range={};for(Je=0;Je<Mt.length;Je++){var nt=Mt[Je],Gt=nt._id.charAt(0);$r[nt._id]=[k(nt,hn[Gt+"min"]),k(nt,hn[Gt+"max"])].sort(er)}}:pr=function(Xr,hn,$r){var nt=Xr.lassoPoints={};for(Je=0;Je<Mt.length;Je++){var Gt=Mt[Je];nt[Gt._id]=$r.filtered.map(P(Gt))}},ee.moveFn=function(Xr,hn){Xt=Math.max(0,Math.min(Ut,dt*Xr+Fe)),Tt=Math.max(0,Math.min(Et,Dt*hn+Le));var $r=Math.abs(Xt-Fe),nt=Math.abs(Tt-Le);if(ye){var Gt,Kt,Ht;if(ge){var _r=Ue.selectdirection;switch(_r==="any"?nt<Math.min($r*.6,h)?Gt="h":$r<Math.min(nt*.6,h)?Gt="v":Gt="d":Gt=_r,Gt){case"h":Kt=_e?Et/2:0,Ht=Et;break;case"v":Kt=_e?Ut/2:0,Ht=Ut;break}}if(pe)switch(Ue.newshape.drawdirection){case"vertical":Gt="h",Kt=_e?Et/2:0,Ht=Et;break;case"horizontal":Gt="v",Kt=_e?Ut/2:0,Ht=Ut;break;case"ortho":$r<nt?(Gt="h",Kt=Le,Ht=Tt):(Gt="v",Kt=Fe,Ht=Xt);break;default:Gt="d"}Gt==="h"?(Ge=De?d(_e,[Xt,Kt],[Xt,Ht]):[[Fe,Kt],[Fe,Ht],[Xt,Ht],[Xt,Kt]],Ge.xmin=De?Xt:Math.min(Fe,Xt),Ge.xmax=De?Xt:Math.max(Fe,Xt),Ge.ymin=Math.min(Kt,Ht),Ge.ymax=Math.max(Kt,Ht),Jt.attr("d","M"+Ge.xmin+","+(Le-h)+"h-4v"+2*h+"h4ZM"+(Ge.xmax-1)+","+(Le-h)+"h4v"+2*h+"h-4Z")):Gt==="v"?(Ge=De?d(_e,[Kt,Tt],[Ht,Tt]):[[Kt,Le],[Kt,Tt],[Ht,Tt],[Ht,Le]],Ge.xmin=Math.min(Kt,Ht),Ge.xmax=Math.max(Kt,Ht),Ge.ymin=De?Tt:Math.min(Le,Tt),Ge.ymax=De?Tt:Math.max(Le,Tt),Jt.attr("d","M"+(Fe-h)+","+Ge.ymin+"v-4h"+2*h+"v4ZM"+(Fe-h)+","+(Ge.ymax-1)+"v4h"+2*h+"v-4Z")):Gt==="d"&&(Ge=De?d(_e,[Fe,Le],[Xt,Tt]):[[Fe,Le],[Fe,Tt],[Xt,Tt],[Xt,Le]],Ge.xmin=Math.min(Fe,Xt),Ge.xmax=Math.max(Fe,Xt),Ge.ymin=Math.min(Le,Tt),Ge.ymax=Math.max(Le,Tt),Jt.attr("d","M0,0Z"))}else le&&(ct.addPt([Xt,Tt]),Ge=ct.filtered);ee.selectionDefs&&ee.selectionDefs.length?(ke=U(ee.mergedPolygons,Ge,rt),Ge.subtract=rt,Ze=V(ee.selectionDefs.concat([Ge]))):(ke=[Ge],Ze=u(Ge)),p(Q(ke,ue),At,ee),ge&&l.throttle(Bt,b.SELECTDELAY,function(){qt=[];var tt,je;for(Je=0;Je<rr.length;Je++)if(it=rr[Je],je=it._module.selectPoints(it,Ze),tt=q(je,it),qt.length)for(var st=0;st<tt.length;st++)qt.push(tt[st]);else qt=tt;Pt={points:qt},N(Oe,rr,Pt),pr(Pt,Ge,ct),ee.gd.emit("plotly_selecting",Pt)})},ee.clickFn=function(Xr,hn){if(Jt.remove(),Oe._fullLayout._activeShapeIndex>=0){Oe._fullLayout._deactivateShape(Oe);return}if(!pe){var $r=Ue.clickmode;l.done(Bt).then(function(){if(l.clear(Bt),Xr===2){for(At.remove(),Je=0;Je<rr.length;Je++)it=rr[Je],it._module.selectPoints(it,!1);N(Oe,rr),K(ee),Oe.emit("plotly_deselect",null)}else $r.indexOf("select")>-1&&D(hn,Oe,ee.xaxes,ee.yaxes,ee.subplot,ee,At),$r==="event"&&Oe.emit("plotly_selected",void 0);e.click(Oe,hn)}).catch(v.error)}},ee.doneFn=function(){Jt.remove(),l.done(Bt).then(function(){l.clear(Bt),ee.gd.emit("plotly_selected",Pt),Ge&&ee.selectionDefs&&(Ge.subtract=rt,ee.selectionDefs.push(Ge),ee.mergedPolygons.length=0,[].push.apply(ee.mergedPolygons,ke)),ee.doneFnCompleted&&ee.doneFnCompleted(qt)}).catch(v.error),pe&&K(ee)}}function D(W,X,te,ee,ie,le,ye){var ue=X._hoverdata,pe=X._fullLayout,ge=pe.clickmode,Te=ge.indexOf("event")>-1,_e=[],De,Oe,Ue,xe,Pe,Ve,Qe,Fe,Le,Ne;if(G(ue)){Y(W,X,le),De=J(X,te,ee,ie);var dt=Z(ue,De),Dt=dt.pointNumbers.length>0;if(Dt?se(De,dt):oe(De)&&(Qe=re(dt))){for(ye&&ye.remove(),Ne=0;Ne<De.length;Ne++)Oe=De[Ne],Oe._module.selectPoints(Oe,!1);N(X,De),K(le),Te&&X.emit("plotly_deselect",null)}else{Fe=W.shiftKey&&(Qe!==void 0?Qe:re(dt)),Ue=R(dt.pointNumber,dt.searchInfo,Fe);var Xt=le.selectionDefs.concat([Ue]);for(xe=V(Xt),Ne=0;Ne<De.length;Ne++)if(Pe=De[Ne]._module.selectPoints(De[Ne],xe),Ve=q(Pe,De[Ne]),_e.length)for(var Tt=0;Tt<Ve.length;Tt++)_e.push(Ve[Tt]);else _e=Ve;if(Le={points:_e},N(X,De,Le),Ue&&le&&le.selectionDefs.push(Ue),ye){var zt=le.mergedPolygons,Ut=o(le.dragmode);p(Q(zt,Ut),ye,le)}Te&&X.emit("plotly_selected",Le)}}}function R(W,X,te){return{pointNumber:W,searchInfo:X,subtract:te}}function B(W){return"pointNumber"in W&&"searchInfo"in W}function F(W){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(X,te,ee,ie){var le=W.searchInfo.cd[0].trace._expandedIndex,ye=ie.cd[0].trace._expandedIndex;return ye===le&&ee===W.pointNumber},isRect:!1,degenerate:!1,subtract:W.subtract}}function V(W){for(var X=[],te=B(W[0])?0:W[0][0][0],ee=te,ie=B(W[0])?0:W[0][0][1],le=ie,ye=0;ye<W.length;ye++)if(B(W[ye]))X.push(F(W[ye]));else{var ue=x.tester(W[ye]);ue.subtract=W[ye].subtract,X.push(ue),te=Math.min(te,ue.xmin),ee=Math.max(ee,ue.xmax),ie=Math.min(ie,ue.ymin),le=Math.max(le,ue.ymax)}function pe(ge,Te,_e,De){for(var Oe=!1,Ue=0;Ue<X.length;Ue++)X[Ue].contains(ge,Te,_e,De)&&(Oe=X[Ue].subtract===!1);return Oe}return{xmin:te,xmax:ee,ymin:ie,ymax:le,pts:[],contains:pe,isRect:!1,degenerate:!1}}function Y(W,X,te){X._fullLayout._drawing=!1;var ee=X._fullLayout,ie=te.plotinfo,le=te.dragmode,ye=ee._lastSelectedSubplot&&ee._lastSelectedSubplot===ie.id,ue=(W.shiftKey||W.altKey)&&!(f(le)&&o(le));ye&&ue&&ie.selection&&ie.selection.selectionDefs&&!te.selectionDefs?(te.selectionDefs=ie.selection.selectionDefs,te.mergedPolygons=ie.selection.mergedPolygons):(!ue||!ie.selection)&&K(te),ye||(L(X),ee._lastSelectedSubplot=ie.id)}function K(W){var X=W.dragmode,te=W.plotinfo,ee=W.gd;if(ee._fullLayout._activeShapeIndex>=0&&ee._fullLayout._deactivateShape(ee),f(X)){var ie=ee._fullLayout,le=ie._zoomlayer,ye=le.selectAll(".select-outline-"+te.id);if(ye&&ee._fullLayout._drawing){var ue=y(ye,W);ue&&c.call("_guiRelayout",ee,{shapes:ue}),ee._fullLayout._drawing=!1}}te.selection={},te.selection.selectionDefs=W.selectionDefs=[],te.selection.mergedPolygons=W.mergedPolygons=[]}function J(W,X,te,ee){var ie=[],le=X.map(function(Oe){return Oe._id}),ye=te.map(function(Oe){return Oe._id}),ue,pe,ge;for(ge=0;ge<W.calcdata.length;ge++)if(ue=W.calcdata[ge],pe=ue[0].trace,!(pe.visible!==!0||!pe._module||!pe._module.selectPoints))if(ee&&(pe.subplot===ee||pe.geo===ee))ie.push(De(pe._module,ue,X[0],te[0]));else if(pe.type==="splom"&&pe._xaxes[le[0]]&&pe._yaxes[ye[0]]){var Te=De(pe._module,ue,X[0],te[0]);Te.scene=W._fullLayout._splomScenes[pe.uid],ie.push(Te)}else if(pe.type==="sankey"){var _e=De(pe._module,ue,X[0],te[0]);ie.push(_e)}else{if(le.indexOf(pe.xaxis)===-1||ye.indexOf(pe.yaxis)===-1)continue;ie.push(De(pe._module,ue,_(W,pe.xaxis),_(W,pe.yaxis)))}return ie;function De(Oe,Ue,xe,Pe){return{_module:Oe,cd:Ue,xaxis:xe,yaxis:Pe}}}function G(W){return W&&Array.isArray(W)&&W[0].hoverOnBox!==!0}function Z(W,X){var te=W[0],ee=-1,ie=[],le,ye;for(ye=0;ye<X.length;ye++)if(le=X[ye],te.fullData._expandedIndex===le.cd[0].trace._expandedIndex){if(te.hoverOnBox===!0)break;te.pointNumber!==void 0?ee=te.pointNumber:te.binNumber!==void 0&&(ee=te.binNumber,ie=te.pointNumbers);break}return{pointNumber:ee,pointNumbers:ie,searchInfo:le}}function re(W){var X=W.searchInfo.cd[0].trace,te=W.pointNumber,ee=W.pointNumbers,ie=ee.length>0,le=ie?ee[0]:te;return X.selectedpoints?X.selectedpoints.indexOf(le)>-1:!1}function se(W,X){var te=[],ee,ie,le,ye;for(ye=0;ye<W.length;ye++)ee=W[ye],ee.cd[0].trace.selectedpoints&&ee.cd[0].trace.selectedpoints.length>0&&te.push(ee);if(te.length===1&&(le=te[0]===X.searchInfo,le&&(ie=X.searchInfo.cd[0].trace,ie.selectedpoints.length===X.pointNumbers.length))){for(ye=0;ye<X.pointNumbers.length;ye++)if(ie.selectedpoints.indexOf(X.pointNumbers[ye])<0)return!1;return!0}return!1}function oe(W){var X=0,te,ee,ie;for(ie=0;ie<W.length;ie++)if(te=W[ie],ee=te.cd[0].trace,ee.selectedpoints&&(ee.selectedpoints.length>1||(X+=ee.selectedpoints.length,X>1)))return!1;return X===1}function N(W,X,te){var ee,ie,le,ye;for(ee=0;ee<X.length;ee++){var ue=X[ee].cd[0].trace._fullInput,pe=W._fullLayout._tracePreGUI[ue.uid]||{};pe.selectedpoints===void 0&&(pe.selectedpoints=ue._input.selectedpoints||null)}if(te){var ge=te.points||[];for(ee=0;ee<X.length;ee++)ye=X[ee].cd[0].trace,ye._input.selectedpoints=ye._fullInput.selectedpoints=[],ye._fullInput!==ye&&(ye.selectedpoints=[]);for(ee=0;ee<ge.length;ee++){var Te=ge[ee],_e=Te.data,De=Te.fullData;Te.pointIndices?([].push.apply(_e.selectedpoints,Te.pointIndices),ye._fullInput!==ye&&[].push.apply(De.selectedpoints,Te.pointIndices)):(_e.selectedpoints.push(Te.pointIndex),ye._fullInput!==ye&&De.selectedpoints.push(Te.pointIndex))}}else for(ee=0;ee<X.length;ee++)ye=X[ee].cd[0].trace,delete ye.selectedpoints,delete ye._input.selectedpoints,ye._fullInput!==ye&&delete ye._fullInput.selectedpoints;var Oe=!1;for(ee=0;ee<X.length;ee++){ie=X[ee],le=ie.cd,ye=le[0].trace,c.traceIs(ye,"regl")&&(Oe=!0);var Ue=ie._module,xe=Ue.styleOnSelect||Ue.style;xe&&(xe(W,le,le[0].node3),le[0].nodeRangePlot3&&xe(W,le,le[0].nodeRangePlot3))}Oe&&(s(W),w(W))}function U(W,X,te){var ee;return te?(ee=T.difference({regions:W,inverted:!1},{regions:[X],inverted:!1}),ee.regions):(ee=T.union({regions:W,inverted:!1},{regions:[X],inverted:!1}),ee.regions)}function q(W,X){if(Array.isArray(W))for(var te=X.cd,ee=X.cd[0].trace,ie=0;ie<W.length;ie++)W[ie]=a(W[ie],ee,te);return W}function Q(W,X){for(var te=[],ee=0;ee<W.length;ee++){te[ee]=[];for(var ie=0;ie<W[ee].length;ie++){te[ee][ie]=[],te[ee][ie][0]=ie?"L":"M";for(var le=0;le<W[ee][ie].length;le++)te[ee][ie].push(W[ee][ie][le])}X||te[ee].push(["Z",te[ee][0][1],te[ee][0][2]])}return te}ne.exports={prepSelect:I,clearSelect:L,clearSelectionsCache:K,selectOnClick:D}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("d3-time-format").utcFormat,M=g("../../lib"),A=M.numberFormat,e=g("fast-isnumeric"),a=M.cleanNumber,n=M.ms2DateTime,t=M.dateTime2ms,r=M.ensureNumber,f=M.isArrayOrTypedArray,o=g("../../constants/numerical"),i=o.FP_SAFE,p=o.BADNUM,d=o.LOG_CLIP,y=o.ONEWEEK,v=o.ONEDAY,x=o.ONEHOUR,l=o.ONEMIN,_=o.ONESEC,s=g("./axis_ids"),w=g("./constants"),b=w.HOUR_PATTERN,h=w.WEEKDAY_PATTERN;function m(L){return Math.pow(10,L)}function u(L){return L!=null}ne.exports=function(S,k){k=k||{};var P=S._id||"x",z=P.charAt(0);function I(U,q){if(U>0)return Math.log(U)/Math.LN10;if(U<=0&&q&&S.range&&S.range.length===2){var Q=S.range[0],W=S.range[1];return .5*(Q+W-2*d*Math.abs(Q-W))}else return p}function D(U,q,Q,W){if((W||{}).msUTC&&e(U))return+U;var X=t(U,Q||S.calendar);if(X===p)if(e(U)){U=+U;var te=Math.floor(M.mod(U+.05,1)*10),ee=Math.round(U-te/10);X=t(new Date(ee))+te/10}else return p;return X}function R(U,q,Q){return n(U,q,Q||S.calendar)}function B(U){return S._categories[Math.round(U)]}function F(U){if(u(U)){if(S._categoriesMap===void 0&&(S._categoriesMap={}),S._categoriesMap[U]!==void 0)return S._categoriesMap[U];S._categories.push(typeof U=="number"?String(U):U);var q=S._categories.length-1;return S._categoriesMap[U]=q,q}return p}function V(U,q){for(var Q=new Array(q),W=0;W<q;W++){var X=(U[0]||[])[W],te=(U[1]||[])[W];Q[W]=Y([X,te])}return Q}function Y(U){if(S._categoriesMap)return S._categoriesMap[U]}function K(U){var q=Y(U);if(q!==void 0)return q;if(e(U))return+U}function J(U){return e(U)?+U:Y(U)}function G(U,q,Q){return T.round(Q+q*U,2)}function Z(U,q,Q){return(U-Q)/q}var re=function(q){return e(q)?G(q,S._m,S._b):p},se=function(U){return Z(U,S._m,S._b)};if(S.rangebreaks){var oe=z==="y";re=function(U){if(!e(U))return p;var q=S._rangebreaks.length;if(!q)return G(U,S._m,S._b);var Q=oe;S.range[0]>S.range[1]&&(Q=!Q);for(var W=Q?-1:1,X=W*U,te=0,ee=0;ee<q;ee++){var ie=W*S._rangebreaks[ee].min,le=W*S._rangebreaks[ee].max;if(X<ie)break;if(X>le)te=ee+1;else{te=X<(ie+le)/2?ee:ee+1;break}}var ye=S._B[te]||0;return isFinite(ye)?G(U,S._m2,ye):0},se=function(U){var q=S._rangebreaks.length;if(!q)return Z(U,S._m,S._b);for(var Q=0,W=0;W<q&&!(U<S._rangebreaks[W].pmin);W++)U>S._rangebreaks[W].pmax&&(Q=W+1);return Z(U,S._m2,S._B[Q])}}S.c2l=S.type==="log"?I:r,S.l2c=S.type==="log"?m:r,S.l2p=re,S.p2l=se,S.c2p=S.type==="log"?function(U,q){return re(I(U,q))}:re,S.p2c=S.type==="log"?function(U){return m(se(U))}:se,["linear","-"].indexOf(S.type)!==-1?(S.d2r=S.r2d=S.d2c=S.r2c=S.d2l=S.r2l=a,S.c2d=S.c2r=S.l2d=S.l2r=r,S.d2p=S.r2p=function(U){return S.l2p(a(U))},S.p2d=S.p2r=se,S.cleanPos=r):S.type==="log"?(S.d2r=S.d2l=function(U,q){return I(a(U),q)},S.r2d=S.r2c=function(U){return m(a(U))},S.d2c=S.r2l=a,S.c2d=S.l2r=r,S.c2r=I,S.l2d=m,S.d2p=function(U,q){return S.l2p(S.d2r(U,q))},S.p2d=function(U){return m(se(U))},S.r2p=function(U){return S.l2p(a(U))},S.p2r=se,S.cleanPos=r):S.type==="date"?(S.d2r=S.r2d=M.identity,S.d2c=S.r2c=S.d2l=S.r2l=D,S.c2d=S.c2r=S.l2d=S.l2r=R,S.d2p=S.r2p=function(U,q,Q){return S.l2p(D(U,0,Q))},S.p2d=S.p2r=function(U,q,Q){return R(se(U),q,Q)},S.cleanPos=function(U){return M.cleanDate(U,p,S.calendar)}):S.type==="category"?(S.d2c=S.d2l=F,S.r2d=S.c2d=S.l2d=B,S.d2r=S.d2l_noadd=K,S.r2c=function(U){var q=J(U);return q!==void 0?q:S.fraction2r(.5)},S.l2r=S.c2r=r,S.r2l=J,S.d2p=function(U){return S.l2p(S.r2c(U))},S.p2d=function(U){return B(se(U))},S.r2p=S.d2p,S.p2r=se,S.cleanPos=function(U){return typeof U=="string"&&U!==""?U:r(U)}):S.type==="multicategory"&&(S.r2d=S.c2d=S.l2d=B,S.d2r=S.d2l_noadd=K,S.r2c=function(U){var q=K(U);return q!==void 0?q:S.fraction2r(.5)},S.r2c_just_indices=Y,S.l2r=S.c2r=r,S.r2l=K,S.d2p=function(U){return S.l2p(S.r2c(U))},S.p2d=function(U){return B(se(U))},S.r2p=S.d2p,S.p2r=se,S.cleanPos=function(U){return Array.isArray(U)||typeof U=="string"&&U!==""?U:r(U)},S.setupMultiCategory=function(U){var q=S._traceIndices,Q,W,X=S._matchGroup;if(X&&S._categories.length===0){for(var te in X)if(te!==P){var ee=k[s.id2name(te)];q=q.concat(ee._traceIndices)}}var ie=[[0,{}],[0,{}]],le=[];for(Q=0;Q<q.length;Q++){var ye=U[q[Q]];if(z in ye){var ue=ye[z],pe=ye._length||M.minRowLength(ue);if(f(ue[0])&&f(ue[1]))for(W=0;W<pe;W++){var ge=ue[0][W],Te=ue[1][W];u(ge)&&u(Te)&&(le.push([ge,Te]),ge in ie[0][1]||(ie[0][1][ge]=ie[0][0]++),Te in ie[1][1]||(ie[1][1][Te]=ie[1][0]++))}}}for(le.sort(function(_e,De){var Oe=ie[0][1],Ue=Oe[_e[0]]-Oe[De[0]];if(Ue)return Ue;var xe=ie[1][1];return xe[_e[1]]-xe[De[1]]}),Q=0;Q<le.length;Q++)F(le[Q])}),S.fraction2r=function(U){var q=S.r2l(S.range[0]),Q=S.r2l(S.range[1]);return S.l2r(q+U*(Q-q))},S.r2fraction=function(U){var q=S.r2l(S.range[0]),Q=S.r2l(S.range[1]);return(S.r2l(U)-q)/(Q-q)},S.cleanRange=function(U,q){q||(q={}),U||(U="range");var Q=M.nestedProperty(S,U).get(),W,X;if(S.type==="date"?X=M.dfltRange(S.calendar):z==="y"?X=w.DFLTRANGEY:S._name==="realaxis"?X=[0,1]:X=q.dfltRange||w.DFLTRANGEX,X=X.slice(),(S.rangemode==="tozero"||S.rangemode==="nonnegative")&&(X[0]=0),!Q||Q.length!==2){M.nestedProperty(S,U).set(X);return}for(S.type==="date"&&!S.autorange&&(Q[0]=M.cleanDate(Q[0],p,S.calendar),Q[1]=M.cleanDate(Q[1],p,S.calendar)),W=0;W<2;W++)if(S.type==="date"){if(!M.isDateTime(Q[W],S.calendar)){S[U]=X;break}if(S.r2l(Q[0])===S.r2l(Q[1])){var te=M.constrain(S.r2l(Q[0]),M.MIN_MS+1e3,M.MAX_MS-1e3);Q[0]=S.l2r(te-1e3),Q[1]=S.l2r(te+1e3);break}}else{if(!e(Q[W]))if(e(Q[1-W]))Q[W]=Q[1-W]*(W?10:.1);else{S[U]=X;break}if(Q[W]<-i?Q[W]=-i:Q[W]>i&&(Q[W]=i),Q[0]===Q[1]){var ee=Math.max(1,Math.abs(Q[0]*1e-6));Q[0]-=ee,Q[1]+=ee}}},S.setScale=function(U){var q=k._size;if(S.overlaying){var Q=s.getFromId({_fullLayout:k},S.overlaying);S.domain=Q.domain}var W=U&&S._r?"_r":"range",X=S.calendar;S.cleanRange(W);var te=S.r2l(S[W][0],X),ee=S.r2l(S[W][1],X),ie=z==="y";if(ie?(S._offset=q.t+(1-S.domain[1])*q.h,S._length=q.h*(S.domain[1]-S.domain[0]),S._m=S._length/(te-ee),S._b=-S._m*ee):(S._offset=q.l+S.domain[0]*q.w,S._length=q.w*(S.domain[1]-S.domain[0]),S._m=S._length/(ee-te),S._b=-S._m*te),S._rangebreaks=[],S._lBreaks=0,S._m2=0,S._B=[],S.rangebreaks){var le,ye;if(S._rangebreaks=S.locateBreaks(Math.min(te,ee),Math.max(te,ee)),S._rangebreaks.length){for(le=0;le<S._rangebreaks.length;le++)ye=S._rangebreaks[le],S._lBreaks+=Math.abs(ye.max-ye.min);var ue=ie;te>ee&&(ue=!ue),ue&&S._rangebreaks.reverse();var pe=ue?-1:1;for(S._m2=pe*S._length/(Math.abs(ee-te)-S._lBreaks),S._B.push(-S._m2*(ie?ee:te)),le=0;le<S._rangebreaks.length;le++)ye=S._rangebreaks[le],S._B.push(S._B[S._B.length-1]-pe*S._m2*(ye.max-ye.min));for(le=0;le<S._rangebreaks.length;le++)ye=S._rangebreaks[le],ye.pmin=re(ye.min),ye.pmax=re(ye.max)}}if(!isFinite(S._m)||!isFinite(S._b)||S._length<0)throw k._replotting=!1,new Error("Something went wrong with axis scaling")},S.maskBreaks=function(U){var q=S.rangebreaks||[],Q,W,X,te,ee;q._cachedPatterns||(q._cachedPatterns=q.map(function(Oe){return Oe.enabled&&Oe.bounds?M.simpleMap(Oe.bounds,Oe.pattern?a:S.d2c):null})),q._cachedValues||(q._cachedValues=q.map(function(Oe){return Oe.enabled&&Oe.values?M.simpleMap(Oe.values,S.d2c).sort(M.sorterAsc):null}));for(var ie=0;ie<q.length;ie++){var le=q[ie];if(le.enabled){if(le.bounds){var ye=le.pattern;switch(Q=q._cachedPatterns[ie],W=Q[0],X=Q[1],ye){case h:ee=new Date(U),te=ee.getUTCDay(),W>X&&(X+=7,te<W&&(te+=7));break;case b:ee=new Date(U);var ue=ee.getUTCHours(),pe=ee.getUTCMinutes(),ge=ee.getUTCSeconds(),Te=ee.getUTCMilliseconds();te=ue+(pe/60+ge/3600+Te/36e5),W>X&&(X+=24,te<W&&(te+=24));break;case"":te=U;break}if(te>=W&&te<X)return p}else for(var _e=q._cachedValues[ie],De=0;De<_e.length;De++)if(W=_e[De],X=W+le.dvalue,U>=W&&U<X)return p}}return U},S.locateBreaks=function(U,q){var Q,W,X,te,ee=[];if(!S.rangebreaks)return ee;var ie=S.rangebreaks.slice().sort(function(xe,Pe){return xe.pattern===h&&Pe.pattern===b?-1:Pe.pattern===h&&xe.pattern===b?1:0}),le=function(xe,Pe){if(xe=M.constrain(xe,U,q),Pe=M.constrain(Pe,U,q),xe!==Pe){for(var Ve=!0,Qe=0;Qe<ee.length;Qe++){var Fe=ee[Qe];xe<Fe.max&&Pe>=Fe.min&&(xe<Fe.min&&(Fe.min=xe),Pe>Fe.max&&(Fe.max=Pe),Ve=!1)}Ve&&ee.push({min:xe,max:Pe})}};for(Q=0;Q<ie.length;Q++){var ye=ie[Q];if(ye.enabled)if(ye.bounds){var ue=U,pe=q;ye.pattern&&(ue=Math.floor(ue)),W=M.simpleMap(ye.bounds,ye.pattern?a:S.r2l),X=W[0],te=W[1];var ge=new Date(ue),Te,_e;switch(ye.pattern){case h:_e=y,Te=((te<X?7:0)+(te-X))*v,ue+=X*v-(ge.getUTCDay()*v+ge.getUTCHours()*x+ge.getUTCMinutes()*l+ge.getUTCSeconds()*_+ge.getUTCMilliseconds());break;case b:_e=v,Te=((te<X?24:0)+(te-X))*x,ue+=X*x-(ge.getUTCHours()*x+ge.getUTCMinutes()*l+ge.getUTCSeconds()*_+ge.getUTCMilliseconds());break;default:ue=Math.min(W[0],W[1]),pe=Math.max(W[0],W[1]),_e=pe-ue,Te=_e}for(var De=ue;De<pe;De+=_e)le(De,De+Te)}else for(var Oe=M.simpleMap(ye.values,S.d2c),Ue=0;Ue<Oe.length;Ue++)X=Oe[Ue],te=X+ye.dvalue,le(X,te)}return ee.sort(function(xe,Pe){return xe.min-Pe.min}),ee},S.makeCalcdata=function(U,q,Q){var W,X,te,ee,ie=S.type,le=ie==="date"&&U[q+"calendar"];if(q in U){if(W=U[q],ee=U._length||M.minRowLength(W),M.isTypedArray(W)&&(ie==="linear"||ie==="log")){if(ee===W.length)return W;if(W.subarray)return W.subarray(0,ee)}if(ie==="multicategory")return V(W,ee);for(X=new Array(ee),te=0;te<ee;te++)X[te]=S.d2c(W[te],0,le,Q)}else{var ye=q+"0"in U?S.d2c(U[q+"0"],0,le):0,ue=U["d"+q]?Number(U["d"+q]):1;for(W=U[{x:"y",y:"x"}[q]],ee=U._length||W.length,X=new Array(ee),te=0;te<ee;te++)X[te]=ye+te*ue}if(S.rangebreaks)for(te=0;te<ee;te++)X[te]=S.maskBreaks(X[te]);return X},S.isValidRange=function(U){return Array.isArray(U)&&U.length===2&&e(S.r2l(U[0]))&&e(S.r2l(U[1]))},S.isPtWithinRange=function(U,q){var Q=S.c2l(U[z],null,q),W=S.r2l(S.range[0]),X=S.r2l(S.range[1]);return W<X?W<=Q&&Q<=X:X<=Q&&Q<=W},S._emptyCategories=function(){S._categories=[],S._categoriesMap={}},S.clearCalc=function(){var U=S._matchGroup;if(U){var q=null,Q=null;for(var W in U){var X=k[s.id2name(W)];if(X._categories){q=X._categories,Q=X._categoriesMap;break}}q&&Q?(S._categories=q,S._categoriesMap=Q):S._emptyCategories()}else S._emptyCategories();if(S._initialCategories)for(var te=0;te<S._initialCategories.length;te++)F(S._initialCategories[te])},S.sortByInitialCategories=function(){var U=[];if(S._emptyCategories(),S._initialCategories)for(var q=0;q<S._initialCategories.length;q++)F(S._initialCategories[q]);U=U.concat(S._traceIndices);var Q=S._matchGroup;for(var W in Q)if(P!==W){var X=k[s.id2name(W)];X._categories=S._categories,X._categoriesMap=S._categoriesMap,U=U.concat(X._traceIndices)}return U};var N=k._d3locale;S.type==="date"&&(S._dateFormat=N?N.timeFormat:c,S._extraFormat=k._extraFormat),S._separators=k.separators,S._numFormat=N?N.numberFormat:A,delete S._minDtick,delete S._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(g,ne,ae){ne.exports=function(c){var M=["showexponent","showtickprefix","showticksuffix"],A=M.filter(function(a){return c[a]!==void 0}),e=function(a){return c[a]===c[A[0]]};if(A.every(e)||A.length===1)return c[A[0]]}},{}],578:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/color").contrast,M=g("./layout_attributes"),A=g("./show_dflt"),e=g("../array_container_defaults");ne.exports=function(t,r,f,o,i){i||(i={});var p=A(t),d=f("showticklabels");if(d){var y=i.font||{},v=r.color,x=r.ticklabelposition||"",l=x.indexOf("inside")!==-1?c(i.bgColor):v&&v!==M.color.dflt?v:y.color;if(T.coerceFont(f,"tickfont",{family:y.family,size:y.size,color:l}),!i.noTicklabelstep&&o!=="multicategory"&&o!=="log"&&f("ticklabelstep"),i.noAng||f("tickangle"),o!=="category"){var _=f("tickformat");e(t,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:a}),r.tickformatstops.length||delete r.tickformatstops,!i.noExp&&!_&&o!=="date"&&(f("showexponent",p),f("exponentformat"),f("minexponent"),f("separatethousands"))}}};function a(n,t){function r(o,i){return T.coerce(n,t,M.tickformatstops,o,i)}var f=r("enabled");f&&(r("dtickrange"),r("value"))}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(g,ne,ae){var T=g("../../lib"),c=g("./layout_attributes");ne.exports=function(A,e,a,n){var t=n.isMinor,r=t?A.minor||{}:A,f=t?e.minor:e,o=t?c.minor:c,i=t?"minor.":"",p=T.coerce2(r,f,o,"ticklen",t?(e.ticklen||5)*.6:void 0),d=T.coerce2(r,f,o,"tickwidth",t?e.tickwidth||1:void 0),y=T.coerce2(r,f,o,"tickcolor",(t?e.tickcolor:void 0)||f.color),v=a(i+"ticks",!t&&n.outerTicks||p||d||y?"outside":"");v||(delete f.ticklen,delete f.tickwidth,delete f.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(g,ne,ae){var T=g("./clean_ticks"),c=g("../../lib").isArrayOrTypedArray;ne.exports=function(A,e,a,n,t){t||(t={});var r=t.isMinor,f=r?A.minor||{}:A,o=r?e.minor:e,i=r?"minor.":"";function p(w){var b=f[w];return b!==void 0?b:(o._template||{})[w]}var d=p("tick0"),y=p("dtick"),v=p("tickvals"),x=c(v)?"array":y?"linear":"auto",l=a(i+"tickmode",x);if(l==="auto")a(i+"nticks");else if(l==="linear"){var _=o.dtick=T.dtick(y,n);o.tick0=T.tick0(d,n,e.calendar,_)}else if(n!=="multicategory"){var s=a(i+"tickvals");s===void 0?o.tickmode="auto":r||a("ticktext")}}},{"../../lib":503,"./clean_ticks":560}],581:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../registry"),M=g("../../lib"),A=g("../../components/drawing"),e=g("./axes");ne.exports=function(n,t,r,f){var o=n._fullLayout;if(t.length===0){e.redrawComponents(n);return}function i(b){var h=b.xaxis,m=b.yaxis;o._defs.select("#"+b.clipId+"> rect").call(A.setTranslate,0,0).call(A.setScale,1,1),b.plot.call(A.setTranslate,h._offset,m._offset).call(A.setScale,1,1);var u=b.plot.selectAll(".scatterlayer .trace");u.selectAll(".point").call(A.setPointGroupScale,1,1),u.selectAll(".textpoint").call(A.setTextPointsScale,1,1),u.call(A.hideOutsideRangePoints,b)}function p(b,h){var m=b.plotinfo,u=m.xaxis,L=m.yaxis,S=u._length,k=L._length,P=!!b.xr1,z=!!b.yr1,I=[];if(P){var D=M.simpleMap(b.xr0,u.r2l),R=M.simpleMap(b.xr1,u.r2l),B=D[1]-D[0],F=R[1]-R[0];I[0]=(D[0]*(1-h)+h*R[0]-D[0])/(D[1]-D[0])*S,I[2]=S*(1-h+h*F/B),u.range[0]=u.l2r(D[0]*(1-h)+h*R[0]),u.range[1]=u.l2r(D[1]*(1-h)+h*R[1])}else I[0]=0,I[2]=S;if(z){var V=M.simpleMap(b.yr0,L.r2l),Y=M.simpleMap(b.yr1,L.r2l),K=V[1]-V[0],J=Y[1]-Y[0];I[1]=(V[1]*(1-h)+h*Y[1]-V[1])/(V[0]-V[1])*k,I[3]=k*(1-h+h*J/K),L.range[0]=u.l2r(V[0]*(1-h)+h*Y[0]),L.range[1]=L.l2r(V[1]*(1-h)+h*Y[1])}else I[1]=0,I[3]=k;e.drawOne(n,u,{skipTitle:!0}),e.drawOne(n,L,{skipTitle:!0}),e.redrawComponents(n,[u._id,L._id]);var G=P?S/I[2]:1,Z=z?k/I[3]:1,re=P?I[0]:0,se=z?I[1]:0,oe=P?I[0]/I[2]*S:0,N=z?I[1]/I[3]*k:0,U=u._offset-oe,q=L._offset-N;m.clipRect.call(A.setTranslate,re,se).call(A.setScale,1/G,1/Z),m.plot.call(A.setTranslate,U,q).call(A.setScale,G,Z),A.setPointGroupScale(m.zoomScalePts,1/G,1/Z),A.setTextPointsScale(m.zoomScaleTxt,1/G,1/Z)}var d;f&&(d=f());function y(){for(var b={},h=0;h<t.length;h++){var m=t[h],u=m.plotinfo.xaxis,L=m.plotinfo.yaxis;m.xr1&&(b[u._name+".range"]=m.xr1.slice()),m.yr1&&(b[L._name+".range"]=m.yr1.slice())}return d&&d(),c.call("relayout",n,b).then(function(){for(var S=0;S<t.length;S++)i(t[S].plotinfo)})}function v(){for(var b={},h=0;h<t.length;h++){var m=t[h],u=m.plotinfo.xaxis,L=m.plotinfo.yaxis;m.xr0&&(b[u._name+".range"]=m.xr0.slice()),m.yr0&&(b[L._name+".range"]=m.yr0.slice())}return c.call("relayout",n,b).then(function(){for(var S=0;S<t.length;S++)i(t[S].plotinfo)})}var x,l,_,s=T.ease(r.easing);n._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(_),_=null,v()});function w(){l=Date.now();for(var b=Math.min(1,(l-x)/r.duration),h=s(b),m=0;m<t.length;m++)p(t[m],h);l-x>r.duration?(y(),_=window.cancelAnimationFrame(w)):_=window.requestAnimationFrame(w)}return x=Date.now(),_=window.requestAnimationFrame(w),Promise.resolve()}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(g,ne,ae){var T=g("../../registry").traceIs,c=g("./axis_autotype");ne.exports=function(t,r,f,o){f("autotypenumbers",o.autotypenumbersDflt);var i=f("type",(o.splomStash||{}).type);i==="-"&&(M(r,o.data),r.type==="-"?r.type="linear":t.type=r.type)};function M(n,t){if(n.type==="-"){var r=n._id,f=r.charAt(0),o;r.indexOf("scene")!==-1&&(r=f);var i=A(t,r,f);if(!!i){if(i.type==="histogram"&&f==={v:"y",h:"x"}[i.orientation||"v"]){n.type="linear";return}var p=f+"calendar",d=i[p],y={noMultiCategory:!T(i,"cartesian")||T(i,"noMultiCategory")};if(i.type==="box"&&i._hasPreCompStats&&f==={h:"x",v:"y"}[i.orientation||"v"]&&(y.noMultiCategory=!0),y.autotypenumbers=n.autotypenumbers,a(i,f)){var v=e(i),x=[];for(o=0;o<t.length;o++){var l=t[o];!T(l,"box-violin")||(l[f+"axis"]||f)!==r||(l[v]!==void 0?x.push(l[v][0]):l.name!==void 0?x.push(l.name):x.push("text"),l[p]!==d&&(d=void 0))}n.type=c(x,d,y)}else if(i.type==="splom"){var _=i.dimensions,s=_[i._axesDim[r]];s.visible&&(n.type=c(s.values,d,y))}else n.type=c(i[f]||[i[f+"0"]],d,y)}}}function A(n,t,r){for(var f=0;f<n.length;f++){var o=n[f];if(o.type==="splom"&&o._length>0&&(o["_"+r+"axes"]||{})[t])return o;if((o[r+"axis"]||r)===t){if(a(o,r))return o;if((o[r]||[]).length||o[r+"0"])return o}}}function e(n){return{v:"x",h:"y"}[n.orientation||"v"]}function a(n,t){var r=e(n),f=T(n,"box-violin"),o=T(n._fullInput||{},"candlestick");return f&&!o&&t===r&&n[r]===void 0&&n[r+"0"]===void 0}},{"../../registry":638,"./axis_autotype":555}],583:[function(g,ne,ae){var T=g("../registry"),c=g("../lib");ae.manageCommandObserver=function(t,r,f,o){var i={},p=!0;r&&r._commandObserver&&(i=r._commandObserver),i.cache||(i.cache={}),i.lookupTable={};var d=ae.hasSimpleAPICommandBindings(t,f,i.lookupTable);if(r&&r._commandObserver){if(d)return i;if(r._commandObserver.remove)return r._commandObserver.remove(),r._commandObserver=null,i}if(d){M(t,d,i.cache),i.check=function(){if(!!p){var l=M(t,d,i.cache);return l.changed&&o&&i.lookupTable[l.value]!==void 0&&(i.disable(),Promise.resolve(o({value:l.value,type:d.type,prop:d.prop,traces:d.traces,index:i.lookupTable[l.value]})).then(i.enable,i.enable)),l.changed}};for(var y=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],v=0;v<y.length;v++)t._internalOn(y[v],i.check);i.remove=function(){for(var x=0;x<y.length;x++)t._removeInternalListener(y[x],i.check)}}else c.log("Unable to automatically bind plot updates to API command"),i.lookupTable={},i.remove=function(){};return i.disable=function(){p=!1},i.enable=function(){p=!0},r&&(r._commandObserver=i),i},ae.hasSimpleAPICommandBindings=function(t,r,f){var o,i=r.length,p;for(o=0;o<i;o++){var d,y=r[o],v=y.method,x=y.args;if(Array.isArray(x)||(x=[]),!v)return!1;var l=ae.computeAPICommandBindings(t,v,x);if(l.length!==1)return!1;if(!p)p=l[0],Array.isArray(p.traces)&&p.traces.sort();else{if(d=l[0],d.type!==p.type||d.prop!==p.prop)return!1;if(Array.isArray(p.traces))if(Array.isArray(d.traces)){d.traces.sort();for(var _=0;_<p.traces.length;_++)if(p.traces[_]!==d.traces[_])return!1}else return!1;else if(d.prop!==p.prop)return!1}d=l[0];var s=d.value;if(Array.isArray(s))if(s.length===1)s=s[0];else return!1;f&&(f[s]=o)}return p};function M(t,r,f){var o,i,p,d=!1;if(r.type==="data")o=t._fullData[r.traces!==null?r.traces[0]:0];else if(r.type==="layout")o=t._fullLayout;else return!1;return i=c.nestedProperty(o,r.prop).get(),p=f[r.type]=f[r.type]||{},p.hasOwnProperty(r.prop)&&p[r.prop]!==i&&(d=!0),p[r.prop]=i,{changed:d,value:i}}ae.executeAPICommand=function(t,r,f){if(r==="skip")return Promise.resolve();var o=T.apiMethodRegistry[r],i=[t];Array.isArray(f)||(f=[]);for(var p=0;p<f.length;p++)i.push(f[p]);return o.apply(null,i).catch(function(d){return c.warn("API call to Plotly."+r+" rejected.",d),Promise.reject(d)})},ae.computeAPICommandBindings=function(t,r,f){var o;switch(Array.isArray(f)||(f=[]),r){case"restyle":o=a(t,f);break;case"relayout":o=e(t,f);break;case"update":o=a(t,[f[0],f[2]]).concat(e(t,[f[1]]));break;case"animate":o=A(t,f);break;default:o=[]}return o};function A(t,r){return Array.isArray(r[0])&&r[0].length===1&&["string","number"].indexOf(typeof r[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:r[0][0].toString()}]:[]}function e(t,r){var f=[],o=r[0],i={};if(typeof o=="string")i[o]=r[1];else if(c.isPlainObject(o))i=o;else return f;return n(i,function(p,d,y){f.push({type:"layout",prop:p,value:y})},"",0),f}function a(t,r){var f,o,i,p,d=[];if(o=r[0],i=r[1],f=r[2],p={},typeof o=="string")p[o]=i;else if(c.isPlainObject(o))p=o,f===void 0&&(f=i);else return d;return f===void 0&&(f=null),n(p,function(y,v,x){var l,_;if(Array.isArray(x)){_=x.slice();var s=Math.min(_.length,t.data.length);f&&(s=Math.min(s,f.length)),l=[];for(var w=0;w<s;w++)l[w]=f?f[w]:w}else _=x,l=f?f.slice():null;if(l===null)Array.isArray(_)&&(_=_[0]);else if(Array.isArray(l)){if(!Array.isArray(_)){var b=_;_=[];for(var h=0;h<l.length;h++)_[h]=b}_.length=Math.min(l.length,_.length)}d.push({type:"data",prop:y,traces:l,value:_})},"",0),d}function n(t,r,f,o){Object.keys(t).forEach(function(i){var p=t[i];if(i[0]!=="_"){var d=f+(o>0?".":"")+i;c.isPlainObject(p)?n(p,r,d,o+1):r(d,i,p)}})}},{"../lib":503,"../registry":638}],584:[function(g,ne,ae){var T=g("../lib/extend").extendFlat;ae.attributes=function(c,M){c=c||{},M=M||{};var A={valType:"info_array",editType:c.editType,items:[{valType:"number",min:0,max:1,editType:c.editType},{valType:"number",min:0,max:1,editType:c.editType}],dflt:[0,1]};c.name&&c.name+"",c.trace,M.description&&""+M.description;var e={x:T({},A,{}),y:T({},A,{}),editType:c.editType};return c.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:c.editType},e.column={valType:"integer",min:0,dflt:0,editType:c.editType}),e},ae.defaults=function(c,M,A,e){var a=e&&e.x||[0,1],n=e&&e.y||[0,1],t=M.grid;if(t){var r=A("domain.column");r!==void 0&&(r<t.columns?a=t._domains.x[r]:delete c.domain.column);var f=A("domain.row");f!==void 0&&(f<t.rows?n=t._domains.y[f]:delete c.domain.row)}var o=A("domain.x",a),i=A("domain.y",n);o[0]<o[1]||(c.domain.x=a.slice()),i[0]<i[1]||(c.domain.y=n.slice())}},{"../lib/extend":493}],585:[function(g,ne,ae){ne.exports=function(T){var c=T.editType,M=T.colorEditType;M===void 0&&(M=c);var A={family:{valType:"string",noBlank:!0,strict:!0,editType:c},size:{valType:"number",min:1,editType:c},color:{valType:"color",editType:M},editType:c};return T.autoSize&&(A.size.dflt="auto"),T.autoColor&&(A.color.dflt="auto"),T.arrayOk&&(A.family.arrayOk=!0,A.size.arrayOk=!0,A.color.arrayOk=!0),A}},{}],586:[function(g,ne,ae){ne.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(g,ne,ae){ae.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},ae.axesNames=["lonaxis","lataxis"],ae.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},ae.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},ae.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},ae.clipPad=.001,ae.precision=.1,ae.landColor="#F0DC82",ae.waterColor="#3399FF",ae.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},ae.sphereSVG={type:"Sphere"},ae.fillLayers={ocean:1,land:1,lakes:1},ae.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},ae.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],ae.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],ae.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("d3-geo"),M=c.geoPath,A=c.geoDistance,e=g("d3-geo-projection"),a=g("../../registry"),n=g("../../lib"),t=n.strTranslate,r=g("../../components/color"),f=g("../../components/drawing"),o=g("../../components/fx"),i=g("../plots"),p=g("../cartesian/axes"),d=g("../cartesian/autorange").getAutoRange,y=g("../../components/dragelement"),v=g("../cartesian/select").prepSelect,x=g("../cartesian/select").clearSelect,l=g("../cartesian/select").selectOnClick,_=g("./zoom"),s=g("./constants"),w=g("../../lib/geo_location_utils"),b=g("../../lib/topojson_utils"),h=g("topojson-client").feature;function m(P){this.id=P.id,this.graphDiv=P.graphDiv,this.container=P.container,this.topojsonURL=P.topojsonURL,this.isStatic=P.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var u=m.prototype;ne.exports=function(z){return new m(z)},u.plot=function(P,z,I){var D=this,R=z[this.id],B=[],F=!1;for(var V in s.layerNameToAdjective)if(V!=="frame"&&R["show"+V]){F=!0;break}for(var Y=0;Y<P.length;Y++)if(P[0][0].trace.locationmode){F=!0;break}if(F){var K=b.getTopojsonName(R);(D.topojson===null||K!==D.topojsonName)&&(D.topojsonName=K,PlotlyGeoAssets.topojson[D.topojsonName]===void 0&&B.push(D.fetchTopojson()))}B=B.concat(w.fetchTraceGeoData(P)),I.push(new Promise(function(J,G){Promise.all(B).then(function(){D.topojson=PlotlyGeoAssets.topojson[D.topojsonName],D.update(P,z),J()}).catch(G)}))},u.fetchTopojson=function(){var P=this,z=b.getTopojsonPath(P.topojsonURL,P.topojsonName);return new Promise(function(I,D){T.json(z,function(R,B){if(R)return R.status===404?D(new Error(["plotly.js could not find topojson file at",z+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):D(new Error(["unexpected error while fetching topojson file at",z].join(" ")));PlotlyGeoAssets.topojson[P.topojsonName]=B,I()})})},u.update=function(P,z){var I=z[this.id];this.hasChoropleth=!1;for(var D=0;D<P.length;D++){var R=P[D],B=R[0].trace;B.type==="choropleth"&&(this.hasChoropleth=!0),B.visible===!0&&B._length>0&&B._module.calcGeoJSON(R,z)}var F=this.updateProjection(P,z);if(!F){(!this.viewInitial||this.scope!==I.scope)&&this.saveViewInitial(I),this.scope=I.scope,this.updateBaseLayers(z,I),this.updateDims(z,I),this.updateFx(z,I),i.generalUpdatePerTraceModule(this.graphDiv,this,P,I);var V=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=V.selectAll(".point"),this.dataPoints.text=V.selectAll("text"),this.dataPaths.line=V.selectAll(".js-line");var Y=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Y.selectAll("path"),this.render()}},u.updateProjection=function(P,z){var I=this.graphDiv,D=z[this.id],R=z._size,B=D.domain,F=D.projection,V=D.lonaxis,Y=D.lataxis,K=V._ax,J=Y._ax,G=this.projection=L(D),Z=[[R.l+R.w*B.x[0],R.t+R.h*(1-B.y[1])],[R.l+R.w*B.x[1],R.t+R.h*(1-B.y[0])]],re=D.center||{},se=F.rotation||{},oe=V.range||[],N=Y.range||[];if(D.fitbounds){K._length=Z[1][0]-Z[0][0],J._length=Z[1][1]-Z[0][1],K.range=d(I,K),J.range=d(I,J);var U=(K.range[0]+K.range[1])/2,q=(J.range[0]+J.range[1])/2;if(D._isScoped)re={lon:U,lat:q};else if(D._isClipped){re={lon:U,lat:q},se={lon:U,lat:q,roll:se.roll};var Q=F.type,W=s.lonaxisSpan[Q]/2||180,X=s.lataxisSpan[Q]/2||90;oe=[U-W,U+W],N=[q-X,q+X]}else re={lon:U,lat:q},se={lon:U,lat:se.lat,roll:se.roll}}G.center([re.lon-se.lon,re.lat-se.lat]).rotate([-se.lon,-se.lat,se.roll]).parallels(F.parallels);var te=k(oe,N);G.fitExtent(Z,te);var ee=this.bounds=G.getBounds(te),ie=this.fitScale=G.scale(),le=G.translate();if(D.fitbounds){var ye=G.getBounds(k(K.range,J.range)),ue=Math.min((ee[1][0]-ee[0][0])/(ye[1][0]-ye[0][0]),(ee[1][1]-ee[0][1])/(ye[1][1]-ye[0][1]));isFinite(ue)?G.scale(ue*ie):n.warn("Something went wrong during"+this.id+"fitbounds computations.")}else G.scale(F.scale*ie);var pe=this.midPt=[(ee[0][0]+ee[1][0])/2,(ee[0][1]+ee[1][1])/2];if(G.translate([le[0]+(pe[0]-le[0]),le[1]+(pe[1]-le[1])]).clipExtent(ee),D._isAlbersUsa){var ge=G([re.lon,re.lat]),Te=G.translate();G.translate([Te[0]-(ge[0]-Te[0]),Te[1]-(ge[1]-Te[1])])}},u.updateBaseLayers=function(P,z){var I=this,D=I.topojson,R=I.layers,B=I.basePaths;function F(Z){return Z==="lonaxis"||Z==="lataxis"}function V(Z){return Boolean(s.lineLayers[Z])}function Y(Z){return Boolean(s.fillLayers[Z])}var K=this.hasChoropleth?s.layersForChoropleth:s.layers,J=K.filter(function(Z){return V(Z)||Y(Z)?z["show"+Z]:F(Z)?z[Z].showgrid:!0}),G=I.framework.selectAll(".layer").data(J,String);G.exit().each(function(Z){delete R[Z],delete B[Z],T.select(this).remove()}),G.enter().append("g").attr("class",function(Z){return"layer "+Z}).each(function(Z){var re=R[Z]=T.select(this);Z==="bg"?I.bgRect=re.append("rect").style("pointer-events","all"):F(Z)?B[Z]=re.append("path").style("fill","none"):Z==="backplot"?re.append("g").classed("choroplethlayer",!0):Z==="frontplot"?re.append("g").classed("scatterlayer",!0):V(Z)?B[Z]=re.append("path").style("fill","none").style("stroke-miterlimit",2):Y(Z)&&(B[Z]=re.append("path").style("stroke","none"))}),G.order(),G.each(function(Z){var re=B[Z],se=s.layerNameToAdjective[Z];Z==="frame"?re.datum(s.sphereSVG):V(Z)||Y(Z)?re.datum(h(D,D.objects[Z])):F(Z)&&re.datum(S(Z,z,P)).call(r.stroke,z[Z].gridcolor).call(f.dashLine,z[Z].griddash,z[Z].gridwidth),V(Z)?re.call(r.stroke,z[se+"color"]).call(f.dashLine,"",z[se+"width"]):Y(Z)&&re.call(r.fill,z[se+"color"])})},u.updateDims=function(P,z){var I=this.bounds,D=(z.framewidth||0)/2,R=I[0][0]-D,B=I[0][1]-D,F=I[1][0]-R+D,V=I[1][1]-B+D;f.setRect(this.clipRect,R,B,F,V),this.bgRect.call(f.setRect,R,B,F,V).call(r.fill,z.bgcolor),this.xaxis._offset=R,this.xaxis._length=F,this.yaxis._offset=B,this.yaxis._length=V},u.updateFx=function(P,z){var I=this,D=I.graphDiv,R=I.bgRect,B=P.dragmode,F=P.clickmode;if(I.isStatic)return;function V(){var G=I.viewInitial,Z={};for(var re in G)Z[I.id+"."+re]=G[re];a.call("_guiRelayout",D,Z),D.emit("plotly_doubleclick",null)}function Y(G){return I.projection.invert([G[0]+I.xaxis._offset,G[1]+I.yaxis._offset])}var K;B==="select"?K=function(G,Z){var re=G.range={};re[I.id]=[Y([Z.xmin,Z.ymin]),Y([Z.xmax,Z.ymax])]}:B==="lasso"&&(K=function(G,Z,re){var se=G.lassoPoints={};se[I.id]=re.filtered.map(Y)});var J={element:I.bgRect.node(),gd:D,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:K},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function(G){G===2&&x(D)}};B==="pan"?(R.node().onmousedown=null,R.call(_(I,z)),R.on("dblclick.zoom",V),D._context._scrollZoom.geo||R.on("wheel.zoom",null)):(B==="select"||B==="lasso")&&(R.on(".zoom",null),J.prepFn=function(G,Z,re){v(G,Z,re,J,B)},y.init(J)),R.on("mousemove",function(){var G=I.projection.invert(n.getPositionFromD3Event());if(!G)return y.unhover(D,T.event);I.xaxis.p2c=function(){return G[0]},I.yaxis.p2c=function(){return G[1]},o.hover(D,T.event,I.id)}),R.on("mouseout",function(){D._dragging||y.unhover(D,T.event)}),R.on("click",function(){B!=="select"&&B!=="lasso"&&(F.indexOf("select")>-1&&l(T.event,D,[I.xaxis],[I.yaxis],I.id,J),F.indexOf("event")>-1&&o.click(D,T.event))})},u.makeFramework=function(){var P=this,z=P.graphDiv,I=z._fullLayout,D="clip"+I._uid+P.id;P.clipDef=I._clips.append("clipPath").attr("id",D),P.clipRect=P.clipDef.append("rect"),P.framework=T.select(P.container).append("g").attr("class","geo "+P.id).call(f.setClipUrl,D,z),P.project=function(R){var B=P.projection(R);return B?[B[0]-P.xaxis._offset,B[1]-P.yaxis._offset]:[null,null]},P.xaxis={_id:"x",c2p:function(R){return P.project(R)[0]}},P.yaxis={_id:"y",c2p:function(R){return P.project(R)[1]}},P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},p.setConvert(P.mockAxis,I)},u.saveViewInitial=function(P){var z=P.center||{},I=P.projection,D=I.rotation||{};this.viewInitial={fitbounds:P.fitbounds,"projection.scale":I.scale};var R;P._isScoped?R={"center.lon":z.lon,"center.lat":z.lat}:P._isClipped?R={"projection.rotation.lon":D.lon,"projection.rotation.lat":D.lat}:R={"center.lon":z.lon,"center.lat":z.lat,"projection.rotation.lon":D.lon},n.extendFlat(this.viewInitial,R)},u.render=function(){var P=this.projection,z=P.getPath(),I;function D(B){var F=P(B.lonlat);return F?t(F[0],F[1]):null}function R(B){return P.isLonLatOverEdges(B.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",z);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(B){return z(B.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",R).attr("transform",D)};function L(P){var z=P.projection,I=z.type,D=s.projNames[I];D="geo"+n.titleCase(D);for(var R=c[D]||e[D],B=R(),F=P._isSatellite?Math.acos(1/z.distance)*180/Math.PI:P._isClipped?s.lonaxisSpan[I]/2:null,V=["center","rotate","parallels","clipExtent"],Y=function(G){return G?B:[]},K=0;K<V.length;K++){var J=V[K];typeof B[J]!="function"&&(B[J]=Y)}return B.isLonLatOverEdges=function(G){if(B(G)===null)return!0;if(F){var Z=B.rotate(),re=A(G,[-Z[0],-Z[1]]),se=F*Math.PI/180;return re>se}else return!1},B.getPath=function(){return M().projection(B)},B.getBounds=function(G){return B.getPath().bounds(G)},B.precision(s.precision),P._isSatellite&&B.tilt(z.tilt).distance(z.distance),F&&B.clipAngle(F-s.clipPad),B}function S(P,z,I){var D=1e-6,R=2.5,B=z[P],F=s.scopeDefaults[z.scope],V,Y,K;P==="lonaxis"?(V=F.lonaxisRange,Y=F.lataxisRange,K=function(q,Q){return[q,Q]}):P==="lataxis"&&(V=F.lataxisRange,Y=F.lonaxisRange,K=function(q,Q){return[Q,q]});var J={type:"linear",range:[V[0],V[1]-D],tick0:B.tick0,dtick:B.dtick};p.setConvert(J,I);var G=p.calcTicks(J);!z.isScoped&&P==="lonaxis"&&G.pop();for(var Z=G.length,re=new Array(Z),se=0;se<Z;se++)for(var oe=G[se].x,N=re[se]=[],U=Y[0];U<Y[1]+R;U+=R)N.push(K(oe,U));return{type:"MultiLineString",coordinates:re}}function k(P,z){var I=s.clipPad,D=P[0]+I,R=P[1]-I,B=z[0]+I,F=z[1]-I;D>0&&R<0&&(R+=360);var V=(R-D)/4;return{type:"Polygon",coordinates:[[[D,B],[D,F],[D+V,F],[D+2*V,F],[D+3*V,F],[R,F],[R,B],[R-V,B],[R-2*V,B],[R-3*V,B],[D,B]]]}}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(g,ne,ae){var T=g("../../plots/get_data").getSubplotCalcData,c=g("../../lib").counterRegex,M=g("./geo"),A="geo",e=c(A),a={};a[A]={valType:"subplotid",dflt:A,editType:"calc"};function n(f){for(var o=f._fullLayout,i=f.calcdata,p=o._subplots[A],d=0;d<p.length;d++){var y=p[d],v=T(i,A,y),x=o[y],l=x._subplot;l||(l=M({id:y,graphDiv:f,container:o._geolayer.node(),topojsonURL:f._context.topojsonURL,staticPlot:f._context.staticPlot}),o[y]._subplot=l),l.plot(v,o,f._promises)}}function t(f,o,i,p){for(var d=p._subplots[A]||[],y=0;y<d.length;y++){var v=d[y],x=p[v]._subplot;!o[v]&&!!x&&(x.framework.remove(),x.clipDef.remove())}}function r(f){for(var o=f._fullLayout,i=o._subplots[A],p=0;p<i.length;p++){var d=o[i[p]],y=d._subplot;y.updateFx(o,d)}}ne.exports={attr:A,name:A,idRoot:A,idRegex:e,attrRegex:e,attributes:a,layoutAttributes:g("./layout_attributes"),supplyLayoutDefaults:g("./layout_defaults"),plot:n,updateFx:r,clean:t}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(g,ne,ae){var T=g("../../components/color/attributes"),c=g("../domain").attributes,M=g("../../components/drawing/attributes").dash,A=g("./constants"),e=g("../../plot_api/edit_types").overrideAll,a=g("../../lib/sort_object_keys"),n={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:T.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:M},t=ne.exports=e({domain:c({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:a(A.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:a(A.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:T.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:A.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:A.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:A.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:A.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:T.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:T.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:T.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:T.background},lonaxis:n,lataxis:n},"plot","from-root");t.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(g,ne,ae){var T=g("../../lib"),c=g("../subplot_defaults"),M=g("../get_data").getSubplotData,A=g("./constants"),e=g("./layout_attributes"),a=A.axesNames;ne.exports=function(r,f,o){c(r,f,o,{type:"geo",attributes:e,handleDefaults:n,fullData:o,partition:"y"})};function n(t,r,f,o){var i=M(o.fullData,"geo",o.id),p=i.map(function(N){return N._expandedIndex}),d=f("resolution"),y=f("scope"),v=A.scopeDefaults[y],x=f("projection.type",v.projType),l=r._isAlbersUsa=x==="albers usa";l&&(y=r.scope="usa");var _=r._isScoped=y!=="world",s=r._isSatellite=x==="satellite",w=r._isConic=x.indexOf("conic")!==-1||x==="albers",b=r._isClipped=!!A.lonaxisSpan[x];if(t.visible===!1){var h=T.extendDeep({},r._template);h.showcoastlines=!1,h.showcountries=!1,h.showframe=!1,h.showlakes=!1,h.showland=!1,h.showocean=!1,h.showrivers=!1,h.showsubunits=!1,h.lonaxis&&(h.lonaxis.showgrid=!1),h.lataxis&&(h.lataxis.showgrid=!1),r._template=h}for(var m=f("visible"),u,L=0;L<a.length;L++){var S=a[L],k=[30,10][L],P;if(_)P=v[S+"Range"];else{var z=A[S+"Span"],I=(z[x]||z["*"])/2,D=f("projection.rotation."+S.substr(0,3),v.projRotate[L]);P=[D-I,D+I]}var R=f(S+".range",P);f(S+".tick0"),f(S+".dtick",k),u=f(S+".showgrid",m?void 0:!1),u&&(f(S+".gridcolor"),f(S+".gridwidth"),f(S+".griddash")),r[S]._ax={type:"linear",_id:S.slice(0,3),_traceIndices:p,setScale:T.identity,c2l:T.identity,r2l:T.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var B=r.lonaxis.range,F=r.lataxis.range,V=B[0],Y=B[1];V>0&&Y<0&&(Y+=360);var K=(V+Y)/2,J;if(!l){var G=_?v.projRotate:[K,0,0];J=f("projection.rotation.lon",G[0]),f("projection.rotation.lat",G[1]),f("projection.rotation.roll",G[2]),u=f("showcoastlines",!_&&m),u&&(f("coastlinecolor"),f("coastlinewidth")),u=f("showocean",m?void 0:!1),u&&f("oceancolor")}var Z,re;if(l?(Z=-96.6,re=38.7):(Z=_?K:J,re=(F[0]+F[1])/2),f("center.lon",Z),f("center.lat",re),s&&(f("projection.tilt"),f("projection.distance")),w){var se=v.projParallels||[0,60];f("projection.parallels",se)}f("projection.scale"),u=f("showland",m?void 0:!1),u&&f("landcolor"),u=f("showlakes",m?void 0:!1),u&&f("lakecolor"),u=f("showrivers",m?void 0:!1),u&&(f("rivercolor"),f("riverwidth")),u=f("showcountries",_&&y!=="usa"&&m),u&&(f("countrycolor"),f("countrywidth")),(y==="usa"||y==="north america"&&d===50)&&(f("showsubunits",m),f("subunitcolor"),f("subunitwidth")),_||(u=f("showframe",m),u&&(f("framecolor"),f("framewidth"))),f("bgcolor");var oe=f("fitbounds");oe&&(delete r.projection.scale,_?(delete r.center.lon,delete r.center.lat):b?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=g("../../registry"),A=Math.PI/180,e=180/Math.PI,a={cursor:"pointer"},n={cursor:"auto"};function t(S,k){var P=S.projection,z;return k._isScoped?z=o:k._isClipped?z=p:z=i,z(S,P)}ne.exports=t;function r(S,k){return T.behavior.zoom().translate(k.translate()).scale(k.scale())}function f(S,k,P){var z=S.id,I=S.graphDiv,D=I.layout,R=D[z],B=I._fullLayout,F=B[z],V={},Y={};function K(J,G){V[z+"."+J]=c.nestedProperty(R,J).get(),M.call("_storeDirectGUIEdit",D,B._preGUI,V);var Z=c.nestedProperty(F,J);Z.get()!==G&&(Z.set(G),c.nestedProperty(R,J).set(G),Y[z+"."+J]=G)}P(K),K("projection.scale",k.scale()/S.fitScale),K("fitbounds",!1),I.emit("plotly_relayout",Y)}function o(S,k){var P=r(S,k);function z(){T.select(this).style(a)}function I(){k.scale(T.event.scale).translate(T.event.translate),S.render();var B=k.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.center.lon":B[0],"geo.center.lat":B[1]})}function D(B){var F=k.invert(S.midPt);B("center.lon",F[0]),B("center.lat",F[1])}function R(){T.select(this).style(n),f(S,k,D)}return P.on("zoomstart",z).on("zoom",I).on("zoomend",R),P}function i(S,k){var P=r(S,k),z=2,I,D,R,B,F,V,Y,K,J;function G(U){return k.invert(U)}function Z(U){var q=G(U);if(!q)return!0;var Q=k(q);return Math.abs(Q[0]-U[0])>z||Math.abs(Q[1]-U[1])>z}function re(){T.select(this).style(a),I=T.mouse(this),D=k.rotate(),R=k.translate(),B=D,F=G(I)}function se(){if(V=T.mouse(this),Z(I)){P.scale(k.scale()),P.translate(k.translate());return}k.scale(T.event.scale),k.translate([R[0],T.event.translate[1]]),F?G(V)&&(K=G(V),Y=[B[0]+(K[0]-F[0]),D[1],D[2]],k.rotate(Y),B=Y):(I=V,F=G(I)),J=!0,S.render();var U=k.rotate(),q=k.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.center.lon":q[0],"geo.center.lat":q[1],"geo.projection.rotation.lon":-U[0]})}function oe(){T.select(this).style(n),J&&f(S,k,N)}function N(U){var q=k.rotate(),Q=k.invert(S.midPt);U("projection.rotation.lon",-q[0]),U("center.lon",Q[0]),U("center.lat",Q[1])}return P.on("zoomstart",re).on("zoom",se).on("zoomend",oe),P}function p(S,k){k.rotate(),k.scale();var P=r(S,k),z=L(P,"zoomstart","zoom","zoomend"),I=0,D=P.on,R;P.on("zoomstart",function(){T.select(this).style(a);var K=T.mouse(this),J=k.rotate(),G=J,Z=k.translate(),re=y(J);R=d(k,K),D.call(P,"zoom",function(){var se=T.mouse(this);if(k.scale(T.event.scale),!R)K=se,R=d(k,K);else if(d(k,se)){k.rotate(J).translate(Z);var oe=d(k,se),N=x(R,oe),U=b(v(re,N)),q=l(U,R,G);(!isFinite(q[0])||!isFinite(q[1])||!isFinite(q[2]))&&(q=G),k.rotate(q),G=q}F(z.of(this,arguments))}),B(z.of(this,arguments))}).on("zoomend",function(){T.select(this).style(n),D.call(P,"zoom",null),V(z.of(this,arguments)),f(S,k,Y)}).on("zoom.redraw",function(){S.render();var K=k.rotate();S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.projection.rotation.lon":-K[0],"geo.projection.rotation.lat":-K[1]})});function B(K){I++||K({type:"zoomstart"})}function F(K){K({type:"zoom"})}function V(K){--I||K({type:"zoomend"})}function Y(K){var J=k.rotate();K("projection.rotation.lon",-J[0]),K("projection.rotation.lat",-J[1])}return T.rebind(P,z,"on")}function d(S,k){var P=S.invert(k);return P&&isFinite(P[0])&&isFinite(P[1])&&h(P)}function y(S){var k=.5*S[0]*A,P=.5*S[1]*A,z=.5*S[2]*A,I=Math.sin(k),D=Math.cos(k),R=Math.sin(P),B=Math.cos(P),F=Math.sin(z),V=Math.cos(z);return[D*B*V+I*R*F,I*B*V-D*R*F,D*R*V+I*B*F,D*B*F-I*R*V]}function v(S,k){var P=S[0],z=S[1],I=S[2],D=S[3],R=k[0],B=k[1],F=k[2],V=k[3];return[P*R-z*B-I*F-D*V,P*B+z*R+I*V-D*F,P*F-z*V+I*R+D*B,P*V+z*F-I*B+D*R]}function x(S,k){if(!(!S||!k)){var P=u(S,k),z=Math.sqrt(m(P,P)),I=.5*Math.acos(Math.max(-1,Math.min(1,m(S,k)))),D=Math.sin(I)/z;return z&&[Math.cos(I),P[2]*D,-P[1]*D,P[0]*D]}}function l(S,k,P){var z=w(k,2,S[0]);z=w(z,1,S[1]),z=w(z,0,S[2]-P[2]);var I=k[0],D=k[1],R=k[2],B=z[0],F=z[1],V=z[2],Y=Math.atan2(D,I)*e,K=Math.sqrt(I*I+D*D),J,G;Math.abs(F)>K?(G=(F>0?90:-90)-Y,J=0):(G=Math.asin(F/K)*e-Y,J=Math.sqrt(K*K-F*F));var Z=180-G-2*Y,re=(Math.atan2(V,B)-Math.atan2(R,J))*e,se=(Math.atan2(V,B)-Math.atan2(R,-J))*e,oe=_(P[0],P[1],G,re),N=_(P[0],P[1],Z,se);return oe<=N?[G,re,P[2]]:[Z,se,P[2]]}function _(S,k,P,z){var I=s(P-S),D=s(z-k);return Math.sqrt(I*I+D*D)}function s(S){return(S%360+540)%360-180}function w(S,k,P){var z=P*A,I=S.slice(),D=k===0?1:0,R=k===2?1:2,B=Math.cos(z),F=Math.sin(z);return I[D]=S[D]*B-S[R]*F,I[R]=S[R]*B+S[D]*F,I}function b(S){return[Math.atan2(2*(S[0]*S[1]+S[2]*S[3]),1-2*(S[1]*S[1]+S[2]*S[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(S[0]*S[2]-S[3]*S[1]))))*e,Math.atan2(2*(S[0]*S[3]+S[1]*S[2]),1-2*(S[2]*S[2]+S[3]*S[3]))*e]}function h(S){var k=S[0]*A,P=S[1]*A,z=Math.cos(P);return[z*Math.cos(k),z*Math.sin(k),Math.sin(P)]}function m(S,k){for(var P=0,z=0,I=S.length;z<I;++z)P+=S[z]*k[z];return P}function u(S,k){return[S[1]*k[2]-S[2]*k[1],S[2]*k[0]-S[0]*k[2],S[0]*k[1]-S[1]*k[0]]}function L(S){for(var k=0,P=arguments.length,z=[];++k<P;)z.push(arguments[k]);var I=T.dispatch.apply(null,z);return I.of=function(D,R){return function(B){var F;try{F=B.sourceEvent=T.event,B.target=S,T.event=B,I[B.type].apply(D,R)}finally{T.event=F}}},I}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(g,ne,ae){var T=g("../registry"),c=g("./cartesian/constants").SUBPLOT_PATTERN;ae.getSubplotCalcData=function(M,A,e){var a=T.subplotsRegistry[A];if(!a)return[];for(var n=a.attr,t=[],r=0;r<M.length;r++){var f=M[r],o=f[0].trace;o[n]===e&&t.push(f)}return t},ae.getModuleCalcData=function(M,A){var e=[],a=[],n;if(typeof A=="string"?n=T.getModule(A).plot:typeof A=="function"?n=A:n=A.plot,!n)return[e,M];for(var t=0;t<M.length;t++){var r=M[t],f=r[0].trace;f.visible!==!0||f._length===0||(f._module.plot===n?e.push(r):a.push(r))}return[e,a]},ae.getSubplotData=function(A,e,a){if(!T.subplotsRegistry[e])return[];var n=T.subplotsRegistry[e].attr,t=[],r,f,o;if(e==="gl2d"){var i=a.match(c);f="x"+i[1],o="y"+i[2]}for(var p=0;p<A.length;p++)r=A[p],e==="gl2d"&&T.traceIs(r,"gl2d")?r[n[0]]===f&&r[n[1]]===o&&t.push(r):r[n]===a&&t.push(r);return t}},{"../registry":638,"./cartesian/constants":561}],594:[function(g,ne,ae){var T=g("mouse-change"),c=g("mouse-wheel"),M=g("mouse-event-offset"),A=g("../cartesian/constants"),e=g("has-passive-events");ne.exports=n;function a(t,r){this.element=t,this.plot=r,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function n(t){var r=t.mouseContainer,f=t.glplot,o=new a(r,f);function i(){t.xaxis.autorange=!1,t.yaxis.autorange=!1}function p(){for(var y=t.graphDiv._fullLayout._axisConstraintGroups,v=t.xaxis._id,x=t.yaxis._id,l=0;l<y.length;l++)if(y[l][v]!==-1){if(y[l][x]!==-1)return!0;break}return!1}o.mouseListener=T(r,d),r.addEventListener("touchstart",function(y){var v=M(y.changedTouches[0],r);d(0,v[0],v[1]),d(1,v[0],v[1]),y.preventDefault()},e?{passive:!1}:!1),r.addEventListener("touchmove",function(y){y.preventDefault();var v=M(y.changedTouches[0],r);d(1,v[0],v[1]),y.preventDefault()},e?{passive:!1}:!1),r.addEventListener("touchend",function(y){d(0,o.lastPos[0],o.lastPos[1]),y.preventDefault()},e?{passive:!1}:!1);function d(y,v,x){var l=t.calcDataBox(),_=f.viewBox,s=o.lastPos[0],w=o.lastPos[1],b=A.MINDRAG*f.pixelRatio,h=A.MINZOOM*f.pixelRatio,m,u;v*=f.pixelRatio,x*=f.pixelRatio,x=_[3]-_[1]-x;function L(D,R,B){var F=Math.min(R,B),V=Math.max(R,B);F!==V?(l[D]=F,l[D+2]=V,o.dataBox=l,t.setRanges(l)):(t.selectBox.selectBox=[0,0,1,1],t.glplot.setDirty())}switch(t.fullLayout.dragmode){case"zoom":if(y){var S=v/(_[2]-_[0])*(l[2]-l[0])+l[0],k=x/(_[3]-_[1])*(l[3]-l[1])+l[1];o.boxInited||(o.boxStart[0]=S,o.boxStart[1]=k,o.dragStart[0]=v,o.dragStart[1]=x),o.boxEnd[0]=S,o.boxEnd[1]=k,o.boxInited=!0,!o.boxEnabled&&(o.boxStart[0]!==o.boxEnd[0]||o.boxStart[1]!==o.boxEnd[1])&&(o.boxEnabled=!0);var P=Math.abs(o.dragStart[0]-v)<h,z=Math.abs(o.dragStart[1]-x)<h;if(p()&&!(P&&z)){m=o.boxEnd[0]-o.boxStart[0],u=o.boxEnd[1]-o.boxStart[1];var I=(l[3]-l[1])/(l[2]-l[0]);Math.abs(m*I)>Math.abs(u)?(o.boxEnd[1]=o.boxStart[1]+Math.abs(m)*I*(u>=0?1:-1),o.boxEnd[1]<l[1]?(o.boxEnd[1]=l[1],o.boxEnd[0]=o.boxStart[0]+(l[1]-o.boxStart[1])/Math.abs(I)):o.boxEnd[1]>l[3]&&(o.boxEnd[1]=l[3],o.boxEnd[0]=o.boxStart[0]+(l[3]-o.boxStart[1])/Math.abs(I))):(o.boxEnd[0]=o.boxStart[0]+Math.abs(u)/I*(m>=0?1:-1),o.boxEnd[0]<l[0]?(o.boxEnd[0]=l[0],o.boxEnd[1]=o.boxStart[1]+(l[0]-o.boxStart[0])*Math.abs(I)):o.boxEnd[0]>l[2]&&(o.boxEnd[0]=l[2],o.boxEnd[1]=o.boxStart[1]+(l[2]-o.boxStart[0])*Math.abs(I)))}else P&&(o.boxEnd[0]=o.boxStart[0]),z&&(o.boxEnd[1]=o.boxStart[1])}else o.boxEnabled?(m=o.boxStart[0]!==o.boxEnd[0],u=o.boxStart[1]!==o.boxEnd[1],m||u?(m&&(L(0,o.boxStart[0],o.boxEnd[0]),t.xaxis.autorange=!1),u&&(L(1,o.boxStart[1],o.boxEnd[1]),t.yaxis.autorange=!1),t.relayoutCallback()):t.glplot.setDirty(),o.boxEnabled=!1,o.boxInited=!1):o.boxInited&&(o.boxInited=!1);break;case"pan":o.boxEnabled=!1,o.boxInited=!1,y?(o.panning||(o.dragStart[0]=v,o.dragStart[1]=x),Math.abs(o.dragStart[0]-v)<b&&(v=o.dragStart[0]),Math.abs(o.dragStart[1]-x)<b&&(x=o.dragStart[1]),m=(s-v)*(l[2]-l[0])/(f.viewBox[2]-f.viewBox[0]),u=(w-x)*(l[3]-l[1])/(f.viewBox[3]-f.viewBox[1]),l[0]+=m,l[2]+=m,l[1]+=u,l[3]+=u,t.setRanges(l),o.panning=!0,o.lastInputTime=Date.now(),i(),t.cameraChanged(),t.handleAnnotations()):o.panning&&(o.panning=!1,t.relayoutCallback());break}o.lastPos[0]=v,o.lastPos[1]=x}return o.wheelListener=c(r,function(y,v){if(!t.scrollZoom)return!1;var x=t.calcDataBox(),l=f.viewBox,_=o.lastPos[0],s=o.lastPos[1],w=Math.exp(5*v/(l[3]-l[1])),b=_/(l[2]-l[0])*(x[2]-x[0])+x[0],h=s/(l[3]-l[1])*(x[3]-x[1])+x[1];return x[0]=(x[0]-b)*w+b,x[2]=(x[2]-b)*w+b,x[1]=(x[1]-h)*w+h,x[3]=(x[3]-h)*w+h,t.setRanges(x),o.lastInputTime=Date.now(),i(),t.cameraChanged(),t.handleAnnotations(),t.relayoutCallback(),!0},!0),o}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(g,ne,ae){var T=g("../cartesian/axes"),c=g("../../lib/str2rgbarray");function M(n){this.scene=n,this.gl=n.gl,this.pixelRatio=n.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var A=M.prototype,e=["xaxis","yaxis"];A.merge=function(n){this.titleEnable=!1,this.backgroundColor=c(n.plot_bgcolor);var t,r,f,o,i,p,d,y,v,x,l;for(x=0;x<2;++x){t=e[x];var _=t.charAt(0);for(r=n[this.scene[t]._name],f=r.title.text===this.scene.fullLayout._dfltTitle[_]?"":r.title.text,l=0;l<=2;l+=2)this.labelEnable[x+l]=!1,this.labels[x+l]=f,this.labelColor[x+l]=c(r.title.font.color),this.labelFont[x+l]=r.title.font.family,this.labelSize[x+l]=r.title.font.size,this.labelPad[x+l]=this.getLabelPad(t,r),this.tickEnable[x+l]=!1,this.tickColor[x+l]=c((r.tickfont||{}).color),this.tickAngle[x+l]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180,this.tickPad[x+l]=this.getTickPad(r),this.tickMarkLength[x+l]=0,this.tickMarkWidth[x+l]=r.tickwidth||0,this.tickMarkColor[x+l]=c(r.tickcolor),this.borderLineEnable[x+l]=!1,this.borderLineColor[x+l]=c(r.linecolor),this.borderLineWidth[x+l]=r.linewidth||0;d=this.hasSharedAxis(r),i=this.hasAxisInDfltPos(t,r)&&!d,p=this.hasAxisInAltrPos(t,r)&&!d,o=r.mirror||!1,y=d?String(o).indexOf("all")!==-1:!!o,v=d?o==="allticks":String(o).indexOf("ticks")!==-1,i?this.labelEnable[x]=!0:p&&(this.labelEnable[x+2]=!0),i?this.tickEnable[x]=r.showticklabels:p&&(this.tickEnable[x+2]=r.showticklabels),(i||y)&&(this.borderLineEnable[x]=r.showline),(p||y)&&(this.borderLineEnable[x+2]=r.showline),(i||v)&&(this.tickMarkLength[x]=this.getTickMarkLength(r)),(p||v)&&(this.tickMarkLength[x+2]=this.getTickMarkLength(r)),this.gridLineEnable[x]=r.showgrid,this.gridLineColor[x]=c(r.gridcolor),this.gridLineWidth[x]=r.gridwidth,this.zeroLineEnable[x]=r.zeroline,this.zeroLineColor[x]=c(r.zerolinecolor),this.zeroLineWidth[x]=r.zerolinewidth}},A.hasSharedAxis=function(n){var t=this.scene,r=t.fullLayout._subplots.gl2d,f=T.findSubplotsWithAxis(r,n);return f.indexOf(t.id)!==0},A.hasAxisInDfltPos=function(n,t){var r=t.side;if(n==="xaxis")return r==="bottom";if(n==="yaxis")return r==="left"},A.hasAxisInAltrPos=function(n,t){var r=t.side;if(n==="xaxis")return r==="top";if(n==="yaxis")return r==="right"},A.getLabelPad=function(n,t){var r=1.5,f=t.title.font.size,o=t.showticklabels;if(n==="xaxis")return t.side==="top"?-10+f*(r+(o?1:0)):-10+f*(r+(o?.5:0));if(n==="yaxis")return t.side==="right"?10+f*(r+(o?1:.5)):10+f*(r+(o?.5:0))},A.getTickPad=function(n){return n.ticks==="outside"?10+n.ticklen:15},A.getTickMarkLength=function(n){if(!n.ticks)return 0;var t=n.ticklen;return n.ticks==="inside"?-t:t};function a(n){return new M(n)}ne.exports=a},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(g,ne,ae){var T=g("../../plot_api/edit_types").overrideAll,c=g("./scene2d"),M=g("../layout_attributes"),A=g("../../constants/xmlns_namespaces"),e=g("../cartesian/constants"),a=g("../cartesian"),n=g("../../components/fx/layout_attributes"),t=g("../get_data").getSubplotData;ae.name="gl2d",ae.attr=["xaxis","yaxis"],ae.idRoot=["x","y"],ae.idRegex=e.idRegex,ae.attrRegex=e.attrRegex,ae.attributes=g("../cartesian/attributes"),ae.supplyLayoutDefaults=function(r,f,o){f._has("cartesian")||a.supplyLayoutDefaults(r,f,o)},ae.layoutAttrOverrides=T(a.layoutAttributes,"plot","from-root"),ae.baseLayoutAttrOverrides=T({plot_bgcolor:M.plot_bgcolor,hoverlabel:n.hoverlabel},"plot","nested"),ae.plot=function(f){for(var o=f._fullLayout,i=f._fullData,p=o._subplots.gl2d,d=0;d<p.length;d++){var y=p[d],v=o._plots[y],x=t(i,"gl2d",y),l=v._scene2d;l===void 0&&(l=new c({id:y,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio},o),v._scene2d=l),l.plot(x,f.calcdata,o,f.layout)}},ae.clean=function(r,f,o,i){for(var p=i._subplots.gl2d||[],d=0;d<p.length;d++){var y=p[d],v=i._plots[y];if(!!v._scene2d){var x=t(r,"gl2d",y);x.length===0&&(v._scene2d.destroy(),delete i._plots[y])}}a.clean.apply(this,arguments)},ae.drawFramework=function(r){r._context.staticPlot||a.drawFramework(r)},ae.toSVG=function(r){for(var f=r._fullLayout,o=f._subplots.gl2d,i=0;i<o.length;i++){var p=f._plots[o[i]],d=p._scene2d,y=d.toImage("png"),v=f._glimages.append("svg:image");v.attr({xmlns:A.svg,"xlink:href":y,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),d.destroy()}},ae.updateFx=function(r){for(var f=r._fullLayout,o=f._subplots.gl2d,i=0;i<o.length;i++){var p=f._plots[o[i]]._scene2d;p.updateFx(f.dragmode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(g,ne,ae){var T=g("../../registry"),c=g("../../plots/cartesian/axes"),M=g("../../components/fx"),A=g("../../../stackgl_modules").gl_plot2d,e=g("../../../stackgl_modules").gl_spikes2d,a=g("../../../stackgl_modules").gl_select_box,n=g("webgl-context"),t=g("./convert"),r=g("./camera"),f=g("../../lib/show_no_webgl_msg"),o=g("../cartesian/constraints"),i=o.enforce,p=o.clean,d=g("../cartesian/autorange").doAutoRange,y=g("../../components/dragelement/helpers"),v=y.drawMode,x=y.selectMode,l=["xaxis","yaxis"],_,s,w=g("../cartesian/constants").SUBPLOT_PATTERN;function b(u,L){this.container=u.container,this.graphDiv=u.graphDiv,this.pixelRatio=u.plotGlPixelRatio||window.devicePixelRatio,this.id=u.id,this.staticPlot=!!u.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),!this.stopped&&(this.glplotOptions=t(this),this.glplotOptions.merge(L),this.glplot=A(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=e(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}ne.exports=b;var h=b.prototype;h.makeFramework=function(){if(this.staticPlot){if(!s&&(_=document.createElement("canvas"),s=n({canvas:_,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!s))throw new Error("Error creating static canvas/context for image server");this.canvas=_,this.gl=s}else{var u=this.container.querySelector(".gl-canvas-focus"),L=n({canvas:u,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L){f(this),this.stopped=!0;return}this.canvas=u,this.gl=L}var S=this.canvas;S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.top="0px",S.style.left="0px",S.style["pointer-events"]="none",this.updateSize(S);var k=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");k.style.position="absolute",k.style.top=k.style.left="0px",k.style.width=k.style.height="100%",k.style["z-index"]=20,k.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var z=this.container;z.appendChild(k),z.appendChild(P);var I=this;P.addEventListener("mouseout",function(){I.isMouseOver=!1,I.unhover()}),P.addEventListener("mouseover",function(){I.isMouseOver=!0})},h.toImage=function(u){u||(u="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(_),this.updateSize(this.canvas);var L=this.glplot.gl,S=L.drawingBufferWidth,k=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(S*k*4);L.readPixels(0,0,S,k,L.RGBA,L.UNSIGNED_BYTE,P);for(var z=0,I=k-1;z<I;++z,--I)for(var D=0;D<S;++D)for(var R=0;R<4;++R){var B=P[4*(S*z+D)+R];P[4*(S*z+D)+R]=P[4*(S*I+D)+R],P[4*(S*I+D)+R]=B}var F=document.createElement("canvas");F.width=S,F.height=k;var V=F.getContext("2d",{willReadFrequently:!0}),Y=V.createImageData(S,k);Y.data.set(P),V.putImageData(Y,0,0);var K;switch(u){case"jpeg":K=F.toDataURL("image/jpeg");break;case"webp":K=F.toDataURL("image/webp");break;default:K=F.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(_),K},h.updateSize=function(u){u||(u=this.canvas);var L=this.pixelRatio,S=this.fullLayout,k=S.width,P=S.height,z=Math.ceil(L*k)|0,I=Math.ceil(L*P)|0;return(u.width!==z||u.height!==I)&&(u.width=z,u.height=I),u},h.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var u=[c.calcTicks(this.xaxis),c.calcTicks(this.yaxis)],L=0;L<2;++L)for(var S=0;S<u[L].length;++S)u[L][S].text=u[L][S].text+"";return u};function m(u,L){for(var S=0;S<2;++S){var k=u[S],P=L[S];if(k.length!==P.length)return!0;for(var z=0;z<k.length;++z)if(k[z].x!==P[z].x)return!0}return!1}h.updateRefs=function(u){this.fullLayout=u;var L=this.id.match(w),S="xaxis"+L[1],k="yaxis"+L[2];this.xaxis=this.fullLayout[S],this.yaxis=this.fullLayout[k]},h.relayoutCallback=function(){var u=this.graphDiv,L=this.xaxis,S=this.yaxis,k=u.layout,P={},z=P[L._name+".range"]=L.range.slice(),I=P[S._name+".range"]=S.range.slice();P[L._name+".autorange"]=L.autorange,P[S._name+".autorange"]=S.autorange,T.call("_storeDirectGUIEdit",u.layout,u._fullLayout._preGUI,P);var D=k[L._name];D.range=z,D.autorange=L.autorange;var R=k[S._name];R.range=I,R.autorange=S.autorange,P.lastInputTime=this.camera.lastInputTime,u.emit("plotly_relayout",P)},h.cameraChanged=function(){var u=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks(),S=this.glplotOptions.ticks;m(L,S)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=u.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},h.handleAnnotations=function(){for(var u=this.graphDiv,L=this.fullLayout.annotations,S=0;S<L.length;S++){var k=L[S];k.xref===this.xaxis._id&&k.yref===this.yaxis._id&&T.getComponentMethod("annotations","drawOne")(u,S)}},h.destroy=function(){if(!!this.glplot){var u=this.traces;u&&Object.keys(u).map(function(L){u[L].dispose(),delete u[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},h.plot=function(u,L,S){var k=this.glplot;this.updateRefs(S),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(u,L),this.updateFx(S.dragmode);var P=S.width,z=S.height;this.updateSize(this.canvas);var I=this.glplotOptions;I.merge(S),I.screenBox=[0,0,P,z];var D={_fullLayout:{_axisConstraintGroups:S._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:S._size}};p(D,this.xaxis),p(D,this.yaxis);var R=S._size,B=this.xaxis.domain,F=this.yaxis.domain;I.viewBox=[R.l+B[0]*R.w,R.b+F[0]*R.h,P-R.r-(1-B[1])*R.w,z-R.t-(1-F[1])*R.h],this.mouseContainer.style.width=R.w*(B[1]-B[0])+"px",this.mouseContainer.style.height=R.h*(F[1]-F[0])+"px",this.mouseContainer.height=R.h*(F[1]-F[0]),this.mouseContainer.style.left=R.l+B[0]*R.w+"px",this.mouseContainer.style.top=R.t+(1-F[1])*R.h+"px";var V,Y;for(Y=0;Y<2;++Y)V=this[l[Y]],V._length=I.viewBox[Y+2]-I.viewBox[Y],d(this.graphDiv,V),V.setScale();i(D),I.ticks=this.computeTickMarks(),I.dataBox=this.calcDataBox(),I.merge(S),k.update(I),this.glplot.draw()},h.calcDataBox=function(){var u=this.xaxis,L=this.yaxis,S=u.range,k=L.range,P=u.r2l,z=L.r2l;return[P(S[0]),z(k[0]),P(S[1]),z(k[1])]},h.setRanges=function(u){var L=this.xaxis,S=this.yaxis,k=L.l2r,P=S.l2r;L.range=[k(u[0]),k(u[2])],S.range=[P(u[1]),P(u[3])]},h.updateTraces=function(u,L){var S=Object.keys(this.traces),k,P,z;this.fullData=u;e:for(k=0;k<S.length;k++){var I=S[k],D=this.traces[I];for(P=0;P<u.length;P++)if(z=u[P],z.uid===I&&z.type===D.type)continue e;D.dispose(),delete this.traces[I]}for(k=0;k<u.length;k++){z=u[k];var R=L[k],B=this.traces[z.uid];B?B.update(z,R):(B=z._module.plot(this,z,R),this.traces[z.uid]=B)}this.glplot.objects.sort(function(F,V){return F._trace.index-V._trace.index})},h.updateFx=function(u){x(u)||v(u)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),u==="pan"?this.mouseContainer.style.cursor="move":u==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},h.emitPointAction=function(u,L){for(var S=u.trace.uid,k=u.pointIndex,P,z=0;z<this.fullData.length;z++)this.fullData[z].uid===S&&(P=this.fullData[z]);var I={x:u.traceCoord[0],y:u.traceCoord[1],curveNumber:P.index,pointNumber:k,data:P._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};M.appendArrayPointValue(I,P,k),this.graphDiv.emit(L,{points:[I]})},h.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var u=this.glplot,L=this.camera,S=L.mouseListener,k=this.lastButtonState===1&&S.buttons===0,P=this.fullLayout;this.lastButtonState=S.buttons,this.cameraChanged();var z=S.x*u.pixelRatio,I=this.canvas.height-u.pixelRatio*S.y,D;if(L.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var R=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],B=0;B<2;B++)L.boxStart[B]===L.boxEnd[B]&&(R[B]=u.dataBox[B],R[B+2]=u.dataBox[B+2]);u.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var F=P._size,V=this.xaxis.domain,Y=this.yaxis.domain;D=u.pick(z/u.pixelRatio+F.l+V[0]*F.w,I/u.pixelRatio-(F.t+(1-Y[1])*F.h));var K=D&&D.object._trace.handlePick(D);if(K&&k&&this.emitPointAction(K,"plotly_click"),D&&D.object._trace.hoverinfo!=="skip"&&P.hovermode&&K&&(!this.lastPickResult||this.lastPickResult.traceUid!==K.trace.uid||this.lastPickResult.dataCoord[0]!==K.dataCoord[0]||this.lastPickResult.dataCoord[1]!==K.dataCoord[1])){var J=K;this.lastPickResult={traceUid:K.trace?K.trace.uid:null,dataCoord:K.dataCoord.slice()},this.spikes.update({center:D.dataCoord}),J.screenCoord=[((u.viewBox[2]-u.viewBox[0])*(D.dataCoord[0]-u.dataBox[0])/(u.dataBox[2]-u.dataBox[0])+u.viewBox[0])/u.pixelRatio,(this.canvas.height-(u.viewBox[3]-u.viewBox[1])*(D.dataCoord[1]-u.dataBox[1])/(u.dataBox[3]-u.dataBox[1])-u.viewBox[1])/u.pixelRatio],this.emitPointAction(K,"plotly_hover");var G=this.fullData[J.trace.index]||{},Z=J.pointIndex,re=M.castHoverinfo(G,P,Z);if(re&&re!=="all"){var se=re.split("+");se.indexOf("x")===-1&&(J.traceCoord[0]=void 0),se.indexOf("y")===-1&&(J.traceCoord[1]=void 0),se.indexOf("z")===-1&&(J.traceCoord[2]=void 0),se.indexOf("text")===-1&&(J.textLabel=void 0),se.indexOf("name")===-1&&(J.name=void 0)}M.loneHover({x:J.screenCoord[0],y:J.screenCoord[1],xLabel:this.hoverFormatter("xaxis",J.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",J.traceCoord[1]),zLabel:J.traceCoord[2],text:J.textLabel,name:J.name,color:M.castHoverOption(G,Z,"bgcolor")||J.color,borderColor:M.castHoverOption(G,Z,"bordercolor"),fontFamily:M.castHoverOption(G,Z,"font.family"),fontSize:M.castHoverOption(G,Z,"font.size"),fontColor:M.castHoverOption(G,Z,"font.color"),nameLength:M.castHoverOption(G,Z,"namelength"),textAlign:M.castHoverOption(G,Z,"align")},{container:this.svgContainer,gd:this.graphDiv})}}D||this.unhover(),u.draw()}},h.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),M.loneUnhover(this.svgContainer))},h.hoverFormatter=function(u,L){if(L!==void 0){var S=this[u];return c.tickText(S,S.c2l(L),"hover").text}}},{"../../../stackgl_modules":1124,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(g,ne,ae){var T=g("../../plot_api/edit_types").overrideAll,c=g("../../components/fx/layout_attributes"),M=g("./scene"),A=g("../get_data").getSubplotData,e=g("../../lib"),a=g("../../constants/xmlns_namespaces"),n="gl3d",t="scene";ae.name=n,ae.attr=t,ae.idRoot=t,ae.idRegex=ae.attrRegex=e.counterRegex("scene"),ae.attributes=g("./layout/attributes"),ae.layoutAttributes=g("./layout/layout_attributes"),ae.baseLayoutAttrOverrides=T({hoverlabel:c.hoverlabel},"plot","nested"),ae.supplyLayoutDefaults=g("./layout/defaults"),ae.plot=function(f){for(var o=f._fullLayout,i=f._fullData,p=o._subplots[n],d=0;d<p.length;d++){var y=p[d],v=A(i,n,y),x=o[y],l=x.camera,_=x._scene;_||(_=new M({id:y,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio,camera:l},o),x._scene=_),_.viewInitial||(_.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),_.plot(v,o,f.layout)}},ae.clean=function(r,f,o,i){for(var p=i._subplots[n]||[],d=0;d<p.length;d++){var y=p[d];!f[y]&&!!i[y]._scene&&(i[y]._scene.destroy(),i._infolayer&&i._infolayer.selectAll(".annotation-"+y).remove())}},ae.toSVG=function(r){for(var f=r._fullLayout,o=f._subplots[n],i=f._size,p=0;p<o.length;p++){var d=f[o[p]],y=d.domain,v=d._scene,x=v.toImage("png"),l=f._glimages.append("svg:image");l.attr({xmlns:a.svg,"xlink:href":x,x:i.l+i.w*y.x[0],y:i.t+i.h*(1-y.y[1]),width:i.w*(y.x[1]-y.x[0]),height:i.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"}),v.destroy()}},ae.cleanId=function(f){if(!!f.match(/^scene[0-9]*$/)){var o=f.substr(5);return o==="1"&&(o=""),t+o}},ae.updateFx=function(r){for(var f=r._fullLayout,o=f._subplots[n],i=0;i<o.length;i++){var p=f[o[i]]._scene;p.updateFx(f.dragmode,f.hovermode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(g,ne,ae){ne.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(g,ne,ae){var T=g("../../../components/color"),c=g("../../cartesian/layout_attributes"),M=g("../../../lib/extend").extendFlat,A=g("../../../plot_api/edit_types").overrideAll;ne.exports=A({visible:c.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:T.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:c.color,categoryorder:c.categoryorder,categoryarray:c.categoryarray,title:{text:c.title.text,font:c.title.font},type:M({},c.type,{values:["-","linear","log","date","category"]}),autotypenumbers:c.autotypenumbers,autorange:c.autorange,rangemode:c.rangemode,range:M({},c.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:c.tickmode,nticks:c.nticks,tick0:c.tick0,dtick:c.dtick,tickvals:c.tickvals,ticktext:c.ticktext,ticks:c.ticks,mirror:c.mirror,ticklen:c.ticklen,tickwidth:c.tickwidth,tickcolor:c.tickcolor,showticklabels:c.showticklabels,tickfont:c.tickfont,tickangle:c.tickangle,tickprefix:c.tickprefix,showtickprefix:c.showtickprefix,ticksuffix:c.ticksuffix,showticksuffix:c.showticksuffix,showexponent:c.showexponent,exponentformat:c.exponentformat,minexponent:c.minexponent,separatethousands:c.separatethousands,tickformat:c.tickformat,tickformatstops:c.tickformatstops,hoverformat:c.hoverformat,showline:c.showline,linecolor:c.linecolor,linewidth:c.linewidth,showgrid:c.showgrid,gridcolor:M({},c.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:c.gridwidth,zeroline:c.zeroline,zerolinecolor:c.zerolinecolor,zerolinewidth:c.zerolinewidth,_deprecated:{title:c._deprecated.title,titlefont:c._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(g,ne,ae){var T=g("tinycolor2").mix,c=g("../../../lib"),M=g("../../../plot_api/plot_template"),A=g("./axis_attributes"),e=g("../../cartesian/type_defaults"),a=g("../../cartesian/axis_defaults"),n=["xaxis","yaxis","zaxis"],t=100*(204-68)/(255-68);ne.exports=function(f,o,i){var p,d;function y(l,_){return c.coerce(p,d,A,l,_)}for(var v=0;v<n.length;v++){var x=n[v];p=f[x]||{},d=M.newContainer(o,x),d._id=x[0]+i.scene,d._name=x,e(p,d,y,i),a(p,d,y,{font:i.font,letter:x[0],data:i.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:i.bgColor,calendar:i.calendar},i.fullLayout),y("gridcolor",T(d.color,i.bgColor,t).toRgbString()),y("title.text",x[0]),d.setScale=c.noop,y("showspikes")&&(y("spikesides"),y("spikethickness"),y("spikecolor",d.color)),y("showaxeslabels"),y("showbackground")&&y("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(g,ne,ae){var T=g("../../../lib/str2rgbarray"),c=g("../../../lib"),M=["xaxis","yaxis","zaxis"];function A(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var e=A.prototype;e.merge=function(n,t){for(var r=this,f=0;f<3;++f){var o=t[M[f]];if(!o.visible){r.tickEnable[f]=!1,r.labelEnable[f]=!1,r.lineEnable[f]=!1,r.lineTickEnable[f]=!1,r.gridEnable[f]=!1,r.zeroEnable[f]=!1,r.backgroundEnable[f]=!1;continue}r.labels[f]=n._meta?c.templateString(o.title.text,n._meta):o.title.text,"font"in o.title&&(o.title.font.color&&(r.labelColor[f]=T(o.title.font.color)),o.title.font.family&&(r.labelFont[f]=o.title.font.family),o.title.font.size&&(r.labelSize[f]=o.title.font.size)),"showline"in o&&(r.lineEnable[f]=o.showline),"linecolor"in o&&(r.lineColor[f]=T(o.linecolor)),"linewidth"in o&&(r.lineWidth[f]=o.linewidth),"showgrid"in o&&(r.gridEnable[f]=o.showgrid),"gridcolor"in o&&(r.gridColor[f]=T(o.gridcolor)),"gridwidth"in o&&(r.gridWidth[f]=o.gridwidth),o.type==="log"?r.zeroEnable[f]=!1:"zeroline"in o&&(r.zeroEnable[f]=o.zeroline),"zerolinecolor"in o&&(r.zeroLineColor[f]=T(o.zerolinecolor)),"zerolinewidth"in o&&(r.zeroLineWidth[f]=o.zerolinewidth),"ticks"in o&&!!o.ticks?r.lineTickEnable[f]=!0:r.lineTickEnable[f]=!1,"ticklen"in o&&(r.lineTickLength[f]=r._defaultLineTickLength[f]=o.ticklen),"tickcolor"in o&&(r.lineTickColor[f]=T(o.tickcolor)),"tickwidth"in o&&(r.lineTickWidth[f]=o.tickwidth),"tickangle"in o&&(r.tickAngle[f]=o.tickangle==="auto"?-3600:Math.PI*-o.tickangle/180),"showticklabels"in o&&(r.tickEnable[f]=o.showticklabels),"tickfont"in o&&(o.tickfont.color&&(r.tickColor[f]=T(o.tickfont.color)),o.tickfont.family&&(r.tickFont[f]=o.tickfont.family),o.tickfont.size&&(r.tickSize[f]=o.tickfont.size)),"mirror"in o?["ticks","all","allticks"].indexOf(o.mirror)!==-1?(r.lineTickMirror[f]=!0,r.lineMirror[f]=!0):o.mirror===!0?(r.lineTickMirror[f]=!1,r.lineMirror[f]=!0):(r.lineTickMirror[f]=!1,r.lineMirror[f]=!1):r.lineMirror[f]=!1,"showbackground"in o&&o.showbackground!==!1?(r.backgroundEnable[f]=!0,r.backgroundColor[f]=T(o.backgroundcolor)):r.backgroundEnable[f]=!1}};function a(n,t){var r=new A;return r.merge(n,t),r}ne.exports=a},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(g,ne,ae){var T=g("../../../lib"),c=g("../../../components/color"),M=g("../../../registry"),A=g("../../subplot_defaults"),e=g("./axis_defaults"),a=g("./layout_attributes"),n=g("../../get_data").getSubplotData,t="gl3d";ne.exports=function(o,i,p){var d=i._basePlotModules.length>1;function y(v){if(!d){var x=T.validate(o[v],a[v]);if(x)return o[v]}}A(o,i,p,{type:t,attributes:a,handleDefaults:r,fullLayout:i,font:i.font,fullData:p,getDfltFromLayout:y,autotypenumbersDflt:i.autotypenumbers,paper_bgcolor:i.paper_bgcolor,calendar:i.calendar})};function r(f,o,i,p){for(var d=i("bgcolor"),y=c.combine(d,p.paper_bgcolor),v=["up","center","eye"],x=0;x<v.length;x++)i("camera."+v[x]+".x"),i("camera."+v[x]+".y"),i("camera."+v[x]+".z");i("camera.projection.type");var l=!!i("aspectratio.x")&&!!i("aspectratio.y")&&!!i("aspectratio.z"),_=l?"manual":"auto",s=i("aspectmode",_);l||(f.aspectratio=o.aspectratio={x:1,y:1,z:1},s==="manual"&&(o.aspectmode="auto"),f.aspectmode=o.aspectmode);var w=n(p.fullData,t,p.id);e(f,o,{font:p.font,scene:p.id,data:w,bgColor:y,calendar:p.calendar,autotypenumbersDflt:p.autotypenumbersDflt,fullLayout:p.fullLayout}),M.getComponentMethod("annotations3d","handleDefaults")(f,o,p);var b=p.getDfltFromLayout("dragmode");if(b!==!1&&!b)if(b="orbit",f.camera&&f.camera.up){var h=f.camera.up.x,m=f.camera.up.y,u=f.camera.up.z;u!==0&&(!h||!m||!u||u/Math.sqrt(h*h+m*m+u*u)>.999)&&(b="turntable")}else b="turntable";i("dragmode",b),i("hovermode",p.getDfltFromLayout("hovermode"))}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(g,ne,ae){var T=g("./axis_attributes"),c=g("../../domain").attributes,M=g("../../../lib/extend").extendFlat,A=g("../../../lib").counterRegex;function e(a,n,t){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",dflt:n,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}ne.exports={_arrayAttrRegexps:[A("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:M(e(0,0,1),{}),center:M(e(0,0,0),{}),eye:M(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:c({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:T,yaxis:T,zaxis:T,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(g,ne,ae){var T=g("../../../lib/str2rgbarray"),c=["xaxis","yaxis","zaxis"];function M(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var A=M.prototype;A.merge=function(a){for(var n=0;n<3;++n){var t=a[c[n]];if(!t.visible){this.enabled[n]=!1,this.drawSides[n]=!1;continue}this.enabled[n]=t.showspikes,this.colors[n]=T(t.spikecolor),this.drawSides[n]=t.spikesides,this.lineWidth[n]=t.spikethickness}};function e(a){var n=new M;return n.merge(a),n}ne.exports=e},{"../../../lib/str2rgbarray":528}],606:[function(g,ne,ae){ne.exports=a;var T=g("../../cartesian/axes"),c=g("../../../lib"),M=["xaxis","yaxis","zaxis"],A=[0,0,0];function e(n){for(var t=new Array(3),r=0;r<3;++r){for(var f=n[r],o=new Array(f.length),i=0;i<f.length;++i)o[i]=f[i].x;t[r]=o}return t}function a(n){for(var t=n.axesOptions,r=n.glplot.axesPixels,f=n.fullSceneLayout,o=[[],[],[]],i=0;i<3;++i){var p=f[M[i]];if(p._length=(r[i].hi-r[i].lo)*r[i].pixelsPerDataUnit/n.dataScale[i],Math.abs(p._length)===1/0||isNaN(p._length))o[i]=[];else{p._input_range=p.range.slice(),p.range[0]=r[i].lo/n.dataScale[i],p.range[1]=r[i].hi/n.dataScale[i],p._m=1/(n.dataScale[i]*r[i].pixelsPerDataUnit),p.range[0]===p.range[1]&&(p.range[0]-=1,p.range[1]+=1);var d=p.tickmode;if(p.tickmode==="auto"){p.tickmode="linear";var y=p.nticks||c.constrain(p._length/40,4,9);T.autoTicks(p,Math.abs(p.range[1]-p.range[0])/y)}for(var v=T.calcTicks(p,{msUTC:!0}),x=0;x<v.length;++x)v[x].x=v[x].x*n.dataScale[i],p.type==="date"&&(v[x].text=v[x].text.replace(/\<br\>/g," "));o[i]=v,p.tickmode=d}}t.ticks=o;for(var i=0;i<3;++i){A[i]=.5*(n.glplot.bounds[0][i]+n.glplot.bounds[1][i]);for(var x=0;x<2;++x)t.bounds[x][i]=n.glplot.bounds[x][i]}n.contourLevels=e(o)}},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(g,ne,ae){function T(M,A){var e=[0,0,0,0],a,n;for(a=0;a<4;++a)for(n=0;n<4;++n)e[n]+=M[4*a+n]*A[a];return e}function c(M,A){var e=T(M.projection,T(M.view,T(M.model,[A[0],A[1],A[2],1])));return e}ne.exports=c},{}],608:[function(g,ne,ae){var T=g("../../../stackgl_modules").gl_plot3d,c=T.createCamera,M=T.createScene,A=g("webgl-context"),e=g("has-passive-events"),a=g("../../registry"),n=g("../../lib"),t=n.preserveDrawingBuffer(),r=g("../../plots/cartesian/axes"),f=g("../../components/fx"),o=g("../../lib/str2rgbarray"),i=g("../../lib/show_no_webgl_msg"),p=g("./project"),d=g("./layout/convert"),y=g("./layout/spikes"),v=g("./layout/tick_marks"),x,l;function _(P,z){var I=document.createElement("div"),D=P.container;this.graphDiv=P.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",I.appendChild(R),this.svgContainer=R,I.id=P.id,I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",D.appendChild(I),this.fullLayout=z,this.id=P.id||"scene",this.fullSceneLayout=z[this.id],this.plotArgs=[[],{},{}],this.axesOptions=d(z,z[this.id]),this.spikeOptions=y(z[this.id]),this.container=I,this.staticMode=!!P.staticPlot,this.pixelRatio=this.pixelRatio||P.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var s=_.prototype;s.prepareOptions=function(){var P=this,z={canvas:P.canvas,gl:P.gl,glOptions:{preserveDrawingBuffer:t,premultipliedAlpha:!0,antialias:!0},container:P.container,axes:P.axesOptions,spikes:P.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:P.camera,pixelRatio:P.pixelRatio};if(P.staticMode){if(!l&&(x=document.createElement("canvas"),l=A({canvas:x,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!l))throw new Error("error creating static canvas/context for image server");z.gl=l,z.canvas=x}return z};var w=!0;s.tryCreatePlot=function(){var P=this,z=P.prepareOptions(),I=!0;try{P.glplot=M(z)}catch{if(P.staticMode||!w||t)I=!1;else{n.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{t=z.glOptions.preserveDrawingBuffer=!0,P.glplot=M(z)}catch{t=z.glOptions.preserveDrawingBuffer=!1,I=!1}}}return w=!1,I},s.initializeGLCamera=function(){var P=this,z=P.fullSceneLayout.camera,I=z.projection.type==="orthographic";P.camera=c(P.container,{center:[z.center.x,z.center.y,z.center.z],eye:[z.eye.x,z.eye.y,z.eye.z],up:[z.up.x,z.up.y,z.up.z],_ortho:I,zoomMin:.01,zoomMax:100,mode:"orbit"})},s.initializeGLPlot=function(){var P=this;P.initializeGLCamera();var z=P.tryCreatePlot();if(!z)return i(P);P.traces={},P.make4thDimension();var I=P.graphDiv,D=I.layout,R=function(){var F={};return P.isCameraChanged(D)&&(F[P.id+".camera"]=P.getCamera()),P.isAspectChanged(D)&&(F[P.id+".aspectratio"]=P.glplot.getAspectratio(),D[P.id].aspectmode!=="manual"&&(P.fullSceneLayout.aspectmode=D[P.id].aspectmode=F[P.id+".aspectmode"]="manual")),F},B=function(F){if(F.fullSceneLayout.dragmode!==!1){var V=R();F.saveLayout(D),F.graphDiv.emit("plotly_relayout",V)}};return P.glplot.canvas&&(P.glplot.canvas.addEventListener("mouseup",function(){B(P)}),P.glplot.canvas.addEventListener("wheel",function(F){if(I._context._scrollZoom.gl3d){if(P.camera._ortho){var V=F.deltaX>F.deltaY?1.1:1/1.1,Y=P.glplot.getAspectratio();P.glplot.setAspectratio({x:V*Y.x,y:V*Y.y,z:V*Y.z})}B(P)}},e?{passive:!1}:!1),P.glplot.canvas.addEventListener("mousemove",function(){if(P.fullSceneLayout.dragmode!==!1&&P.camera.mouseListener.buttons!==0){var F=R();P.graphDiv.emit("plotly_relayouting",F)}}),P.staticMode||P.glplot.canvas.addEventListener("webglcontextlost",function(F){I&&I.emit&&I.emit("plotly_webglcontextlost",{event:F,layer:P.id})},!1)),P.glplot.oncontextloss=function(){P.recoverContext()},P.glplot.onrender=function(){P.render()},!0},s.render=function(){var P=this,z=P.graphDiv,I,D=P.svgContainer,R=P.container.getBoundingClientRect();z._fullLayout._calcInverseTransform(z);var B=z._fullLayout._invScaleX,F=z._fullLayout._invScaleY,V=R.width*B,Y=R.height*F;D.setAttributeNS(null,"viewBox","0 0 "+V+" "+Y),D.setAttributeNS(null,"width",V),D.setAttributeNS(null,"height",Y),v(P),P.glplot.axes.update(P.axesOptions);for(var K=Object.keys(P.traces),J=null,G=P.glplot.selection,Z=0;Z<K.length;++Z)I=P.traces[K[Z]],I.data.hoverinfo!=="skip"&&I.handlePick(G)&&(J=I),I.setContourLevels&&I.setContourLevels();function re(ye,ue,pe){var ge=P.fullSceneLayout[ye+"axis"];return ge.type!=="log"&&(ue=ge.d2l(ue)),r.hoverLabelText(ge,ue,pe)}if(J!==null){var se=p(P.glplot.cameraParams,G.dataCoordinate);I=J.data;var oe=z._fullData[I.index],N=G.index,U={xLabel:re("x",G.traceCoordinate[0],I.xhoverformat),yLabel:re("y",G.traceCoordinate[1],I.yhoverformat),zLabel:re("z",G.traceCoordinate[2],I.zhoverformat)},q=f.castHoverinfo(oe,P.fullLayout,N),Q=(q||"").split("+"),W=q&&q==="all";!oe.hovertemplate&&!W&&(Q.indexOf("x")===-1&&(U.xLabel=void 0),Q.indexOf("y")===-1&&(U.yLabel=void 0),Q.indexOf("z")===-1&&(U.zLabel=void 0),Q.indexOf("text")===-1&&(G.textLabel=void 0),Q.indexOf("name")===-1&&(J.name=void 0));var X,te=[];I.type==="cone"||I.type==="streamtube"?(U.uLabel=re("x",G.traceCoordinate[3],I.uhoverformat),(W||Q.indexOf("u")!==-1)&&te.push("u: "+U.uLabel),U.vLabel=re("y",G.traceCoordinate[4],I.vhoverformat),(W||Q.indexOf("v")!==-1)&&te.push("v: "+U.vLabel),U.wLabel=re("z",G.traceCoordinate[5],I.whoverformat),(W||Q.indexOf("w")!==-1)&&te.push("w: "+U.wLabel),U.normLabel=G.traceCoordinate[6].toPrecision(3),(W||Q.indexOf("norm")!==-1)&&te.push("norm: "+U.normLabel),I.type==="streamtube"&&(U.divergenceLabel=G.traceCoordinate[7].toPrecision(3),(W||Q.indexOf("divergence")!==-1)&&te.push("divergence: "+U.divergenceLabel)),G.textLabel&&te.push(G.textLabel),X=te.join("<br>")):I.type==="isosurface"||I.type==="volume"?(U.valueLabel=r.hoverLabelText(P._mockAxis,P._mockAxis.d2l(G.traceCoordinate[3]),I.valuehoverformat),te.push("value: "+U.valueLabel),G.textLabel&&te.push(G.textLabel),X=te.join("<br>")):X=G.textLabel;var ee={x:G.traceCoordinate[0],y:G.traceCoordinate[1],z:G.traceCoordinate[2],data:oe._input,fullData:oe,curveNumber:oe.index,pointNumber:N};f.appendArrayPointValue(ee,oe,N),I._module.eventData&&(ee=oe._module.eventData(ee,G,oe,{},N));var ie={points:[ee]};if(P.fullSceneLayout.hovermode){var le=[];f.loneHover({trace:oe,x:(.5+.5*se[0]/se[3])*V,y:(.5-.5*se[1]/se[3])*Y,xLabel:U.xLabel,yLabel:U.yLabel,zLabel:U.zLabel,text:X,name:J.name,color:f.castHoverOption(oe,N,"bgcolor")||J.color,borderColor:f.castHoverOption(oe,N,"bordercolor"),fontFamily:f.castHoverOption(oe,N,"font.family"),fontSize:f.castHoverOption(oe,N,"font.size"),fontColor:f.castHoverOption(oe,N,"font.color"),nameLength:f.castHoverOption(oe,N,"namelength"),textAlign:f.castHoverOption(oe,N,"align"),hovertemplate:n.castOption(oe,N,"hovertemplate"),hovertemplateLabels:n.extendFlat({},ee,U),eventData:[ee]},{container:D,gd:z,inOut_bbox:le}),ee.bbox=le[0]}G.buttons&&G.distance<5?z.emit("plotly_click",ie):z.emit("plotly_hover",ie),this.oldEventData=ie}else f.loneUnhover(D),this.oldEventData&&z.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;P.drawAnnotations(P)},s.recoverContext=function(){var P=this;P.glplot.dispose();var z=function(){if(P.glplot.gl.isContextLost()){requestAnimationFrame(z);return}if(!P.initializeGLPlot()){n.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}P.plot.apply(P,P.plotArgs)};requestAnimationFrame(z)};var b=["xaxis","yaxis","zaxis"];function h(P,z,I){for(var D=P.fullSceneLayout,R=0;R<3;R++){var B=b[R],F=B.charAt(0),V=D[B],Y=z[F],K=z[F+"calendar"],J=z["_"+F+"length"];if(!n.isArrayOrTypedArray(Y))I[0][R]=Math.min(I[0][R],0),I[1][R]=Math.max(I[1][R],J-1);else for(var G,Z=0;Z<(J||Y.length);Z++)if(n.isArrayOrTypedArray(Y[Z]))for(var re=0;re<Y[Z].length;++re)G=V.d2l(Y[Z][re],0,K),!isNaN(G)&&isFinite(G)&&(I[0][R]=Math.min(I[0][R],G),I[1][R]=Math.max(I[1][R],G));else G=V.d2l(Y[Z],0,K),!isNaN(G)&&isFinite(G)&&(I[0][R]=Math.min(I[0][R],G),I[1][R]=Math.max(I[1][R],G))}}function m(P,z){for(var I=P.fullSceneLayout,D=I.annotations||[],R=0;R<3;R++)for(var B=b[R],F=B.charAt(0),V=I[B],Y=0;Y<D.length;Y++){var K=D[Y];if(K.visible){var J=V.r2l(K[F]);!isNaN(J)&&isFinite(J)&&(z[0][R]=Math.min(z[0][R],J),z[1][R]=Math.max(z[1][R],J))}}}s.plot=function(P,z,I){var D=this;if(D.plotArgs=[P,z,I],D.glplot.contextLost)return;var R,B,F,V,Y,K,J=z[D.id],G=I[D.id];D.fullLayout=z,D.fullSceneLayout=J,D.axesOptions.merge(z,J),D.spikeOptions.merge(J),D.setViewport(J),D.updateFx(J.dragmode,J.hovermode),D.camera.enableWheel=D.graphDiv._context._scrollZoom.gl3d,D.glplot.setClearColor(o(J.bgcolor)),D.setConvert(Y),P?Array.isArray(P)||(P=[P]):P=[];var Z=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(F=0;F<P.length;++F)R=P[F],!(R.visible!==!0||R._length===0)&&h(this,R,Z);m(this,Z);var re=[1,1,1];for(V=0;V<3;++V)Z[1][V]===Z[0][V]?re[V]=1:re[V]=1/(Z[1][V]-Z[0][V]);for(D.dataScale=re,D.convertAnnotations(this),F=0;F<P.length;++F)R=P[F],!(R.visible!==!0||R._length===0)&&(B=D.traces[R.uid],B?B.data.type===R.type?B.update(R):(B.dispose(),B=R._module.plot(this,R),D.traces[R.uid]=B):(B=R._module.plot(this,R),D.traces[R.uid]=B),B.name=R.name);var se=Object.keys(D.traces);e:for(F=0;F<se.length;++F){for(V=0;V<P.length;++V)if(P[V].uid===se[F]&&P[V].visible===!0&&P[V]._length!==0)continue e;B=D.traces[se[F]],B.dispose(),delete D.traces[se[F]]}D.glplot.objects.sort(function(Ve,Qe){return Ve._trace.data.index-Qe._trace.data.index});var oe=[[0,0,0],[0,0,0]],N=[],U={};for(F=0;F<3;++F){if(Y=J[b[F]],K=Y.type,K in U?(U[K].acc*=re[F],U[K].count+=1):U[K]={acc:re[F],count:1},Y.autorange){oe[0][F]=1/0,oe[1][F]=-1/0;var q=D.glplot.objects,Q=D.fullSceneLayout.annotations||[],W=Y._name.charAt(0);for(V=0;V<q.length;V++){var X=q[V],te=X.bounds,ee=X._trace.data._pad||0;X.constructor.name==="ErrorBars"&&Y._lowerLogErrorBound?oe[0][F]=Math.min(oe[0][F],Y._lowerLogErrorBound):oe[0][F]=Math.min(oe[0][F],te[0][F]/re[F]-ee),oe[1][F]=Math.max(oe[1][F],te[1][F]/re[F]+ee)}for(V=0;V<Q.length;V++){var ie=Q[V];if(ie.visible){var le=Y.r2l(ie[W]);oe[0][F]=Math.min(oe[0][F],le),oe[1][F]=Math.max(oe[1][F],le)}}if("rangemode"in Y&&Y.rangemode==="tozero"&&(oe[0][F]=Math.min(oe[0][F],0),oe[1][F]=Math.max(oe[1][F],0)),oe[0][F]>oe[1][F])oe[0][F]=-1,oe[1][F]=1;else{var ye=oe[1][F]-oe[0][F];oe[0][F]-=ye/32,oe[1][F]+=ye/32}if(Y.autorange==="reversed"){var ue=oe[0][F];oe[0][F]=oe[1][F],oe[1][F]=ue}}else{var pe=Y.range;oe[0][F]=Y.r2l(pe[0]),oe[1][F]=Y.r2l(pe[1])}oe[0][F]===oe[1][F]&&(oe[0][F]-=1,oe[1][F]+=1),N[F]=oe[1][F]-oe[0][F],D.glplot.setBounds(F,{min:oe[0][F]*re[F],max:oe[1][F]*re[F]})}var ge,Te=J.aspectmode;if(Te==="cube")ge=[1,1,1];else if(Te==="manual"){var _e=J.aspectratio;ge=[_e.x,_e.y,_e.z]}else if(Te==="auto"||Te==="data"){var De=[1,1,1];for(F=0;F<3;++F){Y=J[b[F]],K=Y.type;var Oe=U[K];De[F]=Math.pow(Oe.acc,1/Oe.count)/re[F]}Te==="data"||Math.max.apply(null,De)/Math.min.apply(null,De)<=4?ge=De:ge=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");J.aspectratio.x=G.aspectratio.x=ge[0],J.aspectratio.y=G.aspectratio.y=ge[1],J.aspectratio.z=G.aspectratio.z=ge[2],D.glplot.setAspectratio(J.aspectratio),D.viewInitial.aspectratio||(D.viewInitial.aspectratio={x:J.aspectratio.x,y:J.aspectratio.y,z:J.aspectratio.z}),D.viewInitial.aspectmode||(D.viewInitial.aspectmode=J.aspectmode);var Ue=J.domain||null,xe=z._size||null;if(Ue&&xe){var Pe=D.container.style;Pe.position="absolute",Pe.left=xe.l+Ue.x[0]*xe.w+"px",Pe.top=xe.t+(1-Ue.y[1])*xe.h+"px",Pe.width=xe.w*(Ue.x[1]-Ue.x[0])+"px",Pe.height=xe.h*(Ue.y[1]-Ue.y[0])+"px"}D.glplot.redraw()},s.destroy=function(){var P=this;!P.glplot||(P.camera.mouseListener.enabled=!1,P.container.removeEventListener("wheel",P.camera.wheelListener),P.camera=null,P.glplot.dispose(),P.container.parentNode.removeChild(P.container),P.glplot=null)};function u(P){return[[P.eye.x,P.eye.y,P.eye.z],[P.center.x,P.center.y,P.center.z],[P.up.x,P.up.y,P.up.z]]}function L(P){return{up:{x:P.up[0],y:P.up[1],z:P.up[2]},center:{x:P.center[0],y:P.center[1],z:P.center[2]},eye:{x:P.eye[0],y:P.eye[1],z:P.eye[2]},projection:{type:P._ortho===!0?"orthographic":"perspective"}}}s.getCamera=function(){var P=this;return P.camera.view.recalcMatrix(P.camera.view.lastT()),L(P.camera)},s.setViewport=function(P){var z=this,I=P.camera;z.camera.lookAt.apply(this,u(I)),z.glplot.setAspectratio(P.aspectratio);var D=I.projection.type==="orthographic",R=z.camera._ortho;D!==R&&(z.glplot.redraw(),z.glplot.clearRGBA(),z.glplot.dispose(),z.initializeGLPlot())},s.isCameraChanged=function(P){var z=this,I=z.getCamera(),D=n.nestedProperty(P,z.id+".camera"),R=D.get();function B(K,J,G,Z){var re=["up","center","eye"],se=["x","y","z"];return J[re[G]]&&K[re[G]][se[Z]]===J[re[G]][se[Z]]}var F=!1;if(R===void 0)F=!0;else{for(var V=0;V<3;V++)for(var Y=0;Y<3;Y++)if(!B(I,R,V,Y)){F=!0;break}(!R.projection||I.projection&&I.projection.type!==R.projection.type)&&(F=!0)}return F},s.isAspectChanged=function(P){var z=this,I=z.glplot.getAspectratio(),D=n.nestedProperty(P,z.id+".aspectratio"),R=D.get();return R===void 0||R.x!==I.x||R.y!==I.y||R.z!==I.z},s.saveLayout=function(P){var z=this,I=z.fullLayout,D,R,B,F,V,Y,K=z.isCameraChanged(P),J=z.isAspectChanged(P),G=K||J;if(G){var Z={};if(K&&(D=z.getCamera(),R=n.nestedProperty(P,z.id+".camera"),B=R.get(),Z[z.id+".camera"]=B),J&&(F=z.glplot.getAspectratio(),V=n.nestedProperty(P,z.id+".aspectratio"),Y=V.get(),Z[z.id+".aspectratio"]=Y),a.call("_storeDirectGUIEdit",P,I._preGUI,Z),K){R.set(D);var re=n.nestedProperty(I,z.id+".camera");re.set(D)}if(J){V.set(F);var se=n.nestedProperty(I,z.id+".aspectratio");se.set(F),z.glplot.redraw()}}return G},s.updateFx=function(P,z){var I=this,D=I.camera;if(D)if(P==="orbit")D.mode="orbit",D.keyBindingMode="rotate";else if(P==="turntable"){D.up=[0,0,1],D.mode="turntable",D.keyBindingMode="rotate";var R=I.graphDiv,B=R._fullLayout,F=I.fullSceneLayout.camera,V=F.up.x,Y=F.up.y,K=F.up.z;if(K/Math.sqrt(V*V+Y*Y+K*K)<.999){var J=I.id+".camera.up",G={x:0,y:0,z:1},Z={};Z[J]=G;var re=R.layout;a.call("_storeDirectGUIEdit",re,B._preGUI,Z),F.up=G,n.nestedProperty(re,J).set(G)}}else D.keyBindingMode=P;I.fullSceneLayout.hovermode=z};function S(P,z,I){for(var D=0,R=I-1;D<R;++D,--R)for(var B=0;B<z;++B)for(var F=0;F<4;++F){var V=4*(z*D+B)+F,Y=4*(z*R+B)+F,K=P[V];P[V]=P[Y],P[Y]=K}}function k(P,z,I){for(var D=0;D<I;++D)for(var R=0;R<z;++R){var B=4*(z*D+R),F=P[B+3];if(F>0)for(var V=255/F,Y=0;Y<3;++Y)P[B+Y]=Math.min(V*P[B+Y],255)}}s.toImage=function(P){var z=this;P||(P="png"),z.staticMode&&z.container.appendChild(x),z.glplot.redraw();var I=z.glplot.gl,D=I.drawingBufferWidth,R=I.drawingBufferHeight;I.bindFramebuffer(I.FRAMEBUFFER,null);var B=new Uint8Array(D*R*4);I.readPixels(0,0,D,R,I.RGBA,I.UNSIGNED_BYTE,B),S(B,D,R),k(B,D,R);var F=document.createElement("canvas");F.width=D,F.height=R;var V=F.getContext("2d",{willReadFrequently:!0}),Y=V.createImageData(D,R);Y.data.set(B),V.putImageData(Y,0,0);var K;switch(P){case"jpeg":K=F.toDataURL("image/jpeg");break;case"webp":K=F.toDataURL("image/webp");break;default:K=F.toDataURL("image/png")}return z.staticMode&&z.container.removeChild(x),K},s.setConvert=function(){for(var P=this,z=0;z<3;z++){var I=P.fullSceneLayout[b[z]];r.setConvert(I,P.fullLayout),I.setScale=n.noop}},s.make4thDimension=function(){var P=this,z=P.graphDiv,I=z._fullLayout;P._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(P._mockAxis,I)},ne.exports=_},{"../../../stackgl_modules":1124,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(g,ne,ae){ne.exports=function(c,M,A,e){e=e||c.length;for(var a=new Array(e),n=0;n<e;n++)a[n]=[c[n],M[n],A[n]];return a}},{}],610:[function(g,ne,ae){var T=g("./font_attributes"),c=g("./animation_attributes"),M=g("../components/color/attributes"),A=g("../components/shapes/draw_newshape/attributes"),e=g("./pad_attributes"),a=g("../lib/extend").extendFlat,n=T({editType:"calc"});n.family.dflt='"Open Sans", verdana, arial, sans-serif',n.size.dflt=12,n.color.dflt=M.defaultLine,ne.exports={font:n,title:{text:{valType:"string",editType:"layoutstyle"},font:T({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:a(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:M.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:M.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:M.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:A.newshape,activeshape:A.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:a({},c.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:T({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(g,ne,ae){var T=g("../../lib/sort_object_keys"),c="1.10.1",M='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',A=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',M].join(" "),e=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),a=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),n={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:M,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:A,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:A,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:a,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},t=T(n);ne.exports={requiredVersion:c,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:n,styleValuesNonMapbox:t,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+c+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",t.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":526}],612:[function(g,ne,ae){var T=g("../../lib");ne.exports=function(M,A){var e=M.split(" "),a=e[0],n=e[1],t=T.isArrayOrTypedArray(A)?T.mean(A):A,r=.5+t/100,f=1.5+t/100,o=["",""],i=[0,0];switch(a){case"top":o[0]="top",i[1]=-f;break;case"bottom":o[0]="bottom",i[1]=f;break}switch(n){case"left":o[1]="right",i[0]=-r;break;case"right":o[1]="left",i[0]=r;break}var p;return o[0]&&o[1]?p=o.join("-"):o[0]?p=o[0]:o[1]?p=o[1]:p="center",{anchor:p,offset:i}}},{"../../lib":503}],613:[function(g,ne,ae){var T=g("mapbox-gl/dist/mapbox-gl-unminified"),c=g("../../lib"),M=c.strTranslate,A=c.strScale,e=g("../../plots/get_data").getSubplotCalcData,a=g("../../constants/xmlns_namespaces"),n=g("@plotly/d3"),t=g("../../components/drawing"),r=g("../../lib/svg_text_utils"),f=g("./mapbox"),o="mapbox",i=ae.constants=g("./constants");ae.name=o,ae.attr="subplot",ae.idRoot=o,ae.idRegex=ae.attrRegex=c.counterRegex(o),ae.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},ae.layoutAttributes=g("./layout_attributes"),ae.supplyLayoutDefaults=g("./layout_defaults"),ae.plot=function(v){var x=v._fullLayout,l=v.calcdata,_=x._subplots[o];if(T.version!==i.requiredVersion)throw new Error(i.wrongVersionErrorMsg);var s=p(v,_);T.accessToken=s;for(var w=0;w<_.length;w++){var b=_[w],h=e(l,o,b),m=x[b],u=m._subplot;u||(u=new f(v,b),x[b]._subplot=u),u.viewInitial||(u.viewInitial={center:c.extendFlat({},m.center),zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),u.plot(h,x,v._promises)}},ae.clean=function(y,v,x,l){for(var _=l._subplots[o]||[],s=0;s<_.length;s++){var w=_[s];!v[w]&&!!l[w]._subplot&&l[w]._subplot.destroy()}},ae.toSVG=function(y){for(var v=y._fullLayout,x=v._subplots[o],l=v._size,_=0;_<x.length;_++){var s=v[x[_]],w=s.domain,b=s._subplot,h=b.toImage("png"),m=v._glimages.append("svg:image");m.attr({xmlns:a.svg,"xlink:href":h,x:l.l+l.w*w.x[0],y:l.t+l.h*(1-w.y[1]),width:l.w*(w.x[1]-w.x[0]),height:l.h*(w.y[1]-w.y[0]),preserveAspectRatio:"none"});var u=n.select(s._subplot.div),L=u.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!L){var S=v._glimages.append("g");S.attr("transform",M(l.l+l.w*w.x[0]+10,l.t+l.h*(1-w.y[0])-31)),S.append("path").attr("d",i.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),S.append("path").attr("d",i.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),S.append("path").attr("d",i.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),S.append("polygon").attr("points",i.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var k=u.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),P=v._glimages.append("g"),z=P.append("text");z.text(k).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":k});var I=t.bBox(z.node()),D=l.w*(w.x[1]-w.x[0]);if(I.width>D/2){var R=k.split("|").join("<br>");z.text(R).attr("data-unformatted",R).call(r.convertToTspans,y),I=t.bBox(z.node())}z.attr("transform",M(-3,-I.height+8)),P.insert("rect",".static-attribution").attr({x:-I.width-6,y:-I.height-3,width:I.width+6,height:I.height+3,fill:"rgba(255, 255, 255, 0.75)"});var B=1;I.width+6>D&&(B=D/(I.width+6));var F=[l.l+l.w*w.x[1],l.t+l.h*(1-w.y[0])];P.attr("transform",M(F[0],F[1])+A(B))}};function p(y,v){var x=y._fullLayout,l=y._context;if(l.mapboxAccessToken==="")return"";for(var _=[],s=[],w=!1,b=!1,h=0;h<v.length;h++){var m=x[v[h]],u=m.accesstoken;d(m.style)&&(u?c.pushUnique(_,u):(d(m._input.style)&&(c.error("Uses Mapbox map style, but did not set an access token."),w=!0),b=!0)),u&&c.pushUnique(s,u)}if(b){var L=w?i.noAccessTokenErrorMsg:i.missingStyleErrorMsg;throw c.error(L),new Error(L)}return _.length?(_.length>1&&c.warn(i.multipleTokensErrorMsg),_[0]):(s.length&&c.log(["Listed mapbox access token(s)",s.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function d(y){return typeof y=="string"&&(i.styleValuesMapbox.indexOf(y)!==-1||y.indexOf("mapbox://")===0)}ae.updateFx=function(y){for(var v=y._fullLayout,x=v._subplots[o],l=0;l<x.length;l++){var _=v[x[l]]._subplot;_.updateFx(v)}}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(g,ne,ae){var T=g("../../lib"),c=g("../../lib/svg_text_utils").sanitizeHTML,M=g("./convert_text_opts"),A=g("./constants");function e(f,o){this.subplot=f,this.uid=f.uid+"-"+o,this.index=o,this.idSource="source-"+this.uid,this.idLayer=A.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var a=e.prototype;a.update=function(o){this.visible?this.needsNewImage(o)?this.updateImage(o):this.needsNewSource(o)?(this.removeLayer(),this.updateSource(o),this.updateLayer(o)):this.needsNewLayer(o)?this.updateLayer(o):this.updateStyle(o):(this.updateSource(o),this.updateLayer(o)),this.visible=n(o)},a.needsNewImage=function(f){var o=this.subplot.map;return o.getSource(this.idSource)&&this.sourceType==="image"&&f.sourcetype==="image"&&(this.source!==f.source||JSON.stringify(this.coordinates)!==JSON.stringify(f.coordinates))},a.needsNewSource=function(f){return this.sourceType!==f.sourcetype||JSON.stringify(this.source)!==JSON.stringify(f.source)||this.layerType!==f.type},a.needsNewLayer=function(f){return this.layerType!==f.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},a.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},a.updateImage=function(f){var o=this.subplot.map;o.getSource(this.idSource).updateImage({url:f.source,coordinates:f.coordinates});var i=this.findFollowingMapboxLayerId(this.lookupBelow());i!==null&&this.subplot.map.moveLayer(this.idLayer,i)},a.updateSource=function(f){var o=this.subplot.map;if(o.getSource(this.idSource)&&o.removeSource(this.idSource),this.sourceType=f.sourcetype,this.source=f.source,!!n(f)){var i=r(f);o.addSource(this.idSource,i)}},a.findFollowingMapboxLayerId=function(f){if(f==="traces")for(var o=this.subplot.getMapLayers(),i=0;i<o.length;i++){var p=o[i].id;if(typeof p=="string"&&p.indexOf(A.traceLayerPrefix)===0){f=p;break}}return f},a.updateLayer=function(f){var o=this.subplot,i=t(f),p=this.lookupBelow(),d=this.findFollowingMapboxLayerId(p);this.removeLayer(),n(f)&&o.addLayer({id:this.idLayer,source:this.idSource,"source-layer":f.sourcelayer||"",type:f.type,minzoom:f.minzoom,maxzoom:f.maxzoom,layout:i.layout,paint:i.paint},d),this.layerType=f.type,this.below=p},a.updateStyle=function(f){if(n(f)){var o=t(f);this.subplot.setOptions(this.idLayer,"setLayoutProperty",o.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",o.paint)}},a.removeLayer=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer)},a.dispose=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer),f.getSource(this.idSource)&&f.removeSource(this.idSource)};function n(f){if(!f.visible)return!1;var o=f.source;if(Array.isArray(o)&&o.length>0){for(var i=0;i<o.length;i++)if(typeof o[i]!="string"||o[i].length===0)return!1;return!0}return T.isPlainObject(o)||typeof o=="string"&&o.length>0}function t(f){var o={},i={};switch(f.type){case"circle":T.extendFlat(i,{"circle-radius":f.circle.radius,"circle-color":f.color,"circle-opacity":f.opacity});break;case"line":T.extendFlat(i,{"line-width":f.line.width,"line-color":f.color,"line-opacity":f.opacity,"line-dasharray":f.line.dash});break;case"fill":T.extendFlat(i,{"fill-color":f.color,"fill-outline-color":f.fill.outlinecolor,"fill-opacity":f.opacity});break;case"symbol":var p=f.symbol,d=M(p.textposition,p.iconsize);T.extendFlat(o,{"icon-image":p.icon+"-15","icon-size":p.iconsize/10,"text-field":p.text,"text-size":p.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":p.placement}),T.extendFlat(i,{"icon-color":f.color,"text-color":p.textfont.color,"text-opacity":f.opacity});break;case"raster":T.extendFlat(i,{"raster-fade-duration":0,"raster-opacity":f.opacity});break}return{layout:o,paint:i}}function r(f){var o=f.sourcetype,i=f.source,p={type:o},d;return o==="geojson"?d="data":o==="vector"?d=typeof i=="string"?"url":"tiles":o==="raster"?(d="tiles",p.tileSize=256):o==="image"&&(d="url",p.coordinates=f.coordinates),p[d]=i,f.sourceattribution&&(p.attribution=c(f.sourceattribution)),p}ne.exports=function(o,i,p){var d=new e(o,i);return d.update(p),d}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/color").defaultLine,M=g("../domain").attributes,A=g("../font_attributes"),e=g("../../traces/scatter/attributes").textposition,a=g("../../plot_api/edit_types").overrideAll,n=g("../../plot_api/plot_template").templatedArray,t=g("./constants"),r=A({});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var f=ne.exports=a({_arrayAttrRegexps:[T.counterRegex("mapbox",".layers",!0)],domain:M({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:n("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:c},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:c}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:r,textposition:T.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root");f.uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(g,ne,ae){var T=g("../../lib"),c=g("../subplot_defaults"),M=g("../array_container_defaults"),A=g("./layout_attributes");ne.exports=function(t,r,f){c(t,r,f,{type:"mapbox",attributes:A,handleDefaults:e,partition:"y",accessToken:r._mapboxAccessToken})};function e(n,t,r,f){r("accesstoken",f.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch"),M(n,t,{name:"layers",handleItemDefaults:a}),t._input=n}function a(n,t){function r(y,v){return T.coerce(n,t,A.layers,y,v)}var f=r("visible");if(f){var o=r("sourcetype"),i=o==="raster"||o==="image";r("source"),r("sourceattribution"),o==="vector"&&r("sourcelayer"),o==="image"&&r("coordinates");var p;i&&(p="raster");var d=r("type",p);i&&d!=="raster"&&(d=t.type="raster",T.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),d==="circle"&&r("circle.radius"),d==="line"&&(r("line.width"),r("line.dash")),d==="fill"&&r("fill.outlinecolor"),d==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),T.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(g,ne,ae){var T=g("mapbox-gl/dist/mapbox-gl-unminified"),c=g("../../lib"),M=g("../../lib/geo_location_utils"),A=g("../../registry"),e=g("../cartesian/axes"),a=g("../../components/dragelement"),n=g("../../components/fx"),t=g("../../components/dragelement/helpers"),r=t.rectMode,f=t.drawMode,o=t.selectMode,i=g("../cartesian/select").prepSelect,p=g("../cartesian/select").clearSelect,d=g("../cartesian/select").clearSelectionsCache,y=g("../cartesian/select").selectOnClick,v=g("./constants"),x=g("./layers");function l(m,u){this.id=u,this.gd=m;var L=m._fullLayout,S=m._context;this.container=L._glcontainer.node(),this.isStatic=S.staticPlot,this.uid=L._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(L),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var _=l.prototype;_.plot=function(m,u,L){var S=this,k=u[S.id];S.map&&k.accesstoken!==S.accessToken&&(S.map.remove(),S.map=null,S.styleObj=null,S.traceHash={},S.layerList=[]);var P;S.map?P=new Promise(function(z,I){S.updateMap(m,u,z,I)}):P=new Promise(function(z,I){S.createMap(m,u,z,I)}),L.push(P)},_.createMap=function(m,u,L,S){var k=this,P=u[k.id],z=k.styleObj=w(P.style);k.accessToken=P.accesstoken;var I=k.map=new T.Map({container:k.div,style:z.style,center:h(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,interactive:!k.isStatic,preserveDrawingBuffer:k.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new T.AttributionControl({compact:!0}));I._canvas.style.left="0px",I._canvas.style.top="0px",k.rejectOnError(S),k.isStatic||k.initFx(m,u);var D=[];D.push(new Promise(function(R){I.once("load",R)})),D=D.concat(M.fetchTraceGeoData(m)),Promise.all(D).then(function(){k.fillBelowLookup(m,u),k.updateData(m),k.updateLayout(u),k.resolveOnRender(L)}).catch(S)},_.updateMap=function(m,u,L,S){var k=this,P=k.map,z=u[this.id];k.rejectOnError(S);var I=[],D=w(z.style);JSON.stringify(k.styleObj)!==JSON.stringify(D)&&(k.styleObj=D,P.setStyle(D.style),k.traceHash={},I.push(new Promise(function(R){P.once("styledata",R)}))),I=I.concat(M.fetchTraceGeoData(m)),Promise.all(I).then(function(){k.fillBelowLookup(m,u),k.updateData(m),k.updateLayout(u),k.resolveOnRender(L)}).catch(S)},_.fillBelowLookup=function(m,u){var L=u[this.id],S=L.layers,k,P,z=this.belowLookup={},I=!1;for(k=0;k<m.length;k++){var D=m[k][0].trace,R=D._module;typeof D.below=="string"?P=D.below:R.getBelow&&(P=R.getBelow(D,this)),P===""&&(I=!0),z["trace-"+D.uid]=P||""}for(k=0;k<S.length;k++){var B=S[k];typeof B.below=="string"?P=B.below:I?P="traces":P="",z["layout-"+k]=P}var F={},V,Y;for(V in z)P=z[V],F[P]?F[P].push(V):F[P]=[V];for(P in F){var K=F[P];if(K.length>1)for(k=0;k<K.length;k++)V=K[k],V.indexOf("trace-")===0?(Y=V.split("trace-")[1],this.traceHash[Y]&&(this.traceHash[Y].below=null)):V.indexOf("layout-")===0&&(Y=V.split("layout-")[1],this.layerList[Y]&&(this.layerList[Y].below=null))}};var s={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};_.updateData=function(m){var u=this.traceHash,L,S,k,P,z=m.slice().sort(function(F,V){return s[F[0].trace.type]-s[V[0].trace.type]});for(k=0;k<z.length;k++){var I=z[k];S=I[0].trace,L=u[S.uid];var D=!1;L&&(L.type===S.type?(L.update(I),D=!0):L.dispose()),!D&&S._module&&(u[S.uid]=S._module.plot(this,I))}var R=Object.keys(u);e:for(k=0;k<R.length;k++){var B=R[k];for(P=0;P<m.length;P++)if(S=m[P][0].trace,B===S.uid)continue e;L=u[B],L.dispose(),delete u[B]}},_.updateLayout=function(m){var u=this.map,L=m[this.id];!this.dragging&&!this.wheeling&&(u.setCenter(h(L.center)),u.setZoom(L.zoom),u.setBearing(L.bearing),u.setPitch(L.pitch)),this.updateLayers(m),this.updateFramework(m),this.updateFx(m),this.map.resize(),this.gd._context._scrollZoom.mapbox?u.scrollZoom.enable():u.scrollZoom.disable()},_.resolveOnRender=function(m){var u=this.map;u.on("render",function L(){u.loaded()&&(u.off("render",L),setTimeout(m,10))})},_.rejectOnError=function(m){var u=this.map;function L(){m(new Error(v.mapOnErrorMsg))}u.once("error",L),u.once("style.error",L),u.once("source.error",L),u.once("tile.error",L),u.once("layer.error",L)},_.createFramework=function(m){var u=this,L=u.div=document.createElement("div");L.id=u.uid,L.style.position="absolute",u.container.appendChild(L),u.xaxis={_id:"x",c2p:function(S){return u.project(S).x}},u.yaxis={_id:"y",c2p:function(S){return u.project(S).y}},u.updateFramework(m),u.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(u.mockAxis,m)},_.initFx=function(m,u){var L=this,S=L.gd,k=L.map;k.on("moveend",function(I){if(!!L.map){var D=S._fullLayout;if(I.originalEvent||L.wheeling){var R=D[L.id];A.call("_storeDirectGUIEdit",S.layout,D._preGUI,L.getViewEdits(R));var B=L.getView();R._input.center=R.center=B.center,R._input.zoom=R.zoom=B.zoom,R._input.bearing=R.bearing=B.bearing,R._input.pitch=R.pitch=B.pitch,S.emit("plotly_relayout",L.getViewEditsWithDerived(B))}I.originalEvent&&I.originalEvent.type==="mouseup"?L.dragging=!1:L.wheeling&&(L.wheeling=!1),D._rehover&&D._rehover()}}),k.on("wheel",function(){L.wheeling=!0}),k.on("mousemove",function(I){var D=L.div.getBoundingClientRect(),R=[I.originalEvent.offsetX,I.originalEvent.offsetY];I.target.getBoundingClientRect=function(){return D},L.xaxis.p2c=function(){return k.unproject(R).lng},L.yaxis.p2c=function(){return k.unproject(R).lat},S._fullLayout._rehover=function(){S._fullLayout._hoversubplot===L.id&&S._fullLayout[L.id]&&n.hover(S,I,L.id)},n.hover(S,I,L.id),S._fullLayout._hoversubplot=L.id});function P(){n.loneUnhover(u._hoverlayer)}k.on("dragstart",function(){L.dragging=!0,P()}),k.on("zoomstart",P),k.on("mouseout",function(){S._fullLayout._hoversubplot=null});function z(){var I=L.getView();S.emit("plotly_relayouting",L.getViewEditsWithDerived(I))}k.on("drag",z),k.on("zoom",z),k.on("dblclick",function(){var I=S._fullLayout[L.id];A.call("_storeDirectGUIEdit",S.layout,S._fullLayout._preGUI,L.getViewEdits(I));var D=L.viewInitial;k.setCenter(h(D.center)),k.setZoom(D.zoom),k.setBearing(D.bearing),k.setPitch(D.pitch);var R=L.getView();I._input.center=I.center=R.center,I._input.zoom=I.zoom=R.zoom,I._input.bearing=I.bearing=R.bearing,I._input.pitch=I.pitch=R.pitch,S.emit("plotly_doubleclick",null),S.emit("plotly_relayout",L.getViewEditsWithDerived(R))}),L.clearSelect=function(){d(L.dragOptions),p(L.dragOptions.gd)},L.onClickInPanFn=function(I){return function(D){var R=S._fullLayout.clickmode;R.indexOf("select")>-1&&y(D.originalEvent,S,[L.xaxis],[L.yaxis],L.id,I),R.indexOf("event")>-1&&n.click(S,D.originalEvent)}}},_.updateFx=function(m){var u=this,L=u.map,S=u.gd;if(u.isStatic)return;function k(D){var R=u.map.unproject(D);return[R.lng,R.lat]}var P=m.dragmode,z;r(P)?z=function(D,R){var B=D.range={};B[u.id]=[k([R.xmin,R.ymin]),k([R.xmax,R.ymax])]}:z=function(D,R,B){var F=D.lassoPoints={};F[u.id]=B.filtered.map(k)};var I=u.dragOptions;u.dragOptions=c.extendDeep(I||{},{dragmode:m.dragmode,element:u.div,gd:S,plotinfo:{id:u.id,domain:m[u.id].domain,xaxis:u.xaxis,yaxis:u.yaxis,fillRangeItems:z},xaxes:[u.xaxis],yaxes:[u.yaxis],subplot:u.id}),L.off("click",u.onClickInPanHandler),o(P)||f(P)?(L.dragPan.disable(),L.on("zoomstart",u.clearSelect),u.dragOptions.prepFn=function(D,R,B){i(D,R,B,u.dragOptions,P)},a.init(u.dragOptions)):(L.dragPan.enable(),L.off("zoomstart",u.clearSelect),u.div.onmousedown=null,u.onClickInPanHandler=u.onClickInPanFn(u.dragOptions),L.on("click",u.onClickInPanHandler))},_.updateFramework=function(m){var u=m[this.id].domain,L=m._size,S=this.div.style;S.width=L.w*(u.x[1]-u.x[0])+"px",S.height=L.h*(u.y[1]-u.y[0])+"px",S.left=L.l+u.x[0]*L.w+"px",S.top=L.t+(1-u.y[1])*L.h+"px",this.xaxis._offset=L.l+u.x[0]*L.w,this.xaxis._length=L.w*(u.x[1]-u.x[0]),this.yaxis._offset=L.t+(1-u.y[1])*L.h,this.yaxis._length=L.h*(u.y[1]-u.y[0])},_.updateLayers=function(m){var u=m[this.id],L=u.layers,S=this.layerList,k;if(L.length!==S.length){for(k=0;k<S.length;k++)S[k].dispose();for(S=this.layerList=[],k=0;k<L.length;k++)S.push(x(this,k,L[k]))}else for(k=0;k<L.length;k++)S[k].update(L[k])},_.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},_.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},_.setOptions=function(m,u,L){for(var S in L)this.map[u](m,S,L[S])},_.getMapLayers=function(){return this.map.getStyle().layers},_.addLayer=function(m,u){var L=this.map;if(typeof u=="string"){if(u===""){L.addLayer(m,u);return}for(var S=this.getMapLayers(),k=0;k<S.length;k++)if(u===S[k].id){L.addLayer(m,u);return}c.warn(["Trying to add layer with *below* value",u,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}L.addLayer(m)},_.project=function(m){return this.map.project(new T.LngLat(m[0],m[1]))},_.getView=function(){var m=this.map,u=m.getCenter(),L=u.lng,S=u.lat,k={lon:L,lat:S},P=m.getCanvas(),z=parseInt(P.style.width),I=parseInt(P.style.height);return{center:k,zoom:m.getZoom(),bearing:m.getBearing(),pitch:m.getPitch(),_derived:{coordinates:[m.unproject([0,0]).toArray(),m.unproject([z,0]).toArray(),m.unproject([z,I]).toArray(),m.unproject([0,I]).toArray()]}}},_.getViewEdits=function(m){for(var u=this.id,L=["center","zoom","bearing","pitch"],S={},k=0;k<L.length;k++){var P=L[k];S[u+"."+P]=m[P]}return S},_.getViewEditsWithDerived=function(m){var u=this.id,L=this.getViewEdits(m);return L[u+"._derived"]=m._derived,L};function w(m){var u={};return c.isPlainObject(m)?(u.id=m.id,u.style=m):typeof m=="string"?(u.id=m,v.styleValuesMapbox.indexOf(m)!==-1?u.style=b(m):v.stylesNonMapbox[m]?u.style=v.stylesNonMapbox[m]:u.style=m):(u.id=v.styleValueDflt,u.style=b(v.styleValueDflt)),u.transition={duration:0,delay:0},u}function b(m){return v.styleUrlPrefix+m+"-"+v.styleUrlSuffix}function h(m){return[m.lon,m.lat]}ne.exports=l},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(g,ne,ae){ne.exports=function(T){var c=T.editType;return{t:{valType:"number",dflt:0,editType:c},r:{valType:"number",dflt:0,editType:c},b:{valType:"number",dflt:0,editType:c},l:{valType:"number",dflt:0,editType:c},editType:c}}},{}],619:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("d3-time-format").timeFormatLocale,M=g("d3-format").formatLocale,A=g("fast-isnumeric"),e=g("../registry"),a=g("../plot_api/plot_schema"),n=g("../plot_api/plot_template"),t=g("../lib"),r=g("../components/color"),f=g("../constants/numerical").BADNUM,o=g("./cartesian/axis_ids"),i=g("./cartesian/handle_outline").clearSelect,p=g("./animation_attributes"),d=g("./frame_attributes"),y=g("../plots/get_data").getModuleCalcData,v=t.relinkPrivateKeys,x=t._,l=ne.exports={};t.extendFlat(l,e),l.attributes=g("./attributes"),l.attributes.type.values=l.allTypes,l.fontAttrs=g("./font_attributes"),l.layoutAttributes=g("./layout_attributes"),l.fontWeight="normal";var _=l.transformsRegistry,s=g("./command");l.executeAPICommand=s.executeAPICommand,l.computeAPICommandBindings=s.computeAPICommandBindings,l.manageCommandObserver=s.manageCommandObserver,l.hasSimpleAPICommandBindings=s.hasSimpleAPICommandBindings,l.redrawText=function(N){return N=t.getGraphDiv(N),new Promise(function(U){setTimeout(function(){!N._fullLayout||(e.getComponentMethod("annotations","draw")(N),e.getComponentMethod("legend","draw")(N),e.getComponentMethod("colorbar","draw")(N),U(l.previousPromises(N)))},300)})},l.resize=function(N){N=t.getGraphDiv(N);var U,q=new Promise(function(Q,W){(!N||t.isHidden(N))&&W(new Error("Resize must be passed a displayed plot div element.")),N._redrawTimer&&clearTimeout(N._redrawTimer),N._resolveResize&&(U=N._resolveResize),N._resolveResize=Q,N._redrawTimer=setTimeout(function(){if(!N.layout||N.layout.width&&N.layout.height||t.isHidden(N)){Q(N);return}delete N.layout.width,delete N.layout.height;var X=N.changed;N.autoplay=!0,e.call("relayout",N,{autosize:!0}).then(function(){N.changed=X,N._resolveResize===Q&&(delete N._resolveResize,Q(N))})},100)});return U&&U(q),q},l.previousPromises=function(N){if((N._promises||[]).length)return Promise.all(N._promises).then(function(){N._promises=[]})},l.addLinks=function(N){if(!(!N._context.showLink&&!N._context.showSources)){var U=N._fullLayout,q=t.ensureSingle(U._paper,"text","js-plot-link-container",function(ie){ie.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var le=T.select(this);le.append("tspan").classed("js-link-to-tool",!0),le.append("tspan").classed("js-link-spacer",!0),le.append("tspan").classed("js-sourcelinks",!0)})}),Q=q.node(),W={y:U._paper.attr("height")-9};document.body.contains(Q)&&Q.getComputedTextLength()>=U.width-20?(W["text-anchor"]="start",W.x=5):(W["text-anchor"]="end",W.x=U._paper.attr("width")-7),q.attr(W);var X=q.select(".js-link-to-tool"),te=q.select(".js-link-spacer"),ee=q.select(".js-sourcelinks");N._context.showSources&&N._context.showSources(N),N._context.showLink&&w(N,X),te.text(X.text()&&ee.text()?" - ":"")}};function w(N,U){U.text("");var q=U.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(N._context.linkText+" "+String.fromCharCode(187));if(N._context.sendData)q.on("click",function(){l.sendDataToCloud(N)});else{var Q=window.location.pathname.split("/"),W=window.location.search;q.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+Q[2].split(".")[0]+"/"+Q[1]+W})}}l.sendDataToCloud=function(N){var U=(window.PLOTLYENV||{}).BASE_URL||N._context.plotlyServerURL;if(!!U){N.emit("plotly_beforeexport");var q=T.select(N).append("div").attr("id","hiddenform").style("display","none"),Q=q.append("form").attr({action:U+"/external",method:"post",target:"_blank"}),W=Q.append("input").attr({type:"text",name:"data"});return W.node().value=l.graphJson(N,!1,"keepdata"),Q.node().submit(),q.remove(),N.emit("plotly_afterexport"),!1}};var b=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],h=["year","month","dayMonth","dayMonthYear"];l.supplyDefaults=function(N,U){var q=U&&U.skipUpdateCalc,Q=N._fullLayout||{};if(Q._skipDefaults){delete Q._skipDefaults;return}var W=N._fullLayout={},X=N.layout||{},te=N._fullData||[],ee=N._fullData=[],ie=N.data||[],le=N.calcdata||[],ye=N._context||{},ue;N._transitionData||l.createTransitionData(N),W._dfltTitle={plot:x(N,"Click to enter Plot title"),x:x(N,"Click to enter X axis title"),y:x(N,"Click to enter Y axis title"),colorbar:x(N,"Click to enter Colorscale title"),annotation:x(N,"new text")},W._traceWord=x(N,"trace");var pe=L(N,b);if(W._mapboxAccessToken=ye.mapboxAccessToken,Q._initialAutoSizeIsDone){var ge=Q.width,Te=Q.height;l.supplyLayoutGlobalDefaults(X,W,pe),X.width||(W.width=ge),X.height||(W.height=Te),l.sanitizeMargins(W)}else{l.supplyLayoutGlobalDefaults(X,W,pe);var _e=!X.width||!X.height,De=W.autosize,Oe=ye.autosizable,Ue=_e&&(De||Oe);Ue?l.plotAutoSize(N,X,W):_e&&l.sanitizeMargins(W),!De&&_e&&(X.width=W.width,X.height=W.height)}W._d3locale=S(pe,W.separators),W._extraFormat=L(N,h),W._initialAutoSizeIsDone=!0,W._dataLength=ie.length,W._modules=[],W._visibleModules=[],W._basePlotModules=[];var xe=W._subplots=u(),Pe=W._splomAxes={x:{},y:{}},Ve=W._splomSubplots={};W._splomGridDflt={},W._scatterStackOpts={},W._firstScatter={},W._alignmentOpts={},W._colorAxes={},W._requestRangeslider={},W._traceUids=m(te,ie),W._globalTransforms=(N._context||{}).globalTransforms,l.supplyDataDefaults(ie,ee,X,W);var Qe=Object.keys(Pe.x),Fe=Object.keys(Pe.y);if(Qe.length>1&&Fe.length>1){for(e.getComponentMethod("grid","sizeDefaults")(X,W),ue=0;ue<Qe.length;ue++)t.pushUnique(xe.xaxis,Qe[ue]);for(ue=0;ue<Fe.length;ue++)t.pushUnique(xe.yaxis,Fe[ue]);for(var Le in Ve)t.pushUnique(xe.cartesian,Le)}if(W._has=l._hasPlotType.bind(W),te.length===ee.length)for(ue=0;ue<ee.length;ue++)v(ee[ue],te[ue]);l.supplyLayoutModuleDefaults(X,W,ee,N._transitionData);var Ne=W._visibleModules,dt=[];for(ue=0;ue<Ne.length;ue++){var Dt=Ne[ue].crossTraceDefaults;Dt&&t.pushUnique(dt,Dt)}for(ue=0;ue<dt.length;ue++)dt[ue](ee,W);W._hasOnlyLargeSploms=W._basePlotModules.length===1&&W._basePlotModules[0].name==="splom"&&Qe.length>15&&Fe.length>15&&W.shapes.length===0&&W.images.length===0,l.linkSubplots(ee,W,te,Q),l.cleanPlot(ee,W,te,Q);var Xt=!!(Q._has&&Q._has("gl2d")),Tt=!!(W._has&&W._has("gl2d")),zt=!!(Q._has&&Q._has("cartesian")),Ut=!!(W._has&&W._has("cartesian")),Et=zt||Xt,Mt=Ut||Tt;Et&&!Mt?Q._bgLayer.remove():Mt&&!Et&&(W._shouldCreateBgLayer=!0),Q._zoomlayer&&!N._dragging&&i({_fullLayout:Q}),k(ee,W),v(W,Q),e.getComponentMethod("colorscale","crossTraceDefaults")(ee,W),W._preGUI||(W._preGUI={}),W._tracePreGUI||(W._tracePreGUI={});var rt=W._tracePreGUI,ct={},Ze;for(Ze in rt)ct[Ze]="old";for(ue=0;ue<ee.length;ue++)Ze=ee[ue]._fullInput.uid,ct[Ze]||(rt[Ze]={}),ct[Ze]="new";for(Ze in ct)ct[Ze]==="old"&&delete rt[Ze];R(W),e.getComponentMethod("rangeslider","makeData")(W),!q&&le.length===ee.length&&l.supplyDefaultsUpdateCalc(le,ee)},l.supplyDefaultsUpdateCalc=function(N,U){for(var q=0;q<U.length;q++){var Q=U[q],W=(N[q]||[])[0];if(W&&W.trace){var X=W.trace;if(X._hasCalcTransform){var te=X._arrayAttrs,ee,ie,le;for(ee=0;ee<te.length;ee++)ie=te[ee],le=t.nestedProperty(X,ie).get().slice(),t.nestedProperty(Q,ie).set(le)}W.trace=Q}}};function m(N,U){var q=U.length,Q=[],W,X;for(W=0;W<N.length;W++){var te=N[W]._fullInput;te!==X&&Q.push(te),X=te}var ee=Q.length,ie=new Array(q),le={};function ye(ge,Te){ie[Te]=ge,le[ge]=1}function ue(ge,Te){if(ge&&typeof ge=="string"&&!le[ge])return ye(ge,Te),!0}for(W=0;W<q;W++){var pe=U[W].uid;typeof pe=="number"&&(pe=String(pe)),!ue(pe,W)&&(W<ee&&ue(Q[W].uid,W)||ye(t.randstr(le),W))}return ie}function u(){var N=e.collectableSubplotTypes,U={},q,Q;if(!N){N=[];var W=e.subplotsRegistry;for(var X in W){var te=W[X],ee=te.attr;if(ee&&(N.push(X),Array.isArray(ee)))for(Q=0;Q<ee.length;Q++)t.pushUnique(N,ee[Q])}}for(q=0;q<N.length;q++)U[N[q]]=[];return U}function L(N,U){var q=N._context.locale;q||(q="en-US");var Q=!1,W={};function X(ue){for(var pe=!0,ge=0;ge<U.length;ge++){var Te=U[ge];W[Te]||(ue[Te]?W[Te]=ue[Te]:pe=!1)}pe&&(Q=!0)}for(var te=0;te<2;te++){for(var ee=N._context.locales,ie=0;ie<2;ie++){var le=(ee[q]||{}).format;if(le&&(X(le),Q))break;ee=e.localeRegistry}var ye=q.split("-")[0];if(Q||ye===q)break;q=ye}return Q||X(e.localeRegistry.en.format),W}function S(N,U){return N.decimal=U.charAt(0),N.thousands=U.charAt(1),{numberFormat:function(q){try{q=M(N).format(t.adjustFormat(q))}catch{return t.warnBadFormat(q),t.noFormat}return q},timeFormat:c(N).utcFormat}}function k(N,U){var q,Q=[];U.meta&&(q=U._meta={meta:U.meta,layout:{meta:U.meta}});for(var W=0;W<N.length;W++){var X=N[W];X.meta?Q[X.index]=X._meta={meta:X.meta}:U.meta&&(X._meta={meta:U.meta}),U.meta&&(X._meta.layout={meta:U.meta})}Q.length&&(q||(q=U._meta={}),q.data=Q)}l.createTransitionData=function(N){N._transitionData||(N._transitionData={}),N._transitionData._frames||(N._transitionData._frames=[]),N._transitionData._frameHash||(N._transitionData._frameHash={}),N._transitionData._counter||(N._transitionData._counter=0),N._transitionData._interruptCallbacks||(N._transitionData._interruptCallbacks=[])},l._hasPlotType=function(N){var U,q=this._basePlotModules||[];for(U=0;U<q.length;U++)if(q[U].name===N)return!0;var Q=this._modules||[];for(U=0;U<Q.length;U++){var W=Q[U].name;if(W===N)return!0;var X=e.modules[W];if(X&&X.categories[N])return!0}return!1},l.cleanPlot=function(N,U,q,Q){var W,X,te=Q._basePlotModules||[];for(W=0;W<te.length;W++){var ee=te[W];ee.clean&&ee.clean(N,U,q,Q)}var ie=Q._has&&Q._has("gl"),le=U._has&&U._has("gl");ie&&!le&&Q._glcontainer!==void 0&&(Q._glcontainer.selectAll(".gl-canvas").remove(),Q._glcontainer.selectAll(".no-webgl").remove(),Q._glcanvas=null);var ye=!!Q._infolayer;e:for(W=0;W<q.length;W++){var ue=q[W],pe=ue.uid;for(X=0;X<N.length;X++){var ge=N[X];if(pe===ge.uid)continue e}ye&&Q._infolayer.select(".cb"+pe).remove()}},l.linkSubplots=function(N,U,q,Q){var W,X,te=Q._plots||{},ee=U._plots={},ie=U._subplots,le={_fullData:N,_fullLayout:U},ye=ie.cartesian.concat(ie.gl2d||[]);for(W=0;W<ye.length;W++){var ue=ye[W],pe=te[ue],ge=o.getFromId(le,ue,"x"),Te=o.getFromId(le,ue,"y"),_e;for(pe?_e=ee[ue]=pe:(_e=ee[ue]={},_e.id=ue),ge._counterAxes.push(Te._id),Te._counterAxes.push(ge._id),ge._subplotsWith.push(ue),Te._subplotsWith.push(ue),_e.xaxis=ge,_e.yaxis=Te,_e._hasClipOnAxisFalse=!1,X=0;X<N.length;X++){var De=N[X];if(De.xaxis===_e.xaxis._id&&De.yaxis===_e.yaxis._id&&De.cliponaxis===!1){_e._hasClipOnAxisFalse=!0;break}}}var Oe=o.list(le,null,!0),Ue;for(W=0;W<Oe.length;W++){Ue=Oe[W];var xe=null;Ue.overlaying&&(xe=o.getFromId(le,Ue.overlaying),xe&&xe.overlaying&&(Ue.overlaying=!1,xe=null)),Ue._mainAxis=xe||Ue,xe&&(Ue.domain=xe.domain.slice()),Ue._anchorAxis=Ue.anchor==="free"?null:o.getFromId(le,Ue.anchor)}for(W=0;W<Oe.length;W++)if(Ue=Oe[W],Ue._counterAxes.sort(o.idSort),Ue._subplotsWith.sort(t.subplotSort),Ue._mainSubplot=P(Ue,U),Ue._counterAxes.length&&(Ue.spikemode&&Ue.spikemode.indexOf("across")!==-1||Ue.automargin&&Ue.mirror&&Ue.anchor!=="free"||e.getComponentMethod("rangeslider","isVisible")(Ue))){var Pe=1,Ve=0;for(X=0;X<Ue._counterAxes.length;X++){var Qe=o.getFromId(le,Ue._counterAxes[X]);Pe=Math.min(Pe,Qe.domain[0]),Ve=Math.max(Ve,Qe.domain[1])}Pe<Ve&&(Ue._counterDomainMin=Pe,Ue._counterDomainMax=Ve)}};function P(N,U){var q={_fullLayout:U},Q=N._id.charAt(0)==="x",W=N._mainAxis._anchorAxis,X="",te="",ee="";if(W&&(ee=W._mainAxis._id,X=Q?N._id+ee:ee+N._id),!X||!U._plots[X]){X="";for(var ie=N._counterAxes,le=0;le<ie.length;le++){var ye=ie[le],ue=Q?N._id+ye:ye+N._id;te||(te=ue);var pe=o.getFromId(q,ye);if(ee&&pe.overlaying===ee){X=ue;break}}}return X||te}l.clearExpandedTraceDefaultColors=function(N){var U,q,Q;function W(te,ee,ie,le){q[le]=ee,q.length=le+1,te.valType==="color"&&te.dflt===void 0&&U.push(q.join("."))}for(q=[],U=N._module._colorAttrs,U||(N._module._colorAttrs=U=[],a.crawl(N._module.attributes,W)),Q=0;Q<U.length;Q++){var X=t.nestedProperty(N,"_input."+U[Q]);X.get()||t.nestedProperty(N,U[Q]).set(null)}},l.supplyDataDefaults=function(N,U,q,Q){var W=Q._modules,X=Q._visibleModules,te=Q._basePlotModules,ee=0,ie=0,le,ye,ue;Q._transformModules=[];function pe(Fe){U.push(Fe);var Le=Fe._module;!Le||(t.pushUnique(W,Le),Fe.visible===!0&&t.pushUnique(X,Le),t.pushUnique(te,Fe._module.basePlotModule),ee++,Fe._input.visible!==!1&&ie++)}var ge={},Te=[],_e=(q.template||{}).data||{},De=n.traceTemplater(_e);for(le=0;le<N.length;le++){if(ue=N[le],ye=De.newTrace(ue),ye.uid=Q._traceUids[le],l.supplyTraceDefaults(ue,ye,ie,Q,le),ye.index=le,ye._input=ue,ye._expandedIndex=ee,ye.transforms&&ye.transforms.length)for(var Oe=ue.visible!==!1&&ye.visible===!1,Ue=I(ye,U,q,Q),xe=0;xe<Ue.length;xe++){var Pe=Ue[xe],Ve={_template:ye._template,type:ye.type,uid:ye.uid+xe};Oe&&Pe.visible===!1&&delete Pe.visible,l.supplyTraceDefaults(Pe,Ve,ee,Q,le),v(Ve,Pe),Ve.index=le,Ve._input=ue,Ve._fullInput=ye,Ve._expandedIndex=ee,Ve._expandedInput=Pe,pe(Ve)}else ye._fullInput=ye,ye._expandedInput=ye,pe(ye);e.traceIs(ye,"carpetAxis")&&(ge[ye.carpet]=ye),e.traceIs(ye,"carpetDependent")&&Te.push(le)}for(le=0;le<Te.length;le++)if(ye=U[Te[le]],!!ye.visible){var Qe=ge[ye.carpet];if(ye._carpet=Qe,!Qe||!Qe.visible){ye.visible=!1;continue}ye.xaxis=Qe.xaxis,ye.yaxis=Qe.yaxis}},l.supplyAnimationDefaults=function(N){N=N||{};var U,q={};function Q(W,X){return t.coerce(N||{},q,p,W,X)}if(Q("mode"),Q("direction"),Q("fromcurrent"),Array.isArray(N.frame))for(q.frame=[],U=0;U<N.frame.length;U++)q.frame[U]=l.supplyAnimationFrameDefaults(N.frame[U]||{});else q.frame=l.supplyAnimationFrameDefaults(N.frame||{});if(Array.isArray(N.transition))for(q.transition=[],U=0;U<N.transition.length;U++)q.transition[U]=l.supplyAnimationTransitionDefaults(N.transition[U]||{});else q.transition=l.supplyAnimationTransitionDefaults(N.transition||{});return q},l.supplyAnimationFrameDefaults=function(N){var U={};function q(Q,W){return t.coerce(N||{},U,p.frame,Q,W)}return q("duration"),q("redraw"),U},l.supplyAnimationTransitionDefaults=function(N){var U={};function q(Q,W){return t.coerce(N||{},U,p.transition,Q,W)}return q("duration"),q("easing"),U},l.supplyFrameDefaults=function(N){var U={};function q(Q,W){return t.coerce(N,U,d,Q,W)}return q("group"),q("name"),q("traces"),q("baseframe"),q("data"),q("layout"),U},l.supplyTraceDefaults=function(N,U,q,Q,W){var X=Q.colorway||r.defaults,te=X[q%X.length],ee;function ie(Ue,xe){return t.coerce(N,U,l.attributes,Ue,xe)}var le=ie("visible");ie("type"),ie("name",Q._traceWord+" "+W),ie("uirevision",Q.uirevision);var ye=l.getModule(U);if(U._module=ye,ye){var ue=ye.basePlotModule,pe=ue.attr,ge=ue.attributes;if(pe&&ge){var Te=Q._subplots,_e="";if(le||ue.name!=="gl2d"){if(Array.isArray(pe))for(ee=0;ee<pe.length;ee++){var De=pe[ee],Oe=t.coerce(N,U,ge,De);Te[De]&&t.pushUnique(Te[De],Oe),_e+=Oe}else _e=t.coerce(N,U,ge,pe);Te[ue.name]&&t.pushUnique(Te[ue.name],_e)}}}return le&&(ie("customdata"),ie("ids"),ie("meta"),e.traceIs(U,"showLegend")?(t.coerce(N,U,ye.attributes.showlegend?ye.attributes:l.attributes,"showlegend"),ie("legendgroup"),ie("legendgrouptitle.text"),ie("legendrank"),U._dfltShowLegend=!0):U._dfltShowLegend=!1,ye&&ye.supplyDefaults(N,U,te,Q),e.traceIs(U,"noOpacity")||ie("opacity"),e.traceIs(U,"notLegendIsolatable")&&(U.visible=!!U.visible),e.traceIs(U,"noHover")||(U.hovertemplate||t.coerceHoverinfo(N,U,Q),U.type!=="parcats"&&e.getComponentMethod("fx","supplyDefaults")(N,U,te,Q)),ye&&ye.selectPoints&&ie("selectedpoints"),l.supplyTransformDefaults(N,U,Q)),U};function z(N){var U=N.transforms;if(Array.isArray(U)&&U.length)for(var q=0;q<U.length;q++){var Q=U[q],W=Q._module||_[Q.type];if(W&&W.makesData)return!0}return!1}l.hasMakesDataTransform=z,l.supplyTransformDefaults=function(N,U,q){if(!!(U._length||z(N))){var Q=q._globalTransforms||[],W=q._transformModules||[];if(!(!Array.isArray(N.transforms)&&Q.length===0))for(var X=N.transforms||[],te=Q.concat(X),ee=U.transforms=[],ie=0;ie<te.length;ie++){var le=te[ie],ye=le.type,ue=_[ye],pe,ge=!(le._module&&le._module===ue),Te=ue&&typeof ue.transform=="function";ue||t.warn("Unrecognized transform type "+ye+"."),ue&&ue.supplyDefaults&&(ge||Te)?(pe=ue.supplyDefaults(le,U,q,N),pe.type=ye,pe._module=ue,t.pushUnique(W,ue)):pe=t.extendFlat({},le),ee.push(pe)}}};function I(N,U,q,Q){for(var W=N.transforms,X=[N],te=0;te<W.length;te++){var ee=W[te],ie=_[ee.type];ie&&ie.transform&&(X=ie.transform(X,{transform:ee,fullTrace:N,fullData:U,layout:q,fullLayout:Q,transformIndex:te}))}return X}l.supplyLayoutGlobalDefaults=function(N,U,q){function Q(le,ye){return t.coerce(N,U,l.layoutAttributes,le,ye)}var W=N.template;t.isPlainObject(W)&&(U.template=W,U._template=W.layout,U._dataTemplate=W.data),Q("autotypenumbers");var X=t.coerceFont(Q,"font"),te=X.size;t.coerceFont(Q,"title.font",t.extendFlat({},X,{size:Math.round(te*1.4)})),Q("title.text",U._dfltTitle.plot),Q("title.xref"),Q("title.yref"),Q("title.x"),Q("title.y"),Q("title.xanchor"),Q("title.yanchor"),Q("title.pad.t"),Q("title.pad.r"),Q("title.pad.b"),Q("title.pad.l");var ee=Q("uniformtext.mode");ee&&Q("uniformtext.minsize"),Q("autosize",!(N.width&&N.height)),Q("width"),Q("height"),Q("margin.l"),Q("margin.r"),Q("margin.t"),Q("margin.b"),Q("margin.pad"),Q("margin.autoexpand"),N.width&&N.height&&l.sanitizeMargins(U),e.getComponentMethod("grid","sizeDefaults")(N,U),Q("paper_bgcolor"),Q("separators",q.decimal+q.thousands),Q("hidesources"),Q("colorway"),Q("datarevision");var ie=Q("uirevision");Q("editrevision",ie),Q("selectionrevision",ie),e.getComponentMethod("modebar","supplyLayoutDefaults")(N,U),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(N,U,Q),Q("meta"),t.isPlainObject(N.transition)&&(Q("transition.duration"),Q("transition.easing"),Q("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(N,U,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(N,U,Q)};function D(N){return typeof N=="string"&&N.substr(N.length-2)==="px"&&parseFloat(N)}l.plotAutoSize=function(U,q,Q){var W=U._context||{},X=W.frameMargins,te,ee,ie=t.isPlotDiv(U);if(ie&&U.emit("plotly_autosize"),W.fillFrame)te=window.innerWidth,ee=window.innerHeight,document.body.style.overflow="hidden";else{var le=ie?window.getComputedStyle(U):{};if(te=D(le.width)||D(le.maxWidth)||Q.width,ee=D(le.height)||D(le.maxHeight)||Q.height,A(X)&&X>0){var ye=1-2*X;te=Math.round(ye*te),ee=Math.round(ye*ee)}}var ue=l.layoutAttributes.width.min,pe=l.layoutAttributes.height.min;te<ue&&(te=ue),ee<pe&&(ee=pe);var ge=!q.width&&Math.abs(Q.width-te)>1,Te=!q.height&&Math.abs(Q.height-ee)>1;(Te||ge)&&(ge&&(Q.width=te),Te&&(Q.height=ee)),U._initialAutoSize||(U._initialAutoSize={width:te,height:ee}),l.sanitizeMargins(Q)},l.supplyLayoutModuleDefaults=function(N,U,q,Q){var W=e.componentsRegistry,X=U._basePlotModules,te,ee,ie,le=e.subplotsRegistry.cartesian;for(te in W)ie=W[te],ie.includeBasePlot&&ie.includeBasePlot(N,U);X.length||X.push(le),U._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(N,U),le.finalizeSubplots(N,U));for(var ye in U._subplots)U._subplots[ye].sort(t.subplotSort);for(ee=0;ee<X.length;ee++)ie=X[ee],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(N,U,q);var ue=U._modules;for(ee=0;ee<ue.length;ee++)ie=ue[ee],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(N,U,q);var pe=U._transformModules;for(ee=0;ee<pe.length;ee++)ie=pe[ee],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(N,U,q,Q);for(te in W)ie=W[te],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(N,U,q)},l.purge=function(N){var U=N._fullLayout||{};U._glcontainer!==void 0&&(U._glcontainer.selectAll(".gl-canvas").remove(),U._glcontainer.remove(),U._glcanvas=null),U._modeBar&&U._modeBar.destroy(),N._transitionData&&(N._transitionData._interruptCallbacks&&(N._transitionData._interruptCallbacks.length=0),N._transitionData._animationRaf&&window.cancelAnimationFrame(N._transitionData._animationRaf)),t.clearThrottle(),t.clearResponsive(N),delete N.data,delete N.layout,delete N._fullData,delete N._fullLayout,delete N.calcdata,delete N.empty,delete N.fid,delete N.undoqueue,delete N.undonum,delete N.autoplay,delete N.changed,delete N._promises,delete N._redrawTimer,delete N._hmlumcount,delete N._hmpixcount,delete N._transitionData,delete N._transitioning,delete N._initialAutoSize,delete N._transitioningWithDuration,delete N._dragging,delete N._dragged,delete N._dragdata,delete N._hoverdata,delete N._snapshotInProgress,delete N._editing,delete N._mouseDownTime,delete N._legendMouseDownTime,N.removeAllListeners&&N.removeAllListeners()},l.style=function(N){var U=N._fullLayout._visibleModules,q=[],Q;for(Q=0;Q<U.length;Q++){var W=U[Q];W.style&&t.pushUnique(q,W.style)}for(Q=0;Q<q.length;Q++)q[Q](N)},l.sanitizeMargins=function(N){if(!(!N||!N.margin)){var U=N.width,q=N.height,Q=N.margin,W=U-(Q.l+Q.r),X=q-(Q.t+Q.b),te;W<0&&(te=(U-1)/(Q.l+Q.r),Q.l=Math.floor(te*Q.l),Q.r=Math.floor(te*Q.r)),X<0&&(te=(q-1)/(Q.t+Q.b),Q.t=Math.floor(te*Q.t),Q.b=Math.floor(te*Q.b))}},l.clearAutoMarginIds=function(N){N._fullLayout._pushmarginIds={}},l.allowAutoMargin=function(N,U){N._fullLayout._pushmarginIds[U]=1};function R(N){var U=N.margin;if(!N._size){var q=N._size={l:Math.round(U.l),r:Math.round(U.r),t:Math.round(U.t),b:Math.round(U.b),p:Math.round(U.pad)};q.w=Math.round(N.width)-q.l-q.r,q.h=Math.round(N.height)-q.t-q.b}N._pushmargin||(N._pushmargin={}),N._pushmarginIds||(N._pushmarginIds={})}var B=2,F=2,V=64,Y=64;l.autoMargin=function(N,U,q){var Q=N._fullLayout,W=Q.width,X=Q.height,te=Q.margin,ee=t.constrain(W-te.l-te.r,B,V),ie=t.constrain(X-te.t-te.b,F,Y),le=Math.max(0,W-ee),ye=Math.max(0,X-ie),ue=Q._pushmargin,pe=Q._pushmarginIds;if(te.autoexpand!==!1){if(!q)delete ue[U],delete pe[U];else{var ge=q.pad;if(ge===void 0&&(ge=Math.min(12,te.l,te.r,te.t,te.b)),le){var Te=(q.l+q.r)/le;Te>1&&(q.l/=Te,q.r/=Te)}if(ye){var _e=(q.t+q.b)/ye;_e>1&&(q.t/=_e,q.b/=_e)}var De=q.xl!==void 0?q.xl:q.x,Oe=q.xr!==void 0?q.xr:q.x,Ue=q.yt!==void 0?q.yt:q.y,xe=q.yb!==void 0?q.yb:q.y;ue[U]={l:{val:De,size:q.l+ge},r:{val:Oe,size:q.r+ge},b:{val:xe,size:q.b+ge},t:{val:Ue,size:q.t+ge}},pe[U]=1}if(!Q._replotting)return l.doAutoMargin(N)}},l.doAutoMargin=function(N){var U=N._fullLayout,q=U.width,Q=U.height;U._size||(U._size={}),R(U);var W=U._size,X=U.margin,te=t.extendFlat({},W),ee=X.l,ie=X.r,le=X.t,ye=X.b,ue=U._pushmargin,pe=U._pushmarginIds;if(U.margin.autoexpand!==!1){for(var ge in ue)pe[ge]||delete ue[ge];ue.base={l:{val:0,size:ee},r:{val:1,size:ie},t:{val:1,size:le},b:{val:0,size:ye}};for(var Te in ue){var _e=ue[Te].l||{},De=ue[Te].b||{},Oe=_e.val,Ue=_e.size,xe=De.val,Pe=De.size;for(var Ve in ue){if(A(Ue)&&ue[Ve].r){var Qe=ue[Ve].r.val,Fe=ue[Ve].r.size;if(Qe>Oe){var Le=(Ue*Qe+(Fe-q)*Oe)/(Qe-Oe),Ne=(Fe*(1-Oe)+(Ue-q)*(1-Qe))/(Qe-Oe);Le+Ne>ee+ie&&(ee=Le,ie=Ne)}}if(A(Pe)&&ue[Ve].t){var dt=ue[Ve].t.val,Dt=ue[Ve].t.size;if(dt>xe){var Xt=(Pe*dt+(Dt-Q)*xe)/(dt-xe),Tt=(Dt*(1-xe)+(Pe-Q)*(1-dt))/(dt-xe);Xt+Tt>ye+le&&(ye=Xt,le=Tt)}}}}}var zt=t.constrain(q-X.l-X.r,B,V),Ut=t.constrain(Q-X.t-X.b,F,Y),Et=Math.max(0,q-zt),Mt=Math.max(0,Q-Ut);if(Et){var rt=(ee+ie)/Et;rt>1&&(ee/=rt,ie/=rt)}if(Mt){var ct=(ye+le)/Mt;ct>1&&(ye/=ct,le/=ct)}if(W.l=Math.round(ee),W.r=Math.round(ie),W.t=Math.round(le),W.b=Math.round(ye),W.p=Math.round(X.pad),W.w=Math.round(q)-W.l-W.r,W.h=Math.round(Q)-W.t-W.b,!U._replotting&&l.didMarginChange(te,W)){"_redrawFromAutoMarginCount"in U?U._redrawFromAutoMarginCount++:U._redrawFromAutoMarginCount=1;var Ze=3*(1+Object.keys(pe).length);if(U._redrawFromAutoMarginCount<Ze)return e.call("_doPlot",N);U._size=te,t.warn("Too many auto-margin redraws.")}K(N)};function K(N){var U=o.list(N,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(q){for(var Q=0;Q<U.length;Q++){var W=U[Q][q];W&&W()}})}var J=["l","r","t","b","p","w","h"];l.didMarginChange=function(N,U){for(var q=0;q<J.length;q++){var Q=J[q],W=N[Q],X=U[Q];if(!A(W)||Math.abs(X-W)>1)return!0}return!1},l.graphJson=function(N,U,q,Q,W,X){(W&&U&&!N._fullData||W&&!U&&!N._fullLayout)&&l.supplyDefaults(N);var te=W?N._fullData:N.data,ee=W?N._fullLayout:N.layout,ie=(N._transitionData||{})._frames;function le(pe,ge){if(typeof pe=="function")return ge?"_function_":null;if(t.isPlainObject(pe)){var Te={},_e;return Object.keys(pe).sort().forEach(function(De){if(["_","["].indexOf(De.charAt(0))===-1){if(typeof pe[De]=="function"){ge&&(Te[De]="_function");return}if(q==="keepdata"){if(De.substr(De.length-3)==="src")return}else if(q==="keepstream"){if(_e=pe[De+"src"],typeof _e=="string"&&_e.indexOf(":")>0&&!t.isPlainObject(pe.stream))return}else if(q!=="keepall"&&(_e=pe[De+"src"],typeof _e=="string"&&_e.indexOf(":")>0))return;Te[De]=le(pe[De],ge)}}),Te}return Array.isArray(pe)?pe.map(function(De){return le(De,ge)}):t.isTypedArray(pe)?t.simpleMap(pe,t.identity):t.isJSDate(pe)?t.ms2DateTimeLocal(+pe):pe}var ye={data:(te||[]).map(function(pe){var ge=le(pe);return U&&delete ge.fit,ge})};if(!U&&(ye.layout=le(ee),W)){var ue=ee._size;ye.layout.computed={margin:{b:ue.b,l:ue.l,r:ue.r,t:ue.t}}}return ie&&(ye.frames=le(ie)),X&&(ye.config=le(N._context,!0)),Q==="object"?ye:JSON.stringify(ye)},l.modifyFrames=function(N,U){var q,Q,W,X=N._transitionData._frames,te=N._transitionData._frameHash;for(q=0;q<U.length;q++)switch(Q=U[q],Q.type){case"replace":W=Q.value;var ee=(X[Q.index]||{}).name,ie=W.name;X[Q.index]=te[ie]=W,ie!==ee&&(delete te[ee],te[ie]=W);break;case"insert":W=Q.value,te[W.name]=W,X.splice(Q.index,0,W);break;case"delete":W=X[Q.index],delete te[W.name],X.splice(Q.index,1);break}return Promise.resolve()},l.computeFrame=function(N,U){var q=N._transitionData._frameHash,Q,W,X,te;if(!U)throw new Error("computeFrame must be given a string frame name");var ee=q[U.toString()];if(!ee)return!1;for(var ie=[ee],le=[ee.name];ee.baseframe&&(ee=q[ee.baseframe.toString()])&&le.indexOf(ee.name)===-1;)ie.push(ee),le.push(ee.name);for(var ye={};ee=ie.pop();)if(ee.layout&&(ye.layout=l.extendLayout(ye.layout,ee.layout)),ee.data){if(ye.data||(ye.data=[]),W=ee.traces,!W)for(W=[],Q=0;Q<ee.data.length;Q++)W[Q]=Q;for(ye.traces||(ye.traces=[]),Q=0;Q<ee.data.length;Q++)X=W[Q],X!=null&&(te=ye.traces.indexOf(X),te===-1&&(te=ye.data.length,ye.traces[te]=X),ye.data[te]=l.extendTrace(ye.data[te],ee.data[Q]))}return ye},l.recomputeFrameHash=function(N){for(var U=N._transitionData._frameHash={},q=N._transitionData._frames,Q=0;Q<q.length;Q++){var W=q[Q];W&&W.name&&(U[W.name]=W)}},l.extendObjectWithContainers=function(N,U,q){var Q,W,X,te,ee,ie,le,ye,ue=t.extendDeepNoArrays({},U||{}),pe=t.expandObjectPaths(ue),ge={};if(q&&q.length)for(X=0;X<q.length;X++)Q=t.nestedProperty(pe,q[X]),W=Q.get(),W===void 0?t.nestedProperty(ge,q[X]).set(null):(Q.set(null),t.nestedProperty(ge,q[X]).set(W));if(N=t.extendDeepNoArrays(N||{},pe),q&&q.length){for(X=0;X<q.length;X++)if(ee=t.nestedProperty(ge,q[X]),le=ee.get(),!!le){for(ie=t.nestedProperty(N,q[X]),ye=ie.get(),Array.isArray(ye)||(ye=[],ie.set(ye)),te=0;te<le.length;te++){var Te=le[te];Te===null?ye[te]=null:ye[te]=l.extendObjectWithContainers(ye[te],Te)}ie.set(ye)}}return N},l.dataArrayContainers=["transforms","dimensions"],l.layoutArrayContainers=e.layoutArrayContainers,l.extendTrace=function(N,U){return l.extendObjectWithContainers(N,U,l.dataArrayContainers)},l.extendLayout=function(N,U){return l.extendObjectWithContainers(N,U,l.layoutArrayContainers)},l.transition=function(N,U,q,Q,W,X){var te={redraw:W.redraw},ee={},ie=[];return te.prepareFn=function(){for(var le=Array.isArray(U)?U.length:0,ye=Q.slice(0,le),ue=0;ue<ye.length;ue++){var pe=ye[ue],ge=N._fullData[pe],Te=ge._module;if(!!Te){if(Te.animatable){var _e=Te.basePlotModule.name;ee[_e]||(ee[_e]=[]),ee[_e].push(pe)}N.data[ye[ue]]=l.extendTrace(N.data[ye[ue]],U[ue])}}var De=t.expandObjectPaths(t.extendDeepNoArrays({},q)),Oe=/^[xy]axis[0-9]*$/;for(var Ue in De)!Oe.test(Ue)||delete De[Ue].range;l.extendLayout(N.layout,De),delete N.calcdata,l.supplyDefaults(N),l.doCalcdata(N);var xe=t.expandObjectPaths(q);if(xe){var Pe=N._fullLayout._plots;for(var Ve in Pe){var Qe=Pe[Ve],Fe=Qe.xaxis,Le=Qe.yaxis,Ne=Fe.range.slice(),dt=Le.range.slice(),Dt=null,Xt=null,Tt=null,zt=null;Array.isArray(xe[Fe._name+".range"])?Dt=xe[Fe._name+".range"].slice():Array.isArray((xe[Fe._name]||{}).range)&&(Dt=xe[Fe._name].range.slice()),Array.isArray(xe[Le._name+".range"])?Xt=xe[Le._name+".range"].slice():Array.isArray((xe[Le._name]||{}).range)&&(Xt=xe[Le._name].range.slice()),Ne&&Dt&&(Fe.r2l(Ne[0])!==Fe.r2l(Dt[0])||Fe.r2l(Ne[1])!==Fe.r2l(Dt[1]))&&(Tt={xr0:Ne,xr1:Dt}),dt&&Xt&&(Le.r2l(dt[0])!==Le.r2l(Xt[0])||Le.r2l(dt[1])!==Le.r2l(Xt[1]))&&(zt={yr0:dt,yr1:Xt}),(Tt||zt)&&ie.push(t.extendFlat({plotinfo:Qe},Tt,zt))}}return Promise.resolve()},te.runFn=function(le){var ye,ue=N._fullLayout._basePlotModules,pe=ie.length,ge;if(q)for(ge=0;ge<ue.length;ge++)ue[ge].transitionAxes&&ue[ge].transitionAxes(N,ie,X,le);pe?(ye=t.extendFlat({},X),ye.duration=0,delete ee.cartesian):ye=X;for(var Te in ee){var _e=ee[Te],De=N._fullData[_e[0]]._module;De.basePlotModule.plot(N,_e,ye,le)}},G(N,X,te)},l.transitionFromReact=function(N,U,q,Q){var W=N._fullLayout,X=W.transition,te={},ee=[];return te.prepareFn=function(){var ie=W._plots;te.redraw=!1,U.anim==="some"&&(te.redraw=!0),q.anim==="some"&&(te.redraw=!0);for(var le in ie){var ye=ie[le],ue=ye.xaxis,pe=ye.yaxis,ge=Q[ue._name].range.slice(),Te=Q[pe._name].range.slice(),_e=ue.range.slice(),De=pe.range.slice();ue.setScale(),pe.setScale();var Oe=null,Ue=null;(ue.r2l(ge[0])!==ue.r2l(_e[0])||ue.r2l(ge[1])!==ue.r2l(_e[1]))&&(Oe={xr0:ge,xr1:_e}),(pe.r2l(Te[0])!==pe.r2l(De[0])||pe.r2l(Te[1])!==pe.r2l(De[1]))&&(Ue={yr0:Te,yr1:De}),(Oe||Ue)&&ee.push(t.extendFlat({plotinfo:ye},Oe,Ue))}return Promise.resolve()},te.runFn=function(ie){for(var le=N._fullData,ye=N._fullLayout,ue=ye._basePlotModules,pe,ge,Te,_e=[],De=0;De<le.length;De++)_e.push(De);function Oe(){if(!!N._fullLayout)for(var xe=0;xe<ue.length;xe++)ue[xe].transitionAxes&&ue[xe].transitionAxes(N,ee,pe,ie)}function Ue(){if(!!N._fullLayout)for(var xe=0;xe<ue.length;xe++)ue[xe].plot(N,Te,ge,ie)}ee.length&&U.anim?X.ordering==="traces first"?(pe=t.extendFlat({},X,{duration:0}),Te=_e,ge=X,setTimeout(Oe,X.duration),Ue()):(pe=X,Te=null,ge=t.extendFlat({},X,{duration:0}),setTimeout(Ue,pe.duration),Oe()):ee.length?(pe=X,Oe()):U.anim&&(Te=_e,ge=X,Ue())},G(N,X,te)};function G(N,U,q){var Q=!1;function W(ue){var pe=Promise.resolve();if(!ue)return pe;for(;ue.length;)pe=pe.then(ue.shift());return pe}function X(ue){if(!!ue)for(;ue.length;)ue.shift()}function te(){return N.emit("plotly_transitioning",[]),new Promise(function(ue){N._transitioning=!0,U.duration>0&&(N._transitioningWithDuration=!0),N._transitionData._interruptCallbacks.push(function(){Q=!0}),q.redraw&&N._transitionData._interruptCallbacks.push(function(){return e.call("redraw",N)}),N._transitionData._interruptCallbacks.push(function(){N.emit("plotly_transitioninterrupted",[])});var pe=0,ge=0;function Te(){return pe++,function(){ge++,!Q&&ge===pe&&ee(ue)}}q.runFn(Te),setTimeout(Te())})}function ee(ue){if(!!N._transitionData)return X(N._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(q.redraw)return e.call("redraw",N)}).then(function(){N._transitioning=!1,N._transitioningWithDuration=!1,N.emit("plotly_transitioned",[])}).then(ue)}function ie(){if(!!N._transitionData)return N._transitioning=!1,W(N._transitionData._interruptCallbacks)}var le=[l.previousPromises,ie,q.prepareFn,l.rehover,te],ye=t.syncOrAsync(le,N);return(!ye||!ye.then)&&(ye=Promise.resolve()),ye.then(function(){return N})}l.doCalcdata=function(N,U){var q=o.list(N),Q=N._fullData,W=N._fullLayout,X,te,ee,ie,le=new Array(Q.length),ye=(N.calcdata||[]).slice();for(N.calcdata=le,W._numBoxes=0,W._numViolins=0,W._violinScaleGroupStats={},N._hmpixcount=0,N._hmlumcount=0,W._piecolormap={},W._sunburstcolormap={},W._treemapcolormap={},W._iciclecolormap={},W._funnelareacolormap={},ee=0;ee<Q.length;ee++)if(Array.isArray(U)&&U.indexOf(ee)===-1){le[ee]=ye[ee];continue}for(ee=0;ee<Q.length;ee++)X=Q[ee],X._arrayAttrs=a.findArrayAttributes(X),X._extremes={};var ue=W._subplots.polar||[];for(ee=0;ee<ue.length;ee++)q.push(W[ue[ee]].radialaxis,W[ue[ee]].angularaxis);for(var pe in W._colorAxes){var ge=W[pe];ge.cauto!==!1&&(delete ge.cmin,delete ge.cmax)}var Te=!1;function _e(Ue){if(X=Q[Ue],te=X._module,X.visible===!0&&X.transforms){if(te&&te.calc){var xe=te.calc(N,X);xe[0]&&xe[0].t&&xe[0].t._scene&&delete xe[0].t._scene.dirty}for(ie=0;ie<X.transforms.length;ie++){var Pe=X.transforms[ie];te=_[Pe.type],te&&te.calcTransform&&(X._hasCalcTransform=!0,Te=!0,te.calcTransform(N,X,Pe))}}}function De(Ue,xe){if(X=Q[Ue],te=X._module,!!te.isContainer===xe){var Pe=[];if(X.visible===!0&&X._length!==0){delete X._indexToPoints;var Ve=X.transforms||[];for(ie=Ve.length-1;ie>=0;ie--)if(Ve[ie].enabled){X._indexToPoints=Ve[ie]._indexToPoints;break}te&&te.calc&&(Pe=te.calc(N,X))}(!Array.isArray(Pe)||!Pe[0])&&(Pe=[{x:f,y:f}]),Pe[0].t||(Pe[0].t={}),Pe[0].trace=X,le[Ue]=Pe}}for(se(q,Q,W),ee=0;ee<Q.length;ee++)De(ee,!0);for(ee=0;ee<Q.length;ee++)_e(ee);for(Te&&se(q,Q,W),ee=0;ee<Q.length;ee++)De(ee,!0);for(ee=0;ee<Q.length;ee++)De(ee,!1);oe(N);var Oe=re(q,N);if(Oe.length){for(W._numBoxes=0,W._numViolins=0,ee=0;ee<Oe.length;ee++)De(Oe[ee],!0);for(ee=0;ee<Oe.length;ee++)De(Oe[ee],!1);oe(N)}e.getComponentMethod("fx","calc")(N),e.getComponentMethod("errorbars","calc")(N)};var Z=/(total|sum|min|max|mean|median) (ascending|descending)/;function re(N,U){var q=[],Q,W,X,te,ee;function ie(Et,Mt,rt){var ct=Mt._id.charAt(0);if(Et==="histogram2dcontour"){var Ze=Mt._counterAxes[0],ke=o.getFromId(U,Ze),Ge=ct==="x"||Ze==="x"&&ke.type==="category",Je=ct==="y"||Ze==="y"&&ke.type==="category";return function(it,Pt){return it===0||Pt===0||Ge&&it===rt[Pt].length-1||Je&&Pt===rt.length-1?-1:(ct==="y"?Pt:it)-1}}else return function(it,Pt){return ct==="y"?Pt:it}}var le={min:function(Et){return t.aggNums(Math.min,null,Et)},max:function(Et){return t.aggNums(Math.max,null,Et)},sum:function(Et){return t.aggNums(function(Mt,rt){return Mt+rt},null,Et)},total:function(Et){return t.aggNums(function(Mt,rt){return Mt+rt},null,Et)},mean:function(Et){return t.mean(Et)},median:function(Et){return t.median(Et)}};for(Q=0;Q<N.length;Q++){var ye=N[Q];if(ye.type==="category"){var ue=ye.categoryorder.match(Z);if(ue){var pe=ue[1],ge=ue[2],Te=ye._id.charAt(0),_e=Te==="x",De=[];for(W=0;W<ye._categories.length;W++)De.push([ye._categories[W],[]]);for(W=0;W<ye._traceIndices.length;W++){var Oe=ye._traceIndices[W],Ue=U._fullData[Oe];if(Ue.visible===!0){var xe=Ue.type;e.traceIs(Ue,"histogram")&&(delete Ue._xautoBinFinished,delete Ue._yautoBinFinished);var Pe=xe==="splom",Ve=xe==="scattergl",Qe=U.calcdata[Oe];for(X=0;X<Qe.length;X++){var Fe=Qe[X],Le,Ne;if(Pe){var dt=Ue._axesDim[ye._id];if(!_e){var Dt=Ue._diag[dt][0];Dt&&(ye=U._fullLayout[o.id2name(Dt)])}var Xt=Fe.trace.dimensions[dt].values;for(te=0;te<Xt.length;te++)for(Le=ye._categoriesMap[Xt[te]],ee=0;ee<Fe.trace.dimensions.length;ee++)if(ee!==dt){var Tt=Fe.trace.dimensions[ee];De[Le][1].push(Tt.values[te])}}else if(Ve){for(te=0;te<Fe.t.x.length;te++)_e?(Le=Fe.t.x[te],Ne=Fe.t.y[te]):(Le=Fe.t.y[te],Ne=Fe.t.x[te]),De[Le][1].push(Ne);Fe.t&&Fe.t._scene&&delete Fe.t._scene.dirty}else if(Fe.hasOwnProperty("z")){Ne=Fe.z;var zt=ie(Ue.type,ye,Ne);for(te=0;te<Ne.length;te++)for(ee=0;ee<Ne[te].length;ee++)Le=zt(ee,te),Le+1&&De[Le][1].push(Ne[te][ee])}else for(Le=Fe.p,Le===void 0&&(Le=Fe[Te]),Ne=Fe.s,Ne===void 0&&(Ne=Fe.v),Ne===void 0&&(Ne=_e?Fe.y:Fe.x),Array.isArray(Ne)||(Ne===void 0?Ne=[]:Ne=[Ne]),te=0;te<Ne.length;te++)De[Le][1].push(Ne[te])}}}ye._categoriesValue=De;var Ut=[];for(W=0;W<De.length;W++)Ut.push([De[W][0],le[pe](De[W][1])]);Ut.sort(function(Et,Mt){return Et[1]-Mt[1]}),ye._categoriesAggregatedValue=Ut,ye._initialCategories=Ut.map(function(Et){return Et[0]}),ge==="descending"&&ye._initialCategories.reverse(),q=q.concat(ye.sortByInitialCategories())}}}return q}function se(N,U,q){var Q={};function W(ie){ie.clearCalc(),ie.type==="multicategory"&&ie.setupMultiCategory(U),Q[ie._id]=1}t.simpleMap(N,W);for(var X=q._axisMatchGroups||[],te=0;te<X.length;te++)for(var ee in X[te])Q[ee]||W(q[o.id2name(ee)])}function oe(N){var U=N._fullLayout,q=U._visibleModules,Q={},W,X,te;for(X=0;X<q.length;X++){var ee=q[X],ie=ee.crossTraceCalc;if(ie){var le=ee.basePlotModule.name;Q[le]?t.pushUnique(Q[le],ie):Q[le]=[ie]}}for(te in Q){var ye=Q[te],ue=U._subplots[te];if(Array.isArray(ue))for(W=0;W<ue.length;W++){var pe=ue[W],ge=te==="cartesian"?U._plots[pe]:U[pe];for(X=0;X<ye.length;X++)ye[X](N,ge,pe)}else for(X=0;X<ye.length;X++)ye[X](N)}}l.rehover=function(N){N._fullLayout._rehover&&N._fullLayout._rehover()},l.redrag=function(N){N._fullLayout._redrag&&N._fullLayout._redrag()},l.generalUpdatePerTraceModule=function(N,U,q,Q){var W=U.traceHash,X={},te;for(te=0;te<q.length;te++){var ee=q[te],ie=ee[0].trace;ie.visible&&(X[ie.type]=X[ie.type]||[],X[ie.type].push(ee))}for(var le in W)if(!X[le]){var ye=W[le][0],ue=ye[0].trace;ue.visible=!1,X[le]=[ye]}for(var pe in X){var ge=X[pe],Te=ge[0][0].trace._module;Te.plot(N,U,t.filterVisible(ge),Q)}U.traceHash=X},l.plotBasePlot=function(N,U,q,Q,W){var X=e.getModule(N),te=y(U.calcdata,X)[0];X.plot(U,te,Q,W)},l.cleanBasePlot=function(N,U,q,Q,W){var X=W._has&&W._has(N),te=q._has&&q._has(N);X&&!te&&W["_"+N+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(g,ne,ae){ne.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(g,ne,ae){var T=g("../../lib"),c=g("../../lib/polygon").tester,M=T.findIndexOfMin,A=T.isAngleInsideSector,e=T.angleDelta,a=T.angleDist;function n(_,s,w,b,h){if(!A(s,b))return!1;var m,u;w[0]<w[1]?(m=w[0],u=w[1]):(m=w[1],u=w[0]);var L=c(i(m,b[0],b[1],h)),S=c(i(u,b[0],b[1],h)),k=[_*Math.cos(s),_*Math.sin(s)];return S.contains(k)&&!L.contains(k)}function t(_,s,w,b){var h,m,u=b[0],L=b[1],S=y(Math.sin(s)-Math.sin(_)),k=y(Math.cos(s)-Math.cos(_)),P=Math.tan(w),z=y(1/P),I=S/k,D=L-I*u;return z?S&&k?(h=D/(P-I),m=P*h):k?(h=L*z,m=L):(h=u,m=u*P):S&&k?(h=0,m=D):k?(h=0,m=L):h=m=NaN,[h,m]}function r(_,s,w,b){var h=-s*w,m=s*s+1,u=2*(s*h-w),L=h*h+w*w-_*_,S=Math.sqrt(u*u-4*m*L),k=(-u+S)/(2*m),P=(-u-S)/(2*m);return[[k,s*k+h+b],[P,s*P+h+b]]}function f(_,s){var w=s.length,b=new Array(w+1),h;for(h=0;h<w;h++){var m=s[h];b[h]=[_*Math.cos(m),_*Math.sin(m)]}return b[h]=b[0].slice(),b}function o(_,s,w,b){var h=b.length,m=[],u,L;function S(V){return[_*Math.cos(V),_*Math.sin(V)]}function k(V,Y,K){return t(V,Y,K,S(V))}function P(V){return T.mod(V,h)}function z(V){return A(V,[s,w])}var I=M(b,function(V){return z(V)?a(V,s):1/0}),D=k(b[I],b[P(I-1)],s);for(m.push(D),u=I,L=0;L<h;u++,L++){var R=b[P(u)];if(!z(R))break;m.push(S(R))}var B=M(b,function(V){return z(V)?a(V,w):1/0}),F=k(b[B],b[P(B+1)],w);return m.push(F),m.push([0,0]),m.push(m[0].slice()),m}function i(_,s,w,b){return T.isFullCircle([s,w])?f(_,b):o(_,s,w,b)}function p(_,s,w,b){for(var h=1/0,m=1/0,u=i(_,s,w,b),L=0;L<u.length;L++){var S=u[L];h=Math.min(h,S[0]),m=Math.min(m,-S[1])}return[h,m]}function d(_,s){var w=function(m){var u=e(m,_);return u>0?u:1/0},b=M(s,w),h=T.mod(b+1,s.length);return[s[b],s[h]]}function y(_){return Math.abs(_)>1e-10?_:0}function v(_,s,w){s=s||0,w=w||0;for(var b=_.length,h=new Array(b),m=0;m<b;m++){var u=_[m];h[m]=[s+u[0],w-u[1]]}return h}function x(_,s,w,b,h,m){var u=i(_,s,w,b);return"M"+v(u,h,m).join("L")}function l(_,s,w,b,h,m,u){var L,S;_<s?(L=_,S=s):(L=s,S=_);var k=v(i(L,w,b,h),m,u),P=v(i(S,w,b,h),m,u);return"M"+P.reverse().join("L")+"M"+k.join("L")}ne.exports={isPtInsidePolygon:n,findPolygonOffset:p,findEnclosingVertexAngles:d,findIntersectionXY:t,findXYatLength:r,clampTiny:y,pathPolygon:x,pathPolygonAnnulus:l}},{"../../lib":503,"../../lib/polygon":515}],622:[function(g,ne,ae){var T=g("../get_data").getSubplotCalcData,c=g("../../lib").counterRegex,M=g("./polar"),A=g("./constants"),e=A.attr,a=A.name,n=c(a),t={};t[e]={valType:"subplotid",dflt:a,editType:"calc"};function r(o){for(var i=o._fullLayout,p=o.calcdata,d=i._subplots[a],y=0;y<d.length;y++){var v=d[y],x=T(p,a,v),l=i[v]._subplot;l||(l=M(o,v),i[v]._subplot=l),l.plot(x,i,o._promises)}}function f(o,i,p,d){for(var y=d._subplots[a]||[],v=d._has&&d._has("gl"),x=i._has&&i._has("gl"),l=v&&!x,_=0;_<y.length;_++){var s=y[_],w=d[s]._subplot;if(!i[s]&&!!w){w.framework.remove(),w.layers["radial-axis-title"].remove();for(var b in w.clipPaths)w.clipPaths[b].remove()}l&&w._scene&&(w._scene.destroy(),w._scene=null)}}ne.exports={attr:e,name:a,idRoot:a,idRegex:n,attrRegex:n,attributes:t,layoutAttributes:g("./layout_attributes"),supplyLayoutDefaults:g("./layout_defaults"),plot:r,clean:f,toSVG:g("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(g,ne,ae){var T=g("../../components/color/attributes"),c=g("../cartesian/layout_attributes"),M=g("../domain").attributes,A=g("../../lib").extendFlat,e=g("../../plot_api/edit_types").overrideAll,a=e({color:c.color,showline:A({},c.showline,{dflt:!0}),linecolor:c.linecolor,linewidth:c.linewidth,showgrid:A({},c.showgrid,{dflt:!0}),gridcolor:c.gridcolor,gridwidth:c.gridwidth,griddash:c.griddash},"plot","from-root"),n=e({tickmode:c.tickmode,nticks:c.nticks,tick0:c.tick0,dtick:c.dtick,tickvals:c.tickvals,ticktext:c.ticktext,ticks:c.ticks,ticklen:c.ticklen,tickwidth:c.tickwidth,tickcolor:c.tickcolor,ticklabelstep:c.ticklabelstep,showticklabels:c.showticklabels,showtickprefix:c.showtickprefix,tickprefix:c.tickprefix,showticksuffix:c.showticksuffix,ticksuffix:c.ticksuffix,showexponent:c.showexponent,exponentformat:c.exponentformat,minexponent:c.minexponent,separatethousands:c.separatethousands,tickfont:c.tickfont,tickangle:c.tickangle,tickformat:c.tickformat,tickformatstops:c.tickformatstops,layer:c.layer},"plot","from-root"),t={visible:A({},c.visible,{dflt:!0}),type:A({},c.type,{values:["-","linear","log","date","category"]}),autotypenumbers:c.autotypenumbers,autorange:A({},c.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:A({},c.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:c.categoryorder,categoryarray:c.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:A({},c.title.text,{editType:"plot",dflt:""}),font:A({},c.title.font,{editType:"plot"}),editType:"plot"},hoverformat:c.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:c._deprecated.title,titlefont:c._deprecated.titlefont}};A(t,a,n);var r={visible:A({},c.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:c.autotypenumbers,categoryorder:c.categoryorder,categoryarray:c.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:c.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};A(r,a,n),ne.exports={domain:M({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:T.background},radialaxis:t,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/color"),M=g("../../plot_api/plot_template"),A=g("../subplot_defaults"),e=g("../get_data").getSubplotData,a=g("../cartesian/tick_value_defaults"),n=g("../cartesian/tick_mark_defaults"),t=g("../cartesian/tick_label_defaults"),r=g("../cartesian/prefix_suffix_defaults"),f=g("../cartesian/category_order_defaults"),o=g("../cartesian/line_grid_defaults"),i=g("../cartesian/axis_autotype"),p=g("./layout_attributes"),d=g("./set_convert"),y=g("./constants"),v=y.axisNames;function x(_,s,w,b){var h=w("bgcolor");b.bgColor=c.combine(h,b.paper_bgcolor);var m=w("sector");w("hole");var u=e(b.fullData,y.name,b.id),L=b.layoutOut,S;function k(se,oe){return w(S+"."+se,oe)}for(var P=0;P<v.length;P++){S=v[P],T.isPlainObject(_[S])||(_[S]={});var z=_[S],I=M.newContainer(s,S);I._id=I._name=S,I._attr=b.id+"."+S,I._traceIndices=u.map(function(se){return se._expandedIndex});var D=y.axisName2dataArray[S],R=l(z,I,k,u,D,b);f(z,I,k,{axData:u,dataAttr:D});var B=k("visible");switch(d(I,s,L),k("uirevision",s.uirevision),I._m=1,S){case"radialaxis":var F=k("autorange",!I.isValidRange(z.range));z.autorange=F,F&&(R==="linear"||R==="-")&&k("rangemode"),F==="reversed"&&(I._m=-1),k("range"),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(R==="date"){T.log("Polar plots do not support date angular axes yet.");for(var V=0;V<u.length;V++)u[V].visible=!1;R=z.type=I.type="linear"}k(R==="linear"?"thetaunit":"period");var Y=k("direction");k("rotation",{counterclockwise:0,clockwise:90}[Y]);break}if(r(z,I,k,I.type,{tickSuffixDflt:I.thetaunit==="degrees"?"\xB0":void 0}),B){var K,J,G,Z,re=b.font||{};K=k("color"),J=K===z.color?K:re.color,G=re.size,Z=re.family,a(z,I,k,I.type),t(z,I,k,I.type,{font:{color:J,size:G,family:Z}}),n(z,I,k,{outerTicks:!0}),o(z,I,k,{dfltColor:K,bgColor:b.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:p[S]}),k("layer"),S==="radialaxis"&&(k("side"),k("angle",m[0]),k("title.text"),T.coerceFont(k,"title.font",{color:J,size:T.bigFont(G),family:Z}))}R!=="category"&&k("hoverformat"),I._input=z}s.angularaxis.type==="category"&&w("gridshape")}function l(_,s,w,b,h,m){var u=w("autotypenumbers",m.autotypenumbersDflt),L=w("type");if(L==="-"){for(var S,k=0;k<b.length;k++)if(b[k].visible){S=b[k];break}S&&S[h]&&(s.type=i(S[h],"gregorian",{noMultiCategory:!0,autotypenumbers:u})),s.type==="-"?s.type="linear":_.type=s.type}return s.type}ne.exports=function(s,w,b){A(s,w,b,{type:y.name,attributes:p,handleDefaults:x,font:w.font,autotypenumbersDflt:w.autotypenumbers,paper_bgcolor:w.paper_bgcolor,fullData:b,layoutOut:w})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("tinycolor2"),M=g("../../registry"),A=g("../../lib"),e=A.strRotate,a=A.strTranslate,n=g("../../components/color"),t=g("../../components/drawing"),r=g("../plots"),f=g("../../plots/cartesian/axes"),o=g("../cartesian/set_convert"),i=g("./set_convert"),p=g("../cartesian/autorange").doAutoRange,d=g("../cartesian/dragbox"),y=g("../../components/dragelement"),v=g("../../components/fx"),x=g("../../components/titles"),l=g("../cartesian/select").prepSelect,_=g("../cartesian/select").selectOnClick,s=g("../cartesian/select").clearSelect,w=g("../../lib/setcursor"),b=g("../../lib/clear_gl_canvases"),h=g("../../plot_api/subroutines").redrawReglTraces,m=g("../../constants/alignment").MID_SHIFT,u=g("./constants"),L=g("./helpers"),S=g("../smith/helpers"),k=S.smith,P=S.reactanceArc,z=S.resistanceArc,I=S.smithTransform,D=A._,R=A.mod,B=A.deg2rad,F=A.rad2deg;function V(re,se,oe){this.isSmith=oe||!1,this.id=se,this.gd=re,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var N=re._fullLayout,U="clip"+N._uid+se;this.clipIds.forTraces=U+"-for-traces",this.clipPaths.forTraces=N._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=N["_"+(oe?"smith":"polar")+"layer"].append("g").attr("class",se),this.getHole=function(q){return this.isSmith?0:q.hole},this.getSector=function(q){return this.isSmith?[0,360]:q.sector},this.getRadial=function(q){return this.isSmith?q.realaxis:q.radialaxis},this.getAngular=function(q){return this.isSmith?q.imaginaryaxis:q.angularaxis},oe||(this.radialTickLayout=null,this.angularTickLayout=null)}var Y=V.prototype;ne.exports=function(se,oe,N){return new V(se,oe,N)},Y.plot=function(re,se){for(var oe=this,N=se[oe.id],U=!1,q=0;q<re.length;q++){var Q=re[q][0].trace;if(Q.cliponaxis===!1){U=!0;break}}oe._hasClipOnAxisFalse=U,oe.updateLayers(se,N),oe.updateLayout(se,N),r.generalUpdatePerTraceModule(oe.gd,oe,re,N),oe.updateFx(se,N),oe.isSmith&&(delete N.realaxis.range,delete N.imaginaryaxis.range)},Y.updateLayers=function(re,se){var oe=this,N=oe.isSmith,U=oe.layers,q=oe.getRadial(se),Q=oe.getAngular(se),W=u.layerNames,X=W.indexOf("frontplot"),te=W.slice(0,X),ee=Q.layer==="below traces",ie=q.layer==="below traces";ee&&te.push("angular-line"),ie&&te.push("radial-line"),ee&&te.push("angular-axis"),ie&&te.push("radial-axis"),te.push("frontplot"),ee||te.push("angular-line"),ie||te.push("radial-line"),ee||te.push("angular-axis"),ie||te.push("radial-axis");var le=(N?"smith":"polar")+"sublayer",ye=oe.framework.selectAll("."+le).data(te,String);ye.enter().append("g").attr("class",function(ue){return le+" "+ue}).each(function(ue){var pe=U[ue]=T.select(this);switch(ue){case"frontplot":N||pe.append("g").classed("barlayer",!0),pe.append("g").classed("scatterlayer",!0);break;case"backplot":pe.append("g").classed("maplayer",!0);break;case"plotbg":U.bg=pe.append("path");break;case"radial-grid":pe.style("fill","none");break;case"angular-grid":pe.style("fill","none");break;case"radial-line":pe.append("line").style("fill","none");break;case"angular-line":pe.append("path").style("fill","none");break}}),ye.order()},Y.updateLayout=function(re,se){var oe=this,N=oe.layers,U=re._size,q=oe.getRadial(se),Q=oe.getAngular(se),W=se.domain.x,X=se.domain.y;oe.xOffset=U.l+U.w*W[0],oe.yOffset=U.t+U.h*(1-X[1]);var te=oe.xLength=U.w*(W[1]-W[0]),ee=oe.yLength=U.h*(X[1]-X[0]),ie=oe.getSector(se);oe.sectorInRad=ie.map(B);var le=oe.sectorBBox=J(ie),ye=le[2]-le[0],ue=le[3]-le[1],pe=ee/te,ge=Math.abs(ue/ye),Te,_e,De,Oe,Ue;pe>ge?(Te=te,_e=te*ge,Ue=(ee-_e)/U.h/2,De=[W[0],W[1]],Oe=[X[0]+Ue,X[1]-Ue]):(Te=ee/ge,_e=ee,Ue=(te-Te)/U.w/2,De=[W[0]+Ue,W[1]-Ue],Oe=[X[0],X[1]]),oe.xLength2=Te,oe.yLength2=_e,oe.xDomain2=De,oe.yDomain2=Oe;var xe=oe.xOffset2=U.l+U.w*De[0],Pe=oe.yOffset2=U.t+U.h*(1-Oe[1]),Ve=oe.radius=Te/ye,Qe=oe.innerRadius=oe.getHole(se)*Ve,Fe=oe.cx=xe-Ve*le[0],Le=oe.cy=Pe+Ve*le[3],Ne=oe.cxx=Fe-xe,dt=oe.cyy=Le-Pe,Dt=q.side,Xt;Dt==="counterclockwise"?(Xt=Dt,Dt="top"):Dt==="clockwise"&&(Xt=Dt,Dt="bottom"),oe.radialAxis=oe.mockAxis(re,se,q,{_id:"x",side:Dt,_trueSide:Xt,domain:[Qe/U.w,Ve/U.w]}),oe.angularAxis=oe.mockAxis(re,se,Q,{side:"right",domain:[0,Math.PI],autorange:!1}),oe.doAutoRange(re,se),oe.updateAngularAxis(re,se),oe.updateRadialAxis(re,se),oe.updateRadialAxisTitle(re,se),oe.xaxis=oe.mockCartesianAxis(re,se,{_id:"x",domain:De}),oe.yaxis=oe.mockCartesianAxis(re,se,{_id:"y",domain:Oe});var Tt=oe.pathSubplot();oe.clipPaths.forTraces.select("path").attr("d",Tt).attr("transform",a(Ne,dt)),N.frontplot.attr("transform",a(xe,Pe)).call(t.setClipUrl,oe._hasClipOnAxisFalse?null:oe.clipIds.forTraces,oe.gd),N.bg.attr("d",Tt).attr("transform",a(Fe,Le)).call(n.fill,se.bgcolor)},Y.mockAxis=function(re,se,oe,N){var U=A.extendFlat({},oe,N);return i(U,se,re),U},Y.mockCartesianAxis=function(re,se,oe){var N=this,U=N.isSmith,q=oe._id,Q=A.extendFlat({type:"linear"},oe);o(Q,re);var W={x:[0,2],y:[1,3]};return Q.setRange=function(){var X=N.sectorBBox,te=W[q],ee=N.radialAxis._rl,ie=(ee[1]-ee[0])/(1-N.getHole(se));Q.range=[X[te[0]]*ie,X[te[1]]*ie]},Q.isPtWithinRange=q==="x"&&!U?function(X){return N.isPtInside(X)}:function(){return!0},Q.setRange(),Q.setScale(),Q},Y.doAutoRange=function(re,se){var oe=this,N=oe.gd,U=oe.radialAxis,q=oe.getRadial(se);p(N,U);var Q=U.range;q.range=Q.slice(),q._input.range=Q.slice(),U._rl=[U.r2l(Q[0],null,"gregorian"),U.r2l(Q[1],null,"gregorian")]},Y.updateRadialAxis=function(re,se){var oe=this,N=oe.gd,U=oe.layers,q=oe.radius,Q=oe.innerRadius,W=oe.cx,X=oe.cy,te=oe.getRadial(se),ee=R(oe.getSector(se)[0],360),ie=oe.radialAxis,le=Q<q,ye=oe.isSmith;ye||(oe.fillViewInitialKey("radialaxis.angle",te.angle),oe.fillViewInitialKey("radialaxis.range",ie.range.slice()),ie.setGeometry()),ie.tickangle==="auto"&&ee>90&&ee<=270&&(ie.tickangle=180);var ue=ye?function(Ve){var Qe=I(oe,k([Ve.x,0]));return a(Qe[0]-W,Qe[1]-X)}:function(Ve){return a(ie.l2p(Ve.x)+Q,0)},pe=ye?function(Ve){return z(oe,Ve.x,-1/0,1/0)}:function(Ve){return oe.pathArc(ie.r2p(Ve.x)+Q)},ge=K(te);if(oe.radialTickLayout!==ge&&(U["radial-axis"].selectAll(".xtick").remove(),oe.radialTickLayout=ge),le){ie.setScale();var Te=0,_e=ye?(ie.tickvals||[]).filter(function(Ve){return Ve>=0}).map(function(Ve){return f.tickText(ie,Ve,!0,!1)}):f.calcTicks(ie),De=ye?_e:f.clipEnds(ie,_e),Oe=f.getTickSigns(ie)[2];ye&&((ie.ticks==="top"&&ie.side==="bottom"||ie.ticks==="bottom"&&ie.side==="top")&&(Oe=-Oe),ie.ticks==="top"&&ie.side==="top"&&(Te=-ie.ticklen),ie.ticks==="bottom"&&ie.side==="bottom"&&(Te=ie.ticklen)),f.drawTicks(N,ie,{vals:_e,layer:U["radial-axis"],path:f.makeTickPath(ie,0,Oe),transFn:ue,crisp:!1}),f.drawGrid(N,ie,{vals:De,layer:U["radial-grid"],path:pe,transFn:A.noop,crisp:!1}),f.drawLabels(N,ie,{vals:_e,layer:U["radial-axis"],transFn:ue,labelFns:f.makeLabelFns(ie,Te)})}var Ue=oe.radialAxisAngle=oe.vangles?F(G(B(te.angle),oe.vangles)):te.angle,xe=a(W,X),Pe=xe+e(-Ue);Z(U["radial-axis"],le&&(te.showticklabels||te.ticks),{transform:Pe}),Z(U["radial-grid"],le&&te.showgrid,{transform:ye?"":xe}),Z(U["radial-line"].select("line"),le&&te.showline,{x1:ye?-q:Q,y1:0,x2:q,y2:0,transform:Pe}).attr("stroke-width",te.linewidth).call(n.stroke,te.linecolor)},Y.updateRadialAxisTitle=function(re,se,oe){if(!this.isSmith){var N=this,U=N.gd,q=N.radius,Q=N.cx,W=N.cy,X=N.getRadial(se),te=N.id+"title",ee=0;if(X.title){var ie=t.bBox(N.layers["radial-axis"].node()).height,le=X.title.font.size,ye=X.side;ee=ye==="top"?le:ye==="counterclockwise"?-(ie+le*.4):ie+le*.8}var ue=oe!==void 0?oe:N.radialAxisAngle,pe=B(ue),ge=Math.cos(pe),Te=Math.sin(pe),_e=Q+q/2*ge+ee*Te,De=W-q/2*Te+ee*ge;N.layers["radial-axis-title"]=x.draw(U,te,{propContainer:X,propName:N.id+".radialaxis.title",placeholder:D(U,"Click to enter radial axis title"),attributes:{x:_e,y:De,"text-anchor":"middle"},transform:{rotate:-ue}})}},Y.updateAngularAxis=function(re,se){var oe=this,N=oe.gd,U=oe.layers,q=oe.radius,Q=oe.innerRadius,W=oe.cx,X=oe.cy,te=oe.getAngular(se),ee=oe.angularAxis,ie=oe.isSmith;ie||(oe.fillViewInitialKey("angularaxis.rotation",te.rotation),ee.setGeometry(),ee.setScale());var le=ie?function(Qe){var Fe=I(oe,k([0,Qe.x]));return Math.atan2(Fe[0]-W,Fe[1]-X)-Math.PI/2}:function(Qe){return ee.t2g(Qe.x)};ee.type==="linear"&&ee.thetaunit==="radians"&&(ee.tick0=F(ee.tick0),ee.dtick=F(ee.dtick));var ye=function(Qe){return a(W+q*Math.cos(Qe),X-q*Math.sin(Qe))},ue=ie?function(Qe){var Fe=I(oe,k([0,Qe.x]));return a(Fe[0],Fe[1])}:function(Qe){return ye(le(Qe))},pe=ie?function(Qe){var Fe=I(oe,k([0,Qe.x])),Le=Math.atan2(Fe[0]-W,Fe[1]-X)-Math.PI/2;return a(Fe[0],Fe[1])+e(-F(Le))}:function(Qe){var Fe=le(Qe);return ye(Fe)+e(-F(Fe))},ge=ie?function(Qe){return P(oe,Qe.x,0,1/0)}:function(Qe){var Fe=le(Qe),Le=Math.cos(Fe),Ne=Math.sin(Fe);return"M"+[W+Q*Le,X-Q*Ne]+"L"+[W+q*Le,X-q*Ne]},Te=f.makeLabelFns(ee,0),_e=Te.labelStandoff,De={};De.xFn=function(Qe){var Fe=le(Qe);return Math.cos(Fe)*_e},De.yFn=function(Qe){var Fe=le(Qe),Le=Math.sin(Fe)>0?.2:1;return-Math.sin(Fe)*(_e+Qe.fontSize*Le)+Math.abs(Math.cos(Fe))*(Qe.fontSize*m)},De.anchorFn=function(Qe){var Fe=le(Qe),Le=Math.cos(Fe);return Math.abs(Le)<.1?"middle":Le>0?"start":"end"},De.heightFn=function(Qe,Fe,Le){var Ne=le(Qe);return-.5*(1+Math.sin(Ne))*Le};var Oe=K(te);oe.angularTickLayout!==Oe&&(U["angular-axis"].selectAll("."+ee._id+"tick").remove(),oe.angularTickLayout=Oe);var Ue=ie?[1/0].concat(ee.tickvals||[]).map(function(Qe){return f.tickText(ee,Qe,!0,!1)}):f.calcTicks(ee);ie&&(Ue[0].text="\u221E",Ue[0].fontSize*=1.75);var xe;if(se.gridshape==="linear"?(xe=Ue.map(le),A.angleDelta(xe[0],xe[1])<0&&(xe=xe.slice().reverse())):xe=null,oe.vangles=xe,ee.type==="category"&&(Ue=Ue.filter(function(Qe){return A.isAngleInsideSector(le(Qe),oe.sectorInRad)})),ee.visible){var Pe=ee.ticks==="inside"?-1:1,Ve=(ee.linewidth||1)/2;f.drawTicks(N,ee,{vals:Ue,layer:U["angular-axis"],path:"M"+Pe*Ve+",0h"+Pe*ee.ticklen,transFn:pe,crisp:!1}),f.drawGrid(N,ee,{vals:Ue,layer:U["angular-grid"],path:ge,transFn:A.noop,crisp:!1}),f.drawLabels(N,ee,{vals:Ue,layer:U["angular-axis"],repositionOnUpdate:!0,transFn:ue,labelFns:De})}Z(U["angular-line"].select("path"),te.showline,{d:oe.pathSubplot(),transform:a(W,X)}).attr("stroke-width",te.linewidth).call(n.stroke,te.linecolor)},Y.updateFx=function(re,se){if(!this.gd._context.staticPlot){var oe=!this.isSmith;oe&&(this.updateAngularDrag(re),this.updateRadialDrag(re,se,0),this.updateRadialDrag(re,se,1)),this.updateHoverAndMainDrag(re)}},Y.updateHoverAndMainDrag=function(re){var se=this,oe=se.isSmith,N=se.gd,U=se.layers,q=re._zoomlayer,Q=u.MINZOOM,W=u.OFFEDGE,X=se.radius,te=se.innerRadius,ee=se.cx,ie=se.cy,le=se.cxx,ye=se.cyy,ue=se.sectorInRad,pe=se.vangles,ge=se.radialAxis,Te=L.clampTiny,_e=L.findXYatLength,De=L.findEnclosingVertexAngles,Oe=u.cornerHalfWidth,Ue=u.cornerLen/2,xe,Pe,Ve=d.makeDragger(U,"path","maindrag",re.dragmode===!1?"none":"crosshair");T.select(Ve).attr("d",se.pathSubplot()).attr("transform",a(ee,ie)),Ve.onmousemove=function(rr){v.hover(N,rr,se.id),N._fullLayout._lasthover=Ve,N._fullLayout._hoversubplot=se.id},Ve.onmouseout=function(rr){N._dragging||y.unhover(N,rr)};var Qe={element:Ve,gd:N,subplot:se.id,plotinfo:{id:se.id,xaxis:se.xaxis,yaxis:se.yaxis},xaxes:[se.xaxis],yaxes:[se.yaxis]},Fe,Le,Ne,dt,Dt,Xt,Tt,zt,Ut;function Et(rr,er){return Math.sqrt(rr*rr+er*er)}function Mt(rr,er){return Et(rr-le,er-ye)}function rt(rr,er){return Math.atan2(ye-er,rr-le)}function ct(rr,er){return[rr*Math.cos(er),rr*Math.sin(-er)]}function Ze(rr,er){if(rr===0)return se.pathSector(2*Oe);var pr=Ue/rr,Xr=er-pr,hn=er+pr,$r=Math.max(0,Math.min(rr,X)),nt=$r-Oe,Gt=$r+Oe;return"M"+ct(nt,Xr)+"A"+[nt,nt]+" 0,0,0 "+ct(nt,hn)+"L"+ct(Gt,hn)+"A"+[Gt,Gt]+" 0,0,1 "+ct(Gt,Xr)+"Z"}function ke(rr,er,pr){if(rr===0)return se.pathSector(2*Oe);var Xr=ct(rr,er),hn=ct(rr,pr),$r=Te((Xr[0]+hn[0])/2),nt=Te((Xr[1]+hn[1])/2),Gt,Kt;if($r&&nt){var Ht=nt/$r,_r=-1/Ht,tt=_e(Oe,Ht,$r,nt);Gt=_e(Ue,_r,tt[0][0],tt[0][1]),Kt=_e(Ue,_r,tt[1][0],tt[1][1])}else{var je,st;nt?(je=Ue,st=Oe):(je=Oe,st=Ue),Gt=[[$r-je,nt-st],[$r+je,nt-st]],Kt=[[$r-je,nt+st],[$r+je,nt+st]]}return"M"+Gt.join("L")+"L"+Kt.reverse().join("L")+"Z"}function Ge(){Ne=null,dt=null,Dt=se.pathSubplot(),Xt=!1;var rr=N._fullLayout[se.id];Tt=c(rr.bgcolor).getLuminance(),zt=d.makeZoombox(q,Tt,ee,ie,Dt),zt.attr("fill-rule","evenodd"),Ut=d.makeCorners(q,ee,ie),s(N)}function Je(rr,er){return er=Math.max(Math.min(er,X),te),rr<W?rr=0:X-rr<W?rr=X:er<W?er=0:X-er<W&&(er=X),Math.abs(er-rr)>Q?(rr<er?(Ne=rr,dt=er):(Ne=er,dt=rr),!0):(Ne=null,dt=null,!1)}function it(rr,er){rr=rr||Dt,er=er||"M0,0Z",zt.attr("d",rr),Ut.attr("d",er),d.transitionZoombox(zt,Ut,Xt,Tt),Xt=!0;var pr={};Bt(pr),N.emit("plotly_relayouting",pr)}function Pt(rr,er){rr=rr*xe,er=er*Pe;var pr=Fe+rr,Xr=Le+er,hn=Mt(Fe,Le),$r=Math.min(Mt(pr,Xr),X),nt=rt(Fe,Le),Gt,Kt;Je(hn,$r)&&(Gt=Dt+se.pathSector(dt),Ne&&(Gt+=se.pathSector(Ne)),Kt=Ze(Ne,nt)+Ze(dt,nt)),it(Gt,Kt)}function At(rr,er,pr,Xr){var hn=L.findIntersectionXY(pr,Xr,pr,[rr-le,ye-er]);return Et(hn[0],hn[1])}function Ot(rr,er){var pr=Fe+rr,Xr=Le+er,hn=rt(Fe,Le),$r=rt(pr,Xr),nt=De(hn,pe),Gt=De($r,pe),Kt=At(Fe,Le,nt[0],nt[1]),Ht=Math.min(At(pr,Xr,Gt[0],Gt[1]),X),_r,tt;Je(Kt,Ht)&&(_r=Dt+se.pathSector(dt),Ne&&(_r+=se.pathSector(Ne)),tt=[ke(Ne,nt[0],nt[1]),ke(dt,nt[0],nt[1])].join(" ")),it(_r,tt)}function Jt(){if(d.removeZoombox(N),!(Ne===null||dt===null)){var rr={};Bt(rr),d.showDoubleClickNotifier(N),M.call("_guiRelayout",N,rr)}}function Bt(rr){var er=ge._rl,pr=(er[1]-er[0])/(1-te/X)/X,Xr=[er[0]+(Ne-te)*pr,er[0]+(dt-te)*pr];rr[se.id+".radialaxis.range"]=Xr}function qt(rr,er){var pr=N._fullLayout.clickmode;if(d.removeZoombox(N),rr===2){var Xr={};for(var hn in se.viewInitial)Xr[se.id+"."+hn]=se.viewInitial[hn];N.emit("plotly_doubleclick",null),M.call("_guiRelayout",N,Xr)}pr.indexOf("select")>-1&&rr===1&&_(er,N,[se.xaxis],[se.yaxis],se.id,Qe),pr.indexOf("event")>-1&&v.click(N,er,se.id)}Qe.prepFn=function(rr,er,pr){var Xr=N._fullLayout.dragmode,hn=Ve.getBoundingClientRect();N._fullLayout._calcInverseTransform(N);var $r=N._fullLayout._invTransform;xe=N._fullLayout._invScaleX,Pe=N._fullLayout._invScaleY;var nt=A.apply3DTransform($r)(er-hn.left,pr-hn.top);if(Fe=nt[0],Le=nt[1],pe){var Gt=L.findPolygonOffset(X,ue[0],ue[1],pe);Fe+=le+Gt[0],Le+=ye+Gt[1]}switch(Xr){case"zoom":Qe.clickFn=qt,oe||(pe?Qe.moveFn=Ot:Qe.moveFn=Pt,Qe.doneFn=Jt,Ge());break;case"select":case"lasso":l(rr,er,pr,Qe,Xr);break}},y.init(Qe)},Y.updateRadialDrag=function(re,se,oe){var N=this,U=N.gd,q=N.layers,Q=N.radius,W=N.innerRadius,X=N.cx,te=N.cy,ee=N.radialAxis,ie=u.radialDragBoxSize,le=ie/2;if(!ee.visible)return;var ye=B(N.radialAxisAngle),ue=ee._rl,pe=ue[0],ge=ue[1],Te=ue[oe],_e=.75*(ue[1]-ue[0])/(1-N.getHole(se))/Q,De,Oe,Ue;oe?(De=X+(Q+le)*Math.cos(ye),Oe=te-(Q+le)*Math.sin(ye),Ue="radialdrag"):(De=X+(W-le)*Math.cos(ye),Oe=te-(W-le)*Math.sin(ye),Ue="radialdrag-inner");var xe=d.makeRectDragger(q,Ue,"crosshair",-le,-le,ie,ie),Pe={element:xe,gd:U};re.dragmode===!1&&(Pe.dragmode=!1),Z(T.select(xe),ee.visible&&W<Q,{transform:a(De,Oe)});var Ve,Qe,Fe;function Le(Tt,zt){if(Ve)Ve(Tt,zt);else{var Ut=[Tt,-zt],Et=[Math.cos(ye),Math.sin(ye)],Mt=Math.abs(A.dot(Ut,Et)/Math.sqrt(A.dot(Ut,Ut)));isNaN(Mt)||(Ve=Mt<.5?Dt:Xt)}var rt={};Ne(rt),U.emit("plotly_relayouting",rt)}function Ne(Tt){Qe!==null?Tt[N.id+".radialaxis.angle"]=Qe:Fe!==null&&(Tt[N.id+".radialaxis.range["+oe+"]"]=Fe)}function dt(){Qe!==null?M.call("_guiRelayout",U,N.id+".radialaxis.angle",Qe):Fe!==null&&M.call("_guiRelayout",U,N.id+".radialaxis.range["+oe+"]",Fe)}function Dt(Tt,zt){if(oe!==0){var Ut=De+Tt,Et=Oe+zt;Qe=Math.atan2(te-Et,Ut-X),N.vangles&&(Qe=G(Qe,N.vangles)),Qe=F(Qe);var Mt=a(X,te)+e(-Qe);q["radial-axis"].attr("transform",Mt),q["radial-line"].select("line").attr("transform",Mt);var rt=N.gd._fullLayout,ct=rt[N.id];N.updateRadialAxisTitle(rt,ct,Qe)}}function Xt(Tt,zt){var Ut=A.dot([Tt,-zt],[Math.cos(ye),Math.sin(ye)]);if(Fe=Te-_e*Ut,_e>0!=(oe?Fe>pe:Fe<ge)){Fe=null;return}var Et=U._fullLayout,Mt=Et[N.id];ee.range[oe]=Fe,ee._rl[oe]=Fe,N.updateRadialAxis(Et,Mt),N.xaxis.setRange(),N.xaxis.setScale(),N.yaxis.setRange(),N.yaxis.setScale();var rt=!1;for(var ct in N.traceHash){var Ze=N.traceHash[ct],ke=A.filterVisible(Ze),Ge=Ze[0][0].trace._module;Ge.plot(U,N,ke,Mt),M.traceIs(ct,"gl")&&ke.length&&(rt=!0)}rt&&(b(U),h(U))}Pe.prepFn=function(){Ve=null,Qe=null,Fe=null,Pe.moveFn=Le,Pe.doneFn=dt,s(U)},Pe.clampFn=function(Tt,zt){return Math.sqrt(Tt*Tt+zt*zt)<u.MINDRAG&&(Tt=0,zt=0),[Tt,zt]},y.init(Pe)},Y.updateAngularDrag=function(re){var se=this,oe=se.gd,N=se.layers,U=se.radius,q=se.angularAxis,Q=se.cx,W=se.cy,X=se.cxx,te=se.cyy,ee=u.angularDragBoxSize,ie=d.makeDragger(N,"path","angulardrag",re.dragmode===!1?"none":"move"),le={element:ie,gd:oe};re.dragmode===!1?le.dragmode=!1:T.select(ie).attr("d",se.pathAnnulus(U,U+ee)).attr("transform",a(Q,W)).call(w,"move");function ye(Fe,Le){return Math.atan2(te+ee-Le,Fe-X-ee)}var ue=N.frontplot.select(".scatterlayer").selectAll(".trace"),pe=ue.selectAll(".point"),ge=ue.selectAll(".textpoint"),Te,_e,De,Oe,Ue,xe;function Pe(Fe,Le){var Ne=se.gd._fullLayout,dt=Ne[se.id],Dt=Te+Fe*re._invScaleX,Xt=_e+Le*re._invScaleY,Tt=ye(Dt,Xt),zt=F(Tt-xe);if(Oe=De+zt,N.frontplot.attr("transform",a(se.xOffset2,se.yOffset2)+e([-zt,X,te])),se.vangles){Ue=se.radialAxisAngle+zt;var Ut=a(Q,W)+e(-zt),Et=a(Q,W)+e(-Ue);N.bg.attr("transform",Ut),N["radial-grid"].attr("transform",Ut),N["radial-axis"].attr("transform",Et),N["radial-line"].select("line").attr("transform",Et),se.updateRadialAxisTitle(Ne,dt,Ue)}else se.clipPaths.forTraces.select("path").attr("transform",a(X,te)+e(zt));pe.each(function(){var Je=T.select(this),it=t.getTranslate(Je);Je.attr("transform",a(it.x,it.y)+e([zt]))}),ge.each(function(){var Je=T.select(this),it=Je.select("text"),Pt=t.getTranslate(Je);Je.attr("transform",e([zt,it.attr("x"),it.attr("y")])+a(Pt.x,Pt.y))}),q.rotation=A.modHalf(Oe,360),se.updateAngularAxis(Ne,dt),se._hasClipOnAxisFalse&&!A.isFullCircle(se.sectorInRad)&&ue.call(t.hideOutsideRangePoints,se);var Mt=!1;for(var rt in se.traceHash)if(M.traceIs(rt,"gl")){var ct=se.traceHash[rt],Ze=A.filterVisible(ct),ke=ct[0][0].trace._module;ke.plot(oe,se,Ze,dt),Ze.length&&(Mt=!0)}Mt&&(b(oe),h(oe));var Ge={};Ve(Ge),oe.emit("plotly_relayouting",Ge)}function Ve(Fe){Fe[se.id+".angularaxis.rotation"]=Oe,se.vangles&&(Fe[se.id+".radialaxis.angle"]=Ue)}function Qe(){ge.select("text").attr("transform",null);var Fe={};Ve(Fe),M.call("_guiRelayout",oe,Fe)}le.prepFn=function(Fe,Le,Ne){var dt=re[se.id];De=dt.angularaxis.rotation;var Dt=ie.getBoundingClientRect();Te=Le-Dt.left,_e=Ne-Dt.top,oe._fullLayout._calcInverseTransform(oe);var Xt=A.apply3DTransform(re._invTransform)(Te,_e);Te=Xt[0],_e=Xt[1],xe=ye(Te,_e),le.moveFn=Pe,le.doneFn=Qe,s(oe)},se.vangles&&!A.isFullCircle(se.sectorInRad)&&(le.prepFn=A.noop,w(T.select(ie),null)),y.init(le)},Y.isPtInside=function(re){if(this.isSmith)return!0;var se=this.sectorInRad,oe=this.vangles,N=this.angularAxis.c2g(re.theta),U=this.radialAxis,q=U.c2l(re.r),Q=U._rl,W=oe?L.isPtInsidePolygon:A.isPtInsideSector;return W(q,N,Q,se,oe)},Y.pathArc=function(re){var se=this.sectorInRad,oe=this.vangles,N=oe?L.pathPolygon:A.pathArc;return N(re,se[0],se[1],oe)},Y.pathSector=function(re){var se=this.sectorInRad,oe=this.vangles,N=oe?L.pathPolygon:A.pathSector;return N(re,se[0],se[1],oe)},Y.pathAnnulus=function(re,se){var oe=this.sectorInRad,N=this.vangles,U=N?L.pathPolygonAnnulus:A.pathAnnulus;return U(re,se,oe[0],oe[1],N)},Y.pathSubplot=function(){var re=this.innerRadius,se=this.radius;return re?this.pathAnnulus(re,se):this.pathSector(se)},Y.fillViewInitialKey=function(re,se){re in this.viewInitial||(this.viewInitial[re]=se)};function K(re){var se=re.ticks+String(re.ticklen)+String(re.showticklabels);return"side"in re&&(se+=re.side),se}function J(re){var se=re[0],oe=re[1],N=oe-se,U=R(se,360),q=U+N,Q=Math.cos(B(U)),W=Math.sin(B(U)),X=Math.cos(B(q)),te=Math.sin(B(q)),ee,ie,le,ye;return U<=90&&q>=90||U>90&&q>=450?ye=1:W<=0&&te<=0?ye=0:ye=Math.max(W,te),U<=180&&q>=180||U>180&&q>=540?ee=-1:Q>=0&&X>=0?ee=0:ee=Math.min(Q,X),U<=270&&q>=270||U>270&&q>=630?ie=-1:W>=0&&te>=0?ie=0:ie=Math.min(W,te),q>=360?le=1:Q<=0&&X<=0?le=0:le=Math.max(Q,X),[ee,ie,le,ye]}function G(re,se){var oe=function(U){return A.angleDist(re,U)},N=A.findIndexOfMin(se,oe);return se[N]}function Z(re,se,oe){return se?(re.attr("display",null),re.attr(oe)):re&&re.attr("display","none"),re}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(g,ne,ae){var T=g("../../lib"),c=g("../cartesian/set_convert"),M=T.deg2rad,A=T.rad2deg;ne.exports=function(f,o,i){switch(c(f,i),f._id){case"x":case"radialaxis":e(f,o);break;case"angularaxis":t(f,o);break}};function e(r,f){var o=f._subplot;r.setGeometry=function(){var i=r._rl[0],p=r._rl[1],d=o.innerRadius,y=(o.radius-d)/(p-i),v=d/y,x=i>p?function(l){return l<=0}:function(l){return l>=0};r.c2g=function(l){var _=r.c2l(l)-i;return(x(_)?_:0)+v},r.g2c=function(l){return r.l2c(l+i-v)},r.g2p=function(l){return l*y},r.c2p=function(l){return r.g2p(r.c2g(l))}}}function a(r,f){return f==="degrees"?M(r):r}function n(r,f){return f==="degrees"?A(r):r}function t(r,f){var o=r.type;if(o==="linear"){var i=r.d2c,p=r.c2d;r.d2c=function(d,y){return a(i(d),y)},r.c2d=function(d,y){return p(n(d,y))}}r.makeCalcdata=function(d,y){var v=d[y],x=d._length,l,_,s=function(u){return r.d2c(u,d.thetaunit)};if(v){if(T.isTypedArray(v)&&o==="linear"){if(x===v.length)return v;if(v.subarray)return v.subarray(0,x)}for(l=new Array(x),_=0;_<x;_++)l[_]=s(v[_])}else{var w=y+"0",b="d"+y,h=w in d?s(d[w]):0,m=d[b]?s(d[b]):(r.period||2*Math.PI)/x;for(l=new Array(x),_=0;_<x;_++)l[_]=h+_*m}return l},r.setGeometry=function(){var d=f.sector,y=d.map(M),v={clockwise:-1,counterclockwise:1}[r.direction],x=M(r.rotation),l=function(L){return v*L+x},_=function(L){return(L-x)/v},s,w,b,h;switch(o){case"linear":w=s=T.identity,h=M,b=A,r.range=T.isFullCircle(y)?[d[0],d[0]+360]:y.map(_).map(A);break;case"category":var m=r._categories.length,u=r.period?Math.max(r.period,m):m;u===0&&(u=1),w=h=function(L){return L*2*Math.PI/u},s=b=function(L){return L*u/Math.PI/2},r.range=[0,u];break}r.c2g=function(L){return l(w(L))},r.g2c=function(L){return s(_(L))},r.t2g=function(L){return l(h(L))},r.g2t=function(L){return b(_(L))}}}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(g,ne,ae){ne.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(g,ne,ae){function T(n){return n<0?-1:n>0?1:0}function c(n){var t=n[0],r=n[1];if(!isFinite(t)||!isFinite(r))return[1,0];var f=(t+1)*(t+1)+r*r;return[(t*t+r*r-1)/f,2*r/f]}function M(n,t){var r=t[0],f=t[1];return[r*n.radius+n.cx,-f*n.radius+n.cy]}function A(n,t){return t*n.radius}function e(n,t,r,f){var o=M(n,c([r,t])),i=o[0],p=o[1],d=M(n,c([f,t])),y=d[0],v=d[1];if(t===0)return["M"+i+","+p,"L"+y+","+v].join(" ");var x=A(n,1/Math.abs(t));return["M"+i+","+p,"A"+x+","+x+" 0 0,"+(t<0?1:0)+" "+y+","+v].join(" ")}function a(n,t,r,f){var o=A(n,1/(t+1)),i=M(n,c([t,r])),p=i[0],d=i[1],y=M(n,c([t,f])),v=y[0],x=y[1];if(T(r)!==T(f)){var l=M(n,c([t,0])),_=l[0],s=l[1];return["M"+p+","+d,"A"+o+","+o+" 0 0,"+(0<r?0:1)+" "+_+","+s,"A"+o+","+o+" 0 0,"+(f<0?0:1)+v+","+x].join(" ")}return["M"+p+","+d,"A"+o+","+o+" 0 0,"+(f<r?0:1)+" "+v+","+x].join(" ")}ne.exports={smith:c,reactanceArc:e,resistanceArc:a,smithTransform:M}},{}],629:[function(g,ne,ae){var T=g("../get_data").getSubplotCalcData,c=g("../../lib").counterRegex,M=g("../polar/polar"),A=g("./constants"),e=A.attr,a=A.name,n=c(a),t={};t[e]={valType:"subplotid",dflt:a,editType:"calc"};function r(o){for(var i=o._fullLayout,p=o.calcdata,d=i._subplots[a],y=0;y<d.length;y++){var v=d[y],x=T(p,a,v),l=i[v]._subplot;l||(l=M(o,v,!0),i[v]._subplot=l),l.plot(x,i,o._promises)}}function f(o,i,p,d){for(var y=d._subplots[a]||[],v=0;v<y.length;v++){var x=y[v],l=d[x]._subplot;if(!i[x]&&!!l){l.framework.remove();for(var _ in l.clipPaths)l.clipPaths[_].remove()}}}ne.exports={attr:e,name:a,idRoot:a,idRegex:n,attrRegex:n,attributes:t,layoutAttributes:g("./layout_attributes"),supplyLayoutDefaults:g("./layout_defaults"),plot:r,clean:f,toSVG:g("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(g,ne,ae){var T=g("../../components/color/attributes"),c=g("../cartesian/layout_attributes"),M=g("../domain").attributes,A=g("../../lib").extendFlat,e=g("../../plot_api/edit_types").overrideAll,a=e({color:c.color,showline:A({},c.showline,{dflt:!0}),linecolor:c.linecolor,linewidth:c.linewidth,showgrid:A({},c.showgrid,{dflt:!0}),gridcolor:c.gridcolor,gridwidth:c.gridwidth,griddash:c.griddash},"plot","from-root"),n=e({ticklen:c.ticklen,tickwidth:A({},c.tickwidth,{dflt:2}),tickcolor:c.tickcolor,showticklabels:c.showticklabels,showtickprefix:c.showtickprefix,tickprefix:c.tickprefix,showticksuffix:c.showticksuffix,ticksuffix:c.ticksuffix,tickfont:c.tickfont,tickformat:c.tickformat,hoverformat:c.hoverformat,layer:c.layer},"plot","from-root"),t=A({visible:A({},c.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:A({},c.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},a,n),r=A({visible:A({},c.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:c.ticks,editType:"calc"},a,n);ne.exports={domain:M({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:T.background},realaxis:t,imaginaryaxis:r,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/color"),M=g("../../plot_api/plot_template"),A=g("../subplot_defaults"),e=g("../get_data").getSubplotData,a=g("../cartesian/prefix_suffix_defaults"),n=g("../cartesian/tick_label_defaults"),t=g("../cartesian/line_grid_defaults"),r=g("../cartesian/set_convert"),f=g("./layout_attributes"),o=g("./constants"),i=o.axisNames,p=y(function(v){return v.slice().reverse().map(function(x){return-x}).concat([0]).concat(v)},String);function d(v,x,l,_){var s=l("bgcolor");_.bgColor=c.combine(s,_.paper_bgcolor);var w=e(_.fullData,o.name,_.id),b=_.layoutOut,h;function m(Y,K){return l(h+"."+Y,K)}for(var u=0;u<i.length;u++){h=i[u],T.isPlainObject(v[h])||(v[h]={});var L=v[h],S=M.newContainer(x,h);S._id=S._name=h,S._attr=_.id+"."+h,S._traceIndices=w.map(function(Y){return Y._expandedIndex});var k=m("visible");if(S.type="linear",r(S,b),a(L,S,m,S.type),k){var P=h==="realaxis";if(P&&m("side"),P)m("tickvals");else{var z=p(x.realaxis.tickvals||f.realaxis.tickvals.dflt);m("tickvals",z)}var I,D,R,B,F=_.font||{};k&&(I=m("color"),D=I===L.color?I:F.color,R=F.size,B=F.family),n(L,S,m,S.type,{noTicklabelstep:!0,noAng:!P,noExp:!0,font:{color:D,size:R,family:B}}),T.coerce2(v,x,f,h+".ticklen"),T.coerce2(v,x,f,h+".tickwidth"),T.coerce2(v,x,f,h+".tickcolor",x.color);var V=m("ticks");V||(delete x[h].ticklen,delete x[h].tickwidth,delete x[h].tickcolor),t(L,S,m,{dfltColor:I,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f[h]}),m("layer")}m("hoverformat"),delete S.type,S._input=L}}ne.exports=function(x,l,_){A(x,l,_,{noUirevision:!0,type:o.name,attributes:f,handleDefaults:d,font:l.font,paper_bgcolor:l.paper_bgcolor,fullData:_,layoutOut:l})};function y(v,x){var l={};return function(_){var s=x?x(_):_;if(s in l)return l[s];var w=v(_);return l[s]=w,w}}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(g,ne,ae){var T=g("../lib"),c=g("../plot_api/plot_template"),M=g("./domain").defaults;ne.exports=function(e,a,n,t){var r=t.type,f=t.attributes,o=t.handleDefaults,i=t.partition||"x",p=a._subplots[r],d=p.length,y=d&&p[0].replace(/\d+$/,""),v,x;function l(b,h){return T.coerce(v,x,f,b,h)}for(var _=0;_<d;_++){var s=p[_];e[s]?v=e[s]:v=e[s]={},x=c.newContainer(a,s,y),t.noUirevision||l("uirevision",a.uirevision);var w={};w[i]=[_/d,(_+1)/d],M(x,a,l,w),t.id=s,o(v,x,l,t)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(g,ne,ae){var T=g("../constants/docs");T.FORMAT_LINK,T.DATE_FORMAT_LINK;function c(M){var A=M.description?" "+M.description:"",e=M.keys||[];if(e.length>0){for(var a=[],n=0;n<e.length;n++)a[n]="`"+e[n]+"`";A=A+"Finally, the template string has access to ",e.length===1?A="variable "+a[0]:A="variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}return A}ae.hovertemplateAttrs=function(M,A){M=M||{},A=A||{},c(A);var e={valType:"string",dflt:"",editType:M.editType||"none"};return M.arrayOk!==!1&&(e.arrayOk=!0),e},ae.texttemplateAttrs=function(M,A){M=M||{},A=A||{},c(A);var e={valType:"string",dflt:"",editType:M.editType||"calc"};return M.arrayOk!==!1&&(e.arrayOk=!0),e}},{"../constants/docs":474}],634:[function(g,ne,ae){var T=g("./ternary"),c=g("../../plots/get_data").getSubplotCalcData,M=g("../../lib").counterRegex,A="ternary";ae.name=A;var e=ae.attr="subplot";ae.idRoot=A,ae.idRegex=ae.attrRegex=M(A);var a=ae.attributes={};a[e]={valType:"subplotid",dflt:"ternary",editType:"calc"},ae.layoutAttributes=g("./layout_attributes"),ae.supplyLayoutDefaults=g("./layout_defaults"),ae.plot=function(t){for(var r=t._fullLayout,f=t.calcdata,o=r._subplots[A],i=0;i<o.length;i++){var p=o[i],d=c(f,A,p),y=r[p]._subplot;y||(y=new T({id:p,graphDiv:t,container:r._ternarylayer.node()},r),r[p]._subplot=y),y.plot(d,r,t._promises)}},ae.clean=function(n,t,r,f){for(var o=f._subplots[A]||[],i=0;i<o.length;i++){var p=o[i],d=f[p]._subplot;!t[p]&&!!d&&(d.plotContainer.remove(),d.clipDef.remove(),d.clipDefRelative.remove(),d.layers["a-title"].remove(),d.layers["b-title"].remove(),d.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(g,ne,ae){var T=g("../../components/color/attributes"),c=g("../domain").attributes,M=g("../cartesian/layout_attributes"),A=g("../../plot_api/edit_types").overrideAll,e=g("../../lib/extend").extendFlat,a={title:{text:M.title.text,font:M.title.font},color:M.color,tickmode:M.tickmode,nticks:e({},M.nticks,{dflt:6,min:1}),tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:M.ticks,ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,showtickprefix:M.showtickprefix,tickprefix:M.tickprefix,showticksuffix:M.showticksuffix,ticksuffix:M.ticksuffix,showexponent:M.showexponent,exponentformat:M.exponentformat,minexponent:M.minexponent,separatethousands:M.separatethousands,tickfont:M.tickfont,tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,hoverformat:M.hoverformat,showline:e({},M.showline,{dflt:!0}),linecolor:M.linecolor,linewidth:M.linewidth,showgrid:e({},M.showgrid,{dflt:!0}),gridcolor:M.gridcolor,gridwidth:M.gridwidth,griddash:M.griddash,layer:M.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:M._deprecated.title,titlefont:M._deprecated.titlefont}},n=ne.exports=A({domain:c({name:"ternary"}),bgcolor:{valType:"color",dflt:T.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");n.uirevision={valType:"any",editType:"none"},n.aaxis.uirevision=n.baxis.uirevision=n.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(g,ne,ae){var T=g("../../components/color"),c=g("../../plot_api/plot_template"),M=g("../../lib"),A=g("../subplot_defaults"),e=g("../cartesian/tick_label_defaults"),a=g("../cartesian/prefix_suffix_defaults"),n=g("../cartesian/tick_mark_defaults"),t=g("../cartesian/tick_value_defaults"),r=g("../cartesian/line_grid_defaults"),f=g("./layout_attributes"),o=["aaxis","baxis","caxis"];ne.exports=function(y,v,x){A(y,v,x,{type:"ternary",attributes:f,handleDefaults:i,font:v.font,paper_bgcolor:v.paper_bgcolor})};function i(d,y,v,x){var l=v("bgcolor"),_=v("sum");x.bgColor=T.combine(l,x.paper_bgcolor);for(var s,w,b,h=0;h<o.length;h++)s=o[h],w=d[s]||{},b=c.newContainer(y,s),b._name=s,p(w,b,x,y);var m=y.aaxis,u=y.baxis,L=y.caxis;m.min+u.min+L.min>=_&&(m.min=0,u.min=0,L.min=0,d.aaxis&&delete d.aaxis.min,d.baxis&&delete d.baxis.min,d.caxis&&delete d.caxis.min)}function p(d,y,v,x){var l=f[y._name];function _(S,k){return M.coerce(d,y,l,S,k)}_("uirevision",x.uirevision),y.type="linear";var s=_("color"),w=s!==l.color.dflt?s:v.font.color,b=y._name,h=b.charAt(0).toUpperCase(),m="Component "+h,u=_("title.text",m);y._hovertitle=u===m?u:h,M.coerceFont(_,"title.font",{family:v.font.family,size:M.bigFont(v.font.size),color:w}),_("min"),t(d,y,_,"linear"),a(d,y,_,"linear"),e(d,y,_,"linear"),n(d,y,_,{outerTicks:!0});var L=_("showticklabels");L&&(M.coerceFont(_,"tickfont",{family:v.font.family,size:v.font.size,color:w}),_("tickangle"),_("tickformat")),r(d,y,_,{dfltColor:s,bgColor:v.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l}),_("hoverformat"),_("layer")}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("tinycolor2"),M=g("../../registry"),A=g("../../lib"),e=A.strTranslate,a=A._,n=g("../../components/color"),t=g("../../components/drawing"),r=g("../cartesian/set_convert"),f=g("../../lib/extend").extendFlat,o=g("../plots"),i=g("../cartesian/axes"),p=g("../../components/dragelement"),d=g("../../components/fx"),y=g("../../components/dragelement/helpers"),v=y.freeMode,x=y.rectMode,l=g("../../components/titles"),_=g("../cartesian/select").prepSelect,s=g("../cartesian/select").selectOnClick,w=g("../cartesian/select").clearSelect,b=g("../cartesian/select").clearSelectionsCache,h=g("../cartesian/constants");function m(F,V){this.id=F.id,this.graphDiv=F.graphDiv,this.init(V),this.makeFramework(V),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}ne.exports=m;var u=m.prototype;u.init=function(F){this.container=F._ternarylayer,this.defs=F._defs,this.layoutId=F._uid,this.traceHash={},this.layers={}},u.plot=function(F,V){var Y=this,K=V[Y.id],J=V._size;Y._hasClipOnAxisFalse=!1;for(var G=0;G<F.length;G++){var Z=F[G][0].trace;if(Z.cliponaxis===!1){Y._hasClipOnAxisFalse=!0;break}}Y.updateLayers(K),Y.adjustLayout(K,J),o.generalUpdatePerTraceModule(Y.graphDiv,Y,F,K),Y.layers.plotbg.select("path").call(n.fill,K.bgcolor)},u.makeFramework=function(F){var V=this,Y=V.graphDiv,K=F[V.id],J=V.clipId="clip"+V.layoutId+V.id,G=V.clipIdRelative="clip-relative"+V.layoutId+V.id;V.clipDef=A.ensureSingleById(F._clips,"clipPath",J,function(Z){Z.append("path").attr("d","M0,0Z")}),V.clipDefRelative=A.ensureSingleById(F._clips,"clipPath",G,function(Z){Z.append("path").attr("d","M0,0Z")}),V.plotContainer=A.ensureSingle(V.container,"g",V.id),V.updateLayers(K),t.setClipUrl(V.layers.backplot,J,Y),t.setClipUrl(V.layers.grids,J,Y)},u.updateLayers=function(F){var V=this,Y=V.layers,K=["draglayer","plotbg","backplot","grids"];F.aaxis.layer==="below traces"&&K.push("aaxis","aline"),F.baxis.layer==="below traces"&&K.push("baxis","bline"),F.caxis.layer==="below traces"&&K.push("caxis","cline"),K.push("frontplot"),F.aaxis.layer==="above traces"&&K.push("aaxis","aline"),F.baxis.layer==="above traces"&&K.push("baxis","bline"),F.caxis.layer==="above traces"&&K.push("caxis","cline");var J=V.plotContainer.selectAll("g.toplevel").data(K,String),G=["agrid","bgrid","cgrid"];J.enter().append("g").attr("class",function(Z){return"toplevel "+Z}).each(function(Z){var re=T.select(this);Y[Z]=re,Z==="frontplot"?re.append("g").classed("scatterlayer",!0):Z==="backplot"?re.append("g").classed("maplayer",!0):Z==="plotbg"?re.append("path").attr("d","M0,0Z"):Z==="aline"||Z==="bline"||Z==="cline"?re.append("path"):Z==="grids"&&G.forEach(function(se){Y[se]=re.append("g").classed("grid "+se,!0)})}),J.order()};var L=Math.sqrt(4/3);u.adjustLayout=function(F,V){var Y=this,K=F.domain,J=(K.x[0]+K.x[1])/2,G=(K.y[0]+K.y[1])/2,Z=K.x[1]-K.x[0],re=K.y[1]-K.y[0],se=Z*V.w,oe=re*V.h,N=F.sum,U=F.aaxis.min,q=F.baxis.min,Q=F.caxis.min,W,X,te,ee,ie,le;se>L*oe?(ee=oe,te=ee*L):(te=se,ee=te/L),ie=Z*te/se,le=re*ee/oe,W=V.l+V.w*J-te/2,X=V.t+V.h*(1-G)-ee/2,Y.x0=W,Y.y0=X,Y.w=te,Y.h=ee,Y.sum=N,Y.xaxis={type:"linear",range:[U+2*Q-N,N-U-2*q],domain:[J-ie/2,J+ie/2],_id:"x"},r(Y.xaxis,Y.graphDiv._fullLayout),Y.xaxis.setScale(),Y.xaxis.isPtWithinRange=function(Pe){return Pe.a>=Y.aaxis.range[0]&&Pe.a<=Y.aaxis.range[1]&&Pe.b>=Y.baxis.range[1]&&Pe.b<=Y.baxis.range[0]&&Pe.c>=Y.caxis.range[1]&&Pe.c<=Y.caxis.range[0]},Y.yaxis={type:"linear",range:[U,N-q-Q],domain:[G-le/2,G+le/2],_id:"y"},r(Y.yaxis,Y.graphDiv._fullLayout),Y.yaxis.setScale(),Y.yaxis.isPtWithinRange=function(){return!0};var ye=Y.yaxis.domain[0],ue=Y.aaxis=f({},F.aaxis,{range:[U,N-q-Q],side:"left",tickangle:(+F.aaxis.tickangle||0)-30,domain:[ye,ye+le*L],anchor:"free",position:0,_id:"y",_length:te});r(ue,Y.graphDiv._fullLayout),ue.setScale();var pe=Y.baxis=f({},F.baxis,{range:[N-U-Q,q],side:"bottom",domain:Y.xaxis.domain,anchor:"free",position:0,_id:"x",_length:te});r(pe,Y.graphDiv._fullLayout),pe.setScale();var ge=Y.caxis=f({},F.caxis,{range:[N-U-q,Q],side:"right",tickangle:(+F.caxis.tickangle||0)+30,domain:[ye,ye+le*L],anchor:"free",position:0,_id:"y",_length:te});r(ge,Y.graphDiv._fullLayout),ge.setScale();var Te="M"+W+","+(X+ee)+"h"+te+"l-"+te/2+",-"+ee+"Z";Y.clipDef.select("path").attr("d",Te),Y.layers.plotbg.select("path").attr("d",Te);var _e="M0,"+ee+"h"+te+"l-"+te/2+",-"+ee+"Z";Y.clipDefRelative.select("path").attr("d",_e);var De=e(W,X);Y.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",De),Y.clipDefRelative.select("path").attr("transform",null);var Oe=e(W-pe._offset,X+ee);Y.layers.baxis.attr("transform",Oe),Y.layers.bgrid.attr("transform",Oe);var Ue=e(W+te/2,X)+"rotate(30)"+e(0,-ue._offset);Y.layers.aaxis.attr("transform",Ue),Y.layers.agrid.attr("transform",Ue);var xe=e(W+te/2,X)+"rotate(-30)"+e(0,-ge._offset);Y.layers.caxis.attr("transform",xe),Y.layers.cgrid.attr("transform",xe),Y.drawAxes(!0),Y.layers.aline.select("path").attr("d",ue.showline?"M"+W+","+(X+ee)+"l"+te/2+",-"+ee:"M0,0").call(n.stroke,ue.linecolor||"#000").style("stroke-width",(ue.linewidth||0)+"px"),Y.layers.bline.select("path").attr("d",pe.showline?"M"+W+","+(X+ee)+"h"+te:"M0,0").call(n.stroke,pe.linecolor||"#000").style("stroke-width",(pe.linewidth||0)+"px"),Y.layers.cline.select("path").attr("d",ge.showline?"M"+(W+te/2)+","+X+"l"+te/2+","+ee:"M0,0").call(n.stroke,ge.linecolor||"#000").style("stroke-width",(ge.linewidth||0)+"px"),Y.graphDiv._context.staticPlot||Y.initInteractions(),t.setClipUrl(Y.layers.frontplot,Y._hasClipOnAxisFalse?null:Y.clipId,Y.graphDiv)},u.drawAxes=function(F){var V=this,Y=V.graphDiv,K=V.id.substr(7)+"title",J=V.layers,G=V.aaxis,Z=V.baxis,re=V.caxis;if(V.drawAx(G),V.drawAx(Z),V.drawAx(re),F){var se=Math.max(G.showticklabels?G.tickfont.size/2:0,(re.showticklabels?re.tickfont.size*.75:0)+(re.ticks==="outside"?re.ticklen*.87:0)),oe=(Z.showticklabels?Z.tickfont.size:0)+(Z.ticks==="outside"?Z.ticklen:0)+3;J["a-title"]=l.draw(Y,"a"+K,{propContainer:G,propName:V.id+".aaxis.title",placeholder:a(Y,"Click to enter Component A title"),attributes:{x:V.x0+V.w/2,y:V.y0-G.title.font.size/3-se,"text-anchor":"middle"}}),J["b-title"]=l.draw(Y,"b"+K,{propContainer:Z,propName:V.id+".baxis.title",placeholder:a(Y,"Click to enter Component B title"),attributes:{x:V.x0-oe,y:V.y0+V.h+Z.title.font.size*.83+oe,"text-anchor":"middle"}}),J["c-title"]=l.draw(Y,"c"+K,{propContainer:re,propName:V.id+".caxis.title",placeholder:a(Y,"Click to enter Component C title"),attributes:{x:V.x0+V.w+oe,y:V.y0+V.h+re.title.font.size*.83+oe,"text-anchor":"middle"}})}},u.drawAx=function(F){var V=this,Y=V.graphDiv,K=F._name,J=K.charAt(0),G=F._id,Z=V.layers[K],re=30,se=J+"tickLayout",oe=S(F);V[se]!==oe&&(Z.selectAll("."+G+"tick").remove(),V[se]=oe),F.setScale();var N=i.calcTicks(F),U=i.clipEnds(F,N),q=i.makeTransTickFn(F),Q=i.getTickSigns(F)[2],W=A.deg2rad(re),X=Q*(F.linewidth||1)/2,te=Q*F.ticklen,ee=V.w,ie=V.h,le=J==="b"?"M0,"+X+"l"+Math.sin(W)*te+","+Math.cos(W)*te:"M"+X+",0l"+Math.cos(W)*te+","+-Math.sin(W)*te,ye={a:"M0,0l"+ie+",-"+ee/2,b:"M0,0l-"+ee/2+",-"+ie,c:"M0,0l-"+ie+","+ee/2}[J];i.drawTicks(Y,F,{vals:F.ticks==="inside"?U:N,layer:Z,path:le,transFn:q,crisp:!1}),i.drawGrid(Y,F,{vals:U,layer:V.layers[J+"grid"],path:ye,transFn:q,crisp:!1}),i.drawLabels(Y,F,{vals:N,layer:Z,transFn:q,labelFns:i.makeLabelFns(F,0,re)})};function S(F){return F.ticks+String(F.ticklen)+String(F.showticklabels)}var k=h.MINZOOM/2+.87,P="m-0.87,.5h"+k+"v3h-"+(k+5.2)+"l"+(k/2+2.6)+",-"+(k*.87+4.5)+"l2.6,1.5l-"+k/2+","+k*.87+"Z",z="m0.87,.5h-"+k+"v3h"+(k+5.2)+"l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-2.6,1.5l"+k/2+","+k*.87+"Z",I="m0,1l"+k/2+","+k*.87+"l2.6,-1.5l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-"+(k/2+2.6)+","+(k*.87+4.5)+"l2.6,1.5l"+k/2+",-"+k*.87+"Z",D="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",R=!0;u.clearSelect=function(){b(this.dragOptions),w(this.dragOptions.gd)},u.initInteractions=function(){var F=this,V=F.layers.plotbg.select("path").node(),Y=F.graphDiv,K=Y._fullLayout._zoomlayer,J,G;this.dragOptions={element:V,gd:Y,plotinfo:{id:F.id,domain:Y._fullLayout[F.id].domain,xaxis:F.xaxis,yaxis:F.yaxis},subplot:F.id,prepFn:function(Oe,Ue,xe){F.dragOptions.xaxes=[F.xaxis],F.dragOptions.yaxes=[F.yaxis],J=Y._fullLayout._invScaleX,G=Y._fullLayout._invScaleY;var Pe=F.dragOptions.dragmode=Y._fullLayout.dragmode;v(Pe)?F.dragOptions.minDrag=1:F.dragOptions.minDrag=void 0,Pe==="zoom"?(F.dragOptions.moveFn=pe,F.dragOptions.clickFn=ee,F.dragOptions.doneFn=ge,ie(Oe,Ue,xe)):Pe==="pan"?(F.dragOptions.moveFn=_e,F.dragOptions.clickFn=ee,F.dragOptions.doneFn=De,Te(),F.clearSelect(Y)):(x(Pe)||v(Pe))&&_(Oe,Ue,xe,F.dragOptions,Pe)}};var Z,re,se,oe,N,U,q,Q,W,X;function te(Oe){var Ue={};return Ue[F.id+".aaxis.min"]=Oe.a,Ue[F.id+".baxis.min"]=Oe.b,Ue[F.id+".caxis.min"]=Oe.c,Ue}function ee(Oe,Ue){var xe=Y._fullLayout.clickmode;B(Y),Oe===2&&(Y.emit("plotly_doubleclick",null),M.call("_guiRelayout",Y,te({a:0,b:0,c:0}))),xe.indexOf("select")>-1&&Oe===1&&s(Ue,Y,[F.xaxis],[F.yaxis],F.id,F.dragOptions),xe.indexOf("event")>-1&&d.click(Y,Ue,F.id)}function ie(Oe,Ue,xe){var Pe=V.getBoundingClientRect();Z=Ue-Pe.left,re=xe-Pe.top,Y._fullLayout._calcInverseTransform(Y);var Ve=Y._fullLayout._invTransform,Qe=A.apply3DTransform(Ve)(Z,re);Z=Qe[0],re=Qe[1],se={a:F.aaxis.range[0],b:F.baxis.range[1],c:F.caxis.range[1]},N=se,oe=F.aaxis.range[1]-se.a,U=c(F.graphDiv._fullLayout[F.id].bgcolor).getLuminance(),q="M0,"+F.h+"L"+F.w/2+", 0L"+F.w+","+F.h+"Z",Q=!1,W=K.append("path").attr("class","zoombox").attr("transform",e(F.x0,F.y0)).style({fill:U>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",q),X=K.append("path").attr("class","zoombox-corners").attr("transform",e(F.x0,F.y0)).style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),F.clearSelect(Y)}function le(Oe,Ue){return 1-Ue/F.h}function ye(Oe,Ue){return 1-(Oe+(F.h-Ue)/Math.sqrt(3))/F.w}function ue(Oe,Ue){return(Oe-(F.h-Ue)/Math.sqrt(3))/F.w}function pe(Oe,Ue){var xe=Z+Oe*J,Pe=re+Ue*G,Ve=Math.max(0,Math.min(1,le(Z,re),le(xe,Pe))),Qe=Math.max(0,Math.min(1,ye(Z,re),ye(xe,Pe))),Fe=Math.max(0,Math.min(1,ue(Z,re),ue(xe,Pe))),Le=(Ve/2+Fe)*F.w,Ne=(1-Ve/2-Qe)*F.w,dt=(Le+Ne)/2,Dt=Ne-Le,Xt=(1-Ve)*F.h,Tt=Xt-Dt/L;Dt<h.MINZOOM?(N=se,W.attr("d",q),X.attr("d","M0,0Z")):(N={a:se.a+Ve*oe,b:se.b+Qe*oe,c:se.c+Fe*oe},W.attr("d",q+"M"+Le+","+Xt+"H"+Ne+"L"+dt+","+Tt+"L"+Le+","+Xt+"Z"),X.attr("d","M"+Z+","+re+D+"M"+Le+","+Xt+P+"M"+Ne+","+Xt+z+"M"+dt+","+Tt+I)),Q||(W.transition().style("fill",U>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),X.transition().style("opacity",1).duration(200),Q=!0),Y.emit("plotly_relayouting",te(N))}function ge(){B(Y),N!==se&&(M.call("_guiRelayout",Y,te(N)),R&&Y.data&&Y._context.showTips&&(A.notifier(a(Y,"Double-click to zoom back out"),"long"),R=!1))}function Te(){se={a:F.aaxis.range[0],b:F.baxis.range[1],c:F.caxis.range[1]},N=se}function _e(Oe,Ue){var xe=Oe/F.xaxis._m,Pe=Ue/F.yaxis._m;N={a:se.a-Pe,b:se.b+(xe+Pe)/2,c:se.c-(xe-Pe)/2};var Ve=[N.a,N.b,N.c].sort(A.sorterAsc),Qe={a:Ve.indexOf(N.a),b:Ve.indexOf(N.b),c:Ve.indexOf(N.c)};Ve[0]<0&&(Ve[1]+Ve[0]/2<0?(Ve[2]+=Ve[0]+Ve[1],Ve[0]=Ve[1]=0):(Ve[2]+=Ve[0]/2,Ve[1]+=Ve[0]/2,Ve[0]=0),N={a:Ve[Qe.a],b:Ve[Qe.b],c:Ve[Qe.c]},Ue=(se.a-N.a)*F.yaxis._m,Oe=(se.c-N.c-se.b+N.b)*F.xaxis._m);var Fe=e(F.x0+Oe,F.y0+Ue);F.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Fe);var Le=e(-Oe,-Ue);F.clipDefRelative.select("path").attr("transform",Le),F.aaxis.range=[N.a,F.sum-N.b-N.c],F.baxis.range=[F.sum-N.a-N.c,N.b],F.caxis.range=[F.sum-N.a-N.b,N.c],F.drawAxes(!1),F._hasClipOnAxisFalse&&F.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,F),Y.emit("plotly_relayouting",te(N))}function De(){M.call("_guiRelayout",Y,te(N))}V.onmousemove=function(Oe){d.hover(Y,Oe,F.id),Y._fullLayout._lasthover=V,Y._fullLayout._hoversubplot=F.id},V.onmouseout=function(Oe){Y._dragging||p.unhover(Y,Oe)},p.init(this.dragOptions)};function B(F){T.select(F).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(g,ne,ae){var T=g("./lib/loggers"),c=g("./lib/noop"),M=g("./lib/push_unique"),A=g("./lib/is_plain_object"),e=g("./lib/dom").addStyleRule,a=g("./lib/extend"),n=g("./plots/attributes"),t=g("./plots/layout_attributes"),r=a.extendFlat,f=a.extendDeepAll;ae.modules={},ae.allCategories={},ae.allTypes=[],ae.subplotsRegistry={},ae.transformsRegistry={},ae.componentsRegistry={},ae.layoutArrayContainers=[],ae.layoutArrayRegexes=[],ae.traceLayoutAttributes={},ae.localeRegistry={},ae.apiMethodRegistry={},ae.collectableSubplotTypes=null,ae.register=function(b){if(ae.collectableSubplotTypes=null,b)b&&!Array.isArray(b)&&(b=[b]);else throw new Error("No argument passed to Plotly.register.");for(var h=0;h<b.length;h++){var m=b[h];if(!m)throw new Error("Invalid module was attempted to be registered!");switch(m.moduleType){case"trace":o(m);break;case"transform":d(m);break;case"component":p(m);break;case"locale":y(m);break;case"apiMethod":var u=m.name;ae.apiMethodRegistry[u]=m.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},ae.getModule=function(w){var b=ae.modules[s(w)];return b?b._module:!1},ae.traceIs=function(w,b){if(w=s(w),w==="various")return!1;var h=ae.modules[w];return h||(w&&T.log("Unrecognized trace type "+w+"."),h=ae.modules[n.type.dflt]),!!h.categories[b]},ae.getTransformIndices=function(w,b){for(var h=[],m=w.transforms||[],u=0;u<m.length;u++)m[u].type===b&&h.push(u);return h},ae.hasTransform=function(w,b){for(var h=w.transforms||[],m=0;m<h.length;m++)if(h[m].type===b)return!0;return!1},ae.getComponentMethod=function(w,b){var h=ae.componentsRegistry[w];return h&&h[b]||c},ae.call=function(){var w=arguments[0],b=[].slice.call(arguments,1);return ae.apiMethodRegistry[w].apply(null,b)};function o(w){var b=w.name,h=w.categories,m=w.meta;if(ae.modules[b]){T.log("Type "+b+" already registered");return}ae.subplotsRegistry[w.basePlotModule.name]||i(w.basePlotModule);for(var u={},L=0;L<h.length;L++)u[h[L]]=!0,ae.allCategories[h[L]]=!0;ae.modules[b]={_module:w,categories:u},m&&Object.keys(m).length&&(ae.modules[b].meta=m),ae.allTypes.push(b);for(var S in ae.componentsRegistry)x(S,b);w.layoutAttributes&&r(ae.traceLayoutAttributes,w.layoutAttributes);var k=w.basePlotModule,P=k.name;if(P==="mapbox"){var z=k.constants.styleRules;for(var I in z)e(".js-plotly-plot .plotly .mapboxgl-"+I,z[I])}(P==="geo"||P==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function i(w){var b=w.name;if(ae.subplotsRegistry[b]){T.log("Plot type "+b+" already registered.");return}v(w),ae.subplotsRegistry[b]=w;for(var h in ae.componentsRegistry)_(h,w.name)}function p(w){if(typeof w.name!="string")throw new Error("Component module *name* must be a string.");var b=w.name;ae.componentsRegistry[b]=w,w.layoutAttributes&&(w.layoutAttributes._isLinkedToArray&&M(ae.layoutArrayContainers,b),v(w));for(var h in ae.modules)x(b,h);for(var m in ae.subplotsRegistry)_(b,m);for(var u in ae.transformsRegistry)l(b,u);w.schema&&w.schema.layout&&f(t,w.schema.layout)}function d(w){if(typeof w.name!="string")throw new Error("Transform module *name* must be a string.");var b="Transform module "+w.name,h=typeof w.transform=="function",m=typeof w.calcTransform=="function";if(!h&&!m)throw new Error(b+" is missing a *transform* or *calcTransform* method.");h&&m&&T.log([b+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),A(w.attributes)||T.log(b+" registered without an *attributes* object."),typeof w.supplyDefaults!="function"&&T.log(b+" registered without a *supplyDefaults* method."),ae.transformsRegistry[w.name]=w;for(var u in ae.componentsRegistry)l(u,w.name)}function y(w){var b=w.name,h=b.split("-")[0],m=w.dictionary,u=w.format,L=m&&Object.keys(m).length,S=u&&Object.keys(u).length,k=ae.localeRegistry,P=k[b];if(P||(k[b]=P={}),h!==b){var z=k[h];z||(k[h]=z={}),L&&z.dictionary===P.dictionary&&(z.dictionary=m),S&&z.format===P.format&&(z.format=u)}L&&(P.dictionary=m),S&&(P.format=u)}function v(w){if(w.layoutAttributes){var b=w.layoutAttributes._arrayAttrRegexps;if(b)for(var h=0;h<b.length;h++)M(ae.layoutArrayRegexes,b[h])}}function x(w,b){var h=ae.componentsRegistry[w].schema;if(!(!h||!h.traces)){var m=h.traces[b];m&&f(ae.modules[b]._module.attributes,m)}}function l(w,b){var h=ae.componentsRegistry[w].schema;if(!(!h||!h.transforms)){var m=h.transforms[b];m&&f(ae.transformsRegistry[b].attributes,m)}}function _(w,b){var h=ae.componentsRegistry[w].schema;if(!(!h||!h.subplots)){var m=ae.subplotsRegistry[b],u=m.layoutAttributes,L=m.attr==="subplot"?m.name:m.attr;Array.isArray(L)&&(L=L[0]);var S=h.subplots[L];u&&S&&f(u,S)}}function s(w){return typeof w=="object"&&(w=w.type),w}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(g,ne,ae){var T=g("../registry"),c=g("../lib"),M=c.extendFlat,A=c.extendDeep;function e(n){var t;switch(n){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function a(n){var t=["xaxis","yaxis","zaxis"];return t.indexOf(n.slice(0,5))>-1}ne.exports=function(t,r){var f,o=t.data,i=t.layout,p=A([],o),d=A({},i,e(r.tileClass)),y=t._context||{};if(r.width&&(d.width=r.width),r.height&&(d.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){d.annotations=[];var v=Object.keys(d);for(f=0;f<v.length;f++)a(v[f])&&(d[v[f]].title={text:""});for(f=0;f<p.length;f++){var x=p[f];x.showscale=!1,x.marker&&(x.marker.showscale=!1),T.traceIs(x,"pie-like")&&(x.textposition="none")}}if(Array.isArray(r.annotations))for(f=0;f<r.annotations.length;f++)d.annotations.push(r.annotations[f]);var l=Object.keys(d).filter(function(h){return h.match(/^scene\d*$/)});if(l.length){var _={};for(r.tileClass==="thumbnail"&&(_={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),f=0;f<l.length;f++){var s=d[l[f]];s.xaxis||(s.xaxis={}),s.yaxis||(s.yaxis={}),s.zaxis||(s.zaxis={}),M(s.xaxis,_),M(s.yaxis,_),M(s.zaxis,_),s._scene=null}}var w=document.createElement("div");r.tileClass&&(w.className=r.tileClass);var b={gd:w,td:w,layout:d,data:p,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:y.mapboxAccessToken}};return r.setBackground!=="transparent"&&(b.config.setBackground=r.setBackground||"opaque"),b.gd.defaultLayout=e(r.tileClass),b}},{"../lib":503,"../registry":638}],640:[function(g,ne,ae){var T=g("../lib"),c=g("../plot_api/to_image"),M=g("./filesaver"),A=g("./helpers");function e(a,n){var t;return T.isPlainObject(a)||(t=T.getGraphDiv(a)),n=n||{},n.format=n.format||"png",n.width=n.width||null,n.height=n.height||null,n.imageDataOnly=!0,new Promise(function(r,f){t&&t._snapshotInProgress&&f(new Error("Snapshotting already in progress.")),T.isIE()&&n.format!=="svg"&&f(new Error(A.MSG_IE_BAD_FORMAT)),t&&(t._snapshotInProgress=!0);var o=c(a,n),i=n.filename||a.fn||"newplot";i+="."+n.format.replace("-","."),o.then(function(p){return t&&(t._snapshotInProgress=!1),M(p,i,n.format)}).then(function(p){r(p)}).catch(function(p){t&&(t._snapshotInProgress=!1),f(p)})})}ne.exports=e},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(g,ne,ae){var T=g("../lib"),c=g("./helpers");function M(A,e,a){var n=document.createElement("a"),t="download"in n,r=new Promise(function(f,o){var i,p;if(T.isIE())return i=c.createBlob(A,"svg"),window.navigator.msSaveBlob(i,e),i=null,f(e);if(t)return i=c.createBlob(A,a),p=c.createObjectURL(i),n.href=p,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),c.revokeObjectURL(p),i=null,f(e);if(T.isSafari()){var d=a==="svg"?",":";base64,";return c.octetStream(d+encodeURIComponent(A)),f(e)}o(new Error("download error"))});return r}ne.exports=M},{"../lib":503,"./helpers":642}],642:[function(g,ne,ae){var T=g("../registry");ae.getDelay=function(A){return A._has&&(A._has("gl3d")||A._has("gl2d")||A._has("mapbox"))?500:0},ae.getRedrawFunc=function(A){return function(){T.getComponentMethod("colorbar","draw")(A)}},ae.encodeSVG=function(A){return"data:image/svg+xml,"+encodeURIComponent(A)},ae.encodeJSON=function(A){return"data:application/json,"+encodeURIComponent(A)};var c=window.URL||window.webkitURL;ae.createObjectURL=function(A){return c.createObjectURL(A)},ae.revokeObjectURL=function(A){return c.revokeObjectURL(A)},ae.createBlob=function(A,e){if(e==="svg")return new window.Blob([A],{type:"image/svg+xml;charset=utf-8"});if(e==="full-json")return new window.Blob([A],{type:"application/json;charset=utf-8"});var a=M(window.atob(A));return new window.Blob([a],{type:"image/"+e})},ae.octetStream=function(A){document.location.href="data:application/octet-stream"+A};function M(A){for(var e=A.length,a=new ArrayBuffer(e),n=new Uint8Array(a),t=0;t<e;t++)n[t]=A.charCodeAt(t);return a}ae.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,ae.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(g,ne,ae){var T=g("./helpers"),c={getDelay:T.getDelay,getRedrawFunc:T.getRedrawFunc,clone:g("./cloneplot"),toSVG:g("./tosvg"),svgToImg:g("./svgtoimg"),toImage:g("./toimage"),downloadImage:g("./download")};ne.exports=c},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(g,ne,ae){var T=g("../lib"),c=g("events").EventEmitter,M=g("./helpers");function A(e){var a=e.emitter||new c,n=new Promise(function(t,r){var f=window.Image,o=e.svg,i=e.format||"png";if(T.isIE()&&i!=="svg"){var p=new Error(M.MSG_IE_BAD_FORMAT);return r(p),e.promise?n:a.emit("error",p)}var d=e.canvas,y=e.scale||1,v=e.width||300,x=e.height||150,l=y*v,_=y*x,s=d.getContext("2d",{willReadFrequently:!0}),w=new f,b,h;i==="svg"||T.isSafari()?h=M.encodeSVG(o):(b=M.createBlob(o,"svg"),h=M.createObjectURL(b)),d.width=l,d.height=_,w.onload=function(){var m;switch(b=null,M.revokeObjectURL(h),i!=="svg"&&s.drawImage(w,0,0,l,_),i){case"jpeg":m=d.toDataURL("image/jpeg");break;case"png":m=d.toDataURL("image/png");break;case"webp":m=d.toDataURL("image/webp");break;case"svg":m=h;break;default:var u="Image format is not jpeg, png, svg or webp.";if(r(new Error(u)),!e.promise)return a.emit("error",u)}t(m),e.promise||a.emit("success",m)},w.onerror=function(m){if(b=null,M.revokeObjectURL(h),r(m),!e.promise)return a.emit("error",m)},w.src=h});return e.promise?n:a}ne.exports=A},{"../lib":503,"./helpers":642,events:84}],645:[function(g,ne,ae){var T=g("events").EventEmitter,c=g("../registry"),M=g("../lib"),A=g("./helpers"),e=g("./cloneplot"),a=g("./tosvg"),n=g("./svgtoimg");function t(r,f){var o=new T,i=e(r,{format:"png"}),p=i.gd;p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);function d(){var v=A.getDelay(p._fullLayout);setTimeout(function(){var x=a(p),l=document.createElement("canvas");l.id=M.randstr(),o=n({format:f.format,width:p._fullLayout.width,height:p._fullLayout.height,canvas:l,emitter:o,svg:x}),o.clean=function(){p&&document.body.removeChild(p)}},v)}var y=A.getRedrawFunc(p);return c.call("_doPlot",p,i.data,i.layout,i.config).then(y).then(d).catch(function(v){o.emit("error",v)}),o}ne.exports=t},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../lib"),M=g("../components/drawing"),A=g("../components/color"),e=g("../constants/xmlns_namespaces"),a=/"/g,n="TOBESTRIPPED",t=new RegExp('("'+n+")|("+n+'")',"g");function r(o){var i=T.select("body").append("div").style({display:"none"}).html(""),p=o.replace(/(&[^;]*;)/gi,function(d){return d==="&lt;"?"&#60;":d==="&rt;"?"&#62;":d.indexOf("<")!==-1||d.indexOf(">")!==-1?"":i.html(d).text()});return i.remove(),p}function f(o){return o.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}ne.exports=function(i,p,d){var y=i._fullLayout,v=y._paper,x=y._toppaper,l=y.width,_=y.height,s;v.insert("rect",":first-child").call(M.setRect,0,0,l,_).call(A.fill,y.paper_bgcolor);var w=y._basePlotModules||[];for(s=0;s<w.length;s++){var b=w[s];b.toSVG&&b.toSVG(i)}if(x){var h=x.node().childNodes,m=Array.prototype.slice.call(h);for(s=0;s<m.length;s++){var u=m[s];u.childNodes.length&&v.node().appendChild(u)}}y._draggers&&y._draggers.remove(),v.node().style.background="",v.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var S=T.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){S.remove();return}else S.style({visibility:null,display:null});var k=this.style.fontFamily;k&&k.indexOf('"')!==-1&&S.style("font-family",k.replace(a,n))}),v.selectAll(".gradient_filled,.pattern_filled").each(function(){var S=T.select(this),k=this.style.fill;k&&k.indexOf("url(")!==-1&&S.style("fill",k.replace(a,n));var P=this.style.stroke;P&&P.indexOf("url(")!==-1&&S.style("stroke",P.replace(a,n))}),(p==="pdf"||p==="eps")&&v.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),v.node().setAttributeNS(e.xmlns,"xmlns",e.svg),v.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),p==="svg"&&d&&(v.attr("width",d*l),v.attr("height",d*_),v.attr("viewBox","0 0 "+l+" "+_));var L=new window.XMLSerializer().serializeToString(v.node());return L=r(L),L=f(L),L=L.replace(t,"'"),c.isIE()&&(L=L.replace(/"/gi,"'"),L=L.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),L=L.replace(/(\\')/gi,'"')),L}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(g,ne,ae){var T=g("../../lib");ne.exports=function(M,A){for(var e=0;e<M.length;e++)M[e].i=e;T.mergeArray(A.text,M,"tx"),T.mergeArray(A.hovertext,M,"htx");var a=A.marker;if(a){T.mergeArray(a.opacity,M,"mo",!0),T.mergeArray(a.color,M,"mc");var n=a.line;n&&(T.mergeArray(n.color,M,"mlc"),T.mergeArrayCastPositive(n.width,M,"mlw"))}}},{"../../lib":503}],648:[function(g,ne,ae){var T=g("../scatter/attributes"),c=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=g("../../plots/template_attributes").hovertemplateAttrs,A=g("../../plots/template_attributes").texttemplateAttrs,e=g("../../components/colorscale/attributes"),a=g("../../plots/font_attributes"),n=g("./constants"),t=g("../../components/drawing/attributes").pattern,r=g("../../lib/extend").extendFlat,f=a({editType:"calc",arrayOk:!0,colorEditType:"style"}),o=T.marker,i=o.line,p=r({},i.width,{dflt:0}),d=r({width:p,editType:"calc"},e("marker.line")),y=r({line:d,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t});ne.exports={x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),text:T.text,texttemplate:A({editType:"plot"},{keys:n.eventDataKeys}),hovertext:T.hovertext,hovertemplate:M({},{keys:n.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:r({},f,{}),insidetextfont:r({},f,{}),outsidetextfont:r({},f,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:r({},T.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:y,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:T.selected.marker.opacity,color:T.selected.marker.color,editType:"style"},textfont:T.selected.textfont,editType:"style"},unselected:{marker:{opacity:T.unselected.marker.opacity,color:T.unselected.marker.color,editType:"style"},textfont:T.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927,"./constants":650}],649:[function(g,ne,ae){var T=g("../../plots/cartesian/axes"),c=g("../../plots/cartesian/align_period"),M=g("../../components/colorscale/helpers").hasColorscale,A=g("../../components/colorscale/calc"),e=g("./arrays_to_calcdata"),a=g("../scatter/calc_selection");ne.exports=function(t,r){var f=T.getFromId(t,r.xaxis||"x"),o=T.getFromId(t,r.yaxis||"y"),i,p,d,y,v,x,l={msUTC:!!(r.base||r.base===0)};r.orientation==="h"?(i=f.makeCalcdata(r,"x",l),d=o.makeCalcdata(r,"y"),y=c(r,o,"y",d),v=!!r.yperiodalignment,x="y"):(i=o.makeCalcdata(r,"y",l),d=f.makeCalcdata(r,"x"),y=c(r,f,"x",d),v=!!r.xperiodalignment,x="x"),p=y.vals;for(var _=Math.min(p.length,i.length),s=new Array(_),w=0;w<_;w++)s[w]={p:p[w],s:i[w]},v&&(s[w].orig_p=d[w],s[w][x+"End"]=y.ends[w],s[w][x+"Start"]=y.starts[w]),r.ids&&(s[w].id=String(r.ids[w]));return M(r,"marker")&&A(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),M(r,"marker.line")&&A(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(s,r),a(s,r),s}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":647}],650:[function(g,ne,ae){ne.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib").isArrayOrTypedArray,M=g("../../constants/numerical").BADNUM,A=g("../../registry"),e=g("../../plots/cartesian/axes"),a=g("../../plots/cartesian/constraints").getAxisGroup,n=g("./sieve.js");function t(L,S){for(var k=S.xaxis,P=S.yaxis,z=L._fullLayout,I=L._fullData,D=L.calcdata,R=[],B=[],F=0;F<I.length;F++){var V=I[F];if(V.visible===!0&&A.traceIs(V,"bar")&&V.xaxis===k._id&&V.yaxis===P._id&&(V.orientation==="h"?R.push(D[F]):B.push(D[F]),V._computePh))for(var Y=L.calcdata[F],K=0;K<Y.length;K++)typeof Y[K].ph0=="function"&&(Y[K].ph0=Y[K].ph0()),typeof Y[K].ph1=="function"&&(Y[K].ph1=Y[K].ph1())}var J={xCat:k.type==="category"||k.type==="multicategory",yCat:P.type==="category"||P.type==="multicategory",mode:z.barmode,norm:z.barnorm,gap:z.bargap,groupgap:z.bargroupgap};r(L,k,P,B,J),r(L,P,k,R,J)}function r(L,S,k,P,z){if(!!P.length){var I,D,R,B,F;switch(f(k,P),z.mode){case"overlay":o(S,k,P,z);break;case"group":for(I=[],D=[],R=0;R<P.length;R++)B=P[R],F=B[0].trace,F.offset===void 0?D.push(B):I.push(B);D.length&&i(L,S,k,D,z),I.length&&o(S,k,I,z);break;case"stack":case"relative":for(I=[],D=[],R=0;R<P.length;R++)B=P[R],F=B[0].trace,F.base===void 0?D.push(B):I.push(B);D.length&&p(L,S,k,D,z),I.length&&o(S,k,I,z);break}m(P,S)}}function f(L,S){var k,P;for(k=0;k<S.length;k++){var z=S[k],I=z[0].trace,D=I.type==="funnel"?I._base:I.base,R,B=I.orientation==="h"?I.xcalendar:I.ycalendar,F=L.type==="category"||L.type==="multicategory"?function(){return null}:L.d2c;if(c(D)){for(P=0;P<Math.min(D.length,z.length);P++)R=F(D[P],0,B),T(R)?(z[P].b=+R,z[P].hasB=1):z[P].b=0;for(;P<z.length;P++)z[P].b=0}else{R=F(D,0,B);var V=T(R);for(R=V?R:0,P=0;P<z.length;P++)z[P].b=R,V&&(z[P].hasB=1)}}}function o(L,S,k,P){for(var z=0;z<k.length;z++){var I=k[z],D=new n([I],{posAxis:L,sepNegVal:!1,overlapNoMerge:!P.norm});d(L,D,P),P.norm?(w(D),h(S,D,P)):_(S,D)}}function i(L,S,k,P,z){var I=new n(P,{posAxis:S,sepNegVal:!1,overlapNoMerge:!z.norm});y(L,S,I,z),b(I,S),z.norm?(w(I),h(k,I,z)):_(k,I)}function p(L,S,k,P,z){var I=new n(P,{posAxis:S,sepNegVal:z.mode==="relative",overlapNoMerge:!(z.norm||z.mode==="stack"||z.mode==="relative")});d(S,I,z),s(k,I,z);for(var D=0;D<P.length;D++)for(var R=P[D],B=0;B<R.length;B++){var F=R[B];if(F.s!==M){var V=F.b+F.s===I.get(F.p,F.s);V&&(F._outmost=!0)}}z.norm&&h(k,I,z)}function d(L,S,k){for(var P=S.minDiff,z=S.traces,I=P*(1-k.gap),D=I,R=D*(1-(k.groupgap||0)),B=-R/2,F=0;F<z.length;F++){var V=z[F],Y=V[0].t;Y.barwidth=R,Y.poffset=B,Y.bargroupwidth=I,Y.bardelta=P}S.binWidth=z[0][0].t.barwidth/100,v(S),x(L,S),l(L,S)}function y(L,S,k,P){for(var z=L._fullLayout,I=k.positions,D=k.distinctPositions,R=k.minDiff,B=k.traces,F=B.length,V=I.length!==D.length,Y=R*(1-P.gap),K=a(z,S._id)+B[0][0].trace.orientation,J=z._alignmentOpts[K]||{},G=0;G<F;G++){var Z=B[G],re=Z[0].trace,se=J[re.alignmentgroup]||{},oe=Object.keys(se.offsetGroups||{}).length,N;oe?N=Y/oe:N=V?Y/F:Y;var U=N*(1-(P.groupgap||0)),q;oe?q=((2*re._offsetIndex+1-oe)*N-U)/2:q=V?((2*G+1-F)*N-U)/2:-U/2;var Q=Z[0].t;Q.barwidth=U,Q.poffset=q,Q.bargroupwidth=Y,Q.bardelta=R}k.binWidth=B[0][0].t.barwidth/100,v(k),x(S,k),l(S,k,V)}function v(L){var S=L.traces,k,P;for(k=0;k<S.length;k++){var z=S[k],I=z[0],D=I.trace,R=I.t,B=D._offset||D.offset,F=R.poffset,V;if(c(B)){for(V=Array.prototype.slice.call(B,0,z.length),P=0;P<V.length;P++)T(V[P])||(V[P]=F);for(P=V.length;P<z.length;P++)V.push(F);R.poffset=V}else B!==void 0&&(R.poffset=B);var Y=D._width||D.width,K=R.barwidth;if(c(Y)){var J=Array.prototype.slice.call(Y,0,z.length);for(P=0;P<J.length;P++)T(J[P])||(J[P]=K);for(P=J.length;P<z.length;P++)J.push(K);if(R.barwidth=J,B===void 0){for(V=[],P=0;P<z.length;P++)V.push(F+(K-J[P])/2);R.poffset=V}}else Y!==void 0&&(R.barwidth=Y,B===void 0&&(R.poffset=F+(K-Y)/2))}}function x(L,S){for(var k=S.traces,P=u(L),z=0;z<k.length;z++)for(var I=k[z],D=I[0].t,R=D.poffset,B=Array.isArray(R),F=D.barwidth,V=Array.isArray(F),Y=0;Y<I.length;Y++){var K=I[Y],J=K.w=V?F[Y]:F;K[P]=K.p+(B?R[Y]:R)+J/2}}function l(L,S,k){var P=S.traces,z=S.minDiff,I=z/2;e.minDtick(L,S.minDiff,S.distinctPositions[0],k);for(var D=0;D<P.length;D++){var R=P[D],B=R[0],F=B.trace,V=[],Y,K,J,G;for(G=0;G<R.length;G++)Y=R[G],K=Y.p-I,J=Y.p+I,V.push(K,J);if(F.width||F.offset){var Z=B.t,re=Z.poffset,se=Z.barwidth,oe=Array.isArray(re),N=Array.isArray(se);for(G=0;G<R.length;G++){Y=R[G];var U=oe?re[G]:re,q=N?se[G]:se;K=Y.p+U,J=K+q,V.push(K,J)}}F._extremes[L._id]=e.findExtremes(L,V,{padded:!1})}}function _(L,S){for(var k=S.traces,P=u(L),z=0;z<k.length;z++){for(var I=k[z],D=I[0].trace,R=[],B=!1,F=0;F<I.length;F++){var V=I[F],Y=V.b,K=Y+V.s;V[P]=K,R.push(K),V.hasB&&R.push(Y),(!V.hasB||!V.b)&&(B=!0)}D._extremes[L._id]=e.findExtremes(L,R,{tozero:B,padded:!0})}}function s(L,S,k){var P=u(L),z=S.traces,I,D,R,B,F,V;for(B=0;B<z.length;B++)if(I=z[B],D=I[0].trace,D.type==="funnel")for(F=0;F<I.length;F++)V=I[F],V.s!==M&&S.put(V.p,-.5*V.s);for(B=0;B<z.length;B++){I=z[B],D=I[0].trace,R=D.type==="funnel";var Y=[];for(F=0;F<I.length;F++)if(V=I[F],V.s!==M){var K;R?K=V.s:K=V.s+V.b;var J=S.put(V.p,K),G=J+K;V.b=J,V[P]=G,k.norm||(Y.push(G),V.hasB&&Y.push(J))}k.norm||(D._extremes[L._id]=e.findExtremes(L,Y,{tozero:!0,padded:!0}))}}function w(L){for(var S=L.traces,k=0;k<S.length;k++)for(var P=S[k],z=0;z<P.length;z++){var I=P[z];I.s!==M&&L.put(I.p,I.b+I.s)}}function b(L,S){for(var k=L.traces,P=0;P<k.length;P++){var z=k[P],I=z[0].trace;if(I.base===void 0)for(var D=new n([z],{posAxis:S,sepNegVal:!0,overlapNoMerge:!0}),R=0;R<z.length;R++){var B=z[R];if(B.p!==M){var F=D.put(B.p,B.b+B.s);F&&(B.b=F)}}}}function h(L,S,k){var P=S.traces,z=u(L),I=k.norm==="fraction"?1:100,D=I/1e9,R=L.l2c(L.c2l(0)),B=k.mode==="stack"?I:R;function F(q){return T(L.c2l(q))&&(q<R-D||q>B+D||!T(R))}for(var V=0;V<P.length;V++){for(var Y=P[V],K=Y[0].trace,J=[],G=!1,Z=!1,re=0;re<Y.length;re++){var se=Y[re];if(se.s!==M){var oe=Math.abs(I/S.get(se.p,se.s));se.b*=oe,se.s*=oe;var N=se.b,U=N+se.s;se[z]=U,J.push(U),Z=Z||F(U),se.hasB&&(J.push(N),Z=Z||F(N)),(!se.hasB||!se.b)&&(G=!0)}}K._extremes[L._id]=e.findExtremes(L,J,{tozero:G,padded:Z})}}function m(L,S){var k=u(S),P={},z,I,D,R=1/0,B=-1/0;for(z=0;z<L.length;z++)for(D=L[z],I=0;I<D.length;I++){var F=D[I].p;T(F)&&(R=Math.min(R,F),B=Math.max(B,F))}var V=1e4/(B-R),Y=P.round=function(oe){return String(Math.round(V*(oe-R)))};for(z=0;z<L.length;z++){D=L[z],D[0].t.extents=P;var K=D[0].t.poffset,J=Array.isArray(K);for(I=0;I<D.length;I++){var G=D[I],Z=G[k]-G.w/2;if(T(Z)){var re=G[k]+G.w/2,se=Y(G.p);P[se]?P[se]=[Math.min(Z,P[se][0]),Math.max(re,P[se][1])]:P[se]=[Z,re]}G.p0=G.p+(J?K[I]:K),G.p1=G.p0+G.w,G.s0=G.b,G.s1=G.s0+G.s}}}function u(L){return L._id.charAt(0)}ne.exports={crossTraceCalc:t,setGroupPositions:r}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/color"),M=g("../../registry"),A=g("../scatter/xy_defaults"),e=g("../scatter/period_defaults"),a=g("./style_defaults"),n=g("../../plots/cartesian/constraints").getAxisGroup,t=g("./attributes"),r=T.coerceFont;function f(d,y,v,x){function l(h,m){return T.coerce(d,y,t,h,m)}var _=A(d,y,x,l);if(!_){y.visible=!1;return}e(d,y,x,l),l("xhoverformat"),l("yhoverformat"),l("orientation",y.x&&!y.y?"h":"v"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate");var s=l("textposition");p(d,y,x,l,s,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a(d,y,l,v,x);var w=(y.marker.line||{}).color,b=M.getComponentMethod("errorbars","supplyDefaults");b(d,y,w||c.defaultLine,{axis:"y"}),b(d,y,w||c.defaultLine,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(y,l)}function o(d,y,v,x){var l=y.orientation,_=y[{v:"x",h:"y"}[l]+"axis"],s=n(v,_)+l,w=v._alignmentOpts||{},b=x("alignmentgroup"),h=w[s];h||(h=w[s]={});var m=h[b];m?m.traces.push(y):m=h[b]={traces:[y],alignmentIndex:Object.keys(h).length,offsetGroups:{}};var u=x("offsetgroup"),L=m.offsetGroups,S=L[u];u&&(S||(S=L[u]={offsetIndex:Object.keys(L).length}),y._offsetIndex=S.offsetIndex)}function i(d,y){var v,x;function l(s){return T.coerce(x._input,x,t,s)}if(y.barmode==="group")for(var _=0;_<d.length;_++)x=d[_],x.type==="bar"&&(v=x._input,o(v,x,y,l))}function p(d,y,v,x,l,_){_=_||{};var s=_.moduleHasSelected!==!1,w=_.moduleHasUnselected!==!1,b=_.moduleHasConstrain!==!1,h=_.moduleHasCliponaxis!==!1,m=_.moduleHasTextangle!==!1,u=_.moduleHasInsideanchor!==!1,L=!!_.hasPathbar,S=Array.isArray(l)||l==="auto",k=S||l==="inside",P=S||l==="outside";if(k||P){var z=r(x,"textfont",v.font),I=T.extendFlat({},z),D=d.textfont&&d.textfont.color,R=!D;if(R&&delete I.color,r(x,"insidetextfont",I),L){var B=T.extendFlat({},z);R&&delete B.color,r(x,"pathbar.textfont",B)}P&&r(x,"outsidetextfont",z),s&&x("selected.textfont.color"),w&&x("unselected.textfont.color"),b&&x("constraintext"),h&&x("cliponaxis"),m&&x("textangle"),x("texttemplate")}k&&u&&x("insidetextanchor")}ne.exports={supplyDefaults:f,crossTraceDefaults:i,handleGroupingDefaults:o,handleText:p}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":648,"./style_defaults":663}],653:[function(g,ne,ae){ne.exports=function(c,M,A){return c.x="xVal"in M?M.xVal:M.x,c.y="yVal"in M?M.yVal:M.y,M.xa&&(c.xaxis=M.xa),M.ya&&(c.yaxis=M.ya),A.orientation==="h"?(c.label=c.y,c.value=c.x):(c.label=c.x,c.value=c.y),c}},{}],654:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("tinycolor2"),M=g("../../lib").isArrayOrTypedArray;ae.coerceString=function(A,e,a){if(typeof e=="string"){if(e||!A.noBlank)return e}else if((typeof e=="number"||e===!0)&&!A.strict)return String(e);return a!==void 0?a:A.dflt},ae.coerceNumber=function(A,e,a){if(T(e)){e=+e;var n=A.min,t=A.max,r=n!==void 0&&e<n||t!==void 0&&e>t;if(!r)return e}return a!==void 0?a:A.dflt},ae.coerceColor=function(A,e,a){return c(e).isValid()?e:a!==void 0?a:A.dflt},ae.coerceEnumerated=function(A,e,a){return A.coerceNumber&&(e=+e),A.values.indexOf(e)!==-1?e:a!==void 0?a:A.dflt},ae.getValue=function(A,e){var a;return Array.isArray(A)?e<A.length&&(a=A[e]):a=A,a},ae.getLineWidth=function(A,e){var a=0<e.mlw?e.mlw:M(A.marker.line.width)?0:A.marker.line.width;return a}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(g,ne,ae){var T=g("../../components/fx"),c=g("../../registry"),M=g("../../components/color"),A=g("../../lib").fillText,e=g("./helpers").getLineWidth,a=g("../../plots/cartesian/axes").hoverLabelText,n=g("../../constants/numerical").BADNUM;function t(o,i,p,d,y){var v=r(o,i,p,d,y);if(v){var x=v.cd,l=x[0].trace,_=x[v.index];return v.color=f(l,_),c.getComponentMethod("errorbars","hoverInfo")(_,l,v),[v]}}function r(o,i,p,d,y){var v=o.cd,x=v[0].trace,l=v[0].t,_=d==="closest",s=x.type==="waterfall",w=o.maxHoverDistance,b=o.maxSpikeDistance,h,m,u,L,S,k,P;x.orientation==="h"?(h=p,m=i,u="y",L="x",S=re,k=J):(h=i,m=p,u="x",L="y",k=re,S=J);var z=x[u+"period"],I=_||z;function D(ie){return B(ie,-1)}function R(ie){return B(ie,1)}function B(ie,le){var ye=ie.w;return ie[u]+le*ye/2}function F(ie){return ie[u+"End"]-ie[u+"Start"]}var V=_?D:z?function(ie){return ie.p-F(ie)/2}:function(ie){return Math.min(D(ie),ie.p-l.bardelta/2)},Y=_?R:z?function(ie){return ie.p+F(ie)/2}:function(ie){return Math.max(R(ie),ie.p+l.bardelta/2)};function K(ie,le,ye){return y.finiteRange&&(ye=0),T.inbox(ie-h,le-h,ye+Math.min(1,Math.abs(le-ie)/P)-1)}function J(ie){return K(V(ie),Y(ie),w)}function G(ie){return K(D(ie),R(ie),b)}function Z(ie){var le=ie[L];if(s){var ye=Math.abs(ie.rawS)||0;m>0?le+=ye:m<0&&(le-=ye)}return le}function re(ie){var le=m,ye=ie.b,ue=Z(ie);return T.inbox(ye-le,ue-le,w+(ue-le)/(ue-ye)-1)}function se(ie){var le=m,ye=ie.b,ue=Z(ie);return T.inbox(ye-le,ue-le,b+(ue-le)/(ue-ye)-1)}var oe=o[u+"a"],N=o[L+"a"];P=Math.abs(oe.r2c(oe.range[1])-oe.r2c(oe.range[0]));function U(ie){return(S(ie)+k(ie))/2}var q=T.getDistanceFunction(d,S,k,U);if(T.getClosest(v,q,o),o.index!==!1&&v[o.index].p!==n){I||(V=function(ie){return Math.min(D(ie),ie.p-l.bargroupwidth/2)},Y=function(ie){return Math.max(R(ie),ie.p+l.bargroupwidth/2)});var Q=o.index,W=v[Q],X=x.base?W.b+W.s:W.s;o[L+"0"]=o[L+"1"]=N.c2p(W[L],!0),o[L+"LabelVal"]=X;var te=l.extents[l.extents.round(W.p)];o[u+"0"]=oe.c2p(_?V(W):te[0],!0),o[u+"1"]=oe.c2p(_?Y(W):te[1],!0);var ee=W.orig_p!==void 0;return o[u+"LabelVal"]=ee?W.orig_p:W.p,o.labelLabel=a(oe,o[u+"LabelVal"],x[u+"hoverformat"]),o.valueLabel=a(N,o[L+"LabelVal"],x[L+"hoverformat"]),o.baseLabel=a(N,W.b,x[L+"hoverformat"]),o.spikeDistance=(se(W)+G(W))/2,o[u+"Spike"]=oe.c2p(W.p,!0),A(W,x,o),o.hovertemplate=x.hovertemplate,o}}function f(o,i){var p=i.mcc||o.marker.color,d=i.mlcc||o.marker.line.color,y=e(o,i);if(M.opacity(p))return p;if(M.opacity(d)&&y)return d}ne.exports={hoverPoints:t,hoverOnBars:r,getTraceColor:f}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults").supplyDefaults,crossTraceDefaults:g("./defaults").crossTraceDefaults,supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc"),crossTraceCalc:g("./cross_trace_calc").crossTraceCalc,colorbar:g("../scatter/marker_colorbar"),arraysToCalcdata:g("./arrays_to_calcdata"),plot:g("./plot").plot,style:g("./style").style,styleOnSelect:g("./style").styleOnSelect,hoverPoints:g("./hover").hoverPoints,eventData:g("./event_data"),selectPoints:g("./select"),moduleType:"trace",name:"bar",basePlotModule:g("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(g,ne,ae){ne.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(g,ne,ae){var T=g("../../registry"),c=g("../../plots/cartesian/axes"),M=g("../../lib"),A=g("./layout_attributes");ne.exports=function(e,a,n){function t(l,_){return M.coerce(e,a,A,l,_)}for(var r=!1,f=!1,o=!1,i={},p=t("barmode"),d=0;d<n.length;d++){var y=n[d];if(T.traceIs(y,"bar")&&y.visible)r=!0;else continue;if(p==="group"){var v=y.xaxis+y.yaxis;i[v]&&(o=!0),i[v]=!0}if(y.visible&&y.type==="histogram"){var x=c.getFromId({_fullLayout:a},y[y.orientation==="v"?"xaxis":"yaxis"]);x.type!=="category"&&(f=!0)}}if(!r){delete a.barmode;return}p!=="overlay"&&t("barnorm"),t("bargap",f&&!o?0:.2),t("bargroupgap")}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("fast-isnumeric"),M=g("../../lib"),A=g("../../lib/svg_text_utils"),e=g("../../components/color"),a=g("../../components/drawing"),n=g("../../registry"),t=g("../../plots/cartesian/axes").tickText,r=g("./uniform_text"),f=r.recordMinTextSize,o=r.clearMinTextSize,i=g("./style"),p=g("./helpers"),d=g("./constants"),y=g("./attributes"),v=y.text,x=y.textposition,l=g("../../components/fx/helpers").appendArrayPointValue,_=d.TEXTPAD;function s(V){return V.id}function w(V){if(V.ids)return s}function b(V,Y){return V<Y?1:-1}function h(V,Y,K,J){var G=[],Z=[],re=J?Y:K,se=J?K:Y;return G[0]=re.c2p(V.s0,!0),Z[0]=se.c2p(V.p0,!0),G[1]=re.c2p(V.s1,!0),Z[1]=se.c2p(V.p1,!0),J?[G,Z]:[Z,G]}function m(V,Y,K,J){if(!Y.uniformtext.mode&&u(K)){var G;return J&&(G=J()),V.transition().duration(K.duration).ease(K.easing).each("end",function(){G&&G()}).each("interrupt",function(){G&&G()})}else return V}function u(V){return V&&V.duration>0}function L(V,Y,K,J,G,Z){var re=Y.xaxis,se=Y.yaxis,oe=V._fullLayout;G||(G={mode:oe.barmode,norm:oe.barmode,gap:oe.bargap,groupgap:oe.bargroupgap},o("bar",oe));var N=M.makeTraceGroups(J,K,"trace bars").each(function(U){var q=T.select(this),Q=U[0].trace,W=Q.type==="waterfall",X=Q.type==="funnel",te=Q.type==="bar",ee=te||X,ie=0;W&&Q.connector.visible&&Q.connector.mode==="between"&&(ie=Q.connector.line.width/2);var le=Q.orientation==="h",ye=u(G),ue=M.ensureSingle(q,"g","points"),pe=w(Q),ge=ue.selectAll("g.point").data(M.identity,pe);ge.enter().append("g").classed("point",!0),ge.exit().remove(),ge.each(function(_e,De){var Oe=T.select(this),Ue=h(_e,re,se,le),xe=Ue[0][0],Pe=Ue[0][1],Ve=Ue[1][0],Qe=Ue[1][1],Fe=(le?Pe-xe:Qe-Ve)==0;Fe&&ee&&p.getLineWidth(Q,_e)&&(Fe=!1),Fe||(Fe=!c(xe)||!c(Pe)||!c(Ve)||!c(Qe)),_e.isBlank=Fe,Fe&&(le?Pe=xe:Qe=Ve),ie&&!Fe&&(le?(xe-=b(xe,Pe)*ie,Pe+=b(xe,Pe)*ie):(Ve-=b(Ve,Qe)*ie,Qe+=b(Ve,Qe)*ie));var Le,Ne;if(Q.type==="waterfall"){if(!Fe){var dt=Q[_e.dir].marker;Le=dt.line.width,Ne=dt.color}}else Le=p.getLineWidth(Q,_e),Ne=_e.mc||Q.marker.color;function Dt(Mt){var rt=T.round(Le/2%1,2);return G.gap===0&&G.groupgap===0?T.round(Math.round(Mt)-rt,2):Mt}function Xt(Mt,rt,ct){return ct&&Mt===rt?Mt:Math.abs(Mt-rt)>=2?Dt(Mt):Mt>rt?Math.ceil(Mt):Math.floor(Mt)}if(!V._context.staticPlot){var Tt=e.opacity(Ne),zt=Tt<1||Le>.01?Dt:Xt;xe=zt(xe,Pe,le),Pe=zt(Pe,xe,le),Ve=zt(Ve,Qe,!le),Qe=zt(Qe,Ve,!le)}var Ut=m(M.ensureSingle(Oe,"path"),oe,G,Z);if(Ut.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Pe-xe)*(Qe-Ve))||Fe&&V._context.staticPlot?"M0,0Z":"M"+xe+","+Ve+"V"+Qe+"H"+Pe+"V"+Ve+"Z").call(a.setClipUrl,Y.layerClipId,V),!oe.uniformtext.mode&&ye){var Et=a.makePointStyleFns(Q);a.singlePointStyle(_e,Ut,Q,Et,V)}S(V,Y,Oe,U,De,xe,Pe,Ve,Qe,G,Z),Y.layerClipId&&a.hideOutsideRangePoint(_e,Oe.select("text"),re,se,Q.xcalendar,Q.ycalendar)});var Te=Q.cliponaxis===!1;a.setClipUrl(q,Te?null:Y.layerClipId,V)});n.getComponentMethod("errorbars","plot")(V,N,Y,G)}function S(V,Y,K,J,G,Z,re,se,oe,N,U){var q=Y.xaxis,Q=Y.yaxis,W=V._fullLayout,X;function te(Mt,rt,ct){var Ze=M.ensureSingle(Mt,"text").text(rt).attr({class:"bartext bartext-"+X,"text-anchor":"middle","data-notex":1}).call(a.font,ct).call(A.convertToTspans,V);return Ze}var ee=J[0].trace,ie=ee.orientation==="h",le=D(W,J,G,q,Q);X=R(ee,G);var ye=N.mode==="stack"||N.mode==="relative",ue=J[G],pe=!ye||ue._outmost;if(!le||X==="none"||(ue.isBlank||Z===re||se===oe)&&(X==="auto"||X==="inside")){K.select("text").remove();return}var ge=W.font,Te=i.getBarColor(J[G],ee),_e=i.getInsideTextFont(ee,G,ge,Te),De=i.getOutsideTextFont(ee,G,ge),Oe=K.datum();ie?q.type==="log"&&Oe.s0<=0&&(q.range[0]<q.range[1]?Z=0:Z=q._length):Q.type==="log"&&Oe.s0<=0&&(Q.range[0]<Q.range[1]?se=Q._length:se=0);var Ue=Math.abs(re-Z)-2*_,xe=Math.abs(oe-se)-2*_,Pe,Ve,Qe,Fe,Le;if(X==="outside"&&!pe&&!ue.hasB&&(X="inside"),X==="auto")if(pe){X="inside",Le=M.ensureUniformFontSize(V,_e),Pe=te(K,le,Le),Ve=a.bBox(Pe.node()),Qe=Ve.width,Fe=Ve.height;var Ne=Qe>0&&Fe>0,dt=Qe<=Ue&&Fe<=xe,Dt=Qe<=xe&&Fe<=Ue,Xt=ie?Ue>=Qe*(xe/Fe):xe>=Fe*(Ue/Qe);Ne&&(dt||Dt||Xt)?X="inside":(X="outside",Pe.remove(),Pe=null)}else X="inside";if(!Pe){Le=M.ensureUniformFontSize(V,X==="outside"?De:_e),Pe=te(K,le,Le);var Tt=Pe.attr("transform");if(Pe.attr("transform",""),Ve=a.bBox(Pe.node()),Qe=Ve.width,Fe=Ve.height,Pe.attr("transform",Tt),Qe<=0||Fe<=0){Pe.remove();return}}var zt=ee.textangle,Ut,Et;X==="outside"?(Et=ee.constraintext==="both"||ee.constraintext==="outside",Ut=I(Z,re,se,oe,Ve,{isHorizontal:ie,constrained:Et,angle:zt})):(Et=ee.constraintext==="both"||ee.constraintext==="inside",Ut=z(Z,re,se,oe,Ve,{isHorizontal:ie,constrained:Et,angle:zt,anchor:ee.insidetextanchor})),Ut.fontSize=Le.size,f(ee.type==="histogram"?"bar":ee.type,Ut,W),ue.transform=Ut,m(Pe,W,N,U).attr("transform",M.getTextTransform(Ut))}function k(V){return V==="auto"?0:V}function P(V,Y){var K=Math.PI/180*Y,J=Math.abs(Math.sin(K)),G=Math.abs(Math.cos(K));return{x:V.width*G+V.height*J,y:V.width*J+V.height*G}}function z(V,Y,K,J,G,Z){var re=!!Z.isHorizontal,se=!!Z.constrained,oe=Z.angle||0,N=Z.anchor||"end",U=N==="end",q=N==="start",Q=Z.leftToRight||0,W=(Q+1)/2,X=1-W,te=G.width,ee=G.height,ie=Math.abs(Y-V),le=Math.abs(J-K),ye=ie>2*_&&le>2*_?_:0;ie-=2*ye,le-=2*ye;var ue=k(oe);oe==="auto"&&!(te<=ie&&ee<=le)&&(te>ie||ee>le)&&(!(te>le||ee>ie)||te<ee!=ie<le)&&(ue+=90);var pe=P(G,ue),ge=1;se&&(ge=Math.min(1,ie/pe.x,le/pe.y));var Te=G.left*X+G.right*W,_e=(G.top+G.bottom)/2,De=(V+_)*X+(Y-_)*W,Oe=(K+J)/2,Ue=0,xe=0;if(q||U){var Pe=(re?pe.x:pe.y)/2,Ve=re?b(V,Y):b(K,J);re?q?(De=V+Ve*ye,Ue=-Ve*Pe):(De=Y-Ve*ye,Ue=Ve*Pe):q?(Oe=K+Ve*ye,xe=-Ve*Pe):(Oe=J-Ve*ye,xe=Ve*Pe)}return{textX:Te,textY:_e,targetX:De,targetY:Oe,anchorX:Ue,anchorY:xe,scale:ge,rotate:ue}}function I(V,Y,K,J,G,Z){var re=!!Z.isHorizontal,se=!!Z.constrained,oe=Z.angle||0,N=G.width,U=G.height,q=Math.abs(Y-V),Q=Math.abs(J-K),W;re?W=Q>2*_?_:0:W=q>2*_?_:0;var X=1;se&&(X=re?Math.min(1,Q/U):Math.min(1,q/N));var te=k(oe),ee=P(G,te),ie=(re?ee.x:ee.y)/2,le=(G.left+G.right)/2,ye=(G.top+G.bottom)/2,ue=(V+Y)/2,pe=(K+J)/2,ge=0,Te=0,_e=re?b(Y,V):b(K,J);return re?(ue=Y-_e*W,ge=_e*ie):(pe=J+_e*W,Te=-_e*ie),{textX:le,textY:ye,targetX:ue,targetY:pe,anchorX:ge,anchorY:Te,scale:X,rotate:te}}function D(V,Y,K,J,G){var Z=Y[0].trace,re=Z.texttemplate,se;return re?se=B(V,Y,K,J,G):Z.textinfo?se=F(Y,K,J,G):se=p.getValue(Z.text,K),p.coerceString(v,se)}function R(V,Y){var K=p.getValue(V.textposition,Y);return p.coerceEnumerated(x,K)}function B(V,Y,K,J,G){var Z=Y[0].trace,re=M.castOption(Z,K,"texttemplate");if(!re)return"";var se=Z.type==="histogram",oe=Z.type==="waterfall",N=Z.type==="funnel",U=Z.orientation==="h",q,Q,W,X;U?(q="y",Q=G,W="x",X=J):(q="x",Q=J,W="y",X=G);function te(ge){return t(Q,Q.c2l(ge),!0).text}function ee(ge){return t(X,X.c2l(ge),!0).text}var ie=Y[K],le={};le.label=ie.p,le.labelLabel=le[q+"Label"]=te(ie.p);var ye=M.castOption(Z,ie.i,"text");(ye===0||ye)&&(le.text=ye),le.value=ie.s,le.valueLabel=le[W+"Label"]=ee(ie.s);var ue={};l(ue,Z,ie.i),(se||ue.x===void 0)&&(ue.x=U?le.value:le.label),(se||ue.y===void 0)&&(ue.y=U?le.label:le.value),(se||ue.xLabel===void 0)&&(ue.xLabel=U?le.valueLabel:le.labelLabel),(se||ue.yLabel===void 0)&&(ue.yLabel=U?le.labelLabel:le.valueLabel),oe&&(le.delta=+ie.rawS||ie.s,le.deltaLabel=ee(le.delta),le.final=ie.v,le.finalLabel=ee(le.final),le.initial=le.final-le.delta,le.initialLabel=ee(le.initial)),N&&(le.value=ie.s,le.valueLabel=ee(le.value),le.percentInitial=ie.begR,le.percentInitialLabel=M.formatPercent(ie.begR),le.percentPrevious=ie.difR,le.percentPreviousLabel=M.formatPercent(ie.difR),le.percentTotal=ie.sumR,le.percenTotalLabel=M.formatPercent(ie.sumR));var pe=M.castOption(Z,ie.i,"customdata");return pe&&(le.customdata=pe),M.texttemplateString(re,le,V._d3locale,ue,le,Z._meta||{})}function F(V,Y,K,J){var G=V[0].trace,Z=G.orientation==="h",re=G.type==="waterfall",se=G.type==="funnel";function oe(pe){var ge=Z?J:K;return t(ge,pe,!0).text}function N(pe){var ge=Z?K:J;return t(ge,+pe,!0).text}var U=G.textinfo,q=V[Y],Q=U.split("+"),W=[],X,te=function(pe){return Q.indexOf(pe)!==-1};if(te("label")&&W.push(oe(V[Y].p)),te("text")&&(X=M.castOption(G,q.i,"text"),(X===0||X)&&W.push(X)),re){var ee=+q.rawS||q.s,ie=q.v,le=ie-ee;te("initial")&&W.push(N(le)),te("delta")&&W.push(N(ee)),te("final")&&W.push(N(ie))}if(se){te("value")&&W.push(N(q.s));var ye=0;te("percent initial")&&ye++,te("percent previous")&&ye++,te("percent total")&&ye++;var ue=ye>1;te("percent initial")&&(X=M.formatPercent(q.begR),ue&&(X+=" of initial"),W.push(X)),te("percent previous")&&(X=M.formatPercent(q.difR),ue&&(X+=" of previous"),W.push(X)),te("percent total")&&(X=M.formatPercent(q.sumR),ue&&(X+=" of total"),W.push(X))}return W.join("<br>")}ne.exports={plot:L,toMoveInsideBar:z}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(g,ne,ae){ne.exports=function(M,A){var e=M.cd,a=M.xaxis,n=M.yaxis,t=e[0].trace,r=t.type==="funnel",f=t.orientation==="h",o=[],i;if(A===!1)for(i=0;i<e.length;i++)e[i].selected=0;else for(i=0;i<e.length;i++){var p=e[i],d="ct"in p?p.ct:T(p,a,n,f,r);A.contains(d,!1,i,M)?(o.push({pointNumber:i,x:a.c2d(p.x),y:n.c2d(p.y)}),p.selected=1):p.selected=0}return o};function T(c,M,A,e,a){var n=M.c2p(e?c.s0:c.p0,!0),t=M.c2p(e?c.s1:c.p1,!0),r=A.c2p(e?c.p0:c.s0,!0),f=A.c2p(e?c.p1:c.s1,!0);return a?[(n+t)/2,(r+f)/2]:e?[t,(r+f)/2]:[(n+t)/2,f]}},{}],661:[function(g,ne,ae){ne.exports=M;var T=g("../../lib").distinctVals,c=g("../../constants/numerical").BADNUM;function M(A,e){this.traces=A,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var a=1/0,n=[],t=0;t<A.length;t++){for(var r=A[t],f=0;f<r.length;f++){var o=r[f];o.p!==c&&n.push(o.p)}r[0]&&r[0].width1&&(a=Math.min(r[0].width1,a))}this.positions=n;var i=T(n);this.distinctPositions=i.vals,i.vals.length===1&&a!==1/0?this.minDiff=a:this.minDiff=Math.min(i.minDiff,a);var p=(e.posAxis||{}).type;(p==="category"||p==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}M.prototype.put=function(e,a){var n=this.getLabel(e,a),t=this.bins[n]||0;return this.bins[n]=t+a,t},M.prototype.get=function(e,a){var n=this.getLabel(e,a);return this.bins[n]||0},M.prototype.getLabel=function(e,a){var n=a<0&&this.sepNegVal?"v":"^",t=this.overlapNoMerge?e:Math.round(e/this.binWidth);return n+t}},{"../../constants/numerical":479,"../../lib":503}],662:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/color"),M=g("../../components/drawing"),A=g("../../lib"),e=g("../../registry"),a=g("./uniform_text").resizeText,n=g("./attributes"),t=n.textfont,r=n.insidetextfont,f=n.outsidetextfont,o=g("./helpers");function i(m){var u=T.select(m).selectAll("g.barlayer").selectAll("g.trace");a(m,u,"bar");var L=u.size(),S=m._fullLayout;u.style("opacity",function(k){return k[0].trace.opacity}).each(function(k){(S.barmode==="stack"&&L>1||S.bargap===0&&S.bargroupgap===0&&!k[0].trace.marker.line.width)&&T.select(this).attr("shape-rendering","crispEdges")}),u.selectAll("g.points").each(function(k){var P=T.select(this),z=k[0].trace;p(P,z,m)}),e.getComponentMethod("errorbars","style")(u)}function p(m,u,L){M.pointStyle(m.selectAll("path"),u,L),d(m,u,L)}function d(m,u,L){m.selectAll("text").each(function(S){var k=T.select(this),P=A.ensureUniformFontSize(L,l(k,S,u,L));M.font(k,P)})}function y(m,u,L){var S=u[0].trace;S.selectedpoints?v(L,S,m):(p(L,S,m),e.getComponentMethod("errorbars","style")(L))}function v(m,u,L){M.selectedPointStyle(m.selectAll("path"),u),x(m.selectAll("text"),u,L)}function x(m,u,L){m.each(function(S){var k=T.select(this),P;if(S.selected){P=A.ensureUniformFontSize(L,l(k,S,u,L));var z=u.selected.textfont&&u.selected.textfont.color;z&&(P.color=z),M.font(k,P)}else M.selectedTextStyle(k,u)})}function l(m,u,L,S){var k=S._fullLayout.font,P=L.textfont;if(m.classed("bartext-inside")){var z=h(u,L);P=s(L,u.i,k,z)}else m.classed("bartext-outside")&&(P=w(L,u.i,k));return P}function _(m,u,L){return b(t,m.textfont,u,L)}function s(m,u,L,S){var k=_(m,u,L),P=m._input.textfont===void 0||m._input.textfont.color===void 0||Array.isArray(m.textfont.color)&&m.textfont.color[u]===void 0;return P&&(k={color:c.contrast(S),family:k.family,size:k.size}),b(r,m.insidetextfont,u,k)}function w(m,u,L){var S=_(m,u,L);return b(f,m.outsidetextfont,u,S)}function b(m,u,L,S){u=u||{};var k=o.getValue(u.family,L),P=o.getValue(u.size,L),z=o.getValue(u.color,L);return{family:o.coerceString(m.family,k,S.family),size:o.coerceNumber(m.size,P,S.size),color:o.coerceColor(m.color,z,S.color)}}function h(m,u){return u.type==="waterfall"?u[m.dir].marker.color:m.mcc||m.mc||u.marker.color}ne.exports={style:i,styleTextPoints:d,styleOnSelect:y,getInsideTextFont:s,getOutsideTextFont:w,getBarColor:h,resizeText:a}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(g,ne,ae){var T=g("../../components/color"),c=g("../../components/colorscale/helpers").hasColorscale,M=g("../../components/colorscale/defaults"),A=g("../../lib").coercePattern;ne.exports=function(a,n,t,r,f){var o=t("marker.color",r),i=c(a,"marker");i&&M(a,n,f,t,{prefix:"marker.",cLetter:"c"}),t("marker.line.color",T.defaultLine),c(a,"marker.line")&&M(a,n,f,t,{prefix:"marker.line.",cLetter:"c"}),t("marker.line.width"),t("marker.opacity"),A(t,"marker.pattern",o,i),t("selected.marker.color"),t("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib");function M(n,t,r){var f=n._fullLayout,o=f["_"+r+"Text_minsize"];if(o){var i=f.uniformtext.mode==="hide",p;switch(r){case"funnelarea":case"pie":case"sunburst":p="g.slice";break;case"treemap":case"icicle":p="g.slice, g.pathbar";break;default:p="g.points > g.point"}t.selectAll(p).each(function(d){var y=d.transform;if(y){y.scale=i&&y.hide?0:o/y.fontSize;var v=T.select(this).select("text");v.attr("transform",c.getTextTransform(y))}})}}function A(n,t,r){if(r.uniformtext.mode){var f=a(n),o=r.uniformtext.minsize,i=t.scale*t.fontSize;t.hide=i<o,r[f]=r[f]||1/0,t.hide||(r[f]=Math.min(r[f],Math.max(i,o)))}}function e(n,t){var r=a(n);t[r]=void 0}function a(n){return"_"+n+"Text_minsize"}ne.exports={recordMinTextSize:A,clearMinTextSize:e,resizeText:M}},{"../../lib":503,"@plotly/d3":58}],665:[function(g,ne,ae){var T=g("../../plots/template_attributes").hovertemplateAttrs,c=g("../../lib/extend").extendFlat,M=g("../scatterpolar/attributes"),A=g("../bar/attributes");ne.exports={r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,base:c({},A.base,{}),offset:c({},A.offset,{}),width:c({},A.width,{}),text:c({},A.text,{}),hovertext:c({},A.hovertext,{}),marker:A.marker,hoverinfo:M.hoverinfo,hovertemplate:T(),selected:A.selected,unselected:A.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1002}],666:[function(g,ne,ae){var T=g("../../components/colorscale/helpers").hasColorscale,c=g("../../components/colorscale/calc"),M=g("../bar/arrays_to_calcdata"),A=g("../bar/cross_trace_calc").setGroupPositions,e=g("../scatter/calc_selection"),a=g("../../registry").traceIs,n=g("../../lib").extendFlat;function t(f,o){for(var i=f._fullLayout,p=o.subplot,d=i[p].radialaxis,y=i[p].angularaxis,v=d.makeCalcdata(o,"r"),x=y.makeCalcdata(o,"theta"),l=o._length,_=new Array(l),s=v,w=x,b=0;b<l;b++)_[b]={p:w[b],s:s[b]};function h(m){var u=o[m];u!==void 0&&(o["_"+m]=Array.isArray(u)?y.makeCalcdata(o,m):y.d2c(u,o.thetaunit))}return y.type==="linear"&&(h("width"),h("offset")),T(o,"marker")&&c(f,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),T(o,"marker.line")&&c(f,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),M(_,o),e(_,o),_}function r(f,o,i){for(var p=f.calcdata,d=[],y=0;y<p.length;y++){var v=p[y],x=v[0].trace;x.visible===!0&&a(x,"bar")&&x.subplot===i&&d.push(v)}var l=n({},o.radialaxis,{_id:"x"}),_=o.angularaxis;A(f,_,l,d,{mode:o.barmode,norm:o.barnorm,gap:o.bargap,groupgap:o.bargroupgap})}ne.exports={calc:t,crossTraceCalc:r}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":929}],667:[function(g,ne,ae){var T=g("../../lib"),c=g("../scatterpolar/defaults").handleRThetaDefaults,M=g("../bar/style_defaults"),A=g("./attributes");ne.exports=function(a,n,t,r){function f(i,p){return T.coerce(a,n,A,i,p)}var o=c(a,n,r,f);if(!o){n.visible=!1;return}f("thetaunit"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate"),M(a,n,f,t,r),T.coerceSelectionMarkerOpacity(n,f)}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1004,"./attributes":665}],668:[function(g,ne,ae){var T=g("../../components/fx"),c=g("../../lib"),M=g("../bar/hover").getTraceColor,A=c.fillText,e=g("../scatterpolar/hover").makeHoverPointText,a=g("../../plots/polar/helpers").isPtInsidePolygon;ne.exports=function(t,r,f){var o=t.cd,i=o[0].trace,p=t.subplot,d=p.radialAxis,y=p.angularAxis,v=p.vangles,x=v?a:c.isPtInsideSector,l=t.maxHoverDistance,_=y._period||2*Math.PI,s=Math.abs(d.g2p(Math.sqrt(r*r+f*f))),w=Math.atan2(f,r);d.range[0]>d.range[1]&&(w+=Math.PI);var b=function(L){return x(s,w,[L.rp0,L.rp1],[L.thetag0,L.thetag1],v)?l+Math.min(1,Math.abs(L.thetag1-L.thetag0)/_)-1+(L.rp1-s)/(L.rp1-L.rp0)-1:1/0};if(T.getClosest(o,b,t),t.index!==!1){var h=t.index,m=o[h];t.x0=t.x1=m.ct[0],t.y0=t.y1=m.ct[1];var u=c.extendFlat({},m,{r:m.s,theta:m.p});return A(m,i,t),e(u,i,p,t),t.hovertemplate=i.hovertemplate,t.color=M(i,m),t.xLabelVal=t.yLabelVal=void 0,m.s<0&&(t.idealAlign="left"),[t]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1006}],669:[function(g,ne,ae){ne.exports={moduleType:"trace",name:"barpolar",basePlotModule:g("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults"),supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc").calc,crossTraceCalc:g("./calc").crossTraceCalc,plot:g("./plot"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("../scatterpolar/format_labels"),style:g("../bar/style").style,styleOnSelect:g("../bar/style").styleOnSelect,hoverPoints:g("./hover"),selectPoints:g("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"../scatterpolar/format_labels":1005,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(g,ne,ae){ne.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(g,ne,ae){var T=g("../../lib"),c=g("./layout_attributes");ne.exports=function(M,A,e){var a={},n;function t(o,i){return T.coerce(M[n]||{},A[n],c,o,i)}for(var r=0;r<e.length;r++){var f=e[r];f.type==="barpolar"&&f.visible===!0&&(n=f.subplot,a[n]||(t("barmode"),t("bargap"),a[n]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("fast-isnumeric"),M=g("../../lib"),A=g("../../components/drawing"),e=g("../../plots/polar/helpers");ne.exports=function(t,r,f){var o=r.xaxis,i=r.yaxis,p=r.radialAxis,d=r.angularAxis,y=a(r),v=r.layers.frontplot.select("g.barlayer");M.makeTraceGroups(v,f,"trace bars").each(function(){var x=T.select(this),l=M.ensureSingle(x,"g","points"),_=l.selectAll("g.point").data(M.identity);_.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),_.exit().remove(),_.each(function(s){var w=T.select(this),b=s.rp0=p.c2p(s.s0),h=s.rp1=p.c2p(s.s1),m=s.thetag0=d.c2g(s.p0),u=s.thetag1=d.c2g(s.p1),L;if(!c(b)||!c(h)||!c(m)||!c(u)||b===h||m===u)L="M0,0Z";else{var S=p.c2g(s.s1),k=(m+u)/2;s.ct=[o.c2p(S*Math.cos(k)),i.c2p(S*Math.sin(k))],L=y(b,h,m,u)}M.ensureSingle(w,"path").attr("d",L)}),A.setClipUrl(x,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,t)})};function a(n){var t=n.cxx,r=n.cyy;return n.vangles?function(f,o,i,p){var d,y;M.angleDelta(i,p)>0?(d=i,y=p):(d=p,y=i);var v=e.findEnclosingVertexAngles(d,n.vangles)[0],x=e.findEnclosingVertexAngles(y,n.vangles)[1],l=[v,(d+y)/2,x];return e.pathPolygonAnnulus(f,o,d,y,l,t,r)}:function(f,o,i,p){return M.pathAnnulus(f,o,i,p,t,r)}}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(g,ne,ae){var T=g("../scatter/attributes"),c=g("../bar/attributes"),M=g("../../components/color/attributes"),A=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=g("../../plots/template_attributes").hovertemplateAttrs,a=g("../../lib/extend").extendFlat,n=T.marker,t=n.line;ne.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:a({},n.symbol,{arrayOk:!1,editType:"plot"}),opacity:a({},n.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:a({},n.size,{arrayOk:!1,editType:"calc"}),color:a({},n.color,{arrayOk:!1,editType:"style"}),line:{color:a({},t.color,{arrayOk:!1,dflt:M.defaultLine,editType:"style"}),width:a({},t.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:T.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:c.offsetgroup,alignmentgroup:c.alignmentgroup,selected:{marker:T.selected.marker,editType:"style"},unselected:{marker:T.unselected.marker,editType:"style"},text:a({},T.text,{}),hovertext:a({},T.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927}],674:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../plots/cartesian/axes"),M=g("../../plots/cartesian/align_period"),A=g("../../lib"),e=g("../../constants/numerical").BADNUM,a=A._;ne.exports=function(w,b){var h=w._fullLayout,m=c.getFromId(w,b.xaxis||"x"),u=c.getFromId(w,b.yaxis||"y"),L=[],S=b.type==="violin"?"_numViolins":"_numBoxes",k,P,z,I,D,R,B;b.orientation==="h"?(z=m,I="x",D=u,R="y",B=!!b.yperiodalignment):(z=u,I="y",D=m,R="x",B=!!b.xperiodalignment);var F=n(b,R,D,h[S]),V=F[0],Y=F[1],K=A.distinctVals(V,D),J=K.vals,G=K.minDiff/2,Z,re,se,oe,N,U,q=(b.boxpoints||b.points)==="all"?A.identity:function(Tt){return Tt.v<Z.lf||Tt.v>Z.uf};if(b._hasPreCompStats){var Q=b[I],W=function(Tt){return z.d2c((b[Tt]||[])[k])},X=1/0,te=-1/0;for(k=0;k<b._length;k++){var ee=V[k];if(!!T(ee)){if(Z={},Z.pos=Z[R]=ee,B&&Y&&(Z.orig_p=Y[k]),Z.q1=W("q1"),Z.med=W("median"),Z.q3=W("q3"),re=[],Q&&A.isArrayOrTypedArray(Q[k]))for(P=0;P<Q[k].length;P++)U=z.d2c(Q[k][P]),U!==e&&(N={v:U,i:[k,P]},o(N,b,[k,P]),re.push(N));if(Z.pts=re.sort(p),se=Z[I]=re.map(d),oe=se.length,Z.med!==e&&Z.q1!==e&&Z.q3!==e&&Z.med>=Z.q1&&Z.q3>=Z.med){var ie=W("lowerfence");Z.lf=ie!==e&&ie<=Z.q1?ie:y(Z,se,oe);var le=W("upperfence");Z.uf=le!==e&&le>=Z.q3?le:v(Z,se,oe);var ye=W("mean");Z.mean=ye!==e?ye:oe?A.mean(se,oe):(Z.q1+Z.q3)/2;var ue=W("sd");Z.sd=ye!==e&&ue>=0?ue:oe?A.stdev(se,oe,Z.mean):Z.q3-Z.q1,Z.lo=x(Z),Z.uo=l(Z);var pe=W("notchspan");pe=pe!==e&&pe>0?pe:_(Z,oe),Z.ln=Z.med-pe,Z.un=Z.med+pe;var ge=Z.lf,Te=Z.uf;b.boxpoints&&se.length&&(ge=Math.min(ge,se[0]),Te=Math.max(Te,se[oe-1])),b.notched&&(ge=Math.min(ge,Z.ln),Te=Math.max(Te,Z.un)),Z.min=ge,Z.max=Te}else{A.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+Z.q1,"median = "+Z.med,"q3 = "+Z.q3].join(`
`));var _e;Z.med!==e?_e=Z.med:Z.q1!==e?Z.q3!==e?_e=(Z.q1+Z.q3)/2:_e=Z.q1:Z.q3!==e?_e=Z.q3:_e=0,Z.med=_e,Z.q1=Z.q3=_e,Z.lf=Z.uf=_e,Z.mean=Z.sd=_e,Z.ln=Z.un=_e,Z.min=Z.max=_e}X=Math.min(X,Z.min),te=Math.max(te,Z.max),Z.pts2=re.filter(q),L.push(Z)}}b._extremes[z._id]=c.findExtremes(z,[X,te],{padded:!0})}else{var De=z.makeCalcdata(b,I),Oe=t(J,G),Ue=J.length,xe=r(Ue);for(k=0;k<b._length;k++)if(U=De[k],!!T(U)){var Pe=A.findBin(V[k],Oe);Pe>=0&&Pe<Ue&&(N={v:U,i:k},o(N,b,k),xe[Pe].push(N))}var Ve=1/0,Qe=-1/0,Fe=b.quartilemethod,Le=Fe==="exclusive",Ne=Fe==="inclusive";for(k=0;k<Ue;k++)if(xe[k].length>0){if(Z={},Z.pos=Z[R]=J[k],re=Z.pts=xe[k].sort(p),se=Z[I]=re.map(d),oe=se.length,Z.min=se[0],Z.max=se[oe-1],Z.mean=A.mean(se,oe),Z.sd=A.stdev(se,oe,Z.mean),Z.med=A.interp(se,.5),oe%2&&(Le||Ne)){var dt,Dt;Le?(dt=se.slice(0,oe/2),Dt=se.slice(oe/2+1)):Ne&&(dt=se.slice(0,oe/2+1),Dt=se.slice(oe/2)),Z.q1=A.interp(dt,.5),Z.q3=A.interp(Dt,.5)}else Z.q1=A.interp(se,.25),Z.q3=A.interp(se,.75);Z.lf=y(Z,se,oe),Z.uf=v(Z,se,oe),Z.lo=x(Z),Z.uo=l(Z);var Xt=_(Z,oe);Z.ln=Z.med-Xt,Z.un=Z.med+Xt,Ve=Math.min(Ve,Z.ln),Qe=Math.max(Qe,Z.un),Z.pts2=re.filter(q),L.push(Z)}b._extremes[z._id]=c.findExtremes(z,b.notched?De.concat([Ve,Qe]):De,{padded:!0})}return i(L,b),L.length>0?(L[0].t={num:h[S],dPos:G,posLetter:R,valLetter:I,labels:{med:a(w,"median:"),min:a(w,"min:"),q1:a(w,"q1:"),q3:a(w,"q3:"),max:a(w,"max:"),mean:b.boxmean==="sd"?a(w,"mean \xB1 \u03C3:"):a(w,"mean:"),lf:a(w,"lower fence:"),uf:a(w,"upper fence:")}},h[S]++,L):[{t:{empty:!0}}]};function n(s,w,b,h){var m=w in s,u=w+"0"in s,L="d"+w in s;if(m||u&&L){var S=b.makeCalcdata(s,w),k=M(s,b,w,S).vals;return[k,S]}var P;u?P=s[w+"0"]:"name"in s&&(b.type==="category"||T(s.name)&&["linear","log"].indexOf(b.type)!==-1||A.isDateTime(s.name)&&b.type==="date")?P=s.name:P=h;for(var z=b.type==="multicategory"?b.r2c_just_indices(P):b.d2c(P,0,s[w+"calendar"]),I=s._length,D=new Array(I),R=0;R<I;R++)D[R]=z;return[D]}function t(s,w){for(var b=s.length,h=new Array(b+1),m=0;m<b;m++)h[m]=s[m]-w;return h[b]=s[b-1]+w,h}function r(s){for(var w=new Array(s),b=0;b<s;b++)w[b]=[];return w}var f={text:"tx",hovertext:"htx"};function o(s,w,b){for(var h in f)A.isArrayOrTypedArray(w[h])&&(Array.isArray(b)?A.isArrayOrTypedArray(w[h][b[0]])&&(s[f[h]]=w[h][b[0]][b[1]]):s[f[h]]=w[h][b])}function i(s,w){if(A.isArrayOrTypedArray(w.selectedpoints))for(var b=0;b<s.length;b++){for(var h=s[b].pts||[],m={},u=0;u<h.length;u++)m[h[u].i]=u;A.tagSelected(h,w,m)}}function p(s,w){return s.v-w.v}function d(s){return s.v}function y(s,w,b){return b===0?s.q1:Math.min(s.q1,w[Math.min(A.findBin(2.5*s.q1-1.5*s.q3,w,!0)+1,b-1)])}function v(s,w,b){return b===0?s.q3:Math.max(s.q3,w[Math.max(A.findBin(2.5*s.q3-1.5*s.q1,w),0)])}function x(s){return 4*s.q1-3*s.q3}function l(s){return 4*s.q3-3*s.q1}function _(s,w){return w===0?0:1.57*(s.q3-s.q1)/Math.sqrt(w)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(g,ne,ae){var T=g("../../plots/cartesian/axes"),c=g("../../lib"),M=g("../../plots/cartesian/constraints").getAxisGroup,A=["v","h"];function e(n,t){for(var r=n.calcdata,f=t.xaxis,o=t.yaxis,i=0;i<A.length;i++){for(var p=A[i],d=p==="h"?o:f,y=[],v=0;v<r.length;v++){var x=r[v],l=x[0].t,_=x[0].trace;_.visible===!0&&(_.type==="box"||_.type==="candlestick")&&!l.empty&&(_.orientation||"v")===p&&_.xaxis===f._id&&_.yaxis===o._id&&y.push(v)}a("box",n,y,d)}}function a(n,t,r,f){var o=t.calcdata,i=t._fullLayout,p=f._id,d=p.charAt(0),y,v,x,l=[],_=0;for(y=0;y<r.length;y++)for(x=o[r[y]],v=0;v<x.length;v++)l.push(f.c2l(x[v].pos,!0)),_+=(x[v].pts2||[]).length;if(!!l.length){var s=c.distinctVals(l);(f.type==="category"||f.type==="multicategory")&&(s.minDiff=1);var w=s.minDiff/2;T.minDtick(f,s.minDiff,s.vals[0],!0);var b=n==="violin"?"_numViolins":"_numBoxes",h=i[b],m=i[n+"mode"]==="group"&&h>1,u=1-i[n+"gap"],L=1-i[n+"groupgap"];for(y=0;y<r.length;y++){x=o[r[y]];var S=x[0].trace,k=x[0].t,P=S.width,z=S.side,I,D,R,B;if(P)I=D=B=P/2,R=0;else if(I=w,m){var F=M(i,f._id)+S.orientation,V=i._alignmentOpts[F]||{},Y=V[S.alignmentgroup]||{},K=Object.keys(Y.offsetGroups||{}).length,J=K||h,G=K?S._offsetIndex:k.num;D=I*u*L/J,R=2*I*(-.5+(G+.5)/J)*u,B=I*u/J}else D=I*u*L,R=0,B=I;k.dPos=I,k.bPos=R,k.bdPos=D,k.wHover=B;var Z,re,se=R+D,oe,N,U,q,Q,W,X=Boolean(P),te=(S.boxpoints||S.points)&&_>0;if(z==="positive"?(Z=I*(P?1:.5),oe=se,re=oe=R):z==="negative"?(Z=oe=R,re=I*(P?1:.5),N=se):(Z=re=I,oe=N=se),te){var ee=S.pointpos,ie=S.jitter,le=S.marker.size/2,ye=0;ee+ie>=0&&(ye=se*(ee+ie),ye>Z?(X=!0,Q=le,U=ye):ye>oe&&(Q=le,U=Z)),ye<=Z&&(U=Z);var ue=0;ee-ie<=0&&(ue=-se*(ee-ie),ue>re?(X=!0,W=le,q=ue):ue>N&&(W=le,q=re)),ue<=re&&(q=re)}else U=Z,q=re;var pe=new Array(x.length);for(v=0;v<x.length;v++)pe[v]=x[v].pos;S._extremes[p]=T.findExtremes(f,pe,{padded:X,vpadminus:q,vpadplus:U,vpadLinearized:!0,ppadminus:{x:W,y:Q}[d],ppadplus:{x:Q,y:W}[d]})}}}ne.exports={crossTraceCalc:e,setPositionOffset:a}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(g,ne,ae){var T=g("../../lib"),c=g("../../registry"),M=g("../../components/color"),A=g("../scatter/period_defaults"),e=g("../bar/defaults").handleGroupingDefaults,a=g("../../plots/cartesian/axis_autotype"),n=g("./attributes");function t(i,p,d,y){function v(m,u){return T.coerce(i,p,n,m,u)}if(r(i,p,v,y),p.visible!==!1){A(i,p,y,v),v("xhoverformat"),v("yhoverformat");var x=p._hasPreCompStats;x&&(v("lowerfence"),v("upperfence")),v("line.color",(i.marker||{}).color||d),v("line.width"),v("fillcolor",M.addOpacity(p.line.color,.5));var l=!1;if(x){var _=v("mean"),s=v("sd");_&&_.length&&(l=!0,s&&s.length&&(l="sd"))}v("boxmean",l),v("whiskerwidth"),v("width"),v("quartilemethod");var w=!1;if(x){var b=v("notchspan");b&&b.length&&(w=!0)}else T.validate(i.notchwidth,n.notchwidth)&&(w=!0);var h=v("notched",w);h&&v("notchwidth"),f(i,p,v,{prefix:"box"})}}function r(i,p,d,y){function v(K){var J=0;return K&&K.length&&(J+=1,T.isArrayOrTypedArray(K[0])&&K[0].length&&(J+=1)),J}function x(K){return T.validate(i[K],n[K])}var l=d("y"),_=d("x"),s;if(p.type==="box"){var w=d("q1"),b=d("median"),h=d("q3");p._hasPreCompStats=w&&w.length&&b&&b.length&&h&&h.length,s=Math.min(T.minRowLength(w),T.minRowLength(b),T.minRowLength(h))}var m=v(l),u=v(_),L=m&&T.minRowLength(l),S=u&&T.minRowLength(_),k=y.calendar,P={autotypenumbers:y.autotypenumbers},z,I;if(p._hasPreCompStats)switch(String(u)+String(m)){case"00":var D=x("x0")||x("dx"),R=x("y0")||x("dy");R&&!D?z="h":z="v",I=s;break;case"10":z="v",I=Math.min(s,S);break;case"20":z="h",I=Math.min(s,_.length);break;case"01":z="h",I=Math.min(s,L);break;case"02":z="v",I=Math.min(s,l.length);break;case"12":z="v",I=Math.min(s,S,l.length);break;case"21":z="h",I=Math.min(s,_.length,L);break;case"11":I=0;break;case"22":var B=!1,F;for(F=0;F<_.length;F++)if(a(_[F],k,P)==="category"){B=!0;break}if(B)z="v",I=Math.min(s,S,l.length);else{for(F=0;F<l.length;F++)if(a(l[F],k,P)==="category"){B=!0;break}B?(z="h",I=Math.min(s,_.length,L)):(z="v",I=Math.min(s,S,l.length))}break}else m>0?(z="v",u>0?I=Math.min(S,L):I=Math.min(L)):u>0?(z="h",I=Math.min(S)):I=0;if(!I){p.visible=!1;return}p._length=I;var V=d("orientation",z);p._hasPreCompStats?V==="v"&&u===0?(d("x0",0),d("dx",1)):V==="h"&&m===0&&(d("y0",0),d("dy",1)):V==="v"&&u===0?d("x0"):V==="h"&&m===0&&d("y0");var Y=c.getComponentMethod("calendars","handleTraceDefaults");Y(i,p,["x","y"],y)}function f(i,p,d,y){var v=y.prefix,x=T.coerce2(i,p,n,"marker.outliercolor"),l=d("marker.line.outliercolor"),_="outliers";p._hasPreCompStats?_="all":(x||l)&&(_="suspectedoutliers");var s=d(v+"points",_);s?(d("jitter",s==="all"?.3:0),d("pointpos",s==="all"?-1.5:0),d("marker.symbol"),d("marker.opacity"),d("marker.size"),d("marker.color",p.line.color),d("marker.line.color"),d("marker.line.width"),s==="suspectedoutliers"&&(d("marker.line.outliercolor",p.marker.color),d("marker.line.outlierwidth")),d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size"),d("text"),d("hovertext")):delete p.marker;var w=d("hoveron");(w==="all"||w.indexOf("points")!==-1)&&d("hovertemplate"),T.coerceSelectionMarkerOpacity(p,d)}function o(i,p){var d,y;function v(_){return T.coerce(y._input,y,n,_)}for(var x=0;x<i.length;x++){y=i[x];var l=y.type;(l==="box"||l==="violin")&&(d=y._input,p[l+"mode"]==="group"&&e(d,y,p,v))}}ne.exports={supplyDefaults:t,crossTraceDefaults:o,handleSampleDefaults:r,handlePointsDefaults:f}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":947,"./attributes":673}],677:[function(g,ne,ae){ne.exports=function(c,M){return M.hoverOnBox&&(c.hoverOnBox=M.hoverOnBox),"xVal"in M&&(c.x=M.xVal),"yVal"in M&&(c.y=M.yVal),M.xa&&(c.xaxis=M.xa),M.ya&&(c.yaxis=M.ya),c}},{}],678:[function(g,ne,ae){var T=g("../../plots/cartesian/axes"),c=g("../../lib"),M=g("../../components/fx"),A=g("../../components/color"),e=c.fillText;function a(r,f,o,i){var p=r.cd,d=p[0].trace,y=d.hoveron,v=[],x;return y.indexOf("boxes")!==-1&&(v=v.concat(n(r,f,o,i))),y.indexOf("points")!==-1&&(x=t(r,f,o)),i==="closest"?x?[x]:v:(x&&v.push(x),v)}function n(r,f,o,i){var p=r.cd,d=r.xa,y=r.ya,v=p[0].trace,x=p[0].t,l=v.type==="violin",_=[],s,w,b,h,m,u,L,S,k,P,z,I=x.bdPos,D,R,B=x.wHover,F=function(te){return b.c2l(te.pos)+x.bPos-b.c2l(u)};l&&v.side!=="both"?(v.side==="positive"&&(k=function(te){var ee=F(te);return M.inbox(ee,ee+B,P)},D=I,R=0),v.side==="negative"&&(k=function(te){var ee=F(te);return M.inbox(ee-B,ee,P)},D=0,R=I)):(k=function(te){var ee=F(te);return M.inbox(ee-B,ee+B,P)},D=R=I);var V;l?V=function(te){return M.inbox(te.span[0]-m,te.span[1]-m,P)}:V=function(te){return M.inbox(te.min-m,te.max-m,P)},v.orientation==="h"?(m=f,u=o,L=V,S=k,s="y",b=y,w="x",h=d):(m=o,u=f,L=k,S=V,s="x",b=d,w="y",h=y);var Y=Math.min(1,I/Math.abs(b.r2c(b.range[1])-b.r2c(b.range[0])));P=r.maxHoverDistance-Y,z=r.maxSpikeDistance-Y;function K(te){return(L(te)+S(te))/2}var J=M.getDistanceFunction(i,L,S,K);if(M.getClosest(p,J,r),r.index===!1)return[];var G=p[r.index],Z=v.line.color,re=(v.marker||{}).color;A.opacity(Z)&&v.line.width?r.color=Z:A.opacity(re)&&v.boxpoints?r.color=re:r.color=v.fillcolor,r[s+"0"]=b.c2p(G.pos+x.bPos-R,!0),r[s+"1"]=b.c2p(G.pos+x.bPos+D,!0),r[s+"LabelVal"]=G.orig_p!==void 0?G.orig_p:G.pos;var se=s+"Spike";r.spikeDistance=K(G)*z/P,r[se]=b.c2p(G.pos,!0);var oe={},N=["med","q1","q3","min","max"];(v.boxmean||(v.meanline||{}).visible)&&N.push("mean"),(v.boxpoints||v.points)&&N.push("lf","uf");for(var U=0;U<N.length;U++){var q=N[U];if(!(!(q in G)||G[q]in oe)){oe[G[q]]=!0;var Q=G[q],W=h.c2p(Q,!0),X=c.extendFlat({},r);X.attr=q,X[w+"0"]=X[w+"1"]=W,X[w+"LabelVal"]=Q,X[w+"Label"]=(x.labels?x.labels[q]+" ":"")+T.hoverLabelText(h,Q,v[w+"hoverformat"]),X.hoverOnBox=!0,q==="mean"&&"sd"in G&&v.boxmean==="sd"&&(X[w+"err"]=G.sd),r.name="",r.spikeDistance=void 0,r[se]=void 0,X.hovertemplate=!1,_.push(X)}}return _}function t(r,f,o){for(var i=r.cd,p=r.xa,d=r.ya,y=i[0].trace,v=p.c2p(f),x=d.c2p(o),l,_=function(F){var V=Math.max(3,F.mrc||0);return Math.max(Math.abs(p.c2p(F.x)-v)-V,1-3/V)},s=function(F){var V=Math.max(3,F.mrc||0);return Math.max(Math.abs(d.c2p(F.y)-x)-V,1-3/V)},w=M.quadrature(_,s),b=!1,h,m,u=0;u<i.length;u++){h=i[u];for(var L=0;L<(h.pts||[]).length;L++){m=h.pts[L];var S=w(m);S<=r.distance&&(r.distance=S,b=[u,L])}}if(!b)return!1;h=i[b[0]],m=h.pts[b[1]];var k=p.c2p(m.x,!0),P=d.c2p(m.y,!0),z=m.mrc||1;l=c.extendFlat({},r,{index:m.i,color:(y.marker||{}).color,name:y.name,x0:k-z,x1:k+z,y0:P-z,y1:P+z,spikeDistance:r.distance,hovertemplate:y.hovertemplate});var I=h.orig_p,D=I!==void 0?I:h.pos,R;y.orientation==="h"?(R=d,l.xLabelVal=m.x,l.yLabelVal=D):(R=p,l.xLabelVal=D,l.yLabelVal=m.y);var B=R._id.charAt(0);return l[B+"Spike"]=R.c2p(h.pos,!0),e(m,y,l),l}ne.exports={hoverPoints:a,hoverOnBoxes:n,hoverOnPoints:t}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults").supplyDefaults,crossTraceDefaults:g("./defaults").crossTraceDefaults,supplyLayoutDefaults:g("./layout_defaults").supplyLayoutDefaults,calc:g("./calc"),crossTraceCalc:g("./cross_trace_calc").crossTraceCalc,plot:g("./plot").plot,style:g("./style").style,styleOnSelect:g("./style").styleOnSelect,hoverPoints:g("./hover").hoverPoints,eventData:g("./event_data"),selectPoints:g("./select"),moduleType:"trace",name:"box",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(g,ne,ae){ne.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(g,ne,ae){var T=g("../../registry"),c=g("../../lib"),M=g("./layout_attributes");function A(a,n,t,r,f){for(var o=f+"Layout",i=!1,p=0;p<t.length;p++){var d=t[p];if(T.traceIs(d,o)){i=!0;break}}!i||(r(f+"mode"),r(f+"gap"),r(f+"groupgap"))}function e(a,n,t){function r(f,o){return c.coerce(a,n,M,f,o)}A(a,n,t,r,"box")}ne.exports={supplyLayoutDefaults:e,_supply:A}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=g("../../components/drawing"),A=5,e=.01;function a(f,o,i,p){var d=o.xaxis,y=o.yaxis;c.makeTraceGroups(p,i,"trace boxes").each(function(v){var x=T.select(this),l=v[0],_=l.t,s=l.trace;if(_.wdPos=_.bdPos*s.whiskerwidth,s.visible!==!0||_.empty){x.remove();return}var w,b;s.orientation==="h"?(w=y,b=d):(w=d,b=y),n(x,{pos:w,val:b},s,_),t(x,{x:d,y},s,_),r(x,{pos:w,val:b},s,_)})}function n(f,o,i,p){var d=i.orientation==="h",y=o.val,v=o.pos,x=!!v.rangebreaks,l=p.bPos,_=p.wdPos||0,s=p.bPosPxOffset||0,w=i.whiskerwidth||0,b=i.notched||!1,h=b?1-2*i.notchwidth:1,m,u;Array.isArray(p.bdPos)?(m=p.bdPos[0],u=p.bdPos[1]):(m=p.bdPos,u=p.bdPos);var L=f.selectAll("path.box").data(i.type!=="violin"||i.box.visible?c.identity:[]);L.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),L.exit().remove(),L.each(function(S){if(S.empty)return"M0,0Z";var k=v.c2l(S.pos+l,!0),P=v.l2p(k-m)+s,z=v.l2p(k+u)+s,I=x?(P+z)/2:v.l2p(k)+s,D=i.whiskerwidth,R=x?P*D+(1-D)*I:v.l2p(k-_)+s,B=x?z*D+(1-D)*I:v.l2p(k+_)+s,F=v.l2p(k-m*h)+s,V=v.l2p(k+u*h)+s,Y=y.c2p(S.q1,!0),K=y.c2p(S.q3,!0),J=c.constrain(y.c2p(S.med,!0),Math.min(Y,K)+1,Math.max(Y,K)-1),G=S.lf===void 0||i.boxpoints===!1,Z=y.c2p(G?S.min:S.lf,!0),re=y.c2p(G?S.max:S.uf,!0),se=y.c2p(S.ln,!0),oe=y.c2p(S.un,!0);d?T.select(this).attr("d","M"+J+","+F+"V"+V+"M"+Y+","+P+"V"+z+(b?"H"+se+"L"+J+","+V+"L"+oe+","+z:"")+"H"+K+"V"+P+(b?"H"+oe+"L"+J+","+F+"L"+se+","+P:"")+"ZM"+Y+","+I+"H"+Z+"M"+K+","+I+"H"+re+(w===0?"":"M"+Z+","+R+"V"+B+"M"+re+","+R+"V"+B)):T.select(this).attr("d","M"+F+","+J+"H"+V+"M"+P+","+Y+"H"+z+(b?"V"+se+"L"+V+","+J+"L"+z+","+oe:"")+"V"+K+"H"+P+(b?"V"+oe+"L"+F+","+J+"L"+P+","+se:"")+"ZM"+I+","+Y+"V"+Z+"M"+I+","+K+"V"+re+(w===0?"":"M"+R+","+Z+"H"+B+"M"+R+","+re+"H"+B))})}function t(f,o,i,p){var d=o.x,y=o.y,v=p.bdPos,x=p.bPos,l=i.boxpoints||i.points;c.seedPseudoRandom();var _=function(b){return b.forEach(function(h){h.t=p,h.trace=i}),b},s=f.selectAll("g.points").data(l?_:[]);s.enter().append("g").attr("class","points"),s.exit().remove();var w=s.selectAll("path").data(function(b){var h,m=b.pts2,u=Math.max((b.max-b.min)/10,b.q3-b.q1),L=u*1e-9,S=u*e,k=[],P=0,z;if(i.jitter){if(u===0)for(P=1,k=new Array(m.length),h=0;h<m.length;h++)k[h]=1;else for(h=0;h<m.length;h++){var I=Math.max(0,h-A),D=m[I].v,R=Math.min(m.length-1,h+A),B=m[R].v;l!=="all"&&(m[h].v<b.lf?B=Math.min(B,b.lf):D=Math.max(D,b.uf));var F=Math.sqrt(S*(R-I)/(B-D+L))||0;F=c.constrain(Math.abs(F),0,1),k.push(F),P=Math.max(F,P)}z=i.jitter*2/(P||1)}for(h=0;h<m.length;h++){var V=m[h],Y=V.v,K=i.jitter?z*k[h]*(c.pseudoRandom()-.5):0,J=b.pos+x+v*(i.pointpos+K);i.orientation==="h"?(V.y=J,V.x=Y):(V.x=J,V.y=Y),l==="suspectedoutliers"&&Y<b.uo&&Y>b.lo&&(V.so=!0)}return m});w.enter().append("path").classed("point",!0),w.exit().remove(),w.call(M.translatePoints,d,y)}function r(f,o,i,p){var d=o.val,y=o.pos,v=!!y.rangebreaks,x=p.bPos,l=p.bPosPxOffset||0,_=i.boxmean||(i.meanline||{}).visible,s,w;Array.isArray(p.bdPos)?(s=p.bdPos[0],w=p.bdPos[1]):(s=p.bdPos,w=p.bdPos);var b=f.selectAll("path.mean").data(i.type==="box"&&i.boxmean||i.type==="violin"&&i.box.visible&&i.meanline.visible?c.identity:[]);b.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),b.exit().remove(),b.each(function(h){var m=y.c2l(h.pos+x,!0),u=y.l2p(m-s)+l,L=y.l2p(m+w)+l,S=v?(u+L)/2:y.l2p(m)+l,k=d.c2p(h.mean,!0),P=d.c2p(h.mean-h.sd,!0),z=d.c2p(h.mean+h.sd,!0);i.orientation==="h"?T.select(this).attr("d","M"+k+","+u+"V"+L+(_==="sd"?"m0,0L"+P+","+S+"L"+k+","+u+"L"+z+","+S+"Z":"")):T.select(this).attr("d","M"+u+","+k+"H"+L+(_==="sd"?"m0,0L"+S+","+P+"L"+u+","+k+"L"+S+","+z+"Z":""))})}ne.exports={plot:a,plotBoxAndWhiskers:n,plotPoints:t,plotBoxMean:r}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(g,ne,ae){ne.exports=function(c,M){var A=c.cd,e=c.xaxis,a=c.yaxis,n=[],t,r;if(M===!1)for(t=0;t<A.length;t++)for(r=0;r<(A[t].pts||[]).length;r++)A[t].pts[r].selected=0;else for(t=0;t<A.length;t++)for(r=0;r<(A[t].pts||[]).length;r++){var f=A[t].pts[r],o=e.c2p(f.x),i=a.c2p(f.y);M.contains([o,i],null,f.i,c)?(n.push({pointNumber:f.i,x:e.c2d(f.x),y:a.c2d(f.y)}),f.selected=1):f.selected=0}return n}},{}],684:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/color"),M=g("../../components/drawing");function A(a,n,t){var r=t||T.select(a).selectAll("g.trace.boxes");r.style("opacity",function(f){return f[0].trace.opacity}),r.each(function(f){var o=T.select(this),i=f[0].trace,p=i.line.width;function d(x,l,_,s){x.style("stroke-width",l+"px").call(c.stroke,_).call(c.fill,s)}var y=o.selectAll("path.box");if(i.type==="candlestick")y.each(function(x){if(!x.empty){var l=T.select(this),_=i[x.dir];d(l,_.line.width,_.line.color,_.fillcolor),l.style("opacity",i.selectedpoints&&!x.selected?.3:1)}});else{d(y,p,i.line.color,i.fillcolor),o.selectAll("path.mean").style({"stroke-width":p,"stroke-dasharray":2*p+"px,"+p+"px"}).call(c.stroke,i.line.color);var v=o.selectAll("path.point");M.pointStyle(v,i,a)}})}function e(a,n,t){var r=n[0].trace,f=t.selectAll("path.point");r.selectedpoints?M.selectedPointStyle(f,r):M.pointStyle(f,r,a)}ne.exports={style:A,styleOnSelect:e}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(g,ne,ae){var T=g("../../lib").extendFlat,c=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=g("../ohlc/attributes"),A=g("../box/attributes");function e(a){return{line:{color:T({},A.line.color,{dflt:a}),width:A.line.width,editType:"style"},fillcolor:A.fillcolor,editType:"style"}}ne.exports={xperiod:M.xperiod,xperiod0:M.xperiod0,xperiodalignment:M.xperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),x:M.x,open:M.open,high:M.high,low:M.low,close:M.close,line:{width:T({},A.line.width,{}),editType:"style"},increasing:e(M.increasing.line.color.dflt),decreasing:e(M.decreasing.line.color.dflt),text:M.text,hovertext:M.hovertext,whiskerwidth:T({},A.whiskerwidth,{dflt:0}),hoverlabel:M.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/cartesian/axes"),M=g("../../plots/cartesian/align_period"),A=g("../ohlc/calc").calcCommon;ne.exports=function(a,n){var t=a._fullLayout,r=c.getFromId(a,n.xaxis),f=c.getFromId(a,n.yaxis),o=r.makeCalcdata(n,"x"),i=M(n,r,"x",o).vals,p=A(a,n,o,i,f,e);return p.length?(T.extendFlat(p[0].t,{num:t._numBoxes,dPos:T.distinctVals(i).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,p):[{t:{empty:!0}}]};function e(a,n,t,r){return{min:t,q1:Math.min(a,r),med:r,q3:Math.max(a,r),max:n}}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/color"),M=g("../ohlc/ohlc_defaults"),A=g("../scatter/period_defaults"),e=g("./attributes");ne.exports=function(t,r,f,o){function i(d,y){return T.coerce(t,r,e,d,y)}var p=M(t,r,i,o);if(!p){r.visible=!1;return}A(t,r,o,i,{x:!0}),i("xhoverformat"),i("yhoverformat"),i("line.width"),a(t,r,i,"increasing"),a(t,r,i,"decreasing"),i("text"),i("hovertext"),i("whiskerwidth"),o._requestRangeslider[r.xaxis]=!0};function a(n,t,r,f){var o=r(f+".line.color");r(f+".line.width",t.line.width),r(f+".fillcolor",c.addOpacity(o,.5))}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":947,"./attributes":685}],688:[function(g,ne,ae){ne.exports={moduleType:"trace",name:"candlestick",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:g("./attributes"),layoutAttributes:g("../box/layout_attributes"),supplyLayoutDefaults:g("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:g("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:g("./defaults"),calc:g("./calc"),plot:g("../box/plot").plot,layerName:"boxlayer",style:g("../box/style").style,hoverPoints:g("../ohlc/hover").hoverPoints,selectPoints:g("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(g,ne,ae){var T=g("./axis_defaults"),c=g("../../plot_api/plot_template");ne.exports=function(e,a,n,t,r){var f=t("a");f||(t("da"),t("a0"));var o=t("b");o||(t("db"),t("b0")),M(e,a,n,r)};function M(A,e,a,n){var t=["aaxis","baxis"];t.forEach(function(r){var f=r.charAt(0),o=A[r]||{},i=c.newContainer(e,r),p={noTicklabelstep:!0,tickfont:"x",id:f+"axis",letter:f,font:e.font,name:r,data:A[f],calendar:e.calendar,dfltColor:n,bgColor:a.paper_bgcolor,autotypenumbersDflt:a.autotypenumbers,fullLayout:a};T(o,i,p),i._categories=i._categories||[],!A[r]&&o.type!=="-"&&(A[r]={type:o.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(g,ne,ae){var T=g("../../lib").isArrayOrTypedArray;ne.exports=function(M){return c(M,0)};function c(M,A){if(!T(M)||A>=10)return null;for(var e=1/0,a=-1/0,n=M.length,t=0;t<n;t++){var r=M[t];if(T(r)){var f=c(r,A+1);f&&(e=Math.min(f[0],e),a=Math.max(f[1],a))}else e=Math.min(r,e),a=Math.max(r,a)}return[e,a]}},{"../../lib":503}],691:[function(g,ne,ae){var T=g("../../plots/font_attributes"),c=g("./axis_attributes"),M=g("../../components/color/attributes"),A=T({editType:"calc"});A.family.dflt='"Open Sans", verdana, arial, sans-serif',A.size.dflt=12,A.color.dflt=M.defaultLine,ne.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:c,baxis:c,font:A,color:{valType:"color",dflt:M.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(g,ne,ae){var T=g("../../lib").isArrayOrTypedArray;ne.exports=function(c,M,A,e){var a,n,t,r,f,o,i,p,d,y,v,x,l,_=T(A)?"a":"b",s=_==="a"?c.aaxis:c.baxis,w=s.smoothing,b=_==="a"?c.a2i:c.b2j,h=_==="a"?A:e,m=_==="a"?e:A,u=_==="a"?M.a.length:M.b.length,L=_==="a"?M.b.length:M.a.length,S=Math.floor(_==="a"?c.b2j(m):c.a2i(m)),k=_==="a"?function(G){return c.evalxy([],G,S)}:function(G){return c.evalxy([],S,G)};w&&(t=Math.max(0,Math.min(L-2,S)),r=S-t,n=_==="a"?function(G,Z){return c.dxydi([],G,t,Z,r)}:function(G,Z){return c.dxydj([],t,G,r,Z)});var P=b(h[0]),z=b(h[1]),I=P<z?1:-1,D=(z-P)*1e-8,R=I>0?Math.floor:Math.ceil,B=I>0?Math.ceil:Math.floor,F=I>0?Math.min:Math.max,V=I>0?Math.max:Math.min,Y=R(P+D),K=B(z-D);i=k(P);var J=[[i]];for(a=Y;a*I<K*I;a+=I)f=[],v=V(P,a),x=F(z,a+I),l=x-v,o=Math.max(0,Math.min(u-2,Math.floor(.5*(v+x)))),p=k(x),w&&(d=n(o,v-o),y=n(o,x-o),f.push([i[0]+d[0]/3*l,i[1]+d[1]/3*l]),f.push([p[0]-y[0]/3*l,p[1]-y[1]/3*l])),f.push(p),J.push(f),i=p;return J}},{"../../lib":503}],693:[function(g,ne,ae){var T=g("../../plots/font_attributes"),c=g("../../components/color/attributes"),M=g("../../plots/cartesian/layout_attributes"),A=g("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=g("../../plot_api/edit_types").overrideAll,a=g("../../components/drawing/attributes").dash,n=g("../../lib/extend").extendFlat;ne.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:T({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:M.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:T({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:A("tick label")},tickformatstops:e(M.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:c.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:n({},a,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:n({},a,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:c.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:T({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(g,ne,ae){var T=g("./attributes"),c=g("../../components/color").addOpacity,M=g("../../registry"),A=g("../../lib"),e=g("../../plots/cartesian/tick_value_defaults"),a=g("../../plots/cartesian/tick_label_defaults"),n=g("../../plots/cartesian/prefix_suffix_defaults"),t=g("../../plots/cartesian/category_order_defaults"),r=g("../../plots/cartesian/set_convert"),f=g("../../plots/cartesian/axis_autotype");ne.exports=function(p,d,y){var v=y.letter,x=y.font||{},l=T[v+"axis"];function _(Y,K){return A.coerce(p,d,l,Y,K)}function s(Y,K){return A.coerce2(p,d,l,Y,K)}y.name&&(d._name=y.name,d._id=y.name),_("autotypenumbers",y.autotypenumbersDflt);var w=_("type");if(w==="-"&&(y.data&&o(d,y.data),d.type==="-"?d.type="linear":w=p.type=d.type),_("smoothing"),_("cheatertype"),_("showticklabels"),_("labelprefix",v+" = "),_("labelsuffix"),_("showtickprefix"),_("showticksuffix"),_("separatethousands"),_("tickformat"),_("exponentformat"),_("minexponent"),_("showexponent"),_("categoryorder"),_("tickmode"),_("tickvals"),_("ticktext"),_("tick0"),_("dtick"),d.tickmode==="array"&&(_("arraytick0"),_("arraydtick")),_("labelpadding"),d._hovertitle=v,w==="date"){var b=M.getComponentMethod("calendars","handleDefaults");b(p,d,"calendar",y.calendar)}r(d,y.fullLayout),d.c2p=A.identity;var h=_("color",y.dfltColor),m=h===p.color?h:x.color,u=_("title.text");u&&(A.coerceFont(_,"title.font",{family:x.family,size:A.bigFont(x.size),color:m}),_("title.offset")),_("tickangle");var L=_("autorange",!d.isValidRange(p.range));L&&_("rangemode"),_("range"),d.cleanRange(),_("fixedrange"),e(p,d,_,w),n(p,d,_,w,y),a(p,d,_,w,y),t(p,d,_,{data:y.data,dataAttr:v});var S=s("gridcolor",c(h,.3)),k=s("gridwidth"),P=s("griddash"),z=_("showgrid");z||(delete d.gridcolor,delete d.gridwidth,delete d.griddash);var I=s("startlinecolor",h),D=s("startlinewidth",k),R=_("startline",d.showgrid||!!I||!!D);R||(delete d.startlinecolor,delete d.startlinewidth);var B=s("endlinecolor",h),F=s("endlinewidth",k),V=_("endline",d.showgrid||!!B||!!F);return V||(delete d.endlinecolor,delete d.endlinewidth),z?(_("minorgridcount"),_("minorgridwidth",k),_("minorgriddash",P),_("minorgridcolor",c(S,.06)),d.minorgridcount||(delete d.minorgridwidth,delete d.minorgriddash,delete d.minorgridcolor)):(delete d.gridcolor,delete d.gridwidth,delete d.griddash),d.showticklabels==="none"&&(delete d.tickfont,delete d.tickangle,delete d.showexponent,delete d.exponentformat,delete d.minexponent,delete d.tickformat,delete d.showticksuffix,delete d.showtickprefix),d.showticksuffix||delete d.ticksuffix,d.showtickprefix||delete d.tickprefix,_("tickmode"),d};function o(i,p){if(i.type==="-"){var d=i._id,y=d.charAt(0),v=y+"calendar",x=i[v];i.type=f(p,x,{autotypenumbers:i.autotypenumbers})}}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(g,ne,ae){var T=g("../../plots/cartesian/axes"),c=g("../../lib").isArray1D,M=g("./cheater_basis"),A=g("./array_minmax"),e=g("./calc_gridlines"),a=g("./calc_labels"),n=g("./calc_clippath"),t=g("../heatmap/clean_2d_array"),r=g("./smooth_fill_2d_array"),f=g("../heatmap/convert_column_xyz"),o=g("./set_convert");ne.exports=function(p,d){var y=T.getFromId(p,d.xaxis),v=T.getFromId(p,d.yaxis),x=d.aaxis,l=d.baxis,_=d.x,s=d.y,w=[];_&&c(_)&&w.push("x"),s&&c(s)&&w.push("y"),w.length&&f(d,x,l,"a","b",w);var b=d._a=d._a||d.a,h=d._b=d._b||d.b;_=d._x||d.x,s=d._y||d.y;var m={};if(d._cheater){var u=x.cheatertype==="index"?b.length:b,L=l.cheatertype==="index"?h.length:h;_=M(u,L,d.cheaterslope)}d._x=_=t(_),d._y=s=t(s),r(_,b,h),r(s,b,h),o(d),d.setScale();var S=A(_),k=A(s),P=.5*(S[1]-S[0]),z=.5*(S[1]+S[0]),I=.5*(k[1]-k[0]),D=.5*(k[1]+k[0]),R=1.3;return S=[z-P*R,z+P*R],k=[D-I*R,D+I*R],d._extremes[y._id]=T.findExtremes(y,S,{padded:!0}),d._extremes[v._id]=T.findExtremes(v,k,{padded:!0}),e(d,"a","b"),e(d,"b","a"),a(d,x),a(d,l),m.clipsegments=n(d._xctrl,d._yctrl,x,l),m.x=_,m.y=s,m.a=b,m.b=h,[m]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(g,ne,ae){ne.exports=function(c,M,A,e){var a,n,t,r=[],f=!!A.smoothing,o=!!e.smoothing,i=c[0].length-1,p=c.length-1;for(a=0,n=[],t=[];a<=i;a++)n[a]=c[0][a],t[a]=M[0][a];for(r.push({x:n,y:t,bicubic:f}),a=0,n=[],t=[];a<=p;a++)n[a]=c[a][i],t[a]=M[a][i];for(r.push({x:n,y:t,bicubic:o}),a=i,n=[],t=[];a>=0;a--)n[i-a]=c[p][a],t[i-a]=M[p][a];for(r.push({x:n,y:t,bicubic:f}),a=p,n=[],t=[];a>=0;a--)n[p-a]=c[a][0],t[p-a]=M[a][0];return r.push({x:n,y:t,bicubic:o}),r}},{}],697:[function(g,ne,ae){var T=g("../../plots/cartesian/axes"),c=g("../../lib/extend").extendFlat;ne.exports=function(A,e,a){var n,t,r,f,o,i,p,d,y,v,x,l,_,s,w=A["_"+e],b=A[e+"axis"],h=b._gridlines=[],m=b._minorgridlines=[],u=b._boundarylines=[],L=A["_"+a],S=A[a+"axis"];b.tickmode==="array"&&(b.tickvals=w.slice());var k=A._xctrl,P=A._yctrl,z=k[0].length,I=k.length,D=A._a.length,R=A._b.length;T.prepTicks(b),b.tickmode==="array"&&delete b.tickvals;var B=b.smoothing?3:1;function F(Y){var K,J,G,Z,re,se,oe,N,U,q,Q,W,X=[],te=[],ee={};if(e==="b")for(J=A.b2j(Y),G=Math.floor(Math.max(0,Math.min(R-2,J))),Z=J-G,ee.length=R,ee.crossLength=D,ee.xy=function(ie){return A.evalxy([],ie,J)},ee.dxy=function(ie,le){return A.dxydi([],ie,G,le,Z)},K=0;K<D;K++)se=Math.min(D-2,K),oe=K-se,N=A.evalxy([],K,J),S.smoothing&&K>0&&(U=A.dxydi([],K-1,G,0,Z),X.push(re[0]+U[0]/3),te.push(re[1]+U[1]/3),q=A.dxydi([],K-1,G,1,Z),X.push(N[0]-q[0]/3),te.push(N[1]-q[1]/3)),X.push(N[0]),te.push(N[1]),re=N;else for(K=A.a2i(Y),se=Math.floor(Math.max(0,Math.min(D-2,K))),oe=K-se,ee.length=D,ee.crossLength=R,ee.xy=function(ie){return A.evalxy([],K,ie)},ee.dxy=function(ie,le){return A.dxydj([],se,ie,oe,le)},J=0;J<R;J++)G=Math.min(R-2,J),Z=J-G,N=A.evalxy([],K,J),S.smoothing&&J>0&&(Q=A.dxydj([],se,J-1,oe,0),X.push(re[0]+Q[0]/3),te.push(re[1]+Q[1]/3),W=A.dxydj([],se,J-1,oe,1),X.push(N[0]-W[0]/3),te.push(N[1]-W[1]/3)),X.push(N[0]),te.push(N[1]),re=N;return ee.axisLetter=e,ee.axis=b,ee.crossAxis=S,ee.value=Y,ee.constvar=a,ee.index=d,ee.x=X,ee.y=te,ee.smoothing=S.smoothing,ee}function V(Y){var K,J,G,Z,re,se=[],oe=[],N={};if(N.length=w.length,N.crossLength=L.length,e==="b")for(G=Math.max(0,Math.min(R-2,Y)),re=Math.min(1,Math.max(0,Y-G)),N.xy=function(U){return A.evalxy([],U,Y)},N.dxy=function(U,q){return A.dxydi([],U,G,q,re)},K=0;K<z;K++)se[K]=k[Y*B][K],oe[K]=P[Y*B][K];else for(J=Math.max(0,Math.min(D-2,Y)),Z=Math.min(1,Math.max(0,Y-J)),N.xy=function(U){return A.evalxy([],Y,U)},N.dxy=function(U,q){return A.dxydj([],J,U,Z,q)},K=0;K<I;K++)se[K]=k[K][Y*B],oe[K]=P[K][Y*B];return N.axisLetter=e,N.axis=b,N.crossAxis=S,N.value=w[Y],N.constvar=a,N.index=Y,N.x=se,N.y=oe,N.smoothing=S.smoothing,N}if(b.tickmode==="array"){for(f=5e-15,o=[Math.floor((w.length-1-b.arraytick0)/b.arraydtick*(1+f)),Math.ceil(-b.arraytick0/b.arraydtick/(1+f))].sort(function(Y,K){return Y-K}),i=o[0]-1,p=o[1]+1,d=i;d<p;d++)t=b.arraytick0+b.arraydtick*d,!(t<0||t>w.length-1)&&h.push(c(V(t),{color:b.gridcolor,width:b.gridwidth,dash:b.griddash}));for(d=i;d<p;d++)if(r=b.arraytick0+b.arraydtick*d,x=Math.min(r+b.arraydtick,w.length-1),!(r<0||r>w.length-1)&&!(x<0||x>w.length-1))for(l=w[r],_=w[x],n=0;n<b.minorgridcount;n++)s=x-r,!(s<=0)&&(v=l+(_-l)*(n+1)/(b.minorgridcount+1)*(b.arraydtick/s),!(v<w[0]||v>w[w.length-1])&&m.push(c(F(v),{color:b.minorgridcolor,width:b.minorgridwidth,dash:b.minorgriddash})));b.startline&&u.push(c(V(0),{color:b.startlinecolor,width:b.startlinewidth})),b.endline&&u.push(c(V(w.length-1),{color:b.endlinecolor,width:b.endlinewidth}))}else{for(f=5e-15,o=[Math.floor((w[w.length-1]-b.tick0)/b.dtick*(1+f)),Math.ceil((w[0]-b.tick0)/b.dtick/(1+f))].sort(function(Y,K){return Y-K}),i=o[0],p=o[1],d=i;d<=p;d++)y=b.tick0+b.dtick*d,h.push(c(F(y),{color:b.gridcolor,width:b.gridwidth,dash:b.griddash}));for(d=i-1;d<p+1;d++)for(y=b.tick0+b.dtick*d,n=0;n<b.minorgridcount;n++)v=y+b.dtick*(n+1)/(b.minorgridcount+1),!(v<w[0]||v>w[w.length-1])&&m.push(c(F(v),{color:b.minorgridcolor,width:b.minorgridwidth,dash:b.minorgriddash}));b.startline&&u.push(c(F(w[0]),{color:b.startlinecolor,width:b.startlinewidth})),b.endline&&u.push(c(F(w[w.length-1]),{color:b.endlinecolor,width:b.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(g,ne,ae){var T=g("../../plots/cartesian/axes"),c=g("../../lib/extend").extendFlat;ne.exports=function(A,e){var a,n,t,r,f,o=e._labels=[],i=e._gridlines;for(a=0;a<i.length;a++)f=i[a],["start","both"].indexOf(e.showticklabels)!==-1&&(n=T.tickText(e,f.value),c(n,{prefix:t,suffix:r,endAnchor:!0,xy:f.xy(0),dxy:f.dxy(0,0),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:a===0,isLast:a===i.length-1}),o.push(n)),["end","both"].indexOf(e.showticklabels)!==-1&&(n=T.tickText(e,f.value),c(n,{endAnchor:!1,xy:f.xy(f.crossLength-1),dxy:f.dxy(f.crossLength-2,1),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:a===0,isLast:a===i.length-1}),o.push(n))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(g,ne,ae){var T=.5;ne.exports=function(M,A,e,a){var n=M[0]-A[0],t=M[1]-A[1],r=e[0]-A[0],f=e[1]-A[1],o=Math.pow(n*n+t*t,T/2),i=Math.pow(r*r+f*f,T/2),p=(i*i*n-o*o*r)*a,d=(i*i*t-o*o*f)*a,y=i*(o+i)*3,v=o*(o+i)*3;return[[A[0]+(y&&p/y),A[1]+(y&&d/y)],[A[0]-(v&&p/v),A[1]-(v&&d/v)]]}},{}],700:[function(g,ne,ae){var T=g("../../lib").isArrayOrTypedArray;ne.exports=function(c,M,A){var e,a,n,t,r,f,o=[],i=T(c)?c.length:c,p=T(M)?M.length:M,d=T(c)?c:null,y=T(M)?M:null;d&&(n=(d.length-1)/(d[d.length-1]-d[0])/(i-1)),y&&(t=(y.length-1)/(y[y.length-1]-y[0])/(p-1));var v,x=1/0,l=-1/0;for(a=0;a<p;a++)for(o[a]=[],f=y?(y[a]-y[0])*t:a/(p-1),e=0;e<i;e++)r=d?(d[e]-d[0])*n:e/(i-1),v=r-f*A,x=Math.min(v,x),l=Math.max(v,l),o[a][e]=v;var _=1/(l-x),s=-x*_;for(a=0;a<p;a++)for(e=0;e<i;e++)o[a][e]=_*o[a][e]+s;return o}},{"../../lib":503}],701:[function(g,ne,ae){var T=g("./catmull_rom"),c=g("../../lib").ensureArray;function M(A,e,a){var n=-.5*a[0]+1.5*e[0],t=-.5*a[1]+1.5*e[1];return[(2*n+A[0])/3,(2*t+A[1])/3]}ne.exports=function(e,a,n,t,r,f){var o,i,p,d,y,v,x,l,_,s,w=n[0].length,b=n.length,h=r?3*w-2:w,m=f?3*b-2:b;for(e=c(e,m),a=c(a,m),p=0;p<m;p++)e[p]=c(e[p],h),a[p]=c(a[p],h);for(i=0,d=0;i<b;i++,d+=f?3:1)for(y=e[d],v=a[d],x=n[i],l=t[i],o=0,p=0;o<w;o++,p+=r?3:1)y[p]=x[o],v[p]=l[o];if(r)for(i=0,d=0;i<b;i++,d+=f?3:1){for(o=1,p=3;o<w-1;o++,p+=3)_=T([n[i][o-1],t[i][o-1]],[n[i][o],t[i][o]],[n[i][o+1],t[i][o+1]],r),e[d][p-1]=_[0][0],a[d][p-1]=_[0][1],e[d][p+1]=_[1][0],a[d][p+1]=_[1][1];s=M([e[d][0],a[d][0]],[e[d][2],a[d][2]],[e[d][3],a[d][3]]),e[d][1]=s[0],a[d][1]=s[1],s=M([e[d][h-1],a[d][h-1]],[e[d][h-3],a[d][h-3]],[e[d][h-4],a[d][h-4]]),e[d][h-2]=s[0],a[d][h-2]=s[1]}if(f)for(p=0;p<h;p++){for(d=3;d<m-3;d+=3)_=T([e[d-3][p],a[d-3][p]],[e[d][p],a[d][p]],[e[d+3][p],a[d+3][p]],f),e[d-1][p]=_[0][0],a[d-1][p]=_[0][1],e[d+1][p]=_[1][0],a[d+1][p]=_[1][1];s=M([e[0][p],a[0][p]],[e[2][p],a[2][p]],[e[3][p],a[3][p]]),e[1][p]=s[0],a[1][p]=s[1],s=M([e[m-1][p],a[m-1][p]],[e[m-3][p],a[m-3][p]],[e[m-4][p],a[m-4][p]]),e[m-2][p]=s[0],a[m-2][p]=s[1]}if(r&&f)for(d=1;d<m;d+=(d+1)%3==0?2:1){for(p=3;p<h-3;p+=3)_=T([e[d][p-3],a[d][p-3]],[e[d][p],a[d][p]],[e[d][p+3],a[d][p+3]],r),e[d][p-1]=.5*(e[d][p-1]+_[0][0]),a[d][p-1]=.5*(a[d][p-1]+_[0][1]),e[d][p+1]=.5*(e[d][p+1]+_[1][0]),a[d][p+1]=.5*(a[d][p+1]+_[1][1]);s=M([e[d][0],a[d][0]],[e[d][2],a[d][2]],[e[d][3],a[d][3]]),e[d][1]=.5*(e[d][1]+s[0]),a[d][1]=.5*(a[d][1]+s[1]),s=M([e[d][h-1],a[d][h-1]],[e[d][h-3],a[d][h-3]],[e[d][h-4],a[d][h-4]]),e[d][h-2]=.5*(e[d][h-2]+s[0]),a[d][h-2]=.5*(a[d][h-2]+s[1])}return[e,a]}},{"../../lib":503,"./catmull_rom":699}],702:[function(g,ne,ae){ne.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(g,ne,ae){ne.exports=function(T,c,M){return c&&M?function(A,e,a,n,t){A||(A=[]);var r,f,o,i,p,d;e*=3,a*=3;var y=n*n,v=1-n,x=v*v,l=v*n*2,_=-3*x,s=3*(x-l),w=3*(l-y),b=3*y,h=t*t,m=h*t,u=1-t,L=u*u,S=L*u;for(d=0;d<T.length;d++)p=T[d],r=_*p[a][e]+s*p[a][e+1]+w*p[a][e+2]+b*p[a][e+3],f=_*p[a+1][e]+s*p[a+1][e+1]+w*p[a+1][e+2]+b*p[a+1][e+3],o=_*p[a+2][e]+s*p[a+2][e+1]+w*p[a+2][e+2]+b*p[a+2][e+3],i=_*p[a+3][e]+s*p[a+3][e+1]+w*p[a+3][e+2]+b*p[a+3][e+3],A[d]=S*r+3*(L*t*f+u*h*o)+m*i;return A}:c?function(A,e,a,n,t){A||(A=[]);var r,f,o,i;e*=3;var p=n*n,d=1-n,y=d*d,v=d*n*2,x=-3*y,l=3*(y-v),_=3*(v-p),s=3*p,w=1-t;for(o=0;o<T.length;o++)i=T[o],r=x*i[a][e]+l*i[a][e+1]+_*i[a][e+2]+s*i[a][e+3],f=x*i[a+1][e]+l*i[a+1][e+1]+_*i[a+1][e+2]+s*i[a+1][e+3],A[o]=w*r+t*f;return A}:M?function(A,e,a,n,t){A||(A=[]);var r,f,o,i,p,d;a*=3;var y=t*t,v=y*t,x=1-t,l=x*x,_=l*x;for(p=0;p<T.length;p++)d=T[p],r=d[a][e+1]-d[a][e],f=d[a+1][e+1]-d[a+1][e],o=d[a+2][e+1]-d[a+2][e],i=d[a+3][e+1]-d[a+3][e],A[p]=_*r+3*(l*t*f+x*y*o)+v*i;return A}:function(A,e,a,n,t){A||(A=[]);var r,f,o,i,p=1-t;for(o=0;o<T.length;o++)i=T[o],r=i[a][e+1]-i[a][e],f=i[a+1][e+1]-i[a+1][e],A[o]=p*r+t*f;return A}}},{}],704:[function(g,ne,ae){ne.exports=function(T,c,M){return c&&M?function(A,e,a,n,t){A||(A=[]);var r,f,o,i,p,d;e*=3,a*=3;var y=n*n,v=y*n,x=1-n,l=x*x,_=l*x,s=t*t,w=1-t,b=w*w,h=w*t*2,m=-3*b,u=3*(b-h),L=3*(h-s),S=3*s;for(d=0;d<T.length;d++)p=T[d],r=m*p[a][e]+u*p[a+1][e]+L*p[a+2][e]+S*p[a+3][e],f=m*p[a][e+1]+u*p[a+1][e+1]+L*p[a+2][e+1]+S*p[a+3][e+1],o=m*p[a][e+2]+u*p[a+1][e+2]+L*p[a+2][e+2]+S*p[a+3][e+2],i=m*p[a][e+3]+u*p[a+1][e+3]+L*p[a+2][e+3]+S*p[a+3][e+3],A[d]=_*r+3*(l*n*f+x*y*o)+v*i;return A}:c?function(A,e,a,n,t){A||(A=[]);var r,f,o,i,p,d;e*=3;var y=t*t,v=y*t,x=1-t,l=x*x,_=l*x;for(p=0;p<T.length;p++)d=T[p],r=d[a+1][e]-d[a][e],f=d[a+1][e+1]-d[a][e+1],o=d[a+1][e+2]-d[a][e+2],i=d[a+1][e+3]-d[a][e+3],A[p]=_*r+3*(l*t*f+x*y*o)+v*i;return A}:M?function(A,e,a,n,t){A||(A=[]);var r,f,o,i;a*=3;var p=1-n,d=t*t,y=1-t,v=y*y,x=y*t*2,l=-3*v,_=3*(v-x),s=3*(x-d),w=3*d;for(o=0;o<T.length;o++)i=T[o],r=l*i[a][e]+_*i[a+1][e]+s*i[a+2][e]+w*i[a+3][e],f=l*i[a][e+1]+_*i[a+1][e+1]+s*i[a+2][e+1]+w*i[a+3][e+1],A[o]=p*r+n*f;return A}:function(A,e,a,n,t){A||(A=[]);var r,f,o,i,p=1-n;for(o=0;o<T.length;o++)i=T[o],r=i[a+1][e]-i[a][e],f=i[a+1][e+1]-i[a][e+1],A[o]=p*r+n*f;return A}}},{}],705:[function(g,ne,ae){ne.exports=function(T,c,M,A,e){var a=c-2,n=M-2;return A&&e?function(t,r,f){t||(t=[]);var o,i,p,d,y,v,x=Math.max(0,Math.min(Math.floor(r),a)),l=Math.max(0,Math.min(Math.floor(f),n)),_=Math.max(0,Math.min(1,r-x)),s=Math.max(0,Math.min(1,f-l));x*=3,l*=3;var w=_*_,b=w*_,h=1-_,m=h*h,u=m*h,L=s*s,S=L*s,k=1-s,P=k*k,z=P*k;for(v=0;v<T.length;v++)y=T[v],o=u*y[l][x]+3*(m*_*y[l][x+1]+h*w*y[l][x+2])+b*y[l][x+3],i=u*y[l+1][x]+3*(m*_*y[l+1][x+1]+h*w*y[l+1][x+2])+b*y[l+1][x+3],p=u*y[l+2][x]+3*(m*_*y[l+2][x+1]+h*w*y[l+2][x+2])+b*y[l+2][x+3],d=u*y[l+3][x]+3*(m*_*y[l+3][x+1]+h*w*y[l+3][x+2])+b*y[l+3][x+3],t[v]=z*o+3*(P*s*i+k*L*p)+S*d;return t}:A?function(t,r,f){t||(t=[]);var o=Math.max(0,Math.min(Math.floor(r),a)),i=Math.max(0,Math.min(Math.floor(f),n)),p=Math.max(0,Math.min(1,r-o)),d=Math.max(0,Math.min(1,f-i)),y,v,x,l,_,s;o*=3;var w=p*p,b=w*p,h=1-p,m=h*h,u=m*h,L=1-d;for(_=0;_<T.length;_++)s=T[_],y=L*s[i][o]+d*s[i+1][o],v=L*s[i][o+1]+d*s[i+1][o+1],x=L*s[i][o+2]+d*s[i+1][o+1],l=L*s[i][o+3]+d*s[i+1][o+1],t[_]=u*y+3*(m*p*v+h*w*x)+b*l;return t}:e?function(t,r,f){t||(t=[]);var o=Math.max(0,Math.min(Math.floor(r),a)),i=Math.max(0,Math.min(Math.floor(f),n)),p=Math.max(0,Math.min(1,r-o)),d=Math.max(0,Math.min(1,f-i)),y,v,x,l,_,s;i*=3;var w=d*d,b=w*d,h=1-d,m=h*h,u=m*h,L=1-p;for(_=0;_<T.length;_++)s=T[_],y=L*s[i][o]+p*s[i][o+1],v=L*s[i+1][o]+p*s[i+1][o+1],x=L*s[i+2][o]+p*s[i+2][o+1],l=L*s[i+3][o]+p*s[i+3][o+1],t[_]=u*y+3*(m*d*v+h*w*x)+b*l;return t}:function(t,r,f){t||(t=[]);var o=Math.max(0,Math.min(Math.floor(r),a)),i=Math.max(0,Math.min(Math.floor(f),n)),p=Math.max(0,Math.min(1,r-o)),d=Math.max(0,Math.min(1,f-i)),y,v,x,l,_=1-d,s=1-p;for(x=0;x<T.length;x++)l=T[x],y=s*l[i][o]+p*l[i][o+1],v=s*l[i+1][o]+p*l[i+1][o+1],t[x]=_*y+d*v;return t}}},{}],706:[function(g,ne,ae){var T=g("../../lib"),c=g("./xy_defaults"),M=g("./ab_defaults"),A=g("./attributes"),e=g("../../components/color/attributes");ne.exports=function(n,t,r,f){function o(d,y){return T.coerce(n,t,A,d,y)}t._clipPathId="clip"+t.uid+"carpet";var i=o("color",e.defaultLine);if(T.coerceFont(o,"font"),o("carpet"),M(n,t,f,o,i),!t.a||!t.b){t.visible=!1;return}t.a.length<3&&(t.aaxis.smoothing=0),t.b.length<3&&(t.baxis.smoothing=0);var p=c(n,t,o);p||(t.visible=!1),t._cheater&&o("cheaterslope")}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),plot:g("./plot"),calc:g("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(g,ne,ae){ne.exports=function(T,c){for(var M=T._fullData.length,A,e=0;e<M;e++){var a=T._fullData[e];if(a.index!==c.index&&a.type==="carpet"&&(A||(A=a),a.carpet===c.carpet))return a}return A}},{}],709:[function(g,ne,ae){ne.exports=function(c,M,A){if(c.length===0)return"";var e,a=[],n=A?3:1;for(e=0;e<c.length;e+=n)a.push(c[e]+","+M[e]),A&&e<c.length-n&&(a.push("C"),a.push([c[e+1]+","+M[e+1],c[e+2]+","+M[e+2]+" "].join(" ")));return a.join(A?"":"L")}},{}],710:[function(g,ne,ae){var T=g("../../lib").isArrayOrTypedArray;ne.exports=function(M,A,e){var a;for(T(M)?M.length>A.length&&(M=M.slice(0,A.length)):M=[],a=0;a<A.length;a++)M[a]=e(A[a]);return M}},{"../../lib":503}],711:[function(g,ne,ae){ne.exports=function(c,M,A,e,a,n){var t=a[0]*c.dpdx(M),r=a[1]*c.dpdy(A),f=1,o=1;if(n){var i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),p=Math.sqrt(n[0]*n[0]+n[1]*n[1]),d=(a[0]*n[0]+a[1]*n[1])/i/p;o=Math.max(0,d)}var y=Math.atan2(r,t)*180/Math.PI;return y<-90?(y+=180,f=-f):y>90&&(y-=180,f=-f),{angle:y,flip:f,p:c.c2p(e,M,A),offsetMultplier:o}}},{}],712:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/drawing"),M=g("./map_1d_array"),A=g("./makepath"),e=g("./orient_text"),a=g("../../lib/svg_text_utils"),n=g("../../lib"),t=n.strRotate,r=n.strTranslate,f=g("../../constants/alignment");ne.exports=function(_,s,w,b){var h=s.xaxis,m=s.yaxis,u=_._fullLayout,L=u._clips;n.makeTraceGroups(b,w,"trace").each(function(S){var k=T.select(this),P=S[0],z=P.trace,I=z.aaxis,D=z.baxis,R=n.ensureSingle(k,"g","minorlayer"),B=n.ensureSingle(k,"g","majorlayer"),F=n.ensureSingle(k,"g","boundarylayer"),V=n.ensureSingle(k,"g","labellayer");k.style("opacity",z.opacity),i(h,m,B,I,"a",I._gridlines),i(h,m,B,D,"b",D._gridlines),i(h,m,R,I,"a",I._minorgridlines),i(h,m,R,D,"b",D._minorgridlines),i(h,m,F,I,"a-boundary",I._boundarylines),i(h,m,F,D,"b-boundary",D._boundarylines);var Y=p(_,h,m,z,P,V,I._labels,"a-label"),K=p(_,h,m,z,P,V,D._labels,"b-label");d(_,V,z,P,h,m,Y,K),o(z,P,L,h,m)})};function o(l,_,s,w,b){var h,m,u,L,S=s.select("#"+l._clipPathId);S.size()||(S=s.append("clipPath").classed("carpetclip",!0));var k=n.ensureSingle(S,"path","carpetboundary"),P=_.clipsegments,z=[];for(L=0;L<P.length;L++)h=P[L],m=M([],h.x,w.c2p),u=M([],h.y,b.c2p),z.push(A(m,u,h.bicubic));var I="M"+z.join("L")+"Z";S.attr("id",l._clipPathId),k.attr("d",I)}function i(l,_,s,w,b,h){var m="const-"+b+"-lines",u=s.selectAll("."+m).data(h);u.enter().append("path").classed(m,!0).style("vector-effect","non-scaling-stroke"),u.each(function(L){var S=L,k=S.x,P=S.y,z=M([],k,l.c2p),I=M([],P,_.c2p),D="M"+A(z,I,S.smoothing),R=T.select(this);R.attr("d",D).style("stroke-width",S.width).style("stroke",S.color).style("stroke-dasharray",c.dashStyle(S.dash,S.width)).style("fill","none")}),u.exit().remove()}function p(l,_,s,w,b,h,m,u){var L=h.selectAll("text."+u).data(m);L.enter().append("text").classed(u,!0);var S=0,k={};return L.each(function(P,z){var I;if(P.axis.tickangle==="auto")I=e(w,_,s,P.xy,P.dxy);else{var D=(P.axis.tickangle+180)*Math.PI/180;I=e(w,_,s,P.xy,[Math.cos(D),Math.sin(D)])}z||(k={angle:I.angle,flip:I.flip});var R=(P.endAnchor?-1:1)*I.flip,B=T.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(c.font,P.font).text(P.text).call(a.convertToTspans,l),F=c.bBox(this);B.attr("transform",r(I.p[0],I.p[1])+t(I.angle)+r(P.axis.labelpadding*R,F.height*.3)),S=Math.max(S,F.width+P.axis.labelpadding)}),L.exit().remove(),k.maxExtent=S,k}function d(l,_,s,w,b,h,m,u){var L,S,k,P,z=n.aggNums(Math.min,null,s.a),I=n.aggNums(Math.max,null,s.a),D=n.aggNums(Math.min,null,s.b),R=n.aggNums(Math.max,null,s.b);L=.5*(z+I),S=D,k=s.ab2xy(L,S,!0),P=s.dxyda_rough(L,S),m.angle===void 0&&n.extendFlat(m,e(s,b,h,k,s.dxydb_rough(L,S))),x(l,_,s,w,k,P,s.aaxis,b,h,m,"a-title"),L=z,S=.5*(D+R),k=s.ab2xy(L,S,!0),P=s.dxydb_rough(L,S),u.angle===void 0&&n.extendFlat(u,e(s,b,h,k,s.dxyda_rough(L,S))),x(l,_,s,w,k,P,s.baxis,b,h,u,"b-title")}var y=f.LINE_SPACING,v=(1-f.MID_SHIFT)/y+1;function x(l,_,s,w,b,h,m,u,L,S,k){var P=[];m.title.text&&P.push(m.title.text);var z=_.selectAll("text."+k).data(P),I=S.maxExtent;z.enter().append("text").classed(k,!0),z.each(function(){var D=e(s,u,L,b,h);["start","both"].indexOf(m.showticklabels)===-1&&(I=0);var R=m.title.font.size;I+=R+m.title.offset;var B=S.angle+(S.flip<0?180:0),F=(B-D.angle+450)%360,V=F>90&&F<270,Y=T.select(this);Y.text(m.title.text).call(a.convertToTspans,l),V&&(I=(-a.lineCount(Y)+v)*y*R-I),Y.attr("transform",r(D.p[0],D.p[1])+t(D.angle)+r(0,I)).attr("text-anchor","middle").call(c.font,m.title.font)}),z.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(g,ne,ae){var T=g("./constants"),c=g("../../lib/search").findBin,M=g("./compute_control_points"),A=g("./create_spline_evaluator"),e=g("./create_i_derivative_evaluator"),a=g("./create_j_derivative_evaluator");ne.exports=function(t){var r=t._a,f=t._b,o=r.length,i=f.length,p=t.aaxis,d=t.baxis,y=r[0],v=r[o-1],x=f[0],l=f[i-1],_=r[r.length-1]-r[0],s=f[f.length-1]-f[0],w=_*T.RELATIVE_CULL_TOLERANCE,b=s*T.RELATIVE_CULL_TOLERANCE;y-=w,v+=w,x-=b,l+=b,t.isVisible=function(h,m){return h>y&&h<v&&m>x&&m<l},t.isOccluded=function(h,m){return h<y||h>v||m<x||m>l},t.setScale=function(){var h=t._x,m=t._y,u=M(t._xctrl,t._yctrl,h,m,p.smoothing,d.smoothing);t._xctrl=u[0],t._yctrl=u[1],t.evalxy=A([t._xctrl,t._yctrl],o,i,p.smoothing,d.smoothing),t.dxydi=e([t._xctrl,t._yctrl],p.smoothing,d.smoothing),t.dxydj=a([t._xctrl,t._yctrl],p.smoothing,d.smoothing)},t.i2a=function(h){var m=Math.max(0,Math.floor(h[0]),o-2),u=h[0]-m;return(1-u)*r[m]+u*r[m+1]},t.j2b=function(h){var m=Math.max(0,Math.floor(h[1]),o-2),u=h[1]-m;return(1-u)*f[m]+u*f[m+1]},t.ij2ab=function(h){return[t.i2a(h[0]),t.j2b(h[1])]},t.a2i=function(h){var m=Math.max(0,Math.min(c(h,r),o-2)),u=r[m],L=r[m+1];return Math.max(0,Math.min(o-1,m+(h-u)/(L-u)))},t.b2j=function(h){var m=Math.max(0,Math.min(c(h,f),i-2)),u=f[m],L=f[m+1];return Math.max(0,Math.min(i-1,m+(h-u)/(L-u)))},t.ab2ij=function(h){return[t.a2i(h[0]),t.b2j(h[1])]},t.i2c=function(h,m){return t.evalxy([],h,m)},t.ab2xy=function(h,m,u){if(!u&&(h<r[0]||h>r[o-1]|m<f[0]||m>f[i-1]))return[!1,!1];var L=t.a2i(h),S=t.b2j(m),k=t.evalxy([],L,S);if(u){var P=0,z=0,I=[],D,R,B,F;h<r[0]?(D=0,R=0,P=(h-r[0])/(r[1]-r[0])):h>r[o-1]?(D=o-2,R=1,P=(h-r[o-1])/(r[o-1]-r[o-2])):(D=Math.max(0,Math.min(o-2,Math.floor(L))),R=L-D),m<f[0]?(B=0,F=0,z=(m-f[0])/(f[1]-f[0])):m>f[i-1]?(B=i-2,F=1,z=(m-f[i-1])/(f[i-1]-f[i-2])):(B=Math.max(0,Math.min(i-2,Math.floor(S))),F=S-B),P&&(t.dxydi(I,D,B,R,F),k[0]+=I[0]*P,k[1]+=I[1]*P),z&&(t.dxydj(I,D,B,R,F),k[0]+=I[0]*z,k[1]+=I[1]*z)}return k},t.c2p=function(h,m,u){return[m.c2p(h[0]),u.c2p(h[1])]},t.p2x=function(h,m,u){return[m.p2c(h[0]),u.p2c(h[1])]},t.dadi=function(h){var m=Math.max(0,Math.min(r.length-2,h));return r[m+1]-r[m]},t.dbdj=function(h){var m=Math.max(0,Math.min(f.length-2,h));return f[m+1]-f[m]},t.dxyda=function(h,m,u,L){var S=t.dxydi(null,h,m,u,L),k=t.dadi(h,u);return[S[0]/k,S[1]/k]},t.dxydb=function(h,m,u,L){var S=t.dxydj(null,h,m,u,L),k=t.dbdj(m,L);return[S[0]/k,S[1]/k]},t.dxyda_rough=function(h,m,u){var L=_*(u||.1),S=t.ab2xy(h+L,m,!0),k=t.ab2xy(h-L,m,!0);return[(S[0]-k[0])*.5/L,(S[1]-k[1])*.5/L]},t.dxydb_rough=function(h,m,u){var L=s*(u||.1),S=t.ab2xy(h,m+L,!0),k=t.ab2xy(h,m-L,!0);return[(S[0]-k[0])*.5/L,(S[1]-k[1])*.5/L]},t.dpdx=function(h){return h._m},t.dpdy=function(h){return h._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(g,ne,ae){var T=g("../../lib");ne.exports=function(M,A,e){var a,n,t,r=[],f=[],o=M[0].length,i=M.length;function p(J,G){var Z=0,re,se=0;return J>0&&(re=M[G][J-1])!==void 0&&(se++,Z+=re),J<o-1&&(re=M[G][J+1])!==void 0&&(se++,Z+=re),G>0&&(re=M[G-1][J])!==void 0&&(se++,Z+=re),G<i-1&&(re=M[G+1][J])!==void 0&&(se++,Z+=re),Z/Math.max(1,se)}var d=0;for(a=0;a<o;a++)for(n=0;n<i;n++)M[n][a]===void 0&&(r.push(a),f.push(n),M[n][a]=p(a,n)),d=Math.max(d,Math.abs(M[n][a]));if(!r.length)return M;var y,v,x,l,_,s,w,b,h,m,u,L=1e-5,S=0,k=100,P=0,z=r.length;do{for(S=0,t=0;t<z;t++){a=r[t],n=f[t];var I=0,D=0,R,B,F,V,Y,K;a===0?(Y=Math.min(o-1,2),F=A[Y],V=A[1],R=M[n][Y],B=M[n][1],D+=B+(B-R)*(A[0]-V)/(V-F),I++):a===o-1&&(Y=Math.max(0,o-3),F=A[Y],V=A[o-2],R=M[n][Y],B=M[n][o-2],D+=B+(B-R)*(A[o-1]-V)/(V-F),I++),(a===0||a===o-1)&&n>0&&n<i-1&&(y=e[n+1]-e[n],v=e[n]-e[n-1],D+=(v*M[n+1][a]+y*M[n-1][a])/(v+y),I++),n===0?(K=Math.min(i-1,2),F=e[K],V=e[1],R=M[K][a],B=M[1][a],D+=B+(B-R)*(e[0]-V)/(V-F),I++):n===i-1&&(K=Math.max(0,i-3),F=e[K],V=e[i-2],R=M[K][a],B=M[i-2][a],D+=B+(B-R)*(e[i-1]-V)/(V-F),I++),(n===0||n===i-1)&&a>0&&a<o-1&&(y=A[a+1]-A[a],v=A[a]-A[a-1],D+=(v*M[n][a+1]+y*M[n][a-1])/(v+y),I++),I?D/=I:(x=A[a+1]-A[a],l=A[a]-A[a-1],_=e[n+1]-e[n],s=e[n]-e[n-1],w=x*l*(x+l),b=_*s*(_+s),D=(w*(s*M[n+1][a]+_*M[n-1][a])+b*(l*M[n][a+1]+x*M[n][a-1]))/(b*(l+x)+w*(s+_))),h=D-M[n][a],m=h/d,S+=m*m,u=I?0:.85,M[n][a]+=h*(1+u)}S=Math.sqrt(S)}while(P++<k&&S>L);return T.log("Smoother converged to",S,"after",P,"iterations"),M}},{"../../lib":503}],715:[function(g,ne,ae){var T=g("../../lib").isArray1D;ne.exports=function(M,A,e){var a=e("x"),n=a&&a.length,t=e("y"),r=t&&t.length;if(!n&&!r)return!1;if(A._cheater=!a,(!n||T(a))&&(!r||T(t))){var f=n?a.length:1/0;r&&(f=Math.min(f,t.length)),A.a&&A.a.length&&(f=Math.min(f,A.a.length)),A.b&&A.b.length&&(f=Math.min(f,A.b.length)),A._length=f}else A._length=null;return!0}},{"../../lib":503}],716:[function(g,ne,ae){var T=g("../../plots/template_attributes").hovertemplateAttrs,c=g("../scattergeo/attributes"),M=g("../../components/colorscale/attributes"),A=g("../../plots/attributes"),e=g("../../components/color/attributes").defaultLine,a=g("../../lib/extend").extendFlat,n=c.marker.line;ne.exports=a({locations:{valType:"data_array",editType:"calc"},locationmode:c.locationmode,z:{valType:"data_array",editType:"calc"},geojson:a({},c.geojson,{}),featureidkey:c.featureidkey,text:a({},c.text,{}),hovertext:a({},c.hovertext,{}),marker:{line:{color:a({},n.color,{dflt:e}),width:a({},n.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:c.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:c.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:a({},A.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:T(),showlegend:a({},A.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":969}],717:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../constants/numerical").BADNUM,M=g("../../components/colorscale/calc"),A=g("../scatter/arrays_to_calcdata"),e=g("../scatter/calc_selection");function a(n){return n&&typeof n=="string"}ne.exports=function(t,r){var f=r._length,o=new Array(f),i;r.geojson?i=function(x){return a(x)||T(x)}:i=a;for(var p=0;p<f;p++){var d=o[p]={},y=r.locations[p],v=r.z[p];i(y)&&T(v)?(d.loc=y,d.z=v):(d.loc=null,d.z=c),d.index=p}return A(o,r),M(t,r,{vals:r.z,containerStr:"",cLetter:"z"}),e(o,r),o}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"fast-isnumeric":190}],718:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/colorscale/defaults"),M=g("./attributes");ne.exports=function(e,a,n,t){function r(v,x){return T.coerce(e,a,M,v,x)}var f=r("locations"),o=r("z");if(!(f&&f.length&&T.isArrayOrTypedArray(o)&&o.length)){a.visible=!1;return}a._length=Math.min(f.length,o.length);var i=r("geojson"),p;(typeof i=="string"&&i!==""||T.isPlainObject(i))&&(p="geojson-id");var d=r("locationmode",p);d==="geojson-id"&&r("featureidkey"),r("text"),r("hovertext"),r("hovertemplate");var y=r("marker.line.width");y&&r("marker.line.color"),r("marker.opacity"),c(e,a,t,r,{prefix:"",cLetter:"z"}),T.coerceSelectionMarkerOpacity(a,r)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(g,ne,ae){ne.exports=function(c,M,A,e,a){c.location=M.location,c.z=M.z;var n=e[a];return n.fIn&&n.fIn.properties&&(c.properties=n.fIn.properties),c.ct=n.ct,c}},{}],720:[function(g,ne,ae){var T=g("../../plots/cartesian/axes"),c=g("./attributes"),M=g("../../lib").fillText;ne.exports=function(a,n,t){var r=a.cd,f=r[0].trace,o=a.subplot,i,p,d,y,v=[n,t],x=[n+360,t];for(p=0;p<r.length;p++)if(i=r[p],y=!1,i._polygons){for(d=0;d<i._polygons.length;d++)i._polygons[d].contains(v)&&(y=!y),i._polygons[d].contains(x)&&(y=!y);if(y)break}if(!(!y||!i))return a.x0=a.x1=a.xa.c2p(i.ct),a.y0=a.y1=a.ya.c2p(i.ct),a.index=i.index,a.location=i.loc,a.z=i.z,a.zLabel=T.tickText(o.mockAxis,o.mockAxis.c2l(i.z),"hover").text,a.hovertemplate=i.hovertemplate,A(a,f,i),[a]};function A(e,a,n){if(!a.hovertemplate){var t=n.hi||a.hoverinfo,r=String(n.loc),f=t==="all"?c.hoverinfo.flags:t.split("+"),o=f.indexOf("name")!==-1,i=f.indexOf("location")!==-1,p=f.indexOf("z")!==-1,d=f.indexOf("text")!==-1,y=!o&&i,v=[];y?e.nameOverride=r:(o&&(e.nameOverride=a.name),i&&v.push(r)),p&&v.push(e.zLabel),d&&M(n,a,v),e.extraText=v.join("<br>")}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../heatmap/colorbar"),calc:g("./calc"),calcGeoJSON:g("./plot").calcGeoJSON,plot:g("./plot").plot,style:g("./style").style,styleOnSelect:g("./style").styleOnSelect,hoverPoints:g("./hover"),eventData:g("./event_data"),selectPoints:g("./select"),moduleType:"trace",name:"choropleth",basePlotModule:g("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=g("../../lib/geo_location_utils"),A=g("../../lib/topojson_utils").getTopojsonFeatures,e=g("../../plots/cartesian/autorange").findExtremes,a=g("./style").style;function n(r,f,o){var i=f.layers.backplot.select(".choroplethlayer");c.makeTraceGroups(i,o,"trace choropleth").each(function(p){var d=T.select(this),y=d.selectAll("path.choroplethlocation").data(c.identity);y.enter().append("path").classed("choroplethlocation",!0),y.exit().remove(),a(r,p)})}function t(r,f){for(var o=r[0].trace,i=f[o.geo],p=i._subplot,d=o.locationmode,y=o._length,v=d==="geojson-id"?M.extractTraceFeature(r):A(o,p.topojson),x=[],l=[],_=0;_<y;_++){var s=r[_],w=d==="geojson-id"?s.fOut:M.locationToFeature(d,s.loc,v);if(w){s.geojson=w,s.ct=w.properties.ct,s._polygons=M.feature2polygons(w);var b=M.computeBbox(w);x.push(b[0],b[2]),l.push(b[1],b[3])}else s.geojson=null}if(i.fitbounds==="geojson"&&d==="geojson-id"){var h=M.computeBbox(M.getTraceGeojson(o));x=[h[0],h[2]],l=[h[1],h[3]]}var m={padded:!0};o._extremes.lon=e(i.lonaxis._ax,x,m),o._extremes.lat=e(i.lataxis._ax,l,m)}ne.exports={calcGeoJSON:t,plot:n}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(g,ne,ae){ne.exports=function(c,M){var A=c.cd,e=c.xaxis,a=c.yaxis,n=[],t,r,f,o,i;if(M===!1)for(t=0;t<A.length;t++)A[t].selected=0;else for(t=0;t<A.length;t++)r=A[t],f=r.ct,!!f&&(o=e.c2p(f),i=a.c2p(f),M.contains([o,i],null,t,c)?(n.push({pointNumber:t,lon:f[0],lat:f[1]}),r.selected=1):r.selected=0);return n}},{}],724:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/color"),M=g("../../components/drawing"),A=g("../../components/colorscale");function e(t,r){r&&a(t,r)}function a(t,r){var f=r[0].trace,o=r[0].node3,i=o.selectAll(".choroplethlocation"),p=f.marker||{},d=p.line||{},y=A.makeColorScaleFuncFromTrace(f);i.each(function(v){T.select(this).attr("fill",y(v.z)).call(c.stroke,v.mlc||d.color).call(M.dashLine,"",v.mlw||d.width||0).style("opacity",p.opacity)}),M.selectedPointStyle(i,f,t)}function n(t,r){var f=r[0].node3,o=r[0].trace;o.selectedpoints?M.selectedPointStyle(f.selectAll(".choroplethlocation"),o,t):a(t,r)}ne.exports={style:e,styleOnSelect:n}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(g,ne,ae){var T=g("../choropleth/attributes"),c=g("../../components/colorscale/attributes"),M=g("../../plots/template_attributes").hovertemplateAttrs,A=g("../../plots/attributes"),e=g("../../lib/extend").extendFlat;ne.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},T.featureidkey,{}),below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,marker:{line:{color:e({},T.marker.line.color,{editType:"plot"}),width:e({},T.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},T.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},T.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},T.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:T.hoverinfo,hovertemplate:M({},{keys:["properties"]}),showlegend:e({},A.showlegend,{dflt:!1})},c("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib"),M=g("../../components/colorscale"),A=g("../../components/drawing"),e=g("../../lib/geojson_utils").makeBlank,a=g("../../lib/geo_location_utils");function n(r){var f=r[0].trace,o=f.visible===!0&&f._length!==0,i={layout:{visibility:"none"},paint:{}},p={layout:{visibility:"none"},paint:{}},d=f._opts={fill:i,line:p,geojson:e()};if(!o)return d;var y=a.extractTraceFeature(r);if(!y)return d;var v=M.makeColorScaleFuncFromTrace(f),x=f.marker,l=x.line||{},_;c.isArrayOrTypedArray(x.opacity)&&(_=function(S){var k=S.mo;return T(k)?+c.constrain(k,0,1):0});var s;c.isArrayOrTypedArray(l.color)&&(s=function(S){return S.mlc});var w;c.isArrayOrTypedArray(l.width)&&(w=function(S){return S.mlw});for(var b=0;b<r.length;b++){var h=r[b],m=h.fOut;if(m){var u=m.properties;u.fc=v(h.z),_&&(u.mo=_(h)),s&&(u.mlc=s(h)),w&&(u.mlw=w(h)),h.ct=u.ct,h._polygons=a.feature2polygons(m)}}var L=_?{type:"identity",property:"mo"}:x.opacity;return c.extendFlat(i.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),c.extendFlat(p.paint,{"line-color":s?{type:"identity",property:"mlc"}:l.color,"line-width":w?{type:"identity",property:"mlw"}:l.width,"line-opacity":L}),i.layout.visibility="visible",p.layout.visibility="visible",d.geojson={type:"FeatureCollection",features:y},t(r),d}function t(r){var f=r[0].trace,o=f._opts,i;if(f.selectedpoints){for(var p=A.makeSelectedPointStyleFns(f),d=0;d<r.length;d++){var y=r[d];y.fOut&&(y.fOut.properties.mo2=p.selectedOpacityFn(y))}i={type:"identity",property:"mo2"}}else i=c.isArrayOrTypedArray(f.marker.opacity)?{type:"identity",property:"mo"}:f.marker.opacity;return c.extendFlat(o.fill.paint,{"fill-opacity":i}),c.extendFlat(o.line.paint,{"line-opacity":i}),o}ne.exports={convert:n,convertOnSelect:t}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/colorscale/defaults"),M=g("./attributes");ne.exports=function(e,a,n,t){function r(d,y){return T.coerce(e,a,M,d,y)}var f=r("locations"),o=r("z"),i=r("geojson");if(!T.isArrayOrTypedArray(f)||!f.length||!T.isArrayOrTypedArray(o)||!o.length||!(typeof i=="string"&&i!==""||T.isPlainObject(i))){a.visible=!1;return}r("featureidkey"),a._length=Math.min(f.length,o.length),r("below"),r("text"),r("hovertext"),r("hovertemplate");var p=r("marker.line.width");p&&r("marker.line.color"),r("marker.opacity"),c(e,a,t,r,{prefix:"",cLetter:"z"}),T.coerceSelectionMarkerOpacity(a,r)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../heatmap/colorbar"),calc:g("../choropleth/calc"),plot:g("./plot"),hoverPoints:g("../choropleth/hover"),eventData:g("../choropleth/event_data"),selectPoints:g("../choropleth/select"),styleOnSelect:function(T,c){if(c){var M=c[0].trace;M._glTrace.updateOnSelect(c)}},getBelow:function(T,c){for(var M=c.getMapLayers(),A=M.length-2;A>=0;A--){var e=M[A].id;if(typeof e=="string"&&e.indexOf("water")===0){for(var a=A+1;a<M.length;a++)if(e=M[a].id,typeof e=="string"&&e.indexOf("plotly-")===-1)return e}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:g("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(g,ne,ae){var T=g("./convert").convert,c=g("./convert").convertOnSelect,M=g("../../plots/mapbox/constants").traceLayerPrefix;function A(a,n){this.type="choroplethmapbox",this.subplot=a,this.uid=n,this.sourceId="source-"+n,this.layerList=[["fill",M+n+"-fill"],["line",M+n+"-line"]],this.below=null}var e=A.prototype;e.update=function(a){this._update(T(a))},e.updateOnSelect=function(a){this._update(c(a))},e._update=function(a){var n=this.subplot,t=this.layerList,r=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(a.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(a,r),this.below=r);for(var f=0;f<t.length;f++){var o=t[f],i=o[0],p=o[1],d=a[i];n.setOptions(p,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&n.setOptions(p,"setPaintProperty",d.paint)}},e._addLayers=function(a,n){for(var t=this.subplot,r=this.layerList,f=this.sourceId,o=0;o<r.length;o++){var i=r[o],p=i[0],d=a[p];t.addLayer({type:p,id:i[1],source:f,layout:d.layout,paint:d.paint},n)}},e._removeLayers=function(){for(var a=this.subplot.map,n=this.layerList,t=n.length-1;t>=0;t--)a.removeLayer(n[t][1])},e.dispose=function(){var a=this.subplot.map;this._removeLayers(),a.removeSource(this.sourceId)},ne.exports=function(n,t){var r=t[0].trace,f=new A(n,r.uid),o=f.sourceId,i=T(t),p=f.below=n.belowLookup["trace-"+r.uid];return n.map.addSource(o,{type:"geojson",data:i.geojson}),f._addLayers(i,p),t[0].trace._glTrace=f,f}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(g,ne,ae){var T=g("../../components/colorscale/attributes"),c=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=g("../../plots/template_attributes").hovertemplateAttrs,A=g("../mesh3d/attributes"),e=g("../../plots/attributes"),a=g("../../lib/extend").extendFlat,n={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:M({editType:"calc"},{keys:["norm"]}),uhoverformat:c("u",1),vhoverformat:c("v",1),whoverformat:c("w",1),xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(n,T("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var t=["opacity","lightposition","lighting"];t.forEach(function(r){n[r]=A[r]}),n.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),n.transforms=void 0,ne.exports=n},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(g,ne,ae){var T=g("../../components/colorscale/calc");ne.exports=function(M,A){for(var e=A.u,a=A.v,n=A.w,t=Math.min(A.x.length,A.y.length,A.z.length,e.length,a.length,n.length),r=-1/0,f=1/0,o=0;o<t;o++){var i=e[o],p=a[o],d=n[o],y=Math.sqrt(i*i+p*p+d*d);r=Math.max(r,y),f=Math.min(f,y)}A._len=t,A._normMax=r,T(M,A,{vals:[f,r],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(g,ne,ae){var T=g("../../../stackgl_modules").gl_cone3d,c=g("../../../stackgl_modules").gl_cone3d.createConeMesh,M=g("../../lib").simpleMap,A=g("../../lib/gl_format_color").parseColorScale,e=g("../../components/colorscale").extractOpts,a=g("../../plots/gl3d/zip3");function n(d,y){this.scene=d,this.uid=y,this.mesh=null,this.data=null}var t=n.prototype;t.handlePick=function(d){if(d.object===this.mesh){var y=d.index=d.data.index,v=this.data.x[y],x=this.data.y[y],l=this.data.z[y],_=this.data.u[y],s=this.data.v[y],w=this.data.w[y];d.traceCoordinate=[v,x,l,_,s,w,Math.sqrt(_*_+s*s+w*w)];var b=this.data.hovertext||this.data.text;return Array.isArray(b)&&b[y]!==void 0?d.textLabel=b[y]:b&&(d.textLabel=b),!0}};var r={xaxis:0,yaxis:1,zaxis:2},f={tip:1,tail:0,cm:.25,center:.5},o={tip:1,tail:1,cm:.75,center:.5};function i(d,y){var v=d.fullSceneLayout,x=d.dataScale,l={};function _(h,m){var u=v[m],L=x[r[m]];return M(h,function(S){return u.d2l(S)*L})}l.vectors=a(_(y.u,"xaxis"),_(y.v,"yaxis"),_(y.w,"zaxis"),y._len),l.positions=a(_(y.x,"xaxis"),_(y.y,"yaxis"),_(y.z,"zaxis"),y._len);var s=e(y);l.colormap=A(y),l.vertexIntensityBounds=[s.min/y._normMax,s.max/y._normMax],l.coneOffset=f[y.anchor],y.sizemode==="scaled"?l.coneSize=y.sizeref||.5:l.coneSize=y.sizeref&&y._normMax?y.sizeref/y._normMax:.5;var w=T(l),b=y.lightposition;return w.lightPosition=[b.x,b.y,b.z],w.ambient=y.lighting.ambient,w.diffuse=y.lighting.diffuse,w.specular=y.lighting.specular,w.roughness=y.lighting.roughness,w.fresnel=y.lighting.fresnel,w.opacity=y.opacity,y._pad=o[y.anchor]*w.vectorScale*w.coneScale*y._normMax,w}t.update=function(d){this.data=d;var y=i(this.scene,d);this.mesh.update(y)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function p(d,y){var v=d.glplot.gl,x=i(d,y),l=c(v,x),_=new n(d,y.uid);return _.mesh=l,_.data=y,l._trace=_,d.glplot.add(l),_}ne.exports=p},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/colorscale/defaults"),M=g("./attributes");ne.exports=function(e,a,n,t){function r(v,x){return T.coerce(e,a,M,v,x)}var f=r("u"),o=r("v"),i=r("w"),p=r("x"),d=r("y"),y=r("z");if(!f||!f.length||!o||!o.length||!i||!i.length||!p||!p.length||!d||!d.length||!y||!y.length){a.visible=!1;return}r("sizeref"),r("sizemode"),r("anchor"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),c(e,a,t,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(g,ne,ae){ne.exports={moduleType:"trace",name:"cone",basePlotModule:g("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:g("./calc"),plot:g("./convert"),eventData:function(T,c){return T.norm=c.traceCoordinate[6],T},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(g,ne,ae){var T=g("../heatmap/attributes"),c=g("../scatter/attributes"),M=g("../../plots/cartesian/axis_format_attributes"),A=M.axisHoverFormat,e=M.descriptionOnlyNumbers,a=g("../../components/colorscale/attributes"),n=g("../../components/drawing/attributes").dash,t=g("../../plots/font_attributes"),r=g("../../lib/extend").extendFlat,f=g("../../constants/filter_ops"),o=f.COMPARISON_OPS2,i=f.INTERVAL_OPS,p=c.line;ne.exports=r({z:T.z,x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:c.xperiod0,yperiod0:c.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,text:T.text,hovertext:T.hovertext,transpose:T.transpose,xtype:T.xtype,ytype:T.ytype,xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z",1),hovertemplate:T.hovertemplate,texttemplate:r({},T.texttemplate,{}),textfont:r({},T.textfont,{}),hoverongaps:T.hoverongaps,connectgaps:r({},T.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(o).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},p.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:n,smoothing:r({},p.smoothing,{}),editType:"plot"}},a("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":927}],736:[function(g,ne,ae){var T=g("../../components/colorscale"),c=g("../heatmap/calc"),M=g("./set_contours"),A=g("./end_plus");ne.exports=function(a,n){var t=c(a,n),r=t[0].z;M(n,r);var f=n.contours,o=T.extractOpts(n),i;if(f.coloring==="heatmap"&&o.auto&&n.autocontour===!1){var p=f.start,d=A(f),y=f.size||1,v=Math.floor((d-p)/y)+1;isFinite(y)||(y=1,v=1);var x=p-y/2,l=x+v*y;i=[x,l]}else i=r;return T.calc(a,n,{vals:i,cLetter:"z"}),t}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(g,ne,ae){ne.exports=function(T,c){var M=T[0],A=M.z,e;switch(c.type){case"levels":var a=Math.min(A[0][0],A[0][1]);for(e=0;e<T.length;e++){var n=T[e];n.prefixBoundary=!n.edgepaths.length&&(a>n.level||n.starts.length&&a===n.level)}break;case"constraint":if(M.prefixBoundary=!1,M.edgepaths.length)return;var t=M.x.length,r=M.y.length,f=-1/0,o=1/0;for(e=0;e<r;e++)o=Math.min(o,A[e][0]),o=Math.min(o,A[e][t-1]),f=Math.max(f,A[e][0]),f=Math.max(f,A[e][t-1]);for(e=1;e<t-1;e++)o=Math.min(o,A[0][e]),o=Math.min(o,A[r-1][e]),f=Math.max(f,A[0][e]),f=Math.max(f,A[r-1][e]);var i=c.value,p,d;switch(c._operation){case">":i>f&&(M.prefixBoundary=!0);break;case"<":(i<o||M.starts.length&&i===o)&&(M.prefixBoundary=!0);break;case"[]":p=Math.min(i[0],i[1]),d=Math.max(i[0],i[1]),(d<o||p>f||M.starts.length&&d===o)&&(M.prefixBoundary=!0);break;case"][":p=Math.min(i[0],i[1]),d=Math.max(i[0],i[1]),p<o&&d>f&&(M.prefixBoundary=!0);break}break}}},{}],738:[function(g,ne,ae){var T=g("../../components/colorscale"),c=g("./make_color_map"),M=g("./end_plus");function A(e,a,n){var t=a.contours,r=a.line,f=t.size||1,o=t.coloring,i=c(a,{isColorbar:!0});if(o==="heatmap"){var p=T.extractOpts(a);n._fillgradient=p.reversescale?T.flipScale(p.colorscale):p.colorscale,n._zrange=[p.min,p.max]}else o==="fill"&&(n._fillcolor=i);n._line={color:o==="lines"?i:r.color,width:t.showlines!==!1?r.width:0,dash:r.dash},n._levels={start:t.start,end:M(t),size:f}}ne.exports={min:"zmin",max:"zmax",calc:A}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(g,ne,ae){ne.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("./label_defaults"),M=g("../../components/color"),A=M.addOpacity,e=M.opacity,a=g("../../constants/filter_ops"),n=a.CONSTRAINT_REDUCTION,t=a.COMPARISON_OPS2;ne.exports=function(o,i,p,d,y,v){var x=i.contours,l,_,s,w=p("contours.operation");if(x._operation=n[w],r(p,x),w==="="?l=x.showlines=!0:(l=p("contours.showlines"),s=p("fillcolor",A((o.line||{}).color||y,.5))),l){var b=s&&e(s)?A(i.fillcolor,1):y;_=p("line.color",b),p("line.width",2),p("line.dash")}p("line.smoothing"),c(p,d,_,v)};function r(f,o){var i;t.indexOf(o.operation)===-1?(f("contours.value",[0,1]),Array.isArray(o.value)?o.value.length>2?o.value=o.value.slice(2):o.length===0?o.value=[0,1]:o.length<2?(i=parseFloat(o.value[0]),o.value=[i,i+1]):o.value=[parseFloat(o.value[0]),parseFloat(o.value[1])]:T(o.value)&&(i=parseFloat(o.value),o.value=[i,i+1])):(f("contours.value",0),T(o.value)||(Array.isArray(o.value)?o.value=parseFloat(o.value[0]):o.value=0))}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(g,ne,ae){var T=g("../../constants/filter_ops"),c=g("fast-isnumeric");ne.exports={"[]":A("[]"),"][":A("]["),">":e(">"),"<":e("<"),"=":e("=")};function M(a,n){var t=Array.isArray(n),r;function f(o){return c(o)?+o:null}return T.COMPARISON_OPS2.indexOf(a)!==-1?r=f(t?n[0]:n):T.INTERVAL_OPS.indexOf(a)!==-1?r=t?[f(n[0]),f(n[1])]:[f(n),f(n)]:T.SET_OPS.indexOf(a)!==-1&&(r=t?n.map(f):[f(n)]),r}function A(a){return function(n){n=M(a,n);var t=Math.min(n[0],n[1]),r=Math.max(n[0],n[1]);return{start:t,end:r,size:r-t}}}function e(a){return function(n){return n=M(a,n),{start:n,end:1/0,size:1/0}}}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(g,ne,ae){ne.exports=function(c,M,A,e){var a=e("contours.start"),n=e("contours.end"),t=a===!1||n===!1,r=A("contours.size"),f;t?f=M.autocontour=!0:f=A("autocontour",!1),(f||!r)&&A("ncontours")}},{}],743:[function(g,ne,ae){var T=g("../../lib");ne.exports=function(M,A){var e,a,n,t=function(o){return o.reverse()},r=function(o){return o};switch(A){case"=":case"<":return M;case">":for(M.length!==1&&T.warn("Contour data invalid for the specified inequality operation."),a=M[0],e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=t(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=t(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=t(a.starts[e]);return M;case"][":var f=t;t=r,r=f;case"[]":for(M.length!==2&&T.warn("Contour data invalid for the specified inequality range operation."),a=c(M[0]),n=c(M[1]),e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=t(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=t(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=t(a.starts[e]);for(;n.edgepaths.length;)a.edgepaths.push(r(n.edgepaths.shift()));for(;n.paths.length;)a.paths.push(r(n.paths.shift()));for(;n.starts.length;)a.starts.push(r(n.starts.shift()));return[a]}};function c(M){return T.extendFlat({},M,{edgepaths:T.extendDeep([],M.edgepaths),paths:T.extendDeep([],M.paths),starts:T.extendDeep([],M.starts)})}},{"../../lib":503}],744:[function(g,ne,ae){var T=g("../../lib"),c=g("../heatmap/xyz_defaults"),M=g("../scatter/period_defaults"),A=g("./constraint_defaults"),e=g("./contours_defaults"),a=g("./style_defaults"),n=g("../heatmap/label_defaults"),t=g("./attributes");ne.exports=function(f,o,i,p){function d(l,_){return T.coerce(f,o,t,l,_)}function y(l){return T.coerce2(f,o,t,l)}var v=c(f,o,d,p);if(!v){o.visible=!1;return}M(f,o,p,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hoverongaps"),d("hovertemplate");var x=d("contours.type")==="constraint";d("connectgaps",T.isArray1D(o.z)),x?A(f,o,d,p,i):(e(f,o,d,y),a(f,o,d,p)),o.contours&&o.contours.coloring==="heatmap"&&n(d,p)}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":947,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(g,ne,ae){var T=g("../../lib"),c=g("./constraint_mapping"),M=g("./end_plus");ne.exports=function(e,a,n){for(var t=e.type==="constraint"?c[e._operation](e.value):e,r=t.size,f=[],o=M(t),i=n.trace._carpetTrace,p=i?{xaxis:i.aaxis,yaxis:i.baxis,x:n.a,y:n.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:n.x,y:n.y},d=t.start;d<o;d+=r)if(f.push(T.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},p)),f.length>1e3){T.warn("Too many contours, clipping at 1000",e);break}return f}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(g,ne,ae){ne.exports=function(c){return c.end+c.size/1e6}},{}],747:[function(g,ne,ae){var T=g("../../lib"),c=g("./constants");ne.exports=function(r,f,o){var i,p,d,y,v;for(f=f||.01,o=o||.01,d=0;d<r.length;d++){for(y=r[d],v=0;v<y.starts.length;v++)p=y.starts[v],e(y,p,"edge",f,o);for(i=0;Object.keys(y.crossings).length&&i<1e4;)i++,p=Object.keys(y.crossings)[0].split(",").map(Number),e(y,p,void 0,f,o);i===1e4&&T.log("Infinite loop in contour?")}};function M(t,r,f,o){return Math.abs(t[0]-r[0])<f&&Math.abs(t[1]-r[1])<o}function A(t,r){var f=t[2]-r[2],o=t[3]-r[3];return Math.sqrt(f*f+o*o)}function e(t,r,f,o,i){var p=r.join(","),d=t.crossings[p],y=a(d,f,r),v=[n(t,r,[-y[0],-y[1]])],x=t.z.length,l=t.z[0].length,_=r.slice(),s=y.slice(),w;for(w=0;w<1e4;w++){if(d>20?(d=c.CHOOSESADDLE[d][(y[0]||y[1])<0?0:1],t.crossings[p]=c.SADDLEREMAINDER[d]):delete t.crossings[p],y=c.NEWDELTA[d],!y){T.log("Found bad marching index:",d,r,t.level);break}v.push(n(t,r,y)),r[0]+=y[0],r[1]+=y[1],p=r.join(","),M(v[v.length-1],v[v.length-2],o,i)&&v.pop();var b=y[0]&&(r[0]<0||r[0]>l-2)||y[1]&&(r[1]<0||r[1]>x-2),h=r[0]===_[0]&&r[1]===_[1]&&y[0]===s[0]&&y[1]===s[1];if(h||f&&b)break;d=t.crossings[p]}w===1e4&&T.log("Infinite loop in contour?");var m=M(v[0],v[v.length-1],o,i),u=0,L=.2*t.smoothing,S=[],k=0,P,z,I,D,R,B,F,V,Y,K,J;for(w=1;w<v.length;w++)F=A(v[w],v[w-1]),u+=F,S.push(F);var G=u/S.length*L;function Z(oe){return v[oe%v.length]}for(w=v.length-2;w>=k;w--)if(P=S[w],P<G){for(I=0,z=w-1;z>=k&&P+S[z]<G;z--)P+=S[z];if(m&&w===v.length-2)for(I=0;I<z&&P+S[I]<G;I++)P+=S[I];R=w-z+I+1,B=Math.floor((w+z+I+2)/2),!m&&w===v.length-2?D=v[v.length-1]:!m&&z===-1?D=v[0]:R%2?D=Z(B):D=[(Z(B)[0]+Z(B+1)[0])/2,(Z(B)[1]+Z(B+1)[1])/2],v.splice(z+1,w-z+1,D),w=z+1,I&&(k=I),m&&(w===v.length-2?v[I]=v[v.length-1]:w===0&&(v[v.length-1]=v[0]))}for(v.splice(0,k),w=0;w<v.length;w++)v[w].length=2;if(!(v.length<2))if(m)v.pop(),t.paths.push(v);else{f||T.log("Unclosed interior contour?",t.level,_.join(","),v.join("L"));var re=!1;for(V=0;V<t.edgepaths.length;V++)if(K=t.edgepaths[V],!re&&M(K[0],v[v.length-1],o,i)){v.pop(),re=!0;var se=!1;for(Y=0;Y<t.edgepaths.length;Y++)if(J=t.edgepaths[Y],M(J[J.length-1],v[0],o,i)){se=!0,v.shift(),t.edgepaths.splice(V,1),Y===V?t.paths.push(v.concat(J)):(Y>V&&Y--,t.edgepaths[Y]=J.concat(v,K));break}se||(t.edgepaths[V]=v.concat(K))}for(V=0;V<t.edgepaths.length&&!re;V++)K=t.edgepaths[V],M(K[K.length-1],v[0],o,i)&&(v.shift(),t.edgepaths[V]=K.concat(v),re=!0);re||t.edgepaths.push(v)}}function a(t,r,f){var o=0,i=0;return t>20&&r?t===208||t===1114?o=f[0]===0?1:-1:i=f[1]===0?1:-1:c.BOTTOMSTART.indexOf(t)!==-1?i=1:c.LEFTSTART.indexOf(t)!==-1?o=1:c.TOPSTART.indexOf(t)!==-1?i=-1:o=-1,[o,i]}function n(t,r,f){var o=r[0]+Math.max(f[0],0),i=r[1]+Math.max(f[1],0),p=t.z[i][o],d=t.xaxis,y=t.yaxis;if(f[1]){var v=(t.level-p)/(t.z[i][o+1]-p),x=(v!==1?(1-v)*d.c2l(t.x[o]):0)+(v!==0?v*d.c2l(t.x[o+1]):0);return[d.c2p(d.l2c(x),!0),y.c2p(t.y[i],!0),o+v,i]}else{var l=(t.level-p)/(t.z[i+1][o]-p),_=(l!==1?(1-l)*y.c2l(t.y[i]):0)+(l!==0?l*y.c2l(t.y[i+1]):0);return[d.c2p(t.x[o],!0),y.c2p(y.l2c(_),!0),o,i+l]}}},{"../../lib":503,"./constants":739}],748:[function(g,ne,ae){var T=g("../../components/color"),c=g("../heatmap/hover");ne.exports=function(A,e,a,n,t){t||(t={}),t.isContour=!0;var r=c(A,e,a,n,t);return r&&r.forEach(function(f){var o=f.trace;o.contours.type==="constraint"&&(o.fillcolor&&T.opacity(o.fillcolor)?f.color=T.addOpacity(o.fillcolor,1):o.contours.showlines&&T.opacity(o.line.color)&&(f.color=T.addOpacity(o.line.color,1)))}),r}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),plot:g("./plot").plot,style:g("./style"),colorbar:g("./colorbar"),hoverPoints:g("./hover"),moduleType:"trace",name:"contour",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(g,ne,ae){var T=g("../../lib");ne.exports=function(M,A,e,a){a||(a={});var n=M("contours.showlabels");if(n){var t=A.font;T.coerceFont(M,"contours.labelfont",{family:t.family,size:t.size,color:e}),M("contours.labelformat")}a.hasHover!==!1&&M("zhoverformat")}},{"../../lib":503}],751:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/colorscale"),M=g("./end_plus");ne.exports=function(e){var a=e.contours,n=a.start,t=M(a),r=a.size||1,f=Math.floor((t-n)/r)+1,o=a.coloring==="lines"?0:1,i=c.extractOpts(e);isFinite(r)||(r=1,f=1);var p=i.reversescale?c.flipScale(i.colorscale):i.colorscale,d=p.length,y=new Array(d),v=new Array(d),x,l;if(a.coloring==="heatmap"){var _=i.min,s=i.max;for(l=0;l<d;l++)x=p[l],y[l]=x[0]*(s-_)+_,v[l]=x[1];var w=T.extent([_,s,a.start,a.start+r*(f-1)]),b=w[_<s?0:1],h=w[_<s?1:0];b!==_&&(y.splice(0,0,b),v.splice(0,0,v[0])),h!==s&&(y.push(h),v.push(v[v.length-1]))}else for(l=0;l<d;l++)x=p[l],y[l]=(x[0]*(f+o-1)-o/2)*r+n,v[l]=x[1];return c.makeColorScaleFunc({domain:y,range:v},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(g,ne,ae){var T=g("./constants");ne.exports=function(A){var e=A[0].z,a=e.length,n=e[0].length,t=a===2||n===2,r,f,o,i,p,d,y,v,x;for(f=0;f<a-1;f++)for(i=[],f===0&&(i=i.concat(T.BOTTOMSTART)),f===a-2&&(i=i.concat(T.TOPSTART)),r=0;r<n-1;r++)for(o=i.slice(),r===0&&(o=o.concat(T.LEFTSTART)),r===n-2&&(o=o.concat(T.RIGHTSTART)),p=r+","+f,d=[[e[f][r],e[f][r+1]],[e[f+1][r],e[f+1][r+1]]],x=0;x<A.length;x++)v=A[x],y=c(v.level,d),!!y&&(v.crossings[p]=y,o.indexOf(y)!==-1&&(v.starts.push([r,f]),t&&o.indexOf(y,o.indexOf(y)+1)!==-1&&v.starts.push([r,f])))};function c(M,A){var e=(A[0][0]>M?0:1)+(A[0][1]>M?0:2)+(A[1][1]>M?0:4)+(A[1][0]>M?0:8);if(e===5||e===10){var a=(A[0][0]+A[0][1]+A[1][0]+A[1][1])/4;return M>a?e===5?713:1114:e===5?104:208}return e===15?0:e}},{"./constants":739}],753:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=g("../../components/drawing"),A=g("../../components/colorscale"),e=g("../../lib/svg_text_utils"),a=g("../../plots/cartesian/axes"),n=g("../../plots/cartesian/set_convert"),t=g("../heatmap/plot"),r=g("./make_crossings"),f=g("./find_all_paths"),o=g("./empty_pathinfo"),i=g("./convert_to_constraints"),p=g("./close_boundaries"),d=g("./constants"),y=d.LABELOPTIMIZER;ae.plot=function(m,u,L,S){var k=u.xaxis,P=u.yaxis;c.makeTraceGroups(S,L,"contour").each(function(z){var I=T.select(this),D=z[0],R=D.trace,B=D.x,F=D.y,V=R.contours,Y=o(V,u,D),K=c.ensureSingle(I,"g","heatmapcoloring"),J=[];V.coloring==="heatmap"&&(J=[z]),t(m,u,J,K),r(Y),f(Y);var G=k.c2p(B[0],!0),Z=k.c2p(B[B.length-1],!0),re=P.c2p(F[0],!0),se=P.c2p(F[F.length-1],!0),oe=[[G,se],[Z,se],[Z,re],[G,re]],N=Y;V.type==="constraint"&&(N=i(Y,V._operation)),v(I,oe,V),x(I,N,oe,V),_(I,Y,m,D,V),w(I,u,m,D,oe)})};function v(h,m,u){var L=c.ensureSingle(h,"g","contourbg"),S=L.selectAll("path").data(u.coloring==="fill"?[0]:[]);S.enter().append("path"),S.exit().remove(),S.attr("d","M"+m.join("L")+"Z").style("stroke","none")}function x(h,m,u,L){var S=L.coloring==="fill"||L.type==="constraint"&&L._operation!=="=",k="M"+u.join("L")+"Z";S&&p(m,L);var P=c.ensureSingle(h,"g","contourfill"),z=P.selectAll("path").data(S?m:[]);z.enter().append("path"),z.exit().remove(),z.each(function(I){var D=(I.prefixBoundary?k:"")+l(I,u);D?T.select(this).attr("d",D).style("stroke","none"):T.select(this).remove()})}function l(h,m){var u="",L=0,S=h.edgepaths.map(function(G,Z){return Z}),k=!0,P,z,I,D,R,B;function F(G){return Math.abs(G[1]-m[0][1])<.01}function V(G){return Math.abs(G[1]-m[2][1])<.01}function Y(G){return Math.abs(G[0]-m[0][0])<.01}function K(G){return Math.abs(G[0]-m[2][0])<.01}for(;S.length;){for(B=M.smoothopen(h.edgepaths[L],h.smoothing),u+=k?B:B.replace(/^M/,"L"),S.splice(S.indexOf(L),1),P=h.edgepaths[L][h.edgepaths[L].length-1],D=-1,I=0;I<4;I++){if(!P){c.log("Missing end?",L,h);break}for(F(P)&&!K(P)?z=m[1]:Y(P)?z=m[0]:V(P)?z=m[3]:K(P)&&(z=m[2]),R=0;R<h.edgepaths.length;R++){var J=h.edgepaths[R][0];Math.abs(P[0]-z[0])<.01?Math.abs(P[0]-J[0])<.01&&(J[1]-P[1])*(z[1]-J[1])>=0&&(z=J,D=R):Math.abs(P[1]-z[1])<.01?Math.abs(P[1]-J[1])<.01&&(J[0]-P[0])*(z[0]-J[0])>=0&&(z=J,D=R):c.log("endpt to newendpt is not vert. or horz.",P,z,J)}if(P=z,D>=0)break;u+="L"+z}if(D===h.edgepaths.length){c.log("unclosed perimeter path");break}L=D,k=S.indexOf(L)===-1,k&&(L=S[0],u+="Z")}for(L=0;L<h.paths.length;L++)u+=M.smoothclosed(h.paths[L],h.smoothing);return u}function _(h,m,u,L,S){var k=c.ensureSingle(h,"g","contourlines"),P=S.showlines!==!1,z=S.showlabels,I=P&&z,D=ae.createLines(k,P||z,m),R=ae.createLineClip(k,I,u,L.trace.uid),B=h.selectAll("g.contourlabels").data(z?[0]:[]);if(B.exit().remove(),B.enter().append("g").classed("contourlabels",!0),z){var F=[],V=[];c.clearLocationCache();var Y=ae.labelFormatter(u,L),K=M.tester.append("text").attr("data-notex",1).call(M.font,S.labelfont),J=m[0].xaxis,G=m[0].yaxis,Z=J._length,re=G._length,se=J.range,oe=G.range,N=c.aggNums(Math.min,null,L.x),U=c.aggNums(Math.max,null,L.x),q=c.aggNums(Math.min,null,L.y),Q=c.aggNums(Math.max,null,L.y),W=Math.max(J.c2p(N,!0),0),X=Math.min(J.c2p(U,!0),Z),te=Math.max(G.c2p(Q,!0),0),ee=Math.min(G.c2p(q,!0),re),ie={};se[0]<se[1]?(ie.left=W,ie.right=X):(ie.left=X,ie.right=W),oe[0]<oe[1]?(ie.top=te,ie.bottom=ee):(ie.top=ee,ie.bottom=te),ie.middle=(ie.top+ie.bottom)/2,ie.center=(ie.left+ie.right)/2,F.push([[ie.left,ie.top],[ie.right,ie.top],[ie.right,ie.bottom],[ie.left,ie.bottom]]);var le=Math.sqrt(Z*Z+re*re),ye=d.LABELDISTANCE*le/Math.max(1,m.length/d.LABELINCREASE);D.each(function(ue){var pe=ae.calcTextOpts(ue.level,Y,K,u);T.select(this).selectAll("path").each(function(){var ge=this,Te=c.getVisibleSegment(ge,ie,pe.height/2);if(!!Te&&!(Te.len<(pe.width+pe.height)*d.LABELMIN))for(var _e=Math.min(Math.ceil(Te.len/ye),d.LABELMAX),De=0;De<_e;De++){var Oe=ae.findBestTextLocation(ge,Te,pe,V,ie);if(!Oe)break;ae.addLabelData(Oe,pe,V,F)}})}),K.remove(),ae.drawLabels(B,V,u,R,I?F:null)}z&&!P&&D.remove()}ae.createLines=function(h,m,u){var L=u[0].smoothing,S=h.selectAll("g.contourlevel").data(m?u:[]);if(S.exit().remove(),S.enter().append("g").classed("contourlevel",!0),m){var k=S.selectAll("path.openline").data(function(z){return z.pedgepaths||z.edgepaths});k.exit().remove(),k.enter().append("path").classed("openline",!0),k.attr("d",function(z){return M.smoothopen(z,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var P=S.selectAll("path.closedline").data(function(z){return z.ppaths||z.paths});P.exit().remove(),P.enter().append("path").classed("closedline",!0),P.attr("d",function(z){return M.smoothclosed(z,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return S},ae.createLineClip=function(h,m,u,L){var S=u._fullLayout._clips,k=m?"clipline"+L:null,P=S.selectAll("#"+k).data(m?[0]:[]);return P.exit().remove(),P.enter().append("clipPath").classed("contourlineclip",!0).attr("id",k),M.setClipUrl(h,k,u),P},ae.labelFormatter=function(h,m){var u=h._fullLayout,L=m.trace,S=L.contours,k={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(S.labelformat)k.tickformat=S.labelformat,n(k,u);else{var P=A.extractOpts(L);if(P&&P.colorbar&&P.colorbar._axis)k=P.colorbar._axis;else{if(S.type==="constraint"){var z=S.value;Array.isArray(z)?k.range=[z[0],z[z.length-1]]:k.range=[z,z]}else k.range=[S.start,S.end],k.nticks=(S.end-S.start)/S.size;k.range[0]===k.range[1]&&(k.range[1]+=k.range[0]||1),k.nticks||(k.nticks=1e3),n(k,u),a.prepTicks(k),k._tmin=null,k._tmax=null}}return function(I){return a.tickText(k,I).text}},ae.calcTextOpts=function(h,m,u,L){var S=m(h);u.text(S).call(e.convertToTspans,L);var k=u.node(),P=M.bBox(k,!0);return{text:S,width:P.width,height:P.height,fontSize:+k.style["font-size"].replace("px",""),level:h,dy:(P.top+P.bottom)/2}},ae.findBestTextLocation=function(h,m,u,L,S){var k=u.width,P,z,I,D,R;m.isClosed?(z=m.len/y.INITIALSEARCHPOINTS,P=m.min+z/2,I=m.max):(z=(m.len-k)/(y.INITIALSEARCHPOINTS+1),P=m.min+z+k/2,I=m.max-(z+k)/2);for(var B=1/0,F=0;F<y.ITERATIONS;F++){for(var V=P;V<I;V+=z){var Y=c.getTextLocation(h,m.total,V,k),K=s(Y,u,L,S);K<B&&(B=K,R=Y,D=V)}if(B>y.MAXCOST*2)break;F&&(z/=2),P=D-z/2,I=P+z*1.5}if(B<=y.MAXCOST)return R};function s(h,m,u,L){var S=m.width/2,k=m.height/2,P=h.x,z=h.y,I=h.theta,D=Math.cos(I)*S,R=Math.sin(I)*S,B=(P>L.center?L.right-P:P-L.left)/(D+Math.abs(Math.sin(I)*k)),F=(z>L.middle?L.bottom-z:z-L.top)/(Math.abs(R)+Math.cos(I)*k);if(B<1||F<1)return 1/0;var V=y.EDGECOST*(1/(B-1)+1/(F-1));V+=y.ANGLECOST*I*I;for(var Y=P-D,K=z-R,J=P+D,G=z+R,Z=0;Z<u.length;Z++){var re=u[Z],se=Math.cos(re.theta)*re.width/2,oe=Math.sin(re.theta)*re.width/2,N=c.segmentDistance(Y,K,J,G,re.x-se,re.y-oe,re.x+se,re.y+oe)*2/(m.height+re.height),U=re.level===m.level,q=U?y.SAMELEVELDISTANCE:1;if(N<=q)return 1/0;var Q=y.NEIGHBORCOST*(U?y.SAMELEVELFACTOR:1);V+=Q/(N-q)}return V}ae.addLabelData=function(h,m,u,L){var S=m.fontSize,k=m.width+S/3,P=Math.max(0,m.height-S/3),z=h.x,I=h.y,D=h.theta,R=Math.sin(D),B=Math.cos(D),F=function(Y,K){return[z+Y*B-K*R,I+Y*R+K*B]},V=[F(-k/2,-P/2),F(-k/2,P/2),F(k/2,P/2),F(k/2,-P/2)];u.push({text:m.text,x:z,y:I,dy:m.dy,theta:D,level:m.level,width:k,height:P}),L.push(V)},ae.drawLabels=function(h,m,u,L,S){var k=h.selectAll("text").data(m,function(D){return D.text+","+D.x+","+D.y+","+D.theta});if(k.exit().remove(),k.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(D){var R=D.x+Math.sin(D.theta)*D.dy,B=D.y-Math.cos(D.theta)*D.dy;T.select(this).text(D.text).attr({x:R,y:B,transform:"rotate("+180*D.theta/Math.PI+" "+R+" "+B+")"}).call(e.convertToTspans,u)}),S){for(var P="",z=0;z<S.length;z++)P+="M"+S[z].join("L")+"Z";var I=c.ensureSingle(L,"path","");I.attr("d",P)}};function w(h,m,u,L,S){var k=L.trace,P=u._fullLayout._clips,z="clip"+k.uid,I=P.selectAll("#"+z).data(k.connectgaps?[]:[0]);if(I.enter().append("clipPath").classed("contourclip",!0).attr("id",z),I.exit().remove(),k.connectgaps===!1){var D={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:m.xaxis,yaxis:m.yaxis,x:L.x,y:L.y,z:b(L),smoothing:0};r([D]),f([D]),p([D],{type:"levels"});var R=c.ensureSingle(I,"path","");R.attr("d",(D.prefixBoundary?"M"+S.join("L")+"Z":"")+l(D,S))}else z=null;M.setClipUrl(h,z,u)}function b(h){var m=h.trace._emptypoints,u=[],L=h.z.length,S=h.z[0].length,k,P=[],z;for(k=0;k<S;k++)P.push(1);for(k=0;k<L;k++)u.push(P.slice());for(k=0;k<m.length;k++)z=m[k],u[z[0]][z[1]]=0;return h.zmask=u,u}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(g,ne,ae){var T=g("../../plots/cartesian/axes"),c=g("../../lib");ne.exports=function(e,a){var n=e.contours;if(e.autocontour){var t=e.zmin,r=e.zmax;(e.zauto||t===void 0)&&(t=c.aggNums(Math.min,null,a)),(e.zauto||r===void 0)&&(r=c.aggNums(Math.max,null,a));var f=M(t,r,e.ncontours);n.size=f.dtick,n.start=T.tickFirst(f),f.range.reverse(),n.end=T.tickFirst(f),n.start===t&&(n.start+=n.size),n.end===r&&(n.end-=n.size),n.start>n.end&&(n.start=n.end=(n.start+n.end)/2),e._input.contours||(e._input.contours={}),c.extendFlat(e._input.contours,{start:n.start,end:n.end,size:n.size}),e._input.autocontour=!0}else if(n.type!=="constraint"){var o=n.start,i=n.end,p=e._input.contours;if(o>i&&(n.start=p.start=i,i=n.end=p.end=o,o=n.start),!(n.size>0)){var d;o===i?d=1:d=M(o,i,e.ncontours).dtick,p.size=n.size=d}}};function M(A,e,a){var n={type:"linear",range:[A,e]};return T.autoTicks(n,(e-A)/(a||15)),n}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/drawing"),M=g("../heatmap/style"),A=g("./make_color_map");ne.exports=function(a){var n=T.select(a).selectAll("g.contour");n.style("opacity",function(t){return t[0].trace.opacity}),n.each(function(t){var r=T.select(this),f=t[0].trace,o=f.contours,i=f.line,p=o.size||1,d=o.start,y=o.type==="constraint",v=!y&&o.coloring==="lines",x=!y&&o.coloring==="fill",l=v||x?A(f):null;r.selectAll("g.contourlevel").each(function(w){T.select(this).selectAll("path").call(c.lineGroupStyle,i.width,v?l(w.level):i.color,i.dash)});var _=o.labelfont;if(r.selectAll("g.contourlabels text").each(function(w){c.font(T.select(this),{family:_.family,size:_.size,color:_.color||(v?l(w.level):i.color)})}),y)r.selectAll("g.contourfill path").style("fill",f.fillcolor);else if(x){var s;r.selectAll("g.contourfill path").style("fill",function(w){return s===void 0&&(s=w.level),l(w.level+.5*p)}),s===void 0&&(s=d),r.selectAll("g.contourbg path").style("fill",l(s-.5*p))}}),M(a)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(g,ne,ae){var T=g("../../components/colorscale/defaults"),c=g("./label_defaults");ne.exports=function(A,e,a,n,t){var r=a("contours.coloring"),f,o="";r==="fill"&&(f=a("contours.showlines")),f!==!1&&(r!=="lines"&&(o=a("line.color","#000")),a("line.width",.5),a("line.dash")),r!=="none"&&(A.showlegend!==!0&&(e.showlegend=!1),e._dfltShowLegend=!1,T(A,e,n,a,{prefix:"",cLetter:"z"})),a("line.smoothing"),c(a,n,o,t)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(g,ne,ae){var T=g("../heatmap/attributes"),c=g("../contour/attributes"),M=g("../../components/colorscale/attributes"),A=g("../../lib/extend").extendFlat,e=c.contours;ne.exports=A({carpet:{valType:"string",editType:"calc"},z:T.z,a:T.x,a0:T.x0,da:T.dx,b:T.y,b0:T.y0,db:T.dy,text:T.text,hovertext:T.hovertext,transpose:T.transpose,atype:T.xtype,btype:T.ytype,fillcolor:c.fillcolor,autocontour:c.autocontour,ncontours:c.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:c.line.color,width:c.line.width,dash:c.line.dash,smoothing:c.line.smoothing,editType:"plot"},transforms:void 0},M("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(g,ne,ae){var T=g("../../components/colorscale/calc"),c=g("../../lib"),M=g("../heatmap/convert_column_xyz"),A=g("../heatmap/clean_2d_array"),e=g("../heatmap/interp2d"),a=g("../heatmap/find_empties"),n=g("../heatmap/make_bound_array"),t=g("./defaults"),r=g("../carpet/lookup_carpetid"),f=g("../contour/set_contours");ne.exports=function(p,d){var y=d._carpetTrace=r(p,d);if(!(!y||!y.visible||y.visible==="legendonly")){if(!d.a||!d.b){var v=p.data[y.index],x=p.data[d.index];x.a||(x.a=v.a),x.b||(x.b=v.b),t(x,d,d._defaultColor,p._fullLayout)}var l=o(p,d);return f(d,d._z),l}};function o(i,p){var d=p._carpetTrace,y=d.aaxis,v=d.baxis,x,l,_,s,w,b,h;y._minDtick=0,v._minDtick=0,c.isArray1D(p.z)&&M(p,y,v,"a","b",["z"]),x=p._a=p._a||p.a,s=p._b=p._b||p.b,x=x?y.makeCalcdata(p,"_a"):[],s=s?v.makeCalcdata(p,"_b"):[],l=p.a0||0,_=p.da||1,w=p.b0||0,b=p.db||1,h=p._z=A(p._z||p.z,p.transpose),p._emptypoints=a(h),e(h,p._emptypoints);var m=c.maxRowLength(h),u=p.xtype==="scaled"?"":x,L=n(p,u,l,_,m,y),S=p.ytype==="scaled"?"":s,k=n(p,S,w,b,h.length,v),P={a:L,b:k,z:h};return p.contours.type==="levels"&&p.contours.coloring!=="none"&&T(i,p,{vals:h,containerStr:"",cLetter:"z"}),[P]}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(g,ne,ae){var T=g("../../lib"),c=g("../heatmap/xyz_defaults"),M=g("./attributes"),A=g("../contour/constraint_defaults"),e=g("../contour/contours_defaults"),a=g("../contour/style_defaults");ne.exports=function(t,r,f,o){function i(v,x){return T.coerce(t,r,M,v,x)}function p(v){return T.coerce2(t,r,M,v)}if(i("carpet"),t.a&&t.b){var d=c(t,r,i,o,"a","b");if(!d){r.visible=!1;return}i("text");var y=i("contours.type")==="constraint";y?A(t,r,i,o,f,{hasHover:!1}):(e(t,r,i,p),a(t,r,i,o,{hasHover:!1}))}else r._defaultColor=f,r._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../contour/colorbar"),calc:g("./calc"),plot:g("./plot"),style:g("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../carpet/map_1d_array"),M=g("../carpet/makepath"),A=g("../../components/drawing"),e=g("../../lib"),a=g("../contour/make_crossings"),n=g("../contour/find_all_paths"),t=g("../contour/plot"),r=g("../contour/constants"),f=g("../contour/convert_to_constraints"),o=g("../contour/empty_pathinfo"),i=g("../contour/close_boundaries"),p=g("../carpet/lookup_carpetid"),d=g("../carpet/axis_aligned_line");ne.exports=function(u,L,S,k){var P=L.xaxis,z=L.yaxis;e.makeTraceGroups(k,S,"contour").each(function(I){var D=T.select(this),R=I[0],B=R.trace,F=B._carpetTrace=p(u,B),V=u.calcdata[F.index][0];if(!F.visible||F.visible==="legendonly")return;var Y=R.a,K=R.b,J=B.contours,G=o(J,L,R),Z=J.type==="constraint",re=J._operation,se=Z?re==="="?"lines":"fill":J.coloring;function oe(ye){var ue=F.ab2xy(ye[0],ye[1],!0);return[P.c2p(ue[0]),z.c2p(ue[1])]}var N=[[Y[0],K[K.length-1]],[Y[Y.length-1],K[K.length-1]],[Y[Y.length-1],K[0]],[Y[0],K[0]]];a(G);var U=(Y[Y.length-1]-Y[0])*1e-8,q=(K[K.length-1]-K[0])*1e-8;n(G,U,q);var Q=G;J.type==="constraint"&&(Q=f(G,re)),y(G,oe);var W,X,te,ee,ie=[];for(ee=V.clipsegments.length-1;ee>=0;ee--)W=V.clipsegments[ee],X=c([],W.x,P.c2p),te=c([],W.y,z.c2p),X.reverse(),te.reverse(),ie.push(M(X,te,W.bicubic));var le="M"+ie.join("L")+"Z";w(D,V.clipsegments,P,z,Z,se),b(B,D,P,z,Q,N,oe,F,V,se,le),v(D,G,u,R,J,L,F),A.setClipUrl(D,F._clipPathId,u)})};function y(m,u){var L,S,k,P,z,I,D,R,B;for(L=0;L<m.length;L++){for(P=m[L],z=P.pedgepaths=[],I=P.ppaths=[],S=0;S<P.edgepaths.length;S++){for(B=P.edgepaths[S],D=[],k=0;k<B.length;k++)D[k]=u(B[k]);z.push(D)}for(S=0;S<P.paths.length;S++){for(B=P.paths[S],R=[],k=0;k<B.length;k++)R[k]=u(B[k]);I.push(R)}}}function v(m,u,L,S,k,P,z){var I=e.ensureSingle(m,"g","contourlines"),D=k.showlines!==!1,R=k.showlabels,B=D&&R,F=t.createLines(I,D||R,u),V=t.createLineClip(I,B,L,S.trace.uid),Y=m.selectAll("g.contourlabels").data(R?[0]:[]);if(Y.exit().remove(),Y.enter().append("g").classed("contourlabels",!0),R){var K=P.xaxis,J=P.yaxis,G=K._length,Z=J._length,re=[[[0,0],[G,0],[G,Z],[0,Z]]],se=[];e.clearLocationCache();var oe=t.labelFormatter(L,S),N=A.tester.append("text").attr("data-notex",1).call(A.font,k.labelfont),U={left:0,right:G,center:G/2,top:0,bottom:Z,middle:Z/2},q=Math.sqrt(G*G+Z*Z),Q=r.LABELDISTANCE*q/Math.max(1,u.length/r.LABELINCREASE);F.each(function(W){var X=t.calcTextOpts(W.level,oe,N,L);T.select(this).selectAll("path").each(function(te){var ee=this,ie=e.getVisibleSegment(ee,U,X.height/2);if(!!ie&&(x(ee,te,W,ie,z,X.height),!(ie.len<(X.width+X.height)*r.LABELMIN)))for(var le=Math.min(Math.ceil(ie.len/Q),r.LABELMAX),ye=0;ye<le;ye++){var ue=t.findBestTextLocation(ee,ie,X,se,U);if(!ue)break;t.addLabelData(ue,X,se,re)}})}),N.remove(),t.drawLabels(Y,se,L,V,B?re:null)}R&&!D&&F.remove()}function x(m,u,L,S,k,P){for(var z,I=0;I<L.pedgepaths.length;I++)u===L.pedgepaths[I]&&(z=L.edgepaths[I]);if(!z)return;var D=k.a[0],R=k.a[k.a.length-1],B=k.b[0],F=k.b[k.b.length-1];function V(Z,re){var se=0,oe,N=.1;return(Math.abs(Z[0]-D)<N||Math.abs(Z[0]-R)<N)&&(oe=_(k.dxydb_rough(Z[0],Z[1],N)),se=Math.max(se,P*s(re,oe)/2)),(Math.abs(Z[1]-B)<N||Math.abs(Z[1]-F)<N)&&(oe=_(k.dxyda_rough(Z[0],Z[1],N)),se=Math.max(se,P*s(re,oe)/2)),se}var Y=l(m,0,1),K=l(m,S.total,S.total-1),J=V(z[0],Y),G=S.total-V(z[z.length-1],K);S.min<J&&(S.min=J),S.max>G&&(S.max=G),S.len=S.max-S.min}function l(m,u,L){var S=m.getPointAtLength(u),k=m.getPointAtLength(L),P=k.x-S.x,z=k.y-S.y,I=Math.sqrt(P*P+z*z);return[P/I,z/I]}function _(m){var u=Math.sqrt(m[0]*m[0]+m[1]*m[1]);return[m[0]/u,m[1]/u]}function s(m,u){var L=Math.abs(m[0]*u[0]+m[1]*u[1]),S=Math.sqrt(1-L*L);return S/L}function w(m,u,L,S,k,P){var z,I,D,R,B=e.ensureSingle(m,"g","contourbg"),F=B.selectAll("path").data(P==="fill"&&!k?[0]:[]);F.enter().append("path"),F.exit().remove();var V=[];for(R=0;R<u.length;R++)z=u[R],I=c([],z.x,L.c2p),D=c([],z.y,S.c2p),V.push(M(I,D,z.bicubic));F.attr("d","M"+V.join("L")+"Z").style("stroke","none")}function b(m,u,L,S,k,P,z,I,D,R,B){var F=R==="fill";F&&i(k,m.contours);var V=e.ensureSingle(u,"g","contourfill"),Y=V.selectAll("path").data(F?k:[]);Y.enter().append("path"),Y.exit().remove(),Y.each(function(K){var J=(K.prefixBoundary?B:"")+h(m,K,P,z,I,D,L,S);J?T.select(this).attr("d",J).style("stroke","none"):T.select(this).remove()})}function h(m,u,L,S,k,P,z,I){var D,R="",B=u.edgepaths.map(function(te,ee){return ee}),F=!0,V,Y,K,J,G,Z,re=Math.abs(L[0][0]-L[2][0])*1e-4,se=Math.abs(L[0][1]-L[2][1])*1e-4;function oe(te){return Math.abs(te[1]-L[0][1])<se}function N(te){return Math.abs(te[1]-L[2][1])<se}function U(te){return Math.abs(te[0]-L[0][0])<re}function q(te){return Math.abs(te[0]-L[2][0])<re}function Q(te,ee){var ie,le,ye,ue,pe="";for(oe(te)&&!q(te)||N(te)&&!U(te)?(ue=k.aaxis,ye=d(k,P,[te[0],ee[0]],.5*(te[1]+ee[1]))):(ue=k.baxis,ye=d(k,P,.5*(te[0]+ee[0]),[te[1],ee[1]])),ie=1;ie<ye.length;ie++)for(pe+=ue.smoothing?"C":"L",le=0;le<ye[ie].length;le++){var ge=ye[ie][le];pe+=[z.c2p(ge[0]),I.c2p(ge[1])]+" "}return pe}for(D=0,V=null;B.length;){var W=u.edgepaths[D][0];for(V&&(R+=Q(V,W)),Z=A.smoothopen(u.edgepaths[D].map(S),u.smoothing),R+=F?Z:Z.replace(/^M/,"L"),B.splice(B.indexOf(D),1),V=u.edgepaths[D][u.edgepaths[D].length-1],J=-1,K=0;K<4;K++){if(!V){e.log("Missing end?",D,u);break}for(oe(V)&&!q(V)?Y=L[1]:U(V)?Y=L[0]:N(V)?Y=L[3]:q(V)&&(Y=L[2]),G=0;G<u.edgepaths.length;G++){var X=u.edgepaths[G][0];Math.abs(V[0]-Y[0])<re?Math.abs(V[0]-X[0])<re&&(X[1]-V[1])*(Y[1]-X[1])>=0&&(Y=X,J=G):Math.abs(V[1]-Y[1])<se?Math.abs(V[1]-X[1])<se&&(X[0]-V[0])*(Y[0]-X[0])>=0&&(Y=X,J=G):e.log("endpt to newendpt is not vert. or horz.",V,Y,X)}if(J>=0)break;R+=Q(V,Y),V=Y}if(J===u.edgepaths.length){e.log("unclosed perimeter path");break}D=J,F=B.indexOf(D)===-1,F&&(D=B[0],R+=Q(V,Y)+"Z",V=null)}for(D=0;D<u.paths.length;D++)R+=A.smoothclosed(u.paths[D].map(S),u.smoothing);return R}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(g,ne,ae){var T=g("../../components/colorscale/attributes"),c=g("../../plots/template_attributes").hovertemplateAttrs,M=g("../../plots/attributes"),A=g("../scattermapbox/attributes"),e=g("../../lib/extend").extendFlat;ne.exports=e({lon:A.lon,lat:A.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:A.text,hovertext:A.hovertext,hoverinfo:e({},M.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:c(),showlegend:e({},M.showlegend,{dflt:!1})},T("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":993}],763:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib").isArrayOrTypedArray,M=g("../../constants/numerical").BADNUM,A=g("../../components/colorscale/calc"),e=g("../../lib")._;ne.exports=function(n,t){for(var r=t._length,f=new Array(r),o=t.z,i=c(o)&&o.length,p=0;p<r;p++){var d=f[p]={},y=t.lon[p],v=t.lat[p];if(d.lonlat=T(y)&&T(v)?[+y,+v]:[M,M],i){var x=o[p];d.z=T(x)?x:M}}return A(n,t,{vals:i?o:[0,1],containerStr:"",cLetter:"z"}),r&&(f[0].t={labels:{lat:e(n,"lat:")+" ",lon:e(n,"lon:")+" "}}),f}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib"),M=g("../../components/color"),A=g("../../components/colorscale"),e=g("../../constants/numerical").BADNUM,a=g("../../lib/geojson_utils").makeBlank;ne.exports=function(t){var r=t[0].trace,f=r.visible===!0&&r._length!==0,o={layout:{visibility:"none"},paint:{}},i=r._opts={heatmap:o,geojson:a()};if(!f)return i;var p=[],d,y=r.z,v=r.radius,x=c.isArrayOrTypedArray(y)&&y.length,l=c.isArrayOrTypedArray(v);for(d=0;d<t.length;d++){var _=t[d],s=_.lonlat;if(s[0]!==e){var w={};if(x){var b=_.z;w.z=b!==e?b:0}l&&(w.r=T(v[d])&&v[d]>0?+v[d]:0),p.push({type:"Feature",geometry:{type:"Point",coordinates:s},properties:w})}}var h=A.extractOpts(r),m=h.reversescale?A.flipScale(h.colorscale):h.colorscale,u=m[0][1],L=M.opacity(u)<1?u:M.addOpacity(u,0),S=["interpolate",["linear"],["heatmap-density"],0,L];for(d=1;d<m.length;d++)S.push(m[d][0],m[d][1]);var k=["interpolate",["linear"],["get","z"],h.min,0,h.max,1];return c.extendFlat(i.heatmap.paint,{"heatmap-weight":x?k:1/(h.max-h.min),"heatmap-color":S,"heatmap-radius":l?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),i.geojson={type:"FeatureCollection",features:p},i.heatmap.layout.visibility="visible",i}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/colorscale/defaults"),M=g("./attributes");ne.exports=function(e,a,n,t){function r(p,d){return T.coerce(e,a,M,p,d)}var f=r("lon")||[],o=r("lat")||[],i=Math.min(f.length,o.length);if(!i){a.visible=!1;return}a._length=i,r("z"),r("radius"),r("below"),r("text"),r("hovertext"),r("hovertemplate"),c(e,a,t,r,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(g,ne,ae){ne.exports=function(c,M){return c.lon=M.lon,c.lat=M.lat,c.z=M.z,c}},{}],767:[function(g,ne,ae){var T=g("../../plots/cartesian/axes"),c=g("../scattermapbox/hover").hoverPoints,M=g("../scattermapbox/hover").getExtraText;ne.exports=function(e,a,n){var t=c(e,a,n);if(!!t){var r=t[0],f=r.cd,o=f[0].trace,i=f[r.index];if(delete r.color,"z"in i){var p=r.subplot.mockAxis;r.z=i.z,r.zLabel=T.tickText(p,p.c2l(i.z),"hover").text}return r.extraText=M(o,i,f[0].t.labels),[r]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":998}],768:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../heatmap/colorbar"),formatLabels:g("../scattermapbox/format_labels"),calc:g("./calc"),plot:g("./plot"),hoverPoints:g("./hover"),eventData:g("./event_data"),getBelow:function(T,c){for(var M=c.getMapLayers(),A=0;A<M.length;A++){var e=M[A],a=e.id;if(e.type==="symbol"&&typeof a=="string"&&a.indexOf("plotly-")===-1)return a}},moduleType:"trace",name:"densitymapbox",basePlotModule:g("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":997,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(g,ne,ae){var T=g("./convert"),c=g("../../plots/mapbox/constants").traceLayerPrefix;function M(e,a){this.type="densitymapbox",this.subplot=e,this.uid=a,this.sourceId="source-"+a,this.layerList=[["heatmap",c+a+"-heatmap"]],this.below=null}var A=M.prototype;A.update=function(e){var a=this.subplot,n=this.layerList,t=T(e),r=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(t.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(t,r),this.below=r);for(var f=0;f<n.length;f++){var o=n[f],i=o[0],p=o[1],d=t[i];a.setOptions(p,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&a.setOptions(p,"setPaintProperty",d.paint)}},A._addLayers=function(e,a){for(var n=this.subplot,t=this.layerList,r=this.sourceId,f=0;f<t.length;f++){var o=t[f],i=o[0],p=e[i];n.addLayer({type:i,id:o[1],source:r,layout:p.layout,paint:p.paint},a)}},A._removeLayers=function(){for(var e=this.subplot.map,a=this.layerList,n=a.length-1;n>=0;n--)e.removeLayer(a[n][1])},A.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},ne.exports=function(a,n){var t=n[0].trace,r=new M(a,t.uid),f=r.sourceId,o=T(n),i=r.below=a.belowLookup["trace-"+t.uid];return a.map.addSource(f,{type:"geojson",data:o.geojson}),r._addLayers(o,i),r}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(g,ne,ae){var T=g("../../lib");ne.exports=function(M,A){for(var e=0;e<M.length;e++)M[e].i=e;T.mergeArray(A.text,M,"tx"),T.mergeArray(A.hovertext,M,"htx");var a=A.marker;if(a){T.mergeArray(a.opacity,M,"mo"),T.mergeArray(a.color,M,"mc");var n=a.line;n&&(T.mergeArray(n.color,M,"mlc"),T.mergeArrayCastPositive(n.width,M,"mlw"))}}},{"../../lib":503}],771:[function(g,ne,ae){var T=g("../bar/attributes"),c=g("../scatter/attributes").line,M=g("../../plots/attributes"),A=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=g("../../plots/template_attributes").hovertemplateAttrs,a=g("../../plots/template_attributes").texttemplateAttrs,n=g("./constants"),t=g("../../lib/extend").extendFlat,r=g("../../components/color");ne.exports={x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),hovertext:T.hovertext,hovertemplate:e({},{keys:n.eventDataKeys}),hoverinfo:t({},M.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),text:T.text,textposition:T.textposition,insidetextanchor:t({},T.insidetextanchor,{dflt:"middle"}),textangle:t({},T.textangle,{dflt:0}),textfont:T.textfont,insidetextfont:T.insidetextfont,outsidetextfont:T.outsidetextfont,constraintext:T.constraintext,cliponaxis:T.cliponaxis,orientation:t({},T.orientation,{}),offset:t({},T.offset,{arrayOk:!1}),width:t({},T.width,{arrayOk:!1}),marker:f(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:t({},c.color,{dflt:r.defaultLine}),width:t({},c.width,{dflt:0,editType:"plot"}),dash:c.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup};function f(){var o=t({},T.marker);return delete o.pattern,o}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":773}],772:[function(g,ne,ae){var T=g("../../plots/cartesian/axes"),c=g("../../plots/cartesian/align_period"),M=g("./arrays_to_calcdata"),A=g("../scatter/calc_selection"),e=g("../../constants/numerical").BADNUM;ne.exports=function(t,r){var f=T.getFromId(t,r.xaxis||"x"),o=T.getFromId(t,r.yaxis||"y"),i,p,d,y,v,x,l,_;r.orientation==="h"?(i=f.makeCalcdata(r,"x"),d=o.makeCalcdata(r,"y"),y=c(r,o,"y",d),v=!!r.yperiodalignment,x="y"):(i=o.makeCalcdata(r,"y"),d=f.makeCalcdata(r,"x"),y=c(r,f,"x",d),v=!!r.xperiodalignment,x="x"),p=y.vals;var s=Math.min(p.length,i.length),w=new Array(s);for(r._base=[],l=0;l<s;l++){i[l]<0&&(i[l]=e);var b=!1;i[l]!==e&&l+1<s&&i[l+1]!==e&&(b=!0),_=w[l]={p:p[l],s:i[l],cNext:b},r._base[l]=-.5*_.s,v&&(w[l].orig_p=d[l],w[l][x+"End"]=y.ends[l],w[l][x+"Start"]=y.starts[l]),r.ids&&(_.id=String(r.ids[l])),l===0&&(w[0].vTotal=0),w[0].vTotal+=a(_.s),_.begR=a(_.s)/a(w[0].s)}var h;for(l=0;l<s;l++)_=w[l],_.s!==e&&(_.sumR=_.s/w[0].vTotal,_.difR=h!==void 0?_.s/h:1,h=_.s);return M(w,r),A(w,r),w};function a(n){return n===e?0:n}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":770}],773:[function(g,ne,ae){ne.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(g,ne,ae){var T=g("../bar/cross_trace_calc").setGroupPositions;ne.exports=function(M,A){var e=M._fullLayout,a=M._fullData,n=M.calcdata,t=A.xaxis,r=A.yaxis,f=[],o=[],i=[],p,d;for(d=0;d<a.length;d++){var y=a[d],v=y.orientation==="h";y.visible===!0&&y.xaxis===t._id&&y.yaxis===r._id&&y.type==="funnel"&&(p=n[d],v?i.push(p):o.push(p),f.push(p))}var x={mode:e.funnelmode,norm:e.funnelnorm,gap:e.funnelgap,groupgap:e.funnelgroupgap};for(T(M,t,r,o,x),T(M,r,t,i,x),d=0;d<f.length;d++){p=f[d];for(var l=0;l<p.length;l++)l+1<p.length&&(p[l].nextP0=p[l+1].p0,p[l].nextS0=p[l+1].s0,p[l].nextP1=p[l+1].p1,p[l].nextS1=p[l+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(g,ne,ae){var T=g("../../lib"),c=g("../bar/defaults").handleGroupingDefaults,M=g("../bar/defaults").handleText,A=g("../scatter/xy_defaults"),e=g("../scatter/period_defaults"),a=g("./attributes"),n=g("../../components/color");function t(o,i,p,d){function y(b,h){return T.coerce(o,i,a,b,h)}var v=A(o,i,d,y);if(!v){i.visible=!1;return}e(o,i,d,y),y("xhoverformat"),y("yhoverformat"),y("orientation",i.y&&!i.x?"v":"h"),y("offset"),y("width");var x=y("text");y("hovertext"),y("hovertemplate");var l=y("textposition");M(o,i,d,y,l,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition!=="none"&&!i.texttemplate&&y("textinfo",Array.isArray(x)?"text+value":"value");var _=y("marker.color",p);y("marker.line.color",n.defaultLine),y("marker.line.width");var s=y("connector.visible");if(s){y("connector.fillcolor",r(_));var w=y("connector.line.width");w&&(y("connector.line.color"),y("connector.line.dash"))}}function r(o){var i=T.isArrayOrTypedArray(o)?"#000":o;return n.addOpacity(i,.5*n.opacity(i))}function f(o,i){var p,d;function y(x){return T.coerce(d._input,d,a,x)}if(i.funnelmode==="group")for(var v=0;v<o.length;v++)d=o[v],p=d._input,c(p,d,i,y)}ne.exports={supplyDefaults:t,crossTraceDefaults:f}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":771}],776:[function(g,ne,ae){ne.exports=function(c,M){return c.x="xVal"in M?M.xVal:M.x,c.y="yVal"in M?M.yVal:M.y,"percentInitial"in M&&(c.percentInitial=M.percentInitial),"percentPrevious"in M&&(c.percentPrevious=M.percentPrevious),"percentTotal"in M&&(c.percentTotal=M.percentTotal),M.xa&&(c.xaxis=M.xa),M.ya&&(c.yaxis=M.ya),c}},{}],777:[function(g,ne,ae){var T=g("../../components/color").opacity,c=g("../bar/hover").hoverOnBars,M=g("../../lib").formatPercent;ne.exports=function(a,n,t,r,f){var o=c(a,n,t,r,f);if(!!o){var i=o.cd,p=i[0].trace,d=p.orientation==="h",y=o.index,v=i[y],x=d?"x":"y";o[x+"LabelVal"]=v.s,o.percentInitial=v.begR,o.percentInitialLabel=M(v.begR,1),o.percentPrevious=v.difR,o.percentPreviousLabel=M(v.difR,1),o.percentTotal=v.sumR,o.percentTotalLabel=M(v.sumR,1);var l=v.hi||p.hoverinfo,_=[];if(l&&l!=="none"&&l!=="skip"){var s=l==="all",w=l.split("+"),b=function(h){return s||w.indexOf(h)!==-1};b("percent initial")&&_.push(o.percentInitialLabel+" of initial"),b("percent previous")&&_.push(o.percentPreviousLabel+" of previous"),b("percent total")&&_.push(o.percentTotalLabel+" of total")}return o.extraText=_.join("<br>"),o.color=A(p,v),[o]}};function A(e,a){var n=e.marker,t=a.mc||n.color,r=a.mlc||n.line.color,f=a.mlw||n.line.width;if(T(t))return t;if(T(r)&&f)return r}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults").supplyDefaults,crossTraceDefaults:g("./defaults").crossTraceDefaults,supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc"),crossTraceCalc:g("./cross_trace_calc"),plot:g("./plot"),style:g("./style").style,hoverPoints:g("./hover"),eventData:g("./event_data"),selectPoints:g("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:g("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(g,ne,ae){ne.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(g,ne,ae){var T=g("../../lib"),c=g("./layout_attributes");ne.exports=function(M,A,e){var a=!1;function n(f,o){return T.coerce(M,A,c,f,o)}for(var t=0;t<e.length;t++){var r=e[t];if(r.visible&&r.type==="funnel"){a=!0;break}}a&&(n("funnelmode"),n("funnelgap",.2),n("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=g("../../components/drawing"),A=g("../../constants/numerical").BADNUM,e=g("../bar/plot"),a=g("../bar/uniform_text").clearMinTextSize;ne.exports=function(o,i,p,d){var y=o._fullLayout;a("funnel",y),n(o,i,p,d),t(o,i,p,d),e.plot(o,i,p,d,{mode:y.funnelmode,norm:y.funnelmode,gap:y.funnelgap,groupgap:y.funnelgroupgap})};function n(f,o,i,p){var d=o.xaxis,y=o.yaxis;c.makeTraceGroups(p,i,"trace bars").each(function(v){var x=T.select(this),l=v[0].trace,_=c.ensureSingle(x,"g","regions");if(!l.connector||!l.connector.visible){_.remove();return}var s=l.orientation==="h",w=_.selectAll("g.region").data(c.identity);w.enter().append("g").classed("region",!0),w.exit().remove();var b=w.size();w.each(function(h,m){if(!(m!==b-1&&!h.cNext)){var u=r(h,d,y,s),L=u[0],S=u[1],k="";L[0]!==A&&S[0]!==A&&L[1]!==A&&S[1]!==A&&L[2]!==A&&S[2]!==A&&L[3]!==A&&S[3]!==A&&(s?k+="M"+L[0]+","+S[1]+"L"+L[2]+","+S[2]+"H"+L[3]+"L"+L[1]+","+S[1]+"Z":k+="M"+L[1]+","+S[1]+"L"+L[2]+","+S[3]+"V"+S[2]+"L"+L[1]+","+S[0]+"Z"),k===""&&(k="M0,0Z"),c.ensureSingle(T.select(this),"path").attr("d",k).call(M.setClipUrl,o.layerClipId,f)}})})}function t(f,o,i,p){var d=o.xaxis,y=o.yaxis;c.makeTraceGroups(p,i,"trace bars").each(function(v){var x=T.select(this),l=v[0].trace,_=c.ensureSingle(x,"g","lines");if(!l.connector||!l.connector.visible||!l.connector.line.width){_.remove();return}var s=l.orientation==="h",w=_.selectAll("g.line").data(c.identity);w.enter().append("g").classed("line",!0),w.exit().remove();var b=w.size();w.each(function(h,m){if(!(m!==b-1&&!h.cNext)){var u=r(h,d,y,s),L=u[0],S=u[1],k="";L[3]!==void 0&&S[3]!==void 0&&(s?(k+="M"+L[0]+","+S[1]+"L"+L[2]+","+S[2],k+="M"+L[1]+","+S[1]+"L"+L[3]+","+S[2]):(k+="M"+L[1]+","+S[1]+"L"+L[2]+","+S[3],k+="M"+L[1]+","+S[0]+"L"+L[2]+","+S[2])),k===""&&(k="M0,0Z"),c.ensureSingle(T.select(this),"path").attr("d",k).call(M.setClipUrl,o.layerClipId,f)}})})}function r(f,o,i,p){var d=[],y=[],v=p?o:i,x=p?i:o;return d[0]=v.c2p(f.s0,!0),y[0]=x.c2p(f.p0,!0),d[1]=v.c2p(f.s1,!0),y[1]=x.c2p(f.p1,!0),d[2]=v.c2p(f.nextS0,!0),y[2]=x.c2p(f.nextP0,!0),d[3]=v.c2p(f.nextS1,!0),y[3]=x.c2p(f.nextP1,!0),p?[d,y]:[y,d]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/drawing"),M=g("../../components/color"),A=g("../../constants/interactions").DESELECTDIM,e=g("../bar/style"),a=g("../bar/uniform_text").resizeText,n=e.styleTextPoints;function t(r,f,o){var i=o||T.select(r).selectAll("g.funnellayer").selectAll("g.trace");a(r,i,"funnel"),i.style("opacity",function(p){return p[0].trace.opacity}),i.each(function(p){var d=T.select(this),y=p[0].trace;d.selectAll(".point > path").each(function(v){if(!v.isBlank){var x=y.marker;T.select(this).call(M.fill,v.mc||x.color).call(M.stroke,v.mlc||x.line.color).call(c.dashLine,x.line.dash,v.mlw||x.line.width).style("opacity",y.selectedpoints&&!v.selected?A:1)}}),n(d,y,r),d.selectAll(".regions").each(function(){T.select(this).selectAll("path").style("stroke-width",0).call(M.fill,y.connector.fillcolor)}),d.selectAll(".lines").each(function(){var v=y.connector.line;c.lineGroupStyle(T.select(this).selectAll("path"),v.width,v.color,v.dash)})})}ne.exports={style:t}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(g,ne,ae){var T=g("../pie/attributes"),c=g("../../plots/attributes"),M=g("../../plots/domain").attributes,A=g("../../plots/template_attributes").hovertemplateAttrs,e=g("../../plots/template_attributes").texttemplateAttrs,a=g("../../lib/extend").extendFlat;ne.exports={labels:T.labels,label0:T.label0,dlabel:T.dlabel,values:T.values,marker:{colors:T.marker.colors,line:{color:a({},T.marker.line.color,{dflt:null}),width:a({},T.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:T.text,hovertext:T.hovertext,scalegroup:a({},T.scalegroup,{}),textinfo:a({},T.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:a({},c.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:A({},{keys:["label","color","value","text","percent"]}),textposition:a({},T.textposition,{values:["inside","none"],dflt:"inside"}),textfont:T.textfont,insidetextfont:T.insidetextfont,title:{text:T.title.text,font:T.title.font,position:a({},T.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:M({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901}],784:[function(g,ne,ae){var T=g("../../plots/plots");ae.name="funnelarea",ae.plot=function(c,M,A,e){T.plotBasePlot(ae.name,c,M,A,e)},ae.clean=function(c,M,A,e){T.cleanBasePlot(ae.name,c,M,A,e)}},{"../../plots/plots":619}],785:[function(g,ne,ae){var T=g("../pie/calc");function c(A,e){return T.calc(A,e)}function M(A){T.crossTraceCalc(A,{type:"funnelarea"})}ne.exports={calc:c,crossTraceCalc:M}},{"../pie/calc":903}],786:[function(g,ne,ae){var T=g("../../lib"),c=g("./attributes"),M=g("../../plots/domain").defaults,A=g("../bar/defaults").handleText,e=g("../pie/defaults").handleLabelsAndValues;ne.exports=function(n,t,r,f){function o(b,h){return T.coerce(n,t,c,b,h)}var i=o("labels"),p=o("values"),d=e(i,p),y=d.len;if(t._hasLabels=d.hasLabels,t._hasValues=d.hasValues,!t._hasLabels&&t._hasValues&&(o("label0"),o("dlabel")),!y){t.visible=!1;return}t._length=y;var v=o("marker.line.width");v&&o("marker.line.color",f.paper_bgcolor),o("marker.colors"),o("scalegroup");var x=o("text"),l=o("texttemplate"),_;if(l||(_=o("textinfo",Array.isArray(x)?"text+percent":"percent")),o("hovertext"),o("hovertemplate"),l||_&&_!=="none"){var s=o("textposition");A(n,t,f,o,s,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}M(t,f,o);var w=o("title.text");w&&(o("title.position"),T.coerceFont(o,"title.font",f.font)),o("aspectratio"),o("baseratio")}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":904,"./attributes":783}],787:[function(g,ne,ae){ne.exports={moduleType:"trace",name:"funnelarea",basePlotModule:g("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults"),supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc").calc,crossTraceCalc:g("./calc").crossTraceCalc,plot:g("./plot"),style:g("./style"),styleOne:g("../pie/style_one"),meta:{}}},{"../pie/style_one":912,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(g,ne,ae){var T=g("../pie/layout_attributes").hiddenlabels;ne.exports={hiddenlabels:T,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":908}],789:[function(g,ne,ae){var T=g("../../lib"),c=g("./layout_attributes");ne.exports=function(A,e){function a(n,t){return T.coerce(A,e,c,n,t)}a("hiddenlabels"),a("funnelareacolorway",e.colorway),a("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/drawing"),M=g("../../lib"),A=M.strScale,e=M.strTranslate,a=g("../../lib/svg_text_utils"),n=g("../bar/plot"),t=n.toMoveInsideBar,r=g("../bar/uniform_text"),f=r.recordMinTextSize,o=r.clearMinTextSize,i=g("../pie/helpers"),p=g("../pie/plot"),d=p.attachFxHandlers,y=p.determineInsideTextFont,v=p.layoutAreas,x=p.prerenderTitles,l=p.positionTitleOutside,_=p.formatSliceLabel;ne.exports=function(m,u){var L=m._fullLayout;o("funnelarea",L),x(u,m),v(u,L._size),M.makeTraceGroups(L._funnelarealayer,u,"trace").each(function(S){var k=T.select(this),P=S[0],z=P.trace;b(S),k.each(function(){var I=T.select(this).selectAll("g.slice").data(S);I.enter().append("g").classed("slice",!0),I.exit().remove(),I.each(function(R,B){if(R.hidden){T.select(this).selectAll("path,g").remove();return}R.pointNumber=R.i,R.curveNumber=z.index;var F=P.cx,V=P.cy,Y=T.select(this),K=Y.selectAll("path.surface").data([R]);K.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Y.call(d,m,S);var J="M"+(F+R.TR[0])+","+(V+R.TR[1])+s(R.TR,R.BR)+s(R.BR,R.BL)+s(R.BL,R.TL)+"Z";K.attr("d",J),_(m,R,P);var G=i.castOption(z.textposition,R.pts),Z=Y.selectAll("g.slicetext").data(R.text&&G!=="none"?[0]:[]);Z.enter().append("g").classed("slicetext",!0),Z.exit().remove(),Z.each(function(){var re=M.ensureSingle(T.select(this),"text","",function(X){X.attr("data-notex",1)}),se=M.ensureUniformFontSize(m,y(z,R,L.font));re.text(R.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(c.font,se).call(a.convertToTspans,m);var oe=c.bBox(re.node()),N,U,q,Q=Math.min(R.BL[1],R.BR[1])+V,W=Math.max(R.TL[1],R.TR[1])+V;U=Math.max(R.TL[0],R.BL[0])+F,q=Math.min(R.TR[0],R.BR[0])+F,N=t(U,q,Q,W,oe,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),N.fontSize=se.size,f(z.type,N,L),S[B].transform=N,re.attr("transform",M.getTextTransform(N))})});var D=T.select(this).selectAll("g.titletext").data(z.title.text?[0]:[]);D.enter().append("g").classed("titletext",!0),D.exit().remove(),D.each(function(){var R=M.ensureSingle(T.select(this),"text","",function(V){V.attr("data-notex",1)}),B=z.title.text;z._meta&&(B=M.templateString(B,z._meta)),R.text(B).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(c.font,z.title.font).call(a.convertToTspans,m);var F=l(P,L._size);R.attr("transform",e(F.x,F.y)+A(Math.min(1,F.scale))+e(F.tx,F.ty))})})})};function s(h,m){var u=m[0]-h[0],L=m[1]-h[1];return"l"+u+","+L}function w(h,m){return[.5*(h[0]+m[0]),.5*(h[1]+m[1])]}function b(h){if(!h.length)return;var m=h[0],u=m.trace,L=u.aspectratio,S=u.baseratio;S>.999&&(S=.999);var k=Math.pow(S,2),P=m.vTotal,z=P*k/(1-k),I=P,D=z/P;function R(){var ee=Math.sqrt(D);return{x:ee,y:-ee}}function B(){var ee=R();return[ee.x,ee.y]}var F,V=[];V.push(B());var Y,K;for(Y=h.length-1;Y>-1;Y--)if(K=h[Y],!K.hidden){var J=K.v/I;D+=J,V.push(B())}var G=1/0,Z=-1/0;for(Y=0;Y<V.length;Y++)F=V[Y],G=Math.min(G,F[1]),Z=Math.max(Z,F[1]);for(Y=0;Y<V.length;Y++)V[Y][1]-=(Z+G)/2;var re=V[V.length-1][0],se=m.r,oe=(Z-G)/2,N=se/re,U=se/oe*L;for(m.r=U*oe,Y=0;Y<V.length;Y++)V[Y][0]*=N,V[Y][1]*=U;F=V[0];var q=[-F[0],F[1]],Q=[F[0],F[1]],W=0;for(Y=h.length-1;Y>-1;Y--)if(K=h[Y],!K.hidden){W+=1;var X=V[W][0],te=V[W][1];K.TL=[-X,te],K.TR=[X,te],K.BL=q,K.BR=Q,K.pxmid=w(K.TR,K.BR),q=K.TL,Q=K.TR}}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"@plotly/d3":58}],791:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../pie/style_one"),M=g("../bar/uniform_text").resizeText;ne.exports=function(e){var a=e._fullLayout._funnelarealayer.selectAll(".trace");M(e,a,"funnelarea"),a.each(function(n){var t=n[0],r=t.trace,f=T.select(this);f.style({opacity:r.opacity}),f.selectAll("path.surface").each(function(o){T.select(this).call(c,o,r)})})}},{"../bar/uniform_text":664,"../pie/style_one":912,"@plotly/d3":58}],792:[function(g,ne,ae){var T=g("../scatter/attributes"),c=g("../../plots/attributes"),M=g("../../plots/font_attributes"),A=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=g("../../plots/template_attributes").hovertemplateAttrs,a=g("../../plots/template_attributes").texttemplateAttrs,n=g("../../components/colorscale/attributes"),t=g("../../lib/extend").extendFlat;ne.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},T.x,{impliedEdits:{xtype:"array"}}),x0:t({},T.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},T.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},T.y,{impliedEdits:{ytype:"array"}}),y0:t({},T.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},T.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},T.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},T.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},T.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},T.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},T.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},T.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z",1),hovertemplate:e(),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:M({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},c.showlegend,{dflt:!1})},{transforms:void 0},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927}],793:[function(g,ne,ae){var T=g("../../registry"),c=g("../../lib"),M=g("../../plots/cartesian/axes"),A=g("../../plots/cartesian/align_period"),e=g("../histogram2d/calc"),a=g("../../components/colorscale/calc"),n=g("./convert_column_xyz"),t=g("./clean_2d_array"),r=g("./interp2d"),f=g("./find_empties"),o=g("./make_bound_array"),i=g("../../constants/numerical").BADNUM;ne.exports=function(v,x){var l=M.getFromId(v,x.xaxis||"x"),_=M.getFromId(v,x.yaxis||"y"),s=T.traceIs(x,"contour"),w=T.traceIs(x,"histogram"),b=T.traceIs(x,"gl2d"),h=s?"best":x.zsmooth,m,u,L,S,k,P,z,I,D,R,B;if(l._minDtick=0,_._minDtick=0,w)B=e(v,x),S=B.orig_x,m=B.x,u=B.x0,L=B.dx,I=B.orig_y,k=B.y,P=B.y0,z=B.dy,D=B.z;else{var F=x.z;c.isArray1D(F)?(n(x,l,_,"x","y",["z"]),m=x._x,k=x._y,F=x._z):(S=x.x?l.makeCalcdata(x,"x"):[],I=x.y?_.makeCalcdata(x,"y"):[],m=A(x,l,"x",S).vals,k=A(x,_,"y",I).vals,x._x=m,x._y=k),u=x.x0,L=x.dx,P=x.y0,z=x.dy,D=t(F,x,l,_)}(l.rangebreaks||_.rangebreaks)&&(D=d(m,k,D),w||(m=p(m),k=p(k),x._x=m,x._y=k)),!w&&(s||x.connectgaps)&&(x._emptypoints=f(D),r(D,x._emptypoints));function V(Q){h=x._input.zsmooth=x.zsmooth=!1,c.warn('cannot use zsmooth: "fast": '+Q)}if(h==="fast"){if(l.type==="log"||_.type==="log")V("log axis found");else if(!w){if(m.length){var Y=(m[m.length-1]-m[0])/(m.length-1),K=Math.abs(Y/100);for(R=0;R<m.length-1;R++)if(Math.abs(m[R+1]-m[R]-Y)>K){V("x scale is not linear");break}}if(k.length&&h==="fast"){var J=(k[k.length-1]-k[0])/(k.length-1),G=Math.abs(J/100);for(R=0;R<k.length-1;R++)if(Math.abs(k[R+1]-k[R]-J)>G){V("y scale is not linear");break}}}}var Z=c.maxRowLength(D),re=x.xtype==="scaled"?"":m,se=o(x,re,u,L,Z,l),oe=x.ytype==="scaled"?"":k,N=o(x,oe,P,z,D.length,_);b||(x._extremes[l._id]=M.findExtremes(l,se),x._extremes[_._id]=M.findExtremes(_,N));var U={x:se,y:N,z:D,text:x._text||x.text,hovertext:x._hovertext||x.hovertext};if(x.xperiodalignment&&S&&(U.orig_x=S),x.yperiodalignment&&I&&(U.orig_y=I),re&&re.length===se.length-1&&(U.xCenter=re),oe&&oe.length===N.length-1&&(U.yCenter=oe),w&&(U.xRanges=B.xRanges,U.yRanges=B.yRanges,U.pts=B.pts),s||a(v,x,{vals:D,cLetter:"z"}),s&&x.contours&&x.contours.coloring==="heatmap"){var q={type:x.type==="contour"?"heatmap":"histogram2d",xcalendar:x.xcalendar,ycalendar:x.ycalendar};U.xfill=o(q,re,u,L,Z,l),U.yfill=o(q,oe,P,z,D.length,_)}return[U]};function p(y){for(var v=[],x=y.length,l=0;l<x;l++){var _=y[l];_!==i&&v.push(_)}return v}function d(y,v,x){for(var l=[],_=-1,s=0;s<x.length;s++)if(v[s]!==i){_++,l[_]=[];for(var w=0;w<x[s].length;w++)y[w]!==i&&l[_].push(x[s][w])}return l}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib"),M=g("../../constants/numerical").BADNUM;ne.exports=function(e,a,n,t){var r,f,o,i,p,d;function y(w){if(!!T(w))return+w}if(a&&a.transpose){for(r=0,p=0;p<e.length;p++)r=Math.max(r,e[p].length);if(r===0)return!1;o=function(w){return w.length},i=function(w,b,h){return(w[h]||[])[b]}}else r=e.length,o=function(w,b){return w[b].length},i=function(w,b,h){return(w[b]||[])[h]};var v=function(w,b,h){return b===M||h===M?M:i(w,b,h)};function x(w){if(a&&a.type!=="carpet"&&a.type!=="contourcarpet"&&w&&w.type==="category"&&a["_"+w._id.charAt(0)].length){var b=w._id.charAt(0),h={},m=a["_"+b+"CategoryMap"]||a[b];for(p=0;p<m.length;p++)h[m[p]]=p;return function(u){var L=h[w._categories[u]];return L+1?L:M}}else return c.identity}var l=x(n),_=x(t);t&&t.type==="category"&&(r=t._categories.length);var s=new Array(r);for(p=0;p<r;p++)for(n&&n.type==="category"?f=n._categories.length:f=o(e,p),s[p]=new Array(f),d=0;d<f;d++)s[p][d]=y(v(e,_(p),l(d)));return s}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(g,ne,ae){ne.exports={min:"zmin",max:"zmax"}},{}],796:[function(g,ne,ae){var T=g("../../lib"),c=g("../../constants/numerical").BADNUM,M=g("../../plots/cartesian/align_period");ne.exports=function(e,a,n,t,r,f){var o=e._length,i=a.makeCalcdata(e,t),p=n.makeCalcdata(e,r);i=M(e,a,t,i).vals,p=M(e,n,r,p).vals;var d=e.text,y=d!==void 0&&T.isArray1D(d),v=e.hovertext,x=v!==void 0&&T.isArray1D(v),l,_,s=T.distinctVals(i),w=s.vals,b=T.distinctVals(p),h=b.vals,m=[],u,L,S=h.length,k=w.length;for(l=0;l<f.length;l++)m[l]=T.init2dArray(S,k);y&&(u=T.init2dArray(S,k)),x&&(L=T.init2dArray(S,k));var P=T.init2dArray(S,k);for(l=0;l<o;l++)if(i[l]!==c&&p[l]!==c){var z=T.findBin(i[l]+s.minDiff/2,w),I=T.findBin(p[l]+b.minDiff/2,h);for(_=0;_<f.length;_++){var D=f[_],R=e[D],B=m[_];B[I][z]=R[l],P[I][z]=l}y&&(u[I][z]=d[l]),x&&(L[I][z]=v[l])}for(e["_"+t]=w,e["_"+r]=h,_=0;_<f.length;_++)e["_"+f[_]]=m[_];y&&(e._text=u),x&&(e._hovertext=L),a&&a.type==="category"&&(e["_"+t+"CategoryMap"]=w.map(function(F){return a._categories[F]})),n&&n.type==="category"&&(e["_"+r+"CategoryMap"]=h.map(function(F){return n._categories[F]})),e._after2before=P}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(g,ne,ae){var T=g("../../lib"),c=g("./xyz_defaults"),M=g("./label_defaults"),A=g("../scatter/period_defaults"),e=g("./style_defaults"),a=g("../../components/colorscale/defaults"),n=g("./attributes");ne.exports=function(r,f,o,i){function p(y,v){return T.coerce(r,f,n,y,v)}var d=c(r,f,p,i);if(!d){f.visible=!1;return}A(r,f,i,p),p("xhoverformat"),p("yhoverformat"),p("text"),p("hovertext"),p("hovertemplate"),M(p,i),e(r,f,p,i),p("hoverongaps"),p("connectgaps",T.isArray1D(f.z)&&f.zsmooth!==!1),a(r,f,i,p,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":947,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(g,ne,ae){var T=g("../../lib").maxRowLength;ne.exports=function(M){var A=[],e={},a=[],n=M[0],t=[],r=[0,0,0],f=T(M),o,i,p,d,y,v,x,l;for(i=0;i<M.length;i++)for(o=t,t=n,n=M[i+1]||[],p=0;p<f;p++)t[p]===void 0&&(v=(t[p-1]!==void 0?1:0)+(t[p+1]!==void 0?1:0)+(o[p]!==void 0?1:0)+(n[p]!==void 0?1:0),v?(i===0&&v++,p===0&&v++,i===M.length-1&&v++,p===t.length-1&&v++,v<4&&(e[[i,p]]=[i,p,v]),A.push([i,p,v])):a.push([i,p]));for(;a.length;){for(x={},l=!1,y=a.length-1;y>=0;y--)d=a[y],i=d[0],p=d[1],v=((e[[i-1,p]]||r)[2]+(e[[i+1,p]]||r)[2]+(e[[i,p-1]]||r)[2]+(e[[i,p+1]]||r)[2])/20,v&&(x[d]=[i,p,v],a.splice(y,1),l=!0);if(!l)throw"findEmpties iterated with no new neighbors";for(d in x)e[d]=x[d],A.push(x[d])}return A.sort(function(_,s){return s[2]-_[2]})}},{"../../lib":503}],799:[function(g,ne,ae){var T=g("../../components/fx"),c=g("../../lib"),M=g("../../plots/cartesian/axes"),A=g("../../components/colorscale").extractOpts;ne.exports=function(a,n,t,r,f){f||(f={});var o=f.isContour,i=a.cd[0],p=i.trace,d=a.xa,y=a.ya,v=i.x,x=i.y,l=i.z,_=i.xCenter,s=i.yCenter,w=i.zmask,b=p.zhoverformat,h=v,m=x,u,L,S,k;if(a.index!==!1){try{S=Math.round(a.index[1]),k=Math.round(a.index[0])}catch{c.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(S<0||S>=l[0].length||k<0||k>l.length)return}else{if(T.inbox(n-v[0],n-v[v.length-1],0)>0||T.inbox(t-x[0],t-x[x.length-1],0)>0)return;if(o){var P;for(h=[2*v[0]-v[1]],P=1;P<v.length;P++)h.push((v[P]+v[P-1])/2);for(h.push([2*v[v.length-1]-v[v.length-2]]),m=[2*x[0]-x[1]],P=1;P<x.length;P++)m.push((x[P]+x[P-1])/2);m.push([2*x[x.length-1]-x[x.length-2]])}S=Math.max(0,Math.min(h.length-2,c.findBin(n,h))),k=Math.max(0,Math.min(m.length-2,c.findBin(t,m)))}var z=d.c2p(v[S]),I=d.c2p(v[S+1]),D=y.c2p(x[k]),R=y.c2p(x[k+1]),B,F;o?(B=i.orig_x||v,F=i.orig_y||x,I=z,u=B[S],R=D,L=F[k]):(B=i.orig_x||_||v,F=i.orig_y||s||x,u=_?B[S]:(B[S]+B[S+1])/2,L=s?F[k]:(F[k]+F[k+1])/2,d&&d.type==="category"&&(u=v[S]),y&&y.type==="category"&&(L=x[k]),p.zsmooth&&(z=I=d.c2p(u),D=R=y.c2p(L)));var V=l[k][S];if(w&&!w[k][S]&&(V=void 0),!(V===void 0&&!p.hoverongaps)){var Y;Array.isArray(i.hovertext)&&Array.isArray(i.hovertext[k])?Y=i.hovertext[k][S]:Array.isArray(i.text)&&Array.isArray(i.text[k])&&(Y=i.text[k][S]);var K=A(p),J={type:"linear",range:[K.min,K.max],hoverformat:b,_separators:d._separators,_numFormat:d._numFormat},G=M.tickText(J,V,"hover").text;return[c.extendFlat(a,{index:p._after2before?p._after2before[k][S]:[k,S],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:z,x1:I,y0:D,y1:R,xLabelVal:u,yLabelVal:L,zLabelVal:V,zLabel:G,text:Y})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),plot:g("./plot"),colorbar:g("./colorbar"),style:g("./style"),hoverPoints:g("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(g,ne,ae){var T=g("../../lib"),c=.01,M=[[-1,0],[1,0],[0,-1],[0,1]];function A(a){return .5-.25*Math.min(1,a*.5)}ne.exports=function(n,t){var r=1,f;for(e(n,t),f=0;f<t.length&&!(t[f][2]<4);f++);for(t=t.slice(f),f=0;f<100&&r>c;f++)r=e(n,t,A(r));return r>c&&T.log("interp2d didn't converge quickly",r),n};function e(a,n,t){var r=0,f,o,i,p,d,y,v,x,l,_,s,w,b;for(p=0;p<n.length;p++){for(f=n[p],o=f[0],i=f[1],s=a[o][i],_=0,l=0,d=0;d<4;d++)y=M[d],v=a[o+y[0]],!!v&&(x=v[i+y[1]],x!==void 0&&(_===0?w=b=x:(w=Math.min(w,x),b=Math.max(b,x)),l++,_+=x));if(l===0)throw"iterateInterp2d order is wrong: no defined neighbors";a[o][i]=_/l,s===void 0?l<4&&(r=1):(a[o][i]=(1+t)*a[o][i]-t*s,b>w&&(r=Math.max(r,Math.abs(a[o][i]-s)/(b-w))))}return r}},{"../../lib":503}],802:[function(g,ne,ae){var T=g("../../lib");ne.exports=function(M,A){M("texttemplate");var e=T.extendFlat({},A.font,{color:"auto",size:"auto"});T.coerceFont(M,"textfont",e)}},{"../../lib":503}],803:[function(g,ne,ae){var T=g("../../registry"),c=g("../../lib").isArrayOrTypedArray;ne.exports=function(A,e,a,n,t,r){var f=[],o=T.traceIs(A,"contour"),i=T.traceIs(A,"histogram"),p=T.traceIs(A,"gl2d"),d,y,v,x=c(e)&&e.length>1;if(x&&!i&&r.type!=="category"){var l=e.length;if(l<=t){if(o||p)f=e.slice(0,t);else if(t===1)f=[e[0]-.5,e[0]+.5];else{for(f=[1.5*e[0]-.5*e[1]],v=1;v<l;v++)f.push((e[v-1]+e[v])*.5);f.push(1.5*e[l-1]-.5*e[l-2])}if(l<t){var _=f[f.length-1],s=_-f[f.length-2];for(v=l;v<t;v++)_+=s,f.push(_)}}else return o?e.slice(0,t):e.slice(0,t+1)}else{var w=A[r._id.charAt(0)+"calendar"];if(i)d=r.r2c(a,0,w);else if(c(e)&&e.length===1)d=e[0];else if(a===void 0)d=0;else{var b=r.type==="log"?r.d2c:r.r2c;d=b(a,0,w)}for(y=n||1,v=o||p?0:-.5;v<t;v++)f.push(d+y*v)}return f}},{"../../lib":503,"../../registry":638}],804:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("tinycolor2"),M=g("../../registry"),A=g("../../components/drawing"),e=g("../../plots/cartesian/axes"),a=g("../../lib"),n=g("../../lib/svg_text_utils"),t=g("../scatter/format_labels"),r=g("../../components/color"),f=g("../../components/colorscale").extractOpts,o=g("../../components/colorscale").makeColorScaleFuncFromTrace,i=g("../../constants/xmlns_namespaces"),p=g("../../constants/alignment"),d=p.LINE_SPACING,y="heatmap-label";function v(w){return w.selectAll("g."+y)}function x(w){v(w).remove()}ne.exports=function(w,b,h,m){var u=b.xaxis,L=b.yaxis;a.makeTraceGroups(m,h,"hm").each(function(S){var k=T.select(this),P=S[0],z=P.trace,I=z.xgap||0,D=z.ygap||0,R=P.z,B=P.x,F=P.y,V=P.xCenter,Y=P.yCenter,K=M.traceIs(z,"contour"),J=K?"best":z.zsmooth,G=R.length,Z=a.maxRowLength(R),re=!1,se=!1,oe,N,U,q,Q,W,X,te;for(W=0;oe===void 0&&W<B.length-1;)oe=u.c2p(B[W]),W++;for(W=B.length-1;N===void 0&&W>0;)N=u.c2p(B[W]),W--;for(N<oe&&(U=N,N=oe,oe=U,re=!0),W=0;q===void 0&&W<F.length-1;)q=L.c2p(F[W]),W++;for(W=F.length-1;Q===void 0&&W>0;)Q=L.c2p(F[W]),W--;if(Q<q&&(U=q,q=Q,Q=U,se=!0),K&&(V=B,Y=F,B=P.xfill,F=P.yfill),J!=="fast"){var ee=J==="best"?0:.5;oe=Math.max(-ee*u._length,oe),N=Math.min((1+ee)*u._length,N),q=Math.max(-ee*L._length,q),Q=Math.min((1+ee)*L._length,Q)}var ie=Math.round(N-oe),le=Math.round(Q-q),ye=ie<=0||le<=0;if(ye){var ue=k.selectAll("image").data([]);ue.exit().remove(),x(k);return}var pe,ge;J==="fast"?(pe=Z,ge=G):(pe=ie,ge=le);var Te=document.createElement("canvas");Te.width=pe,Te.height=ge;var _e=Te.getContext("2d"),De=o(z,{noNumericCheck:!0,returnArray:!0}),Oe,Ue;J==="fast"?(Oe=re?function(Lr){return Z-1-Lr}:a.identity,Ue=se?function(Lr){return G-1-Lr}:a.identity):(Oe=function(Lr){return a.constrain(Math.round(u.c2p(B[Lr])-oe),0,ie)},Ue=function(Lr){return a.constrain(Math.round(L.c2p(F[Lr])-q),0,le)});var xe=Ue(0),Pe=[xe,xe],Ve=re?0:1,Qe=se?0:1,Fe=0,Le=0,Ne=0,dt=0,Dt,Xt,Tt,zt,Ut;function Et(Lr,br){if(Lr!==void 0){var Nr=De(Lr);return Nr[0]=Math.round(Nr[0]),Nr[1]=Math.round(Nr[1]),Nr[2]=Math.round(Nr[2]),Fe+=br,Le+=Nr[0]*br,Ne+=Nr[1]*br,dt+=Nr[2]*br,Nr}return[0,0,0,0]}function Mt(Lr,br,Nr,kn){var _n=Lr[Nr.bin0];if(_n===void 0)return Et(void 0,1);var Wn=Lr[Nr.bin1],Ln=br[Nr.bin0],Xn=br[Nr.bin1],Kn=Wn-_n||0,Aa=Ln-_n||0,Ta;return Wn===void 0?Xn===void 0?Ta=0:Ln===void 0?Ta=2*(Xn-_n):Ta=(2*Xn-Ln-_n)*2/3:Xn===void 0?Ln===void 0?Ta=0:Ta=(2*_n-Wn-Ln)*2/3:Ln===void 0?Ta=(2*Xn-Wn-_n)*2/3:Ta=Xn+_n-Wn-Ln,Et(_n+Nr.frac*Kn+kn.frac*(Aa+Nr.frac*Ta))}if(J){var rt=0,ct;try{ct=new Uint8Array(ie*le*4)}catch{ct=new Array(ie*le*4)}if(J==="best"){var Ze=V||B,ke=Y||F,Ge=new Array(Ze.length),Je=new Array(ke.length),it=new Array(ie),Pt=V?_:l,At=Y?_:l,Ot,Jt,Bt;for(W=0;W<Ze.length;W++)Ge[W]=Math.round(u.c2p(Ze[W])-oe);for(W=0;W<ke.length;W++)Je[W]=Math.round(L.c2p(ke[W])-q);for(W=0;W<ie;W++)it[W]=Pt(W,Ge);for(X=0;X<le;X++)for(Ot=At(X,Je),Jt=R[Ot.bin0],Bt=R[Ot.bin1],W=0;W<ie;W++,rt+=4)Ut=Mt(Jt,Bt,it[W],Ot),s(ct,rt,Ut)}else for(X=0;X<G;X++)for(zt=R[X],Pe=Ue(X),W=0;W<ie;W++)Ut=Et(zt[W],1),rt=(Pe*ie+Oe(W))*4,s(ct,rt,Ut);var qt=_e.createImageData(ie,le);try{qt.data.set(ct)}catch{var rr=qt.data,er=rr.length;for(X=0;X<er;X++)rr[X]=ct[X]}_e.putImageData(qt,0,0)}else{var pr=Math.floor(I/2),Xr=Math.floor(D/2);for(X=0;X<G;X++)if(zt=R[X],Pe.reverse(),Pe[Qe]=Ue(X+1),!(Pe[0]===Pe[1]||Pe[0]===void 0||Pe[1]===void 0))for(Xt=Oe(0),Dt=[Xt,Xt],W=0;W<Z;W++)Dt.reverse(),Dt[Ve]=Oe(W+1),!(Dt[0]===Dt[1]||Dt[0]===void 0||Dt[1]===void 0)&&(Tt=zt[W],Ut=Et(Tt,(Dt[1]-Dt[0])*(Pe[1]-Pe[0])),_e.fillStyle="rgba("+Ut.join(",")+")",_e.fillRect(Dt[0]+pr,Pe[0]+Xr,Dt[1]-Dt[0]-I,Pe[1]-Pe[0]-D))}Le=Math.round(Le/Fe),Ne=Math.round(Ne/Fe),dt=Math.round(dt/Fe);var hn=c("rgb("+Le+","+Ne+","+dt+")");w._hmpixcount=(w._hmpixcount||0)+Fe,w._hmlumcount=(w._hmlumcount||0)+Fe*hn.getLuminance();var $r=k.selectAll("image").data(S);$r.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),$r.attr({height:le,width:ie,x:oe,y:q,"xlink:href":Te.toDataURL("image/png")}),x(k);var nt=z.texttemplate;if(nt){var Gt=f(z),Kt={type:"linear",range:[Gt.min,Gt.max],_separators:u._separators,_numFormat:u._numFormat},Ht=z.type==="histogram2dcontour",_r=z.type==="contour",tt=_r?1:0,je=_r?G-1:G,st=_r?1:0,ft=_r?Z-1:Z,Me=[];for(W=tt;W<je;W++){var Se;if(_r)Se=P.y[W];else if(Ht){if(W===0||W===G-1)continue;Se=P.y[W]}else if(P.yCenter)Se=P.yCenter[W];else{if(W+1===G&&P.y[W+1]===void 0)continue;Se=(P.y[W]+P.y[W+1])/2}var Ke=Math.round(L.c2p(Se));if(!(0>Ke||Ke>L._length))for(X=st;X<ft;X++){var Xe;if(_r)Xe=P.x[X];else if(Ht){if(X===0||X===Z-1)continue;Xe=P.x[X]}else if(P.xCenter)Xe=P.xCenter[X];else{if(X+1===Z&&P.x[X+1]===void 0)continue;Xe=(P.x[X]+P.x[X+1])/2}var ot=Math.round(u.c2p(Xe));if(!(0>ot||ot>u._length)){var pt=t({x:Xe,y:Se},z,w._fullLayout);pt.x=Xe,pt.y=Se;var vt=P.z[W][X];vt===void 0?(pt.z="",pt.zLabel=""):(pt.z=vt,pt.zLabel=e.tickText(Kt,vt,"hover").text);var Ct=P.text&&P.text[W]&&P.text[W][X];(Ct===void 0||Ct===!1)&&(Ct=""),pt.text=Ct;var St=a.texttemplateString(nt,pt,w._fullLayout._d3locale,pt,z._meta||{});if(!!St){var Nt=St.split("<br>"),ir=Nt.length,lr=0;for(te=0;te<ir;te++)lr=Math.max(lr,Nt[te].length);Me.push({l:ir,c:lr,t:St,x:ot,y:Ke,z:vt})}}}}var Yr=z.textfont,Pr=Yr.family,wr=Yr.size,Jr=w._fullLayout.font.size;if(!wr||wr==="auto"){var gr=1/0,mr=1/0,Ur=0,Hr=0;for(te=0;te<Me.length;te++){var Tr=Me[te];if(Ur=Math.max(Ur,Tr.l),Hr=Math.max(Hr,Tr.c),te<Me.length-1){var et=Me[te+1],Lt=Math.abs(et.x-Tr.x),jt=Math.abs(et.y-Tr.y);Lt&&(gr=Math.min(gr,Lt)),jt&&(mr=Math.min(mr,jt))}}!isFinite(gr)||!isFinite(mr)?wr=Jr:(gr-=I,mr-=D,gr/=Hr,mr/=Ur,gr/=d/2,mr/=d,wr=Math.min(Math.floor(gr),Math.floor(mr),Jr))}if(wr<=0||!isFinite(wr))return;var sr=function(Lr){return Lr.x},Ir=function(Lr){return Lr.y-wr*(Lr.l*d/2-1)},Zr=v(k).data(Me);Zr.enter().append("g").classed(y,1).append("text").attr("text-anchor","middle").each(function(Lr){var br=T.select(this),Nr=Yr.color;(!Nr||Nr==="auto")&&(Nr=r.contrast("rgba("+De(Lr.z).join()+")")),br.attr("data-notex",1).call(n.positionText,sr(Lr),Ir(Lr)).call(A.font,Pr,wr,Nr).text(Lr.t).call(n.convertToTspans,w)})}})};function l(w,b){var h=b.length-2,m=a.constrain(a.findBin(w,b),0,h),u=b[m],L=b[m+1],S=a.constrain(m+(w-u)/(L-u)-.5,0,h),k=Math.round(S),P=Math.abs(S-k);return!S||S===h||!P?{bin0:k,bin1:k,frac:0}:{bin0:k,frac:P,bin1:Math.round(k+P/(S-k))}}function _(w,b){var h=b.length-1,m=a.constrain(a.findBin(w,b),0,h),u=b[m],L=b[m+1],S=(w-u)/(L-u)||0;return S<=0?{bin0:m,bin1:m,frac:0}:S<.5?{bin0:m,bin1:m+1,frac:S}:{bin0:m+1,bin1:m,frac:1-S}}function s(w,b,h){w[b]=h[0],w[b+1]=h[1],w[b+2]=h[2],w[b+3]=Math.round(h[3]*255)}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":936,"@plotly/d3":58,tinycolor2:312}],805:[function(g,ne,ae){var T=g("@plotly/d3");ne.exports=function(M){T.select(M).selectAll(".hm image").style("opacity",function(A){return A.trace.opacity})}},{"@plotly/d3":58}],806:[function(g,ne,ae){ne.exports=function(c,M,A){var e=A("zsmooth");e===!1&&(A("xgap"),A("ygap")),A("zhoverformat")}},{}],807:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib"),M=g("../../registry");ne.exports=function(n,t,r,f,o,i){var p=r("z");o=o||"x",i=i||"y";var d,y;if(p===void 0||!p.length)return 0;if(c.isArray1D(n.z)){d=r(o),y=r(i);var v=c.minRowLength(d),x=c.minRowLength(y);if(v===0||x===0)return 0;t._length=Math.min(v,x,p.length)}else{if(d=A(o,r),y=A(i,r),!e(p))return 0;r("transpose"),t._length=null}if(n.type==="heatmapgl")return!0;var l=M.getComponentMethod("calendars","handleTraceDefaults");return l(n,t,[o,i],f),!0};function A(a,n){var t=n(a),r=t?n(a+"type","array"):"scaled";return r==="scaled"&&(n(a+"0"),n("d"+a)),t}function e(a){for(var n=!0,t=!1,r=!1,f,o=0;o<a.length;o++){if(f=a[o],!c.isArrayOrTypedArray(f)){n=!1;break}f.length>0&&(t=!0);for(var i=0;i<f.length;i++)if(T(f[i])){r=!0;break}}return n&&t&&r}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(g,ne,ae){for(var T=g("../heatmap/attributes"),c=g("../../components/colorscale/attributes"),M=g("../../lib/extend").extendFlat,A=g("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],a={},n=0;n<e.length;n++){var t=e[n];a[t]=T[t]}a.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},M(a,c("",{cLetter:"z",autoColorDflt:!1})),ne.exports=A(a,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(g,ne,ae){var T=g("../../../stackgl_modules").gl_heatmap2d,c=g("../../plots/cartesian/axes"),M=g("../../lib/str2rgbarray");function A(t,r){this.scene=t,this.uid=r,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=T(t.glplot,this.options),this.heatmap._trace=this}var e=A.prototype;e.handlePick=function(t){var r=this.options,f=r.shape,o=t.pointId,i=o%f[0],p=Math.floor(o/f[0]),d=o;return{trace:this,dataCoord:t.dataCoord,traceCoord:[r.x[i],r.y[p],r.z[d]],textLabel:this.textLabels[o],name:this.name,pointIndex:[p,i],hoverinfo:this.hoverinfo}},e.update=function(t,r){var f=r[0];this.index=t.index,this.name=t.name,this.hoverinfo=t.hoverinfo;var o=f.z;this.options.z=[].concat.apply([],o);var i=o[0].length,p=o.length;this.options.shape=[i,p],this.options.x=f.x,this.options.y=f.y,this.options.zsmooth=t.zsmooth;var d=a(t);this.options.colorLevels=d.colorLevels,this.options.colorValues=d.colorValues,this.textLabels=[].concat.apply([],t.text),this.heatmap.update(this.options);var y=this.scene.xaxis,v=this.scene.yaxis,x,l;t.zsmooth===!1&&(x={ppad:f.x[1]-f.x[0]},l={ppad:f.y[1]-f.y[0]}),t._extremes[y._id]=c.findExtremes(y,f.x,x),t._extremes[v._id]=c.findExtremes(v,f.y,l)},e.dispose=function(){this.heatmap.dispose()};function a(t){for(var r=t.colorscale,f=t.zmin,o=t.zmax,i=r.length,p=new Array(i),d=new Array(4*i),y=0;y<i;y++){var v=r[y],x=M(v[1]);p[y]=f+v[0]*(o-f);for(var l=0;l<4;l++)d[4*y+l]=x[l]}return{colorLevels:p,colorValues:d}}function n(t,r,f){var o=new A(t,r.uid);return o.update(r,f),o}ne.exports=n},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(g,ne,ae){var T=g("../../lib"),c=g("../heatmap/xyz_defaults"),M=g("../../components/colorscale/defaults"),A=g("./attributes");ne.exports=function(a,n,t,r){function f(i,p){return T.coerce(a,n,A,i,p)}var o=c(a,n,f,r);if(!o){n.visible=!1;return}f("text"),f("zsmooth"),M(a,n,r,f,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../heatmap/colorbar"),calc:g("../heatmap/calc"),plot:g("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:g("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(g,ne,ae){var T=g("../bar/attributes"),c=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=g("../../plots/template_attributes").hovertemplateAttrs,A=g("../../plots/template_attributes").texttemplateAttrs,e=g("../../plots/font_attributes"),a=g("./bin_attributes"),n=g("./constants"),t=g("../../lib/extend").extendFlat;ne.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:c("x"),yhoverformat:c("y"),text:t({},T.text,{}),hovertext:t({},T.hovertext,{}),orientation:T.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:a("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:a("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:M({},{keys:n.eventDataKeys}),texttemplate:A({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},T.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:T.insidetextanchor,textangle:T.textangle,cliponaxis:T.cliponaxis,constraintext:T.constraintext,marker:T.marker,offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,selected:T.selected,unselected:T.unselected,_deprecated:{bardir:T._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(g,ne,ae){ne.exports=function(c,M){for(var A=c.length,e=0,a=0;a<A;a++)M[a]?(c[a]/=M[a],e+=c[a]):c[a]=null;return e}},{}],814:[function(g,ne,ae){ne.exports=function(c,M){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(g,ne,ae){var T=g("fast-isnumeric");ne.exports={count:function(c,M,A){return A[c]++,1},sum:function(c,M,A,e){var a=e[M];return T(a)?(a=Number(a),A[c]+=a,a):0},avg:function(c,M,A,e,a){var n=e[M];return T(n)&&(n=Number(n),A[c]+=n,a[c]++),0},min:function(c,M,A,e){var a=e[M];if(T(a))if(a=Number(a),T(A[c])){if(A[c]>a){var n=a-A[c];return A[c]=a,n}}else return A[c]=a,a;return 0},max:function(c,M,A,e){var a=e[M];if(T(a))if(a=Number(a),T(A[c])){if(A[c]<a){var n=a-A[c];return A[c]=a,n}}else return A[c]=a,a;return 0}}},{"fast-isnumeric":190}],816:[function(g,ne,ae){var T=g("../../constants/numerical"),c=T.ONEAVGYEAR,M=T.ONEAVGMONTH,A=T.ONEDAY,e=T.ONEHOUR,a=T.ONEMIN,n=T.ONESEC,t=g("../../plots/cartesian/axes").tickIncrement;ne.exports=function(d,y,v,x,l){var _=-1.1*y,s=-.1*y,w=d-s,b=v[0],h=v[1],m=Math.min(r(b+s,b+w,x,l),r(h+s,h+w,x,l)),u=Math.min(r(b+_,b+s,x,l),r(h+_,h+s,x,l)),L,S;if(m>u&&u<Math.abs(h-b)/4e3?(L=m,S=!1):(L=Math.min(m,u),S=!0),x.type==="date"&&L>A){var k=L===c?1:6,P=L===c?"M12":"M1";return function(z,I){var D=x.c2d(z,c,l),R=D.indexOf("-",k);R>0&&(D=D.substr(0,R));var B=x.d2c(D,0,l);if(B<z){var F=t(B,P,!1,l);(B+F)/2<z+d&&(B=F)}return I&&S?t(B,P,!0,l):B}}return function(z,I){var D=L*Math.round(z/L);return D+L/10<z&&D+L*.9<z+d&&(D+=L),I&&S&&(D-=L),D}};function r(p,d,y,v){if(p*d<=0)return 1/0;for(var x=Math.abs(d-p),l=y.type==="date",_=f(x,l),s=0;s<10;s++){var w=f(_*80,l);if(_===w)break;if(o(w,p,d,l,y,v))_=w;else break}return _}function f(p,d){return d&&p>n?p>A?p>c*1.1?c:p>M*1.1?M:A:p>e?e:p>a?a:n:Math.pow(10,Math.floor(Math.log(p)/Math.LN10))}function o(p,d,y,v,x,l){if(v&&p>A){var _=i(d,x,l),s=i(y,x,l),w=p===c?0:1;return _[w]!==s[w]}return Math.floor(y/p)-Math.floor(d/p)>.1}function i(p,d,y){var v=d.c2d(p,c,y).split("-");return v[0]===""&&(v.unshift(),v[0]="-"+v[0]),v}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib"),M=g("../../registry"),A=g("../../plots/cartesian/axes"),e=g("../bar/arrays_to_calcdata"),a=g("./bin_functions"),n=g("./norm_functions"),t=g("./average"),r=g("./bin_label_vals");function f(y,v){var x=[],l=[],_=v.orientation==="h",s=A.getFromId(y,_?v.yaxis:v.xaxis),w=_?"y":"x",b={x:"y",y:"x"}[w],h=v[w+"calendar"],m=v.cumulative,u,L=o(y,v,s,w),S=L[0],k=L[1],P=typeof S.size=="string",z=[],I=P?z:S,D=[],R=[],B=[],F=0,V=v.histnorm,Y=v.histfunc,K=V.indexOf("density")!==-1,J,G,Z;m.enabled&&K&&(V=V.replace(/ ?density$/,""),K=!1);var re=Y==="max"||Y==="min",se=re?null:0,oe=a.count,N=n[V],U=!1,q=function(Ue){return s.r2c(Ue,0,h)},Q;for(c.isArrayOrTypedArray(v[b])&&Y!=="count"&&(Q=v[b],U=Y==="avg",oe=a[Y]),u=q(S.start),G=q(S.end)+(u-A.tickIncrement(u,S.size,!1,h))/1e6;u<G&&x.length<1e6&&(J=A.tickIncrement(u,S.size,!1,h),x.push((u+J)/2),l.push(se),B.push([]),z.push(u),K&&D.push(1/(J-u)),U&&R.push(0),!(J<=u));)u=J;z.push(u),!P&&s.type==="date"&&(I={start:q(I.start),end:q(I.end),size:I.size}),y._fullLayout._roundFnOpts||(y._fullLayout._roundFnOpts={});var W=v["_"+w+"bingroup"],X={leftGap:1/0,rightGap:1/0};W&&(y._fullLayout._roundFnOpts[W]||(y._fullLayout._roundFnOpts[W]=X),X=y._fullLayout._roundFnOpts[W]);var te=l.length,ee=!0,ie=X.leftGap,le=X.rightGap,ye={};for(u=0;u<k.length;u++){var ue=k[u];Z=c.findBin(ue,I),Z>=0&&Z<te&&(F+=oe(Z,u,l,Q,R),ee&&B[Z].length&&ue!==k[B[Z][0]]&&(ee=!1),B[Z].push(u),ye[u]=Z,ie=Math.min(ie,ue-z[Z]),le=Math.min(le,z[Z+1]-ue))}X.leftGap=ie,X.rightGap=le;var pe;ee||(pe=function(Ue,xe){return function(){var Pe=y._fullLayout._roundFnOpts[W];return r(Pe.leftGap,Pe.rightGap,z,s,h)(Ue,xe)}}),U&&(F=t(l,R)),N&&N(l,F,D),m.enabled&&d(l,m.direction,m.currentbin);var ge=Math.min(x.length,l.length),Te=[],_e=0,De=ge-1;for(u=0;u<ge;u++)if(l[u]){_e=u;break}for(u=ge-1;u>=_e;u--)if(l[u]){De=u;break}for(u=_e;u<=De;u++)if(T(x[u])&&T(l[u])){var Oe={p:x[u],s:l[u],b:0};m.enabled||(Oe.pts=B[u],ee?Oe.ph0=Oe.ph1=B[u].length?k[B[u][0]]:x[u]:(v._computePh=!0,Oe.ph0=pe(z[u]),Oe.ph1=pe(z[u+1],!0))),Te.push(Oe)}return Te.length===1&&(Te[0].width1=A.tickIncrement(Te[0].p,S.size,!1,h)-Te[0].p),e(Te,v),c.isArrayOrTypedArray(v.selectedpoints)&&c.tagSelected(Te,v,ye),Te}function o(y,v,x,l,_){var s=l+"bins",w=y._fullLayout,b=v["_"+l+"bingroup"],h=w._histogramBinOpts[b],m=w.barmode==="overlay",u,L,S,k,P,z,I,D=function(ue){return x.r2c(ue,0,k)},R=function(ue){return x.c2r(ue,0,k)},B=x.type==="date"?function(ue){return ue||ue===0?c.cleanDate(ue,null,k):null}:function(ue){return T(ue)?Number(ue):null};function F(ue,pe,ge){pe[ue+"Found"]?(pe[ue]=B(pe[ue]),pe[ue]===null&&(pe[ue]=ge[ue])):(z[ue]=pe[ue]=ge[ue],c.nestedProperty(L[0],s+"."+ue).set(ge[ue]))}if(v["_"+l+"autoBinFinished"])delete v["_"+l+"autoBinFinished"];else{L=h.traces;var V=[],Y=!0,K=!1,J=!1;for(u=0;u<L.length;u++)if(S=L[u],S.visible){var G=h.dirs[u];P=S["_"+G+"pos0"]=x.makeCalcdata(S,G),V=c.concat(V,P),delete S["_"+l+"autoBinFinished"],v.visible===!0&&(Y?Y=!1:(delete S._autoBin,S["_"+l+"autoBinFinished"]=1),M.traceIs(S,"2dMap")&&(K=!0),S.type==="histogram2dcontour"&&(J=!0))}k=L[0][l+"calendar"];var Z=A.autoBin(V,x,h.nbins,K,k,h.sizeFound&&h.size),re=L[0]._autoBin={};if(z=re[h.dirs[0]]={},J&&(h.size||(Z.start=R(A.tickIncrement(D(Z.start),Z.size,!0,k))),h.end===void 0&&(Z.end=R(A.tickIncrement(D(Z.end),Z.size,!1,k)))),m&&!M.traceIs(v,"2dMap")&&Z._dataSpan===0&&x.type!=="category"&&x.type!=="multicategory"){if(_)return[Z,P,!0];Z=i(y,v,x,l,s)}I=S.cumulative||{},I.enabled&&I.currentbin!=="include"&&(I.direction==="decreasing"?Z.start=R(A.tickIncrement(D(Z.start),Z.size,!0,k)):Z.end=R(A.tickIncrement(D(Z.end),Z.size,!1,k))),h.size=Z.size,h.sizeFound||(z.size=Z.size,c.nestedProperty(L[0],s+".size").set(Z.size)),F("start",h,Z),F("end",h,Z)}P=v["_"+l+"pos0"],delete v["_"+l+"pos0"];var se=v._input[s]||{},oe=c.extendFlat({},h),N=h.start,U=x.r2l(se.start),q=U!==void 0;if((h.startFound||q)&&U!==x.r2l(N)){var Q=q?U:c.aggNums(Math.min,null,P),W={type:x.type==="category"||x.type==="multicategory"?"linear":x.type,r2l:x.r2l,dtick:h.size,tick0:N,calendar:k,range:[Q,A.tickIncrement(Q,h.size,!1,k)].map(x.l2r)},X=A.tickFirst(W);X>x.r2l(Q)&&(X=A.tickIncrement(X,h.size,!0,k)),oe.start=x.l2r(X),q||c.nestedProperty(v,s+".start").set(oe.start)}var te=h.end,ee=x.r2l(se.end),ie=ee!==void 0;if((h.endFound||ie)&&ee!==x.r2l(te)){var le=ie?ee:c.aggNums(Math.max,null,P);oe.end=x.l2r(le),ie||c.nestedProperty(v,s+".start").set(oe.end)}var ye="autobin"+l;return v._input[ye]===!1&&(v._input[s]=c.extendFlat({},v[s]||{}),delete v._input[ye],delete v[ye]),[oe,P]}function i(y,v,x,l,_){var s=y._fullLayout,w=p(y,v),b=!1,h=1/0,m=[v],u,L,S;for(u=0;u<w.length;u++)if(L=w[u],L===v)b=!0;else if(!b)S=s._histogramBinOpts[L["_"+l+"bingroup"]],h=Math.min(h,S.size||L[_].size);else{var k=o(y,L,x,l,!0),P=k[0],z=k[2];L["_"+l+"autoBinFinished"]=1,L["_"+l+"pos0"]=k[1],z?m.push(L):h=Math.min(h,P.size)}var I=new Array(m.length);for(u=0;u<m.length;u++)for(var D=m[u]["_"+l+"pos0"],R=0;R<D.length;R++)if(D[R]!==void 0){I[u]=D[R];break}for(isFinite(h)||(h=c.distinctVals(I).minDiff),u=0;u<m.length;u++){L=m[u];var B=L[l+"calendar"],F={start:x.c2r(I[u]-h/2,0,B),end:x.c2r(I[u]+h/2,0,B),size:h};L._input[_]=L[_]=F,S=s._histogramBinOpts[L["_"+l+"bingroup"]],S&&c.extendFlat(S,F)}return v[_]}function p(y,v){for(var x=v.xaxis,l=v.yaxis,_=v.orientation,s=[],w=y._fullData,b=0;b<w.length;b++){var h=w[b];h.type==="histogram"&&h.visible===!0&&h.orientation===_&&h.xaxis===x&&h.yaxis===l&&s.push(h)}return s}function d(y,v,x){var l,_,s;function w(h){s=y[h],y[h]/=2}function b(h){_=y[h],y[h]=s+_/2,s+=_}if(x==="half")if(v==="increasing")for(w(0),l=1;l<y.length;l++)b(l);else for(w(y.length-1),l=y.length-2;l>=0;l--)b(l);else if(v==="increasing"){for(l=1;l<y.length;l++)y[l]+=y[l-1];x==="exclude"&&(y.unshift(0),y.pop())}else{for(l=y.length-2;l>=0;l--)y[l]+=y[l+1];x==="exclude"&&(y.push(0),y.shift())}}ne.exports={calc:f,calcAllAutoBins:o}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(g,ne,ae){ne.exports={eventDataKeys:["binNumber"]}},{}],819:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/cartesian/axis_ids"),M=g("../../registry").traceIs,A=g("../bar/defaults").handleGroupingDefaults,e=T.nestedProperty,a=g("../../plots/cartesian/constraints").getAxisGroup,n=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],t=["x","y"];ne.exports=function(f,o){var i=o._histogramBinOpts={},p=[],d={},y=[],v,x,l,_,s,w,b;function h(J,G){return T.coerce(v._input,v,v._module.attributes,J,G)}function m(J){return J.orientation==="v"?"x":"y"}function u(J,G){var Z=c.getFromTrace({_fullLayout:o},J,G);return Z.type}function L(J,G,Z){var re=J.uid+"__"+Z;G||(G=re);var se=u(J,Z),oe=J[Z+"calendar"]||"",N=i[G],U=!0;N&&(se===N.axType&&oe===N.calendar?(U=!1,N.traces.push(J),N.dirs.push(Z)):(G=re,se!==N.axType&&T.warn(["Attempted to group the bins of trace",J.index,"set on a","type:"+se,"axis","with bins on","type:"+N.axType,"axis."].join(" ")),oe!==N.calendar&&T.warn(["Attempted to group the bins of trace",J.index,"set with a",oe,"calendar","with bins",N.calendar?"on a "+N.calendar+" calendar":"w/o a set calendar"].join(" ")))),U&&(i[G]={traces:[J],dirs:[Z],axType:se,calendar:J[Z+"calendar"]||""}),J["_"+Z+"bingroup"]=G}for(s=0;s<f.length;s++)v=f[s],M(v,"histogram")&&(p.push(v),delete v._xautoBinFinished,delete v._yautoBinFinished,M(v,"2dMap")||A(v._input,v,o,h));var S=o._alignmentOpts||{};for(s=0;s<p.length;s++){if(v=p[s],l="",!M(v,"2dMap")){if(_=m(v),o.barmode==="group"&&v.alignmentgroup){var k=v[_+"axis"],P=a(o,k)+v.orientation;(S[P]||{})[v.alignmentgroup]&&(l=P)}!l&&o.barmode!=="overlay"&&(l=a(o,v.xaxis)+a(o,v.yaxis)+m(v))}l?(d[l]||(d[l]=[]),d[l].push(v)):y.push(v)}for(l in d){if(x=d[l],x.length===1){y.push(x[0]);continue}var z=!1;for(x.length&&(v=x[0],z=h("bingroup")),l=z||l,s=0;s<x.length;s++){v=x[s];var I=v._input.bingroup;I&&I!==l&&T.warn(["Trace",v.index,"must match","within bingroup",l+".","Ignoring its bingroup:",I,"setting."].join(" ")),v.bingroup=l,L(v,l,m(v))}}for(s=0;s<y.length;s++){v=y[s];var D=h("bingroup");if(M(v,"2dMap"))for(b=0;b<2;b++){_=t[b];var R=h(_+"bingroup",D?D+"__"+_:null);L(v,R,_)}else L(v,D,m(v))}for(l in i){var B=i[l];for(x=B.traces,w=0;w<n.length;w++){var F=n[w],V=F.name,Y,K;if(!(V==="nbins"&&B.sizeFound)){for(s=0;s<x.length;s++){if(v=x[s],_=B.dirs[s],Y=F.aStr[_],e(v._input,Y).get()!==void 0){B[V]=h(Y),B[V+"Found"]=!0;break}K=(v._autoBin||{})[_]||{},K[V]&&e(v,Y).set(K[V])}if(V==="start"||V==="end")for(;s<x.length;s++)v=x[s],v["_"+_+"bingroup"]&&(K=(v._autoBin||{})[_]||{},h(Y,K[V]));V==="nbins"&&!B.sizeFound&&!B.nbinsFound&&(v=x[0],B[V]=h(Y))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(g,ne,ae){var T=g("../../registry"),c=g("../../lib"),M=g("../../components/color"),A=g("../bar/defaults").handleText,e=g("../bar/style_defaults"),a=g("./attributes");ne.exports=function(t,r,f,o){function i(u,L){return c.coerce(t,r,a,u,L)}var p=i("x"),d=i("y"),y=i("cumulative.enabled");y&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text");var v=i("textposition");A(t,r,o,i,v,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat");var x=i("orientation",d&&!p?"h":"v"),l=x==="v"?"x":"y",_=x==="v"?"y":"x",s=p&&d?Math.min(c.minRowLength(p)&&c.minRowLength(d)):c.minRowLength(r[l]||[]);if(!s){r.visible=!1;return}r._length=s;var w=T.getComponentMethod("calendars","handleTraceDefaults");w(t,r,["x","y"],o);var b=r[_];b&&i("histfunc"),i("histnorm"),i("autobin"+l),e(t,r,i,f,o),c.coerceSelectionMarkerOpacity(r,i);var h=(r.marker.line||{}).color,m=T.getComponentMethod("errorbars","supplyDefaults");m(t,r,h||M.defaultLine,{axis:"y"}),m(t,r,h||M.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(g,ne,ae){ne.exports=function(c,M,A,e,a){if(c.x="xVal"in M?M.xVal:M.x,c.y="yVal"in M?M.yVal:M.y,"zLabelVal"in M&&(c.z=M.zLabelVal),M.xa&&(c.xaxis=M.xa),M.ya&&(c.yaxis=M.ya),!(A.cumulative||{}).enabled){var n=Array.isArray(a)?e[0].pts[a[0]][a[1]]:e[a].pts;c.pointNumbers=n,c.binNumber=c.pointNumber,delete c.pointNumber,delete c.pointIndex;var t;if(A._indexToPoints){t=[];for(var r=0;r<n.length;r++)t=t.concat(A._indexToPoints[n[r]])}else t=n;c.pointIndices=t}return c}},{}],822:[function(g,ne,ae){var T=g("../bar/hover").hoverPoints,c=g("../../plots/cartesian/axes").hoverLabelText;ne.exports=function(A,e,a,n,t){var r=T(A,e,a,n,t);if(!!r){A=r[0];var f=A.cd[A.index],o=A.cd[0].trace;if(!o.cumulative.enabled){var i=o.orientation==="h"?"y":"x";A[i+"Label"]=c(A[i+"a"],[f.ph0,f.ph1],o[i+"hoverformat"])}return r}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),layoutAttributes:g("../bar/layout_attributes"),supplyDefaults:g("./defaults"),crossTraceDefaults:g("./cross_trace_defaults"),supplyLayoutDefaults:g("../bar/layout_defaults"),calc:g("./calc").calc,crossTraceCalc:g("../bar/cross_trace_calc").crossTraceCalc,plot:g("../bar/plot").plot,layerName:"barlayer",style:g("../bar/style").style,styleOnSelect:g("../bar/style").styleOnSelect,colorbar:g("../scatter/marker_colorbar"),hoverPoints:g("./hover"),selectPoints:g("../bar/select"),eventData:g("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:g("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(g,ne,ae){ne.exports={percent:function(T,c){for(var M=T.length,A=100/c,e=0;e<M;e++)T[e]*=A},probability:function(T,c){for(var M=T.length,A=0;A<M;A++)T[A]/=c},density:function(T,c,M,A){var e=T.length;A=A||1;for(var a=0;a<e;a++)T[a]*=M[a]*A},"probability density":function(T,c,M,A){var e=T.length;A&&(c/=A);for(var a=0;a<e;a++)T[a]*=M[a]/c}}},{}],825:[function(g,ne,ae){var T=g("../histogram/attributes"),c=g("../histogram/bin_attributes"),M=g("../heatmap/attributes"),A=g("../../plots/attributes"),e=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=g("../../plots/template_attributes").hovertemplateAttrs,n=g("../../plots/template_attributes").texttemplateAttrs,t=g("../../components/colorscale/attributes"),r=g("../../lib/extend").extendFlat;ne.exports=r({x:T.x,y:T.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:T.histnorm,histfunc:T.histfunc,nbinsx:T.nbinsx,xbins:c("x"),nbinsy:T.nbinsy,ybins:c("y"),autobinx:T.autobinx,autobiny:T.autobiny,bingroup:r({},T.bingroup,{}),xbingroup:r({},T.bingroup,{}),ybingroup:r({},T.bingroup,{}),xgap:M.xgap,ygap:M.ygap,zsmooth:M.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:a({},{keys:"z"}),texttemplate:n({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:M.textfont,showlegend:r({},A.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/cartesian/axes"),M=g("../histogram/bin_functions"),A=g("../histogram/norm_functions"),e=g("../histogram/average"),a=g("../histogram/bin_label_vals"),n=g("../histogram/calc").calcAllAutoBins;ne.exports=function(i,p){var d=c.getFromId(i,p.xaxis),y=c.getFromId(i,p.yaxis),v=p.xcalendar,x=p.ycalendar,l=function(rt){return d.r2c(rt,0,v)},_=function(rt){return y.r2c(rt,0,x)},s=function(rt){return d.c2r(rt,0,v)},w=function(rt){return y.c2r(rt,0,x)},b,h,m,u,L=n(i,p,d,"x"),S=L[0],k=L[1],P=n(i,p,y,"y"),z=P[0],I=P[1],D=p._length;k.length>D&&k.splice(D,k.length-D),I.length>D&&I.splice(D,I.length-D);var R=[],B=[],F=[],V=typeof S.size=="string",Y=typeof z.size=="string",K=[],J=[],G=V?K:S,Z=Y?J:z,re=0,se=[],oe=[],N=p.histnorm,U=p.histfunc,q=N.indexOf("density")!==-1,Q=U==="max"||U==="min",W=Q?null:0,X=M.count,te=A[N],ee=!1,ie=[],le=[],ye="z"in p?p.z:"marker"in p&&Array.isArray(p.marker.color)?p.marker.color:"";ye&&U!=="count"&&(ee=U==="avg",X=M[U]);var ue=S.size,pe=l(S.start),ge=l(S.end)+(pe-c.tickIncrement(pe,ue,!1,v))/1e6;for(b=pe;b<ge;b=c.tickIncrement(b,ue,!1,v))B.push(W),K.push(b),ee&&F.push(0);K.push(b);var Te=B.length,_e=(b-pe)/Te,De=s(pe+_e/2),Oe=z.size,Ue=_(z.start),xe=_(z.end)+(Ue-c.tickIncrement(Ue,Oe,!1,x))/1e6;for(b=Ue;b<xe;b=c.tickIncrement(b,Oe,!1,x)){R.push(B.slice()),J.push(b);var Pe=new Array(Te);for(h=0;h<Te;h++)Pe[h]=[];oe.push(Pe),ee&&se.push(F.slice())}J.push(b);var Ve=R.length,Qe=(b-Ue)/Ve,Fe=w(Ue+Qe/2);q&&(ie=t(B.length,G,_e,V),le=t(R.length,Z,Qe,Y)),!V&&d.type==="date"&&(G=r(l,G)),!Y&&y.type==="date"&&(Z=r(_,Z));var Le=!0,Ne=!0,dt=new Array(Te),Dt=new Array(Ve),Xt=1/0,Tt=1/0,zt=1/0,Ut=1/0;for(b=0;b<D;b++){var Et=k[b],Mt=I[b];m=T.findBin(Et,G),u=T.findBin(Mt,Z),m>=0&&m<Te&&u>=0&&u<Ve&&(re+=X(m,b,R[u],ye,se[u]),oe[u][m].push(b),Le&&(dt[m]===void 0?dt[m]=Et:dt[m]!==Et&&(Le=!1)),Ne&&(Dt[u]===void 0?Dt[u]=Mt:Dt[u]!==Mt&&(Ne=!1)),Xt=Math.min(Xt,Et-K[m]),Tt=Math.min(Tt,K[m+1]-Et),zt=Math.min(zt,Mt-J[u]),Ut=Math.min(Ut,J[u+1]-Mt))}if(ee)for(u=0;u<Ve;u++)re+=e(R[u],se[u]);if(te)for(u=0;u<Ve;u++)te(R[u],re,ie,le[u]);return{x:k,xRanges:f(K,Le&&dt,Xt,Tt,d,v),x0:De,dx:_e,y:I,yRanges:f(J,Ne&&Dt,zt,Ut,y,x),y0:Fe,dy:Qe,z:R,pts:oe}};function t(o,i,p,d){var y=new Array(o),v;if(d)for(v=0;v<o;v++)y[v]=1/(i[v+1]-i[v]);else{var x=1/p;for(v=0;v<o;v++)y[v]=x}return y}function r(o,i){return{start:o(i.start),end:o(i.end),size:i.size}}function f(o,i,p,d,y,v){var x,l=o.length-1,_=new Array(l),s=a(p,d,o,y,v);for(x=0;x<l;x++){var w=(i||[])[x];_[x]=w===void 0?[s(o[x]),s(o[x+1],!0)]:[w,w]}return _}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(g,ne,ae){var T=g("../../lib"),c=g("./sample_defaults"),M=g("../heatmap/style_defaults"),A=g("../../components/colorscale/defaults"),e=g("../heatmap/label_defaults"),a=g("./attributes");ne.exports=function(t,r,f,o){function i(p,d){return T.coerce(t,r,a,p,d)}c(t,r,i,o),r.visible!==!1&&(M(t,r,i,o),A(t,r,o,i,{prefix:"",cLetter:"z"}),i("hovertemplate"),e(i,o),i("xhoverformat"),i("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(g,ne,ae){var T=g("../heatmap/hover"),c=g("../../plots/cartesian/axes").hoverLabelText;ne.exports=function(A,e,a,n,t){var r=T(A,e,a,n,t);if(!!r){A=r[0];var f=A.index,o=f[0],i=f[1],p=A.cd[0],d=p.trace,y=p.xRanges[i],v=p.yRanges[o];return A.xLabel=c(A.xa,[y[0],y[1]],d.xhoverformat),A.yLabel=c(A.ya,[v[0],v[1]],d.yhoverformat),r}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),crossTraceDefaults:g("../histogram/cross_trace_defaults"),calc:g("../heatmap/calc"),plot:g("../heatmap/plot"),layerName:"heatmaplayer",colorbar:g("../heatmap/colorbar"),style:g("../heatmap/style"),hoverPoints:g("./hover"),eventData:g("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(g,ne,ae){var T=g("../../registry"),c=g("../../lib");ne.exports=function(A,e,a,n){var t=a("x"),r=a("y"),f=c.minRowLength(t),o=c.minRowLength(r);if(!f||!o){e.visible=!1;return}e._length=Math.min(f,o);var i=T.getComponentMethod("calendars","handleTraceDefaults");i(A,e,["x","y"],n);var p=a("z")||a("marker.color");p&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")}},{"../../lib":503,"../../registry":638}],831:[function(g,ne,ae){var T=g("../histogram2d/attributes"),c=g("../contour/attributes"),M=g("../../components/colorscale/attributes"),A=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=g("../../lib/extend").extendFlat;ne.exports=e({x:T.x,y:T.y,z:T.z,marker:T.marker,histnorm:T.histnorm,histfunc:T.histfunc,nbinsx:T.nbinsx,xbins:T.xbins,nbinsy:T.nbinsy,ybins:T.ybins,autobinx:T.autobinx,autobiny:T.autobiny,bingroup:T.bingroup,xbingroup:T.xbingroup,ybingroup:T.ybingroup,autocontour:c.autocontour,ncontours:c.ncontours,contours:c.contours,line:{color:c.line.color,width:e({},c.line.width,{dflt:.5}),dash:c.line.dash,smoothing:c.line.smoothing,editType:"plot"},xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z",1),hovertemplate:T.hovertemplate,texttemplate:c.texttemplate,textfont:c.textfont},M("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(g,ne,ae){var T=g("../../lib"),c=g("../histogram2d/sample_defaults"),M=g("../contour/contours_defaults"),A=g("../contour/style_defaults"),e=g("../heatmap/label_defaults"),a=g("./attributes");ne.exports=function(t,r,f,o){function i(d,y){return T.coerce(t,r,a,d,y)}function p(d){return T.coerce2(t,r,a,d)}c(t,r,i,o),r.visible!==!1&&(M(t,r,i,p),A(t,r,i,o),i("xhoverformat"),i("yhoverformat"),i("hovertemplate"),r.contours&&r.contours.coloring==="heatmap"&&e(i,o))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),crossTraceDefaults:g("../histogram/cross_trace_defaults"),calc:g("../contour/calc"),plot:g("../contour/plot").plot,layerName:"contourlayer",style:g("../contour/style"),colorbar:g("../contour/colorbar"),hoverPoints:g("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(g,ne,ae){var T=g("../../plots/template_attributes").hovertemplateAttrs,c=g("../../plots/template_attributes").texttemplateAttrs,M=g("../../components/colorscale/attributes"),A=g("../../plots/domain").attributes,e=g("../pie/attributes"),a=g("../sunburst/attributes"),n=g("../treemap/attributes"),t=g("../treemap/constants"),r=g("../../lib/extend").extendFlat;ne.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:n.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:r({colors:a.marker.colors,line:a.marker.line,editType:"calc"},M("marker",{colorAttr:"colors",anim:!1})),leaf:a.leaf,pathbar:n.pathbar,text:e.text,textinfo:a.textinfo,texttemplate:c({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:T({},{keys:t.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:n.outsidetextfont,textposition:n.textposition,sort:e.sort,root:a.root,domain:A({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"../treemap/attributes":1075,"../treemap/constants":1078}],835:[function(g,ne,ae){var T=g("../../plots/plots");ae.name="icicle",ae.plot=function(c,M,A,e){T.plotBasePlot(ae.name,c,M,A,e)},ae.clean=function(c,M,A,e){T.cleanBasePlot(ae.name,c,M,A,e)}},{"../../plots/plots":619}],836:[function(g,ne,ae){var T=g("../sunburst/calc");ae.calc=function(c,M){return T.calc(c,M)},ae.crossTraceCalc=function(c){return T._runCrossTraceCalc("icicle",c)}},{"../sunburst/calc":1051}],837:[function(g,ne,ae){var T=g("../../lib"),c=g("./attributes"),M=g("../../components/color"),A=g("../../plots/domain").defaults,e=g("../bar/defaults").handleText,a=g("../bar/constants").TEXTPAD,n=g("../../components/colorscale"),t=n.hasColorscale,r=n.handleDefaults;ne.exports=function(o,i,p,d){function y(m,u){return T.coerce(o,i,c,m,u)}var v=y("labels"),x=y("parents");if(!v||!v.length||!x||!x.length){i.visible=!1;return}var l=y("values");l&&l.length?y("branchvalues"):y("count"),y("level"),y("maxdepth"),y("tiling.orientation"),y("tiling.flip"),y("tiling.pad");var _=y("text");y("texttemplate"),i.texttemplate||y("textinfo",Array.isArray(_)?"text+label":"label"),y("hovertext"),y("hovertemplate");var s=y("pathbar.visible"),w="auto";e(o,i,d,y,w,{hasPathbar:s,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("textposition");var b=y("marker.line.width");b&&y("marker.line.color",d.paper_bgcolor),y("marker.colors");var h=i._hasColorscale=t(o,"marker","colors")||(o.marker||{}).coloraxis;h&&r(o,i,d,y,{prefix:"marker.",cLetter:"c"}),y("leaf.opacity",h?1:.7),i._hovered={marker:{line:{width:2,color:M.contrast(d.paper_bgcolor)}}},s&&(y("pathbar.thickness",i.pathbar.textfont.size+2*a),y("pathbar.side"),y("pathbar.edgeshape")),y("sort"),y("root.color"),A(i,d,y),i._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=g("../../components/drawing"),A=g("../../lib/svg_text_utils"),e=g("./partition"),a=g("./style").styleOne,n=g("../treemap/constants"),t=g("../sunburst/helpers"),r=g("../sunburst/fx"),f=g("../sunburst/plot").formatSliceLabel,o=!1;ne.exports=function(p,d,y,v,x){var l=x.width,_=x.height,s=x.viewX,w=x.viewY,b=x.pathSlice,h=x.toMoveInsideSlice,m=x.strTransform,u=x.hasTransition,L=x.handleSlicesExit,S=x.makeUpdateSliceInterpolator,k=x.makeUpdateTextInterpolator,P=x.prevEntry,z={},I=p._fullLayout,D=d[0],R=D.trace,B=R.textposition.indexOf("left")!==-1,F=R.textposition.indexOf("right")!==-1,V=R.textposition.indexOf("bottom")!==-1,Y=e(y,[l,_],{flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1,orientation:R.tiling.orientation,pad:{inner:R.tiling.pad},maxDepth:R._maxDepth}),K=Y.descendants(),J=1/0,G=-1/0;K.forEach(function(N){var U=N.depth;U>=R._maxDepth?(N.x0=N.x1=(N.x0+N.x1)/2,N.y0=N.y1=(N.y0+N.y1)/2):(J=Math.min(J,U),G=Math.max(G,U))}),v=v.data(K,t.getPtId),R._maxVisibleLayers=isFinite(G)?G-J+1:0,v.enter().append("g").classed("slice",!0),L(v,o,z,[l,_],b),v.order();var Z=null;if(u&&P){var re=t.getPtId(P);v.each(function(N){Z===null&&t.getPtId(N)===re&&(Z={x0:N.x0,x1:N.x1,y0:N.y0,y1:N.y1})})}var se=function(){return Z||{x0:0,x1:l,y0:0,y1:_}},oe=v;return u&&(oe=oe.transition().each("end",function(){var N=T.select(this);t.setSliceCursor(N,p,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),oe.each(function(N){N._x0=s(N.x0),N._x1=s(N.x1),N._y0=w(N.y0),N._y1=w(N.y1),N._hoverX=s(N.x1-R.tiling.pad),N._hoverY=w(V?N.y1-R.tiling.pad/2:N.y0+R.tiling.pad/2);var U=T.select(this),q=c.ensureSingle(U,"path","surface",function(te){te.style("pointer-events","all")});u?q.transition().attrTween("d",function(te){var ee=S(te,o,se(),[l,_],{orientation:R.tiling.orientation,flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1});return function(ie){return b(ee(ie))}}):q.attr("d",b),U.call(r,y,p,d,{styleOne:a,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,p,{isTransitioning:p._transitioning}),q.call(a,N,R,{hovered:!1}),N.x0===N.x1||N.y0===N.y1?N._text="":N._text=f(N,y,R,d,I)||"";var Q=c.ensureSingle(U,"g","slicetext"),W=c.ensureSingle(Q,"text","",function(te){te.attr("data-notex",1)}),X=c.ensureUniformFontSize(p,t.determineTextFont(R,N,I.font));W.text(N._text||" ").classed("slicetext",!0).attr("text-anchor",F?"end":B?"start":"middle").call(M.font,X).call(A.convertToTspans,p),N.textBB=M.bBox(W.node()),N.transform=h(N,{fontSize:X.size}),N.transform.fontSize=X.size,u?W.transition().attrTween("transform",function(te){var ee=k(te,o,se(),[l,_]);return function(ie){return m(ee(ie))}}):W.attr("transform",m(N))}),Z}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"../treemap/constants":1078,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(g,ne,ae){ne.exports={moduleType:"trace",name:"icicle",basePlotModule:g("./base_plot"),categories:[],animatable:!0,attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults"),supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc").calc,crossTraceCalc:g("./calc").crossTraceCalc,plot:g("./plot"),style:g("./style").style,colorbar:g("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(g,ne,ae){ne.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(g,ne,ae){var T=g("../../lib"),c=g("./layout_attributes");ne.exports=function(A,e){function a(n,t){return T.coerce(A,e,c,n,t)}a("iciclecolorway",e.colorway),a("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(g,ne,ae){var T=g("d3-hierarchy"),c=g("../treemap/flip_tree");ne.exports=function(A,e,a){var n=a.flipX,t=a.flipY,r=a.orientation==="h",f=a.maxDepth,o=e[0],i=e[1];f&&(o=(A.height+1)*e[0]/Math.min(A.height+1,f),i=(A.height+1)*e[1]/Math.min(A.height+1,f));var p=T.partition().padding(a.pad.inner).size(r?[e[1],o]:[e[0],i])(A);return(r||n||t)&&c(p,e,{swapXY:r,flipX:n,flipY:t}),p}},{"../treemap/flip_tree":1083,"d3-hierarchy":115}],843:[function(g,ne,ae){var T=g("../treemap/draw"),c=g("./draw_descendants");ne.exports=function(A,e,a,n){return T(A,e,a,n,{type:"icicle",drawDescendants:c})}},{"../treemap/draw":1080,"./draw_descendants":838}],844:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/color"),M=g("../../lib"),A=g("../bar/uniform_text").resizeText;function e(n){var t=n._fullLayout._iciclelayer.selectAll(".trace");A(n,t,"icicle"),t.each(function(r){var f=T.select(this),o=r[0],i=o.trace;f.style("opacity",i.opacity),f.selectAll("path.surface").each(function(p){T.select(this).call(a,p,i)})})}function a(n,t,r){var f=t.data.data,o=!t.children,i=f.i,p=M.castOption(r,i,"marker.line.color")||c.defaultLine,d=M.castOption(r,i,"marker.line.width")||0;n.style("stroke-width",d).call(c.fill,f.color).call(c.stroke,p).style("opacity",o?r.leaf.opacity:null)}ne.exports={style:e,styleOne:a}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(g,ne,ae){for(var T=g("../../plots/attributes"),c=g("../../plots/template_attributes").hovertemplateAttrs,M=g("../../lib/extend").extendFlat,A=g("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],a=[],n=[],t=0;t<e.length;t++){var r=A[e[t]];a.push("For the `"+e[t]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),n.push("For the `"+e[t]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}ne.exports=M({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:M({},T.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:c({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(g,ne,ae){var T=g("../../lib"),c=g("./constants"),M=g("fast-isnumeric"),A=g("../../plots/cartesian/axes"),e=g("../../lib").maxRowLength,a=g("./helpers").getImageSize;ne.exports=function(o,i){var p,d;if(i._hasZ)p=i.z.length,d=e(i.z);else if(i._hasSource){var y=a(i.source);p=y.height,d=y.width}var v=A.getFromId(o,i.xaxis||"x"),x=A.getFromId(o,i.yaxis||"y"),l=v.d2c(i.x0)-i.dx/2,_=x.d2c(i.y0)-i.dy/2,s,w=[l,l+d*i.dx],b=[_,_+p*i.dy];if(v&&v.type==="log")for(s=0;s<d;s++)w.push(l+s*i.dx);if(x&&x.type==="log")for(s=0;s<p;s++)b.push(_+s*i.dy);i._extremes[v._id]=A.findExtremes(v,w),i._extremes[x._id]=A.findExtremes(x,b),i._scaler=r(i);var h={x0:l,y0:_,z:i.z,w:d,h:p};return[h]};function n(f,o,i,p){return function(d){return T.constrain((d-f)*o,i,p)}}function t(f,o){return function(i){return T.constrain(i,f,o)}}function r(f){var o=c.colormodel[f.colormodel],i=o.colormodel||f.colormodel,p=i.length;f._sArray=[];for(var d=0;d<p;d++)o.min[d]!==f.zmin[d]||o.max[d]!==f.zmax[d]?f._sArray.push(n(f.zmin[d],(o.max[d]-o.min[d])/(f.zmax[d]-f.zmin[d]),o.min[d],o.max[d])):f._sArray.push(t(o.min[d],o.max[d]));return function(y){for(var v=y.slice(0,p),x=0;x<p;x++){var l=v[x];if(!M(l))return!1;v[x]=f._sArray[x](l)}return v}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(g,ne,ae){ne.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(T){return T.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(T){return T.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(T){return T.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(T){var c=T.slice(0,3);return c[1]=c[1]+"%",c[2]=c[2]+"%",c},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(T){var c=T.slice(0,4);return c[1]=c[1]+"%",c[2]=c[2]+"%",c},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(g,ne,ae){var T=g("../../lib"),c=g("./attributes"),M=g("./constants"),A=g("../../snapshot/helpers").IMAGE_URL_PREFIX;ne.exports=function(a,n){function t(o,i){return T.coerce(a,n,c,o,i)}t("source"),n.source&&!n.source.match(A)&&delete n.source,n._hasSource=!!n.source;var r=t("z");if(n._hasZ=!(r===void 0||!r.length||!r[0]||!r[0].length),!n._hasZ&&!n._hasSource){n.visible=!1;return}t("x0"),t("y0"),t("dx"),t("dy");var f;n._hasZ?(t("colormodel","rgb"),f=M.colormodel[n.colormodel],t("zmin",f.zminDflt||f.min),t("zmax",f.zmaxDflt||f.max)):n._hasSource&&(n.colormodel="rgba256",f=M.colormodel[n.colormodel],n.zmin=f.zminDflt,n.zmax=f.zmaxDflt),t("zsmooth"),t("text"),t("hovertext"),t("hovertemplate"),n._length=null}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(g,ne,ae){ne.exports=function(c,M){return"xVal"in M&&(c.x=M.xVal),"yVal"in M&&(c.y=M.yVal),M.xa&&(c.xaxis=M.xa),M.ya&&(c.yaxis=M.ya),c.color=M.color,c.colormodel=M.trace.colormodel,c.z||(c.z=M.color),c}},{}],850:[function(g,ne,ae){var T=g("probe-image-size/sync"),c=g("../../snapshot/helpers").IMAGE_URL_PREFIX,M=g("buffer/").Buffer;ae.getImageSize=function(A){var e=A.replace(c,""),a=new M(e,"base64");return T(a)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(g,ne,ae){var T=g("../../components/fx"),c=g("../../lib"),M=g("./constants");ne.exports=function(e,a,n){var t=e.cd[0],r=t.trace,f=e.xa,o=e.ya;if(!(T.inbox(a-t.x0,a-(t.x0+t.w*r.dx),0)>0||T.inbox(n-t.y0,n-(t.y0+t.h*r.dy),0)>0)){var i=Math.floor((a-t.x0)/r.dx),p=Math.floor(Math.abs(n-t.y0)/r.dy),d;if(r._hasZ?d=t.z[p][i]:r._hasSource&&(d=r._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(i,p,1,1).data),!!d){var y=t.hi||r.hoverinfo,v;if(y){var x=y.split("+");x.indexOf("all")!==-1&&(x=["color"]),x.indexOf("color")!==-1&&(v=!0)}var l=M.colormodel[r.colormodel],_=l.colormodel||r.colormodel,s=_.length,w=r._scaler(d),b=l.suffix,h=[];(r.hovertemplate||v)&&(h.push("["+[w[0]+b[0],w[1]+b[1],w[2]+b[2]].join(", ")),s===4&&h.push(", "+w[3]+b[3]),h.push("]"),h=h.join(""),e.extraText=_.toUpperCase()+": "+h);var m;Array.isArray(r.hovertext)&&Array.isArray(r.hovertext[p])?m=r.hovertext[p][i]:Array.isArray(r.text)&&Array.isArray(r.text[p])&&(m=r.text[p][i]);var u=o.c2p(t.y0+(p+.5)*r.dy),L=t.x0+(i+.5)*r.dx,S=t.y0+(p+.5)*r.dy,k="["+d.slice(0,r.colormodel.length).join(", ")+"]";return[c.extendFlat(e,{index:[p,i],x0:f.c2p(t.x0+i*r.dx),x1:f.c2p(t.x0+(i+1)*r.dx),y0:u,y1:u,color:w,xVal:L,xLabelVal:L,yVal:S,yLabelVal:S,zLabelVal:k,text:m,hovertemplateLabels:{zLabel:k,colorLabel:h,"color[0]Label":w[0]+b[0],"color[1]Label":w[1]+b[1],"color[2]Label":w[2]+b[2],"color[3]Label":w[3]+b[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),plot:g("./plot"),style:g("./style"),hoverPoints:g("./hover"),eventData:g("./event_data"),moduleType:"trace",name:"image",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=c.strTranslate,A=g("../../constants/xmlns_namespaces"),e=g("./constants"),a=c.isIOS()||c.isSafari()||c.isIE();ne.exports=function(t,r,f,o){var i=r.xaxis,p=r.yaxis,d=!(a||t._context._exportedPlot);c.makeTraceGroups(o,f,"im").each(function(y){var v=T.select(this),x=y[0],l=x.trace,_=(l.zsmooth==="fast"||l.zsmooth===!1&&d)&&!l._hasZ&&l._hasSource&&i.type==="linear"&&p.type==="linear";l._realImage=_;var s=x.z,w=x.x0,b=x.y0,h=x.w,m=x.h,u=l.dx,L=l.dy,S,k,P,z,I,D;for(D=0;S===void 0&&D<h;)S=i.c2p(w+D*u),D++;for(D=h;k===void 0&&D>0;)k=i.c2p(w+D*u),D--;for(D=0;z===void 0&&D<m;)z=p.c2p(b+D*L),D++;for(D=m;I===void 0&&D>0;)I=p.c2p(b+D*L),D--;if(k<S&&(P=k,k=S,S=P),I<z&&(P=z,z=I,I=P),!_){var R=.5;S=Math.max(-R*i._length,S),k=Math.min((1+R)*i._length,k),z=Math.max(-R*p._length,z),I=Math.min((1+R)*p._length,I)}var B=Math.round(k-S),F=Math.round(I-z),V=B<=0||F<=0;if(V){var Y=v.selectAll("image").data([]);Y.exit().remove();return}function K(Q){var W=document.createElement("canvas");W.width=B,W.height=F;var X=W.getContext("2d",{willReadFrequently:!0}),te=function(Oe){return c.constrain(Math.round(i.c2p(w+Oe*u)-S),0,B)},ee=function(Oe){return c.constrain(Math.round(p.c2p(b+Oe*L)-z),0,F)},ie=e.colormodel[l.colormodel],le=ie.colormodel||l.colormodel,ye=ie.fmt,ue;for(D=0;D<x.w;D++){var pe=te(D),ge=te(D+1);if(!(ge===pe||isNaN(ge)||isNaN(pe)))for(var Te=0;Te<x.h;Te++){var _e=ee(Te),De=ee(Te+1);De===_e||isNaN(De)||isNaN(_e)||!Q(D,Te)||(ue=l._scaler(Q(D,Te)),ue?X.fillStyle=le+"("+ye(ue).join(",")+")":X.fillStyle="rgba(0,0,0,0)",X.fillRect(pe,_e,ge-pe,De-_e))}}return W}var J=v.selectAll("image").data([y]);J.enter().append("svg:image").attr({xmlns:A.svg,preserveAspectRatio:"none"}),J.exit().remove();var G=l.zsmooth===!1?e.pixelatedStyle:"";if(_){var Z=c.simpleMap(i.range,i.r2l),re=c.simpleMap(p.range,p.r2l),se=Z[1]<Z[0],oe=re[1]>re[0];if(se||oe){var N=S+B/2,U=z+F/2;G+="transform:"+M(N+"px",U+"px")+"scale("+(se?-1:1)+","+(oe?-1:1)+")"+M(-N+"px",-U+"px")+";"}}J.attr("style",G);var q=new Promise(function(Q){if(l._hasZ)Q();else if(l._hasSource)if(l._canvas&&l._canvas.el.width===h&&l._canvas.el.height===m&&l._canvas.source===l.source)Q();else{var W=document.createElement("canvas");W.width=h,W.height=m;var X=W.getContext("2d",{willReadFrequently:!0});l._image=l._image||new Image;var te=l._image;te.onload=function(){X.drawImage(te,0,0),l._canvas={el:W,source:l.source},Q()},te.setAttribute("src",l.source)}}).then(function(){var Q,W;if(l._hasZ)W=K(function(ee,ie){return s[ie][ee]}),Q=W.toDataURL("image/png");else if(l._hasSource)if(_)Q=l.source;else{var X=l._canvas.el.getContext("2d",{willReadFrequently:!0}),te=X.getImageData(0,0,h,m).data;W=K(function(ee,ie){var le=4*(ie*h+ee);return[te[le],te[le+1],te[le+2],te[le+3]]}),Q=W.toDataURL("image/png")}J.attr({"xlink:href":Q,height:F,width:B,x:S,y:z})});t._promises.push(q)})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(g,ne,ae){var T=g("@plotly/d3");ne.exports=function(M){T.select(M).selectAll(".im image").style("opacity",function(A){return A[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(g,ne,ae){var T=g("../../lib/extend").extendFlat,c=g("../../lib/extend").extendDeep,M=g("../../plot_api/edit_types").overrideAll,A=g("../../plots/font_attributes"),e=g("../../components/color/attributes"),a=g("../../plots/domain").attributes,n=g("../../plots/cartesian/layout_attributes"),t=g("../../plot_api/plot_template").templatedArray,r=g("../../constants/delta.js"),f=g("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,o=A({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},p={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},d=t("step",c({},i,{range:p}));ne.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:T({},o,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:f("value")},font:T({},o,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:f("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:T({},o,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:c({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:M({range:p,visible:T({},n.visible,{dflt:!0}),tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:T({},n.ticks,{dflt:"outside"}),ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,ticklabelstep:n.ticklabelstep,showticklabels:n.showticklabels,tickfont:A({}),tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,separatethousands:n.separatethousands,exponentformat:n.exponentformat,minexponent:n.minexponent,showexponent:n.showexponent,editType:"plot"},"plot"),steps:d,threshold:{line:{color:T({},i.line.color,{}),width:T({},i.line.width,{dflt:1}),editType:"plot"},thickness:T({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(g,ne,ae){var T=g("../../plots/plots");ae.name="indicator",ae.plot=function(c,M,A,e){T.plotBasePlot(ae.name,c,M,A,e)},ae.clean=function(c,M,A,e){T.cleanBasePlot(ae.name,c,M,A,e)}},{"../../plots/plots":619}],857:[function(g,ne,ae){function T(c,M){var A=[],e=M.value;typeof M._lastValue!="number"&&(M._lastValue=M.value);var a=M._lastValue,n=a;return M._hasDelta&&typeof M.delta.reference=="number"&&(n=M.delta.reference),A[0]={y:e,lastY:a,delta:e-n,relativeDelta:(e-n)/n},A}ne.exports={calc:T}},{}],858:[function(g,ne,ae){ne.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(g,ne,ae){var T=g("../../lib"),c=g("./attributes"),M=g("../../plots/domain").defaults,A=g("../../plot_api/plot_template"),e=g("../../plots/array_container_defaults"),a=g("./constants.js"),n=g("../../plots/cartesian/tick_value_defaults"),t=g("../../plots/cartesian/tick_mark_defaults"),r=g("../../plots/cartesian/tick_label_defaults"),f=g("../../plots/cartesian/prefix_suffix_defaults");function o(p,d,y,v){function x(D,R){return T.coerce(p,d,c,D,R)}M(d,v,x),x("mode"),d._hasNumber=d.mode.indexOf("number")!==-1,d._hasDelta=d.mode.indexOf("delta")!==-1,d._hasGauge=d.mode.indexOf("gauge")!==-1;var l=x("value");d._range=[0,typeof l=="number"?1.5*l:1];var _=new Array(2),s;d._hasNumber&&(x("number.valueformat"),x("number.font.color",v.font.color),x("number.font.family",v.font.family),x("number.font.size"),d.number.font.size===void 0&&(d.number.font.size=a.defaultNumberFontSize,_[0]=!0),x("number.prefix"),x("number.suffix"),s=d.number.font.size);var w;d._hasDelta&&(x("delta.font.color",v.font.color),x("delta.font.family",v.font.family),x("delta.font.size"),d.delta.font.size===void 0&&(d.delta.font.size=(d._hasNumber?.5:1)*(s||a.defaultNumberFontSize),_[1]=!0),x("delta.reference",d.value),x("delta.relative"),x("delta.valueformat",d.delta.relative?"2%":""),x("delta.increasing.symbol"),x("delta.increasing.color"),x("delta.decreasing.symbol"),x("delta.decreasing.color"),x("delta.position"),w=d.delta.font.size),d._scaleNumbers=(!d._hasNumber||_[0])&&(!d._hasDelta||_[1])||!1,x("title.font.color",v.font.color),x("title.font.family",v.font.family),x("title.font.size",.25*(s||w||a.defaultNumberFontSize)),x("title.text");var b,h,m,u;function L(D,R){return T.coerce(b,h,c.gauge,D,R)}function S(D,R){return T.coerce(m,u,c.gauge.axis,D,R)}if(d._hasGauge){b=p.gauge,b||(b={}),h=A.newContainer(d,"gauge"),L("shape");var k=d._isBullet=d.gauge.shape==="bullet";k||x("title.align","center");var P=d._isAngular=d.gauge.shape==="angular";P||x("align","center"),L("bgcolor",v.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width");var z=a.valueThickness*(d.gauge.shape==="bullet"?.5:1);L("bar.thickness",z),e(b,h,{name:"steps",handleItemDefaults:i}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),m={},b&&(m=b.axis||{}),u=A.newContainer(h,"axis"),S("visible"),d._range=S("range",d._range);var I={outerTicks:!0};n(m,u,S,"linear"),f(m,u,S,"linear",I),r(m,u,S,"linear",I),t(m,u,S,I)}else x("title.align","center"),x("align","center"),d._isAngular=d._isBullet=!1;d._length=null}function i(p,d){function y(v,x){return T.coerce(p,d,c.gauge.steps,v,x)}y("color"),y("line.color"),y("line.width"),y("range"),y("thickness")}ne.exports={supplyDefaults:o}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(g,ne,ae){ne.exports={moduleType:"trace",name:"indicator",basePlotModule:g("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:g("./attributes"),supplyDefaults:g("./defaults").supplyDefaults,calc:g("./calc").calc,plot:g("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("d3-interpolate").interpolate,M=g("d3-interpolate").interpolateNumber,A=g("../../lib"),e=A.strScale,a=A.strTranslate,n=A.rad2deg,t=g("../../constants/alignment").MID_SHIFT,r=g("../../components/drawing"),f=g("./constants"),o=g("../../lib/svg_text_utils"),i=g("../../plots/cartesian/axes"),p=g("../../plots/cartesian/axis_defaults"),d=g("../../plots/cartesian/position_defaults"),y=g("../../plots/cartesian/layout_attributes"),v=g("../../components/color"),x={left:"start",center:"middle",right:"end"},l={left:0,center:.5,right:1},_=/[yzafpnµmkMGTPEZY]/;function s(I){return I&&I.duration>0}ne.exports=function(D,R,B,F){var V=D._fullLayout,Y;s(B)&&F&&(Y=F()),A.makeTraceGroups(V._indicatorlayer,R,"trace").each(function(K){var J=K[0],G=J.trace,Z=T.select(this),re=G._hasGauge,se=G._isAngular,oe=G._isBullet,N=G.domain,U={w:V._size.w*(N.x[1]-N.x[0]),h:V._size.h*(N.y[1]-N.y[0]),l:V._size.l+V._size.w*N.x[0],r:V._size.r+V._size.w*(1-N.x[1]),t:V._size.t+V._size.h*(1-N.y[1]),b:V._size.b+V._size.h*N.y[0]},q=U.l+U.w/2,Q=U.t+U.h/2,W=Math.min(U.w/2,U.h),X=f.innerRadius*W,te,ee,ie,le=G.align||"center";if(ee=Q,!re)te=U.l+l[le]*U.w,ie=function(xe){return S(xe,U.w,U.h)};else if(se&&(te=q,ee=Q+W/2,ie=function(xe){return k(xe,.9*X)}),oe){var ye=f.bulletPadding,ue=1-f.bulletNumberDomainSize+ye;te=U.l+(ue+(1-ue)*l[le])*U.w,ie=function(xe){return S(xe,(f.bulletNumberDomainSize-ye)*U.w,U.h)}}h(D,Z,K,{numbersX:te,numbersY:ee,numbersScaler:ie,transitionOpts:B,onComplete:Y});var pe,ge;re&&(pe={range:G.gauge.axis.range,color:G.gauge.bgcolor,line:{color:G.gauge.bordercolor,width:0},thickness:1},ge={range:G.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:G.gauge.bordercolor,width:G.gauge.borderwidth},thickness:1});var Te=Z.selectAll("g.angular").data(se?K:[]);Te.exit().remove();var _e=Z.selectAll("g.angularaxis").data(se?K:[]);_e.exit().remove(),se&&b(D,Z,K,{radius:W,innerRadius:X,gauge:Te,layer:_e,size:U,gaugeBg:pe,gaugeOutline:ge,transitionOpts:B,onComplete:Y});var De=Z.selectAll("g.bullet").data(oe?K:[]);De.exit().remove();var Oe=Z.selectAll("g.bulletaxis").data(oe?K:[]);Oe.exit().remove(),oe&&w(D,Z,K,{gauge:De,layer:Oe,size:U,gaugeBg:pe,gaugeOutline:ge,transitionOpts:B,onComplete:Y});var Ue=Z.selectAll("text.title").data(K);Ue.exit().remove(),Ue.enter().append("text").classed("title",!0),Ue.attr("text-anchor",function(){return oe?x.right:x[G.title.align]}).text(G.title.text).call(r.font,G.title.font).call(o.convertToTspans,D),Ue.attr("transform",function(){var xe=U.l+U.w*l[G.title.align],Pe,Ve=f.titlePadding,Qe=r.bBox(Ue.node());if(re){if(se)if(G.gauge.axis.visible){var Fe=r.bBox(_e.node());Pe=Fe.top-Ve-Qe.bottom}else Pe=U.t+U.h/2-W/2-Qe.bottom-Ve;oe&&(Pe=ee-(Qe.top+Qe.bottom)/2,xe=U.l-f.bulletPadding*U.w)}else Pe=G._numbersTop-Ve-Qe.bottom;return a(xe,Pe)})})};function w(I,D,R,B){var F=R[0].trace,V=B.gauge,Y=B.layer,K=B.gaugeBg,J=B.gaugeOutline,G=B.size,Z=F.domain,re=B.transitionOpts,se=B.onComplete,oe,N,U,q,Q;V.enter().append("g").classed("bullet",!0),V.attr("transform",a(G.l,G.t)),Y.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Y.selectAll("g.xbulletaxistick,path,text").remove();var W=G.h,X=F.gauge.bar.thickness*W,te=Z.x[0],ee=Z.x[0]+(Z.x[1]-Z.x[0])*(F._hasNumber||F._hasDelta?1-f.bulletNumberDomainSize:1);oe=L(I,F.gauge.axis),oe._id="xbulletaxis",oe.domain=[te,ee],oe.setScale(),N=i.calcTicks(oe),U=i.makeTransTickFn(oe),q=i.getTickSigns(oe)[2],Q=G.t+G.h,oe.visible&&(i.drawTicks(I,oe,{vals:oe.ticks==="inside"?i.clipEnds(oe,N):N,layer:Y,path:i.makeTickPath(oe,Q,q),transFn:U}),i.drawLabels(I,oe,{vals:N,layer:Y,transFn:U,labelFns:i.makeLabelFns(oe,Q)}));function ie(_e){_e.attr("width",function(De){return Math.max(0,oe.c2p(De.range[1])-oe.c2p(De.range[0]))}).attr("x",function(De){return oe.c2p(De.range[0])}).attr("y",function(De){return .5*(1-De.thickness)*W}).attr("height",function(De){return De.thickness*W})}var le=[K].concat(F.gauge.steps),ye=V.selectAll("g.bg-bullet").data(le);ye.enter().append("g").classed("bg-bullet",!0).append("rect"),ye.select("rect").call(ie).call(m),ye.exit().remove();var ue=V.selectAll("g.value-bullet").data([F.gauge.bar]);ue.enter().append("g").classed("value-bullet",!0).append("rect"),ue.select("rect").attr("height",X).attr("y",(W-X)/2).call(m),s(re)?ue.select("rect").transition().duration(re.duration).ease(re.easing).each("end",function(){se&&se()}).each("interrupt",function(){se&&se()}).attr("width",Math.max(0,oe.c2p(Math.min(F.gauge.axis.range[1],R[0].y)))):ue.select("rect").attr("width",typeof R[0].y=="number"?Math.max(0,oe.c2p(Math.min(F.gauge.axis.range[1],R[0].y))):0),ue.exit().remove();var pe=R.filter(function(){return F.gauge.threshold.value||F.gauge.threshold.value===0}),ge=V.selectAll("g.threshold-bullet").data(pe);ge.enter().append("g").classed("threshold-bullet",!0).append("line"),ge.select("line").attr("x1",oe.c2p(F.gauge.threshold.value)).attr("x2",oe.c2p(F.gauge.threshold.value)).attr("y1",(1-F.gauge.threshold.thickness)/2*W).attr("y2",(1-(1-F.gauge.threshold.thickness)/2)*W).call(v.stroke,F.gauge.threshold.line.color).style("stroke-width",F.gauge.threshold.line.width),ge.exit().remove();var Te=V.selectAll("g.gauge-outline").data([J]);Te.enter().append("g").classed("gauge-outline",!0).append("rect"),Te.select("rect").call(ie).call(m),Te.exit().remove()}function b(I,D,R,B){var F=R[0].trace,V=B.size,Y=B.radius,K=B.innerRadius,J=B.gaugeBg,G=B.gaugeOutline,Z=[V.l+V.w/2,V.t+V.h/2+Y/2],re=B.gauge,se=B.layer,oe=B.transitionOpts,N=B.onComplete,U=Math.PI/2;function q(Le){var Ne=F.gauge.axis.range[0],dt=F.gauge.axis.range[1],Dt=(Le-Ne)/(dt-Ne)*Math.PI-U;return Dt<-U?-U:Dt>U?U:Dt}function Q(Le){return T.svg.arc().innerRadius((K+Y)/2-Le/2*(Y-K)).outerRadius((K+Y)/2+Le/2*(Y-K)).startAngle(-U)}function W(Le){Le.attr("d",function(Ne){return Q(Ne.thickness).startAngle(q(Ne.range[0])).endAngle(q(Ne.range[1]))()})}var X,te,ee,ie;re.enter().append("g").classed("angular",!0),re.attr("transform",a(Z[0],Z[1])),se.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),se.selectAll("g.xangularaxistick,path,text").remove(),X=L(I,F.gauge.axis),X.type="linear",X.range=F.gauge.axis.range,X._id="xangularaxis",X.ticklabeloverflow="allow",X.setScale();var le=function(Le){return(X.range[0]-Le.x)/(X.range[1]-X.range[0])*Math.PI+Math.PI},ye={},ue=i.makeLabelFns(X,0),pe=ue.labelStandoff;ye.xFn=function(Le){var Ne=le(Le);return Math.cos(Ne)*pe},ye.yFn=function(Le){var Ne=le(Le),dt=Math.sin(Ne)>0?.2:1;return-Math.sin(Ne)*(pe+Le.fontSize*dt)+Math.abs(Math.cos(Ne))*(Le.fontSize*t)},ye.anchorFn=function(Le){var Ne=le(Le),dt=Math.cos(Ne);return Math.abs(dt)<.1?"middle":dt>0?"start":"end"},ye.heightFn=function(Le,Ne,dt){var Dt=le(Le);return-.5*(1+Math.sin(Dt))*dt};var ge=function(Le){return a(Z[0]+Y*Math.cos(Le),Z[1]-Y*Math.sin(Le))};ee=function(Le){return ge(le(Le))};var Te=function(Le){var Ne=le(Le);return ge(Ne)+"rotate("+-n(Ne)+")"};if(te=i.calcTicks(X),ie=i.getTickSigns(X)[2],X.visible){ie=X.ticks==="inside"?-1:1;var _e=(X.linewidth||1)/2;i.drawTicks(I,X,{vals:te,layer:se,path:"M"+ie*_e+",0h"+ie*X.ticklen,transFn:Te}),i.drawLabels(I,X,{vals:te,layer:se,transFn:ee,labelFns:ye})}var De=[J].concat(F.gauge.steps),Oe=re.selectAll("g.bg-arc").data(De);Oe.enter().append("g").classed("bg-arc",!0).append("path"),Oe.select("path").call(W).call(m),Oe.exit().remove();var Ue=Q(F.gauge.bar.thickness),xe=re.selectAll("g.value-arc").data([F.gauge.bar]);xe.enter().append("g").classed("value-arc",!0).append("path");var Pe=xe.select("path");s(oe)?(Pe.transition().duration(oe.duration).ease(oe.easing).each("end",function(){N&&N()}).each("interrupt",function(){N&&N()}).attrTween("d",u(Ue,q(R[0].lastY),q(R[0].y))),F._lastValue=R[0].y):Pe.attr("d",typeof R[0].y=="number"?Ue.endAngle(q(R[0].y)):"M0,0Z"),Pe.call(m),xe.exit().remove(),De=[];var Ve=F.gauge.threshold.value;(Ve||Ve===0)&&De.push({range:[Ve,Ve],color:F.gauge.threshold.color,line:{color:F.gauge.threshold.line.color,width:F.gauge.threshold.line.width},thickness:F.gauge.threshold.thickness});var Qe=re.selectAll("g.threshold-arc").data(De);Qe.enter().append("g").classed("threshold-arc",!0).append("path"),Qe.select("path").call(W).call(m),Qe.exit().remove();var Fe=re.selectAll("g.gauge-outline").data([G]);Fe.enter().append("g").classed("gauge-outline",!0).append("path"),Fe.select("path").call(W).call(m),Fe.exit().remove()}function h(I,D,R,B){var F=R[0].trace,V=B.numbersX,Y=B.numbersY,K=F.align||"center",J=x[K],G=B.transitionOpts,Z=B.onComplete,re=A.ensureSingle(D,"g","numbers"),se,oe,N,U=[];F._hasNumber&&U.push("number"),F._hasDelta&&(U.push("delta"),F.delta.position==="left"&&U.reverse());var q=re.selectAll("text").data(U);q.enter().append("text"),q.attr("text-anchor",function(){return J}).attr("class",function(ge){return ge}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),q.exit().remove();function Q(ge,Te,_e,De){if(ge.match("s")&&_e>=0!=De>=0&&!Te(_e).slice(-1).match(_)&&!Te(De).slice(-1).match(_)){var Oe=ge.slice().replace("s","f").replace(/\d+/,function(xe){return parseInt(xe)-1}),Ue=L(I,{tickformat:Oe});return function(xe){return Math.abs(xe)<1?i.tickText(Ue,xe).text:Te(xe)}}else return Te}function W(){var ge=L(I,{tickformat:F.number.valueformat},F._range);ge.setScale(),i.prepTicks(ge);var Te=function(xe){return i.tickText(ge,xe).text},_e=F.number.suffix,De=F.number.prefix,Oe=re.select("text.number");function Ue(){var xe=typeof R[0].y=="number"?De+Te(R[0].y)+_e:"-";Oe.text(xe).call(r.font,F.number.font).call(o.convertToTspans,I)}return s(G)?Oe.transition().duration(G.duration).ease(G.easing).each("end",function(){Ue(),Z&&Z()}).each("interrupt",function(){Ue(),Z&&Z()}).attrTween("text",function(){var xe=T.select(this),Pe=M(R[0].lastY,R[0].y);F._lastValue=R[0].y;var Ve=Q(F.number.valueformat,Te,R[0].lastY,R[0].y);return function(Qe){xe.text(De+Ve(Pe(Qe))+_e)}}):Ue(),se=P(De+Te(R[0].y)+_e,F.number.font,J,I),Oe}function X(){var ge=L(I,{tickformat:F.delta.valueformat},F._range);ge.setScale(),i.prepTicks(ge);var Te=function(Pe){return i.tickText(ge,Pe).text},_e=function(Pe){var Ve=F.delta.relative?Pe.relativeDelta:Pe.delta;return Ve},De=function(Pe,Ve){return Pe===0||typeof Pe!="number"||isNaN(Pe)?"-":(Pe>0?F.delta.increasing.symbol:F.delta.decreasing.symbol)+Ve(Pe)},Oe=function(Pe){return Pe.delta>=0?F.delta.increasing.color:F.delta.decreasing.color};F._deltaLastValue===void 0&&(F._deltaLastValue=_e(R[0]));var Ue=re.select("text.delta");Ue.call(r.font,F.delta.font).call(v.fill,Oe({delta:F._deltaLastValue}));function xe(){Ue.text(De(_e(R[0]),Te)).call(v.fill,Oe(R[0])).call(o.convertToTspans,I)}return s(G)?Ue.transition().duration(G.duration).ease(G.easing).tween("text",function(){var Pe=T.select(this),Ve=_e(R[0]),Qe=F._deltaLastValue,Fe=Q(F.delta.valueformat,Te,Qe,Ve),Le=M(Qe,Ve);return F._deltaLastValue=Ve,function(Ne){Pe.text(De(Le(Ne),Fe)),Pe.call(v.fill,Oe({delta:Le(Ne)}))}}).each("end",function(){xe(),Z&&Z()}).each("interrupt",function(){xe(),Z&&Z()}):xe(),oe=P(De(_e(R[0]),Te),F.delta.font,J,I),Ue}var te=F.mode+F.align,ee;if(F._hasDelta&&(ee=X(),te+=F.delta.position+F.delta.font.size+F.delta.font.family+F.delta.valueformat,te+=F.delta.increasing.symbol+F.delta.decreasing.symbol,N=oe),F._hasNumber&&(W(),te+=F.number.font.size+F.number.font.family+F.number.valueformat+F.number.suffix+F.number.prefix,N=se),F._hasDelta&&F._hasNumber){var ie=[(se.left+se.right)/2,(se.top+se.bottom)/2],le=[(oe.left+oe.right)/2,(oe.top+oe.bottom)/2],ye,ue,pe=.75*F.delta.font.size;F.delta.position==="left"&&(ye=z(F,"deltaPos",0,-1*(se.width*l[F.align]+oe.width*(1-l[F.align])+pe),te,Math.min),ue=ie[1]-le[1],N={width:se.width+oe.width+pe,height:Math.max(se.height,oe.height),left:oe.left+ye,right:se.right,top:Math.min(se.top,oe.top+ue),bottom:Math.max(se.bottom,oe.bottom+ue)}),F.delta.position==="right"&&(ye=z(F,"deltaPos",0,se.width*(1-l[F.align])+oe.width*l[F.align]+pe,te,Math.max),ue=ie[1]-le[1],N={width:se.width+oe.width+pe,height:Math.max(se.height,oe.height),left:se.left,right:oe.right+ye,top:Math.min(se.top,oe.top+ue),bottom:Math.max(se.bottom,oe.bottom+ue)}),F.delta.position==="bottom"&&(ye=null,ue=oe.height,N={width:Math.max(se.width,oe.width),height:se.height+oe.height,left:Math.min(se.left,oe.left),right:Math.max(se.right,oe.right),top:se.bottom-se.height,bottom:se.bottom+oe.height}),F.delta.position==="top"&&(ye=null,ue=se.top,N={width:Math.max(se.width,oe.width),height:se.height+oe.height,left:Math.min(se.left,oe.left),right:Math.max(se.right,oe.right),top:se.bottom-se.height-oe.height,bottom:se.bottom}),ee.attr({dx:ye,dy:ue})}(F._hasNumber||F._hasDelta)&&re.attr("transform",function(){var ge=B.numbersScaler(N);te+=ge[2];var Te=z(F,"numbersScale",1,ge[0],te,Math.min),_e;F._scaleNumbers||(Te=1),F._isAngular?_e=Y-Te*N.bottom:_e=Y-Te*(N.top+N.bottom)/2,F._numbersTop=Te*N.top+_e;var De=N[K];K==="center"&&(De=(N.left+N.right)/2);var Oe=V-Te*De;return Oe=z(F,"numbersTranslate",0,Oe,te,Math.max),a(Oe,_e)+e(Te)})}function m(I){I.each(function(D){v.stroke(T.select(this),D.line.color)}).each(function(D){v.fill(T.select(this),D.color)}).style("stroke-width",function(D){return D.line.width})}function u(I,D,R){return function(){var B=c(D,R);return function(F){return I.endAngle(B(F))()}}}function L(I,D,R){var B=I._fullLayout,F=A.extendFlat({type:"linear",ticks:"outside",range:R,showline:!0},D),V={type:"linear",_id:"x"+D._id},Y={letter:"x",font:B.font,noHover:!0,noTickson:!0};function K(J,G){return A.coerce(F,V,y,J,G)}return p(F,V,K,Y,B),d(F,V,K,Y),V}function S(I,D,R){var B=Math.min(D/I.width,R/I.height);return[B,I,D+"x"+R]}function k(I,D){var R=Math.sqrt(I.width/2*(I.width/2)+I.height*I.height),B=D/R;return[B,I,D]}function P(I,D,R,B){var F=document.createElementNS("http://www.w3.org/2000/svg","text"),V=T.select(F);return V.text(I).attr("x",0).attr("y",0).attr("text-anchor",R).attr("data-unformatted",I).call(o.convertToTspans,B).call(r.font,D),r.bBox(V.node())}function z(I,D,R,B,F,V){var Y="_cache"+D;I[Y]&&I[Y].key===F||(I[Y]={key:F,value:R});var K=A.aggNums(V,null,[I[Y].value,B],2);return I[Y].value=K,K}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(g,ne,ae){var T=g("../../components/colorscale/attributes"),c=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=g("../../plots/template_attributes").hovertemplateAttrs,A=g("../mesh3d/attributes"),e=g("../../plots/attributes"),a=g("../../lib/extend").extendFlat,n=g("../../plot_api/edit_types").overrideAll;function t(o){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function r(o){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var f=ne.exports=n(a({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:t(),y:t(),z:t()},caps:{x:r(),y:r(),z:r()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:M(),xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z"),valuehoverformat:c("value",1),showlegend:a({},e.showlegend,{dflt:!1})},T("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:A.opacity,lightposition:A.lightposition,lighting:A.lighting,flatshading:A.flatshading,contour:A.contour,hoverinfo:a({},e.hoverinfo)}),"calc","nested");f.flatshading.dflt=!0,f.lighting.facenormalsepsilon.dflt=0,f.x.editType=f.y.editType=f.z.editType=f.value.editType="calc+clearAxisTypes",f.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(g,ne,ae){var T=g("../../components/colorscale/calc"),c=g("../streamtube/calc").processGrid,M=g("../streamtube/calc").filter;ne.exports=function(e,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length),a._x=M(a.x,a._len),a._y=M(a.y,a._len),a._z=M(a.z,a._len),a._value=M(a.value,a._len);var n=c(a);a._gridFill=n.fill,a._Xs=n.Xs,a._Ys=n.Ys,a._Zs=n.Zs,a._len=n.len;for(var t=1/0,r=-1/0,f=0;f<a._len;f++){var o=a._value[f];t=Math.min(t,o),r=Math.max(r,o)}a._minValues=t,a._maxValues=r,a._vMin=a.isomin===void 0||a.isomin===null?t:a.isomin,a._vMax=a.isomax===void 0||a.isomin===null?r:a.isomax,T(e,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1045}],864:[function(g,ne,ae){var T=g("../../../stackgl_modules").gl_mesh3d,c=g("../../lib/gl_format_color").parseColorScale,M=g("../../lib/str2rgbarray"),A=g("../../components/colorscale").extractOpts,e=g("../../plots/gl3d/zip3"),a=function(i,p){for(var d=p.length-1;d>0;d--){var y=Math.min(p[d],p[d-1]),v=Math.max(p[d],p[d-1]);if(v>y&&y<i&&i<=v)return{id:d,distRatio:(v-i)/(v-y)}}return{id:0,distRatio:0}};function n(i,p,d){this.scene=i,this.uid=d,this.mesh=p,this.name="",this.data=null,this.showContour=!1}var t=n.prototype;t.handlePick=function(i){if(i.object===this.mesh){var p=i.data.index,d=this.data._meshX[p],y=this.data._meshY[p],v=this.data._meshZ[p],x=this.data._Ys.length,l=this.data._Zs.length,_=a(d,this.data._Xs).id,s=a(y,this.data._Ys).id,w=a(v,this.data._Zs).id,b=i.index=w+l*s+l*x*_;i.traceCoordinate=[this.data._meshX[b],this.data._meshY[b],this.data._meshZ[b],this.data._value[b]];var h=this.data.hovertext||this.data.text;return Array.isArray(h)&&h[b]!==void 0?i.textLabel=h[b]:h&&(i.textLabel=h),!0}},t.update=function(i){var p=this.scene,d=p.fullSceneLayout;this.data=f(i);function y(s,w,b,h){return w.map(function(m){return s.d2l(m,0,h)*b})}var v=e(y(d.xaxis,i._meshX,p.dataScale[0],i.xcalendar),y(d.yaxis,i._meshY,p.dataScale[1],i.ycalendar),y(d.zaxis,i._meshZ,p.dataScale[2],i.zcalendar)),x=e(i._meshI,i._meshJ,i._meshK),l={positions:v,cells:x,lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,contourEnable:i.contour.show,contourColor:M(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},_=A(i);l.vertexIntensity=i._meshIntensity,l.vertexIntensityBounds=[_.min,_.max],l.colormap=c(i),this.mesh.update(l)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function f(i){i._meshI=[],i._meshJ=[],i._meshK=[];var p=i.surface.show,d=i.spaceframe.show,y=i.surface.fill,v=i.spaceframe.fill,x=!1,l=!1,_=0,s,w,b=i._Xs,h=i._Ys,m=i._Zs,u=b.length,L=h.length,S=m.length,k=r.indexOf(i._gridFill.replace(/-/g,"").replace(/\+/g,"")),P=function(Et,Mt,rt){switch(k){case 5:return rt+S*Mt+S*L*Et;case 4:return rt+S*Et+S*u*Mt;case 3:return Mt+L*rt+L*S*Et;case 2:return Mt+L*Et+L*u*rt;case 1:return Et+u*rt+u*S*Mt;default:return Et+u*Mt+u*L*rt}},z=i._minValues,I=i._maxValues,D=i._vMin,R=i._vMax,B,F,V,Y;function K(Et,Mt,rt){for(var ct=Y.length,Ze=w;Ze<ct;Ze++)if(Et===B[Ze]&&Mt===F[Ze]&&rt===V[Ze])return Ze;return-1}function J(){w=s}function G(){B=[],F=[],V=[],Y=[],s=0,J()}function Z(Et,Mt,rt,ct){return B.push(Et),F.push(Mt),V.push(rt),Y.push(ct),s++,s-1}function re(Et,Mt,rt){return i._meshI.push(Et),i._meshJ.push(Mt),i._meshK.push(rt),_++,_-1}function se(Et,Mt,rt){for(var ct=[],Ze=0;Ze<Et.length;Ze++)ct[Ze]=(Et[Ze]+Mt[Ze]+rt[Ze])/3;return ct}function oe(Et,Mt,rt){for(var ct=[],Ze=0;Ze<Et.length;Ze++)ct[Ze]=Et[Ze]*(1-rt)+rt*Mt[Ze];return ct}var N;function U(Et){N=Et}function q(Et,Mt){var rt=Et[0],ct=Et[1],Ze=Et[2],ke=se(rt,ct,Ze),Ge=Math.sqrt(1-N),Je=oe(ke,rt,Ge),it=oe(ke,ct,Ge),Pt=oe(ke,Ze,Ge),At=Mt[0],Ot=Mt[1],Jt=Mt[2];return{xyzv:[[rt,ct,it],[it,Je,rt],[ct,Ze,Pt],[Pt,it,ct],[Ze,rt,Je],[Je,Pt,Ze]],abc:[[At,Ot,-1],[-1,-1,At],[Ot,Jt,-1],[-1,-1,Ot],[Jt,At,-1],[-1,-1,Jt]]}}function Q(Et,Mt){return Et==="all"||Et===null?!0:Et.indexOf(Mt)>-1}function W(Et,Mt){return Et===null?Mt:Et}function X(Et,Mt,rt){J();var ct=[Mt],Ze=[rt];if(N>=1)ct=[Mt],Ze=[rt];else if(N>0){var ke=q(Mt,rt);ct=ke.xyzv,Ze=ke.abc}for(var Ge=0;Ge<ct.length;Ge++){Mt=ct[Ge],rt=Ze[Ge];for(var Je=[],it=0;it<3;it++){var Pt=Mt[it][0],At=Mt[it][1],Ot=Mt[it][2],Jt=Mt[it][3],Bt=rt[it]>-1?rt[it]:K(Pt,At,Ot);Bt>-1?Je[it]=Bt:Je[it]=Z(Pt,At,Ot,W(Et,Jt))}re(Je[0],Je[1],Je[2])}}function te(Et,Mt,rt){var ct=function(Ze,ke,Ge){X(Et,[Mt[Ze],Mt[ke],Mt[Ge]],[rt[Ze],rt[ke],rt[Ge]])};ct(0,1,2),ct(2,3,0)}function ee(Et,Mt,rt){var ct=function(Ze,ke,Ge){X(Et,[Mt[Ze],Mt[ke],Mt[Ge]],[rt[Ze],rt[ke],rt[Ge]])};ct(0,1,2),ct(3,0,1),ct(2,3,0),ct(1,2,3)}function ie(Et,Mt,rt,ct){var Ze=Et[3];Ze<rt&&(Ze=rt),Ze>ct&&(Ze=ct);for(var ke=(Et[3]-Ze)/(Et[3]-Mt[3]+1e-9),Ge=[],Je=0;Je<4;Je++)Ge[Je]=(1-ke)*Et[Je]+ke*Mt[Je];return Ge}function le(Et,Mt,rt){return Et>=Mt&&Et<=rt}function ye(Et){var Mt=.001*(R-D);return Et>=D-Mt&&Et<=R+Mt}function ue(Et){for(var Mt=[],rt=0;rt<4;rt++){var ct=Et[rt];Mt.push([i._x[ct],i._y[ct],i._z[ct],i._value[ct]])}return Mt}var pe=3;function ge(Et,Mt,rt,ct,Ze,ke){ke||(ke=1),rt=[-1,-1,-1];var Ge=!1,Je=[le(Mt[0][3],ct,Ze),le(Mt[1][3],ct,Ze),le(Mt[2][3],ct,Ze)];if(!Je[0]&&!Je[1]&&!Je[2])return!1;var it=function(At,Ot,Jt){return ye(Ot[0][3])&&ye(Ot[1][3])&&ye(Ot[2][3])?(X(At,Ot,Jt),!0):ke<pe?ge(At,Ot,Jt,D,R,++ke):!1};if(Je[0]&&Je[1]&&Je[2])return it(Et,Mt,rt)||Ge;var Pt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(At){if(Je[At[0]]&&Je[At[1]]&&!Je[At[2]]){var Ot=Mt[At[0]],Jt=Mt[At[1]],Bt=Mt[At[2]],qt=ie(Bt,Ot,ct,Ze),rr=ie(Bt,Jt,ct,Ze);Ge=it(Et,[rr,qt,Ot],[-1,-1,rt[At[0]]])||Ge,Ge=it(Et,[Ot,Jt,rr],[rt[At[0]],rt[At[1]],-1])||Ge,Pt=!0}}),Pt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(At){if(Je[At[0]]&&!Je[At[1]]&&!Je[At[2]]){var Ot=Mt[At[0]],Jt=Mt[At[1]],Bt=Mt[At[2]],qt=ie(Jt,Ot,ct,Ze),rr=ie(Bt,Ot,ct,Ze);Ge=it(Et,[rr,qt,Ot],[-1,-1,rt[At[0]]])||Ge,Pt=!0}}),Ge}function Te(Et,Mt,rt,ct){var Ze=!1,ke=ue(Mt),Ge=[le(ke[0][3],rt,ct),le(ke[1][3],rt,ct),le(ke[2][3],rt,ct),le(ke[3][3],rt,ct)];if(!Ge[0]&&!Ge[1]&&!Ge[2]&&!Ge[3])return Ze;if(Ge[0]&&Ge[1]&&Ge[2]&&Ge[3])return l&&(Ze=ee(Et,ke,Mt)||Ze),Ze;var Je=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(it){if(Ge[it[0]]&&Ge[it[1]]&&Ge[it[2]]&&!Ge[it[3]]){var Pt=ke[it[0]],At=ke[it[1]],Ot=ke[it[2]],Jt=ke[it[3]];if(l)Ze=X(Et,[Pt,At,Ot],[Mt[it[0]],Mt[it[1]],Mt[it[2]]])||Ze;else{var Bt=ie(Jt,Pt,rt,ct),qt=ie(Jt,At,rt,ct),rr=ie(Jt,Ot,rt,ct);Ze=X(null,[Bt,qt,rr],[-1,-1,-1])||Ze}Je=!0}}),Je||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(it){if(Ge[it[0]]&&Ge[it[1]]&&!Ge[it[2]]&&!Ge[it[3]]){var Pt=ke[it[0]],At=ke[it[1]],Ot=ke[it[2]],Jt=ke[it[3]],Bt=ie(Ot,Pt,rt,ct),qt=ie(Ot,At,rt,ct),rr=ie(Jt,At,rt,ct),er=ie(Jt,Pt,rt,ct);l?(Ze=X(Et,[Pt,er,Bt],[Mt[it[0]],-1,-1])||Ze,Ze=X(Et,[At,qt,rr],[Mt[it[1]],-1,-1])||Ze):Ze=te(null,[Bt,qt,rr,er],[-1,-1,-1,-1])||Ze,Je=!0}}),Je)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(it){if(Ge[it[0]]&&!Ge[it[1]]&&!Ge[it[2]]&&!Ge[it[3]]){var Pt=ke[it[0]],At=ke[it[1]],Ot=ke[it[2]],Jt=ke[it[3]],Bt=ie(At,Pt,rt,ct),qt=ie(Ot,Pt,rt,ct),rr=ie(Jt,Pt,rt,ct);l?(Ze=X(Et,[Pt,Bt,qt],[Mt[it[0]],-1,-1])||Ze,Ze=X(Et,[Pt,qt,rr],[Mt[it[0]],-1,-1])||Ze,Ze=X(Et,[Pt,rr,Bt],[Mt[it[0]],-1,-1])||Ze):Ze=X(null,[Bt,qt,rr],[-1,-1,-1])||Ze,Je=!0}}),Ze}function _e(Et,Mt,rt,ct,Ze,ke,Ge,Je,it,Pt,At){var Ot=!1;return x&&(Q(Et,"A")&&(Ot=Te(null,[Mt,rt,ct,ke],Pt,At)||Ot),Q(Et,"B")&&(Ot=Te(null,[rt,ct,Ze,it],Pt,At)||Ot),Q(Et,"C")&&(Ot=Te(null,[rt,ke,Ge,it],Pt,At)||Ot),Q(Et,"D")&&(Ot=Te(null,[ct,ke,Je,it],Pt,At)||Ot),Q(Et,"E")&&(Ot=Te(null,[rt,ct,ke,it],Pt,At)||Ot)),l&&(Ot=Te(Et,[rt,ct,ke,it],Pt,At)||Ot),Ot}function De(Et,Mt,rt,ct,Ze,ke,Ge,Je){return[Je[0]===!0?!0:ge(Et,ue([Mt,rt,ct]),[Mt,rt,ct],ke,Ge),Je[1]===!0?!0:ge(Et,ue([ct,Ze,Mt]),[ct,Ze,Mt],ke,Ge)]}function Oe(Et,Mt,rt,ct,Ze,ke,Ge,Je,it){return Je?De(Et,Mt,rt,Ze,ct,ke,Ge,it):De(Et,rt,Ze,ct,Mt,ke,Ge,it)}function Ue(Et,Mt,rt,ct,Ze,ke,Ge){var Je=!1,it,Pt,At,Ot,Jt=function(){Je=ge(Et,[it,Pt,At],[-1,-1,-1],Ze,ke)||Je,Je=ge(Et,[At,Ot,it],[-1,-1,-1],Ze,ke)||Je},Bt=Ge[0],qt=Ge[1],rr=Ge[2];return Bt&&(it=oe(ue([P(Mt,rt-0,ct-0)])[0],ue([P(Mt-1,rt-0,ct-0)])[0],Bt),Pt=oe(ue([P(Mt,rt-0,ct-1)])[0],ue([P(Mt-1,rt-0,ct-1)])[0],Bt),At=oe(ue([P(Mt,rt-1,ct-1)])[0],ue([P(Mt-1,rt-1,ct-1)])[0],Bt),Ot=oe(ue([P(Mt,rt-1,ct-0)])[0],ue([P(Mt-1,rt-1,ct-0)])[0],Bt),Jt()),qt&&(it=oe(ue([P(Mt-0,rt,ct-0)])[0],ue([P(Mt-0,rt-1,ct-0)])[0],qt),Pt=oe(ue([P(Mt-0,rt,ct-1)])[0],ue([P(Mt-0,rt-1,ct-1)])[0],qt),At=oe(ue([P(Mt-1,rt,ct-1)])[0],ue([P(Mt-1,rt-1,ct-1)])[0],qt),Ot=oe(ue([P(Mt-1,rt,ct-0)])[0],ue([P(Mt-1,rt-1,ct-0)])[0],qt),Jt()),rr&&(it=oe(ue([P(Mt-0,rt-0,ct)])[0],ue([P(Mt-0,rt-0,ct-1)])[0],rr),Pt=oe(ue([P(Mt-0,rt-1,ct)])[0],ue([P(Mt-0,rt-1,ct-1)])[0],rr),At=oe(ue([P(Mt-1,rt-1,ct)])[0],ue([P(Mt-1,rt-1,ct-1)])[0],rr),Ot=oe(ue([P(Mt-1,rt-0,ct)])[0],ue([P(Mt-1,rt-0,ct-1)])[0],rr),Jt()),Je}function xe(Et,Mt,rt,ct,Ze,ke,Ge,Je,it,Pt,At,Ot){var Jt=Et;return Ot?(x&&Et==="even"&&(Jt=null),_e(Jt,Mt,rt,ct,Ze,ke,Ge,Je,it,Pt,At)):(x&&Et==="odd"&&(Jt=null),_e(Jt,it,Je,Ge,ke,Ze,ct,rt,Mt,Pt,At))}function Pe(Et,Mt,rt,ct,Ze){for(var ke=[],Ge=0,Je=0;Je<Mt.length;Je++)for(var it=Mt[Je],Pt=1;Pt<S;Pt++)for(var At=1;At<L;At++)ke.push(Oe(Et,P(it,At-1,Pt-1),P(it,At-1,Pt),P(it,At,Pt-1),P(it,At,Pt),rt,ct,(it+At+Pt)%2,Ze&&Ze[Ge]?Ze[Ge]:[])),Ge++;return ke}function Ve(Et,Mt,rt,ct,Ze){for(var ke=[],Ge=0,Je=0;Je<Mt.length;Je++)for(var it=Mt[Je],Pt=1;Pt<u;Pt++)for(var At=1;At<S;At++)ke.push(Oe(Et,P(Pt-1,it,At-1),P(Pt,it,At-1),P(Pt-1,it,At),P(Pt,it,At),rt,ct,(Pt+it+At)%2,Ze&&Ze[Ge]?Ze[Ge]:[])),Ge++;return ke}function Qe(Et,Mt,rt,ct,Ze){for(var ke=[],Ge=0,Je=0;Je<Mt.length;Je++)for(var it=Mt[Je],Pt=1;Pt<L;Pt++)for(var At=1;At<u;At++)ke.push(Oe(Et,P(At-1,Pt-1,it),P(At-1,Pt,it),P(At,Pt-1,it),P(At,Pt,it),rt,ct,(At+Pt+it)%2,Ze&&Ze[Ge]?Ze[Ge]:[])),Ge++;return ke}function Fe(Et,Mt,rt){for(var ct=1;ct<S;ct++)for(var Ze=1;Ze<L;Ze++)for(var ke=1;ke<u;ke++)xe(Et,P(ke-1,Ze-1,ct-1),P(ke-1,Ze-1,ct),P(ke-1,Ze,ct-1),P(ke-1,Ze,ct),P(ke,Ze-1,ct-1),P(ke,Ze-1,ct),P(ke,Ze,ct-1),P(ke,Ze,ct),Mt,rt,(ke+Ze+ct)%2)}function Le(Et,Mt,rt){l=!0,Fe(Et,Mt,rt),l=!1}function Ne(Et,Mt,rt){x=!0,Fe(Et,Mt,rt),x=!1}function dt(Et,Mt,rt,ct,Ze,ke){for(var Ge=[],Je=0,it=0;it<Mt.length;it++)for(var Pt=Mt[it],At=1;At<S;At++)for(var Ot=1;Ot<L;Ot++)Ge.push(Ue(Et,Pt,Ot,At,rt,ct,Ze[it],ke&&ke[Je]?ke[Je]:[])),Je++;return Ge}function Dt(Et,Mt,rt,ct,Ze,ke){for(var Ge=[],Je=0,it=0;it<Mt.length;it++)for(var Pt=Mt[it],At=1;At<u;At++)for(var Ot=1;Ot<S;Ot++)Ge.push(Ue(Et,At,Pt,Ot,rt,ct,Ze[it],ke&&ke[Je]?ke[Je]:[])),Je++;return Ge}function Xt(Et,Mt,rt,ct,Ze,ke){for(var Ge=[],Je=0,it=0;it<Mt.length;it++)for(var Pt=Mt[it],At=1;At<L;At++)for(var Ot=1;Ot<u;Ot++)Ge.push(Ue(Et,Ot,At,Pt,rt,ct,Ze[it],ke&&ke[Je]?ke[Je]:[])),Je++;return Ge}function Tt(Et,Mt){for(var rt=[],ct=Et;ct<Mt;ct++)rt.push(ct);return rt}function zt(){for(var Et=0;Et<u;Et++)for(var Mt=0;Mt<L;Mt++)for(var rt=0;rt<S;rt++){var ct=P(Et,Mt,rt);Z(i._x[ct],i._y[ct],i._z[ct],i._value[ct])}}function Ut(){G(),zt();var Et=null;if(d&&v&&(U(v),Le(Et,D,R)),p&&y){U(y);for(var Mt=i.surface.pattern,rt=i.surface.count,ct=0;ct<rt;ct++){var Ze=rt===1?.5:ct/(rt-1),ke=(1-Ze)*D+Ze*R,Ge=Math.abs(ke-z),Je=Math.abs(ke-I),it=Ge>Je?[z,ke]:[ke,I];Ne(Mt,it[0],it[1])}}var Pt=[[Math.min(D,I),Math.max(D,I)],[Math.min(z,R),Math.max(z,R)]];["x","y","z"].forEach(function(At){for(var Ot=[],Jt=0;Jt<Pt.length;Jt++){var Bt=0,qt=Pt[Jt][0],rr=Pt[Jt][1],er=i.slices[At];if(er.show&&er.fill){U(er.fill);var pr=[],Xr=[],hn=[];if(er.locations.length)for(var $r=0;$r<er.locations.length;$r++){var nt=a(er.locations[$r],At==="x"?b:At==="y"?h:m);nt.distRatio===0?pr.push(nt.id):nt.id>0&&(Xr.push(nt.id),At==="x"?hn.push([nt.distRatio,0,0]):At==="y"?hn.push([0,nt.distRatio,0]):hn.push([0,0,nt.distRatio]))}else At==="x"?pr=Tt(1,u-1):At==="y"?pr=Tt(1,L-1):pr=Tt(1,S-1);Xr.length>0&&(At==="x"?Ot[Bt]=dt(Et,Xr,qt,rr,hn,Ot[Bt]):At==="y"?Ot[Bt]=Dt(Et,Xr,qt,rr,hn,Ot[Bt]):Ot[Bt]=Xt(Et,Xr,qt,rr,hn,Ot[Bt]),Bt++),pr.length>0&&(At==="x"?Ot[Bt]=Pe(Et,pr,qt,rr,Ot[Bt]):At==="y"?Ot[Bt]=Ve(Et,pr,qt,rr,Ot[Bt]):Ot[Bt]=Qe(Et,pr,qt,rr,Ot[Bt]),Bt++)}var Gt=i.caps[At];Gt.show&&Gt.fill&&(U(Gt.fill),At==="x"?Ot[Bt]=Pe(Et,[0,u-1],qt,rr,Ot[Bt]):At==="y"?Ot[Bt]=Ve(Et,[0,L-1],qt,rr,Ot[Bt]):Ot[Bt]=Qe(Et,[0,S-1],qt,rr,Ot[Bt]),Bt++)}}),_===0&&G(),i._meshX=B,i._meshY=F,i._meshZ=V,i._meshIntensity=Y,i._Xs=b,i._Ys=h,i._Zs=m}return Ut(),i}function o(i,p){var d=i.glplot.gl,y=T({gl:d}),v=new n(i,y,p.uid);return y._trace=v,v.update(p),i.glplot.add(y),v}ne.exports={findNearestOnAxis:a,generateIsoMeshes:f,createIsosurfaceTrace:o}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(g,ne,ae){var T=g("../../lib"),c=g("../../registry"),M=g("./attributes"),A=g("../../components/colorscale/defaults");function e(n,t,r,f){function o(i,p){return T.coerce(n,t,M,i,p)}a(n,t,r,f,o)}function a(n,t,r,f,o){var i=o("isomin"),p=o("isomax");p!=null&&i!==void 0&&i!==null&&i>p&&(t.isomin=null,t.isomax=null);var d=o("x"),y=o("y"),v=o("z"),x=o("value");if(!d||!d.length||!y||!y.length||!v||!v.length||!x||!x.length){t.visible=!1;return}var l=c.getComponentMethod("calendars","handleTraceDefaults");l(n,t,["x","y","z"],f),o("valuehoverformat"),["x","y","z"].forEach(function(b){o(b+"hoverformat");var h="caps."+b,m=o(h+".show");m&&o(h+".fill");var u="slices."+b,L=o(u+".show");L&&(o(u+".fill"),o(u+".locations"))});var _=o("spaceframe.show");_&&o("spaceframe.fill");var s=o("surface.show");s&&(o("surface.count"),o("surface.fill"),o("surface.pattern"));var w=o("contour.show");w&&(o("contour.color"),o("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(b){o(b)}),A(n,t,f,o,{prefix:"",cLetter:"c"}),t._length=null}ne.exports={supplyDefaults:e,supplyIsoDefaults:a}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults").supplyDefaults,calc:g("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:g("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:g("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(g,ne,ae){var T=g("../../components/colorscale/attributes"),c=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=g("../../plots/template_attributes").hovertemplateAttrs,A=g("../surface/attributes"),e=g("../../plots/attributes"),a=g("../../lib/extend").extendFlat;ne.exports=a({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:M({editType:"calc"}),xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},T("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:A.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:a({},A.contours.x.show,{}),color:A.contours.x.color,width:A.contours.x.width,editType:"calc"},lightposition:{x:a({},A.lightposition.x,{dflt:1e5}),y:a({},A.lightposition.y,{dflt:1e5}),z:a({},A.lightposition.z,{dflt:0}),editType:"calc"},lighting:a({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},A.lighting),hoverinfo:a({},e.hoverinfo,{editType:"calc"}),showlegend:a({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1061}],868:[function(g,ne,ae){var T=g("../../components/colorscale/calc");ne.exports=function(M,A){A.intensity&&T(M,A,{vals:A.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(g,ne,ae){var T=g("../../../stackgl_modules").gl_mesh3d,c=g("../../../stackgl_modules").delaunay_triangulate,M=g("../../../stackgl_modules").alpha_shape,A=g("../../../stackgl_modules").convex_hull,e=g("../../lib/gl_format_color").parseColorScale,a=g("../../lib/str2rgbarray"),n=g("../../components/colorscale").extractOpts,t=g("../../plots/gl3d/zip3");function r(x,l,_){this.scene=x,this.uid=_,this.mesh=l,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var f=r.prototype;f.handlePick=function(x){if(x.object===this.mesh){var l=x.index=x.data.index;x.data._cellCenter?x.traceCoordinate=x.data.dataCoordinate:x.traceCoordinate=[this.data.x[l],this.data.y[l],this.data.z[l]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[l]!==void 0?x.textLabel=_[l]:_&&(x.textLabel=_),!0}};function o(x){for(var l=[],_=x.length,s=0;s<_;s++)l[s]=a(x[s]);return l}function i(x,l,_,s){for(var w=[],b=l.length,h=0;h<b;h++)w[h]=x.d2l(l[h],0,s)*_;return w}function p(x){for(var l=[],_=x.length,s=0;s<_;s++)l[s]=Math.round(x[s]);return l}function d(x,l){for(var _=["x","y","z"].indexOf(x),s=[],w=l.length,b=0;b<w;b++)s[b]=[l[b][(_+1)%3],l[b][(_+2)%3]];return c(s)}function y(x,l){for(var _=x.length,s=0;s<_;s++)if(x[s]<=-.5||x[s]>=l-.5)return!1;return!0}f.update=function(x){var l=this.scene,_=l.fullSceneLayout;this.data=x;var s=x.x.length,w=t(i(_.xaxis,x.x,l.dataScale[0],x.xcalendar),i(_.yaxis,x.y,l.dataScale[1],x.ycalendar),i(_.zaxis,x.z,l.dataScale[2],x.zcalendar)),b;if(x.i&&x.j&&x.k){if(x.i.length!==x.j.length||x.j.length!==x.k.length||!y(x.i,s)||!y(x.j,s)||!y(x.k,s))return;b=t(p(x.i),p(x.j),p(x.k))}else x.alphahull===0?b=A(w):x.alphahull>0?b=M(x.alphahull,w):b=d(x.delaunayaxis,w);var h={positions:w,cells:b,lightPosition:[x.lightposition.x,x.lightposition.y,x.lightposition.z],ambient:x.lighting.ambient,diffuse:x.lighting.diffuse,specular:x.lighting.specular,roughness:x.lighting.roughness,fresnel:x.lighting.fresnel,vertexNormalsEpsilon:x.lighting.vertexnormalsepsilon,faceNormalsEpsilon:x.lighting.facenormalsepsilon,opacity:x.opacity,contourEnable:x.contour.show,contourColor:a(x.contour.color).slice(0,3),contourWidth:x.contour.width,useFacetNormals:x.flatshading};if(x.intensity){var m=n(x);this.color="#fff";var u=x.intensitymode;h[u+"Intensity"]=x.intensity,h[u+"IntensityBounds"]=[m.min,m.max],h.colormap=e(x)}else x.vertexcolor?(this.color=x.vertexcolor[0],h.vertexColors=o(x.vertexcolor)):x.facecolor?(this.color=x.facecolor[0],h.cellColors=o(x.facecolor)):(this.color=x.color,h.meshColor=a(x.color));this.mesh.update(h)},f.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function v(x,l){var _=x.glplot.gl,s=T({gl:_}),w=new r(x,s,l.uid);return s._trace=w,w.update(l),x.glplot.add(s),w}ne.exports=v},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(g,ne,ae){var T=g("../../registry"),c=g("../../lib"),M=g("../../components/colorscale/defaults"),A=g("./attributes");ne.exports=function(a,n,t,r){function f(y,v){return c.coerce(a,n,A,y,v)}function o(y){var v=y.map(function(x){var l=f(x);return l&&c.isArrayOrTypedArray(l)?l:null});return v.every(function(x){return x&&x.length===v[0].length})&&v}var i=o(["x","y","z"]);if(!i){n.visible=!1;return}if(o(["i","j","k"]),n.i&&(!n.j||!n.k)||n.j&&(!n.k||!n.i)||n.k&&(!n.i||!n.j)){n.visible=!1;return}var p=T.getComponentMethod("calendars","handleTraceDefaults");p(a,n,["x","y","z"],r),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(y){f(y)});var d=f("contour.show");d&&(f("contour.color"),f("contour.width")),"intensity"in a?(f("intensity"),f("intensitymode"),M(a,n,r,f,{prefix:"",cLetter:"c"})):(n.showscale=!1,"facecolor"in a?f("facecolor"):"vertexcolor"in a?f("vertexcolor"):f("color",t)),f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"),f("zhoverformat"),n._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:g("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:g("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(g,ne,ae){var T=g("../../lib").extendFlat,c=g("../scatter/attributes"),M=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=g("../../components/drawing/attributes").dash,e=g("../../components/fx/attributes"),a=g("../../constants/delta.js"),n=a.INCREASING.COLOR,t=a.DECREASING.COLOR,r=c.line;function f(o){return{line:{color:T({},r.color,{dflt:o}),width:r.width,dash:A,editType:"style"},editType:"style"}}ne.exports={xperiod:c.xperiod,xperiod0:c.xperiod0,xperiodalignment:c.xperiodalignment,xhoverformat:M("x"),yhoverformat:M("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:T({},r.width,{}),dash:T({},A,{}),editType:"style"},increasing:f(n),decreasing:f(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:T({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927}],873:[function(g,ne,ae){var T=g("../../lib"),c=T._,M=g("../../plots/cartesian/axes"),A=g("../../plots/cartesian/align_period"),e=g("../../constants/numerical").BADNUM;function a(f,o){var i=M.getFromId(f,o.xaxis),p=M.getFromId(f,o.yaxis),d=r(f,i,o),y=o._minDiff;o._minDiff=null;var v=o._origX;o._origX=null;var x=o._xcalc;o._xcalc=null;var l=t(f,o,v,x,p,n);return o._extremes[i._id]=M.findExtremes(i,x,{vpad:y/2}),l.length?(T.extendFlat(l[0].t,{wHover:y/2,tickLen:d}),l):[{t:{empty:!0}}]}function n(f,o,i,p){return{o:f,h:o,l:i,c:p}}function t(f,o,i,p,d,y){for(var v=d.makeCalcdata(o,"open"),x=d.makeCalcdata(o,"high"),l=d.makeCalcdata(o,"low"),_=d.makeCalcdata(o,"close"),s=Array.isArray(o.text),w=Array.isArray(o.hovertext),b=!0,h=null,m=!!o.xperiodalignment,u=[],L=0;L<p.length;L++){var S=p[L],k=v[L],P=x[L],z=l[L],I=_[L];if(S!==e&&k!==e&&P!==e&&z!==e&&I!==e){I===k?h!==null&&I!==h&&(b=I>h):b=I>k,h=I;var D=y(k,P,z,I);D.pos=S,D.yc=(k+I)/2,D.i=L,D.dir=b?"increasing":"decreasing",D.x=D.pos,D.y=[z,P],m&&(D.orig_p=i[L]),s&&(D.tx=o.text[L]),w&&(D.htx=o.hovertext[L]),u.push(D)}else u.push({pos:S,empty:!0})}return o._extremes[d._id]=M.findExtremes(d,T.concat(l,x),{padded:!0}),u.length&&(u[0].t={labels:{open:c(f,"open:")+" ",high:c(f,"high:")+" ",low:c(f,"low:")+" ",close:c(f,"close:")+" "}}),u}function r(f,o,i){var p=i._minDiff;if(!p){var d=f._fullData,y=[];p=1/0;var v;for(v=0;v<d.length;v++){var x=d[v];if(x.type==="ohlc"&&x.visible===!0&&x.xaxis===o._id){y.push(x);var l=o.makeCalcdata(x,"x");x._origX=l;var _=A(i,o,"x",l).vals;x._xcalc=_;var s=T.distinctVals(_).minDiff;s&&isFinite(s)&&(p=Math.min(p,s))}}for(p===1/0&&(p=1),v=0;v<y.length;v++)y[v]._minDiff=p}return p*i.tickwidth}ne.exports={calc:a,calcCommon:t}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(g,ne,ae){var T=g("../../lib"),c=g("./ohlc_defaults"),M=g("../scatter/period_defaults"),A=g("./attributes");ne.exports=function(n,t,r,f){function o(p,d){return T.coerce(n,t,A,p,d)}var i=c(n,t,o,f);if(!i){t.visible=!1;return}M(n,t,f,o,{x:!0}),o("xhoverformat"),o("yhoverformat"),o("line.width"),o("line.dash"),e(n,t,o,"increasing"),e(n,t,o,"decreasing"),o("text"),o("hovertext"),o("tickwidth"),f._requestRangeslider[t.xaxis]=!0};function e(a,n,t,r){t(r+".line.color"),t(r+".line.width",n.line.width),t(r+".line.dash",n.line.dash)}},{"../../lib":503,"../scatter/period_defaults":947,"./attributes":872,"./ohlc_defaults":877}],875:[function(g,ne,ae){var T=g("../../plots/cartesian/axes"),c=g("../../lib"),M=g("../../components/fx"),A=g("../../components/color"),e=g("../../lib").fillText,a=g("../../constants/delta.js"),n={increasing:a.INCREASING.SYMBOL,decreasing:a.DECREASING.SYMBOL};function t(i,p,d,y){var v=i.cd,x=v[0].trace;return x.hoverlabel.split?f(i,p,d,y):o(i,p,d,y)}function r(i,p,d,y){var v=i.cd,x=i.xa,l=v[0].trace,_=v[0].t,s=l.type,w=s==="ohlc"?"l":"min",b=s==="ohlc"?"h":"max",h,m,u=_.bPos||0,L=function(K){return K.pos+u-p},S=_.bdPos||_.tickLen,k=_.wHover,P=Math.min(1,S/Math.abs(x.r2c(x.range[1])-x.r2c(x.range[0])));h=i.maxHoverDistance-P,m=i.maxSpikeDistance-P;function z(K){var J=L(K);return M.inbox(J-k,J+k,h)}function I(K){var J=K[w],G=K[b];return J===G||M.inbox(J-d,G-d,h)}function D(K){return(z(K)+I(K))/2}var R=M.getDistanceFunction(y,z,I,D);if(M.getClosest(v,R,i),i.index===!1)return null;var B=v[i.index];if(B.empty)return null;var F=B.dir,V=l[F],Y=V.line.color;return A.opacity(Y)&&V.line.width?i.color=Y:i.color=V.fillcolor,i.x0=x.c2p(B.pos+u-S,!0),i.x1=x.c2p(B.pos+u+S,!0),i.xLabelVal=B.orig_p!==void 0?B.orig_p:B.pos,i.spikeDistance=D(B)*m/h,i.xSpike=x.c2p(B.pos,!0),i}function f(i,p,d,y){var v=i.cd,x=i.ya,l=v[0].trace,_=v[0].t,s=[],w=r(i,p,d,y);if(!w)return[];var b=w.index,h=v[b],m=h.hi||l.hoverinfo,u=m.split("+"),L=m==="all",S=L||u.indexOf("y")!==-1;if(!S)return[];for(var k=["high","open","close","low"],P={},z=0;z<k.length;z++){var I=k[z],D=l[I][w.index],R=x.c2p(D,!0),B;D in P?(B=P[D],B.yLabel+="<br>"+_.labels[I]+T.hoverLabelText(x,D,l.yhoverformat)):(B=c.extendFlat({},w),B.y0=B.y1=R,B.yLabelVal=D,B.yLabel=_.labels[I]+T.hoverLabelText(x,D,l.yhoverformat),B.name="",s.push(B),P[D]=B)}return s}function o(i,p,d,y){var v=i.cd,x=i.ya,l=v[0].trace,_=v[0].t,s=r(i,p,d,y);if(!s)return[];var w=s.index,b=v[w],h=s.index=b.i,m=b.dir;function u(D){return _.labels[D]+T.hoverLabelText(x,l[D][h],l.yhoverformat)}var L=b.hi||l.hoverinfo,S=L.split("+"),k=L==="all",P=k||S.indexOf("y")!==-1,z=k||S.indexOf("text")!==-1,I=P?[u("open"),u("high"),u("low"),u("close")+"  "+n[m]]:[];return z&&e(b,l,I),s.extraText=I.join("<br>"),s.y0=s.y1=x.c2p(b.yc,!0),[s]}ne.exports={hoverPoints:t,hoverSplit:f,hoverOnPoints:o}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(g,ne,ae){ne.exports={moduleType:"trace",name:"ohlc",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc").calc,plot:g("./plot"),style:g("./style"),hoverPoints:g("./hover").hoverPoints,selectPoints:g("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(g,ne,ae){var T=g("../../registry"),c=g("../../lib");ne.exports=function(A,e,a,n){var t=a("x"),r=a("open"),f=a("high"),o=a("low"),i=a("close");a("hoverlabel.split");var p=T.getComponentMethod("calendars","handleTraceDefaults");if(p(A,e,["x"],n),!!(r&&f&&o&&i)){var d=Math.min(r.length,f.length,o.length,i.length);return t&&(d=Math.min(d,c.minRowLength(t))),e._length=d,d}}},{"../../lib":503,"../../registry":638}],878:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib");ne.exports=function(A,e,a,n){var t=e.yaxis,r=e.xaxis,f=!!r.rangebreaks;c.makeTraceGroups(n,a,"trace ohlc").each(function(o){var i=T.select(this),p=o[0],d=p.t,y=p.trace;if(y.visible!==!0||d.empty){i.remove();return}var v=d.tickLen,x=i.selectAll("path").data(c.identity);x.enter().append("path"),x.exit().remove(),x.attr("d",function(l){if(l.empty)return"M0,0Z";var _=r.c2p(l.pos-v,!0),s=r.c2p(l.pos+v,!0),w=f?(_+s)/2:r.c2p(l.pos,!0),b=t.c2p(l.o,!0),h=t.c2p(l.h,!0),m=t.c2p(l.l,!0),u=t.c2p(l.c,!0);return"M"+_+","+b+"H"+w+"M"+w+","+h+"V"+m+"M"+s+","+u+"H"+w})})}},{"../../lib":503,"@plotly/d3":58}],879:[function(g,ne,ae){ne.exports=function(c,M){var A=c.cd,e=c.xaxis,a=c.yaxis,n=[],t,r=A[0].t.bPos||0;if(M===!1)for(t=0;t<A.length;t++)A[t].selected=0;else for(t=0;t<A.length;t++){var f=A[t];M.contains([e.c2p(f.pos+r),a.c2p(f.yc)],null,f.i,c)?(n.push({pointNumber:f.i,x:e.c2d(f.pos),y:a.c2d(f.yc)}),f.selected=1):f.selected=0}return n}},{}],880:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/drawing"),M=g("../../components/color");ne.exports=function(e,a,n){var t=n||T.select(e).selectAll("g.ohlclayer").selectAll("g.trace");t.style("opacity",function(r){return r[0].trace.opacity}),t.each(function(r){var f=r[0].trace;T.select(this).selectAll("path").each(function(o){if(!o.empty){var i=f[o.dir].line;T.select(this).style("fill","none").call(M.stroke,i.color).call(c.dashLine,i.dash,i.width).style("opacity",f.selectedpoints&&!o.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(g,ne,ae){var T=g("../../lib/extend").extendFlat,c=g("../../plots/attributes"),M=g("../../plots/font_attributes"),A=g("../../components/colorscale/attributes"),e=g("../../plots/template_attributes").hovertemplateAttrs,a=g("../../plots/domain").attributes,n=T({editType:"calc"},A("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});ne.exports={domain:a({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:T({},c.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:M({editType:"calc"}),tickfont:M({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:n,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(g,ne,ae){var T=g("../../plots/get_data").getModuleCalcData,c=g("./plot"),M="parcats";ae.name=M,ae.plot=function(A,e,a,n){var t=T(A.calcdata,M);if(t.length){var r=t[0];c(A,r,a,n)}},ae.clean=function(A,e,a,n){var t=n._has&&n._has("parcats"),r=e._has&&e._has("parcats");t&&!r&&n._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(g,ne,ae){var T=g("../../lib/gup").wrap,c=g("../../components/colorscale/helpers").hasColorscale,M=g("../../components/colorscale/calc"),A=g("../../lib/filter_unique.js"),e=g("../../components/drawing"),a=g("../../lib"),n=g("fast-isnumeric");ne.exports=function(_,s){var w=a.filterVisible(s.dimensions);if(w.length===0)return[];var b=w.map(function(se){var oe;if(se.categoryorder==="trace")oe=null;else if(se.categoryorder==="array")oe=se.categoryarray;else{oe=A(se.values);for(var N=!0,U=0;U<oe.length;U++)if(!n(oe[U])){N=!1;break}oe.sort(N?a.sorterAsc:void 0),se.categoryorder==="category descending"&&(oe=oe.reverse())}return d(se.values,oe)}),h,m,u;a.isArrayOrTypedArray(s.counts)?h=s.counts:h=[s.counts],y(w),w.forEach(function(se,oe){v(se,b[oe])});var L=s.line,S;L?(c(s,"line")&&M(_,s,{vals:s.line.color,containerStr:"line",cLetter:"c"}),S=e.tryColorscale(L)):S=a.identity;function k(se){var oe,N;return a.isArrayOrTypedArray(L.color)?(oe=L.color[se%L.color.length],N=oe):oe=L.color,{color:S(oe),rawColor:N}}var P=w[0].values.length,z={},I=b.map(function(se){return se.inds});u=0;var D,R;for(D=0;D<P;D++){var B=[];for(R=0;R<I.length;R++)B.push(I[R][D]);m=h[D%h.length],u+=m;var F=k(D),V=B+"-"+F.rawColor;z[V]===void 0&&(z[V]=i(B,F.color,F.rawColor)),p(z[V],D,m)}var Y=w.map(function(se,oe){return r(oe,se._index,se._displayindex,se.label,u)});for(D=0;D<P;D++)for(m=h[D%h.length],R=0;R<Y.length;R++){var K=Y[R].containerInd,J=b[R].inds[D],G=Y[R].categories;if(G[J]===void 0){var Z=s.dimensions[K]._categoryarray[J],re=s.dimensions[K]._ticktext[J];G[J]=f(R,J,Z,re)}o(G[J],D,m)}return T(t(Y,z,u))};function t(l,_,s){var w=l.map(function(b){return b.categories.length}).reduce(function(b,h){return Math.max(b,h)});return{dimensions:l,paths:_,trace:void 0,maxCats:w,count:s}}function r(l,_,s,w,b){return{dimensionInd:l,containerInd:_,displayInd:s,dimensionLabel:w,count:b,categories:[],dragX:null}}function f(l,_,s,w){return{dimensionInd:l,categoryInd:_,categoryValue:s,displayInd:_,categoryLabel:w,valueInds:[],count:0,dragY:null}}function o(l,_,s){l.valueInds.push(_),l.count+=s}function i(l,_,s){return{categoryInds:l,color:_,rawColor:s,valueInds:[],count:0}}function p(l,_,s){l.valueInds.push(_),l.count+=s}function d(l,_){_==null?_=[]:_=_.map(function(S){return S});var s={},w={},b=[];_.forEach(function(S,k){s[S]=0,w[S]=k});for(var h=0;h<l.length;h++){var m=l[h],u;s[m]===void 0?(s[m]=1,u=_.push(m)-1,w[m]=u):(s[m]++,u=w[m]),b.push(u)}var L=_.map(function(S){return s[S]});return{uniqueValues:_,uniqueCounts:L,inds:b}}function y(l){var _=l.map(function(w){return w.displayindex}),s;if(x(_))for(s=0;s<l.length;s++)l[s]._displayindex=l[s].displayindex;else for(s=0;s<l.length;s++)l[s]._displayindex=s}function v(l,_){l._categoryarray=_.uniqueValues,l.ticktext===null||l.ticktext===void 0?l._ticktext=[]:l._ticktext=l.ticktext.slice();for(var s=l._ticktext.length;s<_.uniqueValues.length;s++)l._ticktext.push(_.uniqueValues[s])}function x(l){for(var _=new Array(l.length),s=0;s<l.length;s++){if(l[s]<0||l[s]>=l.length||_[l[s]]!==void 0)return!1;_[l[s]]=!0}return!0}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/colorscale/helpers").hasColorscale,M=g("../../components/colorscale/defaults"),A=g("../../plots/domain").defaults,e=g("../../plots/array_container_defaults"),a=g("./attributes"),n=g("../parcoords/merge_length");function t(f,o,i,p,d){d("line.shape"),d("line.hovertemplate");var y=d("line.color",p.colorway[0]);if(c(f,"line")&&T.isArrayOrTypedArray(y)){if(y.length)return d("line.colorscale"),M(f,o,p,d,{prefix:"line.",cLetter:"c"}),y.length;o.line.color=i}return 1/0}function r(f,o){function i(_,s){return T.coerce(f,o,a.dimensions,_,s)}var p=i("values"),d=i("visible");if(p&&p.length||(d=o.visible=!1),d){i("label"),i("displayindex",o._index);var y=f.categoryarray,v=Array.isArray(y)&&y.length>0,x;v&&(x="array");var l=i("categoryorder",x);l==="array"?(i("categoryarray"),i("ticktext")):(delete f.categoryarray,delete f.ticktext),!v&&l==="array"&&(o.categoryorder="trace")}}ne.exports=function(o,i,p,d){function y(s,w){return T.coerce(o,i,a,s,w)}var v=e(o,i,{name:"dimensions",handleItemDefaults:r}),x=t(o,i,p,d,y);A(i,d,y),(!Array.isArray(v)||!v.length)&&(i.visible=!1),n(i,v,"values",x),y("hoveron"),y("hovertemplate"),y("arrangement"),y("bundlecolors"),y("sortpaths"),y("counts");var l={family:d.font.family,size:Math.round(d.font.size),color:d.font.color};T.coerceFont(y,"labelfont",l);var _={family:d.font.family,size:Math.round(d.font.size/1.2),color:d.font.color};T.coerceFont(y,"tickfont",_)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":898,"./attributes":881}],885:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),plot:g("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:g("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("d3-interpolate").interpolateNumber,M=g("../../plot_api/plot_api"),A=g("../../components/fx"),e=g("../../lib"),a=e.strTranslate,n=g("../../components/drawing"),t=g("tinycolor2"),r=g("../../lib/svg_text_utils");function f(U,q,Q,W){var X=U.map(Z.bind(0,q,Q)),te=W.selectAll("g.parcatslayer").data([null]);te.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var ee=te.selectAll("g.trace.parcats").data(X,o),ie=ee.enter().append("g").attr("class","trace parcats");ee.attr("transform",function(xe){return a(xe.x,xe.y)}),ie.append("g").attr("class","paths");var le=ee.select("g.paths"),ye=le.selectAll("path.path").data(function(xe){return xe.paths},o);ye.attr("fill",function(xe){return xe.model.color});var ue=ye.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(xe){return xe.model.color}).attr("fill-opacity",0);_(ue),ye.attr("d",function(xe){return xe.svgD}),ue.empty()||ye.sort(p),ye.exit().remove(),ye.on("mouseover",d).on("mouseout",y).on("click",l),ie.append("g").attr("class","dimensions");var pe=ee.select("g.dimensions"),ge=pe.selectAll("g.dimension").data(function(xe){return xe.dimensions},o);ge.enter().append("g").attr("class","dimension"),ge.attr("transform",function(xe){return a(xe.x,0)}),ge.exit().remove();var Te=ge.selectAll("g.category").data(function(xe){return xe.categories},o),_e=Te.enter().append("g").attr("class","category");Te.attr("transform",function(xe){return a(0,xe.y)}),_e.append("rect").attr("class","catrect").attr("pointer-events","none"),Te.select("rect.catrect").attr("fill","none").attr("width",function(xe){return xe.width}).attr("height",function(xe){return xe.height}),b(_e);var De=Te.selectAll("rect.bandrect").data(function(xe){return xe.bands},o);De.each(function(){e.raiseToTop(this)}),De.attr("fill",function(xe){return xe.color});var Oe=De.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(xe){return xe.color}).attr("fill-opacity",0);De.attr("fill",function(xe){return xe.color}).attr("width",function(xe){return xe.width}).attr("height",function(xe){return xe.height}).attr("y",function(xe){return xe.y}).attr("cursor",function(xe){return xe.parcatsViewModel.arrangement==="fixed"?"default":xe.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),m(Oe),De.exit().remove(),_e.append("text").attr("class","catlabel").attr("pointer-events","none");var Ue=q._fullLayout.paper_bgcolor;Te.select("text.catlabel").attr("text-anchor",function(xe){return i(xe)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(Ue)).style("fill","rgb(0, 0, 0)").attr("x",function(xe){return i(xe)?xe.width+5:-5}).attr("y",function(xe){return xe.height/2}).text(function(xe){return xe.model.categoryLabel}).each(function(xe){n.font(T.select(this),xe.parcatsViewModel.categorylabelfont),r.convertToTspans(T.select(this),q)}),_e.append("text").attr("class","dimlabel"),Te.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(xe){return xe.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(xe){return xe.width/2}).attr("y",-5).text(function(xe,Pe){return Pe===0?xe.parcatsViewModel.model.dimensions[xe.model.dimensionInd].dimensionLabel:null}).each(function(xe){n.font(T.select(this),xe.parcatsViewModel.labelfont)}),Te.selectAll("rect.bandrect").on("mouseover",R).on("mouseout",B),Te.exit().remove(),ge.call(T.behavior.drag().origin(function(xe){return{x:xe.x,y:0}}).on("dragstart",F).on("drag",V).on("dragend",Y)),ee.each(function(xe){xe.traceSelection=T.select(this),xe.pathSelection=T.select(this).selectAll("g.paths").selectAll("path.path"),xe.dimensionSelection=T.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ee.exit().remove()}ne.exports=function(U,q,Q,W){f(Q,U,W,q)};function o(U){return U.key}function i(U){var q=U.parcatsViewModel.dimensions.length,Q=U.parcatsViewModel.dimensions[q-1].model.dimensionInd;return U.model.dimensionInd===Q}function p(U,q){return U.model.rawColor>q.model.rawColor?1:U.model.rawColor<q.model.rawColor?-1:0}function d(U){if(!U.parcatsViewModel.dragDimension&&U.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){e.raiseToTop(this),s(T.select(this));var q=v(U),Q=x(U);if(U.parcatsViewModel.graphDiv.emit("plotly_hover",{points:q,event:T.event,constraints:Q}),U.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var W=T.mouse(this)[0],X=U.parcatsViewModel.graphDiv,te=U.parcatsViewModel.trace,ee=X._fullLayout,ie=ee._paperdiv.node().getBoundingClientRect(),le=U.parcatsViewModel.graphDiv.getBoundingClientRect(),ye,ue,pe;for(pe=0;pe<U.leftXs.length-1;pe++)if(U.leftXs[pe]+U.dimWidths[pe]-2<=W&&W<=U.leftXs[pe+1]+2){var ge=U.parcatsViewModel.dimensions[pe],Te=U.parcatsViewModel.dimensions[pe+1];ye=(ge.x+ge.width+Te.x)/2,ue=(U.topYs[pe]+U.topYs[pe+1]+U.height)/2;break}var _e=U.parcatsViewModel.x+ye,De=U.parcatsViewModel.y+ue,Oe=t.mostReadable(U.model.color,["black","white"]),Ue=U.model.count,xe=Ue/U.parcatsViewModel.model.count,Pe={countLabel:Ue,probabilityLabel:xe.toFixed(3)},Ve=[];U.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ve.push(["Count:",Pe.countLabel].join(" ")),U.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ve.push(["P:",Pe.probabilityLabel].join(" "));var Qe=Ve.join("<br>"),Fe=T.mouse(X)[0];A.loneHover({trace:te,x:_e-ie.left+le.left,y:De-ie.top+le.top,text:Qe,color:U.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Oe,idealAlign:Fe<_e?"right":"left",hovertemplate:(te.line||{}).hovertemplate,hovertemplateLabels:Pe,eventData:[{data:te._input,fullData:te,count:Ue,probability:xe}]},{container:ee._hoverlayer.node(),outerContainer:ee._paper.node(),gd:X})}}}function y(U){if(!U.parcatsViewModel.dragDimension&&(_(T.select(this)),A.loneUnhover(U.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),U.parcatsViewModel.pathSelection.sort(p),U.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var q=v(U),Q=x(U);U.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:q,event:T.event,constraints:Q})}}function v(U){for(var q=[],Q=K(U.parcatsViewModel),W=0;W<U.model.valueInds.length;W++){var X=U.model.valueInds[W];q.push({curveNumber:Q,pointNumber:X})}return q}function x(U){for(var q={},Q=U.parcatsViewModel.model.dimensions,W=0;W<Q.length;W++){var X=Q[W],te=X.categories[U.model.categoryInds[W]];q[X.containerInd]=te.categoryValue}return U.model.rawColor!==void 0&&(q.color=U.model.rawColor),q}function l(U){if(U.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var q=v(U),Q=x(U);U.parcatsViewModel.graphDiv.emit("plotly_click",{points:q,event:T.event,constraints:Q})}}function _(U){U.attr("fill",function(q){return q.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function s(U){U.attr("fill-opacity",.8).attr("stroke",function(q){return t.mostReadable(q.model.color,["black","white"])}).attr("stroke-width",.3)}function w(U){U.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function b(U){U.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function h(U){U.attr("stroke","black").attr("stroke-width",1.5)}function m(U){U.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function u(U){var q=U.parcatsViewModel.pathSelection,Q=U.categoryViewModel.model.dimensionInd,W=U.categoryViewModel.model.categoryInd;return q.filter(function(X){return X.model.categoryInds[Q]===W&&X.model.color===U.color})}function L(U){var q=T.select(U.parentNode).selectAll("rect.bandrect");q.each(function(Q){var W=u(Q);s(W),W.each(function(){e.raiseToTop(this)})}),w(T.select(U.parentNode))}function S(U){var q=T.select(U).datum(),Q=u(q);s(Q),Q.each(function(){e.raiseToTop(this)}),T.select(U.parentNode).selectAll("rect.bandrect").filter(function(W){return W.color===q.color}).each(function(){e.raiseToTop(this),h(T.select(this))})}function k(U,q,Q){var W=T.select(U).datum(),X=W.categoryViewModel.model,te=W.parcatsViewModel.graphDiv,ee=T.select(U.parentNode).selectAll("rect.bandrect"),ie=[];ee.each(function(ye){var ue=u(ye);ue.each(function(pe){Array.prototype.push.apply(ie,v(pe))})});var le={};le[X.dimensionInd]=X.categoryValue,te.emit(q,{points:ie,event:Q,constraints:le})}function P(U,q,Q){var W=T.select(U).datum(),X=W.categoryViewModel.model,te=W.parcatsViewModel.graphDiv,ee=u(W),ie=[];ee.each(function(ye){Array.prototype.push.apply(ie,v(ye))});var le={};le[X.dimensionInd]=X.categoryValue,W.rawColor!==void 0&&(le.color=W.rawColor),te.emit(q,{points:ie,event:Q,constraints:le})}function z(U,q,Q){U._fullLayout._calcInverseTransform(U);var W=U._fullLayout._invScaleX,X=U._fullLayout._invScaleY,te=T.select(Q.parentNode).select("rect.catrect"),ee=te.node().getBoundingClientRect(),ie=te.datum(),le=ie.parcatsViewModel,ye=le.model.dimensions[ie.model.dimensionInd],ue=le.trace,pe=ee.top+ee.height/2,ge,Te;le.dimensions.length>1&&ye.displayInd===le.dimensions.length-1?(ge=ee.left,Te="left"):(ge=ee.left+ee.width,Te="right");var _e=ie.model.count,De=ie.model.categoryLabel,Oe=_e/ie.parcatsViewModel.model.count,Ue={countLabel:_e,categoryLabel:De,probabilityLabel:Oe.toFixed(3)},xe=[];ie.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&xe.push(["Count:",Ue.countLabel].join(" ")),ie.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&xe.push(["P("+Ue.categoryLabel+"):",Ue.probabilityLabel].join(" "));var Pe=xe.join("<br>");return{trace:ue,x:W*(ge-q.left),y:X*(pe-q.top),text:Pe,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Te,hovertemplate:ue.hovertemplate,hovertemplateLabels:Ue,eventData:[{data:ue._input,fullData:ue,count:_e,category:De,probability:Oe}]}}function I(U,q,Q){var W=[];return T.select(Q.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var X=this;W.push(z(U,q,X))}),W}function D(U,q,Q){U._fullLayout._calcInverseTransform(U);var W=U._fullLayout._invScaleX,X=U._fullLayout._invScaleY,te=Q.getBoundingClientRect(),ee=T.select(Q).datum(),ie=ee.categoryViewModel,le=ie.parcatsViewModel,ye=le.model.dimensions[ie.model.dimensionInd],ue=le.trace,pe=te.y+te.height/2,ge,Te;le.dimensions.length>1&&ye.displayInd===le.dimensions.length-1?(ge=te.left,Te="left"):(ge=te.left+te.width,Te="right");var _e=ie.model.categoryLabel,De=ee.parcatsViewModel.model.count,Oe=0;ee.categoryViewModel.bands.forEach(function(Dt){Dt.color===ee.color&&(Oe+=Dt.count)});var Ue=ie.model.count,xe=0;le.pathSelection.each(function(Dt){Dt.model.color===ee.color&&(xe+=Dt.model.count)});var Pe=Oe/De,Ve=Oe/xe,Qe=Oe/Ue,Fe={countLabel:De,categoryLabel:_e,probabilityLabel:Pe.toFixed(3)},Le=[];ie.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Le.push(["Count:",Fe.countLabel].join(" ")),ie.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Le.push("P(color \u2229 "+_e+"): "+Fe.probabilityLabel),Le.push("P("+_e+" | color): "+Ve.toFixed(3)),Le.push("P(color | "+_e+"): "+Qe.toFixed(3)));var Ne=Le.join("<br>"),dt=t.mostReadable(ee.color,["black","white"]);return{trace:ue,x:W*(ge-q.left),y:X*(pe-q.top),text:Ne,color:ee.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:dt,fontSize:10,idealAlign:Te,hovertemplate:ue.hovertemplate,hovertemplateLabels:Fe,eventData:[{data:ue._input,fullData:ue,category:_e,count:De,probability:Pe,categorycount:Ue,colorcount:xe,bandcolorcount:Oe}]}}function R(U){if(!U.parcatsViewModel.dragDimension&&U.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var q=T.mouse(this)[1];if(q<-1)return;var Q=U.parcatsViewModel.graphDiv,W=Q._fullLayout,X=W._paperdiv.node().getBoundingClientRect(),te=U.parcatsViewModel.hoveron,ee=this;if(te==="color"?(S(ee),P(ee,"plotly_hover",T.event)):(L(ee),k(ee,"plotly_hover",T.event)),U.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ie;te==="category"?ie=z(Q,X,ee):te==="color"?ie=D(Q,X,ee):te==="dimension"&&(ie=I(Q,X,ee)),ie&&A.loneHover(ie,{container:W._hoverlayer.node(),outerContainer:W._paper.node(),gd:Q})}}}function B(U){var q=U.parcatsViewModel;if(!q.dragDimension&&(_(q.pathSelection),b(q.dimensionSelection.selectAll("g.category")),m(q.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),A.loneUnhover(q.graphDiv._fullLayout._hoverlayer.node()),q.pathSelection.sort(p),q.hoverinfoItems.indexOf("skip")===-1)){var Q=U.parcatsViewModel.hoveron,W=this;Q==="color"?P(W,"plotly_unhover",T.event):k(W,"plotly_unhover",T.event)}}function F(U){U.parcatsViewModel.arrangement!=="fixed"&&(U.dragDimensionDisplayInd=U.model.displayInd,U.initialDragDimensionDisplayInds=U.parcatsViewModel.model.dimensions.map(function(q){return q.displayInd}),U.dragHasMoved=!1,U.dragCategoryDisplayInd=null,T.select(this).selectAll("g.category").select("rect.catrect").each(function(q){var Q=T.mouse(this)[0],W=T.mouse(this)[1];-2<=Q&&Q<=q.width+2&&-2<=W&&W<=q.height+2&&(U.dragCategoryDisplayInd=q.model.displayInd,U.initialDragCategoryDisplayInds=U.model.categories.map(function(X){return X.displayInd}),q.model.dragY=q.y,e.raiseToTop(this.parentNode),T.select(this.parentNode).selectAll("rect.bandrect").each(function(X){X.y<W&&W<=X.y+X.height&&(U.potentialClickBand=this)}))}),U.parcatsViewModel.dragDimension=U,A.loneUnhover(U.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function V(U){if(U.parcatsViewModel.arrangement!=="fixed"&&(U.dragHasMoved=!0,U.dragDimensionDisplayInd!==null)){var q=U.dragDimensionDisplayInd,Q=q-1,W=q+1,X=U.parcatsViewModel.dimensions[q];if(U.dragCategoryDisplayInd!==null){var te=X.categories[U.dragCategoryDisplayInd];te.model.dragY+=T.event.dy;var ee=te.model.dragY,ie=te.model.displayInd,le=X.categories,ye=le[ie-1],ue=le[ie+1];ye!==void 0&&ee<ye.y+ye.height/2&&(te.model.displayInd=ye.model.displayInd,ye.model.displayInd=ie),ue!==void 0&&ee+te.height>ue.y+ue.height/2&&(te.model.displayInd=ue.model.displayInd,ue.model.displayInd=ie),U.dragCategoryDisplayInd=te.model.displayInd}if(U.dragCategoryDisplayInd===null||U.parcatsViewModel.arrangement==="freeform"){X.model.dragX=T.event.x;var pe=U.parcatsViewModel.dimensions[Q],ge=U.parcatsViewModel.dimensions[W];pe!==void 0&&X.model.dragX<pe.x+pe.width&&(X.model.displayInd=pe.model.displayInd,pe.model.displayInd=q),ge!==void 0&&X.model.dragX+X.width>ge.x&&(X.model.displayInd=ge.model.displayInd,ge.model.displayInd=U.dragDimensionDisplayInd),U.dragDimensionDisplayInd=X.model.displayInd}oe(U.parcatsViewModel),se(U.parcatsViewModel),G(U.parcatsViewModel),J(U.parcatsViewModel)}}function Y(U){if(U.parcatsViewModel.arrangement!=="fixed"&&U.dragDimensionDisplayInd!==null){T.select(this).selectAll("text").attr("font-weight","normal");var q={},Q=K(U.parcatsViewModel),W=U.parcatsViewModel.model.dimensions.map(function(ge){return ge.displayInd}),X=U.initialDragDimensionDisplayInds.some(function(ge,Te){return ge!==W[Te]});X&&W.forEach(function(ge,Te){var _e=U.parcatsViewModel.model.dimensions[Te].containerInd;q["dimensions["+_e+"].displayindex"]=ge});var te=!1;if(U.dragCategoryDisplayInd!==null){var ee=U.model.categories.map(function(ge){return ge.displayInd});if(te=U.initialDragCategoryDisplayInds.some(function(ge,Te){return ge!==ee[Te]}),te){var ie=U.model.categories.slice().sort(function(ge,Te){return ge.displayInd-Te.displayInd}),le=ie.map(function(ge){return ge.categoryValue}),ye=ie.map(function(ge){return ge.categoryLabel});q["dimensions["+U.model.containerInd+"].categoryarray"]=[le],q["dimensions["+U.model.containerInd+"].ticktext"]=[ye],q["dimensions["+U.model.containerInd+"].categoryorder"]="array"}}if(U.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!U.dragHasMoved&&U.potentialClickBand&&(U.parcatsViewModel.hoveron==="color"?P(U.potentialClickBand,"plotly_click",T.event.sourceEvent):k(U.potentialClickBand,"plotly_click",T.event.sourceEvent)),U.model.dragX=null,U.dragCategoryDisplayInd!==null){var ue=U.parcatsViewModel.dimensions[U.dragDimensionDisplayInd].categories[U.dragCategoryDisplayInd];ue.model.dragY=null,U.dragCategoryDisplayInd=null}U.dragDimensionDisplayInd=null,U.parcatsViewModel.dragDimension=null,U.dragHasMoved=null,U.potentialClickBand=null,oe(U.parcatsViewModel),se(U.parcatsViewModel);var pe=T.transition().duration(300).ease("cubic-in-out");pe.each(function(){G(U.parcatsViewModel,!0),J(U.parcatsViewModel,!0)}).each("end",function(){(X||te)&&M.restyle(U.parcatsViewModel.graphDiv,q,[Q])})}}function K(U){for(var q,Q=U.graphDiv._fullData,W=0;W<Q.length;W++)if(U.key===Q[W].uid){q=W;break}return q}function J(U,q){q===void 0&&(q=!1);function Q(W){return q?W.transition():W}U.pathSelection.data(function(W){return W.paths},o),Q(U.pathSelection).attr("d",function(W){return W.svgD})}function G(U,q){q===void 0&&(q=!1);function Q(le){return q?le.transition():le}U.dimensionSelection.data(function(le){return le.dimensions},o);var W=U.dimensionSelection.selectAll("g.category").data(function(le){return le.categories},o);Q(U.dimensionSelection).attr("transform",function(le){return a(le.x,0)}),Q(W).attr("transform",function(le){return a(0,le.y)});var X=W.select(".dimlabel");X.text(function(le,ye){return ye===0?le.parcatsViewModel.model.dimensions[le.model.dimensionInd].dimensionLabel:null});var te=W.select(".catlabel");te.attr("text-anchor",function(le){return i(le)?"start":"end"}).attr("x",function(le){return i(le)?le.width+5:-5}).each(function(le){var ye,ue;i(le)?(ye=le.width+5,ue="start"):(ye=-5,ue="end"),T.select(this).selectAll("tspan").attr("x",ye).attr("text-anchor",ue)});var ee=W.selectAll("rect.bandrect").data(function(le){return le.bands},o),ie=ee.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(le){return le.color}).attr("fill-opacity",0);ee.attr("fill",function(le){return le.color}).attr("width",function(le){return le.width}).attr("height",function(le){return le.height}).attr("y",function(le){return le.y}),m(ie),ee.each(function(){e.raiseToTop(this)}),ee.exit().remove()}function Z(U,q,Q){var W=Q[0],X=q.margin||{l:80,r:80,t:100,b:80},te=W.trace,ee=te.domain,ie=q.width,le=q.height,ye=Math.floor(ie*(ee.x[1]-ee.x[0])),ue=Math.floor(le*(ee.y[1]-ee.y[0])),pe=ee.x[0]*ie+X.l,ge=q.height-ee.y[1]*q.height+X.t,Te=te.line.shape,_e;te.hoverinfo==="all"?_e=["count","probability"]:_e=(te.hoverinfo||"").split("+");var De={trace:te,key:te.uid,model:W,x:pe,y:ge,width:ye,height:ue,hoveron:te.hoveron,hoverinfoItems:_e,arrangement:te.arrangement,bundlecolors:te.bundlecolors,sortpaths:te.sortpaths,labelfont:te.labelfont,categorylabelfont:te.tickfont,pathShape:Te,dragDimension:null,margin:X,paths:[],dimensions:[],graphDiv:U,traceSelection:null,pathSelection:null,dimensionSelection:null};return W.dimensions&&(oe(De),se(De)),De}function re(U,q,Q,W,X){var te=[],ee=[],ie,le;for(le=0;le<Q.length-1;le++)ie=c(Q[le]+U[le],U[le+1]),te.push(ie(X)),ee.push(ie(1-X));var ye="M "+U[0]+","+q[0];for(ye+="l"+Q[0]+",0 ",le=1;le<Q.length;le++)ye+="C"+te[le-1]+","+q[le-1]+" "+ee[le-1]+","+q[le]+" "+U[le]+","+q[le],ye+="l"+Q[le]+",0 ";for(ye+="l0,"+W+" ",ye+="l -"+Q[Q.length-1]+",0 ",le=Q.length-2;le>=0;le--)ye+="C"+ee[le]+","+(q[le+1]+W)+" "+te[le]+","+(q[le]+W)+" "+(U[le]+Q[le])+","+(q[le]+W),ye+="l-"+Q[le]+",0 ";return ye+="Z",ye}function se(U){var q=U.dimensions,Q=U.model,W=q.map(function(zt){return zt.categories.map(function(Ut){return Ut.y})}),X=U.model.dimensions.map(function(zt){return zt.categories.map(function(Ut){return Ut.displayInd})}),te=U.model.dimensions.map(function(zt){return zt.displayInd}),ee=U.dimensions.map(function(zt){return zt.model.dimensionInd}),ie=q.map(function(zt){return zt.x}),le=q.map(function(zt){return zt.width}),ye=[];for(var ue in Q.paths)Q.paths.hasOwnProperty(ue)&&ye.push(Q.paths[ue]);function pe(zt){var Ut=zt.categoryInds.map(function(Mt,rt){return X[rt][Mt]}),Et=ee.map(function(Mt){return Ut[Mt]});return Et}ye.sort(function(zt,Ut){var Et=pe(zt),Mt=pe(Ut);return U.sortpaths==="backward"&&(Et.reverse(),Mt.reverse()),Et.push(zt.valueInds[0]),Mt.push(Ut.valueInds[0]),U.bundlecolors&&(Et.unshift(zt.rawColor),Mt.unshift(Ut.rawColor)),Et<Mt?-1:Et>Mt?1:0});for(var ge=new Array(ye.length),Te=q[0].model.count,_e=q[0].categories.map(function(zt){return zt.height}).reduce(function(zt,Ut){return zt+Ut}),De=0;De<ye.length;De++){var Oe=ye[De],Ue;Te>0?Ue=_e*(Oe.count/Te):Ue=0;for(var xe=new Array(W.length),Pe=0;Pe<Oe.categoryInds.length;Pe++){var Ve=Oe.categoryInds[Pe],Qe=X[Pe][Ve],Fe=te[Pe];xe[Fe]=W[Fe][Qe],W[Fe][Qe]+=Ue;var Le=U.dimensions[Fe].categories[Qe],Ne=Le.bands.length,dt=Le.bands[Ne-1];if(dt===void 0||Oe.rawColor!==dt.rawColor){var Dt=dt===void 0?0:dt.y+dt.height;Le.bands.push({key:Dt,color:Oe.color,rawColor:Oe.rawColor,height:Ue,width:Le.width,count:Oe.count,y:Dt,categoryViewModel:Le,parcatsViewModel:U})}else{var Xt=Le.bands[Ne-1];Xt.height+=Ue,Xt.count+=Oe.count}}var Tt;U.pathShape==="hspline"?Tt=re(ie,xe,le,Ue,.5):Tt=re(ie,xe,le,Ue,0),ge[De]={key:Oe.valueInds[0],model:Oe,height:Ue,leftXs:ie,topYs:xe,dimWidths:le,svgD:Tt,parcatsViewModel:U}}U.paths=ge}function oe(U){var q=U.model.dimensions.map(function(ee){return{displayInd:ee.displayInd,dimensionInd:ee.dimensionInd}});q.sort(function(ee,ie){return ee.displayInd-ie.displayInd});var Q=[];for(var W in q){var X=q[W].dimensionInd,te=U.model.dimensions[X];Q.push(N(U,te))}U.dimensions=Q}function N(U,q){var Q=40,W=16,X=U.model.dimensions.length,te=q.displayInd,ee,ie,le;X>1?ee=(U.width-2*Q-W)/(X-1):ee=0,ie=Q,le=ie+ee*te;var ye=[],ue=U.model.maxCats,pe=q.categories.length,ge=8,Te=q.count,_e=U.height-ge*(ue-1),De,Oe,Ue,xe,Pe,Ve=(ue-pe)*ge/2,Qe=q.categories.map(function(Fe){return{displayInd:Fe.displayInd,categoryInd:Fe.categoryInd}});for(Qe.sort(function(Fe,Le){return Fe.displayInd-Le.displayInd}),Pe=0;Pe<pe;Pe++)xe=Qe[Pe].categoryInd,Oe=q.categories[xe],Te>0?De=Oe.count/Te*_e:De=0,Ue={key:Oe.valueInds[0],model:Oe,width:W,height:De,y:Oe.dragY!==null?Oe.dragY:Ve,bands:[],parcatsViewModel:U},Ve=Ve+De+ge,ye.push(Ue);return{key:q.dimensionInd,x:q.dragX!==null?q.dragX:le,y:0,width:W,model:q,categories:ye,parcatsViewModel:U,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(g,ne,ae){var T=g("./parcats");ne.exports=function(M,A,e,a){var n=M._fullLayout,t=n._paper,r=n._size;T(M,t,A,{width:r.w,height:r.h,margin:{t:r.t,r:r.r,b:r.b,l:r.l}},e,a)}},{"./parcats":886}],888:[function(g,ne,ae){var T=g("../../components/colorscale/attributes"),c=g("../../plots/cartesian/layout_attributes"),M=g("../../plots/font_attributes"),A=g("../../plots/domain").attributes,e=g("../../lib/extend").extendFlat,a=g("../../plot_api/plot_template").templatedArray;ne.exports={domain:A({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:M({editType:"plot"}),tickfont:M({editType:"plot"}),rangefont:M({editType:"plot"}),dimensions:a("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},c.tickvals,{editType:"plot"}),ticktext:e({},c.ticktext,{editType:"plot"}),tickformat:e({},c.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},T("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(g,ne,ae){var T=g("./constants"),c=g("@plotly/d3"),M=g("../../lib/gup").keyFun,A=g("../../lib/gup").repeat,e=g("../../lib").sorterAsc,a=g("../../lib").strTranslate,n=T.bar.snapRatio;function t(Y,K){return Y*(1-n)+K*n}var r=T.bar.snapClose;function f(Y,K){return Y*(1-r)+K*r}function o(Y,K,J,G){if(i(J,G))return J;var Z=Y?-1:1,re=0,se=K.length-1;if(Z<0){var oe=re;re=se,se=oe}for(var N=K[re],U=N,q=re;Z*q<Z*se;q+=Z){var Q=q+Z,W=K[Q];if(Z*J<Z*f(N,W))return t(N,U);if(Z*J<Z*W||Q===se)return t(W,N);U=N,N=W}}function i(Y,K){for(var J=0;J<K.length;J++)if(Y>=K[J][0]&&Y<=K[J][1])return!0;return!1}function p(Y){Y.attr("x",-T.bar.captureWidth/2).attr("width",T.bar.captureWidth)}function d(Y){Y.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function y(Y){if(!Y.brush.filterSpecified)return"0,"+Y.height;for(var K=v(Y.brush.filter.getConsolidated(),Y.height),J=[0],G,Z,re,se=K.length?K[0][0]:null,oe=0;oe<K.length;oe++)G=K[oe],Z=G[1]-G[0],J.push(se),J.push(Z),re=oe+1,re<K.length&&(se=K[re][0]-G[1]);return J.push(Y.height),J}function v(Y,K){return Y.map(function(J){return J.map(function(G){return Math.max(0,G*K)}).sort(e)})}function x(Y,K){var J=T.bar.handleHeight;if(!(K>Y[1]+J||K<Y[0]-J))return K>=.9*Y[1]+.1*Y[0]?"n":K<=.9*Y[0]+.1*Y[1]?"s":"ns"}function l(){c.select(document.body).style("cursor",null)}function _(Y){Y.attr("stroke-dasharray",y)}function s(Y,K){var J=c.select(Y).selectAll(".highlight, .highlight-shadow"),G=K?J.transition().duration(T.bar.snapDuration).each("end",K):J;_(G)}function w(Y,K){var J=Y.brush,G=J.filterSpecified,Z=NaN,re={},se;if(G){var oe=Y.height,N=J.filter.getConsolidated(),U=v(N,oe),q=NaN,Q=NaN,W=NaN;for(se=0;se<=U.length;se++){var X=U[se];if(X&&X[0]<=K&&K<=X[1]){q=se;break}else if(Q=se?se-1:NaN,X&&X[0]>K){W=se;break}}if(Z=q,isNaN(Z)&&(isNaN(Q)||isNaN(W)?Z=isNaN(Q)?W:Q:Z=K-U[Q][1]<U[W][0]-K?Q:W),!isNaN(Z)){var te=U[Z],ee=x(te,K);ee&&(re.interval=N[Z],re.intervalPix=te,re.region=ee)}}if(Y.ordinal&&!re.region){var ie=Y.unitTickvals,le=Y.unitToPaddedPx.invert(K);for(se=0;se<ie.length;se++){var ye=[ie[Math.max(se-1,0)]*.25+ie[se]*.75,ie[Math.min(se+1,ie.length-1)]*.25+ie[se]*.75];if(le>=ye[0]&&le<=ye[1]){re.clickableOrdinalRange=ye;break}}}return re}function b(Y,K){c.event.sourceEvent.stopPropagation();var J=K.height-c.mouse(Y)[1]-2*T.verticalPadding,G=K.unitToPaddedPx.invert(J),Z=K.brush,re=w(K,J),se=re.interval,oe=Z.svgBrush;if(oe.wasDragged=!1,oe.grabbingBar=re.region==="ns",oe.grabbingBar){var N=se.map(K.unitToPaddedPx);oe.grabPoint=J-N[0]-T.verticalPadding,oe.barLength=N[1]-N[0]}oe.clickableOrdinalRange=re.clickableOrdinalRange,oe.stayingIntervals=K.multiselect&&Z.filterSpecified?Z.filter.getConsolidated():[],se&&(oe.stayingIntervals=oe.stayingIntervals.filter(function(U){return U[0]!==se[0]&&U[1]!==se[1]})),oe.startExtent=re.region?se[re.region==="s"?1:0]:G,K.parent.inBrushDrag=!0,oe.brushStartCallback()}function h(Y,K){c.event.sourceEvent.stopPropagation();var J=K.height-c.mouse(Y)[1]-2*T.verticalPadding,G=K.brush.svgBrush;G.wasDragged=!0,G._dragging=!0,G.grabbingBar?G.newExtent=[J-G.grabPoint,J+G.barLength-G.grabPoint].map(K.unitToPaddedPx.invert):G.newExtent=[G.startExtent,K.unitToPaddedPx.invert(J)].sort(e),K.brush.filterSpecified=!0,G.extent=G.stayingIntervals.concat([G.newExtent]),G.brushCallback(K),s(Y.parentNode)}function m(Y,K){var J=K.brush,G=J.filter,Z=J.svgBrush;Z._dragging||(u(Y,K),h(Y,K),K.brush.svgBrush.wasDragged=!1),Z._dragging=!1;var re=c.event;re.sourceEvent.stopPropagation();var se=Z.grabbingBar;if(Z.grabbingBar=!1,Z.grabLocation=void 0,K.parent.inBrushDrag=!1,l(),!Z.wasDragged){Z.wasDragged=void 0,Z.clickableOrdinalRange?J.filterSpecified&&K.multiselect?Z.extent.push(Z.clickableOrdinalRange):(Z.extent=[Z.clickableOrdinalRange],J.filterSpecified=!0):se?(Z.extent=Z.stayingIntervals,Z.extent.length===0&&I(J)):I(J),Z.brushCallback(K),s(Y.parentNode),Z.brushEndCallback(J.filterSpecified?G.getConsolidated():[]);return}var oe=function(){G.set(G.getConsolidated())};if(K.ordinal){var N=K.unitTickvals;N[N.length-1]<N[0]&&N.reverse(),Z.newExtent=[o(0,N,Z.newExtent[0],Z.stayingIntervals),o(1,N,Z.newExtent[1],Z.stayingIntervals)];var U=Z.newExtent[1]>Z.newExtent[0];Z.extent=Z.stayingIntervals.concat(U?[Z.newExtent]:[]),Z.extent.length||I(J),Z.brushCallback(K),U?s(Y.parentNode,oe):(oe(),s(Y.parentNode))}else oe();Z.brushEndCallback(J.filterSpecified?G.getConsolidated():[])}function u(Y,K){var J=K.height-c.mouse(Y)[1]-2*T.verticalPadding,G=w(K,J),Z="crosshair";G.clickableOrdinalRange?Z="pointer":G.region&&(Z=G.region+"-resize"),c.select(document.body).style("cursor",Z)}function L(Y){Y.on("mousemove",function(K){c.event.preventDefault(),K.parent.inBrushDrag||u(this,K)}).on("mouseleave",function(K){K.parent.inBrushDrag||l()}).call(c.behavior.drag().on("dragstart",function(K){b(this,K)}).on("drag",function(K){h(this,K)}).on("dragend",function(K){m(this,K)}))}function S(Y,K){return Y[0]-K[0]}function k(Y,K){var J=Y.selectAll(".background").data(A);J.enter().append("rect").classed("background",!0).call(p).call(d).style("pointer-events","auto").attr("transform",a(0,T.verticalPadding)),J.call(L).attr("height",function(re){return re.height-T.verticalPadding});var G=Y.selectAll(".highlight-shadow").data(A);G.enter().append("line").classed("highlight-shadow",!0).attr("x",-T.bar.width/2).attr("stroke-width",T.bar.width+T.bar.strokeWidth).attr("stroke",K).attr("opacity",T.bar.strokeOpacity).attr("stroke-linecap","butt"),G.attr("y1",function(re){return re.height}).call(_);var Z=Y.selectAll(".highlight").data(A);Z.enter().append("line").classed("highlight",!0).attr("x",-T.bar.width/2).attr("stroke-width",T.bar.width-T.bar.strokeWidth).attr("stroke",T.bar.fillColor).attr("opacity",T.bar.fillOpacity).attr("stroke-linecap","butt"),Z.attr("y1",function(re){return re.height}).call(_)}function P(Y,K){var J=Y.selectAll("."+T.cn.axisBrush).data(A,M);J.enter().append("g").classed(T.cn.axisBrush,!0),k(J,K)}function z(Y){return Y.svgBrush.extent.map(function(K){return K.slice()})}function I(Y){Y.filterSpecified=!1,Y.svgBrush.extent=[[-1/0,1/0]]}function D(Y){return function(J){var G=J.brush,Z=z(G),re=Z.slice();G.filter.set(re),Y()}}function R(Y){for(var K=Y.slice(),J=[],G,Z=K.shift();Z;){for(G=Z.slice();(Z=K.shift())&&Z[0]<=G[1];)G[1]=Math.max(G[1],Z[1]);J.push(G)}return J.length===1&&J[0][0]>J[0][1]&&(J=[]),J}function B(){var Y=[],K,J;return{set:function(G){Y=G.map(function(Z){return Z.slice().sort(e)}).sort(S),Y.length===1&&Y[0][0]===-1/0&&Y[0][1]===1/0&&(Y=[[0,-1]]),K=R(Y),J=Y.reduce(function(Z,re){return[Math.min(Z[0],re[0]),Math.max(Z[1],re[1])]},[1/0,-1/0])},get:function(){return Y.slice()},getConsolidated:function(){return K},getBounds:function(){return J}}}function F(Y,K,J,G,Z,re){var se=B();return se.set(J),{filter:se,filterSpecified:K,svgBrush:{extent:[],brushStartCallback:G,brushCallback:D(Z),brushEndCallback:re}}}function V(Y,K){if(Array.isArray(Y[0])?(Y=Y.map(function(G){return G.sort(e)}),K.multiselect?Y=R(Y.sort(S)):Y=[Y[0]]):Y=[Y.sort(e)],K.tickvals){var J=K.tickvals.slice().sort(e);if(Y=Y.map(function(G){var Z=[o(0,J,G[0],[]),o(1,J,G[1],[])];if(Z[1]>Z[0])return Z}).filter(function(G){return G}),!Y.length)return}return Y.length>1?Y:Y[0]}ne.exports={makeBrush:F,ensureAxisBrush:P,cleanRanges:V}},{"../../lib":503,"../../lib/gup":500,"./constants":893,"@plotly/d3":58}],890:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:g("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":891,"./calc":892,"./defaults":894}],891:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../plots/get_data").getModuleCalcData,M=g("./plot"),A=g("../../constants/xmlns_namespaces");ae.name="parcoords",ae.plot=function(e){var a=c(e.calcdata,"parcoords")[0];a.length&&M(e,a)},ae.clean=function(e,a,n,t){var r=t._has&&t._has("parcoords"),f=a._has&&a._has("parcoords");r&&!f&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},ae.toSVG=function(e){var a=e._fullLayout._glimages,n=T.select(e).selectAll(".svg-container"),t=n.filter(function(f,o){return o===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function r(){var f=this,o=f.toDataURL("image/png"),i=a.append("svg:image");i.attr({xmlns:A.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:f.style.width,height:f.style.height})}t.each(r),window.setTimeout(function(){T.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":900,"@plotly/d3":58}],892:[function(g,ne,ae){var T=g("../../lib").isArrayOrTypedArray,c=g("../../components/colorscale"),M=g("../../lib/gup").wrap;ne.exports=function(a,n){var t,r;return c.hasColorscale(n,"line")&&T(n.line.color)?(t=n.line.color,r=c.extractOpts(n.line).colorscale,c.calc(a,n,{vals:t,containerStr:"line",cLetter:"c"})):(t=A(n._length),r=[[0,n.line.color],[1,n.line.color]]),M({lineColor:t,cscale:r})};function A(e){for(var a=new Array(e),n=0;n<e;n++)a[n]=.5;return a}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],893:[function(g,ne,ae){ne.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],894:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/colorscale/helpers").hasColorscale,M=g("../../components/colorscale/defaults"),A=g("../../plots/domain").defaults,e=g("../../plots/array_container_defaults"),a=g("../../plots/cartesian/axes"),n=g("./attributes"),t=g("./axisbrush"),r=g("./constants").maxDimensionCount,f=g("./merge_length");function o(p,d,y,v,x){var l=x("line.color",y);if(c(p,"line")&&T.isArrayOrTypedArray(l)){if(l.length)return x("line.colorscale"),M(p,d,v,x,{prefix:"line.",cLetter:"c"}),l.length;d.line.color=y}return 1/0}function i(p,d,y,v){function x(b,h){return T.coerce(p,d,n.dimensions,b,h)}var l=x("values"),_=x("visible");if(l&&l.length||(_=d.visible=!1),_){x("label"),x("tickvals"),x("ticktext"),x("tickformat");var s=x("range");d._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:s},a.setConvert(d._ax,v.layout),x("multiselect");var w=x("constraintrange");w&&(d.constraintrange=t.cleanRanges(w,d))}}ne.exports=function(d,y,v,x){function l(h,m){return T.coerce(d,y,n,h,m)}var _=d.dimensions;Array.isArray(_)&&_.length>r&&(T.log("parcoords traces support up to "+r+" dimensions at the moment"),_.splice(r));var s=e(d,y,{name:"dimensions",layout:x,handleItemDefaults:i}),w=o(d,y,v,x,l);A(y,x,l),(!Array.isArray(s)||!s.length)&&(y.visible=!1),f(y,s,"values",w);var b={family:x.font.family,size:Math.round(x.font.size/1.2),color:x.font.color};T.coerceFont(l,"labelfont",b),T.coerceFont(l,"tickfont",b),T.coerceFont(l,"rangefont",b),l("labelangle"),l("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":893,"./merge_length":898}],895:[function(g,ne,ae){var T=g("../../lib").isTypedArray;ae.convertTypedArray=function(c){return T(c)?Array.prototype.slice.call(c):c},ae.isOrdinal=function(c){return!!c.tickvals},ae.isVisible=function(c){return c.visible||!("visible"in c)}},{"../../lib":503}],896:[function(g,ne,ae){var T=g("./base_index");T.plot=g("./plot"),ne.exports=T},{"./base_index":890,"./plot":900}],897:[function(g,ne,ae){var T=g("glslify"),c=T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),M=T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),A=g("./constants").maxDimensionCount,e=g("../../lib"),a=1e-6,n=2048,t=new Uint8Array(4),r=new Uint8Array(4),f={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function o(u){u.read({x:0,y:0,width:1,height:1,data:t})}function i(u,L,S,k,P){var z=u._gl;z.enable(z.SCISSOR_TEST),z.scissor(L,S,k,P),u.clear({color:[0,0,0,0],depth:1})}function p(u,L,S,k,P,z){var I=z.key;function D(R){var B=Math.min(k,P-R*k);R===0&&(window.cancelAnimationFrame(S.currentRafs[I]),delete S.currentRafs[I],i(u,z.scissorX,z.scissorY,z.scissorWidth,z.viewBoxSize[1])),!S.clearOnly&&(z.count=2*B,z.offset=2*R*k,L(z),R*k+B<P&&(S.currentRafs[I]=window.requestAnimationFrame(function(){D(R+1)})),S.drawCompleted=!1)}S.drawCompleted||(o(u),S.drawCompleted=!0),D(0)}function d(u){return Math.max(a,Math.min(1-a,u))}function y(u,L){for(var S=new Array(256),k=0;k<256;k++)S[k]=u(k/255).concat(L);return S}function v(u,L){return(u>>>8*L)%256/255}function x(u,L,S){for(var k=new Array(u*(A+4)),P=0,z=0;z<u;z++){for(var I=0;I<A;I++)k[P++]=I<L.length?L[I].paddedUnitValues[z]:.5;k[P++]=v(z,2),k[P++]=v(z,1),k[P++]=v(z,0),k[P++]=d(S[z])}return k}function l(u,L,S){for(var k=new Array(L*8),P=0,z=0;z<L;z++)for(var I=0;I<2;I++)for(var D=0;D<4;D++){var R=u*4+D,B=S[z*64+R];R===63&&I===0&&(B*=-1),k[P++]=B}return k}function _(u){var L="0"+u;return L.substr(L.length-2)}function s(u){return u<A?"p"+_(u+1)+"_"+_(u+4):"colors"}function w(u,L,S){for(var k=0;k<=A;k+=4)u[s(k)](l(k/4,L,S))}function b(u){for(var L={},S=0;S<=A;S+=4)L[s(S)]=u.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return L}function h(u,L,S,k,P,z,I,D,R,B,F,V,Y,K){for(var J=[[],[]],G=0;G<64;G++)J[0][G]=G===P?1:0,J[1][G]=G===z?1:0;I*=K,D*=K,R*=K,B*=K;var Z=u.lines.canvasOverdrag*K,re=u.domain,se=u.canvasWidth*K,oe=u.canvasHeight*K,N=u.pad.l*K,U=u.pad.b*K,q=u.layoutHeight*K,Q=u.layoutWidth*K,W=u.deselectedLines.color,X=e.extendFlat({key:F,resolution:[se,oe],viewBoxPos:[I+Z,D],viewBoxSize:[R,B],i0:P,i1:z,dim0A:J[0].slice(0,16),dim0B:J[0].slice(16,32),dim0C:J[0].slice(32,48),dim0D:J[0].slice(48,64),dim1A:J[1].slice(0,16),dim1B:J[1].slice(16,32),dim1C:J[1].slice(32,48),dim1D:J[1].slice(48,64),drwLayer:V,contextColor:[W[0]/255,W[1]/255,W[2]/255,W[3]<1?W[3]:Math.max(1/255,Math.pow(1/u.lines.color.length,1/3))],scissorX:(k===L?0:I+Z)+(N-Z)+Q*re.x[0],scissorWidth:(k===S?se-I+Z:R+.5)+(k===L?I+Z:0),scissorY:D+U+q*re.y[0],scissorHeight:B,viewportX:N-Z+Q*re.x[0],viewportY:U+q*re.y[0],viewportWidth:se,viewportHeight:oe},Y);return X}function m(u){var L=n-1,S=Math.max(0,Math.floor(u[0]*L),0),k=Math.min(L,Math.ceil(u[1]*L),L);return[Math.min(S,k),Math.max(S,k)]}ne.exports=function(u,L){var S=L.context,k=L.pick,P=L.regl,z=P._gl,I=z.getParameter(z.ALIASED_LINE_WIDTH_RANGE),D=Math.max(I[0],Math.min(I[1],L.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},B,F,V,Y,K=b(P),J,G=P.texture(f),Z=[];se(L);var re=P({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:P.prop("scissorX"),y:P.prop("scissorY"),width:P.prop("scissorWidth"),height:P.prop("scissorHeight")}},viewport:{x:P.prop("viewportX"),y:P.prop("viewportY"),width:P.prop("viewportWidth"),height:P.prop("viewportHeight")},dither:!1,vert:c,frag:M,primitive:"lines",lineWidth:D,attributes:K,uniforms:{resolution:P.prop("resolution"),viewBoxPos:P.prop("viewBoxPos"),viewBoxSize:P.prop("viewBoxSize"),dim0A:P.prop("dim0A"),dim1A:P.prop("dim1A"),dim0B:P.prop("dim0B"),dim1B:P.prop("dim1B"),dim0C:P.prop("dim0C"),dim1C:P.prop("dim1C"),dim0D:P.prop("dim0D"),dim1D:P.prop("dim1D"),loA:P.prop("loA"),hiA:P.prop("hiA"),loB:P.prop("loB"),hiB:P.prop("hiB"),loC:P.prop("loC"),hiC:P.prop("hiC"),loD:P.prop("loD"),hiD:P.prop("hiD"),palette:G,contextColor:P.prop("contextColor"),maskTexture:P.prop("maskTexture"),drwLayer:P.prop("drwLayer"),maskHeight:P.prop("maskHeight")},offset:P.prop("offset"),count:P.prop("count")});function se(W){B=W.model,F=W.viewModel,V=F.dimensions.slice(),Y=V[0]?V[0].values.length:0;var X=B.lines,te=k?X.color.map(function(ie,le){return le/X.color.length}):X.color,ee=x(Y,V,te);w(K,Y,ee),!S&&!k&&(G=P.texture(e.extendFlat({data:y(B.unitToColor,255)},f)))}function oe(W){var X,te,ee,ie=[[],[]];for(ee=0;ee<64;ee++){var le=!W&&ee<V.length?V[ee].brush.filter.getBounds():[-1/0,1/0];ie[0][ee]=le[0],ie[1][ee]=le[1]}var ye=n*8,ue=new Array(ye);for(X=0;X<ye;X++)ue[X]=255;if(!W)for(X=0;X<V.length;X++){var pe=X%8,ge=(X-pe)/8,Te=Math.pow(2,pe),_e=V[X],De=_e.brush.filter.get();if(!(De.length<2)){var Oe=m(De[0])[1];for(te=1;te<De.length;te++){var Ue=m(De[te]);for(ee=Oe+1;ee<Ue[0];ee++)ue[ee*8+ge]&=~Te;Oe=Math.max(Oe,Ue[1])}}}var xe={shape:[8,n],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ue};return J?J(xe):J=P.texture(xe),{maskTexture:J,maskHeight:n,loA:ie[0].slice(0,16),loB:ie[0].slice(16,32),loC:ie[0].slice(32,48),loD:ie[0].slice(48,64),hiA:ie[1].slice(0,16),hiB:ie[1].slice(16,32),hiC:ie[1].slice(32,48),hiD:ie[1].slice(48,64)}}function N(W,X,te){var ee=W.length,ie,le,ye,ue=1/0,pe=-1/0;for(ie=0;ie<ee;ie++)W[ie].dim0.canvasX<ue&&(ue=W[ie].dim0.canvasX,le=ie),W[ie].dim1.canvasX>pe&&(pe=W[ie].dim1.canvasX,ye=ie);ee===0&&i(P,0,0,B.canvasWidth,B.canvasHeight);var ge=oe(S);for(ie=0;ie<ee;ie++){var Te=W[ie],_e=Te.dim0.crossfilterDimensionIndex,De=Te.dim1.crossfilterDimensionIndex,Oe=Te.canvasX,Ue=Te.canvasY,xe=Oe+Te.panelSizeX,Pe=Te.plotGlPixelRatio;if(X||!Z[_e]||Z[_e][0]!==Oe||Z[_e][1]!==xe){Z[_e]=[Oe,xe];var Ve=h(B,le,ye,ie,_e,De,Oe,Ue,Te.panelSizeX,Te.panelSizeY,Te.dim0.crossfilterDimensionIndex,S?0:k?2:1,ge,Pe);R.clearOnly=te;var Qe=X?B.lines.blockLineCount:Y;p(P,re,R,Qe,Y,Ve)}}}function U(W,X){return P.read({x:W,y:X,width:1,height:1,data:r}),r}function q(W,X,te,ee){var ie=new Uint8Array(4*te*ee);return P.read({x:W,y:X,width:te,height:ee,data:ie}),ie}function Q(){u.style["pointer-events"]="none",G.destroy(),J&&J.destroy();for(var W in K)K[W].destroy()}return{render:N,readPixel:U,readPixels:q,destroy:Q,update:se}}},{"../../lib":503,"./constants":893,glslify:227}],898:[function(g,ne,ae){ne.exports=function(T,c,M,A){A||(A=1/0);var e,a;for(e=0;e<c.length;e++)a=c[e],a.visible&&(A=Math.min(A,a[M].length));for(A===1/0&&(A=0),T._length=A,e=0;e<c.length;e++)a=c[e],a.visible&&(a._length=A);return A}},{}],899:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=c.numberFormat,A=g("color-rgba"),e=g("../../plots/cartesian/axes"),a=c.strRotate,n=c.strTranslate,t=g("../../lib/svg_text_utils"),r=g("../../components/drawing"),f=g("../../components/colorscale"),o=g("../../lib/gup"),i=o.keyFun,p=o.repeat,d=o.unwrap,y=g("./helpers"),v=g("./constants"),x=g("./axisbrush"),l=g("./lines");function _(J,G,Z){return c.aggNums(J,null,G,Z)}function s(J,G){return b(_(Math.min,J,G),_(Math.max,J,G))}function w(J){var G=J.range;return G?b(G[0],G[1]):s(J.values,J._length)}function b(J,G){return(isNaN(J)||!isFinite(J))&&(J=0),(isNaN(G)||!isFinite(G))&&(G=0),J===G&&(J===0?(J-=1,G+=1):(J*=.9,G*=1.1)),[J,G]}function h(J,G){return G?function(Z,re){var se=G[re];return se==null?J(Z):se}:J}function m(J,G,Z,re,se){var oe=w(Z);return re?T.scale.ordinal().domain(re.map(h(M(Z.tickformat),se))).range(re.map(function(N){var U=(N-oe[0])/(oe[1]-oe[0]);return J-G+U*(2*G-J)})):T.scale.linear().domain(oe).range([J-G,G])}function u(J,G){return T.scale.linear().range([G,J-G])}function L(J,G){return T.scale.linear().domain(w(J)).range([G,1-G])}function S(J){if(!!J.tickvals){var G=w(J);return T.scale.ordinal().domain(J.tickvals).range(J.tickvals.map(function(Z){return(Z-G[0])/(G[1]-G[0])}))}}function k(J){var G=J.map(function(oe){return oe[0]}),Z=J.map(function(oe){var N=A(oe[1]);return T.rgb("rgb("+N[0]+","+N[1]+","+N[2]+")")}),re=function(oe){return function(N){return N[oe]}},se="rgb".split("").map(function(oe){return T.scale.linear().clamp(!0).domain(G).range(Z.map(re(oe)))});return function(oe){return se.map(function(N){return N(oe)})}}function P(J){return J.dimensions.some(function(G){return G.brush.filterSpecified})}function z(J,G,Z){var re=d(G),se=re.trace,oe=y.convertTypedArray(re.lineColor),N=se.line,U={color:A(v.deselectedLineColor)},q=f.extractOpts(N),Q=q.reversescale?f.flipScale(re.cscale):re.cscale,W=se.domain,X=se.dimensions,te=J.width,ee=se.labelangle,ie=se.labelside,le=se.labelfont,ye=se.tickfont,ue=se.rangefont,pe=c.extendDeepNoArrays({},N,{color:oe.map(T.scale.linear().domain(w({values:oe,range:[q.min,q.max],_length:se._length}))),blockLineCount:v.blockLineCount,canvasOverdrag:v.overdrag*v.canvasPixelRatio}),ge=Math.floor(te*(W.x[1]-W.x[0])),Te=Math.floor(J.height*(W.y[1]-W.y[0])),_e=J.margin||{l:80,r:80,t:100,b:80},De=ge,Oe=Te;return{key:Z,colCount:X.filter(y.isVisible).length,dimensions:X,tickDistance:v.tickDistance,unitToColor:k(Q),lines:pe,deselectedLines:U,labelAngle:ee,labelSide:ie,labelFont:le,tickFont:ye,rangeFont:ue,layoutWidth:te,layoutHeight:J.height,domain:W,translateX:W.x[0]*te,translateY:J.height-W.y[1]*J.height,pad:_e,canvasWidth:De*v.canvasPixelRatio+2*pe.canvasOverdrag,canvasHeight:Oe*v.canvasPixelRatio,width:De,height:Oe,canvasPixelRatio:v.canvasPixelRatio}}function I(J,G,Z){var re=Z.width,se=Z.height,oe=Z.dimensions,N=Z.canvasPixelRatio,U=function(te){return re*te/Math.max(1,Z.colCount-1)},q=v.verticalPadding/se,Q=u(se,v.verticalPadding),W={key:Z.key,xScale:U,model:Z,inBrushDrag:!1},X={};return W.dimensions=oe.filter(y.isVisible).map(function(te,ee){var ie=L(te,q),le=X[te.label];X[te.label]=(le||0)+1;var ye=te.label+(le?"__"+le:""),ue=te.constraintrange,pe=ue&&ue.length;pe&&!Array.isArray(ue[0])&&(ue=[ue]);var ge=pe?ue.map(function(Fe){return Fe.map(ie)}):[[-1/0,1/0]],Te=function(){var Fe=W;Fe.focusLayer&&Fe.focusLayer.render(Fe.panels,!0);var Le=P(Fe);!J.contextShown()&&Le?(Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!0),J.contextShown(!0)):J.contextShown()&&!Le&&(Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!0,!0),J.contextShown(!1))},_e=te.values;_e.length>te._length&&(_e=_e.slice(0,te._length));var De=te.tickvals,Oe;function Ue(Fe,Le){return{val:Fe,text:Oe[Le]}}function xe(Fe,Le){return Fe.val-Le.val}if(Array.isArray(De)&&De.length){Oe=te.ticktext,!Array.isArray(Oe)||!Oe.length?Oe=De.map(M(te.tickformat)):Oe.length>De.length?Oe=Oe.slice(0,De.length):De.length>Oe.length&&(De=De.slice(0,Oe.length));for(var Pe=1;Pe<De.length;Pe++)if(De[Pe]<De[Pe-1]){for(var Ve=De.map(Ue).sort(xe),Qe=0;Qe<De.length;Qe++)De[Qe]=Ve[Qe].val,Oe[Qe]=Ve[Qe].text;break}}else De=void 0;return _e=y.convertTypedArray(_e),{key:ye,label:te.label,tickFormat:te.tickformat,tickvals:De,ticktext:Oe,ordinal:y.isOrdinal(te),multiselect:te.multiselect,xIndex:ee,crossfilterDimensionIndex:ee,visibleIndex:te._index,height:se,values:_e,paddedUnitValues:_e.map(ie),unitTickvals:De&&De.map(ie),xScale:U,x:U(ee),canvasX:U(ee)*N,unitToPaddedPx:Q,domainScale:m(se,v.verticalPadding,te,De,Oe),ordinalScale:S(te),parent:W,model:Z,brush:x.makeBrush(J,pe,ge,function(){J.linePickActive(!1)},Te,function(Fe){if(W.focusLayer.render(W.panels,!0),W.pickLayer&&W.pickLayer.render(W.panels,!0),J.linePickActive(!0),G&&G.filterChanged){var Le=ie.invert,Ne=Fe.map(function(dt){return dt.map(Le).sort(c.sorterAsc)}).sort(function(dt,Dt){return dt[0]-Dt[0]});G.filterChanged(W.key,te._index,Ne)}})}}),W}function D(J){J.classed(v.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function R(){var J=!0,G=!1;return{linePickActive:function(Z){return arguments.length?J=!!Z:J},contextShown:function(Z){return arguments.length?G=!!Z:G}}}function B(J,G){var Z=G==="top"?1:-1,re=J*Math.PI/180,se=Math.sin(re),oe=Math.cos(re);return{dir:Z,dx:se,dy:oe,degrees:J}}function F(J,G,Z){for(var re=G.panels||(G.panels=[]),se=J.data(),oe=0;oe<se.length-1;oe++){var N=re[oe]||(re[oe]={}),U=se[oe],q=se[oe+1];N.dim0=U,N.dim1=q,N.canvasX=U.canvasX,N.panelSizeX=q.canvasX-U.canvasX,N.panelSizeY=G.model.canvasHeight,N.y=0,N.canvasY=0,N.plotGlPixelRatio=Z}}function V(J){for(var G=0;G<J.length;G++)for(var Z=0;Z<J[G].length;Z++)for(var re=J[G][Z].trace,se=re.dimensions,oe=0;oe<se.length;oe++){var N=se[oe].values,U=se[oe]._ax;U&&(U.range?U.range=b(U.range[0],U.range[1]):U.range=s(N,re._length),U.dtick||(U.dtick=.01*(Math.abs(U.range[1]-U.range[0])||1)),U.tickformat=se[oe].tickformat,e.calcTicks(U),U.cleanRange())}}function Y(J,G){return e.tickText(J._ax,G,!1).text}function K(J,G){if(J.ordinal)return"";var Z=J.domainScale.domain(),re=Z[G?Z.length-1:0];return Y(J.model.dimensions[J.visibleIndex],re)}ne.exports=function(G,Z,re,se){var oe=G._fullLayout,N=oe._toppaper,U=oe._glcontainer,q=G._context.plotGlPixelRatio,Q=G._fullLayout.paper_bgcolor;V(Z);var W=R(),X=Z.filter(function(Ve){return d(Ve).trace.visible}).map(z.bind(0,re)).map(I.bind(0,W,se));U.each(function(Ve,Qe){return c.extendFlat(Ve,X[Qe])});var te=U.selectAll(".gl-canvas").each(function(Ve){Ve.viewModel=X[0],Ve.viewModel.plotGlPixelRatio=q,Ve.viewModel.paperColor=Q,Ve.model=Ve.viewModel?Ve.viewModel.model:null}),ee=null,ie=te.filter(function(Ve){return Ve.pick});ie.style("pointer-events","auto").on("mousemove",function(Ve){if(W.linePickActive()&&Ve.lineLayer&&se&&se.hover){var Qe=T.event,Fe=this.width,Le=this.height,Ne=T.mouse(this),dt=Ne[0],Dt=Ne[1];if(dt<0||Dt<0||dt>=Fe||Dt>=Le)return;var Xt=Ve.lineLayer.readPixel(dt,Le-1-Dt),Tt=Xt[3]!==0,zt=Tt?Xt[2]+256*(Xt[1]+256*Xt[0]):null,Ut={x:dt,y:Dt,clientX:Qe.clientX,clientY:Qe.clientY,dataIndex:Ve.model.key,curveNumber:zt};zt!==ee&&(Tt?se.hover(Ut):se.unhover&&se.unhover(Ut),ee=zt)}}),te.style("opacity",function(Ve){return Ve.pick?0:1}),N.style("background","rgba(255, 255, 255, 0)");var le=N.selectAll("."+v.cn.parcoords).data(X,i);le.exit().remove(),le.enter().append("g").classed(v.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),le.attr("transform",function(Ve){return n(Ve.model.translateX,Ve.model.translateY)});var ye=le.selectAll("."+v.cn.parcoordsControlView).data(p,i);ye.enter().append("g").classed(v.cn.parcoordsControlView,!0),ye.attr("transform",function(Ve){return n(Ve.model.pad.l,Ve.model.pad.t)});var ue=ye.selectAll("."+v.cn.yAxis).data(function(Ve){return Ve.dimensions},i);ue.enter().append("g").classed(v.cn.yAxis,!0),ye.each(function(Ve){F(ue,Ve,q)}),te.each(function(Ve){if(Ve.viewModel){!Ve.lineLayer||se?Ve.lineLayer=l(this,Ve):Ve.lineLayer.update(Ve),(Ve.key||Ve.key===0)&&(Ve.viewModel[Ve.key]=Ve.lineLayer);var Qe=!Ve.context||se;Ve.lineLayer.render(Ve.viewModel.panels,Qe)}}),ue.attr("transform",function(Ve){return n(Ve.xScale(Ve.xIndex),0)}),ue.call(T.behavior.drag().origin(function(Ve){return Ve}).on("drag",function(Ve){var Qe=Ve.parent;W.linePickActive(!1),Ve.x=Math.max(-v.overdrag,Math.min(Ve.model.width+v.overdrag,T.event.x)),Ve.canvasX=Ve.x*Ve.model.canvasPixelRatio,ue.sort(function(Fe,Le){return Fe.x-Le.x}).each(function(Fe,Le){Fe.xIndex=Le,Fe.x=Ve===Fe?Fe.x:Fe.xScale(Fe.xIndex),Fe.canvasX=Fe.x*Fe.model.canvasPixelRatio}),F(ue,Qe,q),ue.filter(function(Fe){return Math.abs(Ve.xIndex-Fe.xIndex)!==0}).attr("transform",function(Fe){return n(Fe.xScale(Fe.xIndex),0)}),T.select(this).attr("transform",n(Ve.x,0)),ue.each(function(Fe,Le,Ne){Ne===Ve.parent.key&&(Qe.dimensions[Le]=Fe)}),Qe.contextLayer&&Qe.contextLayer.render(Qe.panels,!1,!P(Qe)),Qe.focusLayer.render&&Qe.focusLayer.render(Qe.panels)}).on("dragend",function(Ve){var Qe=Ve.parent;Ve.x=Ve.xScale(Ve.xIndex),Ve.canvasX=Ve.x*Ve.model.canvasPixelRatio,F(ue,Qe,q),T.select(this).attr("transform",function(Fe){return n(Fe.x,0)}),Qe.contextLayer&&Qe.contextLayer.render(Qe.panels,!1,!P(Qe)),Qe.focusLayer&&Qe.focusLayer.render(Qe.panels),Qe.pickLayer&&Qe.pickLayer.render(Qe.panels,!0),W.linePickActive(!0),se&&se.axesMoved&&se.axesMoved(Qe.key,Qe.dimensions.map(function(Fe){return Fe.crossfilterDimensionIndex}))})),ue.exit().remove();var pe=ue.selectAll("."+v.cn.axisOverlays).data(p,i);pe.enter().append("g").classed(v.cn.axisOverlays,!0),pe.selectAll("."+v.cn.axis).remove();var ge=pe.selectAll("."+v.cn.axis).data(p,i);ge.enter().append("g").classed(v.cn.axis,!0),ge.each(function(Ve){var Qe=Ve.model.height/Ve.model.tickDistance,Fe=Ve.domainScale,Le=Fe.domain();T.select(this).call(T.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Qe,Ve.tickFormat).tickValues(Ve.ordinal?Le:null).tickFormat(function(Ne){return y.isOrdinal(Ve)?Ne:Y(Ve.model.dimensions[Ve.visibleIndex],Ne)}).scale(Fe)),r.font(ge.selectAll("text"),Ve.model.tickFont)}),ge.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),ge.selectAll("text").style("text-shadow",t.makeTextShadow(Q)).style("cursor","default");var Te=pe.selectAll("."+v.cn.axisHeading).data(p,i);Te.enter().append("g").classed(v.cn.axisHeading,!0);var _e=Te.selectAll("."+v.cn.axisTitle).data(p,i);_e.enter().append("text").classed(v.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),_e.text(function(Ve){return Ve.label}).each(function(Ve){var Qe=T.select(this);r.font(Qe,Ve.model.labelFont),t.convertToTspans(Qe,G)}).attr("transform",function(Ve){var Qe=B(Ve.model.labelAngle,Ve.model.labelSide),Fe=v.axisTitleOffset;return(Qe.dir>0?"":n(0,2*Fe+Ve.model.height))+a(Qe.degrees)+n(-Fe*Qe.dx,-Fe*Qe.dy)}).attr("text-anchor",function(Ve){var Qe=B(Ve.model.labelAngle,Ve.model.labelSide),Fe=Math.abs(Qe.dx),Le=Math.abs(Qe.dy);return 2*Fe>Le?Qe.dir*Qe.dx<0?"start":"end":"middle"});var De=pe.selectAll("."+v.cn.axisExtent).data(p,i);De.enter().append("g").classed(v.cn.axisExtent,!0);var Oe=De.selectAll("."+v.cn.axisExtentTop).data(p,i);Oe.enter().append("g").classed(v.cn.axisExtentTop,!0),Oe.attr("transform",n(0,-v.axisExtentOffset));var Ue=Oe.selectAll("."+v.cn.axisExtentTopText).data(p,i);Ue.enter().append("text").classed(v.cn.axisExtentTopText,!0).call(D),Ue.text(function(Ve){return K(Ve,!0)}).each(function(Ve){r.font(T.select(this),Ve.model.rangeFont)});var xe=De.selectAll("."+v.cn.axisExtentBottom).data(p,i);xe.enter().append("g").classed(v.cn.axisExtentBottom,!0),xe.attr("transform",function(Ve){return n(0,Ve.model.height+v.axisExtentOffset)});var Pe=xe.selectAll("."+v.cn.axisExtentBottomText).data(p,i);Pe.enter().append("text").classed(v.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(D),Pe.text(function(Ve){return K(Ve,!1)}).each(function(Ve){r.font(T.select(this),Ve.model.rangeFont)}),x.ensureAxisBrush(pe,Q)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":893,"./helpers":895,"./lines":897,"@plotly/d3":58,"color-rgba":91}],900:[function(g,ne,ae){var T=g("./parcoords"),c=g("../../lib/prepare_regl"),M=g("./helpers").isVisible,A={};function e(n,t,r){var f=t.indexOf(r),o=n.indexOf(f);return o===-1&&(o+=t.length),o}function a(n,t){return function(f,o){return e(n,t,f)-e(n,t,o)}}var ae=ne.exports=function(t,r){var f=t._fullLayout,o=c(t,[],A);if(!!o){var i={},p={},d={},y={},v=f._size;r.forEach(function(w,b){var h=w[0].trace;d[b]=h.index;var m=y[b]=h._fullInput.index;i[b]=t.data[m].dimensions,p[b]=t.data[m].dimensions.slice()});var x=function(w,b,h){var m=p[w][b],u=h.map(function(I){return I.slice()}),L="dimensions["+b+"].constraintrange",S=f._tracePreGUI[t._fullData[d[w]]._fullInput.uid];if(S[L]===void 0){var k=m.constraintrange;S[L]=k||null}var P=t._fullData[d[w]].dimensions[b];u.length?(u.length===1&&(u=u[0]),m.constraintrange=u,P.constraintrange=u.slice(),u=[u]):(delete m.constraintrange,delete P.constraintrange,u=null);var z={};z[L]=u,t.emit("plotly_restyle",[z,[y[w]]])},l=function(w){t.emit("plotly_hover",w)},_=function(w){t.emit("plotly_unhover",w)},s=function(w,b){var h=a(b,p[w].filter(M));i[w].sort(h),p[w].filter(function(m){return!M(m)}).sort(function(m){return p[w].indexOf(m)}).forEach(function(m){i[w].splice(i[w].indexOf(m),1),i[w].splice(p[w].indexOf(m),0,m)}),t.emit("plotly_restyle",[{dimensions:[i[w]]},[y[w]]])};T(t,r,{width:v.w,height:v.h,margin:{t:v.t,r:v.r,b:v.b,l:v.l}},{filterChanged:x,hover:l,unhover:_,axesMoved:s})}};ae.reglPrecompiled=A},{"../../lib/prepare_regl":516,"./helpers":895,"./parcoords":899}],901:[function(g,ne,ae){var T=g("../../plots/attributes"),c=g("../../plots/domain").attributes,M=g("../../plots/font_attributes"),A=g("../../components/color/attributes"),e=g("../../plots/template_attributes").hovertemplateAttrs,a=g("../../plots/template_attributes").texttemplateAttrs,n=g("../../lib/extend").extendFlat,t=M({editType:"plot",arrayOk:!0,colorEditType:"plot"});ne.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:A.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:n({},T.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:n({},t,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:n({},t,{}),outsidetextfont:n({},t,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:n({},t,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:c({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:n({},t,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],902:[function(g,ne,ae){var T=g("../../plots/plots");ae.name="pie",ae.plot=function(c,M,A,e){T.plotBasePlot(ae.name,c,M,A,e)},ae.clean=function(c,M,A,e){T.cleanBasePlot(ae.name,c,M,A,e)}},{"../../plots/plots":619}],903:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("tinycolor2"),M=g("../../components/color"),A={};function e(r,f){var o=[],i=r._fullLayout,p=i.hiddenlabels||[],d=f.labels,y=f.marker.colors||[],v=f.values,x=f._length,l=f._hasValues&&x,_,s;if(f.dlabel)for(d=new Array(x),_=0;_<x;_++)d[_]=String(f.label0+_*f.dlabel);var w={},b=a(i["_"+f.type+"colormap"]),h=0,m=!1;for(_=0;_<x;_++){var u,L,S;if(l){if(u=v[_],!T(u))continue;u=+u}else u=1;L=d[_],(L===void 0||L==="")&&(L=_),L=String(L);var k=w[L];k===void 0?(w[L]=o.length,S=p.indexOf(L)!==-1,S||(h+=u),o.push({v:u,label:L,color:b(y[_],L),i:_,pts:[_],hidden:S})):(m=!0,s=o[k],s.v+=u,s.pts.push(_),s.hidden||(h+=u),s.color===!1&&y[_]&&(s.color=b(y[_],L)))}o=o.filter(function(z){return z.v>=0});var P=f.type==="funnelarea"?m:f.sort;return P&&o.sort(function(z,I){return I.v-z.v}),o[0]&&(o[0].vTotal=h),o}function a(r){return function(o,i){return!o||(o=c(o),!o.isValid())?!1:(o=M.addOpacity(o,o.getAlpha()),r[i]||(r[i]=o),o)}}function n(r,f){var o=(f||{}).type;o||(o="pie");var i=r._fullLayout,p=r.calcdata,d=i[o+"colorway"],y=i["_"+o+"colormap"];i["extend"+o+"colors"]&&(d=t(d,A));for(var v=0,x=0;x<p.length;x++){var l=p[x],_=l[0].trace.type;if(_===o)for(var s=0;s<l.length;s++){var w=l[s];w.color===!1&&(y[w.label]?w.color=y[w.label]:(y[w.label]=w.color=d[v%d.length],v++))}}}function t(r,f){var o,i=JSON.stringify(r),p=f[i];if(!p){for(p=r.slice(),o=0;o<r.length;o++)p.push(c(r[o]).lighten(20).toHexString());for(o=0;o<r.length;o++)p.push(c(r[o]).darken(20).toHexString());f[i]=p}return p}ne.exports={calc:e,crossTraceCalc:n,makePullColorFn:a,generateExtendedColors:t}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],904:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib"),M=g("./attributes"),A=g("../../plots/domain").defaults,e=g("../bar/defaults").handleText;function a(t,r){var f=Array.isArray(t),o=c.isArrayOrTypedArray(r),i=Math.min(f?t.length:1/0,o?r.length:1/0);if(isFinite(i)||(i=0),i&&o){for(var p,d=0;d<i;d++){var y=r[d];if(T(y)&&y>0){p=!0;break}}p||(i=0)}return{hasLabels:f,hasValues:o,len:i}}function n(t,r,f,o){function i(S,k){return c.coerce(t,r,M,S,k)}var p=i("labels"),d=i("values"),y=a(p,d),v=y.len;if(r._hasLabels=y.hasLabels,r._hasValues=y.hasValues,!r._hasLabels&&r._hasValues&&(i("label0"),i("dlabel")),!v){r.visible=!1;return}r._length=v;var x=i("marker.line.width");x&&i("marker.line.color"),i("marker.colors"),i("scalegroup");var l=i("text"),_=i("texttemplate"),s;if(_||(s=i("textinfo",Array.isArray(l)?"text+percent":"percent")),i("hovertext"),i("hovertemplate"),_||s&&s!=="none"){var w=i("textposition");e(t,r,o,i,w,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var b=Array.isArray(w)||w==="auto",h=b||w==="outside";h&&i("automargin"),(w==="inside"||w==="auto"||Array.isArray(w))&&i("insidetextorientation")}A(r,o,i);var m=i("hole"),u=i("title.text");if(u){var L=i("title.position",m?"middle center":"top center");!m&&L==="middle center"&&(r.title.position="top center"),c.coerceFont(i,"title.font",o.font)}i("sort"),i("direction"),i("rotation"),i("pull")}ne.exports={handleLabelsAndValues:a,supplyDefaults:n}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":901,"fast-isnumeric":190}],905:[function(g,ne,ae){var T=g("../../components/fx/helpers").appendArrayMultiPointValues;ne.exports=function(M,A){var e={curveNumber:A.index,pointNumbers:M.pts,data:A._input,fullData:A,label:M.label,color:M.color,value:M.v,percent:M.percent,text:M.text,bbox:M.bbox,v:M.v};return M.pts.length===1&&(e.pointNumber=e.i=M.pts[0]),T(e,A,M.pts),A.type==="funnelarea"&&(delete e.v,delete e.i),e}},{"../../components/fx/helpers":402}],906:[function(g,ne,ae){var T=g("../../lib");function c(M){return M.indexOf("e")!==-1?M.replace(/[.]?0+e/,"e"):M.indexOf(".")!==-1?M.replace(/[.]?0+$/,""):M}ae.formatPiePercent=function(A,e){var a=c((A*100).toPrecision(3));return T.numSeparate(a,e)+"%"},ae.formatPieValue=function(A,e){var a=c(A.toPrecision(10));return T.numSeparate(a,e)},ae.getFirstFilled=function(A,e){if(!!Array.isArray(A))for(var a=0;a<e.length;a++){var n=A[e[a]];if(n||n===0||n==="")return n}},ae.castOption=function(A,e){if(Array.isArray(A))return ae.getFirstFilled(A,e);if(A)return A},ae.getRotationAngle=function(M){return(M==="auto"?0:M)*Math.PI/180}},{"../../lib":503}],907:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults").supplyDefaults,supplyLayoutDefaults:g("./layout_defaults"),layoutAttributes:g("./layout_attributes"),calc:g("./calc").calc,crossTraceCalc:g("./calc").crossTraceCalc,plot:g("./plot").plot,style:g("./style"),styleOne:g("./style_one"),moduleType:"trace",name:"pie",basePlotModule:g("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":901,"./base_plot":902,"./calc":903,"./defaults":904,"./layout_attributes":908,"./layout_defaults":909,"./plot":910,"./style":911,"./style_one":912}],908:[function(g,ne,ae){ne.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],909:[function(g,ne,ae){var T=g("../../lib"),c=g("./layout_attributes");ne.exports=function(A,e){function a(n,t){return T.coerce(A,e,c,n,t)}a("hiddenlabels"),a("piecolorway",e.colorway),a("extendpiecolors")}},{"../../lib":503,"./layout_attributes":908}],910:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../plots/plots"),M=g("../../components/fx"),A=g("../../components/color"),e=g("../../components/drawing"),a=g("../../lib"),n=a.strScale,t=a.strTranslate,r=g("../../lib/svg_text_utils"),f=g("../bar/uniform_text"),o=f.recordMinTextSize,i=f.clearMinTextSize,p=g("../bar/constants").TEXTPAD,d=g("./helpers"),y=g("./event_data"),v=g("../../lib").isValidTextValue;function x(oe,N){var U=oe._fullLayout,q=U._size;i("pie",U),b(N,oe),K(N,q);var Q=a.makeTraceGroups(U._pielayer,N,"trace").each(function(W){var X=T.select(this),te=W[0],ee=te.trace;G(W),X.attr("stroke-linejoin","round"),X.each(function(){var ie=T.select(this).selectAll("g.slice").data(W);ie.enter().append("g").classed("slice",!0),ie.exit().remove();var le=[[[],[]],[[],[]]],ye=!1;ie.each(function(Ue,xe){if(Ue.hidden){T.select(this).selectAll("path,g").remove();return}Ue.pointNumber=Ue.i,Ue.curveNumber=ee.index,le[Ue.pxmid[1]<0?0:1][Ue.pxmid[0]<0?0:1].push(Ue);var Pe=te.cx,Ve=te.cy,Qe=T.select(this),Fe=Qe.selectAll("path.surface").data([Ue]);if(Fe.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Qe.call(_,oe,W),ee.pull){var Le=+d.castOption(ee.pull,Ue.pts)||0;Le>0&&(Pe+=Le*Ue.pxmid[0],Ve+=Le*Ue.pxmid[1])}Ue.cxFinal=Pe,Ue.cyFinal=Ve;function Ne(Et,Mt,rt,ct){var Ze=ct*(Mt[0]-Et[0]),ke=ct*(Mt[1]-Et[1]);return"a"+ct*te.r+","+ct*te.r+" 0 "+Ue.largeArc+(rt?" 1 ":" 0 ")+Ze+","+ke}var dt=ee.hole;if(Ue.v===te.vTotal){var Dt="M"+(Pe+Ue.px0[0])+","+(Ve+Ue.px0[1])+Ne(Ue.px0,Ue.pxmid,!0,1)+Ne(Ue.pxmid,Ue.px0,!0,1)+"Z";dt?Fe.attr("d","M"+(Pe+dt*Ue.px0[0])+","+(Ve+dt*Ue.px0[1])+Ne(Ue.px0,Ue.pxmid,!1,dt)+Ne(Ue.pxmid,Ue.px0,!1,dt)+"Z"+Dt):Fe.attr("d",Dt)}else{var Xt=Ne(Ue.px0,Ue.px1,!0,1);if(dt){var Tt=1-dt;Fe.attr("d","M"+(Pe+dt*Ue.px1[0])+","+(Ve+dt*Ue.px1[1])+Ne(Ue.px1,Ue.px0,!1,dt)+"l"+Tt*Ue.px0[0]+","+Tt*Ue.px0[1]+Xt+"Z")}else Fe.attr("d","M"+Pe+","+Ve+"l"+Ue.px0[0]+","+Ue.px0[1]+Xt+"Z")}re(oe,Ue,te);var zt=d.castOption(ee.textposition,Ue.pts),Ut=Qe.selectAll("g.slicetext").data(Ue.text&&zt!=="none"?[0]:[]);Ut.enter().append("g").classed("slicetext",!0),Ut.exit().remove(),Ut.each(function(){var Et=a.ensureSingle(T.select(this),"text","",function(it){it.attr("data-notex",1)}),Mt=a.ensureUniformFontSize(oe,zt==="outside"?s(ee,Ue,U.font):w(ee,Ue,U.font));Et.text(Ue.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,Mt).call(r.convertToTspans,oe);var rt=e.bBox(Et.node()),ct;if(zt==="outside")ct=I(rt,Ue);else if(ct=h(rt,Ue,te),zt==="auto"&&ct.scale<1){var Ze=a.ensureUniformFontSize(oe,ee.outsidetextfont);Et.call(e.font,Ze),rt=e.bBox(Et.node()),ct=I(rt,Ue)}var ke=ct.textPosAngle,Ge=ke===void 0?Ue.pxmid:Z(te.r,ke);if(ct.targetX=Pe+Ge[0]*ct.rCenter+(ct.x||0),ct.targetY=Ve+Ge[1]*ct.rCenter+(ct.y||0),se(ct,rt),ct.outside){var Je=ct.targetY;Ue.yLabelMin=Je-rt.height/2,Ue.yLabelMid=Je,Ue.yLabelMax=Je+rt.height/2,Ue.labelExtraX=0,Ue.labelExtraY=0,ye=!0}ct.fontSize=Mt.size,o(ee.type,ct,U),W[xe].transform=ct,Et.attr("transform",a.getTextTransform(ct))})});var ue=T.select(this).selectAll("g.titletext").data(ee.title.text?[0]:[]);if(ue.enter().append("g").classed("titletext",!0),ue.exit().remove(),ue.each(function(){var Ue=a.ensureSingle(T.select(this),"text","",function(Ve){Ve.attr("data-notex",1)}),xe=ee.title.text;ee._meta&&(xe=a.templateString(xe,ee._meta)),Ue.text(xe).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ee.title.font).call(r.convertToTspans,oe);var Pe;ee.title.position==="middle center"?Pe=D(te):Pe=R(te,q),Ue.attr("transform",t(Pe.x,Pe.y)+n(Math.min(1,Pe.scale))+t(Pe.tx,Pe.ty))}),ye&&Y(le,ee),l(ie,ee),ye&&ee.automargin){var pe=e.bBox(X.node()),ge=ee.domain,Te=q.w*(ge.x[1]-ge.x[0]),_e=q.h*(ge.y[1]-ge.y[0]),De=(.5*Te-te.r)/q.w,Oe=(.5*_e-te.r)/q.h;c.autoMargin(oe,"pie."+ee.uid+".automargin",{xl:ge.x[0]-De,xr:ge.x[1]+De,yb:ge.y[0]-Oe,yt:ge.y[1]+Oe,l:Math.max(te.cx-te.r-pe.left,0),r:Math.max(pe.right-(te.cx+te.r),0),b:Math.max(pe.bottom-(te.cy+te.r),0),t:Math.max(te.cy-te.r-pe.top,0),pad:5})}})});setTimeout(function(){Q.selectAll("tspan").each(function(){var W=T.select(this);W.attr("dy")&&W.attr("dy",W.attr("dy"))})},0)}function l(oe,N){oe.each(function(U){var q=T.select(this);if(!U.labelExtraX&&!U.labelExtraY){q.select("path.textline").remove();return}var Q=q.select("g.slicetext text");U.transform.targetX+=U.labelExtraX,U.transform.targetY+=U.labelExtraY,Q.attr("transform",a.getTextTransform(U.transform));var W=U.cxFinal+U.pxmid[0],X=U.cyFinal+U.pxmid[1],te="M"+W+","+X,ee=(U.yLabelMax-U.yLabelMin)*(U.pxmid[0]<0?-1:1)/4;if(U.labelExtraX){var ie=U.labelExtraX*U.pxmid[1]/U.pxmid[0],le=U.yLabelMid+U.labelExtraY-(U.cyFinal+U.pxmid[1]);Math.abs(ie)>Math.abs(le)?te+="l"+le*U.pxmid[0]/U.pxmid[1]+","+le+"H"+(W+U.labelExtraX+ee):te+="l"+U.labelExtraX+","+ie+"v"+(le-ie)+"h"+ee}else te+="V"+(U.yLabelMid+U.labelExtraY)+"h"+ee;a.ensureSingle(q,"path","textline").call(A.stroke,N.outsidetextfont.color).attr({"stroke-width":Math.min(2,N.outsidetextfont.size/8),d:te,fill:"none"})})}function _(oe,N,U){var q=U[0],Q=q.cx,W=q.cy,X=q.trace,te=X.type==="funnelarea";"_hasHoverLabel"in X||(X._hasHoverLabel=!1),"_hasHoverEvent"in X||(X._hasHoverEvent=!1),oe.on("mouseover",function(ee){var ie=N._fullLayout,le=N._fullData[X.index];if(!(N._dragging||ie.hovermode===!1)){var ye=le.hoverinfo;if(Array.isArray(ye)&&(ye=M.castHoverinfo({hoverinfo:[d.castOption(ye,ee.pts)],_module:X._module},ie,0)),ye==="all"&&(ye="label+text+value+percent+name"),le.hovertemplate||ye!=="none"&&ye!=="skip"&&ye){var ue=ee.rInscribed||0,pe=Q+ee.pxmid[0]*(1-ue),ge=W+ee.pxmid[1]*(1-ue),Te=ie.separators,_e=[];if(ye&&ye.indexOf("label")!==-1&&_e.push(ee.label),ee.text=d.castOption(le.hovertext||le.text,ee.pts),ye&&ye.indexOf("text")!==-1){var De=ee.text;a.isValidTextValue(De)&&_e.push(De)}ee.value=ee.v,ee.valueLabel=d.formatPieValue(ee.v,Te),ye&&ye.indexOf("value")!==-1&&_e.push(ee.valueLabel),ee.percent=ee.v/q.vTotal,ee.percentLabel=d.formatPiePercent(ee.percent,Te),ye&&ye.indexOf("percent")!==-1&&_e.push(ee.percentLabel);var Oe=le.hoverlabel,Ue=Oe.font,xe=[];M.loneHover({trace:X,x0:pe-ue*q.r,x1:pe+ue*q.r,y:ge,_x0:te?Q+ee.TL[0]:pe-ue*q.r,_x1:te?Q+ee.TR[0]:pe+ue*q.r,_y0:te?W+ee.TL[1]:ge-ue*q.r,_y1:te?W+ee.BL[1]:ge+ue*q.r,text:_e.join("<br>"),name:le.hovertemplate||ye.indexOf("name")!==-1?le.name:void 0,idealAlign:ee.pxmid[0]<0?"left":"right",color:d.castOption(Oe.bgcolor,ee.pts)||ee.color,borderColor:d.castOption(Oe.bordercolor,ee.pts),fontFamily:d.castOption(Ue.family,ee.pts),fontSize:d.castOption(Ue.size,ee.pts),fontColor:d.castOption(Ue.color,ee.pts),nameLength:d.castOption(Oe.namelength,ee.pts),textAlign:d.castOption(Oe.align,ee.pts),hovertemplate:d.castOption(le.hovertemplate,ee.pts),hovertemplateLabels:ee,eventData:[y(ee,le)]},{container:ie._hoverlayer.node(),outerContainer:ie._paper.node(),gd:N,inOut_bbox:xe}),ee.bbox=xe[0],X._hasHoverLabel=!0}X._hasHoverEvent=!0,N.emit("plotly_hover",{points:[y(ee,le)],event:T.event})}}),oe.on("mouseout",function(ee){var ie=N._fullLayout,le=N._fullData[X.index],ye=T.select(this).datum();X._hasHoverEvent&&(ee.originalEvent=T.event,N.emit("plotly_unhover",{points:[y(ye,le)],event:T.event}),X._hasHoverEvent=!1),X._hasHoverLabel&&(M.loneUnhover(ie._hoverlayer.node()),X._hasHoverLabel=!1)}),oe.on("click",function(ee){var ie=N._fullLayout,le=N._fullData[X.index];N._dragging||ie.hovermode===!1||(N._hoverdata=[y(ee,le)],M.click(N,T.event))})}function s(oe,N,U){var q=d.castOption(oe.outsidetextfont.color,N.pts)||d.castOption(oe.textfont.color,N.pts)||U.color,Q=d.castOption(oe.outsidetextfont.family,N.pts)||d.castOption(oe.textfont.family,N.pts)||U.family,W=d.castOption(oe.outsidetextfont.size,N.pts)||d.castOption(oe.textfont.size,N.pts)||U.size;return{color:q,family:Q,size:W}}function w(oe,N,U){var q=d.castOption(oe.insidetextfont.color,N.pts);!q&&oe._input.textfont&&(q=d.castOption(oe._input.textfont.color,N.pts));var Q=d.castOption(oe.insidetextfont.family,N.pts)||d.castOption(oe.textfont.family,N.pts)||U.family,W=d.castOption(oe.insidetextfont.size,N.pts)||d.castOption(oe.textfont.size,N.pts)||U.size;return{color:q||A.contrast(N.color),family:Q,size:W}}function b(oe,N){for(var U,q,Q=0;Q<oe.length;Q++)if(U=oe[Q][0],q=U.trace,q.title.text){var W=q.title.text;q._meta&&(W=a.templateString(W,q._meta));var X=e.tester.append("text").attr("data-notex",1).text(W).call(e.font,q.title.font).call(r.convertToTspans,N),te=e.bBox(X.node(),!0);U.titleBox={width:te.width,height:te.height},X.remove()}}function h(oe,N,U){var q=U.r||N.rpx1,Q=N.rInscribed,W=N.startangle===N.stopangle;if(W)return{rCenter:1-Q,scale:0,rotate:0,textPosAngle:0};var X=N.ring,te=X===1&&Math.abs(N.startangle-N.stopangle)===Math.PI*2,ee=N.halfangle,ie=N.midangle,le=U.trace.insidetextorientation,ye=le==="horizontal",ue=le==="tangential",pe=le==="radial",ge=le==="auto",Te=[],_e;if(!ge){var De=function(Fe,Le){if(m(N,Fe)){var Ne=Math.abs(Fe-N.startangle),dt=Math.abs(Fe-N.stopangle),Dt=Ne<dt?Ne:dt;Le==="tan"?_e=L(oe,q,X,Dt,0):_e=u(oe,q,X,Dt,Math.PI/2),_e.textPosAngle=Fe,Te.push(_e)}},Oe;if(ye||ue){for(Oe=4;Oe>=-4;Oe-=2)De(Math.PI*Oe,"tan");for(Oe=4;Oe>=-4;Oe-=2)De(Math.PI*(Oe+1),"tan")}if(ye||pe){for(Oe=4;Oe>=-4;Oe-=2)De(Math.PI*(Oe+1.5),"rad");for(Oe=4;Oe>=-4;Oe-=2)De(Math.PI*(Oe+.5),"rad")}}if(te||ge||ye){var Ue=Math.sqrt(oe.width*oe.width+oe.height*oe.height);if(_e={scale:Q*q*2/Ue,rCenter:1-Q,rotate:0},_e.textPosAngle=(N.startangle+N.stopangle)/2,_e.scale>=1)return _e;Te.push(_e)}(ge||pe)&&(_e=u(oe,q,X,ee,ie),_e.textPosAngle=(N.startangle+N.stopangle)/2,Te.push(_e)),(ge||ue)&&(_e=L(oe,q,X,ee,ie),_e.textPosAngle=(N.startangle+N.stopangle)/2,Te.push(_e));for(var xe=0,Pe=0,Ve=0;Ve<Te.length;Ve++){var Qe=Te[Ve].scale;if(Pe<Qe&&(Pe=Qe,xe=Ve),!ge&&Pe>=1)break}return Te[xe]}function m(oe,N){var U=oe.startangle,q=oe.stopangle;return U>N&&N>q||U<N&&N<q}function u(oe,N,U,q,Q){N=Math.max(0,N-2*p);var W=oe.width/oe.height,X=P(W,q,N,U);return{scale:X*2/oe.height,rCenter:S(W,X/N),rotate:k(Q)}}function L(oe,N,U,q,Q){N=Math.max(0,N-2*p);var W=oe.height/oe.width,X=P(W,q,N,U);return{scale:X*2/oe.width,rCenter:S(W,X/N),rotate:k(Q+Math.PI/2)}}function S(oe,N){return Math.cos(N)-oe*N}function k(oe){return(180/Math.PI*oe+720)%180-90}function P(oe,N,U,q){var Q=oe+1/(2*Math.tan(N));return U*Math.min(1/(Math.sqrt(Q*Q+.5)+Q),q/(Math.sqrt(oe*oe+q/2)+oe))}function z(oe,N){return oe.v===N.vTotal&&!N.trace.hole?1:Math.min(1/(1+1/Math.sin(oe.halfangle)),oe.ring/2)}function I(oe,N){var U=N.pxmid[0],q=N.pxmid[1],Q=oe.width/2,W=oe.height/2;return U<0&&(Q*=-1),q<0&&(W*=-1),{scale:1,rCenter:1,rotate:0,x:Q+Math.abs(W)*(Q>0?1:-1)/2,y:W/(1+U*U/(q*q)),outside:!0}}function D(oe){var N=Math.sqrt(oe.titleBox.width*oe.titleBox.width+oe.titleBox.height*oe.titleBox.height);return{x:oe.cx,y:oe.cy,scale:oe.trace.hole*oe.r*2/N,tx:0,ty:-oe.titleBox.height/2+oe.trace.title.font.size}}function R(oe,N){var U=1,q=1,Q,W=oe.trace,X={x:oe.cx,y:oe.cy},te={tx:0,ty:0};te.ty+=W.title.font.size,Q=V(W),W.title.position.indexOf("top")!==-1?(X.y-=(1+Q)*oe.r,te.ty-=oe.titleBox.height):W.title.position.indexOf("bottom")!==-1&&(X.y+=(1+Q)*oe.r);var ee=B(oe.r,oe.trace.aspectratio),ie=N.w*(W.domain.x[1]-W.domain.x[0])/2;return W.title.position.indexOf("left")!==-1?(ie=ie+ee,X.x-=(1+Q)*ee,te.tx+=oe.titleBox.width/2):W.title.position.indexOf("center")!==-1?ie*=2:W.title.position.indexOf("right")!==-1&&(ie=ie+ee,X.x+=(1+Q)*ee,te.tx-=oe.titleBox.width/2),U=ie/oe.titleBox.width,q=F(oe,N)/oe.titleBox.height,{x:X.x,y:X.y,scale:Math.min(U,q),tx:te.tx,ty:te.ty}}function B(oe,N){return oe/(N===void 0?1:N)}function F(oe,N){var U=oe.trace,q=N.h*(U.domain.y[1]-U.domain.y[0]);return Math.min(oe.titleBox.height,q/2)}function V(oe){var N=oe.pull;if(!N)return 0;var U;if(Array.isArray(N))for(N=0,U=0;U<oe.pull.length;U++)oe.pull[U]>N&&(N=oe.pull[U]);return N}function Y(oe,N){var U,q,Q,W,X,te,ee,ie,le,ye,ue,pe,ge;function Te(Ue,xe){return Ue.pxmid[1]-xe.pxmid[1]}function _e(Ue,xe){return xe.pxmid[1]-Ue.pxmid[1]}function De(Ue,xe){xe||(xe={});var Pe=xe.labelExtraY+(q?xe.yLabelMax:xe.yLabelMin),Ve=q?Ue.yLabelMin:Ue.yLabelMax,Qe=q?Ue.yLabelMax:Ue.yLabelMin,Fe=Ue.cyFinal+X(Ue.px0[1],Ue.px1[1]),Le=Pe-Ve,Ne,dt,Dt,Xt,Tt,zt;if(Le*ee>0&&(Ue.labelExtraY=Le),!!Array.isArray(N.pull))for(dt=0;dt<ye.length;dt++)Dt=ye[dt],!(Dt===Ue||(d.castOption(N.pull,Ue.pts)||0)>=(d.castOption(N.pull,Dt.pts)||0))&&((Ue.pxmid[1]-Dt.pxmid[1])*ee>0?(Xt=Dt.cyFinal+X(Dt.px0[1],Dt.px1[1]),Le=Xt-Ve-Ue.labelExtraY,Le*ee>0&&(Ue.labelExtraY+=Le)):(Qe+Ue.labelExtraY-Fe)*ee>0&&(Ne=3*te*Math.abs(dt-ye.indexOf(Ue)),Tt=Dt.cxFinal+W(Dt.px0[0],Dt.px1[0]),zt=Tt+Ne-(Ue.cxFinal+Ue.pxmid[0])-Ue.labelExtraX,zt*te>0&&(Ue.labelExtraX+=zt)))}for(q=0;q<2;q++)for(Q=q?Te:_e,X=q?Math.max:Math.min,ee=q?1:-1,U=0;U<2;U++){for(W=U?Math.max:Math.min,te=U?1:-1,ie=oe[q][U],ie.sort(Q),le=oe[1-q][U],ye=le.concat(ie),pe=[],ue=0;ue<ie.length;ue++)ie[ue].yLabelMid!==void 0&&pe.push(ie[ue]);for(ge=!1,ue=0;q&&ue<le.length;ue++)if(le[ue].yLabelMid!==void 0){ge=le[ue];break}for(ue=0;ue<pe.length;ue++){var Oe=ue&&pe[ue-1];ge&&!ue&&(Oe=ge),De(pe[ue],Oe)}}}function K(oe,N){for(var U=[],q=0;q<oe.length;q++){var Q=oe[q][0],W=Q.trace,X=W.domain,te=N.w*(X.x[1]-X.x[0]),ee=N.h*(X.y[1]-X.y[0]);W.title.text&&W.title.position!=="middle center"&&(ee-=F(Q,N));var ie=te/2,le=ee/2;W.type==="funnelarea"&&!W.scalegroup&&(le/=W.aspectratio),Q.r=Math.min(ie,le)/(1+V(W)),Q.cx=N.l+N.w*(W.domain.x[1]+W.domain.x[0])/2,Q.cy=N.t+N.h*(1-W.domain.y[0])-ee/2,W.title.text&&W.title.position.indexOf("bottom")!==-1&&(Q.cy-=F(Q,N)),W.scalegroup&&U.indexOf(W.scalegroup)===-1&&U.push(W.scalegroup)}J(oe,U)}function J(oe,N){for(var U,q,Q,W=0;W<N.length;W++){var X=1/0,te=N[W];for(q=0;q<oe.length;q++)if(U=oe[q][0],Q=U.trace,Q.scalegroup===te){var ee;if(Q.type==="pie")ee=U.r*U.r;else if(Q.type==="funnelarea"){var ie,le;Q.aspectratio>1?(ie=U.r,le=ie/Q.aspectratio):(le=U.r,ie=le*Q.aspectratio),ie*=(1+Q.baseratio)/2,ee=ie*le}X=Math.min(X,ee/U.vTotal)}for(q=0;q<oe.length;q++)if(U=oe[q][0],Q=U.trace,Q.scalegroup===te){var ye=X*U.vTotal;Q.type==="funnelarea"&&(ye/=(1+Q.baseratio)/2,ye/=Q.aspectratio),U.r=Math.sqrt(ye)}}}function G(oe){var N=oe[0],U=N.r,q=N.trace,Q=d.getRotationAngle(q.rotation),W=2*Math.PI/N.vTotal,X="px0",te="px1",ee,ie,le;if(q.direction==="counterclockwise"){for(ee=0;ee<oe.length&&oe[ee].hidden;ee++);if(ee===oe.length)return;Q+=W*oe[ee].v,W*=-1,X="px1",te="px0"}for(le=Z(U,Q),ee=0;ee<oe.length;ee++)ie=oe[ee],!ie.hidden&&(ie[X]=le,ie.startangle=Q,Q+=W*ie.v/2,ie.pxmid=Z(U,Q),ie.midangle=Q,Q+=W*ie.v/2,le=Z(U,Q),ie.stopangle=Q,ie[te]=le,ie.largeArc=ie.v>N.vTotal/2?1:0,ie.halfangle=Math.PI*Math.min(ie.v/N.vTotal,.5),ie.ring=1-q.hole,ie.rInscribed=z(ie,N))}function Z(oe,N){return[oe*Math.sin(N),-oe*Math.cos(N)]}function re(oe,N,U){var q=oe._fullLayout,Q=U.trace,W=Q.texttemplate,X=Q.textinfo;if(!W&&X&&X!=="none"){var te=X.split("+"),ee=function(xe){return te.indexOf(xe)!==-1},ie=ee("label"),le=ee("text"),ye=ee("value"),ue=ee("percent"),pe=q.separators,ge;if(ge=ie?[N.label]:[],le){var Te=d.getFirstFilled(Q.text,N.pts);v(Te)&&ge.push(Te)}ye&&ge.push(d.formatPieValue(N.v,pe)),ue&&ge.push(d.formatPiePercent(N.v/U.vTotal,pe)),N.text=ge.join("<br>")}function _e(xe){return{label:xe.label,value:xe.v,valueLabel:d.formatPieValue(xe.v,q.separators),percent:xe.v/U.vTotal,percentLabel:d.formatPiePercent(xe.v/U.vTotal,q.separators),color:xe.color,text:xe.text,customdata:a.castOption(Q,xe.i,"customdata")}}if(W){var De=a.castOption(Q,N.i,"texttemplate");if(!De)N.text="";else{var Oe=_e(N),Ue=d.getFirstFilled(Q.text,N.pts);(v(Ue)||Ue==="")&&(Oe.text=Ue),N.text=a.texttemplateString(De,Oe,oe._fullLayout._d3locale,Oe,Q._meta||{})}}}function se(oe,N){var U=oe.rotate*Math.PI/180,q=Math.cos(U),Q=Math.sin(U),W=(N.left+N.right)/2,X=(N.top+N.bottom)/2;oe.textX=W*q-X*Q,oe.textY=W*Q+X*q,oe.noCenter=!0}ne.exports={plot:x,formatSliceLabel:re,transformInsideText:h,determineInsideTextFont:w,positionTitleOutside:R,prerenderTitles:b,layoutAreas:K,attachFxHandlers:_,computeTransform:se}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":905,"./helpers":906,"@plotly/d3":58}],911:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("./style_one"),M=g("../bar/uniform_text").resizeText;ne.exports=function(e){var a=e._fullLayout._pielayer.selectAll(".trace");M(e,a,"pie"),a.each(function(n){var t=n[0],r=t.trace,f=T.select(this);f.style({opacity:r.opacity}),f.selectAll("path.surface").each(function(o){T.select(this).call(c,o,r)})})}},{"../bar/uniform_text":664,"./style_one":912,"@plotly/d3":58}],912:[function(g,ne,ae){var T=g("../../components/color"),c=g("./helpers").castOption;ne.exports=function(A,e,a){var n=a.marker.line,t=c(n.color,e.pts)||T.defaultLine,r=c(n.width,e.pts)||0;A.style("stroke-width",r).call(T.fill,e.color).call(T.stroke,t)}},{"../../components/color":366,"./helpers":906}],913:[function(g,ne,ae){var T=g("../scatter/attributes");ne.exports={x:T.x,y:T.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:T.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":927}],914:[function(g,ne,ae){var T=g("../../../stackgl_modules").gl_pointcloud2d,c=g("../../lib/str2rgbarray"),M=g("../../plots/cartesian/autorange").findExtremes,A=g("../scatter/get_trace_color");function e(t,r){this.scene=t,this.uid=r,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=T(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var a=e.prototype;a.handlePick=function(t){var r=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[r*2],this.pickXYData[r*2+1]]:[this.pickXData[r],this.pickYData[r]],textLabel:Array.isArray(this.textLabels)?this.textLabels[r]:this.textLabels,color:this.color,name:this.name,pointIndex:r,hoverinfo:this.hoverinfo}},a.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=A(t,{})},a.updateFast=function(t){var r=this.xData=this.pickXData=t.x,f=this.yData=this.pickYData=t.y,o=this.pickXYData=t.xy,i=t.xbounds&&t.ybounds,p=t.indices,d,y,v,x=this.bounds,l,_,s;if(o){if(v=o,d=o.length>>>1,i)x[0]=t.xbounds[0],x[2]=t.xbounds[1],x[1]=t.ybounds[0],x[3]=t.ybounds[1];else for(s=0;s<d;s++)l=v[s*2],_=v[s*2+1],l<x[0]&&(x[0]=l),l>x[2]&&(x[2]=l),_<x[1]&&(x[1]=_),_>x[3]&&(x[3]=_);if(p)y=p;else for(y=new Int32Array(d),s=0;s<d;s++)y[s]=s}else for(d=r.length,v=new Float32Array(2*d),y=new Int32Array(d),s=0;s<d;s++)l=r[s],_=f[s],y[s]=s,v[s*2]=l,v[s*2+1]=_,l<x[0]&&(x[0]=l),l>x[2]&&(x[2]=l),_<x[1]&&(x[1]=_),_>x[3]&&(x[3]=_);this.idToIndex=y,this.pointcloudOptions.idToIndex=y,this.pointcloudOptions.positions=v;var w=c(t.marker.color),b=c(t.marker.border.color),h=t.opacity*t.marker.opacity;w[3]*=h,this.pointcloudOptions.color=w;var m=t.marker.blend;if(m===null){var u=100;m=r.length<u||f.length<u}this.pointcloudOptions.blend=m,b[3]*=h,this.pointcloudOptions.borderColor=b;var L=t.marker.sizemin,S=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=L,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var k=this.scene.xaxis,P=this.scene.yaxis,z=S/2||.5;t._extremes[k._id]=M(k,[x[0],x[2]],{ppad:z}),t._extremes[P._id]=M(P,[x[1],x[3]],{ppad:z})},a.dispose=function(){this.pointcloud.dispose()};function n(t,r){var f=new e(t,r.uid);return f.update(r),f}ne.exports=n},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":937}],915:[function(g,ne,ae){var T=g("../../lib"),c=g("./attributes");ne.exports=function(A,e,a){function n(t,r){return T.coerce(A,e,c,t,r)}n("x"),n("y"),n("xbounds"),n("ybounds"),A.xy&&A.xy instanceof Float32Array&&(e.xy=A.xy),A.indices&&A.indices instanceof Int32Array&&(e.indices=A.indices),n("text"),n("marker.color",a),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",a),n("marker.border.arearatio"),e._length=null}},{"../../lib":503,"./attributes":913}],916:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("../scatter3d/calc"),plot:g("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:g("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":956,"./attributes":913,"./convert":914,"./defaults":915}],917:[function(g,ne,ae){var T=g("../../plots/font_attributes"),c=g("../../plots/attributes"),M=g("../../components/color/attributes"),A=g("../../components/fx/attributes"),e=g("../../plots/domain").attributes,a=g("../../plots/template_attributes").hovertemplateAttrs,n=g("../../components/colorscale/attributes"),t=g("../../plot_api/plot_template").templatedArray,r=g("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,f=g("../../lib/extend").extendFlat,o=g("../../plot_api/edit_types").overrideAll,i=ne.exports=o({hoverinfo:f({},c.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:A.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:T({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:M.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:A.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:M.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:A.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:f(n().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");i.transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],918:[function(g,ne,ae){var T=g("../../plot_api/edit_types").overrideAll,c=g("../../plots/get_data").getModuleCalcData,M=g("./plot"),A=g("../../components/fx/layout_attributes"),e=g("../../lib/setcursor"),a=g("../../components/dragelement"),n=g("../../plots/cartesian/select").prepSelect,t=g("../../lib"),r=g("../../registry"),f="sankey";ae.name=f,ae.baseLayoutAttrOverrides=T({hoverlabel:A.hoverlabel},"plot","nested"),ae.plot=function(i){var p=c(i.calcdata,f)[0];M(i,p),ae.updateFx(i)},ae.clean=function(i,p,d,y){var v=y._has&&y._has(f),x=p._has&&p._has(f);v&&!x&&(y._paperdiv.selectAll(".sankey").remove(),y._paperdiv.selectAll(".bgsankey").remove())},ae.updateFx=function(i){for(var p=0;p<i._fullData.length;p++)o(i,p)};function o(i,p){var d=i._fullData[p],y=i._fullLayout,v=y.dragmode,x=y.dragmode==="pan"?"move":"crosshair",l=d._bgRect;if(!(v==="pan"||v==="zoom")){e(l,x);var _={_id:"x",c2p:t.identity,_offset:d._sankey.translateX,_length:d._sankey.width},s={_id:"y",c2p:t.identity,_offset:d._sankey.translateY,_length:d._sankey.height},w={gd:i,element:l.node(),plotinfo:{id:p,xaxis:_,yaxis:s,fillRangeItems:t.noop},subplot:p,xaxes:[_],yaxes:[s],doneFnCompleted:function(b){var h=i._fullData[p],m,u=h.node.groups.slice(),L=[];function S(I){for(var D=h._sankey.graph.nodes,R=0;R<D.length;R++)if(D[R].pointNumber===I)return D[R]}for(var k=0;k<b.length;k++){var P=S(b[k].pointNumber);if(!!P)if(P.group){for(var z=0;z<P.childrenNodes.length;z++)L.push(P.childrenNodes[z].pointNumber);u[P.pointNumber-h.node._count]=!1}else L.push(P.pointNumber)}m=u.filter(Boolean).concat([L]),r.call("_guiRestyle",i,{"node.groups":[m]},p)}};w.prepFn=function(b,h,m){n(b,h,m,w,v)},a.init(w)}}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":923}],919:[function(g,ne,ae){var T=g("strongly-connected-components"),c=g("../../lib"),M=g("../../lib/gup").wrap,A=c.isArrayOrTypedArray,e=c.isIndex,a=g("../../components/colorscale");function n(r){var f=r.node,o=r.link,i=[],p=A(o.color),d=A(o.customdata),y={},v={},x=o.colorscales.length,l;for(l=0;l<x;l++){var _=o.colorscales[l],s=a.extractScale(_,{cLetter:"c"}),w=a.makeColorScaleFunc(s);v[_.label]=w}var b=0;for(l=0;l<o.value.length;l++)o.source[l]>b&&(b=o.source[l]),o.target[l]>b&&(b=o.target[l]);var h=b+1;r.node._count=h;var m,u=r.node.groups,L={};for(l=0;l<u.length;l++){var S=u[l];for(m=0;m<S.length;m++){var k=S[m],P=h+l;L.hasOwnProperty(k)?c.warn("Node "+k+" is already part of a group."):L[k]=P}}var z={source:[],target:[]};for(l=0;l<o.value.length;l++){var I=o.value[l],D=o.source[l],R=o.target[l];if(!!(I>0&&e(D,h)&&e(R,h))&&!(L.hasOwnProperty(D)&&L.hasOwnProperty(R)&&L[D]===L[R])){L.hasOwnProperty(R)&&(R=L[R]),L.hasOwnProperty(D)&&(D=L[D]),D=+D,R=+R,y[D]=y[R]=!0;var B="";o.label&&o.label[l]&&(B=o.label[l]);var F=null;B&&v.hasOwnProperty(B)&&(F=v[B]),i.push({pointNumber:l,label:B,color:p?o.color[l]:o.color,customdata:d?o.customdata[l]:o.customdata,concentrationscale:F,source:D,target:R,value:+I}),z.source.push(D),z.target.push(R)}}var V=h+u.length,Y=A(f.color),K=A(f.customdata),J=[];for(l=0;l<V;l++)if(!!y[l]){var G=f.label[l];J.push({group:l>h-1,childrenNodes:[],pointNumber:l,label:G,color:Y?f.color[l]:f.color,customdata:K?f.customdata[l]:f.customdata})}var Z=!1;return t(V,z.source,z.target)&&(Z=!0),{circular:Z,links:i,nodes:J,groups:u,groupLookup:L}}function t(r,f,o){for(var i=c.init2dArray(r,0),p=0;p<Math.min(f.length,o.length);p++)if(c.isIndex(f[p],r)&&c.isIndex(o[p],r)){if(f[p]===o[p])return!0;i[f[p]].push(o[p])}var d=T(i);return d.components.some(function(y){return y.length>1})}ne.exports=function(f,o){var i=n(o);return M({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],920:[function(g,ne,ae){ne.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],921:[function(g,ne,ae){var T=g("../../lib"),c=g("./attributes"),M=g("../../components/color"),A=g("tinycolor2"),e=g("../../plots/domain").defaults,a=g("../../components/fx/hoverlabel_defaults"),n=g("../../plot_api/plot_template"),t=g("../../plots/array_container_defaults");ne.exports=function(o,i,p,d){function y(S,k){return T.coerce(o,i,c,S,k)}var v=T.extendDeep(d.hoverlabel,o.hoverlabel),x=o.node,l=n.newContainer(i,"node");function _(S,k){return T.coerce(x,l,c.node,S,k)}_("label"),_("groups"),_("x"),_("y"),_("pad"),_("thickness"),_("line.color"),_("line.width"),_("hoverinfo",o.hoverinfo),a(x,l,_,v),_("hovertemplate");var s=d.colorway,w=function(S){return s[S%s.length]};_("color",l.label.map(function(S,k){return M.addOpacity(w(k),.8)})),_("customdata");var b=o.link||{},h=n.newContainer(i,"link");function m(S,k){return T.coerce(b,h,c.link,S,k)}m("label"),m("source"),m("target"),m("value"),m("line.color"),m("line.width"),m("hoverinfo",o.hoverinfo),a(b,h,m,v),m("hovertemplate");var u=A(d.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";m("color",T.repeat(u,h.value.length)),m("customdata"),t(b,h,{name:"colorscales",handleItemDefaults:r}),e(i,d,y),y("orientation"),y("valueformat"),y("valuesuffix");var L;l.x.length&&l.y.length&&(L="freeform"),y("arrangement",L),T.coerceFont(y,"textfont",T.extendFlat({},d.font)),i._length=null};function r(f,o){function i(p,d){return T.coerce(f,o,c.link.colorscales,p,d)}i("label"),i("cmin"),i("cmax"),i("colorscale")}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":917,tinycolor2:312}],922:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),plot:g("./plot"),moduleType:"trace",name:"sankey",basePlotModule:g("./base_plot"),selectPoints:g("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":917,"./base_plot":918,"./calc":919,"./defaults":921,"./plot":923,"./select.js":925}],923:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=c.numberFormat,A=g("./render"),e=g("../../components/fx"),a=g("../../components/color"),n=g("./constants").cn,t=c._;function r(s){return s!==""}function f(s,w){return s.filter(function(b){return b.key===w.traceId})}function o(s,w){T.select(s).select("path").style("fill-opacity",w),T.select(s).select("rect").style("fill-opacity",w)}function i(s){T.select(s).select("text.name").style("fill","black")}function p(s){return function(w){return s.node.sourceLinks.indexOf(w.link)!==-1||s.node.targetLinks.indexOf(w.link)!==-1}}function d(s){return function(w){return w.node.sourceLinks.indexOf(s.link)!==-1||w.node.targetLinks.indexOf(s.link)!==-1}}function y(s,w,b){w&&b&&f(b,w).selectAll("."+n.sankeyLink).filter(p(w)).call(x.bind(0,w,b,!1))}function v(s,w,b){w&&b&&f(b,w).selectAll("."+n.sankeyLink).filter(p(w)).call(l.bind(0,w,b,!1))}function x(s,w,b,h){var m=h.datum().link.label;h.style("fill-opacity",function(u){if(!u.link.concentrationscale)return .4}),m&&f(w,s).selectAll("."+n.sankeyLink).filter(function(u){return u.link.label===m}).style("fill-opacity",function(u){if(!u.link.concentrationscale)return .4}),b&&f(w,s).selectAll("."+n.sankeyNode).filter(d(s)).call(y)}function l(s,w,b,h){var m=h.datum().link.label;h.style("fill-opacity",function(u){return u.tinyColorAlpha}),m&&f(w,s).selectAll("."+n.sankeyLink).filter(function(u){return u.link.label===m}).style("fill-opacity",function(u){return u.tinyColorAlpha}),b&&f(w,s).selectAll(n.sankeyNode).filter(d(s)).call(v)}function _(s,w){var b=s.hoverlabel||{},h=c.nestedProperty(b,w).get();return Array.isArray(h)?!1:h}ne.exports=function(w,b){for(var h=w._fullLayout,m=h._paper,u=h._size,L=0;L<w._fullData.length;L++)if(!!w._fullData[L].visible&&w._fullData[L].type===n.sankey&&!w._fullData[L]._viewInitial){var S=w._fullData[L].node;w._fullData[L]._viewInitial={node:{groups:S.groups.slice(),x:S.x.slice(),y:S.y.slice()}}}var k=function(Z,re){var se=re.link;se.originalEvent=T.event,w._hoverdata=[se],e.click(w,{target:!0})},P=function(Z,re,se){w._fullLayout.hovermode!==!1&&(T.select(Z).call(x.bind(0,re,se,!0)),re.link.trace.link.hoverinfo!=="skip"&&(re.link.fullData=re.link.trace,w.emit("plotly_hover",{event:T.event,points:[re.link]})))},z=t(w,"source:")+" ",I=t(w,"target:")+" ",D=t(w,"concentration:")+" ",R=t(w,"incoming flow count:")+" ",B=t(w,"outgoing flow count:")+" ",F=function(Z,re){if(w._fullLayout.hovermode===!1)return;var se=re.link.trace.link;if(se.hoverinfo==="none"||se.hoverinfo==="skip")return;var oe=[];function N(ee){var ie,le;ee.circular?(ie=(ee.circularPathData.leftInnerExtent+ee.circularPathData.rightInnerExtent)/2,le=ee.circularPathData.verticalFullExtent):(ie=(ee.source.x1+ee.target.x0)/2,le=(ee.y0+ee.y1)/2);var ye=[ie,le];return ee.trace.orientation==="v"&&ye.reverse(),ye[0]+=re.parent.translateX,ye[1]+=re.parent.translateY,ye}for(var U=0,q=0;q<re.flow.links.length;q++){var Q=re.flow.links[q];if(!(w._fullLayout.hovermode==="closest"&&re.link.pointNumber!==Q.pointNumber)){re.link.pointNumber===Q.pointNumber&&(U=q),Q.fullData=Q.trace,se=re.link.trace.link;var W=N(Q),X={valueLabel:M(re.valueFormat)(Q.value)+re.valueSuffix};oe.push({x:W[0],y:W[1],name:X.valueLabel,text:[Q.label||"",z+Q.source.label,I+Q.target.label,Q.concentrationscale?D+M("%0.2f")(Q.flow.labelConcentration):""].filter(r).join("<br>"),color:_(se,"bgcolor")||a.addOpacity(Q.color,1),borderColor:_(se,"bordercolor"),fontFamily:_(se,"font.family"),fontSize:_(se,"font.size"),fontColor:_(se,"font.color"),nameLength:_(se,"namelength"),textAlign:_(se,"align"),idealAlign:T.event.x<W[0]?"right":"left",hovertemplate:se.hovertemplate,hovertemplateLabels:X,eventData:[Q]})}}var te=e.loneHover(oe,{container:h._hoverlayer.node(),outerContainer:h._paper.node(),gd:w,anchorIndex:U});te.each(function(){var ee=this;re.link.concentrationscale||o(ee,.65),i(ee)})},V=function(Z,re,se){w._fullLayout.hovermode!==!1&&(T.select(Z).call(l.bind(0,re,se,!0)),re.link.trace.link.hoverinfo!=="skip"&&(re.link.fullData=re.link.trace,w.emit("plotly_unhover",{event:T.event,points:[re.link]})),e.loneUnhover(h._hoverlayer.node()))},Y=function(Z,re,se){var oe=re.node;oe.originalEvent=T.event,w._hoverdata=[oe],T.select(Z).call(v,re,se),e.click(w,{target:!0})},K=function(Z,re,se){w._fullLayout.hovermode!==!1&&(T.select(Z).call(y,re,se),re.node.trace.node.hoverinfo!=="skip"&&(re.node.fullData=re.node.trace,w.emit("plotly_hover",{event:T.event,points:[re.node]})))},J=function(Z,re){if(w._fullLayout.hovermode!==!1){var se=re.node.trace.node;if(!(se.hoverinfo==="none"||se.hoverinfo==="skip")){var oe=T.select(Z).select("."+n.nodeRect),N=w._fullLayout._paperdiv.node().getBoundingClientRect(),U=oe.node().getBoundingClientRect(),q=U.left-2-N.left,Q=U.right+2-N.left,W=U.top+U.height/4-N.top,X={valueLabel:M(re.valueFormat)(re.node.value)+re.valueSuffix};re.node.fullData=re.node.trace,w._fullLayout._calcInverseTransform(w);var te=w._fullLayout._invScaleX,ee=w._fullLayout._invScaleY,ie=e.loneHover({x0:te*q,x1:te*Q,y:ee*W,name:M(re.valueFormat)(re.node.value)+re.valueSuffix,text:[re.node.label,R+re.node.targetLinks.length,B+re.node.sourceLinks.length].filter(r).join("<br>"),color:_(se,"bgcolor")||re.tinyColorHue,borderColor:_(se,"bordercolor"),fontFamily:_(se,"font.family"),fontSize:_(se,"font.size"),fontColor:_(se,"font.color"),nameLength:_(se,"namelength"),textAlign:_(se,"align"),idealAlign:"left",hovertemplate:se.hovertemplate,hovertemplateLabels:X,eventData:[re.node]},{container:h._hoverlayer.node(),outerContainer:h._paper.node(),gd:w});o(ie,.85),i(ie)}}},G=function(Z,re,se){w._fullLayout.hovermode!==!1&&(T.select(Z).call(v,re,se),re.node.trace.node.hoverinfo!=="skip"&&(re.node.fullData=re.node.trace,w.emit("plotly_unhover",{event:T.event,points:[re.node]})),e.loneUnhover(h._hoverlayer.node()))};A(w,m,b,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{linkEvents:{hover:P,follow:F,unhover:V,select:k},nodeEvents:{hover:K,follow:J,unhover:G,select:Y}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":920,"./render":924,"@plotly/d3":58}],924:[function(g,ne,ae){var T=g("d3-force"),c=g("d3-interpolate").interpolateNumber,M=g("@plotly/d3"),A=g("@plotly/d3-sankey"),e=g("@plotly/d3-sankey-circular"),a=g("./constants"),n=g("tinycolor2"),t=g("../../components/color"),r=g("../../components/drawing"),f=g("../../lib"),o=f.strTranslate,i=f.strRotate,p=g("../../lib/gup"),d=p.keyFun,y=p.repeat,v=p.unwrap,x=g("../../lib/svg_text_utils"),l=g("../../registry"),_=g("../../constants/alignment"),s=_.CAP_SHIFT,w=_.LINE_SPACING,b=3;function h(N,U,q){var Q=v(U),W=Q.trace,X=W.domain,te=W.orientation==="h",ee=W.node.pad,ie=W.node.thickness,le=N.width*(X.x[1]-X.x[0]),ye=N.height*(X.y[1]-X.y[0]),ue=Q._nodes,pe=Q._links,ge=Q.circular,Te;ge?Te=e.sankeyCircular().circularLinkGap(0):Te=A.sankey(),Te.iterations(a.sankeyIterations).size(te?[le,ye]:[ye,le]).nodeWidth(ie).nodePadding(ee).nodeId(function(Tt){return Tt.pointNumber}).nodes(ue).links(pe);var _e=Te();Te.nodePadding()<ee&&f.warn("node.pad was reduced to ",Te.nodePadding()," to fit within the figure.");var De,Oe,Ue;for(var xe in Q._groupLookup){var Pe=parseInt(Q._groupLookup[xe]),Ve;for(De=0;De<_e.nodes.length;De++)if(_e.nodes[De].pointNumber===Pe){Ve=_e.nodes[De];break}if(!!Ve){var Qe={pointNumber:parseInt(xe),x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};_e.nodes.unshift(Qe),Ve.childrenNodes.unshift(Qe)}}function Fe(){for(De=0;De<_e.nodes.length;De++){var Tt=_e.nodes[De],zt={},Ut,Et;for(Oe=0;Oe<Tt.targetLinks.length;Oe++)Et=Tt.targetLinks[Oe],Ut=Et.source.pointNumber+":"+Et.target.pointNumber,zt.hasOwnProperty(Ut)||(zt[Ut]=[]),zt[Ut].push(Et);var Mt=Object.keys(zt);for(Oe=0;Oe<Mt.length;Oe++){Ut=Mt[Oe];var rt=zt[Ut],ct=0,Ze={};for(Ue=0;Ue<rt.length;Ue++)Et=rt[Ue],Ze[Et.label]||(Ze[Et.label]=0),Ze[Et.label]+=Et.value,ct+=Et.value;for(Ue=0;Ue<rt.length;Ue++)Et=rt[Ue],Et.flow={value:ct,labelConcentration:Ze[Et.label]/ct,concentration:Et.value/ct,links:rt},Et.concentrationscale&&(Et.color=n(Et.concentrationscale(Et.flow.labelConcentration)))}var ke=0;for(Oe=0;Oe<Tt.sourceLinks.length;Oe++)ke+=Tt.sourceLinks[Oe].value;for(Oe=0;Oe<Tt.sourceLinks.length;Oe++)Et=Tt.sourceLinks[Oe],Et.concentrationOut=Et.value/ke;var Ge=0;for(Oe=0;Oe<Tt.targetLinks.length;Oe++)Ge+=Tt.targetLinks[Oe].value;for(Oe=0;Oe<Tt.targetLinks.length;Oe++)Et=Tt.targetLinks[Oe],Et.concenrationIn=Et.value/Ge}}Fe();function Le(Tt){Tt.forEach(function(zt){var Ut,Et,Mt=0,rt=zt.length,ct;for(zt.sort(function(Ze,ke){return Ze.y0-ke.y0}),ct=0;ct<rt;++ct)Ut=zt[ct],Ut.y0>=Mt||(Et=Mt-Ut.y0,Et>1e-6&&(Ut.y0+=Et,Ut.y1+=Et)),Mt=Ut.y1+ee})}function Ne(Tt){var zt=Tt.map(function(ke,Ge){return{x0:ke.x0,index:Ge}}).sort(function(ke,Ge){return ke.x0-Ge.x0}),Ut=[],Et=-1,Mt,rt=-1/0,ct;for(De=0;De<zt.length;De++){var Ze=Tt[zt[De].index];Ze.x0>rt+ie&&(Et+=1,Mt=Ze.x0),rt=Ze.x0,Ut[Et]||(Ut[Et]=[]),Ut[Et].push(Ze),ct=Mt-Ze.x0,Ze.x0+=ct,Ze.x1+=ct}return Ut}if(W.node.x.length&&W.node.y.length){for(De=0;De<Math.min(W.node.x.length,W.node.y.length,_e.nodes.length);De++)if(W.node.x[De]&&W.node.y[De]){var dt=[W.node.x[De]*le,W.node.y[De]*ye];_e.nodes[De].x0=dt[0]-ie/2,_e.nodes[De].x1=dt[0]+ie/2;var Dt=_e.nodes[De].y1-_e.nodes[De].y0;_e.nodes[De].y0=dt[1]-Dt/2,_e.nodes[De].y1=dt[1]+Dt/2}if(W.arrangement==="snap"){ue=_e.nodes;var Xt=Ne(ue);Le(Xt)}Te.update(_e)}return{circular:ge,key:q,trace:W,guid:f.randstr(),horizontal:te,width:le,height:ye,nodePad:W.node.pad,nodeLineColor:W.node.line.color,nodeLineWidth:W.node.line.width,linkLineColor:W.link.line.color,linkLineWidth:W.link.line.width,valueFormat:W.valueformat,valueSuffix:W.valuesuffix,textFont:W.textfont,translateX:X.x[0]*N.width+N.margin.l,translateY:N.height-X.y[1]*N.height+N.margin.t,dragParallel:te?ye:le,dragPerpendicular:te?le:ye,arrangement:W.arrangement,sankey:Te,graph:_e,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function m(N,U,q){var Q=n(U.color),W=U.source.label+"|"+U.target.label,X=W+"__"+q;return U.trace=N.trace,U.curveNumber=N.trace.index,{circular:N.circular,key:X,traceId:N.key,pointNumber:U.pointNumber,link:U,tinyColorHue:t.tinyRGB(Q),tinyColorAlpha:Q.getAlpha(),linkPath:L,linkLineColor:N.linkLineColor,linkLineWidth:N.linkLineWidth,valueFormat:N.valueFormat,valueSuffix:N.valueSuffix,sankey:N.sankey,parent:N,interactionState:N.interactionState,flow:U.flow}}function u(N){var U="",q=N.width/2,Q=N.circularPathData;return N.circularLinkType==="top"?U="M "+Q.targetX+" "+(Q.targetY+q)+" L"+Q.rightInnerExtent+" "+(Q.targetY+q)+"A"+(Q.rightLargeArcRadius+q)+" "+(Q.rightSmallArcRadius+q)+" 0 0 1 "+(Q.rightFullExtent-q)+" "+(Q.targetY-Q.rightSmallArcRadius)+"L"+(Q.rightFullExtent-q)+" "+Q.verticalRightInnerExtent+"A"+(Q.rightLargeArcRadius+q)+" "+(Q.rightLargeArcRadius+q)+" 0 0 1 "+Q.rightInnerExtent+" "+(Q.verticalFullExtent-q)+"L"+Q.leftInnerExtent+" "+(Q.verticalFullExtent-q)+"A"+(Q.leftLargeArcRadius+q)+" "+(Q.leftLargeArcRadius+q)+" 0 0 1 "+(Q.leftFullExtent+q)+" "+Q.verticalLeftInnerExtent+"L"+(Q.leftFullExtent+q)+" "+(Q.sourceY-Q.leftSmallArcRadius)+"A"+(Q.leftLargeArcRadius+q)+" "+(Q.leftSmallArcRadius+q)+" 0 0 1 "+Q.leftInnerExtent+" "+(Q.sourceY+q)+"L"+Q.sourceX+" "+(Q.sourceY+q)+"L"+Q.sourceX+" "+(Q.sourceY-q)+"L"+Q.leftInnerExtent+" "+(Q.sourceY-q)+"A"+(Q.leftLargeArcRadius-q)+" "+(Q.leftSmallArcRadius-q)+" 0 0 0 "+(Q.leftFullExtent-q)+" "+(Q.sourceY-Q.leftSmallArcRadius)+"L"+(Q.leftFullExtent-q)+" "+Q.verticalLeftInnerExtent+"A"+(Q.leftLargeArcRadius-q)+" "+(Q.leftLargeArcRadius-q)+" 0 0 0 "+Q.leftInnerExtent+" "+(Q.verticalFullExtent+q)+"L"+Q.rightInnerExtent+" "+(Q.verticalFullExtent+q)+"A"+(Q.rightLargeArcRadius-q)+" "+(Q.rightLargeArcRadius-q)+" 0 0 0 "+(Q.rightFullExtent+q)+" "+Q.verticalRightInnerExtent+"L"+(Q.rightFullExtent+q)+" "+(Q.targetY-Q.rightSmallArcRadius)+"A"+(Q.rightLargeArcRadius-q)+" "+(Q.rightSmallArcRadius-q)+" 0 0 0 "+Q.rightInnerExtent+" "+(Q.targetY-q)+"L"+Q.targetX+" "+(Q.targetY-q)+"Z":U="M "+Q.targetX+" "+(Q.targetY-q)+" L"+Q.rightInnerExtent+" "+(Q.targetY-q)+"A"+(Q.rightLargeArcRadius+q)+" "+(Q.rightSmallArcRadius+q)+" 0 0 0 "+(Q.rightFullExtent-q)+" "+(Q.targetY+Q.rightSmallArcRadius)+"L"+(Q.rightFullExtent-q)+" "+Q.verticalRightInnerExtent+"A"+(Q.rightLargeArcRadius+q)+" "+(Q.rightLargeArcRadius+q)+" 0 0 0 "+Q.rightInnerExtent+" "+(Q.verticalFullExtent+q)+"L"+Q.leftInnerExtent+" "+(Q.verticalFullExtent+q)+"A"+(Q.leftLargeArcRadius+q)+" "+(Q.leftLargeArcRadius+q)+" 0 0 0 "+(Q.leftFullExtent+q)+" "+Q.verticalLeftInnerExtent+"L"+(Q.leftFullExtent+q)+" "+(Q.sourceY+Q.leftSmallArcRadius)+"A"+(Q.leftLargeArcRadius+q)+" "+(Q.leftSmallArcRadius+q)+" 0 0 0 "+Q.leftInnerExtent+" "+(Q.sourceY-q)+"L"+Q.sourceX+" "+(Q.sourceY-q)+"L"+Q.sourceX+" "+(Q.sourceY+q)+"L"+Q.leftInnerExtent+" "+(Q.sourceY+q)+"A"+(Q.leftLargeArcRadius-q)+" "+(Q.leftSmallArcRadius-q)+" 0 0 1 "+(Q.leftFullExtent-q)+" "+(Q.sourceY+Q.leftSmallArcRadius)+"L"+(Q.leftFullExtent-q)+" "+Q.verticalLeftInnerExtent+"A"+(Q.leftLargeArcRadius-q)+" "+(Q.leftLargeArcRadius-q)+" 0 0 1 "+Q.leftInnerExtent+" "+(Q.verticalFullExtent-q)+"L"+Q.rightInnerExtent+" "+(Q.verticalFullExtent-q)+"A"+(Q.rightLargeArcRadius-q)+" "+(Q.rightLargeArcRadius-q)+" 0 0 1 "+(Q.rightFullExtent+q)+" "+Q.verticalRightInnerExtent+"L"+(Q.rightFullExtent+q)+" "+(Q.targetY+Q.rightSmallArcRadius)+"A"+(Q.rightLargeArcRadius-q)+" "+(Q.rightSmallArcRadius-q)+" 0 0 1 "+Q.rightInnerExtent+" "+(Q.targetY+q)+"L"+Q.targetX+" "+(Q.targetY+q)+"Z",U}function L(){var N=.5;function U(q){if(q.link.circular)return u(q.link);var Q=q.link.source.x1,W=q.link.target.x0,X=c(Q,W),te=X(N),ee=X(1-N),ie=q.link.y0-q.link.width/2,le=q.link.y0+q.link.width/2,ye=q.link.y1-q.link.width/2,ue=q.link.y1+q.link.width/2;return"M"+Q+","+ie+"C"+te+","+ie+" "+ee+","+ye+" "+W+","+ye+"L"+W+","+ue+"C"+ee+","+ue+" "+te+","+le+" "+Q+","+le+"Z"}return U}function S(N,U){var q=n(U.color),Q=a.nodePadAcross,W=N.nodePad/2;U.dx=U.x1-U.x0,U.dy=U.y1-U.y0;var X=U.dx,te=Math.max(.5,U.dy),ee="node_"+U.pointNumber;return U.group&&(ee=f.randstr()),U.trace=N.trace,U.curveNumber=N.trace.index,{index:U.pointNumber,key:ee,partOfGroup:U.partOfGroup||!1,group:U.group,traceId:N.key,trace:N.trace,node:U,nodePad:N.nodePad,nodeLineColor:N.nodeLineColor,nodeLineWidth:N.nodeLineWidth,textFont:N.textFont,size:N.horizontal?N.height:N.width,visibleWidth:Math.ceil(X),visibleHeight:te,zoneX:-Q,zoneY:-W,zoneWidth:X+2*Q,zoneHeight:te+2*W,labelY:N.horizontal?U.dy/2+1:U.dx/2+1,left:U.originalLayer===1,sizeAcross:N.width,forceLayouts:N.forceLayouts,horizontal:N.horizontal,darkBackground:q.getBrightness()<=128,tinyColorHue:t.tinyRGB(q),tinyColorAlpha:q.getAlpha(),valueFormat:N.valueFormat,valueSuffix:N.valueSuffix,sankey:N.sankey,graph:N.graph,arrangement:N.arrangement,uniqueNodeLabelPathId:[N.guid,N.key,ee].join("_"),interactionState:N.interactionState,figure:N}}function k(N){N.attr("transform",function(U){return o(U.node.x0.toFixed(3),U.node.y0.toFixed(3))})}function P(N){N.call(k)}function z(N,U){N.call(P),U.attr("d",L())}function I(N){N.attr("width",function(U){return U.node.x1-U.node.x0}).attr("height",function(U){return U.visibleHeight})}function D(N){return N.link.width>1||N.linkLineWidth>0}function R(N){var U=o(N.translateX,N.translateY);return U+(N.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function B(N,U,q){N.on(".basic",null).on("mouseover.basic",function(Q){!Q.interactionState.dragInProgress&&!Q.partOfGroup&&(q.hover(this,Q,U),Q.interactionState.hovered=[this,Q])}).on("mousemove.basic",function(Q){!Q.interactionState.dragInProgress&&!Q.partOfGroup&&(q.follow(this,Q),Q.interactionState.hovered=[this,Q])}).on("mouseout.basic",function(Q){!Q.interactionState.dragInProgress&&!Q.partOfGroup&&(q.unhover(this,Q,U),Q.interactionState.hovered=!1)}).on("click.basic",function(Q){Q.interactionState.hovered&&(q.unhover(this,Q,U),Q.interactionState.hovered=!1),!Q.interactionState.dragInProgress&&!Q.partOfGroup&&q.select(this,Q,U)})}function F(N,U,q,Q){var W=M.behavior.drag().origin(function(X){return{x:X.node.x0+X.visibleWidth/2,y:X.node.y0+X.visibleHeight/2}}).on("dragstart",function(X){if(X.arrangement!=="fixed"&&(f.ensureSingle(Q._fullLayout._infolayer,"g","dragcover",function(ee){Q._fullLayout._dragCover=ee}),f.raiseToTop(this),X.interactionState.dragInProgress=X.node,Z(X.node),X.interactionState.hovered&&(q.nodeEvents.unhover.apply(0,X.interactionState.hovered),X.interactionState.hovered=!1),X.arrangement==="snap")){var te=X.traceId+"|"+X.key;X.forceLayouts[te]?X.forceLayouts[te].alpha(1):V(N,te,X),Y(N,U,X,te,Q)}}).on("drag",function(X){if(X.arrangement!=="fixed"){var te=M.event.x,ee=M.event.y;X.arrangement==="snap"?(X.node.x0=te-X.visibleWidth/2,X.node.x1=te+X.visibleWidth/2,X.node.y0=ee-X.visibleHeight/2,X.node.y1=ee+X.visibleHeight/2):(X.arrangement==="freeform"&&(X.node.x0=te-X.visibleWidth/2,X.node.x1=te+X.visibleWidth/2),ee=Math.max(0,Math.min(X.size-X.visibleHeight/2,ee)),X.node.y0=ee-X.visibleHeight/2,X.node.y1=ee+X.visibleHeight/2),Z(X.node),X.arrangement!=="snap"&&(X.sankey.update(X.graph),z(N.filter(re(X)),U))}}).on("dragend",function(X){if(X.arrangement!=="fixed"){X.interactionState.dragInProgress=!1;for(var te=0;te<X.node.childrenNodes.length;te++)X.node.childrenNodes[te].x=X.node.x,X.node.childrenNodes[te].y=X.node.y;X.arrangement!=="snap"&&J(X,Q)}});N.on(".drag",null).call(W)}function V(N,U,q,Q){se(q.graph.nodes);var W=q.graph.nodes.filter(function(X){return X.originalX===q.node.originalX}).filter(function(X){return!X.partOfGroup});q.forceLayouts[U]=T.forceSimulation(W).alphaDecay(0).force("collide",T.forceCollide().radius(function(X){return X.dy/2+q.nodePad/2}).strength(1).iterations(a.forceIterations)).force("constrain",K(N,U,W,q)).stop()}function Y(N,U,q,Q,W){window.requestAnimationFrame(function X(){var te;for(te=0;te<a.forceTicksPerFrame;te++)q.forceLayouts[Q].tick();var ee=q.graph.nodes;if(oe(ee),q.sankey.update(q.graph),z(N.filter(re(q)),U),q.forceLayouts[Q].alpha()>0)window.requestAnimationFrame(X);else{var ie=q.node.originalX;q.node.x0=ie-q.visibleWidth/2,q.node.x1=ie+q.visibleWidth/2,J(q,W)}})}function K(N,U,q,Q){return function(){for(var X=0,te=0;te<q.length;te++){var ee=q[te];ee===Q.interactionState.dragInProgress?(ee.x=ee.lastDraggedX,ee.y=ee.lastDraggedY):(ee.vx=(ee.originalX-ee.x)/a.forceTicksPerFrame,ee.y=Math.min(Q.size-ee.dy/2,Math.max(ee.dy/2,ee.y))),X=Math.max(X,Math.abs(ee.vx),Math.abs(ee.vy))}!Q.interactionState.dragInProgress&&X<.1&&Q.forceLayouts[U].alpha()>0&&Q.forceLayouts[U].alpha(0)}}function J(N,U){for(var q=[],Q=[],W=0;W<N.graph.nodes.length;W++){var X=(N.graph.nodes[W].x0+N.graph.nodes[W].x1)/2,te=(N.graph.nodes[W].y0+N.graph.nodes[W].y1)/2;q.push(X/N.figure.width),Q.push(te/N.figure.height)}l.call("_guiRestyle",U,{"node.x":[q],"node.y":[Q]},N.trace.index).then(function(){U._fullLayout._dragCover&&U._fullLayout._dragCover.remove()})}function G(N){var U=[],q;for(q=0;q<N.length;q++)N[q].originalX=(N[q].x0+N[q].x1)/2,N[q].originalY=(N[q].y0+N[q].y1)/2,U.indexOf(N[q].originalX)===-1&&U.push(N[q].originalX);for(U.sort(function(Q,W){return Q-W}),q=0;q<N.length;q++)N[q].originalLayerIndex=U.indexOf(N[q].originalX),N[q].originalLayer=N[q].originalLayerIndex/(U.length-1)}function Z(N){N.lastDraggedX=N.x0+N.dx/2,N.lastDraggedY=N.y0+N.dy/2}function re(N){return function(U){return U.node.originalX===N.node.originalX}}function se(N){for(var U=0;U<N.length;U++)N[U].y=(N[U].y0+N[U].y1)/2,N[U].x=(N[U].x0+N[U].x1)/2}function oe(N){for(var U=0;U<N.length;U++)N[U].y0=N[U].y-N[U].dy/2,N[U].y1=N[U].y0+N[U].dy,N[U].x0=N[U].x-N[U].dx/2,N[U].x1=N[U].x0+N[U].dx}ne.exports=function(N,U,q,Q,W){var X=!1;f.ensureSingle(N._fullLayout._infolayer,"g","first-render",function(){X=!0});var te=N._fullLayout._dragCover,ee=q.filter(function(_e){return v(_e).trace.visible}).map(h.bind(null,Q)),ie=U.selectAll("."+a.cn.sankey).data(ee,d);ie.exit().remove(),ie.enter().append("g").classed(a.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",R),ie.each(function(_e,De){N._fullData[De]._sankey=_e;var Oe="bgsankey-"+_e.trace.uid+"-"+De;f.ensureSingle(N._fullLayout._draggers,"rect",Oe),N._fullData[De]._bgRect=M.select("."+Oe),N._fullData[De]._bgRect.style("pointer-events","all").attr("width",_e.width).attr("height",_e.height).attr("x",_e.translateX).attr("y",_e.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ie.transition().ease(a.ease).duration(a.duration).attr("transform",R);var le=ie.selectAll("."+a.cn.sankeyLinks).data(y,d);le.enter().append("g").classed(a.cn.sankeyLinks,!0).style("fill","none");var ye=le.selectAll("."+a.cn.sankeyLink).data(function(_e){var De=_e.graph.links;return De.filter(function(Oe){return Oe.value}).map(m.bind(null,_e))},d);ye.enter().append("path").classed(a.cn.sankeyLink,!0).call(B,ie,W.linkEvents),ye.style("stroke",function(_e){return D(_e)?t.tinyRGB(n(_e.linkLineColor)):_e.tinyColorHue}).style("stroke-opacity",function(_e){return D(_e)?t.opacity(_e.linkLineColor):_e.tinyColorAlpha}).style("fill",function(_e){return _e.tinyColorHue}).style("fill-opacity",function(_e){return _e.tinyColorAlpha}).style("stroke-width",function(_e){return D(_e)?_e.linkLineWidth:1}).attr("d",L()),ye.style("opacity",function(){return N._context.staticPlot||X||te?1:0}).transition().ease(a.ease).duration(a.duration).style("opacity",1),ye.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var ue=ie.selectAll("."+a.cn.sankeyNodeSet).data(y,d);ue.enter().append("g").classed(a.cn.sankeyNodeSet,!0),ue.style("cursor",function(_e){switch(_e.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var pe=ue.selectAll("."+a.cn.sankeyNode).data(function(_e){var De=_e.graph.nodes;return G(De),De.map(S.bind(null,_e))},d);pe.enter().append("g").classed(a.cn.sankeyNode,!0).call(k).style("opacity",function(_e){return(N._context.staticPlot||X)&&!_e.partOfGroup?1:0}),pe.call(B,ie,W.nodeEvents).call(F,ye,W,N),pe.transition().ease(a.ease).duration(a.duration).call(k).style("opacity",function(_e){return _e.partOfGroup?0:1}),pe.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var ge=pe.selectAll("."+a.cn.nodeRect).data(y);ge.enter().append("rect").classed(a.cn.nodeRect,!0).call(I),ge.style("stroke-width",function(_e){return _e.nodeLineWidth}).style("stroke",function(_e){return t.tinyRGB(n(_e.nodeLineColor))}).style("stroke-opacity",function(_e){return t.opacity(_e.nodeLineColor)}).style("fill",function(_e){return _e.tinyColorHue}).style("fill-opacity",function(_e){return _e.tinyColorAlpha}),ge.transition().ease(a.ease).duration(a.duration).call(I);var Te=pe.selectAll("."+a.cn.nodeLabel).data(y);Te.enter().append("text").classed(a.cn.nodeLabel,!0).style("cursor","default"),Te.attr("data-notex",1).text(function(_e){return _e.node.label}).each(function(_e){var De=M.select(this);r.font(De,_e.textFont),x.convertToTspans(De,N)}).style("text-shadow",x.makeTextShadow(N._fullLayout.paper_bgcolor)).attr("text-anchor",function(_e){return _e.horizontal&&_e.left?"end":"start"}).attr("transform",function(_e){var De=M.select(this),Oe=x.lineCount(De),Ue=_e.textFont.size*((Oe-1)*w-s),xe=_e.nodeLineWidth/2+b,Pe=((_e.horizontal?_e.visibleHeight:_e.visibleWidth)-Ue)/2;_e.horizontal&&(_e.left?xe=-xe:xe+=_e.visibleWidth);var Ve=_e.horizontal?"":"scale(-1,1)"+i(90);return o(_e.horizontal?xe:Pe,_e.horizontal?Pe:xe)+Ve}),Te.transition().ease(a.ease).duration(a.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":920,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],925:[function(g,ne,ae){ne.exports=function(c,M){for(var A=c.cd,e=[],a=A[0].trace,n=a._sankey.graph.nodes,t=0;t<n.length;t++){var r=n[t];if(!r.partOfGroup){var f=[(r.x0+r.x1)/2,(r.y0+r.y1)/2];a.orientation==="v"&&f.reverse(),M&&M.contains(f,!1,t,c)&&e.push({pointNumber:r.pointNumber})}}return e}},{}],926:[function(g,ne,ae){var T=g("../../lib");ne.exports=function(M,A){for(var e=0;e<M.length;e++)M[e].i=e;T.mergeArray(A.text,M,"tx"),T.mergeArray(A.texttemplate,M,"txt"),T.mergeArray(A.hovertext,M,"htx"),T.mergeArray(A.customdata,M,"data"),T.mergeArray(A.textposition,M,"tp"),A.textfont&&(T.mergeArrayCastPositive(A.textfont.size,M,"ts"),T.mergeArray(A.textfont.color,M,"tc"),T.mergeArray(A.textfont.family,M,"tf"));var a=A.marker;if(a){T.mergeArrayCastPositive(a.size,M,"ms"),T.mergeArrayCastPositive(a.opacity,M,"mo"),T.mergeArray(a.symbol,M,"mx"),T.mergeArray(a.color,M,"mc");var n=a.line;a.line&&(T.mergeArray(n.color,M,"mlc"),T.mergeArrayCastPositive(n.width,M,"mlw"));var t=a.gradient;t&&t.type!=="none"&&(T.mergeArray(t.type,M,"mgt"),T.mergeArray(t.color,M,"mgc"))}}},{"../../lib":503}],927:[function(g,ne,ae){var T=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,c=g("../../plots/template_attributes").texttemplateAttrs,M=g("../../plots/template_attributes").hovertemplateAttrs,A=g("../../components/colorscale/attributes"),e=g("../../plots/font_attributes"),a=g("../../components/drawing/attributes").dash,n=g("../../components/drawing/attributes").pattern,t=g("../../components/drawing"),r=g("./constants"),f=g("../../lib/extend").extendFlat;function o(d){return{valType:"any",dflt:0,editType:"calc"}}function i(d){return{valType:"any",editType:"calc"}}function p(d){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}ne.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:o(),yperiod:o(),xperiod0:i(),yperiod0:i(),xperiodalignment:p(),yperiodalignment:p(),xhoverformat:T("x"),yhoverformat:T("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:c({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:M({},{keys:r.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:f({},a,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:n,marker:f({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:f({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},A("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},A("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":931}],928:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib"),M=g("../../plots/cartesian/axes"),A=g("../../plots/cartesian/align_period"),e=g("../../constants/numerical").BADNUM,a=g("./subtypes"),n=g("./colorscale_calc"),t=g("./arrays_to_calcdata"),r=g("./calc_selection");function f(v,x){var l=v._fullLayout,_=M.getFromId(v,x.xaxis||"x"),s=M.getFromId(v,x.yaxis||"y"),w=_.makeCalcdata(x,"x"),b=s.makeCalcdata(x,"y"),h=A(x,_,"x",w),m=A(x,s,"y",b),u=h.vals,L=m.vals,S=x._length,k=new Array(S),P=x.ids,z=y(x,l,_,s),I=!1,D,R,B,F,V,Y;p(l,x);var K="x",J="y",G;if(z)c.pushUnique(z.traceIndices,x._expandedIndex),D=z.orientation==="v",D?(J="s",G="x"):(K="s",G="y"),V=z.stackgaps==="interpolate";else{var Z=i(x,S);o(v,x,_,s,u,L,Z)}var re=!!x.xperiodalignment,se=!!x.yperiodalignment;for(R=0;R<S;R++){var oe=k[R]={},N=T(u[R]),U=T(L[R]);N&&U?(oe[K]=u[R],oe[J]=L[R],re&&(oe.orig_x=w[R],oe.xEnd=h.ends[R],oe.xStart=h.starts[R]),se&&(oe.orig_y=b[R],oe.yEnd=m.ends[R],oe.yStart=m.starts[R])):z&&(D?N:U)?(oe[G]=D?u[R]:L[R],oe.gap=!0,V?(oe.s=e,I=!0):oe.s=0):oe[K]=oe[J]=e,P&&(oe.id=String(P[R]))}if(t(k,x),n(v,x),r(k,x),z){for(R=0;R<k.length;)k[R][G]===e?k.splice(R,1):R++;if(c.sort(k,function(X,te){return X[G]-te[G]||X.i-te.i}),I){for(R=0;R<k.length-1&&k[R].gap;)R++;for(Y=k[R].s,Y||(Y=k[R].s=0),B=0;B<R;B++)k[B].s=Y;for(F=k.length-1;F>R&&k[F].gap;)F--;for(Y=k[F].s,B=k.length-1;B>F;B--)k[B].s=Y;for(;R<F;)if(R++,k[R].gap){for(B=R+1;k[B].gap;)B++;for(var q=k[R-1][G],Q=k[R-1].s,W=(k[B].s-Q)/(k[B][G]-q);R<B;)k[R].s=Q+(k[R][G]-q)*W,R++}}}return k}function o(v,x,l,_,s,w,b){var h=x._length,m=v._fullLayout,u=l._id,L=_._id,S=m._firstScatter[d(x)]===x.uid,k=(y(x,m,l,_)||{}).orientation,P=x.fill;l._minDtick=0,_._minDtick=0;var z={padded:!0},I={padded:!0};b&&(z.ppad=I.ppad=b);var D=h<2||s[0]!==s[h-1]||w[0]!==w[h-1];D&&(P==="tozerox"||P==="tonextx"&&(S||k==="h"))?z.tozero=!0:!(x.error_y||{}).visible&&(P==="tonexty"||P==="tozeroy"||!a.hasMarkers(x)&&!a.hasText(x))&&(z.padded=!1,z.ppad=0),D&&(P==="tozeroy"||P==="tonexty"&&(S||k==="v"))?I.tozero=!0:(P==="tonextx"||P==="tozerox")&&(I.padded=!1),u&&(x._extremes[u]=M.findExtremes(l,s,z)),L&&(x._extremes[L]=M.findExtremes(_,w,I))}function i(v,x){if(!!a.hasMarkers(v)){var l=v.marker,_=1.6*(v.marker.sizeref||1),s;if(v.marker.sizemode==="area"?s=function(u){return Math.max(Math.sqrt((u||0)/_),3)}:s=function(u){return Math.max((u||0)/_,3)},c.isArrayOrTypedArray(l.size)){var w={type:"linear"};M.setConvert(w);for(var b=w.makeCalcdata(v.marker,"size"),h=new Array(x),m=0;m<x;m++)h[m]=s(b[m]);return h}else return s(l.size)}}function p(v,x){var l=d(x),_=v._firstScatter;_[l]||(_[l]=x.uid)}function d(v){var x=v.stackgroup;return v.xaxis+v.yaxis+v.type+(x?"-"+x:"")}function y(v,x,l,_){var s=v.stackgroup;if(!!s){var w=x._scatterStackOpts[l._id+_._id][s],b=w.orientation==="v"?_:l;if(b.type==="linear"||b.type==="log")return w}}ne.exports={calc:f,calcMarkerSize:i,calcAxisExpansion:o,setFirstScatter:p,getStackOpts:y}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":926,"./calc_selection":929,"./colorscale_calc":930,"./subtypes":952,"fast-isnumeric":190}],929:[function(g,ne,ae){var T=g("../../lib");ne.exports=function(M,A){T.isArrayOrTypedArray(A.selectedpoints)&&T.tagSelected(M,A)}},{"../../lib":503}],930:[function(g,ne,ae){var T=g("../../components/colorscale/helpers").hasColorscale,c=g("../../components/colorscale/calc"),M=g("./subtypes");ne.exports=function(e,a){M.hasLines(a)&&T(a,"line")&&c(e,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),M.hasMarkers(a)&&(T(a,"marker")&&c(e,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),T(a,"marker.line")&&c(e,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":952}],931:[function(g,ne,ae){ne.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],932:[function(g,ne,ae){var T=g("./calc");ne.exports=function(e,a){var n=a.xaxis,t=a.yaxis,r=n._id+t._id,f=e._fullLayout._scatterStackOpts[r];if(!!f){var o=e.calcdata,i,p,d,y,v,x,l,_,s,w,b,h,m,u,L;for(var S in f){w=f[S];var k=w.traceIndices;if(!!k.length){for(b=w.stackgaps==="interpolate",h=w.groupnorm,w.orientation==="v"?(m="x",u="y"):(m="y",u="x"),L=new Array(k.length),i=0;i<L.length;i++)L[i]=!1;x=o[k[0]];var P=new Array(x.length);for(i=0;i<x.length;i++)P[i]=x[i][m];for(i=1;i<k.length;i++){for(v=o[k[i]],p=d=0;p<v.length;p++){for(l=v[p][m];l>P[d]&&d<P.length;d++)c(v,p,P[d],i,L,b,m),p++;if(l!==P[d]){for(y=0;y<i;y++)c(o[k[y]],d,l,y,L,b,m);P.splice(d,0,l)}d++}for(;d<P.length;d++)c(v,p,P[d],i,L,b,m),p++}var z=P.length;for(p=0;p<x.length;p++){for(_=x[p][u]=x[p].s,i=1;i<k.length;i++)v=o[k[i]],v[0].trace._rawLength=v[0].trace._length,v[0].trace._length=z,_+=v[p].s,v[p][u]=_;if(h)for(s=(h==="fraction"?_:_/100)||1,i=0;i<k.length;i++){var I=o[k[i]][p];I[u]/=s,I.sNorm=I.s/s}}for(i=0;i<k.length;i++){v=o[k[i]];var D=v[0].trace,R=T.calcMarkerSize(D,D._rawLength),B=Array.isArray(R);if(R&&L[i]||B){var F=R;for(R=new Array(z),p=0;p<z;p++)R[p]=v[p].gap?0:B?F[v[p].i]:F}var V=new Array(z),Y=new Array(z);for(p=0;p<z;p++)V[p]=v[p].x,Y[p]=v[p].y;T.calcAxisExpansion(e,D,n,t,V,Y,R),v[0].t.orientation=w.orientation}}}}};function c(A,e,a,n,t,r,f){t[n]=!0;var o={i:null,gap:!0,s:0};if(o[f]=a,A.splice(e,0,o),e&&a===A[e-1][f]){var i=A[e-1];o.s=i.s,o.i=i.i,o.gap=i.gap}else r&&(o.s=M(A,e,a,f));e||(A[0].t=A[1].t,A[0].trace=A[1].trace,delete A[1].t,delete A[1].trace)}function M(A,e,a,n){var t=A[e-1],r=A[e+1];return r?t?t.s+(r.s-t.s)*(a-t[n])/(r[n]-t[n]):r.s:t.s}},{"./calc":928}],933:[function(g,ne,ae){ne.exports=function(c){for(var M=0;M<c.length;M++){var A=c[M];if(A.type==="scatter"){var e=A.fill;if(!(e==="none"||e==="toself")&&(A.opacity=void 0,e==="tonexty"||e==="tonextx"))for(var a=M-1;a>=0;a--){var n=c[a];if(n.type==="scatter"&&n.xaxis===A.xaxis&&n.yaxis===A.yaxis){n.opacity=void 0;break}}}}}},{}],934:[function(g,ne,ae){var T=g("../../lib"),c=g("../../registry"),M=g("./attributes"),A=g("./constants"),e=g("./subtypes"),a=g("./xy_defaults"),n=g("./period_defaults"),t=g("./stack_defaults"),r=g("./marker_defaults"),f=g("./line_defaults"),o=g("./line_shape_defaults"),i=g("./text_defaults"),p=g("./fillcolor_defaults"),d=g("../../lib").coercePattern;ne.exports=function(v,x,l,_){function s(k,P){return T.coerce(v,x,M,k,P)}var w=a(v,x,_,s);if(w||(x.visible=!1),!!x.visible){n(v,x,_,s),s("xhoverformat"),s("yhoverformat");var b=t(v,x,_,s),h=!b&&w<A.PTS_LINESONLY?"lines+markers":"lines";s("text"),s("hovertext"),s("mode",h),e.hasLines(x)&&(f(v,x,l,_,s),o(v,x,s),s("connectgaps"),s("line.simplify")),e.hasMarkers(x)&&r(v,x,l,_,s,{gradient:!0}),e.hasText(x)&&(s("texttemplate"),i(v,x,_,s));var m=[];(e.hasMarkers(x)||e.hasText(x))&&(s("cliponaxis"),s("marker.maxdisplayed"),m.push("points")),s("fill",b?b.fillDflt:"none"),x.fill!=="none"&&(p(v,x,l,s),e.hasLines(x)||o(v,x,s),d(s,"fillpattern",x.fillcolor,!1));var u=(x.line||{}).color,L=(x.marker||{}).color;(x.fill==="tonext"||x.fill==="toself")&&m.push("fills"),s("hoveron",m.join("+")||"points"),x.hoveron!=="fills"&&s("hovertemplate");var S=c.getComponentMethod("errorbars","supplyDefaults");S(v,x,u||L||l,{axis:"y"}),S(v,x,u||L||l,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(x,s)}}},{"../../lib":503,"../../registry":638,"./attributes":927,"./constants":931,"./fillcolor_defaults":935,"./line_defaults":940,"./line_shape_defaults":942,"./marker_defaults":946,"./period_defaults":947,"./stack_defaults":950,"./subtypes":952,"./text_defaults":953,"./xy_defaults":954}],935:[function(g,ne,ae){var T=g("../../components/color"),c=g("../../lib").isArrayOrTypedArray;ne.exports=function(A,e,a,n){var t=!1;if(e.marker){var r=e.marker.color,f=(e.marker.line||{}).color;r&&!c(r)?t=r:f&&!c(f)&&(t=f)}n("fillcolor",T.addOpacity((e.line||{}).color||t||a,.5))}},{"../../components/color":366,"../../lib":503}],936:[function(g,ne,ae){var T=g("../../plots/cartesian/axes");ne.exports=function(M,A,e){var a={},n={_fullLayout:e},t=T.getFromTrace(n,A,"x"),r=T.getFromTrace(n,A,"y");return a.xLabel=T.tickText(t,t.c2l(M.x),!0).text,a.yLabel=T.tickText(r,r.c2l(M.y),!0).text,a}},{"../../plots/cartesian/axes":554}],937:[function(g,ne,ae){var T=g("../../components/color"),c=g("./subtypes");ne.exports=function(A,e){var a,n;if(A.mode==="lines")return a=A.line.color,a&&T.opacity(a)?a:A.fillcolor;if(A.mode==="none")return A.fill?A.fillcolor:"";var t=e.mcc||(A.marker||{}).color,r=e.mlcc||((A.marker||{}).line||{}).color;return n=t&&T.opacity(t)?t:r&&T.opacity(r)&&(e.mlw||((A.marker||{}).line||{}).width)?r:"",n?T.opacity(n)<.3?T.addOpacity(n,.3):n:(a=(A.line||{}).color,a&&T.opacity(a)&&c.hasLines(A)&&A.line.width?a:A.fillcolor)}},{"../../components/color":366,"./subtypes":952}],938:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/fx"),M=g("../../registry"),A=g("./get_trace_color"),e=g("../../components/color"),a=T.fillText;ne.exports=function(t,r,f,o){var i=t.cd,p=i[0].trace,d=t.xa,y=t.ya,v=d.c2p(r),x=y.c2p(f),l=[v,x],_=p.hoveron||"",s=p.mode.indexOf("markers")!==-1?3:.5,w=!!p.xperiodalignment,b=!!p.yperiodalignment;if(_.indexOf("points")!==-1){var h=function(ie){if(w){var le=d.c2p(ie.xStart),ye=d.c2p(ie.xEnd);return v>=Math.min(le,ye)&&v<=Math.max(le,ye)?0:1/0}var ue=Math.max(3,ie.mrc||0),pe=1-1/ue,ge=Math.abs(d.c2p(ie.x)-v);return ge<ue?pe*ge/ue:ge-ue+pe},m=function(ie){if(b){var le=y.c2p(ie.yStart),ye=y.c2p(ie.yEnd);return x>=Math.min(le,ye)&&x<=Math.max(le,ye)?0:1/0}var ue=Math.max(3,ie.mrc||0),pe=1-1/ue,ge=Math.abs(y.c2p(ie.y)-x);return ge<ue?pe*ge/ue:ge-ue+pe},u=function(ie){var le=Math.max(s,ie.mrc||0),ye=d.c2p(ie.x)-v,ue=y.c2p(ie.y)-x;return Math.max(Math.sqrt(ye*ye+ue*ue)-le,1-s/le)},L=c.getDistanceFunction(o,h,m,u);if(c.getClosest(i,L,t),t.index!==!1){var S=i[t.index],k=d.c2p(S.x,!0),P=y.c2p(S.y,!0),z=S.mrc||1;t.index=S.i;var I=i[0].t.orientation,D=I&&(S.sNorm||S.s),R=I==="h"?D:S.orig_x!==void 0?S.orig_x:S.x,B=I==="v"?D:S.orig_y!==void 0?S.orig_y:S.y;return T.extendFlat(t,{color:A(p,S),x0:k-z,x1:k+z,xLabelVal:R,y0:P-z,y1:P+z,yLabelVal:B,spikeDistance:u(S),hovertemplate:p.hovertemplate}),a(S,p,t),M.getComponentMethod("errorbars","hoverInfo")(S,p,t),[t]}}if(_.indexOf("fills")!==-1&&p._polygons){var F=p._polygons,V=[],Y=!1,K=1/0,J=-1/0,G=1/0,Z=-1/0,re,se,oe,N,U,q,Q,W,X;for(re=0;re<F.length;re++)oe=F[re],oe.contains(l)&&(Y=!Y,V.push(oe),G=Math.min(G,oe.ymin),Z=Math.max(Z,oe.ymax));if(Y){G=Math.max(G,0),Z=Math.min(Z,y._length);var te=(G+Z)/2;for(re=0;re<V.length;re++)for(N=V[re].pts,se=1;se<N.length;se++)W=N[se-1][1],X=N[se][1],W>te!=X>=te&&(q=N[se-1][0],Q=N[se][0],X-W&&(U=q+(Q-q)*(te-W)/(X-W),K=Math.min(K,U),J=Math.max(J,U)));K=Math.max(K,0),J=Math.min(J,d._length);var ee=e.defaultLine;return e.opacity(p.fillcolor)?ee=p.fillcolor:e.opacity((p.line||{}).color)&&(ee=p.line.color),T.extendFlat(t,{distance:t.maxHoverDistance,x0:K,x1:J,y0:te,y1:te,color:ee,hovertemplate:!1}),delete t.index,p.text&&!Array.isArray(p.text)?t.text=String(p.text):t.text=p.name,[t]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":937}],939:[function(g,ne,ae){var T=g("./subtypes");ne.exports={hasLines:T.hasLines,hasMarkers:T.hasMarkers,hasText:T.hasText,isBubble:T.isBubble,attributes:g("./attributes"),supplyDefaults:g("./defaults"),crossTraceDefaults:g("./cross_trace_defaults"),calc:g("./calc").calc,crossTraceCalc:g("./cross_trace_calc"),arraysToCalcdata:g("./arrays_to_calcdata"),plot:g("./plot"),colorbar:g("./marker_colorbar"),formatLabels:g("./format_labels"),style:g("./style").style,styleOnSelect:g("./style").styleOnSelect,hoverPoints:g("./hover"),selectPoints:g("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":926,"./attributes":927,"./calc":928,"./cross_trace_calc":932,"./cross_trace_defaults":933,"./defaults":934,"./format_labels":936,"./hover":938,"./marker_colorbar":945,"./plot":948,"./select":949,"./style":951,"./subtypes":952}],940:[function(g,ne,ae){var T=g("../../lib").isArrayOrTypedArray,c=g("../../components/colorscale/helpers").hasColorscale,M=g("../../components/colorscale/defaults");ne.exports=function(e,a,n,t,r,f){var o=(e.marker||{}).color;if(r("line.color",n),c(e,"line"))M(e,a,t,r,{prefix:"line.",cLetter:"c"});else{var i=(T(o)?!1:o)||n;r("line.color",i)}r("line.width"),(f||{}).noDash||r("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],941:[function(g,ne,ae){var T=g("../../constants/numerical"),c=T.BADNUM,M=T.LOG_CLIP,A=M+.5,e=M-.5,a=g("../../lib"),n=a.segmentsIntersect,t=a.constrain,r=g("./constants");ne.exports=function(o,i){var p=i.xaxis,d=i.yaxis,y=p.type==="log",v=d.type==="log",x=p._length,l=d._length,_=i.connectGaps,s=i.baseTolerance,w=i.shape,b=w==="linear",h=i.fill&&i.fill!=="none",m=[],u=r.minTolerance,L=o.length,S=new Array(L),k=0,P,z,I,D,R,B,F,V,Y,K,J,G,Z,re,se,oe;function N(Tt){var zt=o[Tt];if(!zt)return!1;var Ut=i.linearized?p.l2p(zt.x):p.c2p(zt.x),Et=i.linearized?d.l2p(zt.y):d.c2p(zt.y);if(Ut===c){if(y&&(Ut=p.c2p(zt.x,!0)),Ut===c)return!1;v&&Et===c&&(Ut*=Math.abs(p._m*l*(p._m>0?A:e)/(d._m*x*(d._m>0?A:e)))),Ut*=1e3}if(Et===c){if(v&&(Et=d.c2p(zt.y,!0)),Et===c)return!1;Et*=1e3}return[Ut,Et]}function U(Tt,zt,Ut,Et){var Mt=Ut-Tt,rt=Et-zt,ct=.5-Tt,Ze=.5-zt,ke=Mt*Mt+rt*rt,Ge=Mt*ct+rt*Ze;if(Ge>0&&Ge<ke){var Je=ct*rt-Ze*Mt;if(Je*Je<ke)return!0}}var q,Q;function W(Tt,zt){var Ut=Tt[0]/x,Et=Tt[1]/l,Mt=Math.max(0,-Ut,Ut-1,-Et,Et-1);return Mt&&q!==void 0&&U(Ut,Et,q,Q)&&(Mt=0),Mt&&zt&&U(Ut,Et,zt[0]/x,zt[1]/l)&&(Mt=0),(1+r.toleranceGrowth*Mt)*s}function X(Tt,zt){var Ut=Tt[0]-zt[0],Et=Tt[1]-zt[1];return Math.sqrt(Ut*Ut+Et*Et)}var te=r.maxScreensAway,ee=-x*te,ie=x*(1+te),le=-l*te,ye=l*(1+te),ue=[[ee,le,ie,le],[ie,le,ie,ye],[ie,ye,ee,ye],[ee,ye,ee,le]],pe,ge,Te,_e,De,Oe;function Ue(Tt,zt){for(var Ut=[],Et=0,Mt=0;Mt<4;Mt++){var rt=ue[Mt],ct=n(Tt[0],Tt[1],zt[0],zt[1],rt[0],rt[1],rt[2],rt[3]);ct&&(!Et||Math.abs(ct.x-Ut[0][0])>1||Math.abs(ct.y-Ut[0][1])>1)&&(ct=[ct.x,ct.y],Et&&X(ct,Tt)<X(Ut[0],Tt)?Ut.unshift(ct):Ut.push(ct),Et++)}return Ut}function xe(Tt){if(Tt[0]<ee||Tt[0]>ie||Tt[1]<le||Tt[1]>ye)return[t(Tt[0],ee,ie),t(Tt[1],le,ye)]}function Pe(Tt,zt){if(Tt[0]===zt[0]&&(Tt[0]===ee||Tt[0]===ie)||Tt[1]===zt[1]&&(Tt[1]===le||Tt[1]===ye))return!0}function Ve(Tt,zt){var Ut=[],Et=xe(Tt),Mt=xe(zt);return Et&&Mt&&Pe(Et,Mt)||(Et&&Ut.push(Et),Mt&&Ut.push(Mt)),Ut}function Qe(Tt,zt,Ut){return function(Et,Mt){var rt=xe(Et),ct=xe(Mt),Ze=[];if(rt&&ct&&Pe(rt,ct))return Ze;rt&&Ze.push(rt),ct&&Ze.push(ct);var ke=2*a.constrain((Et[Tt]+Mt[Tt])/2,zt,Ut)-((rt||Et)[Tt]+(ct||Mt)[Tt]);if(ke){var Ge;rt&&ct?Ge=ke>0==rt[Tt]>ct[Tt]?rt:ct:Ge=rt||ct,Ge[Tt]+=ke}return Ze}}var Fe;w==="linear"||w==="spline"?Fe=Ue:w==="hv"||w==="vh"?Fe=Ve:w==="hvh"?Fe=Qe(0,ee,ie):w==="vhv"&&(Fe=Qe(1,le,ye));function Le(Tt,zt){var Ut=zt[0]-Tt[0],Et=(zt[1]-Tt[1])/Ut,Mt=(Tt[1]*zt[0]-zt[1]*Tt[0])/Ut;return Mt>0?[Et>0?ee:ie,ye]:[Et>0?ie:ee,le]}function Ne(Tt){var zt=Tt[0],Ut=Tt[1],Et=zt===S[k-1][0],Mt=Ut===S[k-1][1];if(!(Et&&Mt))if(k>1){var rt=zt===S[k-2][0],ct=Ut===S[k-2][1];Et&&(zt===ee||zt===ie)&&rt?ct?k--:S[k-1]=Tt:Mt&&(Ut===le||Ut===ye)&&ct?rt?k--:S[k-1]=Tt:S[k++]=Tt}else S[k++]=Tt}function dt(Tt){S[k-1][0]!==Tt[0]&&S[k-1][1]!==Tt[1]&&Ne([Te,_e]),Ne(Tt),De=null,Te=_e=0}function Dt(Tt){if(q=Tt[0]/x,Q=Tt[1]/l,pe=Tt[0]<ee?ee:Tt[0]>ie?ie:0,ge=Tt[1]<le?le:Tt[1]>ye?ye:0,pe||ge){if(!k)S[k++]=[pe||Tt[0],ge||Tt[1]];else if(De){var zt=Fe(De,Tt);zt.length>1&&(dt(zt[0]),S[k++]=zt[1])}else Oe=Fe(S[k-1],Tt)[0],S[k++]=Oe;var Ut=S[k-1];pe&&ge&&(Ut[0]!==pe||Ut[1]!==ge)?(De&&(Te!==pe&&_e!==ge?Ne(Te&&_e?Le(De,Tt):[Te||pe,_e||ge]):Te&&_e&&Ne([Te,_e])),Ne([pe,ge])):Te-pe&&_e-ge&&Ne([pe||Te,ge||_e]),De=Tt,Te=pe,_e=ge}else De&&dt(Fe(De,Tt)[0]),S[k++]=Tt}for(P=0;P<L;P++)if(z=N(P),!!z){for(k=0,De=null,Dt(z),P++;P<L;P++){if(D=N(P),!D){if(_)continue;break}if(!b||!i.simplify){Dt(D);continue}var Xt=N(P+1);if(K=X(D,z),!(!(h&&(k===0||k===L-1))&&K<W(D,Xt)*u)){for(V=[(D[0]-z[0])/K,(D[1]-z[1])/K],R=z,J=K,G=re=se=0,F=!1,I=D,P++;P<o.length;P++){if(B=Xt,Xt=N(P+1),!B){if(_)continue;break}if(Y=[B[0]-z[0],B[1]-z[1]],oe=Y[0]*V[1]-Y[1]*V[0],re=Math.min(re,oe),se=Math.max(se,oe),se-re>W(B,Xt))break;I=B,Z=Y[0]*V[0]+Y[1]*V[1],Z>J?(J=Z,D=B,F=!1):Z<G&&(G=Z,R=B,F=!0)}if(F?(Dt(D),I!==R&&Dt(R)):(R!==z&&Dt(R),I!==D&&Dt(D)),Dt(I),P>=o.length||!B)break;Dt(B),z=B}}De&&Ne([Te||De[0],_e||De[1]]),m.push(S.slice(0,k))}return m}},{"../../constants/numerical":479,"../../lib":503,"./constants":931}],942:[function(g,ne,ae){ne.exports=function(c,M,A){var e=A("line.shape");e==="spline"&&A("line.smoothing")}},{}],943:[function(g,ne,ae){var T={tonextx:1,tonexty:1,tonext:1};ne.exports=function(M,A,e){var a,n,t,r,f,o={},i=!1,p=-1,d=0,y=-1;for(n=0;n<e.length;n++)a=e[n][0].trace,t=a.stackgroup||"",t?t in o?f=o[t]:(f=o[t]=d,d++):a.fill in T&&y>=0?f=y:(f=y=d,d++),f<p&&(i=!0),a._groupIndex=p=f;var v=e.slice();i&&v.sort(function(l,_){var s=l[0].trace,w=_[0].trace;return s._groupIndex-w._groupIndex||s.index-w.index});var x={};for(n=0;n<v.length;n++)a=v[n][0].trace,t=a.stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in T&&(r=x[t],a._prevtrace=r||null,r&&(r._nexttrace=a)),a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace),x[t]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return v}},{}],944:[function(g,ne,ae){var T=g("fast-isnumeric");ne.exports=function(M,A){A||(A=2);var e=M.marker,a=e.sizeref||1,n=e.sizemin||0,t=e.sizemode==="area"?function(r){return Math.sqrt(r/a)}:function(r){return r/a};return function(r){var f=t(r/A);return T(f)&&f>0?Math.max(f,n):0}}},{"fast-isnumeric":190}],945:[function(g,ne,ae){ne.exports={container:"marker",min:"cmin",max:"cmax"}},{}],946:[function(g,ne,ae){var T=g("../../components/color"),c=g("../../components/colorscale/helpers").hasColorscale,M=g("../../components/colorscale/defaults"),A=g("./subtypes");ne.exports=function(a,n,t,r,f,o){var i=A.isBubble(a),p=(a.line||{}).color,d;if(o=o||{},p&&(t=p),f("marker.symbol"),f("marker.opacity",i?.7:1),f("marker.size"),f("marker.color",t),c(a,"marker")&&M(a,n,r,f,{prefix:"marker.",cLetter:"c"}),o.noSelect||(f("selected.marker.color"),f("unselected.marker.color"),f("selected.marker.size"),f("unselected.marker.size")),o.noLine||(p&&!Array.isArray(p)&&n.marker.color!==p?d=p:i?d=T.background:d=T.defaultLine,f("marker.line.color",d),c(a,"marker.line")&&M(a,n,r,f,{prefix:"marker.line.",cLetter:"c"}),f("marker.line.width",i?1:0)),i&&(f("marker.sizeref"),f("marker.sizemin"),f("marker.sizemode")),o.gradient){var y=f("marker.gradient.type");y!=="none"&&f("marker.gradient.color")}}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":952}],947:[function(g,ne,ae){var T=g("../../lib").dateTick0,c=g("../../constants/numerical"),M=c.ONEWEEK;function A(e,a){return e%M==0?T(a,1):T(a,0)}ne.exports=function(a,n,t,r,f){if(f||(f={x:!0,y:!0}),f.x){var o=r("xperiod");o&&(r("xperiod0",A(o,n.xcalendar)),r("xperiodalignment"))}if(f.y){var i=r("yperiod");i&&(r("yperiod0",A(i,n.ycalendar)),r("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],948:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../registry"),M=g("../../lib"),A=M.ensureSingle,e=M.identity,a=g("../../components/drawing"),n=g("./subtypes"),t=g("./line_points"),r=g("./link_traces"),f=g("../../lib/polygon").tester;ne.exports=function(y,v,x,l,_,s){var w,b,h=!_,m=!!_&&_.duration>0,u=r(y,v,x);if(w=l.selectAll("g.trace").data(u,function(S){return S[0].trace.uid}),w.enter().append("g").attr("class",function(S){return"trace scatter trace"+S[0].trace.uid}).style("stroke-miterlimit",2),w.order(),o(y,w,v),m){s&&(b=s());var L=T.transition().duration(_.duration).ease(_.easing).each("end",function(){b&&b()}).each("interrupt",function(){b&&b()});L.each(function(){l.selectAll("g.trace").each(function(S,k){i(y,k,v,S,u,this,_)})})}else w.each(function(S,k){i(y,k,v,S,u,this,_)});h&&w.exit().remove(),l.selectAll("path:not([d])").remove()};function o(d,y,v){y.each(function(x){var l=A(T.select(this),"g","fills");a.setClipUrl(l,v.layerClipId,d);var _=x[0].trace,s=[];_._ownfill&&s.push("_ownFill"),_._nexttrace&&s.push("_nextFill");var w=l.selectAll("g").data(s,e);w.enter().append("g"),w.exit().each(function(b){_[b]=null}).remove(),w.order().each(function(b){_[b]=A(T.select(this),"path","js-fill")})})}function i(d,y,v,x,l,_,s){var w;p(d,y,v,x,l);var b=!!s&&s.duration>0;function h(Ue){return b?Ue.transition():Ue}var m=v.xaxis,u=v.yaxis,L=x[0].trace,S=L.line,k=T.select(_),P=A(k,"g","errorbars"),z=A(k,"g","lines"),I=A(k,"g","points"),D=A(k,"g","text");if(c.getComponentMethod("errorbars","plot")(d,P,v,s),L.visible!==!0)return;h(k).style("opacity",L.opacity);var R,B,F=L.fill.charAt(L.fill.length-1);F!=="x"&&F!=="y"&&(F=""),x[0][v.isRangePlot?"nodeRangePlot3":"node3"]=k;var V="",Y=[],K=L._prevtrace;K&&(V=K._prevRevpath||"",B=K._nextFill,Y=K._polygons);var J,G,Z="",re="",se,oe,N,U,q,Q,W,X=[],te=M.noop;if(R=L._ownFill,n.hasLines(L)||L.fill!=="none"){for(B&&B.datum(x),["hv","vh","hvh","vhv"].indexOf(S.shape)!==-1?(se=a.steps(S.shape),oe=a.steps(S.shape.split("").reverse().join(""))):S.shape==="spline"?se=oe=function(Ue){var xe=Ue[Ue.length-1];return Ue.length>1&&Ue[0][0]===xe[0]&&Ue[0][1]===xe[1]?a.smoothclosed(Ue.slice(1),S.smoothing):a.smoothopen(Ue,S.smoothing)}:se=oe=function(Ue){return"M"+Ue.join("L")},N=function(Ue){return oe(Ue.reverse())},X=t(x,{xaxis:m,yaxis:u,connectGaps:L.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,simplify:S.simplify,fill:L.fill}),W=L._polygons=new Array(X.length),w=0;w<X.length;w++)L._polygons[w]=f(X[w]);X.length&&(U=X[0][0],q=X[X.length-1],Q=q[q.length-1]),te=function(Ue){return function(xe){if(J=se(xe),G=N(xe),Z?F?(Z+="L"+J.substr(1),re=G+("L"+re.substr(1))):(Z+="Z"+J,re=G+"Z"+re):(Z=J,re=G),n.hasLines(L)&&xe.length>1){var Pe=T.select(this);if(Pe.datum(x),Ue)h(Pe.style("opacity",0).attr("d",J).call(a.lineGroupStyle)).style("opacity",1);else{var Ve=h(Pe);Ve.attr("d",J),a.singleLineStyle(x,Ve)}}}}}var ee=z.selectAll(".js-line").data(X);h(ee.exit()).style("opacity",0).remove(),ee.each(te(!1)),ee.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(a.lineGroupStyle).each(te(!0)),a.setClipUrl(ee,v.layerClipId,d);function ie(Ue){h(Ue).attr("d","M0,0Z")}X.length?(R?(R.datum(x),U&&Q&&(F?(F==="y"?U[1]=Q[1]=u.c2p(0,!0):F==="x"&&(U[0]=Q[0]=m.c2p(0,!0)),h(R).attr("d","M"+Q+"L"+U+"L"+Z.substr(1)).call(a.singleFillStyle,d)):h(R).attr("d",Z+"Z").call(a.singleFillStyle,d))):B&&(L.fill.substr(0,6)==="tonext"&&Z&&V?(L.fill==="tonext"?h(B).attr("d",Z+"Z"+V+"Z").call(a.singleFillStyle,d):h(B).attr("d",Z+"L"+V.substr(1)+"Z").call(a.singleFillStyle,d),L._polygons=L._polygons.concat(Y)):(ie(B),L._polygons=null)),L._prevRevpath=re,L._prevPolygons=W):(R?ie(R):B&&ie(B),L._polygons=L._prevRevpath=L._prevPolygons=null);function le(Ue){return Ue.filter(function(xe){return!xe.gap&&xe.vis})}function ye(Ue){return Ue.filter(function(xe){return xe.vis})}function ue(Ue){return Ue.filter(function(xe){return!xe.gap})}function pe(Ue){return Ue.id}function ge(Ue){if(Ue.ids)return pe}function Te(){return!1}function _e(Ue,xe,Pe){var Ve,Qe,Fe,Le=Pe[0].trace,Ne=n.hasMarkers(Le),dt=n.hasText(Le),Dt=ge(Le),Xt=Te,Tt=Te;if(Ne||dt){var zt=e,Ut=Le.stackgroup,Et=Ut&&d._fullLayout._scatterStackOpts[m._id+u._id][Ut].stackgaps==="infer zero";Le.marker.maxdisplayed||Le._needsCull?zt=Et?ye:le:Ut&&!Et&&(zt=ue),Ne&&(Xt=zt),dt&&(Tt=zt)}Qe=Ue.selectAll("path.point"),Ve=Qe.data(Xt,Dt);var Mt=Ve.enter().append("path").classed("point",!0);b&&Mt.call(a.pointStyle,Le,d).call(a.translatePoints,m,u).style("opacity",0).transition().style("opacity",1),Ve.order();var rt;Ne&&(rt=a.makePointStyleFns(Le)),Ve.each(function(ct){var Ze=T.select(this),ke=h(Ze);Fe=a.translatePoint(ct,ke,m,u),Fe?(a.singlePointStyle(ct,ke,Le,rt,d),v.layerClipId&&a.hideOutsideRangePoint(ct,ke,m,u,Le.xcalendar,Le.ycalendar),Le.customdata&&Ze.classed("plotly-customdata",ct.data!==null&&ct.data!==void 0)):ke.remove()}),b?Ve.exit().transition().style("opacity",0).remove():Ve.exit().remove(),Qe=xe.selectAll("g"),Ve=Qe.data(Tt,Dt),Ve.enter().append("g").classed("textpoint",!0).append("text"),Ve.order(),Ve.each(function(ct){var Ze=T.select(this),ke=h(Ze.select("text"));Fe=a.translatePoint(ct,ke,m,u),Fe?v.layerClipId&&a.hideOutsideRangePoint(ct,Ze,m,u,Le.xcalendar,Le.ycalendar):Ze.remove()}),Ve.selectAll("text").call(a.textPointStyle,Le,d).each(function(ct){var Ze=m.c2p(ct.x),ke=u.c2p(ct.y);T.select(this).selectAll("tspan.line").each(function(){h(T.select(this)).attr({x:Ze,y:ke})})}),Ve.exit().remove()}I.datum(x),D.datum(x),_e(I,D,x);var De=L.cliponaxis===!1,Oe=De?null:v.layerClipId;a.setClipUrl(I,Oe,d),a.setClipUrl(D,Oe,d)}function p(d,y,v,x,l){var _=v.xaxis,s=v.yaxis,w=T.extent(M.simpleMap(_.range,_.r2c)),b=T.extent(M.simpleMap(s.range,s.r2c)),h=x[0].trace;if(!!n.hasMarkers(h)){var m=h.marker.maxdisplayed;if(m!==0){var u=x.filter(function(P){return P.x>=w[0]&&P.x<=w[1]&&P.y>=b[0]&&P.y<=b[1]}),L=Math.ceil(u.length/m),S=0;l.forEach(function(P,z){var I=P[0].trace;n.hasMarkers(I)&&I.marker.maxdisplayed>0&&z<y&&S++});var k=Math.round(S*L/3+Math.floor(S/3)*L/7.1);x.forEach(function(P){delete P.vis}),u.forEach(function(P,z){Math.round((z+k)%L)===0&&(P.vis=!0)})}}}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":941,"./link_traces":943,"./subtypes":952,"@plotly/d3":58}],949:[function(g,ne,ae){var T=g("./subtypes");ne.exports=function(M,A){var e=M.cd,a=M.xaxis,n=M.yaxis,t=[],r=e[0].trace,f,o,i,p,d=!T.hasMarkers(r)&&!T.hasText(r);if(d)return[];if(A===!1)for(f=0;f<e.length;f++)e[f].selected=0;else for(f=0;f<e.length;f++)o=e[f],i=a.c2p(o.x),p=n.c2p(o.y),o.i!==null&&A.contains([i,p],!1,f,M)?(t.push({pointNumber:o.i,x:a.c2d(o.x),y:n.c2d(o.y)}),o.selected=1):o.selected=0;return t}},{"./subtypes":952}],950:[function(g,ne,ae){var T=["orientation","groupnorm","stackgaps"];ne.exports=function(M,A,e,a){var n=e._scatterStackOpts,t=a("stackgroup");if(t){var r=A.xaxis+A.yaxis,f=n[r];f||(f=n[r]={});var o=f[t],i=!1;o?o.traces.push(A):(o=f[t]={traceIndices:[],traces:[A]},i=!0);for(var p={orientation:A.x&&!A.y?"h":"v"},d=0;d<T.length;d++){var y=T[d],v=y+"Found";if(!o[v]){var x=M[y]!==void 0,l=y==="orientation";if((x||i)&&(o[y]=a(y,p[y]),l&&(o.fillDflt=o[y]==="h"?"tonextx":"tonexty"),x&&(o[v]=!0,!i&&(delete o.traces[0][y],l))))for(var _=0;_<o.traces.length-1;_++){var s=o.traces[_];s._input.fill!==s.fill&&(s.fill=o.fillDflt)}}}return o}}},{}],951:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/drawing"),M=g("../../registry");function A(t){var r=T.select(t).selectAll("g.trace.scatter");r.style("opacity",function(f){return f[0].trace.opacity}),r.selectAll("g.points").each(function(f){var o=T.select(this),i=f.trace||f[0].trace;e(o,i,t)}),r.selectAll("g.text").each(function(f){var o=T.select(this),i=f.trace||f[0].trace;a(o,i,t)}),r.selectAll("g.trace path.js-line").call(c.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(c.fillGroupStyle,t),M.getComponentMethod("errorbars","style")(r)}function e(t,r,f){c.pointStyle(t.selectAll("path.point"),r,f)}function a(t,r,f){c.textPointStyle(t.selectAll("text"),r,f)}function n(t,r,f){var o=r[0].trace;o.selectedpoints?(c.selectedPointStyle(f.selectAll("path.point"),o),c.selectedTextStyle(f.selectAll("text"),o)):(e(f,o,t),a(f,o,t))}ne.exports={style:A,stylePoints:e,styleText:a,styleOnSelect:n}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],952:[function(g,ne,ae){var T=g("../../lib");ne.exports={hasLines:function(c){return c.visible&&c.mode&&c.mode.indexOf("lines")!==-1},hasMarkers:function(c){return c.visible&&(c.mode&&c.mode.indexOf("markers")!==-1||c.type==="splom")},hasText:function(c){return c.visible&&c.mode&&c.mode.indexOf("text")!==-1},isBubble:function(c){return T.isPlainObject(c.marker)&&T.isArrayOrTypedArray(c.marker.size)}}},{"../../lib":503}],953:[function(g,ne,ae){var T=g("../../lib");ne.exports=function(c,M,A,e,a){a=a||{},e("textposition"),T.coerceFont(e,"textfont",A.font),a.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],954:[function(g,ne,ae){var T=g("../../lib"),c=g("../../registry");ne.exports=function(A,e,a,n){var t=n("x"),r=n("y"),f,o=c.getComponentMethod("calendars","handleTraceDefaults");if(o(A,e,["x","y"],a),t){var i=T.minRowLength(t);r?f=Math.min(i,T.minRowLength(r)):(f=i,n("y0"),n("dy"))}else{if(!r)return 0;f=T.minRowLength(r),n("x0"),n("dx")}return e._length=f,f}},{"../../lib":503,"../../registry":638}],955:[function(g,ne,ae){var T=g("../scatter/attributes"),c=g("../../components/colorscale/attributes"),M=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=g("../../plots/template_attributes").hovertemplateAttrs,e=g("../../plots/template_attributes").texttemplateAttrs,a=g("../../plots/attributes"),n=g("../../constants/gl3d_dashes"),t=g("../../constants/gl3d_markers"),r=g("../../lib/extend").extendFlat,f=g("../../plot_api/edit_types").overrideAll,o=g("../../lib/sort_object_keys"),i=T.line,p=T.marker,d=p.line,y=r({width:i.width,dash:{valType:"enumerated",values:o(n),dflt:"solid"}},c("line"));function v(l){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var x=ne.exports=f({x:T.x,y:T.y,z:{valType:"data_array"},text:r({},T.text,{}),texttemplate:e({},{}),hovertext:r({},T.hovertext,{}),hovertemplate:A(),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),mode:r({},T.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:v(),y:v(),z:v()},connectgaps:T.connectgaps,line:y,marker:r({symbol:{valType:"enumerated",values:o(t),dflt:"circle",arrayOk:!0},size:r({},p.size,{dflt:8}),sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode,opacity:r({},p.opacity,{arrayOk:!1}),colorbar:p.colorbar,line:r({width:r({},d.width,{arrayOk:!1})},c("marker.line"))},c("marker")),textposition:r({},T.textposition,{dflt:"top center"}),textfont:{color:T.textfont.color,size:T.textfont.size,family:r({},T.textfont.family,{arrayOk:!1})},opacity:a.opacity,hoverinfo:r({},a.hoverinfo)},"calc","nested");x.x.editType=x.y.editType=x.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":927}],956:[function(g,ne,ae){var T=g("../scatter/arrays_to_calcdata"),c=g("../scatter/colorscale_calc");ne.exports=function(A,e){var a=[{x:!1,y:!1,trace:e,t:{}}];return T(a,e),c(A,e),a}},{"../scatter/arrays_to_calcdata":926,"../scatter/colorscale_calc":930}],957:[function(g,ne,ae){var T=g("../../registry");function c(e,a,n,t){if(!a||!a.visible)return null;for(var r=T.getComponentMethod("errorbars","makeComputeError")(a),f=new Array(e.length),o=0;o<e.length;o++){var i=r(+e[o],o);if(t.type==="log"){var p=t.c2l(e[o]),d=e[o]-i[0],y=e[o]+i[1];if(f[o]=[(t.c2l(d,!0)-p)*n,(t.c2l(y,!0)-p)*n],d>0){var v=t.c2l(d);t._lowerLogErrorBound||(t._lowerLogErrorBound=v),t._lowerErrorBound=Math.min(t._lowerLogErrorBound,v)}}else f[o]=[-i[0]*n,i[1]*n]}return f}function M(e){for(var a=0;a<e.length;a++)if(e[a])return e[a].length;return 0}function A(e,a,n){var t=[c(e.x,e.error_x,a[0],n.xaxis),c(e.y,e.error_y,a[1],n.yaxis),c(e.z,e.error_z,a[2],n.zaxis)],r=M(t);if(r===0)return null;for(var f=new Array(r),o=0;o<r;o++){for(var i=[[0,0,0],[0,0,0]],p=0;p<3;p++)if(t[p])for(var d=0;d<2;d++)i[d][p]=t[p][o][d];f[o]=i}return f}ne.exports=A},{"../../registry":638}],958:[function(g,ne,ae){var T=g("../../../stackgl_modules").gl_line3d,c=g("../../../stackgl_modules").gl_scatter3d,M=g("../../../stackgl_modules").gl_error3d,A=g("../../../stackgl_modules").gl_mesh3d,e=g("../../../stackgl_modules").delaunay_triangulate,a=g("../../lib"),n=g("../../lib/str2rgbarray"),t=g("../../lib/gl_format_color").formatColor,r=g("../scatter/make_bubble_size_func"),f=g("../../constants/gl3d_dashes"),o=g("../../constants/gl3d_markers"),i=g("../../plots/cartesian/axes"),p=g("../../components/fx/helpers").appendArrayPointValue,d=g("./calc_errors");function y(P,z){this.scene=P,this.uid=z,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var v=y.prototype;v.handlePick=function(P){if(P.object&&(P.object===this.linePlot||P.object===this.delaunayMesh||P.object===this.textMarkers||P.object===this.scatterPlot)){var z=P.index=P.data.index;return P.object.highlight&&P.object.highlight(null),this.scatterPlot&&(P.object=this.scatterPlot,this.scatterPlot.highlight(P.data)),P.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[z]||this.textLabels[z]===0)&&(P.textLabel=this.textLabels[z]):P.textLabel=this.textLabels),P.traceCoordinate=[this.data.x[z],this.data.y[z],this.data.z[z]],!0}};function x(P,z,I){var D=(I+1)%3,R=(I+2)%3,B=[],F=[],V;for(V=0;V<P.length;++V){var Y=P[V];isNaN(Y[D])||!isFinite(Y[D])||isNaN(Y[R])||!isFinite(Y[R])||(B.push([Y[D],Y[R]]),F.push(V))}var K=e(B);for(V=0;V<K.length;++V)for(var J=K[V],G=0;G<J.length;++G)J[G]=F[J[G]];return{positions:P,cells:K,meshColor:z}}function l(P){for(var z=[0,0,0],I=[[0,0,0],[0,0,0],[0,0,0]],D=[1,1,1],R=0;R<3;R++){var B=P[R];B&&B.copy_zstyle!==!1&&P[2].visible!==!1&&(B=P[2]),!(!B||!B.visible)&&(z[R]=B.width/2,I[R]=n(B.color),D[R]=B.thickness)}return{capSize:z,color:I,lineWidth:D}}function _(P){return P==null?0:P.indexOf("left")>-1?-1:P.indexOf("right")>-1?1:0}function s(P){return P==null?0:P.indexOf("top")>-1?-1:P.indexOf("bottom")>-1?1:0}function w(P){var z=0,I=0,D=[z,I];if(Array.isArray(P))for(var R=0;R<P.length;R++)D[R]=[z,I],P[R]&&(D[R][0]=_(P[R]),D[R][1]=s(P[R]));else D[0]=_(P),D[1]=s(P);return D}function b(P,z){return z(P*4)}function h(P){return o[P]}function m(P,z,I,D,R){var B=null;if(a.isArrayOrTypedArray(P)){B=[];for(var F=0;F<z;F++)P[F]===void 0?B[F]=D:B[F]=I(P[F],R)}else B=I(P,a.identity);return B}function u(P,z){var I=[],D=P.fullSceneLayout,R=P.dataScale,B=D.xaxis,F=D.yaxis,V=D.zaxis,Y=z.marker,K=z.line,J=z.x||[],G=z.y||[],Z=z.z||[],re=J.length,se=z.xcalendar,oe=z.ycalendar,N=z.zcalendar,U,q,Q,W,X,te;for(X=0;X<re;X++)U=B.d2l(J[X],0,se)*R[0],q=F.d2l(G[X],0,oe)*R[1],Q=V.d2l(Z[X],0,N)*R[2],I[X]=[U,q,Q];if(Array.isArray(z.text))te=z.text;else if(z.text!==void 0)for(te=new Array(re),X=0;X<re;X++)te[X]=z.text;function ee(Qe,Fe){var Le=D[Qe];return i.tickText(Le,Le.d2l(Fe),!0).text}var ie=z.texttemplate;if(ie){var le=P.fullLayout,ye=le._d3locale,ue=Array.isArray(ie),pe=ue?Math.min(ie.length,re):re,ge=ue?function(Qe){return ie[Qe]}:function(){return ie};for(te=new Array(pe),X=0;X<pe;X++){var Te={x:J[X],y:G[X],z:Z[X]},_e={xLabel:ee("xaxis",J[X]),yLabel:ee("yaxis",G[X]),zLabel:ee("zaxis",Z[X])},De={};p(De,z,X);var Oe=z._meta||{};te[X]=a.texttemplateString(ge(X),_e,ye,De,Te,Oe)}}if(W={position:I,mode:z.mode,text:te},"line"in z&&(W.lineColor=t(K,1,re),W.lineWidth=K.width,W.lineDashes=K.dash),"marker"in z){var Ue=r(z);W.scatterColor=t(Y,1,re),W.scatterSize=m(Y.size,re,b,20,Ue),W.scatterMarker=m(Y.symbol,re,h,"\u25CF"),W.scatterLineWidth=Y.line.width,W.scatterLineColor=t(Y.line,1,re),W.scatterAngle=0}"textposition"in z&&(W.textOffset=w(z.textposition),W.textColor=t(z.textfont,1,re),W.textSize=m(z.textfont.size,re,a.identity,12),W.textFont=z.textfont.family,W.textAngle=0);var xe=["x","y","z"];for(W.project=[!1,!1,!1],W.projectScale=[1,1,1],W.projectOpacity=[1,1,1],X=0;X<3;++X){var Pe=z.projection[xe[X]];(W.project[X]=Pe.show)&&(W.projectOpacity[X]=Pe.opacity,W.projectScale[X]=Pe.scale)}W.errorBounds=d(z,R,D);var Ve=l([z.error_x,z.error_y,z.error_z]);return W.errorColor=Ve.color,W.errorLineWidth=Ve.lineWidth,W.errorCapSize=Ve.capSize,W.delaunayAxis=z.surfaceaxis,W.delaunayColor=n(z.surfacecolor),W}function L(P){if(a.isArrayOrTypedArray(P)){var z=P[0];return a.isArrayOrTypedArray(z)&&(P=z),"rgb("+P.slice(0,3).map(function(I){return Math.round(I*255)})+")"}return null}function S(P){return a.isArrayOrTypedArray(P)?P.length===4&&typeof P[0]=="number"?L(P):P.map(L):null}v.update=function(P){var z=this.scene.glplot.gl,I,D,R,B,F=f.solid;this.data=P;var V=u(this.scene,P);"mode"in V&&(this.mode=V.mode),"lineDashes"in V&&V.lineDashes in f&&(F=f[V.lineDashes]),this.color=S(V.scatterColor)||S(V.lineColor),this.dataPoints=V.position,I={gl:this.scene.glplot.gl,position:V.position,color:V.lineColor,lineWidth:V.lineWidth||1,dashes:F[0],dashScale:F[1],opacity:P.opacity,connectGaps:P.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(I):(this.linePlot=T(I),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var Y=P.opacity;if(P.marker&&P.marker.opacity&&(Y*=P.marker.opacity),D={gl:this.scene.glplot.gl,position:V.position,color:V.scatterColor,size:V.scatterSize,glyph:V.scatterMarker,opacity:Y,orthographic:!0,lineWidth:V.scatterLineWidth,lineColor:V.scatterLineColor,project:V.project,projectScale:V.projectScale,projectOpacity:V.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(D):(this.scatterPlot=c(D),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),B={gl:this.scene.glplot.gl,position:V.position,glyph:V.text,color:V.textColor,size:V.textSize,angle:V.textAngle,alignment:V.textOffset,font:V.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:P.opacity},this.textLabels=P.hovertext||P.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(B):(this.textMarkers=c(B),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),R={gl:this.scene.glplot.gl,position:V.position,color:V.errorColor,error:V.errorBounds,lineWidth:V.errorLineWidth,capSize:V.errorCapSize,opacity:P.opacity},this.errorBars?V.errorBounds?this.errorBars.update(R):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):V.errorBounds&&(this.errorBars=M(R),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),V.delaunayAxis>=0){var K=x(V.position,V.delaunayColor,V.delaunayAxis);K.opacity=P.opacity,this.delaunayMesh?this.delaunayMesh.update(K):(K.gl=z,this.delaunayMesh=A(K),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},v.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function k(P,z){var I=new y(P,z.uid);return I.update(z),I}ne.exports=k},{"../../../stackgl_modules":1124,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":944,"./calc_errors":957}],959:[function(g,ne,ae){var T=g("../../registry"),c=g("../../lib"),M=g("../scatter/subtypes"),A=g("../scatter/marker_defaults"),e=g("../scatter/line_defaults"),a=g("../scatter/text_defaults"),n=g("./attributes");ne.exports=function(f,o,i,p){function d(b,h){return c.coerce(f,o,n,b,h)}var y=t(f,o,d,p);if(!y){o.visible=!1;return}d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),d("zhoverformat"),d("mode"),M.hasLines(o)&&(d("connectgaps"),e(f,o,i,p,d)),M.hasMarkers(o)&&A(f,o,i,p,d,{noSelect:!0}),M.hasText(o)&&(d("texttemplate"),a(f,o,p,d,{noSelect:!0}));var v=(o.line||{}).color,x=(o.marker||{}).color;d("surfaceaxis")>=0&&d("surfacecolor",v||x);for(var l=["x","y","z"],_=0;_<3;++_){var s="projection."+l[_];d(s+".show")&&(d(s+".opacity"),d(s+".scale"))}var w=T.getComponentMethod("errorbars","supplyDefaults");w(f,o,v||x||i,{axis:"z"}),w(f,o,v||x||i,{axis:"y",inherit:"z"}),w(f,o,v||x||i,{axis:"x",inherit:"z"})};function t(r,f,o,i){var p=0,d=o("x"),y=o("y"),v=o("z"),x=T.getComponentMethod("calendars","handleTraceDefaults");return x(r,f,["x","y","z"],i),d&&y&&v&&(p=Math.min(d.length,y.length,v.length),f._length=f._xlength=f._ylength=f._zlength=p),p}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":955}],960:[function(g,ne,ae){ne.exports={plot:g("./convert"),attributes:g("./attributes"),markerSymbols:g("../../constants/gl3d_markers"),supplyDefaults:g("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:g("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:g("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":955,"./calc":956,"./convert":958,"./defaults":959}],961:[function(g,ne,ae){var T=g("../scatter/attributes"),c=g("../../plots/attributes"),M=g("../../plots/template_attributes").hovertemplateAttrs,A=g("../../plots/template_attributes").texttemplateAttrs,e=g("../../components/colorscale/attributes"),a=g("../../lib/extend").extendFlat,n=T.marker,t=T.line,r=n.line;ne.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:a({},T.mode,{dflt:"markers"}),text:a({},T.text,{}),texttemplate:A({editType:"plot"},{keys:["a","b","text"]}),hovertext:a({},T.hovertext,{}),line:{color:t.color,width:t.width,dash:t.dash,shape:a({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:T.connectgaps,fill:a({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,marker:a({symbol:n.symbol,opacity:n.opacity,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:a({width:r.width,editType:"calc"},e("marker.line")),gradient:n.gradient,editType:"calc"},e("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:a({},c.hoverinfo,{flags:["a","b","text","name"]}),hoveron:T.hoveron,hovertemplate:M()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],962:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../scatter/colorscale_calc"),M=g("../scatter/arrays_to_calcdata"),A=g("../scatter/calc_selection"),e=g("../scatter/calc").calcMarkerSize,a=g("../carpet/lookup_carpetid");ne.exports=function(t,r){var f=r._carpetTrace=a(t,r);if(!(!f||!f.visible||f.visible==="legendonly")){var o;r.xaxis=f.xaxis,r.yaxis=f.yaxis;var i=r._length,p=new Array(i),d,y,v=!1;for(o=0;o<i;o++)if(d=r.a[o],y=r.b[o],T(d)&&T(y)){var x=f.ab2xy(+d,+y,!0),l=f.isVisible(+d,+y);l||(v=!0),p[o]={x:x[0],y:x[1],a:d,b:y,vis:l}}else p[o]={x:!1,y:!1};return r._needsCull=v,p[0].carpet=f,p[0].trace=r,e(r,i),c(t,r),M(p,r),A(p,r),p}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],963:[function(g,ne,ae){var T=g("../../lib"),c=g("../scatter/constants"),M=g("../scatter/subtypes"),A=g("../scatter/marker_defaults"),e=g("../scatter/line_defaults"),a=g("../scatter/line_shape_defaults"),n=g("../scatter/text_defaults"),t=g("../scatter/fillcolor_defaults"),r=g("./attributes");ne.exports=function(o,i,p,d){function y(b,h){return T.coerce(o,i,r,b,h)}y("carpet"),i.xaxis="x",i.yaxis="y";var v=y("a"),x=y("b"),l=Math.min(v.length,x.length);if(!l){i.visible=!1;return}i._length=l,y("text"),y("texttemplate"),y("hovertext");var _=l<c.PTS_LINESONLY?"lines+markers":"lines";y("mode",_),M.hasLines(i)&&(e(o,i,p,d,y),a(o,i,y),y("connectgaps")),M.hasMarkers(i)&&A(o,i,p,d,y,{gradient:!0}),M.hasText(i)&&n(o,i,d,y);var s=[];(M.hasMarkers(i)||M.hasText(i))&&(y("marker.maxdisplayed"),s.push("points")),y("fill"),i.fill!=="none"&&(t(o,i,p,y),M.hasLines(i)||a(o,i,y)),(i.fill==="tonext"||i.fill==="toself")&&s.push("fills");var w=y("hoveron",s.join("+")||"points");w!=="fills"&&y("hovertemplate"),T.coerceSelectionMarkerOpacity(i,y)}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":961}],964:[function(g,ne,ae){ne.exports=function(c,M,A,e,a){var n=e[a];return c.a=n.a,c.b=n.b,c.y=n.y,c}},{}],965:[function(g,ne,ae){ne.exports=function(c,M){var A={},e=M._carpet,a=e.ab2ij([c.a,c.b]),n=Math.floor(a[0]),t=a[0]-n,r=Math.floor(a[1]),f=a[1]-r,o=e.evalxy([],n,r,t,f);return A.yLabel=o[1].toFixed(3),A}},{}],966:[function(g,ne,ae){var T=g("../scatter/hover"),c=g("../../lib").fillText;ne.exports=function(A,e,a,n){var t=T(A,e,a,n);if(!t||t[0].index===!1)return;var r=t[0];if(r.index===void 0){var f=1-r.y0/A.ya._length,o=A.xa._length,i=o*f/2,p=o-i;return r.x0=Math.max(Math.min(r.x0,p),i),r.x1=Math.max(Math.min(r.x1,p),i),t}var d=r.cd[r.index];r.a=d.a,r.b=d.b,r.xLabelVal=void 0,r.yLabelVal=void 0;var y=r.trace,v=y._carpet,x=y._module.formatLabels(d,y);r.yLabel=x.yLabel,delete r.text;var l=[];function _(b,h){var m;b.labelprefix&&b.labelprefix.length>0?m=b.labelprefix.replace(/ = $/,""):m=b._hovertitle,l.push(m+": "+h.toFixed(3)+b.labelsuffix)}if(!y.hovertemplate){var s=d.hi||y.hoverinfo,w=s.split("+");w.indexOf("all")!==-1&&(w=["a","b","text"]),w.indexOf("a")!==-1&&_(v.aaxis,d.a),w.indexOf("b")!==-1&&_(v.baxis,d.b),l.push("y: "+r.yLabel),w.indexOf("text")!==-1&&c(d,y,l),r.extraText=l.join("<br>")}return t}},{"../../lib":503,"../scatter/hover":938}],967:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("./calc"),plot:g("./plot"),style:g("../scatter/style").style,styleOnSelect:g("../scatter/style").styleOnSelect,hoverPoints:g("./hover"),selectPoints:g("../scatter/select"),eventData:g("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:g("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":961,"./calc":962,"./defaults":963,"./event_data":964,"./format_labels":965,"./hover":966,"./plot":968}],968:[function(g,ne,ae){var T=g("../scatter/plot"),c=g("../../plots/cartesian/axes"),M=g("../../components/drawing");ne.exports=function(e,a,n,t){var r,f,o,i=n[0][0].carpet,p={xaxis:c.getFromId(e,i.xaxis||"x"),yaxis:c.getFromId(e,i.yaxis||"y"),plot:a.plot};for(T(e,p,n,t),r=0;r<n.length;r++)f=n[r][0].trace,o=t.selectAll("g.trace"+f.uid+" .js-line"),M.setClipUrl(o,n[r][0].carpet._clipPathId,e)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":948}],969:[function(g,ne,ae){var T=g("../../plots/template_attributes").hovertemplateAttrs,c=g("../../plots/template_attributes").texttemplateAttrs,M=g("../scatter/attributes"),A=g("../../plots/attributes"),e=g("../../components/colorscale/attributes"),a=g("../../components/drawing/attributes").dash,n=g("../../lib/extend").extendFlat,t=g("../../plot_api/edit_types").overrideAll,r=M.marker,f=M.line,o=r.line;ne.exports=t({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:n({},M.mode,{dflt:"markers"}),text:n({},M.text,{}),texttemplate:c({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:n({},M.hovertext,{}),textfont:M.textfont,textposition:M.textposition,line:{color:f.color,width:f.width,dash:a},connectgaps:M.connectgaps,marker:n({symbol:r.symbol,opacity:r.opacity,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:n({width:o.width},e("marker.line")),gradient:r.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:M.fillcolor,selected:M.selected,unselected:M.unselected,hoverinfo:n({},A.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:T()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],970:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../constants/numerical").BADNUM,M=g("../scatter/colorscale_calc"),A=g("../scatter/arrays_to_calcdata"),e=g("../scatter/calc_selection"),a=g("../../lib")._;function n(t){return t&&typeof t=="string"}ne.exports=function(r,f){var o=Array.isArray(f.locations),i=o?f.locations.length:f._length,p=new Array(i),d;f.geojson?d=function(s){return n(s)||T(s)}:d=n;for(var y=0;y<i;y++){var v=p[y]={};if(o){var x=f.locations[y];v.loc=d(x)?x:null}else{var l=f.lon[y],_=f.lat[y];T(l)&&T(_)?v.lonlat=[+l,+_]:v.lonlat=[c,c]}}return A(p,f),M(r,f),e(p,f),i&&(p[0].t={labels:{lat:a(r,"lat:")+" ",lon:a(r,"lon:")+" "}}),p}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],971:[function(g,ne,ae){var T=g("../../lib"),c=g("../scatter/subtypes"),M=g("../scatter/marker_defaults"),A=g("../scatter/line_defaults"),e=g("../scatter/text_defaults"),a=g("../scatter/fillcolor_defaults"),n=g("./attributes");ne.exports=function(r,f,o,i){function p(w,b){return T.coerce(r,f,n,w,b)}var d=p("locations"),y;if(d&&d.length){var v=p("geojson"),x;(typeof v=="string"&&v!==""||T.isPlainObject(v))&&(x="geojson-id");var l=p("locationmode",x);l==="geojson-id"&&p("featureidkey"),y=d.length}else{var _=p("lon")||[],s=p("lat")||[];y=Math.min(_.length,s.length)}if(!y){f.visible=!1;return}f._length=y,p("text"),p("hovertext"),p("hovertemplate"),p("mode"),c.hasLines(f)&&(A(r,f,o,i,p),p("connectgaps")),c.hasMarkers(f)&&M(r,f,o,i,p,{gradient:!0}),c.hasText(f)&&(p("texttemplate"),e(r,f,i,p)),p("fill"),f.fill!=="none"&&a(r,f,o,p),T.coerceSelectionMarkerOpacity(f,p)}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":969}],972:[function(g,ne,ae){ne.exports=function(c,M,A,e,a){c.lon=M.lon,c.lat=M.lat,c.location=M.loc?M.loc:null;var n=e[a];return n.fIn&&n.fIn.properties&&(c.properties=n.fIn.properties),c}},{}],973:[function(g,ne,ae){var T=g("../../plots/cartesian/axes");ne.exports=function(M,A,e){var a={},n=e[A.geo]._subplot,t=n.mockAxis,r=M.lonlat;return a.lonLabel=T.tickText(t,t.c2l(r[0]),!0).text,a.latLabel=T.tickText(t,t.c2l(r[1]),!0).text,a}},{"../../plots/cartesian/axes":554}],974:[function(g,ne,ae){var T=g("../../components/fx"),c=g("../../constants/numerical").BADNUM,M=g("../scatter/get_trace_color"),A=g("../../lib").fillText,e=g("./attributes");ne.exports=function(t,r,f){var o=t.cd,i=o[0].trace,p=t.xa,d=t.ya,y=t.subplot,v=y.projection.isLonLatOverEdges,x=y.project;function l(u){var L=u.lonlat;if(L[0]===c||v(L))return 1/0;var S=x(L),k=x([r,f]),P=Math.abs(S[0]-k[0]),z=Math.abs(S[1]-k[1]),I=Math.max(3,u.mrc||0);return Math.max(Math.sqrt(P*P+z*z)-I,1-3/I)}if(T.getClosest(o,l,t),t.index!==!1){var _=o[t.index],s=_.lonlat,w=[p.c2p(s),d.c2p(s)],b=_.mrc||1;t.x0=w[0]-b,t.x1=w[0]+b,t.y0=w[1]-b,t.y1=w[1]+b,t.loc=_.loc,t.lon=s[0],t.lat=s[1];var h={};h[i.geo]={_subplot:y};var m=i._module.formatLabels(_,i,h);return t.lonLabel=m.lonLabel,t.latLabel=m.latLabel,t.color=M(i,_),t.extraText=a(i,_,t,o[0].t.labels),t.hovertemplate=i.hovertemplate,[t]}};function a(n,t,r,f){if(n.hovertemplate)return;var o=t.hi||n.hoverinfo,i=o==="all"?e.hoverinfo.flags:o.split("+"),p=i.indexOf("location")!==-1&&Array.isArray(n.locations),d=i.indexOf("lon")!==-1,y=i.indexOf("lat")!==-1,v=i.indexOf("text")!==-1,x=[];function l(_){return _+"\xB0"}return p?x.push(t.loc):d&&y?x.push("("+l(r.latLabel)+", "+l(r.lonLabel)+")"):d?x.push(f.lon+l(r.lonLabel)):y&&x.push(f.lat+l(r.latLabel)),v&&A(t,n,x),x.join("<br>")}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937,"./attributes":969}],975:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("./calc"),calcGeoJSON:g("./plot").calcGeoJSON,plot:g("./plot").plot,style:g("./style"),styleOnSelect:g("../scatter/style").styleOnSelect,hoverPoints:g("./hover"),eventData:g("./event_data"),selectPoints:g("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:g("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":945,"../scatter/style":951,"./attributes":969,"./calc":970,"./defaults":971,"./event_data":972,"./format_labels":973,"./hover":974,"./plot":976,"./select":977,"./style":978}],976:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=g("../../lib/topojson_utils").getTopojsonFeatures,A=g("../../lib/geojson_utils"),e=g("../../lib/geo_location_utils"),a=g("../../plots/cartesian/autorange").findExtremes,n=g("../../constants/numerical").BADNUM,t=g("../scatter/calc").calcMarkerSize,r=g("../scatter/subtypes"),f=g("./style");function o(p,d,y){var v=d.layers.frontplot.select(".scatterlayer"),x=c.makeTraceGroups(v,y,"trace scattergeo");function l(_,s){_.lonlat[0]===n&&T.select(s).remove()}x.selectAll("*").remove(),x.each(function(_){var s=T.select(this),w=_[0].trace;if(r.hasLines(w)||w.fill!=="none"){var b=A.calcTraceToLineCoords(_),h=w.fill!=="none"?A.makePolygon(b):A.makeLine(b);s.selectAll("path.js-line").data([{geojson:h,trace:w}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(w)&&s.selectAll("path.point").data(c.identity).enter().append("path").classed("point",!0).each(function(m){l(m,this)}),r.hasText(w)&&s.selectAll("g").data(c.identity).enter().append("g").append("text").each(function(m){l(m,this)}),f(p,_)})}function i(p,d){var y=p[0].trace,v=d[y.geo],x=v._subplot,l=y._length,_,s;if(Array.isArray(y.locations)){var w=y.locationmode,b=w==="geojson-id"?e.extractTraceFeature(p):M(y,x.topojson);for(_=0;_<l;_++){s=p[_];var h=w==="geojson-id"?s.fOut:e.locationToFeature(w,s.loc,b);s.lonlat=h?h.properties.ct:[n,n]}}var m={padded:!0},u,L;if(v.fitbounds==="geojson"&&y.locationmode==="geojson-id"){var S=e.computeBbox(e.getTraceGeojson(y));u=[S[0],S[2]],L=[S[1],S[3]]}else{for(u=new Array(l),L=new Array(l),_=0;_<l;_++)s=p[_],u[_]=s.lonlat[0],L[_]=s.lonlat[1];m.ppad=t(y,l)}y._extremes.lon=a(v.lonaxis._ax,u,m),y._extremes.lat=a(v.lataxis._ax,L,m)}ne.exports={calcGeoJSON:i,plot:o}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":928,"../scatter/subtypes":952,"./style":978,"@plotly/d3":58}],977:[function(g,ne,ae){var T=g("../scatter/subtypes"),c=g("../../constants/numerical").BADNUM;ne.exports=function(A,e){var a=A.cd,n=A.xaxis,t=A.yaxis,r=[],f=a[0].trace,o,i,p,d,y,v=!T.hasMarkers(f)&&!T.hasText(f);if(v)return[];if(e===!1)for(y=0;y<a.length;y++)a[y].selected=0;else for(y=0;y<a.length;y++)o=a[y],i=o.lonlat,i[0]!==c&&(p=n.c2p(i),d=t.c2p(i),e.contains([p,d],null,y,A)?(r.push({pointNumber:y,lon:i[0],lat:i[1]}),o.selected=1):o.selected=0);return r}},{"../../constants/numerical":479,"../scatter/subtypes":952}],978:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/drawing"),M=g("../../components/color"),A=g("../scatter/style"),e=A.stylePoints,a=A.styleText;ne.exports=function(r,f){f&&n(r,f)};function n(t,r){var f=r[0].trace,o=r[0].node3;o.style("opacity",r[0].trace.opacity),e(o,f,t),a(o,f,t),o.selectAll("path.js-line").style("fill","none").each(function(i){var p=T.select(this),d=i.trace,y=d.line||{};p.call(M.stroke,y.color).call(c.dashLine,y.dash||"",y.width||0),d.fill!=="none"&&p.call(M.fill,d.fillcolor)})}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":951,"@plotly/d3":58}],979:[function(g,ne,ae){var T=g("../../plots/attributes"),c=g("../scatter/attributes"),M=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=g("../../components/colorscale/attributes"),e=g("../../lib/sort_object_keys"),a=g("../../lib/extend").extendFlat,n=g("../../plot_api/edit_types").overrideAll,t=g("./constants").DASHES,r=c.line,f=c.marker,o=f.line,i=ne.exports=n({x:c.x,x0:c.x0,dx:c.dx,y:c.y,y0:c.y0,dy:c.dy,xperiod:c.xperiod,yperiod:c.yperiod,xperiod0:c.xperiod0,yperiod0:c.yperiod0,xperiodalignment:c.xperiodalignment,yperiodalignment:c.yperiodalignment,xhoverformat:M("x"),yhoverformat:M("y"),text:c.text,hovertext:c.hovertext,textposition:c.textposition,textfont:c.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(t),dflt:"solid"}},marker:a({},A("marker"),{symbol:f.symbol,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:f.opacity,colorbar:f.colorbar,line:a({},A("marker.line"),{width:o.width})}),connectgaps:c.connectgaps,fill:a({},c.fill,{dflt:"none"}),fillcolor:c.fillcolor,selected:{marker:c.selected.marker,textfont:c.selected.textfont},unselected:{marker:c.unselected.marker,textfont:c.unselected.textfont},opacity:T.opacity},"calc","nested");i.x.editType=i.y.editType=i.x0.editType=i.y0.editType="calc+clearAxisTypes",i.hovertemplate=c.hovertemplate,i.texttemplate=c.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927,"./constants":982}],980:[function(g,ne,ae){var T=g("./hover");ne.exports={moduleType:"trace",name:"scattergl",basePlotModule:g("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:g("./attributes"),supplyDefaults:g("./defaults"),crossTraceDefaults:g("../scatter/cross_trace_defaults"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("./calc"),hoverPoints:T.hoverPoints,selectPoints:g("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":933,"../scatter/marker_colorbar":945,"./attributes":979,"./calc":981,"./defaults":984,"./format_labels":986,"./hover":988,"./select":992}],981:[function(g,ne,ae){var T=g("@plotly/point-cluster"),c=g("../../lib"),M=g("../../plots/cartesian/axis_ids"),A=g("../../plots/cartesian/autorange").findExtremes,e=g("../../plots/cartesian/align_period"),a=g("../scatter/calc"),n=a.calcMarkerSize,t=a.calcAxisExpansion,r=a.setFirstScatter,f=g("../scatter/colorscale_calc"),o=g("./convert"),i=g("./scene_update"),p=g("../../constants/numerical").BADNUM,d=g("./constants").TOO_MANY_POINTS;ne.exports=function(l,_){var s=l._fullLayout,w=M.getFromId(l,_.xaxis),b=M.getFromId(l,_.yaxis),h=s._plots[_.xaxis+_.yaxis],m=_._length,u=m>=d,L=m*2,S={},k,P=w.makeCalcdata(_,"x"),z=b.makeCalcdata(_,"y"),I=e(_,w,"x",P),D=e(_,b,"y",z),R=I.vals,B=D.vals;_._x=R,_._y=B,_.xperiodalignment&&(_._origX=P,_._xStarts=I.starts,_._xEnds=I.ends),_.yperiodalignment&&(_._origY=z,_._yStarts=D.starts,_._yEnds=D.ends);var F=new Array(L),V=new Array(m);for(k=0;k<m;k++)F[k*2]=R[k]===p?NaN:R[k],F[k*2+1]=B[k]===p?NaN:B[k],V[k]=k;if(w.type==="log")for(k=0;k<L;k+=2)F[k]=w.c2l(F[k]);if(b.type==="log")for(k=1;k<L;k+=2)F[k]=b.c2l(F[k]);u&&w.type!=="log"&&b.type!=="log"?S.tree=T(F):S.ids=V,f(l,_);var Y=v(l,h,_,F,R,B),K=i(l,h);r(s,_);var J;return u?Y.marker&&(J=Y.marker.sizeAvg||Math.max(Y.marker.size,3)):J=n(_,m),t(l,_,w,b,R,B,J),Y.errorX&&y(_,w,Y.errorX),Y.errorY&&y(_,b,Y.errorY),Y.fill&&!K.fill2d&&(K.fill2d=!0),Y.marker&&!K.scatter2d&&(K.scatter2d=!0),Y.line&&!K.line2d&&(K.line2d=!0),(Y.errorX||Y.errorY)&&!K.error2d&&(K.error2d=!0),Y.text&&!K.glText&&(K.glText=!0),Y.marker&&(Y.marker.snap=m),K.lineOptions.push(Y.line),K.errorXOptions.push(Y.errorX),K.errorYOptions.push(Y.errorY),K.fillOptions.push(Y.fill),K.markerOptions.push(Y.marker),K.markerSelectedOptions.push(Y.markerSel),K.markerUnselectedOptions.push(Y.markerUnsel),K.textOptions.push(Y.text),K.textSelectedOptions.push(Y.textSel),K.textUnselectedOptions.push(Y.textUnsel),K.selectBatch.push([]),K.unselectBatch.push([]),S._scene=K,S.index=K.count,S.x=R,S.y=B,S.positions=F,K.count++,[{x:!1,y:!1,t:S,trace:_}]};function y(x,l,_){var s=x._extremes[l._id],w=A(l,_._bnds,{padded:!0});s.min=s.min.concat(w.min),s.max=s.max.concat(w.max)}function v(x,l,_,s,w,b){var h=o.style(x,_);if(h.marker&&(h.marker.positions=s),h.line&&s.length>1&&c.extendFlat(h.line,o.linePositions(x,_,s)),h.errorX||h.errorY){var m=o.errorBarPositions(x,_,s,w,b);h.errorX&&c.extendFlat(h.errorX,m.x),h.errorY&&c.extendFlat(h.errorY,m.y)}return h.text&&(c.extendFlat(h.text,{positions:s},o.textPosition(x,_,h.text,h.marker)),c.extendFlat(h.textSel,{positions:s},o.textPosition(x,_,h.text,h.markerSel)),c.extendFlat(h.textUnsel,{positions:s},o.textPosition(x,_,h.text,h.markerUnsel))),h}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"./constants":982,"./convert":983,"./scene_update":991,"@plotly/point-cluster":59}],982:[function(g,ne,ae){var T=20;ne.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:T,SYMBOL_STROKE:T/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],983:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("svg-path-sdf"),M=g("color-normalize"),A=g("../../registry"),e=g("../../lib"),a=g("../../components/drawing"),n=g("../../plots/cartesian/axis_ids"),t=g("../../lib/gl_format_color").formatColor,r=g("../scatter/subtypes"),f=g("../scatter/make_bubble_size_func"),o=g("./helpers"),i=g("./constants"),p=g("../../constants/interactions").DESELECTDIM,d={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},y=g("../../components/fx/helpers").appendArrayPointValue;function v(I,D){var R,B={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},F=I._context.plotGlPixelRatio;if(D.visible!==!0)return B;if(r.hasText(D)&&(B.text=x(I,D),B.textSel=s(I,D,D.selected),B.textUnsel=s(I,D,D.unselected)),r.hasMarkers(D)&&(B.marker=l(D),B.markerSel=_(D,D.selected),B.markerUnsel=_(D,D.unselected),!D.unselected&&e.isArrayOrTypedArray(D.marker.opacity))){var V=D.marker.opacity;for(B.markerUnsel.opacity=new Array(V.length),R=0;R<V.length;R++)B.markerUnsel.opacity[R]=p*V[R]}if(r.hasLines(D)){B.line={overlay:!0,thickness:D.line.width*F,color:D.line.color,opacity:D.opacity};var Y=(i.DASHES[D.line.dash]||[1]).slice();for(R=0;R<Y.length;++R)Y[R]*=D.line.width*F;B.line.dashes=Y}return D.error_x&&D.error_x.visible&&(B.errorX=w(D,D.error_x,F)),D.error_y&&D.error_y.visible&&(B.errorY=w(D,D.error_y,F)),!!D.fill&&D.fill!=="none"&&(B.fill={closed:!0,fill:D.fillcolor,thickness:0}),B}function x(I,D){var R=I._fullLayout,B=D._length,F=D.textfont,V=D.textposition,Y=Array.isArray(V)?V:[V],K=F.color,J=F.size,G=F.family,Z={},re,se=I._context.plotGlPixelRatio,oe=D.texttemplate;if(oe){Z.text=[];var N=R._d3locale,U=Array.isArray(oe),q=U?Math.min(oe.length,B):B,Q=U?function(ye){return oe[ye]}:function(){return oe};for(re=0;re<q;re++){var W={i:re},X=D._module.formatLabels(W,D,R),te={};y(te,D,re);var ee=D._meta||{};Z.text.push(e.texttemplateString(Q(re),X,N,te,W,ee))}}else Array.isArray(D.text)&&D.text.length<B?Z.text=D.text.slice():Z.text=D.text;if(Array.isArray(Z.text))for(re=Z.text.length;re<B;re++)Z.text[re]="";for(Z.opacity=D.opacity,Z.font={},Z.align=[],Z.baseline=[],re=0;re<Y.length;re++){var ie=Y[re].split(/\s+/);switch(ie[1]){case"left":Z.align.push("right");break;case"right":Z.align.push("left");break;default:Z.align.push(ie[1])}switch(ie[0]){case"top":Z.baseline.push("bottom");break;case"bottom":Z.baseline.push("top");break;default:Z.baseline.push(ie[0])}}if(Array.isArray(K))for(Z.color=new Array(B),re=0;re<B;re++)Z.color[re]=K[re];else Z.color=K;if(e.isArrayOrTypedArray(J)||Array.isArray(G))for(Z.font=new Array(B),re=0;re<B;re++){var le=Z.font[re]={};le.size=(e.isTypedArray(J)?J[re]:Array.isArray(J)?T(J[re])?J[re]:0:J)*se,le.family=Array.isArray(G)?G[re]:G}else Z.font={size:J*se,family:G};return Z}function l(I){var D=I._length,R=I.marker,B={},F,V=e.isArrayOrTypedArray(R.symbol),Y=e.isArrayOrTypedArray(R.color),K=e.isArrayOrTypedArray(R.line.color),J=e.isArrayOrTypedArray(R.opacity),G=e.isArrayOrTypedArray(R.size),Z=e.isArrayOrTypedArray(R.line.width),re;if(V||(re=o.isOpenSymbol(R.symbol)),V||Y||K||J){B.colors=new Array(D),B.borderColors=new Array(D);var se=t(R,R.opacity,D),oe=t(R.line,R.opacity,D);if(!Array.isArray(oe[0])){var N=oe;for(oe=Array(D),F=0;F<D;F++)oe[F]=N}if(!Array.isArray(se[0])){var U=se;for(se=Array(D),F=0;F<D;F++)se[F]=U}for(B.colors=se,B.borderColors=oe,F=0;F<D;F++){if(V){var q=R.symbol[F];re=o.isOpenSymbol(q)}re&&(oe[F]=se[F].slice(),se[F]=se[F].slice(),se[F][3]=0)}B.opacity=I.opacity}else re?(B.color=M(R.color,"uint8"),B.color[3]=0,B.borderColor=M(R.color,"uint8")):(B.color=M(R.color,"uint8"),B.borderColor=M(R.line.color,"uint8")),B.opacity=I.opacity*R.opacity;if(V)for(B.markers=new Array(D),F=0;F<D;F++)B.markers[F]=S(R.symbol[F]);else B.marker=S(R.symbol);var Q=1,W=f(I,Q),X;if(G||Z){var te=B.sizes=new Array(D),ee=B.borderSizes=new Array(D),ie=0,le;if(G){for(F=0;F<D;F++)te[F]=W(R.size[F]),ie+=te[F];le=ie/D}else for(X=W(R.size),F=0;F<D;F++)te[F]=X;if(Z)for(F=0;F<D;F++)ee[F]=R.line.width[F];else for(X=R.line.width,F=0;F<D;F++)ee[F]=X;B.sizeAvg=le}else B.size=W(R&&R.size||10),B.borderSizes=W(R.line.width);return B}function _(I,D){var R=I.marker,B={};return D&&(D.marker&&D.marker.symbol?B=l(e.extendFlat({},R,D.marker)):D.marker&&(D.marker.size&&(B.size=D.marker.size),D.marker.color&&(B.colors=D.marker.color),D.marker.opacity!==void 0&&(B.opacity=D.marker.opacity))),B}function s(I,D,R){var B={};if(!R)return B;if(R.textfont){var F={opacity:1,text:D.text,texttemplate:D.texttemplate,textposition:D.textposition,textfont:e.extendFlat({},D.textfont)};R.textfont&&e.extendFlat(F.textfont,R.textfont),B=x(I,F)}return B}function w(I,D,R){var B={capSize:D.width*2*R,lineWidth:D.thickness*R,color:D.color};return D.copy_ystyle&&(B=I.error_y),B}var b=i.SYMBOL_SDF_SIZE,h=i.SYMBOL_SIZE,m=i.SYMBOL_STROKE,u={},L=a.symbolFuncs[0](h*.05);function S(I){if(I==="circle")return null;var D,R,B=a.symbolNumber(I),F=a.symbolFuncs[B%100],V=!!a.symbolNoDot[B%100],Y=!!a.symbolNoFill[B%100],K=o.isDotSymbol(I);return u[I]?u[I]:(K&&!V?D=F(h*1.1)+L:D=F(h),R=c(D,{w:b,h:b,viewBox:[-h,-h,h,h],stroke:Y?m:-m}),u[I]=R,R||null)}function k(I,D,R){var B=R.length,F=B/2,V,Y;if(r.hasLines(D)&&F)if(D.line.shape==="hv"){for(V=[],Y=0;Y<F-1;Y++)isNaN(R[Y*2])||isNaN(R[Y*2+1])?V.push(NaN,NaN,NaN,NaN):(V.push(R[Y*2],R[Y*2+1]),!isNaN(R[Y*2+2])&&!isNaN(R[Y*2+3])?V.push(R[Y*2+2],R[Y*2+1]):V.push(NaN,NaN));V.push(R[B-2],R[B-1])}else if(D.line.shape==="hvh"){for(V=[],Y=0;Y<F-1;Y++)if(isNaN(R[Y*2])||isNaN(R[Y*2+1])||isNaN(R[Y*2+2])||isNaN(R[Y*2+3]))!isNaN(R[Y*2])&&!isNaN(R[Y*2+1])?V.push(R[Y*2],R[Y*2+1]):V.push(NaN,NaN),V.push(NaN,NaN);else{var K=(R[Y*2]+R[Y*2+2])/2;V.push(R[Y*2],R[Y*2+1],K,R[Y*2+1],K,R[Y*2+3])}V.push(R[B-2],R[B-1])}else if(D.line.shape==="vhv"){for(V=[],Y=0;Y<F-1;Y++)if(isNaN(R[Y*2])||isNaN(R[Y*2+1])||isNaN(R[Y*2+2])||isNaN(R[Y*2+3]))!isNaN(R[Y*2])&&!isNaN(R[Y*2+1])?V.push(R[Y*2],R[Y*2+1]):V.push(NaN,NaN),V.push(NaN,NaN);else{var J=(R[Y*2+1]+R[Y*2+3])/2;V.push(R[Y*2],R[Y*2+1],R[Y*2],J,R[Y*2+2],J)}V.push(R[B-2],R[B-1])}else if(D.line.shape==="vh"){for(V=[],Y=0;Y<F-1;Y++)isNaN(R[Y*2])||isNaN(R[Y*2+1])?V.push(NaN,NaN,NaN,NaN):(V.push(R[Y*2],R[Y*2+1]),!isNaN(R[Y*2+2])&&!isNaN(R[Y*2+3])?V.push(R[Y*2],R[Y*2+3]):V.push(NaN,NaN));V.push(R[B-2],R[B-1])}else V=R;var G=!1;for(Y=0;Y<V.length;Y++)if(isNaN(V[Y])){G=!0;break}var Z=G||V.length>i.TOO_MANY_POINTS||r.hasMarkers(D)?"rect":"round";if(G&&D.connectgaps){var re=V[0],se=V[1];for(Y=0;Y<V.length;Y+=2)isNaN(V[Y])||isNaN(V[Y+1])?(V[Y]=re,V[Y+1]=se):(re=V[Y],se=V[Y+1])}return{join:Z,positions:V}}function P(I,D,R,B,F){var V=A.getComponentMethod("errorbars","makeComputeError"),Y=n.getFromId(I,D.xaxis),K=n.getFromId(I,D.yaxis),J=R.length/2,G={};function Z(re,se){var oe=se._id.charAt(0),N=D["error_"+oe];if(N&&N.visible&&(se.type==="linear"||se.type==="log")){for(var U=V(N),q={x:0,y:1}[oe],Q={x:[0,1,2,3],y:[2,3,0,1]}[oe],W=new Float64Array(4*J),X=1/0,te=-1/0,ee=0,ie=0;ee<J;ee++,ie+=4){var le=re[ee];if(T(le)){var ye=R[ee*2+q],ue=U(le,ee),pe=ue[0],ge=ue[1];if(T(pe)&&T(ge)){var Te=le-pe,_e=le+ge;W[ie+Q[0]]=ye-se.c2l(Te),W[ie+Q[1]]=se.c2l(_e)-ye,W[ie+Q[2]]=0,W[ie+Q[3]]=0,X=Math.min(X,le-pe),te=Math.max(te,le+ge)}}}G[oe]={positions:R,errors:W,_bnds:[X,te]}}}return Z(B,Y),Z(F,K),G}function z(I,D,R,B){var F=D._length,V={},Y;if(r.hasMarkers(D)){var K=R.font,J=R.align,G=R.baseline;for(V.offset=new Array(F),Y=0;Y<F;Y++){var Z=B.sizes?B.sizes[Y]:B.size,re=Array.isArray(K)?K[Y].size:K.size,se=Array.isArray(J)?J.length>1?J[Y]:J[0]:J,oe=Array.isArray(G)?G.length>1?G[Y]:G[0]:G,N=d[se],U=d[oe],q=Z?Z/.8+1:0,Q=-U*q-U*.5;V.offset[Y]=[N*q/re,Q/re]}}return V}ne.exports={style:v,markerStyle:l,markerSelection:_,linePositions:k,errorBarPositions:P,textPosition:z}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"./constants":982,"./helpers":987,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],984:[function(g,ne,ae){var T=g("../../lib"),c=g("../../registry"),M=g("./helpers"),A=g("./attributes"),e=g("../scatter/constants"),a=g("../scatter/subtypes"),n=g("../scatter/xy_defaults"),t=g("../scatter/period_defaults"),r=g("../scatter/marker_defaults"),f=g("../scatter/line_defaults"),o=g("../scatter/fillcolor_defaults"),i=g("../scatter/text_defaults");ne.exports=function(d,y,v,x){function l(L,S){return T.coerce(d,y,A,L,S)}var _=d.marker?M.isOpenSymbol(d.marker.symbol):!1,s=a.isBubble(d),w=n(d,y,x,l);if(!w){y.visible=!1;return}t(d,y,x,l),l("xhoverformat"),l("yhoverformat");var b=w<e.PTS_LINESONLY?"lines+markers":"lines";l("text"),l("hovertext"),l("hovertemplate"),l("mode",b),a.hasLines(y)&&(l("connectgaps"),f(d,y,v,x,l),l("line.shape")),a.hasMarkers(y)&&(r(d,y,v,x,l),l("marker.line.width",_||s?1:0)),a.hasText(y)&&(l("texttemplate"),i(d,y,x,l));var h=(y.line||{}).color,m=(y.marker||{}).color;l("fill"),y.fill!=="none"&&o(d,y,v,l);var u=c.getComponentMethod("errorbars","supplyDefaults");u(d,y,h||m||v,{axis:"y"}),u(d,y,h||m||v,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(y,l)}},{"../../lib":503,"../../registry":638,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/period_defaults":947,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatter/xy_defaults":954,"./attributes":979,"./helpers":987}],985:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/color"),M=g("../../constants/interactions").DESELECTDIM;function A(e){var a=e[0],n=a.trace,t=a.t,r=t._scene,f=t.index,o=r.selectBatch[f],i=r.unselectBatch[f],p=r.textOptions[f],d=r.textSelectedOptions[f]||{},y=r.textUnselectedOptions[f]||{},v=T.extendFlat({},p),x,l;if(o.length||i.length){var _=d.color,s=y.color,w=p.color,b=Array.isArray(w);for(v.color=new Array(n._length),x=0;x<o.length;x++)l=o[x],v.color[l]=_||(b?w[l]:w);for(x=0;x<i.length;x++){l=i[x];var h=b?w[l]:w;v.color[l]=s||(_?h:c.addOpacity(h,M))}}r.glText[f].update(v)}ne.exports={styleTextSelection:A}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],986:[function(g,ne,ae){var T=g("../scatter/format_labels");ne.exports=function(M,A,e){var a=M.i;return"x"in M||(M.x=A._x[a]),"y"in M||(M.y=A._y[a]),T(M,A,e)}},{"../scatter/format_labels":936}],987:[function(g,ne,ae){var T=g("./constants");ae.isOpenSymbol=function(c){return typeof c=="string"?T.OPEN_RE.test(c):c%200>100},ae.isDotSymbol=function(c){return typeof c=="string"?T.DOT_RE.test(c):c>200}},{"./constants":982}],988:[function(g,ne,ae){var T=g("../../registry"),c=g("../../lib"),M=g("../scatter/get_trace_color");function A(a,n,t,r){var f=a.cd,o=f[0].t,i=f[0].trace,p=a.xa,d=a.ya,y=o.x,v=o.y,x=p.c2p(n),l=d.c2p(t),_=a.distance,s;if(o.tree){var w=p.p2c(x-_),b=p.p2c(x+_),h=d.p2c(l-_),m=d.p2c(l+_);r==="x"?s=o.tree.range(Math.min(w,b),Math.min(d._rl[0],d._rl[1]),Math.max(w,b),Math.max(d._rl[0],d._rl[1])):s=o.tree.range(Math.min(w,b),Math.min(h,m),Math.max(w,b),Math.max(h,m))}else s=o.ids;var u,L,S,k,P,z,I,D,R,B=_;if(r==="x"){var F=!!i.xperiodalignment,V=!!i.yperiodalignment;for(P=0;P<s.length;P++){if(u=s[P],S=y[u],z=Math.abs(p.c2p(S)-x),F){var Y=p.c2p(i._xStarts[u]),K=p.c2p(i._xEnds[u]);z=x>=Math.min(Y,K)&&x<=Math.max(Y,K)?0:1/0}if(z<B){if(B=z,k=v[u],I=d.c2p(k)-l,V){var J=d.c2p(i._yStarts[u]),G=d.c2p(i._yEnds[u]);I=l>=Math.min(J,G)&&l<=Math.max(J,G)?0:1/0}R=Math.sqrt(z*z+I*I),L=s[P]}}}else for(P=s.length-1;P>-1;P--)u=s[P],S=y[u],k=v[u],z=p.c2p(S)-x,I=d.c2p(k)-l,D=Math.sqrt(z*z+I*I),D<B&&(B=R=D,L=u);return a.index=L,a.distance=B,a.dxy=R,L===void 0?[a]:[e(a,y,v,i)]}function e(a,n,t,r){var f=a.xa,o=a.ya,i=a.distance,p=a.dxy,d=a.index,y={pointNumber:d,x:n[d],y:t[d]};y.tx=Array.isArray(r.text)?r.text[d]:r.text,y.htx=Array.isArray(r.hovertext)?r.hovertext[d]:r.hovertext,y.data=Array.isArray(r.customdata)?r.customdata[d]:r.customdata,y.tp=Array.isArray(r.textposition)?r.textposition[d]:r.textposition;var v=r.textfont;v&&(y.ts=c.isArrayOrTypedArray(v.size)?v.size[d]:v.size,y.tc=Array.isArray(v.color)?v.color[d]:v.color,y.tf=Array.isArray(v.family)?v.family[d]:v.family);var x=r.marker;x&&(y.ms=c.isArrayOrTypedArray(x.size)?x.size[d]:x.size,y.mo=c.isArrayOrTypedArray(x.opacity)?x.opacity[d]:x.opacity,y.mx=c.isArrayOrTypedArray(x.symbol)?x.symbol[d]:x.symbol,y.mc=c.isArrayOrTypedArray(x.color)?x.color[d]:x.color);var l=x&&x.line;l&&(y.mlc=Array.isArray(l.color)?l.color[d]:l.color,y.mlw=c.isArrayOrTypedArray(l.width)?l.width[d]:l.width);var _=x&&x.gradient;_&&_.type!=="none"&&(y.mgt=Array.isArray(_.type)?_.type[d]:_.type,y.mgc=Array.isArray(_.color)?_.color[d]:_.color);var s=f.c2p(y.x,!0),w=o.c2p(y.y,!0),b=y.mrc||1,h=r.hoverlabel;h&&(y.hbg=Array.isArray(h.bgcolor)?h.bgcolor[d]:h.bgcolor,y.hbc=Array.isArray(h.bordercolor)?h.bordercolor[d]:h.bordercolor,y.hts=c.isArrayOrTypedArray(h.font.size)?h.font.size[d]:h.font.size,y.htc=Array.isArray(h.font.color)?h.font.color[d]:h.font.color,y.htf=Array.isArray(h.font.family)?h.font.family[d]:h.font.family,y.hnl=c.isArrayOrTypedArray(h.namelength)?h.namelength[d]:h.namelength);var m=r.hoverinfo;m&&(y.hi=Array.isArray(m)?m[d]:m);var u=r.hovertemplate;u&&(y.ht=Array.isArray(u)?u[d]:u);var L={};L[a.index]=y;var S=r._origX,k=r._origY,P=c.extendFlat({},a,{color:M(r,y),x0:s-b,x1:s+b,xLabelVal:S?S[d]:y.x,y0:w-b,y1:w+b,yLabelVal:k?k[d]:y.y,cd:L,distance:i,spikeDistance:p,hovertemplate:y.ht});return y.htx?P.text=y.htx:y.tx?P.text=y.tx:r.text&&(P.text=r.text),c.fillText(y,r,P),T.getComponentMethod("errorbars","hoverInfo")(y,r,P),P}ne.exports={hoverPoints:A,calcHover:e}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":937}],989:[function(g,ne,ae){arguments[4][896][0].apply(ae,arguments)},{"./base_index":980,"./plot":990,dup:896}],990:[function(g,ne,ae){var T=g("regl-scatter2d"),c=g("regl-line2d"),M=g("regl-error2d"),A=g("gl-text"),e=g("../../lib"),a=g("../../components/dragelement/helpers").selectMode,n=g("../../lib/prepare_regl"),t=g("../scatter/subtypes"),r=g("../scatter/link_traces"),f=g("./edit_style").styleTextSelection,o={};function i(p,d,y,v){var x=p._size,l=p.width*v,_=p.height*v,s=x.l*v,w=x.b*v,b=x.r*v,h=x.t*v,m=x.w*v,u=x.h*v;return[s+d.domain[0]*m,w+y.domain[0]*u,l-b-(1-d.domain[1])*m,_-h-(1-y.domain[1])*u]}var ae=ne.exports=function(d,y,v){if(!!v.length){var x=d._fullLayout,l=y._scene,_=y.xaxis,s=y.yaxis,w,b;if(!!l){var h=n(d,["ANGLE_instanced_arrays","OES_element_index_uint"],o);if(!h){l.init();return}var m=l.count,u=x._glcanvas.data()[0].regl;if(r(d,y,v),l.dirty){if(l.error2d===!0&&(l.error2d=M(u)),l.line2d===!0&&(l.line2d=c(u)),l.scatter2d===!0&&(l.scatter2d=T(u)),l.fill2d===!0&&(l.fill2d=c(u)),l.glText===!0)for(l.glText=new Array(m),w=0;w<m;w++)l.glText[w]=new A(u);if(l.glText){if(m>l.glText.length){var L=m-l.glText.length;for(w=0;w<L;w++)l.glText.push(new A(u))}else if(m<l.glText.length){var S=l.glText.length-m,k=l.glText.splice(m,S);k.forEach(function(Q){Q.destroy()})}for(w=0;w<m;w++)l.glText[w].update(l.textOptions[w])}if(l.line2d&&(l.line2d.update(l.lineOptions),l.lineOptions=l.lineOptions.map(function(Q){if(Q&&Q.positions){for(var W=Q.positions,X=0;X<W.length&&(isNaN(W[X])||isNaN(W[X+1]));)X+=2;for(var te=W.length-2;te>X&&(isNaN(W[te])||isNaN(W[te+1]));)te-=2;Q.positions=W.slice(X,te+2)}return Q}),l.line2d.update(l.lineOptions)),l.error2d){var P=(l.errorXOptions||[]).concat(l.errorYOptions||[]);l.error2d.update(P)}l.scatter2d&&l.scatter2d.update(l.markerOptions),l.fillOrder=e.repeat(null,m),l.fill2d&&(l.fillOptions=l.fillOptions.map(function(Q,W){var X=v[W];if(!(!Q||!X||!X[0]||!X[0].trace)){var te=X[0],ee=te.trace,ie=te.t,le=l.lineOptions[W],ye,ue,pe=[];ee._ownfill&&pe.push(W),ee._nexttrace&&pe.push(W+1),pe.length&&(l.fillOrder[W]=pe);var ge=[],Te=le&&le.positions||ie.positions,_e,De;if(ee.fill==="tozeroy"){for(_e=0;_e<Te.length&&isNaN(Te[_e+1]);)_e+=2;for(De=Te.length-2;De>_e&&isNaN(Te[De+1]);)De-=2;Te[_e+1]!==0&&(ge=[Te[_e],0]),ge=ge.concat(Te.slice(_e,De+2)),Te[De+1]!==0&&(ge=ge.concat([Te[De],0]))}else if(ee.fill==="tozerox"){for(_e=0;_e<Te.length&&isNaN(Te[_e]);)_e+=2;for(De=Te.length-2;De>_e&&isNaN(Te[De]);)De-=2;Te[_e]!==0&&(ge=[0,Te[_e+1]]),ge=ge.concat(Te.slice(_e,De+2)),Te[De]!==0&&(ge=ge.concat([0,Te[De+1]]))}else if(ee.fill==="toself"||ee.fill==="tonext"){for(ge=[],ye=0,Q.splitNull=!0,ue=0;ue<Te.length;ue+=2)(isNaN(Te[ue])||isNaN(Te[ue+1]))&&(ge=ge.concat(Te.slice(ye,ue)),ge.push(Te[ye],Te[ye+1]),ge.push(null,null),ye=ue+2);ge=ge.concat(Te.slice(ye)),ye&&ge.push(Te[ye],Te[ye+1])}else{var Oe=ee._nexttrace;if(Oe){var Ue=l.lineOptions[W+1];if(Ue){var xe=Ue.positions;if(ee.fill==="tonexty"){for(ge=Te.slice(),W=Math.floor(xe.length/2);W--;){var Pe=xe[W*2],Ve=xe[W*2+1];isNaN(Pe)||isNaN(Ve)||ge.push(Pe,Ve)}Q.fill=Oe.fillcolor}}}}if(ee._prevtrace&&ee._prevtrace.fill==="tonext"){var Qe=l.lineOptions[W-1].positions,Fe=ge.length/2;ye=Fe;var Le=[ye];for(ue=0;ue<Qe.length;ue+=2)(isNaN(Qe[ue])||isNaN(Qe[ue+1]))&&(Le.push(ue/2+Fe+1),ye=ue+2);ge=ge.concat(Qe),Q.hole=Le}return Q.fillmode=ee.fill,Q.opacity=ee.opacity,Q.positions=ge,Q}}),l.fill2d.update(l.fillOptions))}var z=x.dragmode,I=a(z),D=x.clickmode.indexOf("select")>-1;for(w=0;w<m;w++){var R=v[w][0],B=R.trace,F=R.t,V=F.index,Y=B._length,K=F.x,J=F.y;if(B.selectedpoints||I||D){if(I||(I=!0),B.selectedpoints){var G=l.selectBatch[V]=e.selIndices2selPoints(B),Z={};for(b=0;b<G.length;b++)Z[G[b]]=1;var re=[];for(b=0;b<Y;b++)Z[b]||re.push(b);l.unselectBatch[V]=re}var se=F.xpx=new Array(Y),oe=F.ypx=new Array(Y);for(b=0;b<Y;b++)se[b]=_.c2p(K[b]),oe[b]=s.c2p(J[b])}else F.xpx=F.ypx=null}if(I){if(l.select2d||(l.select2d=T(x._glcanvas.data()[1].regl)),l.scatter2d){var N=new Array(m);for(w=0;w<m;w++)N[w]=l.selectBatch[w].length||l.unselectBatch[w].length?l.markerUnselectedOptions[w]:{};l.scatter2d.update(N)}l.select2d&&(l.select2d.update(l.markerOptions),l.select2d.update(l.markerSelectedOptions)),l.glText&&v.forEach(function(Q){var W=((Q||[])[0]||{}).trace||{};t.hasText(W)&&f(Q)})}else l.scatter2d&&l.scatter2d.update(l.markerOptions);var U={viewport:i(x,_,s,d._context.plotGlPixelRatio),range:[(_._rl||_.range)[0],(s._rl||s.range)[0],(_._rl||_.range)[1],(s._rl||s.range)[1]]},q=e.repeat(U,l.count);l.fill2d&&l.fill2d.update(q),l.line2d&&l.line2d.update(q),l.error2d&&l.error2d.update(q.concat(q)),l.scatter2d&&l.scatter2d.update(q),l.select2d&&l.select2d.update(q),l.glText&&l.glText.forEach(function(Q){Q.update(U)})}}};ae.reglPrecompiled=o},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":943,"../scatter/subtypes":952,"./edit_style":985,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],991:[function(g,ne,ae){var T=g("../../lib");ne.exports=function(M,A){var e=A._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},n={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return A._scene||(e=A._scene={},e.init=function(){T.extendFlat(e,n,a)},e.init(),e.update=function(r){var f=T.repeat(r,e.count);if(e.fill2d&&e.fill2d.update(f),e.scatter2d&&e.scatter2d.update(f),e.line2d&&e.line2d.update(f),e.error2d&&e.error2d.update(f.concat(f)),e.select2d&&e.select2d.update(f),e.glText)for(var o=0;o<e.count;o++)e.glText[o].update(r)},e.draw=function(){for(var r=e.count,f=e.fill2d,o=e.error2d,i=e.line2d,p=e.scatter2d,d=e.glText,y=e.select2d,v=e.selectBatch,x=e.unselectBatch,l=0;l<r;l++){if(f&&e.fillOrder[l]&&f.draw(e.fillOrder[l]),i&&e.lineOptions[l]&&i.draw(l),o&&(e.errorXOptions[l]&&o.draw(l),e.errorYOptions[l]&&o.draw(l+r)),p&&e.markerOptions[l])if(x[l].length){var _=T.repeat([],e.count);_[l]=x[l],p.draw(_)}else v[l].length||p.draw(l);d[l]&&e.textOptions[l]&&d[l].render()}y&&y.draw(v),e.dirty=!1},e.destroy=function(){e.fill2d&&e.fill2d.destroy&&e.fill2d.destroy(),e.scatter2d&&e.scatter2d.destroy&&e.scatter2d.destroy(),e.error2d&&e.error2d.destroy&&e.error2d.destroy(),e.line2d&&e.line2d.destroy&&e.line2d.destroy(),e.select2d&&e.select2d.destroy&&e.select2d.destroy(),e.glText&&e.glText.forEach(function(r){r.destroy&&r.destroy()}),e.lineOptions=null,e.fillOptions=null,e.markerOptions=null,e.markerSelectedOptions=null,e.markerUnselectedOptions=null,e.errorXOptions=null,e.errorYOptions=null,e.textOptions=null,e.textSelectedOptions=null,e.textUnselectedOptions=null,e.selectBatch=null,e.unselectBatch=null,A._scene=null}),e.dirty||T.extendFlat(e,a),e}},{"../../lib":503}],992:[function(g,ne,ae){var T=g("../scatter/subtypes"),c=g("./edit_style").styleTextSelection;ne.exports=function(A,e){var a=A.cd,n=A.xaxis,t=A.yaxis,r=[],f=a[0].trace,o=a[0].t,i=f._length,p=o.x,d=o.y,y=o._scene,v=o.index;if(!y)return r;var x=T.hasText(f),l=T.hasMarkers(f),_=!l&&!x;if(f.visible!==!0||_)return r;var s=[],w=[];if(e!==!1&&!e.degenerate)for(var b=0;b<i;b++)e.contains([o.xpx[b],o.ypx[b]],!1,b,A)?(s.push(b),r.push({pointNumber:b,x:n.c2d(p[b]),y:t.c2d(d[b])})):w.push(b);if(l){var h=y.scatter2d;if(!s.length&&!w.length){var m=new Array(y.count);m[v]=y.markerOptions[v],h.update.apply(h,m)}else if(!y.selectBatch[v].length&&!y.unselectBatch[v].length){var u=new Array(y.count);u[v]=y.markerUnselectedOptions[v],h.update.apply(h,u)}}return y.selectBatch[v]=s,y.unselectBatch[v]=w,x&&c(a),r}},{"../scatter/subtypes":952,"./edit_style":985}],993:[function(g,ne,ae){var T=g("../../plots/template_attributes").hovertemplateAttrs,c=g("../../plots/template_attributes").texttemplateAttrs,M=g("../scattergeo/attributes"),A=g("../scatter/attributes"),e=g("../../plots/mapbox/layout_attributes"),a=g("../../plots/attributes"),n=g("../../components/colorscale/attributes"),t=g("../../lib/extend").extendFlat,r=g("../../plot_api/edit_types").overrideAll,f=M.line,o=M.marker;ne.exports=r({lon:M.lon,lat:M.lat,mode:t({},A.mode,{dflt:"markers"}),text:t({},A.text,{}),texttemplate:c({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:t({},A.hovertext,{}),line:{color:f.color,width:f.width},connectgaps:A.connectgaps,marker:t({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:o.opacity,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode},n("marker")),fill:M.fill,fillcolor:A.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:A.selected.marker},unselected:{marker:A.unselected.marker},hoverinfo:t({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:T()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergeo/attributes":969}],994:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../lib"),M=g("../../constants/numerical").BADNUM,A=g("../../lib/geojson_utils"),e=g("../../components/colorscale"),a=g("../../components/drawing"),n=g("../scatter/make_bubble_size_func"),t=g("../scatter/subtypes"),r=g("../../plots/mapbox/convert_text_opts"),f=g("../../components/fx/helpers").appendArrayPointValue,o=g("../../lib/svg_text_utils").NEWLINES,i=g("../../lib/svg_text_utils").BR_TAG_ALL;ne.exports=function(s,w){var b=w[0].trace,h=b.visible===!0&&b._length!==0,m=b.fill!=="none",u=t.hasLines(b),L=t.hasMarkers(b),S=t.hasText(b),k=L&&b.marker.symbol==="circle",P=L&&b.marker.symbol!=="circle",z=p(),I=p(),D=p(),R=p(),B={fill:z,line:I,circle:D,symbol:R};if(!h)return B;var F;if((m||u)&&(F=A.calcTraceToLineCoords(w)),m&&(z.geojson=A.makePolygon(F),z.layout.visibility="visible",c.extendFlat(z.paint,{"fill-color":b.fillcolor})),u&&(I.geojson=A.makeLine(F),I.layout.visibility="visible",c.extendFlat(I.paint,{"line-width":b.line.width,"line-color":b.line.color,"line-opacity":b.opacity})),k){var V=d(w);D.geojson=V.geojson,D.layout.visibility="visible",c.extendFlat(D.paint,{"circle-color":V.mcc,"circle-radius":V.mrc,"circle-opacity":V.mo})}if((P||S)&&(R.geojson=y(w,s),c.extendFlat(R.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),P&&(c.extendFlat(R.layout,{"icon-size":b.marker.size/10}),"angle"in b.marker&&b.marker.angle!=="auto"&&c.extendFlat(R.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),R.layout["icon-allow-overlap"]=b.marker.allowoverlap,c.extendFlat(R.paint,{"icon-opacity":b.opacity*b.marker.opacity,"icon-color":b.marker.color})),S)){var Y=(b.marker||{}).size,K=r(b.textposition,Y);c.extendFlat(R.layout,{"text-size":b.textfont.size,"text-anchor":K.anchor,"text-offset":K.offset}),c.extendFlat(R.paint,{"text-color":b.textfont.color,"text-opacity":b.opacity})}return B};function p(){return{geojson:A.makeBlank(),layout:{visibility:"none"},paint:{}}}function d(_){var s=_[0].trace,w=s.marker,b=s.selectedpoints,h=c.isArrayOrTypedArray(w.color),m=c.isArrayOrTypedArray(w.size),u=c.isArrayOrTypedArray(w.opacity),L;function S(K){return s.opacity*K}function k(K){return K/2}var P;h&&(e.hasColorscale(s,"marker")?P=e.makeColorScaleFuncFromTrace(w):P=c.identity);var z;m&&(z=n(s));var I;u&&(I=function(K){var J=T(K)?+c.constrain(K,0,1):0;return S(J)});var D=[];for(L=0;L<_.length;L++){var R=_[L],B=R.lonlat;if(!l(B)){var F={};P&&(F.mcc=R.mcc=P(R.mc)),z&&(F.mrc=R.mrc=z(R.ms)),I&&(F.mo=I(R.mo)),b&&(F.selected=R.selected||0),D.push({type:"Feature",geometry:{type:"Point",coordinates:B},properties:F})}}var V;if(b)for(V=a.makeSelectedPointStyleFns(s),L=0;L<D.length;L++){var Y=D[L].properties;V.selectedOpacityFn&&(Y.mo=S(V.selectedOpacityFn(Y))),V.selectedColorFn&&(Y.mcc=V.selectedColorFn(Y)),V.selectedSizeFn&&(Y.mrc=V.selectedSizeFn(Y))}return{geojson:{type:"FeatureCollection",features:D},mcc:h||V&&V.selectedColorFn?{type:"identity",property:"mcc"}:w.color,mrc:m||V&&V.selectedSizeFn?{type:"identity",property:"mrc"}:k(w.size),mo:u||V&&V.selectedOpacityFn?{type:"identity",property:"mo"}:S(w.opacity)}}function y(_,s){for(var w=s._fullLayout,b=_[0].trace,h=b.marker||{},m=h.symbol,u=h.angle,L=m!=="circle"?v(m):x,S=u!=="auto"?v(u,!0):x,k=t.hasText(b)?v(b.text):x,P=[],z=0;z<_.length;z++){var I=_[z];if(!l(I.lonlat)){var D=b.texttemplate,R;if(D){var B=Array.isArray(D)?D[z]||"":D,F=b._module.formatLabels(I,b,w),V={};f(V,b,I.i);var Y=b._meta||{};R=c.texttemplateString(B,F,w._d3locale,V,I,Y)}else R=k(z);R&&(R=R.replace(o,"").replace(i,`
`)),P.push({type:"Feature",geometry:{type:"Point",coordinates:I.lonlat},properties:{symbol:L(z),angle:S(z),text:R}})}}return{type:"FeatureCollection",features:P}}function v(_,s){return c.isArrayOrTypedArray(_)?s?function(w){return T(_[w])?+_[w]:0}:function(w){return _[w]}:_?function(){return _}:x}function x(){return""}function l(_){return _[0]===M}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"fast-isnumeric":190}],995:[function(g,ne,ae){var T=g("../../lib"),c=g("../scatter/subtypes"),M=g("../scatter/marker_defaults"),A=g("../scatter/line_defaults"),e=g("../scatter/text_defaults"),a=g("../scatter/fillcolor_defaults"),n=g("./attributes");ne.exports=function(f,o,i,p){function d(x,l){return T.coerce(f,o,n,x,l)}var y=t(f,o,d);if(!y){o.visible=!1;return}if(d("text"),d("texttemplate"),d("hovertext"),d("hovertemplate"),d("mode"),d("below"),c.hasLines(o)&&(A(f,o,i,p,d,{noDash:!0}),d("connectgaps")),c.hasMarkers(o)){M(f,o,i,p,d,{noLine:!0}),d("marker.allowoverlap"),d("marker.angle");var v=o.marker;v.symbol!=="circle"&&(T.isArrayOrTypedArray(v.size)&&(v.size=v.size[0]),T.isArrayOrTypedArray(v.color)&&(v.color=v.color[0]))}c.hasText(o)&&e(f,o,p,d,{noSelect:!0}),d("fill"),o.fill!=="none"&&a(f,o,i,d),T.coerceSelectionMarkerOpacity(o,d)};function t(r,f,o){var i=o("lon")||[],p=o("lat")||[],d=Math.min(i.length,p.length);return f._length=d,d}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":993}],996:[function(g,ne,ae){ne.exports=function(c,M){return c.lon=M.lon,c.lat=M.lat,c}},{}],997:[function(g,ne,ae){var T=g("../../plots/cartesian/axes");ne.exports=function(M,A,e){var a={},n=e[A.subplot]._subplot,t=n.mockAxis,r=M.lonlat;return a.lonLabel=T.tickText(t,t.c2l(r[0]),!0).text,a.latLabel=T.tickText(t,t.c2l(r[1]),!0).text,a}},{"../../plots/cartesian/axes":554}],998:[function(g,ne,ae){var T=g("../../components/fx"),c=g("../../lib"),M=g("../scatter/get_trace_color"),A=c.fillText,e=g("../../constants/numerical").BADNUM;function a(t,r,f){var o=t.cd,i=o[0].trace,p=t.xa,d=t.ya,y=t.subplot,v=r>=0?Math.floor((r+180)/360):Math.ceil((r-180)/360),x=v*360,l=r-x;function _(k){var P=k.lonlat;if(P[0]===e)return 1/0;var z=c.modHalf(P[0],360),I=P[1],D=y.project([z,I]),R=D.x-p.c2p([l,I]),B=D.y-d.c2p([z,f]),F=Math.max(3,k.mrc||0);return Math.max(Math.sqrt(R*R+B*B)-F,1-3/F)}if(T.getClosest(o,_,t),t.index!==!1){var s=o[t.index],w=s.lonlat,b=[c.modHalf(w[0],360)+x,w[1]],h=p.c2p(b),m=d.c2p(b),u=s.mrc||1;t.x0=h-u,t.x1=h+u,t.y0=m-u,t.y1=m+u;var L={};L[i.subplot]={_subplot:y};var S=i._module.formatLabels(s,i,L);return t.lonLabel=S.lonLabel,t.latLabel=S.latLabel,t.color=M(i,s),t.extraText=n(i,s,o[0].t.labels),t.hovertemplate=i.hovertemplate,[t]}}function n(t,r,f){if(t.hovertemplate)return;var o=r.hi||t.hoverinfo,i=o.split("+"),p=i.indexOf("all")!==-1,d=i.indexOf("lon")!==-1,y=i.indexOf("lat")!==-1,v=r.lonlat,x=[];function l(_){return _+"\xB0"}return p||d&&y?x.push("("+l(v[1])+", "+l(v[0])+")"):d?x.push(f.lon+l(v[0])):y&&x.push(f.lat+l(v[1])),(p||i.indexOf("text")!==-1)&&A(r,t,x),x.join("<br>")}ne.exports={hoverPoints:a,getExtraText:n}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937}],999:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("../scattergeo/calc"),plot:g("./plot"),hoverPoints:g("./hover").hoverPoints,eventData:g("./event_data"),selectPoints:g("./select"),styleOnSelect:function(T,c){if(c){var M=c[0].trace;M._glTrace.update(c)}},moduleType:"trace",name:"scattermapbox",basePlotModule:g("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":945,"../scattergeo/calc":970,"./attributes":993,"./defaults":995,"./event_data":996,"./format_labels":997,"./hover":998,"./plot":1e3,"./select":1001}],1e3:[function(g,ne,ae){var T=g("./convert"),c=g("../../plots/mapbox/constants").traceLayerPrefix,M=["fill","line","circle","symbol"];function A(a,n){this.type="scattermapbox",this.subplot=a,this.uid=n,this.sourceIds={fill:"source-"+n+"-fill",line:"source-"+n+"-line",circle:"source-"+n+"-circle",symbol:"source-"+n+"-symbol"},this.layerIds={fill:c+n+"-fill",line:c+n+"-line",circle:c+n+"-circle",symbol:c+n+"-symbol"},this.below=null}var e=A.prototype;e.addSource=function(a,n){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:n.geojson})},e.setSourceData=function(a,n){this.subplot.map.getSource(this.sourceIds[a]).setData(n.geojson)},e.addLayer=function(a,n,t){this.subplot.addLayer({type:a,id:this.layerIds[a],source:this.sourceIds[a],layout:n.layout,paint:n.paint},t)},e.update=function(n){var t=this.subplot,r=t.map,f=T(t.gd,n),o=t.belowLookup["trace-"+this.uid],i,p,d;if(o!==this.below){for(i=M.length-1;i>=0;i--)p=M[i],r.removeLayer(this.layerIds[p]);for(i=0;i<M.length;i++)p=M[i],d=f[p],this.addLayer(p,d,o);this.below=o}for(i=0;i<M.length;i++)p=M[i],d=f[p],t.setOptions(this.layerIds[p],"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&(this.setSourceData(p,d),t.setOptions(this.layerIds[p],"setPaintProperty",d.paint));n[0].trace._glTrace=this},e.dispose=function(){for(var n=this.subplot.map,t=M.length-1;t>=0;t--){var r=M[t];n.removeLayer(this.layerIds[r]),n.removeSource(this.sourceIds[r])}},ne.exports=function(n,t){for(var r=t[0].trace,f=new A(n,r.uid),o=T(n.gd,t),i=f.below=n.belowLookup["trace-"+r.uid],p=0;p<M.length;p++){var d=M[p],y=o[d];f.addSource(d,y),f.addLayer(d,y,i)}return t[0].trace._glTrace=f,f}},{"../../plots/mapbox/constants":611,"./convert":994}],1001:[function(g,ne,ae){var T=g("../../lib"),c=g("../scatter/subtypes"),M=g("../../constants/numerical").BADNUM;ne.exports=function(e,a){var n=e.cd,t=e.xaxis,r=e.yaxis,f=[],o=n[0].trace,i;if(!c.hasMarkers(o))return[];if(a===!1)for(i=0;i<n.length;i++)n[i].selected=0;else for(i=0;i<n.length;i++){var p=n[i],d=p.lonlat;if(d[0]!==M){var y=[T.modHalf(d[0],360),d[1]],v=[t.c2p(y),r.c2p(y)];a.contains(v,null,i,e)?(f.push({pointNumber:i,lon:d[0],lat:d[1]}),p.selected=1):p.selected=0}}return f}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":952}],1002:[function(g,ne,ae){var T=g("../../plots/template_attributes").hovertemplateAttrs,c=g("../../plots/template_attributes").texttemplateAttrs,M=g("../../lib/extend").extendFlat,A=g("../scatter/attributes"),e=g("../../plots/attributes"),a=A.line;ne.exports={mode:A.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:A.text,texttemplate:c({editType:"plot"},{keys:["r","theta","text"]}),hovertext:A.hovertext,line:{color:a.color,width:a.width,dash:a.dash,shape:M({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:A.connectgaps,marker:A.marker,cliponaxis:M({},A.cliponaxis,{dflt:!1}),textposition:A.textposition,textfont:A.textfont,fill:M({},A.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:A.fillcolor,hoverinfo:M({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:A.hoveron,hovertemplate:T(),selected:A.selected,unselected:A.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1003:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../constants/numerical").BADNUM,M=g("../../plots/cartesian/axes"),A=g("../scatter/colorscale_calc"),e=g("../scatter/arrays_to_calcdata"),a=g("../scatter/calc_selection"),n=g("../scatter/calc").calcMarkerSize;ne.exports=function(r,f){for(var o=r._fullLayout,i=f.subplot,p=o[i].radialaxis,d=o[i].angularaxis,y=p.makeCalcdata(f,"r"),v=d.makeCalcdata(f,"theta"),x=f._length,l=new Array(x),_=0;_<x;_++){var s=y[_],w=v[_],b=l[_]={};T(s)&&T(w)?(b.r=s,b.theta=w):b.r=c}var h=n(f,x);return f._extremes.x=M.findExtremes(p,y,{ppad:h}),A(r,f),e(l,f),a(l,f),l}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1004:[function(g,ne,ae){var T=g("../../lib"),c=g("../scatter/subtypes"),M=g("../scatter/marker_defaults"),A=g("../scatter/line_defaults"),e=g("../scatter/line_shape_defaults"),a=g("../scatter/text_defaults"),n=g("../scatter/fillcolor_defaults"),t=g("../scatter/constants").PTS_LINESONLY,r=g("./attributes");function f(i,p,d,y){function v(_,s){return T.coerce(i,p,r,_,s)}var x=o(i,p,y,v);if(!x){p.visible=!1;return}v("thetaunit"),v("mode",x<t?"lines+markers":"lines"),v("text"),v("hovertext"),p.hoveron!=="fills"&&v("hovertemplate"),c.hasLines(p)&&(A(i,p,d,y,v),e(i,p,v),v("connectgaps")),c.hasMarkers(p)&&M(i,p,d,y,v,{gradient:!0}),c.hasText(p)&&(v("texttemplate"),a(i,p,y,v));var l=[];(c.hasMarkers(p)||c.hasText(p))&&(v("cliponaxis"),v("marker.maxdisplayed"),l.push("points")),v("fill"),p.fill!=="none"&&(n(i,p,d,v),c.hasLines(p)||e(i,p,v)),(p.fill==="tonext"||p.fill==="toself")&&l.push("fills"),v("hoveron",l.join("+")||"points"),T.coerceSelectionMarkerOpacity(p,v)}function o(i,p,d,y){var v=y("r"),x=y("theta"),l;if(v)x?l=Math.min(v.length,x.length):(l=v.length,y("theta0"),y("dtheta"));else{if(!x)return 0;l=p.theta.length,y("r0"),y("dr")}return p._length=l,l}ne.exports={handleRThetaDefaults:o,supplyDefaults:f}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1002}],1005:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/cartesian/axes");ne.exports=function(A,e,a){var n={},t=a[e.subplot]._subplot,r,f;t?(r=t.radialAxis,f=t.angularAxis):(t=a[e.subplot],r=t.radialaxis,f=t.angularaxis);var o=r.c2l(A.r);n.rLabel=c.tickText(r,o,!0).text;var i=f.thetaunit==="degrees"?T.rad2deg(A.theta):A.theta;return n.thetaLabel=c.tickText(f,i,!0).text,n}},{"../../lib":503,"../../plots/cartesian/axes":554}],1006:[function(g,ne,ae){var T=g("../scatter/hover");function c(A,e,a,n){var t=T(A,e,a,n);if(!(!t||t[0].index===!1)){var r=t[0];if(r.index===void 0)return t;var f=A.subplot,o=r.cd[r.index],i=r.trace;if(!!f.isPtInside(o))return r.xLabelVal=void 0,r.yLabelVal=void 0,M(o,i,f,r),r.hovertemplate=i.hovertemplate,t}}function M(A,e,a,n){var t=a.radialAxis,r=a.angularAxis;t._hovertitle="r",r._hovertitle="\u03B8";var f={};f[e.subplot]={_subplot:a};var o=e._module.formatLabels(A,e,f);n.rLabel=o.rLabel,n.thetaLabel=o.thetaLabel;var i=A.hi||e.hoverinfo,p=[];function d(v,x){p.push(v._hovertitle+": "+x)}if(!e.hovertemplate){var y=i.split("+");y.indexOf("all")!==-1&&(y=["r","theta","text"]),y.indexOf("r")!==-1&&d(t,n.rLabel),y.indexOf("theta")!==-1&&d(r,n.thetaLabel),y.indexOf("text")!==-1&&n.text&&(p.push(n.text),delete n.text),n.extraText=p.join("<br>")}}ne.exports={hoverPoints:c,makeHoverPointText:M}},{"../scatter/hover":938}],1007:[function(g,ne,ae){ne.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:g("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:g("./attributes"),supplyDefaults:g("./defaults").supplyDefaults,colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("./calc"),plot:g("./plot"),style:g("../scatter/style").style,styleOnSelect:g("../scatter/style").styleOnSelect,hoverPoints:g("./hover").hoverPoints,selectPoints:g("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1002,"./calc":1003,"./defaults":1004,"./format_labels":1005,"./hover":1006,"./plot":1008}],1008:[function(g,ne,ae){var T=g("../scatter/plot"),c=g("../../constants/numerical").BADNUM;ne.exports=function(A,e,a){for(var n=e.layers.frontplot.select("g.scatterlayer"),t={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},r=e.radialAxis,f=e.angularAxis,o=0;o<a.length;o++)for(var i=a[o],p=0;p<i.length;p++){var d=i[p],y=d.r;if(y===c)d.x=d.y=c;else{var v=r.c2g(y),x=f.c2g(d.theta);d.x=v*Math.cos(x),d.y=v*Math.sin(x)}}T(A,t,a,n)}},{"../../constants/numerical":479,"../scatter/plot":948}],1009:[function(g,ne,ae){var T=g("../scatterpolar/attributes"),c=g("../scattergl/attributes"),M=g("../../plots/template_attributes").texttemplateAttrs;ne.exports={mode:T.mode,r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,text:T.text,texttemplate:M({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,hovertemplate:T.hovertemplate,line:c.line,connectgaps:c.connectgaps,marker:c.marker,fill:c.fill,fillcolor:c.fillcolor,textposition:c.textposition,textfont:c.textfont,hoverinfo:T.hoverinfo,selected:T.selected,unselected:T.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":979,"../scatterpolar/attributes":1002}],1010:[function(g,ne,ae){ne.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:g("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("./calc"),hoverPoints:g("./hover").hoverPoints,selectPoints:g("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scattergl/select":992,"./attributes":1009,"./calc":1011,"./defaults":1012,"./format_labels":1013,"./hover":1014}],1011:[function(g,ne,ae){var T=g("../scatter/colorscale_calc"),c=g("../scatter/calc").calcMarkerSize,M=g("../scattergl/convert"),A=g("../../plots/cartesian/axes"),e=g("../scattergl/constants").TOO_MANY_POINTS;ne.exports=function(n,t){var r=n._fullLayout,f=t.subplot,o=r[f].radialaxis,i=r[f].angularaxis,p=t._r=o.makeCalcdata(t,"r"),d=t._theta=i.makeCalcdata(t,"theta"),y=t._length,v={};y<p.length&&(p=p.slice(0,y)),y<d.length&&(d=d.slice(0,y)),v.r=p,v.theta=d,T(n,t);var x=v.opts=M.style(n,t),l;return y<e?l=c(t,y):x.marker&&(l=2*(x.marker.sizeAvg||Math.max(x.marker.size,3))),t._extremes.x=A.findExtremes(o,p,{ppad:l}),[{x:!1,y:!1,t:v,trace:t}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983}],1012:[function(g,ne,ae){var T=g("../../lib"),c=g("../scatter/subtypes"),M=g("../scatterpolar/defaults").handleRThetaDefaults,A=g("../scatter/marker_defaults"),e=g("../scatter/line_defaults"),a=g("../scatter/text_defaults"),n=g("../scatter/fillcolor_defaults"),t=g("../scatter/constants").PTS_LINESONLY,r=g("./attributes");ne.exports=function(o,i,p,d){function y(x,l){return T.coerce(o,i,r,x,l)}var v=M(o,i,d,y);if(!v){i.visible=!1;return}y("thetaunit"),y("mode",v<t?"lines+markers":"lines"),y("text"),y("hovertext"),i.hoveron!=="fills"&&y("hovertemplate"),c.hasLines(i)&&(e(o,i,p,d,y),y("connectgaps")),c.hasMarkers(i)&&A(o,i,p,d,y),c.hasText(i)&&(y("texttemplate"),a(o,i,d,y)),y("fill"),i.fill!=="none"&&n(o,i,p,y),T.coerceSelectionMarkerOpacity(i,y)}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatterpolar/defaults":1004,"./attributes":1009}],1013:[function(g,ne,ae){var T=g("../scatterpolar/format_labels");ne.exports=function(M,A,e){var a=M.i;return"r"in M||(M.r=A._r[a]),"theta"in M||(M.theta=A._theta[a]),T(M,A,e)}},{"../scatterpolar/format_labels":1005}],1014:[function(g,ne,ae){var T=g("../scattergl/hover"),c=g("../scatterpolar/hover").makeHoverPointText;function M(A,e,a,n){var t=A.cd,r=t[0].t,f=r.r,o=r.theta,i=T.hoverPoints(A,e,a,n);if(!(!i||i[0].index===!1)){var p=i[0];if(p.index===void 0)return i;var d=A.subplot,y=p.cd[p.index],v=p.trace;if(y.r=f[p.index],y.theta=o[p.index],!!d.isPtInside(y))return p.xLabelVal=void 0,p.yLabelVal=void 0,c(y,v,d,p),i}}ne.exports={hoverPoints:M}},{"../scattergl/hover":988,"../scatterpolar/hover":1006}],1015:[function(g,ne,ae){arguments[4][896][0].apply(ae,arguments)},{"./base_index":1010,"./plot":1016,dup:896}],1016:[function(g,ne,ae){var T=g("@plotly/point-cluster"),c=g("fast-isnumeric"),M=g("../scattergl/plot"),A=g("../scattergl/scene_update"),e=g("../scattergl/convert"),a=g("../../lib"),n=g("../scattergl/constants").TOO_MANY_POINTS,t={};ne.exports=function(f,o,i){if(!!i.length){var p=o.radialAxis,d=o.angularAxis,y=A(f,o);return i.forEach(function(v){if(!(!v||!v[0]||!v[0].trace)){var x=v[0],l=x.trace,_=x.t,s=l._length,w=_.r,b=_.theta,h=_.opts,m,u=w.slice(),L=b.slice();for(m=0;m<w.length;m++)o.isPtInside({r:w[m],theta:b[m]})||(u[m]=NaN,L[m]=NaN);var S=new Array(s*2),k=Array(s),P=Array(s);for(m=0;m<s;m++){var z=u[m],I,D;if(c(z)){var R=p.c2g(z),B=d.c2g(L[m],l.thetaunit);I=R*Math.cos(B),D=R*Math.sin(B)}else I=D=NaN;k[m]=S[m*2]=I,P[m]=S[m*2+1]=D}_.tree=T(S),h.marker&&s>=n&&(h.marker.cluster=_.tree),h.marker&&(h.markerSel.positions=h.markerUnsel.positions=h.marker.positions=S),h.line&&S.length>1&&a.extendFlat(h.line,e.linePositions(f,l,S)),h.text&&(a.extendFlat(h.text,{positions:S},e.textPosition(f,l,h.text,h.marker)),a.extendFlat(h.textSel,{positions:S},e.textPosition(f,l,h.text,h.markerSel)),a.extendFlat(h.textUnsel,{positions:S},e.textPosition(f,l,h.text,h.markerUnsel))),h.fill&&!y.fill2d&&(y.fill2d=!0),h.marker&&!y.scatter2d&&(y.scatter2d=!0),h.line&&!y.line2d&&(y.line2d=!0),h.text&&!y.glText&&(y.glText=!0),y.lineOptions.push(h.line),y.fillOptions.push(h.fill),y.markerOptions.push(h.marker),y.markerSelectedOptions.push(h.markerSel),y.markerUnselectedOptions.push(h.markerUnsel),y.textOptions.push(h.text),y.textSelectedOptions.push(h.textSel),y.textUnselectedOptions.push(h.textUnsel),y.selectBatch.push([]),y.unselectBatch.push([]),_.x=k,_.y=P,_.rawx=k,_.rawy=P,_.r=w,_.theta=b,_.positions=S,_._scene=y,_.index=y.count,y.count++}}),M(f,o,i)}},ne.exports.reglPrecompiled=t},{"../../lib":503,"../scattergl/constants":982,"../scattergl/convert":983,"../scattergl/plot":990,"../scattergl/scene_update":991,"@plotly/point-cluster":59,"fast-isnumeric":190}],1017:[function(g,ne,ae){var T=g("../../plots/template_attributes").hovertemplateAttrs,c=g("../../plots/template_attributes").texttemplateAttrs,M=g("../../lib/extend").extendFlat,A=g("../scatter/attributes"),e=g("../../plots/attributes"),a=A.line;ne.exports={mode:A.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:A.text,texttemplate:c({editType:"plot"},{keys:["real","imag","text"]}),hovertext:A.hovertext,line:{color:a.color,width:a.width,dash:a.dash,shape:M({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:A.connectgaps,marker:A.marker,cliponaxis:M({},A.cliponaxis,{dflt:!1}),textposition:A.textposition,textfont:A.textfont,fill:M({},A.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:A.fillcolor,hoverinfo:M({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:A.hoveron,hovertemplate:T(),selected:A.selected,unselected:A.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1018:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../../constants/numerical").BADNUM,M=g("../scatter/colorscale_calc"),A=g("../scatter/arrays_to_calcdata"),e=g("../scatter/calc_selection"),a=g("../scatter/calc").calcMarkerSize;ne.exports=function(t,r){for(var f=t._fullLayout,o=r.subplot,i=f[o].realaxis,p=f[o].imaginaryaxis,d=i.makeCalcdata(r,"real"),y=p.makeCalcdata(r,"imag"),v=r._length,x=new Array(v),l=0;l<v;l++){var _=d[l],s=y[l],w=x[l]={};T(_)&&T(s)?(w.real=_,w.imag=s):w.real=c}return a(r,v),M(t,r),A(x,r),e(x,r),x}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1019:[function(g,ne,ae){var T=g("../../lib"),c=g("../scatter/subtypes"),M=g("../scatter/marker_defaults"),A=g("../scatter/line_defaults"),e=g("../scatter/line_shape_defaults"),a=g("../scatter/text_defaults"),n=g("../scatter/fillcolor_defaults"),t=g("../scatter/constants").PTS_LINESONLY,r=g("./attributes");ne.exports=function(i,p,d,y){function v(_,s){return T.coerce(i,p,r,_,s)}var x=f(i,p,y,v);if(!x){p.visible=!1;return}v("mode",x<t?"lines+markers":"lines"),v("text"),v("hovertext"),p.hoveron!=="fills"&&v("hovertemplate"),c.hasLines(p)&&(A(i,p,d,y,v),e(i,p,v),v("connectgaps")),c.hasMarkers(p)&&M(i,p,d,y,v,{gradient:!0}),c.hasText(p)&&(v("texttemplate"),a(i,p,y,v));var l=[];(c.hasMarkers(p)||c.hasText(p))&&(v("cliponaxis"),v("marker.maxdisplayed"),l.push("points")),v("fill"),p.fill!=="none"&&(n(i,p,d,v),c.hasLines(p)||e(i,p,v)),(p.fill==="tonext"||p.fill==="toself")&&l.push("fills"),v("hoveron",l.join("+")||"points"),T.coerceSelectionMarkerOpacity(p,v)};function f(o,i,p,d){var y=d("real"),v=d("imag"),x;return y&&v&&(x=Math.min(y.length,v.length)),i._length=x,x}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1017}],1020:[function(g,ne,ae){var T=g("../../plots/cartesian/axes");ne.exports=function(M,A,e){var a={},n=e[A.subplot]._subplot;return a.realLabel=T.tickText(n.radialAxis,M.real,!0).text,a.imagLabel=T.tickText(n.angularAxis,M.imag,!0).text,a}},{"../../plots/cartesian/axes":554}],1021:[function(g,ne,ae){var T=g("../scatter/hover");function c(A,e,a,n){var t=T(A,e,a,n);if(!(!t||t[0].index===!1)){var r=t[0];if(r.index===void 0)return t;var f=A.subplot,o=r.cd[r.index],i=r.trace;if(!!f.isPtInside(o))return r.xLabelVal=void 0,r.yLabelVal=void 0,M(o,i,f,r),r.hovertemplate=i.hovertemplate,t}}function M(A,e,a,n){var t=a.radialAxis,r=a.angularAxis;t._hovertitle="real",r._hovertitle="imag";var f={};f[e.subplot]={_subplot:a};var o=e._module.formatLabels(A,e,f);n.realLabel=o.realLabel,n.imagLabel=o.imagLabel;var i=A.hi||e.hoverinfo,p=[];function d(v,x){p.push(v._hovertitle+": "+x)}if(!e.hovertemplate){var y=i.split("+");y.indexOf("all")!==-1&&(y=["real","imag","text"]),y.indexOf("real")!==-1&&d(t,n.realLabel),y.indexOf("imag")!==-1&&d(r,n.imagLabel),y.indexOf("text")!==-1&&n.text&&(p.push(n.text),delete n.text),n.extraText=p.join("<br>")}}ne.exports={hoverPoints:c,makeHoverPointText:M}},{"../scatter/hover":938}],1022:[function(g,ne,ae){ne.exports={moduleType:"trace",name:"scattersmith",basePlotModule:g("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("./calc"),plot:g("./plot"),style:g("../scatter/style").style,styleOnSelect:g("../scatter/style").styleOnSelect,hoverPoints:g("./hover").hoverPoints,selectPoints:g("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1017,"./calc":1018,"./defaults":1019,"./format_labels":1020,"./hover":1021,"./plot":1023}],1023:[function(g,ne,ae){var T=g("../scatter/plot"),c=g("../../constants/numerical").BADNUM,M=g("../../plots/smith/helpers"),A=M.smith;ne.exports=function(a,n,t){for(var r=n.layers.frontplot.select("g.scatterlayer"),f={xaxis:n.xaxis,yaxis:n.yaxis,plot:n.framework,layerClipId:n._hasClipOnAxisFalse?n.clipIds.forTraces:null},o=0;o<t.length;o++)for(var i=t[o],p=0;p<i.length;p++){var d=i[p],y=d.real;if(y===c)d.x=d.y=c;else{var v=A([y,d.imag]);d.x=v[0],d.y=v[1]}}T(a,f,t,r)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":948}],1024:[function(g,ne,ae){var T=g("../../plots/template_attributes").hovertemplateAttrs,c=g("../../plots/template_attributes").texttemplateAttrs,M=g("../scatter/attributes"),A=g("../../plots/attributes"),e=g("../../components/colorscale/attributes"),a=g("../../components/drawing/attributes").dash,n=g("../../lib/extend").extendFlat,t=M.marker,r=M.line,f=t.line;ne.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:n({},M.mode,{dflt:"markers"}),text:n({},M.text,{}),texttemplate:c({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:n({},M.hovertext,{}),line:{color:r.color,width:r.width,dash:a,shape:n({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:M.connectgaps,cliponaxis:M.cliponaxis,fill:n({},M.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M.fillcolor,marker:n({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:n({width:f.width,editType:"calc"},e("marker.line")),gradient:t.gradient,editType:"calc"},e("marker")),textfont:M.textfont,textposition:M.textposition,selected:M.selected,unselected:M.unselected,hoverinfo:n({},A.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:M.hoveron,hovertemplate:T()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1025:[function(g,ne,ae){var T=g("fast-isnumeric"),c=g("../scatter/colorscale_calc"),M=g("../scatter/arrays_to_calcdata"),A=g("../scatter/calc_selection"),e=g("../scatter/calc").calcMarkerSize,a=["a","b","c"],n={a:["b","c"],b:["a","c"],c:["a","b"]};ne.exports=function(r,f){var o=r._fullLayout[f.subplot],i=o.sum,p=f.sum||i,d={a:f.a,b:f.b,c:f.c},y,v,x,l,_,s;for(y=0;y<a.length;y++)if(x=a[y],!d[x]){for(_=d[n[x][0]],s=d[n[x][1]],l=new Array(_.length),v=0;v<_.length;v++)l[v]=p-_[v]-s[v];d[x]=l}var w=f._length,b=new Array(w),h,m,u,L,S,k;for(y=0;y<w;y++)h=d.a[y],m=d.b[y],u=d.c[y],T(h)&&T(m)&&T(u)?(h=+h,m=+m,u=+u,L=i/(h+m+u),L!==1&&(h*=L,m*=L,u*=L),k=h,S=u-m,b[y]={x:S,y:k,a:h,b:m,c:u}):b[y]={x:!1,y:!1};return e(f,w),c(r,f),M(b,f),A(b,f),b}},{"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1026:[function(g,ne,ae){var T=g("../../lib"),c=g("../scatter/constants"),M=g("../scatter/subtypes"),A=g("../scatter/marker_defaults"),e=g("../scatter/line_defaults"),a=g("../scatter/line_shape_defaults"),n=g("../scatter/text_defaults"),t=g("../scatter/fillcolor_defaults"),r=g("./attributes");ne.exports=function(o,i,p,d){function y(b,h){return T.coerce(o,i,r,b,h)}var v=y("a"),x=y("b"),l=y("c"),_;if(v?(_=v.length,x?(_=Math.min(_,x.length),l&&(_=Math.min(_,l.length))):l?_=Math.min(_,l.length):_=0):x&&l&&(_=Math.min(x.length,l.length)),!_){i.visible=!1;return}i._length=_,y("sum"),y("text"),y("hovertext"),i.hoveron!=="fills"&&y("hovertemplate");var s=_<c.PTS_LINESONLY?"lines+markers":"lines";y("mode",s),M.hasLines(i)&&(e(o,i,p,d,y),a(o,i,y),y("connectgaps")),M.hasMarkers(i)&&A(o,i,p,d,y,{gradient:!0}),M.hasText(i)&&(y("texttemplate"),n(o,i,d,y));var w=[];(M.hasMarkers(i)||M.hasText(i))&&(y("cliponaxis"),y("marker.maxdisplayed"),w.push("points")),y("fill"),i.fill!=="none"&&(t(o,i,p,y),M.hasLines(i)||a(o,i,y)),(i.fill==="tonext"||i.fill==="toself")&&w.push("fills"),y("hoveron",w.join("+")||"points"),T.coerceSelectionMarkerOpacity(i,y)}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1024}],1027:[function(g,ne,ae){ne.exports=function(c,M,A,e,a){if(M.xa&&(c.xaxis=M.xa),M.ya&&(c.yaxis=M.ya),e[a]){var n=e[a];c.a=n.a,c.b=n.b,c.c=n.c}else c.a=M.a,c.b=M.b,c.c=M.c;return c}},{}],1028:[function(g,ne,ae){var T=g("../../plots/cartesian/axes");ne.exports=function(M,A,e){var a={},n=e[A.subplot]._subplot;return a.aLabel=T.tickText(n.aaxis,M.a,!0).text,a.bLabel=T.tickText(n.baxis,M.b,!0).text,a.cLabel=T.tickText(n.caxis,M.c,!0).text,a}},{"../../plots/cartesian/axes":554}],1029:[function(g,ne,ae){var T=g("../scatter/hover");ne.exports=function(M,A,e,a){var n=T(M,A,e,a);if(!n||n[0].index===!1)return;var t=n[0];if(t.index===void 0){var r=1-t.y0/M.ya._length,f=M.xa._length,o=f*r/2,i=f-o;return t.x0=Math.max(Math.min(t.x0,i),o),t.x1=Math.max(Math.min(t.x1,i),o),n}var p=t.cd[t.index],d=t.trace,y=t.subplot;t.a=p.a,t.b=p.b,t.c=p.c,t.xLabelVal=void 0,t.yLabelVal=void 0;var v={};v[d.subplot]={_subplot:y};var x=d._module.formatLabels(p,d,v);t.aLabel=x.aLabel,t.bLabel=x.bLabel,t.cLabel=x.cLabel;var l=p.hi||d.hoverinfo,_=[];function s(b,h){_.push(b._hovertitle+": "+h)}if(!d.hovertemplate){var w=l.split("+");w.indexOf("all")!==-1&&(w=["a","b","c"]),w.indexOf("a")!==-1&&s(y.aaxis,t.aLabel),w.indexOf("b")!==-1&&s(y.baxis,t.bLabel),w.indexOf("c")!==-1&&s(y.caxis,t.cLabel)}return t.extraText=_.join("<br>"),t.hovertemplate=d.hovertemplate,n}},{"../scatter/hover":938}],1030:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("./calc"),plot:g("./plot"),style:g("../scatter/style").style,styleOnSelect:g("../scatter/style").styleOnSelect,hoverPoints:g("./hover"),selectPoints:g("../scatter/select"),eventData:g("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:g("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1024,"./calc":1025,"./defaults":1026,"./event_data":1027,"./format_labels":1028,"./hover":1029,"./plot":1031}],1031:[function(g,ne,ae){var T=g("../scatter/plot");ne.exports=function(M,A,e){var a=A.plotContainer;a.select(".scatterlayer").selectAll("*").remove();var n={xaxis:A.xaxis,yaxis:A.yaxis,plot:a,layerClipId:A._hasClipOnAxisFalse?A.clipIdRelative:null},t=A.layers.frontplot.select("g.scatterlayer");T(M,n,e,t)}},{"../scatter/plot":948}],1032:[function(g,ne,ae){var T=g("../scatter/attributes"),c=g("../../components/colorscale/attributes"),M=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=g("../../plots/template_attributes").hovertemplateAttrs,e=g("../scattergl/attributes"),a=g("../../plots/cartesian/constants").idRegex,n=g("../../plot_api/plot_template").templatedArray,t=g("../../lib/extend").extendFlat,r=T.marker,f=r.line,o=t(c("marker.line",{editTypeOverride:"calc"}),{width:t({},f.width,{editType:"calc"}),editType:"calc"}),i=t(c("marker"),{symbol:r.symbol,size:t({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:o,editType:"calc"});i.color.editType=i.cmin.editType=i.cmax.editType="style";function p(d){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:a[d],editType:"plot"}}}ne.exports={dimensions:n("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},e.text,{}),hovertext:t({},e.hovertext,{}),hovertemplate:A(),xhoverformat:M("x"),yhoverformat:M("y"),marker:i,xaxes:p("x"),yaxes:p("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergl/attributes":979}],1033:[function(g,ne,ae){var T=g("../../registry"),c=g("../../components/grid");ne.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../scatter/marker_colorbar"),calc:g("./calc"),plot:g("./plot"),hoverPoints:g("./hover").hoverPoints,selectPoints:g("./select"),editStyle:g("./edit_style"),meta:{}},T.register(c)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":945,"./attributes":1032,"./calc":1035,"./defaults":1036,"./edit_style":1037,"./hover":1039,"./plot":1041,"./select":1043}],1034:[function(g,ne,ae){var T=g("regl-line2d"),c=g("../../registry"),M=g("../../lib/prepare_regl"),A=g("../../plots/get_data").getModuleCalcData,e=g("../../plots/cartesian"),a=g("../../plots/cartesian/axis_ids").getFromId,n=g("../../plots/cartesian/axes").shouldShowZeroLine,t="splom",r={};function f(v){var x=v._fullLayout,l=c.getModule(t),_=A(v.calcdata,l)[0],s=M(v,["ANGLE_instanced_arrays","OES_element_index_uint"],r);!s||(x._hasOnlyLargeSploms&&p(v),l.plot(v,{},_))}function o(v){var x=v.calcdata,l=v._fullLayout;l._hasOnlyLargeSploms&&p(v);for(var _=0;_<x.length;_++){var s=x[_][0],w=s.trace,b=l._splomScenes[w.uid];w.type==="splom"&&b&&b.matrix&&i(v,w,b)}}function i(v,x,l){for(var _=l.matrixOptions.data.length,s=x._visibleDims,w=l.viewOpts.ranges=new Array(_),b=0;b<s.length;b++){var h=s[b],m=w[b]=new Array(4),u=a(v,x._diag[h][0]);u&&(m[0]=u.r2l(u.range[0]),m[2]=u.r2l(u.range[1]));var L=a(v,x._diag[h][1]);L&&(m[1]=L.r2l(L.range[0]),m[3]=L.r2l(L.range[1]))}l.selectBatch.length||l.unselectBatch.length?l.matrix.update({ranges:w},{ranges:w}):l.matrix.update({ranges:w})}function p(v){var x=v._fullLayout,l=x._glcanvas.data()[0].regl,_=x._splomGrid;_||(_=x._splomGrid=T(l)),_.update(d(v))}function d(v){var x=v._context.plotGlPixelRatio,l=v._fullLayout,_=l._size,s=[0,0,l.width*x,l.height*x],w={},b;function h(K,J,G,Z,re,se){G*=x,Z*=x,re*=x,se*=x;var oe=J[K+"color"],N=J[K+"width"],U=String(oe+N);U in w?w[U].data.push(NaN,NaN,G,Z,re,se):w[U]={data:[G,Z,re,se],join:"rect",thickness:N*x,color:oe,viewport:s,range:s,overlay:!1}}for(b in l._splomSubplots){var m=l._plots[b],u=m.xaxis,L=m.yaxis,S=u._gridVals,k=L._gridVals,P=u._offset,z=u._length,I=L._length,D=_.b+L.domain[0]*_.h,R=-L._m,B=-R*L.r2l(L.range[0],L.calendar),F,V;if(u.showgrid)for(b=0;b<S.length;b++)F=P+u.l2p(S[b].x),h("grid",u,F,D,F,D+I);if(L.showgrid)for(b=0;b<k.length;b++)V=D+B+R*k[b].x,h("grid",L,P,V,P+z,V);n(v,u,L)&&(F=P+u.l2p(0),h("zeroline",u,F,D,F,D+I)),n(v,L,u)&&(V=D+B+0,h("zeroline",L,P,V,P+z,V))}var Y=[];for(b in w)Y.push(w[b]);return Y}function y(v,x,l,_){var s={},w;if(_._splomScenes){for(w=0;w<v.length;w++){var b=v[w];b.type==="splom"&&(s[b.uid]=1)}for(w=0;w<l.length;w++){var h=l[w];if(!s[h.uid]){var m=_._splomScenes[h.uid];m&&m.destroy&&m.destroy(),_._splomScenes[h.uid]=null,delete _._splomScenes[h.uid]}}}Object.keys(_._splomScenes||{}).length===0&&delete _._splomScenes,_._splomGrid&&!x._hasOnlyLargeSploms&&_._hasOnlyLargeSploms&&(_._splomGrid.destroy(),_._splomGrid=null,delete _._splomGrid),e.clean(v,x,l,_)}ne.exports={name:t,attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:f,drag:o,updateGrid:p,clean:y,updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:r}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1035:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/cartesian/axis_ids"),M=g("../scatter/calc").calcMarkerSize,A=g("../scatter/calc").calcAxisExpansion,e=g("../scatter/colorscale_calc"),a=g("../scattergl/convert").markerSelection,n=g("../scattergl/convert").markerStyle,t=g("./scene_update"),r=g("../../constants/numerical").BADNUM,f=g("../scattergl/constants").TOO_MANY_POINTS;ne.exports=function(i,p){var d=p.dimensions,y=p._length,v={},x=v.cdata=[],l=v.data=[],_=p._visibleDims=[],s,w,b,h,m;function u(z,I){for(var D=z.makeCalcdata({v:I.values,vcalendar:p.calendar},"v"),R=0;R<D.length;R++)D[R]=D[R]===r?NaN:D[R];x.push(D),l.push(z.type==="log"?T.simpleMap(D,z.c2l):D)}for(s=0;s<d.length;s++)if(b=d[s],b.visible){if(h=c.getFromId(i,p._diag[s][0]),m=c.getFromId(i,p._diag[s][1]),h&&m&&h.type!==m.type){T.log("Skipping splom dimension "+s+" with conflicting axis types");continue}h?(u(h,b),m&&m.type==="category"&&(m._categories=h._categories.slice())):u(m,b),_.push(s)}e(i,p),T.extendFlat(v,n(p));var L=x.length,S=L*y>f,k;for(S?k=v.sizeAvg||Math.max(v.size,3):k=M(p,y),w=0;w<_.length;w++)s=_[w],b=d[s],h=c.getFromId(i,p._diag[s][0])||{},m=c.getFromId(i,p._diag[s][1])||{},A(i,p,h,m,x[w],x[w],k);var P=t(i,p);return P.matrix||(P.matrix=!0),P.matrixOptions=v,P.selectedOptions=a(p,p.selected),P.unselectedOptions=a(p,p.unselected),[{x:!1,y:!1,t:{},trace:p}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983,"./scene_update":1042}],1036:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/array_container_defaults"),M=g("./attributes"),A=g("../scatter/subtypes"),e=g("../scatter/marker_defaults"),a=g("../parcoords/merge_length"),n=g("../scattergl/helpers").isOpenSymbol;ne.exports=function(o,i,p,d){function y(h,m){return T.coerce(o,i,M,h,m)}var v=c(o,i,{name:"dimensions",handleItemDefaults:t}),x=y("diagonal.visible"),l=y("showupperhalf"),_=y("showlowerhalf"),s=a(i,v,"values");if(!s||!x&&!l&&!_){i.visible=!1;return}y("text"),y("hovertext"),y("hovertemplate"),y("xhoverformat"),y("yhoverformat"),e(o,i,p,d,y);var w=n(i.marker.symbol),b=A.isBubble(i);y("marker.line.width",w||b?1:0),r(o,i,d,y),T.coerceSelectionMarkerOpacity(i,y)};function t(f,o){function i(d,y){return T.coerce(f,o,M.dimensions,d,y)}i("label");var p=i("values");p&&p.length?i("visible"):o.visible=!1,i("axis.type"),i("axis.matches")}function r(f,o,i,p){var d=o.dimensions,y=d.length,v=o.showupperhalf,x=o.showlowerhalf,l=o.diagonal.visible,_,s,w=new Array(y),b=new Array(y);for(_=0;_<y;_++){var h=_?_+1:"";w[_]="x"+h,b[_]="y"+h}var m=p("xaxes",w),u=p("yaxes",b),L=o._diag=new Array(y);o._xaxes={},o._yaxes={};var S=[],k=[];function P(K,J,G,Z){if(!!K){var re=K.charAt(0),se=i._splomAxes[re];if(o["_"+re+"axes"][K]=1,Z.push(K),!(K in se)){var oe=se[K]={};G&&(oe.label=G.label||"",G.visible&&G.axis&&(G.axis.type&&(oe.type=G.axis.type),G.axis.matches&&(oe.matches=J)))}}}var z=!l&&!x,I=!l&&!v;for(o._axesDim={},_=0;_<y;_++){var D=d[_],R=_===0,B=_===y-1,F=R&&z||B&&I?void 0:m[_],V=R&&I||B&&z?void 0:u[_];P(F,V,D,S),P(V,F,D,k),L[_]=[F,V],o._axesDim[F]=_,o._axesDim[V]=_}for(_=0;_<S.length;_++)for(s=0;s<k.length;s++){var Y=S[_]+k[s];(_>s&&v||_<s&&x||_===s&&(l||!x||!v))&&(i._splomSubplots[Y]=1)}(!x||!l&&v&&x)&&(i._splomGridDflt.xside="bottom",i._splomGridDflt.yside="left")}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":898,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scattergl/helpers":987,"./attributes":1032}],1037:[function(g,ne,ae){var T=g("../../lib"),c=g("../scatter/colorscale_calc"),M=g("../scattergl/convert").markerStyle;ne.exports=function(e,a){var n=a.trace,t=e._fullLayout._splomScenes[n.uid];if(t){c(e,n),T.extendFlat(t.matrixOptions,M(n));var r=T.extendFlat({},t.matrixOptions,t.viewOpts);t.matrix.update(r,null)}}},{"../../lib":503,"../scatter/colorscale_calc":930,"../scattergl/convert":983}],1038:[function(g,ne,ae){ae.getDimIndex=function(c,M){for(var A=M._id,e=A.charAt(0),a={x:0,y:1}[e],n=c._visibleDims,t=0;t<n.length;t++){var r=n[t];if(c._diag[r][a]===A)return t}return!1}},{}],1039:[function(g,ne,ae){var T=g("./helpers"),c=g("../scattergl/hover").calcHover;function M(A,e,a){var n=A.cd,t=n[0].trace,r=A.scene,f=r.matrixOptions.cdata,o=A.xa,i=A.ya,p=o.c2p(e),d=i.c2p(a),y=A.distance,v=T.getDimIndex(t,o),x=T.getDimIndex(t,i);if(v===!1||x===!1)return[A];for(var l=f[v],_=f[x],s,w,b=y,h=0;h<l.length;h++){var m=l[h],u=_[h],L=o.c2p(m)-p,S=i.c2p(u)-d,k=Math.sqrt(L*L+S*S);k<b&&(b=w=k,s=h)}return A.index=s,A.distance=b,A.dxy=w,s===void 0?[A]:[c(A,l,_,t)]}ne.exports={hoverPoints:M}},{"../scattergl/hover":988,"./helpers":1038}],1040:[function(g,ne,ae){var T=g("./base_index");T.basePlotModule=g("./base_plot"),ne.exports=T},{"./base_index":1033,"./base_plot":1034}],1041:[function(g,ne,ae){var T=g("regl-splom"),c=g("../../lib"),M=g("../../plots/cartesian/axis_ids"),A=g("../../components/dragelement/helpers").selectMode;ne.exports=function(n,t,r){if(!!r.length)for(var f=0;f<r.length;f++)e(n,r[f][0])};function e(a,n){var t=a._fullLayout,r=t._size,f=n.trace,o=n.t,i=t._splomScenes[f.uid],p=i.matrixOptions,d=p.cdata,y=t._glcanvas.data()[0].regl,v=t.dragmode,x,l,_,s,w;if(d.length!==0){p.lower=f.showupperhalf,p.upper=f.showlowerhalf,p.diagonal=f.diagonal.visible;var b=f._visibleDims,h=d.length,m=i.viewOpts={};for(m.ranges=new Array(h),m.domains=new Array(h),w=0;w<b.length;w++){_=b[w];var u=m.ranges[w]=new Array(4),L=m.domains[w]=new Array(4);x=M.getFromId(a,f._diag[_][0]),x&&(u[0]=x._rl[0],u[2]=x._rl[1],L[0]=x.domain[0],L[2]=x.domain[1]),l=M.getFromId(a,f._diag[_][1]),l&&(u[1]=l._rl[0],u[3]=l._rl[1],L[1]=l.domain[0],L[3]=l.domain[1])}var S=a._context.plotGlPixelRatio,k=r.l*S,P=r.b*S,z=r.w*S,I=r.h*S;m.viewport=[k,P,z+k,I+P],i.matrix===!0&&(i.matrix=T(y));var D=t.clickmode.indexOf("select")>-1,R=A(v)||!!f.selectedpoints||D,B=!0;if(R){var F=f._length;if(f.selectedpoints){i.selectBatch=f.selectedpoints;var V=f.selectedpoints,Y={};for(_=0;_<V.length;_++)Y[V[_]]=!0;var K=[];for(_=0;_<F;_++)Y[_]||K.push(_);i.unselectBatch=K}var J=o.xpx=new Array(h),G=o.ypx=new Array(h);for(w=0;w<b.length;w++){if(_=b[w],x=M.getFromId(a,f._diag[_][0]),x)for(J[w]=new Array(F),s=0;s<F;s++)J[w][s]=x.c2p(d[w][s]);if(l=M.getFromId(a,f._diag[_][1]),l)for(G[w]=new Array(F),s=0;s<F;s++)G[w][s]=l.c2p(d[w][s])}if(i.selectBatch.length||i.unselectBatch.length){var Z=c.extendFlat({},p,i.unselectedOptions,m),re=c.extendFlat({},p,i.selectedOptions,m);i.matrix.update(Z,re),B=!1}}else o.xpx=o.ypx=null;if(B){var se=c.extendFlat({},p,m);i.matrix.update(se,null)}}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1042:[function(g,ne,ae){var T=g("../../lib");ne.exports=function(M,A){var e=M._fullLayout,a=A.uid,n=e._splomScenes;n||(n=e._splomScenes={});var t={dirty:!0,selectBatch:[],unselectBatch:[]},r={matrix:!1,selectBatch:[],unselectBatch:[]},f=n[A.uid];return f||(f=n[a]=T.extendFlat({},t,r),f.draw=function(){f.matrix&&f.matrix.draw&&(f.selectBatch.length||f.unselectBatch.length?f.matrix.draw(f.unselectBatch,f.selectBatch):f.matrix.draw()),f.dirty=!1},f.destroy=function(){f.matrix&&f.matrix.destroy&&f.matrix.destroy(),f.matrixOptions=null,f.selectBatch=null,f.unselectBatch=null,f=null}),f.dirty||T.extendFlat(f,t),f}},{"../../lib":503}],1043:[function(g,ne,ae){var T=g("../../lib"),c=g("../scatter/subtypes"),M=g("./helpers");ne.exports=function(e,a){var n=e.cd,t=n[0].trace,r=n[0].t,f=e.scene,o=f.matrixOptions.cdata,i=e.xaxis,p=e.yaxis,d=[];if(!f)return d;var y=!c.hasMarkers(t)&&!c.hasText(t);if(t.visible!==!0||y)return d;var v=M.getDimIndex(t,i),x=M.getDimIndex(t,p);if(v===!1||x===!1)return d;var l=r.xpx[v],_=r.ypx[x],s=o[v],w=o[x],b=[],h=[];if(a!==!1&&!a.degenerate)for(var m=0;m<s.length;m++)a.contains([l[m],_[m]],null,m,e)?(b.push(m),d.push({pointNumber:m,x:s[m],y:w[m]})):h.push(m);var u=f.matrixOptions;return!b.length&&!h.length?f.matrix.update(u,null):!f.selectBatch.length&&!f.unselectBatch.length&&f.matrix.update(f.unselectedOptions,T.extendFlat({},u,f.selectedOptions,f.viewOpts)),f.selectBatch=b,f.unselectBatch=h,d}},{"../../lib":503,"../scatter/subtypes":952,"./helpers":1038}],1044:[function(g,ne,ae){var T=g("../../components/colorscale/attributes"),c=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=g("../../plots/template_attributes").hovertemplateAttrs,A=g("../mesh3d/attributes"),e=g("../../plots/attributes"),a=g("../../lib/extend").extendFlat,n={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:M({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:c("u",1),vhoverformat:c("v",1),whoverformat:c("w",1),xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(n,T("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var t=["opacity","lightposition","lighting"];t.forEach(function(r){n[r]=A[r]}),n.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),n.transforms=void 0,ne.exports=n},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1045:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/colorscale/calc");function M(n,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length),t._u=a(t.u,t._len),t._v=a(t.v,t._len),t._w=a(t.w,t._len),t._x=a(t.x,t._len),t._y=a(t.y,t._len),t._z=a(t.z,t._len);var r=A(t);t._gridFill=r.fill,t._Xs=r.Xs,t._Ys=r.Ys,t._Zs=r.Zs,t._len=r.len;var f=0,o,i,p;t.starts&&(o=a(t.starts.x||[]),i=a(t.starts.y||[]),p=a(t.starts.z||[]),f=Math.min(o.length,i.length,p.length)),t._startsX=o||[],t._startsY=i||[],t._startsZ=p||[];var d=0,y=1/0,v;for(v=0;v<t._len;v++){var x=t._u[v],l=t._v[v],_=t._w[v],s=Math.sqrt(x*x+l*l+_*_);d=Math.max(d,s),y=Math.min(y,s)}for(c(n,t,{vals:[y,d],containerStr:"",cLetter:"c"}),v=0;v<f;v++){var w=o[v];r.xMax=Math.max(r.xMax,w),r.xMin=Math.min(r.xMin,w);var b=i[v];r.yMax=Math.max(r.yMax,b),r.yMin=Math.min(r.yMin,b);var h=p[v];r.zMax=Math.max(r.zMax,h),r.zMin=Math.min(r.zMin,h)}t._slen=f,t._normMax=d,t._xbnds=[r.xMin,r.xMax],t._ybnds=[r.yMin,r.yMax],t._zbnds=[r.zMin,r.zMax]}function A(n){var t=n._x,r=n._y,f=n._z,o=n._len,i,p,d,y=-1/0,v=1/0,x=-1/0,l=1/0,_=-1/0,s=1/0,w="",b,h,m,u,L,S,k,P,z;for(o&&(u=t[0],S=r[0],P=f[0]),o>1&&(L=t[o-1],k=r[o-1],z=f[o-1]),i=0;i<o;i++)y=Math.max(y,t[i]),v=Math.min(v,t[i]),x=Math.max(x,r[i]),l=Math.min(l,r[i]),_=Math.max(_,f[i]),s=Math.min(s,f[i]),!b&&t[i]!==u&&(b=!0,w+="x"),!h&&r[i]!==S&&(h=!0,w+="y"),!m&&f[i]!==P&&(m=!0,w+="z");b||(w+="x"),h||(w+="y"),m||(w+="z");var I=e(n._x),D=e(n._y),R=e(n._z);w=w.replace("x",(u>L?"-":"+")+"x"),w=w.replace("y",(S>k?"-":"+")+"y"),w=w.replace("z",(P>z?"-":"+")+"z");var B=function(){o=0,I=[],D=[],R=[]};(!o||o<I.length*D.length*R.length)&&B();var F=function(ie){return ie==="x"?t:ie==="y"?r:f},V=function(ie){return ie==="x"?I:ie==="y"?D:R},Y=function(ie){return ie[o-1]<ie[0]?-1:1},K=F(w[1]),J=F(w[3]),G=F(w[5]),Z=V(w[1]).length,re=V(w[3]).length,se=V(w[5]).length,oe=!1,N=function(ie,le,ye){return Z*(re*ie+le)+ye},U=Y(F(w[1])),q=Y(F(w[3])),Q=Y(F(w[5]));for(i=0;i<se-1;i++){for(p=0;p<re-1;p++){for(d=0;d<Z-1;d++){var W=N(i,p,d),X=N(i,p,d+1),te=N(i,p+1,d),ee=N(i+1,p,d);if((!(K[W]*U<K[X]*U)||!(J[W]*q<J[te]*q)||!(G[W]*Q<G[ee]*Q))&&(oe=!0),oe)break}if(oe)break}if(oe)break}return oe&&(T.warn("Encountered arbitrary coordinates! Unable to input data grid."),B()),{xMin:v,yMin:l,zMin:s,xMax:y,yMax:x,zMax:_,Xs:I,Ys:D,Zs:R,len:o,fill:w}}function e(n){return T.distinctVals(n).vals}function a(n,t){if(t===void 0&&(t=n.length),T.isTypedArray(n))return n.subarray(0,t);for(var r=[],f=0;f<t;f++)r[f]=+n[f];return r}ne.exports={calc:M,filter:a,processGrid:A}},{"../../components/colorscale/calc":374,"../../lib":503}],1046:[function(g,ne,ae){var T=g("../../../stackgl_modules").gl_streamtube3d,c=T.createTubeMesh,M=g("../../lib"),A=g("../../lib/gl_format_color").parseColorScale,e=g("../../components/colorscale").extractOpts,a=g("../../plots/gl3d/zip3"),n={xaxis:0,yaxis:1,zaxis:2};function t(d,y){this.scene=d,this.uid=y,this.mesh=null,this.data=null}var r=t.prototype;r.handlePick=function(d){var y=this.scene.fullSceneLayout,v=this.scene.dataScale;function x(s,w){var b=y[w],h=v[n[w]];return b.l2c(s)/h}if(d.object===this.mesh){var l=d.data.position,_=d.data.velocity;return d.traceCoordinate=[x(l[0],"xaxis"),x(l[1],"yaxis"),x(l[2],"zaxis"),x(_[0],"xaxis"),x(_[1],"yaxis"),x(_[2],"zaxis"),d.data.intensity*this.data._normMax,d.data.divergence],d.textLabel=this.data.hovertext||this.data.text,!0}};function f(d){var y=d.length,v;return y>2?v=d.slice(1,y-1):y===2?v=[(d[0]+d[1])/2]:v=d,v}function o(d){var y=d.length;return y===1?[.5,.5]:[d[1]-d[0],d[y-1]-d[y-2]]}function i(d,y){var v=d.fullSceneLayout,x=d.dataScale,l=y._len,_={};function s(re,se){var oe=v[se],N=x[n[se]];return M.simpleMap(re,function(U){return oe.d2l(U)*N})}if(_.vectors=a(s(y._u,"xaxis"),s(y._v,"yaxis"),s(y._w,"zaxis"),l),!l)return{positions:[],cells:[]};var w=s(y._Xs,"xaxis"),b=s(y._Ys,"yaxis"),h=s(y._Zs,"zaxis");_.meshgrid=[w,b,h],_.gridFill=y._gridFill;var m=y._slen;if(m)_.startingPositions=a(s(y._startsX,"xaxis"),s(y._startsY,"yaxis"),s(y._startsZ,"zaxis"));else{for(var u=b[0],L=f(w),S=f(h),k=new Array(L.length*S.length),P=0,z=0;z<L.length;z++)for(var I=0;I<S.length;I++)k[P++]=[L[z],u,S[I]];_.startingPositions=k}_.colormap=A(y),_.tubeSize=y.sizeref,_.maxLength=y.maxdisplayed;var D=s(y._xbnds,"xaxis"),R=s(y._ybnds,"yaxis"),B=s(y._zbnds,"zaxis"),F=o(w),V=o(b),Y=o(h),K=[[D[0]-F[0],R[0]-V[0],B[0]-Y[0]],[D[1]+F[1],R[1]+V[1],B[1]+Y[1]]],J=T(_,K),G=e(y);J.vertexIntensityBounds=[G.min/y._normMax,G.max/y._normMax];var Z=y.lightposition;return J.lightPosition=[Z.x,Z.y,Z.z],J.ambient=y.lighting.ambient,J.diffuse=y.lighting.diffuse,J.specular=y.lighting.specular,J.roughness=y.lighting.roughness,J.fresnel=y.lighting.fresnel,J.opacity=y.opacity,y._pad=J.tubeScale*y.sizeref*2,J}r.update=function(d){this.data=d;var y=i(this.scene,d);this.mesh.update(y)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function p(d,y){var v=d.glplot.gl,x=i(d,y),l=c(v,x),_=new t(d,y.uid);return _.mesh=l,_.data=y,l._trace=_,d.glplot.add(l),_}ne.exports=p},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1047:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/colorscale/defaults"),M=g("./attributes");ne.exports=function(e,a,n,t){function r(v,x){return T.coerce(e,a,M,v,x)}var f=r("u"),o=r("v"),i=r("w"),p=r("x"),d=r("y"),y=r("z");if(!f||!f.length||!o||!o.length||!i||!i.length||!p||!p.length||!d||!d.length||!y||!y.length){a.visible=!1;return}r("starts.x"),r("starts.y"),r("starts.z"),r("maxdisplayed"),r("sizeref"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),c(e,a,t,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1044}],1048:[function(g,ne,ae){ne.exports={moduleType:"trace",name:"streamtube",basePlotModule:g("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:g("./calc").calc,plot:g("./convert"),eventData:function(T,c){return T.tubex=T.x,T.tubey=T.y,T.tubez=T.z,T.tubeu=c.traceCoordinate[3],T.tubev=c.traceCoordinate[4],T.tubew=c.traceCoordinate[5],T.norm=c.traceCoordinate[6],T.divergence=c.traceCoordinate[7],delete T.x,delete T.y,delete T.z,T},meta:{}}},{"../../plots/gl3d":598,"./attributes":1044,"./calc":1045,"./convert":1046,"./defaults":1047}],1049:[function(g,ne,ae){var T=g("../../plots/attributes"),c=g("../../plots/template_attributes").hovertemplateAttrs,M=g("../../plots/template_attributes").texttemplateAttrs,A=g("../../components/colorscale/attributes"),e=g("../../plots/domain").attributes,a=g("../pie/attributes"),n=g("./constants"),t=g("../../lib/extend").extendFlat;ne.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},a.marker.line.color,{dflt:null}),width:t({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},A("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:M({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:t({},T.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:c({},{keys:n.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:t({},a.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:a.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"./constants":1052}],1050:[function(g,ne,ae){var T=g("../../plots/plots");ae.name="sunburst",ae.plot=function(c,M,A,e){T.plotBasePlot(ae.name,c,M,A,e)},ae.clean=function(c,M,A,e){T.cleanBasePlot(ae.name,c,M,A,e)}},{"../../plots/plots":619}],1051:[function(g,ne,ae){var T=g("d3-hierarchy"),c=g("fast-isnumeric"),M=g("../../lib"),A=g("../../components/colorscale").makeColorScaleFuncFromTrace,e=g("../pie/calc").makePullColorFn,a=g("../pie/calc").generateExtendedColors,n=g("../../components/colorscale").calc,t=g("../../constants/numerical").ALMOST_EQUAL,r={},f={},o={};ae.calc=function(p,d){var y=p._fullLayout,v=d.ids,x=M.isArrayOrTypedArray(v),l=d.labels,_=d.parents,s=d.values,w=M.isArrayOrTypedArray(s),b=[],h={},m={},u=function(U,q){h[U]?h[U].push(q):h[U]=[q],m[q]=1},L=function(U){return U||typeof U=="number"},S=function(U){return!w||c(s[U])&&s[U]>=0},k,P,z;x?(k=Math.min(v.length,_.length),P=function(U){return L(v[U])&&S(U)},z=function(U){return String(v[U])}):(k=Math.min(l.length,_.length),P=function(U){return L(l[U])&&S(U)},z=function(U){return String(l[U])}),w&&(k=Math.min(k,s.length));for(var I=0;I<k;I++)if(P(I)){var D=z(I),R=L(_[I])?String(_[I]):"",B={i:I,id:D,pid:R,label:L(l[I])?String(l[I]):""};w&&(B.v=+s[I]),b.push(B),u(R,D)}if(h[""]){if(h[""].length>1){for(var Y=M.randstr(),K=0;K<b.length;K++)b[K].pid===""&&(b[K].pid=Y);b.unshift({hasMultipleRoots:!0,id:Y,pid:"",label:""})}}else{var F=[],V;for(V in h)m[V]||F.push(V);if(F.length===1)V=F[0],b.unshift({hasImpliedRoot:!0,id:V,pid:"",label:V});else return M.warn(["Multiple implied roots, cannot build",d.type,"hierarchy of",d.name+".","These roots include:",F.join(", ")].join(" "))}var J;try{J=T.stratify().id(function(U){return U.id}).parentId(function(U){return U.pid})(b)}catch(U){return M.warn(["Failed to build",d.type,"hierarchy of",d.name+".","Error:",U.message].join(" "))}var G=T.hierarchy(J),Z=!1;if(w)switch(d.branchvalues){case"remainder":G.sum(function(U){return U.data.v});break;case"total":G.each(function(U){var q=U.data.data,Q=q.v;if(U.children){var W=U.children.reduce(function(X,te){return X+te.data.data.v},0);if((q.hasImpliedRoot||q.hasMultipleRoots)&&(Q=W),Q<W*t)return Z=!0,M.warn(["Total value for node",U.data.data.id,"of",d.name,"is smaller than the sum of its children.",`
parent value =`,Q,`
children sum =`,W].join(" "))}U.value=Q});break}else i(G,d,{branches:d.count.indexOf("branches")!==-1,leaves:d.count.indexOf("leaves")!==-1});if(!Z){d.sort&&G.sort(function(U,q){return q.value-U.value});var re,se,oe=d.marker.colors||[],N=!!oe.length;return d._hasColorscale?(N||(oe=w?d.values:d._values),n(p,d,{vals:oe,containerStr:"marker",cLetter:"c"}),se=A(d.marker)):re=e(y["_"+d.type+"colormap"]),G.each(function(U){var q=U.data.data;q.color=d._hasColorscale?se(oe[q.i]):re(oe[q.i],q.id)}),b[0].hierarchy=G,b}},ae._runCrossTraceCalc=function(p,d){var y=d._fullLayout,v=d.calcdata,x=y[p+"colorway"],l=y["_"+p+"colormap"];y["extend"+p+"colors"]&&(x=a(x,p==="icicle"?o:p==="treemap"?f:r));var _=0,s;function w(u){var L=u.data.data,S=L.id;L.color===!1&&(l[S]?L.color=l[S]:u.parent?u.parent.parent?L.color=u.parent.data.data.color:(l[S]=L.color=x[_%x.length],_++):L.color=s)}for(var b=0;b<v.length;b++){var h=v[b],m=h[0];m.trace.type===p&&m.hierarchy&&(s=m.trace.root.color,m.hierarchy.each(w))}},ae.crossTraceCalc=function(p){return ae._runCrossTraceCalc("sunburst",p)};function i(p,d,y){var v=0,x=p.children;if(x){for(var l=x.length,_=0;_<l;_++)v+=i(x[_],d,y);y.branches&&v++}else y.leaves&&v++;return p.value=p.data.data.value=v,d._values||(d._values=[]),d._values[p.data.data.i]=v,v}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":903,"d3-hierarchy":115,"fast-isnumeric":190}],1052:[function(g,ne,ae){ne.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1053:[function(g,ne,ae){var T=g("../../lib"),c=g("./attributes"),M=g("../../plots/domain").defaults,A=g("../bar/defaults").handleText,e=g("../../components/colorscale"),a=e.hasColorscale,n=e.handleDefaults;ne.exports=function(r,f,o,i){function p(w,b){return T.coerce(r,f,c,w,b)}var d=p("labels"),y=p("parents");if(!d||!d.length||!y||!y.length){f.visible=!1;return}var v=p("values");v&&v.length?p("branchvalues"):p("count"),p("level"),p("maxdepth");var x=p("marker.line.width");x&&p("marker.line.color",i.paper_bgcolor),p("marker.colors");var l=f._hasColorscale=a(r,"marker","colors")||(r.marker||{}).coloraxis;l&&n(r,f,i,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",l?1:.7);var _=p("text");p("texttemplate"),f.texttemplate||p("textinfo",Array.isArray(_)?"text+label":"label"),p("hovertext"),p("hovertemplate");var s="auto";A(r,f,i,p,s,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("insidetextorientation"),p("sort"),p("rotation"),p("root.color"),M(f,i,p),f._length=null}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1049}],1054:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../registry"),M=g("../../components/fx/helpers").appendArrayPointValue,A=g("../../components/fx"),e=g("../../lib"),a=g("../../lib/events"),n=g("./helpers"),t=g("../pie/helpers"),r=t.formatPieValue;ne.exports=function(i,p,d,y,v){var x=y[0],l=x.trace,_=x.hierarchy,s=l.type==="sunburst",w=l.type==="treemap"||l.type==="icicle";"_hasHoverLabel"in l||(l._hasHoverLabel=!1),"_hasHoverEvent"in l||(l._hasHoverEvent=!1);var b=function(u){var L=d._fullLayout;if(!(d._dragging||L.hovermode===!1)){var S=d._fullData[l.index],k=u.data.data,P=k.i,z=n.isHierarchyRoot(u),I=n.getParent(_,u),D=n.getValue(u),R=function(X){return e.castOption(S,P,X)},B=R("hovertemplate"),F=A.castHoverinfo(S,L,P),V=L.separators,Y;if(B||F&&F!=="none"&&F!=="skip"){var K,J;s&&(K=x.cx+u.pxmid[0]*(1-u.rInscribed),J=x.cy+u.pxmid[1]*(1-u.rInscribed)),w&&(K=u._hoverX,J=u._hoverY);var G={},Z=[],re=[],se=function(X){return Z.indexOf(X)!==-1};F&&(Z=F==="all"?S._module.attributes.hoverinfo.flags:F.split("+")),G.label=k.label,se("label")&&G.label&&re.push(G.label),k.hasOwnProperty("v")&&(G.value=k.v,G.valueLabel=r(G.value,V),se("value")&&re.push(G.valueLabel)),G.currentPath=u.currentPath=n.getPath(u.data),se("current path")&&!z&&re.push(G.currentPath);var oe,N=[],U=function(){N.indexOf(oe)===-1&&(re.push(oe),N.push(oe))};G.percentParent=u.percentParent=D/n.getValue(I),G.parent=u.parentString=n.getPtLabel(I),se("percent parent")&&(oe=n.formatPercent(G.percentParent,V)+" of "+G.parent,U()),G.percentEntry=u.percentEntry=D/n.getValue(p),G.entry=u.entry=n.getPtLabel(p),se("percent entry")&&!z&&!u.onPathbar&&(oe=n.formatPercent(G.percentEntry,V)+" of "+G.entry,U()),G.percentRoot=u.percentRoot=D/n.getValue(_),G.root=u.root=n.getPtLabel(_),se("percent root")&&!z&&(oe=n.formatPercent(G.percentRoot,V)+" of "+G.root,U()),G.text=R("hovertext")||R("text"),se("text")&&(oe=G.text,e.isValidTextValue(oe)&&re.push(oe)),Y=[f(u,S,v.eventDataKeys)];var q={trace:S,y:J,_x0:u._x0,_x1:u._x1,_y0:u._y0,_y1:u._y1,text:re.join("<br>"),name:B||se("name")?S.name:void 0,color:R("hoverlabel.bgcolor")||k.color,borderColor:R("hoverlabel.bordercolor"),fontFamily:R("hoverlabel.font.family"),fontSize:R("hoverlabel.font.size"),fontColor:R("hoverlabel.font.color"),nameLength:R("hoverlabel.namelength"),textAlign:R("hoverlabel.align"),hovertemplate:B,hovertemplateLabels:G,eventData:Y};s&&(q.x0=K-u.rInscribed*u.rpx1,q.x1=K+u.rInscribed*u.rpx1,q.idealAlign=u.pxmid[0]<0?"left":"right"),w&&(q.x=K,q.idealAlign=K<0?"left":"right");var Q=[];A.loneHover(q,{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:d,inOut_bbox:Q}),Y[0].bbox=Q[0],l._hasHoverLabel=!0}if(w){var W=i.select("path.surface");v.styleOne(W,u,S,{hovered:!0})}l._hasHoverEvent=!0,d.emit("plotly_hover",{points:Y||[f(u,S,v.eventDataKeys)],event:T.event})}},h=function(u){var L=d._fullLayout,S=d._fullData[l.index],k=T.select(this).datum();if(l._hasHoverEvent&&(u.originalEvent=T.event,d.emit("plotly_unhover",{points:[f(k,S,v.eventDataKeys)],event:T.event}),l._hasHoverEvent=!1),l._hasHoverLabel&&(A.loneUnhover(L._hoverlayer.node()),l._hasHoverLabel=!1),w){var P=i.select("path.surface");v.styleOne(P,k,S,{hovered:!1})}},m=function(u){var L=d._fullLayout,S=d._fullData[l.index],k=s&&(n.isHierarchyRoot(u)||n.isLeaf(u)),P=n.getPtId(u),z=n.isEntry(u)?n.findEntryWithChild(_,P):n.findEntryWithLevel(_,P),I=n.getPtId(z),D={points:[f(u,S,v.eventDataKeys)],event:T.event};k||(D.nextLevel=I);var R=a.triggerHandler(d,"plotly_"+l.type+"click",D);if(R!==!1&&L.hovermode&&(d._hoverdata=[f(u,S,v.eventDataKeys)],A.click(d,T.event)),!k&&R!==!1&&!d._dragging&&!d._transitioning){c.call("_storeDirectGUIEdit",S,L._tracePreGUI[S.uid],{level:S.level});var B={data:[{level:I}],traces:[l.index]},F={frame:{redraw:!1,duration:v.transitionTime},transition:{duration:v.transitionTime,easing:v.transitionEasing},mode:"immediate",fromcurrent:!0};A.loneUnhover(L._hoverlayer.node()),c.call("animate",d,B,F)}};i.on("mouseover",b),i.on("mouseout",h),i.on("click",m)};function f(o,i,p){for(var d=o.data.data,y={curveNumber:i.index,pointNumber:d.i,data:i._input,fullData:i},v=0;v<p.length;v++){var x=p[v];x in o&&(y[x]=o[x])}return"parentString"in o&&!n.isHierarchyRoot(o)&&(y.parent=o.parentString),M(y,i,d.i),y}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":906,"./helpers":1055,"@plotly/d3":58}],1055:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/color"),M=g("../../lib/setcursor"),A=g("../pie/helpers");ae.findEntryWithLevel=function(t,r){var f;return r&&t.eachAfter(function(o){if(ae.getPtId(o)===r)return f=o.copy()}),f||t},ae.findEntryWithChild=function(t,r){var f;return t.eachAfter(function(o){for(var i=o.children||[],p=0;p<i.length;p++){var d=i[p];if(ae.getPtId(d)===r)return f=o.copy()}}),f||t},ae.isEntry=function(t){return!t.parent},ae.isLeaf=function(t){return!t.children},ae.getPtId=function(t){return t.data.data.id},ae.getPtLabel=function(t){return t.data.data.label},ae.getValue=function(t){return t.value},ae.isHierarchyRoot=function(t){return n(t)===""},ae.setSliceCursor=function(t,r,f){var o=f.isTransitioning;if(!o){var i=t.datum();o=f.hideOnRoot&&ae.isHierarchyRoot(i)||f.hideOnLeaves&&ae.isLeaf(i)}M(t,o?null:"pointer")};function e(t,r,f){return{color:ae.getOutsideTextFontKey("color",t,r,f),family:ae.getOutsideTextFontKey("family",t,r,f),size:ae.getOutsideTextFontKey("size",t,r,f)}}function a(t,r,f,o){var i=(o||{}).onPathbar,p=r.data.data,d=p.i,y=T.castOption(t,d,(i?"pathbar.textfont":"insidetextfont")+".color");return!y&&t._input.textfont&&(y=T.castOption(t._input,d,"textfont.color")),{color:y||c.contrast(p.color),family:ae.getInsideTextFontKey("family",t,r,f,o),size:ae.getInsideTextFontKey("size",t,r,f,o)}}ae.getInsideTextFontKey=function(t,r,f,o,i){var p=(i||{}).onPathbar,d=p?"pathbar.textfont":"insidetextfont",y=f.data.data.i;return T.castOption(r,y,d+"."+t)||T.castOption(r,y,"textfont."+t)||o.size},ae.getOutsideTextFontKey=function(t,r,f,o){var i=f.data.data.i;return T.castOption(r,i,"outsidetextfont."+t)||T.castOption(r,i,"textfont."+t)||o.size},ae.isOutsideText=function(t,r){return!t._hasColorscale&&ae.isHierarchyRoot(r)},ae.determineTextFont=function(t,r,f,o){return ae.isOutsideText(t,r)?e(t,r,f):a(t,r,f,o)},ae.hasTransition=function(t){return!!(t&&t.duration>0)},ae.getMaxDepth=function(t){return t.maxdepth>=0?t.maxdepth:1/0},ae.isHeader=function(t,r){return!(ae.isLeaf(t)||t.depth===r._maxDepth-1)};function n(t){return t.data.data.pid}ae.getParent=function(t,r){return ae.findEntryWithLevel(t,n(r))},ae.listPath=function(t,r){var f=t.parent;if(!f)return[];var o=r?[f.data[r]]:[f];return ae.listPath(f,r).concat(o)},ae.getPath=function(t){return ae.listPath(t,"label").join("/")+"/"},ae.formatValue=A.formatPieValue,ae.formatPercent=function(t,r){var f=T.formatPercent(t,0);return f==="0%"&&(f=A.formatPiePercent(t,r)),f}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":906}],1056:[function(g,ne,ae){ne.exports={moduleType:"trace",name:"sunburst",basePlotModule:g("./base_plot"),categories:[],animatable:!0,attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults"),supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc").calc,crossTraceCalc:g("./calc").crossTraceCalc,plot:g("./plot").plot,style:g("./style").style,colorbar:g("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1049,"./base_plot":1050,"./calc":1051,"./defaults":1053,"./layout_attributes":1057,"./layout_defaults":1058,"./plot":1059,"./style":1060}],1057:[function(g,ne,ae){ne.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1058:[function(g,ne,ae){var T=g("../../lib"),c=g("./layout_attributes");ne.exports=function(A,e){function a(n,t){return T.coerce(A,e,c,n,t)}a("sunburstcolorway",e.colorway),a("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1057}],1059:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("d3-hierarchy"),M=g("d3-interpolate").interpolate,A=g("../../components/drawing"),e=g("../../lib"),a=g("../../lib/svg_text_utils"),n=g("../bar/uniform_text"),t=n.recordMinTextSize,r=n.clearMinTextSize,f=g("../pie/plot"),o=g("../pie/helpers").getRotationAngle,i=f.computeTransform,p=f.transformInsideText,d=g("./style").styleOne,y=g("../bar/style").resizeText,v=g("./fx"),x=g("./constants"),l=g("./helpers");ae.plot=function(m,u,L,S){var k=m._fullLayout,P=k._sunburstlayer,z,I,D=!L,R=!k.uniformtext.mode&&l.hasTransition(L);if(r("sunburst",k),z=P.selectAll("g.trace.sunburst").data(u,function(F){return F[0].trace.uid}),z.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),z.order(),R){S&&(I=S());var B=T.transition().duration(L.duration).ease(L.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()});B.each(function(){P.selectAll("g.trace").each(function(F){_(m,F,this,L)})})}else z.each(function(F){_(m,F,this,L)}),k.uniformtext.mode&&y(m,k._sunburstlayer.selectAll(".trace"),"sunburst");D&&z.exit().remove()};function _(m,u,L,S){var k=m._fullLayout,P=!k.uniformtext.mode&&l.hasTransition(S),z=T.select(L),I=z.selectAll("g.slice"),D=u[0],R=D.trace,B=D.hierarchy,F=l.findEntryWithLevel(B,R.level),V=l.getMaxDepth(R),Y=k._size,K=R.domain,J=Y.w*(K.x[1]-K.x[0]),G=Y.h*(K.y[1]-K.y[0]),Z=.5*Math.min(J,G),re=D.cx=Y.l+Y.w*(K.x[1]+K.x[0])/2,se=D.cy=Y.t+Y.h*(1-K.y[0])-G/2;if(!F)return I.remove();var oe=null,N={};P&&I.each(function(xe){N[l.getPtId(xe)]={rpx0:xe.rpx0,rpx1:xe.rpx1,x0:xe.x0,x1:xe.x1,transform:xe.transform},!oe&&l.isEntry(xe)&&(oe=xe)});var U=s(F).descendants(),q=F.height+1,Q=0,W=V;D.hasMultipleRoots&&l.isHierarchyRoot(F)&&(U=U.slice(1),q-=1,Q=1,W+=1),U=U.filter(function(xe){return xe.y1<=W});var X=o(R.rotation);X&&U.forEach(function(xe){xe.x0+=X,xe.x1+=X});var te=Math.min(q,V),ee=function(xe){return(xe-Q)/te*Z},ie=function(xe,Pe){return[xe*Math.cos(Pe),-xe*Math.sin(Pe)]},le=function(xe){return e.pathAnnulus(xe.rpx0,xe.rpx1,xe.x0,xe.x1,re,se)},ye=function(xe){return re+b(xe)[0]*(xe.transform.rCenter||0)+(xe.transform.x||0)},ue=function(xe){return se+b(xe)[1]*(xe.transform.rCenter||0)+(xe.transform.y||0)};I=I.data(U,l.getPtId),I.enter().append("g").classed("slice",!0),P?I.exit().transition().each(function(){var xe=T.select(this),Pe=xe.select("path.surface");Pe.transition().attrTween("d",function(Qe){var Fe=_e(Qe);return function(Le){return le(Fe(Le))}});var Ve=xe.select("g.slicetext");Ve.attr("opacity",0)}).remove():I.exit().remove(),I.order();var pe=null;if(P&&oe){var ge=l.getPtId(oe);I.each(function(xe){pe===null&&l.getPtId(xe)===ge&&(pe=xe.x1)})}var Te=I;P&&(Te=Te.transition().each("end",function(){var xe=T.select(this);l.setSliceCursor(xe,m,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Te.each(function(xe){var Pe=T.select(this),Ve=e.ensureSingle(Pe,"path","surface",function(Dt){Dt.style("pointer-events","all")});xe.rpx0=ee(xe.y0),xe.rpx1=ee(xe.y1),xe.xmid=(xe.x0+xe.x1)/2,xe.pxmid=ie(xe.rpx1,xe.xmid),xe.midangle=-(xe.xmid-Math.PI/2),xe.startangle=-(xe.x0-Math.PI/2),xe.stopangle=-(xe.x1-Math.PI/2),xe.halfangle=.5*Math.min(e.angleDelta(xe.x0,xe.x1)||Math.PI,Math.PI),xe.ring=1-xe.rpx0/xe.rpx1,xe.rInscribed=w(xe),P?Ve.transition().attrTween("d",function(Dt){var Xt=De(Dt);return function(Tt){return le(Xt(Tt))}}):Ve.attr("d",le),Pe.call(v,F,m,u,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,m,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:m._transitioning}),Ve.call(d,xe,R);var Qe=e.ensureSingle(Pe,"g","slicetext"),Fe=e.ensureSingle(Qe,"text","",function(Dt){Dt.attr("data-notex",1)}),Le=e.ensureUniformFontSize(m,l.determineTextFont(R,xe,k.font));Fe.text(ae.formatSliceLabel(xe,F,R,u,k)).classed("slicetext",!0).attr("text-anchor","middle").call(A.font,Le).call(a.convertToTspans,m);var Ne=A.bBox(Fe.node());xe.transform=p(Ne,xe,D),xe.transform.targetX=ye(xe),xe.transform.targetY=ue(xe);var dt=function(Dt,Xt){var Tt=Dt.transform;return i(Tt,Xt),Tt.fontSize=Le.size,t(R.type,Tt,k),e.getTextTransform(Tt)};P?Fe.transition().attrTween("transform",function(Dt){var Xt=Oe(Dt);return function(Tt){return dt(Xt(Tt),Ne)}}):Fe.attr("transform",dt(xe,Ne))});function _e(xe){var Pe=l.getPtId(xe),Ve=N[Pe],Qe=N[l.getPtId(F)],Fe;if(Qe){var Le=(xe.x1>Qe.x1?2*Math.PI:0)+X;Fe=xe.rpx1<Qe.rpx1?{x0:xe.x0,x1:xe.x1,rpx0:0,rpx1:0}:{x0:Le,x1:Le,rpx0:xe.rpx0,rpx1:xe.rpx1}}else{var Ne,dt=l.getPtId(xe.parent);I.each(function(Ut){if(l.getPtId(Ut)===dt)return Ne=Ut});var Dt=Ne.children,Xt;Dt.forEach(function(Ut,Et){if(l.getPtId(Ut)===Pe)return Xt=Et});var Tt=Dt.length,zt=M(Ne.x0,Ne.x1);Fe={rpx0:Z,rpx1:Z,x0:zt(Xt/Tt),x1:zt((Xt+1)/Tt)}}return M(Ve,Fe)}function De(xe){var Pe=N[l.getPtId(xe)],Ve,Qe={x0:xe.x0,x1:xe.x1,rpx0:xe.rpx0,rpx1:xe.rpx1};if(Pe)Ve=Pe;else if(oe)if(xe.parent)if(pe){var Fe=(xe.x1>pe?2*Math.PI:0)+X;Ve={x0:Fe,x1:Fe}}else Ve={rpx0:Z,rpx1:Z},e.extendFlat(Ve,Ue(xe));else Ve={rpx0:0,rpx1:0};else Ve={x0:X,x1:X};return M(Ve,Qe)}function Oe(xe){var Pe=N[l.getPtId(xe)],Ve,Qe=xe.transform;if(Pe)Ve=Pe;else if(Ve={rpx1:xe.rpx1,transform:{textPosAngle:Qe.textPosAngle,scale:0,rotate:Qe.rotate,rCenter:Qe.rCenter,x:Qe.x,y:Qe.y}},oe)if(xe.parent)if(pe){var Fe=xe.x1>pe?2*Math.PI:0;Ve.x0=Ve.x1=Fe}else e.extendFlat(Ve,Ue(xe));else Ve.x0=Ve.x1=X;else Ve.x0=Ve.x1=X;var Le=M(Ve.transform.textPosAngle,xe.transform.textPosAngle),Ne=M(Ve.rpx1,xe.rpx1),dt=M(Ve.x0,xe.x0),Dt=M(Ve.x1,xe.x1),Xt=M(Ve.transform.scale,Qe.scale),Tt=M(Ve.transform.rotate,Qe.rotate),zt=Qe.rCenter===0?3:Ve.transform.rCenter===0?1/3:1,Ut=M(Ve.transform.rCenter,Qe.rCenter),Et=function(Mt){return Ut(Math.pow(Mt,zt))};return function(Mt){var rt=Ne(Mt),ct=dt(Mt),Ze=Dt(Mt),ke=Et(Mt),Ge=ie(rt,(ct+Ze)/2),Je=Le(Mt),it={pxmid:Ge,rpx1:rt,transform:{textPosAngle:Je,rCenter:ke,x:Qe.x,y:Qe.y}};return t(R.type,Qe,k),{transform:{targetX:ye(it),targetY:ue(it),scale:Xt(Mt),rotate:Tt(Mt),rCenter:ke}}}}function Ue(xe){var Pe=xe.parent,Ve=N[l.getPtId(Pe)],Qe={};if(Ve){var Fe=Pe.children,Le=Fe.indexOf(xe),Ne=Fe.length,dt=M(Ve.x0,Ve.x1);Qe.x0=dt(Le/Ne),Qe.x1=dt(Le/Ne)}else Qe.x0=Qe.x1=0;return Qe}}function s(m){return c.partition().size([2*Math.PI,m.height+1])(m)}ae.formatSliceLabel=function(m,u,L,S,k){var P=L.texttemplate,z=L.textinfo;if(!P&&(!z||z==="none"))return"";var I=k.separators,D=S[0],R=m.data.data,B=D.hierarchy,F=l.isHierarchyRoot(m),V=l.getParent(B,m),Y=l.getValue(m);if(!P){var K=z.split("+"),J=function(W){return K.indexOf(W)!==-1},G=[],Z;if(J("label")&&R.label&&G.push(R.label),R.hasOwnProperty("v")&&J("value")&&G.push(l.formatValue(R.v,I)),!F){J("current path")&&G.push(l.getPath(m.data));var re=0;J("percent parent")&&re++,J("percent entry")&&re++,J("percent root")&&re++;var se=re>1;if(re){var oe,N=function(W){Z=l.formatPercent(oe,I),se&&(Z+=" of "+W),G.push(Z)};J("percent parent")&&!F&&(oe=Y/l.getValue(V),N("parent")),J("percent entry")&&(oe=Y/l.getValue(u),N("entry")),J("percent root")&&(oe=Y/l.getValue(B),N("root"))}}return J("text")&&(Z=e.castOption(L,R.i,"text"),e.isValidTextValue(Z)&&G.push(Z)),G.join("<br>")}var U=e.castOption(L,R.i,"texttemplate");if(!U)return"";var q={};R.label&&(q.label=R.label),R.hasOwnProperty("v")&&(q.value=R.v,q.valueLabel=l.formatValue(R.v,I)),q.currentPath=l.getPath(m.data),F||(q.percentParent=Y/l.getValue(V),q.percentParentLabel=l.formatPercent(q.percentParent,I),q.parent=l.getPtLabel(V)),q.percentEntry=Y/l.getValue(u),q.percentEntryLabel=l.formatPercent(q.percentEntry,I),q.entry=l.getPtLabel(u),q.percentRoot=Y/l.getValue(B),q.percentRootLabel=l.formatPercent(q.percentRoot,I),q.root=l.getPtLabel(B),R.hasOwnProperty("color")&&(q.color=R.color);var Q=e.castOption(L,R.i,"text");return(e.isValidTextValue(Q)||Q==="")&&(q.text=Q),q.customdata=e.castOption(L,R.i,"customdata"),e.texttemplateString(U,q,k._d3locale,q,L._meta||{})};function w(m){return m.rpx0===0&&e.isFullCircle([m.x0,m.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(m.halfangle)),m.ring/2))}function b(m){return h(m.rpx1,m.transform.textPosAngle)}function h(m,u){return[m*Math.sin(u),-m*Math.cos(u)]}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"./constants":1052,"./fx":1054,"./helpers":1055,"./style":1060,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1060:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/color"),M=g("../../lib"),A=g("../bar/uniform_text").resizeText;function e(n){var t=n._fullLayout._sunburstlayer.selectAll(".trace");A(n,t,"sunburst"),t.each(function(r){var f=T.select(this),o=r[0],i=o.trace;f.style("opacity",i.opacity),f.selectAll("path.surface").each(function(p){T.select(this).call(a,p,i)})})}function a(n,t,r){var f=t.data.data,o=!t.children,i=f.i,p=M.castOption(r,i,"marker.line.color")||c.defaultLine,d=M.castOption(r,i,"marker.line.width")||0;n.style("stroke-width",d).call(c.fill,f.color).call(c.stroke,p).style("opacity",o?r.leaf.opacity:null)}ne.exports={style:e,styleOne:a}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1061:[function(g,ne,ae){var T=g("../../components/color"),c=g("../../components/colorscale/attributes"),M=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=g("../../plots/template_attributes").hovertemplateAttrs,e=g("../../plots/attributes"),a=g("../../lib/extend").extendFlat,n=g("../../plot_api/edit_types").overrideAll;function t(o){return{valType:"boolean",dflt:!1}}function r(o){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:t(),y:t(),z:t()},color:{valType:"color",dflt:T.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:T.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var f=ne.exports=n(a({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:A(),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},c("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:r(),y:r(),z:r()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:a({},c.zauto,{}),zmin:a({},c.zmin,{}),zmax:a({},c.zmax,{})},hoverinfo:a({},e.hoverinfo),showlegend:a({},e.showlegend,{dflt:!1})}),"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes",f.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1062:[function(g,ne,ae){var T=g("../../components/colorscale/calc");ne.exports=function(M,A){A.surfacecolor?T(M,A,{vals:A.surfacecolor,containerStr:"",cLetter:"c"}):T(M,A,{vals:A.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1063:[function(g,ne,ae){var T=g("../../../stackgl_modules").gl_surface3d,c=g("../../../stackgl_modules").ndarray,M=g("../../../stackgl_modules").ndarray_linear_interpolate.d2,A=g("../heatmap/interp2d"),e=g("../heatmap/find_empties"),a=g("../../lib").isArrayOrTypedArray,n=g("../../lib/gl_format_color").parseColorScale,t=g("../../lib/str2rgbarray"),r=g("../../components/colorscale").extractOpts;function f(S,k,P){this.scene=S,this.uid=P,this.surface=k,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var o=f.prototype;o.getXat=function(S,k,P,z){var I=a(this.data.x)?a(this.data.x[0])?this.data.x[k][S]:this.data.x[S]:S;return P===void 0?I:z.d2l(I,0,P)},o.getYat=function(S,k,P,z){var I=a(this.data.y)?a(this.data.y[0])?this.data.y[k][S]:this.data.y[k]:k;return P===void 0?I:z.d2l(I,0,P)},o.getZat=function(S,k,P,z){var I=this.data.z[k][S];return I===null&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[k][S]),P===void 0?I:z.d2l(I,0,P)},o.handlePick=function(S){if(S.object===this.surface){var k=(S.data.index[0]-1)/this.dataScaleX-1,P=(S.data.index[1]-1)/this.dataScaleY-1,z=Math.max(Math.min(Math.round(k),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(P),this.data._ylength-1),0);S.index=[z,I],S.traceCoordinate=[this.getXat(z,I),this.getYat(z,I),this.getZat(z,I)],S.dataCoordinate=[this.getXat(z,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(z,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(z,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var D=0;D<3;D++){var R=S.dataCoordinate[D];R!=null&&(S.dataCoordinate[D]*=this.scene.dataScale[D])}var B=this.data.hovertext||this.data.text;return Array.isArray(B)&&B[I]&&B[I][z]!==void 0?S.textLabel=B[I][z]:B?S.textLabel=B:S.textLabel="",S.data.dataCoordinate=S.dataCoordinate.slice(),this.surface.highlight(S.data),this.scene.glplot.spikes.position=S.dataCoordinate,!0}};function i(S){var k=S[0].rgb,P=S[S.length-1].rgb;return k[0]===P[0]&&k[1]===P[1]&&k[2]===P[2]&&k[3]===P[3]}var p=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function d(S,k){if(S<k)return 0;for(var P=0;Math.floor(S%k)===0;)S/=k,P++;return P}function y(S){for(var k=[],P=0;P<p.length;P++){var z=p[P];k.push(d(S,z))}return k}function v(S){for(var k=y(S),P=S,z=0;z<p.length;z++)if(k[z]>0){P=p[z];break}return P}function x(S,k){if(!(S<1||k<1)){for(var P=y(S),z=y(k),I=1,D=0;D<p.length;D++)I*=Math.pow(p[D],Math.max(P[D],z[D]));return I}}function l(S){if(S.length!==0){for(var k=1,P=0;P<S.length;P++)k=x(k,S[P]);return k}}o.calcXnums=function(S){var k,P=[];for(k=1;k<S;k++){var z=this.getXat(k-1,0),I=this.getXat(k,0);I!==z&&z!==void 0&&z!==null&&I!==void 0&&I!==null?P[k-1]=Math.abs(I-z):P[k-1]=0}var D=0;for(k=1;k<S;k++)D+=P[k-1];for(k=1;k<S;k++)P[k-1]===0?P[k-1]=1:P[k-1]=Math.round(D/P[k-1]);return P},o.calcYnums=function(S){var k,P=[];for(k=1;k<S;k++){var z=this.getYat(0,k-1),I=this.getYat(0,k);I!==z&&z!==void 0&&z!==null&&I!==void 0&&I!==null?P[k-1]=Math.abs(I-z):P[k-1]=0}var D=0;for(k=1;k<S;k++)D+=P[k-1];for(k=1;k<S;k++)P[k-1]===0?P[k-1]=1:P[k-1]=Math.round(D/P[k-1]);return P};var _=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],s=_[9],w=_[13];o.estimateScale=function(S,k){for(var P=k===0?this.calcXnums(S):this.calcYnums(S),z=1+l(P);z<s;)z*=2;for(;z>w;)z--,z/=v(z),z++,z<s&&(z=w);var I=Math.round(z/S);return I>1?I:1};function b(S,k,P){var z=P[8]+P[2]*k[0]+P[5]*k[1];return S[0]=(P[6]+P[0]*k[0]+P[3]*k[1])/z,S[1]=(P[7]+P[1]*k[0]+P[4]*k[1])/z,S}function h(S,k,P){return m(S,k,b,P),S}function m(S,k,P,z){for(var I=[0,0],D=S.shape[0],R=S.shape[1],B=0;B<D;B++)for(var F=0;F<R;F++)P(I,[B,F],z),S.set(B,F,M(k,I[0],I[1]));return S}o.refineCoords=function(S){for(var k=this.dataScaleX,P=this.dataScaleY,z=S[0].shape[0],I=S[0].shape[1],D=Math.floor(S[0].shape[0]*k+1)|0,R=Math.floor(S[0].shape[1]*P+1)|0,B=1+z+1,F=1+I+1,V=c(new Float32Array(B*F),[B,F]),Y=[1/k,0,0,0,1/P,0,0,0,1],K=0;K<S.length;++K){this.surface.padField(V,S[K]);var J=c(new Float32Array(D*R),[D,R]);h(J,V,Y),S[K]=J}};function u(S,k){for(var P=!1,z=0;z<S.length;z++)if(k===S[z]){P=!0;break}P===!1&&S.push(k)}o.setContourLevels=function(){var S=[[],[],[]],k=[!1,!1,!1],P=!1,z,I,D;for(z=0;z<3;++z)if(this.showContour[z]&&(P=!0,this.contourSize[z]>0&&this.contourStart[z]!==null&&this.contourEnd[z]!==null&&this.contourEnd[z]>this.contourStart[z]))for(k[z]=!0,I=this.contourStart[z];I<this.contourEnd[z];I+=this.contourSize[z])D=I*this.scene.dataScale[z],u(S[z],D);if(P){var R=[[],[],[]];for(z=0;z<3;++z)this.showContour[z]&&(R[z]=k[z]?S[z]:this.scene.contourLevels[z]);this.surface.update({levels:R})}},o.update=function(S){var k=this.scene,P=k.fullSceneLayout,z=this.surface,I=n(S),D=k.dataScale,R=S.z[0].length,B=S._ylength,F=k.contourLevels;this.data=S;var V,Y,K,J,G=[];for(V=0;V<3;V++)for(G[V]=[],Y=0;Y<R;Y++)G[V][Y]=[];for(Y=0;Y<R;Y++)for(K=0;K<B;K++)G[0][Y][K]=this.getXat(Y,K,S.xcalendar,P.xaxis),G[1][Y][K]=this.getYat(Y,K,S.ycalendar,P.yaxis),G[2][Y][K]=this.getZat(Y,K,S.zcalendar,P.zaxis);if(S.connectgaps)for(S._emptypoints=e(G[2]),A(G[2],S._emptypoints),S._interpolatedZ=[],Y=0;Y<R;Y++)for(S._interpolatedZ[Y]=[],K=0;K<B;K++)S._interpolatedZ[Y][K]=G[2][Y][K];for(V=0;V<3;V++)for(Y=0;Y<R;Y++)for(K=0;K<B;K++)J=G[V][Y][K],J==null?G[V][Y][K]=NaN:J=G[V][Y][K]*=D[V];for(V=0;V<3;V++)for(Y=0;Y<R;Y++)for(K=0;K<B;K++)J=G[V][Y][K],J!=null&&(this.minValues[V]>J&&(this.minValues[V]=J),this.maxValues[V]<J&&(this.maxValues[V]=J));for(V=0;V<3;V++)this.objectOffset[V]=.5*(this.minValues[V]+this.maxValues[V]);for(V=0;V<3;V++)for(Y=0;Y<R;Y++)for(K=0;K<B;K++)J=G[V][Y][K],J!=null&&(G[V][Y][K]-=this.objectOffset[V]);var Z=[c(new Float32Array(R*B),[R,B]),c(new Float32Array(R*B),[R,B]),c(new Float32Array(R*B),[R,B])];for(V=0;V<3;V++)for(Y=0;Y<R;Y++)for(K=0;K<B;K++)Z[V].set(Y,K,G[V][Y][K]);G=[];var re={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!S.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:S.opacityscale,opacity:S.opacity},se=r(S);if(re.intensityBounds=[se.min,se.max],S.surfacecolor){var oe=c(new Float32Array(R*B),[R,B]);for(Y=0;Y<R;Y++)for(K=0;K<B;K++)oe.set(Y,K,S.surfacecolor[K][Y]);Z.push(oe)}else re.intensityBounds[0]*=D[2],re.intensityBounds[1]*=D[2];(w<Z[0].shape[0]||w<Z[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(Z[0].shape[0],0),this.dataScaleY=this.estimateScale(Z[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(Z)),S.surfacecolor&&(re.intensity=Z.pop());var N=[!0,!0,!0],U=["x","y","z"];for(V=0;V<3;++V){var q=S.contours[U[V]];N[V]=q.highlight,re.showContour[V]=q.show||q.highlight,!!re.showContour[V]&&(re.contourProject[V]=[q.project.x,q.project.y,q.project.z],q.show?(this.showContour[V]=!0,re.levels[V]=F[V],z.highlightColor[V]=re.contourColor[V]=t(q.color),q.usecolormap?z.highlightTint[V]=re.contourTint[V]=0:z.highlightTint[V]=re.contourTint[V]=1,re.contourWidth[V]=q.width,this.contourStart[V]=q.start,this.contourEnd[V]=q.end,this.contourSize[V]=q.size):(this.showContour[V]=!1,this.contourStart[V]=null,this.contourEnd[V]=null,this.contourSize[V]=0),q.highlight&&(re.dynamicColor[V]=t(q.highlightcolor),re.dynamicWidth[V]=q.highlightwidth))}i(I)&&(re.vertexColor=!0),re.objectOffset=this.objectOffset,re.coords=Z,z.update(re),z.visible=S.visible,z.enableDynamic=N,z.enableHighlight=N,z.snapToData=!0,"lighting"in S&&(z.ambientLight=S.lighting.ambient,z.diffuseLight=S.lighting.diffuse,z.specularLight=S.lighting.specular,z.roughness=S.lighting.roughness,z.fresnel=S.lighting.fresnel),"lightposition"in S&&(z.lightPosition=[S.lightposition.x,S.lightposition.y,S.lightposition.z])},o.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function L(S,k){var P=S.glplot.gl,z=T({gl:P}),I=new f(S,z,k.uid);return z._trace=I,I.update(k),S.glplot.add(z),I}ne.exports=L},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1064:[function(g,ne,ae){var T=g("../../registry"),c=g("../../lib"),M=g("../../components/colorscale/defaults"),A=g("./attributes"),e=.1;function a(o,i){for(var p=[],d=32,y=0;y<d;y++){var v=y/(d-1),x=i+(1-i)*(1-Math.pow(Math.sin(o*v*Math.PI),2));p.push([v,Math.max(0,Math.min(1,x))])}return p}function n(o){var i=0;if(!Array.isArray(o)||o.length<2||!o[0]||!o[o.length-1]||+o[0][0]!=0||+o[o.length-1][0]!=1)return!1;for(var p=0;p<o.length;p++){var d=o[p];if(d.length!==2||+d[0]<i)return!1;i=+d[0]}return!0}function t(o,i,p,d){var y,v;function x(S,k){return c.coerce(o,i,A,S,k)}var l=x("x"),_=x("y"),s=x("z");if(!s||!s.length||(l?l.length<1:!1)||(_?_.length<1:!1)){i.visible=!1;return}i._xlength=Array.isArray(l)&&c.isArrayOrTypedArray(l[0])?s.length:s[0].length,i._ylength=s.length;var w=T.getComponentMethod("calendars","handleTraceDefaults");w(o,i,["x","y","z"],d),x("text"),x("hovertext"),x("hovertemplate"),x("xhoverformat"),x("yhoverformat"),x("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(S){x(S)});var b=x("surfacecolor"),h=["x","y","z"];for(y=0;y<3;++y){var m="contours."+h[y],u=x(m+".show"),L=x(m+".highlight");if(u||L)for(v=0;v<3;++v)x(m+".project."+h[v]);u&&(x(m+".color"),x(m+".width"),x(m+".usecolormap")),L&&(x(m+".highlightcolor"),x(m+".highlightwidth")),x(m+".start"),x(m+".end"),x(m+".size")}b||(f(o,"zmin","cmin"),f(o,"zmax","cmax"),f(o,"zauto","cauto")),M(o,i,d,x,{prefix:"",cLetter:"c"}),r(o,i,d,x),i._length=null}function r(o,i,p,d){var y=d("opacityscale");y==="max"?i.opacityscale=[[0,e],[1,1]]:y==="min"?i.opacityscale=[[0,1],[1,e]]:y==="extremes"?i.opacityscale=a(1,e):n(y)||(i.opacityscale=void 0)}function f(o,i,p){i in o&&!(p in o)&&(o[p]=o[i])}ne.exports={supplyDefaults:t,opacityscaleDefaults:r}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1061}],1065:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:g("./calc"),plot:g("./convert"),moduleType:"trace",name:"surface",basePlotModule:g("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1061,"./calc":1062,"./convert":1063,"./defaults":1064}],1066:[function(g,ne,ae){var T=g("../../components/annotations/attributes"),c=g("../../lib/extend").extendFlat,M=g("../../plot_api/edit_types").overrideAll,A=g("../../plots/font_attributes"),e=g("../../plots/domain").attributes,a=g("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,n=ne.exports=M({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:c({},T.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:c({},A({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:c({},T.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:c({},A({arrayOk:!0}))}},"calc","from-root");n.transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1067:[function(g,ne,ae){var T=g("../../plots/get_data").getModuleCalcData,c=g("./plot"),M="table";ae.name=M,ae.plot=function(A){var e=T(A.calcdata,M)[0];e.length&&c(A,e)},ae.clean=function(A,e,a,n){var t=n._has&&n._has(M),r=e._has&&e._has(M);t&&!r&&n._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1074}],1068:[function(g,ne,ae){var T=g("../../lib/gup").wrap;ne.exports=function(){return T({})}},{"../../lib/gup":500}],1069:[function(g,ne,ae){ne.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1070:[function(g,ne,ae){var T=g("./constants"),c=g("../../lib/extend").extendFlat,M=g("fast-isnumeric");ne.exports=function(p,d){var y=a(d.cells.values),v=function(Y){return Y.slice(d.header.values.length,Y.length)},x=a(d.header.values);x.length&&!x[0].length&&(x[0]=[""],x=a(x));var l=x.concat(v(y).map(function(){return n((x[0]||[""]).length)})),_=d.domain,s=Math.floor(p._fullLayout._size.w*(_.x[1]-_.x[0])),w=Math.floor(p._fullLayout._size.h*(_.y[1]-_.y[0])),b=d.header.values.length?l[0].map(function(){return d.header.height}):[T.emptyHeaderHeight],h=y.length?y[0].map(function(){return d.cells.height}):[],m=b.reduce(e,0),u=w-m,L=u+T.uplift,S=f(h,L),k=f(b,m),P=r(k,[]),z=r(S,P),I={},D=d._fullInput.columnorder.concat(v(y.map(function(Y,K){return K}))),R=l.map(function(Y,K){var J=Array.isArray(d.columnwidth)?d.columnwidth[Math.min(K,d.columnwidth.length-1)]:d.columnwidth;return M(J)?Number(J):1}),B=R.reduce(e,0);R=R.map(function(Y){return Y/B*s});var F=Math.max(A(d.header.line.width),A(d.cells.line.width)),V={key:d.uid+p._context.staticPlot,translateX:_.x[0]*p._fullLayout._size.w,translateY:p._fullLayout._size.h*(1-_.y[1]),size:p._fullLayout._size,width:s,maxLineWidth:F,height:w,columnOrder:D,groupHeight:w,rowBlocks:z,headerRowBlocks:P,scrollY:0,cells:c({},d.cells,{values:y}),headerCells:c({},d.header,{values:l}),gdColumns:l.map(function(Y){return Y[0]}),gdColumnsOriginalOrder:l.map(function(Y){return Y[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:l.map(function(Y,K){var J=I[Y];I[Y]=(J||0)+1;var G=Y+"__"+I[Y];return{key:G,label:Y,specIndex:K,xIndex:D[K],xScale:t,x:void 0,calcdata:void 0,columnWidth:R[K]}})};return V.columns.forEach(function(Y){Y.calcdata=V,Y.x=t(Y)}),V};function A(i){if(Array.isArray(i)){for(var p=0,d=0;d<i.length;d++)p=Math.max(p,A(i[d]));return p}return i}function e(i,p){return i+p}function a(i){var p=i.slice(),d=1/0,y=0,v;for(v=0;v<p.length;v++)Array.isArray(p[v])||(p[v]=[p[v]]),d=Math.min(d,p[v].length),y=Math.max(y,p[v].length);if(d!==y)for(v=0;v<p.length;v++){var x=y-p[v].length;x&&(p[v]=p[v].concat(n(x)))}return p}function n(i){for(var p=new Array(i),d=0;d<i;d++)p[d]="";return p}function t(i){return i.calcdata.columns.reduce(function(p,d){return d.xIndex<i.xIndex?p+d.columnWidth:p},0)}function r(i,p){var d=Object.keys(i);return d.map(function(y){return c({},i[y],{auxiliaryBlocks:p})})}function f(i,p){for(var d={},y,v=0,x=0,l=o(),_=0,s=0,w=0;w<i.length;w++)y=i[w],l.rows.push({rowIndex:w,rowHeight:y}),x+=y,(x>=p||w===i.length-1)&&(d[v]=l,l.key=s++,l.firstRowIndex=_,l.lastRowIndex=w,l=o(),v+=x,_=w+1,x=0);return d}function o(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":493,"./constants":1069,"fast-isnumeric":190}],1071:[function(g,ne,ae){var T=g("../../lib/extend").extendFlat;ae.splitToPanels=function(M){var A=[0,0],e=T({},M,{key:"header",type:"header",page:0,prevPages:A,currentRepaint:[null,null],dragHandle:!0,values:M.calcdata.headerCells.values[M.specIndex],rowBlocks:M.calcdata.headerRowBlocks,calcdata:T({},M.calcdata,{cells:M.calcdata.headerCells})}),a=T({},M,{key:"cells1",type:"cells",page:0,prevPages:A,currentRepaint:[null,null],dragHandle:!1,values:M.calcdata.cells.values[M.specIndex],rowBlocks:M.calcdata.rowBlocks}),n=T({},M,{key:"cells2",type:"cells",page:1,prevPages:A,currentRepaint:[null,null],dragHandle:!1,values:M.calcdata.cells.values[M.specIndex],rowBlocks:M.calcdata.rowBlocks});return[a,n,e]},ae.splitToCells=function(M){var A=c(M);return(M.values||[]).slice(A[0],A[1]).map(function(e,a){var n=typeof e=="string"&&e.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:a+n,key:A[0]+a,column:M,calcdata:M.calcdata,page:M.page,rowBlocks:M.rowBlocks,value:e}})};function c(M){var A=M.rowBlocks[M.page],e=A?A.rows[0].rowIndex:0,a=A?e+A.rows.length:0;return[e,a]}},{"../../lib/extend":493}],1072:[function(g,ne,ae){var T=g("../../lib"),c=g("./attributes"),M=g("../../plots/domain").defaults;function A(e,a){for(var n=e.columnorder||[],t=e.header.values.length,r=n.slice(0,t),f=r.slice().sort(function(p,d){return p-d}),o=r.map(function(p){return f.indexOf(p)}),i=o.length;i<t;i++)o.push(i);a("columnorder",o)}ne.exports=function(a,n,t,r){function f(o,i){return T.coerce(a,n,c,o,i)}M(n,r,f),f("columnwidth"),f("header.values"),f("header.format"),f("header.align"),f("header.prefix"),f("header.suffix"),f("header.height"),f("header.line.width"),f("header.line.color"),f("header.fill.color"),T.coerceFont(f,"header.font",T.extendFlat({},r.font)),A(n,f),f("cells.values"),f("cells.format"),f("cells.align"),f("cells.prefix"),f("cells.suffix"),f("cells.height"),f("cells.line.width"),f("cells.line.color"),f("cells.fill.color"),T.coerceFont(f,"cells.font",T.extendFlat({},r.font)),n._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1066}],1073:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),plot:g("./plot"),moduleType:"trace",name:"table",basePlotModule:g("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1066,"./base_plot":1067,"./calc":1068,"./defaults":1072,"./plot":1074}],1074:[function(g,ne,ae){var T=g("./constants"),c=g("@plotly/d3"),M=g("../../lib"),A=M.numberFormat,e=g("../../lib/gup"),a=g("../../components/drawing"),n=g("../../lib/svg_text_utils"),t=g("../../lib").raiseToTop,r=g("../../lib").strTranslate,f=g("../../lib").cancelTransition,o=g("./data_preparation_helper"),i=g("./data_split_helpers"),p=g("../../components/color");ne.exports=function(te,ee){var ie=!te._context.staticPlot,le=te._fullLayout._paper.selectAll("."+T.cn.table).data(ee.map(function(Fe){var Le=e.unwrap(Fe),Ne=Le.trace;return o(te,Ne)}),e.keyFun);le.exit().remove(),le.enter().append("g").classed(T.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),le.attr("width",function(Fe){return Fe.width+Fe.size.l+Fe.size.r}).attr("height",function(Fe){return Fe.height+Fe.size.t+Fe.size.b}).attr("transform",function(Fe){return r(Fe.translateX,Fe.translateY)});var ye=le.selectAll("."+T.cn.tableControlView).data(e.repeat,e.keyFun),ue=ye.enter().append("g").classed(T.cn.tableControlView,!0).style("box-sizing","content-box");if(ie){var pe="onwheel"in document?"wheel":"mousewheel";ue.on("mousemove",function(Fe){ye.filter(function(Le){return Fe===Le}).call(l,te)}).on(pe,function(Fe){if(!Fe.scrollbarState.wheeling){Fe.scrollbarState.wheeling=!0;var Le=Fe.scrollY+c.event.deltaY,Ne=J(te,ye,null,Le)(Fe);Ne||(c.event.stopPropagation(),c.event.preventDefault()),Fe.scrollbarState.wheeling=!1}}).call(l,te,!0)}ye.attr("transform",function(Fe){return r(Fe.size.l,Fe.size.t)});var ge=ye.selectAll("."+T.cn.scrollBackground).data(e.repeat,e.keyFun);ge.enter().append("rect").classed(T.cn.scrollBackground,!0).attr("fill","none"),ge.attr("width",function(Fe){return Fe.width}).attr("height",function(Fe){return Fe.height}),ye.each(function(Fe){a.setClipUrl(c.select(this),y(te,Fe),te)});var Te=ye.selectAll("."+T.cn.yColumn).data(function(Fe){return Fe.columns},e.keyFun);Te.enter().append("g").classed(T.cn.yColumn,!0),Te.exit().remove(),Te.attr("transform",function(Fe){return r(Fe.x,0)}),ie&&Te.call(c.behavior.drag().origin(function(Fe){var Le=c.select(this);return R(Le,Fe,-T.uplift),t(this),Fe.calcdata.columnDragInProgress=!0,l(ye.filter(function(Ne){return Fe.calcdata.key===Ne.key}),te),Fe}).on("drag",function(Fe){var Le=c.select(this),Ne=function(Xt){return(Fe===Xt?c.event.x:Xt.x)+Xt.columnWidth/2};Fe.x=Math.max(-T.overdrag,Math.min(Fe.calcdata.width+T.overdrag-Fe.columnWidth,c.event.x));var dt=x(Te).filter(function(Xt){return Xt.calcdata.key===Fe.calcdata.key}),Dt=dt.sort(function(Xt,Tt){return Ne(Xt)-Ne(Tt)});Dt.forEach(function(Xt,Tt){Xt.xIndex=Tt,Xt.x=Fe===Xt?Xt.x:Xt.xScale(Xt)}),Te.filter(function(Xt){return Fe!==Xt}).transition().ease(T.transitionEase).duration(T.transitionDuration).attr("transform",function(Xt){return r(Xt.x,0)}),Le.call(f).attr("transform",r(Fe.x,-T.uplift))}).on("dragend",function(Fe){var Le=c.select(this),Ne=Fe.calcdata;Fe.x=Fe.xScale(Fe),Fe.calcdata.columnDragInProgress=!1,R(Le,Fe,0),I(te,Ne,Ne.columns.map(function(dt){return dt.xIndex}))})),Te.each(function(Fe){a.setClipUrl(c.select(this),v(te,Fe),te)});var _e=Te.selectAll("."+T.cn.columnBlock).data(i.splitToPanels,e.keyFun);_e.enter().append("g").classed(T.cn.columnBlock,!0).attr("id",function(Fe){return Fe.key}),_e.style("cursor",function(Fe){return Fe.dragHandle?"ew-resize":Fe.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var De=_e.filter(F),Oe=_e.filter(B);ie&&Oe.call(c.behavior.drag().origin(function(Fe){return c.event.stopPropagation(),Fe}).on("drag",J(te,ye,-1)).on("dragend",function(){})),_(te,ye,De,_e),_(te,ye,Oe,_e);var Ue=ye.selectAll("."+T.cn.scrollAreaClip).data(e.repeat,e.keyFun);Ue.enter().append("clipPath").classed(T.cn.scrollAreaClip,!0).attr("id",function(Fe){return y(te,Fe)});var xe=Ue.selectAll("."+T.cn.scrollAreaClipRect).data(e.repeat,e.keyFun);xe.enter().append("rect").classed(T.cn.scrollAreaClipRect,!0).attr("x",-T.overdrag).attr("y",-T.uplift).attr("fill","none"),xe.attr("width",function(Fe){return Fe.width+2*T.overdrag}).attr("height",function(Fe){return Fe.height+T.uplift});var Pe=Te.selectAll("."+T.cn.columnBoundary).data(e.repeat,e.keyFun);Pe.enter().append("g").classed(T.cn.columnBoundary,!0);var Ve=Te.selectAll("."+T.cn.columnBoundaryClippath).data(e.repeat,e.keyFun);Ve.enter().append("clipPath").classed(T.cn.columnBoundaryClippath,!0),Ve.attr("id",function(Fe){return v(te,Fe)});var Qe=Ve.selectAll("."+T.cn.columnBoundaryRect).data(e.repeat,e.keyFun);Qe.enter().append("rect").classed(T.cn.columnBoundaryRect,!0).attr("fill","none"),Qe.attr("width",function(Fe){return Fe.columnWidth+2*d(Fe)}).attr("height",function(Fe){return Fe.calcdata.height+2*d(Fe)+T.uplift}).attr("x",function(Fe){return-d(Fe)}).attr("y",function(Fe){return-d(Fe)}),K(null,Oe,ye)};function d(X){return Math.ceil(X.calcdata.maxLineWidth/2)}function y(X,te){return"clip"+X._fullLayout._uid+"_scrollAreaBottomClip_"+te.key}function v(X,te){return"clip"+X._fullLayout._uid+"_columnBoundaryClippath_"+te.calcdata.key+"_"+te.specIndex}function x(X){return[].concat.apply([],X.map(function(te){return te})).map(function(te){return te.__data__})}function l(X,te,ee){function ie(Te){var _e=Te.rowBlocks;return N(_e,_e.length-1)+(_e.length?U(_e[_e.length-1],1/0):1)}var le=X.selectAll("."+T.cn.scrollbarKit).data(e.repeat,e.keyFun);le.enter().append("g").classed(T.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),le.each(function(Te){var _e=Te.scrollbarState;_e.totalHeight=ie(Te),_e.scrollableAreaHeight=Te.groupHeight-V(Te),_e.currentlyVisibleHeight=Math.min(_e.totalHeight,_e.scrollableAreaHeight),_e.ratio=_e.currentlyVisibleHeight/_e.totalHeight,_e.barLength=Math.max(_e.ratio*_e.currentlyVisibleHeight,T.goldenRatio*T.scrollbarWidth),_e.barWiggleRoom=_e.currentlyVisibleHeight-_e.barLength,_e.wiggleRoom=Math.max(0,_e.totalHeight-_e.scrollableAreaHeight),_e.topY=_e.barWiggleRoom===0?0:Te.scrollY/_e.wiggleRoom*_e.barWiggleRoom,_e.bottomY=_e.topY+_e.barLength,_e.dragMultiplier=_e.wiggleRoom/_e.barWiggleRoom}).attr("transform",function(Te){var _e=Te.width+T.scrollbarWidth/2+T.scrollbarOffset;return r(_e,V(Te))});var ye=le.selectAll("."+T.cn.scrollbar).data(e.repeat,e.keyFun);ye.enter().append("g").classed(T.cn.scrollbar,!0);var ue=ye.selectAll("."+T.cn.scrollbarSlider).data(e.repeat,e.keyFun);ue.enter().append("g").classed(T.cn.scrollbarSlider,!0),ue.attr("transform",function(Te){return r(0,Te.scrollbarState.topY||0)});var pe=ue.selectAll("."+T.cn.scrollbarGlyph).data(e.repeat,e.keyFun);pe.enter().append("line").classed(T.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",T.scrollbarWidth).attr("stroke-linecap","round").attr("y1",T.scrollbarWidth/2),pe.attr("y2",function(Te){return Te.scrollbarState.barLength-T.scrollbarWidth/2}).attr("stroke-opacity",function(Te){return Te.columnDragInProgress||!Te.scrollbarState.barWiggleRoom||ee?0:.4}),pe.transition().delay(0).duration(0),pe.transition().delay(T.scrollbarHideDelay).duration(T.scrollbarHideDuration).attr("stroke-opacity",0);var ge=ye.selectAll("."+T.cn.scrollbarCaptureZone).data(e.repeat,e.keyFun);ge.enter().append("line").classed(T.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",T.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(Te){var _e=c.event.y,De=this.getBoundingClientRect(),Oe=Te.scrollbarState,Ue=_e-De.top,xe=c.scale.linear().domain([0,Oe.scrollableAreaHeight]).range([0,Oe.totalHeight]).clamp(!0);Oe.topY<=Ue&&Ue<=Oe.bottomY||J(te,X,null,xe(Ue-Oe.barLength/2))(Te)}).call(c.behavior.drag().origin(function(Te){return c.event.stopPropagation(),Te.scrollbarState.scrollbarScrollInProgress=!0,Te}).on("drag",J(te,X)).on("dragend",function(){})),ge.attr("y2",function(Te){return Te.scrollbarState.scrollableAreaHeight}),te._context.staticPlot&&(pe.remove(),ge.remove())}function _(X,te,ee,ie){var le=s(ee),ye=w(le);u(ye);var ue=b(ye);S(ue);var pe=m(ye),ge=h(pe);L(ge),k(ge,te,ie,X),oe(ye)}function s(X){var te=X.selectAll("."+T.cn.columnCells).data(e.repeat,e.keyFun);return te.enter().append("g").classed(T.cn.columnCells,!0),te.exit().remove(),te}function w(X){var te=X.selectAll("."+T.cn.columnCell).data(i.splitToCells,function(ee){return ee.keyWithinBlock});return te.enter().append("g").classed(T.cn.columnCell,!0),te.exit().remove(),te}function b(X){var te=X.selectAll("."+T.cn.cellRect).data(e.repeat,function(ee){return ee.keyWithinBlock});return te.enter().append("rect").classed(T.cn.cellRect,!0),te}function h(X){var te=X.selectAll("."+T.cn.cellText).data(e.repeat,function(ee){return ee.keyWithinBlock});return te.enter().append("text").classed(T.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){c.event.stopPropagation()}),te}function m(X){var te=X.selectAll("."+T.cn.cellTextHolder).data(e.repeat,function(ee){return ee.keyWithinBlock});return te.enter().append("g").classed(T.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),te}function u(X){X.each(function(te,ee){var ie=te.calcdata.cells.font,le=te.column.specIndex,ye={size:D(ie.size,le,ee),color:D(ie.color,le,ee),family:D(ie.family,le,ee)};te.rowNumber=te.key,te.align=D(te.calcdata.cells.align,le,ee),te.cellBorderWidth=D(te.calcdata.cells.line.width,le,ee),te.font=ye})}function L(X){X.each(function(te){a.font(c.select(this),te.font)})}function S(X){X.attr("width",function(te){return te.column.columnWidth}).attr("stroke-width",function(te){return te.cellBorderWidth}).each(function(te){var ee=c.select(this);p.stroke(ee,D(te.calcdata.cells.line.color,te.column.specIndex,te.rowNumber)),p.fill(ee,D(te.calcdata.cells.fill.color,te.column.specIndex,te.rowNumber))})}function k(X,te,ee,ie){X.text(function(le){var ye=le.column.specIndex,ue=le.rowNumber,pe=le.value,ge=typeof pe=="string",Te=ge&&pe.match(/<br>/i),_e=!ge||Te;le.mayHaveMarkup=ge&&pe.match(/[<&>]/);var De=P(pe);le.latex=De;var Oe=De?"":D(le.calcdata.cells.prefix,ye,ue)||"",Ue=De?"":D(le.calcdata.cells.suffix,ye,ue)||"",xe=De?null:D(le.calcdata.cells.format,ye,ue)||null,Pe=Oe+(xe?A(xe)(le.value):le.value)+Ue,Ve;le.wrappingNeeded=!le.wrapped&&!_e&&!De&&(Ve=z(Pe)),le.cellHeightMayIncrease=Te||De||le.mayHaveMarkup||(Ve===void 0?z(Pe):Ve),le.needsConvertToTspans=le.mayHaveMarkup||le.wrappingNeeded||le.latex;var Qe;if(le.wrappingNeeded){var Fe=T.wrapSplitCharacter===" "?Pe.replace(/<a href=/ig,"<a_href="):Pe,Le=Fe.split(T.wrapSplitCharacter),Ne=T.wrapSplitCharacter===" "?Le.map(function(dt){return dt.replace(/<a_href=/ig,"<a href=")}):Le;le.fragments=Ne.map(function(dt){return{text:dt,width:null}}),le.fragments.push({fragment:T.wrapSpacer,width:null}),Qe=Ne.join(T.lineBreaker)+T.lineBreaker+T.wrapSpacer}else delete le.fragments,Qe=Pe;return Qe}).attr("dy",function(le){return le.needsConvertToTspans?0:"0.75em"}).each(function(le){var ye=this,ue=c.select(ye),pe=le.wrappingNeeded?Z:re;le.needsConvertToTspans?n.convertToTspans(ue,ie,pe(ee,ye,te,ie,le)):c.select(ye.parentNode).attr("transform",function(ge){return r(se(ge),T.cellPad)}).attr("text-anchor",function(ge){return{left:"start",center:"middle",right:"end"}[ge.align]})})}function P(X){return typeof X=="string"&&X.match(T.latexCheck)}function z(X){return X.indexOf(T.wrapSplitCharacter)!==-1}function I(X,te,ee){var ie=te.gdColumnsOriginalOrder;te.gdColumns.sort(function(le,ye){return ee[ie.indexOf(le)]-ee[ie.indexOf(ye)]}),te.columnorder=ee,X.emit("plotly_restyle")}function D(X,te,ee){if(Array.isArray(X)){var ie=X[Math.min(te,X.length-1)];return Array.isArray(ie)?ie[Math.min(ee,ie.length-1)]:ie}else return X}function R(X,te,ee){X.transition().ease(T.releaseTransitionEase).duration(T.releaseTransitionDuration).attr("transform",r(te.x,ee))}function B(X){return X.type==="cells"}function F(X){return X.type==="header"}function V(X){var te=X.rowBlocks.length?X.rowBlocks[0].auxiliaryBlocks:[];return te.reduce(function(ee,ie){return ee+U(ie,1/0)},0)}function Y(X,te,ee){for(var ie=[],le=0,ye=0;ye<X.length;ye++){for(var ue=X[ye],pe=ue.rows,ge=0,Te=0;Te<pe.length;Te++)ge+=pe[Te].rowHeight;ue.allRowsHeight=ge;var _e=le+ge,De=te,Oe=De+ee;De<_e&&Oe>le&&ie.push(ye),le+=ge}return ie}function K(X,te,ee){var ie=x(te)[0];if(ie!==void 0){var le=ie.rowBlocks,ye=ie.calcdata,ue=N(le,le.length),pe=ie.calcdata.groupHeight-V(ie),ge=ye.scrollY=Math.max(0,Math.min(ue-pe,ye.scrollY)),Te=Y(le,ge,pe);Te.length===1&&(Te[0]===le.length-1?Te.unshift(Te[0]-1):Te.push(Te[0]+1)),Te[0]%2&&Te.reverse(),te.each(function(_e,De){_e.page=Te[De],_e.scrollY=ge}),te.attr("transform",function(_e){var De=N(_e.rowBlocks,_e.page)-_e.scrollY;return r(0,De)}),X&&(G(X,ee,te,Te,ie.prevPages,ie,0),G(X,ee,te,Te,ie.prevPages,ie,1),l(ee,X))}}function J(X,te,ee,ie){return function(ye){var ue=ye.calcdata?ye.calcdata:ye,pe=te.filter(function(De){return ue.key===De.key}),ge=ee||ue.scrollbarState.dragMultiplier,Te=ue.scrollY;ue.scrollY=ie===void 0?ue.scrollY+ge*c.event.dy:ie;var _e=pe.selectAll("."+T.cn.yColumn).selectAll("."+T.cn.columnBlock).filter(B);return K(X,_e,pe),ue.scrollY===Te}}function G(X,te,ee,ie,le,ye,ue){var pe=ie[ue]!==le[ue];pe&&(clearTimeout(ye.currentRepaint[ue]),ye.currentRepaint[ue]=setTimeout(function(){var ge=ee.filter(function(Te,_e){return _e===ue&&ie[_e]!==le[_e]});_(X,te,ge,ee),le[ue]=ie[ue]}))}function Z(X,te,ee,ie){return function(){var ye=c.select(te.parentNode);ye.each(function(ue){var pe=ue.fragments;ye.selectAll("tspan.line").each(function(Pe,Ve){pe[Ve].width=this.getComputedTextLength()});var ge=pe[pe.length-1].width,Te=pe.slice(0,-1),_e=[],De,Oe,Ue=0,xe=ue.column.columnWidth-2*T.cellPad;for(ue.value="";Te.length;)De=Te.shift(),Oe=De.width+ge,Ue+Oe>xe&&(ue.value+=_e.join(T.wrapSpacer)+T.lineBreaker,_e=[],Ue=0),_e.push(De.text),Ue+=Oe;Ue&&(ue.value+=_e.join(T.wrapSpacer)),ue.wrapped=!0}),ye.selectAll("tspan.line").remove(),k(ye.select("."+T.cn.cellText),ee,X,ie),c.select(te.parentNode.parentNode).call(oe)}}function re(X,te,ee,ie,le){return function(){if(!le.settledY){var ue=c.select(te.parentNode),pe=Q(le),ge=le.key-pe.firstRowIndex,Te=pe.rows[ge].rowHeight,_e=le.cellHeightMayIncrease?te.parentNode.getBoundingClientRect().height+2*T.cellPad:Te,De=Math.max(_e,Te),Oe=De-pe.rows[ge].rowHeight;Oe&&(pe.rows[ge].rowHeight=De,X.selectAll("."+T.cn.columnCell).call(oe),K(null,X.filter(B),0),l(ee,ie,!0)),ue.attr("transform",function(){var Ue=this,xe=Ue.parentNode,Pe=xe.getBoundingClientRect(),Ve=c.select(Ue.parentNode).select("."+T.cn.cellRect).node().getBoundingClientRect(),Qe=Ue.transform.baseVal.consolidate(),Fe=Ve.top-Pe.top+(Qe?Qe.matrix.f:T.cellPad);return r(se(le,c.select(Ue.parentNode).select("."+T.cn.cellTextHolder).node().getBoundingClientRect().width),Fe)}),le.settledY=!0}}}function se(X,te){switch(X.align){case"left":return T.cellPad;case"right":return X.column.columnWidth-(te||0)-T.cellPad;case"center":return(X.column.columnWidth-(te||0))/2;default:return T.cellPad}}function oe(X){X.attr("transform",function(te){var ee=te.rowBlocks[0].auxiliaryBlocks.reduce(function(ue,pe){return ue+U(pe,1/0)},0),ie=Q(te),le=U(ie,te.key),ye=le+ee;return r(0,ye)}).selectAll("."+T.cn.cellRect).attr("height",function(te){return W(Q(te),te.key).rowHeight})}function N(X,te){for(var ee=0,ie=te-1;ie>=0;ie--)ee+=q(X[ie]);return ee}function U(X,te){for(var ee=0,ie=0;ie<X.rows.length&&X.rows[ie].rowIndex<te;ie++)ee+=X.rows[ie].rowHeight;return ee}function q(X){var te=X.allRowsHeight;if(te!==void 0)return te;for(var ee=0,ie=0;ie<X.rows.length;ie++)ee+=X.rows[ie].rowHeight;return X.allRowsHeight=ee,ee}function Q(X){return X.rowBlocks[X.page]}function W(X,te){return X.rows[te-X.firstRowIndex]}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1069,"./data_preparation_helper":1070,"./data_split_helpers":1071,"@plotly/d3":58}],1075:[function(g,ne,ae){var T=g("../../plots/template_attributes").hovertemplateAttrs,c=g("../../plots/template_attributes").texttemplateAttrs,M=g("../../components/colorscale/attributes"),A=g("../../plots/domain").attributes,e=g("../pie/attributes"),a=g("../sunburst/attributes"),n=g("./constants"),t=g("../../lib/extend").extendFlat;ne.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},M("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:a.textinfo,texttemplate:c({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:T({},{keys:n.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:t({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:a.root,domain:A({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"./constants":1078}],1076:[function(g,ne,ae){var T=g("../../plots/plots");ae.name="treemap",ae.plot=function(c,M,A,e){T.plotBasePlot(ae.name,c,M,A,e)},ae.clean=function(c,M,A,e){T.cleanBasePlot(ae.name,c,M,A,e)}},{"../../plots/plots":619}],1077:[function(g,ne,ae){var T=g("../sunburst/calc");ae.calc=function(c,M){return T.calc(c,M)},ae.crossTraceCalc=function(c){return T._runCrossTraceCalc("treemap",c)}},{"../sunburst/calc":1051}],1078:[function(g,ne,ae){ne.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1079:[function(g,ne,ae){var T=g("../../lib"),c=g("./attributes"),M=g("../../components/color"),A=g("../../plots/domain").defaults,e=g("../bar/defaults").handleText,a=g("../bar/constants").TEXTPAD,n=g("../../components/colorscale"),t=n.hasColorscale,r=n.handleDefaults;ne.exports=function(o,i,p,d){function y(k,P){return T.coerce(o,i,c,k,P)}var v=y("labels"),x=y("parents");if(!v||!v.length||!x||!x.length){i.visible=!1;return}var l=y("values");l&&l.length?y("branchvalues"):y("count"),y("level"),y("maxdepth");var _=y("tiling.packing");_==="squarify"&&y("tiling.squarifyratio"),y("tiling.flip"),y("tiling.pad");var s=y("text");y("texttemplate"),i.texttemplate||y("textinfo",Array.isArray(s)?"text+label":"label"),y("hovertext"),y("hovertemplate");var w=y("pathbar.visible"),b="auto";e(o,i,d,y,b,{hasPathbar:w,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("textposition");var h=i.textposition.indexOf("bottom")!==-1,m=y("marker.line.width");m&&y("marker.line.color",d.paper_bgcolor);var u=y("marker.colors"),L=i._hasColorscale=t(o,"marker","colors")||(o.marker||{}).coloraxis;L?r(o,i,d,y,{prefix:"marker.",cLetter:"c"}):y("marker.depthfade",!(u||[]).length);var S=i.textfont.size*2;y("marker.pad.t",h?S/4:S),y("marker.pad.l",S/4),y("marker.pad.r",S/4),y("marker.pad.b",h?S:S/4),i._hovered={marker:{line:{width:2,color:M.contrast(d.paper_bgcolor)}}},w&&(y("pathbar.thickness",i.pathbar.textfont.size+2*a),y("pathbar.side"),y("pathbar.edgeshape")),y("sort"),y("root.color"),A(i,d,y),i._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1075}],1080:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../sunburst/helpers"),M=g("../bar/uniform_text"),A=M.clearMinTextSize,e=g("../bar/style").resizeText,a=g("./plot_one");ne.exports=function(t,r,f,o,i){var p=i.type,d=i.drawDescendants,y=t._fullLayout,v=y["_"+p+"layer"],x,l,_=!f;if(A(p,y),x=v.selectAll("g.trace."+p).data(r,function(w){return w[0].trace.uid}),x.enter().append("g").classed("trace",!0).classed(p,!0),x.order(),!y.uniformtext.mode&&c.hasTransition(f)){o&&(l=o());var s=T.transition().duration(f.duration).ease(f.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});s.each(function(){v.selectAll("g.trace").each(function(w){a(t,w,this,f,d)})})}else x.each(function(w){a(t,w,this,f,d)}),y.uniformtext.mode&&e(t,v.selectAll(".trace"),p);_&&x.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./plot_one":1089,"@plotly/d3":58}],1081:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=g("../../components/drawing"),A=g("../../lib/svg_text_utils"),e=g("./partition"),a=g("./style").styleOne,n=g("./constants"),t=g("../sunburst/helpers"),r=g("../sunburst/fx"),f=!0;ne.exports=function(i,p,d,y,v){var x=v.barDifY,l=v.width,_=v.height,s=v.viewX,w=v.viewY,b=v.pathSlice,h=v.toMoveInsideSlice,m=v.strTransform,u=v.hasTransition,L=v.handleSlicesExit,S=v.makeUpdateSliceInterpolator,k=v.makeUpdateTextInterpolator,P={},z=i._fullLayout,I=p[0],D=I.trace,R=I.hierarchy,B=l/D._entryDepth,F=t.listPath(d.data,"id"),V=e(R.copy(),[l,_],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();V=V.filter(function(K){var J=F.indexOf(K.data.id);return J===-1?!1:(K.x0=B*J,K.x1=B*(J+1),K.y0=x,K.y1=x+_,K.onPathbar=!0,!0)}),V.reverse(),y=y.data(V,t.getPtId),y.enter().append("g").classed("pathbar",!0),L(y,f,P,[l,_],b),y.order();var Y=y;u&&(Y=Y.transition().each("end",function(){var K=T.select(this);t.setSliceCursor(K,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),Y.each(function(K){K._x0=s(K.x0),K._x1=s(K.x1),K._y0=w(K.y0),K._y1=w(K.y1),K._hoverX=s(K.x1-Math.min(l,_)/2),K._hoverY=w(K.y1-_/2);var J=T.select(this),G=c.ensureSingle(J,"path","surface",function(oe){oe.style("pointer-events","all")});u?G.transition().attrTween("d",function(oe){var N=S(oe,f,P,[l,_]);return function(U){return b(N(U))}}):G.attr("d",b),J.call(r,d,i,p,{styleOne:a,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:i._transitioning}),G.call(a,K,D,{hovered:!1}),K._text=(t.getPtLabel(K)||"").split("<br>").join(" ")||"";var Z=c.ensureSingle(J,"g","slicetext"),re=c.ensureSingle(Z,"text","",function(oe){oe.attr("data-notex",1)}),se=c.ensureUniformFontSize(i,t.determineTextFont(D,K,z.font,{onPathbar:!0}));re.text(K._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(M.font,se).call(A.convertToTspans,i),K.textBB=M.bBox(re.node()),K.transform=h(K,{fontSize:se.size,onPathbar:!0}),K.transform.fontSize=se.size,u?re.transition().attrTween("transform",function(oe){var N=k(oe,f,P,[l,_]);return function(U){return m(N(U))}}):re.attr("transform",m(K))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1082:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=g("../../components/drawing"),A=g("../../lib/svg_text_utils"),e=g("./partition"),a=g("./style").styleOne,n=g("./constants"),t=g("../sunburst/helpers"),r=g("../sunburst/fx"),f=g("../sunburst/plot").formatSliceLabel,o=!1;ne.exports=function(p,d,y,v,x){var l=x.width,_=x.height,s=x.viewX,w=x.viewY,b=x.pathSlice,h=x.toMoveInsideSlice,m=x.strTransform,u=x.hasTransition,L=x.handleSlicesExit,S=x.makeUpdateSliceInterpolator,k=x.makeUpdateTextInterpolator,P=x.prevEntry,z={},I=p._fullLayout,D=d[0],R=D.trace,B=R.textposition.indexOf("left")!==-1,F=R.textposition.indexOf("right")!==-1,V=R.textposition.indexOf("bottom")!==-1,Y=!V&&!R.marker.pad.t||V&&!R.marker.pad.b,K=e(y,[l,_],{packing:R.tiling.packing,squarifyratio:R.tiling.squarifyratio,flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1,pad:{inner:R.tiling.pad,top:R.marker.pad.t,left:R.marker.pad.l,right:R.marker.pad.r,bottom:R.marker.pad.b}}),J=K.descendants(),G=1/0,Z=-1/0;J.forEach(function(U){var q=U.depth;q>=R._maxDepth?(U.x0=U.x1=(U.x0+U.x1)/2,U.y0=U.y1=(U.y0+U.y1)/2):(G=Math.min(G,q),Z=Math.max(Z,q))}),v=v.data(J,t.getPtId),R._maxVisibleLayers=isFinite(Z)?Z-G+1:0,v.enter().append("g").classed("slice",!0),L(v,o,z,[l,_],b),v.order();var re=null;if(u&&P){var se=t.getPtId(P);v.each(function(U){re===null&&t.getPtId(U)===se&&(re={x0:U.x0,x1:U.x1,y0:U.y0,y1:U.y1})})}var oe=function(){return re||{x0:0,x1:l,y0:0,y1:_}},N=v;return u&&(N=N.transition().each("end",function(){var U=T.select(this);t.setSliceCursor(U,p,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),N.each(function(U){var q=t.isHeader(U,R);U._x0=s(U.x0),U._x1=s(U.x1),U._y0=w(U.y0),U._y1=w(U.y1),U._hoverX=s(U.x1-R.marker.pad.r),U._hoverY=w(V?U.y1-R.marker.pad.b/2:U.y0+R.marker.pad.t/2);var Q=T.select(this),W=c.ensureSingle(Q,"path","surface",function(ie){ie.style("pointer-events","all")});u?W.transition().attrTween("d",function(ie){var le=S(ie,o,oe(),[l,_]);return function(ye){return b(le(ye))}}):W.attr("d",b),Q.call(r,y,p,d,{styleOne:a,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,p,{isTransitioning:p._transitioning}),W.call(a,U,R,{hovered:!1}),U.x0===U.x1||U.y0===U.y1?U._text="":q?U._text=Y?"":t.getPtLabel(U)||"":U._text=f(U,y,R,d,I)||"";var X=c.ensureSingle(Q,"g","slicetext"),te=c.ensureSingle(X,"text","",function(ie){ie.attr("data-notex",1)}),ee=c.ensureUniformFontSize(p,t.determineTextFont(R,U,I.font));te.text(U._text||" ").classed("slicetext",!0).attr("text-anchor",F?"end":B||q?"start":"middle").call(M.font,ee).call(A.convertToTspans,p),U.textBB=M.bBox(te.node()),U.transform=h(U,{fontSize:ee.size,isHeader:q}),U.transform.fontSize=ee.size,u?te.transition().attrTween("transform",function(ie){var le=k(ie,o,oe(),[l,_]);return function(ye){return m(le(ye))}}):te.attr("transform",m(U))}),re}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1083:[function(g,ne,ae){ne.exports=function T(c,M,A){var e;A.swapXY&&(e=c.x0,c.x0=c.y0,c.y0=e,e=c.x1,c.x1=c.y1,c.y1=e),A.flipX&&(e=c.x0,c.x0=M[0]-c.x1,c.x1=M[0]-e),A.flipY&&(e=c.y0,c.y0=M[1]-c.y1,c.y1=M[1]-e);var a=c.children;if(a)for(var n=0;n<a.length;n++)T(a[n],M,A)}},{}],1084:[function(g,ne,ae){ne.exports={moduleType:"trace",name:"treemap",basePlotModule:g("./base_plot"),categories:[],animatable:!0,attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults"),supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc").calc,crossTraceCalc:g("./calc").crossTraceCalc,plot:g("./plot"),style:g("./style").style,colorbar:g("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1079,"./layout_attributes":1085,"./layout_defaults":1086,"./plot":1088,"./style":1090}],1085:[function(g,ne,ae){ne.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1086:[function(g,ne,ae){var T=g("../../lib"),c=g("./layout_attributes");ne.exports=function(A,e){function a(n,t){return T.coerce(A,e,c,n,t)}a("treemapcolorway",e.colorway),a("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1085}],1087:[function(g,ne,ae){var T=g("d3-hierarchy"),c=g("./flip_tree");ne.exports=function(e,a,n){var t=n.flipX,r=n.flipY,f=n.packing==="dice-slice",o=n.pad[r?"bottom":"top"],i=n.pad[t?"right":"left"],p=n.pad[t?"left":"right"],d=n.pad[r?"top":"bottom"],y;f&&(y=i,i=o,o=y,y=p,p=d,d=y);var v=T.treemap().tile(M(n.packing,n.squarifyratio)).paddingInner(n.pad.inner).paddingLeft(i).paddingRight(p).paddingTop(o).paddingBottom(d).size(f?[a[1],a[0]]:a)(e);return(f||t||r)&&c(v,a,{swapXY:f,flipX:t,flipY:r}),v};function M(A,e){switch(A){case"squarify":return T.treemapSquarify.ratio(e);case"binary":return T.treemapBinary;case"dice":return T.treemapDice;case"slice":return T.treemapSlice;default:return T.treemapSliceDice}}},{"./flip_tree":1083,"d3-hierarchy":115}],1088:[function(g,ne,ae){var T=g("./draw"),c=g("./draw_descendants");ne.exports=function(A,e,a,n){return T(A,e,a,n,{type:"treemap",drawDescendants:c})}},{"./draw":1080,"./draw_descendants":1082}],1089:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("d3-interpolate").interpolate,M=g("../sunburst/helpers"),A=g("../../lib"),e=g("../bar/constants").TEXTPAD,a=g("../bar/plot"),n=a.toMoveInsideBar,t=g("../bar/uniform_text"),r=t.recordMinTextSize,f=g("./constants"),o=g("./draw_ancestors");function i(p){return M.isHierarchyRoot(p)?"":M.getPtId(p)}ne.exports=function(d,y,v,x,l){var _=d._fullLayout,s=y[0],w=s.trace,b=w.type,h=b==="icicle",m=s.hierarchy,u=M.findEntryWithLevel(m,w.level),L=T.select(v),S=L.selectAll("g.pathbar"),k=L.selectAll("g.slice");if(!u){S.remove(),k.remove();return}var P=M.isHierarchyRoot(u),z=!_.uniformtext.mode&&M.hasTransition(x),I=M.getMaxDepth(w),D=function(Ne){return Ne.data.depth-u.data.depth<I},R=_._size,B=w.domain,F=R.w*(B.x[1]-B.x[0]),V=R.h*(B.y[1]-B.y[0]),Y=F,K=w.pathbar.thickness,J=w.marker.line.width+f.gapWithPathbar,G=w.pathbar.visible?w.pathbar.side.indexOf("bottom")>-1?V+J:-(K+J):0,Z={x0:Y,x1:Y,y0:G,y1:G+K},re=function(Ne,dt,Dt){var Xt=w.tiling.pad,Tt=function(Mt){return Mt-Xt<=dt.x0},zt=function(Mt){return Mt+Xt>=dt.x1},Ut=function(Mt){return Mt-Xt<=dt.y0},Et=function(Mt){return Mt+Xt>=dt.y1};return Ne.x0===dt.x0&&Ne.x1===dt.x1&&Ne.y0===dt.y0&&Ne.y1===dt.y1?{x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1}:{x0:Tt(Ne.x0-Xt)?0:zt(Ne.x0-Xt)?Dt[0]:Ne.x0,x1:Tt(Ne.x1+Xt)?0:zt(Ne.x1+Xt)?Dt[0]:Ne.x1,y0:Ut(Ne.y0-Xt)?0:Et(Ne.y0-Xt)?Dt[1]:Ne.y0,y1:Ut(Ne.y1+Xt)?0:Et(Ne.y1+Xt)?Dt[1]:Ne.y1}},se=null,oe={},N={},U=null,q=function(Ne,dt){return dt?oe[i(Ne)]:N[i(Ne)]},Q=function(Ne,dt,Dt,Xt){if(dt)return oe[i(m)]||Z;var Tt=N[w.level]||Dt;return D(Ne)?re(Ne,Tt,Xt):{}};s.hasMultipleRoots&&P&&I++,w._maxDepth=I,w._backgroundColor=_.paper_bgcolor,w._entryDepth=u.data.depth,w._atRootLevel=P;var W=-F/2+R.l+R.w*(B.x[1]+B.x[0])/2,X=-V/2+R.t+R.h*(1-(B.y[1]+B.y[0])/2),te=function(Ne){return W+Ne},ee=function(Ne){return X+Ne},ie=ee(0),le=te(0),ye=function(Ne){return le+Ne},ue=function(Ne){return ie+Ne};function pe(Ne,dt){return Ne+","+dt}var ge=ye(0),Te=function(Ne){Ne.x=Math.max(ge,Ne.x)},_e=w.pathbar.edgeshape,De=function(Ne){var dt=ye(Math.max(Math.min(Ne.x0,Ne.x0),0)),Dt=ye(Math.min(Math.max(Ne.x1,Ne.x1),Y)),Xt=ue(Ne.y0),Tt=ue(Ne.y1),zt=K/2,Ut={},Et={};Ut.x=dt,Et.x=Dt,Ut.y=Et.y=(Xt+Tt)/2;var Mt={x:dt,y:Xt},rt={x:Dt,y:Xt},ct={x:Dt,y:Tt},Ze={x:dt,y:Tt};return _e===">"?(Mt.x-=zt,rt.x-=zt,ct.x-=zt,Ze.x-=zt):_e==="/"?(ct.x-=zt,Ze.x-=zt,Ut.x-=zt/2,Et.x-=zt/2):_e==="\\"?(Mt.x-=zt,rt.x-=zt,Ut.x-=zt/2,Et.x-=zt/2):_e==="<"&&(Ut.x-=zt,Et.x-=zt),Te(Mt),Te(Ze),Te(Ut),Te(rt),Te(ct),Te(Et),"M"+pe(Mt.x,Mt.y)+"L"+pe(rt.x,rt.y)+"L"+pe(Et.x,Et.y)+"L"+pe(ct.x,ct.y)+"L"+pe(Ze.x,Ze.y)+"L"+pe(Ut.x,Ut.y)+"Z"},Oe=function(Ne){var dt=te(Ne.x0),Dt=te(Ne.x1),Xt=ee(Ne.y0),Tt=ee(Ne.y1),zt=Dt-dt,Ut=Tt-Xt;if(!zt||!Ut)return"";var Et=0,Mt=zt>2*Et&&Ut>2*Et?Et:0,rt=function(ct,Ze){return Mt?"a"+pe(Mt,Mt)+" 0 0 1 "+pe(ct,Ze):""};return"M"+pe(dt,Xt+Mt)+rt(Mt,-Mt)+"L"+pe(Dt-Mt,Xt)+rt(Mt,Mt)+"L"+pe(Dt,Tt-Mt)+rt(-Mt,Mt)+"L"+pe(dt+Mt,Tt)+rt(-Mt,-Mt)+"Z"},Ue=function(Ne,dt){var Dt=Ne.x0,Xt=Ne.x1,Tt=Ne.y0,zt=Ne.y1,Ut=Ne.textBB,Et=function(Ot){return w.textposition.indexOf(Ot)!==-1},Mt=Et("bottom"),rt=Et("top")||dt.isHeader&&!Mt,ct=rt?"start":Mt?"end":"middle",Ze=Et("right"),ke=Et("left")||dt.onPathbar,Ge=ke?-1:Ze?1:0,Je=w[h?"tiling":"marker"].pad;if(dt.isHeader){if(Dt+=(h?Je:Je.l)-e,Xt-=(h?Je:Je.r)-e,Dt>=Xt){var it=(Dt+Xt)/2;Dt=it,Xt=it}var Pt;Mt?(Pt=zt-(h?Je:Je.b),Tt<Pt&&Pt<zt&&(Tt=Pt)):(Pt=Tt+(h?Je:Je.t),Tt<Pt&&Pt<zt&&(zt=Pt))}var At=n(Dt,Xt,Tt,zt,Ut,{isHorizontal:!1,constrained:!0,angle:0,anchor:ct,leftToRight:Ge});return At.fontSize=dt.fontSize,At.targetX=te(At.targetX),At.targetY=ee(At.targetY),isNaN(At.targetX)||isNaN(At.targetY)?{}:(Dt!==Xt&&Tt!==zt&&r(w.type,At,_),{scale:At.scale,rotate:At.rotate,textX:At.textX,textY:At.textY,anchorX:At.anchorX,anchorY:At.anchorY,targetX:At.targetX,targetY:At.targetY})},xe=function(Ne,dt){for(var Dt,Xt=0,Tt=Ne;!Dt&&Xt<I;)Xt++,Tt=Tt.parent,Tt?Dt=q(Tt,dt):Xt=I;return Dt||{}},Pe=function(Ne,dt,Dt,Xt){var Tt=q(Ne,dt),zt;if(dt)zt=Z;else{var Ut=q(u,dt);Ut?zt=re(Ne,Ut,Xt):zt={}}return c(Tt,zt)},Ve=function(Ne,dt,Dt,Xt,Tt){var zt=q(Ne,dt),Ut;if(zt)Ut=zt;else if(dt)Ut=Z;else if(se)if(Ne.parent){var Et=U||Dt;Et&&!dt?Ut=re(Ne,Et,Xt):(Ut={},A.extendFlat(Ut,xe(Ne,dt)))}else Ut=A.extendFlat({},Ne),h&&(Tt.orientation==="h"?Tt.flipX?Ut.x0=Ne.x1:Ut.x1=0:Tt.flipY?Ut.y0=Ne.y1:Ut.y1=0);else Ut={};return c(Ut,{x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1})},Qe=function(Ne,dt,Dt,Xt){var Tt=q(Ne,dt),zt={},Ut=Q(Ne,dt,Dt,Xt);A.extendFlat(zt,{transform:Ue({x0:Ut.x0,x1:Ut.x1,y0:Ut.y0,y1:Ut.y1,textBB:Ne.textBB,_text:Ne._text},{isHeader:M.isHeader(Ne,w)})}),Tt?zt=Tt:Ne.parent&&A.extendFlat(zt,xe(Ne,dt));var Et=Ne.transform;return Ne.x0!==Ne.x1&&Ne.y0!==Ne.y1&&r(w.type,Et,_),c(zt,{transform:{scale:Et.scale,rotate:Et.rotate,textX:Et.textX,textY:Et.textY,anchorX:Et.anchorX,anchorY:Et.anchorY,targetX:Et.targetX,targetY:Et.targetY}})},Fe=function(Ne,dt,Dt,Xt,Tt){var zt=Xt[0],Ut=Xt[1];z?Ne.exit().transition().each(function(){var Et=T.select(this),Mt=Et.select("path.surface");Mt.transition().attrTween("d",function(ct){var Ze=Pe(ct,dt,Dt,[zt,Ut]);return function(ke){return Tt(Ze(ke))}});var rt=Et.select("g.slicetext");rt.attr("opacity",0)}).remove():Ne.exit().remove()},Le=function(Ne){var dt=Ne.transform;return Ne.x0!==Ne.x1&&Ne.y0!==Ne.y1&&r(w.type,dt,_),A.getTextTransform({textX:dt.textX,textY:dt.textY,anchorX:dt.anchorX,anchorY:dt.anchorY,targetX:dt.targetX,targetY:dt.targetY,scale:dt.scale,rotate:dt.rotate})};z&&(S.each(function(Ne){oe[i(Ne)]={x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1},Ne.transform&&(oe[i(Ne)].transform={textX:Ne.transform.textX,textY:Ne.transform.textY,anchorX:Ne.transform.anchorX,anchorY:Ne.transform.anchorY,targetX:Ne.transform.targetX,targetY:Ne.transform.targetY,scale:Ne.transform.scale,rotate:Ne.transform.rotate})}),k.each(function(Ne){N[i(Ne)]={x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1},Ne.transform&&(N[i(Ne)].transform={textX:Ne.transform.textX,textY:Ne.transform.textY,anchorX:Ne.transform.anchorX,anchorY:Ne.transform.anchorY,targetX:Ne.transform.targetX,targetY:Ne.transform.targetY,scale:Ne.transform.scale,rotate:Ne.transform.rotate}),!se&&M.isEntry(Ne)&&(se=Ne)})),U=l(d,y,u,k,{width:F,height:V,viewX:te,viewY:ee,pathSlice:Oe,toMoveInsideSlice:Ue,prevEntry:se,makeUpdateSliceInterpolator:Ve,makeUpdateTextInterpolator:Qe,handleSlicesExit:Fe,hasTransition:z,strTransform:Le}),w.pathbar.visible?o(d,y,u,S,{barDifY:G,width:Y,height:K,viewX:ye,viewY:ue,pathSlice:De,toMoveInsideSlice:Ue,makeUpdateSliceInterpolator:Ve,makeUpdateTextInterpolator:Qe,handleSlicesExit:Fe,hasTransition:z,strTransform:Le}):S.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./constants":1078,"./draw_ancestors":1081,"@plotly/d3":58,"d3-interpolate":116}],1090:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/color"),M=g("../../lib"),A=g("../sunburst/helpers"),e=g("../bar/uniform_text").resizeText;function a(t){var r=t._fullLayout._treemaplayer.selectAll(".trace");e(t,r,"treemap"),r.each(function(f){var o=T.select(this),i=f[0],p=i.trace;o.style("opacity",p.opacity),o.selectAll("path.surface").each(function(d){T.select(this).call(n,d,p,{hovered:!1})})})}function n(t,r,f,o){var i=(o||{}).hovered,p=r.data.data,d=p.i,y,v,x=p.color,l=A.isHierarchyRoot(r),_=1;if(i)y=f._hovered.marker.line.color,v=f._hovered.marker.line.width;else if(l&&x===f.root.color)_=100,y="rgba(0,0,0,0)",v=0;else if(y=M.castOption(f,d,"marker.line.color")||c.defaultLine,v=M.castOption(f,d,"marker.line.width")||0,!f._hasColorscale&&!r.onPathbar){var s=f.marker.depthfade;if(s){var w=c.combine(c.addOpacity(f._backgroundColor,.75),x),b;if(s===!0){var h=A.getMaxDepth(f);isFinite(h)?A.isLeaf(r)?b=0:b=f._maxVisibleLayers-(r.data.depth-f._entryDepth):b=r.data.height+1}else b=r.data.depth-f._entryDepth,f._atRootLevel||b++;if(b>0)for(var m=0;m<b;m++){var u=.5*m/b;x=c.combine(c.addOpacity(w,u),x)}}}t.style("stroke-width",v).call(c.fill,x).call(c.stroke,y).style("opacity",_)}ne.exports={style:a,styleOne:n}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1055,"@plotly/d3":58}],1091:[function(g,ne,ae){var T=g("../box/attributes"),c=g("../../lib/extend").extendFlat,M=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat;ne.exports={y:T.y,x:T.x,x0:T.x0,y0:T.y0,xhoverformat:M("x"),yhoverformat:M("y"),name:c({},T.name,{}),orientation:c({},T.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:T.fillcolor,points:c({},T.boxpoints,{}),jitter:c({},T.jitter,{}),pointpos:c({},T.pointpos,{}),width:c({},T.width,{}),marker:T.marker,text:T.text,hovertext:T.hovertext,hovertemplate:T.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,selected:T.selected,unselected:T.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1092:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/cartesian/axes"),M=g("../box/calc"),A=g("./helpers"),e=g("../../constants/numerical").BADNUM;ne.exports=function(f,o){var i=M(f,o);if(i[0].t.empty)return i;for(var p=f._fullLayout,d=c.getFromId(f,o[o.orientation==="h"?"xaxis":"yaxis"]),y=1/0,v=-1/0,x=0,l=0,_=0;_<i.length;_++){var s=i[_],w=s.pts.map(A.extractVal),b=s.bandwidth=n(o,s,w),h=s.span=t(o,s,d,b);if(s.min===s.max&&b===0)h=s.span=[s.min,s.max],s.density=[{v:1,t:h[0]}],s.bandwidth=b,x=Math.max(x,1);else{var m=h[1]-h[0],u=Math.ceil(m/(b/3)),L=m/u;if(!isFinite(L)||!isFinite(u))return T.error("Something went wrong with computing the violin span"),i[0].t.empty=!0,i;var S=A.makeKDE(s,o,w);s.density=new Array(u);for(var k=0,P=h[0];P<h[1]+L/2;k++,P+=L){var z=S(P);s.density[k]={v:z,t:P},x=Math.max(x,z)}}l=Math.max(l,w.length),y=Math.min(y,h[0]),v=Math.max(v,h[1])}var I=c.findExtremes(d,[y,v],{padded:!0});if(o._extremes[d._id]=I,o.width)i[0].t.maxKDE=x;else{var D=p._violinScaleGroupStats,R=o.scalegroup,B=D[R];B?(B.maxKDE=Math.max(B.maxKDE,x),B.maxCount=Math.max(B.maxCount,l)):D[R]={maxKDE:x,maxCount:l}}return i[0].t.labels.kde=T._(f,"kde:"),i};function a(r,f,o){var i=Math.min(f,o/1.349);return 1.059*i*Math.pow(r,-.2)}function n(r,f,o){var i=f.max-f.min;if(!i)return r.bandwidth?r.bandwidth:0;if(r.bandwidth)return Math.max(r.bandwidth,i/1e4);var p=o.length,d=T.stdev(o,p-1,f.mean);return Math.max(a(p,d,f.q3-f.q1),i/100)}function t(r,f,o,i){var p=r.spanmode,d=r.span||[],y=[f.min,f.max],v=[f.min-2*i,f.max+2*i],x;function l(s){var w=d[s],b=o.type==="multicategory"?o.r2c(w):o.d2c(w,0,r[f.valLetter+"calendar"]);return b===e?v[s]:b}p==="soft"?x=v:p==="hard"?x=y:x=[l(0),l(1)];var _={type:"linear",range:x};return c.setConvert(_),_.cleanRange(),x}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1095}],1093:[function(g,ne,ae){var T=g("../box/cross_trace_calc").setPositionOffset,c=["v","h"];ne.exports=function(A,e){for(var a=A.calcdata,n=e.xaxis,t=e.yaxis,r=0;r<c.length;r++){for(var f=c[r],o=f==="h"?t:n,i=[],p=0;p<a.length;p++){var d=a[p],y=d[0].t,v=d[0].trace;v.visible===!0&&v.type==="violin"&&!y.empty&&v.orientation===f&&v.xaxis===n._id&&v.yaxis===t._id&&i.push(p)}T("violin",A,i,o)}}},{"../box/cross_trace_calc":675}],1094:[function(g,ne,ae){var T=g("../../lib"),c=g("../../components/color"),M=g("../box/defaults"),A=g("./attributes");ne.exports=function(a,n,t,r){function f(L,S){return T.coerce(a,n,A,L,S)}function o(L,S){return T.coerce2(a,n,A,L,S)}if(M.handleSampleDefaults(a,n,f,r),n.visible!==!1){f("bandwidth"),f("side");var i=f("width");i||(f("scalegroup",n.name),f("scalemode"));var p=f("span"),d;Array.isArray(p)&&(d="manual"),f("spanmode",d);var y=f("line.color",(a.marker||{}).color||t),v=f("line.width"),x=f("fillcolor",c.addOpacity(n.line.color,.5));M.handlePointsDefaults(a,n,f,{prefix:""});var l=o("box.width"),_=o("box.fillcolor",x),s=o("box.line.color",y),w=o("box.line.width",v),b=f("box.visible",Boolean(l||_||s||w));b||(n.box={visible:!1});var h=o("meanline.color",y),m=o("meanline.width",v),u=f("meanline.visible",Boolean(h||m));u||(n.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1091}],1095:[function(g,ne,ae){var T=g("../../lib"),c={gaussian:function(M){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*M*M)}};ae.makeKDE=function(M,A,e){var a=e.length,n=c.gaussian,t=M.bandwidth,r=1/(a*t);return function(f){for(var o=0,i=0;i<a;i++)o+=n((f-e[i])/t);return r*o}},ae.getPositionOnKdePath=function(M,A,e){var a,n;A.orientation==="h"?(a="y",n="x"):(a="x",n="y");var t=T.findPointOnPath(M.path,e,n,{pathLength:M.pathLength}),r=M.posCenterPx,f=t[a],o=A.side==="both"?2*r-f:r;return[f,o]},ae.getKdeValue=function(M,A,e){var a=M.pts.map(ae.extractVal),n=ae.makeKDE(M,A,a);return n(e)/M.posDensityScale},ae.extractVal=function(M){return M.v}},{"../../lib":503}],1096:[function(g,ne,ae){var T=g("../../lib"),c=g("../../plots/cartesian/axes"),M=g("../box/hover"),A=g("./helpers");ne.exports=function(a,n,t,r,f){f||(f={});var o=f.hoverLayer,i=a.cd,p=i[0].trace,d=p.hoveron,y=d.indexOf("violins")!==-1,v=d.indexOf("kde")!==-1,x=[],l,_;if(y||v){var s=M.hoverOnBoxes(a,n,t,r);if(v&&s.length>0){var w=a.xa,b=a.ya,h,m,u,L,S;p.orientation==="h"?(S=n,h="y",u=b,m="x",L=w):(S=t,h="x",u=w,m="y",L=b);var k=i[a.index];if(S>=k.span[0]&&S<=k.span[1]){var P=T.extendFlat({},a),z=L.c2p(S,!0),I=A.getKdeValue(k,p,S),D=A.getPositionOnKdePath(k,p,z),R=u._offset,B=u._length;P[h+"0"]=D[0],P[h+"1"]=D[1],P[m+"0"]=P[m+"1"]=z,P[m+"Label"]=m+": "+c.hoverLabelText(L,S,p[m+"hoverformat"])+", "+i[0].t.labels.kde+" "+I.toFixed(3),P.spikeDistance=s[0].spikeDistance;var F=h+"Spike";P[F]=s[0][F],s[0].spikeDistance=void 0,s[0][F]=void 0,P.hovertemplate=!1,x.push(P),_={stroke:a.color},_[h+"1"]=T.constrain(R+D[0],R,R+B),_[h+"2"]=T.constrain(R+D[1],R,R+B),_[m+"1"]=_[m+"2"]=L._offset+z}}y&&(x=x.concat(s))}d.indexOf("points")!==-1&&(l=M.hoverOnPoints(a,n,t));var V=o.selectAll(".violinline-"+p.uid).data(_?[0]:[]);return V.enter().append("line").classed("violinline-"+p.uid,!0).attr("stroke-width",1.5),V.exit().remove(),V.attr(_),r==="closest"?l?[l]:x:(l&&x.push(l),x)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1095}],1097:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults"),crossTraceDefaults:g("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc"),crossTraceCalc:g("./cross_trace_calc"),plot:g("./plot"),style:g("./style"),styleOnSelect:g("../scatter/style").styleOnSelect,hoverPoints:g("./hover"),selectPoints:g("../box/select"),moduleType:"trace",name:"violin",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":951,"./attributes":1091,"./calc":1092,"./cross_trace_calc":1093,"./defaults":1094,"./hover":1096,"./layout_attributes":1098,"./layout_defaults":1099,"./plot":1100,"./style":1101}],1098:[function(g,ne,ae){var T=g("../box/layout_attributes"),c=g("../../lib").extendFlat;ne.exports={violinmode:c({},T.boxmode,{}),violingap:c({},T.boxgap,{}),violingroupgap:c({},T.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1099:[function(g,ne,ae){var T=g("../../lib"),c=g("./layout_attributes"),M=g("../box/layout_defaults");ne.exports=function(e,a,n){function t(r,f){return T.coerce(e,a,c,r,f)}M._supply(e,a,n,t,"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1098}],1100:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=g("../../components/drawing"),A=g("../box/plot"),e=g("../scatter/line_points"),a=g("./helpers");ne.exports=function(t,r,f,o){var i=t._fullLayout,p=r.xaxis,d=r.yaxis;function y(v){var x=e(v,{xaxis:p,yaxis:d,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return M.smoothopen(x[0],1)}c.makeTraceGroups(o,f,"trace violins").each(function(v){var x=T.select(this),l=v[0],_=l.t,s=l.trace;if(s.visible!==!0||_.empty){x.remove();return}var w=_.bPos,b=_.bdPos,h=r[_.valLetter+"axis"],m=r[_.posLetter+"axis"],u=s.side==="both",L=u||s.side==="positive",S=u||s.side==="negative",k=x.selectAll("path.violin").data(c.identity);k.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),k.exit().remove(),k.each(function(V){var Y=T.select(this),K=V.density,J=K.length,G=m.c2l(V.pos+w,!0),Z=m.l2p(G),re;if(s.width)re=_.maxKDE/b;else{var se=i._violinScaleGroupStats[s.scalegroup];re=s.scalemode==="count"?se.maxKDE/b*(se.maxCount/V.pts.length):se.maxKDE/b}var oe,N,U,q,Q,W,X;if(L){for(W=new Array(J),q=0;q<J;q++)X=W[q]={},X[_.posLetter]=G+K[q].v/re,X[_.valLetter]=h.c2l(K[q].t,!0);oe=y(W)}if(S){for(W=new Array(J),Q=0,q=J-1;Q<J;Q++,q--)X=W[Q]={},X[_.posLetter]=G-K[q].v/re,X[_.valLetter]=h.c2l(K[q].t,!0);N=y(W)}if(u)U=oe+"L"+N.substr(1)+"Z";else{var te=[Z,h.c2p(K[0].t)],ee=[Z,h.c2p(K[J-1].t)];s.orientation==="h"&&(te.reverse(),ee.reverse()),L?U="M"+te+"L"+oe.substr(1)+"L"+ee:U="M"+ee+"L"+N.substr(1)+"L"+te}Y.attr("d",U),V.posCenterPx=Z,V.posDensityScale=re*b,V.path=Y.node(),V.pathLength=V.path.getTotalLength()/(u?2:1)});var P=s.box,z=P.width,I=(P.line||{}).width,D,R;u?(D=b*z,R=0):L?(D=[0,b*z/2],R=I*{x:1,y:-1}[_.posLetter]):(D=[b*z/2,0],R=I*{x:-1,y:1}[_.posLetter]),A.plotBoxAndWhiskers(x,{pos:m,val:h},s,{bPos:w,bdPos:D,bPosPxOffset:R}),A.plotBoxMean(x,{pos:m,val:h},s,{bPos:w,bdPos:D,bPosPxOffset:R});var B;!s.box.visible&&s.meanline.visible&&(B=c.identity);var F=x.selectAll("path.meanline").data(B||[]);F.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),F.exit().remove(),F.each(function(V){var Y=h.c2p(V.mean,!0),K=a.getPositionOnKdePath(V,s,Y);T.select(this).attr("d",s.orientation==="h"?"M"+Y+","+K[0]+"V"+K[1]:"M"+K[0]+","+Y+"H"+K[1])}),A.plotPoints(x,{x:p,y:d},s,_)})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":941,"./helpers":1095,"@plotly/d3":58}],1101:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/color"),M=g("../scatter/style").stylePoints;ne.exports=function(e){var a=T.select(e).selectAll("g.trace.violins");a.style("opacity",function(n){return n[0].trace.opacity}),a.each(function(n){var t=n[0].trace,r=T.select(this),f=t.box||{},o=f.line||{},i=t.meanline||{},p=i.width;r.selectAll("path.violin").style("stroke-width",t.line.width+"px").call(c.stroke,t.line.color).call(c.fill,t.fillcolor),r.selectAll("path.box").style("stroke-width",o.width+"px").call(c.stroke,o.color).call(c.fill,f.fillcolor);var d={"stroke-width":p+"px","stroke-dasharray":2*p+"px,"+p+"px"};r.selectAll("path.mean").style(d).call(c.stroke,i.color),r.selectAll("path.meanline").style(d).call(c.stroke,i.color),M(r,t,e)})}},{"../../components/color":366,"../scatter/style":951,"@plotly/d3":58}],1102:[function(g,ne,ae){var T=g("../../components/colorscale/attributes"),c=g("../isosurface/attributes"),M=g("../surface/attributes"),A=g("../../plots/attributes"),e=g("../../lib/extend").extendFlat,a=g("../../plot_api/edit_types").overrideAll,n=ne.exports=a(e({x:c.x,y:c.y,z:c.z,value:c.value,isomin:c.isomin,isomax:c.isomax,surface:c.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:c.slices,caps:c.caps,text:c.text,hovertext:c.hovertext,xhoverformat:c.xhoverformat,yhoverformat:c.yhoverformat,zhoverformat:c.zhoverformat,valuehoverformat:c.valuehoverformat,hovertemplate:c.hovertemplate},T("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:c.colorbar,opacity:c.opacity,opacityscale:M.opacityscale,lightposition:c.lightposition,lighting:c.lighting,flatshading:c.flatshading,contour:c.contour,hoverinfo:e({},A.hoverinfo),showlegend:e({},A.showlegend,{dflt:!1})}),"calc","nested");n.x.editType=n.y.editType=n.z.editType=n.value.editType="calc+clearAxisTypes",n.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1061}],1103:[function(g,ne,ae){var T=g("../../../stackgl_modules").gl_mesh3d,c=g("../../lib/gl_format_color").parseColorScale,M=g("../../lib/str2rgbarray"),A=g("../../components/colorscale").extractOpts,e=g("../../plots/gl3d/zip3"),a=g("../isosurface/convert").findNearestOnAxis,n=g("../isosurface/convert").generateIsoMeshes;function t(o,i,p){this.scene=o,this.uid=p,this.mesh=i,this.name="",this.data=null,this.showContour=!1}var r=t.prototype;r.handlePick=function(o){if(o.object===this.mesh){var i=o.data.index,p=this.data._meshX[i],d=this.data._meshY[i],y=this.data._meshZ[i],v=this.data._Ys.length,x=this.data._Zs.length,l=a(p,this.data._Xs).id,_=a(d,this.data._Ys).id,s=a(y,this.data._Zs).id,w=o.index=s+x*_+x*v*l;o.traceCoordinate=[this.data._meshX[w],this.data._meshY[w],this.data._meshZ[w],this.data._value[w]];var b=this.data.hovertext||this.data.text;return Array.isArray(b)&&b[w]!==void 0?o.textLabel=b[w]:b&&(o.textLabel=b),!0}},r.update=function(o){var i=this.scene,p=i.fullSceneLayout;this.data=n(o);function d(_,s,w,b){return s.map(function(h){return _.d2l(h,0,b)*w})}var y=e(d(p.xaxis,o._meshX,i.dataScale[0],o.xcalendar),d(p.yaxis,o._meshY,i.dataScale[1],o.ycalendar),d(p.zaxis,o._meshZ,i.dataScale[2],o.zcalendar)),v=e(o._meshI,o._meshJ,o._meshK),x={positions:y,cells:v,lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,opacityscale:o.opacityscale,contourEnable:o.contour.show,contourColor:M(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading},l=A(o);x.vertexIntensity=o._meshIntensity,x.vertexIntensityBounds=[l.min,l.max],x.colormap=c(o),this.mesh.update(x)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function f(o,i){var p=o.glplot.gl,d=T({gl:p}),y=new t(o,d,i.uid);return d._trace=y,y.update(i),o.glplot.add(d),y}ne.exports=f},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1104:[function(g,ne,ae){var T=g("../../lib"),c=g("./attributes"),M=g("../isosurface/defaults").supplyIsoDefaults,A=g("../surface/defaults").opacityscaleDefaults;ne.exports=function(a,n,t,r){function f(o,i){return T.coerce(a,n,c,o,i)}M(a,n,t,r,f),A(a,n,r,f)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1064,"./attributes":1102}],1105:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:g("./convert"),moduleType:"trace",name:"volume",basePlotModule:g("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1102,"./convert":1103,"./defaults":1104}],1106:[function(g,ne,ae){var T=g("../bar/attributes"),c=g("../scatter/attributes").line,M=g("../../plots/attributes"),A=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=g("../../plots/template_attributes").hovertemplateAttrs,a=g("../../plots/template_attributes").texttemplateAttrs,n=g("./constants"),t=g("../../lib/extend").extendFlat,r=g("../../components/color");function f(o){return{marker:{color:t({},T.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},T.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},T.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}ne.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),hovertext:T.hovertext,hovertemplate:e({},{keys:n.eventDataKeys}),hoverinfo:t({},M.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:n.eventDataKeys.concat(["label"])}),text:T.text,textposition:T.textposition,insidetextanchor:T.insidetextanchor,textangle:T.textangle,textfont:T.textfont,insidetextfont:T.insidetextfont,outsidetextfont:T.outsidetextfont,constraintext:T.constraintext,cliponaxis:T.cliponaxis,orientation:T.orientation,offset:T.offset,width:T.width,increasing:f(),decreasing:f(),totals:f(),connector:{line:{color:t({},c.color,{dflt:r.defaultLine}),width:t({},c.width,{editType:"plot"}),dash:c.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":1108}],1107:[function(g,ne,ae){var T=g("../../plots/cartesian/axes"),c=g("../../plots/cartesian/align_period"),M=g("../../lib").mergeArray,A=g("../scatter/calc_selection"),e=g("../../constants/numerical").BADNUM;function a(t){return t==="a"||t==="absolute"}function n(t){return t==="t"||t==="total"}ne.exports=function(r,f){var o=T.getFromId(r,f.xaxis||"x"),i=T.getFromId(r,f.yaxis||"y"),p,d,y,v,x,l;f.orientation==="h"?(p=o.makeCalcdata(f,"x"),y=i.makeCalcdata(f,"y"),v=c(f,i,"y",y),x=!!f.yperiodalignment,l="y"):(p=i.makeCalcdata(f,"y"),y=o.makeCalcdata(f,"x"),v=c(f,o,"x",y),x=!!f.xperiodalignment,l="x"),d=v.vals;for(var _=Math.min(d.length,p.length),s=new Array(_),w=0,b,h=!1,m=0;m<_;m++){var u=p[m]||0,L=!1;(p[m]!==e||n(f.measure[m])||a(f.measure[m]))&&m+1<_&&(p[m+1]!==e||n(f.measure[m+1])||a(f.measure[m+1]))&&(L=!0);var S=s[m]={i:m,p:d[m],s:u,rawS:u,cNext:L};a(f.measure[m])?(w=S.s,S.isSum=!0,S.dir="totals",S.s=w):n(f.measure[m])?(S.isSum=!0,S.dir="totals",S.s=w):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",b=S.s,S.s=w+b,w+=b),S.dir==="totals"&&(h=!0),x&&(s[m].orig_p=y[m],s[m][l+"End"]=v.ends[m],s[m][l+"Start"]=v.starts[m]),f.ids&&(S.id=String(f.ids[m])),S.v=(f.base||0)+w}return s.length&&(s[0].hasTotals=h),M(f.text,s,"tx"),M(f.hovertext,s,"htx"),A(s,f),s}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929}],1108:[function(g,ne,ae){ne.exports={eventDataKeys:["initial","delta","final"]}},{}],1109:[function(g,ne,ae){var T=g("../bar/cross_trace_calc").setGroupPositions;ne.exports=function(M,A){var e=M._fullLayout,a=M._fullData,n=M.calcdata,t=A.xaxis,r=A.yaxis,f=[],o=[],i=[],p,d;for(d=0;d<a.length;d++){var y=a[d];y.visible===!0&&y.xaxis===t._id&&y.yaxis===r._id&&y.type==="waterfall"&&(p=n[d],y.orientation==="h"?i.push(p):o.push(p),f.push(p))}var v={mode:e.waterfallmode,norm:e.waterfallnorm,gap:e.waterfallgap,groupgap:e.waterfallgroupgap};for(T(M,t,r,o,v),T(M,r,t,i,v),d=0;d<f.length;d++){p=f[d];for(var x=0;x<p.length;x++){var l=p[x];l.isSum===!1&&(l.s0+=x===0?0:p[x-1].s),x+1<p.length&&(p[x].nextP0=p[x+1].p0,p[x].nextS0=p[x+1].s0)}}}},{"../bar/cross_trace_calc":651}],1110:[function(g,ne,ae){var T=g("../../lib"),c=g("../bar/defaults").handleGroupingDefaults,M=g("../bar/defaults").handleText,A=g("../scatter/xy_defaults"),e=g("../scatter/period_defaults"),a=g("./attributes"),n=g("../../components/color"),t=g("../../constants/delta.js"),r=t.INCREASING.COLOR,f=t.DECREASING.COLOR,o="#4499FF";function i(y,v,x){y(v+".marker.color",x),y(v+".marker.line.color",n.defaultLine),y(v+".marker.line.width")}function p(y,v,x,l){function _(m,u){return T.coerce(y,v,a,m,u)}var s=A(y,v,l,_);if(!s){v.visible=!1;return}e(y,v,l,_),_("xhoverformat"),_("yhoverformat"),_("measure"),_("orientation",v.x&&!v.y?"h":"v"),_("base"),_("offset"),_("width"),_("text"),_("hovertext"),_("hovertemplate");var w=_("textposition");M(y,v,l,_,w,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),v.textposition!=="none"&&(_("texttemplate"),v.texttemplate||_("textinfo")),i(_,"increasing",r),i(_,"decreasing",f),i(_,"totals",o);var b=_("connector.visible");if(b){_("connector.mode");var h=_("connector.line.width");h&&(_("connector.line.color"),_("connector.line.dash"))}}function d(y,v){var x,l;function _(w){return T.coerce(l._input,l,a,w)}if(v.waterfallmode==="group")for(var s=0;s<y.length;s++)l=y[s],x=l._input,c(x,l,v,_)}ne.exports={supplyDefaults:p,crossTraceDefaults:d}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":1106}],1111:[function(g,ne,ae){ne.exports=function(c,M){return c.x="xVal"in M?M.xVal:M.x,c.y="yVal"in M?M.yVal:M.y,"initial"in M&&(c.initial=M.initial),"delta"in M&&(c.delta=M.delta),"final"in M&&(c.final=M.final),M.xa&&(c.xaxis=M.xa),M.ya&&(c.yaxis=M.ya),c}},{}],1112:[function(g,ne,ae){var T=g("../../plots/cartesian/axes").hoverLabelText,c=g("../../components/color").opacity,M=g("../bar/hover").hoverOnBars,A=g("../../constants/delta.js"),e={increasing:A.INCREASING.SYMBOL,decreasing:A.DECREASING.SYMBOL};ne.exports=function(t,r,f,o,i){var p=M(t,r,f,o,i);if(!p)return;var d=p.cd,y=d[0].trace,v=y.orientation==="h",x=v?"x":"y",l=v?t.xa:t.ya;function _(P){return T(l,P,y[x+"hoverformat"])}var s=p.index,w=d[s],b=w.isSum?w.b+w.s:w.rawS;if(!w.isSum){p.initial=w.b+w.s-b,p.delta=b,p.final=p.initial+p.delta;var h=_(Math.abs(p.delta));p.deltaLabel=b<0?"("+h+")":h,p.finalLabel=_(p.final),p.initialLabel=_(p.initial)}var m=w.hi||y.hoverinfo,u=[];if(m&&m!=="none"&&m!=="skip"){var L=m==="all",S=m.split("+"),k=function(P){return L||S.indexOf(P)!==-1};w.isSum||(k("final")&&(v?!k("x"):!k("y"))&&u.push(p.finalLabel),k("delta")&&(b<0?u.push(p.deltaLabel+" "+e.decreasing):u.push(p.deltaLabel+" "+e.increasing)),k("initial")&&u.push("Initial: "+p.initialLabel))}return u.length&&(p.extraText=u.join("<br>")),p.color=a(y,w),[p]};function a(n,t){var r=n[t.dir].marker,f=r.color,o=r.line.color,i=r.line.width;if(c(f))return f;if(c(o)&&i)return o}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1113:[function(g,ne,ae){ne.exports={attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults").supplyDefaults,crossTraceDefaults:g("./defaults").crossTraceDefaults,supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc"),crossTraceCalc:g("./cross_trace_calc"),plot:g("./plot"),style:g("./style").style,hoverPoints:g("./hover"),eventData:g("./event_data"),selectPoints:g("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:g("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1106,"./calc":1107,"./cross_trace_calc":1109,"./defaults":1110,"./event_data":1111,"./hover":1112,"./layout_attributes":1114,"./layout_defaults":1115,"./plot":1116,"./style":1117}],1114:[function(g,ne,ae){ne.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1115:[function(g,ne,ae){var T=g("../../lib"),c=g("./layout_attributes");ne.exports=function(M,A,e){var a=!1;function n(f,o){return T.coerce(M,A,c,f,o)}for(var t=0;t<e.length;t++){var r=e[t];if(r.visible&&r.type==="waterfall"){a=!0;break}}a&&(n("waterfallmode"),n("waterfallgap",.2),n("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1114}],1116:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../lib"),M=g("../../components/drawing"),A=g("../../constants/numerical").BADNUM,e=g("../bar/plot"),a=g("../bar/uniform_text").clearMinTextSize;ne.exports=function(f,o,i,p){var d=f._fullLayout;a("waterfall",d),e.plot(f,o,i,p,{mode:d.waterfallmode,norm:d.waterfallmode,gap:d.waterfallgap,groupgap:d.waterfallgroupgap}),n(f,o,i,p)};function n(r,f,o,i){var p=f.xaxis,d=f.yaxis;c.makeTraceGroups(i,o,"trace bars").each(function(y){var v=T.select(this),x=y[0].trace,l=c.ensureSingle(v,"g","lines");if(!x.connector||!x.connector.visible){l.remove();return}var _=x.orientation==="h",s=x.connector.mode,w=l.selectAll("g.line").data(c.identity);w.enter().append("g").classed("line",!0),w.exit().remove();var b=w.size();w.each(function(h,m){if(!(m!==b-1&&!h.cNext)){var u=t(h,p,d,_),L=u[0],S=u[1],k="";L[0]!==A&&S[0]!==A&&L[1]!==A&&S[1]!==A&&(s==="spanning"&&!h.isSum&&m>0&&(_?k+="M"+L[0]+","+S[1]+"V"+S[0]:k+="M"+L[1]+","+S[0]+"H"+L[0]),s!=="between"&&(h.isSum||m<b-1)&&(_?k+="M"+L[1]+","+S[0]+"V"+S[1]:k+="M"+L[0]+","+S[1]+"H"+L[1]),L[2]!==A&&S[2]!==A&&(_?k+="M"+L[1]+","+S[1]+"V"+S[2]:k+="M"+L[1]+","+S[1]+"H"+L[2])),k===""&&(k="M0,0Z"),c.ensureSingle(T.select(this),"path").attr("d",k).call(M.setClipUrl,f.layerClipId,r)}})})}function t(r,f,o,i){var p=[],d=[],y=i?f:o,v=i?o:f;return p[0]=y.c2p(r.s0,!0),d[0]=v.c2p(r.p0,!0),p[1]=y.c2p(r.s1,!0),d[1]=v.c2p(r.p1,!0),p[2]=y.c2p(r.nextS0,!0),d[2]=v.c2p(r.nextP0,!0),i?[p,d]:[d,p]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1117:[function(g,ne,ae){var T=g("@plotly/d3"),c=g("../../components/drawing"),M=g("../../components/color"),A=g("../../constants/interactions").DESELECTDIM,e=g("../bar/style"),a=g("../bar/uniform_text").resizeText,n=e.styleTextPoints;function t(r,f,o){var i=o||T.select(r).selectAll("g.waterfalllayer").selectAll("g.trace");a(r,i,"waterfall"),i.style("opacity",function(p){return p[0].trace.opacity}),i.each(function(p){var d=T.select(this),y=p[0].trace;d.selectAll(".point > path").each(function(v){if(!v.isBlank){var x=y[v.dir].marker;T.select(this).call(M.fill,x.color).call(M.stroke,x.line.color).call(c.dashLine,x.line.dash,x.line.width).style("opacity",y.selectedpoints&&!v.selected?A:1)}}),n(d,y,r),d.selectAll(".lines").each(function(){var v=y.connector.line;c.lineGroupStyle(T.select(this).selectAll("path"),v.width,v.color,v.dash)})})}ne.exports={style:t}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1118:[function(g,ne,ae){var T=g("../plots/cartesian/axes"),c=g("../lib"),M=g("../plot_api/plot_schema"),A=g("./helpers").pointsAccessorFunction,e=g("../constants/numerical").BADNUM;ae.moduleType="transform",ae.name="aggregate";var a=ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},n=a.aggregations;ae.supplyDefaults=function(p,d){var y={},v;function x(P,z){return c.coerce(p,y,a,P,z)}var l=x("enabled");if(!l)return y;var _=M.findArrayAttributes(d),s={};for(v=0;v<_.length;v++)s[_[v]]=1;var w=x("groups");if(!Array.isArray(w)){if(!s[w])return y.enabled=!1,y;s[w]=0}var b=p.aggregations||[],h=y.aggregations=new Array(b.length),m;function u(P,z){return c.coerce(b[v],m,n,P,z)}for(v=0;v<b.length;v++){m={_index:v};var L=u("target"),S=u("func"),k=u("enabled");k&&L&&(s[L]||S==="count"&&s[L]===void 0)?(S==="stddev"&&u("funcmode"),s[L]=0,h[v]=m):h[v]={enabled:!1,_index:v}}for(v=0;v<_.length;v++)s[_[v]]&&h.push({target:_[v],func:n.func.dflt,enabled:!0,_index:-1});return y},ae.calcTransform=function(p,d,y){if(!!y.enabled){var v=y.groups,x=c.getTargetArray(d,{target:v});if(!!x){var l,_,s,w,b={},h={},m=[],u=A(d.transforms,y),L=x.length;for(d._length&&(L=Math.min(L,d._length)),l=0;l<L;l++)_=x[l],s=b[_],s===void 0?(b[_]=m.length,w=[l],m.push(w),h[b[_]]=u(l)):(m[s].push(l),h[b[_]]=(h[b[_]]||[]).concat(u(l)));y._indexToPoints=h;var S=y.aggregations;for(l=0;l<S.length;l++)t(p,d,m,S[l]);typeof v=="string"&&t(p,d,m,{target:v,func:"first",enabled:!0}),d._length=m.length}}};function t(p,d,y,v){if(!!v.enabled){for(var x=v.target,l=c.nestedProperty(d,x),_=l.get(),s=T.getDataConversions(p,d,x,_),w=r(v,s),b=new Array(y.length),h=0;h<y.length;h++)b[h]=w(_,y[h]);l.set(b),v.func==="count"&&c.pushUnique(d._arrayAttrs,x)}}function r(p,d){var y=p.func,v=d.d2c,x=d.c2d;switch(y){case"count":return f;case"first":return o;case"last":return i;case"sum":return function(l,_){for(var s=0,w=0;w<_.length;w++){var b=v(l[_[w]]);b!==e&&(s+=b)}return x(s)};case"avg":return function(l,_){for(var s=0,w=0,b=0;b<_.length;b++){var h=v(l[_[b]]);h!==e&&(s+=h,w++)}return w?x(s/w):e};case"min":return function(l,_){for(var s=1/0,w=0;w<_.length;w++){var b=v(l[_[w]]);b!==e&&(s=Math.min(s,b))}return s===1/0?e:x(s)};case"max":return function(l,_){for(var s=-1/0,w=0;w<_.length;w++){var b=v(l[_[w]]);b!==e&&(s=Math.max(s,b))}return s===-1/0?e:x(s)};case"range":return function(l,_){for(var s=1/0,w=-1/0,b=0;b<_.length;b++){var h=v(l[_[b]]);h!==e&&(s=Math.min(s,h),w=Math.max(w,h))}return w===-1/0||s===1/0?e:x(w-s)};case"change":return function(l,_){var s=v(l[_[0]]),w=v(l[_[_.length-1]]);return s===e||w===e?e:x(w-s)};case"median":return function(l,_){for(var s=[],w=0;w<_.length;w++){var b=v(l[_[w]]);b!==e&&s.push(b)}if(!s.length)return e;s.sort(c.sorterAsc);var h=(s.length-1)/2;return x((s[Math.floor(h)]+s[Math.ceil(h)])/2)};case"mode":return function(l,_){for(var s={},w=0,b=e,h=0;h<_.length;h++){var m=v(l[_[h]]);if(m!==e){var u=s[m]=(s[m]||0)+1;u>w&&(w=u,b=m)}}return w?x(b):e};case"rms":return function(l,_){for(var s=0,w=0,b=0;b<_.length;b++){var h=v(l[_[b]]);h!==e&&(s+=h*h,w++)}return w?x(Math.sqrt(s/w)):e};case"stddev":return function(l,_){var s=0,w=0,b=1,h=e,m;for(m=0;m<_.length&&h===e;m++)h=v(l[_[m]]);if(h===e)return e;for(;m<_.length;m++){var u=v(l[_[m]]);if(u!==e){var L=u-h;s+=L,w+=L*L,b++}}var S=p.funcmode==="sample"?b-1:b;return S?Math.sqrt((w-s*s/b)/S):0}}}function f(p,d){return d.length}function o(p,d){return p[d[0]]}function i(p,d){return p[d[d.length-1]]}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1121}],1119:[function(g,ne,ae){var T=g("../lib"),c=g("../registry"),M=g("../plots/cartesian/axes"),A=g("./helpers").pointsAccessorFunction,e=g("../constants/filter_ops"),a=e.COMPARISON_OPS,n=e.INTERVAL_OPS,t=e.SET_OPS;ae.moduleType="transform",ae.name="filter",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(a).concat(n).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},ae.supplyDefaults=function(f){var o={};function i(v,x){return T.coerce(f,o,ae.attributes,v,x)}var p=i("enabled");if(p){var d=i("target");if(T.isArrayOrTypedArray(d)&&d.length===0)return o.enabled=!1,o;i("preservegaps"),i("operation"),i("value");var y=c.getComponentMethod("calendars","handleDefaults");y(f,o,"valuecalendar",null),y(f,o,"targetcalendar",null)}return o},ae.calcTransform=function(f,o,i){if(!i.enabled)return;var p=T.getTargetArray(o,i);if(!p)return;var d=i.target,y=p.length;o._length&&(y=Math.min(y,o._length));var v=i.targetcalendar,x=o._arrayAttrs,l=i.preservegaps;if(typeof d=="string"){var _=T.nestedProperty(o,d+"calendar").get();_&&(v=_)}var s=M.getDataToCoordFunc(f,o,d,p),w=r(i,s,v),b={},h={},m=0;function u(I,D){for(var R=0;R<x.length;R++){var B=T.nestedProperty(o,x[R]);I(B,D)}}var L,S;l?(L=function(I){b[I.astr]=T.extendDeep([],I.get()),I.set(new Array(y))},S=function(I,D){var R=b[I.astr][D];I.get()[D]=R}):(L=function(I){b[I.astr]=T.extendDeep([],I.get()),I.set([])},S=function(I,D){var R=b[I.astr][D];I.get().push(R)}),u(L);for(var k=A(o.transforms,i),P=0;P<y;P++){var z=w(p[P]);z?(u(S,P),h[m++]=k(P)):l&&m++}i._indexToPoints=h,o._length=m};function r(f,o,i){var p=f.operation,d=f.value,y=Array.isArray(d);function v(s){return s.indexOf(p)!==-1}var x=function(s){return o(s,0,f.valuecalendar)},l=function(s){return o(s,0,i)},_;switch(v(a)?_=x(y?d[0]:d):v(n)?_=y?[x(d[0]),x(d[1])]:[x(d),x(d)]:v(t)&&(_=y?d.map(x):[x(d)]),p){case"=":return function(s){return l(s)===_};case"!=":return function(s){return l(s)!==_};case"<":return function(s){return l(s)<_};case"<=":return function(s){return l(s)<=_};case">":return function(s){return l(s)>_};case">=":return function(s){return l(s)>=_};case"[]":return function(s){var w=l(s);return w>=_[0]&&w<=_[1]};case"()":return function(s){var w=l(s);return w>_[0]&&w<_[1]};case"[)":return function(s){var w=l(s);return w>=_[0]&&w<_[1]};case"(]":return function(s){var w=l(s);return w>_[0]&&w<=_[1]};case"][":return function(s){var w=l(s);return w<=_[0]||w>=_[1]};case")(":return function(s){var w=l(s);return w<_[0]||w>_[1]};case"](":return function(s){var w=l(s);return w<=_[0]||w>_[1]};case")[":return function(s){var w=l(s);return w<_[0]||w>=_[1]};case"{}":return function(s){return _.indexOf(l(s))!==-1};case"}{":return function(s){return _.indexOf(l(s))===-1}}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1121}],1120:[function(g,ne,ae){var T=g("../lib"),c=g("../plot_api/plot_schema"),M=g("../plots/plots"),A=g("./helpers").pointsAccessorFunction;ae.moduleType="transform",ae.name="groupby",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},ae.supplyDefaults=function(a,n,t){var r,f={};function o(x,l){return T.coerce(a,f,ae.attributes,x,l)}var i=o("enabled");if(!i)return f;o("groups"),o("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var p=a.styles,d=f.styles=[];if(p)for(r=0;r<p.length;r++){var y=d[r]={};T.coerce(p[r],d[r],ae.attributes.styles,"target");var v=T.coerce(p[r],d[r],ae.attributes.styles,"value");T.isPlainObject(v)?y.value=T.extendDeep({},v):v&&delete y.value}return f},ae.transform=function(a,n){var t,r,f,o=[];for(r=0;r<a.length;r++)for(t=e(a[r],n),f=0;f<t.length;f++)o.push(t[f]);return o};function e(a,n){var t,r,f,o,i,p,d,y,v,x,l=n.transform,_=n.transformIndex,s=a.transforms[_].groups,w=A(a.transforms,l);if(!T.isArrayOrTypedArray(s)||s.length===0)return[a];var b=T.filterUnique(s),h=new Array(b.length),m=s.length,u=c.findArrayAttributes(a),L=l.styles||[],S={};for(t=0;t<L.length;t++)S[L[t].target]=L[t].value;l.styles&&(x=T.keyedContainer(l,"styles","target","value.name"));var k={},P={};for(t=0;t<b.length;t++){p=b[t],k[p]=t,P[p]=0,d=h[t]=T.extendDeepNoArrays({},a),d._group=p,d.transforms[_]._indexToPoints={};var z=null;for(x&&(z=x.get(p)),z||z===""?d.name=z:d.name=T.templateString(l.nameformat,{trace:a.name,group:p}),y=d.transforms,d.transforms=[],r=0;r<y.length;r++)d.transforms[r]=T.extendDeepNoArrays({},y[r]);for(r=0;r<u.length;r++)T.nestedProperty(d,u[r]).set([])}for(f=0;f<u.length;f++){for(o=u[f],r=0,v=[];r<b.length;r++)v[r]=T.nestedProperty(h[r],o).get();for(i=T.nestedProperty(a,o).get(),r=0;r<m;r++)v[k[s[r]]].push(i[r])}for(r=0;r<m;r++){d=h[k[s[r]]];var I=d.transforms[_]._indexToPoints;I[P[s[r]]]=w(r),P[s[r]]++}for(t=0;t<b.length;t++)p=b[t],d=h[t],M.clearExpandedTraceDefaultColors(d),d=T.extendDeepNoArrays(d,S[p]||{});return h}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1121}],1121:[function(g,ne,ae){ae.pointsAccessorFunction=function(T,c){for(var M,A,e=0;e<T.length&&(M=T[e],M!==c);e++)!M._indexToPoints||M.enabled===!1||(A=M._indexToPoints);var a=A?function(n){return A[n]}:function(n){return[n]};return a}},{}],1122:[function(g,ne,ae){var T=g("../lib"),c=g("../plots/cartesian/axes"),M=g("./helpers").pointsAccessorFunction,A=g("../constants/numerical").BADNUM;ae.moduleType="transform",ae.name="sort",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},ae.supplyDefaults=function(n){var t={};function r(o,i){return T.coerce(n,t,ae.attributes,o,i)}var f=r("enabled");return f&&(r("target"),r("order")),t},ae.calcTransform=function(n,t,r){if(!!r.enabled){var f=T.getTargetArray(t,r);if(!!f){var o=r.target,i=f.length;t._length&&(i=Math.min(i,t._length));var p=t._arrayAttrs,d=c.getDataToCoordFunc(n,t,o,f),y=e(r,f,d,i),v=M(t.transforms,r),x={},l,_;for(l=0;l<p.length;l++){var s=T.nestedProperty(t,p[l]),w=s.get(),b=new Array(i);for(_=0;_<i;_++)b[_]=w[y[_]];s.set(b)}for(_=0;_<i;_++)x[_]=v(y[_]);r._indexToPoints=x,t._length=i}}};function e(n,t,r,f){var o=new Array(f),i=new Array(f),p;for(p=0;p<f;p++)o[p]={v:t[p],i:p};for(o.sort(a(n,r)),p=0;p<f;p++)i[p]=o[p].i;return i}function a(n,t){switch(n.order){case"ascending":return function(r,f){var o=t(r.v),i=t(f.v);return o===A?1:i===A?-1:o-i};case"descending":return function(r,f){var o=t(r.v),i=t(f.v);return o===A?1:i===A?-1:i-o}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1121}],1123:[function(g,ne,ae){ae.version="2.12.1"},{}],1124:[function(g,ne,ae){(function(T){(function(){(function(c){if(typeof ae=="object"&&typeof ne!="undefined")ne.exports=c();else{var M;typeof window!="undefined"?M=window:typeof T!="undefined"?M=T:typeof self!="undefined"?M=self:M=this,M.stackgl=c()}})(function(){return function(){function c(M,A,e){function a(r,f){if(!A[r]){if(!M[r]){var o=typeof g=="function"&&g;if(!f&&o)return o(r,!0);if(n)return n(r,!0);var i=new Error("Cannot find module '"+r+"'");throw i.code="MODULE_NOT_FOUND",i}var p=A[r]={exports:{}};M[r][0].call(p.exports,function(d){var y=M[r][1][d];return a(y||d)},p,p.exports,c,M,A,e)}return A[r].exports}for(var n=typeof g=="function"&&g,t=0;t<e.length;t++)a(e[t]);return a}return c}()({1:[function(c,M,A){A.byteLength=i,A.toByteArray=d,A.fromByteArray=x;for(var e=[],a=[],n=typeof Uint8Array!="undefined"?Uint8Array:Array,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,f=t.length;r<f;++r)e[r]=t[r],a[t.charCodeAt(r)]=r;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function o(l){var _=l.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=l.indexOf("=");s===-1&&(s=_);var w=s===_?0:4-s%4;return[s,w]}function i(l){var _=o(l),s=_[0],w=_[1];return(s+w)*3/4-w}function p(l,_,s){return(_+s)*3/4-s}function d(l){var _,s=o(l),w=s[0],b=s[1],h=new n(p(l,w,b)),m=0,u=b>0?w-4:w,L;for(L=0;L<u;L+=4)_=a[l.charCodeAt(L)]<<18|a[l.charCodeAt(L+1)]<<12|a[l.charCodeAt(L+2)]<<6|a[l.charCodeAt(L+3)],h[m++]=_>>16&255,h[m++]=_>>8&255,h[m++]=_&255;return b===2&&(_=a[l.charCodeAt(L)]<<2|a[l.charCodeAt(L+1)]>>4,h[m++]=_&255),b===1&&(_=a[l.charCodeAt(L)]<<10|a[l.charCodeAt(L+1)]<<4|a[l.charCodeAt(L+2)]>>2,h[m++]=_>>8&255,h[m++]=_&255),h}function y(l){return e[l>>18&63]+e[l>>12&63]+e[l>>6&63]+e[l&63]}function v(l,_,s){for(var w,b=[],h=_;h<s;h+=3)w=(l[h]<<16&16711680)+(l[h+1]<<8&65280)+(l[h+2]&255),b.push(y(w));return b.join("")}function x(l){for(var _,s=l.length,w=s%3,b=[],h=16383,m=0,u=s-w;m<u;m+=h)b.push(v(l,m,m+h>u?u:m+h));return w===1?(_=l[s-1],b.push(e[_>>2]+e[_<<4&63]+"==")):w===2&&(_=(l[s-2]<<8)+l[s-1],b.push(e[_>>10]+e[_>>4&63]+e[_<<2&63]+"=")),b.join("")}},{}],2:[function(c,M,A){},{}],3:[function(c,M,A){(function(e){(function(){var a=c("base64-js"),n=c("ieee754");A.Buffer=o,A.SlowBuffer=w,A.INSPECT_MAX_BYTES=50;var t=2147483647;A.kMaxLength=t,o.TYPED_ARRAY_SUPPORT=r(),!o.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{var ue=new Uint8Array(1);return ue.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ue.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(!!o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(!!o.isBuffer(this))return this.byteOffset}});function f(ue){if(ue>t)throw new RangeError('The value "'+ue+'" is invalid for option "size"');var pe=new Uint8Array(ue);return pe.__proto__=o.prototype,pe}function o(ue,pe,ge){if(typeof ue=="number"){if(typeof pe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(ue)}return i(ue,pe,ge)}typeof Symbol!="undefined"&&Symbol.species!=null&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192;function i(ue,pe,ge){if(typeof ue=="string")return v(ue,pe);if(ArrayBuffer.isView(ue))return x(ue);if(ue==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue);if(le(ue,ArrayBuffer)||ue&&le(ue.buffer,ArrayBuffer))return l(ue,pe,ge);if(typeof ue=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Te=ue.valueOf&&ue.valueOf();if(Te!=null&&Te!==ue)return o.from(Te,pe,ge);var _e=_(ue);if(_e)return _e;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ue[Symbol.toPrimitive]=="function")return o.from(ue[Symbol.toPrimitive]("string"),pe,ge);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue)}o.from=function(ue,pe,ge){return i(ue,pe,ge)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array;function p(ue){if(typeof ue!="number")throw new TypeError('"size" argument must be of type number');if(ue<0)throw new RangeError('The value "'+ue+'" is invalid for option "size"')}function d(ue,pe,ge){return p(ue),ue<=0?f(ue):pe!==void 0?typeof ge=="string"?f(ue).fill(pe,ge):f(ue).fill(pe):f(ue)}o.alloc=function(ue,pe,ge){return d(ue,pe,ge)};function y(ue){return p(ue),f(ue<0?0:s(ue)|0)}o.allocUnsafe=function(ue){return y(ue)},o.allocUnsafeSlow=function(ue){return y(ue)};function v(ue,pe){if((typeof pe!="string"||pe==="")&&(pe="utf8"),!o.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);var ge=b(ue,pe)|0,Te=f(ge),_e=Te.write(ue,pe);return _e!==ge&&(Te=Te.slice(0,_e)),Te}function x(ue){for(var pe=ue.length<0?0:s(ue.length)|0,ge=f(pe),Te=0;Te<pe;Te+=1)ge[Te]=ue[Te]&255;return ge}function l(ue,pe,ge){if(pe<0||ue.byteLength<pe)throw new RangeError('"offset" is outside of buffer bounds');if(ue.byteLength<pe+(ge||0))throw new RangeError('"length" is outside of buffer bounds');var Te;return pe===void 0&&ge===void 0?Te=new Uint8Array(ue):ge===void 0?Te=new Uint8Array(ue,pe):Te=new Uint8Array(ue,pe,ge),Te.__proto__=o.prototype,Te}function _(ue){if(o.isBuffer(ue)){var pe=s(ue.length)|0,ge=f(pe);return ge.length===0||ue.copy(ge,0,0,pe),ge}if(ue.length!==void 0)return typeof ue.length!="number"||ye(ue.length)?f(0):x(ue);if(ue.type==="Buffer"&&Array.isArray(ue.data))return x(ue.data)}function s(ue){if(ue>=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return ue|0}function w(ue){return+ue!=ue&&(ue=0),o.alloc(+ue)}o.isBuffer=function(pe){return pe!=null&&pe._isBuffer===!0&&pe!==o.prototype},o.compare=function(pe,ge){if(le(pe,Uint8Array)&&(pe=o.from(pe,pe.offset,pe.byteLength)),le(ge,Uint8Array)&&(ge=o.from(ge,ge.offset,ge.byteLength)),!o.isBuffer(pe)||!o.isBuffer(ge))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(pe===ge)return 0;for(var Te=pe.length,_e=ge.length,De=0,Oe=Math.min(Te,_e);De<Oe;++De)if(pe[De]!==ge[De]){Te=pe[De],_e=ge[De];break}return Te<_e?-1:_e<Te?1:0},o.isEncoding=function(pe){switch(String(pe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(pe,ge){if(!Array.isArray(pe))throw new TypeError('"list" argument must be an Array of Buffers');if(pe.length===0)return o.alloc(0);var Te;if(ge===void 0)for(ge=0,Te=0;Te<pe.length;++Te)ge+=pe[Te].length;var _e=o.allocUnsafe(ge),De=0;for(Te=0;Te<pe.length;++Te){var Oe=pe[Te];if(le(Oe,Uint8Array)&&(Oe=o.from(Oe)),!o.isBuffer(Oe))throw new TypeError('"list" argument must be an Array of Buffers');Oe.copy(_e,De),De+=Oe.length}return _e};function b(ue,pe){if(o.isBuffer(ue))return ue.length;if(ArrayBuffer.isView(ue)||le(ue,ArrayBuffer))return ue.byteLength;if(typeof ue!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ue);var ge=ue.length,Te=arguments.length>2&&arguments[2]===!0;if(!Te&&ge===0)return 0;for(var _e=!1;;)switch(pe){case"ascii":case"latin1":case"binary":return ge;case"utf8":case"utf-8":return W(ue).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge*2;case"hex":return ge>>>1;case"base64":return ee(ue).length;default:if(_e)return Te?-1:W(ue).length;pe=(""+pe).toLowerCase(),_e=!0}}o.byteLength=b;function h(ue,pe,ge){var Te=!1;if((pe===void 0||pe<0)&&(pe=0),pe>this.length||((ge===void 0||ge>this.length)&&(ge=this.length),ge<=0)||(ge>>>=0,pe>>>=0,ge<=pe))return"";for(ue||(ue="utf8");;)switch(ue){case"hex":return J(this,pe,ge);case"utf8":case"utf-8":return B(this,pe,ge);case"ascii":return Y(this,pe,ge);case"latin1":case"binary":return K(this,pe,ge);case"base64":return R(this,pe,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,pe,ge);default:if(Te)throw new TypeError("Unknown encoding: "+ue);ue=(ue+"").toLowerCase(),Te=!0}}o.prototype._isBuffer=!0;function m(ue,pe,ge){var Te=ue[pe];ue[pe]=ue[ge],ue[ge]=Te}o.prototype.swap16=function(){var pe=this.length;if(pe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ge=0;ge<pe;ge+=2)m(this,ge,ge+1);return this},o.prototype.swap32=function(){var pe=this.length;if(pe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ge=0;ge<pe;ge+=4)m(this,ge,ge+3),m(this,ge+1,ge+2);return this},o.prototype.swap64=function(){var pe=this.length;if(pe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ge=0;ge<pe;ge+=8)m(this,ge,ge+7),m(this,ge+1,ge+6),m(this,ge+2,ge+5),m(this,ge+3,ge+4);return this},o.prototype.toString=function(){var pe=this.length;return pe===0?"":arguments.length===0?B(this,0,pe):h.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(pe){if(!o.isBuffer(pe))throw new TypeError("Argument must be a Buffer");return this===pe?!0:o.compare(this,pe)===0},o.prototype.inspect=function(){var pe="",ge=A.INSPECT_MAX_BYTES;return pe=this.toString("hex",0,ge).replace(/(.{2})/g,"$1 ").trim(),this.length>ge&&(pe+=" ... "),"<Buffer "+pe+">"},o.prototype.compare=function(pe,ge,Te,_e,De){if(le(pe,Uint8Array)&&(pe=o.from(pe,pe.offset,pe.byteLength)),!o.isBuffer(pe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof pe);if(ge===void 0&&(ge=0),Te===void 0&&(Te=pe?pe.length:0),_e===void 0&&(_e=0),De===void 0&&(De=this.length),ge<0||Te>pe.length||_e<0||De>this.length)throw new RangeError("out of range index");if(_e>=De&&ge>=Te)return 0;if(_e>=De)return-1;if(ge>=Te)return 1;if(ge>>>=0,Te>>>=0,_e>>>=0,De>>>=0,this===pe)return 0;for(var Oe=De-_e,Ue=Te-ge,xe=Math.min(Oe,Ue),Pe=this.slice(_e,De),Ve=pe.slice(ge,Te),Qe=0;Qe<xe;++Qe)if(Pe[Qe]!==Ve[Qe]){Oe=Pe[Qe],Ue=Ve[Qe];break}return Oe<Ue?-1:Ue<Oe?1:0};function u(ue,pe,ge,Te,_e){if(ue.length===0)return-1;if(typeof ge=="string"?(Te=ge,ge=0):ge>2147483647?ge=2147483647:ge<-2147483648&&(ge=-2147483648),ge=+ge,ye(ge)&&(ge=_e?0:ue.length-1),ge<0&&(ge=ue.length+ge),ge>=ue.length){if(_e)return-1;ge=ue.length-1}else if(ge<0)if(_e)ge=0;else return-1;if(typeof pe=="string"&&(pe=o.from(pe,Te)),o.isBuffer(pe))return pe.length===0?-1:L(ue,pe,ge,Te,_e);if(typeof pe=="number")return pe=pe&255,typeof Uint8Array.prototype.indexOf=="function"?_e?Uint8Array.prototype.indexOf.call(ue,pe,ge):Uint8Array.prototype.lastIndexOf.call(ue,pe,ge):L(ue,[pe],ge,Te,_e);throw new TypeError("val must be string, number or Buffer")}function L(ue,pe,ge,Te,_e){var De=1,Oe=ue.length,Ue=pe.length;if(Te!==void 0&&(Te=String(Te).toLowerCase(),Te==="ucs2"||Te==="ucs-2"||Te==="utf16le"||Te==="utf-16le")){if(ue.length<2||pe.length<2)return-1;De=2,Oe/=2,Ue/=2,ge/=2}function xe(Le,Ne){return De===1?Le[Ne]:Le.readUInt16BE(Ne*De)}var Pe;if(_e){var Ve=-1;for(Pe=ge;Pe<Oe;Pe++)if(xe(ue,Pe)===xe(pe,Ve===-1?0:Pe-Ve)){if(Ve===-1&&(Ve=Pe),Pe-Ve+1===Ue)return Ve*De}else Ve!==-1&&(Pe-=Pe-Ve),Ve=-1}else for(ge+Ue>Oe&&(ge=Oe-Ue),Pe=ge;Pe>=0;Pe--){for(var Qe=!0,Fe=0;Fe<Ue;Fe++)if(xe(ue,Pe+Fe)!==xe(pe,Fe)){Qe=!1;break}if(Qe)return Pe}return-1}o.prototype.includes=function(pe,ge,Te){return this.indexOf(pe,ge,Te)!==-1},o.prototype.indexOf=function(pe,ge,Te){return u(this,pe,ge,Te,!0)},o.prototype.lastIndexOf=function(pe,ge,Te){return u(this,pe,ge,Te,!1)};function S(ue,pe,ge,Te){ge=Number(ge)||0;var _e=ue.length-ge;Te?(Te=Number(Te),Te>_e&&(Te=_e)):Te=_e;var De=pe.length;Te>De/2&&(Te=De/2);for(var Oe=0;Oe<Te;++Oe){var Ue=parseInt(pe.substr(Oe*2,2),16);if(ye(Ue))return Oe;ue[ge+Oe]=Ue}return Oe}function k(ue,pe,ge,Te){return ie(W(pe,ue.length-ge),ue,ge,Te)}function P(ue,pe,ge,Te){return ie(X(pe),ue,ge,Te)}function z(ue,pe,ge,Te){return P(ue,pe,ge,Te)}function I(ue,pe,ge,Te){return ie(ee(pe),ue,ge,Te)}function D(ue,pe,ge,Te){return ie(te(pe,ue.length-ge),ue,ge,Te)}o.prototype.write=function(pe,ge,Te,_e){if(ge===void 0)_e="utf8",Te=this.length,ge=0;else if(Te===void 0&&typeof ge=="string")_e=ge,Te=this.length,ge=0;else if(isFinite(ge))ge=ge>>>0,isFinite(Te)?(Te=Te>>>0,_e===void 0&&(_e="utf8")):(_e=Te,Te=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var De=this.length-ge;if((Te===void 0||Te>De)&&(Te=De),pe.length>0&&(Te<0||ge<0)||ge>this.length)throw new RangeError("Attempt to write outside buffer bounds");_e||(_e="utf8");for(var Oe=!1;;)switch(_e){case"hex":return S(this,pe,ge,Te);case"utf8":case"utf-8":return k(this,pe,ge,Te);case"ascii":return P(this,pe,ge,Te);case"latin1":case"binary":return z(this,pe,ge,Te);case"base64":return I(this,pe,ge,Te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,pe,ge,Te);default:if(Oe)throw new TypeError("Unknown encoding: "+_e);_e=(""+_e).toLowerCase(),Oe=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(ue,pe,ge){return pe===0&&ge===ue.length?a.fromByteArray(ue):a.fromByteArray(ue.slice(pe,ge))}function B(ue,pe,ge){ge=Math.min(ue.length,ge);for(var Te=[],_e=pe;_e<ge;){var De=ue[_e],Oe=null,Ue=De>239?4:De>223?3:De>191?2:1;if(_e+Ue<=ge){var xe,Pe,Ve,Qe;switch(Ue){case 1:De<128&&(Oe=De);break;case 2:xe=ue[_e+1],(xe&192)==128&&(Qe=(De&31)<<6|xe&63,Qe>127&&(Oe=Qe));break;case 3:xe=ue[_e+1],Pe=ue[_e+2],(xe&192)==128&&(Pe&192)==128&&(Qe=(De&15)<<12|(xe&63)<<6|Pe&63,Qe>2047&&(Qe<55296||Qe>57343)&&(Oe=Qe));break;case 4:xe=ue[_e+1],Pe=ue[_e+2],Ve=ue[_e+3],(xe&192)==128&&(Pe&192)==128&&(Ve&192)==128&&(Qe=(De&15)<<18|(xe&63)<<12|(Pe&63)<<6|Ve&63,Qe>65535&&Qe<1114112&&(Oe=Qe))}}Oe===null?(Oe=65533,Ue=1):Oe>65535&&(Oe-=65536,Te.push(Oe>>>10&1023|55296),Oe=56320|Oe&1023),Te.push(Oe),_e+=Ue}return V(Te)}var F=4096;function V(ue){var pe=ue.length;if(pe<=F)return String.fromCharCode.apply(String,ue);for(var ge="",Te=0;Te<pe;)ge+=String.fromCharCode.apply(String,ue.slice(Te,Te+=F));return ge}function Y(ue,pe,ge){var Te="";ge=Math.min(ue.length,ge);for(var _e=pe;_e<ge;++_e)Te+=String.fromCharCode(ue[_e]&127);return Te}function K(ue,pe,ge){var Te="";ge=Math.min(ue.length,ge);for(var _e=pe;_e<ge;++_e)Te+=String.fromCharCode(ue[_e]);return Te}function J(ue,pe,ge){var Te=ue.length;(!pe||pe<0)&&(pe=0),(!ge||ge<0||ge>Te)&&(ge=Te);for(var _e="",De=pe;De<ge;++De)_e+=Q(ue[De]);return _e}function G(ue,pe,ge){for(var Te=ue.slice(pe,ge),_e="",De=0;De<Te.length;De+=2)_e+=String.fromCharCode(Te[De]+Te[De+1]*256);return _e}o.prototype.slice=function(pe,ge){var Te=this.length;pe=~~pe,ge=ge===void 0?Te:~~ge,pe<0?(pe+=Te,pe<0&&(pe=0)):pe>Te&&(pe=Te),ge<0?(ge+=Te,ge<0&&(ge=0)):ge>Te&&(ge=Te),ge<pe&&(ge=pe);var _e=this.subarray(pe,ge);return _e.__proto__=o.prototype,_e};function Z(ue,pe,ge){if(ue%1!=0||ue<0)throw new RangeError("offset is not uint");if(ue+pe>ge)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUIntLE=function(pe,ge,Te){pe=pe>>>0,ge=ge>>>0,Te||Z(pe,ge,this.length);for(var _e=this[pe],De=1,Oe=0;++Oe<ge&&(De*=256);)_e+=this[pe+Oe]*De;return _e},o.prototype.readUIntBE=function(pe,ge,Te){pe=pe>>>0,ge=ge>>>0,Te||Z(pe,ge,this.length);for(var _e=this[pe+--ge],De=1;ge>0&&(De*=256);)_e+=this[pe+--ge]*De;return _e},o.prototype.readUInt8=function(pe,ge){return pe=pe>>>0,ge||Z(pe,1,this.length),this[pe]},o.prototype.readUInt16LE=function(pe,ge){return pe=pe>>>0,ge||Z(pe,2,this.length),this[pe]|this[pe+1]<<8},o.prototype.readUInt16BE=function(pe,ge){return pe=pe>>>0,ge||Z(pe,2,this.length),this[pe]<<8|this[pe+1]},o.prototype.readUInt32LE=function(pe,ge){return pe=pe>>>0,ge||Z(pe,4,this.length),(this[pe]|this[pe+1]<<8|this[pe+2]<<16)+this[pe+3]*16777216},o.prototype.readUInt32BE=function(pe,ge){return pe=pe>>>0,ge||Z(pe,4,this.length),this[pe]*16777216+(this[pe+1]<<16|this[pe+2]<<8|this[pe+3])},o.prototype.readIntLE=function(pe,ge,Te){pe=pe>>>0,ge=ge>>>0,Te||Z(pe,ge,this.length);for(var _e=this[pe],De=1,Oe=0;++Oe<ge&&(De*=256);)_e+=this[pe+Oe]*De;return De*=128,_e>=De&&(_e-=Math.pow(2,8*ge)),_e},o.prototype.readIntBE=function(pe,ge,Te){pe=pe>>>0,ge=ge>>>0,Te||Z(pe,ge,this.length);for(var _e=ge,De=1,Oe=this[pe+--_e];_e>0&&(De*=256);)Oe+=this[pe+--_e]*De;return De*=128,Oe>=De&&(Oe-=Math.pow(2,8*ge)),Oe},o.prototype.readInt8=function(pe,ge){return pe=pe>>>0,ge||Z(pe,1,this.length),this[pe]&128?(255-this[pe]+1)*-1:this[pe]},o.prototype.readInt16LE=function(pe,ge){pe=pe>>>0,ge||Z(pe,2,this.length);var Te=this[pe]|this[pe+1]<<8;return Te&32768?Te|4294901760:Te},o.prototype.readInt16BE=function(pe,ge){pe=pe>>>0,ge||Z(pe,2,this.length);var Te=this[pe+1]|this[pe]<<8;return Te&32768?Te|4294901760:Te},o.prototype.readInt32LE=function(pe,ge){return pe=pe>>>0,ge||Z(pe,4,this.length),this[pe]|this[pe+1]<<8|this[pe+2]<<16|this[pe+3]<<24},o.prototype.readInt32BE=function(pe,ge){return pe=pe>>>0,ge||Z(pe,4,this.length),this[pe]<<24|this[pe+1]<<16|this[pe+2]<<8|this[pe+3]},o.prototype.readFloatLE=function(pe,ge){return pe=pe>>>0,ge||Z(pe,4,this.length),n.read(this,pe,!0,23,4)},o.prototype.readFloatBE=function(pe,ge){return pe=pe>>>0,ge||Z(pe,4,this.length),n.read(this,pe,!1,23,4)},o.prototype.readDoubleLE=function(pe,ge){return pe=pe>>>0,ge||Z(pe,8,this.length),n.read(this,pe,!0,52,8)},o.prototype.readDoubleBE=function(pe,ge){return pe=pe>>>0,ge||Z(pe,8,this.length),n.read(this,pe,!1,52,8)};function re(ue,pe,ge,Te,_e,De){if(!o.isBuffer(ue))throw new TypeError('"buffer" argument must be a Buffer instance');if(pe>_e||pe<De)throw new RangeError('"value" argument is out of bounds');if(ge+Te>ue.length)throw new RangeError("Index out of range")}o.prototype.writeUIntLE=function(pe,ge,Te,_e){if(pe=+pe,ge=ge>>>0,Te=Te>>>0,!_e){var De=Math.pow(2,8*Te)-1;re(this,pe,ge,Te,De,0)}var Oe=1,Ue=0;for(this[ge]=pe&255;++Ue<Te&&(Oe*=256);)this[ge+Ue]=pe/Oe&255;return ge+Te},o.prototype.writeUIntBE=function(pe,ge,Te,_e){if(pe=+pe,ge=ge>>>0,Te=Te>>>0,!_e){var De=Math.pow(2,8*Te)-1;re(this,pe,ge,Te,De,0)}var Oe=Te-1,Ue=1;for(this[ge+Oe]=pe&255;--Oe>=0&&(Ue*=256);)this[ge+Oe]=pe/Ue&255;return ge+Te},o.prototype.writeUInt8=function(pe,ge,Te){return pe=+pe,ge=ge>>>0,Te||re(this,pe,ge,1,255,0),this[ge]=pe&255,ge+1},o.prototype.writeUInt16LE=function(pe,ge,Te){return pe=+pe,ge=ge>>>0,Te||re(this,pe,ge,2,65535,0),this[ge]=pe&255,this[ge+1]=pe>>>8,ge+2},o.prototype.writeUInt16BE=function(pe,ge,Te){return pe=+pe,ge=ge>>>0,Te||re(this,pe,ge,2,65535,0),this[ge]=pe>>>8,this[ge+1]=pe&255,ge+2},o.prototype.writeUInt32LE=function(pe,ge,Te){return pe=+pe,ge=ge>>>0,Te||re(this,pe,ge,4,4294967295,0),this[ge+3]=pe>>>24,this[ge+2]=pe>>>16,this[ge+1]=pe>>>8,this[ge]=pe&255,ge+4},o.prototype.writeUInt32BE=function(pe,ge,Te){return pe=+pe,ge=ge>>>0,Te||re(this,pe,ge,4,4294967295,0),this[ge]=pe>>>24,this[ge+1]=pe>>>16,this[ge+2]=pe>>>8,this[ge+3]=pe&255,ge+4},o.prototype.writeIntLE=function(pe,ge,Te,_e){if(pe=+pe,ge=ge>>>0,!_e){var De=Math.pow(2,8*Te-1);re(this,pe,ge,Te,De-1,-De)}var Oe=0,Ue=1,xe=0;for(this[ge]=pe&255;++Oe<Te&&(Ue*=256);)pe<0&&xe===0&&this[ge+Oe-1]!==0&&(xe=1),this[ge+Oe]=(pe/Ue>>0)-xe&255;return ge+Te},o.prototype.writeIntBE=function(pe,ge,Te,_e){if(pe=+pe,ge=ge>>>0,!_e){var De=Math.pow(2,8*Te-1);re(this,pe,ge,Te,De-1,-De)}var Oe=Te-1,Ue=1,xe=0;for(this[ge+Oe]=pe&255;--Oe>=0&&(Ue*=256);)pe<0&&xe===0&&this[ge+Oe+1]!==0&&(xe=1),this[ge+Oe]=(pe/Ue>>0)-xe&255;return ge+Te},o.prototype.writeInt8=function(pe,ge,Te){return pe=+pe,ge=ge>>>0,Te||re(this,pe,ge,1,127,-128),pe<0&&(pe=255+pe+1),this[ge]=pe&255,ge+1},o.prototype.writeInt16LE=function(pe,ge,Te){return pe=+pe,ge=ge>>>0,Te||re(this,pe,ge,2,32767,-32768),this[ge]=pe&255,this[ge+1]=pe>>>8,ge+2},o.prototype.writeInt16BE=function(pe,ge,Te){return pe=+pe,ge=ge>>>0,Te||re(this,pe,ge,2,32767,-32768),this[ge]=pe>>>8,this[ge+1]=pe&255,ge+2},o.prototype.writeInt32LE=function(pe,ge,Te){return pe=+pe,ge=ge>>>0,Te||re(this,pe,ge,4,2147483647,-2147483648),this[ge]=pe&255,this[ge+1]=pe>>>8,this[ge+2]=pe>>>16,this[ge+3]=pe>>>24,ge+4},o.prototype.writeInt32BE=function(pe,ge,Te){return pe=+pe,ge=ge>>>0,Te||re(this,pe,ge,4,2147483647,-2147483648),pe<0&&(pe=4294967295+pe+1),this[ge]=pe>>>24,this[ge+1]=pe>>>16,this[ge+2]=pe>>>8,this[ge+3]=pe&255,ge+4};function se(ue,pe,ge,Te,_e,De){if(ge+Te>ue.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("Index out of range")}function oe(ue,pe,ge,Te,_e){return pe=+pe,ge=ge>>>0,_e||se(ue,pe,ge,4),n.write(ue,pe,ge,Te,23,4),ge+4}o.prototype.writeFloatLE=function(pe,ge,Te){return oe(this,pe,ge,!0,Te)},o.prototype.writeFloatBE=function(pe,ge,Te){return oe(this,pe,ge,!1,Te)};function N(ue,pe,ge,Te,_e){return pe=+pe,ge=ge>>>0,_e||se(ue,pe,ge,8),n.write(ue,pe,ge,Te,52,8),ge+8}o.prototype.writeDoubleLE=function(pe,ge,Te){return N(this,pe,ge,!0,Te)},o.prototype.writeDoubleBE=function(pe,ge,Te){return N(this,pe,ge,!1,Te)},o.prototype.copy=function(pe,ge,Te,_e){if(!o.isBuffer(pe))throw new TypeError("argument should be a Buffer");if(Te||(Te=0),!_e&&_e!==0&&(_e=this.length),ge>=pe.length&&(ge=pe.length),ge||(ge=0),_e>0&&_e<Te&&(_e=Te),_e===Te||pe.length===0||this.length===0)return 0;if(ge<0)throw new RangeError("targetStart out of bounds");if(Te<0||Te>=this.length)throw new RangeError("Index out of range");if(_e<0)throw new RangeError("sourceEnd out of bounds");_e>this.length&&(_e=this.length),pe.length-ge<_e-Te&&(_e=pe.length-ge+Te);var De=_e-Te;if(this===pe&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ge,Te,_e);else if(this===pe&&Te<ge&&ge<_e)for(var Oe=De-1;Oe>=0;--Oe)pe[Oe+ge]=this[Oe+Te];else Uint8Array.prototype.set.call(pe,this.subarray(Te,_e),ge);return De},o.prototype.fill=function(pe,ge,Te,_e){if(typeof pe=="string"){if(typeof ge=="string"?(_e=ge,ge=0,Te=this.length):typeof Te=="string"&&(_e=Te,Te=this.length),_e!==void 0&&typeof _e!="string")throw new TypeError("encoding must be a string");if(typeof _e=="string"&&!o.isEncoding(_e))throw new TypeError("Unknown encoding: "+_e);if(pe.length===1){var De=pe.charCodeAt(0);(_e==="utf8"&&De<128||_e==="latin1")&&(pe=De)}}else typeof pe=="number"&&(pe=pe&255);if(ge<0||this.length<ge||this.length<Te)throw new RangeError("Out of range index");if(Te<=ge)return this;ge=ge>>>0,Te=Te===void 0?this.length:Te>>>0,pe||(pe=0);var Oe;if(typeof pe=="number")for(Oe=ge;Oe<Te;++Oe)this[Oe]=pe;else{var Ue=o.isBuffer(pe)?pe:o.from(pe,_e),xe=Ue.length;if(xe===0)throw new TypeError('The value "'+pe+'" is invalid for argument "value"');for(Oe=0;Oe<Te-ge;++Oe)this[Oe+ge]=Ue[Oe%xe]}return this};var U=/[^+/0-9A-Za-z-_]/g;function q(ue){if(ue=ue.split("=")[0],ue=ue.trim().replace(U,""),ue.length<2)return"";for(;ue.length%4!=0;)ue=ue+"=";return ue}function Q(ue){return ue<16?"0"+ue.toString(16):ue.toString(16)}function W(ue,pe){pe=pe||1/0;for(var ge,Te=ue.length,_e=null,De=[],Oe=0;Oe<Te;++Oe){if(ge=ue.charCodeAt(Oe),ge>55295&&ge<57344){if(!_e){if(ge>56319){(pe-=3)>-1&&De.push(239,191,189);continue}else if(Oe+1===Te){(pe-=3)>-1&&De.push(239,191,189);continue}_e=ge;continue}if(ge<56320){(pe-=3)>-1&&De.push(239,191,189),_e=ge;continue}ge=(_e-55296<<10|ge-56320)+65536}else _e&&(pe-=3)>-1&&De.push(239,191,189);if(_e=null,ge<128){if((pe-=1)<0)break;De.push(ge)}else if(ge<2048){if((pe-=2)<0)break;De.push(ge>>6|192,ge&63|128)}else if(ge<65536){if((pe-=3)<0)break;De.push(ge>>12|224,ge>>6&63|128,ge&63|128)}else if(ge<1114112){if((pe-=4)<0)break;De.push(ge>>18|240,ge>>12&63|128,ge>>6&63|128,ge&63|128)}else throw new Error("Invalid code point")}return De}function X(ue){for(var pe=[],ge=0;ge<ue.length;++ge)pe.push(ue.charCodeAt(ge)&255);return pe}function te(ue,pe){for(var ge,Te,_e,De=[],Oe=0;Oe<ue.length&&!((pe-=2)<0);++Oe)ge=ue.charCodeAt(Oe),Te=ge>>8,_e=ge%256,De.push(_e),De.push(Te);return De}function ee(ue){return a.toByteArray(q(ue))}function ie(ue,pe,ge,Te){for(var _e=0;_e<Te&&!(_e+ge>=pe.length||_e>=ue.length);++_e)pe[_e+ge]=ue[_e];return _e}function le(ue,pe){return ue instanceof pe||ue!=null&&ue.constructor!=null&&ue.constructor.name!=null&&ue.constructor.name===pe.name}function ye(ue){return ue!==ue}}).call(this)}).call(this,c("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(c,M,A){A.read=function(e,a,n,t,r){var f,o,i=r*8-t-1,p=(1<<i)-1,d=p>>1,y=-7,v=n?r-1:0,x=n?-1:1,l=e[a+v];for(v+=x,f=l&(1<<-y)-1,l>>=-y,y+=i;y>0;f=f*256+e[a+v],v+=x,y-=8);for(o=f&(1<<-y)-1,f>>=-y,y+=t;y>0;o=o*256+e[a+v],v+=x,y-=8);if(f===0)f=1-d;else{if(f===p)return o?NaN:(l?-1:1)*(1/0);o=o+Math.pow(2,t),f=f-d}return(l?-1:1)*o*Math.pow(2,f-t)},A.write=function(e,a,n,t,r,f){var o,i,p,d=f*8-r-1,y=(1<<d)-1,v=y>>1,x=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=t?0:f-1,_=t?1:-1,s=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(i=isNaN(a)?1:0,o=y):(o=Math.floor(Math.log(a)/Math.LN2),a*(p=Math.pow(2,-o))<1&&(o--,p*=2),o+v>=1?a+=x/p:a+=x*Math.pow(2,1-v),a*p>=2&&(o++,p/=2),o+v>=y?(i=0,o=y):o+v>=1?(i=(a*p-1)*Math.pow(2,r),o=o+v):(i=a*Math.pow(2,v-1)*Math.pow(2,r),o=0));r>=8;e[n+l]=i&255,l+=_,i/=256,r-=8);for(o=o<<r|i,d+=r;d>0;e[n+l]=o&255,l+=_,o/=256,d-=8);e[n+l-_]|=s*128}},{}],5:[function(c,M,A){var e=M.exports={},a,n;function t(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=t}catch{a=t}try{typeof clearTimeout=="function"?n=clearTimeout:n=r}catch{n=r}})();function f(s){if(a===setTimeout)return setTimeout(s,0);if((a===t||!a)&&setTimeout)return a=setTimeout,setTimeout(s,0);try{return a(s,0)}catch{try{return a.call(null,s,0)}catch{return a.call(this,s,0)}}}function o(s){if(n===clearTimeout)return clearTimeout(s);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(s);try{return n(s)}catch{try{return n.call(null,s)}catch{return n.call(this,s)}}}var i=[],p=!1,d,y=-1;function v(){!p||!d||(p=!1,d.length?i=d.concat(i):y=-1,i.length&&x())}function x(){if(!p){var s=f(v);p=!0;for(var w=i.length;w;){for(d=i,i=[];++y<w;)d&&d[y].run();y=-1,w=i.length}d=null,p=!1,o(s)}}e.nextTick=function(s){var w=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)w[b-1]=arguments[b];i.push(new l(s,w)),i.length===1&&!p&&f(x)};function l(s,w){this.fun=s,this.array=w}l.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function _(){}e.on=_,e.addListener=_,e.once=_,e.off=_,e.removeListener=_,e.removeAllListeners=_,e.emit=_,e.prependListener=_,e.prependOnceListener=_,e.listeners=function(s){return[]},e.binding=function(s){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(s){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],6:[function(c,M,A){M.exports={alpha_shape:c("alpha-shape"),convex_hull:c("convex-hull"),delaunay_triangulate:c("delaunay-triangulate"),gl_cone3d:c("gl-cone3d"),gl_error3d:c("gl-error3d"),gl_heatmap2d:c("gl-heatmap2d"),gl_line3d:c("gl-line3d"),gl_mesh3d:c("gl-mesh3d"),gl_plot2d:c("gl-plot2d"),gl_plot3d:c("gl-plot3d"),gl_pointcloud2d:c("gl-pointcloud2d"),gl_scatter3d:c("gl-scatter3d"),gl_select_box:c("gl-select-box"),gl_spikes2d:c("gl-spikes2d"),gl_streamtube3d:c("gl-streamtube3d"),gl_surface3d:c("gl-surface3d"),ndarray:c("ndarray"),ndarray_linear_interpolate:c("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(c,M,A){M.exports=f;var e=c("turntable-camera-controller"),a=c("orbit-camera-controller"),n=c("matrix-camera-controller");function t(o,i){this._controllerNames=Object.keys(o),this._controllerList=this._controllerNames.map(function(p){return o[p]}),this._mode=i,this._active=o[i],this._active||(this._mode="turntable",this._active=o.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var r=t.prototype;r.flush=function(o){for(var i=this._controllerList,p=0;p<i.length;++p)i[p].flush(o)},r.idle=function(o){for(var i=this._controllerList,p=0;p<i.length;++p)i[p].idle(o)},r.lookAt=function(o,i,p,d){for(var y=this._controllerList,v=0;v<y.length;++v)y[v].lookAt(o,i,p,d)},r.rotate=function(o,i,p,d){for(var y=this._controllerList,v=0;v<y.length;++v)y[v].rotate(o,i,p,d)},r.pan=function(o,i,p,d){for(var y=this._controllerList,v=0;v<y.length;++v)y[v].pan(o,i,p,d)},r.translate=function(o,i,p,d){for(var y=this._controllerList,v=0;v<y.length;++v)y[v].translate(o,i,p,d)},r.setMatrix=function(o,i){for(var p=this._controllerList,d=0;d<p.length;++d)p[d].setMatrix(o,i)},r.setDistanceLimits=function(o,i){for(var p=this._controllerList,d=0;d<p.length;++d)p[d].setDistanceLimits(o,i)},r.setDistance=function(o,i){for(var p=this._controllerList,d=0;d<p.length;++d)p[d].setDistance(o,i)},r.recalcMatrix=function(o){this._active.recalcMatrix(o)},r.getDistance=function(o){return this._active.getDistance(o)},r.getDistanceLimits=function(o){return this._active.getDistanceLimits(o)},r.lastT=function(){return this._active.lastT()},r.setMode=function(o){if(o!==this._mode){var i=this._controllerNames.indexOf(o);if(!(i<0)){var p=this._active,d=this._controllerList[i],y=Math.max(p.lastT(),d.lastT());p.recalcMatrix(y),d.setMatrix(y,p.computedMatrix),this._active=d,this._mode=o,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},r.getMode=function(){return this._mode};function f(o){o=o||{};var i=o.eye||[0,0,1],p=o.center||[0,0,0],d=o.up||[0,1,0],y=o.distanceLimits||[0,1/0],v=o.mode||"turntable",x=e(),l=a(),_=n();return x.setDistanceLimits(y[0],y[1]),x.lookAt(0,i,p,d),l.setDistanceLimits(y[0],y[1]),l.lookAt(0,i,p,d),_.setDistanceLimits(y[0],y[1]),_.lookAt(0,i,p,d),new t({turntable:x,orbit:l,matrix:_},v)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(c,M,A){var e=typeof WeakMap=="undefined"?c("weak-map"):WeakMap,a=c("gl-buffer"),n=c("gl-vao"),t=new e;function r(f){var o=t.get(f),i=o&&(o._triangleBuffer.handle||o._triangleBuffer.buffer);if(!i||!f.isBuffer(i)){var p=a(f,new Float32Array([-1,-1,-1,4,4,-1]));o=n(f,[{buffer:p,type:f.FLOAT,size:2}]),o._triangleBuffer=p,t.set(f,o)}o.bind(),f.drawArrays(f.TRIANGLES,0,3),o.unbind()}M.exports=r},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(c,M,A){var e=c("pad-left");M.exports=a;function a(n,t,r){t=typeof t=="number"?t:1,r=r||": ";var f=n.split(/\r?\n/),o=String(f.length+t-1).length;return f.map(function(i,p){var d=p+t,y=String(d).length,v=e(d,o-y);return v+r+i}).join(`
`)}},{"pad-left":264}],10:[function(c,M,A){M.exports=n;var e=c("robust-orientation");function a(t,r){for(var f=new Array(r+1),o=0;o<t.length;++o)f[o]=t[o];for(var o=0;o<=t.length;++o){for(var i=t.length;i<=r;++i){for(var p=new Array(r),d=0;d<r;++d)p[d]=Math.pow(i+1-o,d);f[i]=p}var y=e.apply(void 0,f);if(y)return!0}return!1}function n(t){var r=t.length;if(r===0)return[];if(r===1)return[0];for(var f=t[0].length,o=[t[0]],i=[0],p=1;p<r;++p){if(o.push(t[p]),!a(o,f)){o.pop();continue}if(i.push(p),i.length===f+1)return i}return i}},{"robust-orientation":284}],11:[function(c,M,A){M.exports=n;var e=c("delaunay-triangulate"),a=c("circumradius");function n(t,r){return e(r).filter(function(f){for(var o=new Array(f.length),i=0;i<f.length;++i)o[i]=r[f[i]];return a(o)*t<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(c,M,A){M.exports=n;var e=c("alpha-complex"),a=c("simplicial-complex-boundary");function n(t,r){return a(e(t,r))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(c,M,A){M.exports=function(a){return atob(a)}},{}],14:[function(c,M,A){M.exports=n;var e=c("robust-linear-solve");function a(t){for(var r=0,f=0;f<t.length;++f)r+=t[f];return r}function n(t,r){for(var f=r.length,o=new Array(f+1),i=0;i<f;++i){for(var p=new Array(f+1),d=0;d<=f;++d)p[d]=t[d][i];o[i]=p}o[f]=new Array(f+1);for(var i=0;i<=f;++i)o[f][i]=1;for(var y=new Array(f+1),i=0;i<f;++i)y[i]=r[i];y[f]=1;var v=e(o,y),x=a(v[f+1]);x===0&&(x=1);for(var l=new Array(f+1),i=0;i<=f;++i)l[i]=a(v[i])/x;return l}},{"robust-linear-solve":283}],15:[function(c,M,A){var e=c("./lib/rationalize");M.exports=a;function a(n,t){return e(n[0].mul(t[1]).add(t[0].mul(n[1])),n[1].mul(t[1]))}},{"./lib/rationalize":25}],16:[function(c,M,A){M.exports=e;function e(a,n){return a[0].mul(n[1]).cmp(n[0].mul(a[1]))}},{}],17:[function(c,M,A){var e=c("./lib/rationalize");M.exports=a;function a(n,t){return e(n[0].mul(t[1]),n[1].mul(t[0]))}},{"./lib/rationalize":25}],18:[function(c,M,A){var e=c("./is-rat"),a=c("./lib/is-bn"),n=c("./lib/num-to-bn"),t=c("./lib/str-to-bn"),r=c("./lib/rationalize"),f=c("./div");M.exports=o;function o(i,p){if(e(i))return p?f(i,o(p)):[i[0].clone(),i[1].clone()];var d=0,y,v;if(a(i))y=i.clone();else if(typeof i=="string")y=t(i);else{if(i===0)return[n(0),n(1)];if(i===Math.floor(i))y=n(i);else{for(;i!==Math.floor(i);)i=i*Math.pow(2,256),d-=256;y=n(i)}}if(e(p))y.mul(p[1]),v=p[0].clone();else if(a(p))v=p.clone();else if(typeof p=="string")v=t(p);else if(!p)v=n(1);else if(p===Math.floor(p))v=n(p);else{for(;p!==Math.floor(p);)p=p*Math.pow(2,256),d+=256;v=n(p)}return d>0?y=y.ushln(d):d<0&&(v=v.ushln(-d)),r(y,v)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(c,M,A){var e=c("./lib/is-bn");M.exports=a;function a(n){return Array.isArray(n)&&n.length===2&&e(n[0])&&e(n[1])}},{"./lib/is-bn":23}],20:[function(c,M,A){var e=c("bn.js");M.exports=a;function a(n){return n.cmp(new e(0))}},{"bn.js":33}],21:[function(c,M,A){var e=c("./bn-sign");M.exports=a;function a(n){var t=n.length,r=n.words,f=0;if(t===1)f=r[0];else if(t===2)f=r[0]+r[1]*67108864;else for(var o=0;o<t;o++){var i=r[o];f+=i*Math.pow(67108864,o)}return e(n)*f}},{"./bn-sign":20}],22:[function(c,M,A){var e=c("double-bits"),a=c("bit-twiddle").countTrailingZeros;M.exports=n;function n(t){var r=a(e.lo(t));if(r<32)return r;var f=a(e.hi(t));return f>20?52:f+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(c,M,A){c("bn.js"),M.exports=e;function e(a){return a&&typeof a=="object"&&Boolean(a.words)}},{"bn.js":33}],24:[function(c,M,A){var e=c("bn.js"),a=c("double-bits");M.exports=n;function n(t){var r=a.exponent(t);return r<52?new e(t):new e(t*Math.pow(2,52-r)).ushln(r-52)}},{"bn.js":33,"double-bits":64}],25:[function(c,M,A){var e=c("./num-to-bn"),a=c("./bn-sign");M.exports=n;function n(t,r){var f=a(t),o=a(r);if(f===0)return[e(0),e(1)];if(o===0)return[e(0),e(0)];o<0&&(t=t.neg(),r=r.neg());var i=t.gcd(r);return i.cmpn(1)?[t.div(i),r.div(i)]:[t,r]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(c,M,A){var e=c("bn.js");M.exports=a;function a(n){return new e(n)}},{"bn.js":33}],27:[function(c,M,A){var e=c("./lib/rationalize");M.exports=a;function a(n,t){return e(n[0].mul(t[0]),n[1].mul(t[1]))}},{"./lib/rationalize":25}],28:[function(c,M,A){var e=c("./lib/bn-sign");M.exports=a;function a(n){return e(n[0])*e(n[1])}},{"./lib/bn-sign":20}],29:[function(c,M,A){var e=c("./lib/rationalize");M.exports=a;function a(n,t){return e(n[0].mul(t[1]).sub(n[1].mul(t[0])),n[1].mul(t[1]))}},{"./lib/rationalize":25}],30:[function(c,M,A){var e=c("./lib/bn-to-num"),a=c("./lib/ctz");M.exports=n;function n(t){var r=t[0],f=t[1];if(r.cmpn(0)===0)return 0;var o=r.abs().divmod(f.abs()),i=o.div,p=e(i),d=o.mod,y=r.negative!==f.negative?-1:1;if(d.cmpn(0)===0)return y*p;if(p){var v=a(p)+4,x=e(d.ushln(v).divRound(f));return y*(p+x*Math.pow(2,-v))}else{var l=f.bitLength()-d.bitLength()+53,x=e(d.ushln(l).divRound(f));return l<1023?y*x*Math.pow(2,-l):(x*=Math.pow(2,-1023),y*x*Math.pow(2,1023-l))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(c,M,A){function e(o,i,p,d,y){for(var v=y+1;d<=y;){var x=d+y>>>1,l=o[x],_=p!==void 0?p(l,i):l-i;_>=0?(v=x,y=x-1):d=x+1}return v}function a(o,i,p,d,y){for(var v=y+1;d<=y;){var x=d+y>>>1,l=o[x],_=p!==void 0?p(l,i):l-i;_>0?(v=x,y=x-1):d=x+1}return v}function n(o,i,p,d,y){for(var v=d-1;d<=y;){var x=d+y>>>1,l=o[x],_=p!==void 0?p(l,i):l-i;_<0?(v=x,d=x+1):y=x-1}return v}function t(o,i,p,d,y){for(var v=d-1;d<=y;){var x=d+y>>>1,l=o[x],_=p!==void 0?p(l,i):l-i;_<=0?(v=x,d=x+1):y=x-1}return v}function r(o,i,p,d,y){for(;d<=y;){var v=d+y>>>1,x=o[v],l=p!==void 0?p(x,i):x-i;if(l===0)return v;l<=0?d=v+1:y=v-1}return-1}function f(o,i,p,d,y,v){return typeof p=="function"?v(o,i,p,d===void 0?0:d|0,y===void 0?o.length-1:y|0):v(o,i,void 0,p===void 0?0:p|0,d===void 0?o.length-1:d|0)}M.exports={ge:function(o,i,p,d,y){return f(o,i,p,d,y,e)},gt:function(o,i,p,d,y){return f(o,i,p,d,y,a)},lt:function(o,i,p,d,y){return f(o,i,p,d,y,n)},le:function(o,i,p,d,y){return f(o,i,p,d,y,t)},eq:function(o,i,p,d,y){return f(o,i,p,d,y,r)}}},{}],32:[function(c,M,A){var e=32;A.INT_BITS=e,A.INT_MAX=2147483647,A.INT_MIN=-1<<e-1,A.sign=function(t){return(t>0)-(t<0)},A.abs=function(t){var r=t>>e-1;return(t^r)-r},A.min=function(t,r){return r^(t^r)&-(t<r)},A.max=function(t,r){return t^(t^r)&-(t<r)},A.isPow2=function(t){return!(t&t-1)&&!!t},A.log2=function(t){var r,f;return r=(t>65535)<<4,t>>>=r,f=(t>255)<<3,t>>>=f,r|=f,f=(t>15)<<2,t>>>=f,r|=f,f=(t>3)<<1,t>>>=f,r|=f,r|t>>1},A.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},A.popCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24};function a(t){var r=32;return t&=-t,t&&r--,t&65535&&(r-=16),t&16711935&&(r-=8),t&252645135&&(r-=4),t&858993459&&(r-=2),t&1431655765&&(r-=1),r}A.countTrailingZeros=a,A.nextPow2=function(t){return t+=t===0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},A.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},A.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var n=new Array(256);(function(t){for(var r=0;r<256;++r){var f=r,o=r,i=7;for(f>>>=1;f;f>>>=1)o<<=1,o|=f&1,--i;t[r]=o<<i&255}})(n),A.reverse=function(t){return n[t&255]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},A.interleave2=function(t,r){return t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t|r<<1},A.deinterleave2=function(t,r){return t=t>>>r&1431655765,t=(t|t>>>1)&858993459,t=(t|t>>>2)&252645135,t=(t|t>>>4)&16711935,t=(t|t>>>16)&65535,t<<16>>16},A.interleave3=function(t,r,f){return t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,t|=r<<1,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,t|f<<2},A.deinterleave3=function(t,r){return t=t>>>r&1227133513,t=(t|t>>>2)&3272356035,t=(t|t>>>4)&251719695,t=(t|t>>>8)&4278190335,t=(t|t>>>16)&1023,t<<22>>22},A.nextCombination=function(t){var r=t|t-1;return r+1|(~r&-~r)-1>>>a(t)+1}},{}],33:[function(c,M,A){(function(e,a){function n(I,D){if(!I)throw new Error(D||"Assertion failed")}function t(I,D){I.super_=D;var R=function(){};R.prototype=D.prototype,I.prototype=new R,I.prototype.constructor=I}function r(I,D,R){if(r.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((D==="le"||D==="be")&&(R=D,D=10),this._init(I||0,D||10,R||"be"))}typeof e=="object"?e.exports=r:a.BN=r,r.BN=r,r.wordSize=26;var f;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?f=window.Buffer:f=c("buffer").Buffer}catch{}r.isBN=function(D){return D instanceof r?!0:D!==null&&typeof D=="object"&&D.constructor.wordSize===r.wordSize&&Array.isArray(D.words)},r.max=function(D,R){return D.cmp(R)>0?D:R},r.min=function(D,R){return D.cmp(R)<0?D:R},r.prototype._init=function(D,R,B){if(typeof D=="number")return this._initNumber(D,R,B);if(typeof D=="object")return this._initArray(D,R,B);R==="hex"&&(R=16),n(R===(R|0)&&R>=2&&R<=36),D=D.toString().replace(/\s+/g,"");var F=0;D[0]==="-"&&(F++,this.negative=1),F<D.length&&(R===16?this._parseHex(D,F,B):(this._parseBase(D,R,F),B==="le"&&this._initArray(this.toArray(),R,B)))},r.prototype._initNumber=function(D,R,B){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[D&67108863],this.length=1):D<4503599627370496?(this.words=[D&67108863,D/67108864&67108863],this.length=2):(n(D<9007199254740992),this.words=[D&67108863,D/67108864&67108863,1],this.length=3),B==="le"&&this._initArray(this.toArray(),R,B)},r.prototype._initArray=function(D,R,B){if(n(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var V,Y,K=0;if(B==="be")for(F=D.length-1,V=0;F>=0;F-=3)Y=D[F]|D[F-1]<<8|D[F-2]<<16,this.words[V]|=Y<<K&67108863,this.words[V+1]=Y>>>26-K&67108863,K+=24,K>=26&&(K-=26,V++);else if(B==="le")for(F=0,V=0;F<D.length;F+=3)Y=D[F]|D[F+1]<<8|D[F+2]<<16,this.words[V]|=Y<<K&67108863,this.words[V+1]=Y>>>26-K&67108863,K+=24,K>=26&&(K-=26,V++);return this.strip()};function o(I,D){var R=I.charCodeAt(D);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function i(I,D,R){var B=o(I,R);return R-1>=D&&(B|=o(I,R-1)<<4),B}r.prototype._parseHex=function(D,R,B){this.length=Math.ceil((D.length-R)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var V=0,Y=0,K;if(B==="be")for(F=D.length-1;F>=R;F-=2)K=i(D,R,F)<<V,this.words[Y]|=K&67108863,V>=18?(V-=18,Y+=1,this.words[Y]|=K>>>26):V+=8;else{var J=D.length-R;for(F=J%2==0?R+1:R;F<D.length;F+=2)K=i(D,R,F)<<V,this.words[Y]|=K&67108863,V>=18?(V-=18,Y+=1,this.words[Y]|=K>>>26):V+=8}this.strip()};function p(I,D,R,B){for(var F=0,V=Math.min(I.length,R),Y=D;Y<V;Y++){var K=I.charCodeAt(Y)-48;F*=B,K>=49?F+=K-49+10:K>=17?F+=K-17+10:F+=K}return F}r.prototype._parseBase=function(D,R,B){this.words=[0],this.length=1;for(var F=0,V=1;V<=67108863;V*=R)F++;F--,V=V/R|0;for(var Y=D.length-B,K=Y%F,J=Math.min(Y,Y-K)+B,G=0,Z=B;Z<J;Z+=F)G=p(D,Z,Z+F,R),this.imuln(V),this.words[0]+G<67108864?this.words[0]+=G:this._iaddn(G);if(K!==0){var re=1;for(G=p(D,Z,D.length,R),Z=0;Z<K;Z++)re*=R;this.imuln(re),this.words[0]+G<67108864?this.words[0]+=G:this._iaddn(G)}this.strip()},r.prototype.copy=function(D){D.words=new Array(this.length);for(var R=0;R<this.length;R++)D.words[R]=this.words[R];D.length=this.length,D.negative=this.negative,D.red=this.red},r.prototype.clone=function(){var D=new r(null);return this.copy(D),D},r.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},r.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(D,R){D=D||10,R=R|0||1;var B;if(D===16||D==="hex"){B="";for(var F=0,V=0,Y=0;Y<this.length;Y++){var K=this.words[Y],J=((K<<F|V)&16777215).toString(16);V=K>>>24-F&16777215,V!==0||Y!==this.length-1?B=d[6-J.length]+J+B:B=J+B,F+=2,F>=26&&(F-=26,Y--)}for(V!==0&&(B=V.toString(16)+B);B.length%R!=0;)B="0"+B;return this.negative!==0&&(B="-"+B),B}if(D===(D|0)&&D>=2&&D<=36){var G=y[D],Z=v[D];B="";var re=this.clone();for(re.negative=0;!re.isZero();){var se=re.modn(Z).toString(D);re=re.idivn(Z),re.isZero()?B=se+B:B=d[G-se.length]+se+B}for(this.isZero()&&(B="0"+B);B.length%R!=0;)B="0"+B;return this.negative!==0&&(B="-"+B),B}n(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=this.words[1]*67108864:this.length===3&&this.words[2]===1?D+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(D,R){return n(typeof f!="undefined"),this.toArrayLike(f,D,R)},r.prototype.toArray=function(D,R){return this.toArrayLike(Array,D,R)},r.prototype.toArrayLike=function(D,R,B){var F=this.byteLength(),V=B||Math.max(1,F);n(F<=V,"byte array longer than desired length"),n(V>0,"Requested array length <= 0"),this.strip();var Y=R==="le",K=new D(V),J,G,Z=this.clone();if(Y){for(G=0;!Z.isZero();G++)J=Z.andln(255),Z.iushrn(8),K[G]=J;for(;G<V;G++)K[G]=0}else{for(G=0;G<V-F;G++)K[G]=0;for(G=0;!Z.isZero();G++)J=Z.andln(255),Z.iushrn(8),K[V-G-1]=J}return K},Math.clz32?r.prototype._countBits=function(D){return 32-Math.clz32(D)}:r.prototype._countBits=function(D){var R=D,B=0;return R>=4096&&(B+=13,R>>>=13),R>=64&&(B+=7,R>>>=7),R>=8&&(B+=4,R>>>=4),R>=2&&(B+=2,R>>>=2),B+R},r.prototype._zeroBits=function(D){if(D===0)return 26;var R=D,B=0;return(R&8191)==0&&(B+=13,R>>>=13),(R&127)==0&&(B+=7,R>>>=7),(R&15)==0&&(B+=4,R>>>=4),(R&3)==0&&(B+=2,R>>>=2),(R&1)==0&&B++,B},r.prototype.bitLength=function(){var D=this.words[this.length-1],R=this._countBits(D);return(this.length-1)*26+R};function x(I){for(var D=new Array(I.bitLength()),R=0;R<D.length;R++){var B=R/26|0,F=R%26;D[R]=(I.words[B]&1<<F)>>>F}return D}r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,R=0;R<this.length;R++){var B=this._zeroBits(this.words[R]);if(D+=B,B!==26)break}return D},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},r.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return this.negative!==0},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var R=0;R<D.length;R++)this.words[R]=this.words[R]|D.words[R];return this.strip()},r.prototype.ior=function(D){return n((this.negative|D.negative)==0),this.iuor(D)},r.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},r.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},r.prototype.iuand=function(D){var R;this.length>D.length?R=D:R=this;for(var B=0;B<R.length;B++)this.words[B]=this.words[B]&D.words[B];return this.length=R.length,this.strip()},r.prototype.iand=function(D){return n((this.negative|D.negative)==0),this.iuand(D)},r.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},r.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},r.prototype.iuxor=function(D){var R,B;this.length>D.length?(R=this,B=D):(R=D,B=this);for(var F=0;F<B.length;F++)this.words[F]=R.words[F]^B.words[F];if(this!==R)for(;F<R.length;F++)this.words[F]=R.words[F];return this.length=R.length,this.strip()},r.prototype.ixor=function(D){return n((this.negative|D.negative)==0),this.iuxor(D)},r.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},r.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},r.prototype.inotn=function(D){n(typeof D=="number"&&D>=0);var R=Math.ceil(D/26)|0,B=D%26;this._expand(R),B>0&&R--;for(var F=0;F<R;F++)this.words[F]=~this.words[F]&67108863;return B>0&&(this.words[F]=~this.words[F]&67108863>>26-B),this.strip()},r.prototype.notn=function(D){return this.clone().inotn(D)},r.prototype.setn=function(D,R){n(typeof D=="number"&&D>=0);var B=D/26|0,F=D%26;return this._expand(B+1),R?this.words[B]=this.words[B]|1<<F:this.words[B]=this.words[B]&~(1<<F),this.strip()},r.prototype.iadd=function(D){var R;if(this.negative!==0&&D.negative===0)return this.negative=0,R=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,R=this.isub(D),D.negative=1,R._normSign();var B,F;this.length>D.length?(B=this,F=D):(B=D,F=this);for(var V=0,Y=0;Y<F.length;Y++)R=(B.words[Y]|0)+(F.words[Y]|0)+V,this.words[Y]=R&67108863,V=R>>>26;for(;V!==0&&Y<B.length;Y++)R=(B.words[Y]|0)+V,this.words[Y]=R&67108863,V=R>>>26;if(this.length=B.length,V!==0)this.words[this.length]=V,this.length++;else if(B!==this)for(;Y<B.length;Y++)this.words[Y]=B.words[Y];return this},r.prototype.add=function(D){var R;return D.negative!==0&&this.negative===0?(D.negative=0,R=this.sub(D),D.negative^=1,R):D.negative===0&&this.negative!==0?(this.negative=0,R=D.sub(this),this.negative=1,R):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},r.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var R=this.iadd(D);return D.negative=1,R._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var B=this.cmp(D);if(B===0)return this.negative=0,this.length=1,this.words[0]=0,this;var F,V;B>0?(F=this,V=D):(F=D,V=this);for(var Y=0,K=0;K<V.length;K++)R=(F.words[K]|0)-(V.words[K]|0)+Y,Y=R>>26,this.words[K]=R&67108863;for(;Y!==0&&K<F.length;K++)R=(F.words[K]|0)+Y,Y=R>>26,this.words[K]=R&67108863;if(Y===0&&K<F.length&&F!==this)for(;K<F.length;K++)this.words[K]=F.words[K];return this.length=Math.max(this.length,K),F!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(D){return this.clone().isub(D)};function l(I,D,R){R.negative=D.negative^I.negative;var B=I.length+D.length|0;R.length=B,B=B-1|0;var F=I.words[0]|0,V=D.words[0]|0,Y=F*V,K=Y&67108863,J=Y/67108864|0;R.words[0]=K;for(var G=1;G<B;G++){for(var Z=J>>>26,re=J&67108863,se=Math.min(G,D.length-1),oe=Math.max(0,G-I.length+1);oe<=se;oe++){var N=G-oe|0;F=I.words[N]|0,V=D.words[oe]|0,Y=F*V+re,Z+=Y/67108864|0,re=Y&67108863}R.words[G]=re|0,J=Z|0}return J!==0?R.words[G]=J|0:R.length--,R.strip()}var _=function(D,R,B){var F=D.words,V=R.words,Y=B.words,K=0,J,G,Z,re=F[0]|0,se=re&8191,oe=re>>>13,N=F[1]|0,U=N&8191,q=N>>>13,Q=F[2]|0,W=Q&8191,X=Q>>>13,te=F[3]|0,ee=te&8191,ie=te>>>13,le=F[4]|0,ye=le&8191,ue=le>>>13,pe=F[5]|0,ge=pe&8191,Te=pe>>>13,_e=F[6]|0,De=_e&8191,Oe=_e>>>13,Ue=F[7]|0,xe=Ue&8191,Pe=Ue>>>13,Ve=F[8]|0,Qe=Ve&8191,Fe=Ve>>>13,Le=F[9]|0,Ne=Le&8191,dt=Le>>>13,Dt=V[0]|0,Xt=Dt&8191,Tt=Dt>>>13,zt=V[1]|0,Ut=zt&8191,Et=zt>>>13,Mt=V[2]|0,rt=Mt&8191,ct=Mt>>>13,Ze=V[3]|0,ke=Ze&8191,Ge=Ze>>>13,Je=V[4]|0,it=Je&8191,Pt=Je>>>13,At=V[5]|0,Ot=At&8191,Jt=At>>>13,Bt=V[6]|0,qt=Bt&8191,rr=Bt>>>13,er=V[7]|0,pr=er&8191,Xr=er>>>13,hn=V[8]|0,$r=hn&8191,nt=hn>>>13,Gt=V[9]|0,Kt=Gt&8191,Ht=Gt>>>13;B.negative=D.negative^R.negative,B.length=19,J=Math.imul(se,Xt),G=Math.imul(se,Tt),G=G+Math.imul(oe,Xt)|0,Z=Math.imul(oe,Tt);var _r=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(_r>>>26)|0,_r&=67108863,J=Math.imul(U,Xt),G=Math.imul(U,Tt),G=G+Math.imul(q,Xt)|0,Z=Math.imul(q,Tt),J=J+Math.imul(se,Ut)|0,G=G+Math.imul(se,Et)|0,G=G+Math.imul(oe,Ut)|0,Z=Z+Math.imul(oe,Et)|0;var tt=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(tt>>>26)|0,tt&=67108863,J=Math.imul(W,Xt),G=Math.imul(W,Tt),G=G+Math.imul(X,Xt)|0,Z=Math.imul(X,Tt),J=J+Math.imul(U,Ut)|0,G=G+Math.imul(U,Et)|0,G=G+Math.imul(q,Ut)|0,Z=Z+Math.imul(q,Et)|0,J=J+Math.imul(se,rt)|0,G=G+Math.imul(se,ct)|0,G=G+Math.imul(oe,rt)|0,Z=Z+Math.imul(oe,ct)|0;var je=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(je>>>26)|0,je&=67108863,J=Math.imul(ee,Xt),G=Math.imul(ee,Tt),G=G+Math.imul(ie,Xt)|0,Z=Math.imul(ie,Tt),J=J+Math.imul(W,Ut)|0,G=G+Math.imul(W,Et)|0,G=G+Math.imul(X,Ut)|0,Z=Z+Math.imul(X,Et)|0,J=J+Math.imul(U,rt)|0,G=G+Math.imul(U,ct)|0,G=G+Math.imul(q,rt)|0,Z=Z+Math.imul(q,ct)|0,J=J+Math.imul(se,ke)|0,G=G+Math.imul(se,Ge)|0,G=G+Math.imul(oe,ke)|0,Z=Z+Math.imul(oe,Ge)|0;var st=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(st>>>26)|0,st&=67108863,J=Math.imul(ye,Xt),G=Math.imul(ye,Tt),G=G+Math.imul(ue,Xt)|0,Z=Math.imul(ue,Tt),J=J+Math.imul(ee,Ut)|0,G=G+Math.imul(ee,Et)|0,G=G+Math.imul(ie,Ut)|0,Z=Z+Math.imul(ie,Et)|0,J=J+Math.imul(W,rt)|0,G=G+Math.imul(W,ct)|0,G=G+Math.imul(X,rt)|0,Z=Z+Math.imul(X,ct)|0,J=J+Math.imul(U,ke)|0,G=G+Math.imul(U,Ge)|0,G=G+Math.imul(q,ke)|0,Z=Z+Math.imul(q,Ge)|0,J=J+Math.imul(se,it)|0,G=G+Math.imul(se,Pt)|0,G=G+Math.imul(oe,it)|0,Z=Z+Math.imul(oe,Pt)|0;var ft=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(ft>>>26)|0,ft&=67108863,J=Math.imul(ge,Xt),G=Math.imul(ge,Tt),G=G+Math.imul(Te,Xt)|0,Z=Math.imul(Te,Tt),J=J+Math.imul(ye,Ut)|0,G=G+Math.imul(ye,Et)|0,G=G+Math.imul(ue,Ut)|0,Z=Z+Math.imul(ue,Et)|0,J=J+Math.imul(ee,rt)|0,G=G+Math.imul(ee,ct)|0,G=G+Math.imul(ie,rt)|0,Z=Z+Math.imul(ie,ct)|0,J=J+Math.imul(W,ke)|0,G=G+Math.imul(W,Ge)|0,G=G+Math.imul(X,ke)|0,Z=Z+Math.imul(X,Ge)|0,J=J+Math.imul(U,it)|0,G=G+Math.imul(U,Pt)|0,G=G+Math.imul(q,it)|0,Z=Z+Math.imul(q,Pt)|0,J=J+Math.imul(se,Ot)|0,G=G+Math.imul(se,Jt)|0,G=G+Math.imul(oe,Ot)|0,Z=Z+Math.imul(oe,Jt)|0;var Me=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(Me>>>26)|0,Me&=67108863,J=Math.imul(De,Xt),G=Math.imul(De,Tt),G=G+Math.imul(Oe,Xt)|0,Z=Math.imul(Oe,Tt),J=J+Math.imul(ge,Ut)|0,G=G+Math.imul(ge,Et)|0,G=G+Math.imul(Te,Ut)|0,Z=Z+Math.imul(Te,Et)|0,J=J+Math.imul(ye,rt)|0,G=G+Math.imul(ye,ct)|0,G=G+Math.imul(ue,rt)|0,Z=Z+Math.imul(ue,ct)|0,J=J+Math.imul(ee,ke)|0,G=G+Math.imul(ee,Ge)|0,G=G+Math.imul(ie,ke)|0,Z=Z+Math.imul(ie,Ge)|0,J=J+Math.imul(W,it)|0,G=G+Math.imul(W,Pt)|0,G=G+Math.imul(X,it)|0,Z=Z+Math.imul(X,Pt)|0,J=J+Math.imul(U,Ot)|0,G=G+Math.imul(U,Jt)|0,G=G+Math.imul(q,Ot)|0,Z=Z+Math.imul(q,Jt)|0,J=J+Math.imul(se,qt)|0,G=G+Math.imul(se,rr)|0,G=G+Math.imul(oe,qt)|0,Z=Z+Math.imul(oe,rr)|0;var Se=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(Se>>>26)|0,Se&=67108863,J=Math.imul(xe,Xt),G=Math.imul(xe,Tt),G=G+Math.imul(Pe,Xt)|0,Z=Math.imul(Pe,Tt),J=J+Math.imul(De,Ut)|0,G=G+Math.imul(De,Et)|0,G=G+Math.imul(Oe,Ut)|0,Z=Z+Math.imul(Oe,Et)|0,J=J+Math.imul(ge,rt)|0,G=G+Math.imul(ge,ct)|0,G=G+Math.imul(Te,rt)|0,Z=Z+Math.imul(Te,ct)|0,J=J+Math.imul(ye,ke)|0,G=G+Math.imul(ye,Ge)|0,G=G+Math.imul(ue,ke)|0,Z=Z+Math.imul(ue,Ge)|0,J=J+Math.imul(ee,it)|0,G=G+Math.imul(ee,Pt)|0,G=G+Math.imul(ie,it)|0,Z=Z+Math.imul(ie,Pt)|0,J=J+Math.imul(W,Ot)|0,G=G+Math.imul(W,Jt)|0,G=G+Math.imul(X,Ot)|0,Z=Z+Math.imul(X,Jt)|0,J=J+Math.imul(U,qt)|0,G=G+Math.imul(U,rr)|0,G=G+Math.imul(q,qt)|0,Z=Z+Math.imul(q,rr)|0,J=J+Math.imul(se,pr)|0,G=G+Math.imul(se,Xr)|0,G=G+Math.imul(oe,pr)|0,Z=Z+Math.imul(oe,Xr)|0;var Ke=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,J=Math.imul(Qe,Xt),G=Math.imul(Qe,Tt),G=G+Math.imul(Fe,Xt)|0,Z=Math.imul(Fe,Tt),J=J+Math.imul(xe,Ut)|0,G=G+Math.imul(xe,Et)|0,G=G+Math.imul(Pe,Ut)|0,Z=Z+Math.imul(Pe,Et)|0,J=J+Math.imul(De,rt)|0,G=G+Math.imul(De,ct)|0,G=G+Math.imul(Oe,rt)|0,Z=Z+Math.imul(Oe,ct)|0,J=J+Math.imul(ge,ke)|0,G=G+Math.imul(ge,Ge)|0,G=G+Math.imul(Te,ke)|0,Z=Z+Math.imul(Te,Ge)|0,J=J+Math.imul(ye,it)|0,G=G+Math.imul(ye,Pt)|0,G=G+Math.imul(ue,it)|0,Z=Z+Math.imul(ue,Pt)|0,J=J+Math.imul(ee,Ot)|0,G=G+Math.imul(ee,Jt)|0,G=G+Math.imul(ie,Ot)|0,Z=Z+Math.imul(ie,Jt)|0,J=J+Math.imul(W,qt)|0,G=G+Math.imul(W,rr)|0,G=G+Math.imul(X,qt)|0,Z=Z+Math.imul(X,rr)|0,J=J+Math.imul(U,pr)|0,G=G+Math.imul(U,Xr)|0,G=G+Math.imul(q,pr)|0,Z=Z+Math.imul(q,Xr)|0,J=J+Math.imul(se,$r)|0,G=G+Math.imul(se,nt)|0,G=G+Math.imul(oe,$r)|0,Z=Z+Math.imul(oe,nt)|0;var Xe=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,J=Math.imul(Ne,Xt),G=Math.imul(Ne,Tt),G=G+Math.imul(dt,Xt)|0,Z=Math.imul(dt,Tt),J=J+Math.imul(Qe,Ut)|0,G=G+Math.imul(Qe,Et)|0,G=G+Math.imul(Fe,Ut)|0,Z=Z+Math.imul(Fe,Et)|0,J=J+Math.imul(xe,rt)|0,G=G+Math.imul(xe,ct)|0,G=G+Math.imul(Pe,rt)|0,Z=Z+Math.imul(Pe,ct)|0,J=J+Math.imul(De,ke)|0,G=G+Math.imul(De,Ge)|0,G=G+Math.imul(Oe,ke)|0,Z=Z+Math.imul(Oe,Ge)|0,J=J+Math.imul(ge,it)|0,G=G+Math.imul(ge,Pt)|0,G=G+Math.imul(Te,it)|0,Z=Z+Math.imul(Te,Pt)|0,J=J+Math.imul(ye,Ot)|0,G=G+Math.imul(ye,Jt)|0,G=G+Math.imul(ue,Ot)|0,Z=Z+Math.imul(ue,Jt)|0,J=J+Math.imul(ee,qt)|0,G=G+Math.imul(ee,rr)|0,G=G+Math.imul(ie,qt)|0,Z=Z+Math.imul(ie,rr)|0,J=J+Math.imul(W,pr)|0,G=G+Math.imul(W,Xr)|0,G=G+Math.imul(X,pr)|0,Z=Z+Math.imul(X,Xr)|0,J=J+Math.imul(U,$r)|0,G=G+Math.imul(U,nt)|0,G=G+Math.imul(q,$r)|0,Z=Z+Math.imul(q,nt)|0,J=J+Math.imul(se,Kt)|0,G=G+Math.imul(se,Ht)|0,G=G+Math.imul(oe,Kt)|0,Z=Z+Math.imul(oe,Ht)|0;var ot=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(ot>>>26)|0,ot&=67108863,J=Math.imul(Ne,Ut),G=Math.imul(Ne,Et),G=G+Math.imul(dt,Ut)|0,Z=Math.imul(dt,Et),J=J+Math.imul(Qe,rt)|0,G=G+Math.imul(Qe,ct)|0,G=G+Math.imul(Fe,rt)|0,Z=Z+Math.imul(Fe,ct)|0,J=J+Math.imul(xe,ke)|0,G=G+Math.imul(xe,Ge)|0,G=G+Math.imul(Pe,ke)|0,Z=Z+Math.imul(Pe,Ge)|0,J=J+Math.imul(De,it)|0,G=G+Math.imul(De,Pt)|0,G=G+Math.imul(Oe,it)|0,Z=Z+Math.imul(Oe,Pt)|0,J=J+Math.imul(ge,Ot)|0,G=G+Math.imul(ge,Jt)|0,G=G+Math.imul(Te,Ot)|0,Z=Z+Math.imul(Te,Jt)|0,J=J+Math.imul(ye,qt)|0,G=G+Math.imul(ye,rr)|0,G=G+Math.imul(ue,qt)|0,Z=Z+Math.imul(ue,rr)|0,J=J+Math.imul(ee,pr)|0,G=G+Math.imul(ee,Xr)|0,G=G+Math.imul(ie,pr)|0,Z=Z+Math.imul(ie,Xr)|0,J=J+Math.imul(W,$r)|0,G=G+Math.imul(W,nt)|0,G=G+Math.imul(X,$r)|0,Z=Z+Math.imul(X,nt)|0,J=J+Math.imul(U,Kt)|0,G=G+Math.imul(U,Ht)|0,G=G+Math.imul(q,Kt)|0,Z=Z+Math.imul(q,Ht)|0;var pt=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(pt>>>26)|0,pt&=67108863,J=Math.imul(Ne,rt),G=Math.imul(Ne,ct),G=G+Math.imul(dt,rt)|0,Z=Math.imul(dt,ct),J=J+Math.imul(Qe,ke)|0,G=G+Math.imul(Qe,Ge)|0,G=G+Math.imul(Fe,ke)|0,Z=Z+Math.imul(Fe,Ge)|0,J=J+Math.imul(xe,it)|0,G=G+Math.imul(xe,Pt)|0,G=G+Math.imul(Pe,it)|0,Z=Z+Math.imul(Pe,Pt)|0,J=J+Math.imul(De,Ot)|0,G=G+Math.imul(De,Jt)|0,G=G+Math.imul(Oe,Ot)|0,Z=Z+Math.imul(Oe,Jt)|0,J=J+Math.imul(ge,qt)|0,G=G+Math.imul(ge,rr)|0,G=G+Math.imul(Te,qt)|0,Z=Z+Math.imul(Te,rr)|0,J=J+Math.imul(ye,pr)|0,G=G+Math.imul(ye,Xr)|0,G=G+Math.imul(ue,pr)|0,Z=Z+Math.imul(ue,Xr)|0,J=J+Math.imul(ee,$r)|0,G=G+Math.imul(ee,nt)|0,G=G+Math.imul(ie,$r)|0,Z=Z+Math.imul(ie,nt)|0,J=J+Math.imul(W,Kt)|0,G=G+Math.imul(W,Ht)|0,G=G+Math.imul(X,Kt)|0,Z=Z+Math.imul(X,Ht)|0;var vt=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(vt>>>26)|0,vt&=67108863,J=Math.imul(Ne,ke),G=Math.imul(Ne,Ge),G=G+Math.imul(dt,ke)|0,Z=Math.imul(dt,Ge),J=J+Math.imul(Qe,it)|0,G=G+Math.imul(Qe,Pt)|0,G=G+Math.imul(Fe,it)|0,Z=Z+Math.imul(Fe,Pt)|0,J=J+Math.imul(xe,Ot)|0,G=G+Math.imul(xe,Jt)|0,G=G+Math.imul(Pe,Ot)|0,Z=Z+Math.imul(Pe,Jt)|0,J=J+Math.imul(De,qt)|0,G=G+Math.imul(De,rr)|0,G=G+Math.imul(Oe,qt)|0,Z=Z+Math.imul(Oe,rr)|0,J=J+Math.imul(ge,pr)|0,G=G+Math.imul(ge,Xr)|0,G=G+Math.imul(Te,pr)|0,Z=Z+Math.imul(Te,Xr)|0,J=J+Math.imul(ye,$r)|0,G=G+Math.imul(ye,nt)|0,G=G+Math.imul(ue,$r)|0,Z=Z+Math.imul(ue,nt)|0,J=J+Math.imul(ee,Kt)|0,G=G+Math.imul(ee,Ht)|0,G=G+Math.imul(ie,Kt)|0,Z=Z+Math.imul(ie,Ht)|0;var Ct=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,J=Math.imul(Ne,it),G=Math.imul(Ne,Pt),G=G+Math.imul(dt,it)|0,Z=Math.imul(dt,Pt),J=J+Math.imul(Qe,Ot)|0,G=G+Math.imul(Qe,Jt)|0,G=G+Math.imul(Fe,Ot)|0,Z=Z+Math.imul(Fe,Jt)|0,J=J+Math.imul(xe,qt)|0,G=G+Math.imul(xe,rr)|0,G=G+Math.imul(Pe,qt)|0,Z=Z+Math.imul(Pe,rr)|0,J=J+Math.imul(De,pr)|0,G=G+Math.imul(De,Xr)|0,G=G+Math.imul(Oe,pr)|0,Z=Z+Math.imul(Oe,Xr)|0,J=J+Math.imul(ge,$r)|0,G=G+Math.imul(ge,nt)|0,G=G+Math.imul(Te,$r)|0,Z=Z+Math.imul(Te,nt)|0,J=J+Math.imul(ye,Kt)|0,G=G+Math.imul(ye,Ht)|0,G=G+Math.imul(ue,Kt)|0,Z=Z+Math.imul(ue,Ht)|0;var St=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(St>>>26)|0,St&=67108863,J=Math.imul(Ne,Ot),G=Math.imul(Ne,Jt),G=G+Math.imul(dt,Ot)|0,Z=Math.imul(dt,Jt),J=J+Math.imul(Qe,qt)|0,G=G+Math.imul(Qe,rr)|0,G=G+Math.imul(Fe,qt)|0,Z=Z+Math.imul(Fe,rr)|0,J=J+Math.imul(xe,pr)|0,G=G+Math.imul(xe,Xr)|0,G=G+Math.imul(Pe,pr)|0,Z=Z+Math.imul(Pe,Xr)|0,J=J+Math.imul(De,$r)|0,G=G+Math.imul(De,nt)|0,G=G+Math.imul(Oe,$r)|0,Z=Z+Math.imul(Oe,nt)|0,J=J+Math.imul(ge,Kt)|0,G=G+Math.imul(ge,Ht)|0,G=G+Math.imul(Te,Kt)|0,Z=Z+Math.imul(Te,Ht)|0;var Nt=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,J=Math.imul(Ne,qt),G=Math.imul(Ne,rr),G=G+Math.imul(dt,qt)|0,Z=Math.imul(dt,rr),J=J+Math.imul(Qe,pr)|0,G=G+Math.imul(Qe,Xr)|0,G=G+Math.imul(Fe,pr)|0,Z=Z+Math.imul(Fe,Xr)|0,J=J+Math.imul(xe,$r)|0,G=G+Math.imul(xe,nt)|0,G=G+Math.imul(Pe,$r)|0,Z=Z+Math.imul(Pe,nt)|0,J=J+Math.imul(De,Kt)|0,G=G+Math.imul(De,Ht)|0,G=G+Math.imul(Oe,Kt)|0,Z=Z+Math.imul(Oe,Ht)|0;var ir=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(ir>>>26)|0,ir&=67108863,J=Math.imul(Ne,pr),G=Math.imul(Ne,Xr),G=G+Math.imul(dt,pr)|0,Z=Math.imul(dt,Xr),J=J+Math.imul(Qe,$r)|0,G=G+Math.imul(Qe,nt)|0,G=G+Math.imul(Fe,$r)|0,Z=Z+Math.imul(Fe,nt)|0,J=J+Math.imul(xe,Kt)|0,G=G+Math.imul(xe,Ht)|0,G=G+Math.imul(Pe,Kt)|0,Z=Z+Math.imul(Pe,Ht)|0;var lr=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(lr>>>26)|0,lr&=67108863,J=Math.imul(Ne,$r),G=Math.imul(Ne,nt),G=G+Math.imul(dt,$r)|0,Z=Math.imul(dt,nt),J=J+Math.imul(Qe,Kt)|0,G=G+Math.imul(Qe,Ht)|0,G=G+Math.imul(Fe,Kt)|0,Z=Z+Math.imul(Fe,Ht)|0;var Yr=(K+J|0)+((G&8191)<<13)|0;K=(Z+(G>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,J=Math.imul(Ne,Kt),G=Math.imul(Ne,Ht),G=G+Math.imul(dt,Kt)|0,Z=Math.imul(dt,Ht);var Pr=(K+J|0)+((G&8191)<<13)|0;return K=(Z+(G>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,Y[0]=_r,Y[1]=tt,Y[2]=je,Y[3]=st,Y[4]=ft,Y[5]=Me,Y[6]=Se,Y[7]=Ke,Y[8]=Xe,Y[9]=ot,Y[10]=pt,Y[11]=vt,Y[12]=Ct,Y[13]=St,Y[14]=Nt,Y[15]=ir,Y[16]=lr,Y[17]=Yr,Y[18]=Pr,K!==0&&(Y[19]=K,B.length++),B};Math.imul||(_=l);function s(I,D,R){R.negative=D.negative^I.negative,R.length=I.length+D.length;for(var B=0,F=0,V=0;V<R.length-1;V++){var Y=F;F=0;for(var K=B&67108863,J=Math.min(V,D.length-1),G=Math.max(0,V-I.length+1);G<=J;G++){var Z=V-G,re=I.words[Z]|0,se=D.words[G]|0,oe=re*se,N=oe&67108863;Y=Y+(oe/67108864|0)|0,N=N+K|0,K=N&67108863,Y=Y+(N>>>26)|0,F+=Y>>>26,Y&=67108863}R.words[V]=K,B=Y,Y=F}return B!==0?R.words[V]=B:R.length--,R.strip()}function w(I,D,R){var B=new b;return B.mulp(I,D,R)}r.prototype.mulTo=function(D,R){var B,F=this.length+D.length;return this.length===10&&D.length===10?B=_(this,D,R):F<63?B=l(this,D,R):F<1024?B=s(this,D,R):B=w(this,D,R),B};function b(I,D){this.x=I,this.y=D}b.prototype.makeRBT=function(D){for(var R=new Array(D),B=r.prototype._countBits(D)-1,F=0;F<D;F++)R[F]=this.revBin(F,B,D);return R},b.prototype.revBin=function(D,R,B){if(D===0||D===B-1)return D;for(var F=0,V=0;V<R;V++)F|=(D&1)<<R-V-1,D>>=1;return F},b.prototype.permute=function(D,R,B,F,V,Y){for(var K=0;K<Y;K++)F[K]=R[D[K]],V[K]=B[D[K]]},b.prototype.transform=function(D,R,B,F,V,Y){this.permute(Y,D,R,B,F,V);for(var K=1;K<V;K<<=1)for(var J=K<<1,G=Math.cos(2*Math.PI/J),Z=Math.sin(2*Math.PI/J),re=0;re<V;re+=J)for(var se=G,oe=Z,N=0;N<K;N++){var U=B[re+N],q=F[re+N],Q=B[re+N+K],W=F[re+N+K],X=se*Q-oe*W;W=se*W+oe*Q,Q=X,B[re+N]=U+Q,F[re+N]=q+W,B[re+N+K]=U-Q,F[re+N+K]=q-W,N!==J&&(X=G*se-Z*oe,oe=G*oe+Z*se,se=X)}},b.prototype.guessLen13b=function(D,R){var B=Math.max(R,D)|1,F=B&1,V=0;for(B=B/2|0;B;B=B>>>1)V++;return 1<<V+1+F},b.prototype.conjugate=function(D,R,B){if(!(B<=1))for(var F=0;F<B/2;F++){var V=D[F];D[F]=D[B-F-1],D[B-F-1]=V,V=R[F],R[F]=-R[B-F-1],R[B-F-1]=-V}},b.prototype.normalize13b=function(D,R){for(var B=0,F=0;F<R/2;F++){var V=Math.round(D[2*F+1]/R)*8192+Math.round(D[2*F]/R)+B;D[F]=V&67108863,V<67108864?B=0:B=V/67108864|0}return D},b.prototype.convert13b=function(D,R,B,F){for(var V=0,Y=0;Y<R;Y++)V=V+(D[Y]|0),B[2*Y]=V&8191,V=V>>>13,B[2*Y+1]=V&8191,V=V>>>13;for(Y=2*R;Y<F;++Y)B[Y]=0;n(V===0),n((V&~8191)==0)},b.prototype.stub=function(D){for(var R=new Array(D),B=0;B<D;B++)R[B]=0;return R},b.prototype.mulp=function(D,R,B){var F=2*this.guessLen13b(D.length,R.length),V=this.makeRBT(F),Y=this.stub(F),K=new Array(F),J=new Array(F),G=new Array(F),Z=new Array(F),re=new Array(F),se=new Array(F),oe=B.words;oe.length=F,this.convert13b(D.words,D.length,K,F),this.convert13b(R.words,R.length,Z,F),this.transform(K,Y,J,G,F,V),this.transform(Z,Y,re,se,F,V);for(var N=0;N<F;N++){var U=J[N]*re[N]-G[N]*se[N];G[N]=J[N]*se[N]+G[N]*re[N],J[N]=U}return this.conjugate(J,G,F),this.transform(J,G,oe,Y,F,V),this.conjugate(oe,Y,F),this.normalize13b(oe,F),B.negative=D.negative^R.negative,B.length=D.length+R.length,B.strip()},r.prototype.mul=function(D){var R=new r(null);return R.words=new Array(this.length+D.length),this.mulTo(D,R)},r.prototype.mulf=function(D){var R=new r(null);return R.words=new Array(this.length+D.length),w(this,D,R)},r.prototype.imul=function(D){return this.clone().mulTo(D,this)},r.prototype.imuln=function(D){n(typeof D=="number"),n(D<67108864);for(var R=0,B=0;B<this.length;B++){var F=(this.words[B]|0)*D,V=(F&67108863)+(R&67108863);R>>=26,R+=F/67108864|0,R+=V>>>26,this.words[B]=V&67108863}return R!==0&&(this.words[B]=R,this.length++),this},r.prototype.muln=function(D){return this.clone().imuln(D)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(D){var R=x(D);if(R.length===0)return new r(1);for(var B=this,F=0;F<R.length&&R[F]===0;F++,B=B.sqr());if(++F<R.length)for(var V=B.sqr();F<R.length;F++,V=V.sqr())R[F]!==0&&(B=B.mul(V));return B},r.prototype.iushln=function(D){n(typeof D=="number"&&D>=0);var R=D%26,B=(D-R)/26,F=67108863>>>26-R<<26-R,V;if(R!==0){var Y=0;for(V=0;V<this.length;V++){var K=this.words[V]&F,J=(this.words[V]|0)-K<<R;this.words[V]=J|Y,Y=K>>>26-R}Y&&(this.words[V]=Y,this.length++)}if(B!==0){for(V=this.length-1;V>=0;V--)this.words[V+B]=this.words[V];for(V=0;V<B;V++)this.words[V]=0;this.length+=B}return this.strip()},r.prototype.ishln=function(D){return n(this.negative===0),this.iushln(D)},r.prototype.iushrn=function(D,R,B){n(typeof D=="number"&&D>=0);var F;R?F=(R-R%26)/26:F=0;var V=D%26,Y=Math.min((D-V)/26,this.length),K=67108863^67108863>>>V<<V,J=B;if(F-=Y,F=Math.max(0,F),J){for(var G=0;G<Y;G++)J.words[G]=this.words[G];J.length=Y}if(Y!==0)if(this.length>Y)for(this.length-=Y,G=0;G<this.length;G++)this.words[G]=this.words[G+Y];else this.words[0]=0,this.length=1;var Z=0;for(G=this.length-1;G>=0&&(Z!==0||G>=F);G--){var re=this.words[G]|0;this.words[G]=Z<<26-V|re>>>V,Z=re&K}return J&&Z!==0&&(J.words[J.length++]=Z),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(D,R,B){return n(this.negative===0),this.iushrn(D,R,B)},r.prototype.shln=function(D){return this.clone().ishln(D)},r.prototype.ushln=function(D){return this.clone().iushln(D)},r.prototype.shrn=function(D){return this.clone().ishrn(D)},r.prototype.ushrn=function(D){return this.clone().iushrn(D)},r.prototype.testn=function(D){n(typeof D=="number"&&D>=0);var R=D%26,B=(D-R)/26,F=1<<R;if(this.length<=B)return!1;var V=this.words[B];return!!(V&F)},r.prototype.imaskn=function(D){n(typeof D=="number"&&D>=0);var R=D%26,B=(D-R)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=B)return this;if(R!==0&&B++,this.length=Math.min(B,this.length),R!==0){var F=67108863^67108863>>>R<<R;this.words[this.length-1]&=F}return this.strip()},r.prototype.maskn=function(D){return this.clone().imaskn(D)},r.prototype.iaddn=function(D){return n(typeof D=="number"),n(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(this.words[0]|0)<D?(this.words[0]=D-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},r.prototype._iaddn=function(D){this.words[0]+=D;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},r.prototype.isubn=function(D){if(n(typeof D=="number"),n(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},r.prototype.addn=function(D){return this.clone().iaddn(D)},r.prototype.subn=function(D){return this.clone().isubn(D)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(D,R,B){var F=D.length+B,V;this._expand(F);var Y,K=0;for(V=0;V<D.length;V++){Y=(this.words[V+B]|0)+K;var J=(D.words[V]|0)*R;Y-=J&67108863,K=(Y>>26)-(J/67108864|0),this.words[V+B]=Y&67108863}for(;V<this.length-B;V++)Y=(this.words[V+B]|0)+K,K=Y>>26,this.words[V+B]=Y&67108863;if(K===0)return this.strip();for(n(K===-1),K=0,V=0;V<this.length;V++)Y=-(this.words[V]|0)+K,K=Y>>26,this.words[V]=Y&67108863;return this.negative=1,this.strip()},r.prototype._wordDiv=function(D,R){var B=this.length-D.length,F=this.clone(),V=D,Y=V.words[V.length-1]|0,K=this._countBits(Y);B=26-K,B!==0&&(V=V.ushln(B),F.iushln(B),Y=V.words[V.length-1]|0);var J=F.length-V.length,G;if(R!=="mod"){G=new r(null),G.length=J+1,G.words=new Array(G.length);for(var Z=0;Z<G.length;Z++)G.words[Z]=0}var re=F.clone()._ishlnsubmul(V,1,J);re.negative===0&&(F=re,G&&(G.words[J]=1));for(var se=J-1;se>=0;se--){var oe=(F.words[V.length+se]|0)*67108864+(F.words[V.length+se-1]|0);for(oe=Math.min(oe/Y|0,67108863),F._ishlnsubmul(V,oe,se);F.negative!==0;)oe--,F.negative=0,F._ishlnsubmul(V,1,se),F.isZero()||(F.negative^=1);G&&(G.words[se]=oe)}return G&&G.strip(),F.strip(),R!=="div"&&B!==0&&F.iushrn(B),{div:G||null,mod:F}},r.prototype.divmod=function(D,R,B){if(n(!D.isZero()),this.isZero())return{div:new r(0),mod:new r(0)};var F,V,Y;return this.negative!==0&&D.negative===0?(Y=this.neg().divmod(D,R),R!=="mod"&&(F=Y.div.neg()),R!=="div"&&(V=Y.mod.neg(),B&&V.negative!==0&&V.iadd(D)),{div:F,mod:V}):this.negative===0&&D.negative!==0?(Y=this.divmod(D.neg(),R),R!=="mod"&&(F=Y.div.neg()),{div:F,mod:Y.mod}):(this.negative&D.negative)!=0?(Y=this.neg().divmod(D.neg(),R),R!=="div"&&(V=Y.mod.neg(),B&&V.negative!==0&&V.isub(D)),{div:Y.div,mod:V}):D.length>this.length||this.cmp(D)<0?{div:new r(0),mod:this}:D.length===1?R==="div"?{div:this.divn(D.words[0]),mod:null}:R==="mod"?{div:null,mod:new r(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new r(this.modn(D.words[0]))}:this._wordDiv(D,R)},r.prototype.div=function(D){return this.divmod(D,"div",!1).div},r.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},r.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},r.prototype.divRound=function(D){var R=this.divmod(D);if(R.mod.isZero())return R.div;var B=R.div.negative!==0?R.mod.isub(D):R.mod,F=D.ushrn(1),V=D.andln(1),Y=B.cmp(F);return Y<0||V===1&&Y===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},r.prototype.modn=function(D){n(D<=67108863);for(var R=(1<<26)%D,B=0,F=this.length-1;F>=0;F--)B=(R*B+(this.words[F]|0))%D;return B},r.prototype.idivn=function(D){n(D<=67108863);for(var R=0,B=this.length-1;B>=0;B--){var F=(this.words[B]|0)+R*67108864;this.words[B]=F/D|0,R=F%D}return this.strip()},r.prototype.divn=function(D){return this.clone().idivn(D)},r.prototype.egcd=function(D){n(D.negative===0),n(!D.isZero());var R=this,B=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var F=new r(1),V=new r(0),Y=new r(0),K=new r(1),J=0;R.isEven()&&B.isEven();)R.iushrn(1),B.iushrn(1),++J;for(var G=B.clone(),Z=R.clone();!R.isZero();){for(var re=0,se=1;(R.words[0]&se)==0&&re<26;++re,se<<=1);if(re>0)for(R.iushrn(re);re-- >0;)(F.isOdd()||V.isOdd())&&(F.iadd(G),V.isub(Z)),F.iushrn(1),V.iushrn(1);for(var oe=0,N=1;(B.words[0]&N)==0&&oe<26;++oe,N<<=1);if(oe>0)for(B.iushrn(oe);oe-- >0;)(Y.isOdd()||K.isOdd())&&(Y.iadd(G),K.isub(Z)),Y.iushrn(1),K.iushrn(1);R.cmp(B)>=0?(R.isub(B),F.isub(Y),V.isub(K)):(B.isub(R),Y.isub(F),K.isub(V))}return{a:Y,b:K,gcd:B.iushln(J)}},r.prototype._invmp=function(D){n(D.negative===0),n(!D.isZero());var R=this,B=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var F=new r(1),V=new r(0),Y=B.clone();R.cmpn(1)>0&&B.cmpn(1)>0;){for(var K=0,J=1;(R.words[0]&J)==0&&K<26;++K,J<<=1);if(K>0)for(R.iushrn(K);K-- >0;)F.isOdd()&&F.iadd(Y),F.iushrn(1);for(var G=0,Z=1;(B.words[0]&Z)==0&&G<26;++G,Z<<=1);if(G>0)for(B.iushrn(G);G-- >0;)V.isOdd()&&V.iadd(Y),V.iushrn(1);R.cmp(B)>=0?(R.isub(B),F.isub(V)):(B.isub(R),V.isub(F))}var re;return R.cmpn(1)===0?re=F:re=V,re.cmpn(0)<0&&re.iadd(D),re},r.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var R=this.clone(),B=D.clone();R.negative=0,B.negative=0;for(var F=0;R.isEven()&&B.isEven();F++)R.iushrn(1),B.iushrn(1);do{for(;R.isEven();)R.iushrn(1);for(;B.isEven();)B.iushrn(1);var V=R.cmp(B);if(V<0){var Y=R;R=B,B=Y}else if(V===0||B.cmpn(1)===0)break;R.isub(B)}while(!0);return B.iushln(F)},r.prototype.invm=function(D){return this.egcd(D).a.umod(D)},r.prototype.isEven=function(){return(this.words[0]&1)==0},r.prototype.isOdd=function(){return(this.words[0]&1)==1},r.prototype.andln=function(D){return this.words[0]&D},r.prototype.bincn=function(D){n(typeof D=="number");var R=D%26,B=(D-R)/26,F=1<<R;if(this.length<=B)return this._expand(B+1),this.words[B]|=F,this;for(var V=F,Y=B;V!==0&&Y<this.length;Y++){var K=this.words[Y]|0;K+=V,V=K>>>26,K&=67108863,this.words[Y]=K}return V!==0&&(this.words[Y]=V,this.length++),this},r.prototype.isZero=function(){return this.length===1&&this.words[0]===0},r.prototype.cmpn=function(D){var R=D<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;this.strip();var B;if(this.length>1)B=1;else{R&&(D=-D),n(D<=67108863,"Number is too big");var F=this.words[0]|0;B=F===D?0:F<D?-1:1}return this.negative!==0?-B|0:B},r.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var R=this.ucmp(D);return this.negative!==0?-R|0:R},r.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var R=0,B=this.length-1;B>=0;B--){var F=this.words[B]|0,V=D.words[B]|0;if(F!==V){F<V?R=-1:F>V&&(R=1);break}}return R},r.prototype.gtn=function(D){return this.cmpn(D)===1},r.prototype.gt=function(D){return this.cmp(D)===1},r.prototype.gten=function(D){return this.cmpn(D)>=0},r.prototype.gte=function(D){return this.cmp(D)>=0},r.prototype.ltn=function(D){return this.cmpn(D)===-1},r.prototype.lt=function(D){return this.cmp(D)===-1},r.prototype.lten=function(D){return this.cmpn(D)<=0},r.prototype.lte=function(D){return this.cmp(D)<=0},r.prototype.eqn=function(D){return this.cmpn(D)===0},r.prototype.eq=function(D){return this.cmp(D)===0},r.red=function(D){return new P(D)},r.prototype.toRed=function(D){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},r.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(D){return this.red=D,this},r.prototype.forceRed=function(D){return n(!this.red,"Already a number in reduction context"),this._forceRed(D)},r.prototype.redAdd=function(D){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},r.prototype.redIAdd=function(D){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},r.prototype.redSub=function(D){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},r.prototype.redISub=function(D){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},r.prototype.redShl=function(D){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},r.prototype.redMul=function(D){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},r.prototype.redIMul=function(D){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},r.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(D){return n(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var h={k256:null,p224:null,p192:null,p25519:null};function m(I,D){this.name=I,this.p=new r(D,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}m.prototype._tmp=function(){var D=new r(null);return D.words=new Array(Math.ceil(this.n/13)),D},m.prototype.ireduce=function(D){var R=D,B;do this.split(R,this.tmp),R=this.imulK(R),R=R.iadd(this.tmp),B=R.bitLength();while(B>this.n);var F=B<this.n?-1:R.ucmp(this.p);return F===0?(R.words[0]=0,R.length=1):F>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},m.prototype.split=function(D,R){D.iushrn(this.n,0,R)},m.prototype.imulK=function(D){return D.imul(this.k)};function u(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}t(u,m),u.prototype.split=function(D,R){for(var B=4194303,F=Math.min(D.length,9),V=0;V<F;V++)R.words[V]=D.words[V];if(R.length=F,D.length<=9){D.words[0]=0,D.length=1;return}var Y=D.words[9];for(R.words[R.length++]=Y&B,V=10;V<D.length;V++){var K=D.words[V]|0;D.words[V-10]=(K&B)<<4|Y>>>22,Y=K}Y>>>=22,D.words[V-10]=Y,Y===0&&D.length>10?D.length-=10:D.length-=9},u.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var R=0,B=0;B<D.length;B++){var F=D.words[B]|0;R+=F*977,D.words[B]=R&67108863,R=F*64+(R/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D};function L(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}t(L,m);function S(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}t(S,m);function k(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}t(k,m),k.prototype.imulK=function(D){for(var R=0,B=0;B<D.length;B++){var F=(D.words[B]|0)*19+R,V=F&67108863;F>>>=26,D.words[B]=V,R=F}return R!==0&&(D.words[D.length++]=R),D},r._prime=function(D){if(h[D])return h[D];var R;if(D==="k256")R=new u;else if(D==="p224")R=new L;else if(D==="p192")R=new S;else if(D==="p25519")R=new k;else throw new Error("Unknown prime "+D);return h[D]=R,R};function P(I){if(typeof I=="string"){var D=r._prime(I);this.m=D.p,this.prime=D}else n(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}P.prototype._verify1=function(D){n(D.negative===0,"red works only with positives"),n(D.red,"red works only with red numbers")},P.prototype._verify2=function(D,R){n((D.negative|R.negative)==0,"red works only with positives"),n(D.red&&D.red===R.red,"red works only with red numbers")},P.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},P.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},P.prototype.add=function(D,R){this._verify2(D,R);var B=D.add(R);return B.cmp(this.m)>=0&&B.isub(this.m),B._forceRed(this)},P.prototype.iadd=function(D,R){this._verify2(D,R);var B=D.iadd(R);return B.cmp(this.m)>=0&&B.isub(this.m),B},P.prototype.sub=function(D,R){this._verify2(D,R);var B=D.sub(R);return B.cmpn(0)<0&&B.iadd(this.m),B._forceRed(this)},P.prototype.isub=function(D,R){this._verify2(D,R);var B=D.isub(R);return B.cmpn(0)<0&&B.iadd(this.m),B},P.prototype.shl=function(D,R){return this._verify1(D),this.imod(D.ushln(R))},P.prototype.imul=function(D,R){return this._verify2(D,R),this.imod(D.imul(R))},P.prototype.mul=function(D,R){return this._verify2(D,R),this.imod(D.mul(R))},P.prototype.isqr=function(D){return this.imul(D,D.clone())},P.prototype.sqr=function(D){return this.mul(D,D)},P.prototype.sqrt=function(D){if(D.isZero())return D.clone();var R=this.m.andln(3);if(n(R%2==1),R===3){var B=this.m.add(new r(1)).iushrn(2);return this.pow(D,B)}for(var F=this.m.subn(1),V=0;!F.isZero()&&F.andln(1)===0;)V++,F.iushrn(1);n(!F.isZero());var Y=new r(1).toRed(this),K=Y.redNeg(),J=this.m.subn(1).iushrn(1),G=this.m.bitLength();for(G=new r(2*G*G).toRed(this);this.pow(G,J).cmp(K)!==0;)G.redIAdd(K);for(var Z=this.pow(G,F),re=this.pow(D,F.addn(1).iushrn(1)),se=this.pow(D,F),oe=V;se.cmp(Y)!==0;){for(var N=se,U=0;N.cmp(Y)!==0;U++)N=N.redSqr();n(U<oe);var q=this.pow(Z,new r(1).iushln(oe-U-1));re=re.redMul(q),Z=q.redSqr(),se=se.redMul(Z),oe=U}return re},P.prototype.invm=function(D){var R=D._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},P.prototype.pow=function(D,R){if(R.isZero())return new r(1).toRed(this);if(R.cmpn(1)===0)return D.clone();var B=4,F=new Array(1<<B);F[0]=new r(1).toRed(this),F[1]=D;for(var V=2;V<F.length;V++)F[V]=this.mul(F[V-1],D);var Y=F[0],K=0,J=0,G=R.bitLength()%26;for(G===0&&(G=26),V=R.length-1;V>=0;V--){for(var Z=R.words[V],re=G-1;re>=0;re--){var se=Z>>re&1;if(Y!==F[0]&&(Y=this.sqr(Y)),se===0&&K===0){J=0;continue}K<<=1,K|=se,J++,!(J!==B&&(V!==0||re!==0))&&(Y=this.mul(Y,F[K]),J=0,K=0)}G=26}return Y},P.prototype.convertTo=function(D){var R=D.umod(this.m);return R===D?R.clone():R},P.prototype.convertFrom=function(D){var R=D.clone();return R.red=null,R},r.mont=function(D){return new z(D)};function z(I){P.call(this,I),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}t(z,P),z.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},z.prototype.convertFrom=function(D){var R=this.imod(D.mul(this.rinv));return R.red=null,R},z.prototype.imul=function(D,R){if(D.isZero()||R.isZero())return D.words[0]=0,D.length=1,D;var B=D.imul(R),F=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=B.isub(F).iushrn(this.shift),Y=V;return V.cmp(this.m)>=0?Y=V.isub(this.m):V.cmpn(0)<0&&(Y=V.iadd(this.m)),Y._forceRed(this)},z.prototype.mul=function(D,R){if(D.isZero()||R.isZero())return new r(0)._forceRed(this);var B=D.mul(R),F=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=B.isub(F).iushrn(this.shift),Y=V;return V.cmp(this.m)>=0?Y=V.isub(this.m):V.cmpn(0)<0&&(Y=V.iadd(this.m)),Y._forceRed(this)},z.prototype.invm=function(D){var R=this.imod(D._invmp(this.m).mul(this.r2));return R._forceRed(this)}})(typeof M=="undefined"||M,this)},{buffer:2}],34:[function(c,M,A){M.exports=e;function e(a){var n,t,r,f=a.length,o=0;for(n=0;n<f;++n)o+=a[n].length;var i=new Array(o),p=0;for(n=0;n<f;++n){var d=a[n],y=d.length;for(t=0;t<y;++t){var v=i[p++]=new Array(y-1),x=0;for(r=0;r<y;++r)r!==t&&(v[x++]=d[r]);if(t&1){var l=v[1];v[1]=v[0],v[0]=l}}}return i}},{}],35:[function(c,M,A){M.exports=y;var e=c("typedarray-pool"),a=c("./lib/sweep"),n=c("./lib/intersect");function t(v,x){for(var l=0;l<v;++l)if(!(x[l]<=x[l+v]))return!0;return!1}function r(v,x,l,_){for(var s=0,w=0,b=0,h=v.length;b<h;++b){var m=v[b];if(!t(x,m)){for(var u=0;u<2*x;++u)l[s++]=m[u];_[w++]=b}}return w}function f(v,x,l,_){var s=v.length,w=x.length;if(!(s<=0||w<=0)){var b=v[0].length>>>1;if(!(b<=0)){var h,m=e.mallocDouble(2*b*s),u=e.mallocInt32(s);if(s=r(v,b,m,u),s>0){if(b===1&&_)a.init(s),h=a.sweepComplete(b,l,0,s,m,u,0,s,m,u);else{var L=e.mallocDouble(2*b*w),S=e.mallocInt32(w);w=r(x,b,L,S),w>0&&(a.init(s+w),b===1?h=a.sweepBipartite(b,l,0,s,m,u,0,w,L,S):h=n(b,l,_,s,m,u,w,L,S),e.free(L),e.free(S))}e.free(m),e.free(u)}return h}}}var o;function i(v,x){o.push([v,x])}function p(v){return o=[],f(v,v,i,!0),o}function d(v,x){return o=[],f(v,x,i,!1),o}function y(v,x,l){switch(arguments.length){case 1:return p(v);case 2:return typeof x=="function"?f(v,v,x,!0):d(v,x);case 3:return f(v,x,l,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(c,M,A){function e(){function t(o,i,p,d,y,v,x,l,_,s,w){for(var b=2*o,h=d,m=b*d;h<y;++h,m+=b){var u=v[i+m],L=v[i+m+o],S=x[h];e:for(var k=l,P=b*l;k<_;++k,P+=b){var z=s[i+P],I=s[i+P+o],D=w[k];if(!(I<u||L<z)){for(var R=i+1;R<o;++R){var B=v[R+m],F=v[R+o+m],V=s[R+P],Y=s[R+o+P];if(F<V||Y<B)continue e}var K=p(S,D);if(K!==void 0)return K}}}}function r(o,i,p,d,y,v,x,l,_,s,w){for(var b=2*o,h=l,m=b*l;h<_;++h,m+=b){var u=s[i+m],L=s[i+m+o],S=w[h];e:for(var k=d,P=b*d;k<y;++k,P+=b){var z=v[i+P],I=v[i+P+o],D=x[k];if(!(L<z||I<u)){for(var R=i+1;R<o;++R){var B=v[R+P],F=v[R+o+P],V=s[R+m],Y=s[R+o+m];if(F<V||Y<B)continue e}var K=p(D,S);if(K!==void 0)return K}}}}function f(o,i,p,d,y,v,x,l,_,s,w){return y-d>_-l?t(o,i,p,d,y,v,x,l,_,s,w):r(o,i,p,d,y,v,x,l,_,s,w)}return f}function a(){function t(p,d,y,v,x,l,_,s,w,b,h){for(var m=2*p,u=v,L=m*v;u<x;++u,L+=m){var S=l[d+L],k=l[d+L+p],P=_[u];e:for(var z=s,I=m*s;z<w;++z,I+=m){var D=b[d+I],R=h[z];if(!(D<=S||k<D)){for(var B=d+1;B<p;++B){var F=l[B+L],V=l[B+p+L],Y=b[B+I],K=b[B+p+I];if(V<Y||K<F)continue e}var J=y(R,P);if(J!==void 0)return J}}}}function r(p,d,y,v,x,l,_,s,w,b,h){for(var m=2*p,u=v,L=m*v;u<x;++u,L+=m){var S=l[d+L],k=l[d+L+p],P=_[u];e:for(var z=s,I=m*s;z<w;++z,I+=m){var D=b[d+I],R=h[z];if(!(D<S||k<D)){for(var B=d+1;B<p;++B){var F=l[B+L],V=l[B+p+L],Y=b[B+I],K=b[B+p+I];if(V<Y||K<F)continue e}var J=y(P,R);if(J!==void 0)return J}}}}function f(p,d,y,v,x,l,_,s,w,b,h){for(var m=2*p,u=s,L=m*s;u<w;++u,L+=m){var S=b[d+L],k=h[u];e:for(var P=v,z=m*v;P<x;++P,z+=m){var I=l[d+z],D=l[d+z+p],R=_[P];if(!(S<=I||D<S)){for(var B=d+1;B<p;++B){var F=l[B+z],V=l[B+p+z],Y=b[B+L],K=b[B+p+L];if(V<Y||K<F)continue e}var J=y(k,R);if(J!==void 0)return J}}}}function o(p,d,y,v,x,l,_,s,w,b,h){for(var m=2*p,u=s,L=m*s;u<w;++u,L+=m){var S=b[d+L],k=h[u];e:for(var P=v,z=m*v;P<x;++P,z+=m){var I=l[d+z],D=l[d+z+p],R=_[P];if(!(S<I||D<S)){for(var B=d+1;B<p;++B){var F=l[B+z],V=l[B+p+z],Y=b[B+L],K=b[B+p+L];if(V<Y||K<F)continue e}var J=y(R,k);if(J!==void 0)return J}}}}function i(p,d,y,v,x,l,_,s,w,b,h,m){return l-x>b-w?v?t(p,d,y,x,l,_,s,w,b,h,m):r(p,d,y,x,l,_,s,w,b,h,m):v?f(p,d,y,x,l,_,s,w,b,h,m):o(p,d,y,x,l,_,s,w,b,h,m)}return i}function n(t){return t?e():a()}A.partial=n(!1),A.full=n(!0)},{}],37:[function(c,M,A){M.exports=I;var e=c("typedarray-pool"),a=c("bit-twiddle"),n=c("./brute"),t=n.partial,r=n.full,f=c("./sweep"),o=c("./median"),i=c("./partition"),p=128,d=1<<22,y=1<<22,v=i("!(lo>=p0)&&!(p1>=hi)"),x=i("lo===p0"),l=i("lo<p0"),_=i("hi<=p0"),s=i("lo<=p0&&p0<=hi"),w=i("lo<p0&&p0<=hi"),b=6,h=2,m=1024,u=e.mallocInt32(m),L=e.mallocDouble(m);function S(D,R){var B=8*a.log2(R+1)*(D+1)|0,F=a.nextPow2(b*B);u.length<F&&(e.free(u),u=e.mallocInt32(F));var V=a.nextPow2(h*B);L.length<V&&(e.free(L),L=e.mallocDouble(V))}function k(D,R,B,F,V,Y,K,J,G){var Z=b*D;u[Z]=R,u[Z+1]=B,u[Z+2]=F,u[Z+3]=V,u[Z+4]=Y,u[Z+5]=K;var re=h*D;L[re]=J,L[re+1]=G}function P(D,R,B,F,V,Y,K,J,G,Z,re){var se=2*D,oe=G*se,N=Z[oe+R];e:for(var U=V,q=V*se;U<Y;++U,q+=se){var Q=K[q+R],W=K[q+R+D];if(!(N<Q||W<N)&&!(F&&N===Q)){for(var X=J[U],te=R+1;te<D;++te){var Q=K[q+te],W=K[q+te+D],ee=Z[oe+te],ie=Z[oe+te+D];if(W<ee||ie<Q)continue e}var le;if(F?le=B(re,X):le=B(X,re),le!==void 0)return le}}}function z(D,R,B,F,V,Y,K,J,G,Z){var re=2*D,se=J*re,oe=G[se+R];e:for(var N=F,U=F*re;N<V;++N,U+=re){var q=K[N];if(q!==Z){var Q=Y[U+R],W=Y[U+R+D];if(!(oe<Q||W<oe)){for(var X=R+1;X<D;++X){var Q=Y[U+X],W=Y[U+X+D],te=G[se+X],ee=G[se+X+D];if(W<te||ee<Q)continue e}var ie=B(q,Z);if(ie!==void 0)return ie}}}}function I(D,R,B,F,V,Y,K,J,G){S(D,F+K);var Z=0,re=2*D,se;for(k(Z++,0,0,F,0,K,B?16:0,-1/0,1/0),B||k(Z++,0,0,K,0,F,1,-1/0,1/0);Z>0;){Z-=1;var oe=Z*b,N=u[oe],U=u[oe+1],q=u[oe+2],Q=u[oe+3],W=u[oe+4],X=u[oe+5],te=Z*h,ee=L[te],ie=L[te+1],le=X&1,ye=!!(X&16),ue=V,pe=Y,ge=J,Te=G;if(le&&(ue=J,pe=G,ge=V,Te=Y),!(X&2&&(q=l(D,N,U,q,ue,pe,ie),U>=q))&&!(X&4&&(U=_(D,N,U,q,ue,pe,ee),U>=q))){var _e=q-U,De=W-Q;if(ye){if(D*_e*(_e+De)<y){if(se=f.scanComplete(D,N,R,U,q,ue,pe,Q,W,ge,Te),se!==void 0)return se;continue}}else if(D*Math.min(_e,De)<p){if(se=t(D,N,R,le,U,q,ue,pe,Q,W,ge,Te),se!==void 0)return se;continue}else if(D*_e*De<d){if(se=f.scanBipartite(D,N,R,le,U,q,ue,pe,Q,W,ge,Te),se!==void 0)return se;continue}var Oe=v(D,N,U,q,ue,pe,ee,ie);if(U<Oe)if(D*(Oe-U)<p){if(se=r(D,N+1,R,U,Oe,ue,pe,Q,W,ge,Te),se!==void 0)return se}else if(N===D-2){if(le?se=f.sweepBipartite(D,R,Q,W,ge,Te,U,Oe,ue,pe):se=f.sweepBipartite(D,R,U,Oe,ue,pe,Q,W,ge,Te),se!==void 0)return se}else k(Z++,N+1,U,Oe,Q,W,le,-1/0,1/0),k(Z++,N+1,Q,W,U,Oe,le^1,-1/0,1/0);if(Oe<q){var Ue=o(D,N,Q,W,ge,Te),xe=ge[re*Ue+N],Pe=x(D,N,Ue,W,ge,Te,xe);if(Pe<W&&k(Z++,N,Oe,q,Pe,W,(le|4)+(ye?16:0),xe,ie),Q<Ue&&k(Z++,N,Oe,q,Q,Ue,(le|2)+(ye?16:0),ee,xe),Ue+1===Pe){if(ye?se=z(D,N,R,Oe,q,ue,pe,Ue,ge,Te[Ue]):se=P(D,N,R,le,Oe,q,ue,pe,Ue,ge,Te[Ue]),se!==void 0)return se}else if(Ue<Pe){var Ve;if(ye){if(Ve=s(D,N,Oe,q,ue,pe,xe),Oe<Ve){var Qe=x(D,N,Oe,Ve,ue,pe,xe);if(N===D-2){if(Oe<Qe&&(se=f.sweepComplete(D,R,Oe,Qe,ue,pe,Ue,Pe,ge,Te),se!==void 0)||Qe<Ve&&(se=f.sweepBipartite(D,R,Qe,Ve,ue,pe,Ue,Pe,ge,Te),se!==void 0))return se}else Oe<Qe&&k(Z++,N+1,Oe,Qe,Ue,Pe,16,-1/0,1/0),Qe<Ve&&(k(Z++,N+1,Qe,Ve,Ue,Pe,0,-1/0,1/0),k(Z++,N+1,Ue,Pe,Qe,Ve,1,-1/0,1/0))}}else le?Ve=w(D,N,Oe,q,ue,pe,xe):Ve=s(D,N,Oe,q,ue,pe,xe),Oe<Ve&&(N===D-2?le?se=f.sweepBipartite(D,R,Ue,Pe,ge,Te,Oe,Ve,ue,pe):se=f.sweepBipartite(D,R,Oe,Ve,ue,pe,Ue,Pe,ge,Te):(k(Z++,N+1,Oe,Ve,Ue,Pe,le,-1/0,1/0),k(Z++,N+1,Ue,Pe,Oe,Ve,le^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(c,M,A){M.exports=r;var e=c("./partition"),a=e("lo<p0"),n=8;function t(f,o,i,p,d,y){for(var v=2*f,x=v*(i+1)+o,l=i+1;l<p;++l,x+=v)for(var _=d[x],s=l,w=v*(l-1);s>i&&d[w+o]>_;--s,w-=v){for(var b=w,h=w+v,m=0;m<v;++m,++b,++h){var u=d[b];d[b]=d[h],d[h]=u}var L=y[s];y[s]=y[s-1],y[s-1]=L}}function r(f,o,i,p,d,y){if(p<=i+1)return i;for(var v=i,x=p,l=p+i>>>1,_=2*f,s=l,w=d[_*l+o];v<x;){if(x-v<n){t(f,o,v,x,d,y),w=d[_*l+o];break}var b=x-v,h=Math.random()*b+v|0,m=d[_*h+o],u=Math.random()*b+v|0,L=d[_*u+o],S=Math.random()*b+v|0,k=d[_*S+o];m<=L?k>=L?(s=u,w=L):m>=k?(s=h,w=m):(s=S,w=k):L>=k?(s=u,w=L):k>=m?(s=h,w=m):(s=S,w=k);for(var P=_*(x-1),z=_*s,I=0;I<_;++I,++P,++z){var D=d[P];d[P]=d[z],d[z]=D}var R=y[x-1];y[x-1]=y[s],y[s]=R,s=a(f,o,v,x-1,d,y,w);for(var P=_*(x-1),z=_*s,I=0;I<_;++I,++P,++z){var D=d[P];d[P]=d[z],d[z]=D}var R=y[x-1];if(y[x-1]=y[s],y[s]=R,l<s){for(x=s-1;v<x&&d[_*(x-1)+o]===w;)x-=1;x+=1}else if(s<l)for(v=s+1;v<x&&d[_*v+o]===w;)v+=1;else break}return a(f,o,i,l,d,y,d[_*l+o])}},{"./partition":39}],39:[function(c,M,A){M.exports=a;var e={"lo===p0":n,"lo<p0":t,"lo<=p0":r,"hi<=p0":f,"lo<p0&&p0<=hi":i,"lo<=p0&&p0<=hi":o,"!(lo>=p0)&&!(p1>=hi)":p};function a(d){return e[d]}function n(d,y,v,x,l,_,s){for(var w=2*d,b=w*v,h=b,m=v,u=y,L=v;x>L;++L,b+=w){var S=l[b+u];if(S===s)if(m===L)m+=1,h+=w;else{for(var k=0;w>k;++k){var P=l[b+k];l[b+k]=l[h],l[h++]=P}var z=_[L];_[L]=_[m],_[m++]=z}}return m}function t(d,y,v,x,l,_,s){for(var w=2*d,b=w*v,h=b,m=v,u=y,L=v;x>L;++L,b+=w){var S=l[b+u];if(S<s)if(m===L)m+=1,h+=w;else{for(var k=0;w>k;++k){var P=l[b+k];l[b+k]=l[h],l[h++]=P}var z=_[L];_[L]=_[m],_[m++]=z}}return m}function r(d,y,v,x,l,_,s){for(var w=2*d,b=w*v,h=b,m=v,u=d+y,L=v;x>L;++L,b+=w){var S=l[b+u];if(S<=s)if(m===L)m+=1,h+=w;else{for(var k=0;w>k;++k){var P=l[b+k];l[b+k]=l[h],l[h++]=P}var z=_[L];_[L]=_[m],_[m++]=z}}return m}function f(d,y,v,x,l,_,s){for(var w=2*d,b=w*v,h=b,m=v,u=d+y,L=v;x>L;++L,b+=w){var S=l[b+u];if(S<=s)if(m===L)m+=1,h+=w;else{for(var k=0;w>k;++k){var P=l[b+k];l[b+k]=l[h],l[h++]=P}var z=_[L];_[L]=_[m],_[m++]=z}}return m}function o(d,y,v,x,l,_,s){for(var w=2*d,b=w*v,h=b,m=v,u=y,L=d+y,S=v;x>S;++S,b+=w){var k=l[b+u],P=l[b+L];if(k<=s&&s<=P)if(m===S)m+=1,h+=w;else{for(var z=0;w>z;++z){var I=l[b+z];l[b+z]=l[h],l[h++]=I}var D=_[S];_[S]=_[m],_[m++]=D}}return m}function i(d,y,v,x,l,_,s){for(var w=2*d,b=w*v,h=b,m=v,u=y,L=d+y,S=v;x>S;++S,b+=w){var k=l[b+u],P=l[b+L];if(k<s&&s<=P)if(m===S)m+=1,h+=w;else{for(var z=0;w>z;++z){var I=l[b+z];l[b+z]=l[h],l[h++]=I}var D=_[S];_[S]=_[m],_[m++]=D}}return m}function p(d,y,v,x,l,_,s,w){for(var b=2*d,h=b*v,m=h,u=v,L=y,S=d+y,k=v;x>k;++k,h+=b){var P=l[h+L],z=l[h+S];if(!(P>=s)&&!(w>=z))if(u===k)u+=1,m+=b;else{for(var I=0;b>I;++I){var D=l[h+I];l[h+I]=l[m],l[m++]=D}var R=_[k];_[k]=_[u],_[u++]=R}}return u}},{}],40:[function(c,M,A){M.exports=a;var e=32;function a(y,v){v<=4*e?n(0,v-1,y):d(0,v-1,y)}function n(y,v,x){for(var l=2*(y+1),_=y+1;_<=v;++_){for(var s=x[l++],w=x[l++],b=_,h=l-2;b-- >y;){var m=x[h-2],u=x[h-1];if(m<s)break;if(m===s&&u<w)break;x[h]=m,x[h+1]=u,h-=2}x[h]=s,x[h+1]=w}}function t(y,v,x){y*=2,v*=2;var l=x[y],_=x[y+1];x[y]=x[v],x[y+1]=x[v+1],x[v]=l,x[v+1]=_}function r(y,v,x){y*=2,v*=2,x[y]=x[v],x[y+1]=x[v+1]}function f(y,v,x,l){y*=2,v*=2,x*=2;var _=l[y],s=l[y+1];l[y]=l[v],l[y+1]=l[v+1],l[v]=l[x],l[v+1]=l[x+1],l[x]=_,l[x+1]=s}function o(y,v,x,l,_){y*=2,v*=2,_[y]=_[v],_[v]=x,_[y+1]=_[v+1],_[v+1]=l}function i(y,v,x){y*=2,v*=2;var l=x[y],_=x[v];return l<_?!1:l===_?x[y+1]>x[v+1]:!0}function p(y,v,x,l){y*=2;var _=l[y];return _<v?!0:_===v?l[y+1]<x:!1}function d(y,v,x){var l=(v-y+1)/6|0,_=y+l,s=v-l,w=y+v>>1,b=w-l,h=w+l,m=_,u=b,L=w,S=h,k=s,P=y+1,z=v-1,I=0;i(m,u,x)&&(I=m,m=u,u=I),i(S,k,x)&&(I=S,S=k,k=I),i(m,L,x)&&(I=m,m=L,L=I),i(u,L,x)&&(I=u,u=L,L=I),i(m,S,x)&&(I=m,m=S,S=I),i(L,S,x)&&(I=L,L=S,S=I),i(u,k,x)&&(I=u,u=k,k=I),i(u,L,x)&&(I=u,u=L,L=I),i(S,k,x)&&(I=S,S=k,k=I);for(var D=x[2*u],R=x[2*u+1],B=x[2*S],F=x[2*S+1],V=2*m,Y=2*L,K=2*k,J=2*_,G=2*w,Z=2*s,re=0;re<2;++re){var se=x[V+re],oe=x[Y+re],N=x[K+re];x[J+re]=se,x[G+re]=oe,x[Z+re]=N}r(b,y,x),r(h,v,x);for(var U=P;U<=z;++U)if(p(U,D,R,x))U!==P&&t(U,P,x),++P;else if(!p(U,B,F,x))for(;;)if(p(z,B,F,x)){p(z,D,R,x)?(f(U,P,z,x),++P,--z):(t(U,z,x),--z);break}else{if(--z<U)break;continue}o(y,P-1,D,R,x),o(v,z+1,B,F,x),P-2-y<=e?n(y,P-2,x):d(y,P-2,x),v-(z+2)<=e?n(z+2,v,x):d(z+2,v,x),z-P<=e?n(P,z,x):d(P,z,x)}},{}],41:[function(c,M,A){M.exports={init:x,sweepBipartite:s,sweepComplete:w,scanBipartite:b,scanComplete:h};var e=c("typedarray-pool"),a=c("bit-twiddle"),n=c("./sort"),t=1<<28,r=1024,f=e.mallocInt32(r),o=e.mallocInt32(r),i=e.mallocInt32(r),p=e.mallocInt32(r),d=e.mallocInt32(r),y=e.mallocInt32(r),v=e.mallocDouble(r*8);function x(m){var u=a.nextPow2(m);f.length<u&&(e.free(f),f=e.mallocInt32(u)),o.length<u&&(e.free(o),o=e.mallocInt32(u)),i.length<u&&(e.free(i),i=e.mallocInt32(u)),p.length<u&&(e.free(p),p=e.mallocInt32(u)),d.length<u&&(e.free(d),d=e.mallocInt32(u)),y.length<u&&(e.free(y),y=e.mallocInt32(u));var L=8*u;v.length<L&&(e.free(v),v=e.mallocDouble(L))}function l(m,u,L,S){var k=u[S],P=m[L-1];m[k]=P,u[P]=k}function _(m,u,L,S){m[L]=S,u[S]=L}function s(m,u,L,S,k,P,z,I,D,R){for(var B=0,F=2*m,V=m-1,Y=F-1,K=L;K<S;++K){var J=P[K],G=F*K;v[B++]=k[G+V],v[B++]=-(J+1),v[B++]=k[G+Y],v[B++]=J}for(var K=z;K<I;++K){var J=R[K]+t,Z=F*K;v[B++]=D[Z+V],v[B++]=-J,v[B++]=D[Z+Y],v[B++]=J}var re=B>>>1;n(v,re);for(var se=0,oe=0,K=0;K<re;++K){var N=v[2*K+1]|0;if(N>=t)N=N-t|0,l(i,p,oe--,N);else if(N>=0)l(f,o,se--,N);else if(N<=-t){N=-N-t|0;for(var U=0;U<se;++U){var q=u(f[U],N);if(q!==void 0)return q}_(i,p,oe++,N)}else{N=-N-1|0;for(var U=0;U<oe;++U){var q=u(N,i[U]);if(q!==void 0)return q}_(f,o,se++,N)}}}function w(m,u,L,S,k,P,z,I,D,R){for(var B=0,F=2*m,V=m-1,Y=F-1,K=L;K<S;++K){var J=P[K]+1<<1,G=F*K;v[B++]=k[G+V],v[B++]=-J,v[B++]=k[G+Y],v[B++]=J}for(var K=z;K<I;++K){var J=R[K]+1<<1,Z=F*K;v[B++]=D[Z+V],v[B++]=-J|1,v[B++]=D[Z+Y],v[B++]=J|1}var re=B>>>1;n(v,re);for(var se=0,oe=0,N=0,K=0;K<re;++K){var U=v[2*K+1]|0,q=U&1;if(K<re-1&&U>>1==v[2*K+3]>>1&&(q=2,K+=1),U<0){for(var Q=-(U>>1)-1,W=0;W<N;++W){var X=u(d[W],Q);if(X!==void 0)return X}if(q!==0)for(var W=0;W<se;++W){var X=u(f[W],Q);if(X!==void 0)return X}if(q!==1)for(var W=0;W<oe;++W){var X=u(i[W],Q);if(X!==void 0)return X}q===0?_(f,o,se++,Q):q===1?_(i,p,oe++,Q):q===2&&_(d,y,N++,Q)}else{var Q=(U>>1)-1;q===0?l(f,o,se--,Q):q===1?l(i,p,oe--,Q):q===2&&l(d,y,N--,Q)}}}function b(m,u,L,S,k,P,z,I,D,R,B,F){var V=0,Y=2*m,K=u,J=u+m,G=1,Z=1;S?Z=t:G=t;for(var re=k;re<P;++re){var se=re+G,oe=Y*re;v[V++]=z[oe+K],v[V++]=-se,v[V++]=z[oe+J],v[V++]=se}for(var re=D;re<R;++re){var se=re+Z,N=Y*re;v[V++]=B[N+K],v[V++]=-se}var U=V>>>1;n(v,U);for(var q=0,re=0;re<U;++re){var Q=v[2*re+1]|0;if(Q<0){var se=-Q,W=!1;if(se>=t?(W=!S,se-=t):(W=!!S,se-=1),W)_(f,o,q++,se);else{var X=F[se],te=Y*se,ee=B[te+u+1],ie=B[te+u+1+m];e:for(var le=0;le<q;++le){var ye=f[le],ue=Y*ye;if(!(ie<z[ue+u+1]||z[ue+u+1+m]<ee)){for(var pe=u+2;pe<m;++pe)if(B[te+pe+m]<z[ue+pe]||z[ue+pe+m]<B[te+pe])continue e;var ge=I[ye],Te;if(S?Te=L(X,ge):Te=L(ge,X),Te!==void 0)return Te}}}}else l(f,o,q--,Q-G)}}function h(m,u,L,S,k,P,z,I,D,R,B){for(var F=0,V=2*m,Y=u,K=u+m,J=S;J<k;++J){var G=J+t,Z=V*J;v[F++]=P[Z+Y],v[F++]=-G,v[F++]=P[Z+K],v[F++]=G}for(var J=I;J<D;++J){var G=J+1,re=V*J;v[F++]=R[re+Y],v[F++]=-G}var se=F>>>1;n(v,se);for(var oe=0,J=0;J<se;++J){var N=v[2*J+1]|0;if(N<0){var G=-N;if(G>=t)f[oe++]=G-t;else{G-=1;var U=B[G],q=V*G,Q=R[q+u+1],W=R[q+u+1+m];e:for(var X=0;X<oe;++X){var te=f[X],ee=z[te];if(ee===U)break;var ie=V*te;if(!(W<P[ie+u+1]||P[ie+u+1+m]<Q)){for(var le=u+2;le<m;++le)if(R[q+le+m]<P[ie+le]||P[ie+le+m]<R[q+le])continue e;var ye=L(ee,U);if(ye!==void 0)return ye}}}}else{for(var G=N-t,X=oe-1;X>=0;--X)if(f[X]===G){for(var le=X+1;le<oe;++le)f[le-1]=f[le];break}--oe}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(c,M,A){var e=c("./lib/monotone"),a=c("./lib/triangulation"),n=c("./lib/delaunay"),t=c("./lib/filter");M.exports=p;function r(d){return[Math.min(d[0],d[1]),Math.max(d[0],d[1])]}function f(d,y){return d[0]-y[0]||d[1]-y[1]}function o(d){return d.map(r).sort(f)}function i(d,y,v){return y in d?d[y]:v}function p(d,y,v){Array.isArray(y)?(v=v||{},y=y||[]):(v=y||{},y=[]);var x=!!i(v,"delaunay",!0),l=!!i(v,"interior",!0),_=!!i(v,"exterior",!0),s=!!i(v,"infinity",!1);if(!l&&!_||d.length===0)return[];var w=e(d,y);if(x||l!==_||s){for(var b=a(d.length,o(y)),h=0;h<w.length;++h){var m=w[h];b.addTriangle(m[0],m[1],m[2])}return x&&n(d,b),_?l?s?t(b,0,s):b.cells():t(b,1,s):t(b,-1)}else return w}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(c,M,A){var e=c("robust-in-sphere")[4];c("binary-search-bounds"),M.exports=n;function a(t,r,f,o,i,p){var d=r.opposite(o,i);if(!(d<0)){if(i<o){var y=o;o=i,i=y,y=p,p=d,d=y}r.isConstraint(o,i)||e(t[o],t[i],t[p],t[d])<0&&f.push(o,i)}}function n(t,r){for(var f=[],o=t.length,i=r.stars,p=0;p<o;++p)for(var d=i[p],y=1;y<d.length;y+=2){var v=d[y];if(!(v<p)&&!r.isConstraint(p,v)){for(var x=d[y-1],l=-1,_=1;_<d.length;_+=2)if(d[_-1]===v){l=d[_];break}l<0||e(t[p],t[v],t[x],t[l])<0&&f.push(p,v)}}for(;f.length>0;){for(var v=f.pop(),p=f.pop(),x=-1,l=-1,d=i[p],s=1;s<d.length;s+=2){var w=d[s-1],b=d[s];w===v?l=b:b===v&&(x=w)}x<0||l<0||e(t[p],t[v],t[x],t[l])>=0||(r.flip(p,v),a(t,r,f,x,p,l),a(t,r,f,p,l,x),a(t,r,f,l,v,x),a(t,r,f,v,x,l))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(c,M,A){var e=c("binary-search-bounds");M.exports=o;function a(i,p,d,y,v,x,l){this.cells=i,this.neighbor=p,this.flags=y,this.constraint=d,this.active=v,this.next=x,this.boundary=l}var n=a.prototype;function t(i,p){return i[0]-p[0]||i[1]-p[1]||i[2]-p[2]}n.locate=function(){var i=[0,0,0];return function(p,d,y){var v=p,x=d,l=y;return d<y?d<p&&(v=d,x=y,l=p):y<p&&(v=y,x=p,l=d),v<0?-1:(i[0]=v,i[1]=x,i[2]=l,e.eq(this.cells,i,t))}}();function r(i,p){for(var d=i.cells(),y=d.length,v=0;v<y;++v){var x=d[v],l=x[0],_=x[1],s=x[2];_<s?_<l&&(x[0]=_,x[1]=s,x[2]=l):s<l&&(x[0]=s,x[1]=l,x[2]=_)}d.sort(t);for(var w=new Array(y),v=0;v<w.length;++v)w[v]=0;var b=[],h=[],m=new Array(3*y),u=new Array(3*y),L=null;p&&(L=[]);for(var S=new a(d,m,u,w,b,h,L),v=0;v<y;++v)for(var x=d[v],k=0;k<3;++k){var l=x[k],_=x[(k+1)%3],P=m[3*v+k]=S.locate(_,l,i.opposite(_,l)),z=u[3*v+k]=i.isConstraint(l,_);P<0&&(z?h.push(v):(b.push(v),w[v]=1),p&&L.push([_,l,-1]))}return S}function f(i,p,d){for(var y=0,v=0;v<i.length;++v)p[v]===d&&(i[y++]=i[v]);return i.length=y,i}function o(i,p,d){var y=r(i,d);if(p===0)return d?y.cells.concat(y.boundary):y.cells;for(var v=1,x=y.active,l=y.next,_=y.flags,s=y.cells,w=y.constraint,b=y.neighbor;x.length>0||l.length>0;){for(;x.length>0;){var h=x.pop();if(_[h]!==-v){_[h]=v,s[h];for(var m=0;m<3;++m){var u=b[3*h+m];u>=0&&_[u]===0&&(w[3*h+m]?l.push(u):(x.push(u),_[u]=v))}}}var L=l;l=x,x=L,l.length=0,v=-v}var S=f(s,_,p);return d?S.concat(y.boundary):S}},{"binary-search-bounds":31}],45:[function(c,M,A){var e=c("binary-search-bounds"),a=c("robust-orientation")[3],n=0,t=1,r=2;M.exports=l;function f(_,s,w,b,h){this.a=_,this.b=s,this.idx=w,this.lowerIds=b,this.upperIds=h}function o(_,s,w,b){this.a=_,this.b=s,this.type=w,this.idx=b}function i(_,s){var w=_.a[0]-s.a[0]||_.a[1]-s.a[1]||_.type-s.type;return w||_.type!==n&&(w=a(_.a,_.b,s.b),w)?w:_.idx-s.idx}function p(_,s){return a(_.a,_.b,s)}function d(_,s,w,b,h){for(var m=e.lt(s,b,p),u=e.gt(s,b,p),L=m;L<u;++L){for(var S=s[L],k=S.lowerIds,P=k.length;P>1&&a(w[k[P-2]],w[k[P-1]],b)>0;)_.push([k[P-1],k[P-2],h]),P-=1;k.length=P,k.push(h);for(var z=S.upperIds,P=z.length;P>1&&a(w[z[P-2]],w[z[P-1]],b)<0;)_.push([z[P-2],z[P-1],h]),P-=1;z.length=P,z.push(h)}}function y(_,s){var w;return _.a[0]<s.a[0]?w=a(_.a,_.b,s.a):w=a(s.b,s.a,_.a),w||(s.b[0]<_.b[0]?w=a(_.a,_.b,s.b):w=a(s.b,s.a,_.b),w||_.idx-s.idx)}function v(_,s,w){var b=e.le(_,w,y),h=_[b],m=h.upperIds,u=m[m.length-1];h.upperIds=[u],_.splice(b+1,0,new f(w.a,w.b,w.idx,[u],m))}function x(_,s,w){var b=w.a;w.a=w.b,w.b=b;var h=e.eq(_,w,y),m=_[h],u=_[h-1];u.upperIds=m.upperIds,_.splice(h,1)}function l(_,s){for(var w=_.length,b=s.length,h=[],m=0;m<w;++m)h.push(new o(_[m],null,n,m));for(var m=0;m<b;++m){var u=s[m],L=_[u[0]],S=_[u[1]];L[0]<S[0]?h.push(new o(L,S,r,m),new o(S,L,t,m)):L[0]>S[0]&&h.push(new o(S,L,r,m),new o(L,S,t,m))}h.sort(i);for(var k=h[0].a[0]-(1+Math.abs(h[0].a[0]))*Math.pow(2,-52),P=[new f([k,1],[k,0],-1,[],[],[],[])],z=[],m=0,I=h.length;m<I;++m){var D=h[m],R=D.type;R===n?d(z,P,_,D.a,D.idx):R===r?v(P,_,D):x(P,_,D)}return z}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(c,M,A){var e=c("binary-search-bounds");M.exports=r;function a(f,o){this.stars=f,this.edges=o}var n=a.prototype;function t(f,o,i){for(var p=1,d=f.length;p<d;p+=2)if(f[p-1]===o&&f[p]===i){f[p-1]=f[d-2],f[p]=f[d-1],f.length=d-2;return}}n.isConstraint=function(){var f=[0,0];function o(i,p){return i[0]-p[0]||i[1]-p[1]}return function(i,p){return f[0]=Math.min(i,p),f[1]=Math.max(i,p),e.eq(this.edges,f,o)>=0}}(),n.removeTriangle=function(f,o,i){var p=this.stars;t(p[f],o,i),t(p[o],i,f),t(p[i],f,o)},n.addTriangle=function(f,o,i){var p=this.stars;p[f].push(o,i),p[o].push(i,f),p[i].push(f,o)},n.opposite=function(f,o){for(var i=this.stars[o],p=1,d=i.length;p<d;p+=2)if(i[p]===f)return i[p-1];return-1},n.flip=function(f,o){var i=this.opposite(f,o),p=this.opposite(o,f);this.removeTriangle(f,o,i),this.removeTriangle(o,f,p),this.addTriangle(f,p,i),this.addTriangle(o,i,p)},n.edges=function(){for(var f=this.stars,o=[],i=0,p=f.length;i<p;++i)for(var d=f[i],y=0,v=d.length;y<v;y+=2)o.push([d[y],d[y+1]]);return o},n.cells=function(){for(var f=this.stars,o=[],i=0,p=f.length;i<p;++i)for(var d=f[i],y=0,v=d.length;y<v;y+=2){var x=d[y],l=d[y+1];i<Math.min(x,l)&&o.push([i,x,l])}return o};function r(f,o){for(var i=new Array(f),p=0;p<f;++p)i[p]=[];return new a(i,o)}},{"binary-search-bounds":31}],47:[function(c,M,A){M.exports=e;function e(a){for(var n=1,t=1;t<a.length;++t)for(var r=0;r<t;++r)if(a[t]<a[r])n=-n;else if(a[r]===a[t])return 0;return n}},{}],48:[function(c,M,A){var e=c("dup"),a=c("robust-linear-solve");function n(f,o){for(var i=0,p=f.length,d=0;d<p;++d)i+=f[d]*o[d];return i}function t(f){var o=f.length;if(o===0)return[];f[0].length;var i=e([f.length+1,f.length+1],1),p=e([f.length+1],1);i[o][o]=0;for(var d=0;d<o;++d){for(var y=0;y<=d;++y)i[y][d]=i[d][y]=2*n(f[d],f[y]);p[d]=n(f[d],f[d])}for(var v=a(i,p),x=0,l=v[o+1],d=0;d<l.length;++d)x+=l[d];for(var _=new Array(o),d=0;d<o;++d){for(var l=v[d],s=0,y=0;y<l.length;++y)s+=l[y];_[d]=s/x}return _}function r(f){if(f.length===0)return[];for(var o=f[0].length,i=e([o]),p=t(f),d=0;d<f.length;++d)for(var y=0;y<o;++y)i[y]+=f[d][y]*p[d];return i}r.barycenetric=t,M.exports=r},{dup:65,"robust-linear-solve":283}],49:[function(c,M,A){M.exports=a;var e=c("circumcenter");function a(n){for(var t=e(n),r=0,f=0;f<n.length;++f)for(var o=n[f],i=0;i<t.length;++i)r+=Math.pow(o[i]-t[i],2);return Math.sqrt(r/n.length)}},{circumcenter:48}],50:[function(c,M,A){M.exports=L;var e=c("union-find"),a=c("box-intersect"),n=c("robust-segment-intersect"),t=c("big-rat"),r=c("big-rat/cmp"),f=c("big-rat/to-float"),o=c("rat-vec"),i=c("nextafter"),p=c("./lib/rat-seg-intersect");function d(S){var k=f(S);return[i(k,-1/0),i(k,1/0)]}function y(S,k){for(var P=new Array(k.length),z=0;z<k.length;++z){var I=k[z],D=S[I[0]],R=S[I[1]];P[z]=[i(Math.min(D[0],R[0]),-1/0),i(Math.min(D[1],R[1]),-1/0),i(Math.max(D[0],R[0]),1/0),i(Math.max(D[1],R[1]),1/0)]}return P}function v(S){for(var k=new Array(S.length),P=0;P<S.length;++P){var z=S[P];k[P]=[i(z[0],-1/0),i(z[1],-1/0),i(z[0],1/0),i(z[1],1/0)]}return k}function x(S,k,P){var z=[];return a(P,function(I,D){var R=k[I],B=k[D];if(!(R[0]===B[0]||R[0]===B[1]||R[1]===B[0]||R[1]===B[1])){var F=S[R[0]],V=S[R[1]],Y=S[B[0]],K=S[B[1]];n(F,V,Y,K)&&z.push([I,D])}}),z}function l(S,k,P,z){var I=[];return a(P,z,function(D,R){var B=k[D];if(!(B[0]===R||B[1]===R)){var F=S[R],V=S[B[0]],Y=S[B[1]];n(V,Y,F,F)&&I.push([D,R])}}),I}function _(S,k,P,z,I){var D,R,B=S.map(function(te){return[t(te[0]),t(te[1])]});for(D=0;D<P.length;++D){var F=P[D];R=F[0];var V=F[1],Y=k[R],K=k[V],J=p(o(S[Y[0]]),o(S[Y[1]]),o(S[K[0]]),o(S[K[1]]));if(!!J){var G=S.length;S.push([f(J[0]),f(J[1])]),B.push(J),z.push([R,G],[V,G])}}for(z.sort(function(te,ee){if(te[0]!==ee[0])return te[0]-ee[0];var ie=B[te[1]],le=B[ee[1]];return r(ie[0],le[0])||r(ie[1],le[1])}),D=z.length-1;D>=0;--D){var Z=z[D];R=Z[0];var re=k[R],se=re[0],oe=re[1],N=S[se],U=S[oe];if((N[0]-U[0]||N[1]-U[1])<0){var q=se;se=oe,oe=q}re[0]=se;var Q=re[1]=Z[1],W;for(I&&(W=re[2]);D>0&&z[D-1][0]===R;){var Z=z[--D],X=Z[1];I?k.push([Q,X,W]):k.push([Q,X]),Q=X}I?k.push([Q,oe,W]):k.push([Q,oe])}return B}function s(S,k,P){for(var z=k.length,I=new e(z),D=[],R=0;R<k.length;++R){var B=k[R],F=d(B[0]),V=d(B[1]);D.push([i(F[0],-1/0),i(V[0],-1/0),i(F[1],1/0),i(V[1],1/0)])}a(D,function(Z,re){I.link(Z,re)});for(var Y=!0,K=new Array(z),R=0;R<z;++R){var J=I.find(R);J!==R&&(Y=!1,S[J]=[Math.min(S[R][0],S[J][0]),Math.min(S[R][1],S[J][1])])}if(Y)return null;for(var G=0,R=0;R<z;++R){var J=I.find(R);J===R?(K[R]=G,S[G++]=S[R]):K[R]=-1}S.length=G;for(var R=0;R<z;++R)K[R]<0&&(K[R]=K[I.find(R)]);return K}function w(S,k){return S[0]-k[0]||S[1]-k[1]}function b(S,k){var P=S[0]-k[0]||S[1]-k[1];return P||(S[2]<k[2]?-1:S[2]>k[2]?1:0)}function h(S,k,P){if(S.length!==0){if(k)for(var z=0;z<S.length;++z){var I=S[z],D=k[I[0]],R=k[I[1]];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}else for(var z=0;z<S.length;++z){var I=S[z],D=I[0],R=I[1];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}P?S.sort(b):S.sort(w);for(var B=1,z=1;z<S.length;++z){var F=S[z-1],V=S[z];V[0]===F[0]&&V[1]===F[1]&&(!P||V[2]===F[2])||(S[B++]=V)}S.length=B}}function m(S,k,P){var z=s(S,[],v(S));return h(k,z,P),!!z}function u(S,k,P){var z=y(S,k),I=x(S,k,z),D=v(S),R=l(S,k,z,D),B=_(S,k,I,R,P),F=s(S,B);return h(k,F,P),F?!0:I.length>0||R.length>0}function L(S,k,P){var z;if(P){z=k;for(var I=new Array(k.length),D=0;D<k.length;++D){var R=k[D];I[D]=[R[0],R[1],P[D]]}k=I}for(var B=m(S,k,!!P);u(S,k,!!P);)B=!0;if(!!P&&B){z.length=0,P.length=0;for(var D=0;D<k.length;++D){var R=k[D];z.push([R[0],R[1]]),P.push(R[2])}}return B}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(c,M,A){M.exports=p;var e=c("big-rat/mul"),a=c("big-rat/div"),n=c("big-rat/sub"),t=c("big-rat/sign"),r=c("rat-vec/sub"),f=c("rat-vec/add"),o=c("rat-vec/muls");function i(d,y){return n(e(d[0],y[1]),e(d[1],y[0]))}function p(d,y,v,x){var l=r(y,d),_=r(x,v),s=i(l,_);if(t(s)===0)return null;var w=r(d,v),b=i(_,w),h=a(b,s),m=o(l,h),u=f(d,m);return u}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(c,M,A){M.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(c,M,A){var e=c("./colorScale"),a=c("lerp");M.exports=n;function n(o){var i,p,d,y,v,x,l,_,s,w,b;if(o||(o={}),_=(o.nshades||72)-1,l=o.format||"hex",x=o.colormap,x||(x="jet"),typeof x=="string"){if(x=x.toLowerCase(),!e[x])throw Error(x+" not a supported colorscale");v=e[x]}else if(Array.isArray(x))v=x.slice();else throw Error("unsupported colormap option",x);if(v.length>_+1)throw new Error(x+" map requires nshades to be at least size "+v.length);Array.isArray(o.alpha)?o.alpha.length!==2?w=[1,1]:w=o.alpha.slice():typeof o.alpha=="number"?w=[o.alpha,o.alpha]:w=[1,1],i=v.map(function(L){return Math.round(L.index*_)}),w[0]=Math.min(Math.max(w[0],0),1),w[1]=Math.min(Math.max(w[1],0),1);var h=v.map(function(L,S){var k=v[S].index,P=v[S].rgb.slice();return P.length===4&&P[3]>=0&&P[3]<=1||(P[3]=w[0]+(w[1]-w[0])*k),P}),s=[];for(b=0;b<i.length-1;++b){y=i[b+1]-i[b],p=h[b],d=h[b+1];for(var m=0;m<y;m++){var u=m/y;s.push([Math.round(a(p[0],d[0],u)),Math.round(a(p[1],d[1],u)),Math.round(a(p[2],d[2],u)),a(p[3],d[3],u)])}}return s.push(v[v.length-1].rgb.concat(w[1])),l==="hex"?s=s.map(r):l==="rgbaString"?s=s.map(f):l==="float"&&(s=s.map(t)),s}function t(o){return[o[0]/255,o[1]/255,o[2]/255,o[3]]}function r(o){for(var i,p="#",d=0;d<3;++d)i=o[d],i=i.toString(16),p+=("00"+i).substr(i.length);return p}function f(o){return"rgba("+o.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(c,M,A){M.exports=o;var e=c("robust-orientation"),a=c("signum"),n=c("two-sum"),t=c("robust-product"),r=c("robust-sum");function f(i,p,d){var y=n(i[0],-p[0]),v=n(i[1],-p[1]),x=n(d[0],-p[0]),l=n(d[1],-p[1]),_=r(t(y,x),t(v,l));return _[_.length-1]>=0}function o(i,p,d,y){var v=e(p,d,y);if(v===0){var x=a(e(i,p,d)),l=a(e(i,p,y));if(x===l){if(x===0){var _=f(i,p,d),s=f(i,p,y);return _===s?0:_?1:-1}return 0}else{if(l===0)return x>0||f(i,p,y)?-1:1;if(x===0)return l>0||f(i,p,d)?1:-1}return a(l-x)}var w=e(i,p,d);if(w>0)return v>0&&e(i,p,y)>0?1:-1;if(w<0)return v>0||e(i,p,y)>0?1:-1;var b=e(i,p,y);return b>0||f(i,p,d)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(c,M,A){M.exports=function(a){return a<0?-1:a>0?1:0}},{}],56:[function(c,M,A){M.exports=n;var e=Math.min;function a(t,r){return t-r}function n(t,r){var f=t.length,o=t.length-r.length;if(o)return o;switch(f){case 0:return 0;case 1:return t[0]-r[0];case 2:return t[0]+t[1]-r[0]-r[1]||e(t[0],t[1])-e(r[0],r[1]);case 3:var i=t[0]+t[1],p=r[0]+r[1];if(o=i+t[2]-(p+r[2]),o)return o;var d=e(t[0],t[1]),y=e(r[0],r[1]);return e(d,t[2])-e(y,r[2])||e(d+t[2],i)-e(y+r[2],p);case 4:var v=t[0],x=t[1],l=t[2],_=t[3],s=r[0],w=r[1],b=r[2],h=r[3];return v+x+l+_-(s+w+b+h)||e(v,x,l,_)-e(s,w,b,h,s)||e(v+x,v+l,v+_,x+l,x+_,l+_)-e(s+w,s+b,s+h,w+b,w+h,b+h)||e(v+x+l,v+x+_,v+l+_,x+l+_)-e(s+w+b,s+w+h,s+b+h,w+b+h);default:for(var m=t.slice().sort(a),u=r.slice().sort(a),L=0;L<f;++L)if(o=m[L]-u[L],o)return o;return 0}}},{}],57:[function(c,M,A){var e=c("compare-cell"),a=c("cell-orientation");M.exports=n;function n(t,r){return e(t,r)||a(t)-a(r)}},{"cell-orientation":47,"compare-cell":56}],58:[function(c,M,A){var e=c("./lib/ch1d"),a=c("./lib/ch2d"),n=c("./lib/chnd");M.exports=t;function t(r){var f=r.length;if(f===0)return[];if(f===1)return[[0]];var o=r[0].length;return o===0?[]:o===1?e(r):o===2?a(r):n(r,o)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(c,M,A){M.exports=e;function e(a){for(var n=0,t=0,r=1;r<a.length;++r)a[r][0]<a[n][0]&&(n=r),a[r][0]>a[t][0]&&(t=r);return n<t?[[n],[t]]:n>t?[[t],[n]]:[[n]]}},{}],60:[function(c,M,A){M.exports=a;var e=c("monotone-convex-hull-2d");function a(n){var t=e(n),r=t.length;if(r<=2)return[];for(var f=new Array(r),o=t[r-1],i=0;i<r;++i){var p=t[i];f[i]=[o,p],o=p}return f}},{"monotone-convex-hull-2d":246}],61:[function(c,M,A){M.exports=r;var e=c("incremental-convex-hull"),a=c("affine-hull");function n(f,o){for(var i=f.length,p=new Array(i),d=0;d<o.length;++d)p[d]=f[o[d]];for(var y=o.length,d=0;d<i;++d)o.indexOf(d)<0&&(p[y++]=f[d]);return p}function t(f,o){for(var i=f.length,p=o.length,d=0;d<i;++d)for(var y=f[d],v=0;v<y.length;++v){var x=y[v];if(x<p)y[v]=o[x];else{x=x-p;for(var l=0;l<p;++l)x>=o[l]&&(x+=1);y[v]=x}}return f}function r(f,o){try{return e(f,!0)}catch{var i=a(f);if(i.length<=o)return[];var p=n(f,i),d=e(p,!0);return t(d,i)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(c,M,A){function e(n,t,r,f,o,i){var p=6*o*o-6*o,d=3*o*o-4*o+1,y=-6*o*o+6*o,v=3*o*o-2*o;if(n.length){i||(i=new Array(n.length));for(var x=n.length-1;x>=0;--x)i[x]=p*n[x]+d*t[x]+y*r[x]+v*f[x];return i}return p*n+d*t+y*r[x]+v*f}function a(n,t,r,f,o,i){var p=o-1,d=o*o,y=p*p,v=(1+2*o)*y,x=o*y,l=d*(3-2*o),_=d*p;if(n.length){i||(i=new Array(n.length));for(var s=n.length-1;s>=0;--s)i[s]=v*n[s]+x*t[s]+l*r[s]+_*f[s];return i}return v*n+x*t+l*r+_*f}M.exports=a,M.exports.derivative=e},{}],63:[function(c,M,A){var e=c("incremental-convex-hull"),a=c("uniq");M.exports=f;function n(o,i){this.point=o,this.index=i}function t(o,i){for(var p=o.point,d=i.point,y=p.length,v=0;v<y;++v){var x=d[v]-p[v];if(x)return x}return 0}function r(o,i,p){if(o===1)return p?[[-1,0]]:[];var d=i.map(function(_,s){return[_[0],s]});d.sort(function(_,s){return _[0]-s[0]});for(var y=new Array(o-1),v=1;v<o;++v){var x=d[v-1],l=d[v];y[v-1]=[x[1],l[1]]}return p&&y.push([-1,y[0][1]],[y[o-1][1],-1]),y}function f(o,i){var p=o.length;if(p===0)return[];var d=o[0].length;if(d<1)return[];if(d===1)return r(p,o,i);for(var y=new Array(p),v=1,x=0;x<p;++x){for(var l=o[x],_=new Array(d+1),s=0,w=0;w<d;++w){var b=l[w];_[w]=b,s+=b*b}_[d]=s,y[x]=new n(_,x),v=Math.max(s,v)}a(y,t),p=y.length;for(var h=new Array(p+d+1),m=new Array(p+d+1),u=(d+1)*(d+1)*v,L=new Array(d+1),x=0;x<=d;++x)L[x]=0;L[d]=u,h[0]=L.slice(),m[0]=-1;for(var x=0;x<=d;++x){var _=L.slice();_[x]=1,h[x+1]=_,m[x+1]=-1}for(var x=0;x<p;++x){var S=y[x];h[x+d+1]=S.point,m[x+d+1]=S.index}var k=e(h,!1);if(i?k=k.filter(function(P){for(var z=0,I=0;I<=d;++I){var D=m[P[I]];if(D<0&&++z>=2)return!1;P[I]=D}return!0}):k=k.filter(function(P){for(var z=0;z<=d;++z){var I=m[P[z]];if(I<0)return!1;P[z]=I}return!0}),d&1)for(var x=0;x<k.length;++x){var S=k[x],_=S[0];S[0]=S[1],S[1]=_}return k}},{"incremental-convex-hull":233,uniq:310}],64:[function(c,M,A){(function(e){(function(){var a=!1;if(typeof Float64Array!="undefined"){var n=new Float64Array(1),t=new Uint32Array(n.buffer);if(n[0]=1,a=!0,t[1]===1072693248){let f=function(p,d){return t[0]=p,t[1]=d,n[0]},o=function(p){return n[0]=p,t[0]},i=function(p){return n[0]=p,t[1]};M.exports=function(d){return n[0]=d,[t[0],t[1]]},M.exports.pack=f,M.exports.lo=o,M.exports.hi=i}else if(t[0]===1072693248){let f=function(p,d){return t[1]=p,t[0]=d,n[0]},o=function(p){return n[0]=p,t[1]},i=function(p){return n[0]=p,t[0]};M.exports=function(d){return n[0]=d,[t[1],t[0]]},M.exports.pack=f,M.exports.lo=o,M.exports.hi=i}else a=!1}if(!a){let f=function(p,d){return r.writeUInt32LE(p,0,!0),r.writeUInt32LE(d,4,!0),r.readDoubleLE(0,!0)},o=function(p){return r.writeDoubleLE(p,0,!0),r.readUInt32LE(0,!0)},i=function(p){return r.writeDoubleLE(p,0,!0),r.readUInt32LE(4,!0)};var r=new e(8);M.exports=function(d){return r.writeDoubleLE(d,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},M.exports.pack=f,M.exports.lo=o,M.exports.hi=i}M.exports.sign=function(f){return M.exports.hi(f)>>>31},M.exports.exponent=function(f){var o=M.exports.hi(f);return(o<<1>>>21)-1023},M.exports.fraction=function(f){var o=M.exports.lo(f),i=M.exports.hi(f),p=i&(1<<20)-1;return i&2146435072&&(p+=1<<20),[o,p]},M.exports.denormalized=function(f){var o=M.exports.hi(f);return!(o&2146435072)}}).call(this)}).call(this,c("buffer").Buffer)},{buffer:3}],65:[function(c,M,A){function e(t,r,f){var o=t[f]|0;if(o<=0)return[];var i=new Array(o),p;if(f===t.length-1)for(p=0;p<o;++p)i[p]=r;else for(p=0;p<o;++p)i[p]=e(t,r,f+1);return i}function a(t,r){var f,o;for(f=new Array(t),o=0;o<t;++o)f[o]=r;return f}function n(t,r){switch(typeof r=="undefined"&&(r=0),typeof t){case"number":if(t>0)return a(t|0,r);break;case"object":if(typeof t.length=="number")return e(t,r,0);break}return[]}M.exports=n},{}],66:[function(c,M,A){M.exports=a;var e=c("uniq");function a(n,t){var r=n.length;if(typeof t!="number"){t=0;for(var f=0;f<r;++f){var o=n[f];t=Math.max(t,o[0],o[1])}t=(t|0)+1}t=t|0;for(var i=new Array(t),f=0;f<t;++f)i[f]=[];for(var f=0;f<r;++f){var o=n[f];i[o[0]].push(o[1]),i[o[1]].push(o[0])}for(var p=0;p<t;++p)e(i[p],function(d,y){return d-y});return i}},{uniq:310}],67:[function(c,M,A){M.exports=e;function e(a,n,t){var r=n||0,f=t||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[r*a[12]+a[8],r*a[13]+a[9],r*a[14]+a[10],r*a[15]+a[11]],[f*a[12]-a[8],f*a[13]-a[9],f*a[14]-a[10],f*a[15]-a[11]]]}},{}],68:[function(c,M,A){M.exports=o;var e=c("cubic-hermite"),a=c("binary-search-bounds");function n(i,p,d){return Math.min(p,Math.max(i,d))}function t(i,p,d){this.dimension=i.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var y=0;y<this.dimension;++y)this.bounds[0][y]=-1/0,this.bounds[1][y]=1/0;this._state=i.slice().reverse(),this._velocity=p.slice().reverse(),this._time=[d],this._scratch=[i.slice(),i.slice(),i.slice(),i.slice(),i.slice()]}var r=t.prototype;r.flush=function(i){var p=a.gt(this._time,i)-1;p<=0||(this._time.splice(0,p),this._state.splice(0,p*this.dimension),this._velocity.splice(0,p*this.dimension))},r.curve=function(i){var p=this._time,d=p.length,y=a.le(p,i),v=this._scratch[0],x=this._state,l=this._velocity,_=this.dimension,s=this.bounds;if(y<0)for(var w=_-1,b=0;b<_;++b,--w)v[b]=x[w];else if(y>=d-1)for(var w=x.length-1,h=i-p[d-1],b=0;b<_;++b,--w)v[b]=x[w]+h*l[w];else{for(var w=_*(y+1)-1,m=p[y],u=p[y+1],L=u-m||1,S=this._scratch[1],k=this._scratch[2],P=this._scratch[3],z=this._scratch[4],I=!0,b=0;b<_;++b,--w)S[b]=x[w],P[b]=l[w]*L,k[b]=x[w+_],z[b]=l[w+_]*L,I=I&&S[b]===k[b]&&P[b]===z[b]&&P[b]===0;if(I)for(var b=0;b<_;++b)v[b]=S[b];else e(S,P,k,z,(i-m)/L,v)}for(var D=s[0],R=s[1],b=0;b<_;++b)v[b]=n(D[b],R[b],v[b]);return v},r.dcurve=function(i){var p=this._time,d=p.length,y=a.le(p,i),v=this._scratch[0],x=this._state,l=this._velocity,_=this.dimension;if(y>=d-1){var s=x.length-1;i-p[d-1];for(var w=0;w<_;++w,--s)v[w]=l[s]}else{for(var s=_*(y+1)-1,b=p[y],h=p[y+1],m=h-b||1,u=this._scratch[1],L=this._scratch[2],S=this._scratch[3],k=this._scratch[4],P=!0,w=0;w<_;++w,--s)u[w]=x[s],S[w]=l[s]*m,L[w]=x[s+_],k[w]=l[s+_]*m,P=P&&u[w]===L[w]&&S[w]===k[w]&&S[w]===0;if(P)for(var w=0;w<_;++w)v[w]=0;else{e.derivative(u,S,L,k,(i-b)/m,v);for(var w=0;w<_;++w)v[w]/=m}}return v},r.lastT=function(){var i=this._time;return i[i.length-1]},r.stable=function(){for(var i=this._velocity,p=i.length,d=this.dimension-1;d>=0;--d)if(i[--p])return!1;return!0},r.jump=function(i){var p=this.lastT(),d=this.dimension;if(!(i<p||arguments.length!==d+1)){var y=this._state,v=this._velocity,x=y.length-this.dimension,l=this.bounds,_=l[0],s=l[1];this._time.push(p,i);for(var w=0;w<2;++w)for(var b=0;b<d;++b)y.push(y[x++]),v.push(0);this._time.push(i);for(var b=d;b>0;--b)y.push(n(_[b-1],s[b-1],arguments[b])),v.push(0)}},r.push=function(i){var p=this.lastT(),d=this.dimension;if(!(i<p||arguments.length!==d+1)){var y=this._state,v=this._velocity,x=y.length-this.dimension,l=i-p,_=this.bounds,s=_[0],w=_[1],b=l>1e-6?1/l:0;this._time.push(i);for(var h=d;h>0;--h){var m=n(s[h-1],w[h-1],arguments[h]);y.push(m),v.push((m-y[x++])*b)}}},r.set=function(i){var p=this.dimension;if(!(i<this.lastT()||arguments.length!==p+1)){var d=this._state,y=this._velocity,v=this.bounds,x=v[0],l=v[1];this._time.push(i);for(var _=p;_>0;--_)d.push(n(x[_-1],l[_-1],arguments[_])),y.push(0)}},r.move=function(i){var p=this.lastT(),d=this.dimension;if(!(i<=p||arguments.length!==d+1)){var y=this._state,v=this._velocity,x=y.length-this.dimension,l=this.bounds,_=l[0],s=l[1],w=i-p,b=w>1e-6?1/w:0;this._time.push(i);for(var h=d;h>0;--h){var m=arguments[h];y.push(n(_[h-1],s[h-1],y[x++]+m)),v.push(m*b)}}},r.idle=function(i){var p=this.lastT();if(!(i<p)){var d=this.dimension,y=this._state,v=this._velocity,x=y.length-d,l=this.bounds,_=l[0],s=l[1],w=i-p;this._time.push(i);for(var b=d-1;b>=0;--b)y.push(n(_[b],s[b],y[x]+w*v[x])),v.push(0),x+=1}};function f(i){for(var p=new Array(i),d=0;d<i;++d)p[d]=0;return p}function o(i,p,d){switch(arguments.length){case 0:return new t([0],[0],0);case 1:if(typeof i=="number"){var y=f(i);return new t(y,y,0)}else return new t(i,f(i.length),0);case 2:if(typeof p=="number"){var y=f(i.length);return new t(i,y,+p)}else d=0;case 3:if(i.length!==p.length)throw new Error("state and velocity lengths must match");return new t(i,p,d)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(c,M,A){M.exports=w;var e=0,a=1;function n(b,h,m,u,L,S){this._color=b,this.key=h,this.value=m,this.left=u,this.right=L,this._count=S}function t(b){return new n(b._color,b.key,b.value,b.left,b.right,b._count)}function r(b,h){return new n(b,h.key,h.value,h.left,h.right,h._count)}function f(b){b._count=1+(b.left?b.left._count:0)+(b.right?b.right._count:0)}function o(b,h){this._compare=b,this.root=h}var i=o.prototype;Object.defineProperty(i,"keys",{get:function(){var b=[];return this.forEach(function(h,m){b.push(h)}),b}}),Object.defineProperty(i,"values",{get:function(){var b=[];return this.forEach(function(h,m){b.push(m)}),b}}),Object.defineProperty(i,"length",{get:function(){return this.root?this.root._count:0}}),i.insert=function(b,h){for(var m=this._compare,u=this.root,L=[],S=[];u;){var k=m(b,u.key);L.push(u),S.push(k),k<=0?u=u.left:u=u.right}L.push(new n(e,b,h,null,null,1));for(var P=L.length-2;P>=0;--P){var u=L[P];S[P]<=0?L[P]=new n(u._color,u.key,u.value,L[P+1],u.right,u._count+1):L[P]=new n(u._color,u.key,u.value,u.left,L[P+1],u._count+1)}for(var P=L.length-1;P>1;--P){var z=L[P-1],u=L[P];if(z._color===a||u._color===a)break;var I=L[P-2];if(I.left===z)if(z.left===u){var D=I.right;if(D&&D._color===e)z._color=a,I.right=r(a,D),I._color=e,P-=1;else{if(I._color=e,I.left=z.right,z._color=a,z.right=I,L[P-2]=z,L[P-1]=u,f(I),f(z),P>=3){var R=L[P-3];R.left===I?R.left=z:R.right=z}break}}else{var D=I.right;if(D&&D._color===e)z._color=a,I.right=r(a,D),I._color=e,P-=1;else{if(z.right=u.left,I._color=e,I.left=u.right,u._color=a,u.left=z,u.right=I,L[P-2]=u,L[P-1]=z,f(I),f(z),f(u),P>=3){var R=L[P-3];R.left===I?R.left=u:R.right=u}break}}else if(z.right===u){var D=I.left;if(D&&D._color===e)z._color=a,I.left=r(a,D),I._color=e,P-=1;else{if(I._color=e,I.right=z.left,z._color=a,z.left=I,L[P-2]=z,L[P-1]=u,f(I),f(z),P>=3){var R=L[P-3];R.right===I?R.right=z:R.left=z}break}}else{var D=I.left;if(D&&D._color===e)z._color=a,I.left=r(a,D),I._color=e,P-=1;else{if(z.left=u.right,I._color=e,I.right=u.left,u._color=a,u.right=z,u.left=I,L[P-2]=u,L[P-1]=z,f(I),f(z),f(u),P>=3){var R=L[P-3];R.right===I?R.right=u:R.left=u}break}}}return L[0]._color=a,new o(m,L[0])};function p(b,h){if(h.left){var m=p(b,h.left);if(m)return m}var m=b(h.key,h.value);if(m)return m;if(h.right)return p(b,h.right)}function d(b,h,m,u){var L=h(b,u.key);if(L<=0){if(u.left){var S=d(b,h,m,u.left);if(S)return S}var S=m(u.key,u.value);if(S)return S}if(u.right)return d(b,h,m,u.right)}function y(b,h,m,u,L){var S=m(b,L.key),k=m(h,L.key),P;if(S<=0&&(L.left&&(P=y(b,h,m,u,L.left),P)||k>0&&(P=u(L.key,L.value),P)))return P;if(k>0&&L.right)return y(b,h,m,u,L.right)}i.forEach=function(h,m,u){if(!!this.root)switch(arguments.length){case 1:return p(h,this.root);case 2:return d(m,this._compare,h,this.root);case 3:return this._compare(m,u)>=0?void 0:y(m,u,this._compare,h,this.root)}},Object.defineProperty(i,"begin",{get:function(){for(var b=[],h=this.root;h;)b.push(h),h=h.left;return new v(this,b)}}),Object.defineProperty(i,"end",{get:function(){for(var b=[],h=this.root;h;)b.push(h),h=h.right;return new v(this,b)}}),i.at=function(b){if(b<0)return new v(this,[]);for(var h=this.root,m=[];;){if(m.push(h),h.left){if(b<h.left._count){h=h.left;continue}b-=h.left._count}if(!b)return new v(this,m);if(b-=1,h.right){if(b>=h.right._count)break;h=h.right}else break}return new v(this,[])},i.ge=function(b){for(var h=this._compare,m=this.root,u=[],L=0;m;){var S=h(b,m.key);u.push(m),S<=0&&(L=u.length),S<=0?m=m.left:m=m.right}return u.length=L,new v(this,u)},i.gt=function(b){for(var h=this._compare,m=this.root,u=[],L=0;m;){var S=h(b,m.key);u.push(m),S<0&&(L=u.length),S<0?m=m.left:m=m.right}return u.length=L,new v(this,u)},i.lt=function(b){for(var h=this._compare,m=this.root,u=[],L=0;m;){var S=h(b,m.key);u.push(m),S>0&&(L=u.length),S<=0?m=m.left:m=m.right}return u.length=L,new v(this,u)},i.le=function(b){for(var h=this._compare,m=this.root,u=[],L=0;m;){var S=h(b,m.key);u.push(m),S>=0&&(L=u.length),S<0?m=m.left:m=m.right}return u.length=L,new v(this,u)},i.find=function(b){for(var h=this._compare,m=this.root,u=[];m;){var L=h(b,m.key);if(u.push(m),L===0)return new v(this,u);L<=0?m=m.left:m=m.right}return new v(this,[])},i.remove=function(b){var h=this.find(b);return h?h.remove():this},i.get=function(b){for(var h=this._compare,m=this.root;m;){var u=h(b,m.key);if(u===0)return m.value;u<=0?m=m.left:m=m.right}};function v(b,h){this.tree=b,this._stack=h}var x=v.prototype;Object.defineProperty(x,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(x,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),x.clone=function(){return new v(this.tree,this._stack.slice())};function l(b,h){b.key=h.key,b.value=h.value,b.left=h.left,b.right=h.right,b._color=h._color,b._count=h._count}function _(b){for(var h,m,u,L,S=b.length-1;S>=0;--S){if(h=b[S],S===0){h._color=a;return}if(m=b[S-1],m.left===h){if(u=m.right,u.right&&u.right._color===e){if(u=m.right=t(u),L=u.right=t(u.right),m.right=u.left,u.left=m,u.right=L,u._color=m._color,h._color=a,m._color=a,L._color=a,f(m),f(u),S>1){var k=b[S-2];k.left===m?k.left=u:k.right=u}b[S-1]=u;return}else if(u.left&&u.left._color===e){if(u=m.right=t(u),L=u.left=t(u.left),m.right=L.left,u.left=L.right,L.left=m,L.right=u,L._color=m._color,m._color=a,u._color=a,h._color=a,f(m),f(u),f(L),S>1){var k=b[S-2];k.left===m?k.left=L:k.right=L}b[S-1]=L;return}if(u._color===a)if(m._color===e){m._color=a,m.right=r(e,u);return}else{m.right=r(e,u);continue}else{if(u=t(u),m.right=u.left,u.left=m,u._color=m._color,m._color=e,f(m),f(u),S>1){var k=b[S-2];k.left===m?k.left=u:k.right=u}b[S-1]=u,b[S]=m,S+1<b.length?b[S+1]=h:b.push(h),S=S+2}}else{if(u=m.left,u.left&&u.left._color===e){if(u=m.left=t(u),L=u.left=t(u.left),m.left=u.right,u.right=m,u.left=L,u._color=m._color,h._color=a,m._color=a,L._color=a,f(m),f(u),S>1){var k=b[S-2];k.right===m?k.right=u:k.left=u}b[S-1]=u;return}else if(u.right&&u.right._color===e){if(u=m.left=t(u),L=u.right=t(u.right),m.left=L.right,u.right=L.left,L.right=m,L.left=u,L._color=m._color,m._color=a,u._color=a,h._color=a,f(m),f(u),f(L),S>1){var k=b[S-2];k.right===m?k.right=L:k.left=L}b[S-1]=L;return}if(u._color===a)if(m._color===e){m._color=a,m.left=r(e,u);return}else{m.left=r(e,u);continue}else{if(u=t(u),m.left=u.right,u.right=m,u._color=m._color,m._color=e,f(m),f(u),S>1){var k=b[S-2];k.right===m?k.right=u:k.left=u}b[S-1]=u,b[S]=m,S+1<b.length?b[S+1]=h:b.push(h),S=S+2}}}}x.remove=function(){var b=this._stack;if(b.length===0)return this.tree;var h=new Array(b.length),m=b[b.length-1];h[h.length-1]=new n(m._color,m.key,m.value,m.left,m.right,m._count);for(var u=b.length-2;u>=0;--u){var m=b[u];m.left===b[u+1]?h[u]=new n(m._color,m.key,m.value,h[u+1],m.right,m._count):h[u]=new n(m._color,m.key,m.value,m.left,h[u+1],m._count)}if(m=h[h.length-1],m.left&&m.right){var L=h.length;for(m=m.left;m.right;)h.push(m),m=m.right;var S=h[L-1];h.push(new n(m._color,S.key,S.value,m.left,m.right,m._count)),h[L-1].key=m.key,h[L-1].value=m.value;for(var u=h.length-2;u>=L;--u)m=h[u],h[u]=new n(m._color,m.key,m.value,m.left,h[u+1],m._count);h[L-1].left=h[L]}if(m=h[h.length-1],m._color===e){var k=h[h.length-2];k.left===m?k.left=null:k.right===m&&(k.right=null),h.pop();for(var u=0;u<h.length;++u)h[u]._count--;return new o(this.tree._compare,h[0])}else if(m.left||m.right){m.left?l(m,m.left):m.right&&l(m,m.right),m._color=a;for(var u=0;u<h.length-1;++u)h[u]._count--;return new o(this.tree._compare,h[0])}else{if(h.length===1)return new o(this.tree._compare,null);for(var u=0;u<h.length;++u)h[u]._count--;var P=h[h.length-2];_(h),P.left===m?P.left=null:P.right=null}return new o(this.tree._compare,h[0])},Object.defineProperty(x,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(x,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(x,"index",{get:function(){var b=0,h=this._stack;if(h.length===0){var m=this.tree.root;return m?m._count:0}else h[h.length-1].left&&(b=h[h.length-1].left._count);for(var u=h.length-2;u>=0;--u)h[u+1]===h[u].right&&(++b,h[u].left&&(b+=h[u].left._count));return b},enumerable:!0}),x.next=function(){var b=this._stack;if(b.length!==0){var h=b[b.length-1];if(h.right)for(h=h.right;h;)b.push(h),h=h.left;else for(b.pop();b.length>0&&b[b.length-1].right===h;)h=b[b.length-1],b.pop()}},Object.defineProperty(x,"hasNext",{get:function(){var b=this._stack;if(b.length===0)return!1;if(b[b.length-1].right)return!0;for(var h=b.length-1;h>0;--h)if(b[h-1].left===b[h])return!0;return!1}}),x.update=function(b){var h=this._stack;if(h.length===0)throw new Error("Can't update empty node!");var m=new Array(h.length),u=h[h.length-1];m[m.length-1]=new n(u._color,u.key,b,u.left,u.right,u._count);for(var L=h.length-2;L>=0;--L)u=h[L],u.left===h[L+1]?m[L]=new n(u._color,u.key,u.value,m[L+1],u.right,u._count):m[L]=new n(u._color,u.key,u.value,u.left,m[L+1],u._count);return new o(this.tree._compare,m[0])},x.prev=function(){var b=this._stack;if(b.length!==0){var h=b[b.length-1];if(h.left)for(h=h.left;h;)b.push(h),h=h.right;else for(b.pop();b.length>0&&b[b.length-1].left===h;)h=b[b.length-1],b.pop()}},Object.defineProperty(x,"hasPrev",{get:function(){var b=this._stack;if(b.length===0)return!1;if(b[b.length-1].left)return!0;for(var h=b.length-1;h>0;--h)if(b[h-1].right===b[h])return!0;return!1}});function s(b,h){return b<h?-1:b>h?1:0}function w(b){return new o(b||s,null)}},{}],70:[function(c,M,A){M.exports=h;var e=c("./lib/text.js"),a=c("./lib/lines.js"),n=c("./lib/background.js"),t=c("./lib/cube.js"),r=c("./lib/ticks.js"),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function o(m,u){return m[0]=u[0],m[1]=u[1],m[2]=u[2],m}function i(m){this.gl=m,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(m)}var p=i.prototype;p.update=function(m){m=m||{};function u(Y,K,J){if(J in m){var G=m[J],Z=this[J],re;(Y?Array.isArray(G)&&Array.isArray(G[0]):Array.isArray(G))?this[J]=re=[K(G[0]),K(G[1]),K(G[2])]:this[J]=re=[K(G),K(G),K(G)];for(var se=0;se<3;++se)if(re[se]!==Z[se])return!0}return!1}var L=u.bind(this,!1,Number),S=u.bind(this,!1,Boolean),k=u.bind(this,!1,String),P=u.bind(this,!0,function(Y){if(Array.isArray(Y)){if(Y.length===3)return[+Y[0],+Y[1],+Y[2],1];if(Y.length===4)return[+Y[0],+Y[1],+Y[2],+Y[3]]}return[0,0,0,1]}),z,I=!1,D=!1;if("bounds"in m)for(var R=m.bounds,B=0;B<2;++B)for(var F=0;F<3;++F)R[B][F]!==this.bounds[B][F]&&(D=!0),this.bounds[B][F]=R[B][F];if("ticks"in m){z=m.ticks,I=!0,this.autoTicks=!1;for(var B=0;B<3;++B)this.tickSpacing[B]=0}else L("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in m||"tickSpacing"in m||(this.autoTicks=!0),D=!0,I=!0,this._firstInit=!1),D&&this.autoTicks&&(z=r.create(this.bounds,this.tickSpacing),I=!0),I){for(var B=0;B<3;++B)z[B].sort(function(K,J){return K.x-J.x});r.equal(z,this.ticks)?I=!1:this.ticks=z}S("tickEnable"),k("tickFont")&&(I=!0),L("tickSize"),L("tickAngle"),L("tickPad"),P("tickColor");var V=k("labels");k("labelFont")&&(V=!0),S("labelEnable"),L("labelSize"),L("labelPad"),P("labelColor"),S("lineEnable"),S("lineMirror"),L("lineWidth"),P("lineColor"),S("lineTickEnable"),S("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),P("lineTickColor"),S("gridEnable"),L("gridWidth"),P("gridColor"),S("zeroEnable"),P("zeroLineColor"),L("zeroLineWidth"),S("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(V||I)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&I&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};function d(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var y=[new d,new d,new d];function v(m,u,L,S,k){for(var P=m.primalOffset,z=m.primalMinor,I=m.mirrorOffset,D=m.mirrorMinor,R=S[u],B=0;B<3;++B)if(u!==B){var F=P,V=I,Y=z,K=D;R&1<<B&&(F=I,V=P,Y=D,K=z),F[B]=L[0][B],V[B]=L[1][B],k[B]>0?(Y[B]=-1,K[B]=0):(Y[B]=0,K[B]=1)}}var x=[0,0,0],l={model:f,view:f,projection:f,_ortho:!1};p.isOpaque=function(){return!0},p.isTransparent=function(){return!1},p.drawTransparent=function(m){};var _=0,s=[0,0,0],w=[0,0,0],b=[0,0,0];p.draw=function(m){m=m||l;for(var u=this.gl,L=m.model||f,S=m.view||f,k=m.projection||f,P=this.bounds,z=m._ortho||!1,I=t(L,S,k,P,z),D=I.cubeEdges,R=I.axis,B=S[12],F=S[13],V=S[14],Y=S[15],K=z?2:1,J=K*this.pixelRatio*(k[3]*B+k[7]*F+k[11]*V+k[15]*Y)/u.drawingBufferHeight,G=0;G<3;++G)this.lastCubeProps.cubeEdges[G]=D[G],this.lastCubeProps.axis[G]=R[G];for(var Z=y,G=0;G<3;++G)v(y[G],G,this.bounds,D,R);for(var u=this.gl,re=x,G=0;G<3;++G)this.backgroundEnable[G]?re[G]=R[G]:re[G]=0;this._background.draw(L,S,k,P,re,this.backgroundColor),this._lines.bind(L,S,k,this);for(var G=0;G<3;++G){var se=[0,0,0];R[G]>0?se[G]=P[1][G]:se[G]=P[0][G];for(var oe=0;oe<2;++oe){var N=(G+1+oe)%3,U=(G+1+(oe^1))%3;this.gridEnable[N]&&this._lines.drawGrid(N,U,this.bounds,se,this.gridColor[N],this.gridWidth[N]*this.pixelRatio)}for(var oe=0;oe<2;++oe){var N=(G+1+oe)%3,U=(G+1+(oe^1))%3;this.zeroEnable[U]&&Math.min(P[0][U],P[1][U])<=0&&Math.max(P[0][U],P[1][U])>=0&&this._lines.drawZero(N,U,this.bounds,se,this.zeroLineColor[U],this.zeroLineWidth[U]*this.pixelRatio)}}for(var G=0;G<3;++G){this.lineEnable[G]&&this._lines.drawAxisLine(G,this.bounds,Z[G].primalOffset,this.lineColor[G],this.lineWidth[G]*this.pixelRatio),this.lineMirror[G]&&this._lines.drawAxisLine(G,this.bounds,Z[G].mirrorOffset,this.lineColor[G],this.lineWidth[G]*this.pixelRatio);for(var q=o(s,Z[G].primalMinor),Q=o(w,Z[G].mirrorMinor),W=this.lineTickLength,oe=0;oe<3;++oe){var X=J/L[5*oe];q[oe]*=W[oe]*X,Q[oe]*=W[oe]*X}this.lineTickEnable[G]&&this._lines.drawAxisTicks(G,Z[G].primalOffset,q,this.lineTickColor[G],this.lineTickWidth[G]*this.pixelRatio),this.lineTickMirror[G]&&this._lines.drawAxisTicks(G,Z[G].mirrorOffset,Q,this.lineTickColor[G],this.lineTickWidth[G]*this.pixelRatio)}this._lines.unbind(),this._text.bind(L,S,k,this.pixelRatio);var te,ee=.5,ie,le;function ye(De){le=[0,0,0],le[De]=1}function ue(De,Oe,Ue){var xe=(De+1)%3,Pe=(De+2)%3,Ve=Oe[xe],Qe=Oe[Pe],Fe=Ue[xe],Le=Ue[Pe];if(Ve>0&&Le>0){ye(xe);return}else if(Ve>0&&Le<0){ye(xe);return}else if(Ve<0&&Le>0){ye(xe);return}else if(Ve<0&&Le<0){ye(xe);return}else if(Qe>0&&Fe>0){ye(Pe);return}else if(Qe>0&&Fe<0){ye(Pe);return}else if(Qe<0&&Fe>0){ye(Pe);return}else if(Qe<0&&Fe<0){ye(Pe);return}}for(var G=0;G<3;++G){for(var pe=Z[G].primalMinor,ge=Z[G].mirrorMinor,Te=o(b,Z[G].primalOffset),oe=0;oe<3;++oe)this.lineTickEnable[G]&&(Te[oe]+=J*pe[oe]*Math.max(this.lineTickLength[oe],0)/L[5*oe]);var _e=[0,0,0];if(_e[G]=1,this.tickEnable[G]){this.tickAngle[G]===-3600?(this.tickAngle[G]=0,this.tickAlign[G]="auto"):this.tickAlign[G]=-1,ie=1,te=[this.tickAlign[G],ee,ie],te[0]==="auto"?te[0]=_:te[0]=parseInt(""+te[0]),le=[0,0,0],ue(G,pe,ge);for(var oe=0;oe<3;++oe)Te[oe]+=J*pe[oe]*this.tickPad[oe]/L[5*oe];this._text.drawTicks(G,this.tickSize[G],this.tickAngle[G],Te,this.tickColor[G],_e,le,te)}if(this.labelEnable[G]){ie=0,le=[0,0,0],this.labels[G].length>4&&(ye(G),ie=1),te=[this.labelAlign[G],ee,ie],te[0]==="auto"?te[0]=_:te[0]=parseInt(""+te[0]);for(var oe=0;oe<3;++oe)Te[oe]+=J*pe[oe]*this.labelPad[oe]/L[5*oe];Te[G]+=.5*(P[0][G]+P[1][G]),this._text.drawLabel(G,this.labelSize[G],this.labelAngle[G],Te,this.labelColor[G],[0,0,0],le,te)}}this._text.unbind()},p.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function h(m,u){var L=new i(m);return L.update(u),L}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(c,M,A){M.exports=f;var e=c("gl-buffer"),a=c("gl-vao"),n=c("./shaders").bg;function t(o,i,p,d){this.gl=o,this.buffer=i,this.vao=p,this.shader=d}var r=t.prototype;r.draw=function(o,i,p,d,y,v){for(var x=!1,l=0;l<3;++l)x=x||y[l];if(!!x){var _=this.gl;_.enable(_.POLYGON_OFFSET_FILL),_.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:o,view:i,projection:p,bounds:d,enable:y,colors:v},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),_.disable(_.POLYGON_OFFSET_FILL)}},r.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function f(o){for(var i=[],p=[],d=0,y=0;y<3;++y)for(var v=(y+1)%3,x=(y+2)%3,l=[0,0,0],_=[0,0,0],s=-1;s<=1;s+=2){p.push(d,d+2,d+1,d+1,d+2,d+3),l[y]=s,_[y]=s;for(var w=-1;w<=1;w+=2){l[v]=w;for(var b=-1;b<=1;b+=2)l[x]=b,i.push(l[0],l[1],l[2],_[0],_[1],_[2]),d+=1}var h=v;v=x,x=h}var m=e(o,new Float32Array(i)),u=e(o,new Uint16Array(p),o.ELEMENT_ARRAY_BUFFER),L=a(o,[{buffer:m,type:o.FLOAT,size:3,offset:0,stride:24},{buffer:m,type:o.FLOAT,size:3,offset:12,stride:24}],u),S=n(o);return S.attributes.position.location=0,S.attributes.normal.location=1,new t(o,m,L,S)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(c,M,A){M.exports=s;var e=c("bit-twiddle"),a=c("gl-mat4/multiply"),n=c("split-polygon"),t=c("robust-orientation"),r=new Array(16),f=new Array(8),o=new Array(8),i=new Array(3),p=[0,0,0];(function(){for(var w=0;w<8;++w)f[w]=[1,1,1,1],o[w]=[1,1,1]})();function d(w,b,h){for(var m=0;m<4;++m){w[m]=h[12+m];for(var u=0;u<3;++u)w[m]+=b[u]*h[4*u+m]}}var y=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function v(w){for(var b=0;b<y.length;++b)if(w=n.positive(w,y[b]),w.length<3)return 0;for(var h=w[0],m=h[0]/h[3],u=h[1]/h[3],L=0,b=1;b+1<w.length;++b){var S=w[b],k=w[b+1],P=S[0]/S[3],z=S[1]/S[3],I=k[0]/k[3],D=k[1]/k[3],R=P-m,B=z-u,F=I-m,V=D-u;L+=Math.abs(R*V-B*F)}return L}var x=[1,1,1],l=[0,0,0],_={cubeEdges:x,axis:l};function s(w,b,h,m,u){a(r,b,w),a(r,h,r);for(var L=0,S=0;S<2;++S){i[2]=m[S][2];for(var k=0;k<2;++k){i[1]=m[k][1];for(var P=0;P<2;++P)i[0]=m[P][0],d(f[L],i,r),L+=1}}for(var z=-1,S=0;S<8;++S){for(var I=f[S][3],D=0;D<3;++D)o[S][D]=f[S][D]/I;u&&(o[S][2]*=-1),I<0&&(z<0||o[S][2]<o[z][2])&&(z=S)}if(z<0){z=0;for(var R=0;R<3;++R){for(var B=(R+2)%3,F=(R+1)%3,V=-1,Y=-1,K=0;K<2;++K){var J=K<<R,G=J+(K<<B)+(1-K<<F),Z=J+(1-K<<B)+(K<<F);t(o[J],o[G],o[Z],p)<0||(K?V=1:Y=1)}if(V<0||Y<0){Y>V&&(z|=1<<R);continue}for(var K=0;K<2;++K){var J=K<<R,G=J+(K<<B)+(1-K<<F),Z=J+(1-K<<B)+(K<<F),re=v([f[J],f[G],f[Z],f[J+(1<<B)+(1<<F)]]);K?V=re:Y=re}if(Y>V){z|=1<<R;continue}}}for(var se=7^z,oe=-1,S=0;S<8;++S)S===z||S===se||(oe<0||o[oe][1]>o[S][1])&&(oe=S);for(var N=-1,S=0;S<3;++S){var U=oe^1<<S;if(!(U===z||U===se)){N<0&&(N=U);var F=o[U];F[0]<o[N][0]&&(N=U)}}for(var q=-1,S=0;S<3;++S){var U=oe^1<<S;if(!(U===z||U===se||U===N)){q<0&&(q=U);var F=o[U];F[0]>o[q][0]&&(q=U)}}var Q=x;Q[0]=Q[1]=Q[2]=0,Q[e.log2(N^oe)]=oe&N,Q[e.log2(oe^q)]=oe&q;var W=q^7;W===z||W===se?(W=N^7,Q[e.log2(q^W)]=W&q):Q[e.log2(N^W)]=W&N;for(var X=l,te=z,R=0;R<3;++R)te&1<<R?X[R]=-1:X[R]=1;return _}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(c,M,A){M.exports=x;var e=c("gl-buffer"),a=c("gl-vao"),n=c("./shaders").line,t=[0,0,0],r=[0,0,0],f=[0,0,0],o=[0,0,0],i=[1,1];function p(l){return l[0]=l[1]=l[2]=0,l}function d(l,_){return l[0]=_[0],l[1]=_[1],l[2]=_[2],l}function y(l,_,s,w,b,h,m,u){this.gl=l,this.vertBuffer=_,this.vao=s,this.shader=w,this.tickCount=b,this.tickOffset=h,this.gridCount=m,this.gridOffset=u}var v=y.prototype;v.bind=function(l,_,s){this.shader.bind(),this.shader.uniforms.model=l,this.shader.uniforms.view=_,this.shader.uniforms.projection=s,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=i,this.vao.bind()},v.unbind=function(){this.vao.unbind()},v.drawAxisLine=function(l,_,s,w,b){var h=p(r);this.shader.uniforms.majorAxis=r,h[l]=_[1][l]-_[0][l],this.shader.uniforms.minorAxis=h;var m=d(o,s);m[l]+=_[0][l],this.shader.uniforms.offset=m,this.shader.uniforms.lineWidth=b,this.shader.uniforms.color=w;var u=p(f);u[(l+2)%3]=1,this.shader.uniforms.screenAxis=u,this.vao.draw(this.gl.TRIANGLES,6);var u=p(f);u[(l+1)%3]=1,this.shader.uniforms.screenAxis=u,this.vao.draw(this.gl.TRIANGLES,6)},v.drawAxisTicks=function(l,_,s,w,b){if(!!this.tickCount[l]){var h=p(t);h[l]=1,this.shader.uniforms.majorAxis=h,this.shader.uniforms.offset=_,this.shader.uniforms.minorAxis=s,this.shader.uniforms.color=w,this.shader.uniforms.lineWidth=b;var m=p(f);m[l]=1,this.shader.uniforms.screenAxis=m,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l])}},v.drawGrid=function(l,_,s,w,b,h){if(!!this.gridCount[l]){var m=p(r);m[_]=s[1][_]-s[0][_],this.shader.uniforms.minorAxis=m;var u=d(o,w);u[_]+=s[0][_],this.shader.uniforms.offset=u;var L=p(t);L[l]=1,this.shader.uniforms.majorAxis=L;var S=p(f);S[l]=1,this.shader.uniforms.screenAxis=S,this.shader.uniforms.lineWidth=h,this.shader.uniforms.color=b,this.vao.draw(this.gl.TRIANGLES,this.gridCount[l],this.gridOffset[l])}},v.drawZero=function(l,_,s,w,b,h){var m=p(r);this.shader.uniforms.majorAxis=m,m[l]=s[1][l]-s[0][l],this.shader.uniforms.minorAxis=m;var u=d(o,w);u[l]+=s[0][l],this.shader.uniforms.offset=u;var L=p(f);L[_]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=h,this.shader.uniforms.color=b,this.vao.draw(this.gl.TRIANGLES,6)},v.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function x(l,_,s){var w=[],b=[0,0,0],h=[0,0,0],m=[0,0,0],u=[0,0,0];w.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var S=w.length/3|0,k=0;k<s[L].length;++k){var P=+s[L][k].x;w.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var z=w.length/3|0;b[L]=S,h[L]=z-S;for(var S=w.length/3|0,I=0;I<s[L].length;++I){var P=+s[L][I].x;w.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var z=w.length/3|0;m[L]=S,u[L]=z-S}var D=e(l,new Float32Array(w)),R=a(l,[{buffer:D,type:l.FLOAT,size:3,stride:0,offset:0}]),B=n(l);return B.attributes.position.location=0,new y(l,D,R,B,h,b,u,m)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(c,M,A){var e=c("glslify"),a=c("gl-shader"),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),t=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);A.line=function(p){return a(p,n,t,null,[{name:"position",type:"vec3"}])};var r=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),f=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);A.text=function(p){return a(p,r,f,null,[{name:"position",type:"vec3"}])};var o=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),i=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);A.bg=function(p){return a(p,o,i,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(c,M,A){(function(e){(function(){M.exports=x;var a=c("gl-buffer"),n=c("gl-vao"),t=c("vectorize-text"),r=c("./shaders").text,f=window||e.global||{},o=f.__TEXT_CACHE||{};f.__TEXT_CACHE={};var i=3;function p(l,_,s,w){this.gl=l,this.shader=_,this.buffer=s,this.vao=w,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var d=p.prototype,y=[0,0];d.bind=function(l,_,s,w){this.vao.bind(),this.shader.bind();var b=this.shader.uniforms;b.model=l,b.view=_,b.projection=s,b.pixelScale=w,y[0]=this.gl.drawingBufferWidth,y[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=y},d.unbind=function(){this.vao.unbind()},d.update=function(l,_,s,w,b){var h=[];function m(R,B,F,V,Y,K){var J=o[F];J||(J=o[F]={});var G=J[B];G||(G=J[B]=v(B,{triangles:!0,font:F,textAlign:"center",textBaseline:"middle",lineSpacing:Y,styletags:K}));for(var Z=(V||12)/12,re=G.positions,se=G.cells,oe=0,N=se.length;oe<N;++oe)for(var U=se[oe],q=2;q>=0;--q){var Q=re[U[q]];h.push(Z*Q[0],-Z*Q[1],R)}}for(var u=[0,0,0],L=[0,0,0],S=[0,0,0],k=[0,0,0],P=1.25,z={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){S[I]=h.length/i|0,m(.5*(l[0][I]+l[1][I]),_[I],s[I],12,P,z),k[I]=(h.length/i|0)-S[I],u[I]=h.length/i|0;for(var D=0;D<w[I].length;++D)!w[I][D].text||m(w[I][D].x,w[I][D].text,w[I][D].font||b,w[I][D].fontSize||12,P,z);L[I]=(h.length/i|0)-u[I]}this.buffer.update(h),this.tickOffset=u,this.tickCount=L,this.labelOffset=S,this.labelCount=k},d.drawTicks=function(l,_,s,w,b,h,m,u){!this.tickCount[l]||(this.shader.uniforms.axis=h,this.shader.uniforms.color=b,this.shader.uniforms.angle=s,this.shader.uniforms.scale=_,this.shader.uniforms.offset=w,this.shader.uniforms.alignDir=m,this.shader.uniforms.alignOpt=u,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l]))},d.drawLabel=function(l,_,s,w,b,h,m,u){!this.labelCount[l]||(this.shader.uniforms.axis=h,this.shader.uniforms.color=b,this.shader.uniforms.angle=s,this.shader.uniforms.scale=_,this.shader.uniforms.offset=w,this.shader.uniforms.alignDir=m,this.shader.uniforms.alignOpt=u,this.vao.draw(this.gl.TRIANGLES,this.labelCount[l],this.labelOffset[l]))},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function v(l,_){try{return t(l,_)}catch(s){return console.warn('error vectorizing text:"'+l+'" error:',s),{cells:[],positions:[]}}}function x(l,_,s,w,b,h){var m=a(l),u=n(l,[{buffer:m,size:3}]),L=r(l);L.attributes.position.location=0;var S=new p(l,L,m,u);return S.update(_,s,w,b,h),S}}).call(this)}).call(this,c("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(c,M,A){A.create=a,A.equal=n;function e(t,r){var f=t+"",o=f.indexOf("."),i=0;o>=0&&(i=f.length-o-1);var p=Math.pow(10,i),d=Math.round(t*r*p),y=d+"";if(y.indexOf("e")>=0)return y;var v=d/p,x=d%p;d<0?(v=-Math.ceil(v)|0,x=-x|0):(v=Math.floor(v)|0,x=x|0);var l=""+v;if(d<0&&(l="-"+l),i){for(var _=""+x;_.length<i;)_="0"+_;return l+"."+_}else return l}function a(t,r){for(var f=[],o=0;o<3;++o){var i=[];.5*(t[0][o]+t[1][o]);for(var p=0;p*r[o]<=t[1][o];++p)i.push({x:p*r[o],text:e(r[o],p)});for(var p=-1;p*r[o]>=t[0][o];--p)i.push({x:p*r[o],text:e(r[o],p)});f.push(i)}return f}function n(t,r){for(var f=0;f<3;++f){if(t[f].length!==r[f].length)return!1;for(var o=0;o<t[f].length;++o){var i=t[f][o],p=r[f][o];if(i.x!==p.x||i.text!==p.text||i.font!==p.font||i.fontColor!==p.fontColor||i.fontSize!==p.fontSize||i.dx!==p.dx||i.dy!==p.dy)return!1}}return!0}},{}],77:[function(c,M,A){M.exports=_;var e=c("extract-frustum-planes"),a=c("split-polygon"),n=c("./lib/cube.js"),t=c("gl-mat4/multiply"),r=c("gl-mat4/transpose"),f=c("gl-vec4/transformMat4"),o=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i=new Float32Array(16);function p(s,w,b){this.lo=s,this.hi=w,this.pixelsPerDataUnit=b}var d=[0,0,0,1],y=[0,0,0,1];function v(s,w,b,h,m){for(var u=0;u<3;++u){for(var L=d,S=y,k=0;k<3;++k)S[k]=L[k]=b[k];S[3]=L[3]=1,S[u]+=1,f(S,S,w),S[3]<0&&(s[u]=1/0),L[u]-=1,f(L,L,w),L[3]<0&&(s[u]=1/0);var P=(L[0]/L[3]-S[0]/S[3])*h,z=(L[1]/L[3]-S[1]/S[3])*m;s[u]=.25*Math.sqrt(P*P+z*z)}return s}var x=[new p(1/0,-1/0,1/0),new p(1/0,-1/0,1/0),new p(1/0,-1/0,1/0)],l=[0,0,0];function _(s,w,b,h,m){var u=w.model||o,L=w.view||o,S=w.projection||o,k=w._ortho||!1,P=s.bounds,m=m||n(u,L,S,P,k),z=m.axis;t(i,L,u),t(i,S,i);for(var I=x,D=0;D<3;++D)I[D].lo=1/0,I[D].hi=-1/0,I[D].pixelsPerDataUnit=1/0;var R=e(r(i,i));r(i,i);for(var B=0;B<3;++B){var F=(B+1)%3,V=(B+2)%3,Y=l;e:for(var D=0;D<2;++D){var K=[];if(z[B]<0!=!!D){Y[B]=P[D][B];for(var J=0;J<2;++J){Y[F]=P[J^D][F];for(var G=0;G<2;++G)Y[V]=P[G^J^D][V],K.push(Y.slice())}for(var Z=k?5:4,J=Z;J===Z;++J){if(K.length===0)continue e;K=a.positive(K,R[J])}for(var J=0;J<K.length;++J)for(var V=K[J],re=v(l,i,V,b,h),G=0;G<3;++G)I[G].lo=Math.min(I[G].lo,V[G]),I[G].hi=Math.max(I[G].hi,V[G]),G!==B&&(I[G].pixelsPerDataUnit=Math.min(I[G].pixelsPerDataUnit,Math.abs(re[G])))}}}return I}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(c,M,A){var e=c("typedarray-pool"),a=c("ndarray-ops"),n=c("ndarray"),t=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(y,v,x,l,_){this.gl=y,this.type=v,this.handle=x,this.length=l,this.usage=_}var f=r.prototype;f.bind=function(){this.gl.bindBuffer(this.type,this.handle)},f.unbind=function(){this.gl.bindBuffer(this.type,null)},f.dispose=function(){this.gl.deleteBuffer(this.handle)};function o(y,v,x,l,_,s){var w=_.length*_.BYTES_PER_ELEMENT;if(s<0)return y.bufferData(v,_,l),w;if(w+s>x)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return y.bufferSubData(v,s,_),x}function i(y,v){for(var x=e.malloc(y.length,v),l=y.length,_=0;_<l;++_)x[_]=y[_];return x}function p(y,v){for(var x=1,l=v.length-1;l>=0;--l){if(v[l]!==x)return!1;x*=y[l]}return!0}f.update=function(y,v){if(typeof v!="number"&&(v=-1),this.bind(),typeof y=="object"&&typeof y.shape!="undefined"){var x=y.dtype;if(t.indexOf(x)<0&&(x="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var l=gl.getExtension("OES_element_index_uint");l&&x!=="uint16"?x="uint32":x="uint16"}if(x===y.dtype&&p(y.shape,y.stride))y.offset===0&&y.data.length===y.shape[0]?this.length=o(this.gl,this.type,this.length,this.usage,y.data,v):this.length=o(this.gl,this.type,this.length,this.usage,y.data.subarray(y.offset,y.shape[0]),v);else{var _=e.malloc(y.size,x),s=n(_,y.shape);a.assign(s,y),v<0?this.length=o(this.gl,this.type,this.length,this.usage,_,v):this.length=o(this.gl,this.type,this.length,this.usage,_.subarray(0,y.size),v),e.free(_)}}else if(Array.isArray(y)){var w;this.type===this.gl.ELEMENT_ARRAY_BUFFER?w=i(y,"uint16"):w=i(y,"float32"),v<0?this.length=o(this.gl,this.type,this.length,this.usage,w,v):this.length=o(this.gl,this.type,this.length,this.usage,w.subarray(0,y.length),v),e.free(w)}else if(typeof y=="object"&&typeof y.length=="number")this.length=o(this.gl,this.type,this.length,this.usage,y,v);else if(typeof y=="number"||y===void 0){if(v>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");y=y|0,y<=0&&(y=1),this.gl.bufferData(this.type,y|0,this.usage),this.length=y}else throw new Error("gl-buffer: Invalid data type")};function d(y,v,x,l){if(x=x||y.ARRAY_BUFFER,l=l||y.DYNAMIC_DRAW,x!==y.ARRAY_BUFFER&&x!==y.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(l!==y.DYNAMIC_DRAW&&l!==y.STATIC_DRAW&&l!==y.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var _=y.createBuffer(),s=new r(y,x,_,0,l);return s.update(v),s}M.exports=d},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(c,M,A){var e=c("gl-vec3");M.exports=function(n,t){var r=n.positions,f=n.vectors,o={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return t&&(t[0]=[0,0,0],t[1]=[0,0,0]),o;for(var i=0,p=1/0,d=-1/0,y=1/0,v=-1/0,x=1/0,l=-1/0,_=null,s=null,w=[],b=1/0,h=!1,m=0;m<r.length;m++){var u=r[m];p=Math.min(u[0],p),d=Math.max(u[0],d),y=Math.min(u[1],y),v=Math.max(u[1],v),x=Math.min(u[2],x),l=Math.max(u[2],l);var L=f[m];if(e.length(L)>i&&(i=e.length(L)),m){var S=2*e.distance(_,u)/(e.length(s)+e.length(L));S?(b=Math.min(b,S),h=!1):h=!0}h||(_=u,s=L),w.push(L)}var k=[p,y,x],P=[d,v,l];t&&(t[0]=k,t[1]=P),i===0&&(i=1);var z=1/i;isFinite(b)||(b=1),o.vectorScale=b;var I=n.coneSize||.5;n.absoluteConeSize&&(I=n.absoluteConeSize*z),o.coneScale=I;for(var m=0,D=0;m<r.length;m++)for(var u=r[m],R=u[0],B=u[1],F=u[2],V=w[m],Y=e.length(V)*z,K=0,J=8;K<J;K++){o.positions.push([R,B,F,D++]),o.positions.push([R,B,F,D++]),o.positions.push([R,B,F,D++]),o.positions.push([R,B,F,D++]),o.positions.push([R,B,F,D++]),o.positions.push([R,B,F,D++]),o.vectors.push(V),o.vectors.push(V),o.vectors.push(V),o.vectors.push(V),o.vectors.push(V),o.vectors.push(V),o.vertexIntensity.push(Y,Y,Y),o.vertexIntensity.push(Y,Y,Y);var G=o.positions.length;o.cells.push([G-6,G-5,G-4],[G-3,G-2,G-1])}return o};var a=c("./lib/shaders");M.exports.createMesh=c("./create_mesh"),M.exports.createConeMesh=function(n,t){return M.exports.createMesh(n,t,{shaders:a,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(c,M,A){var e=c("gl-shader"),a=c("gl-buffer"),n=c("gl-vao"),t=c("gl-texture2d"),r=c("gl-mat4/multiply"),f=c("gl-mat4/invert"),o=c("ndarray"),i=c("colormap"),p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(w,b,h,m,u,L,S,k,P,z,I){this.gl=w,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=b,this.dirty=!0,this.triShader=h,this.pickShader=m,this.trianglePositions=u,this.triangleVectors=L,this.triangleColors=k,this.triangleUVs=P,this.triangleIds=S,this.triangleVAO=z,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=I,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=p,this._view=p,this._projection=p,this._resolution=[1,1]}var y=d.prototype;y.isOpaque=function(){return this.opacity>=1},y.isTransparent=function(){return this.opacity<1},y.pickSlots=1,y.setPickBase=function(w){this.pickId=w};function v(w){for(var b=i({colormap:w,nshades:256,format:"rgba"}),h=new Uint8Array(256*4),m=0;m<256;++m){for(var u=b[m],L=0;L<3;++L)h[4*m+L]=u[L];h[4*m+3]=u[3]*255}return o(h,[256,256,4],[4,0,1])}function x(w){for(var b=w.length,h=new Array(b),m=0;m<b;++m)h[m]=w[m][2];return h}y.update=function(w){w=w||{};var b=this.gl;this.dirty=!0,"lightPosition"in w&&(this.lightPosition=w.lightPosition),"opacity"in w&&(this.opacity=w.opacity),"ambient"in w&&(this.ambientLight=w.ambient),"diffuse"in w&&(this.diffuseLight=w.diffuse),"specular"in w&&(this.specularLight=w.specular),"roughness"in w&&(this.roughness=w.roughness),"fresnel"in w&&(this.fresnel=w.fresnel),w.tubeScale!==void 0&&(this.tubeScale=w.tubeScale),w.vectorScale!==void 0&&(this.vectorScale=w.vectorScale),w.coneScale!==void 0&&(this.coneScale=w.coneScale),w.coneOffset!==void 0&&(this.coneOffset=w.coneOffset),w.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=b.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=b.LINEAR,this.texture.setPixels(v(w.colormap)),this.texture.generateMipmap());var h=w.cells,m=w.positions,u=w.vectors;if(!m||!h||!u)return;var L=[],S=[],k=[],P=[],z=[];this.cells=h,this.positions=m,this.vectors=u;var I=w.meshColor||[1,1,1,1],D=w.vertexIntensity,R=1/0,B=-1/0;if(D)if(w.vertexIntensityBounds)R=+w.vertexIntensityBounds[0],B=+w.vertexIntensityBounds[1];else for(var F=0;F<D.length;++F){var V=D[F];R=Math.min(R,V),B=Math.max(B,V)}else for(var F=0;F<m.length;++F){var V=m[F][2];R=Math.min(R,V),B=Math.max(B,V)}D?this.intensity=D:this.intensity=x(m),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var F=0;F<m.length;++F)for(var Y=m[F],K=0;K<3;++K)isNaN(Y[K])||!isFinite(Y[K])||(this.bounds[0][K]=Math.min(this.bounds[0][K],Y[K]),this.bounds[1][K]=Math.max(this.bounds[1][K],Y[K]));var J=0;e:for(var F=0;F<h.length;++F){var G=h[F];switch(G.length){case 3:for(var K=0;K<3;++K)for(var Z=G[K],Y=m[Z],re=0;re<3;++re)if(isNaN(Y[re])||!isFinite(Y[re]))continue e;for(var K=0;K<3;++K){var Z=G[2-K],Y=m[Z];L.push(Y[0],Y[1],Y[2],Y[3]);var se=u[Z];S.push(se[0],se[1],se[2],se[3]||0);var oe=I;oe.length===3?k.push(oe[0],oe[1],oe[2],1):k.push(oe[0],oe[1],oe[2],oe[3]);var N;D?N=[(D[Z]-R)/(B-R),0]:N=[(Y[2]-R)/(B-R),0],P.push(N[0],N[1]),z.push(F)}J+=1;break}}this.triangleCount=J,this.trianglePositions.update(L),this.triangleVectors.update(S),this.triangleColors.update(k),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(z))},y.drawTransparent=y.draw=function(w){w=w||{};for(var b=this.gl,h=w.model||p,m=w.view||p,u=w.projection||p,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)L[0][S]=Math.max(L[0][S],this.clipBounds[0][S]),L[1][S]=Math.min(L[1][S],this.clipBounds[1][S]);var k={model:h,view:m,projection:u,inverseModel:p.slice(),clipBounds:L,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};k.inverseModel=f(k.inverseModel,k.model),b.disable(b.CULL_FACE),this.texture.bind(0);var P=new Array(16);r(P,k.view,k.model),r(P,k.projection,P),f(P,P);for(var S=0;S<3;++S)k.eyePosition[S]=P[12+S]/P[15];for(var z=P[15],S=0;S<3;++S)z+=this.lightPosition[S]*P[4*S+3];for(var S=0;S<3;++S){for(var I=P[12+S],D=0;D<3;++D)I+=P[4*D+S]*this.lightPosition[D];k.lightPosition[S]=I/z}if(this.triangleCount>0){var R=this.triShader;R.bind(),R.uniforms=k,this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},y.drawPick=function(w){w=w||{};for(var b=this.gl,h=w.model||p,m=w.view||p,u=w.projection||p,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)L[0][S]=Math.max(L[0][S],this.clipBounds[0][S]),L[1][S]=Math.min(L[1][S],this.clipBounds[1][S]);this._model=[].slice.call(h),this._view=[].slice.call(m),this._projection=[].slice.call(u),this._resolution=[b.drawingBufferWidth,b.drawingBufferHeight];var k={model:h,view:m,projection:u,clipBounds:L,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=k,this.triangleCount>0&&(this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},y.pick=function(w){if(!w||w.id!==this.pickId)return null;var b=w.value[0]+256*w.value[1]+65536*w.value[2],h=this.cells[b],m=this.positions[h[1]].slice(0,3),u={position:m,dataCoordinate:m,index:Math.floor(h[1]/48)};return this.traceType==="cone"?u.index=Math.floor(h[1]/48):this.traceType==="streamtube"&&(u.intensity=this.intensity[h[1]],u.velocity=this.vectors[h[1]].slice(0,3),u.divergence=this.vectors[h[1]][3],u.index=b),u},y.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function l(w,b){var h=e(w,b.meshShader.vertex,b.meshShader.fragment,null,b.meshShader.attributes);return h.attributes.position.location=0,h.attributes.color.location=2,h.attributes.uv.location=3,h.attributes.vector.location=4,h}function _(w,b){var h=e(w,b.pickShader.vertex,b.pickShader.fragment,null,b.pickShader.attributes);return h.attributes.position.location=0,h.attributes.id.location=1,h.attributes.vector.location=4,h}function s(w,b,h){var m=h.shaders;arguments.length===1&&(b=w,w=b.gl);var u=l(w,m),L=_(w,m),S=t(w,o(new Uint8Array([255,255,255,255]),[1,1,4]));S.generateMipmap(),S.minFilter=w.LINEAR_MIPMAP_LINEAR,S.magFilter=w.LINEAR;var k=a(w),P=a(w),z=a(w),I=a(w),D=a(w),R=n(w,[{buffer:k,type:w.FLOAT,size:4},{buffer:D,type:w.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:z,type:w.FLOAT,size:4},{buffer:I,type:w.FLOAT,size:2},{buffer:P,type:w.FLOAT,size:4}]),B=new d(w,S,u,L,k,P,D,z,I,R,h.traceType||"cone");return B.update(b),B}M.exports=s},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(c,M,A){var e=c("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),t=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);A.meshShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},A.pickShader={vertex:t,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(c,M,A){M.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(c,M,A){var e=c("./1.0/numbers");M.exports=function(n){return e[n]}},{"./1.0/numbers":82}],84:[function(c,M,A){M.exports=d;var e=c("gl-buffer"),a=c("gl-vao"),n=c("./shaders/index"),t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(y,v,x,l){this.gl=y,this.shader=l,this.buffer=v,this.vao=x,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var f=r.prototype;f.isOpaque=function(){return!this.hasAlpha},f.isTransparent=function(){return this.hasAlpha},f.drawTransparent=f.draw=function(y){var v=this.gl,x=this.shader.uniforms;this.shader.bind();var l=x.view=y.view||t,_=x.projection=y.projection||t;x.model=y.model||t,x.clipBounds=this.clipBounds,x.opacity=this.opacity;var s=l[12],w=l[13],b=l[14],h=l[15],m=y._ortho||!1,u=m?2:1,L=u*this.pixelRatio*(_[3]*s+_[7]*w+_[11]*b+_[15]*h)/v.drawingBufferHeight;this.vao.bind();for(var S=0;S<3;++S)v.lineWidth(this.lineWidth[S]*this.pixelRatio),x.capSize=this.capSize[S]*L,this.lineCount[S]&&v.drawArrays(v.LINES,this.lineOffset[S],this.lineCount[S]);this.vao.unbind()};function o(y,v){for(var x=0;x<3;++x)y[0][x]=Math.min(y[0][x],v[x]),y[1][x]=Math.max(y[1][x],v[x])}var i=function(){for(var y=new Array(3),v=0;v<3;++v){for(var x=[],l=1;l<=2;++l)for(var _=-1;_<=1;_+=2){var s=(l+v)%3,w=[0,0,0];w[s]=_,x.push(w)}y[v]=x}return y}();function p(y,v,x,l){for(var _=i[l],s=0;s<_.length;++s){var w=_[s];y.push(v[0],v[1],v[2],x[0],x[1],x[2],x[3],w[0],w[1],w[2])}return _.length}f.update=function(y){y=y||{},"lineWidth"in y&&(this.lineWidth=y.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in y&&(this.capSize=y.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in y&&(this.opacity=+y.opacity,this.opacity<1&&(this.hasAlpha=!0));var v=y.color||[[0,0,0],[0,0,0],[0,0,0]],x=y.position,l=y.error;if(Array.isArray(v[0])||(v=[v,v,v]),x&&l){var _=[],s=x.length,w=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var b=0;b<3;++b){this.lineOffset[b]=w;e:for(var h=0;h<s;++h){for(var m=x[h],u=0;u<3;++u)if(isNaN(m[u])||!isFinite(m[u]))continue e;var L=l[h],S=v[b];if(Array.isArray(S[0])&&(S=v[h]),S.length===3?S=[S[0],S[1],S[2],1]:S.length===4&&(S=[S[0],S[1],S[2],S[3]],!this.hasAlpha&&S[3]<1&&(this.hasAlpha=!0)),!(isNaN(L[0][b])||isNaN(L[1][b]))){if(L[0][b]<0){var k=m.slice();k[b]+=L[0][b],_.push(m[0],m[1],m[2],S[0],S[1],S[2],S[3],0,0,0,k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0),o(this.bounds,k),w+=2+p(_,k,S,b)}if(L[1][b]>0){var k=m.slice();k[b]+=L[1][b],_.push(m[0],m[1],m[2],S[0],S[1],S[2],S[3],0,0,0,k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0),o(this.bounds,k),w+=2+p(_,k,S,b)}}}this.lineCount[b]=w-this.lineOffset[b]}this.buffer.update(_)}},f.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function d(y){var v=y.gl,x=e(v),l=a(v,[{buffer:x,type:v.FLOAT,size:3,offset:0,stride:40},{buffer:x,type:v.FLOAT,size:4,offset:12,stride:40},{buffer:x,type:v.FLOAT,size:3,offset:28,stride:40}]),_=n(v);_.attributes.position.location=0,_.attributes.color.location=1,_.attributes.offset.location=2;var s=new r(v,x,l,_);return s.update(y),s}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(c,M,A){var e=c("glslify"),a=c("gl-shader"),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),t=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);M.exports=function(r){return a(r,n,t,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(c,M,A){var e=c("gl-texture2d");M.exports=w;var a=null,n,t,r,f;function o(b){var h=b.getParameter(b.FRAMEBUFFER_BINDING),m=b.getParameter(b.RENDERBUFFER_BINDING),u=b.getParameter(b.TEXTURE_BINDING_2D);return[h,m,u]}function i(b,h){b.bindFramebuffer(b.FRAMEBUFFER,h[0]),b.bindRenderbuffer(b.RENDERBUFFER,h[1]),b.bindTexture(b.TEXTURE_2D,h[2])}function p(b,h){var m=b.getParameter(h.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(m+1);for(var u=0;u<=m;++u){for(var L=new Array(m),S=0;S<u;++S)L[S]=b.COLOR_ATTACHMENT0+S;for(var S=u;S<m;++S)L[S]=b.NONE;a[u]=L}}function d(b){switch(b){case n:throw new Error("gl-fbo: Framebuffer unsupported");case t:throw new Error("gl-fbo: Framebuffer incomplete attachment");case r:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case f:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function y(b,h,m,u,L,S){if(!u)return null;var k=e(b,h,m,L,u);return k.magFilter=b.NEAREST,k.minFilter=b.NEAREST,k.mipSamples=1,k.bind(),b.framebufferTexture2D(b.FRAMEBUFFER,S,b.TEXTURE_2D,k.handle,0),k}function v(b,h,m,u,L){var S=b.createRenderbuffer();return b.bindRenderbuffer(b.RENDERBUFFER,S),b.renderbufferStorage(b.RENDERBUFFER,u,h,m),b.framebufferRenderbuffer(b.FRAMEBUFFER,L,b.RENDERBUFFER,S),S}function x(b){var h=o(b.gl),m=b.gl,u=b.handle=m.createFramebuffer(),L=b._shape[0],S=b._shape[1],k=b.color.length,P=b._ext,z=b._useStencil,I=b._useDepth,D=b._colorType;m.bindFramebuffer(m.FRAMEBUFFER,u);for(var R=0;R<k;++R)b.color[R]=y(m,L,S,D,m.RGBA,m.COLOR_ATTACHMENT0+R);k===0?(b._color_rb=v(m,L,S,m.RGBA4,m.COLOR_ATTACHMENT0),P&&P.drawBuffersWEBGL(a[0])):k>1&&P.drawBuffersWEBGL(a[k]);var B=m.getExtension("WEBGL_depth_texture");B?z?b.depth=y(m,L,S,B.UNSIGNED_INT_24_8_WEBGL,m.DEPTH_STENCIL,m.DEPTH_STENCIL_ATTACHMENT):I&&(b.depth=y(m,L,S,m.UNSIGNED_SHORT,m.DEPTH_COMPONENT,m.DEPTH_ATTACHMENT)):I&&z?b._depth_rb=v(m,L,S,m.DEPTH_STENCIL,m.DEPTH_STENCIL_ATTACHMENT):I?b._depth_rb=v(m,L,S,m.DEPTH_COMPONENT16,m.DEPTH_ATTACHMENT):z&&(b._depth_rb=v(m,L,S,m.STENCIL_INDEX,m.STENCIL_ATTACHMENT));var F=m.checkFramebufferStatus(m.FRAMEBUFFER);if(F!==m.FRAMEBUFFER_COMPLETE){b._destroyed=!0,m.bindFramebuffer(m.FRAMEBUFFER,null),m.deleteFramebuffer(b.handle),b.handle=null,b.depth&&(b.depth.dispose(),b.depth=null),b._depth_rb&&(m.deleteRenderbuffer(b._depth_rb),b._depth_rb=null);for(var R=0;R<b.color.length;++R)b.color[R].dispose(),b.color[R]=null;b._color_rb&&(m.deleteRenderbuffer(b._color_rb),b._color_rb=null),i(m,h),d(F)}i(m,h)}function l(b,h,m,u,L,S,k,P){this.gl=b,this._shape=[h|0,m|0],this._destroyed=!1,this._ext=P,this.color=new Array(L);for(var z=0;z<L;++z)this.color[z]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=u,this._useDepth=S,this._useStencil=k;var I=this,D=[h|0,m|0];Object.defineProperties(D,{0:{get:function(){return I._shape[0]},set:function(R){return I.width=R}},1:{get:function(){return I._shape[1]},set:function(R){return I.height=R}}}),this._shapeVector=D,x(this)}var _=l.prototype;function s(b,h,m){if(b._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(b._shape[0]===h&&b._shape[1]===m)){var u=b.gl,L=u.getParameter(u.MAX_RENDERBUFFER_SIZE);if(h<0||h>L||m<0||m>L)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");b._shape[0]=h,b._shape[1]=m;for(var S=o(u),k=0;k<b.color.length;++k)b.color[k].shape=b._shape;b._color_rb&&(u.bindRenderbuffer(u.RENDERBUFFER,b._color_rb),u.renderbufferStorage(u.RENDERBUFFER,u.RGBA4,b._shape[0],b._shape[1])),b.depth&&(b.depth.shape=b._shape),b._depth_rb&&(u.bindRenderbuffer(u.RENDERBUFFER,b._depth_rb),b._useDepth&&b._useStencil?u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_STENCIL,b._shape[0],b._shape[1]):b._useDepth?u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_COMPONENT16,b._shape[0],b._shape[1]):b._useStencil&&u.renderbufferStorage(u.RENDERBUFFER,u.STENCIL_INDEX,b._shape[0],b._shape[1])),u.bindFramebuffer(u.FRAMEBUFFER,b.handle);var P=u.checkFramebufferStatus(u.FRAMEBUFFER);P!==u.FRAMEBUFFER_COMPLETE&&(b.dispose(),i(u,S),d(P)),i(u,S)}}Object.defineProperties(_,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(b){if(Array.isArray(b)||(b=[b|0,b|0]),b.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var h=b[0]|0,m=b[1]|0;return s(this,h,m),[h,m]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(b){return b=b|0,s(this,b,this._shape[1]),b},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(b){return b=b|0,s(this,this._shape[0],b),b},enumerable:!1}}),_.bind=function(){if(!this._destroyed){var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,this.handle),b.viewport(0,0,this._shape[0],this._shape[1])}},_.dispose=function(){if(!this._destroyed){this._destroyed=!0;var b=this.gl;b.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(b.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var h=0;h<this.color.length;++h)this.color[h].dispose(),this.color[h]=null;this._color_rb&&(b.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function w(b,h,m,u){n||(n=b.FRAMEBUFFER_UNSUPPORTED,t=b.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,r=b.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,f=b.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var L=b.getExtension("WEBGL_draw_buffers");if(!a&&L&&p(b,L),Array.isArray(h)&&(u=m,m=h[1]|0,h=h[0]|0),typeof h!="number")throw new Error("gl-fbo: Missing shape parameter");var S=b.getParameter(b.MAX_RENDERBUFFER_SIZE);if(h<0||h>S||m<0||m>S)throw new Error("gl-fbo: Parameters are too large for FBO");u=u||{};var k=1;if("color"in u){if(k=Math.max(u.color|0,0),k<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(k>1)if(L){if(k>b.getParameter(L.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+k+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var P=b.UNSIGNED_BYTE,z=b.getExtension("OES_texture_float");if(u.float&&k>0){if(!z)throw new Error("gl-fbo: Context does not support floating point textures");P=b.FLOAT}else u.preferFloat&&k>0&&z&&(P=b.FLOAT);var I=!0;"depth"in u&&(I=!!u.depth);var D=!1;return"stencil"in u&&(D=!!u.stencil),new l(b,h,m,P,k,I,D,L)}},{"gl-texture2d":146}],87:[function(c,M,A){var e=c("sprintf-js").sprintf,a=c("gl-constants/lookup"),n=c("glsl-shader-name"),t=c("add-line-numbers");M.exports=r;function r(f,o,i){var p=n(o)||"of unknown name (see npm glsl-shader-name)",d="unknown type";i!==void 0&&(d=i===a.FRAGMENT_SHADER?"fragment":"vertex");for(var y=e(`Error compiling %s shader %s:
`,d,p),v=e("%s%s",y,f),x=f.split(`
`),l={},_=0;_<x.length;_++){var s=x[_];if(!(s===""||s==="\0")){var w=parseInt(s.split(":")[2]);if(isNaN(w))throw new Error(e("Could not parse error: %s",s));l[w]=s}}for(var b=t(o).split(`
`),_=0;_<b.length;_++)if(!(!l[_+3]&&!l[_+2]&&!l[_+1])){var h=b[_];if(y+=h+`
`,l[_+1]){var m=l[_+1];m=m.substr(m.split(":",3).join(":").length+1).trim(),y+=e(`^^^ %s

`,m)}}return{long:y.trim(),short:v.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(c,M,A){M.exports=d;var e=c("binary-search-bounds"),a=c("iota-array"),n=c("typedarray-pool"),t=c("gl-shader"),r=c("gl-buffer"),f=c("./lib/shaders");function o(y,v,x,l,_,s,w){this.plot=y,this.shader=v,this.pickShader=x,this.positionBuffer=l,this.weightBuffer=_,this.colorBuffer=s,this.idBuffer=w,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var i=o.prototype,p=[0,0,1,0,0,1,1,0,1,1,0,1];i.draw=function(){var y=[1,0,0,0,1,0,0,0,1];return function(){var v=this.plot,x=this.shader,l=this.bounds,_=this.numVertices;if(!(_<=0)){var s=v.gl,w=v.dataBox,b=l[2]-l[0],h=l[3]-l[1],m=w[2]-w[0],u=w[3]-w[1];y[0]=2*b/m,y[4]=2*h/u,y[6]=2*(l[0]-w[0])/m-1,y[7]=2*(l[1]-w[1])/u-1,x.bind();var L=x.uniforms;L.viewTransform=y,L.shape=this.shape;var S=x.attributes;this.positionBuffer.bind(),S.position.pointer(),this.weightBuffer.bind(),S.weight.pointer(s.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),S.color.pointer(s.UNSIGNED_BYTE,!0),s.drawArrays(s.TRIANGLES,0,_)}}}(),i.drawPick=function(){var y=[1,0,0,0,1,0,0,0,1],v=[0,0,0,0];return function(x){var l=this.plot,_=this.pickShader,s=this.bounds,w=this.numVertices;if(!(w<=0)){var b=l.gl,h=l.dataBox,m=s[2]-s[0],u=s[3]-s[1],L=h[2]-h[0],S=h[3]-h[1];y[0]=2*m/L,y[4]=2*u/S,y[6]=2*(s[0]-h[0])/L-1,y[7]=2*(s[1]-h[1])/S-1;for(var k=0;k<4;++k)v[k]=x>>k*8&255;this.pickOffset=x,_.bind();var P=_.uniforms;P.viewTransform=y,P.pickOffset=v,P.shape=this.shape;var z=_.attributes;return this.positionBuffer.bind(),z.position.pointer(),this.weightBuffer.bind(),z.weight.pointer(b.UNSIGNED_BYTE,!1),this.idBuffer.bind(),z.pickId.pointer(b.UNSIGNED_BYTE,!1),b.drawArrays(b.TRIANGLES,0,w),x+this.shape[0]*this.shape[1]}}}(),i.pick=function(y,v,x){var l=this.pickOffset,_=this.shape[0]*this.shape[1];if(x<l||x>=l+_)return null;var s=x-l,w=this.xData,b=this.yData;return{object:this,pointId:s,dataCoord:[w[s%this.shape[0]],b[s/this.shape[0]|0]]}},i.update=function(y){y=y||{};var v=y.shape||[0,0],x=y.x||a(v[0]),l=y.y||a(v[1]),_=y.z||new Float32Array(v[0]*v[1]),s=y.zsmooth!==!1;this.xData=x,this.yData=l;var w=y.colorLevels||[0],b=y.colorValues||[0,0,0,1],h=w.length,m=this.bounds,u,L,S,k;s?(u=m[0]=x[0],L=m[1]=l[0],S=m[2]=x[x.length-1],k=m[3]=l[l.length-1]):(u=m[0]=x[0]+(x[1]-x[0])/2,L=m[1]=l[0]+(l[1]-l[0])/2,S=m[2]=x[x.length-1]+(x[x.length-1]-x[x.length-2])/2,k=m[3]=l[l.length-1]+(l[l.length-1]-l[l.length-2])/2);var P=1/(S-u),z=1/(k-L),I=v[0],D=v[1];this.shape=[I,D];var R=(s?(I-1)*(D-1):I*D)*(p.length>>>1);this.numVertices=R;for(var B=n.mallocUint8(R*4),F=n.mallocFloat32(R*2),V=n.mallocUint8(R*2),Y=n.mallocUint32(R),K=0,J=s?I-1:I,G=s?D-1:D,Z=0;Z<G;++Z){var re,se;s?(re=z*(l[Z]-L),se=z*(l[Z+1]-L)):(re=Z<D-1?z*(l[Z]-(l[Z+1]-l[Z])/2-L):z*(l[Z]-(l[Z]-l[Z-1])/2-L),se=Z<D-1?z*(l[Z]+(l[Z+1]-l[Z])/2-L):z*(l[Z]+(l[Z]-l[Z-1])/2-L));for(var oe=0;oe<J;++oe){var N,U;s?(N=P*(x[oe]-u),U=P*(x[oe+1]-u)):(N=oe<I-1?P*(x[oe]-(x[oe+1]-x[oe])/2-u):P*(x[oe]-(x[oe]-x[oe-1])/2-u),U=oe<I-1?P*(x[oe]+(x[oe+1]-x[oe])/2-u):P*(x[oe]+(x[oe]-x[oe-1])/2-u));for(var q=0;q<p.length;q+=2){var Q=p[q],W=p[q+1],X=s?(Z+W)*I+(oe+Q):Z*I+oe,te=_[X],ee=e.le(w,te),ie,le,ye,ue;if(ee<0)ie=b[0],le=b[1],ye=b[2],ue=b[3];else if(ee===h-1)ie=b[4*h-4],le=b[4*h-3],ye=b[4*h-2],ue=b[4*h-1];else{var pe=(te-w[ee])/(w[ee+1]-w[ee]),ge=1-pe,Te=4*ee,_e=4*(ee+1);ie=ge*b[Te]+pe*b[_e],le=ge*b[Te+1]+pe*b[_e+1],ye=ge*b[Te+2]+pe*b[_e+2],ue=ge*b[Te+3]+pe*b[_e+3]}B[4*K]=255*ie,B[4*K+1]=255*le,B[4*K+2]=255*ye,B[4*K+3]=255*ue,F[2*K]=N*.5+U*.5,F[2*K+1]=re*.5+se*.5,V[2*K]=Q,V[2*K+1]=W,Y[K]=Z*I+oe,K+=1}}}this.positionBuffer.update(F),this.weightBuffer.update(V),this.colorBuffer.update(B),this.idBuffer.update(Y),n.free(F),n.free(B),n.free(V),n.free(Y)},i.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function d(y,v){var x=y.gl,l=t(x,f.vertex,f.fragment),_=t(x,f.pickVertex,f.pickFragment),s=r(x),w=r(x),b=r(x),h=r(x),m=new o(y,l,_,s,w,b,h);return m.update(v),y.addObject(m),m}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(c,M,A){var e=c("glslify");M.exports={fragment:e([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(c,M,A){var e=c("glslify"),a=c("gl-shader"),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),t=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),f=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];A.createShader=function(o){return a(o,n,t,null,f)},A.createPickShader=function(o){return a(o,n,r,null,f)}},{"gl-shader":132,glslify:231}],91:[function(c,M,A){M.exports=b;var e=c("gl-buffer"),a=c("gl-vao"),n=c("gl-texture2d"),t=new Uint8Array(4),r=new Float32Array(t.buffer);function f(h,m,u,L){return t[0]=L,t[1]=u,t[2]=m,t[3]=h,r[0]}var o=c("binary-search-bounds"),i=c("ndarray"),p=c("./lib/shaders"),d=p.createShader,y=p.createPickShader,v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function x(h,m){for(var u=0,L=0;L<3;++L){var S=h[L]-m[L];u+=S*S}return Math.sqrt(u)}function l(h){for(var m=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],u=0;u<3;++u)m[0][u]=Math.max(h[0][u],m[0][u]),m[1][u]=Math.min(h[1][u],m[1][u]);return m}function _(h,m,u,L){this.arcLength=h,this.position=m,this.index=u,this.dataCoordinate=L}function s(h,m,u,L,S,k){this.gl=h,this.shader=m,this.pickShader=u,this.buffer=L,this.vao=S,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=k,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var w=s.prototype;w.isTransparent=function(){return this.hasAlpha},w.isOpaque=function(){return!this.hasAlpha},w.pickSlots=1,w.setPickBase=function(h){this.pickId=h},w.drawTransparent=w.draw=function(h){if(!!this.vertexCount){var m=this.gl,u=this.shader,L=this.vao;u.bind(),u.uniforms={model:h.model||v,view:h.view||v,projection:h.projection||v,clipBounds:l(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[m.drawingBufferWidth,m.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(m.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},w.drawPick=function(h){if(!!this.vertexCount){var m=this.gl,u=this.pickShader,L=this.vao;u.bind(),u.uniforms={model:h.model||v,view:h.view||v,projection:h.projection||v,pickId:this.pickId,clipBounds:l(this.clipBounds),screenShape:[m.drawingBufferWidth,m.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(m.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},w.update=function(h){var m,u;this.dirty=!0;var L=!!h.connectGaps;"dashScale"in h&&(this.dashScale=h.dashScale),this.hasAlpha=!1,"opacity"in h&&(this.opacity=+h.opacity,this.opacity<1&&(this.hasAlpha=!0));var S=[],k=[],P=[],z=0,I=0,D=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=h.position||h.positions;if(R){var B=h.color||h.colors||[0,0,0,1],F=h.lineWidth||1,V=!1;e:for(m=1;m<R.length;++m){var Y=R[m-1],K=R[m];for(k.push(z),P.push(Y.slice()),u=0;u<3;++u){if(isNaN(Y[u])||isNaN(K[u])||!isFinite(Y[u])||!isFinite(K[u])){if(!L&&S.length>0){for(var J=0;J<24;++J)S.push(S[S.length-12]);I+=2,V=!0}continue e}D[0][u]=Math.min(D[0][u],Y[u],K[u]),D[1][u]=Math.max(D[1][u],Y[u],K[u])}var G,Z;Array.isArray(B[0])?(G=B.length>m-1?B[m-1]:B.length>0?B[B.length-1]:[0,0,0,1],Z=B.length>m?B[m]:B.length>0?B[B.length-1]:[0,0,0,1]):G=Z=B,G.length===3&&(G=[G[0],G[1],G[2],1]),Z.length===3&&(Z=[Z[0],Z[1],Z[2],1]),!this.hasAlpha&&G[3]<1&&(this.hasAlpha=!0);var re;Array.isArray(F)?re=F.length>m-1?F[m-1]:F.length>0?F[F.length-1]:[0,0,0,1]:re=F;var se=z;if(z+=x(Y,K),V){for(u=0;u<2;++u)S.push(Y[0],Y[1],Y[2],K[0],K[1],K[2],se,re,G[0],G[1],G[2],G[3]);I+=2,V=!1}S.push(Y[0],Y[1],Y[2],K[0],K[1],K[2],se,re,G[0],G[1],G[2],G[3],Y[0],Y[1],Y[2],K[0],K[1],K[2],se,-re,G[0],G[1],G[2],G[3],K[0],K[1],K[2],Y[0],Y[1],Y[2],z,-re,Z[0],Z[1],Z[2],Z[3],K[0],K[1],K[2],Y[0],Y[1],Y[2],z,re,Z[0],Z[1],Z[2],Z[3]),I+=4}}if(this.buffer.update(S),k.push(z),P.push(R[R.length-1].slice()),this.bounds=D,this.vertexCount=I,this.points=P,this.arcLength=k,"dashes"in h){var oe=h.dashes,N=oe.slice();for(N.unshift(0),m=1;m<N.length;++m)N[m]=N[m-1]+N[m];var U=i(new Array(256*4),[256,1,4]);for(m=0;m<256;++m){for(u=0;u<4;++u)U.set(m,0,u,0);o.le(N,N[N.length-1]*m/255)&1?U.set(m,0,0,0):U.set(m,0,0,255)}this.texture.setPixels(U)}},w.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},w.pick=function(h){if(!h||h.id!==this.pickId)return null;var m=f(h.value[0],h.value[1],h.value[2],0),u=o.le(this.arcLength,m);if(u<0)return null;if(u===this.arcLength.length-1)return new _(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),u);for(var L=this.points[u],S=this.points[Math.min(u+1,this.points.length-1)],k=(m-this.arcLength[u])/(this.arcLength[u+1]-this.arcLength[u]),P=1-k,z=[0,0,0],I=0;I<3;++I)z[I]=P*L[I]+k*S[I];var D=Math.min(k<.5?u:u+1,this.points.length-1);return new _(m,z,D,this.points[D])};function b(h){var m=h.gl||h.scene&&h.scene.gl,u=d(m);u.attributes.position.location=0,u.attributes.nextPosition.location=1,u.attributes.arcLength.location=2,u.attributes.lineWidth.location=3,u.attributes.color.location=4;var L=y(m);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var S=e(m),k=a(m,[{buffer:S,size:3,offset:0,stride:48},{buffer:S,size:3,offset:12,stride:48},{buffer:S,size:1,offset:24,stride:48},{buffer:S,size:1,offset:28,stride:48},{buffer:S,size:4,offset:32,stride:48}]),P=i(new Array(256*4),[256,1,4]),z=0;z<256*4;++z)P.data[z]=255;var I=n(m,P);I.wrap=m.REPEAT;var D=new s(m,u,L,S,k,I);return D.update(h),D}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(c,M,A){M.exports=e;function e(a){var n=new Float32Array(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n}},{}],93:[function(c,M,A){M.exports=e;function e(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],94:[function(c,M,A){M.exports=e;function e(a){var n=a[0],t=a[1],r=a[2],f=a[3],o=a[4],i=a[5],p=a[6],d=a[7],y=a[8],v=a[9],x=a[10],l=a[11],_=a[12],s=a[13],w=a[14],b=a[15],h=n*i-t*o,m=n*p-r*o,u=n*d-f*o,L=t*p-r*i,S=t*d-f*i,k=r*d-f*p,P=y*s-v*_,z=y*w-x*_,I=y*b-l*_,D=v*w-x*s,R=v*b-l*s,B=x*b-l*w;return h*B-m*R+u*D+L*I-S*z+k*P}},{}],95:[function(c,M,A){M.exports=e;function e(a,n){var t=n[0],r=n[1],f=n[2],o=n[3],i=t+t,p=r+r,d=f+f,y=t*i,v=r*i,x=r*p,l=f*i,_=f*p,s=f*d,w=o*i,b=o*p,h=o*d;return a[0]=1-x-s,a[1]=v+h,a[2]=l-b,a[3]=0,a[4]=v-h,a[5]=1-y-s,a[6]=_+w,a[7]=0,a[8]=l+b,a[9]=_-w,a[10]=1-y-x,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],96:[function(c,M,A){M.exports=e;function e(a,n,t){var r=n[0],f=n[1],o=n[2],i=n[3],p=r+r,d=f+f,y=o+o,v=r*p,x=r*d,l=r*y,_=f*d,s=f*y,w=o*y,b=i*p,h=i*d,m=i*y;return a[0]=1-(_+w),a[1]=x+m,a[2]=l-h,a[3]=0,a[4]=x-m,a[5]=1-(v+w),a[6]=s+b,a[7]=0,a[8]=l+h,a[9]=s-b,a[10]=1-(v+_),a[11]=0,a[12]=t[0],a[13]=t[1],a[14]=t[2],a[15]=1,a}},{}],97:[function(c,M,A){M.exports=e;function e(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],98:[function(c,M,A){M.exports=e;function e(a,n){var t=n[0],r=n[1],f=n[2],o=n[3],i=n[4],p=n[5],d=n[6],y=n[7],v=n[8],x=n[9],l=n[10],_=n[11],s=n[12],w=n[13],b=n[14],h=n[15],m=t*p-r*i,u=t*d-f*i,L=t*y-o*i,S=r*d-f*p,k=r*y-o*p,P=f*y-o*d,z=v*w-x*s,I=v*b-l*s,D=v*h-_*s,R=x*b-l*w,B=x*h-_*w,F=l*h-_*b,V=m*F-u*B+L*R+S*D-k*I+P*z;return V?(V=1/V,a[0]=(p*F-d*B+y*R)*V,a[1]=(f*B-r*F-o*R)*V,a[2]=(w*P-b*k+h*S)*V,a[3]=(l*k-x*P-_*S)*V,a[4]=(d*D-i*F-y*I)*V,a[5]=(t*F-f*D+o*I)*V,a[6]=(b*L-s*P-h*u)*V,a[7]=(v*P-l*L+_*u)*V,a[8]=(i*B-p*D+y*z)*V,a[9]=(r*D-t*B-o*z)*V,a[10]=(s*k-w*L+h*m)*V,a[11]=(x*L-v*k-_*m)*V,a[12]=(p*I-i*R-d*z)*V,a[13]=(t*R-r*I+f*z)*V,a[14]=(w*u-s*S-b*m)*V,a[15]=(v*S-x*u+l*m)*V,a):null}},{}],99:[function(c,M,A){var e=c("./identity");M.exports=a;function a(n,t,r,f){var o,i,p,d,y,v,x,l,_,s,w=t[0],b=t[1],h=t[2],m=f[0],u=f[1],L=f[2],S=r[0],k=r[1],P=r[2];return Math.abs(w-S)<1e-6&&Math.abs(b-k)<1e-6&&Math.abs(h-P)<1e-6?e(n):(x=w-S,l=b-k,_=h-P,s=1/Math.sqrt(x*x+l*l+_*_),x*=s,l*=s,_*=s,o=u*_-L*l,i=L*x-m*_,p=m*l-u*x,s=Math.sqrt(o*o+i*i+p*p),s?(s=1/s,o*=s,i*=s,p*=s):(o=0,i=0,p=0),d=l*p-_*i,y=_*o-x*p,v=x*i-l*o,s=Math.sqrt(d*d+y*y+v*v),s?(s=1/s,d*=s,y*=s,v*=s):(d=0,y=0,v=0),n[0]=o,n[1]=d,n[2]=x,n[3]=0,n[4]=i,n[5]=y,n[6]=l,n[7]=0,n[8]=p,n[9]=v,n[10]=_,n[11]=0,n[12]=-(o*w+i*b+p*h),n[13]=-(d*w+y*b+v*h),n[14]=-(x*w+l*b+_*h),n[15]=1,n)}},{"./identity":97}],100:[function(c,M,A){M.exports=e;function e(a,n,t){var r=n[0],f=n[1],o=n[2],i=n[3],p=n[4],d=n[5],y=n[6],v=n[7],x=n[8],l=n[9],_=n[10],s=n[11],w=n[12],b=n[13],h=n[14],m=n[15],u=t[0],L=t[1],S=t[2],k=t[3];return a[0]=u*r+L*p+S*x+k*w,a[1]=u*f+L*d+S*l+k*b,a[2]=u*o+L*y+S*_+k*h,a[3]=u*i+L*v+S*s+k*m,u=t[4],L=t[5],S=t[6],k=t[7],a[4]=u*r+L*p+S*x+k*w,a[5]=u*f+L*d+S*l+k*b,a[6]=u*o+L*y+S*_+k*h,a[7]=u*i+L*v+S*s+k*m,u=t[8],L=t[9],S=t[10],k=t[11],a[8]=u*r+L*p+S*x+k*w,a[9]=u*f+L*d+S*l+k*b,a[10]=u*o+L*y+S*_+k*h,a[11]=u*i+L*v+S*s+k*m,u=t[12],L=t[13],S=t[14],k=t[15],a[12]=u*r+L*p+S*x+k*w,a[13]=u*f+L*d+S*l+k*b,a[14]=u*o+L*y+S*_+k*h,a[15]=u*i+L*v+S*s+k*m,a}},{}],101:[function(c,M,A){M.exports=e;function e(a,n,t,r,f,o,i){var p=1/(n-t),d=1/(r-f),y=1/(o-i);return a[0]=-2*p,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*y,a[11]=0,a[12]=(n+t)*p,a[13]=(f+r)*d,a[14]=(i+o)*y,a[15]=1,a}},{}],102:[function(c,M,A){M.exports=e;function e(a,n,t,r,f){var o=1/Math.tan(n/2),i=1/(r-f);return a[0]=o/t,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=o,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(f+r)*i,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*f*r*i,a[15]=0,a}},{}],103:[function(c,M,A){M.exports=e;function e(a,n,t,r){var f=r[0],o=r[1],i=r[2],p=Math.sqrt(f*f+o*o+i*i),d,y,v,x,l,_,s,w,b,h,m,u,L,S,k,P,z,I,D,R,B,F,V,Y;return Math.abs(p)<1e-6?null:(p=1/p,f*=p,o*=p,i*=p,d=Math.sin(t),y=Math.cos(t),v=1-y,x=n[0],l=n[1],_=n[2],s=n[3],w=n[4],b=n[5],h=n[6],m=n[7],u=n[8],L=n[9],S=n[10],k=n[11],P=f*f*v+y,z=o*f*v+i*d,I=i*f*v-o*d,D=f*o*v-i*d,R=o*o*v+y,B=i*o*v+f*d,F=f*i*v+o*d,V=o*i*v-f*d,Y=i*i*v+y,a[0]=x*P+w*z+u*I,a[1]=l*P+b*z+L*I,a[2]=_*P+h*z+S*I,a[3]=s*P+m*z+k*I,a[4]=x*D+w*R+u*B,a[5]=l*D+b*R+L*B,a[6]=_*D+h*R+S*B,a[7]=s*D+m*R+k*B,a[8]=x*F+w*V+u*Y,a[9]=l*F+b*V+L*Y,a[10]=_*F+h*V+S*Y,a[11]=s*F+m*V+k*Y,n!==a&&(a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a)}},{}],104:[function(c,M,A){M.exports=e;function e(a,n,t){var r=Math.sin(t),f=Math.cos(t),o=n[4],i=n[5],p=n[6],d=n[7],y=n[8],v=n[9],x=n[10],l=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=o*f+y*r,a[5]=i*f+v*r,a[6]=p*f+x*r,a[7]=d*f+l*r,a[8]=y*f-o*r,a[9]=v*f-i*r,a[10]=x*f-p*r,a[11]=l*f-d*r,a}},{}],105:[function(c,M,A){M.exports=e;function e(a,n,t){var r=Math.sin(t),f=Math.cos(t),o=n[0],i=n[1],p=n[2],d=n[3],y=n[8],v=n[9],x=n[10],l=n[11];return n!==a&&(a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=o*f-y*r,a[1]=i*f-v*r,a[2]=p*f-x*r,a[3]=d*f-l*r,a[8]=o*r+y*f,a[9]=i*r+v*f,a[10]=p*r+x*f,a[11]=d*r+l*f,a}},{}],106:[function(c,M,A){M.exports=e;function e(a,n,t){var r=Math.sin(t),f=Math.cos(t),o=n[0],i=n[1],p=n[2],d=n[3],y=n[4],v=n[5],x=n[6],l=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=o*f+y*r,a[1]=i*f+v*r,a[2]=p*f+x*r,a[3]=d*f+l*r,a[4]=y*f-o*r,a[5]=v*f-i*r,a[6]=x*f-p*r,a[7]=l*f-d*r,a}},{}],107:[function(c,M,A){M.exports=e;function e(a,n,t){var r=t[0],f=t[1],o=t[2];return a[0]=n[0]*r,a[1]=n[1]*r,a[2]=n[2]*r,a[3]=n[3]*r,a[4]=n[4]*f,a[5]=n[5]*f,a[6]=n[6]*f,a[7]=n[7]*f,a[8]=n[8]*o,a[9]=n[9]*o,a[10]=n[10]*o,a[11]=n[11]*o,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a}},{}],108:[function(c,M,A){M.exports=e;function e(a,n,t){var r=t[0],f=t[1],o=t[2],i,p,d,y,v,x,l,_,s,w,b,h;return n===a?(a[12]=n[0]*r+n[4]*f+n[8]*o+n[12],a[13]=n[1]*r+n[5]*f+n[9]*o+n[13],a[14]=n[2]*r+n[6]*f+n[10]*o+n[14],a[15]=n[3]*r+n[7]*f+n[11]*o+n[15]):(i=n[0],p=n[1],d=n[2],y=n[3],v=n[4],x=n[5],l=n[6],_=n[7],s=n[8],w=n[9],b=n[10],h=n[11],a[0]=i,a[1]=p,a[2]=d,a[3]=y,a[4]=v,a[5]=x,a[6]=l,a[7]=_,a[8]=s,a[9]=w,a[10]=b,a[11]=h,a[12]=i*r+v*f+s*o+n[12],a[13]=p*r+x*f+w*o+n[13],a[14]=d*r+l*f+b*o+n[14],a[15]=y*r+_*f+h*o+n[15]),a}},{}],109:[function(c,M,A){M.exports=e;function e(a,n){if(a===n){var t=n[1],r=n[2],f=n[3],o=n[6],i=n[7],p=n[11];a[1]=n[4],a[2]=n[8],a[3]=n[12],a[4]=t,a[6]=n[9],a[7]=n[13],a[8]=r,a[9]=o,a[11]=n[14],a[12]=f,a[13]=i,a[14]=p}else a[0]=n[0],a[1]=n[4],a[2]=n[8],a[3]=n[12],a[4]=n[1],a[5]=n[5],a[6]=n[9],a[7]=n[13],a[8]=n[2],a[9]=n[6],a[10]=n[10],a[11]=n[14],a[12]=n[3],a[13]=n[7],a[14]=n[11],a[15]=n[15];return a}},{}],110:[function(c,M,A){var e=c("barycentric"),a=c("polytope-closest-point/lib/closest_point_2d.js");M.exports=o;function n(i,p){for(var d=[0,0,0,0],y=0;y<4;++y)for(var v=0;v<4;++v)d[v]+=i[4*y+v]*p[y];return d}function t(i,p,d,y,v){for(var x=n(y,n(d,n(p,[i[0],i[1],i[2],1]))),l=0;l<3;++l)x[l]/=x[3];return[.5*v[0]*(1+x[0]),.5*v[1]*(1-x[1])]}function r(i,p){if(i.length===2){for(var d=0,y=0,v=0;v<2;++v)d+=Math.pow(p[v]-i[0][v],2),y+=Math.pow(p[v]-i[1][v],2);return d=Math.sqrt(d),y=Math.sqrt(y),d+y<1e-6?[1,0]:[y/(d+y),d/(y+d)]}else if(i.length===3){var x=[0,0];return a(i[0],i[1],i[2],p,x),e(i,x)}return[]}function f(i,p){for(var d=[0,0,0],y=0;y<i.length;++y)for(var v=i[y],x=p[y],l=0;l<3;++l)d[l]+=x*v[l];return d}function o(i,p,d,y,v,x){if(i.length===1)return[0,i[0].slice()];for(var l=new Array(i.length),_=0;_<i.length;++_)l[_]=t(i[_],d,y,v,x);for(var s=0,w=1/0,_=0;_<l.length;++_){for(var b=0,h=0;h<2;++h)b+=Math.pow(l[_][h]-p[h],2);b<w&&(w=b,s=_)}for(var m=r(l,p),u=0,_=0;_<3;++_){if(m[_]<-.001||m[_]>1.0001)return null;u+=m[_]}return Math.abs(u-1)>.001?null:[s,f(i,m),m]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(c,M,A){var e=c("glslify"),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),t=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),o=e([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),p=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),d=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),y=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),v=e([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);A.meshShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},A.wireShader={vertex:t,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},A.pointShader={vertex:f,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},A.pickShader={vertex:i,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},A.pointPickShader={vertex:d,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},A.contourShader={vertex:y,fragment:v,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(c,M,A){var e=1e-6,a=1e-6,n=c("gl-shader"),t=c("gl-buffer"),r=c("gl-vao"),f=c("gl-texture2d"),o=c("normals"),i=c("gl-mat4/multiply"),p=c("gl-mat4/invert"),d=c("ndarray"),y=c("colormap"),v=c("simplicial-complex-contour"),x=c("typedarray-pool"),l=c("./lib/shaders"),_=c("./lib/closest-point"),s=l.meshShader,w=l.wireShader,b=l.pointShader,h=l.pickShader,m=l.pointPickShader,u=l.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function S(J,G,Z,re,se,oe,N,U,q,Q,W,X,te,ee,ie,le,ye,ue,pe,ge,Te,_e,De,Oe,Ue,xe,Pe){this.gl=J,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=G,this.dirty=!0,this.triShader=Z,this.lineShader=re,this.pointShader=se,this.pickShader=oe,this.pointPickShader=N,this.contourShader=U,this.trianglePositions=q,this.triangleColors=W,this.triangleNormals=te,this.triangleUVs=X,this.triangleIds=Q,this.triangleVAO=ee,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ie,this.edgeColors=ye,this.edgeUVs=ue,this.edgeIds=le,this.edgeVAO=pe,this.edgeCount=0,this.pointPositions=ge,this.pointColors=_e,this.pointUVs=De,this.pointSizes=Oe,this.pointIds=Te,this.pointVAO=Ue,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=xe,this.contourVAO=Pe,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var k=S.prototype;k.isOpaque=function(){return!this.hasAlpha},k.isTransparent=function(){return this.hasAlpha},k.pickSlots=1,k.setPickBase=function(J){this.pickId=J};function P(J,G){if(!G||!G.length)return 1;for(var Z=0;Z<G.length;++Z){if(G.length<2)return 1;if(G[Z][0]===J)return G[Z][1];if(G[Z][0]>J&&Z>0){var re=(G[Z][0]-J)/(G[Z][0]-G[Z-1][0]);return G[Z][1]*(1-re)+re*G[Z-1][1]}}return 1}function z(J,G){for(var Z=y({colormap:J,nshades:256,format:"rgba"}),re=new Uint8Array(256*4),se=0;se<256;++se){for(var oe=Z[se],N=0;N<3;++N)re[4*se+N]=oe[N];G?re[4*se+3]=255*P(se/255,G):re[4*se+3]=255*oe[3]}return d(re,[256,256,4],[4,0,1])}function I(J){for(var G=J.length,Z=new Array(G),re=0;re<G;++re)Z[re]=J[re][2];return Z}k.highlight=function(J){if(!J||!this.contourEnable){this.contourCount=0;return}for(var G=v(this.cells,this.intensity,J.intensity),Z=G.cells,re=G.vertexIds,se=G.vertexWeights,oe=Z.length,N=x.mallocFloat32(2*3*oe),U=0,q=0;q<oe;++q)for(var Q=Z[q],W=0;W<2;++W){var X=Q[0];Q.length===2&&(X=Q[W]);for(var te=re[X][0],ee=re[X][1],ie=se[X],le=1-ie,ye=this.positions[te],ue=this.positions[ee],pe=0;pe<3;++pe)N[U++]=ie*ye[pe]+le*ue[pe]}this.contourCount=U/3|0,this.contourPositions.update(N.subarray(0,U)),x.free(N)},k.update=function(J){J=J||{};var G=this.gl;this.dirty=!0,"contourEnable"in J&&(this.contourEnable=J.contourEnable),"contourColor"in J&&(this.contourColor=J.contourColor),"lineWidth"in J&&(this.lineWidth=J.lineWidth),"lightPosition"in J&&(this.lightPosition=J.lightPosition),this.hasAlpha=!1,"opacity"in J&&(this.opacity=J.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in J&&(this.opacityscale=J.opacityscale,this.hasAlpha=!0),"ambient"in J&&(this.ambientLight=J.ambient),"diffuse"in J&&(this.diffuseLight=J.diffuse),"specular"in J&&(this.specularLight=J.specular),"roughness"in J&&(this.roughness=J.roughness),"fresnel"in J&&(this.fresnel=J.fresnel),J.texture?(this.texture.dispose(),this.texture=f(G,J.texture)):J.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=G.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=G.LINEAR,this.texture.setPixels(z(J.colormap,this.opacityscale)),this.texture.generateMipmap());var Z=J.cells,re=J.positions;if(!re||!Z)return;var se=[],oe=[],N=[],U=[],q=[],Q=[],W=[],X=[],te=[],ee=[],ie=[],le=[],ye=[],ue=[];this.cells=Z,this.positions=re;var pe=J.vertexNormals,ge=J.cellNormals,Te=J.vertexNormalsEpsilon===void 0?e:J.vertexNormalsEpsilon,_e=J.faceNormalsEpsilon===void 0?a:J.faceNormalsEpsilon;J.useFacetNormals&&!ge&&(ge=o.faceNormals(Z,re,_e)),!ge&&!pe&&(pe=o.vertexNormals(Z,re,Te));var De=J.vertexColors,Oe=J.cellColors,Ue=J.meshColor||[1,1,1,1],xe=J.vertexUVs,Pe=J.vertexIntensity,Ve=J.cellUVs,Qe=J.cellIntensity,Fe=1/0,Le=-1/0;if(!xe&&!Ve)if(Pe)if(J.vertexIntensityBounds)Fe=+J.vertexIntensityBounds[0],Le=+J.vertexIntensityBounds[1];else for(var Ne=0;Ne<Pe.length;++Ne){var dt=Pe[Ne];Fe=Math.min(Fe,dt),Le=Math.max(Le,dt)}else if(Qe)if(J.cellIntensityBounds)Fe=+J.cellIntensityBounds[0],Le=+J.cellIntensityBounds[1];else for(var Ne=0;Ne<Qe.length;++Ne){var dt=Qe[Ne];Fe=Math.min(Fe,dt),Le=Math.max(Le,dt)}else for(var Ne=0;Ne<re.length;++Ne){var dt=re[Ne][2];Fe=Math.min(Fe,dt),Le=Math.max(Le,dt)}Pe?this.intensity=Pe:Qe?this.intensity=Qe:this.intensity=I(re),this.pickVertex=!(Qe||Oe);var Dt=J.pointSizes,Xt=J.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Ne=0;Ne<re.length;++Ne)for(var Tt=re[Ne],zt=0;zt<3;++zt)isNaN(Tt[zt])||!isFinite(Tt[zt])||(this.bounds[0][zt]=Math.min(this.bounds[0][zt],Tt[zt]),this.bounds[1][zt]=Math.max(this.bounds[1][zt],Tt[zt]));var Ut=0,Et=0,Mt=0;e:for(var Ne=0;Ne<Z.length;++Ne){var rt=Z[Ne];switch(rt.length){case 1:for(var ct=rt[0],Tt=re[ct],zt=0;zt<3;++zt)if(isNaN(Tt[zt])||!isFinite(Tt[zt]))continue e;ee.push(Tt[0],Tt[1],Tt[2]);var Ze;De?Ze=De[ct]:Oe?Ze=Oe[Ne]:Ze=Ue,this.opacityscale&&Pe?oe.push(Ze[0],Ze[1],Ze[2],this.opacity*P((Pe[ct]-Fe)/(Le-Fe),this.opacityscale)):Ze.length===3?ie.push(Ze[0],Ze[1],Ze[2],this.opacity):(ie.push(Ze[0],Ze[1],Ze[2],Ze[3]*this.opacity),Ze[3]<1&&(this.hasAlpha=!0));var ke;xe?ke=xe[ct]:Pe?ke=[(Pe[ct]-Fe)/(Le-Fe),0]:Ve?ke=Ve[Ne]:Qe?ke=[(Qe[Ne]-Fe)/(Le-Fe),0]:ke=[(Tt[2]-Fe)/(Le-Fe),0],le.push(ke[0],ke[1]),Dt?ye.push(Dt[ct]):ye.push(Xt),ue.push(Ne),Mt+=1;break;case 2:for(var zt=0;zt<2;++zt)for(var ct=rt[zt],Tt=re[ct],Ge=0;Ge<3;++Ge)if(isNaN(Tt[Ge])||!isFinite(Tt[Ge]))continue e;for(var zt=0;zt<2;++zt){var ct=rt[zt],Tt=re[ct];Q.push(Tt[0],Tt[1],Tt[2]);var Ze;De?Ze=De[ct]:Oe?Ze=Oe[Ne]:Ze=Ue,this.opacityscale&&Pe?oe.push(Ze[0],Ze[1],Ze[2],this.opacity*P((Pe[ct]-Fe)/(Le-Fe),this.opacityscale)):Ze.length===3?W.push(Ze[0],Ze[1],Ze[2],this.opacity):(W.push(Ze[0],Ze[1],Ze[2],Ze[3]*this.opacity),Ze[3]<1&&(this.hasAlpha=!0));var ke;xe?ke=xe[ct]:Pe?ke=[(Pe[ct]-Fe)/(Le-Fe),0]:Ve?ke=Ve[Ne]:Qe?ke=[(Qe[Ne]-Fe)/(Le-Fe),0]:ke=[(Tt[2]-Fe)/(Le-Fe),0],X.push(ke[0],ke[1]),te.push(Ne)}Et+=1;break;case 3:for(var zt=0;zt<3;++zt)for(var ct=rt[zt],Tt=re[ct],Ge=0;Ge<3;++Ge)if(isNaN(Tt[Ge])||!isFinite(Tt[Ge]))continue e;for(var zt=0;zt<3;++zt){var ct=rt[2-zt],Tt=re[ct];se.push(Tt[0],Tt[1],Tt[2]);var Ze;De?Ze=De[ct]:Oe?Ze=Oe[Ne]:Ze=Ue,Ze?this.opacityscale&&Pe?oe.push(Ze[0],Ze[1],Ze[2],this.opacity*P((Pe[ct]-Fe)/(Le-Fe),this.opacityscale)):Ze.length===3?oe.push(Ze[0],Ze[1],Ze[2],this.opacity):(oe.push(Ze[0],Ze[1],Ze[2],Ze[3]*this.opacity),Ze[3]<1&&(this.hasAlpha=!0)):oe.push(.5,.5,.5,1);var ke;xe?ke=xe[ct]:Pe?ke=[(Pe[ct]-Fe)/(Le-Fe),0]:Ve?ke=Ve[Ne]:Qe?ke=[(Qe[Ne]-Fe)/(Le-Fe),0]:ke=[(Tt[2]-Fe)/(Le-Fe),0],U.push(ke[0],ke[1]);var Je;pe?Je=pe[ct]:Je=ge[Ne],N.push(Je[0],Je[1],Je[2]),q.push(Ne)}Ut+=1;break}}this.pointCount=Mt,this.edgeCount=Et,this.triangleCount=Ut,this.pointPositions.update(ee),this.pointColors.update(ie),this.pointUVs.update(le),this.pointSizes.update(ye),this.pointIds.update(new Uint32Array(ue)),this.edgePositions.update(Q),this.edgeColors.update(W),this.edgeUVs.update(X),this.edgeIds.update(new Uint32Array(te)),this.trianglePositions.update(se),this.triangleColors.update(oe),this.triangleUVs.update(U),this.triangleNormals.update(N),this.triangleIds.update(new Uint32Array(q))},k.drawTransparent=k.draw=function(J){J=J||{};for(var G=this.gl,Z=J.model||L,re=J.view||L,se=J.projection||L,oe=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],N=0;N<3;++N)oe[0][N]=Math.max(oe[0][N],this.clipBounds[0][N]),oe[1][N]=Math.min(oe[1][N],this.clipBounds[1][N]);var U={model:Z,view:re,projection:se,inverseModel:L.slice(),clipBounds:oe,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};U.inverseModel=p(U.inverseModel,U.model),G.disable(G.CULL_FACE),this.texture.bind(0);var q=new Array(16);i(q,U.view,U.model),i(q,U.projection,q),p(q,q);for(var N=0;N<3;++N)U.eyePosition[N]=q[12+N]/q[15];for(var Q=q[15],N=0;N<3;++N)Q+=this.lightPosition[N]*q[4*N+3];for(var N=0;N<3;++N){for(var W=q[12+N],X=0;X<3;++X)W+=q[4*X+N]*this.lightPosition[X];U.lightPosition[N]=W/Q}if(this.triangleCount>0){var te=this.triShader;te.bind(),te.uniforms=U,this.triangleVAO.bind(),G.drawArrays(G.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var te=this.lineShader;te.bind(),te.uniforms=U,this.edgeVAO.bind(),G.lineWidth(this.lineWidth*this.pixelRatio),G.drawArrays(G.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var te=this.pointShader;te.bind(),te.uniforms=U,this.pointVAO.bind(),G.drawArrays(G.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var te=this.contourShader;te.bind(),te.uniforms=U,this.contourVAO.bind(),G.drawArrays(G.LINES,0,this.contourCount),this.contourVAO.unbind()}},k.drawPick=function(J){J=J||{};for(var G=this.gl,Z=J.model||L,re=J.view||L,se=J.projection||L,oe=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],N=0;N<3;++N)oe[0][N]=Math.max(oe[0][N],this.clipBounds[0][N]),oe[1][N]=Math.min(oe[1][N],this.clipBounds[1][N]);this._model=[].slice.call(Z),this._view=[].slice.call(re),this._projection=[].slice.call(se),this._resolution=[G.drawingBufferWidth,G.drawingBufferHeight];var U={model:Z,view:re,projection:se,clipBounds:oe,pickId:this.pickId/255},q=this.pickShader;if(q.bind(),q.uniforms=U,this.triangleCount>0&&(this.triangleVAO.bind(),G.drawArrays(G.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),G.lineWidth(this.lineWidth*this.pixelRatio),G.drawArrays(G.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var q=this.pointPickShader;q.bind(),q.uniforms=U,this.pointVAO.bind(),G.drawArrays(G.POINTS,0,this.pointCount),this.pointVAO.unbind()}},k.pick=function(J){if(!J||J.id!==this.pickId)return null;for(var G=J.value[0]+256*J.value[1]+65536*J.value[2],Z=this.cells[G],re=this.positions,se=new Array(Z.length),oe=0;oe<Z.length;++oe)se[oe]=re[Z[oe]];var N=J.coord[0],U=J.coord[1];if(!this.pickVertex){var q=this.positions[Z[0]],Q=this.positions[Z[1]],W=this.positions[Z[2]],X=[(q[0]+Q[0]+W[0])/3,(q[1]+Q[1]+W[1])/3,(q[2]+Q[2]+W[2])/3];return{_cellCenter:!0,position:[N,U],index:G,cell:Z,cellId:G,intensity:this.intensity[G],dataCoordinate:X}}var te=_(se,[N*this.pixelRatio,this._resolution[1]-U*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!te)return null;for(var ee=te[2],ie=0,oe=0;oe<Z.length;++oe)ie+=ee[oe]*this.intensity[Z[oe]];return{position:te[1],index:Z[te[0]],cell:Z,cellId:G,intensity:ie,dataCoordinate:this.positions[Z[te[0]]]}},k.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function D(J){var G=n(J,s.vertex,s.fragment);return G.attributes.position.location=0,G.attributes.color.location=2,G.attributes.uv.location=3,G.attributes.normal.location=4,G}function R(J){var G=n(J,w.vertex,w.fragment);return G.attributes.position.location=0,G.attributes.color.location=2,G.attributes.uv.location=3,G}function B(J){var G=n(J,b.vertex,b.fragment);return G.attributes.position.location=0,G.attributes.color.location=2,G.attributes.uv.location=3,G.attributes.pointSize.location=4,G}function F(J){var G=n(J,h.vertex,h.fragment);return G.attributes.position.location=0,G.attributes.id.location=1,G}function V(J){var G=n(J,m.vertex,m.fragment);return G.attributes.position.location=0,G.attributes.id.location=1,G.attributes.pointSize.location=4,G}function Y(J){var G=n(J,u.vertex,u.fragment);return G.attributes.position.location=0,G}function K(J,G){arguments.length===1&&(G=J,J=G.gl);var Z=J.getExtension("OES_standard_derivatives")||J.getExtension("MOZ_OES_standard_derivatives")||J.getExtension("WEBKIT_OES_standard_derivatives");if(!Z)throw new Error("derivatives not supported");var re=D(J),se=R(J),oe=B(J),N=F(J),U=V(J),q=Y(J),Q=f(J,d(new Uint8Array([255,255,255,255]),[1,1,4]));Q.generateMipmap(),Q.minFilter=J.LINEAR_MIPMAP_LINEAR,Q.magFilter=J.LINEAR;var W=t(J),X=t(J),te=t(J),ee=t(J),ie=t(J),le=r(J,[{buffer:W,type:J.FLOAT,size:3},{buffer:ie,type:J.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:X,type:J.FLOAT,size:4},{buffer:te,type:J.FLOAT,size:2},{buffer:ee,type:J.FLOAT,size:3}]),ye=t(J),ue=t(J),pe=t(J),ge=t(J),Te=r(J,[{buffer:ye,type:J.FLOAT,size:3},{buffer:ge,type:J.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ue,type:J.FLOAT,size:4},{buffer:pe,type:J.FLOAT,size:2}]),_e=t(J),De=t(J),Oe=t(J),Ue=t(J),xe=t(J),Pe=r(J,[{buffer:_e,type:J.FLOAT,size:3},{buffer:xe,type:J.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:De,type:J.FLOAT,size:4},{buffer:Oe,type:J.FLOAT,size:2},{buffer:Ue,type:J.FLOAT,size:1}]),Ve=t(J),Qe=r(J,[{buffer:Ve,type:J.FLOAT,size:3}]),Fe=new S(J,Q,re,se,oe,N,U,q,W,ie,X,te,ee,le,ye,ge,ue,pe,Te,_e,xe,De,Oe,Ue,Pe,Ve,Qe);return Fe.update(G),Fe}M.exports=K},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(c,M,A){M.exports=f;var e=c("gl-buffer"),a=c("gl-shader"),n=c("./shaders");function t(o,i,p){this.plot=o,this.vbo=i,this.shader=p}var r=t.prototype;r.bind=function(){var o=this.shader;this.vbo.bind(),this.shader.bind(),o.attributes.coord.pointer(),o.uniforms.screenBox=this.plot.screenBox},r.drawBox=function(){var o=[0,0],i=[0,0];return function(p,d,y,v,x){var l=this.plot,_=this.shader,s=l.gl;o[0]=p,o[1]=d,i[0]=y,i[1]=v,_.uniforms.lo=o,_.uniforms.hi=i,_.uniforms.color=x,s.drawArrays(s.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(o){var i=o.gl,p=e(i,[0,0,0,1,1,0,1,1]),d=a(i,n.boxVert,n.lineFrag);return new t(o,p,d)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(c,M,A){M.exports=i;var e=c("gl-buffer"),a=c("gl-shader"),n=c("binary-search-bounds"),t=c("./shaders");function r(p,d,y,v){this.plot=p,this.vbo=d,this.shader=y,this.tickShader=v,this.ticks=[[],[]]}function f(p,d){return p-d}var o=r.prototype;o.draw=function(){var p=[0,0],d=[0,0],y=[0,0];return function(){for(var v=this.plot,x=this.vbo,l=this.shader,_=this.ticks,s=v.gl,w=v._tickBounds,b=v.dataBox,h=v.viewBox,m=v.gridLineWidth,u=v.gridLineColor,L=v.gridLineEnable,S=v.pixelRatio,k=0;k<2;++k){var P=w[k],z=w[k+2],I=z-P,D=.5*(b[k+2]+b[k]),R=b[k+2]-b[k];d[k]=2*I/R,p[k]=2*(P-D)/R}l.bind(),x.bind(),l.attributes.dataCoord.pointer(),l.uniforms.dataShift=p,l.uniforms.dataScale=d;for(var B=0,k=0;k<2;++k){y[0]=y[1]=0,y[k]=1,l.uniforms.dataAxis=y,l.uniforms.lineWidth=m[k]/(h[k+2]-h[k])*S,l.uniforms.color=u[k];var F=_[k].length*6;L[k]&&F&&s.drawArrays(s.TRIANGLES,B,F),B+=F}}}(),o.drawTickMarks=function(){var p=[0,0],d=[0,0],y=[1,0],v=[0,1],x=[0,0],l=[0,0];return function(){for(var _=this.plot,s=this.vbo,w=this.tickShader,b=this.ticks,h=_.gl,m=_._tickBounds,u=_.dataBox,L=_.viewBox,S=_.pixelRatio,k=_.screenBox,P=k[2]-k[0],z=k[3]-k[1],I=L[2]-L[0],D=L[3]-L[1],R=0;R<2;++R){var B=m[R],F=m[R+2],V=F-B,Y=.5*(u[R+2]+u[R]),K=u[R+2]-u[R];d[R]=2*V/K,p[R]=2*(B-Y)/K}d[0]*=I/P,p[0]*=I/P,d[1]*=D/z,p[1]*=D/z,w.bind(),s.bind(),w.attributes.dataCoord.pointer();var J=w.uniforms;J.dataShift=p,J.dataScale=d;var G=_.tickMarkLength,Z=_.tickMarkWidth,re=_.tickMarkColor,se=0,oe=b[0].length*6,N=Math.min(n.ge(b[0],(u[0]-m[0])/(m[2]-m[0]),f),b[0].length),U=Math.min(n.gt(b[0],(u[2]-m[0])/(m[2]-m[0]),f),b[0].length),q=se+6*N,Q=6*Math.max(0,U-N),W=Math.min(n.ge(b[1],(u[1]-m[1])/(m[3]-m[1]),f),b[1].length),X=Math.min(n.gt(b[1],(u[3]-m[1])/(m[3]-m[1]),f),b[1].length),te=oe+6*W,ee=6*Math.max(0,X-W);x[0]=2*(L[0]-G[1])/P-1,x[1]=(L[3]+L[1])/z-1,l[0]=G[1]*S/P,l[1]=Z[1]*S/z,ee&&(J.color=re[1],J.tickScale=l,J.dataAxis=v,J.screenOffset=x,h.drawArrays(h.TRIANGLES,te,ee)),x[0]=(L[2]+L[0])/P-1,x[1]=2*(L[1]-G[0])/z-1,l[0]=Z[0]*S/P,l[1]=G[0]*S/z,Q&&(J.color=re[0],J.tickScale=l,J.dataAxis=y,J.screenOffset=x,h.drawArrays(h.TRIANGLES,q,Q)),x[0]=2*(L[2]+G[3])/P-1,x[1]=(L[3]+L[1])/z-1,l[0]=G[3]*S/P,l[1]=Z[3]*S/z,ee&&(J.color=re[3],J.tickScale=l,J.dataAxis=v,J.screenOffset=x,h.drawArrays(h.TRIANGLES,te,ee)),x[0]=(L[2]+L[0])/P-1,x[1]=2*(L[3]+G[2])/z-1,l[0]=Z[2]*S/P,l[1]=G[2]*S/z,Q&&(J.color=re[2],J.tickScale=l,J.dataAxis=y,J.screenOffset=x,h.drawArrays(h.TRIANGLES,q,Q))}}(),o.update=function(){var p=[1,1,-1,-1,1,-1],d=[1,-1,1,1,-1,-1];return function(y){var v=y.ticks,x=y.bounds,l=new Float32Array(6*3*(v[0].length+v[1].length));this.plot.zeroLineEnable;for(var _=0,s=[[],[]],w=0;w<2;++w)for(var b=s[w],h=v[w],m=x[w],u=x[w+2],L=0;L<h.length;++L){var S=(h[L].x-m)/(u-m);b.push(S);for(var k=0;k<6;++k)l[_++]=S,l[_++]=p[k],l[_++]=d[k]}this.ticks=s,this.vbo.update(l)}}(),o.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function i(p){var d=p.gl,y=e(d),v=a(d,t.gridVert,t.gridFrag),x=a(d,t.tickVert,t.gridFrag),l=new r(p,y,v,x);return l}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(c,M,A){M.exports=f;var e=c("gl-buffer"),a=c("gl-shader"),n=c("./shaders");function t(o,i,p){this.plot=o,this.vbo=i,this.shader=p}var r=t.prototype;r.bind=function(){var o=this.shader;this.vbo.bind(),this.shader.bind(),o.attributes.coord.pointer(),o.uniforms.screenBox=this.plot.screenBox},r.drawLine=function(){var o=[0,0],i=[0,0];return function(p,d,y,v,x,l){var _=this.plot,s=this.shader,w=_.gl;o[0]=p,o[1]=d,i[0]=y,i[1]=v,s.uniforms.start=o,s.uniforms.end=i,s.uniforms.width=x*_.pixelRatio,s.uniforms.color=l,w.drawArrays(w.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(o){var i=o.gl,p=e(i,[-1,-1,-1,1,1,-1,1,1]),d=a(i,n.lineVert,n.lineFrag),y=new t(o,p,d);return y}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(c,M,A){var e=c("glslify"),a=e([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);M.exports={lineVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:a,textVert:e([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:a,gridVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:a,boxVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(c,M,A){M.exports=i;var e=c("gl-buffer"),a=c("gl-shader"),n=c("text-cache"),t=c("binary-search-bounds"),r=c("./shaders");function f(p,d,y){this.plot=p,this.vbo=d,this.shader=y,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var o=f.prototype;o.drawTicks=function(){var p=[0,0],d=[0,0],y=[0,0];return function(v){var x=this.plot,l=this.shader,_=this.tickX[v],s=this.tickOffset[v],w=x.gl,b=x.viewBox,h=x.dataBox,m=x.screenBox,u=x.pixelRatio,L=x.tickEnable,S=x.tickPad,k=x.tickColor,P=x.tickAngle,z=x.labelEnable,I=x.labelPad,D=x.labelColor,R=x.labelAngle,B=this.labelOffset[v],F=this.labelCount[v],V=t.lt(_,h[v]),Y=t.le(_,h[v+2]);p[0]=p[1]=0,p[v]=1,d[v]=(b[2+v]+b[v])/(m[2+v]-m[v])-1;var K=2/m[2+(v^1)]-m[v^1];d[v^1]=K*b[v^1]-1,L[v]&&(d[v^1]-=K*u*S[v],V<Y&&s[Y]>s[V]&&(l.uniforms.dataAxis=p,l.uniforms.screenOffset=d,l.uniforms.color=k[v],l.uniforms.angle=P[v],w.drawArrays(w.TRIANGLES,s[V],s[Y]-s[V]))),z[v]&&F&&(d[v^1]-=K*u*I[v],l.uniforms.dataAxis=y,l.uniforms.screenOffset=d,l.uniforms.color=D[v],l.uniforms.angle=R[v],w.drawArrays(w.TRIANGLES,B,F)),d[v^1]=K*b[2+(v^1)]-1,L[v+2]&&(d[v^1]+=K*u*S[v+2],V<Y&&s[Y]>s[V]&&(l.uniforms.dataAxis=p,l.uniforms.screenOffset=d,l.uniforms.color=k[v+2],l.uniforms.angle=P[v+2],w.drawArrays(w.TRIANGLES,s[V],s[Y]-s[V]))),z[v+2]&&F&&(d[v^1]+=K*u*I[v+2],l.uniforms.dataAxis=y,l.uniforms.screenOffset=d,l.uniforms.color=D[v+2],l.uniforms.angle=R[v+2],w.drawArrays(w.TRIANGLES,B,F))}}(),o.drawTitle=function(){var p=[0,0],d=[0,0];return function(){var y=this.plot,v=this.shader,x=y.gl,l=y.screenBox,_=y.titleCenter,s=y.titleAngle,w=y.titleColor,b=y.pixelRatio;if(!!this.titleCount){for(var h=0;h<2;++h)d[h]=2*(_[h]*b-l[h])/(l[2+h]-l[h])-1;v.bind(),v.uniforms.dataAxis=p,v.uniforms.screenOffset=d,v.uniforms.angle=s,v.uniforms.color=w,x.drawArrays(x.TRIANGLES,this.titleOffset,this.titleCount)}}}(),o.bind=function(){var p=[0,0],d=[0,0],y=[0,0];return function(){var v=this.plot,x=this.shader,l=v._tickBounds,_=v.dataBox,s=v.screenBox,w=v.viewBox;x.bind();for(var b=0;b<2;++b){var h=l[b],m=l[b+2],u=m-h,L=.5*(_[b+2]+_[b]),S=_[b+2]-_[b],k=w[b],P=w[b+2],z=P-k,I=s[b],D=s[b+2],R=D-I;d[b]=2*u/S*z/R,p[b]=2*(h-L)/S*z/R}y[1]=2*v.pixelRatio/(s[3]-s[1]),y[0]=y[1]*(s[3]-s[1])/(s[2]-s[0]),x.uniforms.dataScale=d,x.uniforms.dataShift=p,x.uniforms.textScale=y,this.vbo.bind(),x.attributes.textCoordinate.pointer()}}(),o.update=function(p){var d=[],y=p.ticks,v=p.bounds,x,l,_,s,w;for(w=0;w<2;++w){var b=[Math.floor(d.length/3)],h=[-1/0],m=y[w];for(x=0;x<m.length;++x){var u=m[x],L=u.x,S=u.text,k=u.font||"sans-serif";s=u.fontSize||12;for(var P=1/(v[w+2]-v[w]),z=v[w],I=S.split(`
`),D=0;D<I.length;D++)for(_=n(k,I[D]).data,l=0;l<_.length;l+=2)d.push(_[l]*s,-_[l+1]*s-D*s*1.2,(L-z)*P);b.push(Math.floor(d.length/3)),h.push(L)}this.tickOffset[w]=b,this.tickX[w]=h}for(w=0;w<2;++w){for(this.labelOffset[w]=Math.floor(d.length/3),_=n(p.labelFont[w],p.labels[w],{textAlign:"center"}).data,s=p.labelSize[w],x=0;x<_.length;x+=2)d.push(_[x]*s,-_[x+1]*s,0);this.labelCount[w]=Math.floor(d.length/3)-this.labelOffset[w]}for(this.titleOffset=Math.floor(d.length/3),_=n(p.titleFont,p.title).data,s=p.titleSize,x=0;x<_.length;x+=2)d.push(_[x]*s,-_[x+1]*s,0);this.titleCount=Math.floor(d.length/3)-this.titleOffset,this.vbo.update(d)},o.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function i(p){var d=p.gl,y=e(d),v=a(d,r.textVert,r.textFrag),x=new f(p,y,v);return x}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(c,M,A){M.exports=d;var e=c("gl-select-static"),a=c("./lib/grid"),n=c("./lib/text"),t=c("./lib/line"),r=c("./lib/box");function f(y,v){this.gl=y,this.pickBuffer=v,this.screenBox=[0,0,y.drawingBufferWidth,y.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var o=f.prototype;o.setDirty=function(){this.dirty=this.pickDirty=!0},o.setOverlayDirty=function(){this.dirty=!0},o.nextDepthValue=function(){return this._depthCounter++/65536},o.draw=function(){return function(){var y=this.gl,v=this.screenBox,x=this.viewBox,l=this.dataBox,_=this.pixelRatio,s=this.grid,w=this.line,b=this.text,h=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,y.bindFramebuffer(y.FRAMEBUFFER,null),y.enable(y.SCISSOR_TEST),y.disable(y.DEPTH_TEST),y.depthFunc(y.LESS),y.depthMask(!1),y.enable(y.BLEND),y.blendEquation(y.FUNC_ADD,y.FUNC_ADD),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),this.borderColor){y.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]);var m=this.borderColor;y.clearColor(m[0]*m[3],m[1]*m[3],m[2]*m[3],m[3]),y.clear(y.COLOR_BUFFER_BIT|y.DEPTH_BUFFER_BIT)}y.scissor(x[0],x[1],x[2]-x[0],x[3]-x[1]),y.viewport(x[0],x[1],x[2]-x[0],x[3]-x[1]);var u=this.backgroundColor;y.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]),y.clear(y.COLOR_BUFFER_BIT),s.draw();var L=this.zeroLineEnable,S=this.zeroLineColor,k=this.zeroLineWidth;if(L[0]||L[1]){w.bind();for(var P=0;P<2;++P)if(!(!L[P]||!(l[P]<=0&&l[P+2]>=0))){var z=v[P]-l[P]*(v[P+2]-v[P])/(l[P+2]-l[P]);P===0?w.drawLine(z,v[1],z,v[3],k[P],S[P]):w.drawLine(v[0],z,v[2],z,k[P],S[P])}}for(var P=0;P<h.length;++P)h[P].draw();y.viewport(v[0],v[1],v[2]-v[0],v[3]-v[1]),y.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]),this.grid.drawTickMarks(),w.bind();var I=this.borderLineEnable,D=this.borderLineWidth,R=this.borderLineColor;I[1]&&w.drawLine(x[0],x[1]-.5*D[1]*_,x[0],x[3]+.5*D[3]*_,D[1],R[1]),I[0]&&w.drawLine(x[0]-.5*D[0]*_,x[1],x[2]+.5*D[2]*_,x[1],D[0],R[0]),I[3]&&w.drawLine(x[2],x[1]-.5*D[1]*_,x[2],x[3]+.5*D[3]*_,D[3],R[3]),I[2]&&w.drawLine(x[0]-.5*D[0]*_,x[3],x[2]+.5*D[2]*_,x[3],D[2],R[2]),b.bind();for(var P=0;P<2;++P)b.drawTicks(P);this.titleEnable&&b.drawTitle();for(var B=this.overlays,P=0;P<B.length;++P)B[P].draw();y.disable(y.SCISSOR_TEST),y.disable(y.BLEND),y.depthMask(!0)}}}(),o.drawPick=function(){return function(){if(!this.static){var y=this.pickBuffer;this.gl,this._pickTimeout=null,y.begin();for(var v=1,x=this.objects,l=0;l<x.length;++l)v=x[l].drawPick(v);y.end()}}}(),o.pick=function(){return function(y,v){if(!this.static){var x=this.pixelRatio,l=this.pickPixelRatio,_=this.viewBox,s=Math.round((y-_[0]/x)*l)|0,w=Math.round((v-_[1]/x)*l)|0,b=this.pickBuffer.query(s,w,this.pickRadius);if(!b)return null;for(var h=b.id+(b.value[0]<<8)+(b.value[1]<<16)+(b.value[2]<<24),m=this.objects,u=0;u<m.length;++u){var L=m[u].pick(s,w,h);if(L)return L}return null}}}();function i(y){for(var v=y.slice(),x=0;x<v.length;++x)v[x]=v[x].slice();return v}function p(y,v){return y.x-v.x}o.setScreenBox=function(y){var v=this.screenBox,x=this.pixelRatio;v[0]=Math.round(y[0]*x)|0,v[1]=Math.round(y[1]*x)|0,v[2]=Math.round(y[2]*x)|0,v[3]=Math.round(y[3]*x)|0,this.setDirty()},o.setDataBox=function(y){var v=this.dataBox,x=v[0]!==y[0]||v[1]!==y[1]||v[2]!==y[2]||v[3]!==y[3];x&&(v[0]=y[0],v[1]=y[1],v[2]=y[2],v[3]=y[3],this.setDirty())},o.setViewBox=function(y){var v=this.pixelRatio,x=this.viewBox;x[0]=Math.round(y[0]*v)|0,x[1]=Math.round(y[1]*v)|0,x[2]=Math.round(y[2]*v)|0,x[3]=Math.round(y[3]*v)|0;var l=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((y[2]-y[0])*l)|0,Math.round((y[3]-y[1])*l)|0],this.setDirty()},o.update=function(y){y=y||{};var v=this.gl;this.pixelRatio=y.pixelRatio||1;var x=this.pixelRatio;this.pickPixelRatio=Math.max(x,1),this.setScreenBox(y.screenBox||[0,0,v.drawingBufferWidth/x,v.drawingBufferHeight/x]),this.screenBox,this.setViewBox(y.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/x,.125*(this.screenBox[3]-this.screenBox[1])/x,.875*(this.screenBox[2]-this.screenBox[0])/x,.875*(this.screenBox[3]-this.screenBox[1])/x]);var l=this.viewBox,_=(l[2]-l[0])/(l[3]-l[1]);this.setDataBox(y.dataBox||[-10,-10/_,10,10/_]),this.borderColor=y.borderColor!==!1?(y.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(y.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(y.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(y.gridLineWidth||[1,1]).slice(),this.gridLineColor=i(y.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(y.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(y.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=i(y.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(y.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(y.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=i(y.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(y.titleCenter||[.5*(l[0]+l[2])/x,(l[3]+120)/x]).slice(),this.titleEnable=!("titleEnable"in y)||!!y.titleEnable,this.titleAngle=y.titleAngle||0,this.titleColor=(y.titleColor||[0,0,0,1]).slice(),this.labelPad=(y.labelPad||[15,15,15,15]).slice(),this.labelAngle=(y.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(y.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=i(y.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(y.tickPad||[15,15,15,15]).slice(),this.tickAngle=(y.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(y.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=i(y.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(y.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(y.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=i(y.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var s=y.ticks||[[],[]],w=this._tickBounds;w[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(var b=0;b<2;++b){var h=s[b].slice(0);h.length!==0&&(h.sort(p),w[b]=Math.min(w[b],h[0].x),w[b+2]=Math.max(w[b+2],h[h.length-1].x))}this.grid.update({bounds:w,ticks:s}),this.text.update({bounds:w,ticks:s,labels:y.labels||["x","y"],labelSize:y.labelSize||[12,12],labelFont:y.labelFont||["sans-serif","sans-serif"],title:y.title||"",titleSize:y.titleSize||18,titleFont:y.titleFont||"sans-serif"}),this.static=!!y.static,this.setDirty()},o.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var y=this.objects.length-1;y>=0;--y)this.objects[y].dispose();this.objects.length=0;for(var y=this.overlays.length-1;y>=0;--y)this.overlays[y].dispose();this.overlays.length=0,this.gl=null},o.addObject=function(y){this.objects.indexOf(y)<0&&(this.objects.push(y),this.setDirty())},o.removeObject=function(y){for(var v=this.objects,x=0;x<v.length;++x)if(v[x]===y){v.splice(x,1),this.setDirty();break}},o.addOverlay=function(y){this.overlays.indexOf(y)<0&&(this.overlays.push(y),this.setOverlayDirty())},o.removeOverlay=function(y){for(var v=this.overlays,x=0;x<v.length;++x)if(v[x]===y){v.splice(x,1),this.setOverlayDirty();break}};function d(y){var v=y.gl,x=e(v,[v.drawingBufferWidth,v.drawingBufferHeight]),l=new f(v,x);return l.grid=a(l),l.text=n(l),l.line=t(l),l.box=r(l),l.update(y),l}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(c,M,A){M.exports=o;var e=c("right-now"),a=c("3d-view"),n=c("mouse-change"),t=c("mouse-wheel"),r=c("mouse-event-offset"),f=c("has-passive-events");function o(i,p){i=i||document.body,p=p||{};var d=[.01,1/0];"distanceLimits"in p&&(d[0]=p.distanceLimits[0],d[1]=p.distanceLimits[1]),"zoomMin"in p&&(d[0]=p.zoomMin),"zoomMax"in p&&(d[1]=p.zoomMax);var y=a({center:p.center||[0,0,0],up:p.up||[0,1,0],eye:p.eye||[0,0,10],mode:p.mode||"orbit",distanceLimits:d}),v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=0,l=i.clientWidth,_=i.clientHeight,s={keyBindingMode:"rotate",enableWheel:!0,view:y,element:i,delay:p.delay||16,rotateSpeed:p.rotateSpeed||1,zoomSpeed:p.zoomSpeed||1,translateSpeed:p.translateSpeed||1,flipX:!!p.flipX,flipY:!!p.flipY,modes:y.modes,_ortho:p._ortho||p.projection&&p.projection.type==="orthographic"||!1,tick:function(){var w=e(),b=this.delay,h=w-2*b;y.idle(w-b),y.recalcMatrix(h),y.flush(w-(100+b*2));for(var m=!0,u=y.computedMatrix,L=0;L<16;++L)m=m&&v[L]===u[L],v[L]=u[L];var S=i.clientWidth===l&&i.clientHeight===_;return l=i.clientWidth,_=i.clientHeight,m?!S:(x=Math.exp(y.computedRadius[0]),!0)},lookAt:function(w,b,h){y.lookAt(y.lastT(),w,b,h)},rotate:function(w,b,h){y.rotate(y.lastT(),w,b,h)},pan:function(w,b,h){y.pan(y.lastT(),w,b,h)},translate:function(w,b,h){y.translate(y.lastT(),w,b,h)}};return Object.defineProperties(s,{matrix:{get:function(){return y.computedMatrix},set:function(w){return y.setMatrix(y.lastT(),w),y.computedMatrix},enumerable:!0},mode:{get:function(){return y.getMode()},set:function(w){var b=y.computedUp.slice(),h=y.computedEye.slice(),m=y.computedCenter.slice();if(y.setMode(w),w==="turntable"){var u=e();y._active.lookAt(u,h,m,b),y._active.lookAt(u+500,h,m,[0,0,1]),y._active.flush(u)}return y.getMode()},enumerable:!0},center:{get:function(){return y.computedCenter},set:function(w){return y.lookAt(y.lastT(),null,w),y.computedCenter},enumerable:!0},eye:{get:function(){return y.computedEye},set:function(w){return y.lookAt(y.lastT(),w),y.computedEye},enumerable:!0},up:{get:function(){return y.computedUp},set:function(w){return y.lookAt(y.lastT(),null,null,w),y.computedUp},enumerable:!0},distance:{get:function(){return x},set:function(w){return y.setDistance(y.lastT(),w),w},enumerable:!0},distanceLimits:{get:function(){return y.getDistanceLimits(d)},set:function(w){return y.setDistanceLimits(w),w},enumerable:!0}}),i.addEventListener("contextmenu",function(w){return w.preventDefault(),!1}),s._lastX=-1,s._lastY=-1,s._lastMods={shift:!1,control:!1,alt:!1,meta:!1},s.enableMouseListeners=function(){s.mouseListener=n(i,w),i.addEventListener("touchstart",function(b){var h=r(b.changedTouches[0],i);w(0,h[0],h[1],s._lastMods),w(1,h[0],h[1],s._lastMods)},f?{passive:!0}:!1),i.addEventListener("touchmove",function(b){var h=r(b.changedTouches[0],i);w(1,h[0],h[1],s._lastMods),b.preventDefault()},f?{passive:!1}:!1),i.addEventListener("touchend",function(b){w(0,s._lastX,s._lastY,s._lastMods)},f?{passive:!0}:!1);function w(b,h,m,u){var L=s.keyBindingMode;if(L!==!1){var S=L==="rotate",k=L==="pan",P=L==="zoom",z=!!u.control,I=!!u.alt,D=!!u.shift,R=!!(b&1),B=!!(b&2),F=!!(b&4),V=1/i.clientHeight,Y=V*(h-s._lastX),K=V*(m-s._lastY),J=s.flipX?1:-1,G=s.flipY?1:-1,Z=Math.PI*s.rotateSpeed,re=e();if(s._lastX!==-1&&s._lastY!==-1&&((S&&R&&!z&&!I&&!D||R&&!z&&!I&&D)&&y.rotate(re,J*Z*Y,-G*Z*K,0),(k&&R&&!z&&!I&&!D||B||R&&z&&!I&&!D)&&y.pan(re,-s.translateSpeed*Y*x,s.translateSpeed*K*x,0),P&&R&&!z&&!I&&!D||F||R&&!z&&I&&!D)){var se=-s.zoomSpeed*K/window.innerHeight*(re-y.lastT())*100;y.pan(re,0,0,x*(Math.exp(se)-1))}return s._lastX=h,s._lastY=m,s._lastMods=u,!0}}s.wheelListener=t(i,function(b,h){if(s.keyBindingMode!==!1&&!!s.enableWheel){var m=s.flipX?1:-1,u=s.flipY?1:-1,L=e();if(Math.abs(b)>Math.abs(h))y.rotate(L,0,0,-b*m*Math.PI*s.rotateSpeed/window.innerWidth);else if(!s._ortho){var S=-s.zoomSpeed*u*h/window.innerHeight*(L-y.lastT())/20;y.pan(L,0,0,x*(Math.exp(S)-1))}}},!0)},s.enableMouseListeners(),s}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(c,M,A){var e=c("glslify"),a=c("gl-shader"),n=e([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),t=e([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);M.exports=function(r){return a(r,n,t,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(c,M,A){var e=c("./camera.js"),a=c("gl-axes3d"),n=c("gl-axes3d/properties"),t=c("gl-spikes3d"),r=c("gl-select-static"),f=c("gl-fbo"),o=c("a-big-triangle"),i=c("mouse-change"),p=c("gl-mat4/perspective"),d=c("gl-mat4/ortho"),y=c("./lib/shader"),v=c("is-mobile")({tablet:!0,featureDetect:!0});M.exports={createScene:w,createCamera:e};function x(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function l(h,m){var u=null;try{u=h.getContext("webgl",m),u||(u=h.getContext("experimental-webgl",m))}catch{return null}return u}function _(h){var m=Math.round(Math.log(Math.abs(h))/Math.log(10));if(m<0){var u=Math.round(Math.pow(10,-m));return Math.ceil(h*u)/u}else if(m>0){var u=Math.round(Math.pow(10,m));return Math.ceil(h/u)*u}return Math.ceil(h)}function s(h){return typeof h=="boolean"?h:!0}function w(h){h=h||{},h.camera=h.camera||{};var m=h.canvas;if(!m)if(m=document.createElement("canvas"),h.container){var u=h.container;u.appendChild(m)}else document.body.appendChild(m);var L=h.gl;if(L||(h.glOptions&&(v=!!h.glOptions.preserveDrawingBuffer),L=l(m,h.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:v})),!L)throw new Error("webgl not supported");var S=h.bounds||[[-10,-10,-10],[10,10,10]],k=new x,P=f(L,L.drawingBufferWidth,L.drawingBufferHeight,{preferFloat:!v}),z=y(L),I=h.cameraObject&&h.cameraObject._ortho===!0||h.camera.projection&&h.camera.projection.type==="orthographic"||!1,D={eye:h.camera.eye||[2,0,0],center:h.camera.center||[0,0,0],up:h.camera.up||[0,1,0],zoomMin:h.camera.zoomMax||.1,zoomMax:h.camera.zoomMin||100,mode:h.camera.mode||"turntable",_ortho:I},R=h.axes||{},B=a(L,R);B.enable=!R.disable;var F=h.spikes||{},V=t(L,F),Y=[],K=[],J=[],G=[],Z=!0,re=!0,se=new Array(16),oe=new Array(16),N={view:null,projection:se,model:oe,_ortho:!1},re=!0,U=[L.drawingBufferWidth,L.drawingBufferHeight],q=h.cameraObject||e(m,D),Q={gl:L,contextLost:!1,pixelRatio:h.pixelRatio||1,canvas:m,selection:k,camera:q,axes:B,axesPixels:null,spikes:V,bounds:S,objects:Y,shape:U,aspect:h.aspectRatio||[1,1,1],pickRadius:h.pickRadius||10,zNear:h.zNear||.01,zFar:h.zFar||1e3,fovy:h.fovy||Math.PI/4,clearColor:h.clearColor||[0,0,0,0],autoResize:s(h.autoResize),autoBounds:s(h.autoBounds),autoScale:!!h.autoScale,autoCenter:s(h.autoCenter),clipToBounds:s(h.clipToBounds),snapToData:!!h.snapToData,onselect:h.onselect||null,onrender:h.onrender||null,onclick:h.onclick||null,cameraParams:N,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ge){this.aspect[0]=ge.x,this.aspect[1]=ge.y,this.aspect[2]=ge.z,re=!0},setBounds:function(ge,Te){this.bounds[0][ge]=Te.min,this.bounds[1][ge]=Te.max},setClearColor:function(ge){this.clearColor=ge},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},W=[L.drawingBufferWidth/Q.pixelRatio|0,L.drawingBufferHeight/Q.pixelRatio|0];function X(){if(!Q._stopped&&!!Q.autoResize){var ge=m.parentNode,Te=1,_e=1;ge&&ge!==document.body?(Te=ge.clientWidth,_e=ge.clientHeight):(Te=window.innerWidth,_e=window.innerHeight);var De=Math.ceil(Te*Q.pixelRatio)|0,Oe=Math.ceil(_e*Q.pixelRatio)|0;if(De!==m.width||Oe!==m.height){m.width=De,m.height=Oe;var Ue=m.style;Ue.position=Ue.position||"absolute",Ue.left="0px",Ue.top="0px",Ue.width=Te+"px",Ue.height=_e+"px",Z=!0}}}Q.autoResize&&X(),window.addEventListener("resize",X);function te(){for(var ge=Y.length,Te=G.length,_e=0;_e<Te;++_e)J[_e]=0;e:for(var _e=0;_e<ge;++_e){var De=Y[_e],Oe=De.pickSlots;if(!Oe){K[_e]=-1;continue}for(var Ue=0;Ue<Te;++Ue)if(J[Ue]+Oe<255){K[_e]=Ue,De.setPickBase(J[Ue]+1),J[Ue]+=Oe;continue e}var xe=r(L,U);K[_e]=Te,G.push(xe),J.push(Oe),De.setPickBase(1),Te+=1}for(;Te>0&&J[Te-1]===0;)J.pop(),G.pop().dispose()}Q.update=function(ge){Q._stopped||(Z=!0,re=!0)},Q.add=function(ge){Q._stopped||(ge.axes=B,Y.push(ge),K.push(-1),Z=!0,re=!0,te())},Q.remove=function(ge){if(!Q._stopped){var Te=Y.indexOf(ge);Te<0||(Y.splice(Te,1),K.pop(),Z=!0,re=!0,te())}},Q.dispose=function(){if(!Q._stopped&&(Q._stopped=!0,window.removeEventListener("resize",X),m.removeEventListener("webglcontextlost",ee),Q.mouseListener.enabled=!1,!Q.contextLost)){B.dispose(),V.dispose();for(var ge=0;ge<Y.length;++ge)Y[ge].dispose();P.dispose();for(var ge=0;ge<G.length;++ge)G[ge].dispose();z.dispose(),L=null,B=null,V=null,Y=[]}},Q._mouseRotating=!1,Q._prevButtons=0,Q.enableMouseListeners=function(){Q.mouseListener=i(m,function(ge,Te,_e){if(!Q._stopped){var De=G.length,Oe=Y.length,Ue=k.object;k.distance=1/0,k.mouse[0]=Te,k.mouse[1]=_e,k.object=null,k.screen=null,k.dataCoordinate=k.dataPosition=null;var xe=!1;if(ge&&Q._prevButtons)Q._mouseRotating=!0;else{Q._mouseRotating&&(re=!0),Q._mouseRotating=!1;for(var Pe=0;Pe<De;++Pe){var Ve=G[Pe].query(Te,W[1]-_e-1,Q.pickRadius);if(Ve){if(Ve.distance>k.distance)continue;for(var Qe=0;Qe<Oe;++Qe){var Fe=Y[Qe];if(K[Qe]===Pe){var Le=Fe.pick(Ve);Le&&(k.buttons=ge,k.screen=Ve.coord,k.distance=Ve.distance,k.object=Fe,k.index=Le.distance,k.dataPosition=Le.position,k.dataCoordinate=Le.dataCoordinate,k.data=Le,xe=!0)}}}}}Ue&&Ue!==k.object&&(Ue.highlight&&Ue.highlight(null),Z=!0),k.object&&(k.object.highlight&&k.object.highlight(k.data),Z=!0),xe=xe||k.object!==Ue,xe&&Q.onselect&&Q.onselect(k),ge&1&&!(Q._prevButtons&1)&&Q.onclick&&Q.onclick(k),Q._prevButtons=ge}})};function ee(){if(Q.contextLost)return!0;L.isContextLost()&&(Q.contextLost=!0,Q.mouseListener.enabled=!1,Q.selection.object=null,Q.oncontextloss&&Q.oncontextloss())}m.addEventListener("webglcontextlost",ee);function ie(){if(!ee()){L.colorMask(!0,!0,!0,!0),L.depthMask(!0),L.disable(L.BLEND),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL);for(var ge=Y.length,Te=G.length,_e=0;_e<Te;++_e){var De=G[_e];De.shape=W,De.begin();for(var Oe=0;Oe<ge;++Oe)if(K[Oe]===_e){var Ue=Y[Oe];Ue.drawPick&&(Ue.pixelRatio=1,Ue.drawPick(N))}De.end()}}}var le=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ye=[le[0].slice(),le[1].slice()];function ue(){if(!ee()){X();var ge=Q.camera.tick();N.view=Q.camera.matrix,Z=Z||ge,re=re||ge,B.pixelRatio=Q.pixelRatio,V.pixelRatio=Q.pixelRatio;var Te=Y.length,_e=le[0],De=le[1];_e[0]=_e[1]=_e[2]=1/0,De[0]=De[1]=De[2]=-1/0;for(var Oe=0;Oe<Te;++Oe){var Ue=Y[Oe];Ue.pixelRatio=Q.pixelRatio,Ue.axes=Q.axes,Z=Z||!!Ue.dirty,re=re||!!Ue.dirty;var xe=Ue.bounds;if(xe)for(var Pe=xe[0],Ve=xe[1],Qe=0;Qe<3;++Qe)_e[Qe]=Math.min(_e[Qe],Pe[Qe]),De[Qe]=Math.max(De[Qe],Ve[Qe])}var Fe=Q.bounds;if(Q.autoBounds)for(var Qe=0;Qe<3;++Qe){if(De[Qe]<_e[Qe])_e[Qe]=-1,De[Qe]=1;else{_e[Qe]===De[Qe]&&(_e[Qe]-=1,De[Qe]+=1);var Le=.05*(De[Qe]-_e[Qe]);_e[Qe]=_e[Qe]-Le,De[Qe]=De[Qe]+Le}Fe[0][Qe]=_e[Qe],Fe[1][Qe]=De[Qe]}for(var Ne=!1,Qe=0;Qe<3;++Qe)Ne=Ne||ye[0][Qe]!==Fe[0][Qe]||ye[1][Qe]!==Fe[1][Qe],ye[0][Qe]=Fe[0][Qe],ye[1][Qe]=Fe[1][Qe];if(re=re||Ne,Z=Z||Ne,!!Z){if(Ne){for(var dt=[0,0,0],Oe=0;Oe<3;++Oe)dt[Oe]=_((Fe[1][Oe]-Fe[0][Oe])/10);B.autoTicks?B.update({bounds:Fe,tickSpacing:dt}):B.update({bounds:Fe})}var Dt=L.drawingBufferWidth,Xt=L.drawingBufferHeight;U[0]=Dt,U[1]=Xt,W[0]=Math.max(Dt/Q.pixelRatio,1)|0,W[1]=Math.max(Xt/Q.pixelRatio,1)|0,b(Q,I);for(var Oe=0;Oe<Te;++Oe){var Ue=Y[Oe];Ue.axesBounds=Fe,Q.clipToBounds&&(Ue.clipBounds=Fe)}k.object&&(Q.snapToData?V.position=k.dataCoordinate:V.position=k.dataPosition,V.bounds=Fe),re&&(re=!1,ie()),Q.axesPixels=n(Q.axes,N,Dt,Xt),Q.onrender&&Q.onrender(),L.bindFramebuffer(L.FRAMEBUFFER,null),L.viewport(0,0,Dt,Xt),Q.clearRGBA(),L.depthMask(!0),L.colorMask(!0,!0,!0,!0),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL),L.disable(L.BLEND),L.disable(L.CULL_FACE);var Tt=!1;B.enable&&(Tt=Tt||B.isTransparent(),B.draw(N)),V.axes=B,k.object&&V.draw(N),L.disable(L.CULL_FACE);for(var Oe=0;Oe<Te;++Oe){var Ue=Y[Oe];Ue.axes=B,Ue.pixelRatio=Q.pixelRatio,Ue.isOpaque&&Ue.isOpaque()&&Ue.draw(N),Ue.isTransparent&&Ue.isTransparent()&&(Tt=!0)}if(Tt){P.shape=U,P.bind(),L.clear(L.DEPTH_BUFFER_BIT),L.colorMask(!1,!1,!1,!1),L.depthMask(!0),L.depthFunc(L.LESS),B.enable&&B.isTransparent()&&B.drawTransparent(N);for(var Oe=0;Oe<Te;++Oe){var Ue=Y[Oe];Ue.isOpaque&&Ue.isOpaque()&&Ue.draw(N)}L.enable(L.BLEND),L.blendEquation(L.FUNC_ADD),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.colorMask(!0,!0,!0,!0),L.depthMask(!1),L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT),B.isTransparent()&&B.drawTransparent(N);for(var Oe=0;Oe<Te;++Oe){var Ue=Y[Oe];Ue.isTransparent&&Ue.isTransparent()&&Ue.drawTransparent(N)}L.bindFramebuffer(L.FRAMEBUFFER,null),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.disable(L.DEPTH_TEST),z.bind(),P.color[0].bind(0),z.uniforms.accumBuffer=0,o(L),L.disable(L.BLEND)}Z=!1;for(var Oe=0;Oe<Te;++Oe)Y[Oe].dirty=!1}}}function pe(){Q._stopped||Q.contextLost||(ue(),requestAnimationFrame(pe))}return Q.enableMouseListeners(),pe(),Q.redraw=function(){Q._stopped||(Z=!0,ue())},Q}function b(h,m){var u=h.bounds,L=h.cameraParams,S=L.projection,k=L.model,P=h.gl.drawingBufferWidth,z=h.gl.drawingBufferHeight,I=h.zNear,D=h.zFar,R=h.fovy,B=P/z;m?(d(S,-B,B,-1,1,I,D),L._ortho=!0):(p(S,R,B,I,D),L._ortho=!1);for(var F=0;F<16;++F)k[F]=0;k[15]=1;for(var V=0,F=0;F<3;++F)V=Math.max(V,u[1][F]-u[0][F]);for(var F=0;F<3;++F)h.autoScale?k[5*F]=h.aspect[F]/(u[1][F]-u[0][F]):k[5*F]=1/V,h.autoCenter&&(k[12+F]=-k[5*F]*.5*(u[0][F]+u[1][F]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(c,M,A){var e=c("glslify");A.pointVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),A.pointFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),A.pickVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),A.pickFragment=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(c,M,A){var e=c("gl-shader"),a=c("gl-buffer"),n=c("typedarray-pool"),t=c("./lib/shader");M.exports=i;function r(p,d,y,v,x){this.plot=p,this.offsetBuffer=d,this.pickBuffer=y,this.shader=v,this.pickShader=x,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var f=r.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(p){var d;p=p||{};function y(b,h){return b in p?p[b]:h}this.sizeMin=y("sizeMin",.5),this.sizeMax=y("sizeMax",20),this.color=y("color",[1,0,0,1]).slice(),this.areaRatio=y("areaRatio",1),this.borderColor=y("borderColor",[0,0,0,1]).slice(),this.blend=y("blend",!1);var v=p.positions.length>>>1,x=p.positions instanceof Float32Array,l=p.idToIndex instanceof Int32Array&&p.idToIndex.length>=v,_=p.positions,s=x?_:n.mallocFloat32(_.length),w=l?p.idToIndex:n.mallocInt32(v);if(x||s.set(_),!l)for(s.set(_),d=0;d<v;d++)w[d]=d;this.points=_,this.offsetBuffer.update(s),this.pickBuffer.update(w),x||n.free(s),l||n.free(w),this.pointCount=v,this.pickOffset=0};function o(p,d){var y=0,v=p.length>>>1,x;for(x=0;x<v;x++){var l=p[x*2],_=p[x*2+1];l>=d[0]&&l<=d[2]&&_>=d[1]&&_<=d[3]&&y++}return y}f.unifiedDraw=function(){var p=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0];return function(y){var v=y!==void 0,x=v?this.pickShader:this.shader,l=this.plot.gl,_=this.plot.dataBox;if(this.pointCount===0)return y;var s=_[2]-_[0],w=_[3]-_[1],b=o(this.points,_),h=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(b,.33333)));p[0]=2/s,p[4]=2/w,p[6]=-2*_[0]/s-1,p[7]=-2*_[1]/w-1,this.offsetBuffer.bind(),x.bind(),x.attributes.position.pointer(),x.uniforms.matrix=p,x.uniforms.color=this.color,x.uniforms.borderColor=this.borderColor,x.uniforms.pointCloud=h<5,x.uniforms.pointSize=h,x.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),v&&(d[0]=y&255,d[1]=y>>8&255,d[2]=y>>16&255,d[3]=y>>24&255,this.pickBuffer.bind(),x.attributes.pickId.pointer(l.UNSIGNED_BYTE),x.uniforms.pickOffset=d,this.pickOffset=y);var m=l.getParameter(l.BLEND),u=l.getParameter(l.DITHER);return m&&!this.blend&&l.disable(l.BLEND),u&&l.disable(l.DITHER),l.drawArrays(l.POINTS,0,this.pointCount),m&&!this.blend&&l.enable(l.BLEND),u&&l.enable(l.DITHER),y+this.pointCount}}(),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(p,d,y){var v=this.pickOffset,x=this.pointCount;if(y<v||y>=v+x)return null;var l=y-v,_=this.points;return{object:this,pointId:l,dataCoord:[_[2*l],_[2*l+1]]}};function i(p,d){var y=p.gl,v=a(y),x=a(y),l=e(y,t.pointVertex,t.pointFragment),_=e(y,t.pickVertex,t.pickFragment),s=new r(p,v,x,l,_);return s.update(d),p.addObject(s),s}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(c,M,A){M.exports=e;function e(a,n,t,r){var f=n[0],o=n[1],i=n[2],p=n[3],d=t[0],y=t[1],v=t[2],x=t[3],l,_,s,w,b;return _=f*d+o*y+i*v+p*x,_<0&&(_=-_,d=-d,y=-y,v=-v,x=-x),1-_>1e-6?(l=Math.acos(_),s=Math.sin(l),w=Math.sin((1-r)*l)/s,b=Math.sin(r*l)/s):(w=1-r,b=r),a[0]=w*f+b*d,a[1]=w*o+b*y,a[2]=w*i+b*v,a[3]=w*p+b*x,a}},{}],125:[function(c,M,A){M.exports=function(e){return!e&&e!==0?"":e.toString()}},{}],126:[function(c,M,A){var e=c("vectorize-text");M.exports=n;var a={};function n(t,r,f){var o=a[r];if(o||(o=a[r]={}),t in o)return o[t];var i={textAlign:"center",textBaseline:"middle",lineHeight:1,font:r,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};i.triangles=!0;var p=e(t,i);i.triangles=!1;var d=e(t,i),y,v;if(f&&f!==1){for(y=0;y<p.positions.length;++y)for(v=0;v<p.positions[y].length;++v)p.positions[y][v]/=f;for(y=0;y<d.positions.length;++y)for(v=0;v<d.positions[y].length;++v)d.positions[y][v]/=f}var x=[[1/0,1/0],[-1/0,-1/0]],l=d.positions.length;for(y=0;y<l;++y){var _=d.positions[y];for(v=0;v<2;++v)x[0][v]=Math.min(x[0][v],_[v]),x[1][v]=Math.max(x[1][v],_[v])}return o[t]=[p,d,x]}},{"vectorize-text":311}],127:[function(c,M,A){var e=c("gl-shader"),a=c("glslify"),n=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),t=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),f=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),o=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),i=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],p={vertex:n,fragment:f,attributes:i},d={vertex:t,fragment:f,attributes:i},y={vertex:r,fragment:f,attributes:i},v={vertex:n,fragment:o,attributes:i},x={vertex:t,fragment:o,attributes:i},l={vertex:r,fragment:o,attributes:i};function _(s,w){var b=e(s,w),h=b.attributes;return h.position.location=0,h.color.location=1,h.glyph.location=2,h.id.location=3,b}A.createPerspective=function(s){return _(s,p)},A.createOrtho=function(s){return _(s,d)},A.createProject=function(s){return _(s,y)},A.createPickPerspective=function(s){return _(s,v)},A.createPickOrtho=function(s){return _(s,x)},A.createPickProject=function(s){return _(s,l)}},{"gl-shader":132,glslify:231}],128:[function(c,M,A){var e=c("is-string-blank"),a=c("gl-buffer"),n=c("gl-vao"),t=c("typedarray-pool"),r=c("gl-mat4/multiply"),f=c("./lib/shaders"),o=c("./lib/glyphs"),i=c("./lib/get-simple-string"),p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];M.exports=K;function d(J,G){var Z=J[0],re=J[1],se=J[2],oe=J[3];return J[0]=G[0]*Z+G[4]*re+G[8]*se+G[12]*oe,J[1]=G[1]*Z+G[5]*re+G[9]*se+G[13]*oe,J[2]=G[2]*Z+G[6]*re+G[10]*se+G[14]*oe,J[3]=G[3]*Z+G[7]*re+G[11]*se+G[15]*oe,J}function y(J,G,Z,re){return d(re,re),d(re,re),d(re,re)}function v(J,G){this.index=J,this.dataCoordinate=this.position=G}function x(J){return J===!0||J>1?1:J}function l(J,G,Z,re,se,oe,N,U,q,Q,W,X){this.gl=J,this.pixelRatio=1,this.shader=G,this.orthoShader=Z,this.projectShader=re,this.pointBuffer=se,this.colorBuffer=oe,this.glyphBuffer=N,this.idBuffer=U,this.vao=q,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=Q,this.pickOrthoShader=W,this.pickProjectShader=X,this.points=[],this._selectResult=new v(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var _=l.prototype;_.pickSlots=1,_.setPickBase=function(J){this.pickId=J},_.isTransparent=function(){if(this.hasAlpha)return!0;for(var J=0;J<3;++J)if(this.axesProject[J]&&this.projectHasAlpha)return!0;return!1},_.isOpaque=function(){if(!this.hasAlpha)return!0;for(var J=0;J<3;++J)if(this.axesProject[J]&&!this.projectHasAlpha)return!0;return!1};var s=[0,0],w=[0,0,0],b=[0,0,0],h=[0,0,0,1],m=[0,0,0,1],u=p.slice(),L=[0,0,0],S=[[0,0,0],[0,0,0]];function k(J){return J[0]=J[1]=J[2]=0,J}function P(J,G){return J[0]=G[0],J[1]=G[1],J[2]=G[2],J[3]=1,J}function z(J,G,Z,re){return J[0]=G[0],J[1]=G[1],J[2]=G[2],J[Z]=re,J}function I(J){for(var G=S,Z=0;Z<2;++Z)for(var re=0;re<3;++re)G[Z][re]=Math.max(Math.min(J[Z][re],1e8),-1e8);return G}function D(J,G,Z,re){var se=G.axesProject,oe=G.gl,N=J.uniforms,U=Z.model||p,q=Z.view||p,Q=Z.projection||p,W=G.axesBounds,X=I(G.clipBounds),te;G.axes&&G.axes.lastCubeProps?te=G.axes.lastCubeProps.axis:te=[1,1,1],s[0]=2/oe.drawingBufferWidth,s[1]=2/oe.drawingBufferHeight,J.bind(),N.view=q,N.projection=Q,N.screenSize=s,N.highlightId=G.highlightId,N.highlightScale=G.highlightScale,N.clipBounds=X,N.pickGroup=G.pickId/255,N.pixelRatio=re;for(var ee=0;ee<3;++ee)if(!!se[ee]){N.scale=G.projectScale[ee],N.opacity=G.projectOpacity[ee];for(var ie=u,le=0;le<16;++le)ie[le]=0;for(var le=0;le<4;++le)ie[5*le]=1;ie[5*ee]=0,te[ee]<0?ie[12+ee]=W[0][ee]:ie[12+ee]=W[1][ee],r(ie,U,ie),N.model=ie;var ye=(ee+1)%3,ue=(ee+2)%3,pe=k(w),ge=k(b);pe[ye]=1,ge[ue]=1;var Te=y(Q,q,U,P(h,pe)),_e=y(Q,q,U,P(m,ge));if(Math.abs(Te[1])>Math.abs(_e[1])){var De=Te;Te=_e,_e=De,De=pe,pe=ge,ge=De;var Oe=ye;ye=ue,ue=Oe}Te[0]<0&&(pe[ye]=-1),_e[1]>0&&(ge[ue]=-1);for(var Ue=0,xe=0,le=0;le<4;++le)Ue+=Math.pow(U[4*ye+le],2),xe+=Math.pow(U[4*ue+le],2);pe[ye]/=Math.sqrt(Ue),ge[ue]/=Math.sqrt(xe),N.axes[0]=pe,N.axes[1]=ge,N.fragClipBounds[0]=z(L,X[0],ee,-1e8),N.fragClipBounds[1]=z(L,X[1],ee,1e8),G.vao.bind(),G.vao.draw(oe.TRIANGLES,G.vertexCount),G.lineWidth>0&&(oe.lineWidth(G.lineWidth*re),G.vao.draw(oe.LINES,G.lineVertexCount,G.vertexCount)),G.vao.unbind()}}var R=[-1e8,-1e8,-1e8],B=[1e8,1e8,1e8],F=[R,B];function V(J,G,Z,re,se,oe,N){var U=Z.gl;if((oe===Z.projectHasAlpha||N)&&D(G,Z,re,se),oe===Z.hasAlpha||N){J.bind();var q=J.uniforms;q.model=re.model||p,q.view=re.view||p,q.projection=re.projection||p,s[0]=2/U.drawingBufferWidth,s[1]=2/U.drawingBufferHeight,q.screenSize=s,q.highlightId=Z.highlightId,q.highlightScale=Z.highlightScale,q.fragClipBounds=F,q.clipBounds=Z.axes.bounds,q.opacity=Z.opacity,q.pickGroup=Z.pickId/255,q.pixelRatio=se,Z.vao.bind(),Z.vao.draw(U.TRIANGLES,Z.vertexCount),Z.lineWidth>0&&(U.lineWidth(Z.lineWidth*se),Z.vao.draw(U.LINES,Z.lineVertexCount,Z.vertexCount)),Z.vao.unbind()}}_.draw=function(J){var G=this.useOrtho?this.orthoShader:this.shader;V(G,this.projectShader,this,J,this.pixelRatio,!1,!1)},_.drawTransparent=function(J){var G=this.useOrtho?this.orthoShader:this.shader;V(G,this.projectShader,this,J,this.pixelRatio,!0,!1)},_.drawPick=function(J){var G=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;V(G,this.pickProjectShader,this,J,1,!0,!0)},_.pick=function(J){if(!J||J.id!==this.pickId)return null;var G=J.value[2]+(J.value[1]<<8)+(J.value[0]<<16);if(G>=this.pointCount||G<0)return null;var Z=this.points[G],re=this._selectResult;re.index=G;for(var se=0;se<3;++se)re.position[se]=re.dataCoordinate[se]=Z[se];return re},_.highlight=function(J){if(!J)this.highlightId=[1,1,1,1];else{var G=J.index,Z=G&255,re=G>>8&255,se=G>>16&255;this.highlightId=[Z/255,re/255,se/255,0]}};function Y(J,G,Z,re){var se;Array.isArray(J)?G<J.length?se=J[G]:se=void 0:se=J,se=i(se);var oe=!0;e(se)&&(se="\u25BC",oe=!1);var N=o(se,Z,re);return{mesh:N[0],lines:N[1],bounds:N[2],visible:oe}}_.update=function(J){if(J=J||{},"perspective"in J&&(this.useOrtho=!J.perspective),"orthographic"in J&&(this.useOrtho=!!J.orthographic),"lineWidth"in J&&(this.lineWidth=J.lineWidth),"project"in J)if(Array.isArray(J.project))this.axesProject=J.project;else{var G=!!J.project;this.axesProject=[G,G,G]}if("projectScale"in J)if(Array.isArray(J.projectScale))this.projectScale=J.projectScale.slice();else{var Z=+J.projectScale;this.projectScale=[Z,Z,Z]}if(this.projectHasAlpha=!1,"projectOpacity"in J){if(Array.isArray(J.projectOpacity))this.projectOpacity=J.projectOpacity.slice();else{var Z=+J.projectOpacity;this.projectOpacity=[Z,Z,Z]}for(var re=0;re<3;++re)this.projectOpacity[re]=x(this.projectOpacity[re]),this.projectOpacity[re]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in J&&(this.opacity=x(J.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var se=J.position,oe=J.font||"normal",N=J.alignment||[0,0],U,q;if(N.length===2)U=N[0],q=N[1];else{U=[],q=[];for(var re=0;re<N.length;++re)U[re]=N[re][0],q[re]=N[re][1]}var Q=[1/0,1/0,1/0],W=[-1/0,-1/0,-1/0],X=J.glyph,te=J.color,ee=J.size,ie=J.angle,le=J.lineColor,ye=-1,ue=0,pe=0,ge=0;if(se.length){ge=se.length;e:for(var re=0;re<ge;++re){for(var Te=se[re],_e=0;_e<3;++_e)if(isNaN(Te[_e])||!isFinite(Te[_e]))continue e;var De=Y(X,re,oe,this.pixelRatio),Oe=De.mesh,Ue=De.lines,xe=De.bounds;ue+=Oe.cells.length*3,pe+=Ue.edges.length*2}}var Pe=ue+pe,Ve=t.mallocFloat(3*Pe),Qe=t.mallocFloat(4*Pe),Fe=t.mallocFloat(2*Pe),Le=t.mallocUint32(Pe);if(Pe>0){var Ne=0,dt=ue,Dt=[0,0,0,1],Xt=[0,0,0,1],Tt=Array.isArray(te)&&Array.isArray(te[0]),zt=Array.isArray(le)&&Array.isArray(le[0]);e:for(var re=0;re<ge;++re){ye+=1;for(var Te=se[re],_e=0;_e<3;++_e){if(isNaN(Te[_e])||!isFinite(Te[_e]))continue e;W[_e]=Math.max(W[_e],Te[_e]),Q[_e]=Math.min(Q[_e],Te[_e])}var De=Y(X,re,oe,this.pixelRatio),Oe=De.mesh,Ue=De.lines,xe=De.bounds,Ut=De.visible;if(!Ut)Dt=[1,1,1,0];else if(Array.isArray(te)){var Et;if(Tt?re<te.length?Et=te[re]:Et=[0,0,0,0]:Et=te,Et.length===3){for(var _e=0;_e<3;++_e)Dt[_e]=Et[_e];Dt[3]=1}else if(Et.length===4){for(var _e=0;_e<4;++_e)Dt[_e]=Et[_e];!this.hasAlpha&&Et[3]<1&&(this.hasAlpha=!0)}}else Dt[0]=Dt[1]=Dt[2]=0,Dt[3]=1;if(!Ut)Xt=[1,1,1,0];else if(Array.isArray(le)){var Et;if(zt?re<le.length?Et=le[re]:Et=[0,0,0,0]:Et=le,Et.length===3){for(var _e=0;_e<3;++_e)Xt[_e]=Et[_e];Xt[_e]=1}else if(Et.length===4){for(var _e=0;_e<4;++_e)Xt[_e]=Et[_e];!this.hasAlpha&&Et[3]<1&&(this.hasAlpha=!0)}}else Xt[0]=Xt[1]=Xt[2]=0,Xt[3]=1;var Mt=.5;Ut?Array.isArray(ee)?re<ee.length?Mt=+ee[re]:Mt=12:ee?Mt=+ee:this.useOrtho&&(Mt=12):Mt=0;var rt=0;Array.isArray(ie)?re<ie.length?rt=+ie[re]:rt=0:ie&&(rt=+ie);for(var ct=Math.cos(rt),Ze=Math.sin(rt),Te=se[re],_e=0;_e<3;++_e)W[_e]=Math.max(W[_e],Te[_e]),Q[_e]=Math.min(Q[_e],Te[_e]);var ke=U,Ge=q,ke=0;Array.isArray(U)?re<U.length?ke=U[re]:ke=0:U&&(ke=U);var Ge=0;Array.isArray(q)?re<q.length?Ge=q[re]:Ge=0:q&&(Ge=q),ke*=ke>0?1-xe[0][0]:ke<0?1+xe[1][0]:1,Ge*=Ge>0?1-xe[0][1]:Ge<0?1+xe[1][1]:1;for(var Je=[ke,Ge],it=Oe.cells||[],Pt=Oe.positions||[],_e=0;_e<it.length;++_e)for(var At=it[_e],Ot=0;Ot<3;++Ot){for(var Jt=0;Jt<3;++Jt)Ve[3*Ne+Jt]=Te[Jt];for(var Jt=0;Jt<4;++Jt)Qe[4*Ne+Jt]=Dt[Jt];Le[Ne]=ye;var Bt=Pt[At[Ot]];Fe[2*Ne]=Mt*(ct*Bt[0]-Ze*Bt[1]+Je[0]),Fe[2*Ne+1]=Mt*(Ze*Bt[0]+ct*Bt[1]+Je[1]),Ne+=1}for(var it=Ue.edges,Pt=Ue.positions,_e=0;_e<it.length;++_e)for(var At=it[_e],Ot=0;Ot<2;++Ot){for(var Jt=0;Jt<3;++Jt)Ve[3*dt+Jt]=Te[Jt];for(var Jt=0;Jt<4;++Jt)Qe[4*dt+Jt]=Xt[Jt];Le[dt]=ye;var Bt=Pt[At[Ot]];Fe[2*dt]=Mt*(ct*Bt[0]-Ze*Bt[1]+Je[0]),Fe[2*dt+1]=Mt*(Ze*Bt[0]+ct*Bt[1]+Je[1]),dt+=1}}}this.bounds=[Q,W],this.points=se,this.pointCount=se.length,this.vertexCount=ue,this.lineVertexCount=pe,this.pointBuffer.update(Ve),this.colorBuffer.update(Qe),this.glyphBuffer.update(Fe),this.idBuffer.update(Le),t.free(Ve),t.free(Qe),t.free(Fe),t.free(Le)},_.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function K(J){var G=J.gl,Z=f.createPerspective(G),re=f.createOrtho(G),se=f.createProject(G),oe=f.createPickPerspective(G),N=f.createPickOrtho(G),U=f.createPickProject(G),q=a(G),Q=a(G),W=a(G),X=a(G),te=n(G,[{buffer:q,size:3,type:G.FLOAT},{buffer:Q,size:4,type:G.FLOAT},{buffer:W,size:2,type:G.FLOAT},{buffer:X,size:4,type:G.UNSIGNED_BYTE,normalized:!0}]),ee=new l(G,Z,re,se,q,Q,W,X,te,oe,N,U);return ee.update(J),ee}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(c,M,A){var e=c("glslify");A.boxVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),A.boxFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(c,M,A){var e=c("gl-shader"),a=c("gl-buffer"),n=c("./lib/shaders");M.exports=f;function t(o,i,p){this.plot=o,this.boxBuffer=i,this.boxShader=p,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var r=t.prototype;r.draw=function(){if(!!this.enabled){var o=this.plot,i=this.selectBox,p=this.borderWidth;this.innerFill;var d=this.innerColor;this.outerFill;var y=this.outerColor,v=this.borderColor,x=o.box,l=o.screenBox,_=o.dataBox,s=o.viewBox,w=o.pixelRatio,b=(i[0]-_[0])*(s[2]-s[0])/(_[2]-_[0])+s[0],h=(i[1]-_[1])*(s[3]-s[1])/(_[3]-_[1])+s[1],m=(i[2]-_[0])*(s[2]-s[0])/(_[2]-_[0])+s[0],u=(i[3]-_[1])*(s[3]-s[1])/(_[3]-_[1])+s[1];if(b=Math.max(b,s[0]),h=Math.max(h,s[1]),m=Math.min(m,s[2]),u=Math.min(u,s[3]),!(m<b||u<h)){x.bind();var L=l[2]-l[0],S=l[3]-l[1];if(this.outerFill&&(x.drawBox(0,0,L,h,y),x.drawBox(0,h,b,u,y),x.drawBox(0,u,L,S,y),x.drawBox(m,h,L,u,y)),this.innerFill&&x.drawBox(b,h,m,u,d),p>0){var k=p*w;x.drawBox(b-k,h-k,m+k,h+k,v),x.drawBox(b-k,u-k,m+k,u+k,v),x.drawBox(b-k,h-k,b+k,u+k,v),x.drawBox(m-k,h-k,m+k,u+k,v)}}}},r.update=function(o){o=o||{},this.innerFill=!!o.innerFill,this.outerFill=!!o.outerFill,this.innerColor=(o.innerColor||[0,0,0,.5]).slice(),this.outerColor=(o.outerColor||[0,0,0,.5]).slice(),this.borderColor=(o.borderColor||[0,0,0,1]).slice(),this.borderWidth=o.borderWidth||0,this.selectBox=(o.selectBox||this.selectBox).slice()},r.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function f(o,i){var p=o.gl,d=a(p,[0,0,0,1,1,0,1,1]),y=e(p,n.boxVertex,n.boxFragment),v=new t(o,d,y);return v.update(i),o.addOverlay(v),v}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(c,M,A){M.exports=p;var e=c("gl-fbo"),a=c("typedarray-pool"),n=c("ndarray"),t=c("bit-twiddle").nextPow2,r=function(d,y,v){for(var x=1e8,l=-1,_=-1,s=d.shape[0],w=d.shape[1],b=0;b<s;b++)for(var h=0;h<w;h++){var m=d.get(b,h,0),u=d.get(b,h,1),L=d.get(b,h,2),S=d.get(b,h,3);if(m<255||u<255||L<255||S<255){var k=y-b,P=v-h,z=k*k+P*P;z<x&&(x=z,l=b,_=h)}}return[l,_,x]};function f(d,y,v,x,l){this.coord=[d,y],this.id=v,this.value=x,this.distance=l}function o(d,y,v){this.gl=d,this.fbo=y,this.buffer=v,this._readTimeout=null;var x=this;this._readCallback=function(){!x.gl||(y.bind(),d.readPixels(0,0,y.shape[0],y.shape[1],d.RGBA,d.UNSIGNED_BYTE,x.buffer),x._readTimeout=null)}}var i=o.prototype;Object.defineProperty(i,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(d){if(!!this.gl){this.fbo.shape=d;var y=this.fbo.shape[0],v=this.fbo.shape[1];if(v*y*4>this.buffer.length){a.free(this.buffer);for(var x=this.buffer=a.mallocUint8(t(v*y*4)),l=0;l<v*y*4;++l)x[l]=255}return d}}}),i.begin=function(){var d=this.gl;this.shape,!!d&&(this.fbo.bind(),d.clearColor(1,1,1,1),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT))},i.end=function(){var d=this.gl;!d||(d.bindFramebuffer(d.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},i.query=function(d,y,v){if(!this.gl)return null;var x=this.fbo.shape.slice();d=d|0,y=y|0,typeof v!="number"&&(v=1);var l=Math.min(Math.max(d-v,0),x[0])|0,_=Math.min(Math.max(d+v,0),x[0])|0,s=Math.min(Math.max(y-v,0),x[1])|0,w=Math.min(Math.max(y+v,0),x[1])|0;if(_<=l||w<=s)return null;var b=[_-l,w-s],h=n(this.buffer,[b[0],b[1],4],[4,x[0]*4,1],4*(l+x[0]*s)),m=r(h.hi(b[0],b[1],1),v,v),u=m[0],L=m[1];if(u<0||Math.pow(this.radius,2)<m[2])return null;var S=h.get(u,L,0),k=h.get(u,L,1),P=h.get(u,L,2),z=h.get(u,L,3);return new f(u+l|0,L+s|0,S,[k,P,z],Math.sqrt(m[2]))},i.dispose=function(){!this.gl||(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function p(d,y){var v=y[0],x=y[1],l={},_=e(d,v,x,l),s=a.mallocUint8(v*x*4);return new o(d,_,s)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(c,M,A){var e=c("./lib/create-uniforms"),a=c("./lib/create-attributes"),n=c("./lib/reflect"),t=c("./lib/shader-cache"),r=c("./lib/runtime-reflect"),f=c("./lib/GLError");function o(y){this.gl=y,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var i=o.prototype;i.bind=function(){this.program||this._relink();var y,v=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),x=this.gl.lastAttribCount;if(v>x)for(y=x;y<v;y++)this.gl.enableVertexAttribArray(y);else if(x>v)for(y=v;y<x;y++)this.gl.disableVertexAttribArray(y);this.gl.lastAttribCount=v,this.gl.useProgram(this.program)},i.dispose=function(){for(var y=this.gl.lastAttribCount,v=0;v<y;v++)this.gl.disableVertexAttribArray(v);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function p(y,v){return y.name<v.name?-1:1}i.update=function(y,v,x,l){if(!v||arguments.length===1){var _=y;y=_.vertex,v=_.fragment,x=_.uniforms,l=_.attributes}var s=this,w=s.gl,b=s._vref;s._vref=t.shader(w,w.VERTEX_SHADER,y),b&&b.dispose(),s.vertShader=s._vref.shader;var h=this._fref;if(s._fref=t.shader(w,w.FRAGMENT_SHADER,v),h&&h.dispose(),s.fragShader=s._fref.shader,!x||!l){var m=w.createProgram();if(w.attachShader(m,s.fragShader),w.attachShader(m,s.vertShader),w.linkProgram(m),!w.getProgramParameter(m,w.LINK_STATUS)){var u=w.getProgramInfoLog(m);throw new f(u,"Error linking program:"+u)}x=x||r.uniforms(w,m),l=l||r.attributes(w,m),w.deleteProgram(m)}l=l.slice(),l.sort(p);var L=[],S=[],k=[],P;for(P=0;P<l.length;++P){var z=l[P];if(z.type.indexOf("mat")>=0){for(var I=z.type.charAt(z.type.length-1)|0,D=new Array(I),R=0;R<I;++R)D[R]=k.length,S.push(z.name+"["+R+"]"),typeof z.location=="number"?k.push(z.location+R):Array.isArray(z.location)&&z.location.length===I&&typeof z.location[R]=="number"?k.push(z.location[R]|0):k.push(-1);L.push({name:z.name,type:z.type,locations:D})}else L.push({name:z.name,type:z.type,locations:[k.length]}),S.push(z.name),typeof z.location=="number"?k.push(z.location|0):k.push(-1)}var B=0;for(P=0;P<k.length;++P)if(k[P]<0){for(;k.indexOf(B)>=0;)B+=1;k[P]=B}var F=new Array(x.length);function V(){s.program=t.program(w,s._vref,s._fref,S,k);for(var Y=0;Y<x.length;++Y)F[Y]=w.getUniformLocation(s.program,x[Y].name)}V(),s._relink=V,s.types={uniforms:n(x),attributes:n(l)},s.attributes=a(w,s,L,k),Object.defineProperty(s,"uniforms",e(w,s,x,F))};function d(y,v,x,l,_){var s=new o(y);return s.update(v,x,l,_),s}M.exports=d},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(c,M,A){function e(a,n,t){this.shortMessage=n||"",this.longMessage=t||"",this.rawError=a||"",this.message="gl-shader: "+(n||a||"")+(t?`
`+t:""),this.stack=new Error().stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,M.exports=e},{}],134:[function(c,M,A){M.exports=o;var e=c("./GLError");function a(i,p,d,y,v,x){this._gl=i,this._wrapper=p,this._index=d,this._locations=y,this._dimension=v,this._constFunc=x}var n=a.prototype;n.pointer=function(p,d,y,v){var x=this,l=x._gl,_=x._locations[x._index];l.vertexAttribPointer(_,x._dimension,p||l.FLOAT,!!d,y||0,v||0),l.enableVertexAttribArray(_)},n.set=function(i,p,d,y){return this._constFunc(this._locations[this._index],i,p,d,y)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(i){return i!==this._locations[this._index]&&(this._locations[this._index]=i|0,this._wrapper.program=null),i|0}});var t=[function(i,p,d){return d.length===void 0?i.vertexAttrib1f(p,d):i.vertexAttrib1fv(p,d)},function(i,p,d,y){return d.length===void 0?i.vertexAttrib2f(p,d,y):i.vertexAttrib2fv(p,d)},function(i,p,d,y,v){return d.length===void 0?i.vertexAttrib3f(p,d,y,v):i.vertexAttrib3fv(p,d)},function(i,p,d,y,v,x){return d.length===void 0?i.vertexAttrib4f(p,d,y,v,x):i.vertexAttrib4fv(p,d)}];function r(i,p,d,y,v,x,l){var _=t[v],s=new a(i,p,d,y,v,_);Object.defineProperty(x,l,{set:function(w){return i.disableVertexAttribArray(y[d]),_(i,y[d],w),w},get:function(){return s},enumerable:!0})}function f(i,p,d,y,v,x,l){for(var _=new Array(v),s=new Array(v),w=0;w<v;++w)r(i,p,d[w],y,v,_,w),s[w]=_[w];Object.defineProperty(_,"location",{set:function(m){if(Array.isArray(m))for(var u=0;u<v;++u)s[u].location=m[u];else for(var u=0;u<v;++u)s[u].location=m+u;return m},get:function(){for(var m=new Array(v),u=0;u<v;++u)m[u]=y[d[u]];return m},enumerable:!0}),_.pointer=function(m,u,L,S){m=m||i.FLOAT,u=!!u,L=L||v*v,S=S||0;for(var k=0;k<v;++k){var P=y[d[k]];i.vertexAttribPointer(P,v,m,u,L,S+k*v),i.enableVertexAttribArray(P)}};var b=new Array(v),h=i["vertexAttrib"+v+"fv"];Object.defineProperty(x,l,{set:function(m){for(var u=0;u<v;++u){var L=y[d[u]];if(i.disableVertexAttribArray(L),Array.isArray(m[0]))h.call(i,L,m[u]);else{for(var S=0;S<v;++S)b[S]=m[v*u+S];h.call(i,L,b)}}return m},get:function(){return _},enumerable:!0})}function o(i,p,d,y){for(var v={},x=0,l=d.length;x<l;++x){var _=d[x],s=_.name,w=_.type,b=_.locations;switch(w){case"bool":case"int":case"float":r(i,p,b[0],y,1,v,s);break;default:if(w.indexOf("vec")>=0){var h=w.charCodeAt(w.length-1)-48;if(h<2||h>4)throw new e("","Invalid data type for attribute "+s+": "+w);r(i,p,b[0],y,h,v,s)}else if(w.indexOf("mat")>=0){var h=w.charCodeAt(w.length-1)-48;if(h<2||h>4)throw new e("","Invalid data type for attribute "+s+": "+w);f(i,p,b,y,h,v,s)}else throw new e("","Unknown data type for attribute "+s+": "+w);break}}return v}},{"./GLError":133}],135:[function(c,M,A){var e=c("./reflect"),a=c("./GLError");M.exports=r;function n(f){return function(){return f}}function t(f,o){for(var i=new Array(f),p=0;p<f;++p)i[p]=o;return i}function r(f,o,i,p){function d(w){return function(b,h,m){return b.getUniform(h.program,m[w])}}function y(w){return function(h){for(var m=v("",w),u=0;u<m.length;++u){var L=m[u],S=L[0],k=L[1];if(p[k]){var P=h;if(typeof S=="string"&&(S.indexOf(".")===0||S.indexOf("[")===0)){var z=S;if(S.indexOf(".")===0&&(z=S.slice(1)),z.indexOf("]")===z.length-1){var I=z.indexOf("["),D=z.slice(0,I),R=z.slice(I+1,z.length-1);P=D?h[D][R]:h[R]}else P=h[z]}var B=i[k].type,F;switch(B){case"bool":case"int":case"sampler2D":case"samplerCube":f.uniform1i(p[k],P);break;case"float":f.uniform1f(p[k],P);break;default:var V=B.indexOf("vec");if(0<=V&&V<=1&&B.length===4+V){if(F=B.charCodeAt(B.length-1)-48,F<2||F>4)throw new a("","Invalid data type");switch(B.charAt(0)){case"b":case"i":f["uniform"+F+"iv"](p[k],P);break;case"v":f["uniform"+F+"fv"](p[k],P);break;default:throw new a("","Unrecognized data type for vector "+name+": "+B)}}else if(B.indexOf("mat")===0&&B.length===4){if(F=B.charCodeAt(B.length-1)-48,F<2||F>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+B);f["uniformMatrix"+F+"fv"](p[k],!1,P);break}else throw new a("","Unknown uniform data type for "+name+": "+B)}}}}}function v(w,b){if(typeof b!="object")return[[w,b]];var h=[];for(var m in b){var u=b[m],L=w;parseInt(m)+""===m?L+="["+m+"]":L+="."+m,typeof u=="object"?h.push.apply(h,v(L,u)):h.push([L,u])}return h}function x(w){switch(w){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var b=w.indexOf("vec");if(0<=b&&b<=1&&w.length===4+b){var h=w.charCodeAt(w.length-1)-48;if(h<2||h>4)throw new a("","Invalid data type");return w.charAt(0)==="b"?t(h,!1):t(h,0)}else if(w.indexOf("mat")===0&&w.length===4){var h=w.charCodeAt(w.length-1)-48;if(h<2||h>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+w);return t(h*h,0)}else throw new a("","Unknown uniform data type for "+name+": "+w)}}function l(w,b,h){if(typeof h=="object"){var m=_(h);Object.defineProperty(w,b,{get:n(m),set:y(h),enumerable:!0,configurable:!1})}else p[h]?Object.defineProperty(w,b,{get:d(h),set:y(h),enumerable:!0,configurable:!1}):w[b]=x(i[h].type)}function _(w){var b;if(Array.isArray(w)){b=new Array(w.length);for(var h=0;h<w.length;++h)l(b,h,w[h])}else{b={};for(var m in w)l(b,m,w[m])}return b}var s=e(i,!0);return{get:n(_(s)),set:y(s),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(c,M,A){M.exports=e;function e(a,n){for(var t={},r=0;r<a.length;++r)for(var f=a[r].name,o=f.split("."),i=t,p=0;p<o.length;++p){var d=o[p].split("[");if(d.length>1){d[0]in i||(i[d[0]]=[]),i=i[d[0]];for(var y=1;y<d.length;++y){var v=parseInt(d[y]);y<d.length-1||p<o.length-1?(v in i||(y<d.length-1?i[v]=[]:i[v]={}),i=i[v]):n?i[v]=r:i[v]=a[r].type}}else p<o.length-1?(d[0]in i||(i[d[0]]={}),i=i[d[0]]):n?i[d[0]]=r:i[d[0]]=a[r].type}return t}},{}],137:[function(c,M,A){A.uniforms=t,A.attributes=r;var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function n(f,o){if(!a){var i=Object.keys(e);a={};for(var p=0;p<i.length;++p){var d=i[p];a[f[d]]=e[d]}}return a[o]}function t(f,o){for(var i=f.getProgramParameter(o,f.ACTIVE_UNIFORMS),p=[],d=0;d<i;++d){var y=f.getActiveUniform(o,d);if(y){var v=n(f,y.type);if(y.size>1)for(var x=0;x<y.size;++x)p.push({name:y.name.replace("[0]","["+x+"]"),type:v});else p.push({name:y.name,type:v})}}return p}function r(f,o){for(var i=f.getProgramParameter(o,f.ACTIVE_ATTRIBUTES),p=[],d=0;d<i;++d){var y=f.getActiveAttrib(o,d);y&&p.push({name:y.name,type:n(f,y.type)})}return p}},{}],138:[function(c,M,A){A.shader=v,A.program=x;var e=c("./GLError"),a=c("gl-format-compiler-error"),n=typeof WeakMap=="undefined"?c("weakmap-shim"):WeakMap,t=new n,r=0;function f(l,_,s,w,b,h,m){this.id=l,this.src=_,this.type=s,this.shader=w,this.count=h,this.programs=[],this.cache=m}f.prototype.dispose=function(){if(--this.count==0){for(var l=this.cache,_=l.gl,s=this.programs,w=0,b=s.length;w<b;++w){var h=l.programs[s[w]];h&&(delete l.programs[w],_.deleteProgram(h))}_.deleteShader(this.shader),delete l.shaders[this.type===_.FRAGMENT_SHADER|0][this.src]}};function o(l){this.gl=l,this.shaders=[{},{}],this.programs={}}var i=o.prototype;function p(l,_,s){var w=l.createShader(_);if(l.shaderSource(w,s),l.compileShader(w),!l.getShaderParameter(w,l.COMPILE_STATUS)){var b=l.getShaderInfoLog(w);try{var h=a(b,s,_)}catch(m){throw console.warn("Failed to format compiler error: "+m),new e(b,`Error compiling shader:
`+b)}throw new e(b,h.short,h.long)}return w}i.getShaderReference=function(l,_){var s=this.gl,w=this.shaders[l===s.FRAGMENT_SHADER|0],b=w[_];if(!b||!s.isShader(b.shader)){var h=p(s,l,_);b=w[_]=new f(r++,_,l,h,[],1,this)}else b.count+=1;return b};function d(l,_,s,w,b){var h=l.createProgram();l.attachShader(h,_),l.attachShader(h,s);for(var m=0;m<w.length;++m)l.bindAttribLocation(h,b[m],w[m]);if(l.linkProgram(h),!l.getProgramParameter(h,l.LINK_STATUS)){var u=l.getProgramInfoLog(h);throw new e(u,"Error linking program: "+u)}return h}i.getProgram=function(l,_,s,w){var b=[l.id,_.id,s.join(":"),w.join(":")].join("@"),h=this.programs[b];return(!h||!this.gl.isProgram(h))&&(this.programs[b]=h=d(this.gl,l.shader,_.shader,s,w),l.programs.push(b),_.programs.push(b)),h};function y(l){var _=t.get(l);return _||(_=new o(l),t.set(l,_)),_}function v(l,_,s){return y(l).getShaderReference(_,s)}function x(l,_,s,w,b){return y(l).getProgram(_,s,w,b)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(c,M,A){M.exports=n;function e(t){this.plot=t,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var a=e.prototype;a.update=function(t){t=t||{},this.enable=(t.enable||[!0,!0,!1,!1]).slice(),this.width=(t.width||[1,1,1,1]).slice(),this.color=(t.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(t.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var t=this.enable,r=this.width,f=this.color,o=this.center,i=this.plot,p=i.line,d=i.dataBox,y=i.viewBox;if(p.bind(),d[0]<=o[0]&&o[0]<=d[2]&&d[1]<=o[1]&&o[1]<=d[3]){var v=y[0]+(o[0]-d[0])/(d[2]-d[0])*(y[2]-y[0]),x=y[1]+(o[1]-d[1])/(d[3]-d[1])*(y[3]-y[1]);t[0]&&p.drawLine(v,x,y[0],x,r[0],f[0]),t[1]&&p.drawLine(v,x,v,y[1],r[1],f[1]),t[2]&&p.drawLine(v,x,y[2],x,r[2],f[2]),t[3]&&p.drawLine(v,x,v,y[3],r[3],f[3])}},a.dispose=function(){this.plot.removeOverlay(this)};function n(t,r){var f=new e(t);return f.update(r),t.addOverlay(f),f}},{}],140:[function(c,M,A){var e=c("glslify"),a=c("gl-shader"),n=e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),t=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);M.exports=function(r){return a(r,n,t,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(c,M,A){var e=c("gl-buffer"),a=c("gl-vao"),n=c("./shaders/index");M.exports=d;var t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(y,v,x,l){this.gl=y,this.buffer=v,this.vao=x,this.shader=l,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var f=r.prototype,o=[0,0,0],i=[0,0,0],p=[0,0];f.isTransparent=function(){return!1},f.drawTransparent=function(y){},f.draw=function(y){var v=this.gl,x=this.vao,l=this.shader;x.bind(),l.bind();var _=y.model||t,s=y.view||t,w=y.projection||t,b;this.axes&&(b=this.axes.lastCubeProps.axis);for(var h=o,m=i,u=0;u<3;++u)b&&b[u]<0?(h[u]=this.bounds[0][u],m[u]=this.bounds[1][u]):(h[u]=this.bounds[1][u],m[u]=this.bounds[0][u]);p[0]=v.drawingBufferWidth,p[1]=v.drawingBufferHeight,l.uniforms.model=_,l.uniforms.view=s,l.uniforms.projection=w,l.uniforms.coordinates=[this.position,h,m],l.uniforms.colors=this.colors,l.uniforms.screenShape=p;for(var u=0;u<3;++u)l.uniforms.lineWidth=this.lineWidth[u]*this.pixelRatio,this.enabled[u]&&(x.draw(v.TRIANGLES,6,6*u),this.drawSides[u]&&x.draw(v.TRIANGLES,12,18+12*u));x.unbind()},f.update=function(y){!y||("bounds"in y&&(this.bounds=y.bounds),"position"in y&&(this.position=y.position),"lineWidth"in y&&(this.lineWidth=y.lineWidth),"colors"in y&&(this.colors=y.colors),"enabled"in y&&(this.enabled=y.enabled),"drawSides"in y&&(this.drawSides=y.drawSides))},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function d(y,v){var x=[];function l(h,m,u,L,S,k){var P=[h,m,u,0,0,0,1];P[L+3]=1,P[L]=S,x.push.apply(x,P),P[6]=-1,x.push.apply(x,P),P[L]=k,x.push.apply(x,P),x.push.apply(x,P),P[6]=1,x.push.apply(x,P),P[L]=S,x.push.apply(x,P)}l(0,0,0,0,0,1),l(0,0,0,1,0,1),l(0,0,0,2,0,1),l(1,0,0,1,-1,1),l(1,0,0,2,-1,1),l(0,1,0,0,-1,1),l(0,1,0,2,-1,1),l(0,0,1,0,-1,1),l(0,0,1,1,-1,1);var _=e(y,x),s=a(y,[{type:y.FLOAT,buffer:_,size:3,offset:0,stride:28},{type:y.FLOAT,buffer:_,size:3,offset:12,stride:28},{type:y.FLOAT,buffer:_,size:1,offset:24,stride:28}]),w=n(y);w.attributes.position.location=0,w.attributes.color.location=1,w.attributes.weight.location=2;var b=new r(y,_,s,w);return b.update(v),b}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(c,M,A){var e=c("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),t=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);A.meshShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},A.pickShader={vertex:t,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(c,M,A){var e=c("gl-vec3"),a=c("gl-vec4"),n=["xyz","xzy","yxz","yzx","zxy","zyx"],t=function(x,l,_,s){for(var w=x.points,b=x.velocities,h=x.divergences,m=[],u=[],L=[],S=[],k=[],P=[],z=0,I=0,D=a.create(),R=a.create(),B=8,F=0;F<w.length;F++){var V=w[F],Y=b[F],K=h[F];l===0&&(K=_*.05),I=e.length(Y)/s,D=a.create(),e.copy(D,Y),D[3]=K;for(var J=0;J<B;J++)k[J]=[V[0],V[1],V[2],J];if(S.length>0)for(var J=0;J<B;J++){var G=(J+1)%B;m.push(S[J],k[J],k[G],k[G],S[G],S[J]),L.push(R,D,D,D,R,R),P.push(z,I,I,I,z,z);var Z=m.length;u.push([Z-6,Z-5,Z-4],[Z-3,Z-2,Z-1])}var re=S;S=k,k=re;var se=R;R=D,D=se;var oe=z;z=I,I=oe}return{positions:m,cells:u,vectors:L,vertexIntensity:P}},r=function(x,l,_,s){for(var w=0,b=0;b<x.length;b++)for(var h=x[b].velocities,m=0;m<h.length;m++)w=Math.max(w,e.length(h[m]));for(var u=x.map(function(F){return t(F,_,s,w)}),L=[],S=[],k=[],P=[],b=0;b<u.length;b++){var z=u[b],I=L.length;L=L.concat(z.positions),k=k.concat(z.vectors),P=P.concat(z.vertexIntensity);for(var m=0;m<z.cells.length;m++){var D=z.cells[m],R=[];S.push(R);for(var B=0;B<D.length;B++)R.push(D[B]+I)}}return{positions:L,cells:S,vectors:k,vertexIntensity:P,colormap:l}},f=function(x,l){var _=x.length,s;for(s=0;s<_;s++){var w=x[s];if(w===l)return s;if(w>l)return s-1}return s},o=function(x,l,_){return x<l?l:x>_?_:x},i=function(x,l,_){var s=l.vectors,w=l.meshgrid,b=x[0],h=x[1],m=x[2],u=w[0].length,L=w[1].length,S=w[2].length,k=f(w[0],b),P=f(w[1],h),z=f(w[2],m),I=k+1,D=P+1,R=z+1;if(k=o(k,0,u-1),I=o(I,0,u-1),P=o(P,0,L-1),D=o(D,0,L-1),z=o(z,0,S-1),R=o(R,0,S-1),k<0||P<0||z<0||I>u-1||D>L-1||R>S-1)return e.create();var B=w[0][k],F=w[0][I],V=w[1][P],Y=w[1][D],K=w[2][z],J=w[2][R],G=(b-B)/(F-B),Z=(h-V)/(Y-V),re=(m-K)/(J-K);isFinite(G)||(G=.5),isFinite(Z)||(Z=.5),isFinite(re)||(re=.5);var se,oe,N,U,q,Q;switch(_.reversedX&&(k=u-1-k,I=u-1-I),_.reversedY&&(P=L-1-P,D=L-1-D),_.reversedZ&&(z=S-1-z,R=S-1-R),_.filled){case 5:q=z,Q=R,N=P*S,U=D*S,se=k*S*L,oe=I*S*L;break;case 4:q=z,Q=R,se=k*S,oe=I*S,N=P*S*u,U=D*S*u;break;case 3:N=P,U=D,q=z*L,Q=R*L,se=k*L*S,oe=I*L*S;break;case 2:N=P,U=D,se=k*L,oe=I*L,q=z*L*u,Q=R*L*u;break;case 1:se=k,oe=I,q=z*u,Q=R*u,N=P*u*S,U=D*u*S;break;default:se=k,oe=I,N=P*u,U=D*u,q=z*u*L,Q=R*u*L;break}var W=s[se+N+q],X=s[se+N+Q],te=s[se+U+q],ee=s[se+U+Q],ie=s[oe+N+q],le=s[oe+N+Q],ye=s[oe+U+q],ue=s[oe+U+Q],pe=e.create(),ge=e.create(),Te=e.create(),_e=e.create();e.lerp(pe,W,ie,G),e.lerp(ge,X,le,G),e.lerp(Te,te,ye,G),e.lerp(_e,ee,ue,G);var De=e.create(),Oe=e.create();e.lerp(De,pe,Te,Z),e.lerp(Oe,ge,_e,Z);var Ue=e.create();return e.lerp(Ue,De,Oe,re),Ue},p=function(x){var l=1/0;x.sort(function(b,h){return b-h});for(var _=x.length,s=1;s<_;s++){var w=Math.abs(x[s]-x[s-1]);w<l&&(l=w)}return l},d=function(x){for(var l=[],_=[],s=[],w={},b={},h={},m=x.length,u=0;u<m;u++){var L=x[u],S=L[0],k=L[1],P=L[2];w[S]||(l.push(S),w[S]=!0),b[k]||(_.push(k),b[k]=!0),h[P]||(s.push(P),h[P]=!0)}var z=p(l),I=p(_),D=p(s),R=Math.min(z,I,D);return isFinite(R)?R:1};M.exports=function(x,l){var _=x.startingPositions,s=x.maxLength||1e3,w=x.tubeSize||1,b=x.absoluteTubeSize,h=x.gridFill||"+x+y+z",m={};h.indexOf("-x")!==-1&&(m.reversedX=!0),h.indexOf("-y")!==-1&&(m.reversedY=!0),h.indexOf("-z")!==-1&&(m.reversedZ=!0),m.filled=n.indexOf(h.replace(/-/g,"").replace(/\+/g,""));var u=x.getVelocity||function(le){return i(le,x,m)},L=x.getDivergence||function(le,ye){var ue=e.create(),pe=1e-4;e.add(ue,le,[pe,0,0]);var ge=u(ue);e.subtract(ge,ge,ye),e.scale(ge,ge,1/pe),e.add(ue,le,[0,pe,0]);var Te=u(ue);e.subtract(Te,Te,ye),e.scale(Te,Te,1/pe),e.add(ue,le,[0,0,pe]);var _e=u(ue);return e.subtract(_e,_e,ye),e.scale(_e,_e,1/pe),e.add(ue,ge,Te),e.add(ue,ue,_e),ue},S=[],k=l[0][0],P=l[0][1],z=l[0][2],I=l[1][0],D=l[1][1],R=l[1][2],B=function(le){var ye=le[0],ue=le[1],pe=le[2];return!(ye<k||ye>I||ue<P||ue>D||pe<z||pe>R)},F=e.distance(l[0],l[1]),V=10*F/s,Y=V*V,K=1,J=0,G=_.length;G>1&&(K=d(_));for(var Z=0;Z<G;Z++){var re=e.create();e.copy(re,_[Z]);var se=[re],oe=[],N=u(re),U=re;oe.push(N);var q=[],Q=L(re,N),W=e.length(Q);isFinite(W)&&W>J&&(J=W),q.push(W),S.push({points:se,velocities:oe,divergences:q});for(var X=0;X<s*100&&se.length<s&&B(re);){X++;var te=e.clone(N),ee=e.squaredLength(te);if(ee===0)break;if(ee>Y&&e.scale(te,te,V/Math.sqrt(ee)),e.add(te,te,re),N=u(te),e.squaredDistance(U,te)-Y>-1e-4*Y){se.push(te),U=te,oe.push(N);var Q=L(te,N),W=e.length(Q);isFinite(W)&&W>J&&(J=W),q.push(W)}re=te}}var ie=r(S,x.colormap,J,K);return b?ie.tubeScale=b:(J===0&&(J=1),ie.tubeScale=w*.5*K/J),ie};var y=c("./lib/shaders"),v=c("gl-cone3d").createMesh;M.exports.createTubeMesh=function(x,l){return v(x,l,{shaders:y,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(c,M,A){var e=c("gl-shader"),a=c("glslify"),n=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),t=a([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),r=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),f=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);A.createShader=function(o){var i=e(o,n,t,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},A.createPickShader=function(o){var i=e(o,n,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},A.createContourShader=function(o){var i=e(o,r,t,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i},A.createPickContourShader=function(o){var i=e(o,r,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i}},{"gl-shader":132,glslify:231}],145:[function(c,M,A){M.exports=oe;var e=c("bit-twiddle"),a=c("gl-buffer"),n=c("gl-vao"),t=c("gl-texture2d"),r=c("typedarray-pool"),f=c("colormap"),o=c("ndarray-ops"),i=c("ndarray-pack"),p=c("ndarray"),d=c("surface-nets"),y=c("gl-mat4/multiply"),v=c("gl-mat4/invert"),x=c("binary-search-bounds"),l=c("ndarray-gradient"),_=c("./lib/shaders"),s=_.createShader,w=_.createContourShader,b=_.createPickShader,h=_.createPickContourShader,m=4*(4+3+3),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],S=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var N=0;N<3;++N){var U=S[N],q=(N+1)%3,Q=(N+2)%3;U[q+0]=1,U[Q+3]=1,U[N+6]=1}})();function k(N,U,q,Q,W){this.position=N,this.index=U,this.uv=q,this.level=Q,this.dataCoordinate=W}var P=256;function z(N,U,q,Q,W,X,te,ee,ie,le,ye,ue,pe,ge,Te){this.gl=N,this.shape=U,this.bounds=q,this.objectOffset=Te,this.intensityBounds=[],this._shader=Q,this._pickShader=W,this._coordinateBuffer=X,this._vao=te,this._colorMap=ee,this._contourShader=ie,this._contourPickShader=le,this._contourBuffer=ye,this._contourVAO=ue,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new k([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=pe,this._dynamicVAO=ge,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[p(r.mallocFloat(1024),[0,0]),p(r.mallocFloat(1024),[0,0]),p(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var I=z.prototype;I.genColormap=function(N,U){var q=!1,Q=i([f({colormap:N,nshades:P,format:"rgba"}).map(function(W,X){var te=U?D(X/255,U):W[3];return te<1&&(q=!0),[W[0],W[1],W[2],255*te]})]);return o.divseq(Q,255),this.hasAlphaScale=q,Q},I.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},I.isOpaque=function(){return!this.isTransparent()},I.pickSlots=1,I.setPickBase=function(N){this.pickId=N};function D(N,U){if(!U||!U.length)return 1;for(var q=0;q<U.length;++q){if(U.length<2)return 1;if(U[q][0]===N)return U[q][1];if(U[q][0]>N&&q>0){var Q=(U[q][0]-N)/(U[q][0]-U[q-1][0]);return U[q][1]*(1-Q)+Q*U[q-1][1]}}return 1}var R=[0,0,0],B={showSurface:!1,showContour:!1,projections:[u.slice(),u.slice(),u.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function F(N,U){var q,Q,W,X=U.axes&&U.axes.lastCubeProps.axis||R,te=U.showSurface,ee=U.showContour;for(q=0;q<3;++q)for(te=te||U.surfaceProject[q],Q=0;Q<3;++Q)ee=ee||U.contourProject[q][Q];for(q=0;q<3;++q){var ie=B.projections[q];for(Q=0;Q<16;++Q)ie[Q]=0;for(Q=0;Q<4;++Q)ie[5*Q]=1;ie[5*q]=0,ie[12+q]=U.axesBounds[+(X[q]>0)][q],y(ie,N.model,ie);var le=B.clipBounds[q];for(W=0;W<2;++W)for(Q=0;Q<3;++Q)le[W][Q]=N.clipBounds[W][Q];le[0][q]=-1e8,le[1][q]=1e8}return B.showSurface=te,B.showContour=ee,B}var V={model:u,view:u,projection:u,inverseModel:u.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Y=u.slice(),K=[1,0,0,0,1,0,0,0,1];function J(N,U){N=N||{};var q=this.gl;q.disable(q.CULL_FACE),this._colorMap.bind(0);var Q=V;Q.model=N.model||u,Q.view=N.view||u,Q.projection=N.projection||u,Q.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],Q.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],Q.objectOffset=this.objectOffset,Q.contourColor=this.contourColor[0],Q.inverseModel=v(Q.inverseModel,Q.model);for(var W=0;W<2;++W)for(var X=Q.clipBounds[W],te=0;te<3;++te)X[te]=Math.min(Math.max(this.clipBounds[W][te],-1e8),1e8);Q.kambient=this.ambientLight,Q.kdiffuse=this.diffuseLight,Q.kspecular=this.specularLight,Q.roughness=this.roughness,Q.fresnel=this.fresnel,Q.opacity=this.opacity,Q.height=0,Q.permutation=K,Q.vertexColor=this.vertexColor;var ee=Y;for(y(ee,Q.view,Q.model),y(ee,Q.projection,ee),v(ee,ee),W=0;W<3;++W)Q.eyePosition[W]=ee[12+W]/ee[15];var ie=ee[15];for(W=0;W<3;++W)ie+=this.lightPosition[W]*ee[4*W+3];for(W=0;W<3;++W){var le=ee[12+W];for(te=0;te<3;++te)le+=ee[4*te+W]*this.lightPosition[te];Q.lightPosition[W]=le/ie}var ye=F(Q,this);if(ye.showSurface){for(this._shader.bind(),this._shader.uniforms=Q,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(q.TRIANGLES,this._vertexCount),W=0;W<3;++W)!this.surfaceProject[W]||!this.vertexCount||(this._shader.uniforms.model=ye.projections[W],this._shader.uniforms.clipBounds=ye.clipBounds[W],this._vao.draw(q.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ye.showContour){var ue=this._contourShader;Q.kambient=1,Q.kdiffuse=0,Q.kspecular=0,Q.opacity=1,ue.bind(),ue.uniforms=Q;var pe=this._contourVAO;for(pe.bind(),W=0;W<3;++W)for(ue.uniforms.permutation=S[W],q.lineWidth(this.contourWidth[W]*this.pixelRatio),te=0;te<this.contourLevels[W].length;++te)te===this.highlightLevel[W]?(ue.uniforms.contourColor=this.highlightColor[W],ue.uniforms.contourTint=this.highlightTint[W]):(te===0||te-1===this.highlightLevel[W])&&(ue.uniforms.contourColor=this.contourColor[W],ue.uniforms.contourTint=this.contourTint[W]),!!this._contourCounts[W][te]&&(ue.uniforms.height=this.contourLevels[W][te],pe.draw(q.LINES,this._contourCounts[W][te],this._contourOffsets[W][te]));for(W=0;W<3;++W)for(ue.uniforms.model=ye.projections[W],ue.uniforms.clipBounds=ye.clipBounds[W],te=0;te<3;++te)if(!!this.contourProject[W][te]){ue.uniforms.permutation=S[te],q.lineWidth(this.contourWidth[te]*this.pixelRatio);for(var ge=0;ge<this.contourLevels[te].length;++ge)ge===this.highlightLevel[te]?(ue.uniforms.contourColor=this.highlightColor[te],ue.uniforms.contourTint=this.highlightTint[te]):(ge===0||ge-1===this.highlightLevel[te])&&(ue.uniforms.contourColor=this.contourColor[te],ue.uniforms.contourTint=this.contourTint[te]),!!this._contourCounts[te][ge]&&(ue.uniforms.height=this.contourLevels[te][ge],pe.draw(q.LINES,this._contourCounts[te][ge],this._contourOffsets[te][ge]))}for(pe.unbind(),pe=this._dynamicVAO,pe.bind(),W=0;W<3;++W)if(this._dynamicCounts[W]!==0)for(ue.uniforms.model=Q.model,ue.uniforms.clipBounds=Q.clipBounds,ue.uniforms.permutation=S[W],q.lineWidth(this.dynamicWidth[W]*this.pixelRatio),ue.uniforms.contourColor=this.dynamicColor[W],ue.uniforms.contourTint=this.dynamicTint[W],ue.uniforms.height=this.dynamicLevel[W],pe.draw(q.LINES,this._dynamicCounts[W],this._dynamicOffsets[W]),te=0;te<3;++te)!this.contourProject[te][W]||(ue.uniforms.model=ye.projections[te],ue.uniforms.clipBounds=ye.clipBounds[te],pe.draw(q.LINES,this._dynamicCounts[W],this._dynamicOffsets[W]));pe.unbind()}}I.draw=function(N){return J.call(this,N,!1)},I.drawTransparent=function(N){return J.call(this,N,!0)};var G={model:u,view:u,projection:u,inverseModel:u,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};I.drawPick=function(N){N=N||{};var U=this.gl;U.disable(U.CULL_FACE);var q=G;q.model=N.model||u,q.view=N.view||u,q.projection=N.projection||u,q.shape=this._field[2].shape,q.pickId=this.pickId/255,q.lowerBound=this.bounds[0],q.upperBound=this.bounds[1],q.objectOffset=this.objectOffset,q.permutation=K;for(var Q=0;Q<2;++Q)for(var W=q.clipBounds[Q],X=0;X<3;++X)W[X]=Math.min(Math.max(this.clipBounds[Q][X],-1e8),1e8);var te=F(q,this);if(te.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=q,this._vao.bind(),this._vao.draw(U.TRIANGLES,this._vertexCount),Q=0;Q<3;++Q)!this.surfaceProject[Q]||(this._pickShader.uniforms.model=te.projections[Q],this._pickShader.uniforms.clipBounds=te.clipBounds[Q],this._vao.draw(U.TRIANGLES,this._vertexCount));this._vao.unbind()}if(te.showContour){var ee=this._contourPickShader;ee.bind(),ee.uniforms=q;var ie=this._contourVAO;for(ie.bind(),X=0;X<3;++X)for(U.lineWidth(this.contourWidth[X]*this.pixelRatio),ee.uniforms.permutation=S[X],Q=0;Q<this.contourLevels[X].length;++Q)this._contourCounts[X][Q]&&(ee.uniforms.height=this.contourLevels[X][Q],ie.draw(U.LINES,this._contourCounts[X][Q],this._contourOffsets[X][Q]));for(Q=0;Q<3;++Q)for(ee.uniforms.model=te.projections[Q],ee.uniforms.clipBounds=te.clipBounds[Q],X=0;X<3;++X)if(!!this.contourProject[Q][X]){ee.uniforms.permutation=S[X],U.lineWidth(this.contourWidth[X]*this.pixelRatio);for(var le=0;le<this.contourLevels[X].length;++le)this._contourCounts[X][le]&&(ee.uniforms.height=this.contourLevels[X][le],ie.draw(U.LINES,this._contourCounts[X][le],this._contourOffsets[X][le]))}ie.unbind()}},I.pick=function(N){if(!N||N.id!==this.pickId)return null;var U=this._field[2].shape,q=this._pickResult,Q=U[0]*(N.value[0]+(N.value[2]>>4)/16)/255,W=Math.floor(Q),X=Q-W,te=U[1]*(N.value[1]+(N.value[2]&15)/16)/255,ee=Math.floor(te),ie=te-ee;W+=1,ee+=1;var le=q.position;le[0]=le[1]=le[2]=0;for(var ye=0;ye<2;++ye)for(var ue=ye?X:1-X,pe=0;pe<2;++pe)for(var ge=pe?ie:1-ie,Te=W+ye,_e=ee+pe,De=ue*ge,Oe=0;Oe<3;++Oe)le[Oe]+=this._field[Oe].get(Te,_e)*De;for(var Ue=this._pickResult.level,xe=0;xe<3;++xe)if(Ue[xe]=x.le(this.contourLevels[xe],le[xe]),Ue[xe]<0)this.contourLevels[xe].length>0&&(Ue[xe]=0);else if(Ue[xe]<this.contourLevels[xe].length-1){var Pe=this.contourLevels[xe][Ue[xe]],Ve=this.contourLevels[xe][Ue[xe]+1];Math.abs(Pe-le[xe])>Math.abs(Ve-le[xe])&&(Ue[xe]+=1)}for(q.index[0]=X<.5?W:W+1,q.index[1]=ie<.5?ee:ee+1,q.uv[0]=Q/U[0],q.uv[1]=te/U[1],Oe=0;Oe<3;++Oe)q.dataCoordinate[Oe]=this._field[Oe].get(q.index[0],q.index[1]);return q},I.padField=function(N,U){var q=U.shape.slice(),Q=N.shape.slice();o.assign(N.lo(1,1).hi(q[0],q[1]),U),o.assign(N.lo(1).hi(q[0],1),U.hi(q[0],1)),o.assign(N.lo(1,Q[1]-1).hi(q[0],1),U.lo(0,q[1]-1).hi(q[0],1)),o.assign(N.lo(0,1).hi(1,q[1]),U.hi(1)),o.assign(N.lo(Q[0]-1,1).hi(1,q[1]),U.lo(q[0]-1)),N.set(0,0,U.get(0,0)),N.set(0,Q[1]-1,U.get(0,q[1]-1)),N.set(Q[0]-1,0,U.get(q[0]-1,0)),N.set(Q[0]-1,Q[1]-1,U.get(q[0]-1,q[1]-1))};function Z(N,U){return Array.isArray(N)?[U(N[0]),U(N[1]),U(N[2])]:[U(N),U(N),U(N)]}function re(N){return Array.isArray(N)?N.length===3?[N[0],N[1],N[2],1]:[N[0],N[1],N[2],N[3]]:[0,0,0,1]}function se(N){if(Array.isArray(N)){if(Array.isArray(N))return[re(N[0]),re(N[1]),re(N[2])];var U=re(N);return[U.slice(),U.slice(),U.slice()]}}I.update=function(N){N=N||{},this.objectOffset=N.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in N&&(this.contourWidth=Z(N.contourWidth,Number)),"showContour"in N&&(this.showContour=Z(N.showContour,Boolean)),"showSurface"in N&&(this.showSurface=!!N.showSurface),"contourTint"in N&&(this.contourTint=Z(N.contourTint,Boolean)),"contourColor"in N&&(this.contourColor=se(N.contourColor)),"contourProject"in N&&(this.contourProject=Z(N.contourProject,function(pt){return Z(pt,Boolean)})),"surfaceProject"in N&&(this.surfaceProject=N.surfaceProject),"dynamicColor"in N&&(this.dynamicColor=se(N.dynamicColor)),"dynamicTint"in N&&(this.dynamicTint=Z(N.dynamicTint,Number)),"dynamicWidth"in N&&(this.dynamicWidth=Z(N.dynamicWidth,Number)),"opacity"in N&&(this.opacity=N.opacity),"opacityscale"in N&&(this.opacityscale=N.opacityscale),"colorBounds"in N&&(this.colorBounds=N.colorBounds),"vertexColor"in N&&(this.vertexColor=N.vertexColor?1:0),"colormap"in N&&this._colorMap.setPixels(this.genColormap(N.colormap,this.opacityscale));var U=N.field||N.coords&&N.coords[2]||null,q=!1;if(U||(this._field[2].shape[0]||this._field[2].shape[2]?U=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):U=this._field[2].hi(0,0)),"field"in N||"coords"in N){var Q=(U.shape[0]+2)*(U.shape[1]+2);Q>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(e.nextPow2(Q))),this._field[2]=p(this._field[2].data,[U.shape[0]+2,U.shape[1]+2]),this.padField(this._field[2],U),this.shape=U.shape.slice();for(var W=this.shape,X=0;X<2;++X)this._field[2].size>this._field[X].data.length&&(r.freeFloat(this._field[X].data),this._field[X].data=r.mallocFloat(this._field[2].size)),this._field[X]=p(this._field[X].data,[W[0]+2,W[1]+2]);if(N.coords){var te=N.coords;if(!Array.isArray(te)||te.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(X=0;X<2;++X){var ee=te[X];for(pe=0;pe<2;++pe)if(ee.shape[pe]!==W[pe])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[X],ee)}}else if(N.ticks){var ie=N.ticks;if(!Array.isArray(ie)||ie.length!==2)throw new Error("gl-surface: invalid ticks");for(X=0;X<2;++X){var le=ie[X];if((Array.isArray(le)||le.length)&&(le=p(le)),le.shape[0]!==W[X])throw new Error("gl-surface: invalid tick length");var ye=p(le.data,W);ye.stride[X]=le.stride[0],ye.stride[X^1]=0,this.padField(this._field[X],ye)}}else{for(X=0;X<2;++X){var ue=[0,0];ue[X]=1,this._field[X]=p(this._field[X].data,[W[0]+2,W[1]+2],ue,0)}this._field[0].set(0,0,0);for(var pe=0;pe<W[0];++pe)this._field[0].set(pe+1,0,pe);for(this._field[0].set(W[0]+1,0,W[0]-1),this._field[1].set(0,0,0),pe=0;pe<W[1];++pe)this._field[1].set(0,pe+1,pe);this._field[1].set(0,W[1]+1,W[1]-1)}var ge=this._field,Te=p(r.mallocFloat(ge[2].size*3*2),[3,W[0]+2,W[1]+2,2]);for(X=0;X<3;++X)l(Te.pick(X),ge[X],"mirror");var _e=p(r.mallocFloat(ge[2].size*3),[W[0]+2,W[1]+2,3]);for(X=0;X<W[0]+2;++X)for(pe=0;pe<W[1]+2;++pe){var De=Te.get(0,X,pe,0),Oe=Te.get(0,X,pe,1),Ue=Te.get(1,X,pe,0),xe=Te.get(1,X,pe,1),Pe=Te.get(2,X,pe,0),Ve=Te.get(2,X,pe,1),Qe=Ue*Ve-xe*Pe,Fe=Pe*Oe-Ve*De,Le=De*xe-Oe*Ue,Ne=Math.sqrt(Qe*Qe+Fe*Fe+Le*Le);Ne<1e-8?(Ne=Math.max(Math.abs(Qe),Math.abs(Fe),Math.abs(Le)),Ne<1e-8?(Le=1,Fe=Qe=0,Ne=1):Ne=1/Ne):Ne=1/Math.sqrt(Ne),_e.set(X,pe,0,Qe*Ne),_e.set(X,pe,1,Fe*Ne),_e.set(X,pe,2,Le*Ne)}r.free(Te.data);var dt=[1/0,1/0,1/0],Dt=[-1/0,-1/0,-1/0],Xt=1/0,Tt=-1/0,zt=(W[0]-1)*(W[1]-1)*6,Ut=r.mallocFloat(e.nextPow2(10*zt)),Et=0,Mt=0;for(X=0;X<W[0]-1;++X){e:for(pe=0;pe<W[1]-1;++pe){for(var rt=0;rt<2;++rt)for(var ct=0;ct<2;++ct)for(var Ze=0;Ze<3;++Ze){var ke=this._field[Ze].get(1+X+rt,1+pe+ct);if(isNaN(ke)||!isFinite(ke))continue e}for(Ze=0;Ze<6;++Ze){var Ge=X+L[Ze][0],Je=pe+L[Ze][1],it=this._field[0].get(Ge+1,Je+1),Pt=this._field[1].get(Ge+1,Je+1);ke=this._field[2].get(Ge+1,Je+1),Qe=_e.get(Ge+1,Je+1,0),Fe=_e.get(Ge+1,Je+1,1),Le=_e.get(Ge+1,Je+1,2),N.intensity&&(At=N.intensity.get(Ge,Je));var At=N.intensity?N.intensity.get(Ge,Je):ke+this.objectOffset[2];Ut[Et++]=Ge,Ut[Et++]=Je,Ut[Et++]=it,Ut[Et++]=Pt,Ut[Et++]=ke,Ut[Et++]=0,Ut[Et++]=At,Ut[Et++]=Qe,Ut[Et++]=Fe,Ut[Et++]=Le,dt[0]=Math.min(dt[0],it+this.objectOffset[0]),dt[1]=Math.min(dt[1],Pt+this.objectOffset[1]),dt[2]=Math.min(dt[2],ke+this.objectOffset[2]),Xt=Math.min(Xt,At),Dt[0]=Math.max(Dt[0],it+this.objectOffset[0]),Dt[1]=Math.max(Dt[1],Pt+this.objectOffset[1]),Dt[2]=Math.max(Dt[2],ke+this.objectOffset[2]),Tt=Math.max(Tt,At),Mt+=1}}}for(N.intensityBounds&&(Xt=+N.intensityBounds[0],Tt=+N.intensityBounds[1]),X=6;X<Et;X+=10)Ut[X]=(Ut[X]-Xt)/(Tt-Xt);this._vertexCount=Mt,this._coordinateBuffer.update(Ut.subarray(0,Et)),r.freeFloat(Ut),r.free(_e.data),this.bounds=[dt,Dt],this.intensity=N.intensity||this._field[2],(this.intensityBounds[0]!==Xt||this.intensityBounds[1]!==Tt)&&(q=!0),this.intensityBounds=[Xt,Tt]}if("levels"in N){var Ot=N.levels;for(Array.isArray(Ot[0])?Ot=Ot.slice():Ot=[[],[],Ot],X=0;X<3;++X)Ot[X]=Ot[X].slice(),Ot[X].sort(function(pt,vt){return pt-vt});for(X=0;X<3;++X)for(pe=0;pe<Ot[X].length;++pe)Ot[X][pe]-=this.objectOffset[X];e:for(X=0;X<3;++X){if(Ot[X].length!==this.contourLevels[X].length){q=!0;break}for(pe=0;pe<Ot[X].length;++pe)if(Ot[X][pe]!==this.contourLevels[X][pe]){q=!0;break e}}this.contourLevels=Ot}if(q){ge=this._field,W=this.shape;for(var Jt=[],Bt=0;Bt<3;++Bt){var qt=this.contourLevels[Bt],rr=[],er=[],pr=[0,0,0];for(X=0;X<qt.length;++X){var Xr=d(this._field[Bt],qt[X]);rr.push(Jt.length/5|0),Mt=0;e:for(pe=0;pe<Xr.cells.length;++pe){var hn=Xr.cells[pe];for(Ze=0;Ze<2;++Ze){var $r=Xr.positions[hn[Ze]],nt=$r[0],Gt=Math.floor(nt)|0,Kt=nt-Gt,Ht=$r[1],_r=Math.floor(Ht)|0,tt=Ht-_r,je=!1;t:for(var st=0;st<3;++st){pr[st]=0;var ft=(Bt+st+1)%3;for(rt=0;rt<2;++rt){var Me=rt?Kt:1-Kt;for(Ge=Math.min(Math.max(Gt+rt,0),W[0])|0,ct=0;ct<2;++ct){var Se=ct?tt:1-tt;if(Je=Math.min(Math.max(_r+ct,0),W[1])|0,st<2?ke=this._field[ft].get(Ge,Je):ke=(this.intensity.get(Ge,Je)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(ke)||isNaN(ke)){je=!0;break t}var Ke=Me*Se;pr[st]+=Ke*ke}}}if(!je)Jt.push(pr[0],pr[1],$r[0],$r[1],pr[2]),Mt+=1;else{if(Ze>0){for(var Xe=0;Xe<5;++Xe)Jt.pop();Mt-=1}continue e}}}er.push(Mt)}this._contourOffsets[Bt]=rr,this._contourCounts[Bt]=er}var ot=r.mallocFloat(Jt.length);for(X=0;X<Jt.length;++X)ot[X]=Jt[X];this._contourBuffer.update(ot),r.freeFloat(ot)}},I.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var N=0;N<3;++N)r.freeFloat(this._field[N].data)},I.highlight=function(N){var U;if(!N){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(U=0;U<3;++U)this.enableHighlight[U]?this.highlightLevel[U]=N.level[U]:this.highlightLevel[U]=-1;var q;for(this.snapToData?q=N.dataCoordinate:q=N.position,U=0;U<3;++U)q[U]-=this.objectOffset[U];if(!((!this.enableDynamic[0]||q[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||q[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||q[2]===this.dynamicLevel[2]))){for(var Q=0,W=this.shape,X=r.mallocFloat(12*W[0]*W[1]),te=0;te<3;++te){if(!this.enableDynamic[te]){this.dynamicLevel[te]=NaN,this._dynamicCounts[te]=0;continue}this.dynamicLevel[te]=q[te];var ee=(te+1)%3,ie=(te+2)%3,le=this._field[te],ye=this._field[ee],ue=this._field[ie],pe=d(le,q[te]),ge=pe.cells,Te=pe.positions;for(this._dynamicOffsets[te]=Q,U=0;U<ge.length;++U)for(var _e=ge[U],De=0;De<2;++De){var Oe=Te[_e[De]],Ue=+Oe[0],xe=Ue|0,Pe=Math.min(xe+1,W[0])|0,Ve=Ue-xe,Qe=1-Ve,Fe=+Oe[1],Le=Fe|0,Ne=Math.min(Le+1,W[1])|0,dt=Fe-Le,Dt=1-dt,Xt=Qe*Dt,Tt=Qe*dt,zt=Ve*Dt,Ut=Ve*dt,Et=Xt*ye.get(xe,Le)+Tt*ye.get(xe,Ne)+zt*ye.get(Pe,Le)+Ut*ye.get(Pe,Ne),Mt=Xt*ue.get(xe,Le)+Tt*ue.get(xe,Ne)+zt*ue.get(Pe,Le)+Ut*ue.get(Pe,Ne);if(isNaN(Et)||isNaN(Mt)){De&&(Q-=1);break}X[2*Q+0]=Et,X[2*Q+1]=Mt,Q+=1}this._dynamicCounts[te]=Q-this._dynamicOffsets[te]}this._dynamicBuffer.update(X.subarray(0,2*Q)),r.freeFloat(X)}};function oe(N){var U=N.gl,q=s(U),Q=b(U),W=w(U),X=h(U),te=a(U),ee=n(U,[{buffer:te,size:4,stride:m,offset:0},{buffer:te,size:3,stride:m,offset:16},{buffer:te,size:3,stride:m,offset:28}]),ie=a(U),le=n(U,[{buffer:ie,size:4,stride:20,offset:0},{buffer:ie,size:1,stride:20,offset:16}]),ye=a(U),ue=n(U,[{buffer:ye,size:2,type:U.FLOAT}]),pe=t(U,1,P,U.RGBA,U.UNSIGNED_BYTE);pe.minFilter=U.LINEAR,pe.magFilter=U.LINEAR;var ge=new z(U,[0,0],[[0,0,0],[0,0,0]],q,Q,te,ee,pe,W,X,ie,le,ye,ue,[0,0,0]),Te={levels:[[],[],[]]};for(var _e in N)Te[_e]=N[_e];return Te.colormap=Te.colormap||"jet",ge.update(Te),ge}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(c,M,A){var e=c("ndarray"),a=c("ndarray-ops"),n=c("typedarray-pool");M.exports=h;var t=null,r=null,f=null;function o(m){t=[m.LINEAR,m.NEAREST_MIPMAP_LINEAR,m.LINEAR_MIPMAP_NEAREST,m.LINEAR_MIPMAP_NEAREST],r=[m.NEAREST,m.LINEAR,m.NEAREST_MIPMAP_NEAREST,m.NEAREST_MIPMAP_LINEAR,m.LINEAR_MIPMAP_NEAREST,m.LINEAR_MIPMAP_LINEAR],f=[m.REPEAT,m.CLAMP_TO_EDGE,m.MIRRORED_REPEAT]}function i(m){return typeof HTMLCanvasElement!="undefined"&&m instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&m instanceof HTMLImageElement||typeof HTMLVideoElement!="undefined"&&m instanceof HTMLVideoElement||typeof ImageData!="undefined"&&m instanceof ImageData}var p=function(m,u){a.muls(m,u,255)};function d(m,u,L){var S=m.gl,k=S.getParameter(S.MAX_TEXTURE_SIZE);if(u<0||u>k||L<0||L>k)throw new Error("gl-texture2d: Invalid texture size");return m._shape=[u,L],m.bind(),S.texImage2D(S.TEXTURE_2D,0,m.format,u,L,0,m.format,m.type,null),m._mipLevels=[0],m}function y(m,u,L,S,k,P){this.gl=m,this.handle=u,this.format=k,this.type=P,this._shape=[L,S],this._mipLevels=[0],this._magFilter=m.NEAREST,this._minFilter=m.NEAREST,this._wrapS=m.CLAMP_TO_EDGE,this._wrapT=m.CLAMP_TO_EDGE,this._anisoSamples=1;var z=this,I=[this._wrapS,this._wrapT];Object.defineProperties(I,[{get:function(){return z._wrapS},set:function(R){return z.wrapS=R}},{get:function(){return z._wrapT},set:function(R){return z.wrapT=R}}]),this._wrapVector=I;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return z._shape[0]},set:function(R){return z.width=R}},{get:function(){return z._shape[1]},set:function(R){return z.height=R}}]),this._shapeVector=D}var v=y.prototype;Object.defineProperties(v,{minFilter:{get:function(){return this._minFilter},set:function(m){this.bind();var u=this.gl;if(this.type===u.FLOAT&&t.indexOf(m)>=0&&(u.getExtension("OES_texture_float_linear")||(m=u.NEAREST)),r.indexOf(m)<0)throw new Error("gl-texture2d: Unknown filter mode "+m);return u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,m),this._minFilter=m}},magFilter:{get:function(){return this._magFilter},set:function(m){this.bind();var u=this.gl;if(this.type===u.FLOAT&&t.indexOf(m)>=0&&(u.getExtension("OES_texture_float_linear")||(m=u.NEAREST)),r.indexOf(m)<0)throw new Error("gl-texture2d: Unknown filter mode "+m);return u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,m),this._magFilter=m}},mipSamples:{get:function(){return this._anisoSamples},set:function(m){var u=this._anisoSamples;if(this._anisoSamples=Math.max(m,1)|0,u!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(m){if(this.bind(),f.indexOf(m)<0)throw new Error("gl-texture2d: Unknown wrap mode "+m);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,m),this._wrapS=m}},wrapT:{get:function(){return this._wrapT},set:function(m){if(this.bind(),f.indexOf(m)<0)throw new Error("gl-texture2d: Unknown wrap mode "+m);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,m),this._wrapT=m}},wrap:{get:function(){return this._wrapVector},set:function(m){if(Array.isArray(m)||(m=[m,m]),m.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var u=0;u<2;++u)if(f.indexOf(m[u])<0)throw new Error("gl-texture2d: Unknown wrap mode "+m);this._wrapS=m[0],this._wrapT=m[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),m}},shape:{get:function(){return this._shapeVector},set:function(m){if(!Array.isArray(m))m=[m|0,m|0];else if(m.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return d(this,m[0]|0,m[1]|0),[m[0]|0,m[1]|0]}},width:{get:function(){return this._shape[0]},set:function(m){return m=m|0,d(this,m,this._shape[1]),m}},height:{get:function(){return this._shape[1]},set:function(m){return m=m|0,d(this,this._shape[0],m),m}}}),v.bind=function(m){var u=this.gl;return m!==void 0&&u.activeTexture(u.TEXTURE0+(m|0)),u.bindTexture(u.TEXTURE_2D,this.handle),m!==void 0?m|0:u.getParameter(u.ACTIVE_TEXTURE)-u.TEXTURE0},v.dispose=function(){this.gl.deleteTexture(this.handle)},v.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var m=Math.min(this._shape[0],this._shape[1]),u=0;m>0;++u,m>>>=1)this._mipLevels.indexOf(u)<0&&this._mipLevels.push(u)},v.setPixels=function(m,u,L,S){var k=this.gl;this.bind(),Array.isArray(u)?(S=L,L=u[1]|0,u=u[0]|0):(u=u||0,L=L||0),S=S||0;var P=i(m)?m:m.raw;if(P){var z=this._mipLevels.indexOf(S)<0;z?(k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(S)):k.texSubImage2D(k.TEXTURE_2D,S,u,L,this.format,this.type,P)}else if(m.shape&&m.stride&&m.data){if(m.shape.length<2||u+m.shape[1]>this._shape[1]>>>S||L+m.shape[0]>this._shape[0]>>>S||u<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");l(k,u,L,S,this.format,this.type,this._mipLevels,m)}else throw new Error("gl-texture2d: Unsupported data type")};function x(m,u){return m.length===3?u[2]===1&&u[1]===m[0]*m[2]&&u[0]===m[2]:u[0]===1&&u[1]===m[0]}function l(m,u,L,S,k,P,z,I){var D=I.dtype,R=I.shape.slice();if(R.length<2||R.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var B=0,F=0,V=x(R,I.stride.slice());if(D==="float32"?B=m.FLOAT:D==="float64"?(B=m.FLOAT,V=!1,D="float32"):D==="uint8"?B=m.UNSIGNED_BYTE:(B=m.UNSIGNED_BYTE,V=!1,D="uint8"),R.length===2)F=m.LUMINANCE,R=[R[0],R[1],1],I=e(I.data,R,[I.stride[0],I.stride[1],1],I.offset);else if(R.length===3)if(R[2]===1)F=m.ALPHA;else if(R[2]===2)F=m.LUMINANCE_ALPHA;else if(R[2]===3)F=m.RGB;else if(R[2]===4)F=m.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");if((F===m.LUMINANCE||F===m.ALPHA)&&(k===m.LUMINANCE||k===m.ALPHA)&&(F=k),F!==k)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Y=I.size,K=z.indexOf(S)<0;if(K&&z.push(S),B===P&&V)I.offset===0&&I.data.length===Y?K?m.texImage2D(m.TEXTURE_2D,S,k,R[0],R[1],0,k,P,I.data):m.texSubImage2D(m.TEXTURE_2D,S,u,L,R[0],R[1],k,P,I.data):K?m.texImage2D(m.TEXTURE_2D,S,k,R[0],R[1],0,k,P,I.data.subarray(I.offset,I.offset+Y)):m.texSubImage2D(m.TEXTURE_2D,S,u,L,R[0],R[1],k,P,I.data.subarray(I.offset,I.offset+Y));else{var J;P===m.FLOAT?J=n.mallocFloat32(Y):J=n.mallocUint8(Y);var G=e(J,R,[R[2],R[2]*R[0],1]);B===m.FLOAT&&P===m.UNSIGNED_BYTE?p(G,I):a.assign(G,I),K?m.texImage2D(m.TEXTURE_2D,S,k,R[0],R[1],0,k,P,J.subarray(0,Y)):m.texSubImage2D(m.TEXTURE_2D,S,u,L,R[0],R[1],k,P,J.subarray(0,Y)),P===m.FLOAT?n.freeFloat32(J):n.freeUint8(J)}}function _(m){var u=m.createTexture();return m.bindTexture(m.TEXTURE_2D,u),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),u}function s(m,u,L,S,k){var P=m.getParameter(m.MAX_TEXTURE_SIZE);if(u<0||u>P||L<0||L>P)throw new Error("gl-texture2d: Invalid texture shape");if(k===m.FLOAT&&!m.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var z=_(m);return m.texImage2D(m.TEXTURE_2D,0,S,u,L,0,S,k,null),new y(m,z,u,L,S,k)}function w(m,u,L,S,k,P){var z=_(m);return m.texImage2D(m.TEXTURE_2D,0,k,k,P,u),new y(m,z,L,S,k,P)}function b(m,u){var L=u.dtype,S=u.shape.slice(),k=m.getParameter(m.MAX_TEXTURE_SIZE);if(S[0]<0||S[0]>k||S[1]<0||S[1]>k)throw new Error("gl-texture2d: Invalid texture size");var P=x(S,u.stride.slice()),z=0;L==="float32"?z=m.FLOAT:L==="float64"?(z=m.FLOAT,P=!1,L="float32"):L==="uint8"?z=m.UNSIGNED_BYTE:(z=m.UNSIGNED_BYTE,P=!1,L="uint8");var I=0;if(S.length===2)I=m.LUMINANCE,S=[S[0],S[1],1],u=e(u.data,S,[u.stride[0],u.stride[1],1],u.offset);else if(S.length===3)if(S[2]===1)I=m.ALPHA;else if(S[2]===2)I=m.LUMINANCE_ALPHA;else if(S[2]===3)I=m.RGB;else if(S[2]===4)I=m.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");z===m.FLOAT&&!m.getExtension("OES_texture_float")&&(z=m.UNSIGNED_BYTE,P=!1);var D,R,B=u.size;if(P)u.offset===0&&u.data.length===B?D=u.data:D=u.data.subarray(u.offset,u.offset+B);else{var F=[S[2],S[2]*S[0],1];R=n.malloc(B,L);var V=e(R,S,F,0);(L==="float32"||L==="float64")&&z===m.UNSIGNED_BYTE?p(V,u):a.assign(V,u),D=R.subarray(0,B)}var Y=_(m);return m.texImage2D(m.TEXTURE_2D,0,I,S[0],S[1],0,I,z,D),P||n.free(R),new y(m,Y,S[0],S[1],I,z)}function h(m){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(t||o(m),typeof arguments[1]=="number")return s(m,arguments[1],arguments[2],arguments[3]||m.RGBA,arguments[4]||m.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return s(m,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||m.RGBA,arguments[3]||m.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var u=arguments[1],L=i(u)?u:u.raw;if(L)return w(m,L,u.width|0,u.height|0,arguments[2]||m.RGBA,arguments[3]||m.UNSIGNED_BYTE);if(u.shape&&u.data&&u.stride)return b(m,u)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(c,M,A){function e(a,n,t){n?n.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var r=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(t){if(t.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<t.length;++f){var o=t[f];if(o.buffer){var i=o.buffer,p=o.size||4,d=o.type||a.FLOAT,y=!!o.normalized,v=o.stride||0,x=o.offset||0;i.bind(),a.enableVertexAttribArray(f),a.vertexAttribPointer(f,p,d,y,v,x)}else{if(typeof o=="number")a.vertexAttrib1f(f,o);else if(o.length===1)a.vertexAttrib1f(f,o[0]);else if(o.length===2)a.vertexAttrib2f(f,o[0],o[1]);else if(o.length===3)a.vertexAttrib3f(f,o[0],o[1],o[2]);else if(o.length===4)a.vertexAttrib4f(f,o[0],o[1],o[2],o[3]);else throw new Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(f)}}for(;f<r;++f)a.disableVertexAttribArray(f)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var f=0;f<r;++f)a.disableVertexAttribArray(f)}}M.exports=e},{}],148:[function(c,M,A){var e=c("./do-bind.js");function a(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}a.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},a.prototype.update=function(t,r,f){this._elements=r,this._attributes=t,this._elementsType=f||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(t,r,f){f=f||0;var o=this.gl;this._elements?o.drawElements(t,r,this._elementsType,f):o.drawArrays(t,f,r)};function n(t){return new a(t)}M.exports=n},{"./do-bind.js":147}],149:[function(c,M,A){var e=c("./do-bind.js");function a(r,f,o,i,p,d){this.location=r,this.dimension=f,this.a=o,this.b=i,this.c=p,this.d=d}a.prototype.bind=function(r){switch(this.dimension){case 1:r.vertexAttrib1f(this.location,this.a);break;case 2:r.vertexAttrib2f(this.location,this.a,this.b);break;case 3:r.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:r.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function n(r,f,o){this.gl=r,this._ext=f,this.handle=o,this._attribs=[],this._useElements=!1,this._elementsType=r.UNSIGNED_SHORT}n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var r=0;r<this._attribs.length;++r)this._attribs[r].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(r,f,o){if(this.bind(),e(this.gl,f,r),this.unbind(),this._attribs.length=0,r)for(var i=0;i<r.length;++i){var p=r[i];typeof p=="number"?this._attribs.push(new a(i,1,p)):Array.isArray(p)&&this._attribs.push(new a(i,p.length,p[0],p[1],p[2],p[3]))}this._useElements=!!f,this._elementsType=o||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(r,f,o){o=o||0;var i=this.gl;this._useElements?i.drawElements(r,f,this._elementsType,o):i.drawArrays(r,o,f)};function t(r,f){return new n(r,f,f.createVertexArrayOES())}M.exports=t},{"./do-bind.js":147}],150:[function(c,M,A){var e=c("./lib/vao-native.js"),a=c("./lib/vao-emulated.js");function n(r){this.bindVertexArrayOES=r.bindVertexArray.bind(r),this.createVertexArrayOES=r.createVertexArray.bind(r),this.deleteVertexArrayOES=r.deleteVertexArray.bind(r)}function t(r,f,o,i){var p=r.createVertexArray?new n(r):r.getExtension("OES_vertex_array_object"),d;return p?d=e(r,p):d=a(r),d.update(f,o,i),d}M.exports=t},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(c,M,A){M.exports=e;function e(a,n,t){return a[0]=n[0]+t[0],a[1]=n[1]+t[1],a[2]=n[2]+t[2],a}},{}],152:[function(c,M,A){M.exports=t;var e=c("./fromValues"),a=c("./normalize"),n=c("./dot");function t(r,f){var o=e(r[0],r[1],r[2]),i=e(f[0],f[1],f[2]);a(o,o),a(i,i);var p=n(o,i);return p>1?0:Math.acos(p)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(c,M,A){M.exports=e;function e(a,n){return a[0]=Math.ceil(n[0]),a[1]=Math.ceil(n[1]),a[2]=Math.ceil(n[2]),a}},{}],154:[function(c,M,A){M.exports=e;function e(a){var n=new Float32Array(3);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n}},{}],155:[function(c,M,A){M.exports=e;function e(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a}},{}],156:[function(c,M,A){M.exports=e;function e(){var a=new Float32Array(3);return a[0]=0,a[1]=0,a[2]=0,a}},{}],157:[function(c,M,A){M.exports=e;function e(a,n,t){var r=n[0],f=n[1],o=n[2],i=t[0],p=t[1],d=t[2];return a[0]=f*d-o*p,a[1]=o*i-r*d,a[2]=r*p-f*i,a}},{}],158:[function(c,M,A){M.exports=c("./distance")},{"./distance":159}],159:[function(c,M,A){M.exports=e;function e(a,n){var t=n[0]-a[0],r=n[1]-a[1],f=n[2]-a[2];return Math.sqrt(t*t+r*r+f*f)}},{}],160:[function(c,M,A){M.exports=c("./divide")},{"./divide":161}],161:[function(c,M,A){M.exports=e;function e(a,n,t){return a[0]=n[0]/t[0],a[1]=n[1]/t[1],a[2]=n[2]/t[2],a}},{}],162:[function(c,M,A){M.exports=e;function e(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]}},{}],163:[function(c,M,A){M.exports=1e-6},{}],164:[function(c,M,A){M.exports=a;var e=c("./epsilon");function a(n,t){var r=n[0],f=n[1],o=n[2],i=t[0],p=t[1],d=t[2];return Math.abs(r-i)<=e*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(f-p)<=e*Math.max(1,Math.abs(f),Math.abs(p))&&Math.abs(o-d)<=e*Math.max(1,Math.abs(o),Math.abs(d))}},{"./epsilon":163}],165:[function(c,M,A){M.exports=e;function e(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]}},{}],166:[function(c,M,A){M.exports=e;function e(a,n){return a[0]=Math.floor(n[0]),a[1]=Math.floor(n[1]),a[2]=Math.floor(n[2]),a}},{}],167:[function(c,M,A){M.exports=a;var e=c("./create")();function a(n,t,r,f,o,i){var p,d;for(t||(t=3),r||(r=0),f?d=Math.min(f*t+r,n.length):d=n.length,p=r;p<d;p+=t)e[0]=n[p],e[1]=n[p+1],e[2]=n[p+2],o(e,e,i),n[p]=e[0],n[p+1]=e[1],n[p+2]=e[2];return n}},{"./create":156}],168:[function(c,M,A){M.exports=e;function e(a,n,t){var r=new Float32Array(3);return r[0]=a,r[1]=n,r[2]=t,r}},{}],169:[function(c,M,A){M.exports={EPSILON:c("./epsilon"),create:c("./create"),clone:c("./clone"),angle:c("./angle"),fromValues:c("./fromValues"),copy:c("./copy"),set:c("./set"),equals:c("./equals"),exactEquals:c("./exactEquals"),add:c("./add"),subtract:c("./subtract"),sub:c("./sub"),multiply:c("./multiply"),mul:c("./mul"),divide:c("./divide"),div:c("./div"),min:c("./min"),max:c("./max"),floor:c("./floor"),ceil:c("./ceil"),round:c("./round"),scale:c("./scale"),scaleAndAdd:c("./scaleAndAdd"),distance:c("./distance"),dist:c("./dist"),squaredDistance:c("./squaredDistance"),sqrDist:c("./sqrDist"),length:c("./length"),len:c("./len"),squaredLength:c("./squaredLength"),sqrLen:c("./sqrLen"),negate:c("./negate"),inverse:c("./inverse"),normalize:c("./normalize"),dot:c("./dot"),cross:c("./cross"),lerp:c("./lerp"),random:c("./random"),transformMat4:c("./transformMat4"),transformMat3:c("./transformMat3"),transformQuat:c("./transformQuat"),rotateX:c("./rotateX"),rotateY:c("./rotateY"),rotateZ:c("./rotateZ"),forEach:c("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(c,M,A){M.exports=e;function e(a,n){return a[0]=1/n[0],a[1]=1/n[1],a[2]=1/n[2],a}},{}],171:[function(c,M,A){M.exports=c("./length")},{"./length":172}],172:[function(c,M,A){M.exports=e;function e(a){var n=a[0],t=a[1],r=a[2];return Math.sqrt(n*n+t*t+r*r)}},{}],173:[function(c,M,A){M.exports=e;function e(a,n,t,r){var f=n[0],o=n[1],i=n[2];return a[0]=f+r*(t[0]-f),a[1]=o+r*(t[1]-o),a[2]=i+r*(t[2]-i),a}},{}],174:[function(c,M,A){M.exports=e;function e(a,n,t){return a[0]=Math.max(n[0],t[0]),a[1]=Math.max(n[1],t[1]),a[2]=Math.max(n[2],t[2]),a}},{}],175:[function(c,M,A){M.exports=e;function e(a,n,t){return a[0]=Math.min(n[0],t[0]),a[1]=Math.min(n[1],t[1]),a[2]=Math.min(n[2],t[2]),a}},{}],176:[function(c,M,A){M.exports=c("./multiply")},{"./multiply":177}],177:[function(c,M,A){M.exports=e;function e(a,n,t){return a[0]=n[0]*t[0],a[1]=n[1]*t[1],a[2]=n[2]*t[2],a}},{}],178:[function(c,M,A){M.exports=e;function e(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a}},{}],179:[function(c,M,A){M.exports=e;function e(a,n){var t=n[0],r=n[1],f=n[2],o=t*t+r*r+f*f;return o>0&&(o=1/Math.sqrt(o),a[0]=n[0]*o,a[1]=n[1]*o,a[2]=n[2]*o),a}},{}],180:[function(c,M,A){M.exports=e;function e(a,n){n=n||1;var t=Math.random()*2*Math.PI,r=Math.random()*2-1,f=Math.sqrt(1-r*r)*n;return a[0]=Math.cos(t)*f,a[1]=Math.sin(t)*f,a[2]=r*n,a}},{}],181:[function(c,M,A){M.exports=e;function e(a,n,t,r){var f=t[1],o=t[2],i=n[1]-f,p=n[2]-o,d=Math.sin(r),y=Math.cos(r);return a[0]=n[0],a[1]=f+i*y-p*d,a[2]=o+i*d+p*y,a}},{}],182:[function(c,M,A){M.exports=e;function e(a,n,t,r){var f=t[0],o=t[2],i=n[0]-f,p=n[2]-o,d=Math.sin(r),y=Math.cos(r);return a[0]=f+p*d+i*y,a[1]=n[1],a[2]=o+p*y-i*d,a}},{}],183:[function(c,M,A){M.exports=e;function e(a,n,t,r){var f=t[0],o=t[1],i=n[0]-f,p=n[1]-o,d=Math.sin(r),y=Math.cos(r);return a[0]=f+i*y-p*d,a[1]=o+i*d+p*y,a[2]=n[2],a}},{}],184:[function(c,M,A){M.exports=e;function e(a,n){return a[0]=Math.round(n[0]),a[1]=Math.round(n[1]),a[2]=Math.round(n[2]),a}},{}],185:[function(c,M,A){M.exports=e;function e(a,n,t){return a[0]=n[0]*t,a[1]=n[1]*t,a[2]=n[2]*t,a}},{}],186:[function(c,M,A){M.exports=e;function e(a,n,t,r){return a[0]=n[0]+t[0]*r,a[1]=n[1]+t[1]*r,a[2]=n[2]+t[2]*r,a}},{}],187:[function(c,M,A){M.exports=e;function e(a,n,t,r){return a[0]=n,a[1]=t,a[2]=r,a}},{}],188:[function(c,M,A){M.exports=c("./squaredDistance")},{"./squaredDistance":190}],189:[function(c,M,A){M.exports=c("./squaredLength")},{"./squaredLength":191}],190:[function(c,M,A){M.exports=e;function e(a,n){var t=n[0]-a[0],r=n[1]-a[1],f=n[2]-a[2];return t*t+r*r+f*f}},{}],191:[function(c,M,A){M.exports=e;function e(a){var n=a[0],t=a[1],r=a[2];return n*n+t*t+r*r}},{}],192:[function(c,M,A){M.exports=c("./subtract")},{"./subtract":193}],193:[function(c,M,A){M.exports=e;function e(a,n,t){return a[0]=n[0]-t[0],a[1]=n[1]-t[1],a[2]=n[2]-t[2],a}},{}],194:[function(c,M,A){M.exports=e;function e(a,n,t){var r=n[0],f=n[1],o=n[2];return a[0]=r*t[0]+f*t[3]+o*t[6],a[1]=r*t[1]+f*t[4]+o*t[7],a[2]=r*t[2]+f*t[5]+o*t[8],a}},{}],195:[function(c,M,A){M.exports=e;function e(a,n,t){var r=n[0],f=n[1],o=n[2],i=t[3]*r+t[7]*f+t[11]*o+t[15];return i=i||1,a[0]=(t[0]*r+t[4]*f+t[8]*o+t[12])/i,a[1]=(t[1]*r+t[5]*f+t[9]*o+t[13])/i,a[2]=(t[2]*r+t[6]*f+t[10]*o+t[14])/i,a}},{}],196:[function(c,M,A){M.exports=e;function e(a,n,t){var r=n[0],f=n[1],o=n[2],i=t[0],p=t[1],d=t[2],y=t[3],v=y*r+p*o-d*f,x=y*f+d*r-i*o,l=y*o+i*f-p*r,_=-i*r-p*f-d*o;return a[0]=v*y+_*-i+x*-d-l*-p,a[1]=x*y+_*-p+l*-i-v*-d,a[2]=l*y+_*-d+v*-p-x*-i,a}},{}],197:[function(c,M,A){M.exports=e;function e(a,n,t){return a[0]=n[0]+t[0],a[1]=n[1]+t[1],a[2]=n[2]+t[2],a[3]=n[3]+t[3],a}},{}],198:[function(c,M,A){M.exports=e;function e(a){var n=new Float32Array(4);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n}},{}],199:[function(c,M,A){M.exports=e;function e(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a}},{}],200:[function(c,M,A){M.exports=e;function e(){var a=new Float32Array(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}},{}],201:[function(c,M,A){M.exports=e;function e(a,n){var t=n[0]-a[0],r=n[1]-a[1],f=n[2]-a[2],o=n[3]-a[3];return Math.sqrt(t*t+r*r+f*f+o*o)}},{}],202:[function(c,M,A){M.exports=e;function e(a,n,t){return a[0]=n[0]/t[0],a[1]=n[1]/t[1],a[2]=n[2]/t[2],a[3]=n[3]/t[3],a}},{}],203:[function(c,M,A){M.exports=e;function e(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]}},{}],204:[function(c,M,A){M.exports=e;function e(a,n,t,r){var f=new Float32Array(4);return f[0]=a,f[1]=n,f[2]=t,f[3]=r,f}},{}],205:[function(c,M,A){M.exports={create:c("./create"),clone:c("./clone"),fromValues:c("./fromValues"),copy:c("./copy"),set:c("./set"),add:c("./add"),subtract:c("./subtract"),multiply:c("./multiply"),divide:c("./divide"),min:c("./min"),max:c("./max"),scale:c("./scale"),scaleAndAdd:c("./scaleAndAdd"),distance:c("./distance"),squaredDistance:c("./squaredDistance"),length:c("./length"),squaredLength:c("./squaredLength"),negate:c("./negate"),inverse:c("./inverse"),normalize:c("./normalize"),dot:c("./dot"),lerp:c("./lerp"),random:c("./random"),transformMat4:c("./transformMat4"),transformQuat:c("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(c,M,A){M.exports=e;function e(a,n){return a[0]=1/n[0],a[1]=1/n[1],a[2]=1/n[2],a[3]=1/n[3],a}},{}],207:[function(c,M,A){M.exports=e;function e(a){var n=a[0],t=a[1],r=a[2],f=a[3];return Math.sqrt(n*n+t*t+r*r+f*f)}},{}],208:[function(c,M,A){M.exports=e;function e(a,n,t,r){var f=n[0],o=n[1],i=n[2],p=n[3];return a[0]=f+r*(t[0]-f),a[1]=o+r*(t[1]-o),a[2]=i+r*(t[2]-i),a[3]=p+r*(t[3]-p),a}},{}],209:[function(c,M,A){M.exports=e;function e(a,n,t){return a[0]=Math.max(n[0],t[0]),a[1]=Math.max(n[1],t[1]),a[2]=Math.max(n[2],t[2]),a[3]=Math.max(n[3],t[3]),a}},{}],210:[function(c,M,A){M.exports=e;function e(a,n,t){return a[0]=Math.min(n[0],t[0]),a[1]=Math.min(n[1],t[1]),a[2]=Math.min(n[2],t[2]),a[3]=Math.min(n[3],t[3]),a}},{}],211:[function(c,M,A){M.exports=e;function e(a,n,t){return a[0]=n[0]*t[0],a[1]=n[1]*t[1],a[2]=n[2]*t[2],a[3]=n[3]*t[3],a}},{}],212:[function(c,M,A){M.exports=e;function e(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a[3]=-n[3],a}},{}],213:[function(c,M,A){M.exports=e;function e(a,n){var t=n[0],r=n[1],f=n[2],o=n[3],i=t*t+r*r+f*f+o*o;return i>0&&(i=1/Math.sqrt(i),a[0]=t*i,a[1]=r*i,a[2]=f*i,a[3]=o*i),a}},{}],214:[function(c,M,A){var e=c("./normalize"),a=c("./scale");M.exports=n;function n(t,r){return r=r||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),e(t,t),a(t,t,r),t}},{"./normalize":213,"./scale":215}],215:[function(c,M,A){M.exports=e;function e(a,n,t){return a[0]=n[0]*t,a[1]=n[1]*t,a[2]=n[2]*t,a[3]=n[3]*t,a}},{}],216:[function(c,M,A){M.exports=e;function e(a,n,t,r){return a[0]=n[0]+t[0]*r,a[1]=n[1]+t[1]*r,a[2]=n[2]+t[2]*r,a[3]=n[3]+t[3]*r,a}},{}],217:[function(c,M,A){M.exports=e;function e(a,n,t,r,f){return a[0]=n,a[1]=t,a[2]=r,a[3]=f,a}},{}],218:[function(c,M,A){M.exports=e;function e(a,n){var t=n[0]-a[0],r=n[1]-a[1],f=n[2]-a[2],o=n[3]-a[3];return t*t+r*r+f*f+o*o}},{}],219:[function(c,M,A){M.exports=e;function e(a){var n=a[0],t=a[1],r=a[2],f=a[3];return n*n+t*t+r*r+f*f}},{}],220:[function(c,M,A){M.exports=e;function e(a,n,t){return a[0]=n[0]-t[0],a[1]=n[1]-t[1],a[2]=n[2]-t[2],a[3]=n[3]-t[3],a}},{}],221:[function(c,M,A){M.exports=e;function e(a,n,t){var r=n[0],f=n[1],o=n[2],i=n[3];return a[0]=t[0]*r+t[4]*f+t[8]*o+t[12]*i,a[1]=t[1]*r+t[5]*f+t[9]*o+t[13]*i,a[2]=t[2]*r+t[6]*f+t[10]*o+t[14]*i,a[3]=t[3]*r+t[7]*f+t[11]*o+t[15]*i,a}},{}],222:[function(c,M,A){M.exports=e;function e(a,n,t){var r=n[0],f=n[1],o=n[2],i=t[0],p=t[1],d=t[2],y=t[3],v=y*r+p*o-d*f,x=y*f+d*r-i*o,l=y*o+i*f-p*r,_=-i*r-p*f-d*o;return a[0]=v*y+_*-i+x*-d-l*-p,a[1]=x*y+_*-p+l*-i-v*-d,a[2]=l*y+_*-d+v*-p-x*-i,a[3]=n[3],a}},{}],223:[function(c,M,A){var e=c("glsl-tokenizer"),a=c("atob-lite");M.exports=n;function n(t){for(var r=Array.isArray(t)?t:e(t),f=0;f<r.length;f++){var o=r[f];if(o.type==="preprocessor"){var i=o.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!i&&!!i[2]){var p=i[1],d=i[2];return(p?a(d):d).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(c,M,A){M.exports=u;var e=c("./lib/literals"),a=c("./lib/operators"),n=c("./lib/builtins"),t=c("./lib/literals-300es"),r=c("./lib/builtins-300es"),f=999,o=9999,i=0,p=1,d=2,y=3,v=4,x=5,l=6,_=7,s=8,w=9,b=10,h=11,m=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function u(L){var S=0,k=0,P=f,z,I,D=[],R=[],B=1,F=0,V=0,Y=!1,K=!1,J="",G;L=L||{};var Z=n,re=e;L.version==="300 es"&&(Z=r,re=t);for(var se={},oe={},S=0;S<Z.length;S++)se[Z[S]]=!0;for(var S=0;S<re.length;S++)oe[re[S]]=!0;return function(Te){return R=[],Te!==null?U(Te):q()};function N(Te){Te.length&&R.push({type:m[P],data:Te,position:V,line:B,column:F})}function U(Te){S=0,Te.toString&&(Te=Te.toString()),J+=Te.replace(/\r\n/g,`
`),G=J.length;for(var _e;z=J[S],S<G;){switch(_e=S,P){case i:S=ee();break;case p:S=te();break;case d:S=X();break;case y:S=ie();break;case v:S=ue();break;case h:S=ye();break;case x:S=pe();break;case o:S=ge();break;case w:S=W();break;case f:S=Q();break}if(_e!==S)switch(J[_e]){case`
`:F=0,++B;break;default:++F;break}}return k+=S,J=J.slice(S),R}function q(Te){return D.length&&N(D.join("")),P=b,N("(eof)"),R}function Q(){return D=D.length?[]:D,I==="/"&&z==="*"?(V=k+S-1,P=i,I=z,S+1):I==="/"&&z==="/"?(V=k+S-1,P=p,I=z,S+1):z==="#"?(P=d,V=k+S,S):/\s/.test(z)?(P=w,V=k+S,S):(Y=/\d/.test(z),K=/[^\w_]/.test(z),V=k+S,P=Y?v:K?y:o,S)}function W(){return/[^\s]/g.test(z)?(N(D.join("")),P=f,S):(D.push(z),I=z,S+1)}function X(){return(z==="\r"||z===`
`)&&I!=="\\"?(N(D.join("")),P=f,S):(D.push(z),I=z,S+1)}function te(){return X()}function ee(){return z==="/"&&I==="*"?(D.push(z),N(D.join("")),P=f,S+1):(D.push(z),I=z,S+1)}function ie(){if(I==="."&&/\d/.test(z))return P=x,S;if(I==="/"&&z==="*")return P=i,S;if(I==="/"&&z==="/")return P=p,S;if(z==="."&&D.length){for(;le(D););return P=x,S}if(z===";"||z===")"||z==="("){if(D.length)for(;le(D););return N(z),P=f,S+1}var Te=D.length===2&&z!=="=";if(/[\w_\d\s]/.test(z)||Te){for(;le(D););return P=f,S}return D.push(z),I=z,S+1}function le(Te){var _e=0,De,Oe;do{if(De=a.indexOf(Te.slice(0,Te.length+_e).join("")),Oe=a[De],De===-1){if(_e--+Te.length>0)continue;Oe=Te.slice(0,1).join("")}return N(Oe),V+=Oe.length,D=D.slice(Oe.length),D.length}while(1)}function ye(){return/[^a-fA-F0-9]/.test(z)?(N(D.join("")),P=f,S):(D.push(z),I=z,S+1)}function ue(){return z==="."||/[eE]/.test(z)?(D.push(z),P=x,I=z,S+1):z==="x"&&D.length===1&&D[0]==="0"?(P=h,D.push(z),I=z,S+1):/[^\d]/.test(z)?(N(D.join("")),P=f,S):(D.push(z),I=z,S+1)}function pe(){return z==="f"&&(D.push(z),I=z,S+=1),/[eE]/.test(z)||(z==="-"||z==="+")&&/[eE]/.test(I)?(D.push(z),I=z,S+1):/[^\d]/.test(z)?(N(D.join("")),P=f,S):(D.push(z),I=z,S+1)}function ge(){if(/[^\d\w_]/.test(z)){var Te=D.join("");return oe[Te]?P=s:se[Te]?P=_:P=l,N(D.join("")),P=f,S}return D.push(z),I=z,S+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(c,M,A){var e=c("./builtins");e=e.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),M.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(c,M,A){M.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(c,M,A){var e=c("./literals");M.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(c,M,A){M.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(c,M,A){M.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(c,M,A){var e=c("./index");M.exports=a;function a(n,t){var r=e(t),f=[];return f=f.concat(r(n)),f=f.concat(r(null)),f}},{"./index":224}],231:[function(c,M,A){M.exports=function(e){typeof e=="string"&&(e=[e]);for(var a=[].slice.call(arguments,1),n=[],t=0;t<e.length-1;t++)n.push(e[t],a[t]||"");return n.push(e[t]),n.join("")}},{}],232:[function(c,M,A){var e=c("is-browser");function a(){var n=!1;try{var t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{n=!1}return n}M.exports=e&&a()},{"is-browser":236}],233:[function(c,M,A){M.exports=y;var e=c("robust-orientation"),a=c("simplicial-complex").compareCells;function n(v,x,l){this.vertices=v,this.adjacent=x,this.boundary=l,this.lastVisited=-1}n.prototype.flip=function(){var v=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=v;var x=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=x};function t(v,x,l){this.vertices=v,this.cell=x,this.index=l}function r(v,x){return a(v.vertices,x.vertices)}function f(v){return function(){var x=this.tuple;return v.apply(this,x)}}function o(v){var x=e[v+1];return x||(x=e),f(x)}var i=[];function p(v,x,l){this.dimension=v,this.vertices=x,this.simplices=l,this.interior=l.filter(function(w){return!w.boundary}),this.tuple=new Array(v+1);for(var _=0;_<=v;++_)this.tuple[_]=this.vertices[_];var s=i[v];s||(s=i[v]=o(v)),this.orient=s}var d=p.prototype;d.handleBoundaryDegeneracy=function(v,x){var l=this.dimension,_=this.vertices.length-1,s=this.tuple,w=this.vertices,b=[v];for(v.lastVisited=-_;b.length>0;){v=b.pop();for(var h=v.adjacent,m=0;m<=l;++m){var u=h[m];if(!(!u.boundary||u.lastVisited<=-_)){for(var L=u.vertices,S=0;S<=l;++S){var k=L[S];k<0?s[S]=x:s[S]=w[k]}var P=this.orient();if(P>0)return u;u.lastVisited=-_,P===0&&b.push(u)}}}return null},d.walk=function(v,x){var l=this.vertices.length-1,_=this.dimension,s=this.vertices,w=this.tuple,b=x?this.interior.length*Math.random()|0:this.interior.length-1,h=this.interior[b];e:for(;!h.boundary;){for(var m=h.vertices,u=h.adjacent,L=0;L<=_;++L)w[L]=s[m[L]];h.lastVisited=l;for(var L=0;L<=_;++L){var S=u[L];if(!(S.lastVisited>=l)){var k=w[L];w[L]=v;var P=this.orient();if(w[L]=k,P<0){h=S;continue e}else S.boundary?S.lastVisited=-l:S.lastVisited=l}}return}return h},d.addPeaks=function(v,x){var l=this.vertices.length-1,_=this.dimension,s=this.vertices,w=this.tuple,b=this.interior,h=this.simplices,m=[x];x.lastVisited=l,x.vertices[x.vertices.indexOf(-1)]=l,x.boundary=!1,b.push(x);for(var u=[];m.length>0;){var x=m.pop(),L=x.vertices,S=x.adjacent,k=L.indexOf(l);if(!(k<0)){for(var P=0;P<=_;++P)if(P!==k){var z=S[P];if(!(!z.boundary||z.lastVisited>=l)){var I=z.vertices;if(z.lastVisited!==-l){for(var D=0,R=0;R<=_;++R)I[R]<0?(D=R,w[R]=v):w[R]=s[I[R]];var B=this.orient();if(B>0){I[D]=l,z.boundary=!1,b.push(z),m.push(z),z.lastVisited=l;continue}else z.lastVisited=-l}var F=z.adjacent,V=L.slice(),Y=S.slice(),K=new n(V,Y,!0);h.push(K);var J=F.indexOf(x);if(!(J<0)){F[J]=K,Y[k]=z,V[P]=-1,Y[P]=x,S[P]=K,K.flip();for(var R=0;R<=_;++R){var G=V[R];if(!(G<0||G===l)){for(var Z=new Array(_-1),re=0,se=0;se<=_;++se){var oe=V[se];oe<0||se===R||(Z[re++]=oe)}u.push(new t(Z,K,R))}}}}}}}u.sort(r);for(var P=0;P+1<u.length;P+=2){var N=u[P],U=u[P+1],q=N.index,Q=U.index;q<0||Q<0||(N.cell.adjacent[N.index]=U.cell,U.cell.adjacent[U.index]=N.cell)}},d.insert=function(v,x){var l=this.vertices;l.push(v);var _=this.walk(v,x);if(!!_){for(var s=this.dimension,w=this.tuple,b=0;b<=s;++b){var h=_.vertices[b];h<0?w[b]=v:w[b]=l[h]}var m=this.orient(w);m<0||m===0&&(_=this.handleBoundaryDegeneracy(_,v),!_)||this.addPeaks(v,_)}},d.boundary=function(){for(var v=this.dimension,x=[],l=this.simplices,_=l.length,s=0;s<_;++s){var w=l[s];if(w.boundary){for(var b=new Array(v),h=w.vertices,m=0,u=0,L=0;L<=v;++L)h[L]>=0?b[m++]=h[L]:u=L&1;if(u===(v&1)){var S=b[0];b[0]=b[1],b[1]=S}x.push(b)}}return x};function y(v,x){var l=v.length;if(l===0)throw new Error("Must have at least d+1 points");var _=v[0].length;if(l<=_)throw new Error("Must input at least d+1 points");var s=v.slice(0,_+1),w=e.apply(void 0,s);if(w===0)throw new Error("Input not in general position");for(var b=new Array(_+1),h=0;h<=_;++h)b[h]=h;w<0&&(b[0]=1,b[1]=0);for(var m=new n(b,new Array(_+1),!1),u=m.adjacent,L=new Array(_+2),h=0;h<=_;++h){for(var S=b.slice(),k=0;k<=_;++k)k===h&&(S[k]=-1);var P=S[0];S[0]=S[1],S[1]=P;var z=new n(S,new Array(_+1),!0);u[h]=z,L[h]=z}L[_+1]=m;for(var h=0;h<=_;++h)for(var S=u[h].vertices,I=u[h].adjacent,k=0;k<=_;++k){var D=S[k];if(D<0){I[k]=m;continue}for(var R=0;R<=_;++R)u[R].vertices.indexOf(D)<0&&(I[k]=u[R])}for(var B=new p(_,s,L),F=!!x,h=_+1;h<l;++h)B.insert(v[h],F);return B.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(c,M,A){var e=c("binary-search-bounds"),a=0,n=1,t=2;M.exports=m;function r(u,L,S,k,P){this.mid=u,this.left=L,this.right=S,this.leftPoints=k,this.rightPoints=P,this.count=(L?L.count:0)+(S?S.count:0)+k.length}var f=r.prototype;function o(u,L){u.mid=L.mid,u.left=L.left,u.right=L.right,u.leftPoints=L.leftPoints,u.rightPoints=L.rightPoints,u.count=L.count}function i(u,L){var S=w(L);u.mid=S.mid,u.left=S.left,u.right=S.right,u.leftPoints=S.leftPoints,u.rightPoints=S.rightPoints,u.count=S.count}function p(u,L){var S=u.intervals([]);S.push(L),i(u,S)}function d(u,L){var S=u.intervals([]),k=S.indexOf(L);return k<0?a:(S.splice(k,1),i(u,S),n)}f.intervals=function(u){return u.push.apply(u,this.leftPoints),this.left&&this.left.intervals(u),this.right&&this.right.intervals(u),u},f.insert=function(u){var L=this.count-this.leftPoints.length;if(this.count+=1,u[1]<this.mid)this.left?4*(this.left.count+1)>3*(L+1)?p(this,u):this.left.insert(u):this.left=w([u]);else if(u[0]>this.mid)this.right?4*(this.right.count+1)>3*(L+1)?p(this,u):this.right.insert(u):this.right=w([u]);else{var S=e.ge(this.leftPoints,u,_),k=e.ge(this.rightPoints,u,s);this.leftPoints.splice(S,0,u),this.rightPoints.splice(k,0,u)}},f.remove=function(u){var L=this.count-this.leftPoints;if(u[1]<this.mid){if(!this.left)return a;var S=this.right?this.right.count:0;if(4*S>3*(L-1))return d(this,u);var k=this.left.remove(u);return k===t?(this.left=null,this.count-=1,n):(k===n&&(this.count-=1),k)}else if(u[0]>this.mid){if(!this.right)return a;var P=this.left?this.left.count:0;if(4*P>3*(L-1))return d(this,u);var k=this.right.remove(u);return k===t?(this.right=null,this.count-=1,n):(k===n&&(this.count-=1),k)}else{if(this.count===1)return this.leftPoints[0]===u?t:a;if(this.leftPoints.length===1&&this.leftPoints[0]===u){if(this.left&&this.right){for(var z=this,I=this.left;I.right;)z=I,I=I.right;if(z===this)I.right=this.right;else{var D=this.left,k=this.right;z.count-=I.count,z.right=I.left,I.left=D,I.right=k}o(this,I),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?o(this,this.left):o(this,this.right);return n}for(var D=e.ge(this.leftPoints,u,_);D<this.leftPoints.length&&this.leftPoints[D][0]===u[0];++D)if(this.leftPoints[D]===u){this.count-=1,this.leftPoints.splice(D,1);for(var k=e.ge(this.rightPoints,u,s);k<this.rightPoints.length&&this.rightPoints[k][1]===u[1];++k)if(this.rightPoints[k]===u)return this.rightPoints.splice(k,1),n}return a}};function y(u,L,S){for(var k=0;k<u.length&&u[k][0]<=L;++k){var P=S(u[k]);if(P)return P}}function v(u,L,S){for(var k=u.length-1;k>=0&&u[k][1]>=L;--k){var P=S(u[k]);if(P)return P}}function x(u,L){for(var S=0;S<u.length;++S){var k=L(u[S]);if(k)return k}}f.queryPoint=function(u,L){if(u<this.mid){if(this.left){var S=this.left.queryPoint(u,L);if(S)return S}return y(this.leftPoints,u,L)}else if(u>this.mid){if(this.right){var S=this.right.queryPoint(u,L);if(S)return S}return v(this.rightPoints,u,L)}else return x(this.leftPoints,L)},f.queryInterval=function(u,L,S){if(u<this.mid&&this.left){var k=this.left.queryInterval(u,L,S);if(k)return k}if(L>this.mid&&this.right){var k=this.right.queryInterval(u,L,S);if(k)return k}return L<this.mid?y(this.leftPoints,L,S):u>this.mid?v(this.rightPoints,u,S):x(this.leftPoints,S)};function l(u,L){return u-L}function _(u,L){var S=u[0]-L[0];return S||u[1]-L[1]}function s(u,L){var S=u[1]-L[1];return S||u[0]-L[0]}function w(u){if(u.length===0)return null;for(var L=[],S=0;S<u.length;++S)L.push(u[S][0],u[S][1]);L.sort(l);for(var k=L[L.length>>1],P=[],z=[],I=[],S=0;S<u.length;++S){var D=u[S];D[1]<k?P.push(D):k<D[0]?z.push(D):I.push(D)}var R=I,B=I.slice();return R.sort(_),B.sort(s),new r(k,w(P),w(z),R,B)}function b(u){this.root=u}var h=b.prototype;h.insert=function(u){this.root?this.root.insert(u):this.root=new r(u[0],null,null,[u],[u])},h.remove=function(u){if(this.root){var L=this.root.remove(u);return L===t&&(this.root=null),L!==a}return!1},h.queryPoint=function(u,L){if(this.root)return this.root.queryPoint(u,L)},h.queryInterval=function(u,L,S){if(u<=L&&this.root)return this.root.queryInterval(u,L,S)},Object.defineProperty(h,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(h,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function m(u){return!u||u.length===0?new b(null):new b(w(u))}},{"binary-search-bounds":31}],235:[function(c,M,A){function e(a){for(var n=new Array(a),t=0;t<a;++t)n[t]=t;return n}M.exports=e},{}],236:[function(c,M,A){M.exports=!0},{}],237:[function(c,M,A){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */M.exports=function(n){return n!=null&&(e(n)||a(n)||!!n._isBuffer)};function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function a(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}},{}],238:[function(c,M,A){M.exports=n,M.exports.isMobile=n,M.exports.default=n;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function n(t){t||(t={});var r=t.ua;if(!r&&typeof navigator!="undefined"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),typeof r!="string")return!1;var f=t.tablet?a.test(r):e.test(r);return!f&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&r.indexOf("Macintosh")!==-1&&r.indexOf("Safari")!==-1&&(f=!0),f}},{}],239:[function(c,M,A){M.exports=function(e){for(var a=e.length,n,t=0;t<a;t++)if(n=e.charCodeAt(t),(n<9||n>13)&&n!==32&&n!==133&&n!==160&&n!==5760&&n!==6158&&(n<8192||n>8205)&&n!==8232&&n!==8233&&n!==8239&&n!==8287&&n!==8288&&n!==12288&&n!==65279)return!1;return!0}},{}],240:[function(c,M,A){function e(a,n,t){return a*(1-t)+n*t}M.exports=e},{}],241:[function(c,M,A){var e=c("./normalize"),a=c("gl-mat4/create"),n=c("gl-mat4/clone"),t=c("gl-mat4/determinant"),r=c("gl-mat4/invert"),f=c("gl-mat4/transpose"),o={length:c("gl-vec3/length"),normalize:c("gl-vec3/normalize"),dot:c("gl-vec3/dot"),cross:c("gl-vec3/cross")},i=a(),p=a(),d=[0,0,0,0],y=[[0,0,0],[0,0,0],[0,0,0]],v=[0,0,0];M.exports=function(w,b,h,m,u,L){if(b||(b=[0,0,0]),h||(h=[0,0,0]),m||(m=[0,0,0]),u||(u=[0,0,0,1]),L||(L=[0,0,0,1]),!e(i,w)||(n(p,i),p[3]=0,p[7]=0,p[11]=0,p[15]=1,Math.abs(t(p)<1e-8)))return!1;var S=i[3],k=i[7],P=i[11],z=i[12],I=i[13],D=i[14],R=i[15];if(S!==0||k!==0||P!==0){d[0]=S,d[1]=k,d[2]=P,d[3]=R;var B=r(p,p);if(!B)return!1;f(p,p),x(u,d,p)}else u[0]=u[1]=u[2]=0,u[3]=1;if(b[0]=z,b[1]=I,b[2]=D,l(y,i),h[0]=o.length(y[0]),o.normalize(y[0],y[0]),m[0]=o.dot(y[0],y[1]),_(y[1],y[1],y[0],1,-m[0]),h[1]=o.length(y[1]),o.normalize(y[1],y[1]),m[0]/=h[1],m[1]=o.dot(y[0],y[2]),_(y[2],y[2],y[0],1,-m[1]),m[2]=o.dot(y[1],y[2]),_(y[2],y[2],y[1],1,-m[2]),h[2]=o.length(y[2]),o.normalize(y[2],y[2]),m[1]/=h[2],m[2]/=h[2],o.cross(v,y[1],y[2]),o.dot(y[0],v)<0)for(var F=0;F<3;F++)h[F]*=-1,y[F][0]*=-1,y[F][1]*=-1,y[F][2]*=-1;return L[0]=.5*Math.sqrt(Math.max(1+y[0][0]-y[1][1]-y[2][2],0)),L[1]=.5*Math.sqrt(Math.max(1-y[0][0]+y[1][1]-y[2][2],0)),L[2]=.5*Math.sqrt(Math.max(1-y[0][0]-y[1][1]+y[2][2],0)),L[3]=.5*Math.sqrt(Math.max(1+y[0][0]+y[1][1]+y[2][2],0)),y[2][1]>y[1][2]&&(L[0]=-L[0]),y[0][2]>y[2][0]&&(L[1]=-L[1]),y[1][0]>y[0][1]&&(L[2]=-L[2]),!0};function x(s,w,b){var h=w[0],m=w[1],u=w[2],L=w[3];return s[0]=b[0]*h+b[4]*m+b[8]*u+b[12]*L,s[1]=b[1]*h+b[5]*m+b[9]*u+b[13]*L,s[2]=b[2]*h+b[6]*m+b[10]*u+b[14]*L,s[3]=b[3]*h+b[7]*m+b[11]*u+b[15]*L,s}function l(s,w){s[0][0]=w[0],s[0][1]=w[1],s[0][2]=w[2],s[1][0]=w[4],s[1][1]=w[5],s[1][2]=w[6],s[2][0]=w[8],s[2][1]=w[9],s[2][2]=w[10]}function _(s,w,b,h,m){s[0]=w[0]*h+b[0]*m,s[1]=w[1]*h+b[1]*m,s[2]=w[2]*h+b[2]*m}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(c,M,A){M.exports=function(a,n){var t=n[15];if(t===0)return!1;for(var r=1/t,f=0;f<16;f++)a[f]=n[f]*r;return!0}},{}],243:[function(c,M,A){var e=c("gl-vec3/lerp"),a=c("mat4-recompose"),n=c("mat4-decompose"),t=c("gl-mat4/determinant"),r=c("quat-slerp"),f=d(),o=d(),i=d();M.exports=p;function p(x,l,_,s){if(t(l)===0||t(_)===0)return!1;var w=n(l,f.translate,f.scale,f.skew,f.perspective,f.quaternion),b=n(_,o.translate,o.scale,o.skew,o.perspective,o.quaternion);return!w||!b?!1:(e(i.translate,f.translate,o.translate,s),e(i.skew,f.skew,o.skew,s),e(i.scale,f.scale,o.scale,s),e(i.perspective,f.perspective,o.perspective,s),r(i.quaternion,f.quaternion,o.quaternion,s),a(x,i.translate,i.scale,i.skew,i.perspective,i.quaternion),!0)}function d(){return{translate:y(),scale:y(1),skew:y(),perspective:v(),quaternion:v()}}function y(x){return[x||0,x||0,x||0]}function v(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(c,M,A){var e={identity:c("gl-mat4/identity"),translate:c("gl-mat4/translate"),multiply:c("gl-mat4/multiply"),create:c("gl-mat4/create"),scale:c("gl-mat4/scale"),fromRotationTranslation:c("gl-mat4/fromRotationTranslation")};e.create();var a=e.create();M.exports=function(t,r,f,o,i,p){return e.identity(t),e.fromRotationTranslation(t,p,r),t[3]=i[0],t[7]=i[1],t[11]=i[2],t[15]=i[3],e.identity(a),o[2]!==0&&(a[9]=o[2],e.multiply(t,t,a)),o[1]!==0&&(a[9]=0,a[8]=o[1],e.multiply(t,t,a)),o[0]!==0&&(a[8]=0,a[4]=o[0],e.multiply(t,t,a)),e.scale(t,t,f),t}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(c,M,A){var e=c("binary-search-bounds"),a=c("mat4-interpolate"),n=c("gl-mat4/invert"),t=c("gl-mat4/rotateX"),r=c("gl-mat4/rotateY"),f=c("gl-mat4/rotateZ"),o=c("gl-mat4/lookAt"),i=c("gl-mat4/translate");c("gl-mat4/scale");var p=c("gl-vec3/normalize"),d=[0,0,0];M.exports=l;function y(_){this._components=_.slice(),this._time=[0],this.prevMatrix=_.slice(),this.nextMatrix=_.slice(),this.computedMatrix=_.slice(),this.computedInverse=_.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var v=y.prototype;v.recalcMatrix=function(_){var s=this._time,w=e.le(s,_),b=this.computedMatrix;if(!(w<0)){var h=this._components;if(w===s.length-1)for(var m=16*w,u=0;u<16;++u)b[u]=h[m++];else{for(var L=s[w+1]-s[w],m=16*w,S=this.prevMatrix,k=!0,u=0;u<16;++u)S[u]=h[m++];for(var P=this.nextMatrix,u=0;u<16;++u)P[u]=h[m++],k=k&&S[u]===P[u];if(L<1e-6||k)for(var u=0;u<16;++u)b[u]=S[u];else a(b,S,P,(_-s[w])/L)}var z=this.computedUp;z[0]=b[1],z[1]=b[5],z[2]=b[9],p(z,z);var I=this.computedInverse;n(I,b);var D=this.computedEye,R=I[15];D[0]=I[12]/R,D[1]=I[13]/R,D[2]=I[14]/R;for(var B=this.computedCenter,F=Math.exp(this.computedRadius[0]),u=0;u<3;++u)B[u]=D[u]-b[2+4*u]*F}},v.idle=function(_){if(!(_<this.lastT())){for(var s=this._components,w=s.length-16,b=0;b<16;++b)s.push(s[w++]);this._time.push(_)}},v.flush=function(_){var s=e.gt(this._time,_)-2;s<0||(this._time.splice(0,s),this._components.splice(0,16*s))},v.lastT=function(){return this._time[this._time.length-1]},v.lookAt=function(_,s,w,b){this.recalcMatrix(_),s=s||this.computedEye,w=w||d,b=b||this.computedUp,this.setMatrix(_,o(this.computedMatrix,s,w,b));for(var h=0,m=0;m<3;++m)h+=Math.pow(w[m]-s[m],2);h=Math.log(Math.sqrt(h)),this.computedRadius[0]=h},v.rotate=function(_,s,w,b){this.recalcMatrix(_);var h=this.computedInverse;s&&r(h,h,s),w&&t(h,h,w),b&&f(h,h,b),this.setMatrix(_,n(this.computedMatrix,h))};var x=[0,0,0];v.pan=function(_,s,w,b){x[0]=-(s||0),x[1]=-(w||0),x[2]=-(b||0),this.recalcMatrix(_);var h=this.computedInverse;i(h,h,x),this.setMatrix(_,n(h,h))},v.translate=function(_,s,w,b){x[0]=s||0,x[1]=w||0,x[2]=b||0,this.recalcMatrix(_);var h=this.computedMatrix;i(h,h,x),this.setMatrix(_,h)},v.setMatrix=function(_,s){if(!(_<this.lastT())){this._time.push(_);for(var w=0;w<16;++w)this._components.push(s[w])}},v.setDistance=function(_,s){this.computedRadius[0]=s},v.setDistanceLimits=function(_,s){var w=this._limits;w[0]=_,w[1]=s},v.getDistanceLimits=function(_){var s=this._limits;return _?(_[0]=s[0],_[1]=s[1],_):s};function l(_){_=_||{};var s=_.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new y(s)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(c,M,A){M.exports=a;var e=c("robust-orientation")[3];function a(n){var t=n.length;if(t<3){for(var v=new Array(t),r=0;r<t;++r)v[r]=r;return t===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:v}for(var f=new Array(t),r=0;r<t;++r)f[r]=r;f.sort(function(s,w){var b=n[s][0]-n[w][0];return b||n[s][1]-n[w][1]});for(var o=[f[0],f[1]],i=[f[0],f[1]],r=2;r<t;++r){for(var p=f[r],d=n[p],y=o.length;y>1&&e(n[o[y-2]],n[o[y-1]],d)<=0;)y-=1,o.pop();for(o.push(p),y=i.length;y>1&&e(n[i[y-2]],n[i[y-1]],d)>=0;)y-=1,i.pop();i.push(p)}for(var v=new Array(i.length+o.length-2),x=0,r=0,l=o.length;r<l;++r)v[x++]=o[r];for(var _=i.length-2;_>0;--_)v[x++]=i[_];return v}},{"robust-orientation":284}],247:[function(c,M,A){M.exports=a;var e=c("mouse-event");function a(n,t){t||(t=n,n=window);var r=0,f=0,o=0,i={shift:!1,alt:!1,control:!1,meta:!1},p=!1;function d(u){var L=!1;return"altKey"in u&&(L=L||u.altKey!==i.alt,i.alt=!!u.altKey),"shiftKey"in u&&(L=L||u.shiftKey!==i.shift,i.shift=!!u.shiftKey),"ctrlKey"in u&&(L=L||u.ctrlKey!==i.control,i.control=!!u.ctrlKey),"metaKey"in u&&(L=L||u.metaKey!==i.meta,i.meta=!!u.metaKey),L}function y(u,L){var S=e.x(L),k=e.y(L);"buttons"in L&&(u=L.buttons|0),(u!==r||S!==f||k!==o||d(L))&&(r=u|0,f=S||0,o=k||0,t&&t(r,f,o,i))}function v(u){y(0,u)}function x(){(r||f||o||i.shift||i.alt||i.meta||i.control)&&(f=o=0,r=0,i.shift=i.alt=i.control=i.meta=!1,t&&t(0,0,0,i))}function l(u){d(u)&&t&&t(r,f,o,i)}function _(u){e.buttons(u)===0?y(0,u):y(r,u)}function s(u){y(r|e.buttons(u),u)}function w(u){y(r&~e.buttons(u),u)}function b(){p||(p=!0,n.addEventListener("mousemove",_),n.addEventListener("mousedown",s),n.addEventListener("mouseup",w),n.addEventListener("mouseleave",v),n.addEventListener("mouseenter",v),n.addEventListener("mouseout",v),n.addEventListener("mouseover",v),n.addEventListener("blur",x),n.addEventListener("keyup",l),n.addEventListener("keydown",l),n.addEventListener("keypress",l),n!==window&&(window.addEventListener("blur",x),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}function h(){!p||(p=!1,n.removeEventListener("mousemove",_),n.removeEventListener("mousedown",s),n.removeEventListener("mouseup",w),n.removeEventListener("mouseleave",v),n.removeEventListener("mouseenter",v),n.removeEventListener("mouseout",v),n.removeEventListener("mouseover",v),n.removeEventListener("blur",x),n.removeEventListener("keyup",l),n.removeEventListener("keydown",l),n.removeEventListener("keypress",l),n!==window&&(window.removeEventListener("blur",x),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))}b();var m={element:n};return Object.defineProperties(m,{enabled:{get:function(){return p},set:function(u){u?b():h()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return f},enumerable:!0},y:{get:function(){return o},enumerable:!0},mods:{get:function(){return i},enumerable:!0}}),m}},{"mouse-event":249}],248:[function(c,M,A){var e={left:0,top:0};M.exports=a;function a(t,r,f){r=r||t.currentTarget||t.srcElement,Array.isArray(f)||(f=[0,0]);var o=t.clientX||0,i=t.clientY||0,p=n(r);return f[0]=o-p.left,f[1]=i-p.top,f}function n(t){return t===window||t===document||t===document.body?e:t.getBoundingClientRect()}},{}],249:[function(c,M,A){function e(r){if(typeof r=="object"){if("buttons"in r)return r.buttons;if("which"in r){var f=r.which;if(f===2)return 4;if(f===3)return 2;if(f>0)return 1<<f-1}else if("button"in r){var f=r.button;if(f===1)return 4;if(f===2)return 2;if(f>=0)return 1<<f}}return 0}A.buttons=e;function a(r){return r.target||r.srcElement||window}A.element=a;function n(r){if(typeof r=="object"){if("offsetX"in r)return r.offsetX;var f=a(r),o=f.getBoundingClientRect();return r.clientX-o.left}return 0}A.x=n;function t(r){if(typeof r=="object"){if("offsetY"in r)return r.offsetY;var f=a(r),o=f.getBoundingClientRect();return r.clientY-o.top}return 0}A.y=t},{}],250:[function(c,M,A){var e=c("to-px");M.exports=a;function a(n,t,r){typeof n=="function"&&(r=!!t,t=n,n=window);var f=e("ex",n),o=function(i){r&&i.preventDefault();var p=i.deltaX||0,d=i.deltaY||0,y=i.deltaZ||0,v=i.deltaMode,x=1;switch(v){case 1:x=f;break;case 2:x=window.innerHeight;break}if(p*=x,d*=x,y*=x,p||d||y)return t(p,d,y,i)};return n.addEventListener("wheel",o),o}},{"to-px":304}],251:[function(c,M,A){var e=c("typedarray-pool");M.exports=t;var a={"false,0,1":function(f,o,i,p,d){return function(v,x,l,_){var s=v.shape[0]|0,w=v.shape[1]|0,b=v.data,h=v.offset|0,m=v.stride[0]|0,u=v.stride[1]|0,L=h,S,k=-m|0,P=0,z=-u|0,I=0,D=-m-u|0,R=0,B=m|0,F=u-m*s|0,V=0,Y=0,K=0,J=2*s|0,G=p(J),Z=p(J),re=0,se=0,oe=-1|0,N=-1|0,U=0,q=-s|0,Q=s|0,W=0,X=-s-1|0,te=s-1|0,ee=0,ie=0,le=0;for(V=0;V<s;++V)G[re++]=i(b[L],x,l,_),L+=B;if(L+=F,w>0){if(Y=1,G[re++]=i(b[L],x,l,_),L+=B,s>0)for(V=1,S=b[L],se=G[re]=i(S,x,l,_),U=G[re+oe],W=G[re+q],ee=G[re+X],(se!==U||se!==W||se!==ee)&&(P=b[L+k],I=b[L+z],R=b[L+D],f(V,Y,S,P,I,R,se,U,W,ee,x,l,_),ie=Z[re]=K++),re+=1,L+=B,V=2;V<s;++V)S=b[L],se=G[re]=i(S,x,l,_),U=G[re+oe],W=G[re+q],ee=G[re+X],(se!==U||se!==W||se!==ee)&&(P=b[L+k],I=b[L+z],R=b[L+D],f(V,Y,S,P,I,R,se,U,W,ee,x,l,_),ie=Z[re]=K++,ee!==U&&o(Z[re+oe],ie,R,P,ee,U,x,l,_)),re+=1,L+=B;for(L+=F,re=0,le=oe,oe=N,N=le,le=q,q=Q,Q=le,le=X,X=te,te=le,Y=2;Y<w;++Y){if(G[re++]=i(b[L],x,l,_),L+=B,s>0)for(V=1,S=b[L],se=G[re]=i(S,x,l,_),U=G[re+oe],W=G[re+q],ee=G[re+X],(se!==U||se!==W||se!==ee)&&(P=b[L+k],I=b[L+z],R=b[L+D],f(V,Y,S,P,I,R,se,U,W,ee,x,l,_),ie=Z[re]=K++,ee!==W&&o(Z[re+q],ie,I,R,W,ee,x,l,_)),re+=1,L+=B,V=2;V<s;++V)S=b[L],se=G[re]=i(S,x,l,_),U=G[re+oe],W=G[re+q],ee=G[re+X],(se!==U||se!==W||se!==ee)&&(P=b[L+k],I=b[L+z],R=b[L+D],f(V,Y,S,P,I,R,se,U,W,ee,x,l,_),ie=Z[re]=K++,ee!==W&&o(Z[re+q],ie,I,R,W,ee,x,l,_),ee!==U&&o(Z[re+oe],ie,R,P,ee,U,x,l,_)),re+=1,L+=B;Y&1&&(re=0),le=oe,oe=N,N=le,le=q,q=Q,Q=le,le=X,X=te,te=le,L+=F}}d(Z),d(G)}},"false,1,0":function(f,o,i,p,d){return function(v,x,l,_){var s=v.shape[0]|0,w=v.shape[1]|0,b=v.data,h=v.offset|0,m=v.stride[0]|0,u=v.stride[1]|0,L=h,S,k=-m|0,P=0,z=-u|0,I=0,D=-m-u|0,R=0,B=u|0,F=m-u*w|0,V=0,Y=0,K=0,J=2*w|0,G=p(J),Z=p(J),re=0,se=0,oe=-1|0,N=-1|0,U=0,q=-w|0,Q=w|0,W=0,X=-w-1|0,te=w-1|0,ee=0,ie=0,le=0;for(Y=0;Y<w;++Y)G[re++]=i(b[L],x,l,_),L+=B;if(L+=F,s>0){if(V=1,G[re++]=i(b[L],x,l,_),L+=B,w>0)for(Y=1,S=b[L],se=G[re]=i(S,x,l,_),W=G[re+q],U=G[re+oe],ee=G[re+X],(se!==W||se!==U||se!==ee)&&(P=b[L+k],I=b[L+z],R=b[L+D],f(V,Y,S,P,I,R,se,W,U,ee,x,l,_),ie=Z[re]=K++),re+=1,L+=B,Y=2;Y<w;++Y)S=b[L],se=G[re]=i(S,x,l,_),W=G[re+q],U=G[re+oe],ee=G[re+X],(se!==W||se!==U||se!==ee)&&(P=b[L+k],I=b[L+z],R=b[L+D],f(V,Y,S,P,I,R,se,W,U,ee,x,l,_),ie=Z[re]=K++,ee!==U&&o(Z[re+oe],ie,I,R,U,ee,x,l,_)),re+=1,L+=B;for(L+=F,re=0,le=q,q=Q,Q=le,le=oe,oe=N,N=le,le=X,X=te,te=le,V=2;V<s;++V){if(G[re++]=i(b[L],x,l,_),L+=B,w>0)for(Y=1,S=b[L],se=G[re]=i(S,x,l,_),W=G[re+q],U=G[re+oe],ee=G[re+X],(se!==W||se!==U||se!==ee)&&(P=b[L+k],I=b[L+z],R=b[L+D],f(V,Y,S,P,I,R,se,W,U,ee,x,l,_),ie=Z[re]=K++,ee!==W&&o(Z[re+q],ie,R,P,ee,W,x,l,_)),re+=1,L+=B,Y=2;Y<w;++Y)S=b[L],se=G[re]=i(S,x,l,_),W=G[re+q],U=G[re+oe],ee=G[re+X],(se!==W||se!==U||se!==ee)&&(P=b[L+k],I=b[L+z],R=b[L+D],f(V,Y,S,P,I,R,se,W,U,ee,x,l,_),ie=Z[re]=K++,ee!==U&&o(Z[re+oe],ie,I,R,U,ee,x,l,_),ee!==W&&o(Z[re+q],ie,R,P,ee,W,x,l,_)),re+=1,L+=B;V&1&&(re=0),le=q,q=Q,Q=le,le=oe,oe=N,N=le,le=X,X=te,te=le,L+=F}}d(Z),d(G)}}};function n(r,f,o,i,p,d){var y=[d,p].join(","),v=a[y];return v(r,f,o,e.mallocUint32,e.freeUint32)}function t(r){function f(x){throw new Error("ndarray-extract-contour: "+x)}typeof r!="object"&&f("Must specify arguments");var o=r.order;Array.isArray(o)||f("Must specify order");var i=r.arrayArguments||1;i<1&&f("Must have at least one array argument");var p=r.scalarArguments||0;p<0&&f("Scalar arg count must be > 0"),typeof r.vertex!="function"&&f("Must specify vertex creation function"),typeof r.cell!="function"&&f("Must specify cell creation function"),typeof r.phase!="function"&&f("Must specify phase function");for(var d=r.getters||[],y=new Array(i),v=0;v<i;++v)d.indexOf(v)>=0?y[v]=!0:y[v]=!1;return n(r.vertex,r.cell,r.phase,p,o,y)}},{"typedarray-pool":308}],252:[function(c,M,A){var e=c("dup"),a={zero:function(l,_,s,w){var b=l[0],h=s[0];w|=0;var m=0,u=h;for(m=0;m<b;++m)_[w]=0,w+=u},fdTemplate1:function(l,_,s,w,b,h,m){var u=l[0],L=s[0],S=h[0],k=-1*L,P=L;w|=0,m|=0;var z=0,I=L,D=S;for(z=0;z<u;++z)b[m]=.5*(_[w+k]-_[w+P]),w+=I,m+=D},fdTemplate2:function(l,_,s,w,b,h,m,u,L,S){var k=l[0],P=l[1],z=s[0],I=s[1],D=h[0],R=h[1],B=L[0],F=L[1],V=-1*z,Y=z,K=-1*I,J=I;w|=0,m|=0,S|=0;var G=0,Z=0,re=I,se=z-P*I,oe=R,N=D-P*R,U=F,q=B-P*F;for(Z=0;Z<k;++Z){for(G=0;G<P;++G)b[m]=.5*(_[w+V]-_[w+Y]),u[S]=.5*(_[w+K]-_[w+J]),w+=re,m+=oe,S+=U;w+=se,m+=N,S+=q}}},n={cdiff:function(l){var _={};return function(w,b,h){var m=w.dtype,u=w.order,L=b.dtype,S=b.order,k=h.dtype,P=h.order,z=[m,u.join(),L,S.join(),k,P.join()].join(),I=_[z];return I||(_[z]=I=l([m,u,L,S,k,P])),I(w.shape.slice(0),w.data,w.stride,w.offset|0,b.data,b.stride,b.offset|0,h.data,h.stride,h.offset|0)}},zero:function(l){var _={};return function(w){var b=w.dtype,h=w.order,m=[b,h.join()].join(),u=_[m];return u||(_[m]=u=l([b,h])),u(w.shape.slice(0),w.data,w.stride,w.offset|0)}},fdTemplate1:function(l){var _={};return function(w,b){var h=w.dtype,m=w.order,u=b.dtype,L=b.order,S=[h,m.join(),u,L.join()].join(),k=_[S];return k||(_[S]=k=l([h,m,u,L])),k(w.shape.slice(0),w.data,w.stride,w.offset|0,b.data,b.stride,b.offset|0)}},fdTemplate2:function(l){var _={};return function(w,b,h){var m=w.dtype,u=w.order,L=b.dtype,S=b.order,k=h.dtype,P=h.order,z=[m,u.join(),L,S.join(),k,P.join()].join(),I=_[z];return I||(_[z]=I=l([m,u,L,S,k,P])),I(w.shape.slice(0),w.data,w.stride,w.offset|0,b.data,b.stride,b.offset|0,h.data,h.stride,h.offset|0)}}};function t(l){var _=n[l.funcName];return _(r.bind(void 0,l))}function r(l){return a[l.funcName]}function f(l){return t({funcName:l.funcName})}var o={},i={},p=f({funcName:"cdiff"}),d=f({funcName:"zero"});function y(l){return l in o?o[l]:o[l]=f({funcName:"fdTemplate"+l})}function v(l,_,s,w){return function(b,h){var m=h.shape.slice();return m[0]>2&&m[1]>2&&w(h.pick(-1,-1).lo(1,1).hi(m[0]-2,m[1]-2),b.pick(-1,-1,0).lo(1,1).hi(m[0]-2,m[1]-2),b.pick(-1,-1,1).lo(1,1).hi(m[0]-2,m[1]-2)),m[1]>2&&(s(h.pick(0,-1).lo(1).hi(m[1]-2),b.pick(0,-1,1).lo(1).hi(m[1]-2)),_(b.pick(0,-1,0).lo(1).hi(m[1]-2))),m[1]>2&&(s(h.pick(m[0]-1,-1).lo(1).hi(m[1]-2),b.pick(m[0]-1,-1,1).lo(1).hi(m[1]-2)),_(b.pick(m[0]-1,-1,0).lo(1).hi(m[1]-2))),m[0]>2&&(s(h.pick(-1,0).lo(1).hi(m[0]-2),b.pick(-1,0,0).lo(1).hi(m[0]-2)),_(b.pick(-1,0,1).lo(1).hi(m[0]-2))),m[0]>2&&(s(h.pick(-1,m[1]-1).lo(1).hi(m[0]-2),b.pick(-1,m[1]-1,0).lo(1).hi(m[0]-2)),_(b.pick(-1,m[1]-1,1).lo(1).hi(m[0]-2))),b.set(0,0,0,0),b.set(0,0,1,0),b.set(m[0]-1,0,0,0),b.set(m[0]-1,0,1,0),b.set(0,m[1]-1,0,0),b.set(0,m[1]-1,1,0),b.set(m[0]-1,m[1]-1,0,0),b.set(m[0]-1,m[1]-1,1,0),b}}function x(l){var _=l.join(),s=i[_];if(s)return s;for(var w=l.length,b=[p,d],h=1;h<=w;++h)b.push(y(h));var m=v,s=m.apply(void 0,b);return i[_]=s,s}M.exports=function(_,s,w){if(Array.isArray(w)||(typeof w=="string"?w=e(s.dimension,w):w=e(s.dimension,"clamp")),s.size===0)return _;if(s.dimension===0)return _.set(0),_;var b=x(w);return b(_,s)}},{dup:65}],253:[function(c,M,A){function e(f,o){var i=Math.floor(o),p=o-i,d=0<=i&&i<f.shape[0],y=0<=i+1&&i+1<f.shape[0],v=d?+f.get(i):0,x=y?+f.get(i+1):0;return(1-p)*v+p*x}function a(f,o,i){var p=Math.floor(o),d=o-p,y=0<=p&&p<f.shape[0],v=0<=p+1&&p+1<f.shape[0],x=Math.floor(i),l=i-x,_=0<=x&&x<f.shape[1],s=0<=x+1&&x+1<f.shape[1],w=y&&_?f.get(p,x):0,b=y&&s?f.get(p,x+1):0,h=v&&_?f.get(p+1,x):0,m=v&&s?f.get(p+1,x+1):0;return(1-l)*((1-d)*w+d*h)+l*((1-d)*b+d*m)}function n(f,o,i,p){var d=Math.floor(o),y=o-d,v=0<=d&&d<f.shape[0],x=0<=d+1&&d+1<f.shape[0],l=Math.floor(i),_=i-l,s=0<=l&&l<f.shape[1],w=0<=l+1&&l+1<f.shape[1],b=Math.floor(p),h=p-b,m=0<=b&&b<f.shape[2],u=0<=b+1&&b+1<f.shape[2],L=v&&s&&m?f.get(d,l,b):0,S=v&&w&&m?f.get(d,l+1,b):0,k=x&&s&&m?f.get(d+1,l,b):0,P=x&&w&&m?f.get(d+1,l+1,b):0,z=v&&s&&u?f.get(d,l,b+1):0,I=v&&w&&u?f.get(d,l+1,b+1):0,D=x&&s&&u?f.get(d+1,l,b+1):0,R=x&&w&&u?f.get(d+1,l+1,b+1):0;return(1-h)*((1-_)*((1-y)*L+y*k)+_*((1-y)*S+y*P))+h*((1-_)*((1-y)*z+y*D)+_*((1-y)*I+y*R))}function t(f){var o=f.shape.length|0,i=new Array(o),p=new Array(o),d=new Array(o),y=new Array(o),v,x;for(v=0;v<o;++v)x=+arguments[v+1],i[v]=Math.floor(x),p[v]=x-i[v],d[v]=0<=i[v]&&i[v]<f.shape[v],y[v]=0<=i[v]+1&&i[v]+1<f.shape[v];var l=0,_,s,w;e:for(v=0;v<1<<o;++v){for(s=1,w=f.offset,_=0;_<o;++_)if(v&1<<_){if(!y[_])continue e;s*=p[_],w+=f.stride[_]*(i[_]+1)}else{if(!d[_])continue e;s*=1-p[_],w+=f.stride[_]*i[_]}l+=s*f.data[w]}return l}function r(f,o,i,p){switch(f.shape.length){case 0:return 0;case 1:return e(f,o);case 2:return a(f,o,i);case 3:return n(f,o,i,p);default:return t.apply(void 0,arguments)}}M.exports=r,M.exports.d1=e,M.exports.d2=a,M.exports.d3=n},{}],254:[function(c,M,A){var e={"float64,2,1,0":function(){return function(p,d,y,v,x){var l=p[0],_=p[1],s=p[2],w=y[0],b=y[1],h=y[2];v|=0;var m=0,u=0,L=0,S=h,k=b-s*h,P=w-_*b;for(L=0;L<l;++L){for(u=0;u<_;++u){for(m=0;m<s;++m)d[v]/=x,v+=S;v+=k}v+=P}}},"uint8,2,0,1,float64,2,1,0":function(){return function(p,d,y,v,x,l,_,s){var w=p[0],b=p[1],h=p[2],m=y[0],u=y[1],L=y[2],S=l[0],k=l[1],P=l[2];v|=0,_|=0;for(var z=v,I=_,D=p[0]|0;D>0;){D<64?(w=D,D=0):(w=64,D-=64);for(var R=p[1]|0;R>0;){R<64?(b=R,R=0):(b=64,R-=64),v=z+D*m+R*u,_=I+D*S+R*k;var B=0,F=0,V=0,Y=L,K=m-h*L,J=u-w*m,G=P,Z=S-h*P,re=k-w*S;for(V=0;V<b;++V){for(F=0;F<w;++F){for(B=0;B<h;++B)d[v]=x[_]*s,v+=Y,_+=G;v+=K,_+=Z}v+=J,_+=re}}}}},"float32,1,0,float32,1,0":function(){return function(p,d,y,v,x,l,_){var s=p[0],w=p[1],b=y[0],h=y[1],m=l[0],u=l[1];v|=0,_|=0;var L=0,S=0,k=h,P=b-w*h,z=u,I=m-w*u;for(S=0;S<s;++S){for(L=0;L<w;++L)d[v]=x[_],v+=k,_+=z;v+=P,_+=I}}},"float32,1,0,float32,0,1":function(){return function(p,d,y,v,x,l,_){var s=p[0],w=p[1],b=y[0],h=y[1],m=l[0],u=l[1];v|=0,_|=0;for(var L=v,S=_,k=p[1]|0;k>0;){k<64?(w=k,k=0):(w=64,k-=64);for(var P=p[0]|0;P>0;){P<64?(s=P,P=0):(s=64,P-=64),v=L+k*h+P*b,_=S+k*u+P*m;var z=0,I=0,D=h,R=b-w*h,B=u,F=m-w*u;for(I=0;I<s;++I){for(z=0;z<w;++z)d[v]=x[_],v+=D,_+=B;v+=R,_+=F}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(p,d,y,v,x,l,_){var s=p[0],w=p[1],b=p[2],h=y[0],m=y[1],u=y[2],L=l[0],S=l[1],k=l[2];v|=0,_|=0;for(var P=v,z=_,I=p[2]|0;I>0;){I<64?(b=I,I=0):(b=64,I-=64);for(var D=p[0]|0;D>0;){D<64?(s=D,D=0):(s=64,D-=64);for(var R=p[1]|0;R>0;){R<64?(w=R,R=0):(w=64,R-=64),v=P+I*u+D*h+R*m,_=z+I*k+D*L+R*S;var B=0,F=0,V=0,Y=u,K=h-b*u,J=m-s*h,G=k,Z=L-b*k,re=S-s*L;for(V=0;V<w;++V){for(F=0;F<s;++F){for(B=0;B<b;++B)d[v]=x[_],v+=Y,_+=G;v+=K,_+=Z}v+=J,_+=re}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(p,d,y,v,x,l,_){var s=p[0],w=p[1],b=p[2],h=y[0],m=y[1],u=y[2],L=l[0],S=l[1],k=l[2];v|=0,_|=0;var P=0,z=0,I=0,D=u,R=h-b*u,B=m-s*h,F=k,V=L-b*k,Y=S-s*L;for(I=0;I<w;++I){for(z=0;z<s;++z){for(P=0;P<b;++P)d[v]=x[_],v+=D,_+=F;v+=R,_+=V}v+=B,_+=Y}}}};function a(i,p){var d=p.join(","),y=e[d];return y()}var n=a,t={mul:function(i){var p={};return function(y,v,x){var l=y.dtype,_=y.order,s=v.dtype,w=v.order,b=x.dtype,h=x.order,m=[l,_.join(),s,w.join(),b,h.join()].join(),u=p[m];return u||(p[m]=u=i([l,_,s,w,b,h])),u(y.shape.slice(0),y.data,y.stride,y.offset|0,v.data,v.stride,v.offset|0,x.data,x.stride,x.offset|0)}},muls:function(i){var p={};return function(y,v,x){var l=y.dtype,_=y.order,s=v.dtype,w=v.order,b=[l,_.join(),s,w.join()].join(),h=p[b];return h||(p[b]=h=i([l,_,s,w])),h(y.shape.slice(0),y.data,y.stride,y.offset|0,v.data,v.stride,v.offset|0,x)}},mulseq:function(i){var p={};return function(y,v){var x=y.dtype,l=y.order,_=[x,l.join()].join(),s=p[_];return s||(p[_]=s=i([x,l])),s(y.shape.slice(0),y.data,y.stride,y.offset|0,v)}},div:function(i){var p={};return function(y,v,x){var l=y.dtype,_=y.order,s=v.dtype,w=v.order,b=x.dtype,h=x.order,m=[l,_.join(),s,w.join(),b,h.join()].join(),u=p[m];return u||(p[m]=u=i([l,_,s,w,b,h])),u(y.shape.slice(0),y.data,y.stride,y.offset|0,v.data,v.stride,v.offset|0,x.data,x.stride,x.offset|0)}},divs:function(i){var p={};return function(y,v,x){var l=y.dtype,_=y.order,s=v.dtype,w=v.order,b=[l,_.join(),s,w.join()].join(),h=p[b];return h||(p[b]=h=i([l,_,s,w])),h(y.shape.slice(0),y.data,y.stride,y.offset|0,v.data,v.stride,v.offset|0,x)}},divseq:function(i){var p={};return function(y,v){var x=y.dtype,l=y.order,_=[x,l.join()].join(),s=p[_];return s||(p[_]=s=i([x,l])),s(y.shape.slice(0),y.data,y.stride,y.offset|0,v)}},assign:function(i){var p={};return function(y,v){var x=y.dtype,l=y.order,_=v.dtype,s=v.order,w=[x,l.join(),_,s.join()].join(),b=p[w];return b||(p[w]=b=i([x,l,_,s])),b(y.shape.slice(0),y.data,y.stride,y.offset|0,v.data,v.stride,v.offset|0)}}};function r(i){var p=t[i.funcName];return p(n.bind(void 0,i))}function f(i){return r({funcName:i.funcName})}var o={mul:"*",div:"/"};(function(){for(var i in o)A[i]=f({funcName:i}),A[i+"s"]=f({funcName:i+"s"}),A[i+"seq"]=f({funcName:i+"seq"})})(),A.assign=f({funcName:"assign"})},{}],255:[function(c,M,A){var e=c("ndarray"),a=c("./doConvert.js");M.exports=function(t,r){for(var f=[],o=t,i=1;Array.isArray(o);)f.push(o.length),i*=o.length,o=o[0];return f.length===0?e():(r||(r=e(new Float64Array(i),f)),a(r,t),r)}},{"./doConvert.js":256,ndarray:259}],256:[function(c,M,A){function e(){return function(o,i,p,d,y){var v=o[0],x=o[1],l=o[2],_=p[0],s=p[1],w=p[2],b=[0,0,0];d|=0;var h=0,m=0,u=0,L=w,S=s-l*w,k=_-x*s;for(u=0;u<v;++u){for(m=0;m<x;++m){for(h=0;h<l;++h){{var P=y,z;for(z=0;z<b.length-1;++z)P=P[b[z]];i[d]=P[b[b.length-1]]}d+=L,++b[2]}d+=S,b[2]-=l,++b[1]}d+=k,b[1]-=x,++b[0]}}}function a(){return e()}var n=a;function t(o){var i={};return function(d,y){var v=d.dtype,x=d.order,l=[v,x.join()].join(),_=i[l];return _||(i[l]=_=o([v,x])),_(d.shape.slice(0),d.data,d.stride,d.offset|0,y)}}function r(o){return t(n.bind(void 0,o))}function f(o){return r({funcName:o.funcName})}M.exports=f({funcName:"convert"})},{}],257:[function(c,M,A){var e=c("typedarray-pool");function a(p){switch(p){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var n={"uint32,1,0":function(p,d){return function(v,x,l,_,s,w,b,h,m,u,L){var S,k,P,z=v*s+_,I,D=p(h),R,B,F,V;for(S=v+1;S<=x;++S){for(k=S,z+=s,P=z,R=0,B=z,I=0;I<h;++I)D[R++]=l[B],B+=m;e:for(;k-- >v;){R=0,B=P-s;t:for(I=0;I<h;++I){if(F=l[B],V=D[R],F<V)break e;if(F>V)break t;B+=u,R+=L}for(R=P,B=P-s,I=0;I<h;++I)l[R]=l[B],R+=m,B+=m;P-=s}for(R=P,B=0,I=0;I<h;++I)l[R]=D[B++],R+=m}d(D)}}};function t(p,d){var y=a(d),v=[d,p].join(","),x=n[v];return y?x(y[0],y[1]):x()}var r={"uint32,1,0":function(p,d,y){return function v(x,l,_,s,w,b,h,m,u,L,S){var k=(l-x+1)/6|0,P=x+k,z=l-k,I=x+l>>1,D=I-k,R=I+k,B=P,F=D,V=I,Y=R,K=z,J=x+1,G=l-1,Z=!0,re,se,oe,N,U,q,Q,W,X,te=0,ee=0,ie=0,le,ye,ue,pe,ge,Te,_e,De,Oe,Ue,xe,Pe,Ve,Qe,Fe,Le,Ne=m,dt=d(Ne),Dt=d(Ne);ye=w*B,ue=w*F,Le=s;e:for(le=0;le<m;++le){if(Q=ye+Le,W=ue+Le,ie=_[Q]-_[W],ie>0){se=B,B=F,F=se;break e}if(ie<0)break e;Le+=L}ye=w*Y,ue=w*K,Le=s;e:for(le=0;le<m;++le){if(Q=ye+Le,W=ue+Le,ie=_[Q]-_[W],ie>0){se=Y,Y=K,K=se;break e}if(ie<0)break e;Le+=L}ye=w*B,ue=w*V,Le=s;e:for(le=0;le<m;++le){if(Q=ye+Le,W=ue+Le,ie=_[Q]-_[W],ie>0){se=B,B=V,V=se;break e}if(ie<0)break e;Le+=L}ye=w*F,ue=w*V,Le=s;e:for(le=0;le<m;++le){if(Q=ye+Le,W=ue+Le,ie=_[Q]-_[W],ie>0){se=F,F=V,V=se;break e}if(ie<0)break e;Le+=L}ye=w*B,ue=w*Y,Le=s;e:for(le=0;le<m;++le){if(Q=ye+Le,W=ue+Le,ie=_[Q]-_[W],ie>0){se=B,B=Y,Y=se;break e}if(ie<0)break e;Le+=L}ye=w*V,ue=w*Y,Le=s;e:for(le=0;le<m;++le){if(Q=ye+Le,W=ue+Le,ie=_[Q]-_[W],ie>0){se=V,V=Y,Y=se;break e}if(ie<0)break e;Le+=L}ye=w*F,ue=w*K,Le=s;e:for(le=0;le<m;++le){if(Q=ye+Le,W=ue+Le,ie=_[Q]-_[W],ie>0){se=F,F=K,K=se;break e}if(ie<0)break e;Le+=L}ye=w*F,ue=w*V,Le=s;e:for(le=0;le<m;++le){if(Q=ye+Le,W=ue+Le,ie=_[Q]-_[W],ie>0){se=F,F=V,V=se;break e}if(ie<0)break e;Le+=L}ye=w*Y,ue=w*K,Le=s;e:for(le=0;le<m;++le){if(Q=ye+Le,W=ue+Le,ie=_[Q]-_[W],ie>0){se=Y,Y=K,K=se;break e}if(ie<0)break e;Le+=L}for(ye=w*B,ue=w*F,pe=w*V,ge=w*Y,Te=w*K,_e=w*P,De=w*I,Oe=w*z,Fe=0,Le=s,le=0;le<m;++le)Q=ye+Le,W=ue+Le,X=pe+Le,Ue=ge+Le,xe=Te+Le,Pe=_e+Le,Ve=De+Le,Qe=Oe+Le,dt[Fe]=_[W],Dt[Fe]=_[Ue],Z=Z&&dt[Fe]===Dt[Fe],oe=_[Q],N=_[X],U=_[xe],_[Pe]=oe,_[Ve]=N,_[Qe]=U,++Fe,Le+=u;for(ye=w*D,ue=w*x,Le=s,le=0;le<m;++le)Q=ye+Le,W=ue+Le,_[Q]=_[W],Le+=u;for(ye=w*R,ue=w*l,Le=s,le=0;le<m;++le)Q=ye+Le,W=ue+Le,_[Q]=_[W],Le+=u;if(Z)for(q=J;q<=G;++q){Q=s+q*w,Fe=0;e:for(le=0;le<m;++le){if(ie=_[Q]-dt[Fe],ie!==0)break e;Fe+=S,Q+=L}if(ie!==0)if(ie<0){if(q!==J)for(ye=w*q,ue=w*J,Le=s,le=0;le<m;++le)Q=ye+Le,W=ue+Le,re=_[Q],_[Q]=_[W],_[W]=re,Le+=u;++J}else for(;;){Q=s+G*w,Fe=0;e:for(le=0;le<m;++le){if(ie=_[Q]-dt[Fe],ie!==0)break e;Fe+=S,Q+=L}if(ie>0)G--;else if(ie<0){for(ye=w*q,ue=w*J,pe=w*G,Le=s,le=0;le<m;++le)Q=ye+Le,W=ue+Le,X=pe+Le,re=_[Q],_[Q]=_[W],_[W]=_[X],_[X]=re,Le+=u;++J,--G;break}else{for(ye=w*q,ue=w*G,Le=s,le=0;le<m;++le)Q=ye+Le,W=ue+Le,re=_[Q],_[Q]=_[W],_[W]=re,Le+=u;--G;break}}}else for(q=J;q<=G;++q){Q=s+q*w,Fe=0;e:for(le=0;le<m;++le){if(te=_[Q]-dt[Fe],te!==0)break e;Fe+=S,Q+=L}if(te<0){if(q!==J)for(ye=w*q,ue=w*J,Le=s,le=0;le<m;++le)Q=ye+Le,W=ue+Le,re=_[Q],_[Q]=_[W],_[W]=re,Le+=u;++J}else{Q=s+q*w,Fe=0;e:for(le=0;le<m;++le){if(ee=_[Q]-Dt[Fe],ee!==0)break e;Fe+=S,Q+=L}if(ee>0)for(;;){Q=s+G*w,Fe=0;e:for(le=0;le<m;++le){if(ie=_[Q]-Dt[Fe],ie!==0)break e;Fe+=S,Q+=L}if(ie>0){if(--G<q)break;continue}else{Q=s+G*w,Fe=0;e:for(le=0;le<m;++le){if(ie=_[Q]-dt[Fe],ie!==0)break e;Fe+=S,Q+=L}if(ie<0){for(ye=w*q,ue=w*J,pe=w*G,Le=s,le=0;le<m;++le)Q=ye+Le,W=ue+Le,X=pe+Le,re=_[Q],_[Q]=_[W],_[W]=_[X],_[X]=re,Le+=u;++J,--G}else{for(ye=w*q,ue=w*G,Le=s,le=0;le<m;++le)Q=ye+Le,W=ue+Le,re=_[Q],_[Q]=_[W],_[W]=re,Le+=u;--G}break}}}}for(ye=w*x,ue=w*(J-1),Fe=0,Le=s,le=0;le<m;++le)Q=ye+Le,W=ue+Le,_[Q]=_[W],_[W]=dt[Fe],++Fe,Le+=u;for(ye=w*l,ue=w*(G+1),Fe=0,Le=s,le=0;le<m;++le)Q=ye+Le,W=ue+Le,_[Q]=_[W],_[W]=Dt[Fe],++Fe,Le+=u;if(J-2-x<=32?p(x,J-2,_,s,w,b,h,m,u,L,S):v(x,J-2,_,s,w,b,h,m,u,L,S),l-(G+2)<=32?p(G+2,l,_,s,w,b,h,m,u,L,S):v(G+2,l,_,s,w,b,h,m,u,L,S),Z){y(dt),y(Dt);return}if(J<P&&G>z){e:for(;;){for(Q=s+J*w,Fe=0,Le=s,le=0;le<m;++le){if(_[Q]!==dt[Fe])break e;++Fe,Q+=u}++J}e:for(;;){for(Q=s+G*w,Fe=0,Le=s,le=0;le<m;++le){if(_[Q]!==Dt[Fe])break e;++Fe,Q+=u}--G}for(q=J;q<=G;++q){Q=s+q*w,Fe=0;e:for(le=0;le<m;++le){if(te=_[Q]-dt[Fe],te!==0)break e;Fe+=S,Q+=L}if(te===0){if(q!==J)for(ye=w*q,ue=w*J,Le=s,le=0;le<m;++le)Q=ye+Le,W=ue+Le,re=_[Q],_[Q]=_[W],_[W]=re,Le+=u;++J}else{Q=s+q*w,Fe=0;e:for(le=0;le<m;++le){if(ee=_[Q]-Dt[Fe],ee!==0)break e;Fe+=S,Q+=L}if(ee===0)for(;;){Q=s+G*w,Fe=0;e:for(le=0;le<m;++le){if(ie=_[Q]-Dt[Fe],ie!==0)break e;Fe+=S,Q+=L}if(ie===0){if(--G<q)break;continue}else{Q=s+G*w,Fe=0;e:for(le=0;le<m;++le){if(ie=_[Q]-dt[Fe],ie!==0)break e;Fe+=S,Q+=L}if(ie<0){for(ye=w*q,ue=w*J,pe=w*G,Le=s,le=0;le<m;++le)Q=ye+Le,W=ue+Le,X=pe+Le,re=_[Q],_[Q]=_[W],_[W]=_[X],_[X]=re,Le+=u;++J,--G}else{for(ye=w*q,ue=w*G,Le=s,le=0;le<m;++le)Q=ye+Le,W=ue+Le,re=_[Q],_[Q]=_[W],_[W]=re,Le+=u;--G}break}}}}}y(dt),y(Dt),G-J<=32?p(J,G,_,s,w,b,h,m,u,L,S):v(J,G,_,s,w,b,h,m,u,L,S)}}};function f(p,d,y){var v=a(d),x=[d,p].join(","),l=r[x];return p.length>1&&v?l(y,v[0],v[1]):l(y)}var o={"uint32,1,0":function(p,d){return function(y){var v=y.data,x=y.offset|0,l=y.shape,_=y.stride,s=_[0]|0,w=l[0]|0,b=_[1]|0,h=l[1]|0,m=b,u=b,L=1;w<=32?p(0,w-1,v,x,s,b,w,h,m,u,L):d(0,w-1,v,x,s,b,w,h,m,u,L)}}};function i(p,d){var y=[d,p].join(","),v=o[y],x=t(p,d),l=f(p,d,x);return v(x,l)}M.exports=i},{"typedarray-pool":308}],258:[function(c,M,A){var e=c("./lib/compile_sort.js"),a={};function n(t){var r=t.order,f=t.dtype,o=[r,f],i=o.join(":"),p=a[i];return p||(a[i]=p=e(r,f)),p(t),t}M.exports=n},{"./lib/compile_sort.js":257}],259:[function(c,M,A){var e=c("is-buffer"),a=typeof Float64Array!="undefined";function n(d,y){return d[0]-y[0]}function t(){var d=this.stride,y=new Array(d.length),v;for(v=0;v<y.length;++v)y[v]=[Math.abs(d[v]),v];y.sort(n);var x=new Array(y.length);for(v=0;v<x.length;++v)x[v]=y[v][1];return x}var r={T:function(d){function y(x){this.data=x}var v=y.prototype;return v.dtype=d,v.index=function(){return-1},v.size=0,v.dimension=-1,v.shape=v.stride=v.order=[],v.lo=v.hi=v.transpose=v.step=function(){return new y(this.data)},v.get=v.set=function(){},v.pick=function(){return null},function(l){return new y(l)}},0:function(d,y){function v(l,_){this.data=l,this.offset=_}var x=v.prototype;return x.dtype=d,x.index=function(){return this.offset},x.dimension=0,x.size=1,x.shape=x.stride=x.order=[],x.lo=x.hi=x.transpose=x.step=function(){return new v(this.data,this.offset)},x.pick=function(){return y(this.data)},x.valueOf=x.get=function(){return d==="generic"?this.data.get(this.offset):this.data[this.offset]},x.set=function(_){return d==="generic"?this.data.set(this.offset,_):this.data[this.offset]=_},function(_,s,w,b){return new v(_,b)}},1:function(d,y,v){function x(_,s,w,b){this.data=_,this.shape=[s],this.stride=[w],this.offset=b|0}var l=x.prototype;return l.dtype=d,l.dimension=1,Object.defineProperty(l,"size",{get:function(){return this.shape[0]}}),l.order=[0],l.set=function(s,w){return d==="generic"?this.data.set(this.offset+this.stride[0]*s,w):this.data[this.offset+this.stride[0]*s]=w},l.get=function(s){return d==="generic"?this.data.get(this.offset+this.stride[0]*s):this.data[this.offset+this.stride[0]*s]},l.index=function(s){return this.offset+this.stride[0]*s},l.hi=function(s){return new x(this.data,typeof s!="number"||s<0?this.shape[0]:s|0,this.stride[0],this.offset)},l.lo=function(s){var w=this.offset,b=0,h=this.shape[0],m=this.stride[0];return typeof s=="number"&&s>=0&&(b=s|0,w+=m*b,h-=b),new x(this.data,h,m,w)},l.step=function(s){var w=this.shape[0],b=this.stride[0],h=this.offset,m=0,u=Math.ceil;return typeof s=="number"&&(m=s|0,m<0?(h+=b*(w-1),w=u(-w/m)):w=u(w/m),b*=m),new x(this.data,w,b,h)},l.transpose=function(s){s=s===void 0?0:s|0;var w=this.shape,b=this.stride;return new x(this.data,w[s],b[s],this.offset)},l.pick=function(s){var w=[],b=[],h=this.offset;typeof s=="number"&&s>=0?h=h+this.stride[0]*s|0:(w.push(this.shape[0]),b.push(this.stride[0]));var m=y[w.length+1];return m(this.data,w,b,h)},function(s,w,b,h){return new x(s,w[0],b[0],h)}},2:function(d,y,v){function x(_,s,w,b,h,m){this.data=_,this.shape=[s,w],this.stride=[b,h],this.offset=m|0}var l=x.prototype;return l.dtype=d,l.dimension=2,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(l,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),l.set=function(s,w,b){return d==="generic"?this.data.set(this.offset+this.stride[0]*s+this.stride[1]*w,b):this.data[this.offset+this.stride[0]*s+this.stride[1]*w]=b},l.get=function(s,w){return d==="generic"?this.data.get(this.offset+this.stride[0]*s+this.stride[1]*w):this.data[this.offset+this.stride[0]*s+this.stride[1]*w]},l.index=function(s,w){return this.offset+this.stride[0]*s+this.stride[1]*w},l.hi=function(s,w){return new x(this.data,typeof s!="number"||s<0?this.shape[0]:s|0,typeof w!="number"||w<0?this.shape[1]:w|0,this.stride[0],this.stride[1],this.offset)},l.lo=function(s,w){var b=this.offset,h=0,m=this.shape[0],u=this.shape[1],L=this.stride[0],S=this.stride[1];return typeof s=="number"&&s>=0&&(h=s|0,b+=L*h,m-=h),typeof w=="number"&&w>=0&&(h=w|0,b+=S*h,u-=h),new x(this.data,m,u,L,S,b)},l.step=function(s,w){var b=this.shape[0],h=this.shape[1],m=this.stride[0],u=this.stride[1],L=this.offset,S=0,k=Math.ceil;return typeof s=="number"&&(S=s|0,S<0?(L+=m*(b-1),b=k(-b/S)):b=k(b/S),m*=S),typeof w=="number"&&(S=w|0,S<0?(L+=u*(h-1),h=k(-h/S)):h=k(h/S),u*=S),new x(this.data,b,h,m,u,L)},l.transpose=function(s,w){s=s===void 0?0:s|0,w=w===void 0?1:w|0;var b=this.shape,h=this.stride;return new x(this.data,b[s],b[w],h[s],h[w],this.offset)},l.pick=function(s,w){var b=[],h=[],m=this.offset;typeof s=="number"&&s>=0?m=m+this.stride[0]*s|0:(b.push(this.shape[0]),h.push(this.stride[0])),typeof w=="number"&&w>=0?m=m+this.stride[1]*w|0:(b.push(this.shape[1]),h.push(this.stride[1]));var u=y[b.length+1];return u(this.data,b,h,m)},function(s,w,b,h){return new x(s,w[0],w[1],b[0],b[1],h)}},3:function(d,y,v){function x(_,s,w,b,h,m,u,L){this.data=_,this.shape=[s,w,b],this.stride=[h,m,u],this.offset=L|0}var l=x.prototype;return l.dtype=d,l.dimension=3,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(l,"order",{get:function(){var s=Math.abs(this.stride[0]),w=Math.abs(this.stride[1]),b=Math.abs(this.stride[2]);return s>w?w>b?[2,1,0]:s>b?[1,2,0]:[1,0,2]:s>b?[2,0,1]:b>w?[0,1,2]:[0,2,1]}}),l.set=function(s,w,b,h){return d==="generic"?this.data.set(this.offset+this.stride[0]*s+this.stride[1]*w+this.stride[2]*b,h):this.data[this.offset+this.stride[0]*s+this.stride[1]*w+this.stride[2]*b]=h},l.get=function(s,w,b){return d==="generic"?this.data.get(this.offset+this.stride[0]*s+this.stride[1]*w+this.stride[2]*b):this.data[this.offset+this.stride[0]*s+this.stride[1]*w+this.stride[2]*b]},l.index=function(s,w,b){return this.offset+this.stride[0]*s+this.stride[1]*w+this.stride[2]*b},l.hi=function(s,w,b){return new x(this.data,typeof s!="number"||s<0?this.shape[0]:s|0,typeof w!="number"||w<0?this.shape[1]:w|0,typeof b!="number"||b<0?this.shape[2]:b|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},l.lo=function(s,w,b){var h=this.offset,m=0,u=this.shape[0],L=this.shape[1],S=this.shape[2],k=this.stride[0],P=this.stride[1],z=this.stride[2];return typeof s=="number"&&s>=0&&(m=s|0,h+=k*m,u-=m),typeof w=="number"&&w>=0&&(m=w|0,h+=P*m,L-=m),typeof b=="number"&&b>=0&&(m=b|0,h+=z*m,S-=m),new x(this.data,u,L,S,k,P,z,h)},l.step=function(s,w,b){var h=this.shape[0],m=this.shape[1],u=this.shape[2],L=this.stride[0],S=this.stride[1],k=this.stride[2],P=this.offset,z=0,I=Math.ceil;return typeof s=="number"&&(z=s|0,z<0?(P+=L*(h-1),h=I(-h/z)):h=I(h/z),L*=z),typeof w=="number"&&(z=w|0,z<0?(P+=S*(m-1),m=I(-m/z)):m=I(m/z),S*=z),typeof b=="number"&&(z=b|0,z<0?(P+=k*(u-1),u=I(-u/z)):u=I(u/z),k*=z),new x(this.data,h,m,u,L,S,k,P)},l.transpose=function(s,w,b){s=s===void 0?0:s|0,w=w===void 0?1:w|0,b=b===void 0?2:b|0;var h=this.shape,m=this.stride;return new x(this.data,h[s],h[w],h[b],m[s],m[w],m[b],this.offset)},l.pick=function(s,w,b){var h=[],m=[],u=this.offset;typeof s=="number"&&s>=0?u=u+this.stride[0]*s|0:(h.push(this.shape[0]),m.push(this.stride[0])),typeof w=="number"&&w>=0?u=u+this.stride[1]*w|0:(h.push(this.shape[1]),m.push(this.stride[1])),typeof b=="number"&&b>=0?u=u+this.stride[2]*b|0:(h.push(this.shape[2]),m.push(this.stride[2]));var L=y[h.length+1];return L(this.data,h,m,u)},function(s,w,b,h){return new x(s,w[0],w[1],w[2],b[0],b[1],b[2],h)}},4:function(d,y,v){function x(_,s,w,b,h,m,u,L,S,k){this.data=_,this.shape=[s,w,b,h],this.stride=[m,u,L,S],this.offset=k|0}var l=x.prototype;return l.dtype=d,l.dimension=4,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(l,"order",{get:v}),l.set=function(s,w,b,h,m){return d==="generic"?this.data.set(this.offset+this.stride[0]*s+this.stride[1]*w+this.stride[2]*b+this.stride[3]*h,m):this.data[this.offset+this.stride[0]*s+this.stride[1]*w+this.stride[2]*b+this.stride[3]*h]=m},l.get=function(s,w,b,h){return d==="generic"?this.data.get(this.offset+this.stride[0]*s+this.stride[1]*w+this.stride[2]*b+this.stride[3]*h):this.data[this.offset+this.stride[0]*s+this.stride[1]*w+this.stride[2]*b+this.stride[3]*h]},l.index=function(s,w,b,h){return this.offset+this.stride[0]*s+this.stride[1]*w+this.stride[2]*b+this.stride[3]*h},l.hi=function(s,w,b,h){return new x(this.data,typeof s!="number"||s<0?this.shape[0]:s|0,typeof w!="number"||w<0?this.shape[1]:w|0,typeof b!="number"||b<0?this.shape[2]:b|0,typeof h!="number"||h<0?this.shape[3]:h|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},l.lo=function(s,w,b,h){var m=this.offset,u=0,L=this.shape[0],S=this.shape[1],k=this.shape[2],P=this.shape[3],z=this.stride[0],I=this.stride[1],D=this.stride[2],R=this.stride[3];return typeof s=="number"&&s>=0&&(u=s|0,m+=z*u,L-=u),typeof w=="number"&&w>=0&&(u=w|0,m+=I*u,S-=u),typeof b=="number"&&b>=0&&(u=b|0,m+=D*u,k-=u),typeof h=="number"&&h>=0&&(u=h|0,m+=R*u,P-=u),new x(this.data,L,S,k,P,z,I,D,R,m)},l.step=function(s,w,b,h){var m=this.shape[0],u=this.shape[1],L=this.shape[2],S=this.shape[3],k=this.stride[0],P=this.stride[1],z=this.stride[2],I=this.stride[3],D=this.offset,R=0,B=Math.ceil;return typeof s=="number"&&(R=s|0,R<0?(D+=k*(m-1),m=B(-m/R)):m=B(m/R),k*=R),typeof w=="number"&&(R=w|0,R<0?(D+=P*(u-1),u=B(-u/R)):u=B(u/R),P*=R),typeof b=="number"&&(R=b|0,R<0?(D+=z*(L-1),L=B(-L/R)):L=B(L/R),z*=R),typeof h=="number"&&(R=h|0,R<0?(D+=I*(S-1),S=B(-S/R)):S=B(S/R),I*=R),new x(this.data,m,u,L,S,k,P,z,I,D)},l.transpose=function(s,w,b,h){s=s===void 0?0:s|0,w=w===void 0?1:w|0,b=b===void 0?2:b|0,h=h===void 0?3:h|0;var m=this.shape,u=this.stride;return new x(this.data,m[s],m[w],m[b],m[h],u[s],u[w],u[b],u[h],this.offset)},l.pick=function(s,w,b,h){var m=[],u=[],L=this.offset;typeof s=="number"&&s>=0?L=L+this.stride[0]*s|0:(m.push(this.shape[0]),u.push(this.stride[0])),typeof w=="number"&&w>=0?L=L+this.stride[1]*w|0:(m.push(this.shape[1]),u.push(this.stride[1])),typeof b=="number"&&b>=0?L=L+this.stride[2]*b|0:(m.push(this.shape[2]),u.push(this.stride[2])),typeof h=="number"&&h>=0?L=L+this.stride[3]*h|0:(m.push(this.shape[3]),u.push(this.stride[3]));var S=y[m.length+1];return S(this.data,m,u,L)},function(s,w,b,h){return new x(s,w[0],w[1],w[2],w[3],b[0],b[1],b[2],b[3],h)}},5:function(y,v,x){function l(s,w,b,h,m,u,L,S,k,P,z,I){this.data=s,this.shape=[w,b,h,m,u],this.stride=[L,S,k,P,z],this.offset=I|0}var _=l.prototype;return _.dtype=y,_.dimension=5,Object.defineProperty(_,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(_,"order",{get:x}),_.set=function(w,b,h,m,u,L){return y==="generic"?this.data.set(this.offset+this.stride[0]*w+this.stride[1]*b+this.stride[2]*h+this.stride[3]*m+this.stride[4]*u,L):this.data[this.offset+this.stride[0]*w+this.stride[1]*b+this.stride[2]*h+this.stride[3]*m+this.stride[4]*u]=L},_.get=function(w,b,h,m,u){return y==="generic"?this.data.get(this.offset+this.stride[0]*w+this.stride[1]*b+this.stride[2]*h+this.stride[3]*m+this.stride[4]*u):this.data[this.offset+this.stride[0]*w+this.stride[1]*b+this.stride[2]*h+this.stride[3]*m+this.stride[4]*u]},_.index=function(w,b,h,m,u){return this.offset+this.stride[0]*w+this.stride[1]*b+this.stride[2]*h+this.stride[3]*m+this.stride[4]*u},_.hi=function(w,b,h,m,u){return new l(this.data,typeof w!="number"||w<0?this.shape[0]:w|0,typeof b!="number"||b<0?this.shape[1]:b|0,typeof h!="number"||h<0?this.shape[2]:h|0,typeof m!="number"||m<0?this.shape[3]:m|0,typeof u!="number"||u<0?this.shape[4]:u|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},_.lo=function(w,b,h,m,u){var L=this.offset,S=0,k=this.shape[0],P=this.shape[1],z=this.shape[2],I=this.shape[3],D=this.shape[4],R=this.stride[0],B=this.stride[1],F=this.stride[2],V=this.stride[3],Y=this.stride[4];return typeof w=="number"&&w>=0&&(S=w|0,L+=R*S,k-=S),typeof b=="number"&&b>=0&&(S=b|0,L+=B*S,P-=S),typeof h=="number"&&h>=0&&(S=h|0,L+=F*S,z-=S),typeof m=="number"&&m>=0&&(S=m|0,L+=V*S,I-=S),typeof u=="number"&&u>=0&&(S=u|0,L+=Y*S,D-=S),new l(this.data,k,P,z,I,D,R,B,F,V,Y,L)},_.step=function(w,b,h,m,u){var L=this.shape[0],S=this.shape[1],k=this.shape[2],P=this.shape[3],z=this.shape[4],I=this.stride[0],D=this.stride[1],R=this.stride[2],B=this.stride[3],F=this.stride[4],V=this.offset,Y=0,K=Math.ceil;return typeof w=="number"&&(Y=w|0,Y<0?(V+=I*(L-1),L=K(-L/Y)):L=K(L/Y),I*=Y),typeof b=="number"&&(Y=b|0,Y<0?(V+=D*(S-1),S=K(-S/Y)):S=K(S/Y),D*=Y),typeof h=="number"&&(Y=h|0,Y<0?(V+=R*(k-1),k=K(-k/Y)):k=K(k/Y),R*=Y),typeof m=="number"&&(Y=m|0,Y<0?(V+=B*(P-1),P=K(-P/Y)):P=K(P/Y),B*=Y),typeof u=="number"&&(Y=u|0,Y<0?(V+=F*(z-1),z=K(-z/Y)):z=K(z/Y),F*=Y),new l(this.data,L,S,k,P,z,I,D,R,B,F,V)},_.transpose=function(w,b,h,m,u){w=w===void 0?0:w|0,b=b===void 0?1:b|0,h=h===void 0?2:h|0,m=m===void 0?3:m|0,u=u===void 0?4:u|0;var L=this.shape,S=this.stride;return new l(this.data,L[w],L[b],L[h],L[m],L[u],S[w],S[b],S[h],S[m],S[u],this.offset)},_.pick=function(w,b,h,m,u){var L=[],S=[],k=this.offset;typeof w=="number"&&w>=0?k=k+this.stride[0]*w|0:(L.push(this.shape[0]),S.push(this.stride[0])),typeof b=="number"&&b>=0?k=k+this.stride[1]*b|0:(L.push(this.shape[1]),S.push(this.stride[1])),typeof h=="number"&&h>=0?k=k+this.stride[2]*h|0:(L.push(this.shape[2]),S.push(this.stride[2])),typeof m=="number"&&m>=0?k=k+this.stride[3]*m|0:(L.push(this.shape[3]),S.push(this.stride[3])),typeof u=="number"&&u>=0?k=k+this.stride[4]*u|0:(L.push(this.shape[4]),S.push(this.stride[4]));var P=v[L.length+1];return P(this.data,L,S,k)},function(w,b,h,m){return new l(w,b[0],b[1],b[2],b[3],b[4],h[0],h[1],h[2],h[3],h[4],m)}}};function f(d,y){var v=y===-1?"T":String(y),x=r[v];return y===-1?x(d):y===0?x(d,i[d][0]):x(d,i[d],t)}function o(d){if(e(d))return"buffer";if(a)switch(Object.prototype.toString.call(d)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(d)?"array":"generic"}var i={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function p(d,y,v,x){if(d===void 0){var h=i.array[0];return h([])}else typeof d=="number"&&(d=[d]);y===void 0&&(y=[d.length]);var l=y.length;if(v===void 0){v=new Array(l);for(var _=l-1,s=1;_>=0;--_)v[_]=s,s*=y[_]}if(x===void 0){x=0;for(var _=0;_<l;++_)v[_]<0&&(x-=(y[_]-1)*v[_])}for(var w=o(d),b=i[w];b.length<=l+1;)b.push(f(w,b.length-1));var h=b[l+1];return h(d,y,v,x)}M.exports=p},{"is-buffer":237}],260:[function(c,M,A){var e=c("double-bits"),a=Math.pow(2,-1074),n=-1>>>0;M.exports=t;function t(r,f){if(isNaN(r)||isNaN(f))return NaN;if(r===f)return r;if(r===0)return f<0?-a:a;var o=e.hi(r),i=e.lo(r);return f>r==r>0?i===n?(o+=1,i=0):i+=1:i===0?(i=n,o-=1):i-=1,e.pack(i,o)}},{"double-bits":64}],261:[function(c,M,A){var e=1e-6,a=1e-6;A.vertexNormals=function(n,t,r){for(var f=t.length,o=new Array(f),i=r===void 0?e:r,p=0;p<f;++p)o[p]=[0,0,0];for(var p=0;p<n.length;++p)for(var d=n[p],y=0,v=d[d.length-1],x=d[0],l=0;l<d.length;++l){y=v,v=x,x=d[(l+1)%d.length];for(var _=t[y],s=t[v],w=t[x],b=new Array(3),h=0,m=new Array(3),u=0,L=0;L<3;++L)b[L]=_[L]-s[L],h+=b[L]*b[L],m[L]=w[L]-s[L],u+=m[L]*m[L];if(h*u>i)for(var S=o[v],k=1/Math.sqrt(h*u),L=0;L<3;++L){var P=(L+1)%3,z=(L+2)%3;S[L]+=k*(m[P]*b[z]-m[z]*b[P])}}for(var p=0;p<f;++p){for(var S=o[p],I=0,L=0;L<3;++L)I+=S[L]*S[L];if(I>i)for(var k=1/Math.sqrt(I),L=0;L<3;++L)S[L]*=k;else for(var L=0;L<3;++L)S[L]=0}return o},A.faceNormals=function(n,t,r){for(var f=n.length,o=new Array(f),i=r===void 0?a:r,p=0;p<f;++p){for(var d=n[p],y=new Array(3),v=0;v<3;++v)y[v]=t[d[v]];for(var x=new Array(3),l=new Array(3),v=0;v<3;++v)x[v]=y[1][v]-y[0][v],l[v]=y[2][v]-y[0][v];for(var _=new Array(3),s=0,v=0;v<3;++v){var w=(v+1)%3,b=(v+2)%3;_[v]=x[w]*l[b]-x[b]*l[w],s+=_[v]*_[v]}s>i?s=1/Math.sqrt(s):s=0;for(var v=0;v<3;++v)_[v]*=s;o[p]=_}return o}},{}],262:[function(c,M,A){M.exports=e;function e(a,n,t,r,f,o,i,p,d,y){var v=n+o+y;if(x>0){var x=Math.sqrt(v+1);a[0]=.5*(i-d)/x,a[1]=.5*(p-r)/x,a[2]=.5*(t-o)/x,a[3]=.5*x}else{var l=Math.max(n,o,y),x=Math.sqrt(2*l-v+1);n>=l?(a[0]=.5*x,a[1]=.5*(f+t)/x,a[2]=.5*(p+r)/x,a[3]=.5*(i-d)/x):o>=l?(a[0]=.5*(t+f)/x,a[1]=.5*x,a[2]=.5*(d+i)/x,a[3]=.5*(p-r)/x):(a[0]=.5*(r+p)/x,a[1]=.5*(i+d)/x,a[2]=.5*x,a[3]=.5*(t-f)/x)}return a}},{}],263:[function(c,M,A){M.exports=y;var e=c("filtered-vector"),a=c("gl-mat4/lookAt"),n=c("gl-mat4/fromQuat"),t=c("gl-mat4/invert"),r=c("./lib/quatFromFrame");function f(v,x,l){return Math.sqrt(Math.pow(v,2)+Math.pow(x,2)+Math.pow(l,2))}function o(v,x,l,_){return Math.sqrt(Math.pow(v,2)+Math.pow(x,2)+Math.pow(l,2)+Math.pow(_,2))}function i(v,x){var l=x[0],_=x[1],s=x[2],w=x[3],b=o(l,_,s,w);b>1e-6?(v[0]=l/b,v[1]=_/b,v[2]=s/b,v[3]=w/b):(v[0]=v[1]=v[2]=0,v[3]=1)}function p(v,x,l){this.radius=e([l]),this.center=e(x),this.rotation=e(v),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=p.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(v){this.radius.curve(v),this.center.curve(v),this.rotation.curve(v);var x=this.computedRotation;i(x,x);var l=this.computedMatrix;n(l,x);var _=this.computedCenter,s=this.computedEye,w=this.computedUp,b=Math.exp(this.computedRadius[0]);s[0]=_[0]+b*l[2],s[1]=_[1]+b*l[6],s[2]=_[2]+b*l[10],w[0]=l[1],w[1]=l[5],w[2]=l[9];for(var h=0;h<3;++h){for(var m=0,u=0;u<3;++u)m+=l[h+4*u]*s[u];l[12+h]=-m}},d.getMatrix=function(v,x){this.recalcMatrix(v);var l=this.computedMatrix;if(x){for(var _=0;_<16;++_)x[_]=l[_];return x}return l},d.idle=function(v){this.center.idle(v),this.radius.idle(v),this.rotation.idle(v)},d.flush=function(v){this.center.flush(v),this.radius.flush(v),this.rotation.flush(v)},d.pan=function(v,x,l,_){x=x||0,l=l||0,_=_||0,this.recalcMatrix(v);var s=this.computedMatrix,w=s[1],b=s[5],h=s[9],m=f(w,b,h);w/=m,b/=m,h/=m;var u=s[0],L=s[4],S=s[8],k=u*w+L*b+S*h;u-=w*k,L-=b*k,S-=h*k;var P=f(u,L,S);u/=P,L/=P,S/=P,s[2],s[6],s[10];var z=u*x+w*l,I=L*x+b*l,D=S*x+h*l;this.center.move(v,z,I,D);var R=Math.exp(this.computedRadius[0]);R=Math.max(1e-4,R+_),this.radius.set(v,Math.log(R))},d.rotate=function(v,x,l,_){this.recalcMatrix(v),x=x||0,l=l||0;var s=this.computedMatrix,w=s[0],b=s[4],h=s[8],m=s[1],u=s[5],L=s[9],S=s[2],k=s[6],P=s[10],z=x*w+l*m,I=x*b+l*u,D=x*h+l*L,R=-(k*D-P*I),B=-(P*z-S*D),F=-(S*I-k*z),V=Math.sqrt(Math.max(0,1-Math.pow(R,2)-Math.pow(B,2)-Math.pow(F,2))),Y=o(R,B,F,V);Y>1e-6?(R/=Y,B/=Y,F/=Y,V/=Y):(R=B=F=0,V=1);var K=this.computedRotation,J=K[0],G=K[1],Z=K[2],re=K[3],se=J*V+re*R+G*F-Z*B,oe=G*V+re*B+Z*R-J*F,N=Z*V+re*F+J*B-G*R,U=re*V-J*R-G*B-Z*F;if(_){R=S,B=k,F=P;var q=Math.sin(_)/f(R,B,F);R*=q,B*=q,F*=q,V=Math.cos(x),se=se*V+U*R+oe*F-N*B,oe=oe*V+U*B+N*R-se*F,N=N*V+U*F+se*B-oe*R,U=U*V-se*R-oe*B-N*F}var Q=o(se,oe,N,U);Q>1e-6?(se/=Q,oe/=Q,N/=Q,U/=Q):(se=oe=N=0,U=1),this.rotation.set(v,se,oe,N,U)},d.lookAt=function(v,x,l,_){this.recalcMatrix(v),l=l||this.computedCenter,x=x||this.computedEye,_=_||this.computedUp;var s=this.computedMatrix;a(s,x,l,_);var w=this.computedRotation;r(w,s[0],s[1],s[2],s[4],s[5],s[6],s[8],s[9],s[10]),i(w,w),this.rotation.set(v,w[0],w[1],w[2],w[3]);for(var b=0,h=0;h<3;++h)b+=Math.pow(l[h]-x[h],2);this.radius.set(v,.5*Math.log(Math.max(b,1e-6))),this.center.set(v,l[0],l[1],l[2])},d.translate=function(v,x,l,_){this.center.move(v,x||0,l||0,_||0)},d.setMatrix=function(v,x){var l=this.computedRotation;r(l,x[0],x[1],x[2],x[4],x[5],x[6],x[8],x[9],x[10]),i(l,l),this.rotation.set(v,l[0],l[1],l[2],l[3]);var _=this.computedMatrix;t(_,x);var s=_[15];if(Math.abs(s)>1e-6){var w=_[12]/s,b=_[13]/s,h=_[14]/s;this.recalcMatrix(v);var m=Math.exp(this.computedRadius[0]);this.center.set(v,w-_[2]*m,b-_[6]*m,h-_[10]*m),this.radius.idle(v)}else this.center.idle(v),this.radius.idle(v)},d.setDistance=function(v,x){x>0&&this.radius.set(v,Math.log(x))},d.setDistanceLimits=function(v,x){v>0?v=Math.log(v):v=-1/0,x>0?x=Math.log(x):x=1/0,x=Math.max(x,v),this.radius.bounds[0][0]=v,this.radius.bounds[1][0]=x},d.getDistanceLimits=function(v){var x=this.radius.bounds;return v?(v[0]=Math.exp(x[0][0]),v[1]=Math.exp(x[1][0]),v):[Math.exp(x[0][0]),Math.exp(x[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(v){var x=this.lastT(),l=v.center;l&&this.center.set(x,l[0],l[1],l[2]);var _=v.rotation;_&&this.rotation.set(x,_[0],_[1],_[2],_[3]);var s=v.distance;s&&s>0&&this.radius.set(x,Math.log(s)),this.setDistanceLimits(v.zoomMin,v.zoomMax)};function y(v){v=v||{};var x=v.center||[0,0,0],l=v.rotation||[0,0,0,1],_=v.radius||1;x=[].slice.call(x,0,3),l=[].slice.call(l,0,4),i(l,l);var s=new p(l,x,Math.log(_));return s.setDistanceLimits(v.zoomMin,v.zoomMax),("eye"in v||"up"in v)&&s.lookAt(0,v.eye,v.center,v.up),s}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(c,M,A){var e=c("repeat-string");M.exports=function(n,t,r){return r=typeof r!="undefined"?r+"":" ",e(r,t)+n}},{"repeat-string":277}],265:[function(c,M,A){M.exports=function(a,n){n||(n=[0,""]),a=String(a);var t=parseFloat(a,10);return n[0]=t,n[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}},{}],266:[function(c,M,A){M.exports=a;var e=c("compare-angle");function a(n,t){for(var r=t.length|0,f=n.length,o=[new Array(r),new Array(r)],i=0;i<r;++i)o[0][i]=[],o[1][i]=[];for(var i=0;i<f;++i){var p=n[i];o[0][p[0]].push(p),o[1][p[1]].push(p)}for(var d=[],i=0;i<r;++i)o[0][i].length+o[1][i].length===0&&d.push([i]);function y(b,h){var m=o[h][b[h]];m.splice(m.indexOf(b),1)}function v(b,h,m){for(var u,L,S,k=0;k<2;++k)if(o[k][h].length>0){u=o[k][h][0],S=k;break}L=u[S^1];for(var P=0;P<2;++P)for(var z=o[P][h],I=0;I<z.length;++I){var D=z[I],R=D[P^1],B=e(t[b],t[h],t[L],t[R]);B>0&&(u=D,L=R,S=P)}return m||u&&y(u,S),L}function x(b,h){var m=o[h][b][0],u=[b];y(m,h);for(var L=m[h^1];;){for(;L!==b;)u.push(L),L=v(u[u.length-2],L,!1);if(o[0][b].length+o[1][b].length===0)break;var S=u[u.length-1],k=b,P=u[1],z=v(S,k,!0);if(e(t[S],t[k],t[P],t[z])<0)break;u.push(b),L=v(S,k)}return u}function l(b,h){return h[1]===h[h.length-1]}for(var i=0;i<r;++i)for(var _=0;_<2;++_){for(var s=[];o[_][i].length>0;){o[0][i].length;var w=x(i,_);l(s,w)?s.push.apply(s,w):(s.length>0&&d.push(s),s=w)}s.length>0&&d.push(s)}return d}},{"compare-angle":54}],267:[function(c,M,A){M.exports=a;var e=c("edges-to-adjacency-list");function a(n,t){for(var r=e(n,t.length),f=new Array(t.length),o=new Array(t.length),i=[],p=0;p<t.length;++p){var d=r[p].length;o[p]=d,f[p]=!0,d<=1&&i.push(p)}for(;i.length>0;){var y=i.pop();f[y]=!1;for(var v=r[y],p=0;p<v.length;++p){var x=v[p];--o[x]==0&&i.push(x)}}for(var l=new Array(t.length),_=[],p=0;p<t.length;++p)if(f[p]){var y=_.length;l[p]=y,_.push(t[p])}else l[p]=-1;for(var s=[],p=0;p<n.length;++p){var w=n[p];f[w[0]]&&f[w[1]]&&s.push([l[w[0]],l[w[1]]])}return[s,_]}},{"edges-to-adjacency-list":66}],268:[function(c,M,A){M.exports=d;var e=c("edges-to-adjacency-list"),a=c("planar-dual"),n=c("point-in-big-polygon"),t=c("two-product"),r=c("robust-sum"),f=c("uniq"),o=c("./lib/trim-leaves");function i(y,v){for(var x=new Array(y),l=0;l<y;++l)x[l]=v;return x}function p(y){for(var v=new Array(y),x=0;x<y;++x)v[x]=[];return v}function d(y,v){var x=o(y,v);y=x[0],v=x[1];var l=v.length;y.length;for(var _=e(y,v.length),s=0;s<l;++s)if(_[s].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var w=a(y,v);function b(ie){for(var le=ie.length,ye=[0],ue=0;ue<le;++ue){var pe=v[ie[ue]],ge=v[ie[(ue+1)%le]],Te=t(-pe[0],pe[1]),_e=t(-pe[0],ge[1]),De=t(ge[0],pe[1]),Oe=t(ge[0],ge[1]);ye=r(ye,r(r(Te,_e),r(De,Oe)))}return ye[ye.length-1]>0}w=w.filter(b);for(var h=w.length,m=new Array(h),u=new Array(h),s=0;s<h;++s){m[s]=s;var L=new Array(h),S=w[s].map(function(le){return v[le]}),k=n([S]),P=0;e:for(var z=0;z<h;++z)if(L[z]=0,s!==z){for(var I=w[z],D=I.length,R=0;R<D;++R){var B=k(v[I[R]]);if(B!==0){B<0&&(L[z]=1,P+=1);continue e}}L[z]=1,P+=1}u[s]=[P,s,L]}u.sort(function(ie,le){return le[0]-ie[0]});for(var s=0;s<h;++s)for(var L=u[s],F=L[1],V=L[2],z=0;z<h;++z)V[z]&&(m[z]=F);for(var Y=p(h),s=0;s<h;++s)Y[s].push(m[s]),Y[m[s]].push(s);for(var K={},J=i(l,!1),s=0;s<h;++s)for(var I=w[s],D=I.length,z=0;z<D;++z){var G=I[z],Z=I[(z+1)%D],re=Math.min(G,Z)+":"+Math.max(G,Z);if(re in K){var se=K[re];Y[se].push(s),Y[s].push(se),J[G]=J[Z]=!0}else K[re]=s}function oe(ie){for(var le=ie.length,ye=0;ye<le;++ye)if(!J[ie[ye]])return!1;return!0}for(var N=[],U=i(h,-1),s=0;s<h;++s)m[s]===s&&!oe(w[s])?(N.push(s),U[s]=0):U[s]=-1;for(var x=[];N.length>0;){var q=N.pop(),Q=Y[q];f(Q,function(ie,le){return ie-le});var W=Q.length,X=U[q],te;if(X===0){var I=w[q];te=[I]}for(var s=0;s<W;++s){var ee=Q[s];if(!(U[ee]>=0)&&(U[ee]=X^1,N.push(ee),X===0)){var I=w[ee];oe(I)||(I.reverse(),te.push(I))}}X===0&&x.push(te)}return x}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(c,M,A){M.exports=v;var e=c("robust-orientation")[3],a=c("slab-decomposition"),n=c("interval-tree-1d"),t=c("binary-search-bounds");function r(){return!0}function f(x){return function(l,_){var s=x[l];return s?!!s.queryPoint(_,r):!1}}function o(x){for(var l={},_=0;_<x.length;++_){var s=x[_],w=s[0][0],b=s[0][1],h=s[1][1],m=[Math.min(b,h),Math.max(b,h)];w in l?l[w].push(m):l[w]=[m]}for(var u={},L=Object.keys(l),_=0;_<L.length;++_){var S=l[L[_]];u[L[_]]=n(S)}return f(u)}function i(x,l){return function(_){var s=t.le(l,_[0]);if(s<0)return 1;var w=x[s];if(!w)if(s>0&&l[s]===_[0])w=x[s-1];else return 1;for(var b=1;w;){var h=w.key,m=e(_,h[0],h[1]);if(h[0][0]<h[1][0])if(m<0)w=w.left;else if(m>0)b=-1,w=w.right;else return 0;else if(m>0)w=w.left;else if(m<0)b=1,w=w.right;else return 0}return b}}function p(x){return 1}function d(x){return function(_){return x(_[0],_[1])?0:1}}function y(x,l){return function(s){return x(s[0],s[1])?0:l(s)}}function v(x){for(var l=x.length,_=[],s=[],w=0;w<l;++w)for(var b=x[w],h=b.length,m=h-1,u=0;u<h;m=u++){var L=b[m],S=b[u];L[0]===S[0]?s.push([L,S]):_.push([L,S])}if(_.length===0)return s.length===0?p:d(o(s));var k=a(_),P=i(k.slabs,k.coordinates);return s.length===0?P:y(o(s),P)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(c,M,A){var e=new Float64Array(4),a=new Float64Array(4),n=new Float64Array(4);function t(r,f,o,i,p){e.length<i.length&&(e=new Float64Array(i.length),a=new Float64Array(i.length),n=new Float64Array(i.length));for(var d=0;d<i.length;++d)e[d]=r[d]-i[d],a[d]=f[d]-r[d],n[d]=o[d]-r[d];for(var y=0,v=0,x=0,l=0,_=0,s=0,d=0;d<i.length;++d){var w=a[d],b=n[d],h=e[d];y+=w*w,v+=w*b,x+=b*b,l+=h*w,_+=h*b,s+=h*h}var m=Math.abs(y*x-v*v),u=v*_-x*l,L=v*l-y*_,S;if(u+L<=m)if(u<0)L<0&&l<0?(L=0,-l>=y?(u=1,S=y+2*l+s):(u=-l/y,S=l*u+s)):(u=0,_>=0?(L=0,S=s):-_>=x?(L=1,S=x+2*_+s):(L=-_/x,S=_*L+s));else if(L<0)L=0,l>=0?(u=0,S=s):-l>=y?(u=1,S=y+2*l+s):(u=-l/y,S=l*u+s);else{var k=1/m;u*=k,L*=k,S=u*(y*u+v*L+2*l)+L*(v*u+x*L+2*_)+s}else{var P,z,I,D;u<0?(P=v+l,z=x+_,z>P?(I=z-P,D=y-2*v+x,I>=D?(u=1,L=0,S=y+2*l+s):(u=I/D,L=1-u,S=u*(y*u+v*L+2*l)+L*(v*u+x*L+2*_)+s)):(u=0,z<=0?(L=1,S=x+2*_+s):_>=0?(L=0,S=s):(L=-_/x,S=_*L+s))):L<0?(P=v+_,z=y+l,z>P?(I=z-P,D=y-2*v+x,I>=D?(L=1,u=0,S=x+2*_+s):(L=I/D,u=1-L,S=u*(y*u+v*L+2*l)+L*(v*u+x*L+2*_)+s)):(L=0,z<=0?(u=1,S=y+2*l+s):l>=0?(u=0,S=s):(u=-l/y,S=l*u+s))):(I=x+_-v-l,I<=0?(u=0,L=1,S=x+2*_+s):(D=y-2*v+x,I>=D?(u=1,L=0,S=y+2*l+s):(u=I/D,L=1-u,S=u*(y*u+v*L+2*l)+L*(v*u+x*L+2*_)+s)))}for(var R=1-u-L,d=0;d<i.length;++d)p[d]=R*r[d]+u*f[d]+L*o[d];return S<0?0:S}M.exports=t},{}],271:[function(c,M,A){M.exports=c("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(c,M,A){var e=c("big-rat/add");M.exports=a;function a(n,t){for(var r=n.length,f=new Array(r),o=0;o<r;++o)f[o]=e(n[o],t[o]);return f}},{"big-rat/add":15}],273:[function(c,M,A){M.exports=a;var e=c("big-rat");function a(n){for(var t=new Array(n.length),r=0;r<n.length;++r)t[r]=e(n[r]);return t}},{"big-rat":18}],274:[function(c,M,A){var e=c("big-rat"),a=c("big-rat/mul");M.exports=n;function n(t,r){for(var f=e(r),o=t.length,i=new Array(o),p=0;p<o;++p)i[p]=a(t[p],f);return i}},{"big-rat":18,"big-rat/mul":27}],275:[function(c,M,A){var e=c("big-rat/sub");M.exports=a;function a(n,t){for(var r=n.length,f=new Array(r),o=0;o<r;++o)f[o]=e(n[o],t[o]);return f}},{"big-rat/sub":29}],276:[function(c,M,A){var e=c("compare-cell"),a=c("compare-oriented-cell"),n=c("cell-orientation");M.exports=t;function t(r){r.sort(a);for(var f=r.length,o=0,i=0;i<f;++i){var p=r[i],d=n(p);if(d!==0){if(o>0){var y=r[o-1];if(e(p,y)===0&&n(y)!==d){o-=1;continue}}r[o++]=p}}return r.length=o,r}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(c,M,A){var e="",a;M.exports=n;function n(t,r){if(typeof t!="string")throw new TypeError("expected a string");if(r===1)return t;if(r===2)return t+t;var f=t.length*r;if(a!==t||typeof a=="undefined")a=t,e="";else if(e.length>=f)return e.substr(0,f);for(;f>e.length&&r>1;)r&1&&(e+=t),r>>=1,t+=t;return e+=t,e=e.substr(0,f),e}},{}],278:[function(c,M,A){(function(e){(function(){M.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof T!="undefined"?T:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],279:[function(c,M,A){M.exports=e;function e(a){for(var n=a.length,t=a[a.length-1],r=n,f=n-2;f>=0;--f){var o=t,i=a[f];t=o+i;var p=t-o,d=i-p;d&&(a[--r]=t,t=d)}for(var y=0,f=r;f<n;++f){var o=a[f],i=t;t=o+i;var p=t-o,d=i-p;d&&(a[y++]=d)}return a[y++]=t,a.length=y,a}},{}],280:[function(c,M,A){var e=c("two-product"),a=c("robust-sum"),n=c("robust-scale"),t=c("robust-compress"),r=6;function f(l,_,s,w){return function(h){return w(l(s(h[0][0],h[1][1]),s(-h[0][1],h[1][0])))}}function o(l,_,s,w){return function(h){return w(l(_(l(s(h[1][1],h[2][2]),s(-h[1][2],h[2][1])),h[0][0]),l(_(l(s(h[1][0],h[2][2]),s(-h[1][2],h[2][0])),-h[0][1]),_(l(s(h[1][0],h[2][1]),s(-h[1][1],h[2][0])),h[0][2]))))}}function i(l,_,s,w){return function(h){return w(l(l(_(l(_(l(s(h[2][2],h[3][3]),s(-h[2][3],h[3][2])),h[1][1]),l(_(l(s(h[2][1],h[3][3]),s(-h[2][3],h[3][1])),-h[1][2]),_(l(s(h[2][1],h[3][2]),s(-h[2][2],h[3][1])),h[1][3]))),h[0][0]),_(l(_(l(s(h[2][2],h[3][3]),s(-h[2][3],h[3][2])),h[1][0]),l(_(l(s(h[2][0],h[3][3]),s(-h[2][3],h[3][0])),-h[1][2]),_(l(s(h[2][0],h[3][2]),s(-h[2][2],h[3][0])),h[1][3]))),-h[0][1])),l(_(l(_(l(s(h[2][1],h[3][3]),s(-h[2][3],h[3][1])),h[1][0]),l(_(l(s(h[2][0],h[3][3]),s(-h[2][3],h[3][0])),-h[1][1]),_(l(s(h[2][0],h[3][1]),s(-h[2][1],h[3][0])),h[1][3]))),h[0][2]),_(l(_(l(s(h[2][1],h[3][2]),s(-h[2][2],h[3][1])),h[1][0]),l(_(l(s(h[2][0],h[3][2]),s(-h[2][2],h[3][0])),-h[1][1]),_(l(s(h[2][0],h[3][1]),s(-h[2][1],h[3][0])),h[1][2]))),-h[0][3]))))}}function p(l,_,s,w){return function(h){return w(l(l(_(l(l(_(l(_(l(s(h[3][3],h[4][4]),s(-h[3][4],h[4][3])),h[2][2]),l(_(l(s(h[3][2],h[4][4]),s(-h[3][4],h[4][2])),-h[2][3]),_(l(s(h[3][2],h[4][3]),s(-h[3][3],h[4][2])),h[2][4]))),h[1][1]),_(l(_(l(s(h[3][3],h[4][4]),s(-h[3][4],h[4][3])),h[2][1]),l(_(l(s(h[3][1],h[4][4]),s(-h[3][4],h[4][1])),-h[2][3]),_(l(s(h[3][1],h[4][3]),s(-h[3][3],h[4][1])),h[2][4]))),-h[1][2])),l(_(l(_(l(s(h[3][2],h[4][4]),s(-h[3][4],h[4][2])),h[2][1]),l(_(l(s(h[3][1],h[4][4]),s(-h[3][4],h[4][1])),-h[2][2]),_(l(s(h[3][1],h[4][2]),s(-h[3][2],h[4][1])),h[2][4]))),h[1][3]),_(l(_(l(s(h[3][2],h[4][3]),s(-h[3][3],h[4][2])),h[2][1]),l(_(l(s(h[3][1],h[4][3]),s(-h[3][3],h[4][1])),-h[2][2]),_(l(s(h[3][1],h[4][2]),s(-h[3][2],h[4][1])),h[2][3]))),-h[1][4]))),h[0][0]),_(l(l(_(l(_(l(s(h[3][3],h[4][4]),s(-h[3][4],h[4][3])),h[2][2]),l(_(l(s(h[3][2],h[4][4]),s(-h[3][4],h[4][2])),-h[2][3]),_(l(s(h[3][2],h[4][3]),s(-h[3][3],h[4][2])),h[2][4]))),h[1][0]),_(l(_(l(s(h[3][3],h[4][4]),s(-h[3][4],h[4][3])),h[2][0]),l(_(l(s(h[3][0],h[4][4]),s(-h[3][4],h[4][0])),-h[2][3]),_(l(s(h[3][0],h[4][3]),s(-h[3][3],h[4][0])),h[2][4]))),-h[1][2])),l(_(l(_(l(s(h[3][2],h[4][4]),s(-h[3][4],h[4][2])),h[2][0]),l(_(l(s(h[3][0],h[4][4]),s(-h[3][4],h[4][0])),-h[2][2]),_(l(s(h[3][0],h[4][2]),s(-h[3][2],h[4][0])),h[2][4]))),h[1][3]),_(l(_(l(s(h[3][2],h[4][3]),s(-h[3][3],h[4][2])),h[2][0]),l(_(l(s(h[3][0],h[4][3]),s(-h[3][3],h[4][0])),-h[2][2]),_(l(s(h[3][0],h[4][2]),s(-h[3][2],h[4][0])),h[2][3]))),-h[1][4]))),-h[0][1])),l(_(l(l(_(l(_(l(s(h[3][3],h[4][4]),s(-h[3][4],h[4][3])),h[2][1]),l(_(l(s(h[3][1],h[4][4]),s(-h[3][4],h[4][1])),-h[2][3]),_(l(s(h[3][1],h[4][3]),s(-h[3][3],h[4][1])),h[2][4]))),h[1][0]),_(l(_(l(s(h[3][3],h[4][4]),s(-h[3][4],h[4][3])),h[2][0]),l(_(l(s(h[3][0],h[4][4]),s(-h[3][4],h[4][0])),-h[2][3]),_(l(s(h[3][0],h[4][3]),s(-h[3][3],h[4][0])),h[2][4]))),-h[1][1])),l(_(l(_(l(s(h[3][1],h[4][4]),s(-h[3][4],h[4][1])),h[2][0]),l(_(l(s(h[3][0],h[4][4]),s(-h[3][4],h[4][0])),-h[2][1]),_(l(s(h[3][0],h[4][1]),s(-h[3][1],h[4][0])),h[2][4]))),h[1][3]),_(l(_(l(s(h[3][1],h[4][3]),s(-h[3][3],h[4][1])),h[2][0]),l(_(l(s(h[3][0],h[4][3]),s(-h[3][3],h[4][0])),-h[2][1]),_(l(s(h[3][0],h[4][1]),s(-h[3][1],h[4][0])),h[2][3]))),-h[1][4]))),h[0][2]),l(_(l(l(_(l(_(l(s(h[3][2],h[4][4]),s(-h[3][4],h[4][2])),h[2][1]),l(_(l(s(h[3][1],h[4][4]),s(-h[3][4],h[4][1])),-h[2][2]),_(l(s(h[3][1],h[4][2]),s(-h[3][2],h[4][1])),h[2][4]))),h[1][0]),_(l(_(l(s(h[3][2],h[4][4]),s(-h[3][4],h[4][2])),h[2][0]),l(_(l(s(h[3][0],h[4][4]),s(-h[3][4],h[4][0])),-h[2][2]),_(l(s(h[3][0],h[4][2]),s(-h[3][2],h[4][0])),h[2][4]))),-h[1][1])),l(_(l(_(l(s(h[3][1],h[4][4]),s(-h[3][4],h[4][1])),h[2][0]),l(_(l(s(h[3][0],h[4][4]),s(-h[3][4],h[4][0])),-h[2][1]),_(l(s(h[3][0],h[4][1]),s(-h[3][1],h[4][0])),h[2][4]))),h[1][2]),_(l(_(l(s(h[3][1],h[4][2]),s(-h[3][2],h[4][1])),h[2][0]),l(_(l(s(h[3][0],h[4][2]),s(-h[3][2],h[4][0])),-h[2][1]),_(l(s(h[3][0],h[4][1]),s(-h[3][1],h[4][0])),h[2][2]))),-h[1][4]))),-h[0][3]),_(l(l(_(l(_(l(s(h[3][2],h[4][3]),s(-h[3][3],h[4][2])),h[2][1]),l(_(l(s(h[3][1],h[4][3]),s(-h[3][3],h[4][1])),-h[2][2]),_(l(s(h[3][1],h[4][2]),s(-h[3][2],h[4][1])),h[2][3]))),h[1][0]),_(l(_(l(s(h[3][2],h[4][3]),s(-h[3][3],h[4][2])),h[2][0]),l(_(l(s(h[3][0],h[4][3]),s(-h[3][3],h[4][0])),-h[2][2]),_(l(s(h[3][0],h[4][2]),s(-h[3][2],h[4][0])),h[2][3]))),-h[1][1])),l(_(l(_(l(s(h[3][1],h[4][3]),s(-h[3][3],h[4][1])),h[2][0]),l(_(l(s(h[3][0],h[4][3]),s(-h[3][3],h[4][0])),-h[2][1]),_(l(s(h[3][0],h[4][1]),s(-h[3][1],h[4][0])),h[2][3]))),h[1][2]),_(l(_(l(s(h[3][1],h[4][2]),s(-h[3][2],h[4][1])),h[2][0]),l(_(l(s(h[3][0],h[4][2]),s(-h[3][2],h[4][0])),-h[2][1]),_(l(s(h[3][0],h[4][1]),s(-h[3][1],h[4][0])),h[2][2]))),-h[1][3]))),h[0][4])))))}}function d(l){var _=l===2?f:l===3?o:l===4?i:l===5?p:void 0;return _(a,n,e,t)}var y=[function(){return[0]},function(_){return[_[0][0]]}];function v(l,_,s,w,b,h,m,u){return function(S){switch(S.length){case 0:return l(S);case 1:return _(S);case 2:return s(S);case 3:return w(S);case 4:return b(S);case 5:return h(S)}var k=m[S.length];return k||(k=m[S.length]=u(S.length)),k(S)}}function x(){for(;y.length<r;)y.push(d(y.length));M.exports=v.apply(void 0,y.concat([y,d]));for(var l=0;l<y.length;++l)M.exports[l]=y[l]}x()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(c,M,A){var e=c("two-product"),a=c("robust-sum");M.exports=n;function n(t,r){for(var f=e(t[0],r[0]),o=1;o<t.length;++o)f=a(f,e(t[o],r[o]));return f}},{"robust-sum":289,"two-product":306}],282:[function(c,M,A){var e=c("two-product"),a=c("robust-sum"),n=c("robust-subtract"),t=c("robust-scale"),r=6;function f(b){var h=b===3?d:b===4?y:b===5?v:x;return h(a,n,e,t)}function o(){return 0}function i(){return 0}function p(){return 0}function d(b,h,m,u){function L(S,k,P){var z=m(S[0],S[0]),I=u(z,k[0]),D=u(z,P[0]),R=m(k[0],k[0]),B=u(R,S[0]),F=u(R,P[0]),V=m(P[0],P[0]),Y=u(V,S[0]),K=u(V,k[0]),J=b(h(K,F),h(B,I)),G=h(Y,D),Z=h(J,G);return Z[Z.length-1]}return L}function y(b,h,m,u){function L(S,k,P,z){var I=b(m(S[0],S[0]),m(S[1],S[1])),D=u(I,k[0]),R=u(I,P[0]),B=u(I,z[0]),F=b(m(k[0],k[0]),m(k[1],k[1])),V=u(F,S[0]),Y=u(F,P[0]),K=u(F,z[0]),J=b(m(P[0],P[0]),m(P[1],P[1])),G=u(J,S[0]),Z=u(J,k[0]),re=u(J,z[0]),se=b(m(z[0],z[0]),m(z[1],z[1])),oe=u(se,S[0]),N=u(se,k[0]),U=u(se,P[0]),q=b(b(u(h(U,re),k[1]),b(u(h(N,K),-P[1]),u(h(Z,Y),z[1]))),b(u(h(N,K),S[1]),b(u(h(oe,B),-k[1]),u(h(V,D),z[1])))),Q=b(b(u(h(U,re),S[1]),b(u(h(oe,B),-P[1]),u(h(G,R),z[1]))),b(u(h(Z,Y),S[1]),b(u(h(G,R),-k[1]),u(h(V,D),P[1])))),W=h(q,Q);return W[W.length-1]}return L}function v(b,h,m,u){function L(S,k,P,z,I){var D=b(m(S[0],S[0]),b(m(S[1],S[1]),m(S[2],S[2]))),R=u(D,k[0]),B=u(D,P[0]),F=u(D,z[0]),V=u(D,I[0]),Y=b(m(k[0],k[0]),b(m(k[1],k[1]),m(k[2],k[2]))),K=u(Y,S[0]),J=u(Y,P[0]),G=u(Y,z[0]),Z=u(Y,I[0]),re=b(m(P[0],P[0]),b(m(P[1],P[1]),m(P[2],P[2]))),se=u(re,S[0]),oe=u(re,k[0]),N=u(re,z[0]),U=u(re,I[0]),q=b(m(z[0],z[0]),b(m(z[1],z[1]),m(z[2],z[2]))),Q=u(q,S[0]),W=u(q,k[0]),X=u(q,P[0]),te=u(q,I[0]),ee=b(m(I[0],I[0]),b(m(I[1],I[1]),m(I[2],I[2]))),ie=u(ee,S[0]),le=u(ee,k[0]),ye=u(ee,P[0]),ue=u(ee,z[0]),pe=b(b(b(u(b(u(h(ue,te),P[1]),b(u(h(ye,U),-z[1]),u(h(X,N),I[1]))),k[2]),b(u(b(u(h(ue,te),k[1]),b(u(h(le,Z),-z[1]),u(h(W,G),I[1]))),-P[2]),u(b(u(h(ye,U),k[1]),b(u(h(le,Z),-P[1]),u(h(oe,J),I[1]))),z[2]))),b(u(b(u(h(X,N),k[1]),b(u(h(W,G),-P[1]),u(h(oe,J),z[1]))),-I[2]),b(u(b(u(h(ue,te),k[1]),b(u(h(le,Z),-z[1]),u(h(W,G),I[1]))),S[2]),u(b(u(h(ue,te),S[1]),b(u(h(ie,V),-z[1]),u(h(Q,F),I[1]))),-k[2])))),b(b(u(b(u(h(le,Z),S[1]),b(u(h(ie,V),-k[1]),u(h(K,R),I[1]))),z[2]),b(u(b(u(h(W,G),S[1]),b(u(h(Q,F),-k[1]),u(h(K,R),z[1]))),-I[2]),u(b(u(h(X,N),k[1]),b(u(h(W,G),-P[1]),u(h(oe,J),z[1]))),S[2]))),b(u(b(u(h(X,N),S[1]),b(u(h(Q,F),-P[1]),u(h(se,B),z[1]))),-k[2]),b(u(b(u(h(W,G),S[1]),b(u(h(Q,F),-k[1]),u(h(K,R),z[1]))),P[2]),u(b(u(h(oe,J),S[1]),b(u(h(se,B),-k[1]),u(h(K,R),P[1]))),-z[2]))))),ge=b(b(b(u(b(u(h(ue,te),P[1]),b(u(h(ye,U),-z[1]),u(h(X,N),I[1]))),S[2]),u(b(u(h(ue,te),S[1]),b(u(h(ie,V),-z[1]),u(h(Q,F),I[1]))),-P[2])),b(u(b(u(h(ye,U),S[1]),b(u(h(ie,V),-P[1]),u(h(se,B),I[1]))),z[2]),u(b(u(h(X,N),S[1]),b(u(h(Q,F),-P[1]),u(h(se,B),z[1]))),-I[2]))),b(b(u(b(u(h(ye,U),k[1]),b(u(h(le,Z),-P[1]),u(h(oe,J),I[1]))),S[2]),u(b(u(h(ye,U),S[1]),b(u(h(ie,V),-P[1]),u(h(se,B),I[1]))),-k[2])),b(u(b(u(h(le,Z),S[1]),b(u(h(ie,V),-k[1]),u(h(K,R),I[1]))),P[2]),u(b(u(h(oe,J),S[1]),b(u(h(se,B),-k[1]),u(h(K,R),P[1]))),-I[2])))),Te=h(pe,ge);return Te[Te.length-1]}return L}function x(b,h,m,u){function L(S,k,P,z,I,D){var R=b(b(m(S[0],S[0]),m(S[1],S[1])),b(m(S[2],S[2]),m(S[3],S[3]))),B=u(R,k[0]),F=u(R,P[0]),V=u(R,z[0]),Y=u(R,I[0]),K=u(R,D[0]),J=b(b(m(k[0],k[0]),m(k[1],k[1])),b(m(k[2],k[2]),m(k[3],k[3]))),G=u(J,S[0]),Z=u(J,P[0]),re=u(J,z[0]),se=u(J,I[0]),oe=u(J,D[0]),N=b(b(m(P[0],P[0]),m(P[1],P[1])),b(m(P[2],P[2]),m(P[3],P[3]))),U=u(N,S[0]),q=u(N,k[0]),Q=u(N,z[0]),W=u(N,I[0]),X=u(N,D[0]),te=b(b(m(z[0],z[0]),m(z[1],z[1])),b(m(z[2],z[2]),m(z[3],z[3]))),ee=u(te,S[0]),ie=u(te,k[0]),le=u(te,P[0]),ye=u(te,I[0]),ue=u(te,D[0]),pe=b(b(m(I[0],I[0]),m(I[1],I[1])),b(m(I[2],I[2]),m(I[3],I[3]))),ge=u(pe,S[0]),Te=u(pe,k[0]),_e=u(pe,P[0]),De=u(pe,z[0]),Oe=u(pe,D[0]),Ue=b(b(m(D[0],D[0]),m(D[1],D[1])),b(m(D[2],D[2]),m(D[3],D[3]))),xe=u(Ue,S[0]),Pe=u(Ue,k[0]),Ve=u(Ue,P[0]),Qe=u(Ue,z[0]),Fe=u(Ue,I[0]),Le=b(b(b(u(b(b(u(b(u(h(Fe,Oe),z[1]),b(u(h(Qe,ue),-I[1]),u(h(De,ye),D[1]))),P[2]),u(b(u(h(Fe,Oe),P[1]),b(u(h(Ve,X),-I[1]),u(h(_e,W),D[1]))),-z[2])),b(u(b(u(h(Qe,ue),P[1]),b(u(h(Ve,X),-z[1]),u(h(le,Q),D[1]))),I[2]),u(b(u(h(De,ye),P[1]),b(u(h(_e,W),-z[1]),u(h(le,Q),I[1]))),-D[2]))),k[3]),b(u(b(b(u(b(u(h(Fe,Oe),z[1]),b(u(h(Qe,ue),-I[1]),u(h(De,ye),D[1]))),k[2]),u(b(u(h(Fe,Oe),k[1]),b(u(h(Pe,oe),-I[1]),u(h(Te,se),D[1]))),-z[2])),b(u(b(u(h(Qe,ue),k[1]),b(u(h(Pe,oe),-z[1]),u(h(ie,re),D[1]))),I[2]),u(b(u(h(De,ye),k[1]),b(u(h(Te,se),-z[1]),u(h(ie,re),I[1]))),-D[2]))),-P[3]),u(b(b(u(b(u(h(Fe,Oe),P[1]),b(u(h(Ve,X),-I[1]),u(h(_e,W),D[1]))),k[2]),u(b(u(h(Fe,Oe),k[1]),b(u(h(Pe,oe),-I[1]),u(h(Te,se),D[1]))),-P[2])),b(u(b(u(h(Ve,X),k[1]),b(u(h(Pe,oe),-P[1]),u(h(q,Z),D[1]))),I[2]),u(b(u(h(_e,W),k[1]),b(u(h(Te,se),-P[1]),u(h(q,Z),I[1]))),-D[2]))),z[3]))),b(b(u(b(b(u(b(u(h(Qe,ue),P[1]),b(u(h(Ve,X),-z[1]),u(h(le,Q),D[1]))),k[2]),u(b(u(h(Qe,ue),k[1]),b(u(h(Pe,oe),-z[1]),u(h(ie,re),D[1]))),-P[2])),b(u(b(u(h(Ve,X),k[1]),b(u(h(Pe,oe),-P[1]),u(h(q,Z),D[1]))),z[2]),u(b(u(h(le,Q),k[1]),b(u(h(ie,re),-P[1]),u(h(q,Z),z[1]))),-D[2]))),-I[3]),u(b(b(u(b(u(h(De,ye),P[1]),b(u(h(_e,W),-z[1]),u(h(le,Q),I[1]))),k[2]),u(b(u(h(De,ye),k[1]),b(u(h(Te,se),-z[1]),u(h(ie,re),I[1]))),-P[2])),b(u(b(u(h(_e,W),k[1]),b(u(h(Te,se),-P[1]),u(h(q,Z),I[1]))),z[2]),u(b(u(h(le,Q),k[1]),b(u(h(ie,re),-P[1]),u(h(q,Z),z[1]))),-I[2]))),D[3])),b(u(b(b(u(b(u(h(Fe,Oe),z[1]),b(u(h(Qe,ue),-I[1]),u(h(De,ye),D[1]))),k[2]),u(b(u(h(Fe,Oe),k[1]),b(u(h(Pe,oe),-I[1]),u(h(Te,se),D[1]))),-z[2])),b(u(b(u(h(Qe,ue),k[1]),b(u(h(Pe,oe),-z[1]),u(h(ie,re),D[1]))),I[2]),u(b(u(h(De,ye),k[1]),b(u(h(Te,se),-z[1]),u(h(ie,re),I[1]))),-D[2]))),S[3]),u(b(b(u(b(u(h(Fe,Oe),z[1]),b(u(h(Qe,ue),-I[1]),u(h(De,ye),D[1]))),S[2]),u(b(u(h(Fe,Oe),S[1]),b(u(h(xe,K),-I[1]),u(h(ge,Y),D[1]))),-z[2])),b(u(b(u(h(Qe,ue),S[1]),b(u(h(xe,K),-z[1]),u(h(ee,V),D[1]))),I[2]),u(b(u(h(De,ye),S[1]),b(u(h(ge,Y),-z[1]),u(h(ee,V),I[1]))),-D[2]))),-k[3])))),b(b(b(u(b(b(u(b(u(h(Fe,Oe),k[1]),b(u(h(Pe,oe),-I[1]),u(h(Te,se),D[1]))),S[2]),u(b(u(h(Fe,Oe),S[1]),b(u(h(xe,K),-I[1]),u(h(ge,Y),D[1]))),-k[2])),b(u(b(u(h(Pe,oe),S[1]),b(u(h(xe,K),-k[1]),u(h(G,B),D[1]))),I[2]),u(b(u(h(Te,se),S[1]),b(u(h(ge,Y),-k[1]),u(h(G,B),I[1]))),-D[2]))),z[3]),u(b(b(u(b(u(h(Qe,ue),k[1]),b(u(h(Pe,oe),-z[1]),u(h(ie,re),D[1]))),S[2]),u(b(u(h(Qe,ue),S[1]),b(u(h(xe,K),-z[1]),u(h(ee,V),D[1]))),-k[2])),b(u(b(u(h(Pe,oe),S[1]),b(u(h(xe,K),-k[1]),u(h(G,B),D[1]))),z[2]),u(b(u(h(ie,re),S[1]),b(u(h(ee,V),-k[1]),u(h(G,B),z[1]))),-D[2]))),-I[3])),b(u(b(b(u(b(u(h(De,ye),k[1]),b(u(h(Te,se),-z[1]),u(h(ie,re),I[1]))),S[2]),u(b(u(h(De,ye),S[1]),b(u(h(ge,Y),-z[1]),u(h(ee,V),I[1]))),-k[2])),b(u(b(u(h(Te,se),S[1]),b(u(h(ge,Y),-k[1]),u(h(G,B),I[1]))),z[2]),u(b(u(h(ie,re),S[1]),b(u(h(ee,V),-k[1]),u(h(G,B),z[1]))),-I[2]))),D[3]),u(b(b(u(b(u(h(Qe,ue),P[1]),b(u(h(Ve,X),-z[1]),u(h(le,Q),D[1]))),k[2]),u(b(u(h(Qe,ue),k[1]),b(u(h(Pe,oe),-z[1]),u(h(ie,re),D[1]))),-P[2])),b(u(b(u(h(Ve,X),k[1]),b(u(h(Pe,oe),-P[1]),u(h(q,Z),D[1]))),z[2]),u(b(u(h(le,Q),k[1]),b(u(h(ie,re),-P[1]),u(h(q,Z),z[1]))),-D[2]))),S[3]))),b(b(u(b(b(u(b(u(h(Qe,ue),P[1]),b(u(h(Ve,X),-z[1]),u(h(le,Q),D[1]))),S[2]),u(b(u(h(Qe,ue),S[1]),b(u(h(xe,K),-z[1]),u(h(ee,V),D[1]))),-P[2])),b(u(b(u(h(Ve,X),S[1]),b(u(h(xe,K),-P[1]),u(h(U,F),D[1]))),z[2]),u(b(u(h(le,Q),S[1]),b(u(h(ee,V),-P[1]),u(h(U,F),z[1]))),-D[2]))),-k[3]),u(b(b(u(b(u(h(Qe,ue),k[1]),b(u(h(Pe,oe),-z[1]),u(h(ie,re),D[1]))),S[2]),u(b(u(h(Qe,ue),S[1]),b(u(h(xe,K),-z[1]),u(h(ee,V),D[1]))),-k[2])),b(u(b(u(h(Pe,oe),S[1]),b(u(h(xe,K),-k[1]),u(h(G,B),D[1]))),z[2]),u(b(u(h(ie,re),S[1]),b(u(h(ee,V),-k[1]),u(h(G,B),z[1]))),-D[2]))),P[3])),b(u(b(b(u(b(u(h(Ve,X),k[1]),b(u(h(Pe,oe),-P[1]),u(h(q,Z),D[1]))),S[2]),u(b(u(h(Ve,X),S[1]),b(u(h(xe,K),-P[1]),u(h(U,F),D[1]))),-k[2])),b(u(b(u(h(Pe,oe),S[1]),b(u(h(xe,K),-k[1]),u(h(G,B),D[1]))),P[2]),u(b(u(h(q,Z),S[1]),b(u(h(U,F),-k[1]),u(h(G,B),P[1]))),-D[2]))),-z[3]),u(b(b(u(b(u(h(le,Q),k[1]),b(u(h(ie,re),-P[1]),u(h(q,Z),z[1]))),S[2]),u(b(u(h(le,Q),S[1]),b(u(h(ee,V),-P[1]),u(h(U,F),z[1]))),-k[2])),b(u(b(u(h(ie,re),S[1]),b(u(h(ee,V),-k[1]),u(h(G,B),z[1]))),P[2]),u(b(u(h(q,Z),S[1]),b(u(h(U,F),-k[1]),u(h(G,B),P[1]))),-z[2]))),D[3]))))),Ne=b(b(b(u(b(b(u(b(u(h(Fe,Oe),z[1]),b(u(h(Qe,ue),-I[1]),u(h(De,ye),D[1]))),P[2]),u(b(u(h(Fe,Oe),P[1]),b(u(h(Ve,X),-I[1]),u(h(_e,W),D[1]))),-z[2])),b(u(b(u(h(Qe,ue),P[1]),b(u(h(Ve,X),-z[1]),u(h(le,Q),D[1]))),I[2]),u(b(u(h(De,ye),P[1]),b(u(h(_e,W),-z[1]),u(h(le,Q),I[1]))),-D[2]))),S[3]),b(u(b(b(u(b(u(h(Fe,Oe),z[1]),b(u(h(Qe,ue),-I[1]),u(h(De,ye),D[1]))),S[2]),u(b(u(h(Fe,Oe),S[1]),b(u(h(xe,K),-I[1]),u(h(ge,Y),D[1]))),-z[2])),b(u(b(u(h(Qe,ue),S[1]),b(u(h(xe,K),-z[1]),u(h(ee,V),D[1]))),I[2]),u(b(u(h(De,ye),S[1]),b(u(h(ge,Y),-z[1]),u(h(ee,V),I[1]))),-D[2]))),-P[3]),u(b(b(u(b(u(h(Fe,Oe),P[1]),b(u(h(Ve,X),-I[1]),u(h(_e,W),D[1]))),S[2]),u(b(u(h(Fe,Oe),S[1]),b(u(h(xe,K),-I[1]),u(h(ge,Y),D[1]))),-P[2])),b(u(b(u(h(Ve,X),S[1]),b(u(h(xe,K),-P[1]),u(h(U,F),D[1]))),I[2]),u(b(u(h(_e,W),S[1]),b(u(h(ge,Y),-P[1]),u(h(U,F),I[1]))),-D[2]))),z[3]))),b(b(u(b(b(u(b(u(h(Qe,ue),P[1]),b(u(h(Ve,X),-z[1]),u(h(le,Q),D[1]))),S[2]),u(b(u(h(Qe,ue),S[1]),b(u(h(xe,K),-z[1]),u(h(ee,V),D[1]))),-P[2])),b(u(b(u(h(Ve,X),S[1]),b(u(h(xe,K),-P[1]),u(h(U,F),D[1]))),z[2]),u(b(u(h(le,Q),S[1]),b(u(h(ee,V),-P[1]),u(h(U,F),z[1]))),-D[2]))),-I[3]),u(b(b(u(b(u(h(De,ye),P[1]),b(u(h(_e,W),-z[1]),u(h(le,Q),I[1]))),S[2]),u(b(u(h(De,ye),S[1]),b(u(h(ge,Y),-z[1]),u(h(ee,V),I[1]))),-P[2])),b(u(b(u(h(_e,W),S[1]),b(u(h(ge,Y),-P[1]),u(h(U,F),I[1]))),z[2]),u(b(u(h(le,Q),S[1]),b(u(h(ee,V),-P[1]),u(h(U,F),z[1]))),-I[2]))),D[3])),b(u(b(b(u(b(u(h(Fe,Oe),P[1]),b(u(h(Ve,X),-I[1]),u(h(_e,W),D[1]))),k[2]),u(b(u(h(Fe,Oe),k[1]),b(u(h(Pe,oe),-I[1]),u(h(Te,se),D[1]))),-P[2])),b(u(b(u(h(Ve,X),k[1]),b(u(h(Pe,oe),-P[1]),u(h(q,Z),D[1]))),I[2]),u(b(u(h(_e,W),k[1]),b(u(h(Te,se),-P[1]),u(h(q,Z),I[1]))),-D[2]))),S[3]),u(b(b(u(b(u(h(Fe,Oe),P[1]),b(u(h(Ve,X),-I[1]),u(h(_e,W),D[1]))),S[2]),u(b(u(h(Fe,Oe),S[1]),b(u(h(xe,K),-I[1]),u(h(ge,Y),D[1]))),-P[2])),b(u(b(u(h(Ve,X),S[1]),b(u(h(xe,K),-P[1]),u(h(U,F),D[1]))),I[2]),u(b(u(h(_e,W),S[1]),b(u(h(ge,Y),-P[1]),u(h(U,F),I[1]))),-D[2]))),-k[3])))),b(b(b(u(b(b(u(b(u(h(Fe,Oe),k[1]),b(u(h(Pe,oe),-I[1]),u(h(Te,se),D[1]))),S[2]),u(b(u(h(Fe,Oe),S[1]),b(u(h(xe,K),-I[1]),u(h(ge,Y),D[1]))),-k[2])),b(u(b(u(h(Pe,oe),S[1]),b(u(h(xe,K),-k[1]),u(h(G,B),D[1]))),I[2]),u(b(u(h(Te,se),S[1]),b(u(h(ge,Y),-k[1]),u(h(G,B),I[1]))),-D[2]))),P[3]),u(b(b(u(b(u(h(Ve,X),k[1]),b(u(h(Pe,oe),-P[1]),u(h(q,Z),D[1]))),S[2]),u(b(u(h(Ve,X),S[1]),b(u(h(xe,K),-P[1]),u(h(U,F),D[1]))),-k[2])),b(u(b(u(h(Pe,oe),S[1]),b(u(h(xe,K),-k[1]),u(h(G,B),D[1]))),P[2]),u(b(u(h(q,Z),S[1]),b(u(h(U,F),-k[1]),u(h(G,B),P[1]))),-D[2]))),-I[3])),b(u(b(b(u(b(u(h(_e,W),k[1]),b(u(h(Te,se),-P[1]),u(h(q,Z),I[1]))),S[2]),u(b(u(h(_e,W),S[1]),b(u(h(ge,Y),-P[1]),u(h(U,F),I[1]))),-k[2])),b(u(b(u(h(Te,se),S[1]),b(u(h(ge,Y),-k[1]),u(h(G,B),I[1]))),P[2]),u(b(u(h(q,Z),S[1]),b(u(h(U,F),-k[1]),u(h(G,B),P[1]))),-I[2]))),D[3]),u(b(b(u(b(u(h(De,ye),P[1]),b(u(h(_e,W),-z[1]),u(h(le,Q),I[1]))),k[2]),u(b(u(h(De,ye),k[1]),b(u(h(Te,se),-z[1]),u(h(ie,re),I[1]))),-P[2])),b(u(b(u(h(_e,W),k[1]),b(u(h(Te,se),-P[1]),u(h(q,Z),I[1]))),z[2]),u(b(u(h(le,Q),k[1]),b(u(h(ie,re),-P[1]),u(h(q,Z),z[1]))),-I[2]))),S[3]))),b(b(u(b(b(u(b(u(h(De,ye),P[1]),b(u(h(_e,W),-z[1]),u(h(le,Q),I[1]))),S[2]),u(b(u(h(De,ye),S[1]),b(u(h(ge,Y),-z[1]),u(h(ee,V),I[1]))),-P[2])),b(u(b(u(h(_e,W),S[1]),b(u(h(ge,Y),-P[1]),u(h(U,F),I[1]))),z[2]),u(b(u(h(le,Q),S[1]),b(u(h(ee,V),-P[1]),u(h(U,F),z[1]))),-I[2]))),-k[3]),u(b(b(u(b(u(h(De,ye),k[1]),b(u(h(Te,se),-z[1]),u(h(ie,re),I[1]))),S[2]),u(b(u(h(De,ye),S[1]),b(u(h(ge,Y),-z[1]),u(h(ee,V),I[1]))),-k[2])),b(u(b(u(h(Te,se),S[1]),b(u(h(ge,Y),-k[1]),u(h(G,B),I[1]))),z[2]),u(b(u(h(ie,re),S[1]),b(u(h(ee,V),-k[1]),u(h(G,B),z[1]))),-I[2]))),P[3])),b(u(b(b(u(b(u(h(_e,W),k[1]),b(u(h(Te,se),-P[1]),u(h(q,Z),I[1]))),S[2]),u(b(u(h(_e,W),S[1]),b(u(h(ge,Y),-P[1]),u(h(U,F),I[1]))),-k[2])),b(u(b(u(h(Te,se),S[1]),b(u(h(ge,Y),-k[1]),u(h(G,B),I[1]))),P[2]),u(b(u(h(q,Z),S[1]),b(u(h(U,F),-k[1]),u(h(G,B),P[1]))),-I[2]))),-z[3]),u(b(b(u(b(u(h(le,Q),k[1]),b(u(h(ie,re),-P[1]),u(h(q,Z),z[1]))),S[2]),u(b(u(h(le,Q),S[1]),b(u(h(ee,V),-P[1]),u(h(U,F),z[1]))),-k[2])),b(u(b(u(h(ie,re),S[1]),b(u(h(ee,V),-k[1]),u(h(G,B),z[1]))),P[2]),u(b(u(h(q,Z),S[1]),b(u(h(U,F),-k[1]),u(h(G,B),P[1]))),-z[2]))),I[3]))))),dt=h(Le,Ne);return dt[dt.length-1]}return L}var l=[o,i,p];function _(b){var h=l[b.length];return h||(h=l[b.length]=f(b.length)),h.apply(void 0,b)}function s(b,h,m,u,L,S,k,P){function z(I,D,R,B,F,V){switch(arguments.length){case 0:case 1:return 0;case 2:return u(I,D);case 3:return L(I,D,R);case 4:return S(I,D,R,B);case 5:return k(I,D,R,B,F);case 6:return P(I,D,R,B,F,V)}for(var Y=new Array(arguments.length),K=0;K<arguments.length;++K)Y[K]=arguments[K];return b(Y)}return z}function w(){for(;l.length<=r;)l.push(f(l.length));M.exports=s.apply(void 0,[_].concat(l));for(var b=0;b<=r;++b)M.exports[b]=l[b]}w()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(c,M,A){var e=c("robust-determinant"),a=6;function n(l){var _=l===2?f:l===3?o:l===4?i:l===5?p:d;return l<6?_(e[l]):_(e)}function t(){return[[0]]}function r(l,_){return[[_[0]],[l[0][0]]]}function f(l){return function(s,w){return[l([[+w[0],+s[0][1]],[+w[1],+s[1][1]]]),l([[+s[0][0],+w[0]],[+s[1][0],+w[1]]]),l(s)]}}function o(l){return function(s,w){return[l([[+w[0],+s[0][1],+s[0][2]],[+w[1],+s[1][1],+s[1][2]],[+w[2],+s[2][1],+s[2][2]]]),l([[+s[0][0],+w[0],+s[0][2]],[+s[1][0],+w[1],+s[1][2]],[+s[2][0],+w[2],+s[2][2]]]),l([[+s[0][0],+s[0][1],+w[0]],[+s[1][0],+s[1][1],+w[1]],[+s[2][0],+s[2][1],+w[2]]]),l(s)]}}function i(l){return function(s,w){return[l([[+w[0],+s[0][1],+s[0][2],+s[0][3]],[+w[1],+s[1][1],+s[1][2],+s[1][3]],[+w[2],+s[2][1],+s[2][2],+s[2][3]],[+w[3],+s[3][1],+s[3][2],+s[3][3]]]),l([[+s[0][0],+w[0],+s[0][2],+s[0][3]],[+s[1][0],+w[1],+s[1][2],+s[1][3]],[+s[2][0],+w[2],+s[2][2],+s[2][3]],[+s[3][0],+w[3],+s[3][2],+s[3][3]]]),l([[+s[0][0],+s[0][1],+w[0],+s[0][3]],[+s[1][0],+s[1][1],+w[1],+s[1][3]],[+s[2][0],+s[2][1],+w[2],+s[2][3]],[+s[3][0],+s[3][1],+w[3],+s[3][3]]]),l([[+s[0][0],+s[0][1],+s[0][2],+w[0]],[+s[1][0],+s[1][1],+s[1][2],+w[1]],[+s[2][0],+s[2][1],+s[2][2],+w[2]],[+s[3][0],+s[3][1],+s[3][2],+w[3]]]),l(s)]}}function p(l){return function(s,w){return[l([[+w[0],+s[0][1],+s[0][2],+s[0][3],+s[0][4]],[+w[1],+s[1][1],+s[1][2],+s[1][3],+s[1][4]],[+w[2],+s[2][1],+s[2][2],+s[2][3],+s[2][4]],[+w[3],+s[3][1],+s[3][2],+s[3][3],+s[3][4]],[+w[4],+s[4][1],+s[4][2],+s[4][3],+s[4][4]]]),l([[+s[0][0],+w[0],+s[0][2],+s[0][3],+s[0][4]],[+s[1][0],+w[1],+s[1][2],+s[1][3],+s[1][4]],[+s[2][0],+w[2],+s[2][2],+s[2][3],+s[2][4]],[+s[3][0],+w[3],+s[3][2],+s[3][3],+s[3][4]],[+s[4][0],+w[4],+s[4][2],+s[4][3],+s[4][4]]]),l([[+s[0][0],+s[0][1],+w[0],+s[0][3],+s[0][4]],[+s[1][0],+s[1][1],+w[1],+s[1][3],+s[1][4]],[+s[2][0],+s[2][1],+w[2],+s[2][3],+s[2][4]],[+s[3][0],+s[3][1],+w[3],+s[3][3],+s[3][4]],[+s[4][0],+s[4][1],+w[4],+s[4][3],+s[4][4]]]),l([[+s[0][0],+s[0][1],+s[0][2],+w[0],+s[0][4]],[+s[1][0],+s[1][1],+s[1][2],+w[1],+s[1][4]],[+s[2][0],+s[2][1],+s[2][2],+w[2],+s[2][4]],[+s[3][0],+s[3][1],+s[3][2],+w[3],+s[3][4]],[+s[4][0],+s[4][1],+s[4][2],+w[4],+s[4][4]]]),l([[+s[0][0],+s[0][1],+s[0][2],+s[0][3],+w[0]],[+s[1][0],+s[1][1],+s[1][2],+s[1][3],+w[1]],[+s[2][0],+s[2][1],+s[2][2],+s[2][3],+w[2]],[+s[3][0],+s[3][1],+s[3][2],+s[3][3],+w[3]],[+s[4][0],+s[4][1],+s[4][2],+s[4][3],+w[4]]]),l(s)]}}function d(l){return function(s,w){return[l([[+w[0],+s[0][1],+s[0][2],+s[0][3],+s[0][4],+s[0][5]],[+w[1],+s[1][1],+s[1][2],+s[1][3],+s[1][4],+s[1][5]],[+w[2],+s[2][1],+s[2][2],+s[2][3],+s[2][4],+s[2][5]],[+w[3],+s[3][1],+s[3][2],+s[3][3],+s[3][4],+s[3][5]],[+w[4],+s[4][1],+s[4][2],+s[4][3],+s[4][4],+s[4][5]],[+w[5],+s[5][1],+s[5][2],+s[5][3],+s[5][4],+s[5][5]]]),l([[+s[0][0],+w[0],+s[0][2],+s[0][3],+s[0][4],+s[0][5]],[+s[1][0],+w[1],+s[1][2],+s[1][3],+s[1][4],+s[1][5]],[+s[2][0],+w[2],+s[2][2],+s[2][3],+s[2][4],+s[2][5]],[+s[3][0],+w[3],+s[3][2],+s[3][3],+s[3][4],+s[3][5]],[+s[4][0],+w[4],+s[4][2],+s[4][3],+s[4][4],+s[4][5]],[+s[5][0],+w[5],+s[5][2],+s[5][3],+s[5][4],+s[5][5]]]),l([[+s[0][0],+s[0][1],+w[0],+s[0][3],+s[0][4],+s[0][5]],[+s[1][0],+s[1][1],+w[1],+s[1][3],+s[1][4],+s[1][5]],[+s[2][0],+s[2][1],+w[2],+s[2][3],+s[2][4],+s[2][5]],[+s[3][0],+s[3][1],+w[3],+s[3][3],+s[3][4],+s[3][5]],[+s[4][0],+s[4][1],+w[4],+s[4][3],+s[4][4],+s[4][5]],[+s[5][0],+s[5][1],+w[5],+s[5][3],+s[5][4],+s[5][5]]]),l([[+s[0][0],+s[0][1],+s[0][2],+w[0],+s[0][4],+s[0][5]],[+s[1][0],+s[1][1],+s[1][2],+w[1],+s[1][4],+s[1][5]],[+s[2][0],+s[2][1],+s[2][2],+w[2],+s[2][4],+s[2][5]],[+s[3][0],+s[3][1],+s[3][2],+w[3],+s[3][4],+s[3][5]],[+s[4][0],+s[4][1],+s[4][2],+w[4],+s[4][4],+s[4][5]],[+s[5][0],+s[5][1],+s[5][2],+w[5],+s[5][4],+s[5][5]]]),l([[+s[0][0],+s[0][1],+s[0][2],+s[0][3],+w[0],+s[0][5]],[+s[1][0],+s[1][1],+s[1][2],+s[1][3],+w[1],+s[1][5]],[+s[2][0],+s[2][1],+s[2][2],+s[2][3],+w[2],+s[2][5]],[+s[3][0],+s[3][1],+s[3][2],+s[3][3],+w[3],+s[3][5]],[+s[4][0],+s[4][1],+s[4][2],+s[4][3],+w[4],+s[4][5]],[+s[5][0],+s[5][1],+s[5][2],+s[5][3],+w[5],+s[5][5]]]),l([[+s[0][0],+s[0][1],+s[0][2],+s[0][3],+s[0][4],+w[0]],[+s[1][0],+s[1][1],+s[1][2],+s[1][3],+s[1][4],+w[1]],[+s[2][0],+s[2][1],+s[2][2],+s[2][3],+s[2][4],+w[2]],[+s[3][0],+s[3][1],+s[3][2],+s[3][3],+s[3][4],+w[3]],[+s[4][0],+s[4][1],+s[4][2],+s[4][3],+s[4][4],+w[4]],[+s[5][0],+s[5][1],+s[5][2],+s[5][3],+s[5][4],+w[5]]]),l(s)]}}var y=[t,r];function v(l,_,s,w,b,h,m,u){return function(S,k){switch(S.length){case 0:return l(S,k);case 1:return _(S,k);case 2:return s(S,k);case 3:return w(S,k);case 4:return b(S,k);case 5:return h(S,k)}var P=m[S.length];return P||(P=m[S.length]=u(S.length)),P(S,k)}}function x(){for(;y.length<a;)y.push(n(y.length));M.exports=v.apply(void 0,y.concat([y,n]));for(var l=0;l<a;++l)M.exports[l]=y[l]}x()},{"robust-determinant":280}],284:[function(c,M,A){var e=c("two-product"),a=c("robust-sum"),n=c("robust-scale"),t=c("robust-subtract"),r=5,f=11102230246251565e-32,o=(3+16*f)*f,i=(7+56*f)*f;function p(h,m,u,L){return function(k,P,z){var I=h(h(m(P[1],z[0]),m(-z[1],P[0])),h(m(k[1],P[0]),m(-P[1],k[0]))),D=h(m(k[1],z[0]),m(-z[1],k[0])),R=L(I,D);return R[R.length-1]}}function d(h,m,u,L){return function(k,P,z,I){var D=h(h(u(h(m(z[1],I[0]),m(-I[1],z[0])),P[2]),h(u(h(m(P[1],I[0]),m(-I[1],P[0])),-z[2]),u(h(m(P[1],z[0]),m(-z[1],P[0])),I[2]))),h(u(h(m(P[1],I[0]),m(-I[1],P[0])),k[2]),h(u(h(m(k[1],I[0]),m(-I[1],k[0])),-P[2]),u(h(m(k[1],P[0]),m(-P[1],k[0])),I[2])))),R=h(h(u(h(m(z[1],I[0]),m(-I[1],z[0])),k[2]),h(u(h(m(k[1],I[0]),m(-I[1],k[0])),-z[2]),u(h(m(k[1],z[0]),m(-z[1],k[0])),I[2]))),h(u(h(m(P[1],z[0]),m(-z[1],P[0])),k[2]),h(u(h(m(k[1],z[0]),m(-z[1],k[0])),-P[2]),u(h(m(k[1],P[0]),m(-P[1],k[0])),z[2])))),B=L(D,R);return B[B.length-1]}}function y(h,m,u,L){return function(k,P,z,I,D){var R=h(h(h(u(h(u(h(m(I[1],D[0]),m(-D[1],I[0])),z[2]),h(u(h(m(z[1],D[0]),m(-D[1],z[0])),-I[2]),u(h(m(z[1],I[0]),m(-I[1],z[0])),D[2]))),P[3]),h(u(h(u(h(m(I[1],D[0]),m(-D[1],I[0])),P[2]),h(u(h(m(P[1],D[0]),m(-D[1],P[0])),-I[2]),u(h(m(P[1],I[0]),m(-I[1],P[0])),D[2]))),-z[3]),u(h(u(h(m(z[1],D[0]),m(-D[1],z[0])),P[2]),h(u(h(m(P[1],D[0]),m(-D[1],P[0])),-z[2]),u(h(m(P[1],z[0]),m(-z[1],P[0])),D[2]))),I[3]))),h(u(h(u(h(m(z[1],I[0]),m(-I[1],z[0])),P[2]),h(u(h(m(P[1],I[0]),m(-I[1],P[0])),-z[2]),u(h(m(P[1],z[0]),m(-z[1],P[0])),I[2]))),-D[3]),h(u(h(u(h(m(I[1],D[0]),m(-D[1],I[0])),P[2]),h(u(h(m(P[1],D[0]),m(-D[1],P[0])),-I[2]),u(h(m(P[1],I[0]),m(-I[1],P[0])),D[2]))),k[3]),u(h(u(h(m(I[1],D[0]),m(-D[1],I[0])),k[2]),h(u(h(m(k[1],D[0]),m(-D[1],k[0])),-I[2]),u(h(m(k[1],I[0]),m(-I[1],k[0])),D[2]))),-P[3])))),h(h(u(h(u(h(m(P[1],D[0]),m(-D[1],P[0])),k[2]),h(u(h(m(k[1],D[0]),m(-D[1],k[0])),-P[2]),u(h(m(k[1],P[0]),m(-P[1],k[0])),D[2]))),I[3]),h(u(h(u(h(m(P[1],I[0]),m(-I[1],P[0])),k[2]),h(u(h(m(k[1],I[0]),m(-I[1],k[0])),-P[2]),u(h(m(k[1],P[0]),m(-P[1],k[0])),I[2]))),-D[3]),u(h(u(h(m(z[1],I[0]),m(-I[1],z[0])),P[2]),h(u(h(m(P[1],I[0]),m(-I[1],P[0])),-z[2]),u(h(m(P[1],z[0]),m(-z[1],P[0])),I[2]))),k[3]))),h(u(h(u(h(m(z[1],I[0]),m(-I[1],z[0])),k[2]),h(u(h(m(k[1],I[0]),m(-I[1],k[0])),-z[2]),u(h(m(k[1],z[0]),m(-z[1],k[0])),I[2]))),-P[3]),h(u(h(u(h(m(P[1],I[0]),m(-I[1],P[0])),k[2]),h(u(h(m(k[1],I[0]),m(-I[1],k[0])),-P[2]),u(h(m(k[1],P[0]),m(-P[1],k[0])),I[2]))),z[3]),u(h(u(h(m(P[1],z[0]),m(-z[1],P[0])),k[2]),h(u(h(m(k[1],z[0]),m(-z[1],k[0])),-P[2]),u(h(m(k[1],P[0]),m(-P[1],k[0])),z[2]))),-I[3]))))),B=h(h(h(u(h(u(h(m(I[1],D[0]),m(-D[1],I[0])),z[2]),h(u(h(m(z[1],D[0]),m(-D[1],z[0])),-I[2]),u(h(m(z[1],I[0]),m(-I[1],z[0])),D[2]))),k[3]),u(h(u(h(m(I[1],D[0]),m(-D[1],I[0])),k[2]),h(u(h(m(k[1],D[0]),m(-D[1],k[0])),-I[2]),u(h(m(k[1],I[0]),m(-I[1],k[0])),D[2]))),-z[3])),h(u(h(u(h(m(z[1],D[0]),m(-D[1],z[0])),k[2]),h(u(h(m(k[1],D[0]),m(-D[1],k[0])),-z[2]),u(h(m(k[1],z[0]),m(-z[1],k[0])),D[2]))),I[3]),u(h(u(h(m(z[1],I[0]),m(-I[1],z[0])),k[2]),h(u(h(m(k[1],I[0]),m(-I[1],k[0])),-z[2]),u(h(m(k[1],z[0]),m(-z[1],k[0])),I[2]))),-D[3]))),h(h(u(h(u(h(m(z[1],D[0]),m(-D[1],z[0])),P[2]),h(u(h(m(P[1],D[0]),m(-D[1],P[0])),-z[2]),u(h(m(P[1],z[0]),m(-z[1],P[0])),D[2]))),k[3]),u(h(u(h(m(z[1],D[0]),m(-D[1],z[0])),k[2]),h(u(h(m(k[1],D[0]),m(-D[1],k[0])),-z[2]),u(h(m(k[1],z[0]),m(-z[1],k[0])),D[2]))),-P[3])),h(u(h(u(h(m(P[1],D[0]),m(-D[1],P[0])),k[2]),h(u(h(m(k[1],D[0]),m(-D[1],k[0])),-P[2]),u(h(m(k[1],P[0]),m(-P[1],k[0])),D[2]))),z[3]),u(h(u(h(m(P[1],z[0]),m(-z[1],P[0])),k[2]),h(u(h(m(k[1],z[0]),m(-z[1],k[0])),-P[2]),u(h(m(k[1],P[0]),m(-P[1],k[0])),z[2]))),-D[3])))),F=L(R,B);return F[F.length-1]}}function v(h){var m=h===3?p:h===4?d:y;return m(a,e,n,t)}var x=v(3),l=v(4),_=[function(){return 0},function(){return 0},function(m,u){return u[0]-m[0]},function(m,u,L){var S=(m[1]-L[1])*(u[0]-L[0]),k=(m[0]-L[0])*(u[1]-L[1]),P=S-k,z;if(S>0){if(k<=0)return P;z=S+k}else if(S<0){if(k>=0)return P;z=-(S+k)}else return P;var I=o*z;return P>=I||P<=-I?P:x(m,u,L)},function(m,u,L,S){var k=m[0]-S[0],P=u[0]-S[0],z=L[0]-S[0],I=m[1]-S[1],D=u[1]-S[1],R=L[1]-S[1],B=m[2]-S[2],F=u[2]-S[2],V=L[2]-S[2],Y=P*R,K=z*D,J=z*I,G=k*R,Z=k*D,re=P*I,se=B*(Y-K)+F*(J-G)+V*(Z-re),oe=(Math.abs(Y)+Math.abs(K))*Math.abs(B)+(Math.abs(J)+Math.abs(G))*Math.abs(F)+(Math.abs(Z)+Math.abs(re))*Math.abs(V),N=i*oe;return se>N||-se>N?se:l(m,u,L,S)}];function s(h){var m=_[h.length];return m||(m=_[h.length]=v(h.length)),m.apply(void 0,h)}function w(h,m,u,L,S,k,P){return function(I,D,R,B,F){switch(arguments.length){case 0:case 1:return 0;case 2:return L(I,D);case 3:return S(I,D,R);case 4:return k(I,D,R,B);case 5:return P(I,D,R,B,F)}for(var V=new Array(arguments.length),Y=0;Y<arguments.length;++Y)V[Y]=arguments[Y];return h(V)}}function b(){for(;_.length<=r;)_.push(v(_.length));M.exports=w.apply(void 0,[s].concat(_));for(var h=0;h<=r;++h)M.exports[h]=_[h]}b()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(c,M,A){var e=c("robust-sum"),a=c("robust-scale");M.exports=n;function n(t,r){if(t.length===1)return a(r,t[0]);if(r.length===1)return a(t,r[0]);if(t.length===0||r.length===0)return[0];var f=[0];if(t.length<r.length)for(var o=0;o<t.length;++o)f=e(f,a(r,t[o]));else for(var o=0;o<r.length;++o)f=e(f,a(t,r[o]));return f}},{"robust-scale":286,"robust-sum":289}],286:[function(c,M,A){var e=c("two-product"),a=c("two-sum");M.exports=n;function n(t,r){var f=t.length;if(f===1){var o=e(t[0],r);return o[0]?o:[o[1]]}var i=new Array(2*f),p=[.1,.1],d=[.1,.1],y=0;e(t[0],r,p),p[0]&&(i[y++]=p[0]);for(var v=1;v<f;++v){e(t[v],r,d);var x=p[1];a(x,d[0],p),p[0]&&(i[y++]=p[0]);var l=d[1],_=p[1],s=l+_,w=s-l,b=_-w;p[1]=s,b&&(i[y++]=b)}return p[1]&&(i[y++]=p[1]),y===0&&(i[y++]=0),i.length=y,i}},{"two-product":306,"two-sum":307}],287:[function(c,M,A){M.exports=n;var e=c("robust-orientation")[3];function a(t,r,f,o){for(var i=0;i<2;++i){var p=t[i],d=r[i],y=Math.min(p,d),v=Math.max(p,d),x=f[i],l=o[i],_=Math.min(x,l),s=Math.max(x,l);if(s<y||v<_)return!1}return!0}function n(t,r,f,o){var i=e(t,f,o),p=e(r,f,o);if(i>0&&p>0||i<0&&p<0)return!1;var d=e(f,t,r),y=e(o,t,r);return d>0&&y>0||d<0&&y<0?!1:i===0&&p===0&&d===0&&y===0?a(t,r,f,o):!0}},{"robust-orientation":284}],288:[function(c,M,A){M.exports=a;function e(n,t){var r=n+t,f=r-n,o=r-f,i=t-f,p=n-o,d=p+i;return d?[d,r]:[r]}function a(n,t){var r=n.length|0,f=t.length|0;if(r===1&&f===1)return e(n[0],-t[0]);var o=r+f,i=new Array(o),p=0,d=0,y=0,v=Math.abs,x=n[d],l=v(x),_=-t[y],s=v(_),w,b;l<s?(b=x,d+=1,d<r&&(x=n[d],l=v(x))):(b=_,y+=1,y<f&&(_=-t[y],s=v(_))),d<r&&l<s||y>=f?(w=x,d+=1,d<r&&(x=n[d],l=v(x))):(w=_,y+=1,y<f&&(_=-t[y],s=v(_)));for(var h=w+b,m=h-w,u=b-m,L=u,S=h,k,P,z,I,D;d<r&&y<f;)l<s?(w=x,d+=1,d<r&&(x=n[d],l=v(x))):(w=_,y+=1,y<f&&(_=-t[y],s=v(_))),b=L,h=w+b,m=h-w,u=b-m,u&&(i[p++]=u),k=S+h,P=k-S,z=k-P,I=h-P,D=S-z,L=D+I,S=k;for(;d<r;)w=x,b=L,h=w+b,m=h-w,u=b-m,u&&(i[p++]=u),k=S+h,P=k-S,z=k-P,I=h-P,D=S-z,L=D+I,S=k,d+=1,d<r&&(x=n[d]);for(;y<f;)w=_,b=L,h=w+b,m=h-w,u=b-m,u&&(i[p++]=u),k=S+h,P=k-S,z=k-P,I=h-P,D=S-z,L=D+I,S=k,y+=1,y<f&&(_=-t[y]);return L&&(i[p++]=L),S&&(i[p++]=S),p||(i[p++]=0),i.length=p,i}},{}],289:[function(c,M,A){M.exports=a;function e(n,t){var r=n+t,f=r-n,o=r-f,i=t-f,p=n-o,d=p+i;return d?[d,r]:[r]}function a(n,t){var r=n.length|0,f=t.length|0;if(r===1&&f===1)return e(n[0],t[0]);var o=r+f,i=new Array(o),p=0,d=0,y=0,v=Math.abs,x=n[d],l=v(x),_=t[y],s=v(_),w,b;l<s?(b=x,d+=1,d<r&&(x=n[d],l=v(x))):(b=_,y+=1,y<f&&(_=t[y],s=v(_))),d<r&&l<s||y>=f?(w=x,d+=1,d<r&&(x=n[d],l=v(x))):(w=_,y+=1,y<f&&(_=t[y],s=v(_)));for(var h=w+b,m=h-w,u=b-m,L=u,S=h,k,P,z,I,D;d<r&&y<f;)l<s?(w=x,d+=1,d<r&&(x=n[d],l=v(x))):(w=_,y+=1,y<f&&(_=t[y],s=v(_))),b=L,h=w+b,m=h-w,u=b-m,u&&(i[p++]=u),k=S+h,P=k-S,z=k-P,I=h-P,D=S-z,L=D+I,S=k;for(;d<r;)w=x,b=L,h=w+b,m=h-w,u=b-m,u&&(i[p++]=u),k=S+h,P=k-S,z=k-P,I=h-P,D=S-z,L=D+I,S=k,d+=1,d<r&&(x=n[d]);for(;y<f;)w=_,b=L,h=w+b,m=h-w,u=b-m,u&&(i[p++]=u),k=S+h,P=k-S,z=k-P,I=h-P,D=S-z,L=D+I,S=k,y+=1,y<f&&(_=t[y]);return L&&(i[p++]=L),S&&(i[p++]=S),p||(i[p++]=0),i.length=p,i}},{}],290:[function(c,M,A){M.exports=n;var e=c("boundary-cells"),a=c("reduce-simplicial-complex");function n(t){return a(e(t))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(c,M,A){M.exports=y;var e=c("ndarray"),a=c("typedarray-pool"),n=c("ndarray-sort"),t=c("./lib/codegen");function r(v){for(var x=v.length,l=0,_=0;_<x;++_)l=Math.max(l,v[_].length)|0;return l-1}function f(v,x){for(var l=v.length,_=a.mallocUint8(l),s=0;s<l;++s)_[s]=v[s]<x|0;return _}function o(v,x){for(var l=v.length,_=x*(x+1)/2*l|0,s=a.mallocUint32(_*2),w=0,b=0;b<l;++b)for(var h=v[b],x=h.length,m=0;m<x;++m)for(var u=0;u<m;++u){var L=h[u],S=h[m];s[w++]=Math.min(L,S)|0,s[w++]=Math.max(L,S)|0}var k=w/2|0;n(e(s,[k,2]));for(var P=2,b=2;b<w;b+=2)s[b-2]===s[b]&&s[b-1]===s[b+1]||(s[P++]=s[b],s[P++]=s[b+1]);return e(s,[P/2|0,2])}function i(v,x,l,_){for(var s=v.data,w=v.shape[0],b=a.mallocDouble(w),h=0,m=0;m<w;++m){var u=s[2*m],L=s[2*m+1];if(l[u]!==l[L]){var S=x[u],k=x[L];s[2*h]=u,s[2*h+1]=L,b[h++]=(k-_)/(k-S)}}return v.shape[0]=h,e(b,[h])}function p(v,x){var l=a.mallocInt32(x*2),_=v.shape[0],s=v.data;l[0]=0;for(var w=0,b=0;b<_;++b){var h=s[2*b];if(h!==w){for(l[2*w+1]=b;++w<h;)l[2*w]=b,l[2*w+1]=b;l[2*w]=b}}for(l[2*w+1]=_;++w<x;)l[2*w]=l[2*w+1]=_;return l}function d(v){for(var x=v.shape[0]|0,l=v.data,_=new Array(x),s=0;s<x;++s)_[s]=[l[2*s],l[2*s+1]];return _}function y(v,x,l,_){l=l||0,typeof _=="undefined"&&(_=r(v));var s=v.length;if(s===0||_<1)return{cells:[],vertexIds:[],vertexWeights:[]};var w=f(x,+l),b=o(v,_),h=i(b,x,w,+l),m=p(b,x.length|0),u=t(_)(v,b.data,m,w),L=d(b),S=[].slice.call(h.data,0,h.shape[0]);return a.free(w),a.free(b.data),a.free(h.data),a.free(m),{cells:u,vertexIds:L,vertexWeights:S}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(c,M,A){M.exports=a;var e=[function(){function t(r,f,o,i){for(var p=r.length,d=[],y=0;y<p;++y){var v=r[y];v.length}return d}return t},function(){function t(f,o,i,p){for(var d=Math.min(i,p)|0,y=Math.max(i,p)|0,v=f[2*d],x=f[2*d+1];v<x;){var l=v+x>>1,_=o[2*l+1];if(_===y)return l;y<_?x=l:v=l+1}return v}function r(f,o,i,p){for(var d=f.length,y=[],v=0;v<d;++v){var x=f[v],l=x.length;if(l===2){var _=(p[x[0]]<<0)+(p[x[1]]<<1);if(_===0||_===3)continue;switch(_){case 0:break;case 1:y.push([t(i,o,x[0],x[1])]);break;case 2:y.push([t(i,o,x[1],x[0])]);break}}}return y}return r},function(){function t(f,o,i,p){for(var d=Math.min(i,p)|0,y=Math.max(i,p)|0,v=f[2*d],x=f[2*d+1];v<x;){var l=v+x>>1,_=o[2*l+1];if(_===y)return l;y<_?x=l:v=l+1}return v}function r(f,o,i,p){for(var d=f.length,y=[],v=0;v<d;++v){var x=f[v],l=x.length;if(l===3){var _=(p[x[0]]<<0)+(p[x[1]]<<1)+(p[x[2]]<<2);if(_===0||_===7)continue;switch(_){case 0:break;case 1:y.push([t(i,o,x[0],x[2]),t(i,o,x[0],x[1])]);break;case 2:y.push([t(i,o,x[1],x[0]),t(i,o,x[1],x[2])]);break;case 3:y.push([t(i,o,x[0],x[2]),t(i,o,x[1],x[2])]);break;case 4:y.push([t(i,o,x[2],x[1]),t(i,o,x[2],x[0])]);break;case 5:y.push([t(i,o,x[2],x[1]),t(i,o,x[0],x[1])]);break;case 6:y.push([t(i,o,x[1],x[0]),t(i,o,x[2],x[0])]);break}}else if(l===2){var _=(p[x[0]]<<0)+(p[x[1]]<<1);if(_===0||_===3)continue;switch(_){case 0:break;case 1:y.push([t(i,o,x[0],x[1])]);break;case 2:y.push([t(i,o,x[1],x[0])]);break}}}return y}return r},function(){function t(f,o,i,p){for(var d=Math.min(i,p)|0,y=Math.max(i,p)|0,v=f[2*d],x=f[2*d+1];v<x;){var l=v+x>>1,_=o[2*l+1];if(_===y)return l;y<_?x=l:v=l+1}return v}function r(f,o,i,p){for(var d=f.length,y=[],v=0;v<d;++v){var x=f[v],l=x.length;if(l===4){var _=(p[x[0]]<<0)+(p[x[1]]<<1)+(p[x[2]]<<2)+(p[x[3]]<<3);if(_===0||_===15)continue;switch(_){case 0:break;case 1:y.push([t(i,o,x[0],x[1]),t(i,o,x[0],x[2]),t(i,o,x[0],x[3])]);break;case 2:y.push([t(i,o,x[1],x[2]),t(i,o,x[1],x[0]),t(i,o,x[1],x[3])]);break;case 3:y.push([t(i,o,x[1],x[2]),t(i,o,x[0],x[2]),t(i,o,x[0],x[3])],[t(i,o,x[1],x[3]),t(i,o,x[1],x[2]),t(i,o,x[0],x[3])]);break;case 4:y.push([t(i,o,x[2],x[0]),t(i,o,x[2],x[1]),t(i,o,x[2],x[3])]);break;case 5:y.push([t(i,o,x[0],x[1]),t(i,o,x[2],x[1]),t(i,o,x[0],x[3])],[t(i,o,x[2],x[1]),t(i,o,x[2],x[3]),t(i,o,x[0],x[3])]);break;case 6:y.push([t(i,o,x[2],x[0]),t(i,o,x[1],x[0]),t(i,o,x[1],x[3])],[t(i,o,x[2],x[3]),t(i,o,x[2],x[0]),t(i,o,x[1],x[3])]);break;case 7:y.push([t(i,o,x[0],x[3]),t(i,o,x[1],x[3]),t(i,o,x[2],x[3])]);break;case 8:y.push([t(i,o,x[3],x[1]),t(i,o,x[3],x[0]),t(i,o,x[3],x[2])]);break;case 9:y.push([t(i,o,x[3],x[1]),t(i,o,x[0],x[1]),t(i,o,x[0],x[2])],[t(i,o,x[3],x[2]),t(i,o,x[3],x[1]),t(i,o,x[0],x[2])]);break;case 10:y.push([t(i,o,x[1],x[0]),t(i,o,x[3],x[0]),t(i,o,x[1],x[2])],[t(i,o,x[3],x[0]),t(i,o,x[3],x[2]),t(i,o,x[1],x[2])]);break;case 11:y.push([t(i,o,x[1],x[2]),t(i,o,x[0],x[2]),t(i,o,x[3],x[2])]);break;case 12:y.push([t(i,o,x[3],x[0]),t(i,o,x[2],x[0]),t(i,o,x[2],x[1])],[t(i,o,x[3],x[1]),t(i,o,x[3],x[0]),t(i,o,x[2],x[1])]);break;case 13:y.push([t(i,o,x[0],x[1]),t(i,o,x[2],x[1]),t(i,o,x[3],x[1])]);break;case 14:y.push([t(i,o,x[2],x[0]),t(i,o,x[1],x[0]),t(i,o,x[3],x[0])]);break}}else if(l===3){var _=(p[x[0]]<<0)+(p[x[1]]<<1)+(p[x[2]]<<2);if(_===0||_===7)continue;switch(_){case 0:break;case 1:y.push([t(i,o,x[0],x[2]),t(i,o,x[0],x[1])]);break;case 2:y.push([t(i,o,x[1],x[0]),t(i,o,x[1],x[2])]);break;case 3:y.push([t(i,o,x[0],x[2]),t(i,o,x[1],x[2])]);break;case 4:y.push([t(i,o,x[2],x[1]),t(i,o,x[2],x[0])]);break;case 5:y.push([t(i,o,x[2],x[1]),t(i,o,x[0],x[1])]);break;case 6:y.push([t(i,o,x[1],x[0]),t(i,o,x[2],x[0])]);break}}else if(l===2){var _=(p[x[0]]<<0)+(p[x[1]]<<1);if(_===0||_===3)continue;switch(_){case 0:break;case 1:y.push([t(i,o,x[0],x[1])]);break;case 2:y.push([t(i,o,x[1],x[0])]);break}}}return y}return r}];function a(n){return e[n]()}},{}],293:[function(c,M,A){var e=c("bit-twiddle"),a=c("union-find");function n(h){for(var m=0,u=Math.max,L=0,S=h.length;L<S;++L)m=u(m,h[L].length);return m-1}A.dimension=n;function t(h){for(var m=-1,u=Math.max,L=0,S=h.length;L<S;++L)for(var k=h[L],P=0,z=k.length;P<z;++P)m=u(m,k[P]);return m+1}A.countVertices=t;function r(h){for(var m=new Array(h.length),u=0,L=h.length;u<L;++u)m[u]=h[u].slice(0);return m}A.cloneCells=r;function f(h,m){var u=h.length,L=h.length-m.length,S=Math.min;if(L)return L;switch(u){case 0:return 0;case 1:return h[0]-m[0];case 2:var k=h[0]+h[1]-m[0]-m[1];return k||S(h[0],h[1])-S(m[0],m[1]);case 3:var P=h[0]+h[1],z=m[0]+m[1];if(k=P+h[2]-(z+m[2]),k)return k;var I=S(h[0],h[1]),D=S(m[0],m[1]),k=S(I,h[2])-S(D,m[2]);return k||S(I+h[2],P)-S(D+m[2],z);default:var R=h.slice(0);R.sort();var B=m.slice(0);B.sort();for(var F=0;F<u;++F)if(L=R[F]-B[F],L)return L;return 0}}A.compareCells=f;function o(h,m){return f(h[0],m[0])}function i(h,m){if(m){for(var u=h.length,L=new Array(u),S=0;S<u;++S)L[S]=[h[S],m[S]];L.sort(o);for(var S=0;S<u;++S)h[S]=L[S][0],m[S]=L[S][1];return h}else return h.sort(f),h}A.normalize=i;function p(h){if(h.length===0)return[];for(var m=1,u=h.length,L=1;L<u;++L){var S=h[L];if(f(S,h[L-1])){if(L===m){m++;continue}h[m++]=S}}return h.length=m,h}A.unique=p;function d(h,m){for(var u=0,L=h.length-1,S=-1;u<=L;){var k=u+L>>1,P=f(h[k],m);P<=0?(P===0&&(S=k),u=k+1):P>0&&(L=k-1)}return S}A.findCell=d;function y(h,m){for(var u=new Array(h.length),L=0,S=u.length;L<S;++L)u[L]=[];for(var k=[],L=0,P=m.length;L<P;++L)for(var z=m[L],I=z.length,D=1,R=1<<I;D<R;++D){k.length=e.popCount(D);for(var B=0,F=0;F<I;++F)D&1<<F&&(k[B++]=z[F]);var V=d(h,k);if(!(V<0))for(;u[V++].push(L),!(V>=h.length||f(h[V],k)!==0););}return u}A.incidence=y;function v(h,m){if(!m)return y(p(l(h,0)),h);for(var u=new Array(m),L=0;L<m;++L)u[L]=[];for(var L=0,S=h.length;L<S;++L)for(var k=h[L],P=0,z=k.length;P<z;++P)u[k[P]].push(L);return u}A.dual=v;function x(h){for(var m=[],u=0,L=h.length;u<L;++u)for(var S=h[u],k=S.length|0,P=1,z=1<<k;P<z;++P){for(var I=[],D=0;D<k;++D)P>>>D&1&&I.push(S[D]);m.push(I)}return i(m)}A.explode=x;function l(h,m){if(m<0)return[];for(var u=[],L=(1<<m+1)-1,S=0;S<h.length;++S)for(var k=h[S],P=L;P<1<<k.length;P=e.nextCombination(P)){for(var z=new Array(m+1),I=0,D=0;D<k.length;++D)P&1<<D&&(z[I++]=k[D]);u.push(z)}return i(u)}A.skeleton=l;function _(h){for(var m=[],u=0,L=h.length;u<L;++u)for(var S=h[u],k=0,P=S.length;k<P;++k){for(var z=new Array(S.length-1),I=0,D=0;I<P;++I)I!==k&&(z[D++]=S[I]);m.push(z)}return i(m)}A.boundary=_;function s(h,m){for(var u=new a(m),L=0;L<h.length;++L)for(var S=h[L],k=0;k<S.length;++k)for(var P=k+1;P<S.length;++P)u.link(S[k],S[P]);for(var z=[],I=u.ranks,L=0;L<I.length;++L)I[L]=-1;for(var L=0;L<h.length;++L){var D=u.find(h[L][0]);I[D]<0?(I[D]=z.length,z.push([h[L].slice(0)])):z[I[D]].push(h[L].slice(0))}return z}function w(h){for(var m=p(i(l(h,0))),u=new a(m.length),L=0;L<h.length;++L)for(var S=h[L],k=0;k<S.length;++k)for(var P=d(m,[S[k]]),z=k+1;z<S.length;++z)u.link(P,d(m,[S[z]]));for(var I=[],D=u.ranks,L=0;L<D.length;++L)D[L]=-1;for(var L=0;L<h.length;++L){var R=u.find(d(m,[h[L][0]]));D[R]<0?(D[R]=I.length,I.push([h[L].slice(0)])):I[D[R]].push(h[L].slice(0))}return I}function b(h,m){return m?s(h,m):w(h)}A.connectedComponents=b},{"bit-twiddle":32,"union-find":309}],294:[function(c,M,A){arguments[4][32][0].apply(A,arguments)},{dup:32}],295:[function(c,M,A){arguments[4][293][0].apply(A,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(c,M,A){M.exports=e;function e(a){this.roots=new Array(a),this.ranks=new Array(a);for(var n=0;n<a;++n)this.roots[n]=n,this.ranks[n]=0}e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},e.prototype.find=function(a){for(var n=this.roots;n[a]!==a;){var t=n[a];n[a]=n[t],a=t}return a},e.prototype.link=function(a,n){var t=this.find(a),r=this.find(n);if(t!==r){var f=this.ranks,o=this.roots,i=f[t],p=f[r];i<p?o[t]=r:p<i?o[r]=t:(o[r]=t,++f[t])}}},{}],297:[function(c,M,A){M.exports=t;var e=c("robust-orientation"),a=c("simplicial-complex");function n(r,f,o){var i=Math.abs(e(r,f,o)),p=Math.sqrt(Math.pow(f[0]-o[0],2)+Math.pow(f[1]-o[1],2));return i/p}function t(r,f,o){for(var i=f.length,p=r.length,d=new Array(i),y=new Array(i),v=new Array(i),x=new Array(i),l=0;l<i;++l)d[l]=y[l]=-1,v[l]=1/0,x[l]=!1;for(var l=0;l<p;++l){var _=r[l];if(_.length!==2)throw new Error("Input must be a graph");var s=_[1],w=_[0];y[w]!==-1?y[w]=-2:y[w]=s,d[s]!==-1?d[s]=-2:d[s]=w}function b(J){if(x[J])return 1/0;var G=d[J],Z=y[J];return G<0||Z<0?1/0:n(f[J],f[G],f[Z])}function h(J,G){var Z=I[J],re=I[G];I[J]=re,I[G]=Z,D[Z]=G,D[re]=J}function m(J){return v[I[J]]}function u(J){return J&1?J-1>>1:(J>>1)-1}function L(J){for(var G=m(J);;){var Z=G,re=2*J+1,se=2*(J+1),oe=J;if(re<B){var N=m(re);N<Z&&(oe=re,Z=N)}if(se<B){var U=m(se);U<Z&&(oe=se)}if(oe===J)return J;h(J,oe),J=oe}}function S(J){for(var G=m(J);J>0;){var Z=u(J);if(Z>=0){var re=m(Z);if(G<re){h(J,Z),J=Z;continue}}return J}}function k(){if(B>0){var J=I[0];return h(0,B-1),B-=1,L(0),J}return-1}function P(J,G){var Z=I[J];return v[Z]===G?J:(v[Z]=-1/0,S(J),k(),v[Z]=G,B+=1,S(B-1))}function z(J){if(!x[J]){x[J]=!0;var G=d[J],Z=y[J];d[Z]>=0&&(d[Z]=G),y[G]>=0&&(y[G]=Z),D[G]>=0&&P(D[G],b(G)),D[Z]>=0&&P(D[Z],b(Z))}}for(var I=[],D=new Array(i),l=0;l<i;++l){var R=v[l]=b(l);R<1/0?(D[l]=I.length,I.push(l)):D[l]=-1}for(var B=I.length,l=B>>1;l>=0;--l)L(l);for(;;){var F=k();if(F<0||v[F]>o)break;z(F)}for(var V=[],l=0;l<i;++l)x[l]||(D[l]=V.length,V.push(f[l].slice()));V.length;function Y(J,G){if(J[G]<0)return G;var Z=G,re=G;do{var se=J[re];if(!x[re]||se<0||se===re||(re=se,se=J[re],!x[re]||se<0||se===re))break;re=se,Z=J[Z]}while(Z!==re);for(var oe=G;oe!==re;oe=J[oe])J[oe]=re;return re}var K=[];return r.forEach(function(J){var G=Y(d,J[0]),Z=Y(y,J[1]);if(G>=0&&Z>=0&&G!==Z){var re=D[G],se=D[Z];re!==se&&K.push([re,se])}}),a.unique(a.normalize(K)),{positions:V,edges:K}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(c,M,A){M.exports=n;var e=c("robust-orientation");function a(t,r){var f,o;if(r[0][0]<r[1][0])f=r[0],o=r[1];else if(r[0][0]>r[1][0])f=r[1],o=r[0];else{var i=Math.min(t[0][1],t[1][1]),p=Math.max(t[0][1],t[1][1]),d=Math.min(r[0][1],r[1][1]),y=Math.max(r[0][1],r[1][1]);return p<d?p-d:i>y?i-y:p-y}var v,x;t[0][1]<t[1][1]?(v=t[0],x=t[1]):(v=t[1],x=t[0]);var l=e(o,f,v);return l||(l=e(o,f,x),l)?l:x-o}function n(t,r){var f,o;if(r[0][0]<r[1][0])f=r[0],o=r[1];else if(r[0][0]>r[1][0])f=r[1],o=r[0];else return a(r,t);var i,p;if(t[0][0]<t[1][0])i=t[0],p=t[1];else if(t[0][0]>t[1][0])i=t[1],p=t[0];else return-a(t,r);var d=e(f,o,p),y=e(f,o,i);if(d<0){if(y<=0)return d}else if(d>0){if(y>=0)return d}else if(y)return y;if(d=e(p,i,o),y=e(p,i,f),d<0){if(y<=0)return d}else if(d>0){if(y>=0)return d}else if(y)return y;return o[0]-p[0]}},{"robust-orientation":284}],299:[function(c,M,A){M.exports=y;var e=c("binary-search-bounds"),a=c("functional-red-black-tree"),n=c("robust-orientation"),t=c("./lib/order-segments");function r(v,x,l){this.slabs=v,this.coordinates=x,this.horizontal=l}var f=r.prototype;function o(v,x){return v.y-x}function i(v,x){for(var l=null;v;){var _=v.key,s,w;_[0][0]<_[1][0]?(s=_[0],w=_[1]):(s=_[1],w=_[0]);var b=n(s,w,x);if(b<0)v=v.left;else if(b>0)if(x[0]!==_[1][0])l=v,v=v.right;else{var h=i(v.right,x);if(h)return h;v=v.left}else{if(x[0]!==_[1][0])return v;var h=i(v.right,x);if(h)return h;v=v.left}}return l}f.castUp=function(v){var x=e.le(this.coordinates,v[0]);if(x<0)return-1;this.slabs[x];var l=i(this.slabs[x],v),_=-1;if(l&&(_=l.value),this.coordinates[x]===v[0]){var s=null;if(l&&(s=l.key),x>0){var w=i(this.slabs[x-1],v);w&&(s?t(w.key,s)>0&&(s=w.key,_=w.value):(_=w.value,s=w.key))}var b=this.horizontal[x];if(b.length>0){var h=e.ge(b,v[1],o);if(h<b.length){var m=b[h];if(v[1]===m.y){if(m.closed)return m.index;for(;h<b.length-1&&b[h+1].y===v[1];)if(h=h+1,m=b[h],m.closed)return m.index;if(m.y===v[1]&&!m.start){if(h=h+1,h>=b.length)return _;m=b[h]}}if(m.start)if(s){var u=n(s[0],s[1],[v[0],m.y]);s[0][0]>s[1][0]&&(u=-u),u>0&&(_=m.index)}else _=m.index;else m.y!==v[1]&&(_=m.index)}}}return _};function p(v,x,l,_){this.y=v,this.index=x,this.start=l,this.closed=_}function d(v,x,l,_){this.x=v,this.segment=x,this.create=l,this.index=_}function y(v){for(var x=v.length,l=2*x,_=new Array(l),s=0;s<x;++s){var w=v[s],b=w[0][0]<w[1][0];_[2*s]=new d(w[0][0],w,b,s),_[2*s+1]=new d(w[1][0],w,!b,s)}_.sort(function(z,I){var D=z.x-I.x;return D||(D=z.create-I.create,D)?D:Math.min(z.segment[0][1],z.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});for(var h=a(t),m=[],u=[],L=[],s=0;s<l;){for(var S=_[s].x,k=[];s<l;){var P=_[s];if(P.x!==S)break;s+=1,P.segment[0][0]===P.x&&P.segment[1][0]===P.x?P.create&&(P.segment[0][1]<P.segment[1][1]?(k.push(new p(P.segment[0][1],P.index,!0,!0)),k.push(new p(P.segment[1][1],P.index,!1,!1))):(k.push(new p(P.segment[1][1],P.index,!0,!1)),k.push(new p(P.segment[0][1],P.index,!1,!0)))):P.create?h=h.insert(P.segment,P.index):h=h.remove(P.segment)}m.push(h.root),u.push(S),L.push(k)}return new r(m,u,L)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(c,M,A){var e=c("robust-dot-product"),a=c("robust-sum");M.exports=r,M.exports.positive=f,M.exports.negative=o;function n(i,p){var d=a(e(i,p),[p[p.length-1]]);return d[d.length-1]}function t(i,p,d,y){var v=y-p,x=-p/v;x<0?x=0:x>1&&(x=1);for(var l=1-x,_=i.length,s=new Array(_),w=0;w<_;++w)s[w]=x*i[w]+l*d[w];return s}function r(i,p){for(var d=[],y=[],v=n(i[i.length-1],p),x=i[i.length-1],l=i[0],_=0;_<i.length;++_,x=l){l=i[_];var s=n(l,p);if(v<0&&s>0||v>0&&s<0){var w=t(x,s,l,v);d.push(w),y.push(w.slice())}s<0?y.push(l.slice()):s>0?d.push(l.slice()):(d.push(l.slice()),y.push(l.slice())),v=s}return{positive:d,negative:y}}function f(i,p){for(var d=[],y=n(i[i.length-1],p),v=i[i.length-1],x=i[0],l=0;l<i.length;++l,v=x){x=i[l];var _=n(x,p);(y<0&&_>0||y>0&&_<0)&&d.push(t(v,_,x,y)),_>=0&&d.push(x.slice()),y=_}return d}function o(i,p){for(var d=[],y=n(i[i.length-1],p),v=i[i.length-1],x=i[0],l=0;l<i.length;++l,v=x){x=i[l];var _=n(x,p);(y<0&&_>0||y>0&&_<0)&&d.push(t(v,_,x,y)),_<=0&&d.push(x.slice()),y=_}return d}},{"robust-dot-product":281,"robust-sum":289}],301:[function(c,M,A){(function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(o){return t(f(o),arguments)}function n(o,i){return a.apply(null,[o].concat(i||[]))}function t(o,i){var p=1,d=o.length,y,v="",x,l,_,s,w,b,h,m;for(x=0;x<d;x++)if(typeof o[x]=="string")v+=o[x];else if(typeof o[x]=="object"){if(_=o[x],_.keys)for(y=i[p],l=0;l<_.keys.length;l++){if(y==null)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',_.keys[l],_.keys[l-1]));y=y[_.keys[l]]}else _.param_no?y=i[_.param_no]:y=i[p++];if(e.not_type.test(_.type)&&e.not_primitive.test(_.type)&&y instanceof Function&&(y=y()),e.numeric_arg.test(_.type)&&typeof y!="number"&&isNaN(y))throw new TypeError(a("[sprintf] expecting number but found %T",y));switch(e.number.test(_.type)&&(h=y>=0),_.type){case"b":y=parseInt(y,10).toString(2);break;case"c":y=String.fromCharCode(parseInt(y,10));break;case"d":case"i":y=parseInt(y,10);break;case"j":y=JSON.stringify(y,null,_.width?parseInt(_.width):0);break;case"e":y=_.precision?parseFloat(y).toExponential(_.precision):parseFloat(y).toExponential();break;case"f":y=_.precision?parseFloat(y).toFixed(_.precision):parseFloat(y);break;case"g":y=_.precision?String(Number(y.toPrecision(_.precision))):parseFloat(y);break;case"o":y=(parseInt(y,10)>>>0).toString(8);break;case"s":y=String(y),y=_.precision?y.substring(0,_.precision):y;break;case"t":y=String(!!y),y=_.precision?y.substring(0,_.precision):y;break;case"T":y=Object.prototype.toString.call(y).slice(8,-1).toLowerCase(),y=_.precision?y.substring(0,_.precision):y;break;case"u":y=parseInt(y,10)>>>0;break;case"v":y=y.valueOf(),y=_.precision?y.substring(0,_.precision):y;break;case"x":y=(parseInt(y,10)>>>0).toString(16);break;case"X":y=(parseInt(y,10)>>>0).toString(16).toUpperCase();break}e.json.test(_.type)?v+=y:(e.number.test(_.type)&&(!h||_.sign)?(m=h?"+":"-",y=y.toString().replace(e.sign,"")):m="",w=_.pad_char?_.pad_char==="0"?"0":_.pad_char.charAt(1):" ",b=_.width-(m+y).length,s=_.width&&b>0?w.repeat(b):"",v+=_.align?m+y+s:w==="0"?m+s+y:s+m+y)}return v}var r=Object.create(null);function f(o){if(r[o])return r[o];for(var i=o,p,d=[],y=0;i;){if((p=e.text.exec(i))!==null)d.push(p[0]);else if((p=e.modulo.exec(i))!==null)d.push("%");else if((p=e.placeholder.exec(i))!==null){if(p[2]){y|=1;var v=[],x=p[2],l=[];if((l=e.key.exec(x))!==null)for(v.push(l[1]);(x=x.substring(l[0].length))!=="";)if((l=e.key_access.exec(x))!==null)v.push(l[1]);else if((l=e.index_access.exec(x))!==null)v.push(l[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");p[2]=v}else y|=2;if(y===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push({placeholder:p[0],param_no:p[1],keys:p[2],sign:p[3],pad_char:p[4],align:p[5],width:p[6],precision:p[7],type:p[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");i=i.substring(p[0].length)}return r[o]=d}typeof A!="undefined"&&(A.sprintf=a,A.vsprintf=n),typeof window!="undefined"&&(window.sprintf=a,window.vsprintf=n)})()},{}],302:[function(c,M,A){M.exports=o;var e=c("ndarray-extract-contour"),a=c("zero-crossings"),n={"2d":function(i,p,d){var y=i({order:p,scalarArguments:3,getters:d==="generic"?[0]:void 0,phase:function(x,l,_,s){return x>s|0},vertex:function(x,l,_,s,w,b,h,m,u,L,S,k,P){var z=(h<<0)+(m<<1)+(u<<2)+(L<<3)|0;if(!(z===0||z===15))switch(z){case 0:S.push([x-.5,l-.5]);break;case 1:S.push([x-.25-.25*(s+_-2*P)/(_-s),l-.25-.25*(w+_-2*P)/(_-w)]);break;case 2:S.push([x-.75-.25*(-s-_+2*P)/(s-_),l-.25-.25*(b+s-2*P)/(s-b)]);break;case 3:S.push([x-.5,l-.5-.5*(w+_+b+s-4*P)/(_-w+s-b)]);break;case 4:S.push([x-.25-.25*(b+w-2*P)/(w-b),l-.75-.25*(-w-_+2*P)/(w-_)]);break;case 5:S.push([x-.5-.5*(s+_+b+w-4*P)/(_-s+w-b),l-.5]);break;case 6:S.push([x-.5-.25*(-s-_+b+w)/(s-_+w-b),l-.5-.25*(-w-_+b+s)/(w-_+s-b)]);break;case 7:S.push([x-.75-.25*(b+w-2*P)/(w-b),l-.75-.25*(b+s-2*P)/(s-b)]);break;case 8:S.push([x-.75-.25*(-b-w+2*P)/(b-w),l-.75-.25*(-b-s+2*P)/(b-s)]);break;case 9:S.push([x-.5-.25*(s+_+-b-w)/(_-s+b-w),l-.5-.25*(w+_+-b-s)/(_-w+b-s)]);break;case 10:S.push([x-.5-.5*(-s-_+-b-w+4*P)/(s-_+b-w),l-.5]);break;case 11:S.push([x-.25-.25*(-b-w+2*P)/(b-w),l-.75-.25*(w+_-2*P)/(_-w)]);break;case 12:S.push([x-.5,l-.5-.5*(-w-_+-b-s+4*P)/(w-_+b-s)]);break;case 13:S.push([x-.75-.25*(s+_-2*P)/(_-s),l-.25-.25*(-b-s+2*P)/(b-s)]);break;case 14:S.push([x-.25-.25*(-s-_+2*P)/(s-_),l-.25-.25*(-w-_+2*P)/(w-_)]);break;case 15:S.push([x-.5,l-.5]);break}},cell:function(x,l,_,s,w,b,h,m,u){w?m.push([x,l]):m.push([l,x])}});return function(v,x){var l=[],_=[];return y(v,l,_,x),{positions:l,cells:_}}}};function t(i,p){var d=i.length+"d",y=n[d];if(y)return y(e,i,p)}function r(i,p){for(var d=a(i,p),y=d.length,v=new Array(y),x=new Array(y),l=0;l<y;++l)v[l]=[d[l]],x[l]=[l];return{positions:v,cells:x}}var f={};function o(i,p){if(i.dimension<=0)return{positions:[],cells:[]};if(i.dimension===1)return r(i,p);var d=i.order.join()+"-"+i.dtype,y=f[d],p=+p||0;return y||(y=f[d]=t(i.order,i.dtype)),y(i,p)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(c,M,A){(function(e){(function(){M.exports=f;var a=c("vectorize-text"),n=window||e.global||{},t=n.__TEXT_CACHE||{};n.__TEXT_CACHE={};function r(o){for(var i=o.cells,p=o.positions,d=new Float32Array(i.length*6),y=0,v=0,x=0;x<i.length;++x)for(var l=i[x],_=0;_<3;++_){var s=p[l[_]];d[y++]=s[0],d[y++]=s[1]+1.4,v=Math.max(s[0],v)}return{data:d,shape:v}}function f(o,i,p){var p=p||{},d=t[o];d||(d=t[o]={" ":{data:new Float32Array(0),shape:.2}});var y=d[i];if(!y)if(i.length<=1||!/\d/.test(i))y=d[i]=r(a(i,{triangles:!0,font:o,textAlign:p.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var v=i.split(/(\d|\s)/),x=new Array(v.length),l=0,_=0,s=0;s<v.length;++s)x[s]=f(o,v[s]),l+=x[s].data.length,_+=x[s].shape,s>0&&(_+=.02);for(var w=new Float32Array(l),b=0,h=-.5*_,s=0;s<x.length;++s){for(var m=x[s].data,u=0;u<m.length;u+=2)w[b++]=m[u]+h,w[b++]=m[u+1];h+=x[s].shape+.02}y=d[i]={data:w,shape:_}}return y}}).call(this)}).call(this,c("_process"))},{_process:5,"vectorize-text":311}],304:[function(c,M,A){var e=c("parse-unit");M.exports=r;var a=96;function n(f,o){var i=e(getComputedStyle(f).getPropertyValue(o));return i[0]*r(i[1],f)}function t(f,o){var i=document.createElement("div");i.style["font-size"]="128"+f,o.appendChild(i);var p=n(i,"font-size")/128;return o.removeChild(i),p}function r(f,o){switch(o=o||document.body,f=(f||"px").trim().toLowerCase(),(o===window||o===document)&&(o=document.body),f){case"%":return o.clientHeight/100;case"ch":case"ex":return t(f,o);case"em":return n(o,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},{"parse-unit":265}],305:[function(c,M,A){M.exports=x;var e=c("filtered-vector"),a=c("gl-mat4/invert"),n=c("gl-mat4/rotate"),t=c("gl-vec3/cross"),r=c("gl-vec3/normalize"),f=c("gl-vec3/dot");function o(l,_,s){return Math.sqrt(Math.pow(l,2)+Math.pow(_,2)+Math.pow(s,2))}function i(l){return Math.min(1,Math.max(-1,l))}function p(l){var _=Math.abs(l[0]),s=Math.abs(l[1]),w=Math.abs(l[2]),b=[0,0,0];_>Math.max(s,w)?b[2]=1:s>Math.max(_,w)?b[0]=1:b[1]=1;for(var h=0,m=0,u=0;u<3;++u)h+=l[u]*l[u],m+=b[u]*l[u];for(var u=0;u<3;++u)b[u]-=m/h*l[u];return r(b,b),b}function d(l,_,s,w,b,h,m,u){this.center=e(s),this.up=e(w),this.right=e(b),this.radius=e([h]),this.angle=e([m,u]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(l,_),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var y=d.prototype;y.setDistanceLimits=function(l,_){l>0?l=Math.log(l):l=-1/0,_>0?_=Math.log(_):_=1/0,_=Math.max(_,l),this.radius.bounds[0][0]=l,this.radius.bounds[1][0]=_},y.getDistanceLimits=function(l){var _=this.radius.bounds[0];return l?(l[0]=Math.exp(_[0][0]),l[1]=Math.exp(_[1][0]),l):[Math.exp(_[0][0]),Math.exp(_[1][0])]},y.recalcMatrix=function(l){this.center.curve(l),this.up.curve(l),this.right.curve(l),this.radius.curve(l),this.angle.curve(l);for(var _=this.computedUp,s=this.computedRight,w=0,b=0,h=0;h<3;++h)b+=_[h]*s[h],w+=_[h]*_[h];for(var m=Math.sqrt(w),u=0,h=0;h<3;++h)s[h]-=_[h]*b/w,u+=s[h]*s[h],_[h]/=m;for(var L=Math.sqrt(u),h=0;h<3;++h)s[h]/=L;var S=this.computedToward;t(S,_,s),r(S,S);for(var k=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],z=this.computedAngle[1],I=Math.cos(P),D=Math.sin(P),R=Math.cos(z),B=Math.sin(z),F=this.computedCenter,V=I*R,Y=D*R,K=B,J=-I*B,G=-D*B,Z=R,re=this.computedEye,se=this.computedMatrix,h=0;h<3;++h){var oe=V*s[h]+Y*S[h]+K*_[h];se[4*h+1]=J*s[h]+G*S[h]+Z*_[h],se[4*h+2]=oe,se[4*h+3]=0}var N=se[1],U=se[5],q=se[9],Q=se[2],W=se[6],X=se[10],te=U*X-q*W,ee=q*Q-N*X,ie=N*W-U*Q,le=o(te,ee,ie);te/=le,ee/=le,ie/=le,se[0]=te,se[4]=ee,se[8]=ie;for(var h=0;h<3;++h)re[h]=F[h]+se[2+4*h]*k;for(var h=0;h<3;++h){for(var u=0,ye=0;ye<3;++ye)u+=se[h+4*ye]*re[ye];se[12+h]=-u}se[15]=1},y.getMatrix=function(l,_){this.recalcMatrix(l);var s=this.computedMatrix;if(_){for(var w=0;w<16;++w)_[w]=s[w];return _}return s};var v=[0,0,0];y.rotate=function(l,_,s,w){if(this.angle.move(l,_,s),w){this.recalcMatrix(l);var b=this.computedMatrix;v[0]=b[2],v[1]=b[6],v[2]=b[10];for(var h=this.computedUp,m=this.computedRight,u=this.computedToward,L=0;L<3;++L)b[4*L]=h[L],b[4*L+1]=m[L],b[4*L+2]=u[L];n(b,b,w,v);for(var L=0;L<3;++L)h[L]=b[4*L],m[L]=b[4*L+1];this.up.set(l,h[0],h[1],h[2]),this.right.set(l,m[0],m[1],m[2])}},y.pan=function(l,_,s,w){_=_||0,s=s||0,w=w||0,this.recalcMatrix(l);var b=this.computedMatrix;Math.exp(this.computedRadius[0]);var h=b[1],m=b[5],u=b[9],L=o(h,m,u);h/=L,m/=L,u/=L;var S=b[0],k=b[4],P=b[8],z=S*h+k*m+P*u;S-=h*z,k-=m*z,P-=u*z;var I=o(S,k,P);S/=I,k/=I,P/=I;var D=S*_+h*s,R=k*_+m*s,B=P*_+u*s;this.center.move(l,D,R,B);var F=Math.exp(this.computedRadius[0]);F=Math.max(1e-4,F+w),this.radius.set(l,Math.log(F))},y.translate=function(l,_,s,w){this.center.move(l,_||0,s||0,w||0)},y.setMatrix=function(l,_,s,w){var b=1;typeof s=="number"&&(b=s|0),(b<0||b>3)&&(b=1);var h=(b+2)%3;_||(this.recalcMatrix(l),_=this.computedMatrix);var m=_[b],u=_[b+4],L=_[b+8];if(w){var k=Math.abs(m),P=Math.abs(u),z=Math.abs(L),I=Math.max(k,P,z);k===I?(m=m<0?-1:1,u=L=0):z===I?(L=L<0?-1:1,m=u=0):(u=u<0?-1:1,m=L=0)}else{var S=o(m,u,L);m/=S,u/=S,L/=S}var D=_[h],R=_[h+4],B=_[h+8],F=D*m+R*u+B*L;D-=m*F,R-=u*F,B-=L*F;var V=o(D,R,B);D/=V,R/=V,B/=V;var Y=u*B-L*R,K=L*D-m*B,J=m*R-u*D,G=o(Y,K,J);Y/=G,K/=G,J/=G,this.center.jump(l,Te,_e,De),this.radius.idle(l),this.up.jump(l,m,u,L),this.right.jump(l,D,R,B);var Z,re;if(b===2){var se=_[1],oe=_[5],N=_[9],U=se*D+oe*R+N*B,q=se*Y+oe*K+N*J;te<0?Z=-Math.PI/2:Z=Math.PI/2,re=Math.atan2(q,U)}else{var Q=_[2],W=_[6],X=_[10],te=Q*m+W*u+X*L,ee=Q*D+W*R+X*B,ie=Q*Y+W*K+X*J;Z=Math.asin(i(te)),re=Math.atan2(ie,ee)}this.angle.jump(l,re,Z),this.recalcMatrix(l);var le=_[2],ye=_[6],ue=_[10],pe=this.computedMatrix;a(pe,_);var ge=pe[15],Te=pe[12]/ge,_e=pe[13]/ge,De=pe[14]/ge,Oe=Math.exp(this.computedRadius[0]);this.center.jump(l,Te-le*Oe,_e-ye*Oe,De-ue*Oe)},y.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},y.idle=function(l){this.center.idle(l),this.up.idle(l),this.right.idle(l),this.radius.idle(l),this.angle.idle(l)},y.flush=function(l){this.center.flush(l),this.up.flush(l),this.right.flush(l),this.radius.flush(l),this.angle.flush(l)},y.setDistance=function(l,_){_>0&&this.radius.set(l,Math.log(_))},y.lookAt=function(l,_,s,w){this.recalcMatrix(l),_=_||this.computedEye,s=s||this.computedCenter,w=w||this.computedUp;var b=w[0],h=w[1],m=w[2],u=o(b,h,m);if(!(u<1e-6)){b/=u,h/=u,m/=u;var L=_[0]-s[0],S=_[1]-s[1],k=_[2]-s[2],P=o(L,S,k);if(!(P<1e-6)){L/=P,S/=P,k/=P;var z=this.computedRight,I=z[0],D=z[1],R=z[2],B=b*I+h*D+m*R;I-=B*b,D-=B*h,R-=B*m;var F=o(I,D,R);if(!(F<.01&&(I=h*k-m*S,D=m*L-b*k,R=b*S-h*L,F=o(I,D,R),F<1e-6))){I/=F,D/=F,R/=F,this.up.set(l,b,h,m),this.right.set(l,I,D,R),this.center.set(l,s[0],s[1],s[2]),this.radius.set(l,Math.log(P));var V=h*R-m*D,Y=m*I-b*R,K=b*D-h*I,J=o(V,Y,K);V/=J,Y/=J,K/=J;var G=b*L+h*S+m*k,Z=I*L+D*S+R*k,re=V*L+Y*S+K*k,se=Math.asin(i(G)),oe=Math.atan2(re,Z),N=this.angle._state,U=N[N.length-1],q=N[N.length-2];U=U%(2*Math.PI);var Q=Math.abs(U+2*Math.PI-oe),W=Math.abs(U-oe),X=Math.abs(U-2*Math.PI-oe);Q<W&&(U+=2*Math.PI),X<W&&(U-=2*Math.PI),this.angle.jump(this.angle.lastT(),U,q),this.angle.set(l,oe,se)}}}};function x(l){l=l||{};var _=l.center||[0,0,0],s=l.up||[0,1,0],w=l.right||p(s),b=l.radius||1,h=l.theta||0,m=l.phi||0;if(_=[].slice.call(_,0,3),s=[].slice.call(s,0,3),r(s,s),w=[].slice.call(w,0,3),r(w,w),"eye"in l){var u=l.eye,L=[u[0]-_[0],u[1]-_[1],u[2]-_[2]];t(w,L,s),o(w[0],w[1],w[2])<1e-6?w=p(s):r(w,w),b=o(L[0],L[1],L[2]);var S=f(s,L)/b,k=f(w,L)/b;m=Math.acos(S),h=Math.acos(k)}return b=Math.log(b),new d(l.zoomMin,l.zoomMax,_,s,w,b,h,m)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(c,M,A){M.exports=a;var e=+(Math.pow(2,27)+1);function a(n,t,r){var f=n*t,o=e*n,i=o-n,p=o-i,d=n-p,y=e*t,v=y-t,x=y-v,l=t-x,_=f-p*x,s=_-d*x,w=s-p*l,b=d*l-w;return r?(r[0]=b,r[1]=f,r):[b,f]}},{}],307:[function(c,M,A){M.exports=e;function e(a,n,t){var r=a+n,f=r-a,o=r-f,i=n-f,p=a-o;return t?(t[0]=p+i,t[1]=r,t):[p+i,r]}},{}],308:[function(c,M,A){(function(e){(function(){var a=c("bit-twiddle"),n=c("dup"),t=c("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var r=typeof Uint8ClampedArray!="undefined",f=typeof BigUint64Array!="undefined",o=typeof BigInt64Array!="undefined",i=e.__TYPEDARRAY_POOL;i.UINT8C||(i.UINT8C=n([32,0])),i.BIGUINT64||(i.BIGUINT64=n([32,0])),i.BIGINT64||(i.BIGINT64=n([32,0])),i.BUFFER||(i.BUFFER=n([32,0]));var p=i.DATA,d=i.BUFFER;A.free=function(D){if(t.isBuffer(D))d[a.log2(D.length)].push(D);else{if(Object.prototype.toString.call(D)!=="[object ArrayBuffer]"&&(D=D.buffer),!D)return;var R=D.length||D.byteLength,B=a.log2(R)|0;p[B].push(D)}};function y(I){if(!!I){var D=I.length||I.byteLength,R=a.log2(D);p[R].push(I)}}function v(I){y(I.buffer)}A.freeUint8=A.freeUint16=A.freeUint32=A.freeBigUint64=A.freeInt8=A.freeInt16=A.freeInt32=A.freeBigInt64=A.freeFloat32=A.freeFloat=A.freeFloat64=A.freeDouble=A.freeUint8Clamped=A.freeDataView=v,A.freeArrayBuffer=y,A.freeBuffer=function(D){d[a.log2(D.length)].push(D)},A.malloc=function(D,R){if(R===void 0||R==="arraybuffer")return x(D);switch(R){case"uint8":return l(D);case"uint16":return _(D);case"uint32":return s(D);case"int8":return w(D);case"int16":return b(D);case"int32":return h(D);case"float":case"float32":return m(D);case"double":case"float64":return u(D);case"uint8_clamped":return L(D);case"bigint64":return k(D);case"biguint64":return S(D);case"buffer":return z(D);case"data":case"dataview":return P(D);default:return null}return null};function x(I){var I=a.nextPow2(I),D=a.log2(I),R=p[D];return R.length>0?R.pop():new ArrayBuffer(I)}A.mallocArrayBuffer=x;function l(I){return new Uint8Array(x(I),0,I)}A.mallocUint8=l;function _(I){return new Uint16Array(x(2*I),0,I)}A.mallocUint16=_;function s(I){return new Uint32Array(x(4*I),0,I)}A.mallocUint32=s;function w(I){return new Int8Array(x(I),0,I)}A.mallocInt8=w;function b(I){return new Int16Array(x(2*I),0,I)}A.mallocInt16=b;function h(I){return new Int32Array(x(4*I),0,I)}A.mallocInt32=h;function m(I){return new Float32Array(x(4*I),0,I)}A.mallocFloat32=A.mallocFloat=m;function u(I){return new Float64Array(x(8*I),0,I)}A.mallocFloat64=A.mallocDouble=u;function L(I){return r?new Uint8ClampedArray(x(I),0,I):l(I)}A.mallocUint8Clamped=L;function S(I){return f?new BigUint64Array(x(8*I),0,I):null}A.mallocBigUint64=S;function k(I){return o?new BigInt64Array(x(8*I),0,I):null}A.mallocBigInt64=k;function P(I){return new DataView(x(I),0,I)}A.mallocDataView=P;function z(I){I=a.nextPow2(I);var D=a.log2(I),R=d[D];return R.length>0?R.pop():new t(I)}A.mallocBuffer=z,A.clearCache=function(){for(var D=0;D<32;++D)i.UINT8[D].length=0,i.UINT16[D].length=0,i.UINT32[D].length=0,i.INT8[D].length=0,i.INT16[D].length=0,i.INT32[D].length=0,i.FLOAT[D].length=0,i.DOUBLE[D].length=0,i.BIGUINT64[D].length=0,i.BIGINT64[D].length=0,i.UINT8C[D].length=0,p[D].length=0,d[D].length=0}}).call(this)}).call(this,typeof T!="undefined"?T:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(c,M,A){M.exports=e;function e(n){this.roots=new Array(n),this.ranks=new Array(n);for(var t=0;t<n;++t)this.roots[t]=t,this.ranks[t]=0}var a=e.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},a.find=function(n){for(var t=n,r=this.roots;r[n]!==n;)n=r[n];for(;r[t]!==n;){var f=r[t];r[t]=n,t=f}return n},a.link=function(n,t){var r=this.find(n),f=this.find(t);if(r!==f){var o=this.ranks,i=this.roots,p=o[r],d=o[f];p<d?i[r]=f:d<p?i[f]=r:(i[f]=r,++o[r])}}},{}],310:[function(c,M,A){function e(t,r){for(var f=1,o=t.length,i=t[0],p=t[0],d=1;d<o;++d)if(p=i,i=t[d],r(i,p)){if(d===f){f++;continue}t[f++]=i}return t.length=f,t}function a(t){for(var r=1,f=t.length,o=t[0],i=t[0],p=1;p<f;++p,i=o)if(i=o,o=t[p],o!==i){if(p===r){r++;continue}t[r++]=o}return t.length=r,t}function n(t,r,f){return t.length===0?t:r?(f||t.sort(r),e(t,r)):(f||t.sort(),a(t))}M.exports=n},{}],311:[function(c,M,A){M.exports=t;var e=c("./lib/vtext"),a=null,n=null;typeof document!="undefined"&&(a=document.createElement("canvas"),a.width=8192,a.height=1024,n=a.getContext("2d"));function t(r,f){return(typeof f!="object"||f===null)&&(f={}),e(r,f.canvas||a,f.context||n,f)}},{"./lib/vtext":312}],312:[function(c,M,A){M.exports=S,M.exports.processPixels=L;var e=c("surface-nets"),a=c("ndarray"),n=c("simplify-planar-graph"),t=c("clean-pslg"),r=c("cdt2d"),f=c("planar-graph-to-polyline"),o="b",i="b|",p="i",d="i|",y="sup",v="+",x="+1",l="sub",_="-",s="-1";function w(k,P,z,I){for(var D="<"+k+">",R="</"+k+">",B=D.length,F=R.length,V=P[0]===v||P[0]===_,Y=0,K=-F;Y>-1&&(Y=z.indexOf(D,Y),!(Y===-1||(K=z.indexOf(R,Y+B),K===-1)||K<=Y));){for(var J=Y;J<K+F;++J)if(J<Y+B||J>=K)I[J]=null,z=z.substr(0,J)+" "+z.substr(J+1);else if(I[J]!==null){var G=I[J].indexOf(P[0]);G===-1?I[J]+=P:V&&(I[J]=I[J].substr(0,G+1)+(1+parseInt(I[J][G+1]))+I[J].substr(G+2))}var Z=Y+B,re=z.substr(Z,K-Z),se=re.indexOf(D);se!==-1?Y=se:Y=K+F}return I}function b(k,P,z){for(var I=P.textAlign||"start",D=P.textBaseline||"alphabetic",R=[1<<30,1<<30],B=[0,0],F=k.length,V=0;V<F;++V)for(var Y=k[V],K=0;K<2;++K)R[K]=Math.min(R[K],Y[K])|0,B[K]=Math.max(B[K],Y[K])|0;var J=0;switch(I){case"center":J=-.5*(R[0]+B[0]);break;case"right":case"end":J=-B[0];break;case"left":case"start":J=-R[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+I+"'")}var G=0;switch(D){case"hanging":case"top":G=-R[1];break;case"middle":G=-.5*(R[1]+B[1]);break;case"alphabetic":case"ideographic":G=-3*z;break;case"bottom":G=-B[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+D+"'")}var Z=1/z;return"lineHeight"in P?Z*=+P.lineHeight:"width"in P?Z=P.width/(B[0]-R[0]):"height"in P&&(Z=P.height/(B[1]-R[1])),k.map(function(re){return[Z*(re[0]+J),Z*(re[1]+G)]})}function h(k,P,z,I,D,R){z=z.replace(/\n/g,""),R.breaklines===!0?z=z.replace(/\<br\>/g,`
`):z=z.replace(/\<br\>/g," ");var B="",F=[];for(U=0;U<z.length;++U)F[U]=B;R.bolds===!0&&(F=w(o,i,z,F)),R.italics===!0&&(F=w(p,d,z,F)),R.superscripts===!0&&(F=w(y,x,z,F)),R.subscripts===!0&&(F=w(l,s,z,F));var V=[],Y="";for(U=0;U<z.length;++U)F[U]!==null&&(Y+=z[U],V.push(F[U]));var K=Y.split(`
`),J=K.length,G=Math.round(D*I),Z=I,re=I*2,se=0,oe=J*G+re;k.height<oe&&(k.height=oe),P.fillStyle="#000",P.fillRect(0,0,k.width,k.height),P.fillStyle="#fff";var N,U,q,Q,W,X=0,te="";function ee(){if(te!==""){var De=P.measureText(te).width;P.fillText(te,Z+q,re+Q),q+=De}}function ie(){return""+Math.round(W)+"px "}function le(De,Oe){var Ue=""+P.font;if(R.subscripts===!0){var xe=De.indexOf(_),Pe=Oe.indexOf(_),Ve=xe>-1?parseInt(De[1+xe]):0,Qe=Pe>-1?parseInt(Oe[1+Pe]):0;Ve!==Qe&&(Ue=Ue.replace(ie(),"?px "),W*=Math.pow(.75,Qe-Ve),Ue=Ue.replace("?px ",ie())),Q+=.25*G*(Qe-Ve)}if(R.superscripts===!0){var Fe=De.indexOf(v),Le=Oe.indexOf(v),Ne=Fe>-1?parseInt(De[1+Fe]):0,dt=Le>-1?parseInt(Oe[1+Le]):0;Ne!==dt&&(Ue=Ue.replace(ie(),"?px "),W*=Math.pow(.75,dt-Ne),Ue=Ue.replace("?px ",ie())),Q-=.25*G*(dt-Ne)}if(R.bolds===!0){var Dt=De.indexOf(i)>-1,Xt=Oe.indexOf(i)>-1;!Dt&&Xt&&(Tt?Ue=Ue.replace("italic ","italic bold "):Ue="bold "+Ue),Dt&&!Xt&&(Ue=Ue.replace("bold ",""))}if(R.italics===!0){var Tt=De.indexOf(d)>-1,zt=Oe.indexOf(d)>-1;!Tt&&zt&&(Ue="italic "+Ue),Tt&&!zt&&(Ue=Ue.replace("italic ",""))}P.font=Ue}for(N=0;N<J;++N){var ye=K[N]+`
`;for(q=0,Q=N*G,W=I,te="",U=0;U<ye.length;++U){var ue=U+X<V.length?V[U+X]:V[V.length-1];B===ue?te+=ye[U]:(ee(),te=ye[U],ue!==void 0&&(le(B,ue),B=ue))}ee(),X+=ye.length;var pe=Math.round(q+2*Z)|0;se<pe&&(se=pe)}var ge=se,Te=re+G*J,_e=a(P.getImageData(0,0,ge,Te).data,[Te,ge,4]);return _e.pick(-1,-1,0).transpose(1,0)}function m(k,P){var z=e(k,128);return P?n(z.cells,z.positions,.25):{edges:z.cells,positions:z.positions}}function u(k,P,z,I){var D=m(k,I),R=b(D.positions,P,z),B=D.edges,F=P.orientation==="ccw";if(t(R,B),P.polygons||P.polygon||P.polyline){for(var V=f(B,R),Y=new Array(V.length),K=0;K<V.length;++K){for(var J=V[K],G=new Array(J.length),Z=0;Z<J.length;++Z){for(var re=J[Z],se=new Array(re.length),oe=0;oe<re.length;++oe)se[oe]=R[re[oe]].slice();F&&se.reverse(),G[Z]=se}Y[K]=G}return Y}else return P.triangles||P.triangulate||P.triangle?{cells:r(R,B,{delaunay:!1,exterior:!1,interior:!0}),positions:R}:{edges:B,positions:R}}function L(k,P,z){try{return u(k,P,z,!0)}catch{}try{return u(k,P,z,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function S(k,P,z,I){var D=64,R=1.25,B={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};I&&(I.size&&I.size>0&&(D=I.size),I.lineSpacing&&I.lineSpacing>0&&(R=I.lineSpacing),I.styletags&&I.styletags.breaklines&&(B.breaklines=!!I.styletags.breaklines),I.styletags&&I.styletags.bolds&&(B.bolds=!!I.styletags.bolds),I.styletags&&I.styletags.italics&&(B.italics=!!I.styletags.italics),I.styletags&&I.styletags.subscripts&&(B.subscripts=!!I.styletags.subscripts),I.styletags&&I.styletags.superscripts&&(B.superscripts=!!I.styletags.superscripts)),z.font=[I.fontStyle,I.fontVariant,I.fontWeight,D+"px",I.font].filter(function(V){return V}).join(" "),z.textAlign="start",z.textBaseline="alphabetic",z.direction="ltr";var F=h(P,z,k,D,R,B);return L(F,I,D)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(c,M,A){(function(){if(typeof ses!="undefined"&&ses.ok&&!ses.ok())return;function a(L){L.permitHostObjects___&&L.permitHostObjects___(a)}typeof ses!="undefined"&&(ses.weakMapPermitHostObjects=a);var n=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator!="undefined"&&/Firefox/.test(navigator.userAgent))){var r=new t,f=Object.freeze({});if(r.set(f,1),r.get(f)!==1)n=!0;else{M.exports=WeakMap;return}}}var o=Object.getOwnPropertyNames,i=Object.defineProperty,p=Object.isExtensible,d="weakmap:",y=d+"ident:"+Math.random()+"___";if(typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var v=new ArrayBuffer(25),x=new Uint8Array(v);crypto.getRandomValues(x),y=d+"rand:"+Array.prototype.map.call(x,function(L){return(L%36).toString(36)}).join("")+"___"}function l(L){return!(L.substr(0,d.length)==d&&L.substr(L.length-3)==="___")}if(i(Object,"getOwnPropertyNames",{value:function(S){return o(S).filter(l)}}),"getPropertyNames"in Object){var _=Object.getPropertyNames;i(Object,"getPropertyNames",{value:function(S){return _(S).filter(l)}})}function s(L){if(L!==Object(L))throw new TypeError("Not an object: "+L);var S=L[y];if(S&&S.key===L)return S;if(!!p(L)){S={key:L};try{return i(L,y,{value:S,writable:!1,enumerable:!1,configurable:!1}),S}catch{return}}}(function(){var L=Object.freeze;i(Object,"freeze",{value:function(z){return s(z),L(z)}});var S=Object.seal;i(Object,"seal",{value:function(z){return s(z),S(z)}});var k=Object.preventExtensions;i(Object,"preventExtensions",{value:function(z){return s(z),k(z)}})})();function w(L){return L.prototype=null,Object.freeze(L)}var b=!1;function h(){!b&&typeof console!="undefined"&&(b=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var m=0,u=function(){this instanceof u||h();var L=[],S=[],k=m++;function P(R,B){var F,V=s(R);return V?k in V?V[k]:B:(F=L.indexOf(R),F>=0?S[F]:B)}function z(R){var B=s(R);return B?k in B:L.indexOf(R)>=0}function I(R,B){var F,V=s(R);return V?V[k]=B:(F=L.indexOf(R),F>=0?S[F]=B:(F=L.length,S[F]=B,L[F]=R)),this}function D(R){var B=s(R),F,V;return B?k in B&&delete B[k]:(F=L.indexOf(R),F<0?!1:(V=L.length-1,L[F]=void 0,S[F]=S[V],L[F]=L[V],L.length=V,S.length=V,!0))}return Object.create(u.prototype,{get___:{value:w(P)},has___:{value:w(z)},set___:{value:w(I)},delete___:{value:w(D)}})};u.prototype=Object.create(Object.prototype,{get:{value:function(S,k){return this.get___(S,k)},writable:!0,configurable:!0},has:{value:function(S){return this.has___(S)},writable:!0,configurable:!0},set:{value:function(S,k){return this.set___(S,k)},writable:!0,configurable:!0},delete:{value:function(S){return this.delete___(S)},writable:!0,configurable:!0}}),typeof t=="function"?function(){n&&typeof Proxy!="undefined"&&(Proxy=void 0);function L(){this instanceof u||h();var S=new t,k=void 0,P=!1;function z(B,F){return k?S.has(B)?S.get(B):k.get___(B,F):S.get(B,F)}function I(B){return S.has(B)||(k?k.has___(B):!1)}var D;n?D=function(B,F){return S.set(B,F),S.has(B)||(k||(k=new u),k.set(B,F)),this}:D=function(B,F){if(P)try{S.set(B,F)}catch{k||(k=new u),k.set___(B,F)}else S.set(B,F);return this};function R(B){var F=!!S.delete(B);return k&&k.delete___(B)||F}return Object.create(u.prototype,{get___:{value:w(z)},has___:{value:w(I)},set___:{value:w(D)},delete___:{value:w(R)},permitHostObjects___:{value:w(function(B){if(B===a)P=!0;else throw new Error("bogus call to permitHostObjects___")})}})}L.prototype=u.prototype,M.exports=L,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy!="undefined"&&(Proxy=void 0),M.exports=u)})()},{}],314:[function(c,M,A){var e=c("./hidden-store.js");M.exports=a;function a(){var n={};return function(t){if((typeof t!="object"||t===null)&&typeof t!="function")throw new Error("Weakmap-shim: Key must be object");var r=t.valueOf(n);return r&&r.identity===n?r:e(t,n)}}},{"./hidden-store.js":315}],315:[function(c,M,A){M.exports=e;function e(a,n){var t={identity:n},r=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(f){return f!==n?r.apply(this,arguments):t},writable:!0}),t}},{}],316:[function(c,M,A){var e=c("./create-store.js");M.exports=a;function a(){var n=e();return{get:function(t,r){var f=n(t);return f.hasOwnProperty("value")?f.value:r},set:function(t,r){return n(t).value=r,this},has:function(t){return"value"in n(t)},delete:function(t){return delete n(t).value}}}},{"./create-store.js":314}],317:[function(c,M,A){function e(){return function(o,i,p,d,y,v){var x=o[0],l=p[0],_=[0],s=l;d|=0;var w=0,b=l;for(w=0;w<x;++w){{var h=i[d]-v,m=i[d+s]-v;h>=0!=m>=0&&y.push(_[0]+.5+.5*(h+m)/(h-m))}d+=b,++_[0]}}}function a(){return e()}var n=a;function t(o){var i={};return function(d,y,v){var x=d.dtype,l=d.order,_=[x,l.join()].join(),s=i[_];return s||(i[_]=s=o([x,l])),s(d.shape.slice(0),d.data,d.stride,d.offset|0,y,v)}}function r(o){return t(n.bind(void 0,o))}function f(o){return r({funcName:o.funcName})}M.exports=f({funcName:"zeroCrossings"})},{}],318:[function(c,M,A){M.exports=a;var e=c("./lib/zc-core");function a(n,t){var r=[];return t=+t||0,e(n.hi(n.shape[0]-1),r,t),r}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof To!="undefined"?To:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[27])(27)})})(zv);var D0=C0(zv.exports);export{D0 as P};
