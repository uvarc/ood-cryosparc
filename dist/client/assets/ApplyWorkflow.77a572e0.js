var Nl=Object.defineProperty,Dl=Object.defineProperties;var Rl=Object.getOwnPropertyDescriptors;var We=Object.getOwnPropertySymbols;var dt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable;var gt=(o,e,l)=>e in o?Nl(o,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[e]=l,de=(o,e)=>{for(var l in e||(e={}))dt.call(e,l)&&gt(o,l,e[l]);if(We)for(var l of We(e))_t.call(e,l)&&gt(o,l,e[l]);return o},Ne=(o,e)=>Dl(o,Rl(e));var ht=o=>typeof o=="symbol"?o:o+"",bt=(o,e)=>{var l={};for(var t in o)dt.call(o,t)&&e.indexOf(t)<0&&(l[t]=o[t]);if(o!=null&&We)for(var t of We(o))e.indexOf(t)<0&&_t.call(o,t)&&(l[t]=o[t]);return l};import{P as Vl,ak as Fe,u as De,e as $t,a as Ul,z as kt,p as vt,aq as Jl,_ as ql,ay as Ll,Q as Ml}from"./index.146c2037.js";import{e as wt,g as $e,S as je,h as Ee,s as ye,Q as S,a6 as z,I as D,R as C,T as O,a7 as Q,p as g,J as R,U as y,k as j,a2 as v,ae as ne,ak as Ce,ac as Se,C as L,D as M,E as G,ao as Oe,o as k,t as w,H as B,ap as ze,l as te,m as le,j as Y,L as re,y as xe,z as et,A as tt,B as lt,a9 as Ie,K as Te,ab as Gl,af as ge,aa as Qe,aM as jt,at as ke,au as ve,r as Ke,F as Et,G as Bl,ag as Xe,u as nt,v as Re,x as yt,am as Ye,aA as Hl,a5 as Wl,aw as St,ad as Fl,n as Ze,ay as zl,w as Ct,V as st,W as ot}from"./vendor.3ae73048.js";import{g as Ql,r as Kl,a as Xl,f as Yl}from"./index.ef7d8fe7.js";import{h as Zl,z as xl,f as en,H as tn,o as ln,bg as Pt,bh as nn,B as sn,g as on}from"./helpers.7177ca38.js";import{D as rn,S as an}from"./jobs.7ab064ef.js";import{p as fn,s as Ge,J as Ot,K as Ve,b8 as un,b9 as cn,m as pn,T as mn,V as dn}from"./router.1b465492.js";import{u as _n}from"./createNew.a4a688d1.js";import{I as Tt,J as At,w as gn,K as rt,s as It,L as Be,T as Nt,S as hn}from"./index.11580965.js";import{L as bn}from"./types.8cb6216c.js";import{I as he}from"./Icon.61279884.js";import{A as $n}from"./ArrowCircleRight.3a96b815.js";import{t as Ae,Q as kn,M as vn,a as wn}from"./Spinner.012207c4.js";import{S as jn,a as En,P as Dt,B as yn,D as Sn,F as Cn,J as Pn,T as On,b as it,c as Tn,d as An,e as In,f as Nn,g as Dn,I as Rn}from"./FooterButton.95026c94.js";import{Q as at}from"./QuestionMarkCircle.1d0a7a5c.js";import{b as Ue,a as Je}from"./ChevronUp.0ab7bee0.js";import{p as Rt,m as Vt}from"./purify.es.5cdb46dc.js";import{C as Vn}from"./Exclamation.f44359c6.js";import"./index.c4392b02.js";import"./jobs.d50d1674.js";import"./index.2e3bb17a.js";import"./Folder.9bc96b35.js";import"./LockClosed.9ead7228.js";import"./PageDialog.0c69a37b.js";import"./Unfold.f168270e.js";import"./Target.7baf7004.js";import"./Flag.5ce531b9.js";const Un=wt(fn,o=>o.type===Vl.jobs),Jn=o=>{var i,a,f,u,p,_;const e=Object.entries(o),l=[],t=[],s={},r={},n={};for(let b=0;b<$e(Ge).length;b++){const[d,m]=$e(Ge)[b].split("-"),h=$e(Ot).find(({project_uid:$,uid:c})=>d===$&&m===c);h&&l.push(h)}for(let b=0;b<e.length;b++){const[d,m]=e[b],h=l.find($=>$.job_type===m.jobType&&!t.includes($.uid));if(h){const $=$e(Ve)[m.jobType];s[d]=(i=$.title)!=null?i:m.jobType,t.push(h.uid)}else{for(let $=0;$<l.length;$++){const c=l[$],{output_result_groups:E=[]}=c,J=[];for(let N=0;N<E.length;N++){const A=E[N],V=Object.entries((a=m==null?void 0:m.groups)!=null?a:{});for(let q=0;q<V.length;q++){const[H,K]=V[q];if(!J.includes(H)&&H===A.type){const I=[];for(let W=0;W<A.contains.length;W++){const U=A.contains[W];K.required.includes(U.name)&&!I.includes(U.name)&&I.push(U.name)}Fe(K.required,I)&&J.push(H)}}}if(Fe(J,Object.keys(m.groups))){const N=(f=$e(Ve))==null?void 0:f[c==null?void 0:c.job_type];n[d]||(r[d]=(u=N.title)!=null?u:"")}}if(!r[d]){const $=Object.entries((p=m==null?void 0:m.groups)!=null?p:{});for(let c=0;c<$.length;c++){const[E,J]=$[c],N=$e(Ve)[m.jobType];n[d]?n[d].groups.push({title:E,slots:J.required}):n[d]={title:(_=N.title)!=null?_:m.jobType,groups:[{title:E,slots:J.required}]}}}}}return{selected:s,surrogates:r,missing:n}},qn=async(o,e,l)=>{var s,r,n,i,a,f,u,p,_;const t=Zl("Constructing workflow jobs");try{if(!$e(Un))throw new Error("Must be inside of a workspace to apply a workflow");const b=Ql(o,e),{_id:d,parents:m,jobs:h}=b,$=Object.keys(h),c={},E={},J=[],[N,A]=await xl();if((s=Object.keys(m))==null?void 0:s.length){const V=Object.entries(m),q=[];for(let H=0;H<$e(Ge).length;H++){const[K,I]=$e(Ge)[H].split("-"),W=$e(Ot).find(({project_uid:U,uid:F})=>K===U&&I===F);W&&q.push(W)}for(let H=0;H<V.length;H++){const[K,I]=V[H],W=Object.values(c),U=q.find(F=>F.job_type===I.jobType&&!W.includes(F.uid));if(U)c[K]=U.uid;else for(let F=0;F<q.length;F++){const ee=q[F],{output_result_groups:Z=[]}=ee,se=[],ue={};for(let ce=0;ce<Z.length;ce++){const T=Z[ce],X=Object.entries((r=I==null?void 0:I.groups)!=null?r:{});for(let ie=0;ie<X.length;ie++){const[pe,ae]=X[ie];if(!se.includes(pe)&&pe===T.type){const fe=[];for(let oe=0;oe<T.contains.length;oe++){const we=T.contains[oe];ae.required.includes(we.name)&&!fe.includes(we.name)&&fe.push(we.name)}if(Fe(ae.required,fe)){for(let oe=0;oe<ae.connections.length;oe++){const we=ae.connections[oe];ue[we]=T.name}se.push(pe)}}}}Fe(se,Object.keys(I.groups))&&(E[K]?E[K]=de(de({},E[K]),ue):E[K]=ue,c[K]=ee.uid)}}}for(let V=0;V<$.length;V++){const q=$[V],H=h[q],{jobType:K}=h[q],I=await De.core.createJob(N,A,K,!1);if(I&&((n=H==null?void 0:H.title)==null?void 0:n.length)&&De.core.updateJobTitle(N,I,H.title),I&&((i=H==null?void 0:H.description)==null?void 0:i.length)&&De.core.updateJobDescription(N,I,H.description),I&&d&&J.push({projectUid:N,uid:I,workflowId:d,jobId:q}),!I){$t(`Job ${q} ${K} could not be created`);break}c[q]=I}for(let V=0;V<$.length;V++){const q=$[V],H=c[q],K=h[q],{parameters:I}=K,W=Object.keys(I);for(let U=0;U<W.length;U++){const F=W[U],ee=I[F],{value:Z}=ee;typeof Z=="string"&&!Z.length||typeof Z=="number"&&isNaN(Z)||await De.core.setJobParam(N,H,F,Z,!1)}}for(let V=0;V<$.length;V++){const q=$[V],H=c[q],K=h[q],I=(a=K.individualResults)!=null?a:[];for(let W=0;W<K.groups.length;W++){const U=K.groups[W],[F,ee]=U,[Z,se]=F.split("."),ue=c[Z];if(!ue)continue;const ce=`${H}.${ee}`;let T=`${ue}.${se}`;if(E==null?void 0:E[Z]){const X=E[Z][se];T=`${ue}.${X}`}await De.core.connectResultGroup(N,T,ce,!1)}for(let W=0;W<I.length;W++){const[U,F]=I[W],[ee,Z,se]=U.split("."),[ue,ce,T,X]=F.split("."),ie=c[ee],pe=c[ue];if(!ie||!pe)continue;const ae=`${pe}.${ce}.${T}.${X}`;let fe=`${ie}.${Z}.${se}`;if(E==null?void 0:E[ee]){const oe=E[ee][Z];fe=`${ie}.${oe}.${se}`}try{await De.core.connectResult(N,fe,ae)}catch{Ul(`Could not connect result => Dest: ${ae} -> Source ${fe}`)}}}if(en("Successfully deployed workflow",t),l.queue){const V=Object.entries(c).filter(([I])=>!I.includes("P")).map(([I,W])=>`${N}-${W}`),q=tn("job_uids",V),H=ln({uid:1,project_uid:1,job_type:1,run_on_master_direct:1,interactive:1,params_base:1,params_spec:1,input_slot_groups:1}),K=await kt(`/api/actions/jobs?${q}&${H}&sort_key=created_at&sort_order=1`);rn(K,l.queue)}if(l.tag){const{workflowUid:V}=await kt(`/api/actions/workflows/next-workflow-uid?projectUid=${N}`),q=((u=(f=l==null?void 0:l.tag)==null?void 0:f.title)==null?void 0:u.length)?`${N}/${V}: ${l.tag.title}`:`${N}/${V}`,H=((_=(p=l==null?void 0:l.tag)==null?void 0:p.description)==null?void 0:_.length)?l.tag.description:`Workflow: ${N} ${V}`,K=Pt[Math.floor(Math.random()*Pt.length)],I=await nn(q,"job",K,H,d);I&&(await vt(`/api/actions/workflows/apply-workflow-uid?projectUid=${N}&workflowUid=${V}`),Object.entries(c).forEach(([W,U])=>{W.includes("P")||sn(N,U,I.uid)}))}vt("/api/actions/workflows/add-job-workflow",{payload:J}),an(N,A),Kl(o,e,!!l.queue,!!l.tag)}catch(b){on("Could not apply workflow",b,t),$t("Could not apply workflow: ",b.message)}};function Ut(o,e,l){const t=o.slice();return t[1]=e[l],t}function Jt(o,e,l){const t=o.slice();return t[4]=e[l],t}function qt(o){let e,l=o[4]+"",t;return{c(){e=S("li"),t=z(l)},l(s){e=C(s,"LI",{});var r=O(e);t=Q(r,l),r.forEach(g)},m(s,r){j(s,e,r),v(e,t)},p(s,r){r&1&&l!==(l=s[4]+"")&&ne(t,l)},d(s){s&&g(e)}}}function Lt(o){var u;let e,l,t=o[1].title+"",s,r,n,i,a=(u=o[1].slots)!=null?u:[],f=[];for(let p=0;p<a.length;p+=1)f[p]=qt(Jt(o,a,p));return{c(){e=S("ul"),l=S("li"),s=z(t),r=D(),n=S("ul");for(let p=0;p<f.length;p+=1)f[p].c();i=D(),this.h()},l(p){e=C(p,"UL",{class:!0});var _=O(e);l=C(_,"LI",{class:!0});var b=O(l);s=Q(b,t),b.forEach(g),r=R(_),n=C(_,"UL",{class:!0});var d=O(n);for(let m=0;m<f.length;m+=1)f[m].l(d);d.forEach(g),i=R(_),_.forEach(g),this.h()},h(){y(l,"class","font-medium"),y(n,"class","pl-3.5 mt-0.5 list-disc"),y(e,"class","pl-3.5 mt-0.5 list-disc")},m(p,_){j(p,e,_),v(e,l),v(l,s),v(e,r),v(e,n);for(let b=0;b<f.length;b+=1)f[b].m(n,null);v(e,i)},p(p,_){var b;if(_&1&&t!==(t=p[1].title+"")&&ne(s,t),_&1){a=(b=p[1].slots)!=null?b:[];let d;for(d=0;d<a.length;d+=1){const m=Jt(p,a,d);f[d]?f[d].p(m,_):(f[d]=qt(m),f[d].c(),f[d].m(n,null))}for(;d<f.length;d+=1)f[d].d(1);f.length=a.length}},d(p){p&&g(e),Ce(f,p)}}}function Ln(o){let e,l,t,s,r,n,i,a=o[0].title+"",f,u,p,_,b,d=o[0].groups,m=[];for(let h=0;h<d.length;h+=1)m[h]=Lt(Ut(o,d,h));return{c(){e=S("div"),l=S("p"),t=z("Select a parent job of the specified job type or a suitable replacement job."),s=D(),r=S("hr"),n=D(),i=S("h1"),f=z(a),u=D(),p=S("h2"),_=z("Required Groups"),b=D();for(let h=0;h<m.length;h+=1)m[h].c();this.h()},l(h){e=C(h,"DIV",{class:!0});var $=O(e);l=C($,"P",{});var c=O(l);t=Q(c,"Select a parent job of the specified job type or a suitable replacement job."),c.forEach(g),s=R($),r=C($,"HR",{class:!0}),n=R($),i=C($,"H1",{class:!0});var E=O(i);f=Q(E,a),E.forEach(g),u=R($),p=C($,"H2",{class:!0});var J=O(p);_=Q(J,"Required Groups"),J.forEach(g),b=R($);for(let N=0;N<m.length;N+=1)m[N].l($);$.forEach(g),this.h()},h(){y(r,"class","my-1.5"),y(i,"class","font-semibold"),y(p,"class","italic"),y(e,"class","pb-1.5 text-xs")},m(h,$){j(h,e,$),v(e,l),v(l,t),v(e,s),v(e,r),v(e,n),v(e,i),v(i,f),v(e,u),v(e,p),v(p,_),v(e,b);for(let c=0;c<m.length;c+=1)m[c].m(e,null)},p(h,[$]){if($&1&&a!==(a=h[0].title+"")&&ne(f,a),$&1){d=h[0].groups;let c;for(c=0;c<d.length;c+=1){const E=Ut(h,d,c);m[c]?m[c].p(E,$):(m[c]=Lt(E),m[c].c(),m[c].m(e,null))}for(;c<m.length;c+=1)m[c].d(1);m.length=d.length}},i:Se,o:Se,d(h){h&&g(e),Ce(m,h)}}}function Mn(o,e,l){let{parent:t}=e;return o.$$set=s=>{"parent"in s&&l(0,t=s.parent)},[t]}class Mt extends je{constructor(e){super();Ee(this,e,Mn,Ln,ye,{parent:0})}}function Gt(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t}function Bt(o,e,l){const t=o.slice();t[7]=e[l][0],t[11]=e[l][1];const s=t[3](t[7]);return t[12]=s,t}function Ht(o,e,l){const t=o.slice();return t[7]=e[l][0],t[11]=e[l][1],t}function Wt(o){let e,l,t,s,r,n,i,a,f,u,p,_;i=new he({props:{src:at,size:4,modifier:"ml-1.5"}});let b=Object.entries(o[2]),d=[];for(let m=0;m<b.length;m+=1)d[m]=Ft(Ht(o,b,m));return{c(){e=S("div"),l=S("header"),t=S("h3"),s=z("Connected Parents:"),r=D(),n=S("span"),L(i.$$.fragment),a=D(),f=S("ul");for(let m=0;m<d.length;m+=1)d[m].c();this.h()},l(m){e=C(m,"DIV",{class:!0});var h=O(e);l=C(h,"HEADER",{class:!0});var $=O(l);t=C($,"H3",{class:!0});var c=O(t);s=Q(c,"Connected Parents:"),c.forEach(g),r=R($),n=C($,"SPAN",{class:!0});var E=O(n);M(i.$$.fragment,E),E.forEach(g),$.forEach(g),a=R(h),f=C(h,"UL",{class:!0});var J=O(f);for(let N=0;N<d.length;N+=1)d[N].l(J);J.forEach(g),h.forEach(g),this.h()},h(){y(t,"class","text-xs font-bold"),y(n,"class","inline-block text-emerald-600 cursor-help transition duration-150 ease-in-out"),y(l,"class","flex justify-between"),y(f,"class","pl-3.5 mt-0.5 list-disc"),y(e,"class","p-2 mx-2 mt-2 rounded border border-emerald-500 text-emerald-700 bg-emerald-50")},m(m,h){j(m,e,h),v(e,l),v(l,t),v(t,s),v(l,r),v(l,n),G(i,n,null),v(e,a),v(e,f);for(let $=0;$<d.length;$+=1)d[$].m(f,null);u=!0,p||(_=Oe(Ae.call(null,n,{content:"Selected jobs have been connected to the workflow successfully."})),p=!0)},p(m,h){if(h&4){b=Object.entries(m[2]);let $;for($=0;$<b.length;$+=1){const c=Ht(m,b,$);d[$]?d[$].p(c,h):(d[$]=Ft(c),d[$].c(),d[$].m(f,null))}for(;$<d.length;$+=1)d[$].d(1);d.length=b.length}},i(m){u||(k(i.$$.fragment,m),u=!0)},o(m){w(i.$$.fragment,m),u=!1},d(m){m&&g(e),B(i),Ce(d,m),p=!1,_()}}}function Ft(o){let e,l=o[7]+"",t,s,r=o[11]+"",n,i;return{c(){e=S("li"),t=z(l),s=z(": "),n=z(r),i=D(),this.h()},l(a){e=C(a,"LI",{class:!0});var f=O(e);t=Q(f,l),s=Q(f,": "),n=Q(f,r),i=R(f),f.forEach(g),this.h()},h(){y(e,"class","text-xs font-medium ")},m(a,f){j(a,e,f),v(e,t),v(e,s),v(e,n),v(e,i)},p(a,f){f&4&&l!==(l=a[7]+"")&&ne(t,l),f&4&&r!==(r=a[11]+"")&&ne(n,r)},d(a){a&&g(e)}}}function zt(o){let e,l,t,s,r,n,i,a,f,u,p,_;i=new he({props:{src:at,size:4,modifier:"ml-1.5"}});let b=Object.entries(o[1]),d=[];for(let m=0;m<b.length;m+=1)d[m]=Qt(Bt(o,b,m));return{c(){e=S("div"),l=S("header"),t=S("h3"),s=z("Rerouted Parent Connections:"),r=D(),n=S("span"),L(i.$$.fragment),a=D(),f=S("ul");for(let m=0;m<d.length;m+=1)d[m].c();this.h()},l(m){e=C(m,"DIV",{class:!0});var h=O(e);l=C(h,"HEADER",{class:!0});var $=O(l);t=C($,"H3",{class:!0});var c=O(t);s=Q(c,"Rerouted Parent Connections:"),c.forEach(g),r=R($),n=C($,"SPAN",{class:!0});var E=O(n);M(i.$$.fragment,E),E.forEach(g),$.forEach(g),a=R(h),f=C(h,"UL",{class:!0});var J=O(f);for(let N=0;N<d.length;N+=1)d[N].l(J);J.forEach(g),h.forEach(g),this.h()},h(){y(t,"class","text-xs font-bold"),y(n,"class","inline-block text-blue-600 cursor-help transition duration-150 ease-in-out"),y(l,"class","flex justify-between"),y(f,"class","pl-3.5 mt-0.5 list-disc"),y(e,"class","p-2 mx-2 mt-2 rounded border border-blue-400 text-blue-700 bg-blue-50")},m(m,h){j(m,e,h),v(e,l),v(l,t),v(t,s),v(l,r),v(l,n),G(i,n,null),v(e,a),v(e,f);for(let $=0;$<d.length;$+=1)d[$].m(f,null);u=!0,p||(_=Oe(Ae.call(null,n,{content:"Inputs have been rerouted to draw from the specified selected jobs as the expected parent job type was not present in the selection."})),p=!0)},p(m,h){if(h&10){b=Object.entries(m[1]);let $;for($=0;$<b.length;$+=1){const c=Bt(m,b,$);d[$]?d[$].p(c,h):(d[$]=Qt(c),d[$].c(),d[$].m(f,null))}for(;$<d.length;$+=1)d[$].d(1);d.length=b.length}},i(m){u||(k(i.$$.fragment,m),u=!0)},o(m){w(i.$$.fragment,m),u=!1},d(m){m&&g(e),B(i),Ce(d,m),p=!1,_()}}}function Qt(o){let e,l,t=o[7]+"",s,r,n=o[11]+"",i,a,f,u=o[12]+"",p,_;return{c(){e=S("li"),l=S("span"),s=z(t),r=z(": "),i=z(n),a=z(" (for "),f=S("span"),p=z(u),_=z(`)
        `),this.h()},l(b){e=C(b,"LI",{class:!0});var d=O(e);l=C(d,"SPAN",{class:!0});var m=O(l);s=Q(m,t),r=Q(m,": "),i=Q(m,n),m.forEach(g),a=Q(d," (for "),f=C(d,"SPAN",{class:!0});var h=O(f);p=Q(h,u),h.forEach(g),_=Q(d,`)
        `),d.forEach(g),this.h()},h(){y(l,"class","font-medium"),y(f,"class","font-medium"),y(e,"class","text-xs")},m(b,d){j(b,e,d),v(e,l),v(l,s),v(l,r),v(l,i),v(e,a),v(e,f),v(f,p),v(e,_)},p(b,d){d&2&&t!==(t=b[7]+"")&&ne(s,t),d&2&&n!==(n=b[11]+"")&&ne(i,n),d&2&&u!==(u=b[12]+"")&&ne(p,u)},d(b){b&&g(e)}}}function Kt(o){let e,l,t,s,r,n,i,a,f,u,p,_;i=new he({props:{src:at,size:4,modifier:"ml-1.5"}});let b=Object.entries(o[0]),d=[];for(let h=0;h<b.length;h+=1)d[h]=Yt(Gt(o,b,h));const m=h=>w(d[h],1,1,()=>{d[h]=null});return{c(){e=S("div"),l=S("header"),t=S("h3"),s=z("Missing Parent Connections:"),r=D(),n=S("span"),L(i.$$.fragment),a=D(),f=S("ul");for(let h=0;h<d.length;h+=1)d[h].c();this.h()},l(h){e=C(h,"DIV",{class:!0});var $=O(e);l=C($,"HEADER",{class:!0});var c=O(l);t=C(c,"H3",{class:!0});var E=O(t);s=Q(E,"Missing Parent Connections:"),E.forEach(g),r=R(c),n=C(c,"SPAN",{class:!0});var J=O(n);M(i.$$.fragment,J),J.forEach(g),c.forEach(g),a=R($),f=C($,"UL",{class:!0});var N=O(f);for(let A=0;A<d.length;A+=1)d[A].l(N);N.forEach(g),$.forEach(g),this.h()},h(){y(t,"class","text-xs font-bold"),y(n,"class","inline-block text-orange-600 cursor-help transition duration-150 ease-in-out"),y(l,"class","flex justify-between"),y(f,"class","pl-3.5 mt-0.5 list-disc"),y(e,"class","p-2 mx-2 mt-2 rounded border border-orange-400 text-orange-700 bg-orange-50")},m(h,$){j(h,e,$),v(e,l),v(l,t),v(t,s),v(l,r),v(l,n),G(i,n,null),v(e,a),v(e,f);for(let c=0;c<d.length;c+=1)d[c].m(f,null);u=!0,p||(_=Oe(Ae.call(null,n,{content:"Select parent jobs in workspace to make connections. Workflow can be deployed without parent connections, however inputs will need to be connected manually after jobs are created."})),p=!0)},p(h,$){if($&1){b=Object.entries(h[0]);let c;for(c=0;c<b.length;c+=1){const E=Gt(h,b,c);d[c]?(d[c].p(E,$),k(d[c],1)):(d[c]=Yt(E),d[c].c(),k(d[c],1),d[c].m(f,null))}for(te(),c=b.length;c<d.length;c+=1)m(c);le()}},i(h){if(!u){k(i.$$.fragment,h);for(let $=0;$<b.length;$+=1)k(d[$]);u=!0}},o(h){w(i.$$.fragment,h),d=d.filter(Boolean);for(let $=0;$<d.length;$+=1)w(d[$]);u=!1},d(h){h&&g(e),B(i),Ce(d,h),p=!1,_()}}}function Xt(o){let e,l,t,s,r,n;return l=new he({props:{src:Tt,size:4,type:"outline",modifier:"stroke-2 inline-block ml-1.5 text-orange-600"}}),{c(){e=S("span"),L(l.$$.fragment),this.h()},l(i){e=C(i,"SPAN",{class:!0});var a=O(e);M(l.$$.fragment,a),a.forEach(g),this.h()},h(){y(e,"class","cursor-help")},m(i,a){j(i,e,a),G(l,e,null),s=!0,r||(n=Oe(t=Ae.call(null,e,{component:Mt,componentProps:{parent:o[8]},interactive:!0})),r=!0)},p(i,a){o=i,t&&ze(t.update)&&a&1&&t.update.call(null,{component:Mt,componentProps:{parent:o[8]},interactive:!0})},i(i){s||(k(l.$$.fragment,i),s=!0)},o(i){w(l.$$.fragment,i),s=!1},d(i){i&&g(e),B(l),r=!1,n()}}}function Yt(o){let e,l,t=o[7]+"",s,r,n=o[8].title+"",i,a,f,u,p=o[8].groups[0].title!=="0"&&Xt(o);return{c(){e=S("li"),l=S("span"),s=z(t),r=z(": "),i=z(n),a=D(),p&&p.c(),f=D(),this.h()},l(_){e=C(_,"LI",{class:!0});var b=O(e);l=C(b,"SPAN",{class:!0});var d=O(l);s=Q(d,t),r=Q(d,": "),i=Q(d,n),d.forEach(g),a=R(b),p&&p.l(b),f=R(b),b.forEach(g),this.h()},h(){y(l,"class","font-medium"),y(e,"class","text-xs")},m(_,b){j(_,e,b),v(e,l),v(l,s),v(l,r),v(l,i),v(e,a),p&&p.m(e,null),v(e,f),u=!0},p(_,b){(!u||b&1)&&t!==(t=_[7]+"")&&ne(s,t),(!u||b&1)&&n!==(n=_[8].title+"")&&ne(i,n),_[8].groups[0].title!=="0"?p?(p.p(_,b),b&1&&k(p,1)):(p=Xt(_),p.c(),k(p,1),p.m(e,f)):p&&(te(),w(p,1,1,()=>{p=null}),le())},i(_){u||(k(p),u=!0)},o(_){w(p),u=!1},d(_){_&&g(e),p&&p.d()}}}function Gn(o){let e=Object.keys(o[2]).length,l,t=Object.keys(o[1]).length,s,r=Object.keys(o[0]).length,n,i,a=e&&Wt(o),f=t&&zt(o),u=r&&Kt(o);return{c(){a&&a.c(),l=D(),f&&f.c(),s=D(),u&&u.c(),n=Y()},l(p){a&&a.l(p),l=R(p),f&&f.l(p),s=R(p),u&&u.l(p),n=Y()},m(p,_){a&&a.m(p,_),j(p,l,_),f&&f.m(p,_),j(p,s,_),u&&u.m(p,_),j(p,n,_),i=!0},p(p,[_]){_&4&&(e=Object.keys(p[2]).length),e?a?(a.p(p,_),_&4&&k(a,1)):(a=Wt(p),a.c(),k(a,1),a.m(l.parentNode,l)):a&&(te(),w(a,1,1,()=>{a=null}),le()),_&2&&(t=Object.keys(p[1]).length),t?f?(f.p(p,_),_&2&&k(f,1)):(f=zt(p),f.c(),k(f,1),f.m(s.parentNode,s)):f&&(te(),w(f,1,1,()=>{f=null}),le()),_&1&&(r=Object.keys(p[0]).length),r?u?(u.p(p,_),_&1&&k(u,1)):(u=Kt(p),u.c(),k(u,1),u.m(n.parentNode,n)):u&&(te(),w(u,1,1,()=>{u=null}),le())},i(p){i||(k(a),k(f),k(u),i=!0)},o(p){w(a),w(f),w(u),i=!1},d(p){a&&a.d(p),p&&g(l),f&&f.d(p),p&&g(s),u&&u.d(p),p&&g(n)}}}function Bn(o,e,l){let t,s,r,n;re(o,Ve,u=>l(6,n=u));let{parents:i}=e,{parentConnections:a}=e;const f=u=>{var p,_;return(_=(p=n[i[u].jobType])==null?void 0:p.title)!=null?_:i[u].jobType};return o.$$set=u=>{"parents"in u&&l(4,i=u.parents),"parentConnections"in u&&l(5,a=u.parentConnections)},o.$$.update=()=>{o.$$.dirty&32&&l(2,{selected:t={},surrogates:s={},missing:r={}}=a!=null?a:{},t,(l(1,s),l(5,a)),(l(0,r),l(5,a)))},[r,s,t,f,i,a]}class Hn extends je{constructor(e){super();Ee(this,e,Bn,Gn,ye,{parents:4,parentConnections:5})}}const Wn=o=>({}),Zt=o=>({});function xt(o){let e,l;const t=o[7].default,s=xe(t,o,o[6],null);return{c(){e=S("div"),s&&s.c(),this.h()},l(r){e=C(r,"DIV",{class:!0});var n=O(e);s&&s.l(n),n.forEach(g),this.h()},h(){y(e,"class","flex flex-col gap-y-1.5 p-2 shadow-sm")},m(r,n){j(r,e,n),s&&s.m(e,null),l=!0},p(r,n){s&&s.p&&(!l||n&64)&&et(s,t,r,r[6],l?lt(t,r[6],n,null):tt(r[6]),null)},i(r){l||(k(s,r),l=!0)},o(r){w(s,r),l=!1},d(r){r&&g(e),s&&s.d(r)}}}function Fn(o){let e,l,t,s,r,n,i,a,f,u,p,_,b,d;const m=o[7].info,h=xe(m,o,o[6],Zt);a=new he({props:{src:o[1]?Ue:Je,size:4,modifier:"text-gray-500"}});let $=o[1]&&xt(o);return{c(){e=S("div"),l=S("button"),t=S("h3"),s=z(o[2]),r=D(),n=S("div"),h&&h.c(),i=D(),L(a.$$.fragment),u=D(),$&&$.c(),this.h()},l(c){e=C(c,"DIV",{class:!0});var E=O(e);l=C(E,"BUTTON",{class:!0});var J=O(l);t=C(J,"H3",{class:!0});var N=O(t);s=Q(N,o[2]),N.forEach(g),r=R(J),n=C(J,"DIV",{class:!0});var A=O(n);h&&h.l(A),A.forEach(g),i=R(J),M(a.$$.fragment,J),J.forEach(g),u=R(E),$&&$.l(E),E.forEach(g),this.h()},h(){y(t,"class","text-xs font-semibold text-gray-600"),y(n,"class","inline-flex gap-x-1 ml-auto mr-1.5"),y(l,"class",f=""+(o[4]+" flex px-2 py-1 font-semibold shadow-sm rounded-t")),Ie(l,"rounded-b",!o[1]),Ie(l,"border-b",o[1]),y(e,"class",p=""+(o[3]+" flex flex-col rounded border border-gray-300"))},m(c,E){j(c,e,E),v(e,l),v(l,t),v(t,s),v(l,r),v(l,n),h&&h.m(n,null),v(l,i),G(a,l,null),v(e,u),$&&$.m(e,null),o[9](e),_=!0,b||(d=Te(l,"click",Gl(o[8])),b=!0)},p(c,[E]){(!_||E&4)&&ne(s,c[2]),h&&h.p&&(!_||E&64)&&et(h,m,c,c[6],_?lt(m,c[6],E,Wn):tt(c[6]),Zt);const J={};E&2&&(J.src=c[1]?Ue:Je),a.$set(J),(!_||E&16&&f!==(f=""+(c[4]+" flex px-2 py-1 font-semibold shadow-sm rounded-t")))&&y(l,"class",f),E&18&&Ie(l,"rounded-b",!c[1]),E&18&&Ie(l,"border-b",c[1]),c[1]?$?($.p(c,E),E&2&&k($,1)):($=xt(c),$.c(),k($,1),$.m(e,null)):$&&(te(),w($,1,1,()=>{$=null}),le()),(!_||E&8&&p!==(p=""+(c[3]+" flex flex-col rounded border border-gray-300")))&&y(e,"class",p)},i(c){_||(k(h,c),k(a.$$.fragment,c),k($),_=!0)},o(c){w(h,c),w(a.$$.fragment,c),w($),_=!1},d(c){c&&g(e),h&&h.d(c),B(a),$&&$.d(),o[9](null),b=!1,d()}}}function zn(o,e,l){let t,{$$slots:s={},$$scope:r}=e,{node:n=null}=e,{title:i}=e,{expanded:a=!0}=e,{intent:f="default"}=e,{class:u=""}=e;const p=()=>{l(1,a=!a)};function _(b){ge[b?"unshift":"push"](()=>{n=b,l(0,n)})}return o.$$set=b=>{"node"in b&&l(0,n=b.node),"title"in b&&l(2,i=b.title),"expanded"in b&&l(1,a=b.expanded),"intent"in b&&l(5,f=b.intent),"class"in b&&l(3,u=b.class),"$$scope"in b&&l(6,r=b.$$scope)},o.$$.update=()=>{o.$$.dirty&32&&l(4,t=f==="info"?"border-gray-300 bg-blue-50 hover:bg-blue-100 hover:text-blue-700":"border-gray-300 bg-gray-50 text-gray-600 hover:bg-gray-100 hover:text-gray-700")},[n,a,i,u,t,f,r,s,p,_]}class ft extends je{constructor(e){super();Ee(this,e,zn,Fn,ye,{node:0,title:2,expanded:1,intent:5,class:3})}}function el(o,e,l){const t=o.slice();return t[9]=e[l],t[10]=e,t[11]=l,t}function tl(o){let e,l,t,s,r,n,i,a,f,u;n=new he({props:{src:o[0]?Ue:Je,size:4,modifier:"text-gray-500"}});let p=o[0]&&ll(o);return{c(){e=S("fieldset"),l=S("button"),t=S("span"),s=z("Cluster Submission Script Variables:"),r=D(),L(n.$$.fragment),i=D(),p&&p.c(),this.h()},l(_){e=C(_,"FIELDSET",{});var b=O(e);l=C(b,"BUTTON",{type:!0,class:!0});var d=O(l);t=C(d,"SPAN",{class:!0});var m=O(t);s=Q(m,"Cluster Submission Script Variables:"),m.forEach(g),r=R(d),M(n.$$.fragment,d),d.forEach(g),i=R(b),p&&p.l(b),b.forEach(g),this.h()},h(){y(t,"class","text-xs leading-4 font-medium"),y(l,"type","button"),y(l,"class","w-full flex justify-between items-center px-1 py-0.5 text-xs leading-4 font-medium rounded border border-gray-300 text-gray-700 bg-gray-50 hover:bg-gray-100"),Ie(l,"mb-1",o[0])},m(_,b){j(_,e,b),v(e,l),v(l,t),v(t,s),v(l,r),G(n,l,null),v(e,i),p&&p.m(e,null),a=!0,f||(u=Te(l,"click",o[7]),f=!0)},p(_,b){const d={};b&1&&(d.src=_[0]?Ue:Je),n.$set(d),b&1&&Ie(l,"mb-1",_[0]),_[0]?p?p.p(_,b):(p=ll(_),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(_){a||(k(n.$$.fragment,_),a=!0)},o(_){w(n.$$.fragment,_),a=!1},d(_){_&&g(e),B(n),p&&p.d(),f=!1,u()}}}function ll(o){var s,r;let e,l=(r=(s=o[2])==null?void 0:s.custom_var_names)!=null?r:[],t=[];for(let n=0;n<l.length;n+=1)t[n]=nl(el(o,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=C(n,"DIV",{class:!0});var i=O(e);for(let a=0;a<t.length;a+=1)t[a].l(i);i.forEach(g),this.h()},h(){y(e,"class","grid grid-cols-2 px-2 py-1.5 gap-y-1 items-center text-xs shadow-sm rounded border border-gray-300 text-gray-700 bg-gray-50")},m(n,i){j(n,e,i);for(let a=0;a<t.length;a+=1)t[a].m(e,null)},p(n,i){var a,f;if(i&28){l=(f=(a=n[2])==null?void 0:a.custom_var_names)!=null?f:[];let u;for(u=0;u<l.length;u+=1){const p=el(n,l,u);t[u]?t[u].p(p,i):(t[u]=nl(p),t[u].c(),t[u].m(e,null))}for(;u<t.length;u+=1)t[u].d(1);t.length=l.length}},d(n){n&&g(e),Ce(t,n)}}}function nl(o){var Z,se,ue,ce;let e,l,t,s=o[9]+"",r,n,i,a,f,u,p=((Z=o[3][o[9]])!=null?Z:"(not set)")+"",_,b,d,m,h,$,c,E=((ce=(ue=(se=o[2])==null?void 0:se.custom_vars)==null?void 0:ue[o[9]])!=null?ce:"(not set)")+"",J,N,A,V,q,H,K,I,W,U,F;function ee(){o[8].call(I,o[9])}return{c(){e=S("hr"),l=D(),t=S("h3"),r=z(s),n=D(),i=S("p"),a=z("Instance Default:"),f=D(),u=S("p"),_=z(p),d=D(),m=S("p"),h=z("Target Default:"),$=D(),c=S("p"),J=z(E),A=D(),V=S("label"),q=z("Value:"),K=D(),I=S("input"),this.h()},l(T){e=C(T,"HR",{class:!0}),l=R(T),t=C(T,"H3",{class:!0});var X=O(t);r=Q(X,s),X.forEach(g),n=R(T),i=C(T,"P",{class:!0});var ie=O(i);a=Q(ie,"Instance Default:"),ie.forEach(g),f=R(T),u=C(T,"P",{class:!0});var pe=O(u);_=Q(pe,p),pe.forEach(g),d=R(T),m=C(T,"P",{class:!0});var ae=O(m);h=Q(ae,"Target Default:"),ae.forEach(g),$=R(T),c=C(T,"P",{class:!0});var fe=O(c);J=Q(fe,E),fe.forEach(g),A=R(T),V=C(T,"LABEL",{for:!0,class:!0});var oe=O(V);q=Q(oe,"Value:"),oe.forEach(g),K=R(T),I=C(T,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),this.h()},h(){var T,X;y(e,"class","col-span-2 mt-1.5 mb-1 border-gray-300"),Ie(e,"hidden",o[11]<=0),y(t,"class","col-span-2 pb-0.5 font-mono font-bold"),y(i,"class","font-medium"),y(u,"class",b=""+((typeof o[3][o[9]]!="string"?"text-gray-500":"")+" font-mono text-2xs")),y(m,"class","font-medium"),y(c,"class",N=""+((typeof((X=(T=o[2])==null?void 0:T.custom_vars)==null?void 0:X[o[9]])!="string"?"text-gray-500":"")+" font-mono text-2xs")),y(V,"for",H=o[9]),y(V,"class","font-medium"),y(I,"id",W=o[9]),y(I,"type","text"),y(I,"placeholder","(not set)"),y(I,"class","block w-full px-1.5 py-1 leading-tight text-2xs rounded shadow-inner border-gray-300 focus:outline-none focus:border-blue-500 focus:ring-blue-500")},m(T,X){j(T,e,X),j(T,l,X),j(T,t,X),v(t,r),j(T,n,X),j(T,i,X),v(i,a),j(T,f,X),j(T,u,X),v(u,_),j(T,d,X),j(T,m,X),v(m,h),j(T,$,X),j(T,c,X),v(c,J),j(T,A,X),j(T,V,X),v(V,q),j(T,K,X),j(T,I,X),Qe(I,o[4][o[9]]),U||(F=Te(I,"input",ee),U=!0)},p(T,X){var ie,pe,ae,fe,oe,we;o=T,X&4&&s!==(s=o[9]+"")&&ne(r,s),X&12&&p!==(p=((ie=o[3][o[9]])!=null?ie:"(not set)")+"")&&ne(_,p),X&12&&b!==(b=""+((typeof o[3][o[9]]!="string"?"text-gray-500":"")+" font-mono text-2xs"))&&y(u,"class",b),X&4&&E!==(E=((fe=(ae=(pe=o[2])==null?void 0:pe.custom_vars)==null?void 0:ae[o[9]])!=null?fe:"(not set)")+"")&&ne(J,E),X&4&&N!==(N=""+((typeof((we=(oe=o[2])==null?void 0:oe.custom_vars)==null?void 0:we[o[9]])!="string"?"text-gray-500":"")+" font-mono text-2xs"))&&y(c,"class",N),X&4&&H!==(H=o[9])&&y(V,"for",H),X&4&&W!==(W=o[9])&&y(I,"id",W),X&20&&I.value!==o[4][o[9]]&&Qe(I,o[4][o[9]])},d(T){T&&g(e),T&&g(l),T&&g(t),T&&g(n),T&&g(i),T&&g(f),T&&g(u),T&&g(d),T&&g(m),T&&g($),T&&g(c),T&&g(A),T&&g(V),T&&g(K),T&&g(I),U=!1,F()}}}function Qn(o){var s,r;let e,l,t=typeof o[5]!="undefined"&&((r=(s=o[2])==null?void 0:s.custom_var_names)==null?void 0:r.length)&&tl(o);return{c(){t&&t.c(),e=Y()},l(n){t&&t.l(n),e=Y()},m(n,i){t&&t.m(n,i),j(n,e,i),l=!0},p(n,[i]){var a,f;typeof n[5]!="undefined"&&((f=(a=n[2])==null?void 0:a.custom_var_names)==null?void 0:f.length)?t?(t.p(n,i),i&4&&k(t,1)):(t=tl(n),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(te(),w(t,1,1,()=>{t=null}),le())},i(n){l||(k(t),l=!0)},o(n){w(t),l=!1},d(n){t&&t.d(n),n&&g(e)}}}function Kn(o,e,l){let t,s,r,n=Se,i=()=>(n(),n=jt(u,d=>l(4,r=d)),u);re(o,un,d=>l(3,s=d)),o.$$.on_destroy.push(()=>n());let{lane:a}=e,{expanded:f=!0}=e,{variables:u}=e;i();const p=wt(cn,d=>d==null?void 0:d.filter(m=>(m==null?void 0:m.lane)===(a==null?void 0:a.name)).find(m=>m.type==="cluster"));re(o,p,d=>l(2,t=d));const _=()=>{l(0,f=!f)};function b(d){r[d]=this.value,u.set(r)}return o.$$set=d=>{"lane"in d&&l(6,a=d.lane),"expanded"in d&&l(0,f=d.expanded),"variables"in d&&i(l(1,u=d.variables))},[f,u,t,s,r,p,a,_,b]}class Xn extends je{constructor(e){super();Ee(this,e,Kn,Qn,ye,{lane:6,expanded:0,variables:1})}}function sl(o){let e,l=Rt.sanitize(Vt(o[0].description))+"",t,s;return{c(){e=S("div"),t=D(),s=S("hr"),this.h()},l(r){e=C(r,"DIV",{class:!0});var n=O(e);n.forEach(g),t=R(r),s=C(r,"HR",{class:!0}),this.h()},h(){y(e,"class","p-1 prose prose-xs prose-invert text-xs break-words"),y(s,"class","w-full h-px border-t border-dotted border-gray-400 my-1.5")},m(r,n){j(r,e,n),e.innerHTML=l,j(r,t,n),j(r,s,n)},p(r,n){n&1&&l!==(l=Rt.sanitize(Vt(r[0].description))+"")&&(e.innerHTML=l)},d(r){r&&g(e),r&&g(t),r&&g(s)}}}function Yn(o){var a;let e,l,t,s,r,n=((a=o[1][o[0].createdBy])!=null?a:o[0].createdBy)+"",i;return{c(){e=S("div"),l=S("h4"),t=z("Created By:"),s=D(),r=S("p"),i=z(n),this.h()},l(f){e=C(f,"DIV",{});var u=O(e);l=C(u,"H4",{class:!0});var p=O(l);t=Q(p,"Created By:"),p.forEach(g),s=R(u),r=C(u,"P",{class:!0});var _=O(r);i=Q(_,n),_.forEach(g),u.forEach(g),this.h()},h(){y(l,"class","text-xs font-semibold text-gray-700"),y(r,"class","text-xs italic")},m(f,u){j(f,e,u),v(e,l),v(l,t),v(e,s),v(e,r),v(r,i)},p(f,u){var p;u&3&&n!==(n=((p=f[1][f[0].createdBy])!=null?p:f[0].createdBy)+"")&&ne(i,n)},d(f){f&&g(e)}}}function Zn(o){let e,l;return{c(){e=S("p"),l=z("CryoSPARC Reference Workflow"),this.h()},l(t){e=C(t,"P",{class:!0});var s=O(e);l=Q(s,"CryoSPARC Reference Workflow"),s.forEach(g),this.h()},h(){y(e,"class","text-xs font-semibold text-indigo-700")},m(t,s){j(t,e,s),v(e,l)},p:Se,d(t){t&&g(e)}}}function ol(o){let e,l,t,s;return{c(){e=S("hr"),l=D(),t=S("p"),s=z("Imported Workflow"),this.h()},l(r){e=C(r,"HR",{class:!0}),l=R(r),t=C(r,"P",{class:!0});var n=O(t);s=Q(n,"Imported Workflow"),n.forEach(g),this.h()},h(){y(e,"class","w-full h-px border-t border-dotted border-gray-400 my-1.5"),y(t,"class","text-xs italic font-semibold text-indigo-700")},m(r,n){j(r,e,n),j(r,l,n),j(r,t,n),v(t,s)},d(r){r&&g(e),r&&g(l),r&&g(t)}}}function xn(o){var $;let e,l,t,s,r,n,i,a=o[0].csVersion+"",f,u,p,_=o[0].description.length&&sl(o);function b(c,E){var J;return((J=c[0])==null?void 0:J.reference)===!0?Zn:Yn}let d=b(o),m=d(o),h=(($=o[0])==null?void 0:$.imported)&&ol();return{c(){_&&_.c(),e=D(),m.c(),l=D(),t=S("div"),s=S("h4"),r=z("CryoSPARC Version:"),n=D(),i=S("p"),f=z(a),u=D(),h&&h.c(),p=Y(),this.h()},l(c){_&&_.l(c),e=R(c),m.l(c),l=R(c),t=C(c,"DIV",{});var E=O(t);s=C(E,"H4",{class:!0});var J=O(s);r=Q(J,"CryoSPARC Version:"),J.forEach(g),n=R(E),i=C(E,"P",{class:!0});var N=O(i);f=Q(N,a),N.forEach(g),E.forEach(g),u=R(c),h&&h.l(c),p=Y(),this.h()},h(){y(s,"class","text-xs font-semibold text-gray-700"),y(i,"class","text-xs italic")},m(c,E){_&&_.m(c,E),j(c,e,E),m.m(c,E),j(c,l,E),j(c,t,E),v(t,s),v(s,r),v(t,n),v(t,i),v(i,f),j(c,u,E),h&&h.m(c,E),j(c,p,E)},p(c,E){var J;c[0].description.length?_?_.p(c,E):(_=sl(c),_.c(),_.m(e.parentNode,e)):_&&(_.d(1),_=null),d===(d=b(c))&&m?m.p(c,E):(m.d(1),m=d(c),m&&(m.c(),m.m(l.parentNode,l))),E&1&&a!==(a=c[0].csVersion+"")&&ne(f,a),((J=c[0])==null?void 0:J.imported)?h||(h=ol(),h.c(),h.m(p.parentNode,p)):h&&(h.d(1),h=null)},d(c){_&&_.d(c),c&&g(e),m.d(c),c&&g(l),c&&g(t),c&&g(u),h&&h.d(c),c&&g(p)}}}function es(o){let e,l;return e=new ft({props:{title:"Details",expanded:!1,intent:"info",$$slots:{default:[xn]},$$scope:{ctx:o}}}),{c(){L(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){G(e,t,s),l=!0},p(t,[s]){const r={};s&7&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ts(o,e,l){let t;re(o,pn,r=>l(1,t=r));let{workflow:s}=e;return o.$$set=r=>{"workflow"in r&&l(0,s=r.workflow)},[s,t]}class ls extends je{constructor(e){super();Ee(this,e,ts,es,ye,{workflow:0})}}const ns=o=>({parameters:o&2}),rl=o=>({parameters:o[1]});function ss(o){let e;const l=o[7].default,t=xe(l,o,o[10],rl);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,r){t&&t.m(s,r),e=!0},p(s,r){t&&t.p&&(!e||r&1026)&&et(t,l,s,s[10],e?lt(l,s[10],r,ns):tt(s[10]),rl)},i(s){e||(k(t,s),e=!0)},o(s){w(t,s),e=!1},d(s){t&&t.d(s)}}}function os(o){let e,l,t,s;function r(a){o[8](a)}function n(a){o[9](a)}let i={title:o[0],$$slots:{default:[ss]},$$scope:{ctx:o}};return o[2]!==void 0&&(i.expanded=o[2]),o[3]!==void 0&&(i.render=o[3]),e=new jn({props:i}),ge.push(()=>ke(e,"expanded",r)),ge.push(()=>ke(e,"render",n)),{c(){L(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,f){G(e,a,f),s=!0},p(a,[f]){const u={};f&1&&(u.title=a[0]),f&1026&&(u.$$scope={dirty:f,ctx:a}),!l&&f&4&&(l=!0,u.expanded=a[2],ve(()=>l=!1)),!t&&f&8&&(t=!0,u.render=a[3],ve(()=>t=!1)),e.$set(u)},i(a){s||(k(e.$$.fragment,a),s=!0)},o(a){w(e.$$.fragment,a),s=!1},d(a){B(e,a)}}}function rs(o,e,l){let t,s,r,{$$slots:n={},$$scope:i}=e,{name:a}=e,{title:f}=e;const{templateParameters:u,mergedParameters:p}=Ke("parameters");re(o,p,m=>l(6,r=m));let _=!0;function b(m){_=m,l(2,_)}function d(m){s=m,l(3,s),l(1,t),l(6,r),l(5,a)}return o.$$set=m=>{"name"in m&&l(5,a=m.name),"title"in m&&l(0,f=m.title),"$$scope"in m&&l(10,i=m.$$scope)},o.$$.update=()=>{o.$$.dirty&96&&l(1,t=Object.entries(u!=null?u:{}).map(([m,h])=>[m,de(de({},r==null?void 0:r[m]),h)]).filter(([m,h])=>h.section===a&&!(h.value===null&&!h.visible&&!h.locked)).sort((m,h)=>m[1].flagged&&!h[1].flagged?-1:!m[1].flagged&&h[1].flagged?1:m[1].order-h[1].order)),o.$$.dirty&2&&l(3,s=!!(t==null?void 0:t.length))},[f,t,_,s,p,a,r,n,b,d,i]}class is extends je{constructor(e){super();Ee(this,e,rs,os,ye,{name:5,title:0})}}function il(o){let e,l;const t=[o[8],{id:o[0]},{name:o[1]},{parameter:o[2]},{status:o[5]},{class:o[4]},{readonly:o[2].locked},{parameterDefault:"spec"}];let s={$$slots:{icon:[as]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)s=Re(s,t[r]);return e=new En({props:s}),e.$on("set",o[11]),{c(){L(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,n){G(e,r,n),l=!0},p(r,n){const i=n&311?Et(t,[n&256&&Bl(r[8]),n&1&&{id:r[0]},n&2&&{name:r[1]},n&4&&{parameter:r[2]},n&32&&{status:r[5]},n&16&&{class:r[4]},n&4&&{readonly:r[2].locked},t[7]]):{};n&16396&&(i.$$scope={dirty:n,ctx:r}),e.$set(i)},i(r){l||(k(e.$$.fragment,r),l=!0)},o(r){w(e.$$.fragment,r),l=!1},d(r){B(e,r)}}}function al(o){let e,l,t,s,r,n;return l=new he({props:{src:At,size:4,modifier:o[3]?"text-green-600":" text-orange-500"}}),{c(){e=S("span"),L(l.$$.fragment),this.h()},l(i){e=C(i,"SPAN",{class:!0});var a=O(e);M(l.$$.fragment,a),a.forEach(g),this.h()},h(){y(e,"class","cursor-help")},m(i,a){j(i,e,a),G(l,e,null),s=!0,r||(n=Oe(t=Ae.call(null,e,{content:"Flagged Parameter"})),r=!0)},p(i,a){const f={};a&8&&(f.modifier=i[3]?"text-green-600":" text-orange-500"),l.$set(f)},i(i){s||(k(l.$$.fragment,i),s=!0)},o(i){w(l.$$.fragment,i),s=!1},d(i){i&&g(e),B(l),r=!1,n()}}}function fl(o){let e,l,t,s,r,n;return l=new he({props:{src:Tt,size:4,type:"solid",modifier:"stroke-2 text-blue-500"}}),{c(){e=S("span"),L(l.$$.fragment),this.h()},l(i){e=C(i,"SPAN",{class:!0});var a=O(e);M(l.$$.fragment,a),a.forEach(g),this.h()},h(){y(e,"class","cursor-help")},m(i,a){j(i,e,a),G(l,e,null),s=!0,r||(n=Oe(t=Ae.call(null,e,{component:Dt,componentProps:{notes:o[2].notes},interactive:!0,classOverride:"border border-gray-400 bg-white"})),r=!0)},p(i,a){t&&ze(t.update)&&a&4&&t.update.call(null,{component:Dt,componentProps:{notes:i[2].notes},interactive:!0,classOverride:"border border-gray-400 bg-white"})},i(i){s||(k(l.$$.fragment,i),s=!0)},o(i){w(l.$$.fragment,i),s=!1},d(i){i&&g(e),B(l),r=!1,n()}}}function as(o){let e,l,t,s=o[2].flagged&&al(o),r=o[2].notes&&fl(o);return{c(){e=S("div"),s&&s.c(),l=D(),r&&r.c(),this.h()},l(n){e=C(n,"DIV",{slot:!0,class:!0});var i=O(e);s&&s.l(i),l=R(i),r&&r.l(i),i.forEach(g),this.h()},h(){y(e,"slot","icon"),y(e,"class","flex gap-x-1 ml-2")},m(n,i){j(n,e,i),s&&s.m(e,null),v(e,l),r&&r.m(e,null),t=!0},p(n,i){n[2].flagged?s?(s.p(n,i),i&4&&k(s,1)):(s=al(n),s.c(),k(s,1),s.m(e,l)):s&&(te(),w(s,1,1,()=>{s=null}),le()),n[2].notes?r?(r.p(n,i),i&4&&k(r,1)):(r=fl(n),r.c(),k(r,1),r.m(e,null)):r&&(te(),w(r,1,1,()=>{r=null}),le())},i(n){t||(k(s),k(r),t=!0)},o(n){w(s),w(r),t=!1},d(n){n&&g(e),s&&s.d(),r&&r.d()}}}function fs(o){var r;let e=Object.keys((r=o[2])!=null?r:{}).length,l,t,s=e&&il(o);return{c(){s&&s.c(),l=Y()},l(n){s&&s.l(n),l=Y()},m(n,i){s&&s.m(n,i),j(n,l,i),t=!0},p(n,[i]){var a;i&4&&(e=Object.keys((a=n[2])!=null?a:{}).length),e?s?(s.p(n,i),i&4&&k(s,1)):(s=il(n),s.c(),k(s,1),s.m(l.parentNode,l)):s&&(te(),w(s,1,1,()=>{s=null}),le())},i(n){t||(k(s),t=!0)},o(n){w(s),t=!1},d(n){s&&s.d(n),n&&g(l)}}}function us(o,e,l){let t,s,r,n;const i=["id","name"];let a=Xe(e,i),f,u,{id:p}=e,{name:_}=e;const{templateParameters:b,mergedParameters:d,updatedParameters:m}=Ke("parameters");re(o,d,c=>l(12,u=c)),re(o,m,c=>l(10,f=c));let h;nt(()=>{const c=u==null?void 0:u[_],E=f==null?void 0:f[_];l(2,h=de(de({},c),E))});function $(c){Ye.call(this,o,c)}return o.$$set=c=>{e=Re(Re({},e),yt(c)),l(8,a=Xe(e,i)),"id"in c&&l(0,p=c.id),"name"in c&&l(1,_=c.name)},o.$$.update=()=>{var c,E;o.$$.dirty&1026&&l(9,t=(c=f==null?void 0:f[_])==null?void 0:c.value),o.$$.dirty&514&&l(3,s=t!=null&&((E=b==null?void 0:b[_])==null?void 0:E.value)!==t),o.$$.dirty&8&&l(5,r=s?"updated":"default"),o.$$.dirty&12&&l(4,n=(h==null?void 0:h.flagged)?`p-1 pb-1.5 shadow-sm rounded-md border ${s?"bg-green-50 border-green-400":"bg-orange-100 border-orange-300"}`:"px-1")},[p,_,h,s,n,r,d,m,a,t,f,$]}class cs extends je{constructor(e){super();Ee(this,e,us,fs,ye,{id:0,name:1})}}function ul(o,e,l){const t=o.slice();return t[19]=e[l][0],t[20]=e[l][1],t}function cl(o,e,l){const t=o.slice();t[23]=e[l];const s=t[1].some(r=>{const[n,i]=r.split("-");return n===t[19]&&i===t[23]});return t[24]=s,t}function pl(o){let e,l,t,s,r,n,i,a,f=o[1].length+"",u,p,_,b,d,m,h,$,c,E,J,N,A,V,q;t=new he({props:{src:At}}),m=new he({props:{src:o[4]?Ue:Je,type:"outline",size:4,modifier:"stroke-2"}});function H(U){o[13](U)}function K(U){o[14](U)}function I(U){o[15](U)}let W={$$slots:{default:[_s]},$$scope:{ctx:o}};return o[2]!==void 0&&(W.handleShowMenu=o[2]),o[3]!==void 0&&(W.closeMenu=o[3]),o[4]!==void 0&&(W.menuIsOpen=o[4]),c=new kn({props:W}),ge.push(()=>ke(c,"handleShowMenu",H)),ge.push(()=>ke(c,"closeMenu",K)),ge.push(()=>ke(c,"menuIsOpen",I)),{c(){e=S("div"),l=S("button"),L(t.$$.fragment),s=D(),r=S("span"),n=z("Flagged"),i=D(),a=S("div"),u=z(f),p=z("/"),_=z(o[5]),d=D(),L(m.$$.fragment),$=D(),L(c.$$.fragment),this.h()},l(U){e=C(U,"DIV",{class:!0});var F=O(e);l=C(F,"BUTTON",{class:!0});var ee=O(l);M(t.$$.fragment,ee),s=R(ee),r=C(ee,"SPAN",{});var Z=O(r);n=Q(Z,"Flagged"),Z.forEach(g),i=R(ee),a=C(ee,"DIV",{class:!0});var se=O(a);u=Q(se,f),p=Q(se,"/"),_=Q(se,o[5]),se.forEach(g),d=R(ee),M(m.$$.fragment,ee),ee.forEach(g),F.forEach(g),$=R(U),M(c.$$.fragment,U),this.h()},h(){y(a,"class",b=""+((o[1].length===o[5]?"bg-green-500":"bg-orange-500")+" px-1.5 py-0.5 text-xs font-semibold rounded text-white")),y(l,"class",h=""+((o[1].length===o[5]?"text-green-700 border-green-500 bg-green-50 hover:bg-green-100":"text-orange-700 border-orange-500 bg-orange-50 hover:bg-orange-100")+" inline-flex justify-center items-center gap-x-1.5 px-2.5 py-1.5 rounded-md shadow-sm text-sm font-medium border focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500 disabled:opacity-65 disabled:cursor-not-allowed")),y(e,"class","mr-auto")},m(U,F){j(U,e,F),v(e,l),G(t,l,null),v(l,s),v(l,r),v(r,n),v(l,i),v(l,a),v(a,u),v(a,p),v(a,_),v(l,d),G(m,l,null),j(U,$,F),G(c,U,F),A=!0,V||(q=Te(l,"click",function(){ze(o[2])&&o[2].apply(this,arguments)}),V=!0)},p(U,F){o=U,(!A||F&2)&&f!==(f=o[1].length+"")&&ne(u,f),(!A||F&32)&&ne(_,o[5]),(!A||F&34&&b!==(b=""+((o[1].length===o[5]?"bg-green-500":"bg-orange-500")+" px-1.5 py-0.5 text-xs font-semibold rounded text-white")))&&y(a,"class",b);const ee={};F&16&&(ee.src=o[4]?Ue:Je),m.$set(ee),(!A||F&34&&h!==(h=""+((o[1].length===o[5]?"text-green-700 border-green-500 bg-green-50 hover:bg-green-100":"text-orange-700 border-orange-500 bg-orange-50 hover:bg-orange-100")+" inline-flex justify-center items-center gap-x-1.5 px-2.5 py-1.5 rounded-md shadow-sm text-sm font-medium border focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500 disabled:opacity-65 disabled:cursor-not-allowed")))&&y(l,"class",h);const Z={};F&134217731&&(Z.$$scope={dirty:F,ctx:o}),!E&&F&4&&(E=!0,Z.handleShowMenu=o[2],ve(()=>E=!1)),!J&&F&8&&(J=!0,Z.closeMenu=o[3],ve(()=>J=!1)),!N&&F&16&&(N=!0,Z.menuIsOpen=o[4],ve(()=>N=!1)),c.$set(Z)},i(U){A||(k(t.$$.fragment,U),k(m.$$.fragment,U),k(c.$$.fragment,U),A=!0)},o(U){w(t.$$.fragment,U),w(m.$$.fragment,U),w(c.$$.fragment,U),A=!1},d(U){U&&g(e),B(t),B(m),U&&g($),B(c,U),V=!1,q()}}}function ps(o){let e=o[9](o[19],o[23])+"",l;return{c(){l=z(e)},l(t){l=Q(t,e)},m(t,s){j(t,l,s)},p(t,s){s&1&&e!==(e=t[9](t[19],t[23])+"")&&ne(l,e)},d(t){t&&g(l)}}}function ms(o){let e,l;return e=new he({props:{src:Vn,type:o[24]?"solid":"outline",modifier:o[24]?"text-green-600":"stroke-2 text-gray-300"}}),{c(){L(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){G(e,t,s),l=!0},p(t,s){const r={};s&3&&(r.type=t[24]?"solid":"outline"),s&3&&(r.modifier=t[24]?"text-green-600":"stroke-2 text-gray-300"),e.$set(r)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ml(o){let e,l;function t(){return o[12](o[19])}return e=new wn({props:{$$slots:{icon:[ms],default:[ps]},$$scope:{ctx:o}}}),e.$on("click",t),{c(){L(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,r){G(e,s,r),l=!0},p(s,r){o=s;const n={};r&134217731&&(n.$$scope={dirty:r,ctx:o}),e.$set(n)},i(s){l||(k(e.$$.fragment,s),l=!0)},o(s){w(e.$$.fragment,s),l=!1},d(s){B(e,s)}}}function ds(o){let e,l,t=o[20],s=[];for(let n=0;n<t.length;n+=1)s[n]=ml(cl(o,t,n));const r=n=>w(s[n],1,1,()=>{s[n]=null});return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=D()},l(n){for(let i=0;i<s.length;i+=1)s[i].l(n);e=R(n)},m(n,i){for(let a=0;a<s.length;a+=1)s[a].m(n,i);j(n,e,i),l=!0},p(n,i){if(i&1539){t=n[20];let a;for(a=0;a<t.length;a+=1){const f=cl(n,t,a);s[a]?(s[a].p(f,i),k(s[a],1)):(s[a]=ml(f),s[a].c(),k(s[a],1),s[a].m(e.parentNode,e))}for(te(),a=t.length;a<s.length;a+=1)r(a);le()}},i(n){if(!l){for(let i=0;i<t.length;i+=1)k(s[i]);l=!0}},o(n){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)w(s[i]);l=!1},d(n){Ce(s,n),n&&g(e)}}}function dl(o){let e,l;return e=new vn({props:{title:""+(o[19]+": "+o[8](o[19])),$$slots:{default:[ds]},$$scope:{ctx:o}}}),{c(){L(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){G(e,t,s),l=!0},p(t,s){const r={};s&1&&(r.title=""+(t[19]+": "+t[8](t[19]))),s&134217731&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function _s(o){let e,l,t=Object.entries(o[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=dl(ul(o,t,n));const r=n=>w(s[n],1,1,()=>{s[n]=null});return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Y()},l(n){for(let i=0;i<s.length;i+=1)s[i].l(n);e=Y()},m(n,i){for(let a=0;a<s.length;a+=1)s[a].m(n,i);j(n,e,i),l=!0},p(n,i){if(i&1795){t=Object.entries(n[0]);let a;for(a=0;a<t.length;a+=1){const f=ul(n,t,a);s[a]?(s[a].p(f,i),k(s[a],1)):(s[a]=dl(f),s[a].c(),k(s[a],1),s[a].m(e.parentNode,e))}for(te(),a=t.length;a<s.length;a+=1)r(a);le()}},i(n){if(!l){for(let i=0;i<t.length;i+=1)k(s[i]);l=!0}},o(n){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)w(s[i]);l=!1},d(n){Ce(s,n),n&&g(e)}}}function gs(o){let e,l,t=o[5]&&pl(o);return{c(){t&&t.c(),e=Y()},l(s){t&&t.l(s),e=Y()},m(s,r){t&&t.m(s,r),j(s,e,r),l=!0},p(s,[r]){s[5]?t?(t.p(s,r),r&32&&k(t,1)):(t=pl(s),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(te(),w(t,1,1,()=>{t=null}),le())},i(s){l||(k(t),l=!0)},o(s){w(t),l=!1},d(s){t&&t.d(s),s&&g(e)}}}function hs(o,e,l){let t,s,r,n;re(o,Ve,A=>l(18,n=A));let{jobs:i}=e;const{bus:a}=Ke("bus:workflow");re(o,a,A=>l(17,r=A));const{updates:f}=Ke("workflow");re(o,f,A=>l(16,s=A));const u={};let p=[],_,b,d=!1;const m=A=>{var V,q;return(q=(V=n[i[A].jobType])==null?void 0:V.title)!=null?q:""},h=(A,V)=>{var q,H,K,I,W;return(W=(I=(K=(H=n==null?void 0:n[(q=i==null?void 0:i[A])==null?void 0:q.jobType])==null?void 0:H.baseParams)==null?void 0:K[V])==null?void 0:I.title)!=null?W:V},$=A=>{b(),Wl().then(()=>{r.dispatchEvent(new CustomEvent("select:job",{detail:{id:A}}))})};Hl(()=>{if(!t)return;const A=Object.entries(s);l(1,p=[]);for(let V=0;V<A.length;V++){const[q,H]=A[V];if(!u[q])continue;const{parameters:K}=H;if(!K)continue;const I=Object.entries(K);for(let W=0;W<I.length;W++){const[U]=I[W],F=`${q}-${U}`;!u[q].includes(U)||p.includes(F)||l(1,p=[...p,F])}}}),nt(()=>{const A=Object.entries(i);for(let V=0;V<A.length;V++){const[q,H]=A[V],{parameters:K}=H,I=Object.entries(K);for(let W=0;W<I.length;W++){const[U,F]=I[W];(F==null?void 0:F.flagged)&&(u[q]||l(0,u[q]=[],u),u[q].includes(U)||u[q].push(U))}}});const c=A=>$(A);function E(A){_=A,l(2,_)}function J(A){b=A,l(3,b)}function N(A){d=A,l(4,d)}return o.$$set=A=>{"jobs"in A&&l(11,i=A.jobs)},o.$$.update=()=>{o.$$.dirty&1&&l(5,t=Object.values(u).reduce((A,V)=>A+V.length,0))},[u,p,_,b,d,t,a,f,m,h,$,i,c,E,J,N]}class bs extends je{constructor(e){super();Ee(this,e,hs,gs,ye,{jobs:11})}}function $s(o){let e,l,t,s,r,n,i=[o[7],{readOnly:o[3]},{id:o[2]},{tabindex:l=o[3]?-1:0},{name:o[2]},{class:t=""+(o[6]+" "+o[4]+" block w-full pl-2 py-1 text-xs rounded shadow-inner focus:outline-none focus:ring-2 focus:z-1")}],a={};for(let f=0;f<i.length;f+=1)a=Re(a,i[f]);return{c(){e=S("textarea"),this.h()},l(f){e=C(f,"TEXTAREA",{id:!0,tabindex:!0,name:!0,class:!0}),O(e).forEach(g),this.h()},h(){St(e,a)},m(f,u){j(f,e,u),e.autofocus&&e.focus(),o[12](e),Qe(e,o[1]),r||(n=[Te(e,"input",o[13]),Oe(s=Ae.call(null,e,{content:o[5],placement:"left",interactive:!0,delay:[450,0]})),Te(e,"keydown",o[9]),Te(e,"keyup",o[10]),Te(e,"click",o[11])],r=!0)},p(f,[u]){St(e,a=Et(i,[u&128&&f[7],u&8&&{readOnly:f[3]},u&4&&{id:f[2]},u&8&&l!==(l=f[3]?-1:0)&&{tabindex:l},u&4&&{name:f[2]},u&80&&t!==(t=""+(f[6]+" "+f[4]+" block w-full pl-2 py-1 text-xs rounded shadow-inner focus:outline-none focus:ring-2 focus:z-1"))&&{class:t}])),u&2&&Qe(e,f[1]),s&&ze(s.update)&&u&32&&s.update.call(null,{content:f[5],placement:"left",interactive:!0,delay:[450,0]})},i:Se,o:Se,d(f){f&&g(e),o[12](null),r=!1,Fl(n)}}}function ks(o,e,l){let t;const s=["node","id","value","readonly","status","class","tooltip"];let r=Xe(e,s),{node:n=null}=e,{id:i=Ze()}=e,{value:a}=e,{readonly:f=!1}=e,{status:u="default"}=e,{class:p=""}=e,{tooltip:_=""}=e;function b(c){Ye.call(this,o,c)}function d(c){Ye.call(this,o,c)}function m(c){Ye.call(this,o,c)}function h(c){ge[c?"unshift":"push"](()=>{n=c,l(0,n)})}function $(){a=this.value,l(1,a)}return o.$$set=c=>{e=Re(Re({},e),yt(c)),l(7,r=Xe(e,s)),"node"in c&&l(0,n=c.node),"id"in c&&l(2,i=c.id),"value"in c&&l(1,a=c.value),"readonly"in c&&l(3,f=c.readonly),"status"in c&&l(8,u=c.status),"class"in c&&l(4,p=c.class),"tooltip"in c&&l(5,_=c.tooltip)},o.$$.update=()=>{o.$$.dirty&256&&l(6,t=u==="updated"?"border-green-500 focus:ring-green-500":"border-gray-300 focus:ring-blue-500")},[n,a,i,f,p,_,t,r,u,b,d,m,h,$]}class vs extends je{constructor(e){super();Ee(this,e,ks,$s,ye,{node:0,id:2,value:1,readonly:3,status:8,class:4,tooltip:5})}}function _l(o,e,l){var n;const t=o.slice();t[43]=e[l][0],t[44]=e[l][1];const s=(n=t[5])==null?void 0:n[t[44].jobType];t[45]=s;const r=!!Object.keys(t[44].parameters).length;return t[46]=r,t}function gl(o,e,l){const t=o.slice();return t[50]=e[l][0],t[51]=e[l][1],t}function hl(o,e,l){const t=o.slice();return t[55]=e[l][0],t}function bl(o,e,l){const t=o.slice();return t[2]=e[l],t}function ws(o){var i,a;let e,l,t,s=((a=(i=o[0])==null?void 0:i.title)!=null?a:"Apply Workflow")+"",r,n;return l=new he({props:{src:$n,type:"outline",modifier:"stroke-2"}}),{c(){e=S("span"),L(l.$$.fragment),t=D(),r=z(s),this.h()},l(f){e=C(f,"SPAN",{class:!0});var u=O(e);M(l.$$.fragment,u),u.forEach(g),t=R(f),r=Q(f,s),this.h()},h(){y(e,"class","p-0.5 mr-2.5 font-semibold rounded text-purple-600 bg-purple-200")},m(f,u){j(f,e,u),G(l,e,null),j(f,t,u),j(f,r,u),n=!0},p(f,u){var p,_;(!n||u[0]&1)&&s!==(s=((_=(p=f[0])==null?void 0:p.title)!=null?_:"Apply Workflow")+"")&&ne(r,s)},i(f){n||(k(l.$$.fragment,f),n=!0)},o(f){w(l.$$.fragment,f),n=!1},d(f){f&&g(e),B(l),f&&g(t),f&&g(r)}}}function $l(o){let e,l;return e=new Tn({props:{deprecated:o[6]}}),{c(){L(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){G(e,t,s),l=!0},p(t,s){const r={};s[0]&64&&(r.deprecated=t[6]),e.$set(r)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function kl(o){let e,l;return e=new Hn({props:{parents:o[0].parents,parentConnections:o[4]}}),{c(){L(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){G(e,t,s),l=!0},p(t,s){const r={};s[0]&1&&(r.parents=t[0].parents),s[0]&16&&(r.parentConnections=t[4]),e.$set(r)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function js(o){let e,l,t;function s(n){o[27](n)}let r={id:o[43]};return o[8]!==void 0&&(r.value=o[8]),e=new Nt({props:r}),ge.push(()=>ke(e,"value",s)),{c(){L(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,i){G(e,n,i),t=!0},p(n,i){const a={};i[1]&4096&&(a.id=n[43]),!l&&i[0]&256&&(l=!0,a.value=n[8],ve(()=>l=!1)),e.$set(a)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function vl(o){let e,l=o[2].name+"",t,s;return{c(){e=S("option"),t=z(l),this.h()},l(r){e=C(r,"OPTION",{});var n=O(e);t=Q(n,l),n.forEach(g),this.h()},h(){e.__value=s=o[2].name,e.value=e.__value},m(r,n){j(r,e,n),v(e,t)},p(r,n){n[0]&2&&l!==(l=r[2].name+"")&&ne(t,l),n[0]&2&&s!==(s=r[2].name)&&(e.__value=s,e.value=e.__value)},d(r){r&&g(e)}}}function Es(o){let e,l=o[1],t=[];for(let s=0;s<l.length;s+=1)t[s]=vl(bl(o,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=Y()},l(s){for(let r=0;r<t.length;r+=1)t[r].l(s);e=Y()},m(s,r){for(let n=0;n<t.length;n+=1)t[n].m(s,r);j(s,e,r)},p(s,r){if(r[0]&2){l=s[1];let n;for(n=0;n<l.length;n+=1){const i=bl(s,l,n);t[n]?t[n].p(i,r):(t[n]=vl(i),t[n].c(),t[n].m(e.parentNode,e))}for(;n<t.length;n+=1)t[n].d(1);t.length=l.length}},d(s){Ce(t,s),s&&g(e)}}}function ys(o){let e,l;return e=new hn({props:{id:o[43],disabled:!o[8],$$slots:{default:[Es]},$$scope:{ctx:o}}}),e.$on("change",o[17]),{c(){L(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){G(e,t,s),l=!0},p(t,s){const r={};s[1]&4096&&(r.id=t[43]),s[0]&256&&(r.disabled=!t[8]),s[0]&2|s[1]&536870912&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function wl(o){let e,l;return e=new Xn({props:{lane:o[12],variables:o[15]}}),{c(){L(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){G(e,t,s),l=!0},p(t,s){const r={};s[0]&4096&&(r.lane=t[12]),e.$set(r)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ss(o){var a;let e,l,t,s,r,n;e=new Be({props:{title:"Queue on Apply",id:"queue-on-apply",$$slots:{default:[js,({id:f})=>({43:f}),({id:f})=>[0,f?4096:0]]},$$scope:{ctx:o}}}),t=new Be({props:{title:"Queue to Lane",id:"queue-to-lane",$$slots:{default:[ys,({id:f})=>({43:f}),({id:f})=>[0,f?4096:0]]},$$scope:{ctx:o}}});let i=((a=o[12])==null?void 0:a.type)==="cluster"&&o[8]&&wl(o);return{c(){L(e.$$.fragment),l=D(),L(t.$$.fragment),s=D(),i&&i.c(),r=Y()},l(f){M(e.$$.fragment,f),l=R(f),M(t.$$.fragment,f),s=R(f),i&&i.l(f),r=Y()},m(f,u){G(e,f,u),j(f,l,u),G(t,f,u),j(f,s,u),i&&i.m(f,u),j(f,r,u),n=!0},p(f,u){var b;const p={};u[0]&256|u[1]&536875008&&(p.$$scope={dirty:u,ctx:f}),e.$set(p);const _={};u[0]&258|u[1]&536875008&&(_.$$scope={dirty:u,ctx:f}),t.$set(_),((b=f[12])==null?void 0:b.type)==="cluster"&&f[8]?i?(i.p(f,u),u[0]&4352&&k(i,1)):(i=wl(f),i.c(),k(i,1),i.m(r.parentNode,r)):i&&(te(),w(i,1,1,()=>{i=null}),le())},i(f){n||(k(e.$$.fragment,f),k(t.$$.fragment,f),k(i),n=!0)},o(f){w(e.$$.fragment,f),w(t.$$.fragment,f),w(i),n=!1},d(f){B(e,f),f&&g(l),B(t,f),f&&g(s),i&&i.d(f),f&&g(r)}}}function Cs(o){let e,l,t,s,r,n;function i(f){o[28](f)}let a={id:o[43]};return o[9]!==void 0&&(a.value=o[9]),l=new Nt({props:a}),ge.push(()=>ke(l,"value",i)),{c(){e=S("span"),L(l.$$.fragment)},l(f){e=C(f,"SPAN",{});var u=O(e);M(l.$$.fragment,u),u.forEach(g)},m(f,u){j(f,e,u),G(l,e,null),s=!0,r||(n=Oe(Ae.call(null,e,{content:"Add a tag to each job in the workflow",delay:[350,0],placement:"right"})),r=!0)},p(f,u){const p={};u[1]&4096&&(p.id=f[43]),!t&&u[0]&512&&(t=!0,p.value=f[9],ve(()=>t=!1)),l.$set(p)},i(f){s||(k(l.$$.fragment,f),s=!0)},o(f){w(l.$$.fragment,f),s=!1},d(f){f&&g(e),B(l),r=!1,n()}}}function jl(o){let e,l,t,s;return e=new Be({props:{title:"Title",id:"tag-title",$$slots:{icon:[Os,({id:r})=>({43:r}),({id:r})=>[0,r?4096:0]],default:[Ps,({id:r})=>({43:r}),({id:r})=>[0,r?4096:0]]},$$scope:{ctx:o}}}),t=new Be({props:{title:"Description",id:"tag-description",$$slots:{icon:[As,({id:r})=>({43:r}),({id:r})=>[0,r?4096:0]],default:[Ts,({id:r})=>({43:r}),({id:r})=>[0,r?4096:0]]},$$scope:{ctx:o}}}),{c(){L(e.$$.fragment),l=D(),L(t.$$.fragment)},l(r){M(e.$$.fragment,r),l=R(r),M(t.$$.fragment,r)},m(r,n){G(e,r,n),j(r,l,n),G(t,r,n),s=!0},p(r,n){const i={};n[0]&1024|n[1]&536875008&&(i.$$scope={dirty:n,ctx:r}),e.$set(i);const a={};n[0]&2048|n[1]&536875008&&(a.$$scope={dirty:n,ctx:r}),t.$set(a)},i(r){s||(k(e.$$.fragment,r),k(t.$$.fragment,r),s=!0)},o(r){w(e.$$.fragment,r),w(t.$$.fragment,r),s=!1},d(r){B(e,r),r&&g(l),B(t,r)}}}function Ps(o){let e,l,t;function s(n){o[29](n)}let r={id:o[43],tooltip:"Tag title will be prefixed by the project tag ID (eg. Px/WFx)"};return o[10]!==void 0&&(r.value=o[10]),e=new An({props:r}),ge.push(()=>ke(e,"value",s)),{c(){L(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,i){G(e,n,i),t=!0},p(n,i){const a={};i[1]&4096&&(a.id=n[43]),!l&&i[0]&1024&&(l=!0,a.value=n[10],ve(()=>l=!1)),e.$set(a)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Os(o){let e,l;return{c(){e=S("span"),l=z("(optional)"),this.h()},l(t){e=C(t,"SPAN",{slot:!0,class:!0});var s=O(e);l=Q(s,"(optional)"),s.forEach(g),this.h()},h(){y(e,"slot","icon"),y(e,"class","ml-1 text-2xs text-gray-500 italic")},m(t,s){j(t,e,s),v(e,l)},p:Se,d(t){t&&g(e)}}}function Ts(o){let e,l,t;function s(n){o[30](n)}let r={id:o[43]};return o[11]!==void 0&&(r.value=o[11]),e=new vs({props:r}),ge.push(()=>ke(e,"value",s)),{c(){L(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,i){G(e,n,i),t=!0},p(n,i){const a={};i[1]&4096&&(a.id=n[43]),!l&&i[0]&2048&&(l=!0,a.value=n[11],ve(()=>l=!1)),e.$set(a)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function As(o){let e,l;return{c(){e=S("span"),l=z("(optional)"),this.h()},l(t){e=C(t,"SPAN",{slot:!0,class:!0});var s=O(e);l=Q(s,"(optional)"),s.forEach(g),this.h()},h(){y(e,"slot","icon"),y(e,"class","ml-2 text-2xs text-gray-500 italic")},m(t,s){j(t,e,s),v(e,l)},p:Se,d(t){t&&g(e)}}}function Is(o){let e,l,t,s;e=new Be({props:{title:"Apply Tags",id:"tag-workflow-jobs",$$slots:{default:[Cs,({id:n})=>({43:n}),({id:n})=>[0,n?4096:0]]},$$scope:{ctx:o}}});let r=o[9]&&jl(o);return{c(){L(e.$$.fragment),l=D(),r&&r.c(),t=Y()},l(n){M(e.$$.fragment,n),l=R(n),r&&r.l(n),t=Y()},m(n,i){G(e,n,i),j(n,l,i),r&&r.m(n,i),j(n,t,i),s=!0},p(n,i){const a={};i[0]&512|i[1]&536875008&&(a.$$scope={dirty:i,ctx:n}),e.$set(a),n[9]?r?(r.p(n,i),i[0]&512&&k(r,1)):(r=jl(n),r.c(),k(r,1),r.m(t.parentNode,t)):r&&(te(),w(r,1,1,()=>{r=null}),le())},i(n){s||(k(e.$$.fragment,n),k(r),s=!0)},o(n){w(e.$$.fragment,n),w(r),s=!1},d(n){B(e,n),n&&g(l),r&&r.d(n),n&&g(t)}}}function Ns(o){let e,l,t,s,r,n;return e=new ft({props:{title:"Queue Options",$$slots:{default:[Ss]},$$scope:{ctx:o}}}),t=new ft({props:{title:"Tag Options",expanded:!1,$$slots:{default:[Is]},$$scope:{ctx:o}}}),r=new ls({props:{workflow:o[0]}}),{c(){L(e.$$.fragment),l=D(),L(t.$$.fragment),s=D(),L(r.$$.fragment)},l(i){M(e.$$.fragment,i),l=R(i),M(t.$$.fragment,i),s=R(i),M(r.$$.fragment,i)},m(i,a){G(e,i,a),j(i,l,a),G(t,i,a),j(i,s,a),G(r,i,a),n=!0},p(i,a){const f={};a[0]&4354|a[1]&536870912&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const u={};a[0]&3584|a[1]&536870912&&(u.$$scope={dirty:a,ctx:i}),t.$set(u);const p={};a[0]&1&&(p.workflow=i[0]),r.$set(p)},i(i){n||(k(e.$$.fragment,i),k(t.$$.fragment,i),k(r.$$.fragment,i),n=!0)},o(i){w(e.$$.fragment,i),w(t.$$.fragment,i),w(r.$$.fragment,i),n=!1},d(i){B(e,i),i&&g(l),B(t,i),i&&g(s),B(r,i)}}}function Ds(o){var t;let e,l;return e=new In({props:{id:o[43],title:(t=o[45])==null?void 0:t.title,job:o[44],$$slots:{default:[Us]},$$scope:{ctx:o}}}),{c(){L(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,r){G(e,s,r),l=!0},p(s,r){var i;const n={};r[0]&32&&(n.title=(i=s[45])==null?void 0:i.title),r[0]&33|r[1]&536870912&&(n.$$scope={dirty:r,ctx:s}),e.$set(n)},i(s){l||(k(e.$$.fragment,s),l=!0)},o(s){w(e.$$.fragment,s),l=!1},d(s){B(e,s)}}}function El(o,e){let l,t,s;return t=new cs({props:{id:e[43],name:e[55],class:"px-1"}}),t.$on("set",e[19]),{key:o,first:null,c(){l=Y(),L(t.$$.fragment),this.h()},l(r){l=Y(),M(t.$$.fragment,r),this.h()},h(){this.first=l},m(r,n){j(r,l,n),G(t,r,n),s=!0},p(r,n){e=r;const i={};n[1]&8388608&&(i.name=e[55]),t.$set(i)},i(r){s||(k(t.$$.fragment,r),s=!0)},o(r){w(t.$$.fragment,r),s=!1},d(r){r&&g(l),B(t,r)}}}function Rs(o){let e=[],l=new Map,t,s,r=o[54];const n=i=>Ze();for(let i=0;i<r.length;i+=1){let a=hl(o,r,i),f=n();l.set(f,e[i]=El(f,a))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=D()},l(i){for(let a=0;a<e.length;a+=1)e[a].l(i);t=R(i)},m(i,a){for(let f=0;f<e.length;f+=1)e[f].m(i,a);j(i,t,a),s=!0},p(i,a){a[0]&589824|a[1]&8388608&&(r=i[54],te(),e=st(e,a,n,1,i,r,l,t.parentNode,ot,El,t,hl),le())},i(i){if(!s){for(let a=0;a<r.length;a+=1)k(e[a]);s=!0}},o(i){for(let a=0;a<e.length;a+=1)w(e[a]);s=!1},d(i){for(let a=0;a<e.length;a+=1)e[a].d(i);i&&g(t)}}}function yl(o,e){var r;let l,t,s;return t=new is({props:{name:e[50],title:(r=e[51])==null?void 0:r.title,$$slots:{default:[Rs,({parameters:n})=>({54:n}),({parameters:n})=>[0,n?8388608:0]]},$$scope:{ctx:e}}}),{key:o,first:null,c(){l=Y(),L(t.$$.fragment),this.h()},l(n){l=Y(),M(t.$$.fragment,n),this.h()},h(){this.first=l},m(n,i){j(n,l,i),G(t,n,i),s=!0},p(n,i){var f;e=n;const a={};i[1]&262144&&(a.name=e[50]),i[1]&262144&&(a.title=(f=e[51])==null?void 0:f.title),i[1]&545259520&&(a.$$scope={dirty:i,ctx:e}),t.$set(a)},i(n){s||(k(t.$$.fragment,n),s=!0)},o(n){w(t.$$.fragment,n),s=!1},d(n){n&&g(l),B(t,n)}}}function Vs(o){let e=[],l=new Map,t,s,r=o[49];const n=i=>Ze();for(let i=0;i<r.length;i+=1){let a=gl(o,r,i),f=n();l.set(f,e[i]=yl(f,a))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=Y()},l(i){for(let a=0;a<e.length;a+=1)e[a].l(i);t=Y()},m(i,a){for(let f=0;f<e.length;f+=1)e[f].m(i,a);j(i,t,a),s=!0},p(i,a){a[0]&589824|a[1]&8650752&&(r=i[49],te(),e=st(e,a,n,1,i,r,l,t.parentNode,ot,yl,t,gl),le())},i(i){if(!s){for(let a=0;a<r.length;a+=1)k(e[a]);s=!0}},o(i){for(let a=0;a<e.length;a+=1)w(e[a]);s=!1},d(i){for(let a=0;a<e.length;a+=1)e[a].d(i);i&&g(t)}}}function Us(o){let e,l,t,s,r,n,i;function a(...u){return o[31](o[43],...u)}function f(...u){return o[32](o[43],...u)}return e=new Nn({props:{id:o[43],title:o[44].title,description:o[44].description}}),e.$on("update:title",a),e.$on("update:description",f),t=new Dn({props:{id:o[43],job:o[45],workflowJob:o[44],$$slots:{default:[Vs,({sections:u})=>({49:u}),({sections:u})=>[0,u?262144:0]]},$$scope:{ctx:o}}}),r=new Rn({props:{workflowJob:o[44],workflow:o[0]}}),{c(){L(e.$$.fragment),l=D(),L(t.$$.fragment),s=D(),L(r.$$.fragment),n=D()},l(u){M(e.$$.fragment,u),l=R(u),M(t.$$.fragment,u),s=R(u),M(r.$$.fragment,u),n=R(u)},m(u,p){G(e,u,p),j(u,l,p),G(t,u,p),j(u,s,p),G(r,u,p),j(u,n,p),i=!0},p(u,p){o=u;const _={};p[0]&32&&(_.job=o[45]),p[1]&537133056&&(_.$$scope={dirty:p,ctx:o}),t.$set(_);const b={};p[0]&1&&(b.workflow=o[0]),r.$set(b)},i(u){i||(k(e.$$.fragment,u),k(t.$$.fragment,u),k(r.$$.fragment,u),i=!0)},o(u){w(e.$$.fragment,u),w(t.$$.fragment,u),w(r.$$.fragment,u),i=!1},d(u){B(e,u),u&&g(l),B(t,u),u&&g(s),B(r,u),u&&g(n)}}}function Sl(o,e){let l,t,s,r=e[46]&&Ds(e);return{key:o,first:null,c(){l=Y(),r&&r.c(),t=Y(),this.h()},l(n){l=Y(),r&&r.l(n),t=Y(),this.h()},h(){this.first=l},m(n,i){j(n,l,i),r&&r.m(n,i),j(n,t,i),s=!0},p(n,i){e=n,e[46]&&r.p(e,i)},i(n){s||(k(r),s=!0)},o(n){w(r),s=!1},d(n){n&&g(l),r&&r.d(n),n&&g(t)}}}function Js(o){let e=[],l=new Map,t,s,r=o[16]();const n=i=>Ze();for(let i=0;i<r.length;i+=1){let a=_l(o,r,i),f=n();l.set(f,e[i]=Sl(f,a))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=Y()},l(i){for(let a=0;a<e.length;a+=1)e[a].l(i);t=Y()},m(i,a){for(let f=0;f<e.length;f+=1)e[f].m(i,a);j(i,t,a),s=!0},p(i,a){a[0]&852001|a[1]&8650752&&(r=i[16](),te(),e=st(e,a,n,1,i,r,l,t.parentNode,ot,Sl,t,_l),le())},i(i){if(!s){for(let a=0;a<r.length;a+=1)k(e[a]);s=!0}},o(i){for(let a=0;a<e.length;a+=1)w(e[a]);s=!1},d(i){for(let a=0;a<e.length;a+=1)e[a].d(i);i&&g(t)}}}function qs(o){let e,l,t,s,r,n,i=o[6].length&&$l(o),a=o[4]&&kl(o);return t=new Cn({props:{id:"workflow-form",class:"gap-y-1.5",$$slots:{default:[Ns]},$$scope:{ctx:o}}}),r=new Pn({props:{$$slots:{default:[Js]},$$scope:{ctx:o}}}),{c(){i&&i.c(),e=D(),a&&a.c(),l=D(),L(t.$$.fragment),s=D(),L(r.$$.fragment)},l(f){i&&i.l(f),e=R(f),a&&a.l(f),l=R(f),M(t.$$.fragment,f),s=R(f),M(r.$$.fragment,f)},m(f,u){i&&i.m(f,u),j(f,e,u),a&&a.m(f,u),j(f,l,u),G(t,f,u),j(f,s,u),G(r,f,u),n=!0},p(f,u){f[6].length?i?(i.p(f,u),u[0]&64&&k(i,1)):(i=$l(f),i.c(),k(i,1),i.m(e.parentNode,e)):i&&(te(),w(i,1,1,()=>{i=null}),le()),f[4]?a?(a.p(f,u),u[0]&16&&k(a,1)):(a=kl(f),a.c(),k(a,1),a.m(l.parentNode,l)):a&&(te(),w(a,1,1,()=>{a=null}),le());const p={};u[0]&7939|u[1]&536870912&&(p.$$scope={dirty:u,ctx:f}),t.$set(p);const _={};u[0]&33|u[1]&536870912&&(_.$$scope={dirty:u,ctx:f}),r.$set(_)},i(f){n||(k(i),k(a),k(t.$$.fragment,f),k(r.$$.fragment,f),n=!0)},o(f){w(i),w(a),w(t.$$.fragment,f),w(r.$$.fragment,f),n=!1},d(f){i&&i.d(f),f&&g(e),a&&a.d(f),f&&g(l),B(t,f),f&&g(s),B(r,f)}}}function Ls(o){let e,l;return e=new On({props:{type:"apply",workflow:o[0],parentConnections:o[4]}}),{c(){L(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){G(e,t,s),l=!0},p(t,s){const r={};s[0]&1&&(r.workflow=t[0]),s[0]&16&&(r.parentConnections=t[4]),e.$set(r)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Cl(o){let e,l;return e=new bs({props:{jobs:o[0].jobs}}),{c(){L(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){G(e,t,s),l=!0},p(t,s){const r={};s[0]&1&&(r.jobs=t[0].jobs),e.$set(r)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ms(o){let e;return{c(){e=z("Cancel")},l(l){e=Q(l,"Cancel")},m(l,t){j(l,e,t)},d(l){l&&g(e)}}}function Gs(o){let e;return{c(){e=z("Apply")},l(l){e=Q(l,"Apply")},m(l,t){j(l,e,t)},d(l){l&&g(e)}}}function Bs(o){let e;return{c(){e=z("Repeat")},l(l){e=Q(l,"Repeat")},m(l,t){j(l,e,t)},d(l){l&&g(e)}}}function Hs(o){let e,l,t,s,r,n,i,a=o[0]&&Cl(o);return l=new it({props:{kind:"cancel",$$slots:{default:[Ms]},$$scope:{ctx:o}}}),l.$on("click",o[22]),s=new it({props:{kind:"confirm",$$slots:{default:[Gs]},$$scope:{ctx:o}}}),s.$on("click",o[25]),n=new it({props:{disabled:!o[13],kind:"secondary",$$slots:{default:[Bs]},$$scope:{ctx:o}}}),n.$on("click",o[26]),{c(){a&&a.c(),e=D(),L(l.$$.fragment),t=D(),L(s.$$.fragment),r=D(),L(n.$$.fragment)},l(f){a&&a.l(f),e=R(f),M(l.$$.fragment,f),t=R(f),M(s.$$.fragment,f),r=R(f),M(n.$$.fragment,f)},m(f,u){a&&a.m(f,u),j(f,e,u),G(l,f,u),j(f,t,u),G(s,f,u),j(f,r,u),G(n,f,u),i=!0},p(f,u){f[0]?a?(a.p(f,u),u[0]&1&&k(a,1)):(a=Cl(f),a.c(),k(a,1),a.m(e.parentNode,e)):a&&(te(),w(a,1,1,()=>{a=null}),le());const p={};u[1]&536870912&&(p.$$scope={dirty:u,ctx:f}),l.$set(p);const _={};u[1]&536870912&&(_.$$scope={dirty:u,ctx:f}),s.$set(_);const b={};u[0]&8192&&(b.disabled=!f[13]),u[1]&536870912&&(b.$$scope={dirty:u,ctx:f}),n.$set(b)},i(f){i||(k(a),k(l.$$.fragment,f),k(s.$$.fragment,f),k(n.$$.fragment,f),i=!0)},o(f){w(a),w(l.$$.fragment,f),w(s.$$.fragment,f),w(n.$$.fragment,f),i=!1},d(f){a&&a.d(f),f&&g(e),B(l,f),f&&g(t),B(s,f),f&&g(r),B(n,f)}}}function Ws(o){let e,l,t;function s(n){o[33](n)}let r={$$slots:{footer:[Hs],visualization:[Ls],configuration:[qs],header:[ws]},$$scope:{ctx:o}};return o[7]!==void 0&&(r.animateRepeat=o[7]),e=new Sn({props:r}),ge.push(()=>ke(e,"animateRepeat",s)),{c(){L(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,i){G(e,n,i),t=!0},p(n,i){const a={};i[0]&16243|i[1]&536870912&&(a.$$scope={dirty:i,ctx:n}),!l&&i[0]&128&&(l=!0,a.animateRepeat=n[7],ve(()=>l=!1)),e.$set(a)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Pl(o){let e,l;return e=new bn({props:{loader:zs,handleApply:o[20]}}),{c(){L(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){G(e,t,s),l=!0},p:Se,i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Fs(o){let e,l,t,s,r;function n(f){o[34](f)}let i={$$slots:{default:[Ws]},$$scope:{ctx:o}};o[3]!==void 0&&(i.bus=o[3]),e=new yn({props:i}),ge.push(()=>ke(e,"bus",n));let a=o[14]&&Pl(o);return{c(){L(e.$$.fragment),t=D(),a&&a.c(),s=Y()},l(f){M(e.$$.fragment,f),t=R(f),a&&a.l(f),s=Y()},m(f,u){G(e,f,u),j(f,t,u),a&&a.m(f,u),j(f,s,u),r=!0},p(f,u){const p={};u[0]&16371|u[1]&536870912&&(p.$$scope={dirty:u,ctx:f}),!l&&u[0]&8&&(l=!0,p.bus=f[3],ve(()=>l=!1)),e.$set(p),f[14]?a?(a.p(f,u),u[0]&16384&&k(a,1)):(a=Pl(f),a.c(),k(a,1),a.m(s.parentNode,s)):a&&(te(),w(a,1,1,()=>{a=null}),le())},i(f){r||(k(e.$$.fragment,f),k(a),r=!0)},o(f){w(e.$$.fragment,f),w(a),r=!1},d(f){B(e,f),f&&g(t),a&&a.d(f),f&&g(s)}}}const zs=()=>ql(()=>import("./WorkflowTargetAlert.1f8ee508.js"),["assets/WorkflowTargetAlert.1f8ee508.js","assets/vendor.3ae73048.js","assets/index.2e3bb17a.js","assets/router.1b465492.js","assets/index.146c2037.js","assets/index.c82b1418.css","assets/index.11580965.js","assets/index.5ca08db9.css","assets/jobs.7ab064ef.js","assets/helpers.7177ca38.js","assets/index.c4392b02.js","assets/jobs.d50d1674.js","assets/Icon.61279884.js","assets/ChevronUp.0ab7bee0.js","assets/types.8cb6216c.js","assets/types.2b75528f.css","assets/Spinner.012207c4.js","assets/Folder.9bc96b35.js","assets/LockClosed.9ead7228.js","assets/createNew.a4a688d1.js","assets/Alert.ff361b6c.js","assets/Autocomplete.c002093e.js","assets/ArrowCircleRight.3a96b815.js","assets/Loading.92fe8374.js"]);function Qs(o,e,l){let t,s,r,n,i,a,f,u=Se,p=()=>(u(),u=jt(d,P=>l(38,f=P)),d),_,b;re(o,gn,P=>l(35,s=P)),re(o,mn,P=>l(36,r=P)),re(o,Ge,P=>l(24,n=P)),re(o,_n,P=>l(13,i=P)),re(o,dn,P=>l(1,_=P)),re(o,rt,P=>l(14,b=P)),o.$$.on_destroy.push(()=>u());let d,m,h={},$,c={},E=[],J,N=!1,A,V=!0,q="",H="";const K=Ct({});re(o,K,P=>l(37,a=P));const I=Ct({}),W=()=>{var P;return Object.entries((P=m.jobs)!=null?P:{})},U=P=>{l(2,A=P.target.value)},F=(P,x)=>{var Le,Me;const{jobType:be,parameters:me}=m.jobs[P],_e=$e(Ve)[be],Pe=(Le=_e==null?void 0:_e.baseParams)==null?void 0:Le[x],qe=(Me=me==null?void 0:me[x])==null?void 0:Me.value;return Pe&&qe&&(Pe.value=qe),Pe},ee=(P,x,be)=>{var qe,Le,Me,ut,pt,mt;const me=F(P,x),_e={locked:!1,visible:!1,section:me==null?void 0:me.section,value:me==null?void 0:me.value},Pe=Ne(de(de({},_e),(Le=(qe=h[P])==null?void 0:qe.parameters)==null?void 0:Le[x]),{value:be});if(Ml(Pe,_e)){const ct=(ut=(Me=h[P])==null?void 0:Me.parameters)!=null?ut:{},{[x]:Ks}=ct,He=bt(ct,[ht(x)]);return((pt=Object.keys(He!=null?He:{}))==null?void 0:pt.length)||f.dispatchEvent(new CustomEvent("reset:job",{detail:{id:P}})),Ne(de({},h[P]),{parameters:He})}return f.dispatchEvent(new CustomEvent("update:job",{detail:{id:P}})),Ne(de({},h[P]),{parameters:Ne(de({},(mt=h[P])==null?void 0:mt.parameters),{[x]:de({},Pe)})})},Z=(P,x,be)=>{l(23,h[P]=Ne(de({},h[P]),{[x]:be}),h)},se=P=>{const{id:x,name:be,value:me}=P.detail,_e=F(x,be),Pe=(_e==null?void 0:_e.type)==="number"?Ll(me):me;l(23,h[x]=ee(x,be,Pe),h)},ue=()=>{const P={};if(N){const x={lane:A,hostname:null,gpus:[]};if((t==null?void 0:t.type)==="cluster"){const be=Object.fromEntries(Object.entries(a).filter(([me,_e])=>typeof _e=="string"&&_e!==""));Object.keys(be).length>0&&(x.clusterVariables=be)}P.queue=x}return V&&(P.tag={title:q,description:H}),P},ce=(P,x=!1)=>{P==null||P.preventDefault(),qn(m,h,ue()),x?J():(rt.set(!1),It.set(!1))},T=(P,x=!1)=>{i?ce(P,x):rt.set(!0)},X=()=>{It.set(!1)};zl("workflow",{type:"apply",updates:{subscribe:I.subscribe}}),nt(()=>{l(0,m=Jl(r.find(P=>P._id===s))),l(5,c=Xl(m.jobs)),l(6,E=Yl(m.jobs))});const ie=P=>T(P),pe=P=>ce(P,!0);function ae(P){N=P,l(8,N)}function fe(P){V=P,l(9,V)}function oe(P){q=P,l(10,q)}function we(P){H=P,l(11,H)}const Ol=(P,x)=>Z(P,"title",x.detail),Tl=(P,x)=>Z(P,"description",x.detail);function Al(P){J=P,l(7,J)}function Il(P){d=P,p(l(3,d))}return o.$$.update=()=>{var P;o.$$.dirty[0]&8388608&&I.set(h),o.$$.dirty[0]&6&&l(12,t=_.find(x=>x.name===A)),o.$$.dirty[0]&16777217&&n&&Object.keys((P=m==null?void 0:m.parents)!=null?P:{}).length&&l(4,$=Jn(m==null?void 0:m.parents))},[m,_,A,d,$,c,E,J,N,V,q,H,t,i,b,K,W,U,Z,se,ce,T,X,h,n,ie,pe,ae,fe,oe,we,Ol,Tl,Al,Il]}class Eo extends je{constructor(e){super();Ee(this,e,Qs,Fs,ye,{},null,[-1,-1])}}export{Eo as default};
