var Qr=Object.defineProperty,Yr=Object.defineProperties;var Xr=Object.getOwnPropertyDescriptors;var Ge=Object.getOwnPropertySymbols;var tn=Object.prototype.hasOwnProperty,en=Object.prototype.propertyIsEnumerable;var Ke=(e,o,t)=>o in e?Qr(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,Et=(e,o)=>{for(var t in o||(o={}))tn.call(o,t)&&Ke(e,t,o[t]);if(Ge)for(var t of Ge(o))en.call(o,t)&&Ke(e,t,o[t]);return e},Ut=(e,o)=>Yr(e,Xr(o));import{e as kt,g as L,a1 as Qe,w as rt,Y as Ye,$ as Xe,n as Ce}from"./vendor.3ae73048.js";import{h as ie,q as Vt,j as tr,y as er,l as rr,m as nr,p as sr,z as xe,o as Pt,A as ar,B as ir,f as Bt,C as oe,D as le,E as rn,F as Ee,G as or,H as nn,I as sn,s as Ae,J as Ht,K as an,c as lr,L as Ie,M as ze,N as Oe,d as cr,O as ur,P as on,Q as Gt,R as ln,S as cn}from"./router.1b465492.js";import{a6 as ce,a7 as Nt,aa as dr,P as hr,ab as fr,Q as pr,p as zt,u as K,e as St,n as wt,ac as De,J as un,ad as dn,l as Ot,a1 as hn,a4 as fn,a2 as pn,ae as mn,af as gn,ag as _n,ah as bn,a as yn,z as Re,ai as wn}from"./index.146c2037.js";import{w as ue,b as mr,P as Jt,C as gr,p as vn,c as kn,d as Sn,s as bt,S as ft,e as Dt,h as _r,f as br,g as yr,W as Kt,j as $t,k as Cn,l as xn,m as En,n as Pe}from"./helpers.7177ca38.js";import{g as de,s as An,w as In,a as zn}from"./index.c4392b02.js";import{l as On,d as wr,p as Dn,f as Rn}from"./jobs.d50d1674.js";const Pn=rt(!1),Tn=ue(Nt.projects,ce.card,vn),Bn=ue(Nt.projects,ce.table,kn),Jn=mr(Nt.projects,Sn),$n=rt(!0),Nn=rt(!0),Fn=rt(!0),Qt=rt(!0),Ft=rt(!1),Te=rt(e=>{}),Be=rt(e=>{}),vr=rt(),Je=rt(!1),Yt=rt({}),kr=rt(""),he=(()=>{const{subscribe:e,set:o,update:t}=rt(50);return{subscribe:e,set:o,increment:i=>t(c=>c+i),reset:()=>o(50)}})(),$e=(()=>{const{subscribe:e,set:o,update:t}=rt();return{subscribe:e,set:o,update:t,reset:()=>{var i;return(i=L($e))==null?void 0:i.scrollTo({top:0,behavior:"smooth"})}}})(),Xt=kt(ie,(e,o)=>{var t,i;Te.set(o),o((i=(t=e.find(({id:c})=>c==="projectsListCount"))==null?void 0:t.count)!=null?i:null)}),Sr=kt(ie,(e,o)=>{var t,i;Be.set(o),o((i=(t=e.find(({id:c})=>c==="allBrowseProjectsCount"))==null?void 0:t.count)!=null?i:null)}),Cr=kt([Vt,tr],([e,o])=>{const t=[],{tags:i,owner_user_id:c,created_at:s,starred_by:u,notes:a,archived:h,detached:_}=e;return Array.isArray(i)&&t.push({name:"Tags",key:Jt.tags,value:o.filter(k=>i.includes(k.uid)).map(k=>({name:`${k.uid}: ${k.title}`,key:k.uid,class:gr[k.colour]})),class:"bg-red-600"}),typeof c=="string"&&t.push({name:"Created by",key:Jt.owner_user_id,value:L(nr)[c],class:"bg-blue-600"}),typeof s=="string"&&t.push({name:"Date created",key:Jt.created_at,value:dr(s),class:"bg-green-600"}),typeof u=="string"&&t.push({name:"Starred",key:Jt.starred_by,value:!0,class:"bg-pink-600"}),typeof a=="boolean"&&t.push({name:"Has notes",key:Jt.notes,value:!0,class:"bg-pink-600"}),typeof h=="boolean"&&t.push({name:"Show Archived",key:Jt.archived,value:!0,class:"bg-pink-600"}),typeof _=="boolean"&&t.push({name:"Show Detached",key:Jt.detached,value:!0,class:"bg-pink-600"}),t}),xr=(e,o)=>{vr.set(o);const t=L(Yt),{tags:i,owner_user_id:c,created_at:s,starred_by:u,notes:a,archived:h,detached:_,sort_option:k,sort_order:f}=t,w=e.filter(d=>{var b,l;return Array.isArray(i)&&!((b=d==null?void 0:d.tags)==null?void 0:b.some(g=>i==null?void 0:i.includes(g)))||typeof c=="string"&&d.owner_user_id!==c||typeof s=="string"&&!fr(s,d.created_at)||typeof u=="string"&&!((l=d.starred_by)==null?void 0:l.includes(u))||typeof a=="boolean"&&!d.notes||typeof h=="boolean"&&!d.archived||typeof h!="boolean"&&d.archived||typeof _=="boolean"&&!d.detached?!1:!(typeof _!="boolean"&&d.detached)},[]);switch(L(Ft)&&Ft.set(!1),k){case Dt.uid:o(bt(w,"uid_num",f!=null?f:ft.desc,"number"));break;case Dt.size:o(bt(w,"size",f!=null?f:ft.desc,"number"));break;case Dt.workspaces:o(bt(w,["project_stats","workspace_count"],f!=null?f:ft.desc,"number"));break;case Dt.sessions:o(bt(w,["project_stats","session_count"],f!=null?f:ft.desc,"number"));break;case Dt.jobs:o(bt(w,["project_stats","job_count"],f!=null?f:ft.desc,"number"));break;case Dt.updated_at:o(bt(w,["project_stats","updated_at"],f!=null?f:ft.desc,"number"));break;case Dt.accessed_at:o(bt(w,["last_accessed","accessed_at"],f!=null?f:ft.desc,"number"));break;default:o(bt(w,"created_at",f!=null?f:ft.desc,"date"));break}},At=kt(er,(e,o)=>xr(e,o));Qe.subscribe(()=>{Qt.set(!0);const{queryString:e,queryObject:o}=rr();if(L(sr).type!==hr.projects){Je.set(!0);return}const t={},{tags:i,owner_user_id:c,created_at:s,starred_by:u,notes:a,archived:h,detached:_,sort_option:k,sort_order:f}=o;Array.isArray(i)&&(t.tags=i),typeof c=="string"&&(t.owner_user_id=c),typeof s=="string"&&(t.created_at=s),typeof u=="string"&&(t.starred_by=u),typeof a=="boolean"&&(t.notes=a),typeof h=="boolean"&&(t.archived=h),typeof _=="boolean"&&(t.detached=_),typeof k=="string"&&Object.values(Dt).includes(k)?t.sort_option=k:typeof k=="undefined"&&(t.sort_option=Dt.uid),typeof f=="string"&&Object.values(ft).includes(f)?t.sort_order=f:typeof k=="undefined"&&(t.sort_order=ft.desc),(!pr(L(Yt),t)||L(Je))&&(Yt.set(t),he.reset(),$e.reset(),Qt.set(!1)),kr.set(e),Je.set(!1)});const fe=(e=1)=>{const o=L(Xt),t=L(Sr),i=L(Te),c=L(Be);o-e>=0?i(t-e):i(0),t-e>=0?c(t-e):c(0)},jn=()=>{if((L(Ft)||L(At).length>0&&L(Xt)===0)&&(xr(L(er),L(vr)),Ft.set(!1)),L(At).length<L(Xt)){Qt.set(!0);const e=L(Xt)-L(At).length;e>=50?he.increment(50):e>0&&he.increment(e),Qt.set(!1),Ft.set(!0)}},Wn=()=>{const e=Object.assign({},L(Vt));L(Cr).forEach(({key:o})=>{e[o]&&delete e[o]}),Ye.update(o=>Ut(Et({},o),{params:e}))},Ln=e=>{var i;e.preventDefault();const o=L(At).findIndex(c=>c.uid===L(xe)[L(xe).length-1]);if(!L(At)[o+1])return;const{uid:t}=L(At)[o+1];e.metaKey?Pt.set([...L(Pt),{selection:"project",timestamp:new Date().getTime(),identifier:t,projectUid:t}]):((i=document.getElementById(`browse-project-${t}`))==null||i.focus(),ar(e,t))},Mn=e=>{var i;e.preventDefault();const o=L(At).findIndex(c=>c.uid===L(xe)[0]);if(!L(At)[o-1])return;const{uid:t}=L(At)[o-1];e.metaKey?Pt.set([{selection:"project",timestamp:new Date().getTime(),identifier:t,projectUid:t},...L(Pt)]):((i=document.getElementById(`browse-project-${t}`))==null||i.focus(),ar(e,t))};var _a=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",showProjectsCSVAlert:Pn,cardViewOptions:Tn,tableViewOptions:Bn,tableOrder:Jn,loadingProjects:$n,loadingProjectsCount:Nn,loadingAllProjectsCount:Fn,loadingQueryData:Qt,loadingScrollData:Ft,browseCountSetter:Te,fullCountSetter:Be,filterQueryObject:Yt,prevQueryString:kr,limit:he,browseWrapper:$e,browseProjectsCount:Xt,allProjectsCount:Sr,filterBarData:Cr,allBrowseProjects:At,decrementCount:fe,handleSetNextLimit:jn,handleRemoveAllFilters:Wn,selectNextProject:Ln,selectPreviousProject:Mn});const Er=rt(null),ba=e=>{Er.set(e)},ya=async(e,o)=>{await K.core.unarchiveProject(e,o),Er.set(null)},Ar=rt(null),wa=e=>{Ar.set(e)},va=async e=>{await K.core.archiveProject(e),Ar.set(null)},Ir=rt(null),ka=e=>{Ir.set(e)},Sa=async e=>{await K.core.detachProject(e),Ir.set(null)},Ne=rt(null),zr=rt([]),Or=rt([]),Dr=()=>{Ne.set(null),zr.set([]),Or.set([])},Ca=async(e,o=()=>{console.info("No callback passed")})=>{const t=await K.core.requestDeleteProject(e),i=!!(t!==!0&&t&&t.length===2);return t!==!0&&t&&t.length===2&&(Ne.set(e),zr.set(t[0]),Or.set(t[1])),o(),i||fe(),i},xa=async e=>{try{await K.core.deleteProject(e),fe(),ir(e),Dr(),Xe(window.pathPrefix+"/browse/P*")}catch(o){St("Delete project failed: ",o)}},Ea=e=>{Ne.set(e)},Aa=async e=>{try{await K.core.deleteDetachedProject(e),fe(),ir(e),Dr(),Xe(window.pathPrefix+"/browse/P*")}catch(o){St("Delete project failed: ",o)}},Zn=async e=>{try{await zt("/api/actions/projects/star_project",{uid:e})}catch(o){console.error(`Error starring ${e}: `,o),wt.add({title:`${e} could not be starred`,type:"danger",style:"minimal"})}},qn=async e=>{try{await zt("/api/actions/projects/unstar_project",{uid:e})}catch(o){console.error(`Error unstarring ${e}: `,o),wt.add({title:`${e} could not be unstarred`,type:"danger",style:"minimal"})}},Ia=async(e,o)=>{o?await qn(e):await Zn(e)},Un=async e=>{if(e)try{await zt("/api/actions/stats/refresh_project",{uid:e})}catch(o){console.error(`Error refreshing project stats for ${e}: `,o)}},za=async e=>{e&&await K.core.updateProjectSize(e)},Oa=async e=>{e&&await K.core.clearIntermediateResults(e,null)},Da=async(e,o)=>{const t=_r("Downloading JProjectsbs CSV");try{const i=Et({filename:e,columns:o},L(Yt)),c=await Bt("getProjectsCSV",i),s=document.createElement("a");s.setAttribute("href",c),s.setAttribute("download",`${e}.csv`),document.body.appendChild(s),s.click(),br("Projects CSV Download Ready",t)}catch(i){yr("Projects CSV Download Ready",i.message,t)}};var Rr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,o){(function(t){e.exports=t()})(function(){return function t(i,c,s){function u(_,k){if(!c[_]){if(!i[_]){var f=typeof le=="function"&&le;if(!k&&f)return f(_,!0);if(a)return a(_,!0);var w=new Error("Cannot find module '"+_+"'");throw w.code="MODULE_NOT_FOUND",w}var d=c[_]={exports:{}};i[_][0].call(d.exports,function(b){var l=i[_][1][b];return u(l||b)},d,d.exports,t,i,c,s)}return c[_].exports}for(var a=typeof le=="function"&&le,h=0;h<s.length;h++)u(s[h]);return u}({1:[function(t,i,c){var s=t("./utils"),u=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode=function(h){for(var _,k,f,w,d,b,l,g=[],p=0,v=h.length,C=v,E=s.getTypeOf(h)!=="string";p<h.length;)C=v-p,f=E?(_=h[p++],k=p<v?h[p++]:0,p<v?h[p++]:0):(_=h.charCodeAt(p++),k=p<v?h.charCodeAt(p++):0,p<v?h.charCodeAt(p++):0),w=_>>2,d=(3&_)<<4|k>>4,b=1<C?(15&k)<<2|f>>6:64,l=2<C?63&f:64,g.push(a.charAt(w)+a.charAt(d)+a.charAt(b)+a.charAt(l));return g.join("")},c.decode=function(h){var _,k,f,w,d,b,l=0,g=0,p="data:";if(h.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var v,C=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===a.charAt(64)&&C--,h.charAt(h.length-2)===a.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=u.uint8array?new Uint8Array(0|C):new Array(0|C);l<h.length;)_=a.indexOf(h.charAt(l++))<<2|(w=a.indexOf(h.charAt(l++)))>>4,k=(15&w)<<4|(d=a.indexOf(h.charAt(l++)))>>2,f=(3&d)<<6|(b=a.indexOf(h.charAt(l++))),v[g++]=_,d!==64&&(v[g++]=k),b!==64&&(v[g++]=f);return v}},{"./support":30,"./utils":32}],2:[function(t,i,c){var s=t("./external"),u=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),h=t("./stream/DataLengthProbe");function _(k,f,w,d,b){this.compressedSize=k,this.uncompressedSize=f,this.crc32=w,this.compression=d,this.compressedContent=b}_.prototype={getContentWorker:function(){var k=new u(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),f=this;return k.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),k},getCompressedWorker:function(){return new u(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},_.createWorkerFrom=function(k,f,w){return k.pipe(new a).pipe(new h("uncompressedSize")).pipe(f.compressWorker(w)).pipe(new h("compressedSize")).withStreamInfo("compression",f)},i.exports=_},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,c){var s=t("./stream/GenericWorker");c.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},c.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,c){var s=t("./utils"),u=function(){for(var a,h=[],_=0;_<256;_++){a=_;for(var k=0;k<8;k++)a=1&a?3988292384^a>>>1:a>>>1;h[_]=a}return h}();i.exports=function(a,h){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(_,k,f,w){var d=u,b=w+f;_^=-1;for(var l=w;l<b;l++)_=_>>>8^d[255&(_^k[l])];return-1^_}(0|h,a,a.length,0):function(_,k,f,w){var d=u,b=w+f;_^=-1;for(var l=w;l<b;l++)_=_>>>8^d[255&(_^k.charCodeAt(l))];return-1^_}(0|h,a,a.length,0):0}},{"./utils":32}],5:[function(t,i,c){c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!0,c.date=null,c.compression=null,c.compressionOptions=null,c.comment=null,c.unixPermissions=null,c.dosPermissions=null},{}],6:[function(t,i,c){var s=null;s=typeof Promise!="undefined"?Promise:t("lie"),i.exports={Promise:s}},{lie:37}],7:[function(t,i,c){var s=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",u=t("pako"),a=t("./utils"),h=t("./stream/GenericWorker"),_=s?"uint8array":"array";function k(f,w){h.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=w,this.meta={}}c.magic="\b\0",a.inherits(k,h),k.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(_,f.data),!1)},k.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},k.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},k.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(w){f.push({data:w,meta:f.meta})}},c.compressWorker=function(f){return new k("Deflate",f)},c.uncompressWorker=function(){return new k("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,c){function s(d,b){var l,g="";for(l=0;l<b;l++)g+=String.fromCharCode(255&d),d>>>=8;return g}function u(d,b,l,g,p,v){var C,E,A=d.file,$=d.compression,P=v!==_.utf8encode,W=a.transformTo("string",v(A.name)),R=a.transformTo("string",_.utf8encode(A.name)),U=A.comment,X=a.transformTo("string",v(U)),S=a.transformTo("string",_.utf8encode(U)),T=R.length!==A.name.length,n=S.length!==U.length,J="",et="",j="",nt=A.dir,M=A.date,tt={crc32:0,compressedSize:0,uncompressedSize:0};b&&!l||(tt.crc32=d.crc32,tt.compressedSize=d.compressedSize,tt.uncompressedSize=d.uncompressedSize);var O=0;b&&(O|=8),P||!T&&!n||(O|=2048);var z=0,Y=0;nt&&(z|=16),p==="UNIX"?(Y=798,z|=function(V,ct){var gt=V;return V||(gt=ct?16893:33204),(65535&gt)<<16}(A.unixPermissions,nt)):(Y=20,z|=function(V){return 63&(V||0)}(A.dosPermissions)),C=M.getUTCHours(),C<<=6,C|=M.getUTCMinutes(),C<<=5,C|=M.getUTCSeconds()/2,E=M.getUTCFullYear()-1980,E<<=4,E|=M.getUTCMonth()+1,E<<=5,E|=M.getUTCDate(),T&&(et=s(1,1)+s(k(W),4)+R,J+="up"+s(et.length,2)+et),n&&(j=s(1,1)+s(k(X),4)+S,J+="uc"+s(j.length,2)+j);var H="";return H+=`
\0`,H+=s(O,2),H+=$.magic,H+=s(C,2),H+=s(E,2),H+=s(tt.crc32,4),H+=s(tt.compressedSize,4),H+=s(tt.uncompressedSize,4),H+=s(W.length,2),H+=s(J.length,2),{fileRecord:f.LOCAL_FILE_HEADER+H+W+J,dirRecord:f.CENTRAL_FILE_HEADER+s(Y,2)+H+s(X.length,2)+"\0\0\0\0"+s(z,4)+s(g,4)+W+J+X}}var a=t("../utils"),h=t("../stream/GenericWorker"),_=t("../utf8"),k=t("../crc32"),f=t("../signature");function w(d,b,l,g){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=l,this.encodeFileName=g,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(w,h),w.prototype.push=function(d){var b=d.meta.percent||0,l=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,h.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:l?(b+100*(l-g-1))/l:100}}))},w.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var b=this.streamFiles&&!d.file.dir;if(b){var l=u(d,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:l.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(d){this.accumulate=!1;var b=this.streamFiles&&!d.file.dir,l=u(d,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(l.dirRecord),b)this.push({data:function(g){return f.DATA_DESCRIPTOR+s(g.crc32,4)+s(g.compressedSize,4)+s(g.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:l.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var d=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var l=this.bytesWritten-d,g=function(p,v,C,E,A){var $=a.transformTo("string",A(E));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(p,2)+s(p,2)+s(v,4)+s(C,4)+s($.length,2)+$}(this.dirRecords.length,l,d,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(d){this._sources.push(d);var b=this;return d.on("data",function(l){b.processChunk(l)}),d.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),d.on("error",function(l){b.error(l)}),this},w.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(d){var b=this._sources;if(!h.prototype.error.call(this,d))return!1;for(var l=0;l<b.length;l++)try{b[l].error(d)}catch{}return!0},w.prototype.lock=function(){h.prototype.lock.call(this);for(var d=this._sources,b=0;b<d.length;b++)d[b].lock()},i.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,c){var s=t("../compressions"),u=t("./ZipFileWorker");c.generateWorker=function(a,h,_){var k=new u(h.streamFiles,_,h.platform,h.encodeFileName),f=0;try{a.forEach(function(w,d){f++;var b=function(v,C){var E=v||C,A=s[E];if(!A)throw new Error(E+" is not a valid compression method !");return A}(d.options.compression,h.compression),l=d.options.compressionOptions||h.compressionOptions||{},g=d.dir,p=d.date;d._compressWorker(b,l).withStreamInfo("file",{name:w,dir:g,date:p,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(k)}),k.entriesCount=f}catch(w){k.error(w)}return k}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,c){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new s;for(var a in this)typeof this[a]!="function"&&(u[a]=this[a]);return u}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(u,a){return new s().loadAsync(u,a)},s.external=t("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,c){var s=t("./utils"),u=t("./external"),a=t("./utf8"),h=t("./zipEntries"),_=t("./stream/Crc32Probe"),k=t("./nodejsUtils");function f(w){return new u.Promise(function(d,b){var l=w.decompressed.getContentWorker().pipe(new _);l.on("error",function(g){b(g)}).on("end",function(){l.streamInfo.crc32!==w.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}i.exports=function(w,d){var b=this;return d=s.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),k.isNode&&k.isStream(w)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",w,!0,d.optimizedBinaryString,d.base64).then(function(l){var g=new h(d);return g.load(l),g}).then(function(l){var g=[u.Promise.resolve(l)],p=l.files;if(d.checkCRC32)for(var v=0;v<p.length;v++)g.push(f(p[v]));return u.Promise.all(g)}).then(function(l){for(var g=l.shift(),p=g.files,v=0;v<p.length;v++){var C=p[v],E=C.fileNameStr,A=s.resolve(C.fileNameStr);b.file(A,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:d.createFolders}),C.dir||(b.file(A).unsafeOriginalName=E)}return g.zipComment.length&&(b.comment=g.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,c){var s=t("../utils"),u=t("../stream/GenericWorker");function a(h,_){u.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(_)}s.inherits(a,u),a.prototype._bindStream=function(h){var _=this;(this._stream=h).pause(),h.on("data",function(k){_.push({data:k,meta:{percent:0}})}).on("error",function(k){_.isPaused?this.generatedError=k:_.error(k)}).on("end",function(){_.isPaused?_._upstreamEnded=!0:_.end()})},a.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,c){var s=t("readable-stream").Readable;function u(a,h,_){s.call(this,h),this._helper=a;var k=this;a.on("data",function(f,w){k.push(f)||k._helper.pause(),_&&_(w)}).on("error",function(f){k.emit("error",f)}).on("end",function(){k.push(null)})}t("../utils").inherits(u,s),u.prototype._read=function(){this._helper.resume()},i.exports=u},{"../utils":32,"readable-stream":16}],14:[function(t,i,c){i.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(s,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,u);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,u)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var u=new Buffer(s);return u.fill(0),u},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,i,c){function s(A,$,P){var W,R=a.getTypeOf($),U=a.extend(P||{},k);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(A=p(A)),U.createFolders&&(W=g(A))&&v.call(this,W,!0);var X=R==="string"&&U.binary===!1&&U.base64===!1;P&&P.binary!==void 0||(U.binary=!X),($ instanceof f&&$.uncompressedSize===0||U.dir||!$||$.length===0)&&(U.base64=!1,U.binary=!0,$="",U.compression="STORE",R="string");var S=null;S=$ instanceof f||$ instanceof h?$:b.isNode&&b.isStream($)?new l(A,$):a.prepareContent(A,$,U.binary,U.optimizedBinaryString,U.base64);var T=new w(A,S,U);this.files[A]=T}var u=t("./utf8"),a=t("./utils"),h=t("./stream/GenericWorker"),_=t("./stream/StreamHelper"),k=t("./defaults"),f=t("./compressedObject"),w=t("./zipObject"),d=t("./generate"),b=t("./nodejsUtils"),l=t("./nodejs/NodejsStreamInputAdapter"),g=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var $=A.lastIndexOf("/");return 0<$?A.substring(0,$):""},p=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},v=function(A,$){return $=$!==void 0?$:k.createFolders,A=p(A),this.files[A]||s.call(this,A,null,{dir:!0,createFolders:$}),this.files[A]};function C(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var $,P,W;for($ in this.files)W=this.files[$],(P=$.slice(this.root.length,$.length))&&$.slice(0,this.root.length)===this.root&&A(P,W)},filter:function(A){var $=[];return this.forEach(function(P,W){A(P,W)&&$.push(W)}),$},file:function(A,$,P){if(arguments.length!==1)return A=this.root+A,s.call(this,A,$,P),this;if(C(A)){var W=A;return this.filter(function(U,X){return!X.dir&&W.test(U)})}var R=this.files[this.root+A];return R&&!R.dir?R:null},folder:function(A){if(!A)return this;if(C(A))return this.filter(function(R,U){return U.dir&&A.test(R)});var $=this.root+A,P=v.call(this,$),W=this.clone();return W.root=P.name,W},remove:function(A){A=this.root+A;var $=this.files[A];if($||(A.slice(-1)!=="/"&&(A+="/"),$=this.files[A]),$&&!$.dir)delete this.files[A];else for(var P=this.filter(function(R,U){return U.name.slice(0,A.length)===A}),W=0;W<P.length;W++)delete this.files[P[W].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var $,P={};try{if((P=a.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");a.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var W=P.comment||this.comment||"";$=d.generateWorker(this,P,W)}catch(R){($=new h("error")).error(R)}return new _($,P.type||"string",P.mimeType)},generateAsync:function(A,$){return this.generateInternalStream(A).accumulate($)},generateNodeStream:function(A,$){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream($)}};i.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,c){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,c){var s=t("./DataReader");function u(a){s.call(this,a);for(var h=0;h<this.data.length;h++)a[h]=255&a[h]}t("../utils").inherits(u,s),u.prototype.byteAt=function(a){return this.data[this.zero+a]},u.prototype.lastIndexOfSignature=function(a){for(var h=a.charCodeAt(0),_=a.charCodeAt(1),k=a.charCodeAt(2),f=a.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===h&&this.data[w+1]===_&&this.data[w+2]===k&&this.data[w+3]===f)return w-this.zero;return-1},u.prototype.readAndCheckSignature=function(a){var h=a.charCodeAt(0),_=a.charCodeAt(1),k=a.charCodeAt(2),f=a.charCodeAt(3),w=this.readData(4);return h===w[0]&&_===w[1]&&k===w[2]&&f===w[3]},u.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,h},i.exports=u},{"../utils":32,"./DataReader":18}],18:[function(t,i,c){var s=t("../utils");function u(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var h,_=0;for(this.checkOffset(a),h=this.index+a-1;h>=this.index;h--)_=(_<<8)+this.byteAt(h);return this.index+=a,_},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},i.exports=u},{"../utils":32}],19:[function(t,i,c){var s=t("./Uint8ArrayReader");function u(a){s.call(this,a)}t("../utils").inherits(u,s),u.prototype.readData=function(a){this.checkOffset(a);var h=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,h},i.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,c){var s=t("./DataReader");function u(a){s.call(this,a)}t("../utils").inherits(u,s),u.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},u.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},u.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},u.prototype.readData=function(a){this.checkOffset(a);var h=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,h},i.exports=u},{"../utils":32,"./DataReader":18}],21:[function(t,i,c){var s=t("./ArrayReader");function u(a){s.call(this,a)}t("../utils").inherits(u,s),u.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,h},i.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,c){var s=t("../utils"),u=t("../support"),a=t("./ArrayReader"),h=t("./StringReader"),_=t("./NodeBufferReader"),k=t("./Uint8ArrayReader");i.exports=function(f){var w=s.getTypeOf(f);return s.checkSupport(w),w!=="string"||u.uint8array?w==="nodebuffer"?new _(f):u.uint8array?new k(s.transformTo("uint8array",f)):new a(s.transformTo("array",f)):new h(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,c){c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,c){var s=t("./GenericWorker"),u=t("../utils");function a(h){s.call(this,"ConvertWorker to "+h),this.destType=h}u.inherits(a,s),a.prototype.processChunk=function(h){this.push({data:u.transformTo(this.destType,h.data),meta:h.meta})},i.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,c){var s=t("./GenericWorker"),u=t("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,s),a.prototype.processChunk=function(h){this.streamInfo.crc32=u(h.data,this.streamInfo.crc32||0),this.push(h)},i.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,c){var s=t("../utils"),u=t("./GenericWorker");function a(h){u.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}s.inherits(a,u),a.prototype.processChunk=function(h){if(h){var _=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=_+h.data.length}u.prototype.processChunk.call(this,h)},i.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,c){var s=t("../utils"),u=t("./GenericWorker");function a(h){u.call(this,"DataWorker");var _=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(k){_.dataIsReady=!0,_.data=k,_.max=k&&k.length||0,_.type=s.getTypeOf(k),_.isPaused||_._tickAndRepeat()},function(k){_.error(k)})}s.inherits(a,u),a.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,_=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,_);break;case"uint8array":h=this.data.subarray(this.index,_);break;case"array":case"nodebuffer":h=this.data.slice(this.index,_)}return this.index=_,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,c){function s(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,a){return this._listeners[u].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,a){if(this._listeners[u])for(var h=0;h<this._listeners[u].length;h++)this._listeners[u][h].call(this,a)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var a=this;return u.on("data",function(h){a.processChunk(h)}),u.on("end",function(){a.end()}),u.on("error",function(h){a.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,a){return this.extraStreamInfo[u]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},i.exports=s},{}],29:[function(t,i,c){var s=t("../utils"),u=t("./ConvertWorker"),a=t("./GenericWorker"),h=t("../base64"),_=t("../support"),k=t("../external"),f=null;if(_.nodestream)try{f=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(b,l){return new k.Promise(function(g,p){var v=[],C=b._internalType,E=b._outputType,A=b._mimeType;b.on("data",function($,P){v.push($),l&&l(P)}).on("error",function($){v=[],p($)}).on("end",function(){try{var $=function(P,W,R){switch(P){case"blob":return s.newBlob(s.transformTo("arraybuffer",W),R);case"base64":return h.encode(W);default:return s.transformTo(P,W)}}(E,function(P,W){var R,U=0,X=null,S=0;for(R=0;R<W.length;R++)S+=W[R].length;switch(P){case"string":return W.join("");case"array":return Array.prototype.concat.apply([],W);case"uint8array":for(X=new Uint8Array(S),R=0;R<W.length;R++)X.set(W[R],U),U+=W[R].length;return X;case"nodebuffer":return Buffer.concat(W);default:throw new Error("concat : unsupported type '"+P+"'")}}(C,v),A);g($)}catch(P){p(P)}v=[]}).resume()})}function d(b,l,g){var p=l;switch(l){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=l,this._mimeType=g,s.checkSupport(p),this._worker=b.pipe(new u(p)),b.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}d.prototype={accumulate:function(b){return w(this,b)},on:function(b,l){var g=this;return b==="data"?this._worker.on(b,function(p){l.call(g,p.data,p.meta)}):this._worker.on(b,function(){s.delay(l,arguments,g)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},b)}},i.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,c){if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",c.nodebuffer=typeof Buffer!="undefined",c.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")c.blob=!1;else{var s=new ArrayBuffer(0);try{c.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(s),c.blob=u.getBlob("application/zip").size===0}catch{c.blob=!1}}}try{c.nodestream=!!t("readable-stream").Readable}catch{c.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,c){for(var s=t("./utils"),u=t("./support"),a=t("./nodejsUtils"),h=t("./stream/GenericWorker"),_=new Array(256),k=0;k<256;k++)_[k]=252<=k?6:248<=k?5:240<=k?4:224<=k?3:192<=k?2:1;_[254]=_[254]=1;function f(){h.call(this,"utf-8 decode"),this.leftOver=null}function w(){h.call(this,"utf-8 encode")}c.utf8encode=function(d){return u.nodebuffer?a.newBufferFrom(d,"utf-8"):function(b){var l,g,p,v,C,E=b.length,A=0;for(v=0;v<E;v++)(64512&(g=b.charCodeAt(v)))==55296&&v+1<E&&(64512&(p=b.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(p-56320),v++),A+=g<128?1:g<2048?2:g<65536?3:4;for(l=u.uint8array?new Uint8Array(A):new Array(A),v=C=0;C<A;v++)(64512&(g=b.charCodeAt(v)))==55296&&v+1<E&&(64512&(p=b.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(p-56320),v++),g<128?l[C++]=g:(g<2048?l[C++]=192|g>>>6:(g<65536?l[C++]=224|g>>>12:(l[C++]=240|g>>>18,l[C++]=128|g>>>12&63),l[C++]=128|g>>>6&63),l[C++]=128|63&g);return l}(d)},c.utf8decode=function(d){return u.nodebuffer?s.transformTo("nodebuffer",d).toString("utf-8"):function(b){var l,g,p,v,C=b.length,E=new Array(2*C);for(l=g=0;l<C;)if((p=b[l++])<128)E[g++]=p;else if(4<(v=_[p]))E[g++]=65533,l+=v-1;else{for(p&=v===2?31:v===3?15:7;1<v&&l<C;)p=p<<6|63&b[l++],v--;1<v?E[g++]=65533:p<65536?E[g++]=p:(p-=65536,E[g++]=55296|p>>10&1023,E[g++]=56320|1023&p)}return E.length!==g&&(E.subarray?E=E.subarray(0,g):E.length=g),s.applyFromCharCode(E)}(d=s.transformTo(u.uint8array?"uint8array":"array",d))},s.inherits(f,h),f.prototype.processChunk=function(d){var b=s.transformTo(u.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var l=b;(b=new Uint8Array(l.length+this.leftOver.length)).set(this.leftOver,0),b.set(l,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var g=function(v,C){var E;for((C=C||v.length)>v.length&&(C=v.length),E=C-1;0<=E&&(192&v[E])==128;)E--;return E<0||E===0?C:E+_[v[E]]>C?E:C}(b),p=b;g!==b.length&&(u.uint8array?(p=b.subarray(0,g),this.leftOver=b.subarray(g,b.length)):(p=b.slice(0,g),this.leftOver=b.slice(g,b.length))),this.push({data:c.utf8decode(p),meta:d.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:c.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},c.Utf8DecodeWorker=f,s.inherits(w,h),w.prototype.processChunk=function(d){this.push({data:c.utf8encode(d.data),meta:d.meta})},c.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,c){var s=t("./support"),u=t("./base64"),a=t("./nodejsUtils"),h=t("./external");function _(l){return l}function k(l,g){for(var p=0;p<l.length;++p)g[p]=255&l.charCodeAt(p);return g}t("setimmediate"),c.newBlob=function(l,g){c.checkSupport("blob");try{return new Blob([l],{type:g})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(l),p.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(l,g,p){var v=[],C=0,E=l.length;if(E<=p)return String.fromCharCode.apply(null,l);for(;C<E;)g==="array"||g==="nodebuffer"?v.push(String.fromCharCode.apply(null,l.slice(C,Math.min(C+p,E)))):v.push(String.fromCharCode.apply(null,l.subarray(C,Math.min(C+p,E)))),C+=p;return v.join("")},stringifyByChar:function(l){for(var g="",p=0;p<l.length;p++)g+=String.fromCharCode(l[p]);return g},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function w(l){var g=65536,p=c.getTypeOf(l),v=!0;if(p==="uint8array"?v=f.applyCanBeUsed.uint8array:p==="nodebuffer"&&(v=f.applyCanBeUsed.nodebuffer),v)for(;1<g;)try{return f.stringifyByChunk(l,p,g)}catch{g=Math.floor(g/2)}return f.stringifyByChar(l)}function d(l,g){for(var p=0;p<l.length;p++)g[p]=l[p];return g}c.applyFromCharCode=w;var b={};b.string={string:_,array:function(l){return k(l,new Array(l.length))},arraybuffer:function(l){return b.string.uint8array(l).buffer},uint8array:function(l){return k(l,new Uint8Array(l.length))},nodebuffer:function(l){return k(l,a.allocBuffer(l.length))}},b.array={string:w,array:_,arraybuffer:function(l){return new Uint8Array(l).buffer},uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return a.newBufferFrom(l)}},b.arraybuffer={string:function(l){return w(new Uint8Array(l))},array:function(l){return d(new Uint8Array(l),new Array(l.byteLength))},arraybuffer:_,uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return a.newBufferFrom(new Uint8Array(l))}},b.uint8array={string:w,array:function(l){return d(l,new Array(l.length))},arraybuffer:function(l){return l.buffer},uint8array:_,nodebuffer:function(l){return a.newBufferFrom(l)}},b.nodebuffer={string:w,array:function(l){return d(l,new Array(l.length))},arraybuffer:function(l){return b.nodebuffer.uint8array(l).buffer},uint8array:function(l){return d(l,new Uint8Array(l.length))},nodebuffer:_},c.transformTo=function(l,g){if(g=g||"",!l)return g;c.checkSupport(l);var p=c.getTypeOf(g);return b[p][l](g)},c.resolve=function(l){for(var g=l.split("/"),p=[],v=0;v<g.length;v++){var C=g[v];C==="."||C===""&&v!==0&&v!==g.length-1||(C===".."?p.pop():p.push(C))}return p.join("/")},c.getTypeOf=function(l){return typeof l=="string"?"string":Object.prototype.toString.call(l)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(l)?"nodebuffer":s.uint8array&&l instanceof Uint8Array?"uint8array":s.arraybuffer&&l instanceof ArrayBuffer?"arraybuffer":void 0},c.checkSupport=function(l){if(!s[l.toLowerCase()])throw new Error(l+" is not supported by this platform")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(l){var g,p,v="";for(p=0;p<(l||"").length;p++)v+="\\x"+((g=l.charCodeAt(p))<16?"0":"")+g.toString(16).toUpperCase();return v},c.delay=function(l,g,p){setImmediate(function(){l.apply(p||null,g||[])})},c.inherits=function(l,g){function p(){}p.prototype=g.prototype,l.prototype=new p},c.extend=function(){var l,g,p={};for(l=0;l<arguments.length;l++)for(g in arguments[l])Object.prototype.hasOwnProperty.call(arguments[l],g)&&p[g]===void 0&&(p[g]=arguments[l][g]);return p},c.prepareContent=function(l,g,p,v,C){return h.Promise.resolve(g).then(function(E){return s.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader!="undefined"?new h.Promise(function(A,$){var P=new FileReader;P.onload=function(W){A(W.target.result)},P.onerror=function(W){$(W.target.error)},P.readAsArrayBuffer(E)}):E}).then(function(E){var A=c.getTypeOf(E);return A?(A==="arraybuffer"?E=c.transformTo("uint8array",E):A==="string"&&(C?E=u.decode(E):p&&v!==!0&&(E=function($){return k($,s.uint8array?new Uint8Array($.length):new Array($.length))}(E))),E):h.Promise.reject(new Error("Can't read the data of '"+l+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,c){var s=t("./reader/readerFor"),u=t("./utils"),a=t("./signature"),h=t("./zipEntry"),_=t("./support");function k(f){this.files=[],this.loadOptions=f}k.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(w)+", expected "+u.pretty(f)+")")}},isSignature:function(f,w){var d=this.reader.index;this.reader.setIndex(f);var b=this.reader.readString(4)===w;return this.reader.setIndex(d),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),w=_.uint8array?"uint8array":"array",d=u.transformTo(w,f);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,w,d,b=this.zip64EndOfCentralSize-44;0<b;)f=this.reader.readInt(2),w=this.reader.readInt(4),d=this.reader.readData(w),this.zip64ExtensibleData[f]={id:f,length:w,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,w;for(f=0;f<this.files.length;f++)w=this.files[f],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var w=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var b=w-d;if(0<b)this.isSignature(w,a.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(f){this.reader=s(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=k},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,c){var s=t("./reader/readerFor"),u=t("./utils"),a=t("./compressedObject"),h=t("./crc32"),_=t("./utf8"),k=t("./compressions"),f=t("./support");function w(d,b){this.options=d,this.loadOptions=b}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var b,l;if(d.skip(22),this.fileNameLength=d.readInt(2),l=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(l),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(g){for(var p in k)if(Object.prototype.hasOwnProperty.call(k,p)&&k[p].magic===g)return k[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,b,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var b=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(b),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=s(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var b,l,g,p=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<p;)b=d.readInt(2),l=d.readInt(2),g=d.readData(l),this.extraFields[b]={id:b,length:l,value:g};d.setIndex(p)},handleUTF8:function(){var d=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=_.utf8decode(this.fileName),this.fileCommentStr=_.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var l=u.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(l)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var p=u.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var b=s(d.value);return b.readInt(1)!==1||h(this.fileName)!==b.readInt(4)?null:_.utf8decode(b.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var b=s(d.value);return b.readInt(1)!==1||h(this.fileComment)!==b.readInt(4)?null:_.utf8decode(b.readData(d.length-5))}return null}},i.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,c){function s(b,l,g){this.name=b,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=l,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var u=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),h=t("./utf8"),_=t("./compressedObject"),k=t("./stream/GenericWorker");s.prototype={internalStream:function(b){var l=null,g="string";try{if(!b)throw new Error("No output type specified.");var p=(g=b.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),l=this._decompressWorker();var v=!this._dataBinary;v&&!p&&(l=l.pipe(new h.Utf8EncodeWorker)),!v&&p&&(l=l.pipe(new h.Utf8DecodeWorker))}catch(C){(l=new k("error")).error(C)}return new u(l,g,"")},async:function(b,l){return this.internalStream(b).accumulate(l)},nodeStream:function(b,l){return this.internalStream(b||"nodebuffer").toNodejsStream(l)},_compressWorker:function(b,l){if(this._data instanceof _&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new h.Utf8EncodeWorker)),_.createWorkerFrom(g,b,l)},_decompressWorker:function(){return this._data instanceof _?this._data.getContentWorker():this._data instanceof k?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<f.length;d++)s.prototype[f[d]]=w;i.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,c){(function(s){var u,a,h=s.MutationObserver||s.WebKitMutationObserver;if(h){var _=0,k=new h(b),f=s.document.createTextNode("");k.observe(f,{characterData:!0}),u=function(){f.data=_=++_%2}}else if(s.setImmediate||s.MessageChannel===void 0)u="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var l=s.document.createElement("script");l.onreadystatechange=function(){b(),l.onreadystatechange=null,l.parentNode.removeChild(l),l=null},s.document.documentElement.appendChild(l)}:function(){setTimeout(b,0)};else{var w=new s.MessageChannel;w.port1.onmessage=b,u=function(){w.port2.postMessage(0)}}var d=[];function b(){var l,g;a=!0;for(var p=d.length;p;){for(g=d,d=[],l=-1;++l<p;)g[l]();p=d.length}a=!1}i.exports=function(l){d.push(l)!==1||a||u()}}).call(this,typeof oe!="undefined"?oe:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(t,i,c){var s=t("immediate");function u(){}var a={},h=["REJECTED"],_=["FULFILLED"],k=["PENDING"];function f(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=k,this.queue=[],this.outcome=void 0,p!==u&&l(this,p)}function w(p,v,C){this.promise=p,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function d(p,v,C){s(function(){var E;try{E=v(C)}catch(A){return a.reject(p,A)}E===p?a.reject(p,new TypeError("Cannot resolve promise with itself")):a.resolve(p,E)})}function b(p){var v=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof v=="function")return function(){v.apply(p,arguments)}}function l(p,v){var C=!1;function E(P){C||(C=!0,a.reject(p,P))}function A(P){C||(C=!0,a.resolve(p,P))}var $=g(function(){v(A,E)});$.status==="error"&&E($.value)}function g(p,v){var C={};try{C.value=p(v),C.status="success"}catch(E){C.status="error",C.value=E}return C}(i.exports=f).prototype.finally=function(p){if(typeof p!="function")return this;var v=this.constructor;return this.then(function(C){return v.resolve(p()).then(function(){return C})},function(C){return v.resolve(p()).then(function(){throw C})})},f.prototype.catch=function(p){return this.then(null,p)},f.prototype.then=function(p,v){if(typeof p!="function"&&this.state===_||typeof v!="function"&&this.state===h)return this;var C=new this.constructor(u);return this.state!==k?d(C,this.state===_?p:v,this.outcome):this.queue.push(new w(C,p,v)),C},w.prototype.callFulfilled=function(p){a.resolve(this.promise,p)},w.prototype.otherCallFulfilled=function(p){d(this.promise,this.onFulfilled,p)},w.prototype.callRejected=function(p){a.reject(this.promise,p)},w.prototype.otherCallRejected=function(p){d(this.promise,this.onRejected,p)},a.resolve=function(p,v){var C=g(b,v);if(C.status==="error")return a.reject(p,C.value);var E=C.value;if(E)l(p,E);else{p.state=_,p.outcome=v;for(var A=-1,$=p.queue.length;++A<$;)p.queue[A].callFulfilled(v)}return p},a.reject=function(p,v){p.state=h,p.outcome=v;for(var C=-1,E=p.queue.length;++C<E;)p.queue[C].callRejected(v);return p},f.resolve=function(p){return p instanceof this?p:a.resolve(new this(u),p)},f.reject=function(p){var v=new this(u);return a.reject(v,p)},f.all=function(p){var v=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=p.length,E=!1;if(!C)return this.resolve([]);for(var A=new Array(C),$=0,P=-1,W=new this(u);++P<C;)R(p[P],P);return W;function R(U,X){v.resolve(U).then(function(S){A[X]=S,++$!==C||E||(E=!0,a.resolve(W,A))},function(S){E||(E=!0,a.reject(W,S))})}},f.race=function(p){var v=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=p.length,E=!1;if(!C)return this.resolve([]);for(var A=-1,$=new this(u);++A<C;)P=p[A],v.resolve(P).then(function(W){E||(E=!0,a.resolve($,W))},function(W){E||(E=!0,a.reject($,W))});var P;return $}},{immediate:36}],38:[function(t,i,c){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,c){var s=t("./zlib/deflate"),u=t("./utils/common"),a=t("./utils/strings"),h=t("./zlib/messages"),_=t("./zlib/zstream"),k=Object.prototype.toString,f=0,w=-1,d=0,b=8;function l(p){if(!(this instanceof l))return new l(p);this.options=u.assign({level:w,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},p||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var C=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(C!==f)throw new Error(h[C]);if(v.header&&s.deflateSetHeader(this.strm,v.header),v.dictionary){var E;if(E=typeof v.dictionary=="string"?a.string2buf(v.dictionary):k.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(C=s.deflateSetDictionary(this.strm,E))!==f)throw new Error(h[C]);this._dict_set=!0}}function g(p,v){var C=new l(v);if(C.push(p,!0),C.err)throw C.msg||h[C.err];return C.result}l.prototype.push=function(p,v){var C,E,A=this.strm,$=this.options.chunkSize;if(this.ended)return!1;E=v===~~v?v:v===!0?4:0,typeof p=="string"?A.input=a.string2buf(p):k.call(p)==="[object ArrayBuffer]"?A.input=new Uint8Array(p):A.input=p,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new u.Buf8($),A.next_out=0,A.avail_out=$),(C=s.deflate(A,E))!==1&&C!==f)return this.onEnd(C),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(u.shrinkBuf(A.output,A.next_out))):this.onData(u.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&C!==1);return E===4?(C=s.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===f):E!==2||(this.onEnd(f),!(A.avail_out=0))},l.prototype.onData=function(p){this.chunks.push(p)},l.prototype.onEnd=function(p){p===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},c.Deflate=l,c.deflate=g,c.deflateRaw=function(p,v){return(v=v||{}).raw=!0,g(p,v)},c.gzip=function(p,v){return(v=v||{}).gzip=!0,g(p,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,c){var s=t("./zlib/inflate"),u=t("./utils/common"),a=t("./utils/strings"),h=t("./zlib/constants"),_=t("./zlib/messages"),k=t("./zlib/zstream"),f=t("./zlib/gzheader"),w=Object.prototype.toString;function d(l){if(!(this instanceof d))return new d(l);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},l||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||l&&l.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&(15&g.windowBits)==0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var p=s.inflateInit2(this.strm,g.windowBits);if(p!==h.Z_OK)throw new Error(_[p]);this.header=new f,s.inflateGetHeader(this.strm,this.header)}function b(l,g){var p=new d(g);if(p.push(l,!0),p.err)throw p.msg||_[p.err];return p.result}d.prototype.push=function(l,g){var p,v,C,E,A,$,P=this.strm,W=this.options.chunkSize,R=this.options.dictionary,U=!1;if(this.ended)return!1;v=g===~~g?g:g===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof l=="string"?P.input=a.binstring2buf(l):w.call(l)==="[object ArrayBuffer]"?P.input=new Uint8Array(l):P.input=l,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new u.Buf8(W),P.next_out=0,P.avail_out=W),(p=s.inflate(P,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&R&&($=typeof R=="string"?a.string2buf(R):w.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,p=s.inflateSetDictionary(this.strm,$)),p===h.Z_BUF_ERROR&&U===!0&&(p=h.Z_OK,U=!1),p!==h.Z_STREAM_END&&p!==h.Z_OK)return this.onEnd(p),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&p!==h.Z_STREAM_END&&(P.avail_in!==0||v!==h.Z_FINISH&&v!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=a.utf8border(P.output,P.next_out),E=P.next_out-C,A=a.buf2string(P.output,C),P.next_out=E,P.avail_out=W-E,E&&u.arraySet(P.output,P.output,C,E,0),this.onData(A)):this.onData(u.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(U=!0)}while((0<P.avail_in||P.avail_out===0)&&p!==h.Z_STREAM_END);return p===h.Z_STREAM_END&&(v=h.Z_FINISH),v===h.Z_FINISH?(p=s.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===h.Z_OK):v!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(P.avail_out=0))},d.prototype.onData=function(l){this.chunks.push(l)},d.prototype.onEnd=function(l){l===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},c.Inflate=d,c.inflate=b,c.inflateRaw=function(l,g){return(g=g||{}).raw=!0,b(l,g)},c.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,c){var s=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";c.assign=function(h){for(var _=Array.prototype.slice.call(arguments,1);_.length;){var k=_.shift();if(k){if(typeof k!="object")throw new TypeError(k+"must be non-object");for(var f in k)k.hasOwnProperty(f)&&(h[f]=k[f])}}return h},c.shrinkBuf=function(h,_){return h.length===_?h:h.subarray?h.subarray(0,_):(h.length=_,h)};var u={arraySet:function(h,_,k,f,w){if(_.subarray&&h.subarray)h.set(_.subarray(k,k+f),w);else for(var d=0;d<f;d++)h[w+d]=_[k+d]},flattenChunks:function(h){var _,k,f,w,d,b;for(_=f=0,k=h.length;_<k;_++)f+=h[_].length;for(b=new Uint8Array(f),_=w=0,k=h.length;_<k;_++)d=h[_],b.set(d,w),w+=d.length;return b}},a={arraySet:function(h,_,k,f,w){for(var d=0;d<f;d++)h[w+d]=_[k+d]},flattenChunks:function(h){return[].concat.apply([],h)}};c.setTyped=function(h){h?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,u)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,a))},c.setTyped(s)},{}],42:[function(t,i,c){var s=t("./common"),u=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var h=new s.Buf8(256),_=0;_<256;_++)h[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;function k(f,w){if(w<65537&&(f.subarray&&a||!f.subarray&&u))return String.fromCharCode.apply(null,s.shrinkBuf(f,w));for(var d="",b=0;b<w;b++)d+=String.fromCharCode(f[b]);return d}h[254]=h[254]=1,c.string2buf=function(f){var w,d,b,l,g,p=f.length,v=0;for(l=0;l<p;l++)(64512&(d=f.charCodeAt(l)))==55296&&l+1<p&&(64512&(b=f.charCodeAt(l+1)))==56320&&(d=65536+(d-55296<<10)+(b-56320),l++),v+=d<128?1:d<2048?2:d<65536?3:4;for(w=new s.Buf8(v),l=g=0;g<v;l++)(64512&(d=f.charCodeAt(l)))==55296&&l+1<p&&(64512&(b=f.charCodeAt(l+1)))==56320&&(d=65536+(d-55296<<10)+(b-56320),l++),d<128?w[g++]=d:(d<2048?w[g++]=192|d>>>6:(d<65536?w[g++]=224|d>>>12:(w[g++]=240|d>>>18,w[g++]=128|d>>>12&63),w[g++]=128|d>>>6&63),w[g++]=128|63&d);return w},c.buf2binstring=function(f){return k(f,f.length)},c.binstring2buf=function(f){for(var w=new s.Buf8(f.length),d=0,b=w.length;d<b;d++)w[d]=f.charCodeAt(d);return w},c.buf2string=function(f,w){var d,b,l,g,p=w||f.length,v=new Array(2*p);for(d=b=0;d<p;)if((l=f[d++])<128)v[b++]=l;else if(4<(g=h[l]))v[b++]=65533,d+=g-1;else{for(l&=g===2?31:g===3?15:7;1<g&&d<p;)l=l<<6|63&f[d++],g--;1<g?v[b++]=65533:l<65536?v[b++]=l:(l-=65536,v[b++]=55296|l>>10&1023,v[b++]=56320|1023&l)}return k(v,b)},c.utf8border=function(f,w){var d;for((w=w||f.length)>f.length&&(w=f.length),d=w-1;0<=d&&(192&f[d])==128;)d--;return d<0||d===0?w:d+h[f[d]]>w?d:w}},{"./common":41}],43:[function(t,i,c){i.exports=function(s,u,a,h){for(var _=65535&s|0,k=s>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;k=k+(_=_+u[h++]|0)|0,--f;);_%=65521,k%=65521}return _|k<<16|0}},{}],44:[function(t,i,c){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,c){var s=function(){for(var u,a=[],h=0;h<256;h++){u=h;for(var _=0;_<8;_++)u=1&u?3988292384^u>>>1:u>>>1;a[h]=u}return a}();i.exports=function(u,a,h,_){var k=s,f=_+h;u^=-1;for(var w=_;w<f;w++)u=u>>>8^k[255&(u^a[w])];return-1^u}},{}],46:[function(t,i,c){var s,u=t("../utils/common"),a=t("./trees"),h=t("./adler32"),_=t("./crc32"),k=t("./messages"),f=0,w=4,d=0,b=-2,l=-1,g=4,p=2,v=8,C=9,E=286,A=30,$=19,P=2*E+1,W=15,R=3,U=258,X=U+R+1,S=42,T=113,n=1,J=2,et=3,j=4;function nt(r,B){return r.msg=k[B],B}function M(r){return(r<<1)-(4<r?9:0)}function tt(r){for(var B=r.length;0<=--B;)r[B]=0}function O(r){var B=r.state,D=B.pending;D>r.avail_out&&(D=r.avail_out),D!==0&&(u.arraySet(r.output,B.pending_buf,B.pending_out,D,r.next_out),r.next_out+=D,B.pending_out+=D,r.total_out+=D,r.avail_out-=D,B.pending-=D,B.pending===0&&(B.pending_out=0))}function z(r,B){a._tr_flush_block(r,0<=r.block_start?r.block_start:-1,r.strstart-r.block_start,B),r.block_start=r.strstart,O(r.strm)}function Y(r,B){r.pending_buf[r.pending++]=B}function H(r,B){r.pending_buf[r.pending++]=B>>>8&255,r.pending_buf[r.pending++]=255&B}function V(r,B){var D,y,m=r.max_chain_length,x=r.strstart,N=r.prev_length,F=r.nice_match,I=r.strstart>r.w_size-X?r.strstart-(r.w_size-X):0,Z=r.window,G=r.w_mask,q=r.prev,Q=r.strstart+U,ot=Z[x+N-1],at=Z[x+N];r.prev_length>=r.good_match&&(m>>=2),F>r.lookahead&&(F=r.lookahead);do if(Z[(D=B)+N]===at&&Z[D+N-1]===ot&&Z[D]===Z[x]&&Z[++D]===Z[x+1]){x+=2,D++;do;while(Z[++x]===Z[++D]&&Z[++x]===Z[++D]&&Z[++x]===Z[++D]&&Z[++x]===Z[++D]&&Z[++x]===Z[++D]&&Z[++x]===Z[++D]&&Z[++x]===Z[++D]&&Z[++x]===Z[++D]&&x<Q);if(y=U-(Q-x),x=Q-U,N<y){if(r.match_start=B,F<=(N=y))break;ot=Z[x+N-1],at=Z[x+N]}}while((B=q[B&G])>I&&--m!=0);return N<=r.lookahead?N:r.lookahead}function ct(r){var B,D,y,m,x,N,F,I,Z,G,q=r.w_size;do{if(m=r.window_size-r.lookahead-r.strstart,r.strstart>=q+(q-X)){for(u.arraySet(r.window,r.window,q,q,0),r.match_start-=q,r.strstart-=q,r.block_start-=q,B=D=r.hash_size;y=r.head[--B],r.head[B]=q<=y?y-q:0,--D;);for(B=D=q;y=r.prev[--B],r.prev[B]=q<=y?y-q:0,--D;);m+=q}if(r.strm.avail_in===0)break;if(N=r.strm,F=r.window,I=r.strstart+r.lookahead,Z=m,G=void 0,G=N.avail_in,Z<G&&(G=Z),D=G===0?0:(N.avail_in-=G,u.arraySet(F,N.input,N.next_in,G,I),N.state.wrap===1?N.adler=h(N.adler,F,G,I):N.state.wrap===2&&(N.adler=_(N.adler,F,G,I)),N.next_in+=G,N.total_in+=G,G),r.lookahead+=D,r.lookahead+r.insert>=R)for(x=r.strstart-r.insert,r.ins_h=r.window[x],r.ins_h=(r.ins_h<<r.hash_shift^r.window[x+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[x+R-1])&r.hash_mask,r.prev[x&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=x,x++,r.insert--,!(r.lookahead+r.insert<R)););}while(r.lookahead<X&&r.strm.avail_in!==0)}function gt(r,B){for(var D,y;;){if(r.lookahead<X){if(ct(r),r.lookahead<X&&B===f)return n;if(r.lookahead===0)break}if(D=0,r.lookahead>=R&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+R-1])&r.hash_mask,D=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),D!==0&&r.strstart-D<=r.w_size-X&&(r.match_length=V(r,D)),r.match_length>=R)if(y=a._tr_tally(r,r.strstart-r.match_start,r.match_length-R),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=R){for(r.match_length--;r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+R-1])&r.hash_mask,D=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart,--r.match_length!=0;);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else y=a._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(y&&(z(r,!1),r.strm.avail_out===0))return n}return r.insert=r.strstart<R-1?r.strstart:R-1,B===w?(z(r,!0),r.strm.avail_out===0?et:j):r.last_lit&&(z(r,!1),r.strm.avail_out===0)?n:J}function st(r,B){for(var D,y,m;;){if(r.lookahead<X){if(ct(r),r.lookahead<X&&B===f)return n;if(r.lookahead===0)break}if(D=0,r.lookahead>=R&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+R-1])&r.hash_mask,D=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=R-1,D!==0&&r.prev_length<r.max_lazy_match&&r.strstart-D<=r.w_size-X&&(r.match_length=V(r,D),r.match_length<=5&&(r.strategy===1||r.match_length===R&&4096<r.strstart-r.match_start)&&(r.match_length=R-1)),r.prev_length>=R&&r.match_length<=r.prev_length){for(m=r.strstart+r.lookahead-R,y=a._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-R),r.lookahead-=r.prev_length-1,r.prev_length-=2;++r.strstart<=m&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+R-1])&r.hash_mask,D=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),--r.prev_length!=0;);if(r.match_available=0,r.match_length=R-1,r.strstart++,y&&(z(r,!1),r.strm.avail_out===0))return n}else if(r.match_available){if((y=a._tr_tally(r,0,r.window[r.strstart-1]))&&z(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return n}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(y=a._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<R-1?r.strstart:R-1,B===w?(z(r,!0),r.strm.avail_out===0?et:j):r.last_lit&&(z(r,!1),r.strm.avail_out===0)?n:J}function it(r,B,D,y,m){this.good_length=r,this.max_lazy=B,this.nice_length=D,this.max_chain=y,this.func=m}function pt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*P),this.dyn_dtree=new u.Buf16(2*(2*A+1)),this.bl_tree=new u.Buf16(2*(2*$+1)),tt(this.dyn_ltree),tt(this.dyn_dtree),tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(W+1),this.heap=new u.Buf16(2*E+1),tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*E+1),tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ut(r){var B;return r&&r.state?(r.total_in=r.total_out=0,r.data_type=p,(B=r.state).pending=0,B.pending_out=0,B.wrap<0&&(B.wrap=-B.wrap),B.status=B.wrap?S:T,r.adler=B.wrap===2?0:1,B.last_flush=f,a._tr_init(B),d):nt(r,b)}function Ct(r){var B=ut(r);return B===d&&function(D){D.window_size=2*D.w_size,tt(D.head),D.max_lazy_match=s[D.level].max_lazy,D.good_match=s[D.level].good_length,D.nice_match=s[D.level].nice_length,D.max_chain_length=s[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=R-1,D.match_available=0,D.ins_h=0}(r.state),B}function vt(r,B,D,y,m,x){if(!r)return b;var N=1;if(B===l&&(B=6),y<0?(N=0,y=-y):15<y&&(N=2,y-=16),m<1||C<m||D!==v||y<8||15<y||B<0||9<B||x<0||g<x)return nt(r,b);y===8&&(y=9);var F=new pt;return(r.state=F).strm=r,F.wrap=N,F.gzhead=null,F.w_bits=y,F.w_size=1<<F.w_bits,F.w_mask=F.w_size-1,F.hash_bits=m+7,F.hash_size=1<<F.hash_bits,F.hash_mask=F.hash_size-1,F.hash_shift=~~((F.hash_bits+R-1)/R),F.window=new u.Buf8(2*F.w_size),F.head=new u.Buf16(F.hash_size),F.prev=new u.Buf16(F.w_size),F.lit_bufsize=1<<m+6,F.pending_buf_size=4*F.lit_bufsize,F.pending_buf=new u.Buf8(F.pending_buf_size),F.d_buf=1*F.lit_bufsize,F.l_buf=3*F.lit_bufsize,F.level=B,F.strategy=x,F.method=D,Ct(r)}s=[new it(0,0,0,0,function(r,B){var D=65535;for(D>r.pending_buf_size-5&&(D=r.pending_buf_size-5);;){if(r.lookahead<=1){if(ct(r),r.lookahead===0&&B===f)return n;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var y=r.block_start+D;if((r.strstart===0||r.strstart>=y)&&(r.lookahead=r.strstart-y,r.strstart=y,z(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-X&&(z(r,!1),r.strm.avail_out===0))return n}return r.insert=0,B===w?(z(r,!0),r.strm.avail_out===0?et:j):(r.strstart>r.block_start&&(z(r,!1),r.strm.avail_out),n)}),new it(4,4,8,4,gt),new it(4,5,16,8,gt),new it(4,6,32,32,gt),new it(4,4,16,16,st),new it(8,16,32,32,st),new it(8,16,128,128,st),new it(8,32,128,256,st),new it(32,128,258,1024,st),new it(32,258,258,4096,st)],c.deflateInit=function(r,B){return vt(r,B,v,15,8,0)},c.deflateInit2=vt,c.deflateReset=Ct,c.deflateResetKeep=ut,c.deflateSetHeader=function(r,B){return r&&r.state?r.state.wrap!==2?b:(r.state.gzhead=B,d):b},c.deflate=function(r,B){var D,y,m,x;if(!r||!r.state||5<B||B<0)return r?nt(r,b):b;if(y=r.state,!r.output||!r.input&&r.avail_in!==0||y.status===666&&B!==w)return nt(r,r.avail_out===0?-5:b);if(y.strm=r,D=y.last_flush,y.last_flush=B,y.status===S)if(y.wrap===2)r.adler=0,Y(y,31),Y(y,139),Y(y,8),y.gzhead?(Y(y,(y.gzhead.text?1:0)+(y.gzhead.hcrc?2:0)+(y.gzhead.extra?4:0)+(y.gzhead.name?8:0)+(y.gzhead.comment?16:0)),Y(y,255&y.gzhead.time),Y(y,y.gzhead.time>>8&255),Y(y,y.gzhead.time>>16&255),Y(y,y.gzhead.time>>24&255),Y(y,y.level===9?2:2<=y.strategy||y.level<2?4:0),Y(y,255&y.gzhead.os),y.gzhead.extra&&y.gzhead.extra.length&&(Y(y,255&y.gzhead.extra.length),Y(y,y.gzhead.extra.length>>8&255)),y.gzhead.hcrc&&(r.adler=_(r.adler,y.pending_buf,y.pending,0)),y.gzindex=0,y.status=69):(Y(y,0),Y(y,0),Y(y,0),Y(y,0),Y(y,0),Y(y,y.level===9?2:2<=y.strategy||y.level<2?4:0),Y(y,3),y.status=T);else{var N=v+(y.w_bits-8<<4)<<8;N|=(2<=y.strategy||y.level<2?0:y.level<6?1:y.level===6?2:3)<<6,y.strstart!==0&&(N|=32),N+=31-N%31,y.status=T,H(y,N),y.strstart!==0&&(H(y,r.adler>>>16),H(y,65535&r.adler)),r.adler=1}if(y.status===69)if(y.gzhead.extra){for(m=y.pending;y.gzindex<(65535&y.gzhead.extra.length)&&(y.pending!==y.pending_buf_size||(y.gzhead.hcrc&&y.pending>m&&(r.adler=_(r.adler,y.pending_buf,y.pending-m,m)),O(r),m=y.pending,y.pending!==y.pending_buf_size));)Y(y,255&y.gzhead.extra[y.gzindex]),y.gzindex++;y.gzhead.hcrc&&y.pending>m&&(r.adler=_(r.adler,y.pending_buf,y.pending-m,m)),y.gzindex===y.gzhead.extra.length&&(y.gzindex=0,y.status=73)}else y.status=73;if(y.status===73)if(y.gzhead.name){m=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>m&&(r.adler=_(r.adler,y.pending_buf,y.pending-m,m)),O(r),m=y.pending,y.pending===y.pending_buf_size)){x=1;break}x=y.gzindex<y.gzhead.name.length?255&y.gzhead.name.charCodeAt(y.gzindex++):0,Y(y,x)}while(x!==0);y.gzhead.hcrc&&y.pending>m&&(r.adler=_(r.adler,y.pending_buf,y.pending-m,m)),x===0&&(y.gzindex=0,y.status=91)}else y.status=91;if(y.status===91)if(y.gzhead.comment){m=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>m&&(r.adler=_(r.adler,y.pending_buf,y.pending-m,m)),O(r),m=y.pending,y.pending===y.pending_buf_size)){x=1;break}x=y.gzindex<y.gzhead.comment.length?255&y.gzhead.comment.charCodeAt(y.gzindex++):0,Y(y,x)}while(x!==0);y.gzhead.hcrc&&y.pending>m&&(r.adler=_(r.adler,y.pending_buf,y.pending-m,m)),x===0&&(y.status=103)}else y.status=103;if(y.status===103&&(y.gzhead.hcrc?(y.pending+2>y.pending_buf_size&&O(r),y.pending+2<=y.pending_buf_size&&(Y(y,255&r.adler),Y(y,r.adler>>8&255),r.adler=0,y.status=T)):y.status=T),y.pending!==0){if(O(r),r.avail_out===0)return y.last_flush=-1,d}else if(r.avail_in===0&&M(B)<=M(D)&&B!==w)return nt(r,-5);if(y.status===666&&r.avail_in!==0)return nt(r,-5);if(r.avail_in!==0||y.lookahead!==0||B!==f&&y.status!==666){var F=y.strategy===2?function(I,Z){for(var G;;){if(I.lookahead===0&&(ct(I),I.lookahead===0)){if(Z===f)return n;break}if(I.match_length=0,G=a._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,G&&(z(I,!1),I.strm.avail_out===0))return n}return I.insert=0,Z===w?(z(I,!0),I.strm.avail_out===0?et:j):I.last_lit&&(z(I,!1),I.strm.avail_out===0)?n:J}(y,B):y.strategy===3?function(I,Z){for(var G,q,Q,ot,at=I.window;;){if(I.lookahead<=U){if(ct(I),I.lookahead<=U&&Z===f)return n;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=R&&0<I.strstart&&(q=at[Q=I.strstart-1])===at[++Q]&&q===at[++Q]&&q===at[++Q]){ot=I.strstart+U;do;while(q===at[++Q]&&q===at[++Q]&&q===at[++Q]&&q===at[++Q]&&q===at[++Q]&&q===at[++Q]&&q===at[++Q]&&q===at[++Q]&&Q<ot);I.match_length=U-(ot-Q),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=R?(G=a._tr_tally(I,1,I.match_length-R),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(G=a._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),G&&(z(I,!1),I.strm.avail_out===0))return n}return I.insert=0,Z===w?(z(I,!0),I.strm.avail_out===0?et:j):I.last_lit&&(z(I,!1),I.strm.avail_out===0)?n:J}(y,B):s[y.level].func(y,B);if(F!==et&&F!==j||(y.status=666),F===n||F===et)return r.avail_out===0&&(y.last_flush=-1),d;if(F===J&&(B===1?a._tr_align(y):B!==5&&(a._tr_stored_block(y,0,0,!1),B===3&&(tt(y.head),y.lookahead===0&&(y.strstart=0,y.block_start=0,y.insert=0))),O(r),r.avail_out===0))return y.last_flush=-1,d}return B!==w?d:y.wrap<=0?1:(y.wrap===2?(Y(y,255&r.adler),Y(y,r.adler>>8&255),Y(y,r.adler>>16&255),Y(y,r.adler>>24&255),Y(y,255&r.total_in),Y(y,r.total_in>>8&255),Y(y,r.total_in>>16&255),Y(y,r.total_in>>24&255)):(H(y,r.adler>>>16),H(y,65535&r.adler)),O(r),0<y.wrap&&(y.wrap=-y.wrap),y.pending!==0?d:1)},c.deflateEnd=function(r){var B;return r&&r.state?(B=r.state.status)!==S&&B!==69&&B!==73&&B!==91&&B!==103&&B!==T&&B!==666?nt(r,b):(r.state=null,B===T?nt(r,-3):d):b},c.deflateSetDictionary=function(r,B){var D,y,m,x,N,F,I,Z,G=B.length;if(!r||!r.state||(x=(D=r.state).wrap)===2||x===1&&D.status!==S||D.lookahead)return b;for(x===1&&(r.adler=h(r.adler,B,G,0)),D.wrap=0,G>=D.w_size&&(x===0&&(tt(D.head),D.strstart=0,D.block_start=0,D.insert=0),Z=new u.Buf8(D.w_size),u.arraySet(Z,B,G-D.w_size,D.w_size,0),B=Z,G=D.w_size),N=r.avail_in,F=r.next_in,I=r.input,r.avail_in=G,r.next_in=0,r.input=B,ct(D);D.lookahead>=R;){for(y=D.strstart,m=D.lookahead-(R-1);D.ins_h=(D.ins_h<<D.hash_shift^D.window[y+R-1])&D.hash_mask,D.prev[y&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=y,y++,--m;);D.strstart=y,D.lookahead=R-1,ct(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=R-1,D.match_available=0,r.next_in=F,r.input=I,r.avail_in=N,D.wrap=x,d},c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,c){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,c){i.exports=function(s,u){var a,h,_,k,f,w,d,b,l,g,p,v,C,E,A,$,P,W,R,U,X,S,T,n,J;a=s.state,h=s.next_in,n=s.input,_=h+(s.avail_in-5),k=s.next_out,J=s.output,f=k-(u-s.avail_out),w=k+(s.avail_out-257),d=a.dmax,b=a.wsize,l=a.whave,g=a.wnext,p=a.window,v=a.hold,C=a.bits,E=a.lencode,A=a.distcode,$=(1<<a.lenbits)-1,P=(1<<a.distbits)-1;t:do{C<15&&(v+=n[h++]<<C,C+=8,v+=n[h++]<<C,C+=8),W=E[v&$];e:for(;;){if(v>>>=R=W>>>24,C-=R,(R=W>>>16&255)==0)J[k++]=65535&W;else{if(!(16&R)){if((64&R)==0){W=E[(65535&W)+(v&(1<<R)-1)];continue e}if(32&R){a.mode=12;break t}s.msg="invalid literal/length code",a.mode=30;break t}U=65535&W,(R&=15)&&(C<R&&(v+=n[h++]<<C,C+=8),U+=v&(1<<R)-1,v>>>=R,C-=R),C<15&&(v+=n[h++]<<C,C+=8,v+=n[h++]<<C,C+=8),W=A[v&P];r:for(;;){if(v>>>=R=W>>>24,C-=R,!(16&(R=W>>>16&255))){if((64&R)==0){W=A[(65535&W)+(v&(1<<R)-1)];continue r}s.msg="invalid distance code",a.mode=30;break t}if(X=65535&W,C<(R&=15)&&(v+=n[h++]<<C,(C+=8)<R&&(v+=n[h++]<<C,C+=8)),d<(X+=v&(1<<R)-1)){s.msg="invalid distance too far back",a.mode=30;break t}if(v>>>=R,C-=R,(R=k-f)<X){if(l<(R=X-R)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break t}if(T=p,(S=0)===g){if(S+=b-R,R<U){for(U-=R;J[k++]=p[S++],--R;);S=k-X,T=J}}else if(g<R){if(S+=b+g-R,(R-=g)<U){for(U-=R;J[k++]=p[S++],--R;);if(S=0,g<U){for(U-=R=g;J[k++]=p[S++],--R;);S=k-X,T=J}}}else if(S+=g-R,R<U){for(U-=R;J[k++]=p[S++],--R;);S=k-X,T=J}for(;2<U;)J[k++]=T[S++],J[k++]=T[S++],J[k++]=T[S++],U-=3;U&&(J[k++]=T[S++],1<U&&(J[k++]=T[S++]))}else{for(S=k-X;J[k++]=J[S++],J[k++]=J[S++],J[k++]=J[S++],2<(U-=3););U&&(J[k++]=J[S++],1<U&&(J[k++]=J[S++]))}break}}break}}while(h<_&&k<w);h-=U=C>>3,v&=(1<<(C-=U<<3))-1,s.next_in=h,s.next_out=k,s.avail_in=h<_?_-h+5:5-(h-_),s.avail_out=k<w?w-k+257:257-(k-w),a.hold=v,a.bits=C}},{}],49:[function(t,i,c){var s=t("../utils/common"),u=t("./adler32"),a=t("./crc32"),h=t("./inffast"),_=t("./inftrees"),k=1,f=2,w=0,d=-2,b=1,l=852,g=592;function p(S){return(S>>>24&255)+(S>>>8&65280)+((65280&S)<<8)+((255&S)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(S){var T;return S&&S.state?(T=S.state,S.total_in=S.total_out=T.total=0,S.msg="",T.wrap&&(S.adler=1&T.wrap),T.mode=b,T.last=0,T.havedict=0,T.dmax=32768,T.head=null,T.hold=0,T.bits=0,T.lencode=T.lendyn=new s.Buf32(l),T.distcode=T.distdyn=new s.Buf32(g),T.sane=1,T.back=-1,w):d}function E(S){var T;return S&&S.state?((T=S.state).wsize=0,T.whave=0,T.wnext=0,C(S)):d}function A(S,T){var n,J;return S&&S.state?(J=S.state,T<0?(n=0,T=-T):(n=1+(T>>4),T<48&&(T&=15)),T&&(T<8||15<T)?d:(J.window!==null&&J.wbits!==T&&(J.window=null),J.wrap=n,J.wbits=T,E(S))):d}function $(S,T){var n,J;return S?(J=new v,(S.state=J).window=null,(n=A(S,T))!==w&&(S.state=null),n):d}var P,W,R=!0;function U(S){if(R){var T;for(P=new s.Buf32(512),W=new s.Buf32(32),T=0;T<144;)S.lens[T++]=8;for(;T<256;)S.lens[T++]=9;for(;T<280;)S.lens[T++]=7;for(;T<288;)S.lens[T++]=8;for(_(k,S.lens,0,288,P,0,S.work,{bits:9}),T=0;T<32;)S.lens[T++]=5;_(f,S.lens,0,32,W,0,S.work,{bits:5}),R=!1}S.lencode=P,S.lenbits=9,S.distcode=W,S.distbits=5}function X(S,T,n,J){var et,j=S.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new s.Buf8(j.wsize)),J>=j.wsize?(s.arraySet(j.window,T,n-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(J<(et=j.wsize-j.wnext)&&(et=J),s.arraySet(j.window,T,n-J,et,j.wnext),(J-=et)?(s.arraySet(j.window,T,n-J,J,0),j.wnext=J,j.whave=j.wsize):(j.wnext+=et,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=et))),0}c.inflateReset=E,c.inflateReset2=A,c.inflateResetKeep=C,c.inflateInit=function(S){return $(S,15)},c.inflateInit2=$,c.inflate=function(S,T){var n,J,et,j,nt,M,tt,O,z,Y,H,V,ct,gt,st,it,pt,ut,Ct,vt,r,B,D,y,m=0,x=new s.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!S||!S.state||!S.output||!S.input&&S.avail_in!==0)return d;(n=S.state).mode===12&&(n.mode=13),nt=S.next_out,et=S.output,tt=S.avail_out,j=S.next_in,J=S.input,M=S.avail_in,O=n.hold,z=n.bits,Y=M,H=tt,B=w;t:for(;;)switch(n.mode){case b:if(n.wrap===0){n.mode=13;break}for(;z<16;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}if(2&n.wrap&&O===35615){x[n.check=0]=255&O,x[1]=O>>>8&255,n.check=a(n.check,x,2,0),z=O=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&O)<<8)+(O>>8))%31){S.msg="incorrect header check",n.mode=30;break}if((15&O)!=8){S.msg="unknown compression method",n.mode=30;break}if(z-=4,r=8+(15&(O>>>=4)),n.wbits===0)n.wbits=r;else if(r>n.wbits){S.msg="invalid window size",n.mode=30;break}n.dmax=1<<r,S.adler=n.check=1,n.mode=512&O?10:12,z=O=0;break;case 2:for(;z<16;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}if(n.flags=O,(255&n.flags)!=8){S.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){S.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=O>>8&1),512&n.flags&&(x[0]=255&O,x[1]=O>>>8&255,n.check=a(n.check,x,2,0)),z=O=0,n.mode=3;case 3:for(;z<32;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}n.head&&(n.head.time=O),512&n.flags&&(x[0]=255&O,x[1]=O>>>8&255,x[2]=O>>>16&255,x[3]=O>>>24&255,n.check=a(n.check,x,4,0)),z=O=0,n.mode=4;case 4:for(;z<16;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}n.head&&(n.head.xflags=255&O,n.head.os=O>>8),512&n.flags&&(x[0]=255&O,x[1]=O>>>8&255,n.check=a(n.check,x,2,0)),z=O=0,n.mode=5;case 5:if(1024&n.flags){for(;z<16;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}n.length=O,n.head&&(n.head.extra_len=O),512&n.flags&&(x[0]=255&O,x[1]=O>>>8&255,n.check=a(n.check,x,2,0)),z=O=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(M<(V=n.length)&&(V=M),V&&(n.head&&(r=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),s.arraySet(n.head.extra,J,j,V,r)),512&n.flags&&(n.check=a(n.check,J,V,j)),M-=V,j+=V,n.length-=V),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(M===0)break t;for(V=0;r=J[j+V++],n.head&&r&&n.length<65536&&(n.head.name+=String.fromCharCode(r)),r&&V<M;);if(512&n.flags&&(n.check=a(n.check,J,V,j)),M-=V,j+=V,r)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(M===0)break t;for(V=0;r=J[j+V++],n.head&&r&&n.length<65536&&(n.head.comment+=String.fromCharCode(r)),r&&V<M;);if(512&n.flags&&(n.check=a(n.check,J,V,j)),M-=V,j+=V,r)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;z<16;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}if(O!==(65535&n.check)){S.msg="header crc mismatch",n.mode=30;break}z=O=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),S.adler=n.check=0,n.mode=12;break;case 10:for(;z<32;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}S.adler=n.check=p(O),z=O=0,n.mode=11;case 11:if(n.havedict===0)return S.next_out=nt,S.avail_out=tt,S.next_in=j,S.avail_in=M,n.hold=O,n.bits=z,2;S.adler=n.check=1,n.mode=12;case 12:if(T===5||T===6)break t;case 13:if(n.last){O>>>=7&z,z-=7&z,n.mode=27;break}for(;z<3;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}switch(n.last=1&O,z-=1,3&(O>>>=1)){case 0:n.mode=14;break;case 1:if(U(n),n.mode=20,T!==6)break;O>>>=2,z-=2;break t;case 2:n.mode=17;break;case 3:S.msg="invalid block type",n.mode=30}O>>>=2,z-=2;break;case 14:for(O>>>=7&z,z-=7&z;z<32;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}if((65535&O)!=(O>>>16^65535)){S.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&O,z=O=0,n.mode=15,T===6)break t;case 15:n.mode=16;case 16:if(V=n.length){if(M<V&&(V=M),tt<V&&(V=tt),V===0)break t;s.arraySet(et,J,j,V,nt),M-=V,j+=V,tt-=V,nt+=V,n.length-=V;break}n.mode=12;break;case 17:for(;z<14;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}if(n.nlen=257+(31&O),O>>>=5,z-=5,n.ndist=1+(31&O),O>>>=5,z-=5,n.ncode=4+(15&O),O>>>=4,z-=4,286<n.nlen||30<n.ndist){S.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;z<3;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}n.lens[N[n.have++]]=7&O,O>>>=3,z-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,D={bits:n.lenbits},B=_(0,n.lens,0,19,n.lencode,0,n.work,D),n.lenbits=D.bits,B){S.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;it=(m=n.lencode[O&(1<<n.lenbits)-1])>>>16&255,pt=65535&m,!((st=m>>>24)<=z);){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}if(pt<16)O>>>=st,z-=st,n.lens[n.have++]=pt;else{if(pt===16){for(y=st+2;z<y;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}if(O>>>=st,z-=st,n.have===0){S.msg="invalid bit length repeat",n.mode=30;break}r=n.lens[n.have-1],V=3+(3&O),O>>>=2,z-=2}else if(pt===17){for(y=st+3;z<y;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}z-=st,r=0,V=3+(7&(O>>>=st)),O>>>=3,z-=3}else{for(y=st+7;z<y;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}z-=st,r=0,V=11+(127&(O>>>=st)),O>>>=7,z-=7}if(n.have+V>n.nlen+n.ndist){S.msg="invalid bit length repeat",n.mode=30;break}for(;V--;)n.lens[n.have++]=r}}if(n.mode===30)break;if(n.lens[256]===0){S.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,D={bits:n.lenbits},B=_(k,n.lens,0,n.nlen,n.lencode,0,n.work,D),n.lenbits=D.bits,B){S.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,D={bits:n.distbits},B=_(f,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D),n.distbits=D.bits,B){S.msg="invalid distances set",n.mode=30;break}if(n.mode=20,T===6)break t;case 20:n.mode=21;case 21:if(6<=M&&258<=tt){S.next_out=nt,S.avail_out=tt,S.next_in=j,S.avail_in=M,n.hold=O,n.bits=z,h(S,H),nt=S.next_out,et=S.output,tt=S.avail_out,j=S.next_in,J=S.input,M=S.avail_in,O=n.hold,z=n.bits,n.mode===12&&(n.back=-1);break}for(n.back=0;it=(m=n.lencode[O&(1<<n.lenbits)-1])>>>16&255,pt=65535&m,!((st=m>>>24)<=z);){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}if(it&&(240&it)==0){for(ut=st,Ct=it,vt=pt;it=(m=n.lencode[vt+((O&(1<<ut+Ct)-1)>>ut)])>>>16&255,pt=65535&m,!(ut+(st=m>>>24)<=z);){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}O>>>=ut,z-=ut,n.back+=ut}if(O>>>=st,z-=st,n.back+=st,n.length=pt,it===0){n.mode=26;break}if(32&it){n.back=-1,n.mode=12;break}if(64&it){S.msg="invalid literal/length code",n.mode=30;break}n.extra=15&it,n.mode=22;case 22:if(n.extra){for(y=n.extra;z<y;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}n.length+=O&(1<<n.extra)-1,O>>>=n.extra,z-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;it=(m=n.distcode[O&(1<<n.distbits)-1])>>>16&255,pt=65535&m,!((st=m>>>24)<=z);){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}if((240&it)==0){for(ut=st,Ct=it,vt=pt;it=(m=n.distcode[vt+((O&(1<<ut+Ct)-1)>>ut)])>>>16&255,pt=65535&m,!(ut+(st=m>>>24)<=z);){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}O>>>=ut,z-=ut,n.back+=ut}if(O>>>=st,z-=st,n.back+=st,64&it){S.msg="invalid distance code",n.mode=30;break}n.offset=pt,n.extra=15&it,n.mode=24;case 24:if(n.extra){for(y=n.extra;z<y;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}n.offset+=O&(1<<n.extra)-1,O>>>=n.extra,z-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){S.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(tt===0)break t;if(V=H-tt,n.offset>V){if((V=n.offset-V)>n.whave&&n.sane){S.msg="invalid distance too far back",n.mode=30;break}ct=V>n.wnext?(V-=n.wnext,n.wsize-V):n.wnext-V,V>n.length&&(V=n.length),gt=n.window}else gt=et,ct=nt-n.offset,V=n.length;for(tt<V&&(V=tt),tt-=V,n.length-=V;et[nt++]=gt[ct++],--V;);n.length===0&&(n.mode=21);break;case 26:if(tt===0)break t;et[nt++]=n.length,tt--,n.mode=21;break;case 27:if(n.wrap){for(;z<32;){if(M===0)break t;M--,O|=J[j++]<<z,z+=8}if(H-=tt,S.total_out+=H,n.total+=H,H&&(S.adler=n.check=n.flags?a(n.check,et,H,nt-H):u(n.check,et,H,nt-H)),H=tt,(n.flags?O:p(O))!==n.check){S.msg="incorrect data check",n.mode=30;break}z=O=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;z<32;){if(M===0)break t;M--,O+=J[j++]<<z,z+=8}if(O!==(4294967295&n.total)){S.msg="incorrect length check",n.mode=30;break}z=O=0}n.mode=29;case 29:B=1;break t;case 30:B=-3;break t;case 31:return-4;case 32:default:return d}return S.next_out=nt,S.avail_out=tt,S.next_in=j,S.avail_in=M,n.hold=O,n.bits=z,(n.wsize||H!==S.avail_out&&n.mode<30&&(n.mode<27||T!==4))&&X(S,S.output,S.next_out,H-S.avail_out)?(n.mode=31,-4):(Y-=S.avail_in,H-=S.avail_out,S.total_in+=Y,S.total_out+=H,n.total+=H,n.wrap&&H&&(S.adler=n.check=n.flags?a(n.check,et,H,S.next_out-H):u(n.check,et,H,S.next_out-H)),S.data_type=n.bits+(n.last?64:0)+(n.mode===12?128:0)+(n.mode===20||n.mode===15?256:0),(Y==0&&H===0||T===4)&&B===w&&(B=-5),B)},c.inflateEnd=function(S){if(!S||!S.state)return d;var T=S.state;return T.window&&(T.window=null),S.state=null,w},c.inflateGetHeader=function(S,T){var n;return S&&S.state?(2&(n=S.state).wrap)==0?d:((n.head=T).done=!1,w):d},c.inflateSetDictionary=function(S,T){var n,J=T.length;return S&&S.state?(n=S.state).wrap!==0&&n.mode!==11?d:n.mode===11&&u(1,T,J,0)!==n.check?-3:X(S,T,J,J)?(n.mode=31,-4):(n.havedict=1,w):d},c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,c){var s=t("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(k,f,w,d,b,l,g,p){var v,C,E,A,$,P,W,R,U,X=p.bits,S=0,T=0,n=0,J=0,et=0,j=0,nt=0,M=0,tt=0,O=0,z=null,Y=0,H=new s.Buf16(16),V=new s.Buf16(16),ct=null,gt=0;for(S=0;S<=15;S++)H[S]=0;for(T=0;T<d;T++)H[f[w+T]]++;for(et=X,J=15;1<=J&&H[J]===0;J--);if(J<et&&(et=J),J===0)return b[l++]=20971520,b[l++]=20971520,p.bits=1,0;for(n=1;n<J&&H[n]===0;n++);for(et<n&&(et=n),S=M=1;S<=15;S++)if(M<<=1,(M-=H[S])<0)return-1;if(0<M&&(k===0||J!==1))return-1;for(V[1]=0,S=1;S<15;S++)V[S+1]=V[S]+H[S];for(T=0;T<d;T++)f[w+T]!==0&&(g[V[f[w+T]]++]=T);if(P=k===0?(z=ct=g,19):k===1?(z=u,Y-=257,ct=a,gt-=257,256):(z=h,ct=_,-1),S=n,$=l,nt=T=O=0,E=-1,A=(tt=1<<(j=et))-1,k===1&&852<tt||k===2&&592<tt)return 1;for(;;){for(W=S-nt,U=g[T]<P?(R=0,g[T]):g[T]>P?(R=ct[gt+g[T]],z[Y+g[T]]):(R=96,0),v=1<<S-nt,n=C=1<<j;b[$+(O>>nt)+(C-=v)]=W<<24|R<<16|U|0,C!==0;);for(v=1<<S-1;O&v;)v>>=1;if(v!==0?(O&=v-1,O+=v):O=0,T++,--H[S]==0){if(S===J)break;S=f[w+g[T]]}if(et<S&&(O&A)!==E){for(nt===0&&(nt=et),$+=n,M=1<<(j=S-nt);j+nt<J&&!((M-=H[j+nt])<=0);)j++,M<<=1;if(tt+=1<<j,k===1&&852<tt||k===2&&592<tt)return 1;b[E=O&A]=et<<24|j<<16|$-l|0}}return O!==0&&(b[$+O]=S-nt<<24|64<<16|0),p.bits=et,0}},{"../utils/common":41}],51:[function(t,i,c){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,c){var s=t("../utils/common"),u=0,a=1;function h(m){for(var x=m.length;0<=--x;)m[x]=0}var _=0,k=29,f=256,w=f+1+k,d=30,b=19,l=2*w+1,g=15,p=16,v=7,C=256,E=16,A=17,$=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],W=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(w+2));h(X);var S=new Array(2*d);h(S);var T=new Array(512);h(T);var n=new Array(256);h(n);var J=new Array(k);h(J);var et,j,nt,M=new Array(d);function tt(m,x,N,F,I){this.static_tree=m,this.extra_bits=x,this.extra_base=N,this.elems=F,this.max_length=I,this.has_stree=m&&m.length}function O(m,x){this.dyn_tree=m,this.max_code=0,this.stat_desc=x}function z(m){return m<256?T[m]:T[256+(m>>>7)]}function Y(m,x){m.pending_buf[m.pending++]=255&x,m.pending_buf[m.pending++]=x>>>8&255}function H(m,x,N){m.bi_valid>p-N?(m.bi_buf|=x<<m.bi_valid&65535,Y(m,m.bi_buf),m.bi_buf=x>>p-m.bi_valid,m.bi_valid+=N-p):(m.bi_buf|=x<<m.bi_valid&65535,m.bi_valid+=N)}function V(m,x,N){H(m,N[2*x],N[2*x+1])}function ct(m,x){for(var N=0;N|=1&m,m>>>=1,N<<=1,0<--x;);return N>>>1}function gt(m,x,N){var F,I,Z=new Array(g+1),G=0;for(F=1;F<=g;F++)Z[F]=G=G+N[F-1]<<1;for(I=0;I<=x;I++){var q=m[2*I+1];q!==0&&(m[2*I]=ct(Z[q]++,q))}}function st(m){var x;for(x=0;x<w;x++)m.dyn_ltree[2*x]=0;for(x=0;x<d;x++)m.dyn_dtree[2*x]=0;for(x=0;x<b;x++)m.bl_tree[2*x]=0;m.dyn_ltree[2*C]=1,m.opt_len=m.static_len=0,m.last_lit=m.matches=0}function it(m){8<m.bi_valid?Y(m,m.bi_buf):0<m.bi_valid&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0}function pt(m,x,N,F){var I=2*x,Z=2*N;return m[I]<m[Z]||m[I]===m[Z]&&F[x]<=F[N]}function ut(m,x,N){for(var F=m.heap[N],I=N<<1;I<=m.heap_len&&(I<m.heap_len&&pt(x,m.heap[I+1],m.heap[I],m.depth)&&I++,!pt(x,F,m.heap[I],m.depth));)m.heap[N]=m.heap[I],N=I,I<<=1;m.heap[N]=F}function Ct(m,x,N){var F,I,Z,G,q=0;if(m.last_lit!==0)for(;F=m.pending_buf[m.d_buf+2*q]<<8|m.pending_buf[m.d_buf+2*q+1],I=m.pending_buf[m.l_buf+q],q++,F===0?V(m,I,x):(V(m,(Z=n[I])+f+1,x),(G=P[Z])!==0&&H(m,I-=J[Z],G),V(m,Z=z(--F),N),(G=W[Z])!==0&&H(m,F-=M[Z],G)),q<m.last_lit;);V(m,C,x)}function vt(m,x){var N,F,I,Z=x.dyn_tree,G=x.stat_desc.static_tree,q=x.stat_desc.has_stree,Q=x.stat_desc.elems,ot=-1;for(m.heap_len=0,m.heap_max=l,N=0;N<Q;N++)Z[2*N]!==0?(m.heap[++m.heap_len]=ot=N,m.depth[N]=0):Z[2*N+1]=0;for(;m.heap_len<2;)Z[2*(I=m.heap[++m.heap_len]=ot<2?++ot:0)]=1,m.depth[I]=0,m.opt_len--,q&&(m.static_len-=G[2*I+1]);for(x.max_code=ot,N=m.heap_len>>1;1<=N;N--)ut(m,Z,N);for(I=Q;N=m.heap[1],m.heap[1]=m.heap[m.heap_len--],ut(m,Z,1),F=m.heap[1],m.heap[--m.heap_max]=N,m.heap[--m.heap_max]=F,Z[2*I]=Z[2*N]+Z[2*F],m.depth[I]=(m.depth[N]>=m.depth[F]?m.depth[N]:m.depth[F])+1,Z[2*N+1]=Z[2*F+1]=I,m.heap[1]=I++,ut(m,Z,1),2<=m.heap_len;);m.heap[--m.heap_max]=m.heap[1],function(at,yt){var Mt,xt,Zt,dt,se,Se,It=yt.dyn_tree,Ve=yt.max_code,Hr=yt.stat_desc.static_tree,Gr=yt.stat_desc.has_stree,Kr=yt.stat_desc.extra_bits,He=yt.stat_desc.extra_base,qt=yt.stat_desc.max_length,ae=0;for(dt=0;dt<=g;dt++)at.bl_count[dt]=0;for(It[2*at.heap[at.heap_max]+1]=0,Mt=at.heap_max+1;Mt<l;Mt++)qt<(dt=It[2*It[2*(xt=at.heap[Mt])+1]+1]+1)&&(dt=qt,ae++),It[2*xt+1]=dt,Ve<xt||(at.bl_count[dt]++,se=0,He<=xt&&(se=Kr[xt-He]),Se=It[2*xt],at.opt_len+=Se*(dt+se),Gr&&(at.static_len+=Se*(Hr[2*xt+1]+se)));if(ae!==0){do{for(dt=qt-1;at.bl_count[dt]===0;)dt--;at.bl_count[dt]--,at.bl_count[dt+1]+=2,at.bl_count[qt]--,ae-=2}while(0<ae);for(dt=qt;dt!==0;dt--)for(xt=at.bl_count[dt];xt!==0;)Ve<(Zt=at.heap[--Mt])||(It[2*Zt+1]!==dt&&(at.opt_len+=(dt-It[2*Zt+1])*It[2*Zt],It[2*Zt+1]=dt),xt--)}}(m,x),gt(Z,ot,m.bl_count)}function r(m,x,N){var F,I,Z=-1,G=x[1],q=0,Q=7,ot=4;for(G===0&&(Q=138,ot=3),x[2*(N+1)+1]=65535,F=0;F<=N;F++)I=G,G=x[2*(F+1)+1],++q<Q&&I===G||(q<ot?m.bl_tree[2*I]+=q:I!==0?(I!==Z&&m.bl_tree[2*I]++,m.bl_tree[2*E]++):q<=10?m.bl_tree[2*A]++:m.bl_tree[2*$]++,Z=I,ot=(q=0)===G?(Q=138,3):I===G?(Q=6,3):(Q=7,4))}function B(m,x,N){var F,I,Z=-1,G=x[1],q=0,Q=7,ot=4;for(G===0&&(Q=138,ot=3),F=0;F<=N;F++)if(I=G,G=x[2*(F+1)+1],!(++q<Q&&I===G)){if(q<ot)for(;V(m,I,m.bl_tree),--q!=0;);else I!==0?(I!==Z&&(V(m,I,m.bl_tree),q--),V(m,E,m.bl_tree),H(m,q-3,2)):q<=10?(V(m,A,m.bl_tree),H(m,q-3,3)):(V(m,$,m.bl_tree),H(m,q-11,7));Z=I,ot=(q=0)===G?(Q=138,3):I===G?(Q=6,3):(Q=7,4)}}h(M);var D=!1;function y(m,x,N,F){H(m,(_<<1)+(F?1:0),3),function(I,Z,G,q){it(I),q&&(Y(I,G),Y(I,~G)),s.arraySet(I.pending_buf,I.window,Z,G,I.pending),I.pending+=G}(m,x,N,!0)}c._tr_init=function(m){D||(function(){var x,N,F,I,Z,G=new Array(g+1);for(I=F=0;I<k-1;I++)for(J[I]=F,x=0;x<1<<P[I];x++)n[F++]=I;for(n[F-1]=I,I=Z=0;I<16;I++)for(M[I]=Z,x=0;x<1<<W[I];x++)T[Z++]=I;for(Z>>=7;I<d;I++)for(M[I]=Z<<7,x=0;x<1<<W[I]-7;x++)T[256+Z++]=I;for(N=0;N<=g;N++)G[N]=0;for(x=0;x<=143;)X[2*x+1]=8,x++,G[8]++;for(;x<=255;)X[2*x+1]=9,x++,G[9]++;for(;x<=279;)X[2*x+1]=7,x++,G[7]++;for(;x<=287;)X[2*x+1]=8,x++,G[8]++;for(gt(X,w+1,G),x=0;x<d;x++)S[2*x+1]=5,S[2*x]=ct(x,5);et=new tt(X,P,f+1,w,g),j=new tt(S,W,0,d,g),nt=new tt(new Array(0),R,0,b,v)}(),D=!0),m.l_desc=new O(m.dyn_ltree,et),m.d_desc=new O(m.dyn_dtree,j),m.bl_desc=new O(m.bl_tree,nt),m.bi_buf=0,m.bi_valid=0,st(m)},c._tr_stored_block=y,c._tr_flush_block=function(m,x,N,F){var I,Z,G=0;0<m.level?(m.strm.data_type===2&&(m.strm.data_type=function(q){var Q,ot=4093624447;for(Q=0;Q<=31;Q++,ot>>>=1)if(1&ot&&q.dyn_ltree[2*Q]!==0)return u;if(q.dyn_ltree[18]!==0||q.dyn_ltree[20]!==0||q.dyn_ltree[26]!==0)return a;for(Q=32;Q<f;Q++)if(q.dyn_ltree[2*Q]!==0)return a;return u}(m)),vt(m,m.l_desc),vt(m,m.d_desc),G=function(q){var Q;for(r(q,q.dyn_ltree,q.l_desc.max_code),r(q,q.dyn_dtree,q.d_desc.max_code),vt(q,q.bl_desc),Q=b-1;3<=Q&&q.bl_tree[2*U[Q]+1]===0;Q--);return q.opt_len+=3*(Q+1)+5+5+4,Q}(m),I=m.opt_len+3+7>>>3,(Z=m.static_len+3+7>>>3)<=I&&(I=Z)):I=Z=N+5,N+4<=I&&x!==-1?y(m,x,N,F):m.strategy===4||Z===I?(H(m,2+(F?1:0),3),Ct(m,X,S)):(H(m,4+(F?1:0),3),function(q,Q,ot,at){var yt;for(H(q,Q-257,5),H(q,ot-1,5),H(q,at-4,4),yt=0;yt<at;yt++)H(q,q.bl_tree[2*U[yt]+1],3);B(q,q.dyn_ltree,Q-1),B(q,q.dyn_dtree,ot-1)}(m,m.l_desc.max_code+1,m.d_desc.max_code+1,G+1),Ct(m,m.dyn_ltree,m.dyn_dtree)),st(m),F&&it(m)},c._tr_tally=function(m,x,N){return m.pending_buf[m.d_buf+2*m.last_lit]=x>>>8&255,m.pending_buf[m.d_buf+2*m.last_lit+1]=255&x,m.pending_buf[m.l_buf+m.last_lit]=255&N,m.last_lit++,x===0?m.dyn_ltree[2*N]++:(m.matches++,x--,m.dyn_ltree[2*(n[N]+f+1)]++,m.dyn_dtree[2*z(x)]++),m.last_lit===m.lit_bufsize-1},c._tr_align=function(m){H(m,2,3),V(m,C,X),function(x){x.bi_valid===16?(Y(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)}(m)}},{"../utils/common":41}],53:[function(t,i,c){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,c){(function(s){(function(u,a){if(!u.setImmediate){var h,_,k,f,w=1,d={},b=!1,l=u.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(u);g=g&&g.setTimeout?g:u,h={}.toString.call(u.process)==="[object process]"?function(E){process.nextTick(function(){v(E)})}:function(){if(u.postMessage&&!u.importScripts){var E=!0,A=u.onmessage;return u.onmessage=function(){E=!1},u.postMessage("","*"),u.onmessage=A,E}}()?(f="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",C,!1):u.attachEvent("onmessage",C),function(E){u.postMessage(f+E,"*")}):u.MessageChannel?((k=new MessageChannel).port1.onmessage=function(E){v(E.data)},function(E){k.port2.postMessage(E)}):l&&"onreadystatechange"in l.createElement("script")?(_=l.documentElement,function(E){var A=l.createElement("script");A.onreadystatechange=function(){v(E),A.onreadystatechange=null,_.removeChild(A),A=null},_.appendChild(A)}):function(E){setTimeout(v,0,E)},g.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var A=new Array(arguments.length-1),$=0;$<A.length;$++)A[$]=arguments[$+1];var P={callback:E,args:A};return d[w]=P,h(w),w++},g.clearImmediate=p}function p(E){delete d[E]}function v(E){if(b)setTimeout(v,0,E);else{var A=d[E];if(A){b=!0;try{(function($){var P=$.callback,W=$.args;switch(W.length){case 0:P();break;case 1:P(W[0]);break;case 2:P(W[0],W[1]);break;case 3:P(W[0],W[1],W[2]);break;default:P.apply(a,W)}})(A)}finally{p(E),b=!1}}}}function C(E){E.source===u&&typeof E.data=="string"&&E.data.indexOf(f)===0&&v(+E.data.slice(f.length))}})(typeof self=="undefined"?s===void 0?this:s:self)}).call(this,typeof oe!="undefined"?oe:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})})(Rr);var Vn=Rr.exports;const Hn=rt(!1),Gn=ue(Nt.workspaces,ce.card,Cn),Kn=ue(Nt.workspaces,ce.table,xn),Qn=mr(Nt.workspaces,En),Yn=rt(!0),Xn=rt(!0),ts=rt(!0),te=rt(!0),pe=rt(!1),Fe=rt(e=>{}),je=rt(e=>{}),We=rt(!1),ee=rt({}),Pr=rt(""),me=(()=>{const{subscribe:e,set:o,update:t}=rt(50);return{subscribe:e,set:o,increment:i=>t(c=>c+i),reset:()=>o(50)}})(),Le=(()=>{const{subscribe:e,set:o,update:t}=rt();return{subscribe:e,set:o,update:t,reset:()=>{var i;return(i=L(Le))==null?void 0:i.scrollTo({top:0,behavior:"smooth"})}}})(),ge=kt(ie,(e,o)=>{var t,i;Fe.set(o),o((i=(t=e.find(({id:c})=>c==="workspacesListCount"))==null?void 0:t.count)!=null?i:null)}),Tr=kt(ie,(e,o)=>{var t,i;je.set(o),o((i=(t=e.find(({id:c})=>c==="allBrowseWorkspacesCount"))==null?void 0:t.count)!=null?i:null)}),Br=kt([Vt,tr],([e,o])=>{const t=[],{tags:i,created_by_user_id:c,created_at:s,starred_by:u,notes:a}=e;return Array.isArray(i)&&t.push({name:"Tags",key:Kt.tags,value:o.filter(h=>i.includes(h.uid)).map(h=>({name:`${h.uid}: ${h.title}`,key:h.uid,class:gr[h.colour]})),class:"bg-red-600"}),typeof c=="string"&&t.push({name:"Created by",key:Kt.created_by_user_id,value:L(nr)[c],class:"bg-blue-600"}),typeof s=="string"&&t.push({name:"Date created",key:Kt.created_at,value:dr(s),class:"bg-green-600"}),typeof u=="string"&&t.push({name:"Starred",key:Kt.starred_by,value:!0,class:"bg-pink-600"}),typeof a=="boolean"&&t.push({name:"Has notes",key:Kt.notes,value:!0,class:"bg-pink-600"}),t}),Rt=kt(rn,e=>{if(!e.length)return[];const o=L(ee),{pUids:t,tags:i,created_by_user_id:c,created_at:s,starred_by:u,notes:a,sort_option:h,sort_order:_}=o,k=e.filter(f=>{var w,d;return!(Array.isArray(t)&&!t.includes(f.project_uid)||Array.isArray(i)&&!((w=f==null?void 0:f.tags)==null?void 0:w.some(b=>i==null?void 0:i.includes(b)))||typeof c=="string"&&f.created_by_user_id!==c||typeof s=="string"&&!fr(s,f.created_at)||typeof u=="string"&&!((d=f.starred_by)==null?void 0:d.includes(u))||typeof a=="boolean"&&!f.notes)});switch(L(pe)&&pe.set(!1),h){case $t.project_uid_workspace_uid:return bt(bt(k,"uid_num",_!=null?_:ft.desc,"number"),"project_uid_num",_!=null?_:ft.desc,"number");case $t.uid:return bt(k,"uid_num",_!=null?_:ft.desc,"number");case $t.job_count:return bt(k,"job_count",_!=null?_:ft.desc,"number");case $t.updated_at:return bt(k,"updated_at",_!=null?_:ft.desc,"date");case $t.accessed_at:return bt(k,["last_accessed","accessed_at"],_!=null?_:ft.desc,"date");default:return bt(k,"created_at",_!=null?_:ft.desc,"date")}});Qe.subscribe(()=>{te.set(!0);const{queryString:e,searchObject:o,queryObject:t}=rr();if(o.type!==hr.workspaces){We.set(!0);return}const i={},{valid:c,projectUid:s}=o,{tags:u,created_by_user_id:a,created_at:h,starred_by:_,notes:k,sort_option:f,sort_order:w}=t;c&&s&&(i.pUids=[s]),Array.isArray(u)&&(i.tags=u),typeof a=="string"&&(i.created_by_user_id=a),typeof h=="string"&&(i.created_at=h),typeof _=="string"&&(i.starred_by=_),typeof k=="boolean"&&(i.notes=k),typeof f=="string"&&Object.values($t).includes(f)?i.sort_option=f:typeof f=="undefined"&&(i.sort_option=$t.created_at),typeof w=="string"&&Object.values(ft).includes(w)?i.sort_order=w:typeof f=="undefined"&&(i.sort_order=ft.desc),(!pr(L(ee),i)||L(We))&&(ee.set(i),me.reset(),Le.reset(),te.set(!1)),Pr.set(e),We.set(!1)});const Jr=(e=1)=>{const o=L(ge),t=L(Tr),i=L(Fe),c=L(je);o-e>=0?i(t-e):i(0),t-e>=0?c(t-e):c(0)},es=()=>{if(L(Rt).length<L(ge)){te.set(!0);const e=L(ge)-L(Rt).length;e>=25?me.increment(25):e>0&&me.increment(e),te.set(!1),pe.set(!0)}},rs=()=>{const e=Object.assign({},L(Vt));L(Br).forEach(({key:o})=>{e[o]&&delete e[o]}),Ye.update(o=>Ut(Et({},o),{params:e}))},ns=e=>{var c;e.preventDefault();const o=L(Rt).findIndex(s=>`${s.project_uid}-${s.uid}`===L(Ee)[L(Ee).length-1]);if(!L(Rt)[o+1])return;const{project_uid:t,uid:i}=L(Rt)[o+1];e.metaKey?Pt.set([...L(Pt),{selection:"workspace",timestamp:new Date().getTime(),identifier:`${t}-${i}`,projectUid:t,workspaceUid:i}]):((c=document.getElementById(`browse-workspace-${t}-${i}`))==null||c.focus(),or(e,t,i))},ss=e=>{var c;e.preventDefault();const o=L(Rt).findIndex(s=>`${s.project_uid}-${s.uid}`===L(Ee)[0]);if(!L(Rt)[o-1])return;const{project_uid:t,uid:i}=L(Rt)[o-1];e.metaKey?Pt.set([{selection:"workspace",timestamp:new Date().getTime(),identifier:`${t}-${i}`,projectUid:t,workspaceUid:i},...L(Pt)]):((c=document.getElementById(`browse-workspace-${t}-${i}`))==null||c.focus(),or(e,t,i))};var Ra=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",showWorkspacesCSVAlert:Hn,cardViewOptions:Gn,tableViewOptions:Kn,tableOrder:Qn,loadingWorkspaces:Yn,loadingAllWorkspacesCount:Xn,loadingWorkspacesCount:ts,loadingQueryData:te,loadingScrollData:pe,browseCountSetter:Fe,fullCountSetter:je,filterQueryObject:ee,prevQueryString:Pr,limit:me,browseWrapper:Le,browseWorkspacesCount:ge,allWorkspacesCount:Tr,filterBarData:Br,allBrowseWorkspaces:Rt,decrementCount:Jr,handleSetNextLimit:es,handleRemoveAllFilters:rs,selectNextWorkspace:ns,selectPreviousWorkspace:ss});const _e=rt(null),be=rt(null),$r=rt([]),Nr=rt([]),Fr=(e,o)=>{const{projectUid:t,workspaceUid:i,type:c}=L(sr);e===t&&o===i&&c==="jobs"&&(Jr(),nn(e,o),sn(e))},as=()=>{_e.set(null),be.set(null),$r.set([]),Nr.set([])},Pa=async(e,o,t=()=>{console.info("No callback passed")})=>{const i=await K.core.requestDeleteWorkspace(e,o),c=!!(i!==!0&&i&&i.length===2);return i!==!0&&(i&&i.length===2?(_e.set(o),be.set(e),$r.set(i[0]),Nr.set(i[1])):(St("Handle Request Delete Workspace Failed"),wt.add({title:"Unable to delete workspace",type:"danger",style:"minimal"}))),t(),c||Fr(e,o),c},Ta=async()=>{try{await K.core.deleteWorkspace(L(be),L(_e)),Fr(L(be),L(_e)),as()}catch(e){St("Delete workspace failed: ",e)}},is=async(e,o)=>{try{await zt("/api/actions/workspaces/star_workspace",{pUid:e,wUid:o})}catch(t){console.error(`Error starring ${e} ${o}: `,t),wt.add({title:`${e} ${o} could not be starred`,type:"danger",style:"minimal"})}},os=async(e,o)=>{try{await zt("/api/actions/workspaces/unstar_workspace",{pUid:e,wUid:o})}catch(t){console.error(`Error unstarring ${e} ${o}: `,t),wt.add({title:`${e} ${o} could not be unstarred`,type:"danger",style:"minimal"})}},Ba=async(e,o,t)=>{t?await os(e,o):await is(e,o)},ye=async(e,o)=>{if(e&&o)try{await zt("/api/actions/stats/refresh_workspace",{projectUid:e,workspaceUid:o})}catch(t){console.error(`Error refreshing workspace stats for ${e} ${o}: `,t)}},Ja=async(e,o)=>{const t=_r("Downloading Workspaces CSV");try{const i=Et({filename:e,columns:o},L(ee)),c=await Bt("getWorkspacesCSV",i),s=document.createElement("a");s.setAttribute("href",c),s.setAttribute("download",`${e}.csv`),document.body.appendChild(s),s.click(),br("Workspaces CSV Download Ready",t)}catch(i){yr("Workspaces CSV Download Ready",i.message,t)}},ls={pUid:null,jUids:[]},cs={lane:null,hostname:null,gpus:[]},lt=e=>e!==1?`${e} Jobs`:`${e} Job`,_t=e=>{const o=Ce();return wt.add({id:o,title:e,type:"loading",style:"minimal",persistent:!0}),o},mt=(e,o)=>{wt.add(Ut(Et({},o&&{id:o}),{title:e,type:"success",style:"minimal",persistent:!1}))},ht=(e,o,t)=>{St(`${e}: `,o),wt.add(Ut(Et({},t&&{id:t}),{title:`${e}: ${o.message}`,type:"danger",style:"minimal",persistent:!1}))},us=e=>{let o=[],t=[];for(let i=0;i<e.length;i++){const{project_uid:c,workspace_uids:s}=e[i];o.includes(c)||o.push(c),s==null||s.forEach(u=>{t.includes(`${c}-${u}`)||t.push(`${c}-${u}`)})}o.forEach(i=>Un(i)),t.forEach(i=>{const[c,s]=i.split("-");ye(c,s)})},Me=e=>{const o=L(ze);e.some(({project_uid:i,uid:c})=>(o==null?void 0:o.projectUid)===i&&(o==null?void 0:o.jobUid)===c)&&Oe()},jr=e=>{let o=!1;if(e.input_slot_groups&&e.input_slot_groups.length>0){for(let t of e.input_slot_groups)if(t.count_min>(t.connections?t.connections.length:0)||typeof t.count_max=="number"&&t.count_max<(t.connections?t.connections.length:0)){o=!0;break}}return o},ds=(e,o)=>{var t,i;return(((i=(t=e.job_type)==null?void 0:t.startsWith("import_"))!=null?i:!1)||e.run_on_master_direct===!0)&&!o||e.interactive===!0},hs=(e,o)=>{var t,i;return((i=(t=e.job_type)==null?void 0:t.startsWith("import_"))!=null?i:!1)&&o},Ze=e=>{var o,t,i,c,s;return typeof((o=e==null?void 0:e.params_spec)==null?void 0:o.scheduler_no_check_inputs_ready)=="undefined"&&((i=(t=e==null?void 0:e.params_base)==null?void 0:t.scheduler_no_check_inputs_ready)==null?void 0:i.value)===!0||((s=(c=e==null?void 0:e.params_spec)==null?void 0:c.scheduler_no_check_inputs_ready)==null?void 0:s.value)===!0},Wr=e=>{var o;return e.job_type?!!((o=L(an)[e.job_type])==null?void 0:o.lightweight):!1},fs=(e,o={})=>{var t,i,c,s,u,a,h;return Et({doc:e,projectUid:e.project_uid,jobUid:e.uid,tags:(t=e==null?void 0:e.tags)!=null?t:[],starredBy:(i=e==null?void 0:e.starred_by)!=null?i:[],status:e==null?void 0:e.status,interactive:(c=e==null?void 0:e.interactive)!=null?c:!1,workspaceUids:(s=e==null?void 0:e.workspace_uids)!=null?s:[],jobType:(u=e==null?void 0:e.job_type)!=null?u:"",specParams:(a=e==null?void 0:e.params_spec)!=null?a:{},resultGroups:(h=e==null?void 0:e.output_result_groups)!=null?h:[],isInteractive:(e==null?void 0:e.interactive)===!0,lightweight:Wr(e),isFinal:e.is_final_result===!0,isFinalAncestor:e.is_ancestor_of_final_result===!0},o)},ps=(e,o,t)=>{if(!o){const{lanes:i}=t!=null?t:{};return(i==null?void 0:i.length)?e.filter(c=>{var s,u;return((s=c==null?void 0:c.resources_allocated)==null?void 0:s.lane)?(u=t==null?void 0:t.lanes)==null?void 0:u.includes(c.resources_allocated.lane):!1}):[]}return e},we=async(e=null,o=null,t=100)=>{const i=e&&o?`${e}-${o}`:L(Ae)[0],c=document.getElementById("browse-jobs-wrapper"),s=await dn(()=>document.getElementById(`browse-job-${i}`),t);if(c&&s){const u=(s==null?void 0:s.offsetTop)-(c==null?void 0:c.offsetTop);c.scrollTo({left:0,top:u,behavior:"smooth"})}},ms=e=>!De.includes(e),re=(e,o)=>e==="building"&&!De.includes(o),jt=e=>["launched","started","running","waiting"].includes(e),Wt=(e,o=!1)=>!o&&!["launched","started","running","waiting","building"].includes(e),qe=(e,o,t=!1)=>!t&&e!==un.Queued&&(jt(e)||Wt(e))&&!De.includes(o),gs=e=>["killed","failed"].includes(e),_s=e=>["completed","failed","killed"].includes(e),bs=e=>["building","killed","failed","completed"].includes(e),ys=e=>["completed","building"].includes(e),ws=(e,o=!1)=>!o&&["building","killed","failed","completed"].includes(e),vs=e=>["queued","launched","started","running","waiting"].includes(e),Tt=rt(!1),Lt=kt(Ae,e=>e.reduce((o,t)=>{const[i,c]=t.split("-");return{pUid:o.pUid?o.pUid===i?i:null:i,jUids:[...o.jUids,c]}},ls)),ks=kt([Ht,Lt],([e,{pUid:o,jUids:t}])=>e.filter(({project_uid:i,uid:c})=>i===o&&t.includes(c))),ve=rt([]),Ss=kt([Ht,Lt,ve],([e,{pUid:o},t])=>e.filter(({project_uid:i,uid:c})=>i===o&&t.includes(c))),Ue=rt(null),ke=rt(null),Cs=async(e,o,t,i,c)=>{Ot("Quick Action",{projectUid:e,workspaceUid:o,jobUid:t,resultGroups:i,actionSpec:c});try{if(!o)throw Error("No workspace uid provided");if(!hn(e)||!fn(o)||!pn(t))throw Error("Project, workspace and job uids must be valid");const s=c.applyParamsBeforeGroupConnections===!0,u=Array.isArray(c.multiple)&&c.multiple.length>0?c.multiple:[{title:null,groups:c.groups,parameters:c.parameters}];let a=null;const h=[];for(const _ of u){let k=!1;if(a=await K.core.createJob(e,o,c.job_type),!a)throw Error("Failed to create job");h.push(a),typeof _.title=="string"&&_.title.length>0&&await K.core.updateJobTitle(e,a,_.title);const f=async()=>{if(Array.isArray(_.groups))for(const[w,d]of _.groups)i.some(b=>b.name===w)&&await K.core.connectResultGroup(e,`${t}.${w}`,`${a}.${d}`)};if(s||await f(),typeof _.parameters!="undefined")for(const[w,d]of Object.entries(_.parameters))await K.core.setJobParam(e,a,w,d),w==="scheduler_no_check_inputs_ready"&&d===!0&&(k=!0);s&&await f(),c.queue===!0&&await K.core.queueJob(e,a,"lane",null,null,null,!1,k)}a&&lr(null,e,a),a&&c.queue!==!0&&Ie(e,a),we(),Ot(`Created ${h.length} jobs via quick action`,h)}catch(s){St("Quick action failed:",s)}},Lr=()=>{ve.set([]),Ue.set(null),ke.set(null)},Mr=(e,o,t={lane:null,hostname:null,gpus:[],schedulerNoCheckInputsReady:!1})=>{const{hostname:i,gpus:c,lane:s}=t;typeof i=="string"&&c.length>0?K.core.queueJob(e,o,"gpu",null,i,c,!1,t.schedulerNoCheckInputsReady):K.core.queueJob(e,o,"lane",s,null,null,!1,t.schedulerNoCheckInputsReady);const u=L(ze);(u==null?void 0:u.projectUid)===e&&(u==null?void 0:u.jobUid)===o&&Oe(),s&&On.set(s)},xs=async(e,o,t)=>{await K.core.linkJob(e,o,t),ne(e,t)},Es=async(e,o,t,i)=>{try{t&&(await K.core.moveJob(e,o,t,i),ye(e,t),ne(e,o),de())}catch(c){St("Move job failed: ",c)}},As=(e,o)=>{K.core.killJob(e,o)},Is=(e,o)=>{K.core.clearJob(e,o);const t=L(Ae);t.length===1&&t[0]===`${e}-${o}`&&Ie(e,o)},zs=(e,o,t)=>{if(L(Tt))return ht("Can only restart one job or batch of jobs at a time",new Error("restartJobs"));const i=_t(`Restarting ${e} ${o}`),c=L(Ht).find(d=>d.project_uid===e&&d.uid===o);if(!c)return;if(!qe(c.status,t))return ht(`Selected job is not restartable (type: ${t}, status: ${c.status})`,new Error("restartJobs"),i);const{resources_allocated:{lane:s=null}={}}=c;let u,a=!1,h=!1,_=!1,k=!1,f=!1,w=!1;u=Ht.subscribe(d=>{try{Tt.set(!0);const b=d.find(C=>C.project_uid===e&&C.uid===o);if(!b)throw new Error("Job not available to restart");const{project_uid:l,uid:g,status:p}=b,v=Ze(b);if(a&&jt(p)||(a&&!jt(p)&&(a=!1),!k&&jt(p)&&(K.core.killJob(l,g,!1),a=!0,k=!0),h&&Wt(p))||(h&&!Wt(p)&&(h=!1),!f&&Wt(p)&&(K.core.clearJob(l,g,!1),h=!0,f=!0),_&&re(p,t)))return;_&&!re(p,t)&&(_=!1),!w&&re(p,t)&&(Mr(l,g,{lane:s,hostname:null,gpus:[],schedulerNoCheckInputsReady:v}),_=!0,w=!0),w&&(mt(`Restarted ${e} ${o}`,i),u==null||u(),Tt.set(!1))}catch(b){ht(`Could not restart job ${e} ${o}: `,b,i),u==null||u(),Tt.set(!1)}})},Os=(e,o)=>{K.core.clearIntermediateResults(e,o)},Ds=(e,o)=>{K.core.exportJob(e,o)},Rs=async(e,o,t)=>{try{const i=await K.core.cloneJob(e,o,t);de(),ne(e,t),Ie(e,i),lr(void 0,e,i),we()}catch(i){St("Clone job failed: ",i)}},Ps=(e,o)=>{K.core.markJobCompleted(e,o)},Ts=async(e,o,t)=>{o&&(await K.core.unlinkJob(e,o,t),ye(e,o))},Bs=async(e,o)=>{var t;try{const i=L(ze);(i==null?void 0:i.projectUid)===e&&(i==null?void 0:i.jobUid)===o&&Oe(),L(mn)&&L(gn)===_n.queueJob&&bn(),await K.core.deleteJob(e,o),wr(),((t=L(cr))==null?void 0:t.type)==="job"&&ur(),on(e,o),de(),ne(e,o)}catch(i){St("Delete job failed: ",i)}},Js=async(e,o,t)=>{await K.core.markJobFinal(e,o,!t)},$s=async(e,o,t)=>{if(!o)throw new Error("No Workspace UID supplied");try{const i=await K.core.findWorkspaceAncestors(e,o,[t]);Ot("selectSingleAncestorJobs",i),Array.isArray(i.ancestors)&&Gt(e,i.ancestors,!1)}catch(i){St("Could not select ancestors",i.message)}},Ns=async(e,o,t)=>{const i=await K.core.findWorkspaceAncestors(e,o,t);console.log("selectMultipleAncestorJobs",i),Array.isArray(i.ancestors)&&Gt(e,i.ancestors,!1)},Fs=async(e,o,t)=>{if(!o)throw new Error("No Workspace UID supplied");try{const i=await K.core.findWorkspaceDescendants(e,o,[t]);Ot("selectSingleDescendantJobs",i),Array.isArray(i.progeny)&&Gt(e,i.progeny,!1)}catch(i){St("Could not select descendants",i.message)}},js=async(e,o,t)=>{const i=await K.core.findWorkspaceDescendants(e,o,t);console.log("selectMultipleAncestorJobs",i),Array.isArray(i.progeny)&&Gt(e,i.progeny,!1)},Ws=async(e,o=cs)=>{const t=_t("Queueing jobs");try{const{hostname:i,gpus:c,lane:s}=o,u=[];for(let a=0;a<e.length;a++){const h=e[a],{project_uid:_,uid:k}=h,f=Ze(h);jr(h)&&u.push(Promise.reject(new Error(`Cannot queue job ${_} ${k} without all required inputs`))),o.clusterVariables&&await K.core.setJobClusterSubmissionCustomVars(_,k,o.clusterVariables),h.interactive?u.push(K.core.queueJob(_,k,"lane",null,null,null,!1,f,!1)):typeof i=="string"&&c.length>0?u.push(K.core.queueJob(_,k,"gpu",null,i,c,!1,f,!1)):u.push(K.core.queueJob(_,k,"lane",s,null,null,!1,f,!1))}await Promise.all(u),Me(e),mt(`Queued ${lt(e.length)}`,t)}catch(i){ht("Could not queue all jobs",i,t)}},Zr=async(e,o=!0)=>{const t=o?_t("Killing jobs"):Ce();try{const i=e.map(({project_uid:c,uid:s})=>K.core.killJob(c,s,!1));await Promise.all(i),o&&mt(`Killed ${lt(e.length)}`,t)}catch(i){ht(`Could not kill ${lt(e.length)}`,i,t)}},qr=async(e,o=!0)=>{const t=o?_t("Clearing jobs"):Ce();try{const i=e.map(({project_uid:c,uid:s})=>K.core.clearJob(c,s,!1));await Promise.all(i),Me(e),o&&mt(`Cleared ${lt(e.length)}`,t)}catch(i){ht(`Could not clear ${lt(e.length)}`,i,t)}},Ls=e=>{if(L(Tt))return ht("Can only restart one batch of jobs at a time",new Error("restartMultipleJobs"));const o=_t("Restarting jobs"),t=e.filter(a=>{var h;return qe(a.status,(h=a.job_type)!=null?h:"")});if(!t.length)return ht("Selected jobs are not restartable",new Error("restartMultipleJobs"));t.length!==e.length&&yn("Some selected jobs are not restartable");let i,c=[],s=[],u=[];i=Ht.subscribe(a=>{var h,_;try{Tt.set(!0);const k=a.filter(b=>t.some(({project_uid:l,uid:g})=>b.project_uid===l&&b.uid===g));if(!k.length)throw new Error("Selected jobs are not available to restart");let f=[],w=[],d=[];for(let b=0;b<k.length;b++){const l=k[b],g=c==null?void 0:c.some(({project_uid:C,uid:E})=>l.project_uid===C&&l.uid===E),p=s==null?void 0:s.some(({project_uid:C,uid:E})=>l.project_uid===C&&l.uid===E),v=u==null?void 0:u.some(({project_uid:C,uid:E})=>l.project_uid===C&&l.uid===E);jt(l.status)&&!g&&!v&&f.push(l),Wt(l.status)&&!p&&!v&&w.push(l),re(l.status,(h=l.job_type)!=null?h:"")&&!v&&d.push(l)}if(f.length&&(Zr(f,!1),c=[...c,...f]),w.length&&(qr(w,!1),s=[...s,...w]),d.length){for(let b=0;b<d.length;b++){const l=d[b],g=t.find(({project_uid:E,uid:A})=>l.project_uid===E&&l.uid===A);if(!g)continue;const{project_uid:p,uid:v,resources_allocated:{lane:C=null}={}}=g;Object.keys((_=g==null?void 0:g.resources_allocated)!=null?_:{}).length!==0&&(l.interactive?K.core.queueJob(p,v,"lane",null,null,null,!1,!1):K.core.queueJob(p,v,"lane",C,null,null,!1,!1))}u=[...u,...d]}u.length>=k.length&&(mt(`Restarted ${t.length} jobs`,o),i==null||i(),Tt.set(!1))}catch(k){ht(`Could not restart ${t.length} jobs`,k,o),i==null||i(),Tt.set(!1)}})},Ms=async e=>{const o=_t("Clearing intermediate Results");try{const t=e.map(({project_uid:i,uid:c})=>K.core.clearIntermediateResults(i,c,!1));await Promise.all(t),mt(`Cleared intermediate results for ${lt(e.length)}`,o)}catch(t){ht(`Could not clear intermediate results for ${lt(e.length)}`,t,o)}},Zs=async e=>{const o=_t("Exporting jobs");try{const t=e.map(({project_uid:i,uid:c})=>K.core.exportJob(i,c,!1));await Promise.all(t),mt(`Exported ${lt(e.length)}`,o)}catch(t){ht(`Could not export ${lt(e.length)}`,t,o)}},qs=async e=>{const o=_t("Marking jobs as completed");try{const t=e.map(({project_uid:i,uid:c})=>K.core.markJobCompleted(i,c,!1));await Promise.all(t),mt(`Marked ${lt(e.length)} as completed`,o)}catch(t){ht(`Could not mark ${lt(e.length)} as completed`,t,o)}},Us=async(e,o)=>{const t=_t("Linking jobs");try{if(!o)throw new Error("No ID provided for workspace where jobs are to be linked");const i=e.map(({project_uid:c,uid:s})=>K.core.linkJob(c,o,s,!1));await Promise.all(i),mt(`Linked ${lt(e.length)} to ${o}`,t)}catch(i){ht(`Could not link ${lt(e.length)}`,i,t)}},Vs=async(e,o)=>{const t=_t("Unlinking jobs");try{if(!o)throw new Error("No ID provided for workspace where jobs are to be unlinked");const i=e.map(({project_uid:c,uid:s})=>K.core.unlinkJob(c,o,s,!1));await Promise.all(i),mt(`Unlinked ${lt(e.length)} from ${o}`,t)}catch(i){ht(`Could not unlink ${lt(e.length)}`,i,t)}},Hs=async(e,o,t)=>{const i=_t("Moving jobs");try{if(!o)throw new Error("No ID provided for workspace where jobs are currently located");if(!t)throw new Error("No ID provided for workspace where jobs are to be moved");const c=e.map(({project_uid:s,uid:u})=>K.core.moveJob(s,u,o,t,!1));await Promise.all(c),mt(`Moved ${lt(e.length)} to ${t}`,i)}catch(c){ht(`Could not move ${lt(e.length)}`,c,i)}},Gs=async(e,o,t=null,i=null)=>{const c=_t("Cloning jobs");try{const s=e.map(h=>h.uid),{workspace_uid:u,cloned_job_uids:a}=await K.core.cloneJobs(o,s,t,i,!1);return mt(`Cloned ${lt(e.length)} to ${u}`,c),{workspaceUid:u,jobUids:a}}catch(s){return ht(`Could not clone ${lt(e.length)}`,s,c),{}}},Ks=async()=>{var o;const e=_t("Validating job chain");try{const{pUid:t,jUids:i}=L(Lt);if(!t)throw new Error("Jobs must be from the same project");const c=Pe(i),s=await K.core.proposeCloneJobChain(t,c[0],c[i.length-1]);if(s.length)ve.set(s),An.set(!0);else throw new Error("Jobs must be from the same project");mt("Validated job chain",e)}catch(t){const i=(o=t.message)!=null?o:"Chain between selected jobs does not exist or has been deleted";ht(i,t,e)}},Qs=async()=>{const e=_t("Cloning job chain");try{const{pUid:o,jUids:t}=L(Lt),i=Pe(t);if(!o)throw new Error("No project uid specified");const{project_uid:c,workspace_uid:s,cloned_job_uids:u}=await K.core.cloneJobChain(o,i[0],i[t.length-1],L(ke)?null:L(Ue),L(ke));c&&s&&!L(In).some(a=>a.uid===s)&&await zn(),c&&s&&ln(c,s,L(Dn)),Lr(),we(o,u[u.length-1]),ye(c,s),mt(`Chain of ${lt(u.length)} successfully cloned`,e)}catch{mt("Job chain could not be cloned",e)}},Ys=async()=>{var e;try{const{pUid:o,jUids:t}=L(Lt);if(!o)throw new Error("Jobs must be from the same project");const i=Pe(t),c=await K.core.getJobChain(o,i[0],i[t.length-1]);c.length&&Gt(o,c)}catch(o){const t=(e=o.message)!=null?e:"Chain between selected jobs does not exist or has been deleted";ht(t,o)}},Xs=async e=>{var t;const o=_t("Deleting jobs");try{const i=e.map(({project_uid:s,uid:u})=>[s,u]),c=L(Vt).view==="tree";Me(e),await K.core.deleteJobs(i,c,!1),wr(i.length),((t=L(cr))==null?void 0:t.type)==="job"&&ur(),cn(),us(e),de(),mt(`Deleted ${lt(e.length)}`,o)}catch(i){ht(`Could not clear ${lt(e.length)}`,i,o)}},Ur=async(e,o)=>{try{await zt("/api/actions/jobs/star_job",{jUid:e,pUid:o})}catch(t){console.error(`Error starring ${o} ${e}: `,t),wt.add({title:`${o} ${e} could not be starred`,type:"danger",style:"minimal"})}},Vr=async(e,o)=>{try{await zt("/api/actions/jobs/unstar_job",{jUid:e,pUid:o})}catch(t){console.error(`Error unstarring ${o} ${e}: `,t),wt.add({title:`${o} ${e} could not be unstarred`,type:"danger",style:"minimal"})}},ta=async(e,o,t)=>{t?await Vr(o,e):await Ur(o,e)},ne=async(e,o)=>{if(e&&o)try{await zt("/api/actions/stats/refresh_job",{projectUid:e,jobUid:o})}catch(t){console.error(`Error refreshing job stats for ${e} ${o}: `,t)}},ea=async()=>{const e=performance.now(),o=await Bt("getProjectList",{deleted:!1}),t=performance.now();return Ot(`Browse: getProjectList: ${(t-e).toFixed(3)} ms`,o),o},ra=async()=>{const e=performance.now(),o=await Bt("getVisibleProjectsCount"),t=performance.now();return Ot(`Browse: getVisibleProjectsCount: ${(t-e).toFixed(3)} ms`,o),o},na=async()=>{const e=performance.now(),o=await Bt("getSingleProjectSize","P1"),t=performance.now();return Ot(`Browse: getSingleProjectSize: ${(t-e).toFixed(3)} ms`,o),o},sa=async()=>{const e=performance.now(),o=await Bt("getLiveProjectsAndSessions"),t=performance.now();return Ot(`Browse: getLiveProjectsAndSessions: ${(t-e).toFixed(3)} ms`,o),o},aa=async(e,o)=>{const t=_t("Downloading Jobs CSV");try{const i=Et({filename:e,columns:o},L(Rn)),c=await Bt("getJobsCSV",i),s=document.createElement("a");s.setAttribute("href",c),s.setAttribute("download",`${e}.csv`),document.body.appendChild(s),s.click(),mt("Jobs CSV Download Ready",t)}catch(i){ht("Jobs CSV Download Ready",i.message,t)}},ia=async(e,o)=>{if(!(!e||!o))try{const t=performance.now(),i=await fetch(`/api/files/event_pdf?project_uid=${e}&job_uid=${o}`);if(!i.ok)throw new Error;const c=await i.arrayBuffer(),s=performance.now();Ot(`Browse: eventLogPdfDownload: ${(s-t).toFixed(3)} ms`);const u=new Blob([c],{type:"application/pdf"}),a=document.createElement("a");a.href=URL.createObjectURL(u),a.download=`${e}_${o}_event_log_${new Date().toISOString().replace(/[:-]/gi,"_")}.pdf`,a.click()}catch{console.error("Could not download event log pdf"),wt.add({title:"Could not download event log pdf",type:"danger",style:"minimal"})}},oa=async(e,o,t=!1)=>{const i=new Vn,c=fetch(`/api/files/event_pdf?project_uid=${e}&job_uid=${o}&include_images=${t}`).then(f=>f.arrayBuffer()).then(f=>new Blob([f],{type:"application/pdf"})).then(f=>i.file(`event_log_pdf_${e}_${o}_${new Date().toISOString().replace(/[:-]/gi,"_")}.pdf`,f)).catch(f=>{console.error("Could not download job report: ",f.message),wt.add({title:"Could not download job report",type:"danger",style:"minimal"})}),s=Re(`/api/actions/jobs/single?project_uid=${e}&uid=${o}`).then(f=>{i.file(`job_document_${e}_${o}_${new Date().toISOString().replace(/[:-]/gi,"_")}.json`,JSON.stringify(f))}),u=K.core.getJobLog(e,o).then(f=>{i.file(`job_log_${e}_${o}_${new Date().toISOString().replace(/[:-]/gi,"_")}.log`,f)}),a=wn.map(f=>K.core.getLatestSupervisorLogs(f,500).then(w=>{i.file(`${f}_${e}_${o}_${new Date().toISOString().replace(/[:-]/gi,"_")}.log`,w)})),h=()=>{var w,d;const f={};window&&(f.user_agent=window.navigator.userAgent,window.navigator.userAgentData&&(f.user_agent_data=Et({},window.navigator.userAgentData.toJSON())),f.screen={width:window.screen.width,height:window.screen.height,color_depth:window.screen.colorDepth,orientation:(d=(w=window==null?void 0:window.screen)==null?void 0:w.orientation)==null?void 0:d.type},f.inner_width=window.innerWidth,f.inner_height=window.innerHeight,f.device_pixel_ratio=window.devicePixelRatio),i.file(`browser_diagnostics_${e}_${o}_${new Date().toISOString().replace(/[:-]/gi,"_")}.json`,JSON.stringify(f))};await Promise.all([...a,c,s,u,h()]);const _=await i.generateAsync({type:"base64"}),k=document.createElement("a");k.href=`data:application/zip;base64,${_}`,k.download=`job_report_${e}_${o}_${new Date().toISOString().replace(/[:-]/gi,"_")}.zip`,k.click()},la=async(e,o)=>{if(e&&o)try{return(await Re(`/api/actions/events/warnings?project_uid=${e}&uid=${o}`)).events}catch(t){return console.error(`Error getting job warnings for ${e} ${o}: `,t),[]}else return[]},ca=async(e,o)=>{if(e&&o)try{return(await Re(`/api/actions/events/errors?project_uid=${e}&uid=${o}`)).events}catch(t){return console.error(`Error getting job errors for ${e} ${o}: `,t),[]}else return[]};var $a=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",printCount:lt,checkHasInputErrors:jr,checkRunsOnMaster:ds,checkImportCanRunOnMaster:hs,checkSchedulerNoCheckInputsReady:Ze,checkIsLightweight:Wr,computeJobMenuArgs:fs,getUnrestrictedJobs:ps,scrollToJob:we,checkCloneable:ms,checkQueueable:re,checkKillable:jt,checkClearable:Wt,checkRestartable:qe,checkCompletable:gs,checkResultsClearable:_s,checkUnlinkable:bs,checkExportable:ys,checkDeletable:ws,checkInProgress:vs,cloneJobsInfo:Lt,cloneJobsDocuments:ks,jobsToClone:ve,jobsToCloneDocuments:Ss,cloneJobsSelectedWorkspaceUid:Ue,cloneJobsNewWorkspaceTitle:ke,quickAction:Cs,resetCloneStores:Lr,queueJob:Mr,linkJob:xs,moveJob:Es,killJob:As,clearJob:Is,restartJob:zs,clearIntermediateResults:Os,exportJob:Ds,cloneSingleJob:Rs,markJobCompleted:Ps,unlinkJob:Ts,deleteJob:Bs,toggleFinalResult:Js,selectSingleAncestorJobs:$s,selectMultipleAncestorJobs:Ns,selectSingleDescendantJobs:Fs,selectMultipleDescendantJobs:js,queueMultipleJobs:Ws,killMultipleJobs:Zr,clearMultipleJobs:qr,restartMultipleJobs:Ls,clearMultipleIntermediateResults:Ms,exportMultipleJobs:Zs,markMultipleJobsCompleted:qs,linkMultipleJobs:Us,unlinkMultipleJobs:Vs,moveMultipleJobs:Hs,cloneMultipleJobs:Gs,proposeCloneJobChain:Ks,cloneJobChain:Qs,selectJobChain:Ys,deleteMultipleJobs:Xs,starJob:Ur,unstarJob:Vr,toggleJobStar:ta,refreshJobStats:ne,getProjectList:ea,getVisibleProjectsCount:ra,getSingleProjectSize:na,getLiveProjectsAndSessions:sa,jobsCSVDownload:aa,eventLogPdfDownload:ia,downloadJobReport:oa,getJobWarnings:la,getJobErrors:ca});export{Pn as $,$s as A,Fs as B,Js as C,Ws as D,Zr as E,qr as F,Ls as G,qs as H,Ks as I,Vs as J,Ms as K,Zs as L,Ys as M,Wr as N,Us as O,Hs as P,Gs as Q,Un as R,ye as S,we as T,ne as U,_a as V,Ra as W,Ba as X,Ia as Y,Pr as Z,kr as _,Ze as a,_e as a$,Hn as a0,Tn as a1,Jn as a2,Bn as a3,Cr as a4,Xt as a5,At as a6,ba as a7,wa as a8,ka as a9,te as aA,me as aB,Le as aC,pe as aD,Yn as aE,ts as aF,Xn as aG,ss as aH,ns as aI,es as aJ,ca as aK,ta as aL,la as aM,aa as aN,Er as aO,ya as aP,Ar as aQ,va as aR,Ir as aS,Sa as aT,Ne as aU,Or as aV,zr as aW,xa as aX,Dr as aY,Aa as aZ,be as a_,Ca as aa,Ea as ab,Oa as ac,Sr as ad,Wn as ae,Qt as af,Yt as ag,he as ah,$e as ai,Ft as aj,$n as ak,Nn as al,Fn as am,Mn as an,Ln as ao,jn as ap,Gn as aq,Qn as ar,Kn as as,Br as at,ge as au,Rt as av,Pa as aw,Tr as ax,rs as ay,ee as az,ms as b,$r as b0,Nr as b1,Ta as b2,as as b3,ke as b4,ve as b5,Ss as b6,Ue as b7,Qs as b8,Lr as b9,Xs as ba,Da as bb,Ja as bc,za as bd,ia as be,oa as bf,Vn as bg,$a as bh,fs as c,re as d,jt as e,Wt as f,ps as g,qe as h,ys as i,gs as j,bs as k,_s as l,ws as m,As as n,Is as o,Ps as p,Mr as q,zs as r,xs as s,Es as t,Rs as u,Os as v,Ds as w,Ts as x,Bs as y,Cs as z};
