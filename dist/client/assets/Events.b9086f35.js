import{S as Oe,h as Fe,s as He,Q as $,a6 as T,R as C,T as P,a7 as V,p as h,U as v,k as N,a2 as p,ae as Q,a9 as ke,ak as fe,I as R,J as U,l as ie,t as F,m as oe,o as M,L as x,u as kt,a5 as yt,af as wt,ar as pe,K as ye,ad as Et,j as he,av as Ee,ac as H,C as ee,D as te,E as le,H as ne,f as Le,V as Re,W as Lt,aB as It}from"./vendor.3ae73048.js";import{l as Ue,u as $t,az as Ge,aA as W}from"./index.146c2037.js";import{l as Ie,e as $e,a as Ct,b as Pt,c as St,d as Tt,f as Vt,g as Dt,h as jt,i as Be,j as qe,A as At,E as zt}from"./Logout.c3964a48.js";import{I as ce}from"./Icon.61279884.js";import{C as Nt}from"./ChevronUp.0ab7bee0.js";import{E as Mt}from"./Exclamation.f44359c6.js";import{R as Ye}from"./Refresh.40401873.js";import{I as Ot}from"./InfiniteScrollLoader.21052268.js";import{P as Ce}from"./plotly.2255cf4f.js";import{I as Ft}from"./helpers.7177ca38.js";import"./types.8cb6216c.js";import{L as Ht}from"./Loading.92fe8374.js";var Rt=[[{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"}],[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}]];function Je(s,e,l){const t=s.slice();return t[24]=e[l],t}function Ke(s,e,l){const t=s.slice();return t[24]=e[l],t}function Qe(s,e,l){const t=s.slice();return t[24]=e[l],t}function We(s,e,l){const t=s.slice();return t[18]=e[l],t}function Xe(s,e,l){const t=s.slice();return t[21]=e[l],t}function Ze(s,e,l){const t=s.slice();return t[18]=e[l],t[32]=l,t}function xe(s,e,l){const t=s.slice();return t[21]=e[l],t}function et(s){let e,l,t=s[21].filetype+"",n,r,o;return{c(){e=$("a"),l=T("["),n=T(t),r=T("]"),this.h()},l(i){e=C(i,"A",{href:!0,target:!0,class:!0});var a=P(e);l=V(a,"["),n=V(a,t),r=V(a,"]"),a.forEach(h),this.h()},h(){v(e,"href",o="/api/files/"+s[21].fileid),v(e,"target","_blank"),v(e,"class","text-blue-700 hover:text-blue-900"),ke(e,"ml-1",s[32]!==0)},m(i,a){N(i,e,a),p(e,l),p(e,n),p(e,r)},p(i,a){a[0]&1&&t!==(t=i[21].filetype+"")&&Q(n,t),a[0]&1&&o!==(o="/api/files/"+i[21].fileid)&&v(e,"href",o)},d(i){i&&h(e)}}}function tt(s){let e,l,t=s[32]+1+"",n,r,o=s[18].components.join(",")+"",i,a,_=s[18].imgfiles,u=[];for(let d=0;d<_.length;d+=1)u[d]=et(xe(s,_,d));return{c(){e=$("p"),l=T("Plot "),n=T(t),r=T(": Components ["),i=T(o),a=T(`]
      `);for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){e=C(d,"P",{class:!0});var f=P(e);l=V(f,"Plot "),n=V(f,t),r=V(f,": Components ["),i=V(f,o),a=V(f,`]
      `);for(let c=0;c<u.length;c+=1)u[c].l(f);f.forEach(h),this.h()},h(){v(e,"class","ml-1 mb-0.5")},m(d,f){N(d,e,f),p(e,l),p(e,n),p(e,r),p(e,i),p(e,a);for(let c=0;c<u.length;c+=1)u[c].m(e,null)},p(d,f){if(f[0]&1&&o!==(o=d[18].components.join(",")+"")&&Q(i,o),f[0]&1){_=d[18].imgfiles;let c;for(c=0;c<_.length;c+=1){const m=xe(d,_,c);u[c]?u[c].p(m,f):(u[c]=et(m),u[c].c(),u[c].m(e,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=_.length}},d(d){d&&h(e),fe(u,d)}}}function Ut(s){var Te,Ve,De,je,Ae,ze;let e,l,t,n,r,o,i,a,_,u,d,f,c,m,b,L,z,E,k,S,y,D,I,w,j,B,q,we,ue=(Ve=(Te=s[0])==null?void 0:Te.components)!=null?Ve:[],Y=[];for(let g=0;g<ue.length;g+=1)Y[g]=lt(Qe(s,ue,g));let _e=(je=(De=s[0])==null?void 0:De.components)!=null?je:[],J=[];for(let g=0;g<_e.length;g+=1)J[g]=nt(Ke(s,_e,g));let de=(ze=(Ae=s[0])==null?void 0:Ae.components)!=null?ze:[],K=[];for(let g=0;g<de.length;g+=1)K[g]=rt(Je(s,de,g));const Pe=[qt,Bt],re=[];function Se(g,O){return g[7]?0:g[3]?1:-1}return~(w=Se(s))&&(j=re[w]=Pe[w](s)),{c(){e=$("div"),l=$("div"),t=$("div"),n=T("x-Axis"),r=R(),o=$("select");for(let g=0;g<Y.length;g+=1)Y[g].c();i=R(),a=$("div"),_=$("div"),u=T("y-Axis"),d=R(),f=$("select");for(let g=0;g<J.length;g+=1)J[g].c();c=R(),m=$("div"),b=$("div"),L=T("z-Axis"),z=R(),E=$("select");for(let g=0;g<K.length;g+=1)K[g].c();k=R(),S=$("div"),y=$("div"),D=R(),I=$("div"),j&&j.c(),this.h()},l(g){e=C(g,"DIV",{class:!0});var O=P(e);l=C(O,"DIV",{class:!0});var G=P(l);t=C(G,"DIV",{class:!0});var me=P(t);n=V(me,"x-Axis"),me.forEach(h),r=U(G),o=C(G,"SELECT",{class:!0,"data-value":!0});var ge=P(o);for(let Z=0;Z<Y.length;Z+=1)Y[Z].l(ge);ge.forEach(h),G.forEach(h),i=U(O),a=C(O,"DIV",{class:!0});var se=P(a);_=C(se,"DIV",{class:!0});var ve=P(_);u=V(ve,"y-Axis"),ve.forEach(h),d=U(se),f=C(se,"SELECT",{class:!0});var be=P(f);for(let Z=0;Z<J.length;Z+=1)J[Z].l(be);be.forEach(h),se.forEach(h),c=U(O),m=C(O,"DIV",{class:!0});var ae=P(m);b=C(ae,"DIV",{class:!0});var A=P(b);L=V(A,"z-Axis"),A.forEach(h),z=U(ae),E=C(ae,"SELECT",{class:!0});var X=P(E);for(let Z=0;Z<K.length;Z+=1)K[Z].l(X);X.forEach(h),ae.forEach(h),O.forEach(h),k=U(g),S=C(g,"DIV",{class:!0});var Ne=P(S);y=C(Ne,"DIV",{class:!0}),P(y).forEach(h),Ne.forEach(h),D=U(g),I=C(g,"DIV",{class:!0});var Me=P(I);j&&j.l(Me),Me.forEach(h),this.h()},h(){v(t,"class","relative inline-block px-2.5 py-1.5 font-bold rounded-l-md border border-gray-300 bg-gray-50 text-xs whitespace-nowrap leading-4 font-medium text-gray-700 select-none"),v(o,"class","block pl-2.5 pr-8 py-1.5 rounded-r-md border border-l-0 border-gray-300 bg-white text-xs leading-4 font-medium text-gray-700 hover:text-gray-800 focus:z-10 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150"),v(o,"data-value",""),v(l,"class","inline-flex"),v(_,"class","relative inline-block px-2.5 py-1.5 font-bold rounded-l-md border border-gray-300 bg-gray-50 text-xs whitespace-nowrap leading-4 font-medium text-gray-700 select-none"),v(f,"class","block pl-2.5 pr-8 py-1.5 rounded-r-md border border-l-0 border-gray-300 bg-white text-xs leading-4 font-medium text-gray-700 hover:text-gray-800 focus:z-10 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150"),v(a,"class","inline-flex"),v(b,"class","relative inline-block px-2.5 py-1.5 font-bold rounded-l-md border border-gray-300 bg-gray-50 text-xs whitespace-nowrap leading-4 font-medium text-gray-700 select-none"),v(E,"class","block pl-2.5 pr-8 py-1.5 rounded-r-md border border-l-0 border-gray-300 bg-white text-xs leading-4 font-medium text-gray-700 hover:text-gray-800 focus:z-10 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150"),v(m,"class","inline-flex"),v(e,"class","flex justify-between w-full py-1.5 px-2.5 rounded-md text-gray-700 bg-gray-100"),v(y,"class","w-full h-[500px]"),v(S,"class","p-3"),v(I,"class","relative w-full py-1.5 px-2.5 rounded-md text-gray-700 bg-gray-100")},m(g,O){N(g,e,O),p(e,l),p(l,t),p(t,n),p(l,r),p(l,o);for(let G=0;G<Y.length;G+=1)Y[G].m(o,null);pe(o,s[4]),p(e,i),p(e,a),p(a,_),p(_,u),p(a,d),p(a,f);for(let G=0;G<J.length;G+=1)J[G].m(f,null);pe(f,s[5]),p(e,c),p(e,m),p(m,b),p(b,L),p(m,z),p(m,E);for(let G=0;G<K.length;G+=1)K[G].m(E,null);pe(E,s[6]),N(g,k,O),N(g,S,O),p(S,y),s[14](y),N(g,D,O),N(g,I,O),~w&&re[w].m(I,null),B=!0,q||(we=[ye(o,"change",s[11]),ye(f,"change",s[12]),ye(E,"change",s[13])],q=!0)},p(g,O){var me,ge,se,ve,be,ae;if(O[0]&1){ue=(ge=(me=g[0])==null?void 0:me.components)!=null?ge:[];let A;for(A=0;A<ue.length;A+=1){const X=Qe(g,ue,A);Y[A]?Y[A].p(X,O):(Y[A]=lt(X),Y[A].c(),Y[A].m(o,null))}for(;A<Y.length;A+=1)Y[A].d(1);Y.length=ue.length}if((!B||O[0]&17)&&pe(o,g[4]),O[0]&1){_e=(ve=(se=g[0])==null?void 0:se.components)!=null?ve:[];let A;for(A=0;A<_e.length;A+=1){const X=Ke(g,_e,A);J[A]?J[A].p(X,O):(J[A]=nt(X),J[A].c(),J[A].m(f,null))}for(;A<J.length;A+=1)J[A].d(1);J.length=_e.length}if((!B||O[0]&33)&&pe(f,g[5]),O[0]&1){de=(ae=(be=g[0])==null?void 0:be.components)!=null?ae:[];let A;for(A=0;A<de.length;A+=1){const X=Je(g,de,A);K[A]?K[A].p(X,O):(K[A]=rt(X),K[A].c(),K[A].m(E,null))}for(;A<K.length;A+=1)K[A].d(1);K.length=de.length}(!B||O[0]&65)&&pe(E,g[6]);let G=w;w=Se(g),w===G?~w&&re[w].p(g,O):(j&&(ie(),F(re[G],1,1,()=>{re[G]=null}),oe()),~w?(j=re[w],j?j.p(g,O):(j=re[w]=Pe[w](g),j.c()),M(j,1),j.m(I,null)):j=null)},i(g){B||(M(j),B=!0)},o(g){F(j),B=!1},d(g){g&&h(e),fe(Y,g),fe(J,g),fe(K,g),g&&h(k),g&&h(S),s[14](null),g&&h(D),g&&h(I),~w&&re[w].d(),q=!1,Et(we)}}}function Gt(s){var d;let e,l,t,n,r,o=(d=s[0].preview_imgfiles)!=null?d:[],i=[];for(let f=0;f<o.length;f+=1)i[f]=st(We(s,o,f));const a=[Jt,Yt],_=[];function u(f,c){return f[7]?0:1}return t=u(s),n=_[t]=a[t](s),{c(){e=$("div");for(let f=0;f<i.length;f+=1)i[f].c();l=R(),n.c(),this.h()},l(f){e=C(f,"DIV",{class:!0});var c=P(e);for(let m=0;m<i.length;m+=1)i[m].l(c);l=U(c),n.l(c),c.forEach(h),this.h()},h(){v(e,"class","relative p-2 group")},m(f,c){N(f,e,c);for(let m=0;m<i.length;m+=1)i[m].m(e,null);p(e,l),_[t].m(e,null),r=!0},p(f,c){var b;if(c[0]&1){o=(b=f[0].preview_imgfiles)!=null?b:[];let L;for(L=0;L<o.length;L+=1){const z=We(f,o,L);i[L]?i[L].p(z,c):(i[L]=st(z),i[L].c(),i[L].m(e,l))}for(;L<i.length;L+=1)i[L].d(1);i.length=o.length}let m=t;t=u(f),t===m?_[t].p(f,c):(ie(),F(_[m],1,1,()=>{_[m]=null}),oe(),n=_[t],n?n.p(f,c):(n=_[t]=a[t](f),n.c()),M(n,1),n.m(e,null))},i(f){r||(M(n),r=!0)},o(f){F(n),r=!1},d(f){f&&h(e),fe(i,f),_[t].d()}}}function lt(s){let e,l,t=s[24]+"",n,r;return{c(){e=$("option"),l=T("Component "),n=T(t),this.h()},l(o){e=C(o,"OPTION",{});var i=P(e);l=V(i,"Component "),n=V(i,t),i.forEach(h),this.h()},h(){e.__value=r=s[24],e.value=e.__value},m(o,i){N(o,e,i),p(e,l),p(e,n)},p(o,i){i[0]&1&&t!==(t=o[24]+"")&&Q(n,t),i[0]&1&&r!==(r=o[24])&&(e.__value=r,e.value=e.__value)},d(o){o&&h(e)}}}function nt(s){let e,l,t=s[24]+"",n,r;return{c(){e=$("option"),l=T("Component "),n=T(t),this.h()},l(o){e=C(o,"OPTION",{});var i=P(e);l=V(i,"Component "),n=V(i,t),i.forEach(h),this.h()},h(){e.__value=r=s[24],e.value=e.__value},m(o,i){N(o,e,i),p(e,l),p(e,n)},p(o,i){i[0]&1&&t!==(t=o[24]+"")&&Q(n,t),i[0]&1&&r!==(r=o[24])&&(e.__value=r,e.value=e.__value)},d(o){o&&h(e)}}}function rt(s){let e,l,t=s[24]+"",n,r;return{c(){e=$("option"),l=T("Component "),n=T(t),this.h()},l(o){e=C(o,"OPTION",{});var i=P(e);l=V(i,"Component "),n=V(i,t),i.forEach(h),this.h()},h(){e.__value=r=s[24],e.value=e.__value},m(o,i){N(o,e,i),p(e,l),p(e,n)},p(o,i){i[0]&1&&t!==(t=o[24]+"")&&Q(n,t),i[0]&1&&r!==(r=o[24])&&(e.__value=r,e.value=e.__value)},d(o){o&&h(e)}}}function Bt(s){let e,l,t,n;return{c(){e=$("span"),l=T("Loaded in "),t=T(s[3]),n=T(" seconds")},l(r){e=C(r,"SPAN",{});var o=P(e);l=V(o,"Loaded in "),t=V(o,s[3]),n=V(o," seconds"),o.forEach(h)},m(r,o){N(r,e,o),p(e,l),p(e,t),p(e,n)},p(r,o){o[0]&8&&Q(t,r[3])},i:H,o:H,d(r){r&&h(e)}}}function qt(s){let e,l,t,n,r,o,i,a,_,u,d,f;return l=new ce({props:{src:Ye,size:4,modifier:"inline-block"}}),{c(){e=$("span"),ee(l.$$.fragment),t=R(),n=$("span"),r=T("Loading new plot for ["),o=T(s[4]),i=T(", "),a=T(s[5]),_=T(", "),u=T(s[6]),d=T("]"),this.h()},l(c){e=C(c,"SPAN",{class:!0});var m=P(e);te(l.$$.fragment,m),m.forEach(h),t=U(c),n=C(c,"SPAN",{class:!0});var b=P(n);r=V(b,"Loading new plot for ["),o=V(b,s[4]),i=V(b,", "),a=V(b,s[5]),_=V(b,", "),u=V(b,s[6]),d=V(b,"]"),b.forEach(h),this.h()},h(){v(e,"class","inline-block rounded-full focus:outline-none focus:border-blue-400 focus:shadow-outline-blue animate-spin animate-reverse"),v(n,"class","ml-1")},m(c,m){N(c,e,m),le(l,e,null),N(c,t,m),N(c,n,m),p(n,r),p(n,o),p(n,i),p(n,a),p(n,_),p(n,u),p(n,d),f=!0},p(c,m){(!f||m[0]&16)&&Q(o,c[4]),(!f||m[0]&32)&&Q(a,c[5]),(!f||m[0]&64)&&Q(u,c[6])},i(c){f||(M(l.$$.fragment,c),f=!0)},o(c){F(l.$$.fragment,c),f=!1},d(c){c&&h(e),ne(l),c&&h(t),c&&h(n)}}}function it(s){let e,l,t;return{c(){e=$("img"),this.h()},l(n){e=C(n,"IMG",{src:!0,alt:!0}),this.h()},h(){Ee(e.src,l=`/api/files/${s[21].fileid}`)||v(e,"src",l),v(e,"alt",t=s[0].text)},m(n,r){N(n,e,r)},p(n,r){r[0]&1&&!Ee(e.src,l=`/api/files/${n[21].fileid}`)&&v(e,"src",l),r[0]&1&&t!==(t=n[0].text)&&v(e,"alt",t)},d(n){n&&h(e)}}}function ot(s){let e,l=(s[21].filetype==="png"||s[21].filetype==="gif")&&it(s);return{c(){l&&l.c(),e=he()},l(t){l&&l.l(t),e=he()},m(t,n){l&&l.m(t,n),N(t,e,n)},p(t,n){t[21].filetype==="png"||t[21].filetype==="gif"?l?l.p(t,n):(l=it(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&h(e)}}}function st(s){let e,l=s[18].imgfiles,t=[];for(let n=0;n<l.length;n+=1)t[n]=ot(Xe(s,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=he()},l(n){for(let r=0;r<t.length;r+=1)t[r].l(n);e=he()},m(n,r){for(let o=0;o<t.length;o+=1)t[o].m(n,r);N(n,e,r)},p(n,r){if(r[0]&1){l=n[18].imgfiles;let o;for(o=0;o<l.length;o+=1){const i=Xe(n,l,o);t[o]?t[o].p(i,r):(t[o]=ot(i),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){fe(t,n),n&&h(e)}}}function Yt(s){let e,l,t,n,r;return{c(){e=$("button"),l=$("span"),t=T("Click to load interactive plot"),this.h()},l(o){e=C(o,"BUTTON",{class:!0});var i=P(e);l=C(i,"SPAN",{class:!0});var a=P(l);t=V(a,"Click to load interactive plot"),a.forEach(h),i.forEach(h),this.h()},h(){v(l,"class","py-3 px-4 font-bold text-sm rounded-md text-white bg-blue-600 hover:bg-blue-700 transition-colors ease-in-out duration-150"),v(e,"class","absolute top-0 left-0 flex justify-center items-center w-full h-full rounded-lg border-2 bg-blue-300 border-blue-300 bg-opacity-60 cursor-pointer opacity-0 group-hover:opacity-100 transition-all ease-in-out duration-150")},m(o,i){N(o,e,i),p(e,l),p(l,t),n||(r=ye(e,"click",s[10]),n=!0)},p:H,i:H,o:H,d(o){o&&h(e),n=!1,r()}}}function Jt(s){let e,l,t;return l=new Ht({}),{c(){e=$("div"),ee(l.$$.fragment),this.h()},l(n){e=C(n,"DIV",{class:!0});var r=P(e);te(l.$$.fragment,r),r.forEach(h),this.h()},h(){v(e,"class","absolute top-0 left-0 flex justify-center items-center w-full h-full rounded-lg border-2 bg-blue-300 border-blue-300 bg-opacity-60")},m(n,r){N(n,e,r),le(l,e,null),t=!0},p:H,i(n){t||(M(l.$$.fragment,n),t=!0)},o(n){F(l.$$.fragment,n),t=!1},d(n){n&&h(e),ne(l)}}}function Kt(s){var E;let e,l,t,n,r,o=s[0].text+"",i,a,_,u,d,f,c=(E=s[0].preview_imgfiles)!=null?E:[],m=[];for(let k=0;k<c.length;k+=1)m[k]=tt(Ze(s,c,k));const b=[Gt,Ut],L=[];function z(k,S){return k[2]?1:0}return u=z(s),d=L[u]=b[u](s),{c(){e=$("div"),l=$("p"),t=$("span"),n=T("Interactive"),r=R(),i=T(o),a=R();for(let k=0;k<m.length;k+=1)m[k].c();_=R(),d.c(),this.h()},l(k){e=C(k,"DIV",{class:!0});var S=P(e);l=C(S,"P",{class:!0});var y=P(l);t=C(y,"SPAN",{class:!0});var D=P(t);n=V(D,"Interactive"),D.forEach(h),r=U(y),i=V(y,o),y.forEach(h),a=U(S);for(let I=0;I<m.length;I+=1)m[I].l(S);_=U(S),d.l(S),S.forEach(h),this.h()},h(){v(t,"class","py-0.5 px-1.5 bg-blue-600 text-white rounded font-bold"),v(l,"class","inline-block mb-0.5 whitespace-pre"),v(e,"class","flex flex-col flex-grow min-w-0")},m(k,S){N(k,e,S),p(e,l),p(l,t),p(t,n),p(l,r),p(l,i),p(e,a);for(let y=0;y<m.length;y+=1)m[y].m(e,null);p(e,_),L[u].m(e,null),f=!0},p(k,S){var D;if((!f||S[0]&1)&&o!==(o=k[0].text+"")&&Q(i,o),S[0]&1){c=(D=k[0].preview_imgfiles)!=null?D:[];let I;for(I=0;I<c.length;I+=1){const w=Ze(k,c,I);m[I]?m[I].p(w,S):(m[I]=tt(w),m[I].c(),m[I].m(e,_))}for(;I<m.length;I+=1)m[I].d(1);m.length=c.length}let y=u;u=z(k),u===y?L[u].p(k,S):(ie(),F(L[y],1,1,()=>{L[y]=null}),oe(),d=L[u],d?d.p(k,S):(d=L[u]=b[u](k),d.c()),M(d,1),d.m(e,null))},i(k){f||(M(d),f=!0)},o(k){F(d),f=!1},d(k){k&&h(e),fe(m,k),L[u].d()}}}function Qt(s,e,l){let t;x(s,Ie,y=>l(7,t=y));let{event:n}=e,r,o=!1,i=[],a,_=0,u=1,d=2;const f=(y,D,I)=>{const w=I!==_&&I!==u&&I!==d;D==="x"?w?l(4,_=I):y.currentTarget.value=_.toString():D==="y"?w?l(5,u=I):y.currentTarget.value=u.toString():D==="z"&&(w?l(6,d=I):y.currentTarget.value=d.toString()),w&&m()},c=()=>{if(!i.length)return;const y=i.sort((I,w)=>I.id-w.id).map((I,w)=>({x:I.x,y:I.y,z:I.z,type:"scatter3d",mode:"markers",name:`Cluster ${w+1}`,marker:{color:Ft[w],opacity:1,size:1}})),D={autosize:!0,margin:{l:0,r:0,b:0,t:0},legend:{x:0,y:.5},scene:{aspectmode:"data"}};(r==null?void 0:r.data)?Ce.react(r,y,D):Ce.newPlot(r,y,D)},m=async()=>{var y,D,I,w;Ie.set(!0);try{const j=((D=(y=n==null?void 0:n.datafile)==null?void 0:y.fileid)==null?void 0:D._str)||((w=(I=n==null?void 0:n.datafile)==null?void 0:I.fileid)==null?void 0:w.str);if(!j)throw Error("No datafile file id string");Ue("Get plot data",_,u,d);const B=performance.now(),q=await $t.vis.getScatterPlot(j,[_,u,d]),we=performance.now();l(2,o=!0),i=q,await yt(),c(),l(3,a=((we-B)/1e3).toFixed(2)),Ie.set(!1)}catch(j){console.log("[error] getPlotData",j),Ie.set(!1)}},b=()=>{var y,D;(D=(y=Ce)==null?void 0:y.Plots)==null||D.resize(r)};kt(()=>(window.addEventListener("resize",b),window.addEventListener("togglesidebar",b),window.addEventListener("toggleoutputs",b),()=>{window.removeEventListener("resize",b),window.removeEventListener("toggleSidebar",b),window.removeEventListener("toggleoutputs",b)}));const L=()=>m(),z=y=>f(y,"x",parseInt(y.currentTarget.value)),E=y=>f(y,"y",parseInt(y.currentTarget.value)),k=y=>f(y,"z",parseInt(y.currentTarget.value));function S(y){wt[y?"unshift":"push"](()=>{r=y,l(1,r)})}return s.$$set=y=>{"event"in y&&l(0,n=y.event)},[n,r,o,a,_,u,d,t,f,m,L,z,E,k,S]}class Wt extends Oe{constructor(e){super();Fe(this,e,Qt,Kt,He,{event:0},null,[-1,-1])}}function at(s,e,l){const t=s.slice();return t[15]=e[l],t}function ft(s,e,l){const t=s.slice();return t[18]=e[l],t[20]=l,t}function ct(s){let e,l,t,n,r,o,i;return l=new ce({props:{src:Ye,modifier:"mr-2 text-gray-500"}}),{c(){e=$("div"),ee(l.$$.fragment),t=R(),n=$("div"),r=$("p"),o=T("Loading..."),this.h()},l(a){e=C(a,"DIV",{class:!0});var _=P(e);te(l.$$.fragment,_),t=U(_),n=C(_,"DIV",{class:!0});var u=P(n);r=C(u,"P",{class:!0});var d=P(r);o=V(d,"Loading..."),d.forEach(h),u.forEach(h),_.forEach(h),this.h()},h(){v(r,"class","inline-block whitespace-pre"),v(n,"class","w-full px-2 py-0.5"),v(e,"class","flex")},m(a,_){N(a,e,_),le(l,e,null),p(e,t),p(e,n),p(n,r),p(r,o),i=!0},p:H,i(a){i||(M(l.$$.fragment,a),i=!0)},o(a){F(l.$$.fragment,a),i=!1},d(a){a&&h(e),ne(l)}}}function Xt(s){let e,l,t,n,r,o;return{c(){e=$("div"),l=T(`No events match current filters
      `),t=$("button"),n=T("Clear Filters"),this.h()},l(i){e=C(i,"DIV",{class:!0});var a=P(e);l=V(a,`No events match current filters
      `),t=C(a,"BUTTON",{class:!0});var _=P(t);n=V(_,"Clear Filters"),_.forEach(h),a.forEach(h),this.h()},h(){v(t,"class","px-2 py-1 font-semibold rounded-md text-red-600 bg-red-200 hover:text-white hover:bg-red-500"),v(e,"class","flex items-center justify-between p-4 font-sans text-sm rounded bg-gray-200 overflow-hidden")},m(i,a){N(i,e,a),p(e,l),p(e,t),p(t,n),r||(o=ye(t,"click",s[8]),r=!0)},p:H,i:H,o:H,d(i){i&&h(e),r=!1,o()}}}function Zt(s){let e=[],l=new Map,t,n,r=s[0];const o=i=>i[15].id;for(let i=0;i<r.length;i+=1){let a=at(s,r,i),_=o(a);l.set(_,e[i]=ht(_,a))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=he()},l(i){for(let a=0;a<e.length;a+=1)e[a].l(i);t=he()},m(i,a){for(let _=0;_<e.length;_+=1)e[_].m(i,a);N(i,t,a),n=!0},p(i,a){a&1083&&(r=i[0],ie(),e=Re(e,a,o,1,i,r,l,t.parentNode,Lt,ht,t,at),oe())},i(i){if(!n){for(let a=0;a<r.length;a+=1)M(e[a]);n=!0}},o(i){for(let a=0;a<e.length;a+=1)F(e[a]);n=!1},d(i){for(let a=0;a<e.length;a+=1)e[a].d(i);i&&h(t)}}}function xt(s){let e,l;return e=new ce({props:{src:At,modifier:"text-gray-500"}}),{c(){ee(e.$$.fragment)},l(t){te(e.$$.fragment,t)},m(t,n){le(e,t,n),l=!0},p:H,i(t){l||(M(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function el(s){let e,l;return e=new ce({props:{src:Rt,modifier:"text-gray-500"}}),{c(){ee(e.$$.fragment)},l(t){te(e.$$.fragment,t)},m(t,n){le(e,t,n),l=!0},p:H,i(t){l||(M(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function tl(s){let e,l;return e=new ce({props:{src:zt,modifier:"text-red-600"}}),{c(){ee(e.$$.fragment)},l(t){te(e.$$.fragment,t)},m(t,n){le(e,t,n),l=!0},p:H,i(t){l||(M(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function ll(s){let e,l;return e=new ce({props:{src:Mt,modifier:"text-orange-600"}}),{c(){ee(e.$$.fragment)},l(t){te(e.$$.fragment,t)},m(t,n){le(e,t,n),l=!0},p:H,i(t){l||(M(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function nl(s){let e,l;return e=new ce({props:{src:Nt,modifier:"text-gray-500"}}),{c(){ee(e.$$.fragment)},l(t){te(e.$$.fragment,t)},m(t,n){le(e,t,n),l=!0},p:H,i(t){l||(M(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function ut(s){let e,l,t=Le(s[15].created_at,"yyyy-MM-dd H:mm:ss.SS")+"",n,r;return{c(){e=$("span"),l=T("["),n=T(t),r=T("]"),this.h()},l(o){e=C(o,"SPAN",{class:!0});var i=P(e);l=V(i,"["),n=V(i,t),r=V(i,"]"),i.forEach(h),this.h()},h(){v(e,"class","mr-2 whitespace-nowrap text-purple-900")},m(o,i){N(o,e,i),p(e,l),p(e,n),p(e,r)},p(o,i){i&1&&t!==(t=Le(o[15].created_at,"yyyy-MM-dd H:mm:ss.SS")+"")&&Q(n,t)},d(o){o&&h(e)}}}function _t(s){let e,l=s[10](s[15].cpumem_mb,s[15].avail_mb,s[4],!s[1]&&s[5])+"";return{c(){e=$("span"),this.h()},l(t){e=C(t,"SPAN",{class:!0});var n=P(e);n.forEach(h),this.h()},h(){v(e,"class","mr-2 font-mono text-gray-700 whitespace-nowrap")},m(t,n){N(t,e,n),e.innerHTML=l},p(t,n){n&51&&l!==(l=t[10](t[15].cpumem_mb,t[15].avail_mb,t[4],!t[1]&&t[5])+"")&&(e.innerHTML=l)},d(t){t&&h(e)}}}function rl(s){let e,l;return e=new Wt({props:{event:s[15]}}),{c(){ee(e.$$.fragment)},l(t){te(e.$$.fragment,t)},m(t,n){le(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.event=t[15]),e.$set(r)},i(t){l||(M(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function il(s){var m;let e,l,t,n=s[15].text+"",r,o,i=[],a=new Map,_,u=s[15].imgfiles&&s[15].imgfiles.find(gt)!==void 0,d=(m=s[15].imgfiles)!=null?m:[];const f=b=>b[18].fileid;for(let b=0;b<d.length;b+=1){let L=ft(s,d,b),z=f(L);a.set(z,i[b]=dt(z,L))}let c=u&&pt(s);return{c(){e=$("div"),l=$("div"),t=$("p"),r=T(n),o=R();for(let b=0;b<i.length;b+=1)i[b].c();_=R(),c&&c.c(),this.h()},l(b){e=C(b,"DIV",{class:!0});var L=P(e);l=C(L,"DIV",{class:!0});var z=P(l);t=C(z,"P",{class:!0});var E=P(t);r=V(E,n),E.forEach(h),o=U(z);for(let k=0;k<i.length;k+=1)i[k].l(z);z.forEach(h),_=U(L),c&&c.l(L),L.forEach(h),this.h()},h(){v(t,"class","inline-block break-all"),v(l,"class","flex space-x-2"),v(e,"class","flex flex-col")},m(b,L){N(b,e,L),p(e,l),p(l,t),p(t,r),p(l,o);for(let z=0;z<i.length;z+=1)i[z].m(l,null);p(e,_),c&&c.m(e,null)},p(b,L){var z;L&1&&n!==(n=b[15].text+"")&&Q(r,n),L&1&&(d=(z=b[15].imgfiles)!=null?z:[],i=Re(i,L,f,1,b,d,a,l,It,dt,null,ft)),L&1&&(u=b[15].imgfiles&&b[15].imgfiles.find(gt)!==void 0),u?c?c.p(b,L):(c=pt(b),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i:H,o:H,d(b){b&&h(e);for(let L=0;L<i.length;L+=1)i[L].d();c&&c.d()}}}function ol(s){var n;let e,l=((n=s[15].text)==null?void 0:n.replace(/\s+$/,""))+"",t;return{c(){e=$("p"),t=T(l),this.h()},l(r){e=C(r,"P",{class:!0});var o=P(e);t=V(o,l),o.forEach(h),this.h()},h(){v(e,"class","inline-block text-red-700 font-medium whitespace-pre-wrap break-all")},m(r,o){N(r,e,o),p(e,t)},p(r,o){var i;o&1&&l!==(l=((i=r[15].text)==null?void 0:i.replace(/\s+$/,""))+"")&&Q(t,l)},i:H,o:H,d(r){r&&h(e)}}}function sl(s){var n;let e,l=((n=s[15].text)==null?void 0:n.replace(/\s+$/,""))+"",t;return{c(){e=$("p"),t=T(l),this.h()},l(r){e=C(r,"P",{class:!0});var o=P(e);t=V(o,l),o.forEach(h),this.h()},h(){v(e,"class","inline-block text-orange-700 font-medium whitespace-pre-wrap break-all")},m(r,o){N(r,e,o),p(e,t)},p(r,o){var i;o&1&&l!==(l=((i=r[15].text)==null?void 0:i.replace(/\s+$/,""))+"")&&Q(t,l)},i:H,o:H,d(r){r&&h(e)}}}function al(s){let e,l=s[15].text+"",t;return{c(){e=$("p"),t=T(l),this.h()},l(n){e=C(n,"P",{class:!0});var r=P(e);t=V(r,l),r.forEach(h),this.h()},h(){v(e,"class","inline-block whitespace-pre-wrap break-all")},m(n,r){N(n,e,r),p(e,t)},p(n,r){r&1&&l!==(l=n[15].text+"")&&Q(t,l)},i:H,o:H,d(n){n&&h(e)}}}function dt(s,e){let l,t,n=e[18].filetype+"",r,o,i,a;return{key:s,first:null,c(){l=$("a"),t=T("["),r=T(n),o=T(`]
                  `),this.h()},l(_){l=C(_,"A",{href:!0,target:!0,download:!0,class:!0});var u=P(l);t=V(u,"["),r=V(u,n),o=V(u,`]
                  `),u.forEach(h),this.h()},h(){v(l,"href",i="/api/files/"+e[18].fileid),v(l,"target","_blank"),v(l,"download",a=""+(e[18].filename+"."+e[18].filetype)),v(l,"class","text-blue-700 hover:text-blue-900"),ke(l,"ml-1",e[20]!==0),this.first=l},m(_,u){N(_,l,u),p(l,t),p(l,r),p(l,o)},p(_,u){e=_,u&1&&n!==(n=e[18].filetype+"")&&Q(r,n),u&1&&i!==(i="/api/files/"+e[18].fileid)&&v(l,"href",i),u&1&&a!==(a=""+(e[18].filename+"."+e[18].filetype))&&v(l,"download",a),u&1&&ke(l,"ml-1",e[20]!==0)},d(_){_&&h(l)}}}function pt(s){let e,l,t;return{c(){e=$("img"),this.h()},l(n){e=C(n,"IMG",{src:!0,alt:!0,class:!0,loading:!0}),this.h()},h(){var n,r,o,i;Ee(e.src,l="/api/files/"+((r=(n=s[15].imgfiles.find(vt))==null?void 0:n.fileid)!=null?r:""))||v(e,"src",l),v(e,"alt",t=(i=(o=s[15].imgfiles.find(bt))==null?void 0:o.filename)!=null?i:"Image not found"),v(e,"class","self-start"),v(e,"loading","lazy")},m(n,r){N(n,e,r)},p(n,r){var o,i,a,_;r&1&&!Ee(e.src,l="/api/files/"+((i=(o=n[15].imgfiles.find(vt))==null?void 0:o.fileid)!=null?i:""))&&v(e,"src",l),r&1&&t!==(t=(_=(a=n[15].imgfiles.find(bt))==null?void 0:a.filename)!=null?_:"Image not found")&&v(e,"alt",t)},d(n){n&&h(e)}}}function ht(s,e){let l,t,n,r,o,i,a,_,u,d,f,c,m,b;const L=[nl,ll,tl,el,xt],z=[];function E(w,j){return w[15].type===W.text?0:w[15].type===W.warning?1:w[15].type===W.error?2:w[15].type===W.image?3:w[15].type===W.interactive?4:-1}~(n=E(e))&&(r=z[n]=L[n](e));let k=e[3]&&ut(e),S=(typeof e[15].cpumem_mb=="number"&&e[4]||typeof e[15].avail_mb=="number"&&e[5])&&_t(e);const y=[al,sl,ol,il,rl],D=[];function I(w,j){return w[15].type===W.text?0:w[15].type===W.warning?1:w[15].type===W.error?2:w[15].type===W.image?3:w[15].type===W.interactive?4:-1}return~(d=I(e))&&(f=D[d]=y[d](e)),{key:s,first:null,c(){l=$("div"),t=$("div"),r&&r.c(),i=R(),a=$("div"),k&&k.c(),_=R(),S&&S.c(),u=R(),f&&f.c(),m=R(),this.h()},l(w){l=C(w,"DIV",{class:!0});var j=P(l);t=C(j,"DIV",{class:!0,"data-timestamp":!0});var B=P(t);r&&r.l(B),B.forEach(h),i=U(j),a=C(j,"DIV",{class:!0});var q=P(a);k&&k.l(q),_=U(q),S&&S.l(q),u=U(q),f&&f.l(q),q.forEach(h),m=U(j),j.forEach(h),this.h()},h(){v(t,"class","indicator relative mr-1 cursor-default svelte-1r5n9cm"),v(t,"data-timestamp",o=Le(e[15].created_at,"EEE, MMM d, yyyy H:mm:ss.SS a")),v(a,"class",c="flex w-full min-w-0 px-2 "+(e[15].type===W.text?"py-0.5":"py-1")+" "+mt[e[15].type]+" svelte-1r5n9cm"),v(l,"class","flex"),ke(l,"my-2",e[15].type!==W.text),this.first=l},m(w,j){N(w,l,j),p(l,t),~n&&z[n].m(t,null),p(l,i),p(l,a),k&&k.m(a,null),p(a,_),S&&S.m(a,null),p(a,u),~d&&D[d].m(a,null),p(l,m),b=!0},p(w,j){e=w;let B=n;n=E(e),n===B?~n&&z[n].p(e,j):(r&&(ie(),F(z[B],1,1,()=>{z[B]=null}),oe()),~n?(r=z[n],r?r.p(e,j):(r=z[n]=L[n](e),r.c()),M(r,1),r.m(t,null)):r=null),(!b||j&1&&o!==(o=Le(e[15].created_at,"EEE, MMM d, yyyy H:mm:ss.SS a")))&&v(t,"data-timestamp",o),e[3]?k?k.p(e,j):(k=ut(e),k.c(),k.m(a,_)):k&&(k.d(1),k=null),typeof e[15].cpumem_mb=="number"&&e[4]||typeof e[15].avail_mb=="number"&&e[5]?S?S.p(e,j):(S=_t(e),S.c(),S.m(a,u)):S&&(S.d(1),S=null);let q=d;d=I(e),d===q?~d&&D[d].p(e,j):(f&&(ie(),F(D[q],1,1,()=>{D[q]=null}),oe()),~d?(f=D[d],f?f.p(e,j):(f=D[d]=y[d](e),f.c()),M(f,1),f.m(a,null)):f=null),(!b||j&1&&c!==(c="flex w-full min-w-0 px-2 "+(e[15].type===W.text?"py-0.5":"py-1")+" "+mt[e[15].type]+" svelte-1r5n9cm"))&&v(a,"class",c),j&1&&ke(l,"my-2",e[15].type!==W.text)},i(w){b||(M(r),M(f),b=!0)},o(w){F(r),F(f),b=!1},d(w){w&&h(l),~n&&z[n].d(),k&&k.d(),S&&S.d(),~d&&D[d].d()}}}function fl(s){let e,l,t,n,r,o,i,a=s[2]&&ct();const _=[Zt,Xt],u=[];function d(f,c){return f[0].length?0:f[6].length||f[7].length?1:-1}return~(t=d(s))&&(n=u[t]=_[t](s)),o=new Ot({}),o.$on("visible",s[9]),{c(){e=$("div"),a&&a.c(),l=R(),n&&n.c(),r=R(),ee(o.$$.fragment),this.h()},l(f){e=C(f,"DIV",{class:!0});var c=P(e);a&&a.l(c),l=U(c),n&&n.l(c),r=U(c),te(o.$$.fragment,c),c.forEach(h),this.h()},h(){v(e,"class","events mb-auto w-full py-1.5 px-2.5 svelte-1r5n9cm")},m(f,c){N(f,e,c),a&&a.m(e,null),p(e,l),~t&&u[t].m(e,null),p(e,r),le(o,e,null),i=!0},p(f,[c]){f[2]?a?(a.p(f,c),c&4&&M(a,1)):(a=ct(),a.c(),M(a,1),a.m(e,l)):a&&(ie(),F(a,1,1,()=>{a=null}),oe());let m=t;t=d(f),t===m?~t&&u[t].p(f,c):(n&&(ie(),F(u[m],1,1,()=>{u[m]=null}),oe()),~t?(n=u[t],n?n.p(f,c):(n=u[t]=_[t](f),n.c()),M(n,1),n.m(e,r)):n=null)},i(f){i||(M(a),M(n),M(o.$$.fragment,f),i=!0)},o(f){F(a),F(n),F(o.$$.fragment,f),i=!1},d(f){f&&h(e),a&&a.d(),~t&&u[t].d(),ne(o)}}}const mt={text:"hover:bg-gray-100",warning:"rounded border border-orange-600 bg-orange-50",error:"rounded border border-red-600 bg-red-50",image:"rounded border border-gray-300",interactive:"rounded border border-blue-500",checkpoint:""},gt=s=>s.filetype==="png",vt=s=>s.filetype==="png",bt=s=>s.filetype==="png";function cl(s,e,l){let t,n,r,o,i,a,_,u,d,f;x(s,$e,E=>l(11,t=E)),x(s,Ct,E=>l(12,n=E)),x(s,Pt,E=>l(13,r=E)),x(s,St,E=>l(14,o=E)),x(s,Tt,E=>l(2,i=E)),x(s,Vt,E=>l(3,a=E)),x(s,Dt,E=>l(4,_=E)),x(s,jt,E=>l(5,u=E)),x(s,Be,E=>l(6,d=E)),x(s,qe,E=>l(7,f=E));let{events:c}=e,{isCluster:m=!1}=e;const b=()=>{qe.set([]),Be.set([])},L=()=>{if(!(i||o||r)&&c.length<n){const E=n-c.length;Ue(`Need to load ${E} more events (current limit: ${t})`),E>=200?$e.updateLimit(200):$e.updateLimit(E)}},z=(E,k,S=!0,y=!0)=>{const D=["["];if(S&&typeof E=="number"){const I=Ge(E,!1);D.push("CPU:"),D.push("&nbsp".repeat(10-I.length)),D.push(`<span class="text-blue-700">${I}</span>`)}if(y&&typeof k=="number"){const I=Ge(k,!1);S&&D.push("&nbsp;&nbsp;"),D.push("Avail:"),D.push("&nbsp".repeat(10-I.length)),D.push(`<span class="text-green-700">${I}</span>`)}return D.push("]"),D.join("")};return s.$$set=E=>{"events"in E&&l(0,c=E.events),"isCluster"in E&&l(1,m=E.isCluster)},[c,m,i,a,_,u,d,f,b,L,z]}class El extends Oe{constructor(e){super();Fe(this,e,cl,fl,He,{events:0,isCluster:1})}}export{El as E,mt as L};
