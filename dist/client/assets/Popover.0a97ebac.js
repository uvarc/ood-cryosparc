import{S as Z,h as $,s as ee,Q as te,R as oe,T as ne,p as z,U as R,k as W,ao as ie,z as se,A as ae,B as le,o as E,a3 as re,a4 as F,t as C,j as N,l as fe,m as de,X as ce,y as ue,a5 as me,af as ge}from"./vendor.3ae73048.js";import{f as X}from"./index.2e3bb17a.js";import{p as _e,U as x,c as he,o as we,f as pe,s as ye,b as ve}from"./types.8cb6216c.js";const be=l=>({args:l&2}),q=l=>({args:l[1]});function H(l){let t,o,s,n,f,v,i;const _=l[13].default,r=ue(_,l,l[12],q);return{c(){t=te("div"),r&&r.c(),this.h()},l(a){t=oe(a,"DIV",{class:!0});var d=ne(t);r&&r.l(d),d.forEach(z),this.h()},h(){R(t,"class",o=""+(l[2]+" popover fixed overflow-y-auto z-50 svelte-15bgudo"))},m(a,d){W(a,t,d),r&&r.m(t,null),l[14](t),f=!0,v||(i=ie(s=_e.call(null,t,document.body)),v=!0)},p(a,d){r&&r.p&&(!f||d&4098)&&se(r,_,a,a[12],f?le(_,a[12],d,be):ae(a[12]),q),(!f||d&4&&o!==(o=""+(a[2]+" popover fixed overflow-y-auto z-50 svelte-15bgudo")))&&R(t,"class",o)},i(a){f||(E(r,a),re(()=>{n||(n=F(t,X,{duration:75},!0)),n.run(1)}),f=!0)},o(a){C(r,a),n||(n=F(t,X,{duration:75},!1)),n.run(0),f=!1},d(a){a&&z(t),r&&r.d(a),l[14](null),a&&n&&n.end(),v=!1,i()}}}function ke(l){let t,o,s=l[3]&&H(l);return{c(){s&&s.c(),t=N()},l(n){s&&s.l(n),t=N()},m(n,f){s&&s.m(n,f),W(n,t,f),o=!0},p(n,[f]){n[3]?s?(s.p(n,f),f&8&&E(s,1)):(s=H(n),s.c(),E(s,1),s.m(t.parentNode,t)):s&&(fe(),C(s,1,1,()=>{s=null}),de())},i(n){o||(E(s),o=!0)},o(n){C(s),o=!1},d(n){s&&s.d(n),n&&z(t)}}}function Ee(l,t,o){let{$$slots:s={},$$scope:n}=t;var f=this&&this.__awaiter||function(e,u,m,g){function A(p){return p instanceof m?p:new m(function(b){b(p)})}return new(m||(m=Promise))(function(p,b){function G(y){try{I(g.next(y))}catch(U){b(U)}}function J(y){try{I(g.throw(y))}catch(U){b(U)}}function I(y){y.done?p(y.value):A(y.value).then(G,J)}I((g=g.apply(e,u||[])).next())})};let{modifier:v=""}=t,{popover:i=null}=t,{contextArgs:_={}}=t,{position:r="bottom-start"}=t,{floatingUIMiddleware:a=[]}=t,{shiftPadding:d=0}=t,{offset:L=0}=t,{shown:k=!1}=t,c=null,M,h=!1;const K=x.generateRandomId("popover"),P=()=>f(void 0,void 0,void 0,function*(){o(4,k=o(3,h=!0)),c&&(c.setAttribute("aria-expanded","true"),x.addClass(c,K)),yield me(),Q()}),w=()=>{o(4,k=o(3,h=!1)),c&&(c.setAttribute("aria-expanded","false"),x.moveFocus(c))},O=(e,u={})=>{var m;e.preventDefault(),e.stopPropagation(),M=e,o(1,_=u);const g=h;window.dispatchEvent(new Event("closemenus")),(e.type==="click"||e.type==="keydown"&&((m=e)===null||m===void 0?void 0:m.key)==="Enter")&&((!g||c!==e.currentTarget)&&setTimeout(()=>P(),5),c=e.currentTarget),e.type==="contextmenu"&&(c=null,setTimeout(()=>P(),5))},Q=()=>f(void 0,void 0,void 0,function*(){if(!i)return;const{clientX:e,clientY:u}=M,m=c||{getBoundingClientRect(){return{width:0,height:0,x:e,y:u,top:u,left:e,right:e,bottom:u}}},{x:g,y:A}=yield he(m,i,{placement:r,middleware:[we(L),pe(),ye({padding:d}),ve({apply({availableHeight:p,availableWidth:b}){o(0,i.style.maxHeight=`${p-10}px`,i),o(0,i.style.maxWidth=`${b-10}px`,i)}}),...a]});o(0,i.style.left=`${g}px`,i),o(0,i.style.top=`${A}px`,i)}),S=e=>{e.key&&e.key.toLowerCase()==="escape"?(e.stopPropagation(),w()):e.key&&e.key.toLowerCase()==="tab"&&x.trapFocusStopPropagation(e,i)},T=e=>{const u=e.target;!u||!i||(i==null?void 0:i.contains(u))||w()},j=()=>{h&&w()},B=e=>{(i==null?void 0:i.contains(e.target))||w()},V=()=>{document.addEventListener("keydown",S),window.addEventListener("click",T),window.addEventListener("resize",j),window.addEventListener("mousewheel",B,!1),window.addEventListener("closemenus",w,!1)},D=()=>{document.removeEventListener("keydown",S),window.removeEventListener("click",T),window.removeEventListener("resize",j),window.removeEventListener("mousewheel",B,!1),window.removeEventListener("closemenus",w,!1)};ce(D);function Y(e){ge[e?"unshift":"push"](()=>{i=e,o(0,i)})}return l.$$set=e=>{"modifier"in e&&o(2,v=e.modifier),"popover"in e&&o(0,i=e.popover),"contextArgs"in e&&o(1,_=e.contextArgs),"position"in e&&o(5,r=e.position),"floatingUIMiddleware"in e&&o(6,a=e.floatingUIMiddleware),"shiftPadding"in e&&o(7,d=e.shiftPadding),"offset"in e&&o(8,L=e.offset),"shown"in e&&o(4,k=e.shown),"$$scope"in e&&o(12,n=e.$$scope)},l.$$.update=()=>{l.$$.dirty&8&&h&&V(),l.$$.dirty&8&&(h||D())},[i,_,v,h,k,r,a,d,L,P,w,O,n,s,Y]}class Ae extends Z{constructor(t){super();$(this,t,Ee,ke,ee,{modifier:2,popover:0,contextArgs:1,position:5,floatingUIMiddleware:6,shiftPadding:7,offset:8,shown:4,open:9,close:10,toggle:11})}get open(){return this.$$.ctx[9]}get close(){return this.$$.ctx[10]}get toggle(){return this.$$.ctx[11]}}export{Ae as P};
