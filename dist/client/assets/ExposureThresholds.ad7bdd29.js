var We=Object.defineProperty,$e=Object.defineProperties;var et=Object.getOwnPropertyDescriptors;var Le=Object.getOwnPropertySymbols;var tt=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;var je=(l,e,t)=>e in l?We(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Me=(l,e)=>{for(var t in e||(e={}))tt.call(e,t)&&je(l,t,e[t]);if(Le)for(var t of Le(e))lt.call(e,t)&&je(l,t,e[t]);return l},De=(l,e)=>$e(l,et(e));import{S as pe,h as _e,s as be,y as Ue,Q as D,R as V,T as C,p as x,U as v,k as q,z as Ne,A as Re,B as Pe,o as Q,t as K,I as Z,J as G,a9 as Ee,a2 as g,K as ne,l as xe,m as we,q as Ve,a6 as P,a7 as A,C as ie,D as ue,E as de,ac as oe,H as fe,ao as ot,ad as Fe,aM as Ae,P as ge,r as Te,u as Ce,X as st,af as ye,ap as nt,L as re,ae,am as rt,ak as at}from"./vendor.3ae73048.js";import{E as it,o as Oe}from"./interactive.28807de7.js";import{bd as ve,l as ze,c9 as Ie,cP as ut,aB as ke,cQ as Be}from"./index.146c2037.js";import{I as Se}from"./Icon.61279884.js";import{a as dt,b as ft}from"./ChevronUp.0ab7bee0.js";import"./types.8cb6216c.js";import{A as ct}from"./Logout.c3964a48.js";import{t as ht}from"./Spinner.012207c4.js";import{l as He}from"./lodash.7e9ccf5d.js";import{n as mt,w as pt}from"./wNumb.f094d5b4.js";import{P as ce}from"./plotly.2255cf4f.js";import"./index.2e3bb17a.js";import"./helpers.7177ca38.js";import"./router.1b465492.js";const _t=l=>({}),Ye=l=>({}),bt=l=>({}),qe=l=>({});function gt(l){let e;return{c(){e=P("Header")},l(t){e=A(t,"Header")},m(t,n){q(t,e,n)},d(t){t&&x(e)}}}function yt(l){let e,t;return e=new Se({props:{src:dt,modifier:"text-gray-500"}}),{c(){ie(e.$$.fragment)},l(n){ue(e.$$.fragment,n)},m(n,o){de(e,n,o),t=!0},p:oe,i(n){t||(Q(e.$$.fragment,n),t=!0)},o(n){K(e.$$.fragment,n),t=!1},d(n){fe(e,n)}}}function vt(l){let e,t;return e=new Se({props:{src:ft,modifier:"text-gray-500"}}),{c(){ie(e.$$.fragment)},l(n){ue(e.$$.fragment,n)},m(n,o){de(e,n,o),t=!0},p:oe,i(n){t||(Q(e.$$.fragment,n),t=!0)},o(n){K(e.$$.fragment,n),t=!1},d(n){fe(e,n)}}}function Qe(l){let e,t;const n=l[5].content,o=Ue(n,l,l[4],Ye),r=o||xt();return{c(){e=D("div"),r&&r.c(),this.h()},l(s){e=V(s,"DIV",{class:!0});var a=C(e);r&&r.l(a),a.forEach(x),this.h()},h(){v(e,"class","bg-white p-2 pb-2.5")},m(s,a){q(s,e,a),r&&r.m(e,null),t=!0},p(s,a){o&&o.p&&(!t||a&16)&&Ne(o,n,s,s[4],t?Pe(n,s[4],a,_t):Re(s[4]),Ye)},i(s){t||(Q(r,s),t=!0)},o(s){K(r,s),t=!1},d(s){s&&x(e),r&&r.d(s)}}}function xt(l){let e;return{c(){e=P("content")},l(t){e=A(t,"content")},m(t,n){q(t,e,n)},d(t){t&&x(e)}}}function wt(l){let e,t,n,o,r,s,a,f,_,d,p,w;const E=l[5].header,i=Ue(E,l,l[4],qe),b=i||gt(),c=[vt,yt],h=[];function T(k,M){return k[0]?0:1}r=T(l),s=h[r]=c[r](l);let y=l[0]&&Qe(l);return{c(){e=D("div"),t=D("span"),n=D("button"),b&&b.c(),o=Z(),s.c(),f=Z(),y&&y.c(),this.h()},l(k){e=V(k,"DIV",{class:!0});var M=C(e);t=V(M,"SPAN",{class:!0});var U=C(t);n=V(U,"BUTTON",{type:!0,class:!0});var Y=C(n);b&&b.l(Y),o=G(Y),s.l(Y),Y.forEach(x),U.forEach(x),f=G(M),y&&y.l(M),M.forEach(x),this.h()},h(){v(n,"type","button"),v(n,"class",a="header "+(l[0]?"bg-gray-100":"bg-white")+" border-b border-gray-200 flex w-full items-center justify-between px-2.5 py-1.5 text-sm leading-4 font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-200 focus:outline-none transition ease-in-out duration-150 svelte-42ovk2"),v(t,"class","flex w-full sticky section-header svelte-42ovk2"),v(e,"class",_="section "+l[1]+" svelte-42ovk2"),Ee(e,"expanded",l[0])},m(k,M){q(k,e,M),g(e,t),g(t,n),b&&b.m(n,null),g(n,o),h[r].m(n,null),g(e,f),y&&y.m(e,null),d=!0,p||(w=ne(t,"click",l[2]),p=!0)},p(k,[M]){i&&i.p&&(!d||M&16)&&Ne(i,E,k,k[4],d?Pe(E,k[4],M,bt):Re(k[4]),qe);let U=r;r=T(k),r===U?h[r].p(k,M):(xe(),K(h[U],1,1,()=>{h[U]=null}),we(),s=h[r],s?s.p(k,M):(s=h[r]=c[r](k),s.c()),Q(s,1),s.m(n,null)),(!d||M&1&&a!==(a="header "+(k[0]?"bg-gray-100":"bg-white")+" border-b border-gray-200 flex w-full items-center justify-between px-2.5 py-1.5 text-sm leading-4 font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-200 focus:outline-none transition ease-in-out duration-150 svelte-42ovk2"))&&v(n,"class",a),k[0]?y?(y.p(k,M),M&1&&Q(y,1)):(y=Qe(k),y.c(),Q(y,1),y.m(e,null)):y&&(xe(),K(y,1,1,()=>{y=null}),we()),(!d||M&2&&_!==(_="section "+k[1]+" svelte-42ovk2"))&&v(e,"class",_),M&3&&Ee(e,"expanded",k[0])},i(k){d||(Q(b,k),Q(s),Q(y),d=!0)},o(k){K(b,k),K(s),K(y),d=!1},d(k){k&&x(e),b&&b.d(k),h[r].d(),y&&y.d(),p=!1,w()}}}function Et(l,e,t){let{$$slots:n={},$$scope:o}=e,{expanded:r=!0}=e,{idx:s}=e,{modifier:a=""}=e;const f=Ve(),_=()=>{r?f("close",{idx:s}):f("open",{idx:s})};return l.$$set=d=>{"expanded"in d&&t(0,r=d.expanded),"idx"in d&&t(3,s=d.idx),"modifier"in d&&t(1,a=d.modifier),"$$scope"in d&&t(4,o=d.$$scope)},[r,a,_,s,o,n]}class Tt extends pe{constructor(e){super();_e(this,e,Et,wt,be,{expanded:0,idx:3,modifier:1})}}function kt(l){let e,t,n,o,r,s,a,f,_,d,p,w,E,i,b,c;return w=new Se({props:{src:ct}}),{c(){e=D("div"),t=D("span"),n=D("button"),o=P("Select Thresholds"),s=Z(),a=D("button"),f=P("Zoom"),d=Z(),p=D("button"),ie(w.$$.fragment),this.h()},l(h){e=V(h,"DIV",{class:!0});var T=C(e);t=V(T,"SPAN",{class:!0});var y=C(t);n=V(y,"BUTTON",{type:!0,class:!0});var k=C(n);o=A(k,"Select Thresholds"),k.forEach(x),s=G(y),a=V(y,"BUTTON",{type:!0,class:!0});var M=C(a);f=A(M,"Zoom"),M.forEach(x),y.forEach(x),d=G(T),p=V(T,"BUTTON",{type:!0,class:!0});var U=C(p);ue(w.$$.fragment,U),U.forEach(x),T.forEach(x),this.h()},h(){v(n,"type","button"),v(n,"class",r=""+((l[2]===ve.select?l[4].active:l[4].default)+" relative inline-flex items-center px-2.5 py-1.5 rounded-l-md border text-xs leading-4 font-medium focus:z-10 focus:outline-none transition ease-in-out duration-150")),v(a,"type","button"),v(a,"class",_=""+((l[2]===ve.zoom?l[4].active:l[4].default)+" -ml-px relative inline-flex items-center px-2.5 py-1.5 rounded-r-md border text-xs leading-4 font-medium focus:z-10 focus:outline-none transition ease-in-out duration-150")),v(t,"class","relative z-0 inline-flex shadow-sm rounded-md"),v(p,"type","button"),v(p,"class",E="inline-blck items-center ml-2 p-1 rounded-md border text-xs leading-4 font-medium focus:z-10 focus:outline-none transition ease-in-out duration-150 "+(l[3]===!0?l[4].active:l[4].default)),v(e,"class","flex z-10 w-full p-2 text-xs whitespace-nowrap bg-gray-100 border-b border-gray-200")},m(h,T){q(h,e,T),g(e,t),g(t,n),g(n,o),g(t,s),g(t,a),g(a,f),g(e,d),g(e,p),de(w,p,null),i=!0,b||(c=[ne(n,"click",l[5]),ne(a,"click",l[6]),ne(p,"click",l[7]),ot(ht.call(null,p,{content:"Show threshold controls"}))],b=!0)},p(h,[T]){(!i||T&4&&r!==(r=""+((h[2]===ve.select?h[4].active:h[4].default)+" relative inline-flex items-center px-2.5 py-1.5 rounded-l-md border text-xs leading-4 font-medium focus:z-10 focus:outline-none transition ease-in-out duration-150")))&&v(n,"class",r),(!i||T&4&&_!==(_=""+((h[2]===ve.zoom?h[4].active:h[4].default)+" -ml-px relative inline-flex items-center px-2.5 py-1.5 rounded-r-md border text-xs leading-4 font-medium focus:z-10 focus:outline-none transition ease-in-out duration-150")))&&v(a,"class",_),(!i||T&8&&E!==(E="inline-blck items-center ml-2 p-1 rounded-md border text-xs leading-4 font-medium focus:z-10 focus:outline-none transition ease-in-out duration-150 "+(h[3]===!0?h[4].active:h[4].default)))&&v(p,"class",E)},i(h){i||(Q(w.$$.fragment,h),i=!0)},o(h){K(w.$$.fragment,h),i=!1},d(h){h&&x(e),fe(w),b=!1,Fe(c)}}}function Mt(l,e,t){let n,o=oe,r=()=>(o(),o=Ae(d,b=>t(2,n=b)),d),s,a=oe,f=()=>(a(),a=Ae(_,b=>t(3,s=b)),_);l.$$.on_destroy.push(()=>o()),l.$$.on_destroy.push(()=>a());let{showThresholdControls:_}=e;f();let{plotDragMode:d}=e;r();const p={default:"border-gray-300 bg-white text-gray-600 hover:text-gray-500 focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-700",active:"z-10 border-blue-400 bg-blue-100 text-blue-600 hover:text-blue-500 focus:border-blue-500 focus:shadow-outline-blue active:bg-blue-100 active:text-blue-700"},w=()=>{ge(d,n=ve.select,n)},E=()=>{ge(d,n=ve.zoom,n)},i=()=>{ge(_,s=!s,s)};return l.$$set=b=>{"showThresholdControls"in b&&f(t(0,_=b.showThresholdControls)),"plotDragMode"in b&&r(t(1,d=b.plotDragMode))},[_,d,n,s,p,w,E,i]}class Dt extends pe{constructor(e){super();_e(this,e,Mt,kt,be,{showThresholdControls:0,plotDragMode:1})}}function Vt(l){let e,t,n,o,r;return{c(){e=D("div"),t=D("button"),n=P("Clear threshold"),this.h()},l(s){e=V(s,"DIV",{class:!0});var a=C(e);t=V(a,"BUTTON",{type:!0,class:!0});var f=C(t);n=A(f,"Clear threshold"),f.forEach(x),a.forEach(x),this.h()},h(){v(t,"type","button"),v(t,"class","flex-1 inline-flex items-center justify-center w-max px-2.5 py-1.5 text-xs leading-4 font-medium rounded-md border border-rose-400 text-rose-700 bg-rose-100 hover:text-white hover:bg-rose-500 hover:border-rose-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:text-gray-800 active:bg-gray-50 transition ease-in-out duration-150"),v(e,"class","flex-1 inline-flex rounded-md shadow-sm")},m(s,a){q(s,e,a),g(e,t),g(t,n),o||(r=ne(t,"click",function(){nt(l[1])&&l[1].apply(this,arguments)}),o=!0)},p(s,a){l=s},d(s){s&&x(e),o=!1,r()}}}function Ft(l){let e,t,n,o,r,s,a,f,_,d;return{c(){e=D("div"),t=D("div"),n=D("button"),o=P("Cancel"),r=Z(),s=D("div"),a=D("button"),f=P("Set threshold"),this.h()},l(p){e=V(p,"DIV",{class:!0});var w=C(e);t=V(w,"DIV",{class:!0});var E=C(t);n=V(E,"BUTTON",{type:!0,class:!0});var i=C(n);o=A(i,"Cancel"),i.forEach(x),E.forEach(x),r=G(w),s=V(w,"DIV",{class:!0});var b=C(s);a=V(b,"BUTTON",{type:!0,class:!0});var c=C(a);f=A(c,"Set threshold"),c.forEach(x),b.forEach(x),w.forEach(x),this.h()},h(){v(n,"type","button"),v(n,"class","flex-1 inline-flex items-center justify-center w-max px-2.5 py-1.5 text-xs leading-4 font-medium rounded-md border border-gray-300 text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:text-gray-800 active:bg-gray-50 transition ease-in-out duration-150"),v(t,"class","flex-1 inline-flex rounded-md shadow-sm"),v(a,"type","button"),v(a,"class","flex-1 inline-flex items-center justify-center w-max px-2.5 py-1.5 text-xs leading-4 font-medium rounded-md border border-transparent text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition ease-in-out duration-150"),v(s,"class","flex-1 inline-flex rounded-md shadow-sm"),v(e,"class","flex-1 flex gap-x-1.5 w-full")},m(p,w){q(p,e,w),g(e,t),g(t,n),g(n,o),g(e,r),g(e,s),g(s,a),g(a,f),_||(d=[ne(n,"click",l[2]),ne(a,"click",l[10])],_=!0)},p:oe,d(p){p&&x(e),_=!1,Fe(d)}}}function Ct(l){let e,t,n,o,r,s,a,f,_,d,p,w;function E(c,h){if(c[6])return Ft;if(c[0])return Vt}let i=E(l),b=i&&i(l);return{c(){e=D("div"),t=D("div"),n=D("div"),o=D("input"),r=Z(),s=D("div"),a=Z(),f=D("div"),_=D("input"),d=Z(),b&&b.c(),this.h()},l(c){e=V(c,"DIV",{class:!0});var h=C(e);t=V(h,"DIV",{class:!0});var T=C(t);n=V(T,"DIV",{class:!0});var y=C(n);o=V(y,"INPUT",{class:!0,type:!0,step:!0,placeholder:!0}),y.forEach(x),r=G(T),s=V(T,"DIV",{class:!0}),C(s).forEach(x),a=G(T),f=V(T,"DIV",{class:!0});var k=C(f);_=V(k,"INPUT",{class:!0,type:!0,step:!0,placeholder:!0}),k.forEach(x),T.forEach(x),d=G(h),b&&b.l(h),h.forEach(x),this.h()},h(){v(o,"class","block max-w-26 text-xs leading-4 px-2.5 py-1.5 rounded-md border border-gray-300"),v(o,"type","number"),v(o,"step",l[7]),v(o,"placeholder","Min"),o.value=l[4],v(n,"class","relative rounded-md shadow-sm"),v(s,"class","attribute-slider flex-grow max-w-80 min-w-42"),Ee(s,"unsavedChanges",l[6]),v(_,"class","block max-w-26 text-xs leading-4 px-2.5 py-1.5 rounded-md border border-gray-300"),v(_,"type","number"),v(_,"step",l[7]),v(_,"placeholder","Max"),_.value=l[5],v(f,"class","relative rounded-md shadow-sm"),v(t,"class","flex items-center gap-x-2 gap-y-2 flex-grow flex-wrap"),v(e,"class","flex items-center flex-wrap gap-x-2 gap-y-2 my-2 p-2 rounded-lg bg-gray-75 border border-gray-200")},m(c,h){q(c,e,h),g(e,t),g(t,n),g(n,o),g(t,r),g(t,s),l[29](s),g(t,a),g(t,f),g(f,_),g(e,d),b&&b.m(e,null),p||(w=[ne(o,"keydown",l[8]),ne(o,"blur",l[8]),ne(_,"keydown",l[9]),ne(_,"blur",l[9])],p=!0)},p(c,h){h[0]&128&&v(o,"step",c[7]),h[0]&16&&o.value!==c[4]&&(o.value=c[4]),h[0]&64&&Ee(s,"unsavedChanges",c[6]),h[0]&128&&v(_,"step",c[7]),h[0]&32&&_.value!==c[5]&&(_.value=c[5]),i===(i=E(c))&&b?b.p(c,h):(b&&b.d(1),b=i&&i(c),b&&(b.c(),b.m(e,null)))},i:oe,o:oe,d(c){c&&x(e),l[29](null),b&&b.d(),p=!1,Fe(w)}}}function It(l,e,t){let n,o,r,s,a,f,_,d,p;const{handleThresholdChange:w}=Te("exposureCurationData");let{name:E=""}=e,{round:i=0}=e,{minValue:b=0}=e,{maxValue:c=0}=e,{min:h=null}=e,{max:T=null}=e,{hasThresholds:y=!1}=e,{handleClear:k}=e,{resetSelection:M=()=>{}}=e,{displayLocalMinMax:U}=e;const Y=Ve();let I,S=parseFloat((h!=null?h:b).toFixed(i!=null?i:0)),F=parseFloat((T!=null?T:c).toFixed(i!=null?i:0)),N=parseFloat(b.toFixed(i!=null?i:0)),j=parseFloat(c.toFixed(i!=null?i:0));const ee=()=>{var L;t(4,S=o),t(5,F=r);const u=J(S,F);(L=I==null?void 0:I.noUiSlider)==null||L.updateOptions({start:[S,F],range:{min:S-u,max:F+u}},!0),M()},le=(u,L)=>{var z;t(4,S=parseFloat(u.toFixed(i!=null?i:0))),t(5,F=parseFloat(L.toFixed(i!=null?i:0))),(z=I==null?void 0:I.noUiSlider)==null||z.set([S,F])},J=(u,L)=>(L-u)*.1+(i===3?.001:i===2?.1:1),te=u=>{var L;if(u.type==="keydown"&&u.keyCode===13)u.target.blur();else if(!!u.target.value.length&&u.type==="blur"){const z=parseFloat(parseFloat(u.target.value).toFixed(i!=null?i:0));if(z<=parseFloat(p.toFixed(i!=null?i:0))){t(4,S=z);const $=J(S,F);(L=I==null?void 0:I.noUiSlider)==null||L.updateOptions({start:[S,F],range:{min:S-$,max:F+$}},!0)}else u.target.value=S}else u.target.value.length===0&&u.type==="blur"&&(u.target.value=S)},X=u=>{var L;if(u.type==="keydown"&&u.keyCode===13)u.target.blur();else if(!!u.target.value.length&&u.type==="blur"){const z=parseFloat(parseFloat(u.target.value).toFixed(i!=null?i:0));if(z>=parseFloat(d.toFixed(i!=null?i:0))){t(5,F=z);const $=J(S,F);(L=I==null?void 0:I.noUiSlider)==null||L.updateOptions({start:[S,F],range:{min:S-$,max:F+$}},!0)}else u.target.value=F}else u.target.value.length===0&&u.type==="blur"&&(u.target.value=F)},B=async()=>{Y("update"),await Ie(20),await w(E,S,F),M()};Ce(()=>{var u;ze("Threshold control mounted",E,{minValue:b,maxValue:c,padding:_,rangeMin:d,rangeMax:p,min:h,max:T}),mt.create(I,{start:[S,F],range:{min:d,max:p},behaviour:"drag",connect:!0,tooltips:!0,format:pt({decimals:i})}),(u=I==null?void 0:I.noUiSlider)==null||u.on("update",(L,z)=>{const $=parseFloat(L[z]);z===0?t(4,S=$):t(5,F=$)})}),st(()=>{var u;(u=I==null?void 0:I.noUiSlider)==null||u.destroy()});function he(u){ye[u?"unshift":"push"](()=>{I=u,t(3,I)})}return l.$$set=u=>{"name"in u&&t(11,E=u.name),"round"in u&&t(12,i=u.round),"minValue"in u&&t(13,b=u.minValue),"maxValue"in u&&t(14,c=u.maxValue),"min"in u&&t(15,h=u.min),"max"in u&&t(16,T=u.max),"hasThresholds"in u&&t(0,y=u.hasThresholds),"handleClear"in u&&t(1,k=u.handleClear),"resetSelection"in u&&t(17,M=u.resetSelection),"displayLocalMinMax"in u&&t(18,U=u.displayLocalMinMax)},l.$$.update=()=>{var u;if(l.$$.dirty[0]&4096&&t(7,n=i===3?.001:i===2?.01:i===1?.1:1),l.$$.dirty[0]&45056&&t(28,o=parseFloat((h!=null?h:b).toFixed(i!=null?i:0))),l.$$.dirty[0]&86016&&t(27,r=parseFloat((T!=null?T:c).toFixed(i!=null?i:0))),l.$$.dirty[0]&12288&&t(26,s=parseFloat(b.toFixed(i!=null?i:0))),l.$$.dirty[0]&20480&&t(25,a=parseFloat(c.toFixed(i!=null?i:0))),l.$$.dirty[0]&100663296&&t(24,_=J(s,a)),l.$$.dirty[0]&83890176&&t(23,d=parseFloat((s-_).toFixed(i!=null?i:0))),l.$$.dirty[0]&50335744&&t(22,p=parseFloat((a+_).toFixed(i!=null?i:0))),l.$$.dirty[0]&116394040&&(N!==s||j!==a)){const L=N,z=j;t(20,N=s),t(21,j=a),L===S&&t(4,S=N),z===F&&t(5,F=j),ze("threshold values -> updating",E,`
`,`Min val: ${L} -> ${N} (${s})
`,`Max val: ${z} -> ${j} (${a})
`,`Local min: ${S} Local max: ${F}
`,`Range min: ${d} Range max: ${p}
`),(u=I==null?void 0:I.noUiSlider)==null||u.updateOptions({range:{min:d,max:p},start:[S,F]},!0)}l.$$.dirty[0]&402653232&&t(6,f=S!==o||F!==r),l.$$.dirty[0]&262256&&U(S,F,f)},[y,k,ee,I,S,F,f,n,te,X,B,E,i,b,c,h,T,M,U,le,N,j,p,d,_,a,s,r,o,he]}class St extends pe{constructor(e){super();_e(this,e,It,Ct,be,{name:11,round:12,minValue:13,maxValue:14,min:15,max:16,hasThresholds:0,handleClear:1,resetSelection:17,displayLocalMinMax:18,resetLocal:2,setLocal:19},null,[-1,-1])}get resetLocal(){return this.$$.ctx[2]}get setLocal(){return this.$$.ctx[19]}}function Lt(l){let e,t,n;return{c(){e=D("div"),t=D("div"),this.h()},l(o){e=V(o,"DIV",{"data-overview-position":!0});var r=C(e);t=V(r,"DIV",{id:!0,class:!0}),C(t).forEach(x),r.forEach(x),this.h()},h(){v(t,"id",n="attribute_plot_"+l[0]),v(t,"class","attribute-plot svelte-5xjakl"),v(e,"data-overview-position","left")},m(o,r){q(o,e,r),g(e,t),l[22](t),l[23](e)},p(o,r){r[0]&1&&n!==(n="attribute_plot_"+o[0])&&v(t,"id",n)},i:oe,o:oe,d(o){o&&x(e),l[22](null),l[23](null)}}}function jt(l,e,t){let n,o,r;const{allExposures:s,overviewHoverUid:a,plotDragMode:f,selectedView:_,hoverAnchorNode:d,setMicrograph:p}=Te("exposureCurationData");re(l,s,m=>t(20,o=m)),re(l,f,m=>t(21,r=m)),re(l,d,m=>t(25,n=m));let{title:w}=e,{name:E}=e,{min:i=null}=e,{max:b=null}=e,{setThresholdRange:c}=e,{clearThresholdRange:h}=e;const T=Ve();let y,k,M,U=0,Y=0,I=i,S=b;const F={x:[],y:[],mode:"markers",type:"scatter",name:"Accepted",marker:{opacity:.7,color:"blue"},hovertemplate:`
      ${w}: %{y}<br>
      Exposure %{x}<br>
      <extra></extra>
    `},N={x:[],y:[],mode:"markers",type:"scatter",name:"Rejected",marker:{opacity:.7,color:"red"},hovertemplate:`
      ${w}: %{y}<br>
      Exposure %{x}<br>
      <extra></extra>
    `},j={autosize:!0,hovermode:"closest",selectdirection:"v",margin:{l:35,r:10,b:18,t:0,pad:5},xaxis:{title:"",automargin:!1},yaxis:{title:"",automargin:!1},showlegend:!1,dragmode:r,shapes:[]},ee=()=>{var m,O;return(O=(m=ce)==null?void 0:m.Plots)==null?void 0:O.resize(y)},le=()=>{ce.relayout(`attribute_plot_${E}`,{"xaxis.autorange":!0,"yaxis.autorange":!0}),ce.react(`attribute_plot_${E}`,[De(Me({},F),{selectedpoints:null}),De(Me({},N),{selectedpoints:null})],j)},J=(m,O,R)=>{R?(j.shapes.length!==0&&t(19,j.shapes=[],j),typeof m=="number"&&typeof O=="number"&&j.shapes.push({type:"rect",xref:"paper",yref:"y",x0:0,y0:m,x1:1,y1:O,fillcolor:"#84e1bc",opacity:.5,layer:"below",line:{width:0}}),ce.relayout(`attribute_plot_${E}`,j)):j.shapes.length!==0&&(t(19,j.shapes=[],j),ce.relayout(`attribute_plot_${E}`,j))},te=m=>{ge(f,r=m,r),ce.relayout(`attribute_plot_${E}`,{dragmode:r})},X=m=>{var R,W,H;const O=(H=(W=(R=m==null?void 0:m.points)==null?void 0:R[0])==null?void 0:W.x)!=null?H:"";typeof O=="number"&&p(O),_.set(it.individual),L()},B=m=>{var O,R;if(typeof m!="undefined"){const W=(R=(O=m==null?void 0:m.points)==null?void 0:O.map(se=>se.y))!=null?R:[],H=Math.min(...W),me=Math.max(...W);typeof c=="function"&&c(H,me)}},he=()=>{typeof h=="function"&&h()},u=m=>{var R,W;clearTimeout(M),n!==k&&d.set(k);const O=ut((W=(R=m==null?void 0:m.points)==null?void 0:R[0])==null?void 0:W.x);typeof O=="number"&&a.set(O)},L=()=>{M=setTimeout(()=>{a.set(null)},400)};Ce(()=>{const m=document.getElementById(`attribute_plot_${E}`);return ce.newPlot(m,[F,N],j,{displayModeBar:!1,responsive:!0}),y==null||y.on("plotly_click",X),y==null||y.on("plotly_selected",B),y==null||y.on("plotly_deselect",he),y==null||y.on("plotly_hover",u),y==null||y.on("plotly_unhover",L),y==null||y.on("plotly_afterplot",()=>T("updated")),window.addEventListener("togglesidebar",ee),window.addEventListener("toggleoutputs",ee),()=>{window.removeEventListener("toggleSidebar",ee),window.removeEventListener("toggleoutputs",ee)}});function z(m){ye[m?"unshift":"push"](()=>{y=m,t(1,y)})}function $(m){ye[m?"unshift":"push"](()=>{k=m,t(2,k)})}return l.$$set=m=>{"title"in m&&t(6,w=m.title),"name"in m&&t(0,E=m.name),"min"in m&&t(7,i=m.min),"max"in m&&t(8,b=m.max),"setThresholdRange"in m&&t(9,c=m.setThresholdRange),"clearThresholdRange"in m&&t(10,h=m.clearThresholdRange)},l.$$.update=()=>{if(l.$$.dirty[0]&2089347&&y&&Array.isArray(o)){const m=o.filter(R=>R.threshold_reject===!1&&R.manual_reject===!1);t(17,F.x=m.map(R=>R.idx),F),t(17,F.y=m.map(R=>R[E]),F);const O=o.filter(R=>R.threshold_reject===!0||R.manual_reject===!0);t(18,N.x=O.map(R=>R.idx),N),t(18,N.y=O.map(R=>R[E]),N),(U!==F.y.length||Y!==N.y.length||I!==i||S!==b)&&(t(13,U=F.y.length),t(14,Y=N.y.length),t(15,I=i),t(16,S=b),t(19,j.shapes=[],j),typeof i=="number"&&typeof b=="number"&&j.shapes.push({type:"rect",xref:"paper",yref:"y",x0:0,y0:i,x1:1,y1:b,fillcolor:"#d2d6dc",opacity:.5,layer:"below",line:{width:0}}),ce.react(`attribute_plot_${E}`,[F,N],j))}l.$$.dirty[0]&2621440&&r!==j.dragmode&&te(r)},[E,y,k,s,f,d,w,i,b,c,h,le,J,U,Y,I,S,F,N,j,o,r,z,$]}class Ut extends pe{constructor(e){super();_e(this,e,jt,Lt,be,{title:6,name:0,min:7,max:8,setThresholdRange:9,clearThresholdRange:10,resetSelection:11,displayLocalMinMax:12},null,[-1,-1])}get resetSelection(){return this.$$.ctx[11]}get displayLocalMinMax(){return this.$$.ctx[12]}}function Xe(l){let e,t,n,o,r,s=ke(l[11])+"",a,f,_,d,p,w,E,i=ke(l[5])+"",b;return{c(){e=D("div"),t=D("dt"),n=P("Included"),o=Z(),r=D("dd"),a=P(s),f=Z(),_=D("div"),d=D("dt"),p=P("Excluded"),w=Z(),E=D("dd"),b=P(i),this.h()},l(c){e=V(c,"DIV",{class:!0});var h=C(e);t=V(h,"DT",{class:!0});var T=C(t);n=A(T,"Included"),T.forEach(x),o=G(h),r=V(h,"DD",{class:!0});var y=C(r);a=A(y,s),y.forEach(x),h.forEach(x),f=G(c),_=V(c,"DIV",{class:!0});var k=C(_);d=V(k,"DT",{class:!0});var M=C(d);p=A(M,"Excluded"),M.forEach(x),w=G(k),E=V(k,"DD",{class:!0});var U=C(E);b=A(U,i),U.forEach(x),k.forEach(x),this.h()},h(){v(t,"class","text-xs leading-4 font-medium text-gray-500"),v(r,"class","text-sm leading-5 text-gray-900"),v(e,"class","px-2"),v(d,"class","text-xs leading-4 font-medium text-gray-500"),v(E,"class","text-sm leading-5 text-gray-900"),v(_,"class","pl-2")},m(c,h){q(c,e,h),g(e,t),g(t,n),g(e,o),g(e,r),g(r,a),q(c,f,h),q(c,_,h),g(_,d),g(d,p),g(_,w),g(_,E),g(E,b)},p(c,h){h[0]&2048&&s!==(s=ke(c[11])+"")&&ae(a,s),h[0]&32&&i!==(i=ke(c[5])+"")&&ae(b,i)},d(c){c&&x(e),c&&x(f),c&&x(_)}}}function Ze(l){let e,t,n={name:l[0],minValue:l[7],maxValue:l[6],min:l[2],max:l[3],round:l[4],hasThresholds:l[16],handleClear:l[26],resetSelection:l[31],displayLocalMinMax:He.exports.throttle(l[32],100)};return e=new St({props:n}),l[33](e),e.$on("update",l[22]),{c(){ie(e.$$.fragment)},l(o){ue(e.$$.fragment,o)},m(o,r){de(e,o,r),t=!0},p(o,r){const s={};r[0]&1&&(s.name=o[0]),r[0]&128&&(s.minValue=o[7]),r[0]&64&&(s.maxValue=o[6]),r[0]&4&&(s.min=o[2]),r[0]&8&&(s.max=o[3]),r[0]&16&&(s.round=o[4]),r[0]&65536&&(s.hasThresholds=o[16]),r[0]&1024&&(s.resetSelection=o[31]),r[0]&1024&&(s.displayLocalMinMax=He.exports.throttle(o[32],100)),e.$set(s)},i(o){t||(Q(e.$$.fragment,o),t=!0)},o(o){K(e.$$.fragment,o),t=!1},d(o){l[33](null),fe(e,o)}}}function Nt(l){let e,t,n,o,r,s,a,f,_,d,p,w,E,i,b,c,h,T,y,k,M,U,Y,I,S,F,N,j,ee,le,J,te,X=l[16]&&Xe(l),B=!l[17]&&l[18]&&(l[7]!==0||l[6]!==0)&&l[7]!==l[6]&&Ze(l),he={name:l[0],title:l[1],min:l[2],max:l[3],setThresholdRange:l[24],clearThresholdRange:l[25]};return J=new Ut({props:he}),l[34](J),J.$on("updated",l[23]),J.$on("plotLoaded",l[35]),{c(){e=D("div"),t=D("span"),n=P("Loading..."),o=Z(),r=D("div"),s=D("div"),a=D("div"),f=D("dt"),_=P("Minimum"),d=Z(),p=D("dd"),w=P("Exposure "),E=P(l[13]),i=P(" ("),b=P(l[15]),c=P(")"),h=Z(),T=D("div"),y=D("dt"),k=P("Maximum"),M=Z(),U=D("dd"),Y=P("Exposure "),I=P(l[12]),S=P(" ("),F=P(l[14]),N=P(")"),j=Z(),X&&X.c(),ee=Z(),B&&B.c(),le=Z(),ie(J.$$.fragment),this.h()},l(u){e=V(u,"DIV",{class:!0});var L=C(e);t=V(L,"SPAN",{class:!0});var z=C(t);n=A(z,"Loading..."),z.forEach(x),L.forEach(x),o=G(u),r=V(u,"DIV",{class:!0});var $=C(r);s=V($,"DIV",{class:!0});var m=C(s);a=V(m,"DIV",{class:!0});var O=C(a);f=V(O,"DT",{class:!0});var R=C(f);_=A(R,"Minimum"),R.forEach(x),d=G(O),p=V(O,"DD",{class:!0});var W=C(p);w=A(W,"Exposure "),E=A(W,l[13]),i=A(W," ("),b=A(W,l[15]),c=A(W,")"),W.forEach(x),O.forEach(x),h=G(m),T=V(m,"DIV",{class:!0});var H=C(T);y=V(H,"DT",{class:!0});var me=C(y);k=A(me,"Maximum"),me.forEach(x),M=G(H),U=V(H,"DD",{class:!0});var se=C(U);Y=A(se,"Exposure "),I=A(se,l[12]),S=A(se," ("),F=A(se,l[14]),N=A(se,")"),se.forEach(x),H.forEach(x),j=G(m),X&&X.l(m),m.forEach(x),$.forEach(x),ee=G(u),B&&B.l(u),le=G(u),ue(J.$$.fragment,u),this.h()},h(){v(t,"class","absolute-center text-gray-800 font-bold"),v(e,"class","absolute top-0 left-0 h-full w-full hidden rounded bg-gray-500 bg-opacity-50 z-10"),v(f,"class","text-xs leading-4 font-medium text-gray-500"),v(p,"class","text-sm leading-5 text-gray-900"),v(a,"class","pr-2"),v(y,"class","text-xs leading-4 font-medium text-gray-500"),v(U,"class","text-sm leading-5 text-gray-900"),v(T,"class","px-2"),v(s,"class","flex-grow inline-flex divide-x divide-gray-300"),v(r,"class","flex justify-between items-center flex-wrap gap-x-1 gap-y-2.5")},m(u,L){q(u,e,L),g(e,t),g(t,n),l[30](e),q(u,o,L),q(u,r,L),g(r,s),g(s,a),g(a,f),g(f,_),g(a,d),g(a,p),g(p,w),g(p,E),g(p,i),g(p,b),g(p,c),g(s,h),g(s,T),g(T,y),g(y,k),g(T,M),g(T,U),g(U,Y),g(U,I),g(U,S),g(U,F),g(U,N),g(s,j),X&&X.m(s,null),q(u,ee,L),B&&B.m(u,L),q(u,le,L),de(J,u,L),te=!0},p(u,L){(!te||L[0]&8192)&&ae(E,u[13]),(!te||L[0]&32768)&&ae(b,u[15]),(!te||L[0]&4096)&&ae(I,u[12]),(!te||L[0]&16384)&&ae(F,u[14]),u[16]?X?X.p(u,L):(X=Xe(u),X.c(),X.m(s,null)):X&&(X.d(1),X=null),!u[17]&&u[18]&&(u[7]!==0||u[6]!==0)&&u[7]!==u[6]?B?(B.p(u,L),L[0]&393408&&Q(B,1)):(B=Ze(u),B.c(),Q(B,1),B.m(le.parentNode,le)):B&&(xe(),K(B,1,1,()=>{B=null}),we());const z={};L[0]&1&&(z.name=u[0]),L[0]&2&&(z.title=u[1]),L[0]&4&&(z.min=u[2]),L[0]&8&&(z.max=u[3]),J.$set(z)},i(u){te||(Q(B),Q(J.$$.fragment,u),te=!0)},o(u){K(B),K(J.$$.fragment,u),te=!1},d(u){u&&x(e),l[30](null),u&&x(o),u&&x(r),X&&X.d(),u&&x(ee),B&&B.d(u),u&&x(le),l[34](null),fe(J,u)}}}function Rt(l,e,t){let n,o,r,s,a,f,_,d,p,w,E,i,b,c;const{loadingExposures:h,allExposures:T,showThresholdControls:y,handleClearThreshold:k}=Te("exposureCurationData");re(l,h,m=>t(17,b=m)),re(l,T,m=>t(29,i=m)),re(l,y,m=>t(18,c=m));let{name:M}=e,{title:U=""}=e,{min:Y}=e,{max:I}=e,{round:S=0}=e,F,N,j;const ee=()=>F.classList.remove("hidden"),le=()=>F.classList.add("hidden"),J=(m,O)=>N==null?void 0:N.setLocal(m,O),te=()=>N==null?void 0:N.resetLocal(),X=async()=>{ee(),await Ie(20),await k(M),N==null||N.resetLocal(),j==null||j.resetSelection()};function B(m){ye[m?"unshift":"push"](()=>{F=m,t(8,F)})}const he=()=>j==null?void 0:j.resetSelection(),u=(m,O,R)=>j==null?void 0:j.displayLocalMinMax(m,O,R);function L(m){ye[m?"unshift":"push"](()=>{N=m,t(9,N)})}function z(m){ye[m?"unshift":"push"](()=>{j=m,t(10,j)})}function $(m){rt.call(this,l,m)}return l.$$set=m=>{"name"in m&&t(0,M=m.name),"title"in m&&t(1,U=m.title),"min"in m&&t(2,Y=m.min),"max"in m&&t(3,I=m.max),"round"in m&&t(4,S=m.round)},l.$$.update=()=>{var m,O,R,W;l.$$.dirty[0]&12&&t(16,n=typeof Y=="number"&&typeof I=="number"),l.$$.dirty[0]&536870913&&t(28,o=Math.min(...i.map(H=>typeof H[M]=="number"?H[M]:Be(H[M])?parseFloat(H[M]):0))),l.$$.dirty[0]&536870913&&t(27,r=Math.max(...i.map(H=>typeof H[M]=="number"?H[M]:Be(H[M])?parseFloat(H[M]):0))),l.$$.dirty[0]&268435460&&t(7,s=Y&&Y<o?Y:o),l.$$.dirty[0]&134217736&&t(6,a=I&&I>r?I:r),l.$$.dirty[0]&144&&t(15,f=s.toFixed(S!=null?S:0)),l.$$.dirty[0]&80&&t(14,_=a.toFixed(S!=null?S:0)),l.$$.dirty[0]&805306369&&t(13,d=(O=(m=i.find(H=>parseFloat(H[M])===o))==null?void 0:m.idx)!=null?O:null),l.$$.dirty[0]&671088641&&t(12,p=(W=(R=i.find(H=>parseFloat(H[M])===r))==null?void 0:R.idx)!=null?W:null),l.$$.dirty[0]&536870925&&t(5,w=i.filter(H=>{var me,se;return((me=H[M])!=null?me:0)<Y||((se=H[M])!=null?se:0)>I}).length),l.$$.dirty[0]&536870944&&t(11,E=i.length-w)},[M,U,Y,I,S,w,a,s,F,N,j,E,p,d,_,f,n,b,c,h,T,y,ee,le,J,te,X,r,o,i,B,he,u,L,z,$]}class Pt extends pe{constructor(e){super();_e(this,e,Rt,Nt,be,{name:0,title:1,min:2,max:3,round:4},null,[-1,-1])}}function Ge(l,e,t){const n=l.slice();return n[13]=e[t],n[15]=t,n}function At(l){let e,t,n;return{c(){e=D("div"),t=D("span"),n=P("Loading..."),this.h()},l(o){e=V(o,"DIV",{class:!0});var r=C(e);t=V(r,"SPAN",{class:!0});var s=C(t);n=A(s,"Loading..."),s.forEach(x),r.forEach(x),this.h()},h(){v(t,"class","absolute-center text-gray-800 font-bold"),v(e,"class","absolute top-0 left-0 h-full w-full bg-gray-100")},m(o,r){q(o,e,r),g(e,t),g(t,n)},p:oe,i:oe,o:oe,d(o){o&&x(e)}}}function Ot(l){let e,t,n=l[1],o=[];for(let s=0;s<n.length;s+=1)o[s]=Ke(Ge(l,n,s));const r=s=>K(o[s],1,1,()=>{o[s]=null});return{c(){e=D("div");for(let s=0;s<o.length;s+=1)o[s].c()},l(s){e=V(s,"DIV",{});var a=C(e);for(let f=0;f<o.length;f+=1)o[f].l(a);a.forEach(x)},m(s,a){q(s,e,a);for(let f=0;f<o.length;f+=1)o[f].m(e,null);t=!0},p(s,a){if(a&774){n=s[1];let f;for(f=0;f<n.length;f+=1){const _=Ge(s,n,f);o[f]?(o[f].p(_,a),Q(o[f],1)):(o[f]=Ke(_),o[f].c(),Q(o[f],1),o[f].m(e,null))}for(xe(),f=n.length;f<o.length;f+=1)r(f);we()}},i(s){if(!t){for(let a=0;a<n.length;a+=1)Q(o[a]);t=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)K(o[a]);t=!1},d(s){s&&x(e),at(o,s)}}}function Je(l){var f,_,d,p,w,E,i,b;let e,t,n=((p=(f=l[13])==null?void 0:f.min)==null?void 0:p.toFixed((d=(_=l[13])==null?void 0:_.round)!=null?d:0))+"",o,r,s=((b=(w=l[13])==null?void 0:w.max)==null?void 0:b.toFixed((i=(E=l[13])==null?void 0:E.round)!=null?i:0))+"",a;return{c(){e=D("span"),t=P("Min: "),o=P(n),r=P(" \u2192 Max: "),a=P(s),this.h()},l(c){e=V(c,"SPAN",{class:!0});var h=C(e);t=A(h,"Min: "),o=A(h,n),r=A(h," \u2192 Max: "),a=A(h,s),h.forEach(x),this.h()},h(){v(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium leading-4 bg-orange-100 text-orange-800")},m(c,h){q(c,e,h),g(e,t),g(e,o),g(e,r),g(e,a)},p(c,h){var T,y,k,M,U,Y,I,S;h&2&&n!==(n=((M=(T=c[13])==null?void 0:T.min)==null?void 0:M.toFixed((k=(y=c[13])==null?void 0:y.round)!=null?k:0))+"")&&ae(o,n),h&2&&s!==(s=((S=(U=c[13])==null?void 0:U.max)==null?void 0:S.toFixed((I=(Y=c[13])==null?void 0:Y.round)!=null?I:0))+"")&&ae(a,s)},d(c){c&&x(e)}}}function zt(l){var f,_;let e,t=l[13].title+"",n,o,r,s,a=typeof((f=l[13])==null?void 0:f.min)=="number"&&typeof((_=l[13])==null?void 0:_.max)=="number"&&Je(l);return{c(){e=D("div"),n=P(t),o=Z(),r=D("div"),a&&a.c(),s=Z(),this.h()},l(d){e=V(d,"DIV",{slot:!0,class:!0});var p=C(e);n=A(p,t),o=G(p),r=V(p,"DIV",{class:!0});var w=C(r);a&&a.l(w),w.forEach(x),s=G(p),p.forEach(x),this.h()},h(){v(r,"class","inline-flex align-center space-x-2 mr-2"),v(e,"slot","header"),v(e,"class","w-full flex justify-between items-center")},m(d,p){q(d,e,p),g(e,n),g(e,o),g(e,r),a&&a.m(r,null),g(e,s)},p(d,p){var w,E;p&2&&t!==(t=d[13].title+"")&&ae(n,t),typeof((w=d[13])==null?void 0:w.min)=="number"&&typeof((E=d[13])==null?void 0:E.max)=="number"?a?a.p(d,p):(a=Je(d),a.c(),a.m(r,null)):a&&(a.d(1),a=null)},d(d){d&&x(e),a&&a.d()}}}function Bt(l){var r,s;let e,t,n,o;return t=new Pt({props:{name:l[13].name,title:l[13].title,min:l[13].min,max:l[13].max,round:(s=(r=l[13])==null?void 0:r.round)!=null?s:0}}),{c(){e=D("div"),ie(t.$$.fragment),n=Z(),this.h()},l(a){e=V(a,"DIV",{slot:!0,class:!0});var f=C(e);ue(t.$$.fragment,f),n=G(f),f.forEach(x),this.h()},h(){v(e,"slot","content"),v(e,"class","relative")},m(a,f){q(a,e,f),de(t,e,null),g(e,n),o=!0},p(a,f){var d,p;const _={};f&2&&(_.name=a[13].name),f&2&&(_.title=a[13].title),f&2&&(_.min=a[13].min),f&2&&(_.max=a[13].max),f&2&&(_.round=(p=(d=a[13])==null?void 0:d.round)!=null?p:0),t.$set(_)},i(a){o||(Q(t.$$.fragment,a),o=!0)},o(a){K(t.$$.fragment,a),o=!1},d(a){a&&x(e),fe(t)}}}function Ke(l){let e,t;return e=new Tt({props:{expanded:l[2].includes(l[15]),idx:l[15],$$slots:{content:[Bt],header:[zt]},$$scope:{ctx:l}}}),e.$on("open",l[8]),e.$on("close",l[9]),{c(){ie(e.$$.fragment)},l(n){ue(e.$$.fragment,n)},m(n,o){de(e,n,o),t=!0},p(n,o){const r={};o&4&&(r.expanded=n[2].includes(n[15])),o&65538&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(Q(e.$$.fragment,n),t=!0)},o(n){K(e.$$.fragment,n),t=!1},d(n){fe(e,n)}}}function Ht(l){let e,t,n,o,r,s;e=new Dt({props:{showThresholdControls:l[3],plotDragMode:l[4]}});const a=[Ot,At],f=[];function _(d,p){return d[0]?0:1}return o=_(l),r=f[o]=a[o](l),{c(){ie(e.$$.fragment),t=Z(),n=D("div"),r.c(),this.h()},l(d){ue(e.$$.fragment,d),t=G(d),n=V(d,"DIV",{class:!0});var p=C(n);r.l(p),p.forEach(x),this.h()},h(){v(n,"class","h-full w-full overflow-y-auto")},m(d,p){de(e,d,p),q(d,t,p),q(d,n,p),f[o].m(n,null),s=!0},p(d,[p]){let w=o;o=_(d),o===w?f[o].p(d,p):(xe(),K(f[w],1,1,()=>{f[w]=null}),we(),r=f[o],r?r.p(d,p):(r=f[o]=a[o](d),r.c()),Q(r,1),r.m(n,null))},i(d){s||(Q(e.$$.fragment,d),Q(r),s=!0)},o(d){K(e.$$.fragment,d),K(r),s=!1},d(d){fe(e,d),d&&x(t),d&&x(n),f[o].d()}}}function Yt(l,e,t){let n,o,r,s;const{showThresholdControls:a,plotDragMode:f,fields:_,expandedMax:d,expandedThresholdCharts:p}=Te("exposureCurationData");re(l,_,c=>t(10,s=c)),re(l,d,c=>t(11,r=c)),re(l,p,c=>t(2,o=c));let w;const E=()=>{p.set(o.slice(0,r))},i=c=>{var h;if(typeof((h=c==null?void 0:c.detail)==null?void 0:h.idx)=="number"&&!o.includes(c.detail.idx)){const T=[...o];T.push(c.detail.idx),T.length>r&&T.shift(),ge(p,o=T,o)}},b=c=>{var h;typeof((h=c==null?void 0:c.detail)==null?void 0:h.idx)=="number"&&ge(p,o=o.filter(T=>{var y;return T!==((y=c==null?void 0:c.detail)==null?void 0:y.idx)}),o)};return Ce(async()=>{await Ie(20),t(0,w=!0),E()}),l.$$.update=()=>{l.$$.dirty&1024&&t(1,n=s.filter(c=>c.name!=="uid"&&c.name!=="fname").sort((c,h)=>Oe.indexOf(c.name)-Oe.indexOf(h.name)))},[w,n,o,a,f,_,d,p,i,b,s]}class rl extends pe{constructor(e){super();_e(this,e,Yt,Ht,be,{})}}export{rl as default};
