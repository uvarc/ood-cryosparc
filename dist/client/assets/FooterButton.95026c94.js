var zs=Object.defineProperty,Ns=Object.defineProperties;var Bs=Object.getOwnPropertyDescriptors;var Pe=Object.getOwnPropertySymbols;var nr=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable;var ir=(t,e,r)=>e in t?zs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ct=(t,e)=>{for(var r in e||(e={}))nr.call(e,r)&&ir(t,r,e[r]);if(Pe)for(var r of Pe(e))rr.call(e,r)&&ir(t,r,e[r]);return t},dt=(t,e)=>Ns(t,Bs(e));var Et=(t,e)=>{var r={};for(var n in t)nr.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Pe)for(var n of Pe(t))e.indexOf(n)<0&&rr.call(t,n)&&(r[n]=t[n]);return r};import{S as pt,h as gt,s as mt,y as vt,Q as L,R as F,T as P,p as S,U as B,k as W,ao as ne,z as _t,A as bt,B as yt,o as O,t as q,ay as gn,w as Qt,a9 as fe,ad as ce,I as G,j as xt,J as K,an as sr,a3 as Ts,a2 as T,aL as Vs,q as Le,af as Vt,l as St,m as zt,u as $t,C as tt,D as et,E as nt,ac as Ct,H as rt,a6 as lt,a7 as ut,K as It,ae as Mt,ak as he,L as wt,r as Rt,n as mn,am as de,P as or,ax as ar,aA as lr,v as jt,aw as pe,aa as ur,F as Fe,ap as js,ag as te,x as qe,at as fr,au as cr,ah as Ue,ai as He,G as As,g as vn}from"./vendor.3ae73048.js";import{O as Rs,K as we}from"./router.1b465492.js";import{P as Os}from"./PageDialog.0c69a37b.js";import{c9 as hr,at as dr,e as Ds,aw as Ps,ax as Ls,a8 as pr}from"./index.146c2037.js";import"./types.8cb6216c.js";import{S as gr,t as xe}from"./Spinner.012207c4.js";import{Q as Lt,U as Fs,L as _n,W as bn,I as qs,X as Us,S as Hs,Y as Js,Z as mr,_ as Ws,$ as Xs,O as ft}from"./index.11580965.js";import{U as Ys,F as Gs}from"./Unfold.f168270e.js";import{T as Ks}from"./Target.7baf7004.js";import{I as Ie}from"./Icon.61279884.js";import{b as Je,a as We}from"./ChevronUp.0ab7bee0.js";import{F as Zs}from"./Flag.5ce531b9.js";import{i as vr,s as Qs,b as $s,c as to}from"./index.ef7d8fe7.js";import{F as eo}from"./Folder.9bc96b35.js";import{p as _r,m as br}from"./purify.es.5cdb46dc.js";function no(t){let e,r,n,i;const s=t[4].default,o=vt(s,t,t[3],null);return{c(){e=L("div"),o&&o.c(),this.h()},l(l){e=F(l,"DIV",{id:!0});var u=P(e);o&&o.l(u),u.forEach(S),this.h()},h(){B(e,"id","workflow-bus")},m(l,u){W(l,e,u),o&&o.m(e,null),r=!0,n||(i=ne(t[0].call(null,e)),n=!0)},p(l,[u]){o&&o.p&&(!r||u&8)&&_t(o,s,l,l[3],r?yt(s,l[3],u,null):bt(l[3]),null)},i(l){r||(O(o,l),r=!0)},o(l){q(o,l),r=!1},d(l){l&&S(e),o&&o.d(l),n=!1,i()}}}function ro(t,e,r){let{$$slots:n={},$$scope:i}=e;const s=Qt(),o=Qt();gn("bus:workflow",{bus:{subscribe:s.subscribe},signal:{subscribe:o.subscribe}});const l=u=>{const a=new AbortController;return s.set(u),o.set(a.signal),{destroy(){a.abort()}}};return t.$$set=u=>{"$$scope"in u&&r(3,i=u.$$scope)},[l,s,o,i,n]}class Zh extends pt{constructor(e){super();gt(this,e,ro,no,mt,{bus:1,signal:2})}get bus(){return this.$$.ctx[1]}get signal(){return this.$$.ctx[2]}}const io=t=>({}),yr=t=>({}),so=t=>({}),wr=t=>({});function xr(t){let e,r,n,i,s,o;return{c(){e=L("div"),this.h()},l(l){e=F(l,"DIV",{class:!0}),P(e).forEach(S),this.h()},h(){B(e,"class",r=""+(t[1]+" divider svelte-ywkciv")),fe(e,"disabled",t[3])},m(l,u){W(l,e,u),s||(o=[ne(n=t[13].call(null,e,t[20])),ne(i=t[14].call(null,e,t[21]))],s=!0)},p(l,u){u&2&&r!==(r=""+(l[1]+" divider svelte-ywkciv"))&&B(e,"class",r),u&10&&fe(e,"disabled",l[3])},d(l){l&&S(e),s=!1,ce(o)}}}function Ir(t){let e;return{c(){e=L("div"),this.h()},l(r){e=F(r,"DIV",{class:!0}),P(e).forEach(S),this.h()},h(){B(e,"class","mousecatcher svelte-ywkciv")},m(r,n){W(r,e,n)},d(r){r&&S(e)}}}function oo(t){let e,r,n,i,s,o,l,u,a,f,c,h;const d=t[19].a,_=vt(d,t,t[18],wr),m=t[19].b,g=vt(m,t,t[18],yr);let p=t[2]!=="0%"&&t[2]!=="100%"&&xr(t),v=t[11]&&Ir();return{c(){e=L("div"),r=L("div"),_&&_.c(),i=G(),s=L("div"),g&&g.c(),l=G(),p&&p.c(),f=G(),v&&v.c(),c=xt(),this.h()},l(b){e=F(b,"DIV",{"data-pane":!0,class:!0,style:!0});var x=P(e);r=F(x,"DIV",{class:!0});var E=P(r);_&&_.l(E),E.forEach(S),i=K(x),s=F(x,"DIV",{class:!0});var y=P(s);g&&g.l(y),y.forEach(S),l=K(x),p&&p.l(x),x.forEach(S),f=K(b),v&&v.l(b),c=xt(),this.h()},h(){B(r,"class",n="pane "+t[4]+" svelte-ywkciv"),B(s,"class",o="pane "+t[5]+" svelte-ywkciv"),B(e,"data-pane",t[0]),B(e,"class",u=""+(t[6]+" split-pane-container "+t[1]+" svelte-ywkciv")),sr(e,"--pos",t[10]),Ts(()=>t[23].call(e))},m(b,x){W(b,e,x),T(e,r),_&&_.m(r,null),T(e,i),T(e,s),g&&g.m(s,null),T(e,l),p&&p.m(e,null),t[22](e),a=Vs(e,t[23].bind(e)),W(b,f,x),v&&v.m(b,x),W(b,c,x),h=!0},p(b,[x]){_&&_.p&&(!h||x&262144)&&_t(_,d,b,b[18],h?yt(d,b[18],x,so):bt(b[18]),wr),(!h||x&16&&n!==(n="pane "+b[4]+" svelte-ywkciv"))&&B(r,"class",n),g&&g.p&&(!h||x&262144)&&_t(g,m,b,b[18],h?yt(m,b[18],x,io):bt(b[18]),yr),(!h||x&32&&o!==(o="pane "+b[5]+" svelte-ywkciv"))&&B(s,"class",o),b[2]!=="0%"&&b[2]!=="100%"?p?p.p(b,x):(p=xr(b),p.c(),p.m(e,null)):p&&(p.d(1),p=null),(!h||x&1)&&B(e,"data-pane",b[0]),(!h||x&66&&u!==(u=""+(b[6]+" split-pane-container "+b[1]+" svelte-ywkciv")))&&B(e,"class",u),(!h||x&1024)&&sr(e,"--pos",b[10]),b[11]?v||(v=Ir(),v.c(),v.m(c.parentNode,c)):v&&(v.d(1),v=null)},i(b){h||(O(_,b),O(g,b),h=!0)},o(b){q(_,b),q(g,b),h=!1},d(b){b&&S(e),_&&_.d(b),g&&g.d(b),p&&p.d(),t[22](null),a(),b&&S(f),v&&v.d(b),b&&S(c)}}}function yn(t,e,r){const n=parseFloat(t);if(t.endsWith("px"))return n;if(t.endsWith("%"))return r*n/100;if(t.endsWith("rem"))return n*parseFloat(getComputedStyle(document.documentElement).fontSize);if(t.endsWith("em"))return n*parseFloat(getComputedStyle(e).fontSize);throw new Error(`Invalid length: ${t}`)}function ao(t,e,r){let n,{$$slots:i={},$$scope:s}=e;const o=Le();let{id:l=void 0}=e,{type:u}=e,{pos:a="50%"}=e,{min:f="0%"}=e,{max:c="100%"}=e,{disabled:h=!1}=e,{priority:d="min"}=e,{classA:_=""}=e,{classB:m=""}=e,{class:g=""}=e,p,v=!1,b=0,x=0;function E(C,w,M,k,N,V){let j=yn(M,C,w),H=yn(k,C,w),X=yn(N,C,w);return j<0&&(j+=w),H<0&&(H+=w),X=V==="min"?Math.max(j,Math.min(H,X)):Math.min(H,Math.max(j,X)),N.endsWith("%")?w?`${100*X/w}%`:"0%":`${X}px`}function y(C,w){if(h)return;const{top:M,left:k}=p.getBoundingClientRect(),N=u==="horizontal"?C-k:w-M,V=u==="horizontal"?b:x;r(10,n=a.endsWith("%")?`${100*N/V}%`:`${N}px`),o("change",{pos:Math.round(parseInt(n))})}function A(C,w){const M=k=>{if(k.button!==0)return;k.preventDefault(),r(11,v=!0);const N=()=>{r(11,v=!1),window.removeEventListener("mousemove",w,!1),window.removeEventListener("mouseup",N,!1)};window.addEventListener("mousemove",w,!1),window.addEventListener("mouseup",N,!1)};return C.addEventListener("mousedown",M,!1),{destroy(){C.removeEventListener("mousedown",M,!1)}}}function R(C,w){const M=k=>{if(k.targetTouches.length>1)return;k.preventDefault(),r(11,v=!0);const N=()=>{r(11,v=!1),window.removeEventListener("touchmove",w,!1),window.removeEventListener("touchend",N,!1)};window.addEventListener("touchmove",w,!1),window.addEventListener("touchend",N,!1)};return C.addEventListener("touchstart",M,{capture:!0,passive:!1}),{destroy(){C.removeEventListener("touchstart",M,{capture:!0})}}}const D=C=>y(C.clientX,C.clientY),U=C=>y(C.touches[0].clientX,C.touches[0].clientY);function J(C){Vt[C?"unshift":"push"](()=>{p=C,r(7,p)})}function z(){b=this.clientWidth,x=this.clientHeight,r(8,b),r(9,x)}return t.$$set=C=>{"id"in C&&r(0,l=C.id),"type"in C&&r(1,u=C.type),"pos"in C&&r(2,a=C.pos),"min"in C&&r(15,f=C.min),"max"in C&&r(16,c=C.max),"disabled"in C&&r(3,h=C.disabled),"priority"in C&&r(17,d=C.priority),"classA"in C&&r(4,_=C.classA),"classB"in C&&r(5,m=C.classB),"class"in C&&r(6,g=C.class),"$$scope"in C&&r(18,s=C.$$scope)},t.$$.update=()=>{t.$$.dirty&4&&r(10,n=a),t.$$.dirty&231298&&p&&r(10,n=E(p,u==="horizontal"?b:x,f,c,n,d))},[l,u,a,h,_,m,g,p,b,x,n,v,y,A,R,f,c,d,s,i,D,U,J,z]}class lo extends pt{constructor(e){super();gt(this,e,ao,oo,mt,{id:0,type:1,pos:2,min:15,max:16,disabled:3,priority:17,classA:4,classB:5,class:6})}}function uo(t){let e,r,n,i;return n=new gr({}),{c(){e=L("div"),r=L("div"),tt(n.$$.fragment),this.h()},l(s){e=F(s,"DIV",{class:!0});var o=P(e);r=F(o,"DIV",{class:!0});var l=P(r);et(n.$$.fragment,l),l.forEach(S),o.forEach(S),this.h()},h(){B(r,"class","absolute-center"),B(e,"class","absolute top-0 left-0 h-full w-full bg-gray-100 overflow-hidden")},m(s,o){W(s,e,o),T(e,r),nt(n,r,null),i=!0},p:Ct,i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){q(n.$$.fragment,s),i=!1},d(s){s&&S(e),rt(n)}}}function fo(t){let e,r;const n=t[2].default,i=vt(n,t,t[1],null);return{c(){e=L("section"),i&&i.c(),this.h()},l(s){e=F(s,"SECTION",{class:!0});var o=P(e);i&&i.l(o),o.forEach(S),this.h()},h(){B(e,"class","relative bg-gray-100 !overflow-y-auto custom-scrollbar")},m(s,o){W(s,e,o),i&&i.m(e,null),r=!0},p(s,o){i&&i.p&&(!r||o&2)&&_t(i,n,s,s[1],r?yt(n,s[1],o,null):bt(s[1]),null)},i(s){r||(O(i,s),r=!0)},o(s){q(i,s),r=!1},d(s){s&&S(e),i&&i.d(s)}}}function co(t){let e,r,n,i;const s=[fo,uo],o=[];function l(u,a){return u[0]?0:1}return e=l(t),r=o[e]=s[e](t),{c(){r.c(),n=xt()},l(u){r.l(u),n=xt()},m(u,a){o[e].m(u,a),W(u,n,a),i=!0},p(u,[a]){let f=e;e=l(u),e===f?o[e].p(u,a):(St(),q(o[f],1,1,()=>{o[f]=null}),zt(),r=o[e],r?r.p(u,a):(r=o[e]=s[e](u),r.c()),O(r,1),r.m(n.parentNode,n))},i(u){i||(O(r),i=!0)},o(u){q(r),i=!1},d(u){o[e].d(u),u&&S(n)}}}function ho(t,e,r){let{$$slots:n={},$$scope:i}=e,s=!1;return $t(()=>hr(1).then(()=>{r(0,s=!0)})),t.$$set=o=>{"$$scope"in o&&r(1,i=o.$$scope)},[s,i,n]}class po extends pt{constructor(e){super();gt(this,e,ho,co,mt,{})}}const go=t=>({}),kr=t=>({}),mo=t=>({}),Er=t=>({}),vo=t=>({}),Cr=t=>({}),_o=t=>({}),Mr=t=>({}),bo=t=>({}),Sr=t=>({});function yo(t){let e;const r=t[2].configuration,n=vt(r,t,t[4],Er);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&16)&&_t(n,r,i,i[4],e?yt(r,i[4],s,mo):bt(i[4]),Er)},i(i){e||(O(n,i),e=!0)},o(i){q(n,i),e=!1},d(i){n&&n.d(i)}}}function wo(t){let e,r;return e=new po({props:{slot:"a",$$slots:{default:[yo]},$$scope:{ctx:t}}}),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p(n,i){const s={};i&16&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function xo(t){let e,r;const n=t[2].visualization,i=vt(n,t,t[4],Cr);return{c(){e=L("div"),i&&i.c(),this.h()},l(s){e=F(s,"DIV",{slot:!0,class:!0});var o=P(e);i&&i.l(o),o.forEach(S),this.h()},h(){B(e,"slot","b"),B(e,"class","relative border-l border-gray-300")},m(s,o){W(s,e,o),i&&i.m(e,null),r=!0},p(s,o){i&&i.p&&(!r||o&16)&&_t(i,n,s,s[4],r?yt(n,s[4],o,vo):bt(s[4]),Cr)},i(s){r||(O(i,s),r=!0)},o(s){q(i,s),r=!1},d(s){s&&S(e),i&&i.d(s)}}}function Io(t){let e,r,n,i,s,o,l,u,a;const f=t[2].header,c=vt(f,t,t[4],Sr),h=t[2]["header-auxiliary"],d=vt(h,t,t[4],Mr);o=new lo({props:{type:"horizontal",pos:"35%",min:"325px",class:"overflow-hidden",$$slots:{b:[xo],a:[wo]},$$scope:{ctx:t}}});const _=t[2].footer,m=vt(_,t,t[4],kr);return{c(){e=L("div"),r=L("header"),n=L("h1"),c&&c.c(),i=G(),d&&d.c(),s=G(),tt(o.$$.fragment),l=G(),u=L("footer"),m&&m.c(),this.h()},l(g){e=F(g,"DIV",{class:!0});var p=P(e);r=F(p,"HEADER",{class:!0});var v=P(r);n=F(v,"H1",{class:!0});var b=P(n);c&&c.l(b),b.forEach(S),i=K(v),d&&d.l(v),v.forEach(S),s=K(p),et(o.$$.fragment,p),l=K(p),u=F(p,"FOOTER",{class:!0});var x=P(u);m&&m.l(x),x.forEach(S),p.forEach(S),this.h()},h(){B(n,"class","inline-flex items-center text-base leading-5 font-medium text-gray-900"),B(r,"class","flex items-center gap-x-4 min-h-10 px-2.5 py-1.5 border-b border-gray-300 bg-gray-50"),B(u,"class","flex gap-2 justify-end min-h-12 px-2.5 py-1.5 border-t border-gray-300"),B(e,"class","flex flex-col w-full h-full")},m(g,p){W(g,e,p),T(e,r),T(r,n),c&&c.m(n,null),T(r,i),d&&d.m(r,null),T(e,s),nt(o,e,null),T(e,l),T(e,u),m&&m.m(u,null),t[3](e),a=!0},p(g,p){c&&c.p&&(!a||p&16)&&_t(c,f,g,g[4],a?yt(f,g[4],p,bo):bt(g[4]),Sr),d&&d.p&&(!a||p&16)&&_t(d,h,g,g[4],a?yt(h,g[4],p,_o):bt(g[4]),Mr);const v={};p&16&&(v.$$scope={dirty:p,ctx:g}),o.$set(v),m&&m.p&&(!a||p&16)&&_t(m,_,g,g[4],a?yt(_,g[4],p,go):bt(g[4]),kr)},i(g){a||(O(c,g),O(d,g),O(o.$$.fragment,g),O(m,g),a=!0)},o(g){q(c,g),q(d,g),q(o.$$.fragment,g),q(m,g),a=!1},d(g){g&&S(e),c&&c.d(g),d&&d.d(g),rt(o),m&&m.d(g),t[3](null)}}}function ko(t){let e,r;return e=new Os({props:{$$slots:{default:[Io]},$$scope:{ctx:t}}}),e.$on("close",Rs),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p(n,[i]){const s={};i&17&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function Eo(t,e,r){let{$$slots:n={},$$scope:i}=e,{node:s=null}=e;const o=()=>{const u=s==null?void 0:s.closest(".dialog");u==null||u.classList.add("animate-repeat"),setTimeout(()=>u==null?void 0:u.classList.remove("animate-repeat"),600)};$t(()=>{const u=a=>a.key==="Escape"&&a.stopPropagation();return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)});function l(u){Vt[u?"unshift":"push"](()=>{s=u,r(0,s)})}return t.$$set=u=>{"node"in u&&r(0,s=u.node),"$$scope"in u&&r(4,i=u.$$scope)},[s,o,n,l,i]}class Qh extends pt{constructor(e){super();gt(this,e,Eo,ko,mt,{node:0,animateRepeat:1})}get animateRepeat(){return this.$$.ctx[1]}}function zr(t,e,r){const n=t.slice();n[7]=e[r];const i=n[7].split("-");return n[8]=i[0],n[9]=i[1],n}function Nr(t){let e,r=t[8]+"",n,i,s=t[2](t[9])+"",o,l,u,a;function f(){return t[4](t[8])}return{c(){e=L("li"),n=lt(r),i=lt(": "),o=lt(s),l=G(),this.h()},l(c){e=F(c,"LI",{class:!0});var h=P(e);n=ut(h,r),i=ut(h,": "),o=ut(h,s),l=K(h),h.forEach(S),this.h()},h(){B(e,"class","text-xs underline hover:text-blue-500 cursor-pointer")},m(c,h){W(c,e,h),T(e,n),T(e,i),T(e,o),T(e,l),u||(a=It(e,"click",f),u=!0)},p(c,h){t=c,h&1&&r!==(r=t[8]+"")&&Mt(n,r),h&1&&s!==(s=t[2](t[9])+"")&&Mt(o,s)},d(c){c&&S(e),u=!1,a()}}}function Co(t){let e,r,n,i,s,o,l,u,a,f=t[0],c=[];for(let h=0;h<f.length;h+=1)c[h]=Nr(zr(t,f,h));return{c(){e=L("div"),r=L("header"),n=L("h3"),i=lt("Deprecated Jobs:"),s=G(),o=L("p"),l=lt("Deprecated jobs may fail to have their inputs connected correctly or run as expected. It is recommended to rebuild this workflow with the newest versions of these jobs to avoid unexpected errors."),u=G(),a=L("ul");for(let h=0;h<c.length;h+=1)c[h].c();this.h()},l(h){e=F(h,"DIV",{class:!0});var d=P(e);r=F(d,"HEADER",{class:!0});var _=P(r);n=F(_,"H3",{class:!0});var m=P(n);i=ut(m,"Deprecated Jobs:"),m.forEach(S),s=K(_),o=F(_,"P",{class:!0});var g=P(o);l=ut(g,"Deprecated jobs may fail to have their inputs connected correctly or run as expected. It is recommended to rebuild this workflow with the newest versions of these jobs to avoid unexpected errors."),g.forEach(S),_.forEach(S),u=K(d),a=F(d,"UL",{class:!0});var p=P(a);for(let v=0;v<c.length;v+=1)c[v].l(p);p.forEach(S),d.forEach(S),this.h()},h(){B(n,"class","text-xs font-bold"),B(o,"class","text-xs italic leading-tight"),B(r,"class","flex flex-col justify-between gap-y-0.5 mb-1.5"),B(a,"class","pl-3.5 mt-0.5 list-disc"),B(e,"class","p-2 mx-2 mt-2 rounded border border-orange-400 text-orange-700 bg-orange-100")},m(h,d){W(h,e,d),T(e,r),T(r,n),T(n,i),T(r,s),T(r,o),T(o,l),T(e,u),T(e,a);for(let _=0;_<c.length;_+=1)c[_].m(a,null)},p(h,[d]){if(d&13){f=h[0];let _;for(_=0;_<f.length;_+=1){const m=zr(h,f,_);c[_]?c[_].p(m,d):(c[_]=Nr(m),c[_].c(),c[_].m(a,null))}for(;_<c.length;_+=1)c[_].d(1);c.length=f.length}},i:Ct,o:Ct,d(h){h&&S(e),he(c,h)}}}function Mo(t,e,r){let n,i;wt(t,we,f=>r(6,i=f));let{deprecated:s=[]}=e;const{bus:o}=Rt("bus:workflow");wt(t,o,f=>r(5,n=f));function l(f){var c,h;return(h=(c=i[f])==null?void 0:c.title)!=null?h:f}function u(f){n.dispatchEvent(new CustomEvent("select:job",{detail:{id:f,navigate:!1}}))}const a=f=>u(f);return t.$$set=f=>{"deprecated"in f&&r(0,s=f.deprecated)},[s,o,l,u,a]}class $h extends pt{constructor(e){super();gt(this,e,Mo,Co,mt,{deprecated:0})}}const So=t=>({node:t&1}),Br=t=>({node:t[0]});function zo(t){let e,r,n,i,s;const o=t[4].default,l=vt(o,t,t[3],Br);return{c(){e=L("form"),l&&l.c(),this.h()},l(u){e=F(u,"FORM",{id:!0,class:!0});var a=P(e);l&&l.l(a),a.forEach(S),this.h()},h(){B(e,"id",t[1]),B(e,"class",r=""+(t[2]+" flex flex-col gap-y-2 p-1.5 m-2 rounded border border-gray-300 bg-white"))},m(u,a){W(u,e,a),l&&l.m(e,null),t[6](e),n=!0,i||(s=It(e,"submit",t[5]),i=!0)},p(u,[a]){l&&l.p&&(!n||a&9)&&_t(l,o,u,u[3],n?yt(o,u[3],a,So):bt(u[3]),Br),(!n||a&2)&&B(e,"id",u[1]),(!n||a&4&&r!==(r=""+(u[2]+" flex flex-col gap-y-2 p-1.5 m-2 rounded border border-gray-300 bg-white")))&&B(e,"class",r)},i(u){n||(O(l,u),n=!0)},o(u){q(l,u),n=!1},d(u){u&&S(e),l&&l.d(u),t[6](null),i=!1,s()}}}function No(t,e,r){let{$$slots:n={},$$scope:i}=e,{node:s=null}=e,{id:o=mn()}=e,{class:l=""}=e;function u(f){de.call(this,t,f)}function a(f){Vt[f?"unshift":"push"](()=>{s=f,r(0,s)})}return t.$$set=f=>{"node"in f&&r(0,s=f.node),"id"in f&&r(1,o=f.id),"class"in f&&r(2,l=f.class),"$$scope"in f&&r(3,i=f.$$scope)},[s,o,l,i,n,u,a]}class td extends pt{constructor(e){super();gt(this,e,No,zo,mt,{node:0,id:1,class:2})}}function Bo(t){let e,r,n,i,s,o,l,u,a,f,c,h,d,_,m,g,p,v,b,x,E,y,A,R,D,U;g=new Ys({}),b=new Gs({}),y=new Ks({props:{size:4}});const J=t[10].default,z=vt(J,t,t[9],null);return{c(){e=L("div"),r=L("search"),n=L("div"),i=L("button"),s=L("span"),o=lt("All"),l=G(),u=L("span"),a=lt("Flagged"),f=G(),c=L("span"),d=G(),_=L("div"),m=L("button"),tt(g.$$.fragment),p=G(),v=L("button"),tt(b.$$.fragment),x=G(),E=L("button"),tt(y.$$.fragment),A=G(),z&&z.c(),this.h()},l(C){e=F(C,"DIV",{});var w=P(e);r=F(w,"SEARCH",{class:!0});var M=P(r);n=F(M,"DIV",{class:!0});var k=P(n);i=F(k,"BUTTON",{type:!0,id:!0,class:!0,role:!0});var N=P(i);s=F(N,"SPAN",{class:!0});var V=P(s);o=ut(V,"All"),V.forEach(S),l=K(N),u=F(N,"SPAN",{class:!0});var j=P(u);a=ut(j,"Flagged"),j.forEach(S),f=K(N),c=F(N,"SPAN",{"aria-hidden":!0,class:!0}),P(c).forEach(S),N.forEach(S),k.forEach(S),d=K(M),_=F(M,"DIV",{class:!0});var H=P(_);m=F(H,"BUTTON",{class:!0});var X=P(m);et(g.$$.fragment,X),X.forEach(S),p=K(H),v=F(H,"BUTTON",{class:!0});var Z=P(v);et(b.$$.fragment,Z),Z.forEach(S),H.forEach(S),x=K(M),E=F(M,"BUTTON",{class:!0});var $=P(E);et(y.$$.fragment,$),$.forEach(S),M.forEach(S),A=K(w),z&&z.l(w),w.forEach(S),this.h()},h(){B(s,"class","inline-flex justify-center w-13 font-medium text-2xs whitespace-nowrap z-5 hover:text-gray-800"),B(u,"class","inline-flex justify-center w-13 font-medium text-2xs whitespace-nowrap z-5 hover:text-gray-800"),B(c,"aria-hidden","true"),B(c,"class",h=""+((t[1]===Lt.flagged?"translate-x-13.5":"translate-x-0")+" absolute left-px top-px h-5.5 w-13 rounded bg-white shadow pointer-events-none transform ring-0 transition ease-in-out duration-200")),B(i,"type","button"),B(i,"id","user-toggle"),B(i,"class","relative inline-flex flex-shrink-0 justify-around items-center gap-x-1 h-6.5 shadow-inner border border-gray-300 rounded text-gray-900 bg-gray-300 cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-gray-600"),B(i,"role","switch"),B(n,"class","flex gap-1.5"),B(m,"class","inline-flex p-1 rounded-l border border-gray-300 bg-gray-50 text-gray-600 hover:bg-gray-100"),B(v,"class","inline-flex p-1 -ml-px rounded-r border border-gray-300 bg-gray-50 text-gray-600 hover:bg-gray-100"),B(_,"class","flex ml-auto"),B(E,"class","inline-flex p-1 -ml-px rounded border border-gray-300 bg-gray-50 text-gray-600 hover:bg-gray-100"),B(r,"class","sticky top-0 z-4 flex items-center gap-1 h-9 px-2.5 py-1 border-t border-gray-300 bg-gray-200")},m(C,w){W(C,e,w),T(e,r),T(r,n),T(n,i),T(i,s),T(s,o),T(i,l),T(i,u),T(u,a),T(i,f),T(i,c),T(r,d),T(r,_),T(_,m),nt(g,m,null),T(_,p),T(_,v),nt(b,v,null),T(r,x),T(r,E),nt(y,E,null),T(e,A),z&&z.m(e,null),t[11](e),R=!0,D||(U=[It(i,"click",t[5]),ne(xe.call(null,m,{content:"Expand all jobs"})),It(m,"click",t[7]),ne(xe.call(null,v,{content:"Collapse all jobs"})),It(v,"click",t[6]),ne(xe.call(null,E,{content:"Go to building job"})),It(E,"click",t[8])],D=!0)},p(C,[w]){(!R||w&2&&h!==(h=""+((C[1]===Lt.flagged?"translate-x-13.5":"translate-x-0")+" absolute left-px top-px h-5.5 w-13 rounded bg-white shadow pointer-events-none transform ring-0 transition ease-in-out duration-200")))&&B(c,"class",h),z&&z.p&&(!R||w&512)&&_t(z,J,C,C[9],R?yt(J,C[9],w,null):bt(C[9]),null)},i(C){R||(O(g.$$.fragment,C),O(b.$$.fragment,C),O(y.$$.fragment,C),O(z,C),R=!0)},o(C){q(g.$$.fragment,C),q(b.$$.fragment,C),q(y.$$.fragment,C),q(z,C),R=!1},d(C){C&&S(e),rt(g),rt(b),rt(y),z&&z.d(C),t[11](null),D=!1,ce(U)}}}function To(t,e,r){let n,i,s,{$$slots:o={},$$scope:l}=e;const{bus:u}=Rt("bus:workflow");wt(t,u,g=>r(12,n=g));const a=Qt();wt(t,a,g=>r(0,i=g));const f=Qt(Lt.all);wt(t,f,g=>r(1,s=g));function c(){s===Lt.all?or(f,s=Lt.flagged,s):or(f,s=Lt.all,s)}function h(){i.dispatchEvent(new CustomEvent("collapse:all"))}function d(){i.dispatchEvent(new CustomEvent("expand:all"))}function _(){n.dispatchEvent(new CustomEvent("view:job"))}gn("job-list:workflow",{list:{subscribe:a.subscribe},filter:{subscribe:f.subscribe}});function m(g){Vt[g?"unshift":"push"](()=>{i=g,a.set(i)})}return t.$$set=g=>{"$$scope"in g&&r(9,l=g.$$scope)},[i,s,u,a,f,c,h,d,_,l,o,m]}class ed extends pt{constructor(e){super();gt(this,e,To,Bo,mt,{})}}function Tr(t){let e,r,n,i,s,o,l,u,a,f,c,h,d,_,m,g,p,v,b=t[3]&&Vr();h=new Ie({props:{src:t[4]?Je:We}});let x=t[4]&&jr(t);return{c(){e=L("article"),r=L("header"),n=L("button"),i=L("h2"),s=L("span"),o=lt(t[1]),u=G(),a=lt(t[2]),f=G(),b&&b.c(),c=G(),tt(h.$$.fragment),_=G(),x&&x.c(),this.h()},l(E){e=F(E,"ARTICLE",{id:!0,class:!0});var y=P(e);r=F(y,"HEADER",{class:!0});var A=P(r);n=F(A,"BUTTON",{class:!0});var R=P(n);i=F(R,"H2",{class:!0});var D=P(i);s=F(D,"SPAN",{class:!0});var U=P(s);o=ut(U,t[1]),U.forEach(S),u=K(D),a=ut(D,t[2]),D.forEach(S),f=K(R),b&&b.l(R),c=K(R),et(h.$$.fragment,R),R.forEach(S),A.forEach(S),_=K(y),x&&x.l(y),y.forEach(S),this.h()},h(){B(s,"class",l=""+((t[5]?"bg-white text-purple-600":"text-blue-600 bg-blue-200")+" px-2 py-0.5 mr-1.5 font-semibold rounded")),B(i,"class","text-sm text-left font-bold"),B(n,"class","flex justify-between items-center gap-x-2 w-full px-2.5 py-2"),B(r,"class",d=""+((t[5]?"text-white border-purple-600 bg-purple-600 hover:bg-purple-700":"text-gray-600 border-gray-300 bg-white hover:bg-gray-100")+" sticky top-9 z-3 -mt-px shadow border border-r-0 cursor-pointer transition-colors ease-in-out duration-100")),B(e,"id",m=""+(t[1]+"-panel")),B(e,"class","flex flex-col svelte-1ine9vl"),fe(e,"bg-purple-100",t[5])},m(E,y){W(E,e,y),T(e,r),T(r,n),T(n,i),T(i,s),T(s,o),T(i,u),T(i,a),T(n,f),b&&b.m(n,null),T(n,c),nt(h,n,null),T(e,_),x&&x.m(e,null),t[17](e),g=!0,p||(v=[It(n,"click",ar(t[16])),It(e,"click",t[12]),It(e,"focusin",t[12])],p=!0)},p(E,y){(!g||y&2)&&Mt(o,E[1]),(!g||y&32&&l!==(l=""+((E[5]?"bg-white text-purple-600":"text-blue-600 bg-blue-200")+" px-2 py-0.5 mr-1.5 font-semibold rounded")))&&B(s,"class",l),(!g||y&4)&&Mt(a,E[2]),E[3]?b?y&8&&O(b,1):(b=Vr(),b.c(),O(b,1),b.m(n,c)):b&&(St(),q(b,1,1,()=>{b=null}),zt());const A={};y&16&&(A.src=E[4]?Je:We),h.$set(A),(!g||y&32&&d!==(d=""+((E[5]?"text-white border-purple-600 bg-purple-600 hover:bg-purple-700":"text-gray-600 border-gray-300 bg-white hover:bg-gray-100")+" sticky top-9 z-3 -mt-px shadow border border-r-0 cursor-pointer transition-colors ease-in-out duration-100")))&&B(r,"class",d),E[4]?x?(x.p(E,y),y&16&&O(x,1)):(x=jr(E),x.c(),O(x,1),x.m(e,null)):x&&(St(),q(x,1,1,()=>{x=null}),zt()),(!g||y&2&&m!==(m=""+(E[1]+"-panel")))&&B(e,"id",m),y&32&&fe(e,"bg-purple-100",E[5])},i(E){g||(O(b),O(h.$$.fragment,E),O(x),g=!0)},o(E){q(b),q(h.$$.fragment,E),q(x),g=!1},d(E){E&&S(e),b&&b.d(),rt(h),x&&x.d(),t[17](null),p=!1,ce(v)}}}function Vr(t){let e,r;return e=new Zs({props:{size:4,modifier:"ml-auto stroke-2"}}),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function jr(t){let e,r;const n=t[15].default,i=vt(n,t,t[14],null);return{c(){e=L("div"),i&&i.c(),this.h()},l(s){e=F(s,"DIV",{class:!0});var o=P(e);i&&i.l(o),o.forEach(S),this.h()},h(){B(e,"class","flex flex-col gap-y-1.5 m-1.5 p-1.5 shadow rounded border border-gray-300 bg-white")},m(s,o){W(s,e,o),i&&i.m(e,null),r=!0},p(s,o){i&&i.p&&(!r||o&16384)&&_t(i,n,s,s[14],r?yt(n,s[14],o,null):bt(s[14]),null)},i(s){r||(O(i,s),r=!0)},o(s){q(i,s),r=!1},d(s){s&&S(e),i&&i.d(s)}}}function Vo(t){let e,r,n=(t[6]===Lt.all||t[6]===Lt.flagged&&t[3])&&Tr(t);return{c(){n&&n.c(),e=xt()},l(i){n&&n.l(i),e=xt()},m(i,s){n&&n.m(i,s),W(i,e,s),r=!0},p(i,[s]){i[6]===Lt.all||i[6]===Lt.flagged&&i[3]?n?(n.p(i,s),s&72&&O(n,1)):(n=Tr(i),n.c(),O(n,1),n.m(e.parentNode,e)):n&&(St(),q(n,1,1,()=>{n=null}),zt())},i(i){r||(O(n),r=!0)},o(i){q(n),r=!1},d(i){n&&n.d(i),i&&S(e)}}}function jo(t,e,r){let n,i,s,o,l,{$$slots:u={},$$scope:a}=e;const{updates:f}=Rt("workflow");wt(t,f,M=>r(21,o=M));const{bus:c,signal:h}=Rt("bus:workflow");wt(t,c,M=>r(20,s=M)),wt(t,h,M=>r(19,i=M));const{list:d,filter:_}=Rt("job-list:workflow");wt(t,d,M=>r(18,n=M)),wt(t,_,M=>r(6,l=M));let{node:m=null}=e,{id:g}=e,{title:p=""}=e,{job:v}=e,b=!1,x=!0,E=!1;const y=M=>{var N;const{id:k=null}=(N=M==null?void 0:M.detail)!=null?N:{};(!k&&E||g===k)&&(m==null||m.scrollIntoView({behavior:"smooth",block:"nearest"}))},A=M=>{const{id:k}=M.detail;g===k&&!E?(r(5,E=!0),y(M)):g!==k&&E&&r(5,E=!1)},R=M=>{const{id:k}=M.detail;g!==k&&E&&r(5,E=!1)},D=()=>{r(4,x=!0)},U=()=>{r(4,x=!1)},J=()=>{E||(s.dispatchEvent(new CustomEvent("deselect:job",{detail:{id:g}})),s.dispatchEvent(new CustomEvent("select:job",{detail:{id:g}})))},z=()=>{var N,V,j;const M=(V=(N=o[g])==null?void 0:N.parameters)!=null?V:{},k=ct(ct({},(j=v==null?void 0:v.parameters)!=null?j:{}),M);r(3,b=Object.values(k).some(H=>H.flagged))};lr(()=>{z()}),$t(()=>(z(),s.addEventListener("view:job",y,{signal:i}),s.addEventListener("select:job",A,{signal:i}),s.addEventListener("deselect:job",R,{signal:i}),n.addEventListener("expand:all",D),n.addEventListener("collapse:all",U),()=>{n.removeEventListener("expand:all",D),n.removeEventListener("collapse:all",U)}));const C=()=>{r(4,x=!x)};function w(M){Vt[M?"unshift":"push"](()=>{m=M,r(0,m)})}return t.$$set=M=>{"node"in M&&r(0,m=M.node),"id"in M&&r(1,g=M.id),"title"in M&&r(2,p=M.title),"job"in M&&r(13,v=M.job),"$$scope"in M&&r(14,a=M.$$scope)},[m,g,p,b,x,E,l,f,c,h,d,_,J,v,a,u,C,w]}class nd extends pt{constructor(e){super();gt(this,e,jo,Vo,mt,{node:0,id:1,title:2,job:13})}}const Ao=t=>({}),Ar=t=>({});function Rr(t){let e,r;const n=t[5].default,i=vt(n,t,t[4],null);return{c(){e=L("div"),i&&i.c(),this.h()},l(s){e=F(s,"DIV",{class:!0});var o=P(e);i&&i.l(o),o.forEach(S),this.h()},h(){B(e,"class","p-1 border border-gray-300 bg-gray-100 rounded shadow-inner")},m(s,o){W(s,e,o),i&&i.m(e,null),r=!0},p(s,o){i&&i.p&&(!r||o&16)&&_t(i,n,s,s[4],r?yt(n,s[4],o,null):bt(s[4]),null)},i(s){r||(O(i,s),r=!0)},o(s){q(i,s),r=!1},d(s){s&&S(e),i&&i.d(s)}}}function Ro(t){let e,r,n,i,s,o,l,u,a,f,c,h,d;const _=t[5].info,m=vt(_,t,t[4],Ar);u=new Ie({props:{src:t[1]?Je:We,size:4,modifier:"text-gray-500"}});let g=t[1]&&Rr(t);return{c(){e=L("div"),r=L("button"),n=L("h3"),i=lt(t[2]),s=G(),o=L("div"),m&&m.c(),l=G(),tt(u.$$.fragment),a=G(),g&&g.c(),this.h()},l(p){e=F(p,"DIV",{class:!0});var v=P(e);r=F(v,"BUTTON",{class:!0});var b=P(r);n=F(b,"H3",{class:!0});var x=P(n);i=ut(x,t[2]),x.forEach(S),s=K(b),o=F(b,"DIV",{class:!0});var E=P(o);m&&m.l(E),E.forEach(S),l=K(b),et(u.$$.fragment,b),b.forEach(S),a=K(v),g&&g.l(v),v.forEach(S),this.h()},h(){B(n,"class","ml-1 text-sm font-medium text-gray-600"),B(o,"class","inline-flex gap-x-1 ml-auto mr-1.5"),B(r,"class","flex justify-between items-center w-full px-1 py-0.5 text-left shadow-sm rounded border border-gray-300 bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500"),B(e,"class",f=""+(t[3]+" flex flex-col gap-y-1.5"))},m(p,v){W(p,e,v),T(e,r),T(r,n),T(n,i),T(r,s),T(r,o),m&&m.m(o,null),T(r,l),nt(u,r,null),T(e,a),g&&g.m(e,null),t[7](e),c=!0,h||(d=It(r,"click",t[6]),h=!0)},p(p,[v]){(!c||v&4)&&Mt(i,p[2]),m&&m.p&&(!c||v&16)&&_t(m,_,p,p[4],c?yt(_,p[4],v,Ao):bt(p[4]),Ar);const b={};v&2&&(b.src=p[1]?Je:We),u.$set(b),p[1]?g?(g.p(p,v),v&2&&O(g,1)):(g=Rr(p),g.c(),O(g,1),g.m(e,null)):g&&(St(),q(g,1,1,()=>{g=null}),zt()),(!c||v&8&&f!==(f=""+(p[3]+" flex flex-col gap-y-1.5")))&&B(e,"class",f)},i(p){c||(O(m,p),O(u.$$.fragment,p),O(g),c=!0)},o(p){q(m,p),q(u.$$.fragment,p),q(g),c=!1},d(p){p&&S(e),m&&m.d(p),rt(u),g&&g.d(),t[7](null),h=!1,d()}}}function Oo(t,e,r){let{$$slots:n={},$$scope:i}=e,{node:s=null}=e,{title:o}=e,{expanded:l=!0}=e,{class:u=""}=e;const a=()=>{r(1,l=!l)};function f(c){Vt[c?"unshift":"push"](()=>{s=c,r(0,s)})}return t.$$set=c=>{"node"in c&&r(0,s=c.node),"title"in c&&r(2,o=c.title),"expanded"in c&&r(1,l=c.expanded),"class"in c&&r(3,u=c.class),"$$scope"in c&&r(4,i=c.$$scope)},[s,l,o,u,i,n,a,f]}class wn extends pt{constructor(e){super();gt(this,e,Oo,Ro,mt,{node:0,title:2,expanded:1,class:3})}}function Do(t){let e,r,n,i,s,o,l=[t[7],{readOnly:t[3]},{id:t[2]},{tabindex:r=t[3]?-1:0},{type:"text"},{name:t[2]},{class:n=""+(t[6]+" "+t[4]+" block w-full pl-2 py-1 text-xs rounded shadow-inner focus:outline-none focus:ring-2 focus:z-1")}],u={};for(let a=0;a<l.length;a+=1)u=jt(u,l[a]);return{c(){e=L("input"),this.h()},l(a){e=F(a,"INPUT",{id:!0,tabindex:!0,type:!0,name:!0,class:!0}),this.h()},h(){pe(e,u)},m(a,f){W(a,e,f),e.autofocus&&e.focus(),t[12](e),ur(e,t[1]),s||(o=[It(e,"input",t[13]),ne(i=xe.call(null,e,{content:t[5],placement:"left",interactive:!0,delay:[450,0]})),It(e,"keydown",t[9]),It(e,"keyup",t[10]),It(e,"click",t[11])],s=!0)},p(a,[f]){pe(e,u=Fe(l,[f&128&&a[7],f&8&&{readOnly:a[3]},f&4&&{id:a[2]},f&8&&r!==(r=a[3]?-1:0)&&{tabindex:r},{type:"text"},f&4&&{name:a[2]},f&80&&n!==(n=""+(a[6]+" "+a[4]+" block w-full pl-2 py-1 text-xs rounded shadow-inner focus:outline-none focus:ring-2 focus:z-1"))&&{class:n}])),f&2&&e.value!==a[1]&&ur(e,a[1]),i&&js(i.update)&&f&32&&i.update.call(null,{content:a[5],placement:"left",interactive:!0,delay:[450,0]})},i:Ct,o:Ct,d(a){a&&S(e),t[12](null),s=!1,ce(o)}}}function Po(t,e,r){let n;const i=["node","id","value","readonly","status","class","tooltip"];let s=te(e,i),{node:o=null}=e,{id:l=mn()}=e,{value:u}=e,{readonly:a=!1}=e,{status:f="default"}=e,{class:c=""}=e,{tooltip:h=""}=e;function d(v){de.call(this,t,v)}function _(v){de.call(this,t,v)}function m(v){de.call(this,t,v)}function g(v){Vt[v?"unshift":"push"](()=>{o=v,r(0,o)})}function p(){u=this.value,r(1,u)}return t.$$set=v=>{e=jt(jt({},e),qe(v)),r(7,s=te(e,i)),"node"in v&&r(0,o=v.node),"id"in v&&r(2,l=v.id),"value"in v&&r(1,u=v.value),"readonly"in v&&r(3,a=v.readonly),"status"in v&&r(8,f=v.status),"class"in v&&r(4,c=v.class),"tooltip"in v&&r(5,h=v.tooltip)},t.$$.update=()=>{t.$$.dirty&256&&r(6,n=f==="updated"?"border-green-500 focus:ring-green-500":"border-gray-300 focus:ring-blue-500")},[o,u,l,a,c,h,n,s,f,d,_,m,g,p]}class Lo extends pt{constructor(e){super();gt(this,e,Po,Do,mt,{node:0,id:2,value:1,readonly:3,status:8,class:4,tooltip:5})}}function Fo(t){let e,r;return{c(){e=L("div"),r=L("textarea"),this.h()},l(n){e=F(n,"DIV",{class:!0});var i=P(e);r=F(i,"TEXTAREA",{id:!0,class:!0}),P(r).forEach(S),i.forEach(S),this.h()},h(){B(r,"id",t[0]),B(r,"class","w-full h-full border-none rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-xs"),B(e,"class","workflow-editor flex-1 max-w-full h-50 prose prose-sm prose-blue shadow-sm")},m(n,i){W(n,e,i),T(e,r),t[4](r)},p(n,[i]){i&1&&B(r,"id",n[0])},i:Ct,o:Ct,d(n){n&&S(e),t[4](null)}}}function qo(t,e,r){let{id:n=mn()}=e,{description:i}=e,{interval:s=400}=e;const o=Le();let l,u;const a=dr(()=>o("update",l==null?void 0:l.value()),s);$t(()=>{l=new Fs({element:u,initialValue:i!=null?i:"",status:!1,maxHeight:"none",toolbar:["heading","bold","italic","|","unordered-list","ordered-list","|","link","image","|","preview"],spellChecker:!1}),l==null||l.codemirror.on("change",()=>a())});function c(h){Vt[h?"unshift":"push"](()=>{u=h,r(1,u)})}return t.$$set=h=>{"id"in h&&r(0,n=h.id),"description"in h&&r(2,i=h.description),"interval"in h&&r(3,s=h.interval)},[n,u,i,s,c]}class Uo extends pt{constructor(e){super();gt(this,e,qo,Fo,mt,{id:0,description:2,interval:3})}}function Ho(t){let e,r;return e=new Lo({props:{id:t[1],value:t[2]}}),e.$on("keyup",t[12]),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p(n,i){const s={};i&2&&(s.id=n[1]),i&4&&(s.value=n[2]),e.$set(s)},i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function Jo(t){let e,r;return e=new Uo({props:{description:t[3]}}),e.$on("update",t[8]),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p(n,i){const s={};i&8&&(s.description=n[3]),e.$set(s)},i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function Wo(t){let e,r,n,i;return e=new _n({props:{title:"Title",class:"block mb-1.5",$$slots:{default:[Ho]},$$scope:{ctx:t}}}),n=new _n({props:{title:"Description",$$slots:{default:[Jo]},$$scope:{ctx:t}}}),{c(){tt(e.$$.fragment),r=G(),tt(n.$$.fragment)},l(s){et(e.$$.fragment,s),r=K(s),et(n.$$.fragment,s)},m(s,o){nt(e,s,o),W(s,r,o),nt(n,s,o),i=!0},p(s,o){const l={};o&65542&&(l.$$scope={dirty:o,ctx:s}),e.$set(l);const u={};o&65544&&(u.$$scope={dirty:o,ctx:s}),n.$set(u)},i(s){i||(O(e.$$.fragment,s),O(n.$$.fragment,s),i=!0)},o(s){q(e.$$.fragment,s),q(n.$$.fragment,s),i=!1},d(s){rt(e,s),s&&S(r),rt(n,s)}}}function Or(t){let e,r,n;return{c(){e=L("div"),r=lt("T"),this.h()},l(i){e=F(i,"DIV",{class:!0});var s=P(e);r=ut(s,"T"),s.forEach(S),this.h()},h(){B(e,"class",n=""+(t[9](t[4])+" inline-flex justify-center items-center w-4 h-4 font-semibold text-2xs rounded border"))},m(i,s){W(i,e,s),T(e,r)},p(i,s){s&16&&n!==(n=""+(i[9](i[4])+" inline-flex justify-center items-center w-4 h-4 font-semibold text-2xs rounded border"))&&B(e,"class",n)},d(i){i&&S(e)}}}function Dr(t){let e,r,n;return{c(){e=L("div"),r=lt("D"),this.h()},l(i){e=F(i,"DIV",{class:!0});var s=P(e);r=ut(s,"D"),s.forEach(S),this.h()},h(){B(e,"class",n=""+(t[9](t[5])+" inline-flex justify-center items-center w-4 h-4 font-semibold text-2xs rounded border"))},m(i,s){W(i,e,s),T(e,r)},p(i,s){s&32&&n!==(n=""+(i[9](i[5])+" inline-flex justify-center items-center w-4 h-4 font-semibold text-2xs rounded border"))&&B(e,"class",n)},d(i){i&&S(e)}}}function Xo(t){let e,r,n=t[2].length&&Or(t),i=t[3].length&&Dr(t);return{c(){n&&n.c(),e=G(),i&&i.c(),r=xt()},l(s){n&&n.l(s),e=K(s),i&&i.l(s),r=xt()},m(s,o){n&&n.m(s,o),W(s,e,o),i&&i.m(s,o),W(s,r,o)},p(s,o){s[2].length?n?n.p(s,o):(n=Or(s),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),s[3].length?i?i.p(s,o):(i=Dr(s),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(s){n&&n.d(s),s&&S(e),i&&i.d(s),s&&S(r)}}}function Yo(t){let e,r,n;function i(o){t[13](o)}let s={title:"Details",$$slots:{info:[Xo],default:[Wo]},$$scope:{ctx:t}};return t[0]!==void 0&&(s.expanded=t[0]),e=new wn({props:s}),Vt.push(()=>fr(e,"expanded",i)),{c(){tt(e.$$.fragment)},l(o){et(e.$$.fragment,o)},m(o,l){nt(e,o,l),n=!0},p(o,[l]){const u={};l&65598&&(u.$$scope={dirty:l,ctx:o}),!r&&l&1&&(r=!0,u.expanded=o[0],cr(()=>r=!1)),e.$set(u)},i(o){n||(O(e.$$.fragment,o),n=!0)},o(o){q(e.$$.fragment,o),n=!1},d(o){rt(e,o)}}}function Go(t,e,r){let n,{id:i}=e,{title:s=""}=e,{description:o=""}=e,{expanded:l=!1}=e;const{updates:u}=Rt("workflow");wt(t,u,b=>r(14,n=b));const a=Le();let f="",c="",h=!1,d=!1;const _=dr(b=>{var x,E;return a("update:title",(E=(x=b[0])==null?void 0:x.target)==null?void 0:E.value)},400),m=b=>a("update:description",b.detail),g=b=>b?"border-green-300 text-green-600 bg-green-50":"border-blue-300 text-blue-600 bg-blue-50";lr(()=>{const b=n==null?void 0:n[i];(b==null?void 0:b.title)&&b.title!==f&&(r(2,f=b.title),r(4,h=!0)),(b==null?void 0:b.description)&&b.description!==c&&(r(3,c=b.description),r(5,d=!0))}),$t(()=>{r(2,f=s),r(3,c=o)});const p=b=>_(b);function v(b){l=b,r(0,l)}return t.$$set=b=>{"id"in b&&r(1,i=b.id),"title"in b&&r(10,s=b.title),"description"in b&&r(11,o=b.description),"expanded"in b&&r(0,l=b.expanded)},[l,i,f,c,h,d,u,_,m,g,s,o,p,v]}class rd extends pt{constructor(e){super();gt(this,e,Go,Yo,mt,{id:1,title:10,description:11,expanded:0})}}function Ko(t){let e,r,n,i,s,o,l,u,a,f,c,h,d=[t[9],{class:f=""+(t[4]+" "+(t[3]?"text-gray-500 cursor-not-allowed":"text-gray-700")+" flex items-center gap-x-1 p-0.5 text-xs font-medium rounded border border-gray-300 bg-white hover:bg-gray-200 focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-blue-500")}],_={};for(let m=0;m<d.length;m+=1)_=jt(_,d[m]);return{c(){e=L("button"),r=L("span"),n=lt(t[0]),s=G(),o=lt(t[1]),l=G(),u=L("div"),a=lt(t[2]),this.h()},l(m){e=F(m,"BUTTON",{class:!0});var g=P(e);r=F(g,"SPAN",{class:!0});var p=P(r);n=ut(p,t[0]),p.forEach(S),s=K(g),o=ut(g,t[1]),l=K(g),u=F(g,"DIV",{class:!0});var v=P(u);a=ut(v,t[2]),v.forEach(S),g.forEach(S),this.h()},h(){B(r,"class",i=""+((t[3]?"bg-gray-200 text-gray-500":"bg-blue-100 text-blue-500")+" px-1 mr-1.5 font-semibold rounded")),B(u,"class","ml-auto px-2 text-2xs font-semibold rounded bg-gray-200"),pe(e,_)},m(m,g){W(m,e,g),T(e,r),T(r,n),T(e,s),T(e,o),T(e,l),T(e,u),T(u,a),e.autofocus&&e.focus(),c||(h=[It(e,"mouseenter",t[7]),It(e,"mouseleave",t[8]),It(e,"click",ar(t[10]))],c=!0)},p(m,[g]){g&1&&Mt(n,m[0]),g&8&&i!==(i=""+((m[3]?"bg-gray-200 text-gray-500":"bg-blue-100 text-blue-500")+" px-1 mr-1.5 font-semibold rounded"))&&B(r,"class",i),g&2&&Mt(o,m[1]),g&4&&Mt(a,m[2]),pe(e,_=Fe(d,[g&512&&m[9],g&24&&f!==(f=""+(m[4]+" "+(m[3]?"text-gray-500 cursor-not-allowed":"text-gray-700")+" flex items-center gap-x-1 p-0.5 text-xs font-medium rounded border border-gray-300 bg-white hover:bg-gray-200 focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-blue-500"))&&{class:f}]))},i:Ct,o:Ct,d(m){m&&S(e),c=!1,ce(h)}}}function Zo(t,e,r){const n=["jobId","title","input","disabled","class"];let i=te(e,n),s,{jobId:o}=e,{title:l=""}=e,{input:u}=e,{disabled:a=!1}=e,{class:f=""}=e;const{bus:c}=Rt("bus:workflow");wt(t,c,g=>r(11,s=g));const h=()=>{s.dispatchEvent(new CustomEvent("select:job",{detail:{id:o}}))},d=()=>{s.dispatchEvent(new CustomEvent("enter:job",{detail:{id:o}}))},_=()=>{s.dispatchEvent(new CustomEvent("leave:job",{detail:{id:o}}))},m=()=>!a&&h();return t.$$set=g=>{e=jt(jt({},e),qe(g)),r(9,i=te(e,n)),"jobId"in g&&r(0,o=g.jobId),"title"in g&&r(1,l=g.title),"input"in g&&r(2,u=g.input),"disabled"in g&&r(3,a=g.disabled),"class"in g&&r(4,f=g.class)},[o,l,u,a,f,c,h,d,_,i,m]}class Pr extends pt{constructor(e){super();gt(this,e,Zo,Ko,mt,{jobId:0,title:1,input:2,disabled:3,class:4})}}function Lr(t,e,r){const n=t.slice();return n[9]=e[r],n}function Fr(t,e,r){const n=t.slice();n[12]=e[r];const i=n[4](n[12].sourceGroupId);n[13]=i;const s=n[5](n[12].sourceGroupId,n[13]);return n[14]=s,n}function qr(t,e,r){const n=t.slice();n[17]=e[r];const i=n[4](n[17].sourceJobId);n[18]=i;const s=n[5](n[17].sourceJobId,n[18]);return n[19]=s,n}function Ur(t){let e,r,n;function i(o){t[7](o)}let s={title:"Inputs",$$slots:{default:[Qo]},$$scope:{ctx:t}};return t[0]!==void 0&&(s.expanded=t[0]),e=new wn({props:s}),Vt.push(()=>fr(e,"expanded",i)),{c(){tt(e.$$.fragment)},l(o){et(e.$$.fragment,o)},m(o,l){nt(e,o,l),n=!0},p(o,l){const u={};l&4194316&&(u.$$scope={dirty:l,ctx:o}),!r&&l&1&&(r=!0,u.expanded=o[0],cr(()=>r=!1)),e.$set(u)},i(o){n||(O(e.$$.fragment,o),n=!0)},o(o){q(e.$$.fragment,o),n=!1},d(o){rt(e,o)}}}function Hr(t){let e,r;return e=new Pr({props:{jobId:t[17].sourceJobId,title:t[3][t[18].jobType].title,input:t[17].sourceName,disabled:t[19],class:"ml-1.5"}}),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p(n,i){const s={};i&4&&(s.jobId=n[17].sourceJobId),i&12&&(s.title=n[3][n[18].jobType].title),i&4&&(s.input=n[17].sourceName),i&4&&(s.disabled=n[19]),e.$set(s)},i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function Jr(t){var u;let e,r,n,i;e=new Pr({props:{jobId:t[12].sourceGroupId,title:t[3][(u=t[13])==null?void 0:u.jobType].title,input:t[12].sourceGroupName,disabled:t[14]}});let s=t[12].individual,o=[];for(let a=0;a<s.length;a+=1)o[a]=Hr(qr(t,s,a));const l=a=>q(o[a],1,1,()=>{o[a]=null});return{c(){tt(e.$$.fragment),r=G();for(let a=0;a<o.length;a+=1)o[a].c();n=xt()},l(a){et(e.$$.fragment,a),r=K(a);for(let f=0;f<o.length;f+=1)o[f].l(a);n=xt()},m(a,f){nt(e,a,f),W(a,r,f);for(let c=0;c<o.length;c+=1)o[c].m(a,f);W(a,n,f),i=!0},p(a,f){var h;const c={};if(f&4&&(c.jobId=a[12].sourceGroupId),f&12&&(c.title=a[3][(h=a[13])==null?void 0:h.jobType].title),f&4&&(c.input=a[12].sourceGroupName),f&4&&(c.disabled=a[14]),e.$set(c),f&60){s=a[12].individual;let d;for(d=0;d<s.length;d+=1){const _=qr(a,s,d);o[d]?(o[d].p(_,f),O(o[d],1)):(o[d]=Hr(_),o[d].c(),O(o[d],1),o[d].m(n.parentNode,n))}for(St(),d=s.length;d<o.length;d+=1)l(d);zt()}},i(a){if(!i){O(e.$$.fragment,a);for(let f=0;f<s.length;f+=1)O(o[f]);i=!0}},o(a){q(e.$$.fragment,a),o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)q(o[f]);i=!1},d(a){rt(e,a),a&&S(r),he(o,a),a&&S(n)}}}function Wr(t){let e,r,n,i=t[9].title+"",s,o,l,u,a,f=t[9].groups,c=[];for(let d=0;d<f.length;d+=1)c[d]=Jr(Fr(t,f,d));const h=d=>q(c[d],1,1,()=>{c[d]=null});return{c(){e=L("div"),r=L("div"),n=L("h3"),s=lt(i),o=G(),l=L("div");for(let d=0;d<c.length;d+=1)c[d].c();u=G(),this.h()},l(d){e=F(d,"DIV",{class:!0});var _=P(e);r=F(_,"DIV",{class:!0});var m=P(r);n=F(m,"H3",{class:!0});var g=P(n);s=ut(g,i),g.forEach(S),m.forEach(S),o=K(_),l=F(_,"DIV",{class:!0});var p=P(l);for(let v=0;v<c.length;v+=1)c[v].l(p);p.forEach(S),u=K(_),_.forEach(S),this.h()},h(){B(n,"class","text-xs font-medium text-gray-700"),B(r,"class","px-1.5 py-1 shadow border-b border-gray-300 bg-gray-50"),B(l,"class","flex flex-col gap-y-1 w-full p-1 shadow-inner bg-white"),B(e,"class","rounded border border-gray-300 bg-white overflow-hidden")},m(d,_){W(d,e,_),T(e,r),T(r,n),T(n,s),T(e,o),T(e,l);for(let m=0;m<c.length;m+=1)c[m].m(l,null);T(e,u),a=!0},p(d,_){if((!a||_&4)&&i!==(i=d[9].title+"")&&Mt(s,i),_&60){f=d[9].groups;let m;for(m=0;m<f.length;m+=1){const g=Fr(d,f,m);c[m]?(c[m].p(g,_),O(c[m],1)):(c[m]=Jr(g),c[m].c(),O(c[m],1),c[m].m(l,null))}for(St(),m=f.length;m<c.length;m+=1)h(m);zt()}},i(d){if(!a){for(let _=0;_<f.length;_+=1)O(c[_]);a=!0}},o(d){c=c.filter(Boolean);for(let _=0;_<c.length;_+=1)q(c[_]);a=!1},d(d){d&&S(e),he(c,d)}}}function Qo(t){var o;let e,r,n=Object.values((o=t[2])!=null?o:{}),i=[];for(let l=0;l<n.length;l+=1)i[l]=Wr(Lr(t,n,l));const s=l=>q(i[l],1,1,()=>{i[l]=null});return{c(){e=L("div");for(let l=0;l<i.length;l+=1)i[l].c();this.h()},l(l){e=F(l,"DIV",{class:!0});var u=P(e);for(let a=0;a<i.length;a+=1)i[a].l(u);u.forEach(S),this.h()},h(){B(e,"class","flex flex-col gap-y-1")},m(l,u){W(l,e,u);for(let a=0;a<i.length;a+=1)i[a].m(e,null);r=!0},p(l,u){var a;if(u&60){n=Object.values((a=l[2])!=null?a:{});let f;for(f=0;f<n.length;f+=1){const c=Lr(l,n,f);i[f]?(i[f].p(c,u),O(i[f],1)):(i[f]=Wr(c),i[f].c(),O(i[f],1),i[f].m(e,null))}for(St(),f=n.length;f<i.length;f+=1)s(f);zt()}},i(l){if(!r){for(let u=0;u<n.length;u+=1)O(i[u]);r=!0}},o(l){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)q(i[u]);r=!1},d(l){l&&S(e),he(i,l)}}}function $o(t){var i;let e,r,n=((i=t[1].groups)==null?void 0:i.length)&&Ur(t);return{c(){n&&n.c(),e=xt()},l(s){n&&n.l(s),e=xt()},m(s,o){n&&n.m(s,o),W(s,e,o),r=!0},p(s,[o]){var l;((l=s[1].groups)==null?void 0:l.length)?n?(n.p(s,o),o&2&&O(n,1)):(n=Ur(s),n.c(),O(n,1),n.m(e.parentNode,e)):n&&(St(),q(n,1,1,()=>{n=null}),zt())},i(s){r||(O(n),r=!0)},o(s){q(n),r=!1},d(s){n&&n.d(s),s&&S(e)}}}function ta(t,e,r){let n;wt(t,we,h=>r(3,n=h));let{workflowJob:i}=e,{workflow:s}=e,{expanded:o=!1}=e;const{type:l}=Rt("workflow"),u={},a=h=>vr(h)?s.parents[h]:s.jobs[h],f=(h,d)=>vr(h)?!0:l!=="edit"&&!Object.keys(d.parameters).length;$t(()=>{var h,d,_,m;try{const{inputGroups:g=[]}=(h=n==null?void 0:n[i==null?void 0:i.jobType])!=null?h:{},p=(d=i.individualResults)!=null?d:[];for(let v=0;v<i.groups.length;v++){const b=i.groups[v],[x,E]=b,[y,A]=x.split("."),R={sourceGroupId:y,sourceGroup:x,sourceGroupName:A,individual:[]};if(u[E])u[E].groups.push(R);else{let D=E;for(let U=0;U<(g==null?void 0:g.length);U++){const J=g==null?void 0:g[U];if(J.name===E){D=J.title;break}}r(2,u[E]={title:D,groups:[R]},u)}}for(let v=0;v<p.length;v++){const[b,x]=p[v],[E,y,A]=b.split("."),[R,D,U]=x.split("."),J=(m=(_=u[D])==null?void 0:_.groups)==null?void 0:m[parseInt(U)],z={sourceJobId:E,sourceName:`${y}.${A}`};J&&J.individual.push(z)}}catch(g){Ds("Could not generate inputs: ",g.message)}});function c(h){o=h,r(0,o)}return t.$$set=h=>{"workflowJob"in h&&r(1,i=h.workflowJob),"workflow"in h&&r(6,s=h.workflow),"expanded"in h&&r(0,o=h.expanded)},[o,i,u,n,a,f,s,c]}class id extends pt{constructor(e){super();gt(this,e,ta,$o,mt,{workflowJob:1,workflow:6,expanded:0})}}const ea=t=>({sections:t&4}),Xr=t=>({sections:t[2]}),na=t=>({sections:t&4}),Yr=t=>({sections:t[2]});function Gr(t){let e,r,n,i;return r=new Ie({props:{src:qs,size:4,type:"outline",modifier:"stroke-2"}}),{c(){e=L("div"),tt(r.$$.fragment),n=lt(`
      No custom parameters set`),this.h()},l(s){e=F(s,"DIV",{class:!0});var o=P(e);et(r.$$.fragment,o),n=ut(o,`
      No custom parameters set`),o.forEach(S),this.h()},h(){B(e,"class","flex items-center gap-x-2 py-2 px-2.5 mt-1 text-xs font-medium rounded border shadow-sm border-blue-300 bg-blue-50 text-blue-500")},m(s,o){W(s,e,o),nt(r,e,null),T(e,n),i=!0},p:Ct,i(s){i||(O(r.$$.fragment,s),i=!0)},o(s){q(r.$$.fragment,s),i=!1},d(s){s&&S(e),rt(r)}}}function ra(t){let e,r,n,i;const s=t[12].header,o=vt(s,t,t[13],Yr),l=t[12].default,u=vt(l,t,t[13],Xr);let a=!t[0]&&Gr();return{c(){o&&o.c(),e=G(),u&&u.c(),r=G(),a&&a.c(),n=xt()},l(f){o&&o.l(f),e=K(f),u&&u.l(f),r=K(f),a&&a.l(f),n=xt()},m(f,c){o&&o.m(f,c),W(f,e,c),u&&u.m(f,c),W(f,r,c),a&&a.m(f,c),W(f,n,c),i=!0},p(f,c){o&&o.p&&(!i||c&8196)&&_t(o,s,f,f[13],i?yt(s,f[13],c,na):bt(f[13]),Yr),u&&u.p&&(!i||c&8196)&&_t(u,l,f,f[13],i?yt(l,f[13],c,ea):bt(f[13]),Xr),f[0]?a&&(St(),q(a,1,1,()=>{a=null}),zt()):a?(a.p(f,c),c&1&&O(a,1)):(a=Gr(),a.c(),O(a,1),a.m(n.parentNode,n))},i(f){i||(O(o,f),O(u,f),O(a),i=!0)},o(f){q(o,f),q(u,f),q(a),i=!1},d(f){o&&o.d(f),f&&S(e),u&&u.d(f),f&&S(r),a&&a.d(f),f&&S(n)}}}function Kr(t){let e,r;return{c(){e=L("div"),r=lt(t[1]),this.h()},l(n){e=F(n,"DIV",{class:!0});var i=P(e);r=ut(i,t[1]),i.forEach(S),this.h()},h(){B(e,"class","inline-flex justify-center items-center w-4 h-4 font-semibold text-2xs rounded border border-green-300 text-green-600 bg-green-50")},m(n,i){W(n,e,i),T(e,r)},p(n,i){i&2&&Mt(r,n[1])},d(n){n&&S(e)}}}function ia(t){let e,r=t[1]&&Kr(t);return{c(){r&&r.c(),e=xt()},l(n){r&&r.l(n),e=xt()},m(n,i){r&&r.m(n,i),W(n,e,i)},p(n,i){n[1]?r?r.p(n,i):(r=Kr(n),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(n){r&&r.d(n),n&&S(e)}}}function sa(t){let e,r;return e=new wn({props:{title:"Parameters",$$slots:{info:[ia],default:[ra]},$$scope:{ctx:t}}}),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p(n,[i]){const s={};i&8199&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function oa(t,e,r){var x,E;let n,i,s,o,l,{$$slots:u={},$$scope:a}=e,{id:f}=e,{job:c}=e,{workflowJob:h}=e;const{type:d,updates:_}=Rt("workflow");wt(t,_,y=>r(11,l=y));const m=Qt(),g=Qt((x=l==null?void 0:l[f])==null?void 0:x.parameters);wt(t,g,y=>r(9,s=y));let p=!0,v=Qt(d==="edit"?bn.spec:bn.all);wt(t,v,y=>r(10,o=y));let b=Qt(!1);return gn("parameters",{baseParameters:(E=c==null?void 0:c.baseParams)!=null?E:{},templateParameters:h.parameters,mergedParameters:{subscribe:m.subscribe},updatedParameters:{subscribe:g.subscribe},filter:v,showAdvanced:b}),$t(()=>{var y;m.set(Object.entries((y=c==null?void 0:c.baseParams)!=null?y:{}).reduce((A,[R,D])=>dt(ct({},A),{[R]:ct(ct({},D!=null?D:{}),h.parameters[R])}),{}))}),t.$$set=y=>{"id"in y&&r(6,f=y.id),"job"in y&&r(7,c=y.job),"workflowJob"in y&&r(8,h=y.workflowJob),"$$scope"in y&&r(13,a=y.$$scope)},t.$$.update=()=>{var y,A,R;t.$$.dirty&2112&&g.set((y=l==null?void 0:l[f])==null?void 0:y.parameters),t.$$.dirty&1536&&(!Object.keys(s!=null?s:{}).length&&o===bn.spec?r(0,p=!1):r(0,p=!0)),t.$$.dirty&128&&r(2,n=typeof(c==null?void 0:c.sections)=="object"?Object.entries(c.sections).sort((D,U)=>D[1].order-U[1].order):[]),t.$$.dirty&512&&r(1,i=(R=(A=Object.keys(s!=null?s:{}))==null?void 0:A.length)!=null?R:0)},[p,i,n,_,g,v,f,c,h,s,o,l,u,a]}class sd extends pt{constructor(e){super();gt(this,e,oa,sa,mt,{id:6,job:7,workflowJob:8})}}const aa=t=>({}),Zr=t=>({});function Qr(t){let e,r,n,i,s,o,l,u,a,f,c,h,d,_,m;function g(y,A){return y[1]?ua:la}let p=g(t),v=p(t);const b=t[5].badge,x=vt(b,t,t[4],Zr);let E=t[1]&&$r(t);return{c(){e=L("section"),r=L("header"),n=L("div"),i=G(),s=L("button"),o=L("h3"),l=lt(t[2]),u=G(),a=Ue("svg"),v.c(),f=G(),x&&x.c(),h=G(),E&&E.c(),this.h()},l(y){e=F(y,"SECTION",{class:!0});var A=P(e);r=F(A,"HEADER",{class:!0});var R=P(r);n=F(R,"DIV",{class:!0}),P(n).forEach(S),i=K(R),s=F(R,"BUTTON",{class:!0});var D=P(s);o=F(D,"H3",{class:!0});var U=P(o);l=ut(U,t[2]),U.forEach(S),u=K(D),a=He(D,"svg",{class:!0,stroke:!0,fill:!0,viewBox:!0});var J=P(a);v.l(J),J.forEach(S),f=K(D),x&&x.l(D),D.forEach(S),R.forEach(S),h=K(A),E&&E.l(A),A.forEach(S),this.h()},h(){B(n,"class","w-full h-1 bg-gray-100 flex-shrink-0"),B(o,"class","text-xs font-bold text-gray-500"),B(a,"class","h-4 w-4 text-gray-500 group-hover:text-gray-500 group-focus:text-gray-600"),B(a,"stroke","none"),B(a,"fill","currentColor"),B(a,"viewBox","0 0 16 16"),B(s,"class","flex items-center justify-between gap-x-1 w-full py-1.5 px-2.5 shadow-sm rounded-md border border-gray-300 bg-white text-left text-sm leading-4 font-medium hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500"),B(r,"class",c=""+((t[1]?"z-1":"z-2")+" sticky top-9.5 flex flex-wrap w-full shadow-sm rounded-md")),B(e,"class","section"),fe(e,"expanded",t[1])},m(y,A){W(y,e,A),T(e,r),T(r,n),T(r,i),T(r,s),T(s,o),T(o,l),T(s,u),T(s,a),v.m(a,null),T(s,f),x&&x.m(s,null),T(e,h),E&&E.m(e,null),t[7](e),d=!0,_||(m=It(s,"click",t[6]),_=!0)},p(y,A){(!d||A&4)&&Mt(l,y[2]),p!==(p=g(y))&&(v.d(1),v=p(y),v&&(v.c(),v.m(a,null))),x&&x.p&&(!d||A&16)&&_t(x,b,y,y[4],d?yt(b,y[4],A,aa):bt(y[4]),Zr),(!d||A&2&&c!==(c=""+((y[1]?"z-1":"z-2")+" sticky top-9.5 flex flex-wrap w-full shadow-sm rounded-md")))&&B(r,"class",c),y[1]?E?(E.p(y,A),A&2&&O(E,1)):(E=$r(y),E.c(),O(E,1),E.m(e,null)):E&&(St(),q(E,1,1,()=>{E=null}),zt()),A&2&&fe(e,"expanded",y[1])},i(y){d||(O(x,y),O(E),d=!0)},o(y){q(x,y),q(E),d=!1},d(y){y&&S(e),v.d(),x&&x.d(y),E&&E.d(),t[7](null),_=!1,m()}}}function la(t){let e;return{c(){e=Ue("path"),this.h()},l(r){e=He(r,"path",{d:!0}),P(e).forEach(S),this.h()},h(){B(e,"d","M4.42678 6.42678L7.82326 9.82322C7.92089 9.92085 8.07918 9.92085 8.17681 9.82322L11.5732 6.42678C11.7307 6.26928 11.6192 6 11.3964 6L4.60356 6C4.38083 6 4.26929 6.26929 4.42678 6.42678Z")},m(r,n){W(r,e,n)},d(r){r&&S(e)}}}function ua(t){let e;return{c(){e=Ue("path"),this.h()},l(r){e=He(r,"path",{d:!0}),P(e).forEach(S),this.h()},h(){B(e,"d","M4.42678 9.57322L7.82326 6.17678C7.92089 6.07915 8.07918 6.07915 8.17681 6.17678L11.5732 9.57322C11.7307 9.73072 11.6192 10 11.3964 10L4.60356 10C4.38083 10 4.26929 9.73071 4.42678 9.57322Z")},m(r,n){W(r,e,n)},d(r){r&&S(e)}}}function $r(t){let e,r;const n=t[5].default,i=vt(n,t,t[4],null);return{c(){e=L("div"),i&&i.c(),this.h()},l(s){e=F(s,"DIV",{class:!0});var o=P(e);i&&i.l(o),o.forEach(S),this.h()},h(){B(e,"class","flex flex-col gap-y-2.5 py-2")},m(s,o){W(s,e,o),i&&i.m(e,null),r=!0},p(s,o){i&&i.p&&(!r||o&16)&&_t(i,n,s,s[4],r?yt(n,s[4],o,null):bt(s[4]),null)},i(s){r||(O(i,s),r=!0)},o(s){q(i,s),r=!1},d(s){s&&S(e),i&&i.d(s)}}}function fa(t){let e,r,n=t[3]&&Qr(t);return{c(){n&&n.c(),e=xt()},l(i){n&&n.l(i),e=xt()},m(i,s){n&&n.m(i,s),W(i,e,s),r=!0},p(i,[s]){i[3]?n?(n.p(i,s),s&8&&O(n,1)):(n=Qr(i),n.c(),O(n,1),n.m(e.parentNode,e)):n&&(St(),q(n,1,1,()=>{n=null}),zt())},i(i){r||(O(n),r=!0)},o(i){q(n),r=!1},d(i){n&&n.d(i),i&&S(e)}}}function ca(t,e,r){let{$$slots:n={},$$scope:i}=e,{node:s=null}=e,{title:o}=e,{render:l}=e,{expanded:u=!0}=e;const a=()=>{r(1,u=!u)};function f(c){Vt[c?"unshift":"push"](()=>{s=c,r(0,s)})}return t.$$set=c=>{"node"in c&&r(0,s=c.node),"title"in c&&r(2,o=c.title),"render"in c&&r(3,l=c.render),"expanded"in c&&r(1,u=c.expanded),"$$scope"in c&&r(4,i=c.$$scope)},[s,u,o,l,i,n,a,f]}class od extends pt{constructor(e){super();gt(this,e,ca,fa,mt,{node:0,title:2,render:3,expanded:1})}}const ha=t=>({}),ti=t=>({});function da(t){let e,r;return e=new Hs({props:{value:t[4],status:t[0],id:t[6],options:t[8],disabled:t[1],tooltip:t[9]}}),e.$on("change",t[14]),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p(n,i){const s={};i&16&&(s.value=n[4]),i&1&&(s.status=n[0]),i&64&&(s.id=n[6]),i&256&&(s.options=n[8]),i&2&&(s.disabled=n[1]),i&512&&(s.tooltip=n[9]),e.$set(s)},i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function pa(t){let e,r;return e=new Js({props:{id:t[6],status:t[0],disabled:t[1],value:!!t[4],tooltip:t[9]}}),e.$on("click",t[13]),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p(n,i){const s={};i&64&&(s.id=n[6]),i&1&&(s.status=n[0]),i&2&&(s.disabled=n[1]),i&16&&(s.value=!!n[4]),i&512&&(s.tooltip=n[9]),e.$set(s)},i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function ga(t){let e,r;return e=new mr({props:{value:t[4],readonly:t[1],status:t[0],id:t[6],placeholder:"Not set",tooltip:t[9],$$slots:{icon:[_a]},$$scope:{ctx:t}}}),e.$on("change",t[12]),e.$on("click",t[3]),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p(n,i){const s={};i&16&&(s.value=n[4]),i&2&&(s.readonly=n[1]),i&1&&(s.status=n[0]),i&64&&(s.id=n[6]),i&512&&(s.tooltip=n[9]),i&8388608&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function ma(t){let e,r;return e=new mr({props:{value:t[4],readonly:t[1],status:t[0],id:t[6],placeholder:"Not set",tooltip:t[9],$$slots:{icon:[ba]},$$scope:{ctx:t}}}),e.$on("change",t[12]),e.$on("click",t[2]),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p(n,i){const s={};i&16&&(s.value=n[4]),i&2&&(s.readonly=n[1]),i&1&&(s.status=n[0]),i&64&&(s.id=n[6]),i&512&&(s.tooltip=n[9]),i&8388608&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function va(t){let e,r;return e=new Ws({props:{type:t[7],value:t[4],readonly:t[1],status:t[0],id:t[6],placeholder:"Not set",tooltip:t[9]}}),e.$on("change",t[12]),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p(n,i){const s={};i&128&&(s.type=n[7]),i&16&&(s.value=n[4]),i&2&&(s.readonly=n[1]),i&1&&(s.status=n[0]),i&64&&(s.id=n[6]),i&512&&(s.tooltip=n[9]),e.$set(s)},i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function _a(t){let e,r;return e=new Ie({props:{slot:"icon",src:Xs,size:4}}),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p:Ct,i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function ba(t){let e,r;return e=new Ie({props:{slot:"icon",src:eo,size:4}}),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p:Ct,i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function ei(t){let e,r;return e=new Us({props:{class:"ml-1"}}),e.$on("click",t[11]),{c(){tt(e.$$.fragment)},l(n){et(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p:Ct,i(n){r||(O(e.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),r=!1},d(n){rt(e,n)}}}function ya(t){let e,r,n,i,s;const o=[va,ma,ga,pa,da],l=[];function u(h,d){return(h[7]==="number"||h[7]==="string")&&typeof h[4]!="boolean"?0:h[7]==="path"&&typeof h[4]!="boolean"?1:h[7]==="resource_selection"&&typeof h[4]!="boolean"?2:h[7]==="boolean"?3:h[7]==="enum"?4:-1}~(e=u(t))&&(r=l[e]=o[e](t));let a=!t[1]&&ei(t);const f=t[22].default,c=vt(f,t,t[23],null);return{c(){r&&r.c(),n=G(),a&&a.c(),i=G(),c&&c.c()},l(h){r&&r.l(h),n=K(h),a&&a.l(h),i=K(h),c&&c.l(h)},m(h,d){~e&&l[e].m(h,d),W(h,n,d),a&&a.m(h,d),W(h,i,d),c&&c.m(h,d),s=!0},p(h,d){let _=e;e=u(h),e===_?~e&&l[e].p(h,d):(r&&(St(),q(l[_],1,1,()=>{l[_]=null}),zt()),~e?(r=l[e],r?r.p(h,d):(r=l[e]=o[e](h),r.c()),O(r,1),r.m(n.parentNode,n)):r=null),h[1]?a&&(St(),q(a,1,1,()=>{a=null}),zt()):a?(a.p(h,d),d&2&&O(a,1)):(a=ei(h),a.c(),O(a,1),a.m(i.parentNode,i)),c&&c.p&&(!s||d&8388608)&&_t(c,f,h,h[23],s?yt(f,h[23],d,null):bt(h[23]),null)},i(h){s||(O(r),O(a),O(c,h),s=!0)},o(h){q(r),q(a),q(c,h),s=!1},d(h){~e&&l[e].d(h),h&&S(n),a&&a.d(h),h&&S(i),c&&c.d(h)}}}function wa(t){let e;const r=t[22].icon,n=vt(r,t,t[23],ti);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&8388608)&&_t(n,r,i,i[23],e?yt(r,i[23],s,ha):bt(i[23]),ti)},i(i){e||(O(n,i),e=!0)},o(i){q(n,i),e=!1},d(i){n&&n.d(i)}}}function xa(t){let e,r;const n=[t[15],{title:t[5]},{id:t[6]},{set:t[0]==="updated"}];let i={$$slots:{icon:[wa],default:[ya]},$$scope:{ctx:t}};for(let s=0;s<n.length;s+=1)i=jt(i,n[s]);return e=new _n({props:i}),{c(){tt(e.$$.fragment)},l(s){et(e.$$.fragment,s)},m(s,o){nt(e,s,o),r=!0},p(s,[o]){const l=o&32865?Fe(n,[o&32768&&As(s[15]),o&32&&{title:s[5]},o&64&&{id:s[6]},o&1&&{set:s[0]==="updated"}]):{};o&8389587&&(l.$$scope={dirty:o,ctx:s}),e.$set(l)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){q(e.$$.fragment,s),r=!1},d(s){rt(e,s)}}}function Ia(t,e,r){var N;let n,i,s,o,l,u,a,f;const c=["id","name","parameter","status","readonly","parameterDefault","handleSelectPath","handleSelectResources"];let h=te(e,c),d,{$$slots:_={},$$scope:m}=e,{id:g}=e,{name:p}=e,{parameter:v}=e,{status:b="default"}=e,{readonly:x=!1}=e,{parameterDefault:E="base"}=e;const{baseParameters:y,mergedParameters:A}=Rt("parameters");wt(t,A,V=>r(21,d=V));const R=Le();let D=(N=v==null?void 0:v.value)!=null?N:null;const U=(V,j)=>{r(4,D=j),R("set",{id:g,name:V,value:j,type:s})},J=()=>{r(4,D=E==="base"?f:a),R("set",{id:g,name:p,value:D,type:s})},z=V=>{const j=V.target;U(p,j.value)},C=()=>{const V=document.getElementById(u).value;Ps(typeof V=="string"&&V.length>0?V:null,j=>{U(p,j)},`Select ${n}`)},w=()=>{typeof l=="number"&&Ls(l,V=>U(p,V))},M=()=>U(p,!D),k=V=>{const j=V.target;j.value!==D&&U(p,j.value)};return t.$$set=V=>{e=jt(jt({},e),qe(V)),r(15,h=te(e,c)),"id"in V&&r(16,g=V.id),"name"in V&&r(17,p=V.name),"parameter"in V&&r(18,v=V.parameter),"status"in V&&r(0,b=V.status),"readonly"in V&&r(1,x=V.readonly),"parameterDefault"in V&&r(19,E=V.parameterDefault),"$$scope"in V&&r(23,m=V.$$scope)},t.$$.update=()=>{var V,j;t.$$.dirty&262144&&r(5,{title:n,desc:i,type:s,enum_keys:o=[],num_gpus:l=null}=v,n,(r(9,i),r(18,v)),(r(7,s),r(18,v)),(r(8,o),r(18,v))),t.$$.dirty&196608&&r(6,u=`${g}-${p}`),t.$$.dirty&2490368&&r(20,a=(j=(V=d==null?void 0:d[p])==null?void 0:V.value)!=null?j:v.value),t.$$.dirty&1179648&&(f=(y==null?void 0:y[p])?y[p].value:a)},[b,x,C,w,D,n,u,s,o,i,A,J,z,M,k,h,g,p,v,E,a,d,_,m]}class ad extends pt{constructor(e){super();gt(this,e,Ia,xa,mt,{id:16,name:17,parameter:18,status:0,readonly:1,parameterDefault:19,handleSelectPath:2,handleSelectResources:3})}get handleSelectPath(){return this.$$.ctx[2]}get handleSelectResources(){return this.$$.ctx[3]}}function ni(t){let e,r=_r.sanitize(br(t[0]))+"";return{c(){e=L("div"),this.h()},l(n){e=F(n,"DIV",{class:!0});var i=P(e);i.forEach(S),this.h()},h(){B(e,"class","max-w-xs prose prose-xs prose-invert text-xs break-words overflow-auto custom-scrollbar")},m(n,i){W(n,e,i),e.innerHTML=r},p(n,i){i&1&&r!==(r=_r.sanitize(br(n[0]))+"")&&(e.innerHTML=r)},d(n){n&&S(e)}}}function ka(t){let e,r=t[0].length&&ni(t);return{c(){e=L("article"),r&&r.c(),this.h()},l(n){e=F(n,"ARTICLE",{class:!0});var i=P(e);r&&r.l(i),i.forEach(S),this.h()},h(){B(e,"class","max-w-80 p-2 rounded break-words")},m(n,i){W(n,e,i),r&&r.m(e,null)},p(n,[i]){n[0].length?r?r.p(n,i):(r=ni(n),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:Ct,o:Ct,d(n){n&&S(e),r&&r.d()}}}function Ea(t,e,r){let{notes:n}=e;return t.$$set=i=>{"notes"in i&&r(0,n=i.notes)},[n]}class ld extends pt{constructor(e){super();gt(this,e,Ea,ka,mt,{notes:0})}}var Ca={value:()=>{}};function xn(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Xe(r)}function Xe(t){this._=t}function Ma(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Xe.prototype=xn.prototype={constructor:Xe,on:function(t,e){var r=this._,n=Ma(t+"",r),i,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((i=(t=n[s]).type)&&(i=Sa(r[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=n[s]).type)r[i]=ri(r[i],t.name,e);else if(e==null)for(i in r)r[i]=ri(r[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Xe(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,s;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],n=0,i=s.length;n<i;++n)s[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,s=n.length;i<s;++i)n[i].value.apply(e,r)}};function Sa(t,e){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===e)return i.value}function ri(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=Ca,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var In="http://www.w3.org/1999/xhtml",ii={svg:"http://www.w3.org/2000/svg",xhtml:In,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ye(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),ii.hasOwnProperty(e)?{space:ii[e],local:t}:t}function za(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===In&&e.documentElement.namespaceURI===In?e.createElement(t):e.createElementNS(r,t)}}function Na(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function si(t){var e=Ye(t);return(e.local?Na:za)(e)}function Ba(){}function kn(t){return t==null?Ba:function(){return this.querySelector(t)}}function Ta(t){typeof t!="function"&&(t=kn(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],o=s.length,l=n[i]=new Array(o),u,a,f=0;f<o;++f)(u=s[f])&&(a=t.call(u,u.__data__,f,s))&&("__data__"in u&&(a.__data__=u.__data__),l[f]=a);return new Nt(n,this._parents)}function oi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Va(){return[]}function ai(t){return t==null?Va:function(){return this.querySelectorAll(t)}}function ja(t){return function(){return oi(t.apply(this,arguments))}}function Aa(t){typeof t=="function"?t=ja(t):t=ai(t);for(var e=this._groups,r=e.length,n=[],i=[],s=0;s<r;++s)for(var o=e[s],l=o.length,u,a=0;a<l;++a)(u=o[a])&&(n.push(t.call(u,u.__data__,a,o)),i.push(u));return new Nt(n,i)}function li(t){return function(){return this.matches(t)}}function ui(t){return function(e){return e.matches(t)}}var Ra=Array.prototype.find;function Oa(t){return function(){return Ra.call(this.children,t)}}function Da(){return this.firstElementChild}function Pa(t){return this.select(t==null?Da:Oa(typeof t=="function"?t:ui(t)))}var La=Array.prototype.filter;function Fa(){return Array.from(this.children)}function qa(t){return function(){return La.call(this.children,t)}}function Ua(t){return this.selectAll(t==null?Fa:qa(typeof t=="function"?t:ui(t)))}function Ha(t){typeof t!="function"&&(t=li(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],o=s.length,l=n[i]=[],u,a=0;a<o;++a)(u=s[a])&&t.call(u,u.__data__,a,s)&&l.push(u);return new Nt(n,this._parents)}function fi(t){return new Array(t.length)}function Ja(){return new Nt(this._enter||this._groups.map(fi),this._parents)}function Ge(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ge.prototype={constructor:Ge,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Wa(t){return function(){return t}}function Xa(t,e,r,n,i,s){for(var o=0,l,u=e.length,a=s.length;o<a;++o)(l=e[o])?(l.__data__=s[o],n[o]=l):r[o]=new Ge(t,s[o]);for(;o<u;++o)(l=e[o])&&(i[o]=l)}function Ya(t,e,r,n,i,s,o){var l,u,a=new Map,f=e.length,c=s.length,h=new Array(f),d;for(l=0;l<f;++l)(u=e[l])&&(h[l]=d=o.call(u,u.__data__,l,e)+"",a.has(d)?i[l]=u:a.set(d,u));for(l=0;l<c;++l)d=o.call(t,s[l],l,s)+"",(u=a.get(d))?(n[l]=u,u.__data__=s[l],a.delete(d)):r[l]=new Ge(t,s[l]);for(l=0;l<f;++l)(u=e[l])&&a.get(h[l])===u&&(i[l]=u)}function Ga(t){return t.__data__}function Ka(t,e){if(!arguments.length)return Array.from(this,Ga);var r=e?Ya:Xa,n=this._parents,i=this._groups;typeof t!="function"&&(t=Wa(t));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),a=0;a<s;++a){var f=n[a],c=i[a],h=c.length,d=Za(t.call(f,f&&f.__data__,a,n)),_=d.length,m=l[a]=new Array(_),g=o[a]=new Array(_),p=u[a]=new Array(h);r(f,c,m,g,p,d,e);for(var v=0,b=0,x,E;v<_;++v)if(x=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<_;);x._next=E||null}}return o=new Nt(o,n),o._enter=l,o._exit=u,o}function Za(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Qa(){return new Nt(this._exit||this._groups.map(fi),this._parents)}function $a(t,e,r){var n=this.enter(),i=this,s=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),r==null?s.remove():r(s),n&&i?n.merge(i).order():i}function tl(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,i=r.length,s=n.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var a=r[u],f=n[u],c=a.length,h=l[u]=new Array(c),d,_=0;_<c;++_)(d=a[_]||f[_])&&(h[_]=d);for(;u<i;++u)l[u]=r[u];return new Nt(l,this._parents)}function el(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],i=n.length-1,s=n[i],o;--i>=0;)(o=n[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function nl(t){t||(t=rl);function e(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s){for(var o=r[s],l=o.length,u=i[s]=new Array(l),a,f=0;f<l;++f)(a=o[f])&&(u[f]=a);u.sort(e)}return new Nt(i,this._parents).order()}function rl(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function il(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function sl(){return Array.from(this)}function ol(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,s=n.length;i<s;++i){var o=n[i];if(o)return o}return null}function al(){let t=0;for(const e of this)++t;return t}function ll(){return!this.node()}function ul(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i=e[r],s=0,o=i.length,l;s<o;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function fl(t){return function(){this.removeAttribute(t)}}function cl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function hl(t,e){return function(){this.setAttribute(t,e)}}function dl(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function pl(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function gl(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function ml(t,e){var r=Ye(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?cl:fl:typeof e=="function"?r.local?gl:pl:r.local?dl:hl)(r,e))}function ci(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function vl(t){return function(){this.style.removeProperty(t)}}function _l(t,e,r){return function(){this.style.setProperty(t,e,r)}}function bl(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function yl(t,e,r){return arguments.length>1?this.each((e==null?vl:typeof e=="function"?bl:_l)(t,e,r==null?"":r)):ge(this.node(),t)}function ge(t,e){return t.style.getPropertyValue(e)||ci(t).getComputedStyle(t,null).getPropertyValue(e)}function wl(t){return function(){delete this[t]}}function xl(t,e){return function(){this[t]=e}}function Il(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function kl(t,e){return arguments.length>1?this.each((e==null?wl:typeof e=="function"?Il:xl)(t,e)):this.node()[t]}function hi(t){return t.trim().split(/^|\s+/)}function En(t){return t.classList||new di(t)}function di(t){this._node=t,this._names=hi(t.getAttribute("class")||"")}di.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function pi(t,e){for(var r=En(t),n=-1,i=e.length;++n<i;)r.add(e[n])}function gi(t,e){for(var r=En(t),n=-1,i=e.length;++n<i;)r.remove(e[n])}function El(t){return function(){pi(this,t)}}function Cl(t){return function(){gi(this,t)}}function Ml(t,e){return function(){(e.apply(this,arguments)?pi:gi)(this,t)}}function Sl(t,e){var r=hi(t+"");if(arguments.length<2){for(var n=En(this.node()),i=-1,s=r.length;++i<s;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof e=="function"?Ml:e?El:Cl)(r,e))}function zl(){this.textContent=""}function Nl(t){return function(){this.textContent=t}}function Bl(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Tl(t){return arguments.length?this.each(t==null?zl:(typeof t=="function"?Bl:Nl)(t)):this.node().textContent}function Vl(){this.innerHTML=""}function jl(t){return function(){this.innerHTML=t}}function Al(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function Rl(t){return arguments.length?this.each(t==null?Vl:(typeof t=="function"?Al:jl)(t)):this.node().innerHTML}function Ol(){this.nextSibling&&this.parentNode.appendChild(this)}function Dl(){return this.each(Ol)}function Pl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ll(){return this.each(Pl)}function Fl(t){var e=typeof t=="function"?t:si(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ql(){return null}function Ul(t,e){var r=typeof t=="function"?t:si(t),n=e==null?ql:typeof e=="function"?e:kn(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Hl(){var t=this.parentNode;t&&t.removeChild(this)}function Jl(){return this.each(Hl)}function Wl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Yl(t){return this.select(t?Xl:Wl)}function Gl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Kl(t){return function(e){t.call(this,e,this.__data__)}}function Zl(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function Ql(t){return function(){var e=this.__on;if(!!e){for(var r=0,n=-1,i=e.length,s;r<i;++r)s=e[r],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++n]=s;++n?e.length=n:delete this.__on}}}function $l(t,e,r){return function(){var n=this.__on,i,s=Kl(e);if(n){for(var o=0,l=n.length;o<l;++o)if((i=n[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=r),i.value=e;return}}this.addEventListener(t.type,s,r),i={type:t.type,name:t.name,value:e,listener:s,options:r},n?n.push(i):this.__on=[i]}}function tu(t,e,r){var n=Zl(t+""),i,s=n.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,a=l.length,f;u<a;++u)for(i=0,f=l[u];i<s;++i)if((o=n[i]).type===f.type&&o.name===f.name)return f.value}return}for(l=e?$l:Ql,i=0;i<s;++i)this.each(l(n[i],e,r));return this}function mi(t,e,r){var n=ci(t),i=n.CustomEvent;typeof i=="function"?i=new i(e,r):(i=n.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function eu(t,e){return function(){return mi(this,t,e)}}function nu(t,e){return function(){return mi(this,t,e.apply(this,arguments))}}function ru(t,e){return this.each((typeof e=="function"?nu:eu)(t,e))}function*iu(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,s=n.length,o;i<s;++i)(o=n[i])&&(yield o)}var Cn=[null];function Nt(t,e){this._groups=t,this._parents=e}function ke(){return new Nt([[document.documentElement]],Cn)}function su(){return this}Nt.prototype=ke.prototype={constructor:Nt,select:Ta,selectAll:Aa,selectChild:Pa,selectChildren:Ua,filter:Ha,data:Ka,enter:Ja,exit:Qa,join:$a,merge:tl,selection:su,order:el,sort:nl,call:il,nodes:sl,node:ol,size:al,empty:ll,each:ul,attr:ml,style:yl,property:kl,classed:Sl,text:Tl,html:Rl,raise:Dl,lower:Ll,append:Fl,insert:Ul,remove:Jl,clone:Yl,datum:Gl,on:tu,dispatch:ru,[Symbol.iterator]:iu};function Ot(t){return typeof t=="string"?new Nt([[document.querySelector(t)]],[document.documentElement]):new Nt([[t]],Cn)}function ou(t){let e;for(;e=t.sourceEvent;)t=e;return t}function re(t,e){if(t=ou(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function au(t){return typeof t=="string"?new Nt([document.querySelectorAll(t)],[document.documentElement]):new Nt([oi(t)],Cn)}const Mn={capture:!0,passive:!1};function Sn(t){t.preventDefault(),t.stopImmediatePropagation()}function lu(t){var e=t.document.documentElement,r=Ot(t).on("dragstart.drag",Sn,Mn);"onselectstart"in e?r.on("selectstart.drag",Sn,Mn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function uu(t,e){var r=t.document.documentElement,n=Ot(t).on("dragstart.drag",null);e&&(n.on("click.drag",Sn,Mn),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function zn(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function vi(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Ee(){}var Ce=.7,Ke=1/Ce,me="\\s*([+-]?\\d+)\\s*",Me="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fu=/^#([0-9a-f]{3,8})$/,cu=new RegExp(`^rgb\\(${me},${me},${me}\\)$`),hu=new RegExp(`^rgb\\(${Ft},${Ft},${Ft}\\)$`),du=new RegExp(`^rgba\\(${me},${me},${me},${Me}\\)$`),pu=new RegExp(`^rgba\\(${Ft},${Ft},${Ft},${Me}\\)$`),gu=new RegExp(`^hsl\\(${Me},${Ft},${Ft}\\)$`),mu=new RegExp(`^hsla\\(${Me},${Ft},${Ft},${Me}\\)$`),_i={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zn(Ee,Se,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:bi,formatHex:bi,formatHex8:vu,formatHsl:_u,formatRgb:yi,toString:yi});function bi(){return this.rgb().formatHex()}function vu(){return this.rgb().formatHex8()}function _u(){return Ei(this).formatHsl()}function yi(){return this.rgb().formatRgb()}function Se(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=fu.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?wi(e):r===3?new Bt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Ze(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Ze(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=cu.exec(t))?new Bt(e[1],e[2],e[3],1):(e=hu.exec(t))?new Bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=du.exec(t))?Ze(e[1],e[2],e[3],e[4]):(e=pu.exec(t))?Ze(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=gu.exec(t))?ki(e[1],e[2]/100,e[3]/100,1):(e=mu.exec(t))?ki(e[1],e[2]/100,e[3]/100,e[4]):_i.hasOwnProperty(t)?wi(_i[t]):t==="transparent"?new Bt(NaN,NaN,NaN,0):null}function wi(t){return new Bt(t>>16&255,t>>8&255,t&255,1)}function Ze(t,e,r,n){return n<=0&&(t=e=r=NaN),new Bt(t,e,r,n)}function bu(t){return t instanceof Ee||(t=Se(t)),t?(t=t.rgb(),new Bt(t.r,t.g,t.b,t.opacity)):new Bt}function Nn(t,e,r,n){return arguments.length===1?bu(t):new Bt(t,e,r,n==null?1:n)}function Bt(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}zn(Bt,Nn,vi(Ee,{brighter(t){return t=t==null?Ke:Math.pow(Ke,t),new Bt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ce:Math.pow(Ce,t),new Bt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bt(ie(this.r),ie(this.g),ie(this.b),Qe(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xi,formatHex:xi,formatHex8:yu,formatRgb:Ii,toString:Ii}));function xi(){return`#${se(this.r)}${se(this.g)}${se(this.b)}`}function yu(){return`#${se(this.r)}${se(this.g)}${se(this.b)}${se((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ii(){const t=Qe(this.opacity);return`${t===1?"rgb(":"rgba("}${ie(this.r)}, ${ie(this.g)}, ${ie(this.b)}${t===1?")":`, ${t})`}`}function Qe(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ie(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function se(t){return t=ie(t),(t<16?"0":"")+t.toString(16)}function ki(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Dt(t,e,r,n)}function Ei(t){if(t instanceof Dt)return new Dt(t.h,t.s,t.l,t.opacity);if(t instanceof Ee||(t=Se(t)),!t)return new Dt;if(t instanceof Dt)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,l=s-i,u=(s+i)/2;return l?(e===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-e)/l+2:o=(e-r)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new Dt(o,l,u,t.opacity)}function wu(t,e,r,n){return arguments.length===1?Ei(t):new Dt(t,e,r,n==null?1:n)}function Dt(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}zn(Dt,wu,vi(Ee,{brighter(t){return t=t==null?Ke:Math.pow(Ke,t),new Dt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ce:Math.pow(Ce,t),new Dt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Bt(Bn(t>=240?t-240:t+120,i,n),Bn(t,i,n),Bn(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Dt(Ci(this.h),$e(this.s),$e(this.l),Qe(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Qe(this.opacity);return`${t===1?"hsl(":"hsla("}${Ci(this.h)}, ${$e(this.s)*100}%, ${$e(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ci(t){return t=(t||0)%360,t<0?t+360:t}function $e(t){return Math.max(0,Math.min(1,t||0))}function Bn(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}var Mi=t=>()=>t;function xu(t,e){return function(r){return t+r*e}}function Iu(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function ku(t){return(t=+t)==1?Si:function(e,r){return r-e?Iu(e,r,t):Mi(isNaN(e)?r:e)}}function Si(t,e){var r=e-t;return r?xu(t,r):Mi(isNaN(t)?e:t)}var zi=function t(e){var r=ku(e);function n(i,s){var o=r((i=Nn(i)).r,(s=Nn(s)).r),l=r(i.g,s.g),u=r(i.b,s.b),a=Si(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=l(f),i.b=u(f),i.opacity=a(f),i+""}}return n.gamma=t,n}(1);function ee(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var Tn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vn=new RegExp(Tn.source,"g");function Eu(t){return function(){return t}}function Cu(t){return function(e){return t(e)+""}}function Mu(t,e){var r=Tn.lastIndex=Vn.lastIndex=0,n,i,s,o=-1,l=[],u=[];for(t=t+"",e=e+"";(n=Tn.exec(t))&&(i=Vn.exec(e));)(s=i.index)>r&&(s=e.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:ee(n,i)})),r=Vn.lastIndex;return r<e.length&&(s=e.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?Cu(u[0].x):Eu(e):(e=u.length,function(a){for(var f=0,c;f<e;++f)l[(c=u[f]).i]=c.x(a);return l.join("")})}var Ni=180/Math.PI,jn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bi(t,e,r,n,i,s){var o,l,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*r+e*n)&&(r-=t*u,n-=e*u),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,u/=l),t*n<e*r&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Ni,skewX:Math.atan(u)*Ni,scaleX:o,scaleY:l}}var tn;function Su(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?jn:Bi(e.a,e.b,e.c,e.d,e.e,e.f)}function zu(t){return t==null||(tn||(tn=document.createElementNS("http://www.w3.org/2000/svg","g")),tn.setAttribute("transform",t),!(t=tn.transform.baseVal.consolidate()))?jn:(t=t.matrix,Bi(t.a,t.b,t.c,t.d,t.e,t.f))}function Ti(t,e,r,n){function i(a){return a.length?a.pop()+" ":""}function s(a,f,c,h,d,_){if(a!==c||f!==h){var m=d.push("translate(",null,e,null,r);_.push({i:m-4,x:ee(a,c)},{i:m-2,x:ee(f,h)})}else(c||h)&&d.push("translate("+c+e+h+r)}function o(a,f,c,h){a!==f?(a-f>180?f+=360:f-a>180&&(a+=360),h.push({i:c.push(i(c)+"rotate(",null,n)-2,x:ee(a,f)})):f&&c.push(i(c)+"rotate("+f+n)}function l(a,f,c,h){a!==f?h.push({i:c.push(i(c)+"skewX(",null,n)-2,x:ee(a,f)}):f&&c.push(i(c)+"skewX("+f+n)}function u(a,f,c,h,d,_){if(a!==c||f!==h){var m=d.push(i(d)+"scale(",null,",",null,")");_.push({i:m-4,x:ee(a,c)},{i:m-2,x:ee(f,h)})}else(c!==1||h!==1)&&d.push(i(d)+"scale("+c+","+h+")")}return function(a,f){var c=[],h=[];return a=t(a),f=t(f),s(a.translateX,a.translateY,f.translateX,f.translateY,c,h),o(a.rotate,f.rotate,c,h),l(a.skewX,f.skewX,c,h),u(a.scaleX,a.scaleY,f.scaleX,f.scaleY,c,h),a=f=null,function(d){for(var _=-1,m=h.length,g;++_<m;)c[(g=h[_]).i]=g.x(d);return c.join("")}}}var Nu=Ti(Su,"px, ","px)","deg)"),Bu=Ti(zu,", ",")",")"),Tu=1e-12;function Vi(t){return((t=Math.exp(t))+1/t)/2}function Vu(t){return((t=Math.exp(t))-1/t)/2}function ju(t){return((t=Math.exp(2*t))-1)/(t+1)}var Au=function t(e,r,n){function i(s,o){var l=s[0],u=s[1],a=s[2],f=o[0],c=o[1],h=o[2],d=f-l,_=c-u,m=d*d+_*_,g,p;if(m<Tu)p=Math.log(h/a)/e,g=function(A){return[l+A*d,u+A*_,a*Math.exp(e*A*p)]};else{var v=Math.sqrt(m),b=(h*h-a*a+n*m)/(2*a*r*v),x=(h*h-a*a-n*m)/(2*h*r*v),E=Math.log(Math.sqrt(b*b+1)-b),y=Math.log(Math.sqrt(x*x+1)-x);p=(y-E)/e,g=function(A){var R=A*p,D=Vi(E),U=a/(r*v)*(D*ju(e*R+E)-Vu(E));return[l+U*d,u+U*_,a*D/Vi(e*R+E)]}}return g.duration=p*1e3*e/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return t(o,l,u)},i}(Math.SQRT2,2,4),ve=0,ze=0,Ne=0,ji=1e3,en,Be,nn=0,oe=0,rn=0,Te=typeof performance=="object"&&performance.now?performance:Date,Ai=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function An(){return oe||(Ai(Ru),oe=Te.now()+rn)}function Ru(){oe=0}function sn(){this._call=this._time=this._next=null}sn.prototype=Ri.prototype={constructor:sn,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?An():+r)+(e==null?0:+e),!this._next&&Be!==this&&(Be?Be._next=this:en=this,Be=this),this._call=t,this._time=r,Rn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rn())}};function Ri(t,e,r){var n=new sn;return n.restart(t,e,r),n}function Ou(){An(),++ve;for(var t=en,e;t;)(e=oe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ve}function Oi(){oe=(nn=Te.now())+rn,ve=ze=0;try{Ou()}finally{ve=0,Pu(),oe=0}}function Du(){var t=Te.now(),e=t-nn;e>ji&&(rn-=e,nn=t)}function Pu(){for(var t,e=en,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:en=r);Be=t,Rn(n)}function Rn(t){if(!ve){ze&&(ze=clearTimeout(ze));var e=t-oe;e>24?(t<1/0&&(ze=setTimeout(Oi,t-Te.now()-rn)),Ne&&(Ne=clearInterval(Ne))):(Ne||(nn=Te.now(),Ne=setInterval(Du,ji)),ve=1,Ai(Oi))}}function Di(t,e,r){var n=new sn;return e=e==null?0:+e,n.restart(i=>{n.stop(),t(i+e)},e,r),n}var Lu=xn("start","end","cancel","interrupt"),Fu=[],Pi=0,Li=1,On=2,on=3,Fi=4,Dn=5,an=6;function ln(t,e,r,n,i,s){var o=t.__transition;if(!o)t.__transition={};else if(r in o)return;qu(t,r,{name:e,index:n,group:i,on:Lu,tween:Fu,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Pi})}function Pn(t,e){var r=Pt(t,e);if(r.state>Pi)throw new Error("too late; already scheduled");return r}function qt(t,e){var r=Pt(t,e);if(r.state>on)throw new Error("too late; already running");return r}function Pt(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function qu(t,e,r){var n=t.__transition,i;n[e]=r,r.timer=Ri(s,0,r.time);function s(a){r.state=Li,r.timer.restart(o,r.delay,r.time),r.delay<=a&&o(a-r.delay)}function o(a){var f,c,h,d;if(r.state!==Li)return u();for(f in n)if(d=n[f],d.name===r.name){if(d.state===on)return Di(o);d.state===Fi?(d.state=an,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete n[f]):+f<e&&(d.state=an,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete n[f])}if(Di(function(){r.state===on&&(r.state=Fi,r.timer.restart(l,r.delay,r.time),l(a))}),r.state=On,r.on.call("start",t,t.__data__,r.index,r.group),r.state===On){for(r.state=on,i=new Array(h=r.tween.length),f=0,c=-1;f<h;++f)(d=r.tween[f].value.call(t,t.__data__,r.index,r.group))&&(i[++c]=d);i.length=c+1}}function l(a){for(var f=a<r.duration?r.ease.call(null,a/r.duration):(r.timer.restart(u),r.state=Dn,1),c=-1,h=i.length;++c<h;)i[c].call(t,f);r.state===Dn&&(r.on.call("end",t,t.__data__,r.index,r.group),u())}function u(){r.state=an,r.timer.stop(),delete n[e];for(var a in n)return;delete t.__transition}}function un(t,e){var r=t.__transition,n,i,s=!0,o;if(!!r){e=e==null?null:e+"";for(o in r){if((n=r[o]).name!==e){s=!1;continue}i=n.state>On&&n.state<Dn,n.state=an,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[o]}s&&delete t.__transition}}function Uu(t){return this.each(function(){un(this,t)})}function Hu(t,e){var r,n;return function(){var i=qt(this,t),s=i.tween;if(s!==r){n=r=s;for(var o=0,l=n.length;o<l;++o)if(n[o].name===e){n=n.slice(),n.splice(o,1);break}}i.tween=n}}function Ju(t,e,r){var n,i;if(typeof r!="function")throw new Error;return function(){var s=qt(this,t),o=s.tween;if(o!==n){i=(n=o).slice();for(var l={name:e,value:r},u=0,a=i.length;u<a;++u)if(i[u].name===e){i[u]=l;break}u===a&&i.push(l)}s.tween=i}}function Wu(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=Pt(this.node(),r).tween,i=0,s=n.length,o;i<s;++i)if((o=n[i]).name===t)return o.value;return null}return this.each((e==null?Hu:Ju)(r,t,e))}function Ln(t,e,r){var n=t._id;return t.each(function(){var i=qt(this,n);(i.value||(i.value={}))[e]=r.apply(this,arguments)}),function(i){return Pt(i,n).value[e]}}function qi(t,e){var r;return(typeof e=="number"?ee:e instanceof Se?zi:(r=Se(e))?(e=r,zi):Mu)(t,e)}function Xu(t){return function(){this.removeAttribute(t)}}function Yu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Gu(t,e,r){var n,i=r+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===n?s:s=e(n=o,r)}}function Ku(t,e,r){var n,i=r+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===n?s:s=e(n=o,r)}}function Zu(t,e,r){var n,i,s;return function(){var o,l=r(this),u;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=l+"",o===u?null:o===n&&u===i?s:(i=u,s=e(n=o,l)))}}function Qu(t,e,r){var n,i,s;return function(){var o,l=r(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=l+"",o===u?null:o===n&&u===i?s:(i=u,s=e(n=o,l)))}}function $u(t,e){var r=Ye(t),n=r==="transform"?Bu:qi;return this.attrTween(t,typeof e=="function"?(r.local?Qu:Zu)(r,n,Ln(this,"attr."+t,e)):e==null?(r.local?Yu:Xu)(r):(r.local?Ku:Gu)(r,n,e))}function tf(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function ef(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function nf(t,e){var r,n;function i(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&ef(t,s)),r}return i._value=e,i}function rf(t,e){var r,n;function i(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&tf(t,s)),r}return i._value=e,i}function sf(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Ye(t);return this.tween(r,(n.local?nf:rf)(n,e))}function of(t,e){return function(){Pn(this,t).delay=+e.apply(this,arguments)}}function af(t,e){return e=+e,function(){Pn(this,t).delay=e}}function lf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?of:af)(e,t)):Pt(this.node(),e).delay}function uf(t,e){return function(){qt(this,t).duration=+e.apply(this,arguments)}}function ff(t,e){return e=+e,function(){qt(this,t).duration=e}}function cf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?uf:ff)(e,t)):Pt(this.node(),e).duration}function hf(t,e){if(typeof e!="function")throw new Error;return function(){qt(this,t).ease=e}}function df(t){var e=this._id;return arguments.length?this.each(hf(e,t)):Pt(this.node(),e).ease}function pf(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;qt(this,t).ease=r}}function gf(t){if(typeof t!="function")throw new Error;return this.each(pf(this._id,t))}function mf(t){typeof t!="function"&&(t=li(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],o=s.length,l=n[i]=[],u,a=0;a<o;++a)(u=s[a])&&t.call(u,u.__data__,a,s)&&l.push(u);return new Wt(n,this._parents,this._name,this._id)}function vf(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,i=r.length,s=Math.min(n,i),o=new Array(n),l=0;l<s;++l)for(var u=e[l],a=r[l],f=u.length,c=o[l]=new Array(f),h,d=0;d<f;++d)(h=u[d]||a[d])&&(c[d]=h);for(;l<n;++l)o[l]=e[l];return new Wt(o,this._parents,this._name,this._id)}function _f(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function bf(t,e,r){var n,i,s=_f(e)?Pn:qt;return function(){var o=s(this,t),l=o.on;l!==n&&(i=(n=l).copy()).on(e,r),o.on=i}}function yf(t,e){var r=this._id;return arguments.length<2?Pt(this.node(),r).on.on(t):this.each(bf(r,t,e))}function wf(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function xf(){return this.on("end.remove",wf(this._id))}function If(t){var e=this._name,r=this._id;typeof t!="function"&&(t=kn(t));for(var n=this._groups,i=n.length,s=new Array(i),o=0;o<i;++o)for(var l=n[o],u=l.length,a=s[o]=new Array(u),f,c,h=0;h<u;++h)(f=l[h])&&(c=t.call(f,f.__data__,h,l))&&("__data__"in f&&(c.__data__=f.__data__),a[h]=c,ln(a[h],e,r,h,a,Pt(f,r)));return new Wt(s,this._parents,e,r)}function kf(t){var e=this._name,r=this._id;typeof t!="function"&&(t=ai(t));for(var n=this._groups,i=n.length,s=[],o=[],l=0;l<i;++l)for(var u=n[l],a=u.length,f,c=0;c<a;++c)if(f=u[c]){for(var h=t.call(f,f.__data__,c,u),d,_=Pt(f,r),m=0,g=h.length;m<g;++m)(d=h[m])&&ln(d,e,r,m,h,_);s.push(h),o.push(f)}return new Wt(s,o,e,r)}var Ef=ke.prototype.constructor;function Cf(){return new Ef(this._groups,this._parents)}function Mf(t,e){var r,n,i;return function(){var s=ge(this,t),o=(this.style.removeProperty(t),ge(this,t));return s===o?null:s===r&&o===n?i:i=e(r=s,n=o)}}function Ui(t){return function(){this.style.removeProperty(t)}}function Sf(t,e,r){var n,i=r+"",s;return function(){var o=ge(this,t);return o===i?null:o===n?s:s=e(n=o,r)}}function zf(t,e,r){var n,i,s;return function(){var o=ge(this,t),l=r(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),ge(this,t))),o===u?null:o===n&&u===i?s:(i=u,s=e(n=o,l))}}function Nf(t,e){var r,n,i,s="style."+e,o="end."+s,l;return function(){var u=qt(this,t),a=u.on,f=u.value[s]==null?l||(l=Ui(e)):void 0;(a!==r||i!==f)&&(n=(r=a).copy()).on(o,i=f),u.on=n}}function Bf(t,e,r){var n=(t+="")==="transform"?Nu:qi;return e==null?this.styleTween(t,Mf(t,n)).on("end.style."+t,Ui(t)):typeof e=="function"?this.styleTween(t,zf(t,n,Ln(this,"style."+t,e))).each(Nf(this._id,t)):this.styleTween(t,Sf(t,n,e),r).on("end.style."+t,null)}function Tf(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function Vf(t,e,r){var n,i;function s(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Tf(t,o,r)),n}return s._value=e,s}function jf(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,Vf(t,e,r==null?"":r))}function Af(t){return function(){this.textContent=t}}function Rf(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function Of(t){return this.tween("text",typeof t=="function"?Rf(Ln(this,"text",t)):Af(t==null?"":t+""))}function Df(t){return function(e){this.textContent=t.call(this,e)}}function Pf(t){var e,r;function n(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&Df(i)),e}return n._value=t,n}function Lf(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Pf(t))}function Ff(){for(var t=this._name,e=this._id,r=Hi(),n=this._groups,i=n.length,s=0;s<i;++s)for(var o=n[s],l=o.length,u,a=0;a<l;++a)if(u=o[a]){var f=Pt(u,e);ln(u,t,r,a,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Wt(n,this._parents,t,r)}function qf(){var t,e,r=this,n=r._id,i=r.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i==0&&s()}};r.each(function(){var a=qt(this,n),f=a.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),a.on=e}),i===0&&s()})}var Uf=0;function Wt(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function Hi(){return++Uf}var Xt=ke.prototype;Wt.prototype={constructor:Wt,select:If,selectAll:kf,selectChild:Xt.selectChild,selectChildren:Xt.selectChildren,filter:mf,merge:vf,selection:Cf,transition:Ff,call:Xt.call,nodes:Xt.nodes,node:Xt.node,size:Xt.size,empty:Xt.empty,each:Xt.each,on:yf,attr:$u,attrTween:sf,style:Bf,styleTween:jf,text:Of,textTween:Lf,remove:xf,tween:Wu,delay:lf,duration:cf,ease:df,easeVarying:gf,end:qf,[Symbol.iterator]:Xt[Symbol.iterator]};function Hf(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Jf={time:null,delay:0,duration:250,ease:Hf};function Wf(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function Xf(t){var e,r;t instanceof Wt?(e=t._id,t=t._name):(e=Hi(),(r=Jf).time=An(),t=t==null?null:t+"");for(var n=this._groups,i=n.length,s=0;s<i;++s)for(var o=n[s],l=o.length,u,a=0;a<l;++a)(u=o[a])&&ln(u,t,e,a,o,r||Wf(u,e));return new Wt(n,this._parents,t,e)}ke.prototype.interrupt=Uu;ke.prototype.transition=Xf;const Fn=Math.PI,qn=2*Fn,ae=1e-6,Yf=qn-ae;function Ji(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Gf(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ji;const r=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class Kf{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ji:Gf(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,s,o){this._append`C${+e},${+r},${+n},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,i,s){if(e=+e,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,u=n-e,a=i-r,f=o-e,c=l-r,h=f*f+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>ae)if(!(Math.abs(c*u-a*f)>ae)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let d=n-o,_=i-l,m=u*u+a*a,g=d*d+_*_,p=Math.sqrt(m),v=Math.sqrt(h),b=s*Math.tan((Fn-Math.acos((m+h-g)/(2*p*v)))/2),x=b/v,E=b/p;Math.abs(x-1)>ae&&this._append`L${e+x*f},${r+x*c}`,this._append`A${s},${s},0,0,${+(c*d>f*_)},${this._x1=e+E*u},${this._y1=r+E*a}`}}arc(e,r,n,i,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(i),u=n*Math.sin(i),a=e+l,f=r+u,c=1^o,h=o?i-s:s-i;this._x1===null?this._append`M${a},${f}`:(Math.abs(this._x1-a)>ae||Math.abs(this._y1-f)>ae)&&this._append`L${a},${f}`,!!n&&(h<0&&(h=h%qn+qn),h>Yf?this._append`A${n},${n},0,1,${c},${e-l},${r-u}A${n},${n},0,1,${c},${this._x1=a},${this._y1=f}`:h>ae&&this._append`A${n},${n},0,${+(h>=Fn)},${c},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function _e(t){return function(){return t}}function Zf(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new Kf(e)}function Qf(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Wi(t){this._context=t}Wi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Xi(t){return new Wi(t)}function $f(t){return t[0]}function tc(t){return t[1]}function ec(t,e){var r=_e(!0),n=null,i=Xi,s=null,o=Zf(l);t=typeof t=="function"?t:t===void 0?$f:_e(t),e=typeof e=="function"?e:e===void 0?tc:_e(e);function l(u){var a,f=(u=Qf(u)).length,c,h=!1,d;for(n==null&&(s=i(d=o())),a=0;a<=f;++a)!(a<f&&r(c=u[a],a,u))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(c,a,u),+e(c,a,u));if(d)return s=null,d+""||null}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:_e(+u),l):t},l.y=function(u){return arguments.length?(e=typeof u=="function"?u:_e(+u),l):e},l.defined=function(u){return arguments.length?(r=typeof u=="function"?u:_e(!!u),l):r},l.curve=function(u){return arguments.length?(i=u,n!=null&&(s=i(n)),l):i},l.context=function(u){return arguments.length?(u==null?n=s=null:s=i(n=u),l):n},l}var fn=t=>()=>t;function nc(t,{sourceEvent:e,target:r,transform:n,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:i}})}function Yt(t,e,r){this.k=t,this.x=e,this.y=r}Yt.prototype={constructor:Yt,scale:function(t){return t===1?this:new Yt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Yt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var cn=new Yt(1,0,0);Yi.prototype=Yt.prototype;function Yi(t){for(;!t.__zoom;)if(!(t=t.parentNode))return cn;return t.__zoom}function Un(t){t.stopImmediatePropagation()}function Ve(t){t.preventDefault(),t.stopImmediatePropagation()}function rc(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function ic(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Gi(){return this.__zoom||cn}function sc(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function oc(){return navigator.maxTouchPoints||"ontouchstart"in this}function ac(t,e,r){var n=t.invertX(e[0][0])-r[0][0],i=t.invertX(e[1][0])-r[1][0],s=t.invertY(e[0][1])-r[0][1],o=t.invertY(e[1][1])-r[1][1];return t.translate(i>n?(n+i)/2:Math.min(0,n)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function lc(){var t=rc,e=ic,r=ac,n=sc,i=oc,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Au,a=xn("start","zoom","end"),f,c,h,d=500,_=150,m=0,g=10;function p(w){w.property("__zoom",Gi).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",U).filter(i).on("touchstart.zoom",J).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(w,M,k,N){var V=w.selection?w.selection():w;V.property("__zoom",Gi),w!==V?E(w,M,k,N):V.interrupt().each(function(){y(this,arguments).event(N).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},p.scaleBy=function(w,M,k,N){p.scaleTo(w,function(){var V=this.__zoom.k,j=typeof M=="function"?M.apply(this,arguments):M;return V*j},k,N)},p.scaleTo=function(w,M,k,N){p.transform(w,function(){var V=e.apply(this,arguments),j=this.__zoom,H=k==null?x(V):typeof k=="function"?k.apply(this,arguments):k,X=j.invert(H),Z=typeof M=="function"?M.apply(this,arguments):M;return r(b(v(j,Z),H,X),V,o)},k,N)},p.translateBy=function(w,M,k,N){p.transform(w,function(){return r(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof k=="function"?k.apply(this,arguments):k),e.apply(this,arguments),o)},null,N)},p.translateTo=function(w,M,k,N,V){p.transform(w,function(){var j=e.apply(this,arguments),H=this.__zoom,X=N==null?x(j):typeof N=="function"?N.apply(this,arguments):N;return r(cn.translate(X[0],X[1]).scale(H.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof k=="function"?-k.apply(this,arguments):-k),j,o)},N,V)};function v(w,M){return M=Math.max(s[0],Math.min(s[1],M)),M===w.k?w:new Yt(M,w.x,w.y)}function b(w,M,k){var N=M[0]-k[0]*w.k,V=M[1]-k[1]*w.k;return N===w.x&&V===w.y?w:new Yt(w.k,N,V)}function x(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function E(w,M,k,N){w.on("start.zoom",function(){y(this,arguments).event(N).start()}).on("interrupt.zoom end.zoom",function(){y(this,arguments).event(N).end()}).tween("zoom",function(){var V=this,j=arguments,H=y(V,j).event(N),X=e.apply(V,j),Z=k==null?x(X):typeof k=="function"?k.apply(V,j):k,$=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),at=V.__zoom,st=typeof M=="function"?M.apply(V,j):M,ot=u(at.invert(Z).concat($/at.k),st.invert(Z).concat($/st.k));return function(Q){if(Q===1)Q=st;else{var kt=ot(Q),ht=$/kt[2];Q=new Yt(ht,Z[0]-kt[0]*ht,Z[1]-kt[1]*ht)}H.zoom(null,Q)}})}function y(w,M,k){return!k&&w.__zooming||new A(w,M)}function A(w,M){this.that=w,this.args=M,this.active=0,this.sourceEvent=null,this.extent=e.apply(w,M),this.taps=0}A.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active==1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,M){return this.mouse&&w!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active==0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var M=Ot(this.that).datum();a.call(w,this.that,new nc(w,{sourceEvent:this.sourceEvent,target:p,type:w,transform:this.that.__zoom,dispatch:a}),M)}};function R(w,...M){if(!t.apply(this,arguments))return;var k=y(this,M).event(w),N=this.__zoom,V=Math.max(s[0],Math.min(s[1],N.k*Math.pow(2,n.apply(this,arguments)))),j=re(w);if(k.wheel)(k.mouse[0][0]!==j[0]||k.mouse[0][1]!==j[1])&&(k.mouse[1]=N.invert(k.mouse[0]=j)),clearTimeout(k.wheel);else{if(N.k===V)return;k.mouse=[j,N.invert(j)],un(this),k.start()}Ve(w),k.wheel=setTimeout(H,_),k.zoom("mouse",r(b(v(N,V),k.mouse[0],k.mouse[1]),k.extent,o));function H(){k.wheel=null,k.end()}}function D(w,...M){if(h||!t.apply(this,arguments))return;var k=w.currentTarget,N=y(this,M,!0).event(w),V=Ot(w.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",$,!0),j=re(w,k),H=w.clientX,X=w.clientY;lu(w.view),Un(w),N.mouse=[j,this.__zoom.invert(j)],un(this),N.start();function Z(at){if(Ve(at),!N.moved){var st=at.clientX-H,ot=at.clientY-X;N.moved=st*st+ot*ot>m}N.event(at).zoom("mouse",r(b(N.that.__zoom,N.mouse[0]=re(at,k),N.mouse[1]),N.extent,o))}function $(at){V.on("mousemove.zoom mouseup.zoom",null),uu(at.view,N.moved),Ve(at),N.event(at).end()}}function U(w,...M){if(!!t.apply(this,arguments)){var k=this.__zoom,N=re(w.changedTouches?w.changedTouches[0]:w,this),V=k.invert(N),j=k.k*(w.shiftKey?.5:2),H=r(b(v(k,j),N,V),e.apply(this,M),o);Ve(w),l>0?Ot(this).transition().duration(l).call(E,H,N,w):Ot(this).call(p.transform,H,N,w)}}function J(w,...M){if(!!t.apply(this,arguments)){var k=w.touches,N=k.length,V=y(this,M,w.changedTouches.length===N).event(w),j,H,X,Z;for(Un(w),H=0;H<N;++H)X=k[H],Z=re(X,this),Z=[Z,this.__zoom.invert(Z),X.identifier],V.touch0?!V.touch1&&V.touch0[2]!==Z[2]&&(V.touch1=Z,V.taps=0):(V.touch0=Z,j=!0,V.taps=1+!!f);f&&(f=clearTimeout(f)),j&&(V.taps<2&&(c=Z[0],f=setTimeout(function(){f=null},d)),un(this),V.start())}}function z(w,...M){if(!!this.__zooming){var k=y(this,M).event(w),N=w.changedTouches,V=N.length,j,H,X,Z;for(Ve(w),j=0;j<V;++j)H=N[j],X=re(H,this),k.touch0&&k.touch0[2]===H.identifier?k.touch0[0]=X:k.touch1&&k.touch1[2]===H.identifier&&(k.touch1[0]=X);if(H=k.that.__zoom,k.touch1){var $=k.touch0[0],at=k.touch0[1],st=k.touch1[0],ot=k.touch1[1],Q=(Q=st[0]-$[0])*Q+(Q=st[1]-$[1])*Q,kt=(kt=ot[0]-at[0])*kt+(kt=ot[1]-at[1])*kt;H=v(H,Math.sqrt(Q/kt)),X=[($[0]+st[0])/2,($[1]+st[1])/2],Z=[(at[0]+ot[0])/2,(at[1]+ot[1])/2]}else if(k.touch0)X=k.touch0[0],Z=k.touch0[1];else return;k.zoom("touch",r(b(H,X,Z),k.extent,o))}}function C(w,...M){if(!!this.__zooming){var k=y(this,M).event(w),N=w.changedTouches,V=N.length,j,H;for(Un(w),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),j=0;j<V;++j)H=N[j],k.touch0&&k.touch0[2]===H.identifier?delete k.touch0:k.touch1&&k.touch1[2]===H.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(H=re(H,this),Math.hypot(c[0]-H[0],c[1]-H[1])<g)){var X=Ot(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return p.wheelDelta=function(w){return arguments.length?(n=typeof w=="function"?w:fn(+w),p):n},p.filter=function(w){return arguments.length?(t=typeof w=="function"?w:fn(!!w),p):t},p.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:fn(!!w),p):i},p.extent=function(w){return arguments.length?(e=typeof w=="function"?w:fn([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),p):e},p.scaleExtent=function(w){return arguments.length?(s[0]=+w[0],s[1]=+w[1],p):[s[0],s[1]]},p.translateExtent=function(w){return arguments.length?(o[0][0]=+w[0][0],o[1][0]=+w[1][0],o[0][1]=+w[0][1],o[1][1]=+w[1][1],p):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},p.constrain=function(w){return arguments.length?(r=w,p):r},p.duration=function(w){return arguments.length?(l=+w,p):l},p.interpolate=function(w){return arguments.length?(u=w,p):u},p.on=function(){var w=a.on.apply(a,arguments);return w===a?p:w},p.clickDistance=function(w){return arguments.length?(m=(w=+w)*w,p):Math.sqrt(m)},p.tapDistance=function(w){return arguments.length?(g=+w,p):g},p}var uc=Object.create,Ki=Object.defineProperty,fc=Object.getOwnPropertyDescriptor,cc=Object.getOwnPropertyNames,hc=Object.getPrototypeOf,dc=Object.prototype.hasOwnProperty,it=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),pc=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of cc(e))!dc.call(t,i)&&i!==r&&Ki(t,i,{get:()=>e[i],enumerable:!(n=fc(e,i))||n.enumerable});return t},hn=(t,e,r)=>(r=t!=null?uc(hc(t)):{},pc(e||!t||!t.__esModule?Ki(r,"default",{value:t,enumerable:!0}):r,t)),Zi=it((t,e)=>{var r=function(i,s){return i<s};function n(i){if(!(this instanceof n))return new n(i);this.array=[],this.size=0,this.compare=i||r}n.prototype.clone=function(){var i=new n(this.compare);return i.size=this.size,i.array=this.array.slice(0,this.size),i},n.prototype.add=function(i){var s=this.size;this.array[this.size]=i,this.size+=1;for(var o,l;s>0&&(o=s-1>>1,l=this.array[o],!!this.compare(i,l));)this.array[s]=l,s=o;this.array[s]=i},n.prototype.heapify=function(i){this.array=i,this.size=i.length;var s;for(s=this.size>>1;s>=0;s--)this._percolateDown(s)},n.prototype._percolateUp=function(i,s){for(var o=this.array[i],l,u;i>0&&(l=i-1>>1,u=this.array[l],!(!s&&!this.compare(o,u)));)this.array[i]=u,i=l;this.array[i]=o},n.prototype._percolateDown=function(i){for(var s=this.size,o=this.size>>>1,l=this.array[i],u,a,f;i<o&&(u=(i<<1)+1,a=u+1,f=this.array[u],a<s&&this.compare(this.array[a],f)&&(u=a,f=this.array[a]),!!this.compare(f,l));)this.array[i]=f,i=u;this.array[i]=l},n.prototype._removeAt=function(i){if(!(i>this.size-1||i<0))return this._percolateUp(i,!0),this.poll()},n.prototype.remove=function(i){for(var s=0;s<this.size;s++)if(!this.compare(this.array[s],i)&&!this.compare(i,this.array[s]))return this._removeAt(s),!0;return!1},n.prototype.removeOne=function(i){if(typeof i=="function"){for(var s=0;s<this.size;s++)if(i(this.array[s]))return this._removeAt(s)}},n.prototype.removeMany=function(i,s){if(typeof i!="function"||this.size<1)return[];s=s?Math.min(s,this.size):this.size;for(var o=0,l=new Array(s),u=0,a=new Array(this.size);o<s&&!this.isEmpty();){var f=this.poll();i(f)?l[o++]=f:a[u++]=f}l.length=o;for(var c=0;c<u;)this.add(a[c++]);return l},n.prototype.peek=function(){if(this.size!=0)return this.array[0]},n.prototype.poll=function(){if(this.size!=0){var i=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,i}},n.prototype.replaceTop=function(i){if(this.size!=0){var s=this.array[0];return this.array[0]=i,this._percolateDown(0),s}},n.prototype.trim=function(){this.array=this.array.slice(0,this.size)},n.prototype.isEmpty=function(){return this.size===0},n.prototype.forEach=function(i){if(!(this.isEmpty()||typeof i!="function"))for(var s=0,o=this.clone();!o.isEmpty();)i(o.poll(),s++)},n.prototype.kSmallest=function(i){if(this.size==0)return[];i=Math.min(this.size,i);var s=new n(this.compare);let o=Math.min((i>0?Math.pow(2,i-1):0)+1,this.size);s.size=o,s.array=this.array.slice(0,o);for(var l=new Array(i),u=0;u<i;u++)l[u]=s.poll();return l},e.exports=n}),Qi=it((t,e)=>{function r(n,i,s,o){this.feasible=s,this.evaluation=i,this.bounded=o,this._tableau=n}e.exports=r,r.prototype.generateSolutionSet=function(){for(var n={},i=this._tableau,s=i.varIndexByRow,o=i.variablesPerIndex,l=i.matrix,u=i.rhsColumn,a=i.height-1,f=Math.round(1/i.precision),c=1;c<=a;c+=1){var h=s[c],d=o[h];if(!(d===void 0||d.isSlack===!0)){var _=l[c][u];n[d.id]=Math.round((Number.EPSILON+_)*f)/f}}return n}}),gc=it((t,e)=>{var r=Qi();function n(i,s,o,l,u){r.call(this,i,s,o,l),this.iter=u}e.exports=n,n.prototype=Object.create(r.prototype),n.constructor=n}),Ut=it((t,e)=>{var r=Qi(),n=gc();function i(o){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=o||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}e.exports=i,i.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()};function s(o,l){this.priority=o,this.reducedCosts=new Array(l);for(var u=0;u<l;u+=1)this.reducedCosts[u]=0}s.prototype.copy=function(){var o=new s(this.priority,this.reducedCosts.length);return o.reducedCosts=this.reducedCosts.slice(),o},i.prototype.setOptionalObjective=function(o,l,u){var a=this.objectivesByPriority[o];if(a===void 0){var f=Math.max(this.width,l+1);a=new s(o,f),this.objectivesByPriority[o]=a,this.optionalObjectives.push(a),this.optionalObjectives.sort(function(c,h){return c.priority-h.priority})}a.reducedCosts[l]=u},i.prototype.initialize=function(o,l,u,a){this.variables=u,this.unrestrictedVars=a,this.width=o,this.height=l;for(var f=new Array(o),c=0;c<o;c++)f[c]=0;this.matrix=new Array(l);for(var h=0;h<l;h++)this.matrix[h]=f.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=o+l-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},i.prototype._resetMatrix=function(){var o=this.model.variables,l=this.model.constraints,u=o.length,a=l.length,f,c,h=this.matrix[0],d=this.model.isMinimization===!0?-1:1;for(f=0;f<u;f+=1){var _=o[f],m=_.priority,g=d*_.cost;m===0?h[f+1]=g:this.setOptionalObjective(m,f+1,g),c=o[f].index,this.rowByVarIndex[c]=-1,this.colByVarIndex[c]=f+1,this.varIndexByCol[f+1]=c}for(var p=1,v=0;v<a;v+=1){var b=l[v],x=b.index;this.rowByVarIndex[x]=p,this.colByVarIndex[x]=-1,this.varIndexByRow[p]=x;var E,y,A,R=b.terms,D=R.length,U=this.matrix[p++];if(b.isUpperBound){for(E=0;E<D;E+=1)y=R[E],A=this.colByVarIndex[y.variable.index],U[A]=y.coefficient;U[0]=b.rhs}else{for(E=0;E<D;E+=1)y=R[E],A=this.colByVarIndex[y.variable.index],U[A]=-y.coefficient;U[0]=-b.rhs}}},i.prototype.setModel=function(o){this.model=o;var l=o.nVariables+1,u=o.nConstraints+1;return this.initialize(l,u,o.variables,o.unrestrictedVariables),this._resetMatrix(),this},i.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var o=this.lastElementIndex;return this.lastElementIndex+=1,o},i.prototype.density=function(){for(var o=0,l=this.matrix,u=0;u<this.height;u++)for(var a=l[u],f=0;f<this.width;f++)a[f]!==0&&(o+=1);return o/(this.height*this.width)},i.prototype.setEvaluation=function(){var o=Math.round(1/this.precision),l=this.matrix[this.costRowIndex][this.rhsColumn],u=Math.round((Number.EPSILON+l)*o)/o;this.evaluation=u,this.simplexIters===0&&(this.bestPossibleEval=u)},i.prototype.getSolution=function(){var o=this.model.isMinimization===!0?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new n(this,o,this.feasible,this.bounded,this.branchAndCutIterations):new r(this,o,this.feasible,this.bounded)}}),mc=it(()=>{var t=Ut();t.prototype.simplex=function(){return this.bounded=!0,this.phase1(),this.feasible===!0&&this.phase2(),this},t.prototype.phase1=function(){for(var r=this.model.checkForCycles,n=[],i=this.matrix,s=this.rhsColumn,o=this.width-1,l=this.height-1,u,a=0;;){for(var f=0,c=-this.precision,h=1;h<=l;h++){u=this.unrestrictedVars[this.varIndexByRow[h]]===!0;var d=i[h][s];d<c&&(c=d,f=h)}if(f===0)return this.feasible=!0,a;for(var _=0,m=-1/0,g=i[0],p=i[f],v=1;v<=o;v++){var b=p[v];if(u=this.unrestrictedVars[this.varIndexByCol[v]]===!0,u||b<-this.precision){var x=-g[v]/b;m<x&&(m=x,_=v)}}if(_===0)return this.feasible=!1,a;if(r){n.push([this.varIndexByRow[f],this.varIndexByCol[_]]);var E=this.checkForCycles(n);if(E.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+E[0]),this.model.messages.push("Length :"+E[1]),this.feasible=!1,a}this.pivot(f,_),a+=1}},t.prototype.phase2=function(){for(var r=this.model.checkForCycles,n=[],i=this.matrix,s=this.rhsColumn,o=this.width-1,l=this.height-1,u=this.precision,a=this.optionalObjectives.length,f=null,c=0,h,d;;){var _=i[this.costRowIndex];a>0&&(f=[]);for(var m=0,g=u,p=!1,v=1;v<=o;v++){if(h=_[v],d=this.unrestrictedVars[this.varIndexByCol[v]]===!0,a>0&&-u<h&&h<u){f.push(v);continue}if(d&&h<0){-h>g&&(g=-h,m=v,p=!0);continue}h>g&&(g=h,m=v,p=!1)}if(a>0)for(var b=0;m===0&&f.length>0&&b<a;){var x=[],E=this.optionalObjectives[b].reducedCosts;g=u;for(var y=0;y<f.length;y++){if(v=f[y],h=E[v],d=this.unrestrictedVars[this.varIndexByCol[v]]===!0,-u<h&&h<u){x.push(v);continue}if(d&&h<0){-h>g&&(g=-h,m=v,p=!0);continue}h>g&&(g=h,m=v,p=!1)}f=x,b+=1}if(m===0)return this.setEvaluation(),this.simplexIters+=1,c;for(var A=0,R=1/0,D=this.varIndexByRow,U=1;U<=l;U++){var J=i[U],z=J[s],C=J[m];if(!(-u<C&&C<u)){if(C>0&&u>z&&z>-u){R=0,A=U;break}var w=p?-z/C:z/C;w>u&&R>w&&(R=w,A=U)}}if(R===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[m],c;if(r){n.push([this.varIndexByRow[A],this.varIndexByCol[m]]);var M=this.checkForCycles(n);if(M.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+M[0]),this.model.messages.push("Length :"+M[1]),this.feasible=!1,c}this.pivot(A,m,!0),c+=1}};var e=[];t.prototype.pivot=function(r,n){var i=this.matrix,s=i[r][n],o=this.height-1,l=this.width-1,u=this.varIndexByRow[r],a=this.varIndexByCol[n];this.varIndexByRow[r]=a,this.varIndexByCol[n]=u,this.rowByVarIndex[a]=r,this.rowByVarIndex[u]=-1,this.colByVarIndex[a]=-1,this.colByVarIndex[u]=n;for(var f=i[r],c=0,h=0;h<=l;h++)f[h]>=-1e-16&&f[h]<=1e-16?f[h]=0:(f[h]/=s,e[c]=h,c+=1);f[n]=1/s;for(var d,_,m,g=this.precision,p=0;p<=o;p++)if(p!==r&&!(i[p][n]>=-1e-16&&i[p][n]<=1e-16)){var v=i[p];if(d=v[n],d>=-1e-16&&d<=1e-16)d!==0&&(v[n]=0);else{for(_=0;_<c;_++)h=e[_],m=f[h],m>=-1e-16&&m<=1e-16?m!==0&&(f[h]=0):v[h]=v[h]-d*m;v[n]=-d/s}}var b=this.optionalObjectives.length;if(b>0)for(var x=0;x<b;x+=1){var E=this.optionalObjectives[x].reducedCosts;if(d=E[n],d!==0){for(_=0;_<c;_++)h=e[_],m=f[h],m!==0&&(E[h]=E[h]-d*m);E[n]=-d/s}}},t.prototype.checkForCycles=function(r){for(var n=0;n<r.length-1;n++)for(var i=n+1;i<r.length;i++){var s=r[n],o=r[i];if(s[0]===o[0]&&s[1]===o[1]){if(i-n>r.length-i)break;for(var l=!0,u=1;u<i-n;u++){var a=r[n+u],f=r[i+u];if(a[0]!==f[0]||a[1]!==f[1]){l=!1;break}}if(l)return[n,i-n]}}return[]}}),Hn=it((t,e)=>{function r(a,f,c,h){this.id=a,this.cost=f,this.index=c,this.value=0,this.priority=h}function n(a,f,c,h){r.call(this,a,f,c,h)}n.prototype.isInteger=!0;function i(a,f){r.call(this,a,0,f,0)}i.prototype.isSlack=!0;function s(a,f){this.variable=a,this.coefficient=f}function o(a,f,c){return c===0||c==="required"?null:(f=f||1,c=c||1,a.isMinimization===!1&&(f=-f),a.addVariable(f,"r"+a.relaxationIndex++,!1,!1,c))}function l(a,f,c,h){this.slack=new i("s"+c,c),this.index=c,this.model=h,this.rhs=a,this.isUpperBound=f,this.terms=[],this.termsByVarIndex={},this.relaxation=null}l.prototype.addTerm=function(a,f){var c=f.index,h=this.termsByVarIndex[c];if(h===void 0)h=new s(f,a),this.termsByVarIndex[c]=h,this.terms.push(h),this.isUpperBound===!0&&(a=-a),this.model.updateConstraintCoefficient(this,f,a);else{var d=h.coefficient+a;this.setVariableCoefficient(d,f)}return this},l.prototype.removeTerm=function(a){return this},l.prototype.setRightHandSide=function(a){if(a!==this.rhs){var f=a-this.rhs;this.isUpperBound===!0&&(f=-f),this.rhs=a,this.model.updateRightHandSide(this,f)}return this},l.prototype.setVariableCoefficient=function(a,f){var c=f.index;if(c===-1){console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");return}var h=this.termsByVarIndex[c];if(h===void 0)this.addTerm(a,f);else if(a!==h.coefficient){var d=a-h.coefficient;this.isUpperBound===!0&&(d=-d),h.coefficient=a,this.model.updateConstraintCoefficient(this,f,d)}return this},l.prototype.relax=function(a,f){this.relaxation=o(this.model,a,f),this._relax(this.relaxation)},l.prototype._relax=function(a){a!==null&&(this.isUpperBound?this.setVariableCoefficient(-1,a):this.setVariableCoefficient(1,a))};function u(a,f){this.upperBound=a,this.lowerBound=f,this.model=a.model,this.rhs=a.rhs,this.relaxation=null}u.prototype.isEquality=!0,u.prototype.addTerm=function(a,f){return this.upperBound.addTerm(a,f),this.lowerBound.addTerm(a,f),this},u.prototype.removeTerm=function(a){return this.upperBound.removeTerm(a),this.lowerBound.removeTerm(a),this},u.prototype.setRightHandSide=function(a){this.upperBound.setRightHandSide(a),this.lowerBound.setRightHandSide(a),this.rhs=a},u.prototype.relax=function(a,f){this.relaxation=o(this.model,a,f),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},e.exports={Constraint:l,Variable:r,IntegerVariable:n,SlackVariable:i,Equality:u,Term:s}}),vc=it(()=>{var t=Ut(),e=Hn().SlackVariable;t.prototype.addCutConstraints=function(r){for(var n=r.length,i=this.height,s=i+n,o=i;o<s;o+=1)this.matrix[o]===void 0&&(this.matrix[o]=this.matrix[o-1].slice());this.height=s,this.nVars=this.width+this.height-2;for(var l,u=this.width-1,a=0;a<n;a+=1){var f=r[a],c=i+a,h=f.type==="min"?-1:1,d=f.varIndex,_=this.rowByVarIndex[d],m=this.matrix[c];if(_===-1){for(m[this.rhsColumn]=h*f.value,l=1;l<=u;l+=1)m[l]=0;m[this.colByVarIndex[d]]=h}else{var g=this.matrix[_],p=g[this.rhsColumn];for(m[this.rhsColumn]=h*(f.value-p),l=1;l<=u;l+=1)m[l]=-h*g[l]}var v=this.getNewElementIndex();this.varIndexByRow[c]=v,this.rowByVarIndex[v]=c,this.colByVarIndex[v]=-1,this.variablesPerIndex[v]=new e("s"+v,v),this.nVars+=1}},t.prototype._addLowerBoundMIRCut=function(r){if(r===this.costRowIndex)return!1;this.model;var n=this.matrix,i=this.variablesPerIndex[this.varIndexByRow[r]];if(!i.isInteger)return!1;var s=n[r][this.rhsColumn],o=s-Math.floor(s);if(o<this.precision||1-this.precision<o)return!1;var l=this.height;n[l]=n[l-1].slice(),this.height+=1,this.nVars+=1;var u=this.getNewElementIndex();this.varIndexByRow[l]=u,this.rowByVarIndex[u]=l,this.colByVarIndex[u]=-1,this.variablesPerIndex[u]=new e("s"+u,u),n[l][this.rhsColumn]=Math.floor(s);for(var a=1;a<this.varIndexByCol.length;a+=1){var f=this.variablesPerIndex[this.varIndexByCol[a]];if(!f.isInteger)n[l][a]=Math.min(0,n[r][a]/(1-o));else{var c=n[r][a],h=Math.floor(c)+Math.max(0,c-Math.floor(c)-o)/(1-o);n[l][a]=h}}for(var d=0;d<this.width;d+=1)n[l][d]-=n[r][d];return!0},t.prototype._addUpperBoundMIRCut=function(r){if(r===this.costRowIndex)return!1;this.model;var n=this.matrix,i=this.variablesPerIndex[this.varIndexByRow[r]];if(!i.isInteger)return!1;var s=n[r][this.rhsColumn],o=s-Math.floor(s);if(o<this.precision||1-this.precision<o)return!1;var l=this.height;n[l]=n[l-1].slice(),this.height+=1,this.nVars+=1;var u=this.getNewElementIndex();this.varIndexByRow[l]=u,this.rowByVarIndex[u]=l,this.colByVarIndex[u]=-1,this.variablesPerIndex[u]=new e("s"+u,u),n[l][this.rhsColumn]=-o;for(var a=1;a<this.varIndexByCol.length;a+=1){var f=this.variablesPerIndex[this.varIndexByCol[a]],c=n[r][a],h=c-Math.floor(c);f.isInteger?h<=o?n[l][a]=-h:n[l][a]=-(1-h)*o/h:c>=0?n[l][a]=-c:n[l][a]=c*o/(1-o)}return!0},t.prototype.applyMIRCuts=function(){}}),_c=it(()=>{var t=Ut();t.prototype._putInBase=function(e){var r=this.rowByVarIndex[e];if(r===-1){for(var n=this.colByVarIndex[e],i=1;i<this.height;i+=1){var s=this.matrix[i][n];if(s<-this.precision||this.precision<s){r=i;break}}this.pivot(r,n)}return r},t.prototype._takeOutOfBase=function(e){var r=this.colByVarIndex[e];if(r===-1){for(var n=this.rowByVarIndex[e],i=this.matrix[n],s=1;s<this.height;s+=1){var o=i[s];if(o<-this.precision||this.precision<o){r=s;break}}this.pivot(n,r)}return r},t.prototype.updateVariableValues=function(){for(var e=this.variables.length,r=Math.round(1/this.precision),n=0;n<e;n+=1){var i=this.variables[n],s=i.index,o=this.rowByVarIndex[s];if(o===-1)i.value=0;else{var l=this.matrix[o][this.rhsColumn];i.value=Math.round((l+Number.EPSILON)*r)/r}}},t.prototype.updateRightHandSide=function(e,r){var n=this.height-1,i=this.rowByVarIndex[e.index];if(i===-1){for(var s=this.colByVarIndex[e.index],o=0;o<=n;o+=1){var l=this.matrix[o];l[this.rhsColumn]-=r*l[s]}var u=this.optionalObjectives.length;if(u>0)for(var a=0;a<u;a+=1){var f=this.optionalObjectives[a].reducedCosts;f[this.rhsColumn]-=r*f[s]}}else this.matrix[i][this.rhsColumn]-=r},t.prototype.updateConstraintCoefficient=function(e,r,n){if(e.index===r.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var i=this._putInBase(e.index),s=this.colByVarIndex[r.index];if(s===-1)for(var o=this.rowByVarIndex[r.index],l=0;l<this.width;l+=1)this.matrix[i][l]+=n*this.matrix[o][l];else this.matrix[i][s]-=n},t.prototype.updateCost=function(e,r){var n=e.index,i=this.width-1,s=this.colByVarIndex[n];if(s===-1){var o=this.matrix[this.rowByVarIndex[n]],l;if(e.priority===0){var u=this.matrix[0];for(l=0;l<=i;l+=1)u[l]+=r*o[l]}else{var a=this.objectivesByPriority[e.priority].reducedCosts;for(l=0;l<=i;l+=1)a[l]+=r*o[l]}}else this.matrix[0][s]-=r},t.prototype.addConstraint=function(e){var r=e.isUpperBound?1:-1,n=this.height,i=this.matrix[n];i===void 0&&(i=this.matrix[0].slice(),this.matrix[n]=i);for(var s=this.width-1,o=0;o<=s;o+=1)i[o]=0;i[this.rhsColumn]=r*e.rhs;for(var l=e.terms,u=l.length,a=0;a<u;a+=1){var f=l[a],c=f.coefficient,h=f.variable.index,d=this.rowByVarIndex[h];if(d===-1)i[this.colByVarIndex[h]]+=r*c;else{var _=this.matrix[d];for(_[this.rhsColumn],o=0;o<=s;o+=1)i[o]-=r*c*_[o]}}var m=e.index;this.varIndexByRow[n]=m,this.rowByVarIndex[m]=n,this.colByVarIndex[m]=-1,this.height+=1},t.prototype.removeConstraint=function(e){var r=e.index,n=this.height-1,i=this._putInBase(r),s=this.matrix[n];this.matrix[n]=this.matrix[i],this.matrix[i]=s,this.varIndexByRow[i]=this.varIndexByRow[n],this.varIndexByRow[n]=-1,this.rowByVarIndex[r]=-1,this.availableIndexes[this.availableIndexes.length]=r,e.slack.index=-1,this.height-=1},t.prototype.addVariable=function(e){var r=this.height-1,n=this.width,i=this.model.isMinimization===!0?-e.cost:e.cost,s=e.priority,o=this.optionalObjectives.length;if(o>0)for(var l=0;l<o;l+=1)this.optionalObjectives[l].reducedCosts[n]=0;s===0?this.matrix[0][n]=i:(this.setOptionalObjective(s,n,i),this.matrix[0][n]=0);for(var u=1;u<=r;u+=1)this.matrix[u][n]=0;var a=e.index;this.varIndexByCol[n]=a,this.rowByVarIndex[a]=-1,this.colByVarIndex[a]=n,this.width+=1},t.prototype.removeVariable=function(e){var r=e.index,n=this._takeOutOfBase(r),i=this.width-1;if(n!==i){for(var s=this.height-1,o=0;o<=s;o+=1){var l=this.matrix[o];l[n]=l[i]}var u=this.optionalObjectives.length;if(u>0)for(var a=0;a<u;a+=1){var f=this.optionalObjectives[a].reducedCosts;f[n]=f[i]}var c=this.varIndexByCol[i];this.varIndexByCol[n]=c,this.colByVarIndex[c]=n}this.varIndexByCol[i]=-1,this.colByVarIndex[r]=-1,this.availableIndexes[this.availableIndexes.length]=r,e.index=-1,this.width-=1}}),bc=it(()=>{var t=Ut();t.prototype.log=function(e,r){console.log("****",e,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var n=5,i="",s=[" "],o,l,u,a,f,c,h,d,_,m,g;for(l=1;l<this.width;l+=1)f=this.varIndexByCol[l],a=this.variablesPerIndex[f],a===void 0?c="c"+f:c=a.id,h=c.length,d=" ",_="	",h>5?d+=" ":_+="	",s[l]=d,i+=_+c;console.log(i);var p,v=this.matrix[this.costRowIndex],b="	";for(o=1;o<this.width;o+=1)p="	",b+=p,b+=s[o],b+=v[o].toFixed(n);for(p="	",b+=p+s[0]+v[0].toFixed(n),console.log(b+"	Z"),u=1;u<this.height;u+=1){for(m=this.matrix[u],g="	",l=1;l<this.width;l+=1)p="	",g+=p+s[l]+m[l].toFixed(n);p="	",g+=p+s[0]+m[0].toFixed(n),f=this.varIndexByRow[u],a=this.variablesPerIndex[f],a===void 0?c="c"+f:c=a.id,console.log(g+"	"+c)}console.log("");var x=this.optionalObjectives.length;if(x>0){console.log("    Optional objectives:");for(var E=0;E<x;E+=1){var y=this.optionalObjectives[E].reducedCosts,A="";for(o=1;o<this.width;o+=1)p=y[o]<0?"":" ",A+=p,A+=s[o],A+=y[o].toFixed(n);p=y[0]<0?"":" ",A+=p+s[0]+y[0].toFixed(n),console.log(A+" z"+E)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this}}),yc=it(()=>{var t=Ut();t.prototype.copy=function(){var e=new t(this.precision);e.width=this.width,e.height=this.height,e.nVars=this.nVars,e.model=this.model,e.variables=this.variables,e.variablesPerIndex=this.variablesPerIndex,e.unrestrictedVars=this.unrestrictedVars,e.lastElementIndex=this.lastElementIndex,e.varIndexByRow=this.varIndexByRow.slice(),e.varIndexByCol=this.varIndexByCol.slice(),e.rowByVarIndex=this.rowByVarIndex.slice(),e.colByVarIndex=this.colByVarIndex.slice(),e.availableIndexes=this.availableIndexes.slice();for(var r=[],n=0;n<this.optionalObjectives.length;n++)r[n]=this.optionalObjectives[n].copy();e.optionalObjectives=r;for(var i=this.matrix,s=new Array(this.height),o=0;o<this.height;o++)s[o]=i[o].slice();return e.matrix=s,e},t.prototype.save=function(){this.savedState=this.copy()},t.prototype.restore=function(){if(this.savedState!==null){var e=this.savedState,r=e.matrix;this.nVars=e.nVars,this.model=e.model,this.variables=e.variables,this.variablesPerIndex=e.variablesPerIndex,this.unrestrictedVars=e.unrestrictedVars,this.lastElementIndex=e.lastElementIndex,this.width=e.width,this.height=e.height;var n,i;for(n=0;n<this.height;n+=1){var s=r[n],o=this.matrix[n];for(i=0;i<this.width;i+=1)o[i]=s[i]}var l=e.varIndexByRow;for(i=0;i<this.height;i+=1)this.varIndexByRow[i]=l[i];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var u=e.varIndexByCol;for(n=0;n<this.width;n+=1)this.varIndexByCol[n]=u[n];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var a=e.rowByVarIndex,f=e.colByVarIndex,c=0;c<this.nVars;c+=1)this.rowByVarIndex[c]=a[c],this.colByVarIndex[c]=f[c];if(e.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var h=0;h<e.optionalObjectives.length;h++){var d=e.optionalObjectives[h].copy();this.optionalObjectives[h]=d,this.optionalObjectivePerPriority[d.priority]=d}}}}}),wc=it(()=>{var t=Ut();function e(r,n){this.index=r,this.value=n}t.prototype.getMostFractionalVar=function(){for(var r=0,n=null,i=null,s=this.model.integerVariables,o=s.length,l=0;l<o;l++){var u=s[l].index,a=this.rowByVarIndex[u];if(a!==-1){var f=this.matrix[a][this.rhsColumn],c=Math.abs(f-Math.round(f));r<c&&(r=c,n=u,i=f)}}return new e(n,i)},t.prototype.getFractionalVarWithLowestCost=function(){for(var r=1/0,n=null,i=null,s=this.model.integerVariables,o=s.length,l=0;l<o;l++){var u=s[l],a=u.index,f=this.rowByVarIndex[a];if(f!==-1){var c=this.matrix[f][this.rhsColumn];if(Math.abs(c-Math.round(c))>this.precision){var h=u.cost;r>h&&(r=h,n=a,i=c)}}}return new e(n,i)}}),xc=it(()=>{var t=Ut();t.prototype.countIntegerValues=function(){for(var e=0,r=1;r<this.height;r+=1)if(this.variablesPerIndex[this.varIndexByRow[r]].isInteger){var n=this.matrix[r][this.rhsColumn];n=n-Math.floor(n),n<this.precision&&-n<this.precision&&(e+=1)}return e},t.prototype.isIntegral=function(){for(var e=this.model.integerVariables,r=e.length,n=0;n<r;n++){var i=this.rowByVarIndex[e[n].index];if(i!==-1){var s=this.matrix[i][this.rhsColumn];if(Math.abs(s-Math.round(s))>this.precision)return!1}}return!0},t.prototype.computeFractionalVolume=function(e){for(var r=-1,n=1;n<this.height;n+=1)if(this.variablesPerIndex[this.varIndexByRow[n]].isInteger){var i=this.matrix[n][this.rhsColumn];i=Math.abs(i);var s=Math.min(i-Math.floor(i),Math.floor(i+1));if(s<this.precision){if(!e)return 0}else r===-1?r=i:r*=i}return r===-1?0:r}}),Ic=it((t,e)=>{mc(),vc(),_c(),bc(),yc(),wc(),xc(),e.exports=Ut()}),$i=it(()=>{var t=Ut();function e(i,s,o){this.type=i,this.varIndex=s,this.value=o}function r(i,s){this.relaxedEvaluation=i,this.cuts=s}function n(i,s){return s.relaxedEvaluation-i.relaxedEvaluation}t.prototype.applyCuts=function(i){if(this.restore(),this.addCutConstraints(i),this.simplex(),this.model.useMIRCuts)for(var s=!0;s;){var o=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex();var l=this.computeFractionalVolume(!0);l>=.9*o&&(s=!1)}},t.prototype.branchAndCut=function(){var i=[],s=0,o=this.model.tolerance,l=!0,u=1e99;this.model.timeout&&(u=Date.now()+this.model.timeout);for(var a=1/0,f=null,c=[],h=0;h<this.optionalObjectives.length;h+=1)c.push(1/0);var d=new r(-1/0,[]),_;for(i.push(d);i.length>0&&l===!0&&Date.now()<u;)if(this.model.isMinimization?_=this.bestPossibleEval*(1+o):_=this.bestPossibleEval*(1-o),o>0&&a<_&&(l=!1),d=i.pop(),!(d.relaxedEvaluation>a)){var m=d.cuts;if(this.applyCuts(m),s++,this.feasible!==!1){var g=this.evaluation;if(!(g>a)){if(g===a){for(var p=!0,v=0;v<this.optionalObjectives.length&&!(this.optionalObjectives[v].reducedCosts[0]>c[v]);v+=1)if(this.optionalObjectives[v].reducedCosts[0]<c[v]){p=!1;break}if(p)continue}if(this.isIntegral()===!0){if(this.__isIntegral=!0,s===1){this.branchAndCutIterations=s;return}f=d,a=g;for(var b=0;b<this.optionalObjectives.length;b+=1)c[b]=this.optionalObjectives[b].reducedCosts[0]}else{s===1&&this.save();for(var x=this.getMostFractionalVar(),E=x.index,y=[],A=[],R=m.length,D=0;D<R;D+=1){var U=m[D];U.varIndex===E?U.type==="min"?A.push(U):y.push(U):(y.push(U),A.push(U))}var J=Math.ceil(x.value),z=Math.floor(x.value),C=new e("min",E,J);y.push(C);var w=new e("max",E,z);A.push(w),i.push(new r(g,y)),i.push(new r(g,A)),i.sort(n)}}}}f!==null&&this.applyCuts(f.cuts),this.branchAndCutIterations=s}}),kc=it((t,e)=>{var r=Ut();$i();var n=Hn(),i=n.Constraint,s=n.Equality,o=n.Variable,l=n.IntegerVariable;n.Term;function u(a,f){this.tableau=new r(a),this.name=f,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}e.exports=u,u.prototype.minimize=function(){return this.isMinimization=!0,this},u.prototype.maximize=function(){return this.isMinimization=!1,this},u.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var a=this.lastElementIndex;return this.lastElementIndex+=1,a},u.prototype._addConstraint=function(a){var f=a.slack;this.tableau.variablesPerIndex[f.index]=f,this.constraints.push(a),this.nConstraints+=1,this.tableauInitialized===!0&&this.tableau.addConstraint(a)},u.prototype.smallerThan=function(a){var f=new i(a,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(f),f},u.prototype.greaterThan=function(a){var f=new i(a,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(f),f},u.prototype.equal=function(a){var f=new i(a,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(f);var c=new i(a,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(c),new s(f,c)},u.prototype.addVariable=function(a,f,c,h,d){if(typeof d=="string")switch(d){case"required":d=0;break;case"strong":d=1;break;case"medium":d=2;break;case"weak":d=3;break;default:d=0;break}var _=this.tableau.getNewElementIndex();f==null&&(f="v"+_),a==null&&(a=0),d==null&&(d=0);var m;return c?(m=new l(f,a,_,d),this.integerVariables.push(m)):m=new o(f,a,_,d),this.variables.push(m),this.tableau.variablesPerIndex[_]=m,h&&(this.unrestrictedVariables[_]=!0),this.nVariables+=1,this.tableauInitialized===!0&&this.tableau.addVariable(m),m},u.prototype._removeConstraint=function(a){var f=this.constraints.indexOf(a);if(f===-1){console.warn("[Model.removeConstraint] Constraint not present in model");return}this.constraints.splice(f,1),this.nConstraints-=1,this.tableauInitialized===!0&&this.tableau.removeConstraint(a),a.relaxation&&this.removeVariable(a.relaxation)},u.prototype.removeConstraint=function(a){return a.isEquality?(this._removeConstraint(a.upperBound),this._removeConstraint(a.lowerBound)):this._removeConstraint(a),this},u.prototype.removeVariable=function(a){var f=this.variables.indexOf(a);if(f===-1){console.warn("[Model.removeVariable] Variable not present in model");return}return this.variables.splice(f,1),this.tableauInitialized===!0&&this.tableau.removeVariable(a),this},u.prototype.updateRightHandSide=function(a,f){return this.tableauInitialized===!0&&this.tableau.updateRightHandSide(a,f),this},u.prototype.updateConstraintCoefficient=function(a,f,c){return this.tableauInitialized===!0&&this.tableau.updateConstraintCoefficient(a,f,c),this},u.prototype.setCost=function(a,f){var c=a-f.cost;return this.isMinimization===!1&&(c=-c),f.cost=a,this.tableau.updateCost(f,c),this},u.prototype.loadJson=function(a){this.isMinimization=a.opType!=="max";for(var f=a.variables,c=a.constraints,h={},d={},_=Object.keys(c),m=_.length,g=0;g<m;g+=1){var p=_[g],v=c[p],b=v.equal,x=v.weight,E=v.priority,y=x!==void 0||E!==void 0,A,R;if(b===void 0){var D=v.min;D!==void 0&&(A=this.greaterThan(D),h[p]=A,y&&A.relax(x,E));var U=v.max;U!==void 0&&(R=this.smallerThan(U),d[p]=R,y&&R.relax(x,E))}else{A=this.greaterThan(b),h[p]=A,R=this.smallerThan(b),d[p]=R;var J=new s(A,R);y&&J.relax(x,E)}}var z=Object.keys(f),C=z.length;this.tolerance=a.tolerance||0,a.timeout&&(this.timeout=a.timeout),a.options&&(a.options.timeout&&(this.timeout=a.options.timeout),this.tolerance===0&&(this.tolerance=a.options.tolerance||0),a.options.useMIRCuts&&(this.useMIRCuts=a.options.useMIRCuts),typeof a.options.exitOnCycles>"u"?this.checkForCycles=!0:this.checkForCycles=a.options.exitOnCycles);for(var w=a.ints||{},M=a.binaries||{},k=a.unrestricted||{},N=a.optimize,V=0;V<C;V+=1){var j=z[V],H=f[j],X=H[N]||0,Z=!!M[j],$=!!w[j]||Z,at=!!k[j],st=this.addVariable(X,j,$,at);Z&&this.smallerThan(1).addTerm(1,st);var ot=Object.keys(H);for(g=0;g<ot.length;g+=1){var Q=ot[g];if(Q!==N){var kt=H[Q],ht=h[Q];ht!==void 0&&ht.addTerm(kt,st);var Tt=d[Q];Tt!==void 0&&Tt.addTerm(kt,st)}}}return this},u.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},u.prototype.solve=function(){return this.tableauInitialized===!1&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},u.prototype.isFeasible=function(){return this.tableau.feasible},u.prototype.save=function(){return this.tableau.save()},u.prototype.restore=function(){return this.tableau.restore()},u.prototype.activateMIRCuts=function(a){this.useMIRCuts=a},u.prototype.debug=function(a){this.checkForCycles=a},u.prototype.log=function(a){return this.tableau.log(a)}}),Ec=it(t=>{t.CleanObjectiveAttributes=function(e){var r,n,i;if(typeof e.optimize=="string")if(e.constraints[e.optimize]){r=Math.random();for(n in e.variables)e.variables[n][e.optimize]&&(e.variables[n][r]=e.variables[n][e.optimize]);return e.constraints[r]=e.constraints[e.optimize],delete e.constraints[e.optimize],e}else return e;else{for(i in e.optimize)if(e.constraints[i])if(e.constraints[i]==="equal")delete e.optimize[i];else{r=Math.random();for(n in e.variables)e.variables[n][i]&&(e.variables[n][r]=e.variables[n][i]);e.constraints[r]=e.constraints[i],delete e.constraints[i]}return e}}}),Jn=it((t,e)=>{function r(i){var s={is_blank:/^\W{0,}$/,is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},o={opType:"",optimize:"_obj",constraints:{},variables:{}},l={">=":"min","<=":"max","=":"equal"},u="",a=null,f="",c="",h="",d=0;typeof i=="string"&&(i=i.split(`
`));for(var _=0;_<i.length;_++)if(h="__"+_,u=i[_],a=null,s.is_objective.test(u))o.opType=u.match(/(max|min)/gi)[0],a=u.match(s.parse_lhs).map(function(p){return p.replace(/\s+/,"")}).slice(1),a.forEach(function(p){f=p.match(s.get_num),f===null?p.substr(0,1)==="-"?f=-1:f=1:f=f[0],f=parseFloat(f),c=p.match(s.get_word)[0].replace(/\;$/,""),o.variables[c]=o.variables[c]||{},o.variables[c]._obj=f});else if(s.is_int.test(u))a=u.match(s.parse_int).slice(1),o.ints=o.ints||{},a.forEach(function(p){p=p.replace(";",""),o.ints[p]=1});else if(s.is_bin.test(u))a=u.match(s.parse_bin).slice(1),o.binaries=o.binaries||{},a.forEach(function(p){p=p.replace(";",""),o.binaries[p]=1});else if(s.is_constraint.test(u)){var m=u.indexOf(":"),g=m===-1?u:u.slice(m+1);a=g.match(s.parse_lhs).map(function(p){return p.replace(/\s+/,"")}),a.forEach(function(p){f=p.match(s.get_num),f===null?p.substr(0,1)==="-"?f=-1:f=1:f=f[0],f=parseFloat(f),c=p.match(s.get_word)[0],o.variables[c]=o.variables[c]||{},o.variables[c][h]=f}),d=parseFloat(u.match(s.parse_rhs)[0]),u=l[u.match(s.parse_dir)[0]],o.constraints[h]=o.constraints[h]||{},o.constraints[h][u]=d}else s.is_unrestricted.test(u)&&(a=u.match(s.parse_int).slice(1),o.unrestricted=o.unrestricted||{},a.forEach(function(p){p=p.replace(";",""),o.unrestricted[p]=1}));return o}function n(i){if(!i)throw new Error("Solver requires a model to operate on");var s="",o={max:"<=",min:">=",equal:"="},l=new RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(i.opType){s+=i.opType+":";for(var u in i.variables)i.variables[u][u]=i.variables[u][u]?i.variables[u][u]:1,i.variables[u][i.optimize]&&(s+=" "+i.variables[u][i.optimize]+" "+u.replace(l,"_"))}else s+="max:";s+=`;

`;for(var a in i.constraints)for(var f in i.constraints[a])if(typeof o[f]<"u"){for(var c in i.variables)typeof i.variables[c][a]<"u"&&(s+=" "+i.variables[c][a]+" "+c.replace(l,"_"));s+=" "+o[f]+" "+i.constraints[a][f],s+=`;
`}if(i.ints){s+=`

`;for(var h in i.ints)s+="int "+h.replace(l,"_")+`;
`}if(i.unrestricted){s+=`

`;for(var d in i.unrestricted)s+="unrestricted "+d.replace(l,"_")+`;
`}return s}e.exports=function(i){return i.length?r(i):n(i)}}),Cc=it(()=>{}),Mc=it(()=>{}),Sc=it(t=>{t.reformat=Jn();function e(r){return r=r.replace("\\r\\n",`\r
`),r=r.split(`\r
`),r=r.filter(function(n){var i;return i=new RegExp(" 0$","gi"),!(i.test(n)===!0||(i=new RegExp("\\d$","gi"),i.test(n)===!1))}).map(function(n){return n.split(/\:{0,1} +(?=\d)/)}).reduce(function(n,i,s){return n[i[0]]=i[1],n},{}),r}t.solve=function(r){return new Promise(function(n,i){typeof window<"u"&&i("Function Not Available in Browser");var s=Jn()(r);r.external||i("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),r.external.binPath||i("No Executable | Binary path provided in arguments as 'binPath'"),r.external.args||i("No arguments array for cli | bash provided on 'args' attribute"),r.external.tempName||i("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on");var o=Cc();o.writeFile(r.external.tempName,s,function(l,u){if(l)i(l);else{var a=Mc().execFile;r.external.args.push(r.external.tempName),a(r.external.binPath,r.external.args,function(f,c){if(f)if(f.code===1)n(e(c));else{var h={"-2":"Out of Memory",1:"SUBOPTIMAL",2:"INFEASIBLE",3:"UNBOUNDED",4:"DEGENERATE",5:"NUMFAILURE",6:"USER-ABORT",7:"TIMEOUT",9:"PRESOLVED",25:"ACCURACY ERROR",255:"FILE-ERROR"},d={code:f.code,meaning:h[f.code],data:c};i(d)}else n(e(c))})}})})}}),zc=it((t,e)=>{e.exports={lpsolve:Sc()}}),ts=it((t,e)=>{e.exports=function(r,n){var i=n.optimize,s=JSON.parse(JSON.stringify(n.optimize)),o=Object.keys(n.optimize),l,u=0,a={},f="",c={},h=[],d,_,m,g;for(delete n.optimize,d=0;d<o.length;d++)s[o[d]]=0;for(d=0;d<o.length;d++){n.optimize=o[d],n.opType=i[o[d]],l=r.Solve(n,void 0,void 0,!0);for(g in o)if(!n.variables[o[g]]){l[o[g]]=l[o[g]]?l[o[g]]:0;for(m in n.variables)n.variables[m][o[g]]&&l[m]&&(l[o[g]]+=l[m]*n.variables[m][o[g]])}for(f="base",_=0;_<o.length;_++)l[o[_]]?f+="-"+(l[o[_]]*1e3|0)/1e3:f+="-0";if(!a[f]){for(a[f]=1,u++,_=0;_<o.length;_++)l[o[_]]&&(s[o[_]]+=l[o[_]]);delete l.feasible,delete l.result,h.push(l)}}for(d=0;d<o.length;d++)n.constraints[o[d]]={equal:s[o[d]]/u};n.optimize="cheater-"+Math.random(),n.opType="max";for(d in n.variables)n.variables[d].cheater=1;for(d in h)for(m in h[d])c[m]=c[m]||{min:1e99,max:-1e99};for(d in c)for(m in h)h[m][d]?(h[m][d]>c[d].max&&(c[d].max=h[m][d]),h[m][d]<c[d].min&&(c[d].min=h[m][d])):(h[m][d]=0,c[d].min=0);return l=r.Solve(n,void 0,void 0,!0),{midpoint:l,vertices:h,ranges:c}}}),Nc=it((t,e)=>{var r=Ic(),n=kc(),i=$i(),s=Hn(),o=Ec(),l=s.Constraint,u=s.Variable,a=s.Numeral,f=s.Term,c=zc(),h=function(){this.Model=n,this.branchAndCut=i,this.Constraint=l,this.Variable=u,this.Numeral=a,this.Term=f,this.Tableau=r,this.lastSolvedModel=null,this.External=c,this.Solve=function(d,_,m,g){if(g)for(var p in o)d=o[p](d);if(!d)throw new Error("Solver requires a model to operate on");if(typeof d.optimize=="object"&&Object.keys(d.optimize>1))return ts()(this,d);if(d.external){var v=Object.keys(c);if(v=JSON.stringify(v),!d.external.solver)throw new Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+v);if(!c[d.external.solver])throw new Error("No support (yet) for "+d.external.solver+". Please use one of these instead:"+v);return c[d.external.solver].solve(d)}else{d instanceof n||(d=new n(_).loadJson(d));var b=d.solve();if(this.lastSolvedModel=d,b.solutionSet=b.generateSolutionSet(),m)return b;var x={};return x.feasible=b.feasible,x.result=b.evaluation,x.bounded=b.bounded,b._tableau.__isIntegral&&(x.isIntegral=!0),Object.keys(b.solutionSet).forEach(function(E){b.solutionSet[E]!==0&&(x[E]=b.solutionSet[E])}),x}},this.ReformatLP=Jn(),this.MultiObjective=function(d){return ts()(this,d)}};typeof define=="function"?define([],function(){return new h}):typeof window=="object"?window.solver=new h:typeof self=="object"&&(self.solver=new h),e.exports=new h}),Bc=it((t,e)=>{var r=1e-60,n,i;do r+=r,n=1+.1*r,i=1+.2*r;while(n<=1||i<=1);e.exports=r}),Tc=it((t,e)=>{function r(n,i,s){let o,l;for(let u=1;u<=s;u+=1){n[u][u]=1/n[u][u],l=-n[u][u];for(let a=1;a<u;a+=1)n[a][u]*=l;if(o=u+1,s<o)break;for(let a=o;a<=s;a+=1){l=n[u][a],n[u][a]=0;for(let f=1;f<=u;f+=1)n[f][a]+=l*n[f][u]}}}e.exports=r}),Vc=it((t,e)=>{function r(n,i,s,o){let l,u;for(l=1;l<=s;l+=1){u=0;for(let a=1;a<l;a+=1)u+=n[a][l]*o[a];o[l]=(o[l]-u)/n[l][l]}for(let a=1;a<=s;a+=1){l=s+1-a,o[l]/=n[l][l],u=-o[l];for(let f=1;f<l;f+=1)o[f]+=u*n[f][l]}}e.exports=r}),jc=it((t,e)=>{function r(n,i,s,o){let l,u,a;for(let f=1;f<=s;f+=1){if(o[1]=f,a=0,l=f-1,l<1){if(a=n[f][f]-a,a<=0)break;n[f][f]=Math.sqrt(a)}else{for(let c=1;c<=l;c+=1){u=n[c][f];for(let h=1;h<c;h+=1)u-=n[h][f]*n[h][c];u/=n[c][c],n[c][f]=u,a+=u*u}if(a=n[f][f]-a,a<=0)break;n[f][f]=Math.sqrt(a)}o[1]=0}}e.exports=r}),Ac=it((t,e)=>{var r=Bc(),n=Tc(),i=Vc(),s=jc();function o(l,u,a,f,c,h,d,_,m,g,p,v,b,x=0,E,y,A){let R,D,U,J,z,C,w,M,k,N,V,j,H,X,Z=Math.min(f,p),$=2*f+Z*(Z+5)/2+2*p+1;for(let I=1;I<=f;I+=1)y[I]=u[I];for(let I=f+1;I<=$;I+=1)y[I]=0;for(let I=1;I<=p;I+=1)b[I]=0,h[I]=0;let at=[];if(A[1]===0){if(s(l,a,f,at),at[1]!==0){A[1]=2;return}i(l,a,f,u),n(l,a,f)}else{for(let I=1;I<=f;I+=1){c[I]=0;for(let Y=1;Y<=I;Y+=1)c[I]+=l[Y][I]*u[Y]}for(let I=1;I<=f;I+=1){u[I]=0;for(let Y=I;Y<=f;Y+=1)u[I]+=l[I][Y]*c[Y]}}d[1]=0;for(let I=1;I<=f;I+=1){c[I]=u[I],d[1]+=y[I]*c[I],y[I]=0;for(let Y=I+1;Y<=f;Y+=1)l[Y][I]=0}d[1]=-d[1]/2,A[1]=0;let st=f,ot=st+f,Q=ot+Z,kt=Q+Z+1,ht=kt+Z*(Z+1)/2,Tt=ht+p;for(let I=1;I<=p;I+=1){C=0;for(let Y=1;Y<=f;Y+=1)C+=_[Y][I]*_[Y][I];y[Tt+I]=Math.sqrt(C)}J=x,E[1]=0,E[2]=0;function Gt(){E[1]+=1,$=ht;for(let I=1;I<=p;I+=1){$+=1,C=-m[I];for(let Y=1;Y<=f;Y+=1)C+=_[Y][I]*c[Y];if(Math.abs(C)<r&&(C=0),I>v)y[$]=C;else if(y[$]=-Math.abs(C),C>0){for(let Y=1;Y<=f;Y+=1)_[Y][I]=-_[Y][I];m[I]=-m[I]}}for(let I=1;I<=J;I+=1)y[ht+b[I]]=0;U=0,z=0;for(let I=1;I<=p;I+=1)y[ht+I]<z*y[Tt+I]&&(U=I,z=y[ht+I]/y[Tt+I]);if(U===0){for(let I=1;I<=J;I+=1)h[b[I]]=y[Q+I];return 999}return 0}function Kt(){for(let I=1;I<=f;I+=1){C=0;for(let Y=1;Y<=f;Y+=1)C+=l[Y][I]*_[Y][U];y[I]=C}R=st;for(let I=1;I<=f;I+=1)y[R+I]=0;for(let I=J+1;I<=f;I+=1)for(let Y=1;Y<=f;Y+=1)y[R+Y]=y[R+Y]+l[Y][I]*y[I];j=!0;for(let I=J;I>=1;I-=1){C=y[I],$=kt+I*(I+3)/2,R=$-I;for(let Y=I+1;Y<=J;Y+=1)C-=y[$]*y[ot+Y],$+=Y;C/=y[R],y[ot+I]=C,!(b[I]<=v)&&(C<=0||(j=!1,D=I))}if(!j){w=y[Q+D]/y[ot+D];for(let I=1;I<=J;I+=1)b[I]<=v||y[ot+I]<=0||(z=y[Q+I]/y[ot+I],z<w&&(w=z,D=I))}C=0;for(let I=st+1;I<=st+f;I+=1)C+=y[I]*y[I];if(Math.abs(C)<=r){if(j)return A[1]=1,999;for(let I=1;I<=J;I+=1)y[Q+I]=y[Q+I]-w*y[ot+I];return y[Q+J+1]=y[Q+J+1]+w,700}C=0;for(let I=1;I<=f;I+=1)C+=y[st+I]*_[I][U];M=-y[ht+U]/C,H=!0,j||w<M&&(M=w,H=!1);for(let I=1;I<=f;I+=1)c[I]+=M*y[st+I],Math.abs(c[I])<r&&(c[I]=0);d[1]+=M*C*(M/2+y[Q+J+1]);for(let I=1;I<=J;I+=1)y[Q+I]=y[Q+I]-M*y[ot+I];if(y[Q+J+1]=y[Q+J+1]+M,H){J+=1,b[J]=U,$=kt+(J-1)*J/2+1;for(let I=1;I<=J-1;I+=1)y[$]=y[I],$+=1;if(J===f)y[$]=y[f];else{for(let I=f;I>=J+1;I-=1)if(y[I]!==0&&(k=Math.max(Math.abs(y[I-1]),Math.abs(y[I])),N=Math.min(Math.abs(y[I-1]),Math.abs(y[I])),y[I-1]>=0?z=Math.abs(k*Math.sqrt(1+N*N/(k*k))):z=-Math.abs(k*Math.sqrt(1+N*N/(k*k))),k=y[I-1]/z,N=y[I]/z,k!==1))if(k===0){y[I-1]=N*z;for(let Y=1;Y<=f;Y+=1)z=l[Y][I-1],l[Y][I-1]=l[Y][I],l[Y][I]=z}else{y[I-1]=z,V=N/(1+k);for(let Y=1;Y<=f;Y+=1)z=k*l[Y][I-1]+N*l[Y][I],l[Y][I]=V*(l[Y][I-1]+z)-l[Y][I],l[Y][I-1]=z}y[$]=y[J]}}else{C=-m[U];for(let I=1;I<=f;I+=1)C+=c[I]*_[I][U];if(U>v)y[ht+U]=C;else if(y[ht+U]=-Math.abs(C),C>0){for(let I=1;I<=f;I+=1)_[I][U]=-_[I][U];m[U]=-m[U]}return 700}return 0}function Zt(){if($=kt+D*(D+1)/2+1,R=$+D,y[R]===0||(k=Math.max(Math.abs(y[R-1]),Math.abs(y[R])),N=Math.min(Math.abs(y[R-1]),Math.abs(y[R])),y[R-1]>=0?z=Math.abs(k*Math.sqrt(1+N*N/(k*k))):z=-Math.abs(k*Math.sqrt(1+N*N/(k*k))),k=y[R-1]/z,N=y[R]/z,k===1))return 798;if(k===0){for(let I=D+1;I<=J;I+=1)z=y[R-1],y[R-1]=y[R],y[R]=z,R+=I;for(let I=1;I<=f;I+=1)z=l[I][D],l[I][D]=l[I][D+1],l[I][D+1]=z}else{V=N/(1+k);for(let I=D+1;I<=J;I+=1)z=k*y[R-1]+N*y[R],y[R]=V*(y[R-1]+z)-y[R],y[R-1]=z,R+=I;for(let I=1;I<=f;I+=1)z=k*l[I][D]+N*l[I][D+1],l[I][D+1]=V*(l[I][D]+z)-l[I][D+1],l[I][D]=z}return 0}function ye(){R=$-D;for(let I=1;I<=D;I+=1)y[R]=y[$],$+=1,R+=1;return y[Q+D]=y[Q+D+1],b[D]=b[D+1],D+=1,D<J?797:0}function er(){return y[Q+J]=y[Q+J+1],y[Q+J+1]=0,b[J]=0,J-=1,E[2]+=1,0}for(X=0;;){if(X=Gt(),X===999)return;for(;X=Kt(),X!==0;){if(X===999)return;if(X===700)if(D===J)er();else{for(;Zt(),X=ye(),X===797;);er()}}}}e.exports=o}),Rc=it(t=>{var e=Ac();function r(n,i,s,o=[],l=0,u=[0,0]){let a=[],f=[],c=[],h=[],d=[],_=[],m="",g=n.length-1,p=s[1].length-1;if(!o)for(let x=1;x<=p;x+=1)o[x]=0;if(g!==n[1].length-1&&(m="Dmat is not symmetric!"),g!==i.length-1&&(m="Dmat and dvec are incompatible!"),g!==s.length-1&&(m="Amat and dvec are incompatible!"),p!==o.length-1&&(m="Amat and bvec are incompatible!"),(l>p||l<0)&&(m="Value of meq is invalid!"),m!=="")return{message:m};for(let x=1;x<=p;x+=1)f[x]=0,h[x]=0;let v=0,b=Math.min(g,p);for(let x=1;x<=g;x+=1)c[x]=0;a[1]=0;for(let x=1;x<=2*g+b*(b+5)/2+2*p+1;x+=1)d[x]=0;for(let x=1;x<=2;x+=1)_[x]=0;return e(n,i,g,g,c,h,a,s,o,g,p,l,f,v,_,d,u),u[1]===1&&(m="constraints are inconsistent, no solution!"),u[1]===2&&(m="matrix D in quadratic function is not positive definite!"),{solution:c,Lagrangian:h,value:a,unconstrained_solution:i,iterations:_,iact:f,message:m}}t.solveQP=r}),Oc=it((t,e)=>{e.exports=Rc()});function*le(t){let e=0;for(let r of t)yield[e++,r]}function*Ht(t,e){for(let[r,n]of le(t))yield*e(n,r)}function es(t,e,r){let n=r;for(let[i,s]of le(t))n=e(n,s,i);return n}function*Jt(t,e){for(let[r,n]of le(t))yield e(n,r)}function*Dc(t,e){for(let[r,n]of le(t))e(n,r)&&(yield n)}function Wn(t,e){for(let[r,n]of le(t))if(e(n,r))return!0;return!1}function Pc(t,e){return!Wn(t,(r,n)=>!e(r,n))}function*Lc(t){for(let e=t.length;e!=0;)yield t[--e]}function Xn(t){if(!t)throw new Error("internal error: failed assert")}function Fc(t,e){e.size<t.size&&([e,t]=[t,e]);for(let r of t)if(e.has(r))return!0;return!1}function Yn(t){let{done:e,value:r}=t.values().next();if(!e)return t.delete(r),r}function Gn(t,e,r){let n=t.get(e);n===void 0?t.set(e,[r]):n.push(r)}function Kn(t,e,r){let n=t.get(e);n===void 0?t.set(e,new Set([r])):n.add(r)}function qc(){let t=new WeakSet;return(e,r)=>{if(typeof r=="object"&&r!==null){if(t.has(r))return"[circular]";t.add(r)}return r}}function At(t,...e){let[r,...n]=t;return[r].concat(...n.map((i,s)=>[JSON.stringify(e[s],qc()),i])).join("")}function*be(t){let[e,...r]=t;for(let n of r)yield[e,n],e=n}function*je(t,...e){let r=new Set,n;for(;(n=e.pop())!==void 0;)r.has(n)||(yield n,r.add(n),e.push(...t(n)))}hn(Zi());function Ae(t){let e=new Map;for(let r of t)for(let n of r.ichildren())Gn(e,n,r);return e}var Zn=class{constructor(t,e,r=[],n=!1){this.child=t,this.data=e,this.points=r,this.reversed=n}},Uc=class{constructor(t,e,r,n,i){this.source=t,this.target=e,this.data=r,this.points=n,this.reversed=i}},Re=class{constructor(t){t&&(this.proots=t)}[Symbol.iterator](){return this.idescendants()[Symbol.iterator]()}iroots(){return{[Symbol.iterator]:()=>this.proots[Symbol.iterator]()}}roots(){return[...this.iroots()]}*idepth(){yield*je(t=>t.ichildren(),...this.iroots())}*ibreadth(){let t=new Set,e=this.roots(),r=[];do{r=e.reverse(),e=[];let n;for(;n=r.pop();)t.has(n)||(t.add(n),yield n,e.push(...n.ichildren()))}while(e.length)}*ibefore(){let t=new Map;for(let n of this)for(let i of n.ichildren())t.set(i,(t.get(i)||0)+1);let e=this.roots(),r;for(;r=e.pop();){yield r;for(let n of r.ichildren()){let i=t.get(n);i>1?t.set(n,i-1):e.push(n)}}}*iafter(){let t=this.roots(),e=new Set,r;for(;r=t.pop();)e.has(r)||(Pc(r.ichildren(),n=>e.has(n))?(e.add(r),yield r):t.push(r,...r.ichildren()))}idescendants(t="depth"){if(t==="depth")return this.idepth();if(t==="breadth")return this.ibreadth();if(t==="before")return this.ibefore();if(t==="after")return this.iafter();throw new Error(`unknown iteration style: ${t}`)}descendants(t="depth"){return[...this.idescendants(t)]}ilinks(){return Ht(this,t=>t.ichildLinks())}links(){return[...this.ilinks()]}size(){return es(this,t=>t+1,0)}sum(t){let e=new Map;for(let[r,n]of le(this.idescendants("after"))){let i=t(n,r),s=new Map;s.set(n,i);for(let o of n.ichildren()){let l=e.get(o);for(let[u,a]of l.entries())s.set(u,a)}n.value=es(s.values(),(o,l)=>o+l,0),e.set(n,s)}return this}count(){let t=new Map;for(let e of this.idescendants("after"))if(e.ichildren()[Symbol.iterator]().next().done)t.set(e,new Set([e])),e.value=1;else{let r=new Set;for(let n of e.ichildren()){let i=t.get(n);for(let s of i)r.add(s)}t.set(e,r),e.value=r.size}return this}height(){for(let t of this.idescendants("after"))t.value=Math.max(0,...Jt(t.ichildren(),e=>e.value+1));return this}depth(){var e;let t=Ae(this);for(let r of this.idescendants("before"))r.value=Math.max(0,...Jt((e=t.get(r))!=null?e:[],n=>n.value+1));return this}*isplit(){let t=Ae(this);function*e(n){var i;yield*n.ichildren(),yield*(i=t.get(n))!=null?i:[]}let r=new Set(this.iroots());for(let n of this.iroots()){if(!r.delete(n))continue;let i=[n];for(let s of je(e,n))r.delete(s)&&i.push(s);yield i.length>1?new Re(i):i[0]}}split(){return[...this.isplit()]}connected(){let t=this.isplit()[Symbol.iterator]();t.next();let{done:e}=t.next();return!!e}multidag(){return this.pmultidag===void 0?this.pmultidag=Wn(this.iroots(),t=>t.multidag()):this.pmultidag}},ns=class extends Re{constructor(t){super();this.data=t,this.dataChildren=[]}childrenCountsMap(){var t;if(this.cachedChildrenCounts===void 0){let e=new Map;for(let{child:r}of this.dataChildren)e.set(r,((t=e.get(r))!=null?t:0)+1);return this.cachedChildrenCounts=e.size===this.dataChildren.length?null:e}else return this.cachedChildrenCounts}iroots(){let t=[this];return{[Symbol.iterator]:()=>t[Symbol.iterator]()}}nchildren(){var t,e;return(e=(t=this.childrenCountsMap())==null?void 0:t.size)!=null?e:this.dataChildren.length}nchildLinks(){return this.dataChildren.length}nchildLinksTo(t){var e,r;return(r=(e=this.childrenCountsMap())==null?void 0:e.get(t))!=null?r:1}*ichildren(){let t=this.childrenCountsMap();if(t===null)for(let{child:e}of this.dataChildren)yield e;else yield*t.keys()}children(){return[...this.ichildren()]}*ichildrenCounts(){let t=this.childrenCountsMap();if(t===null)for(let{child:e}of this.dataChildren)yield[e,1];else yield*t}childrenCounts(){return[...this.ichildrenCounts()]}*ichildLinks(){for(let{child:t,data:e,points:r,reversed:n}of this.dataChildren)yield new Uc(this,t,e,r,n)}childLinks(){return[...this.ichildLinks()]}isplit(){return this.iroots()}split(){return this.roots()}connected(){return!0}multidag(){return this.pmultidag===void 0?this.pmultidag=this.childrenCountsMap()!==null||Wn(this.ichildren(),t=>t.multidag()):this.pmultidag}};function Hc(t){if(typeof t!="string")throw new Error(`id is supposed to be string but got type ${typeof t}`);return t}function rs(t,e){if(!t.length)throw new Error("dag contained no roots; this often indicates a cycle");for(let o of new Re(t))for(let l of o.ichildren())if(l===o)throw new Error(At`node '${o.data}' contained a self loop`);if(!e)return;let r=new Set,n=new Set,i=null;function s(o){if(r.has(o))return[];if(n.has(o))return i=o,[o];{n.add(o);let l=[];for(let u of o.ichildren())if(l=s(u),l.length)break;return n.delete(o),r.add(o),l.length&&i!==null&&l.push(o),i===o&&(i=null),l}}for(let o of t){let l=s(o);if(l.length){let u=l.reverse().map(({data:a})=>At`'${a}'`).join(" -> ");throw new Error(`dag contained a cycle: ${u}`)}}}function Jc(t){return t&&Yn(t)}function is(t){var d,_,m;let e=new Map;for(let g of t)for(let{child:p}of g.dataChildren)Gn(e,p,g);let r=new Map(Jt(t,g=>{var p,v;return[g,{indeg:(v=(p=e.get(g))==null?void 0:p.length)!=null?v:0,outdeg:g.nchildLinks(),node:g}]})),n=Math.max(...Jt(Dc(r.values(),({indeg:g,outdeg:p})=>g>0&&p>0),({indeg:g,outdeg:p})=>p-g));if(n===-1/0){let g=[];for(let{indeg:p,node:v}of r.values())p===0&&g.push(v);return g}let i=new Set,s=new Set,o=new Map;for(let g of r.values()){let{outdeg:p,indeg:v}=g;if(v===0)i.add(g);else if(p===0)s.add(g);else{let b=p-v;Kn(o,b,g)}}let l=0,u=t.length,a=n,f=new Array(t.length);for(;l<u;){let g=(_=(d=Yn(i))!=null?d:Yn(s))!=null?_:Jc(o.get(a));if(g===void 0)--a;else{let{node:p,indeg:v,outdeg:b}=g,x=g.rank=v>0&&b===0?--u:l++;f[x]=p;for(let E of(m=e.get(p))!=null?m:[]){let y=r.get(E);if(y.rank===void 0&&y.indeg>0&&y.outdeg>0){let A=y.outdeg-y.indeg;o.get(A).delete(y),--y.outdeg,y.outdeg>0?Kn(o,A-1,y):s.add(y)}}for(let{child:E}of p.dataChildren){let y=r.get(E);if(!(y.rank!==void 0||y.indeg===0))if(y.outdeg===0)--y.indeg,y.indeg===0&&(s.delete(y),i.add(y));else{let A=y.outdeg-y.indeg;A===a&&++a,o.get(A).delete(y),--y.indeg,y.indeg===0?i.add(y):Kn(o,A+1,y)}}}}let c=[],h=new Set;for(let[g,p]of f.entries()){let v=[];for(let b of p.dataChildren){let x=r.get(b.child);x.rank<g?x.node.dataChildren.push(new Zn(p,b.data,b.points,!0)):v.push(b)}v.length===p.nchildLinks()&&!h.has(p)&&c.push(p);for(let{child:b}of v)h.add(b);p.dataChildren=v}return c}function Oe(t){function e(...o){var m;if(!o.length)throw new Error("must pass in at least one node");let l=new Map,u=[];function a(g){let p=l.get(g);return p===void 0&&(p=new ns(g),l.set(g,p),u.push(p)),p}let f=o.map(a),c,h=0;for(;c=u.pop();)c.dataChildren=((m=t.childrenData(c.data,h++))!=null?m:[]).map(([g,p])=>new Zn(a(g),p));let d=new Set(f);for(let g of l.values())for(let{child:p}of g.dataChildren)if(d.delete(p)&&t.roots)throw new Error(At`node '${g.data}' pointed to a root`);let _=t.decycle?is([...l.values()]):d.size?[...d]:f;return rs(_,!t.decycle),_.length>1?new Re(_):_[0]}function r(o){if(o===void 0)return t.children;{let l=t,{children:u,childrenData:a}=l,f=Et(l,["children","childrenData"]);return Oe(dt(ct({},f),{children:o,childrenData:ss(o)}))}}e.children=r;function n(o){if(o===void 0)return t.childrenData;{let l=t,{children:u,childrenData:a}=l,f=Et(l,["children","childrenData"]);return Oe(dt(ct({},f),{children:Wc(o),childrenData:o}))}}e.childrenData=n;function i(o){return o===void 0?t.roots:Oe(dt(ct({},t),{roots:o}))}e.roots=i;function s(o){return o===void 0?t.decycle:Oe(dt(ct({},t),{decycle:o}))}return e.decycle=s,e}function ss(t){function e(r,n){var i;return((i=t(r,n))!=null?i:[]).map(s=>[s,void 0])}return e.wrapped=t,e}function Wc(t){function e(r,n){var i;return((i=t(r,n))!=null?i:[]).map(([s])=>s)}return e.wrapped=t,e}function Xc(t){try{let e=t.children;return e===void 0||e instanceof Array}catch{return!1}}function os(t){if(Xc(t))return t.children;throw new Error(At`default children function expected datum to have a children field but got: ${t}`)}function Yc(...t){if(t.length)throw new Error(`got arguments to hierarchy(${t}), but constructor takes no arguments. These were probably meant as data which should be called as hierarchy()(...)`);return Oe({children:os,childrenData:ss(os),roots:!0,decycle:!1})}function De(t){function e(o){var f;if(!o.length)throw new Error("can't stratify empty data");let l=new Map;for(let[c,h]of o.entries()){let d=Hc(t.id(h,c)),_=(f=t.parentData(h,c))!=null?f:[],m=new ns(h);if(l.has(d))throw new Error(`found a duplicate id: ${r}`);l.set(d,[m,_])}let u=[];for(let[c,h]of l.values()){for(let[d,_]of h){let m=l.get(d);if(!m)throw new Error(`missing id: ${d}`);let[g]=m;g.dataChildren.push(new Zn(c,_))}h.length||u.push(c)}let a=t.decycle?is([...Jt(l.values(),([c])=>c)]):u;return rs(a,!t.decycle),a.length>1?new Re(a):a[0]}function r(o){if(o===void 0)return t.id;{let l=t,{id:u}=l,a=Et(l,["id"]);return De(dt(ct({},a),{id:o}))}}e.id=r;function n(o){if(o===void 0)return t.parentData;{let l=t,{parentIds:u,parentData:a}=l,f=Et(l,["parentIds","parentData"]);return De(dt(ct({},f),{parentIds:Gc(o),parentData:o}))}}e.parentData=n;function i(o){if(o===void 0)return t.parentIds;{let l=t,{parentIds:u,parentData:a}=l,f=Et(l,["parentIds","parentData"]);return De(dt(ct({},f),{parentIds:o,parentData:as(o)}))}}e.parentIds=i;function s(o){return o===void 0?t.decycle:De(dt(ct({},t),{decycle:o}))}return e.decycle=s,e}function as(t){function e(r,n){var i;return((i=t(r,n))!=null?i:[]).map(s=>[s,void 0])}return e.wrapped=t,e}function Gc(t){function e(r,n){var i;return((i=t(r,n))!=null?i:[]).map(([s])=>s)}return e.wrapped=t,e}function Kc(t){try{return typeof t.id=="string"}catch{return!1}}function Zc(t){if(Kc(t))return t.id;throw new Error(At`default id function expected datum to have an id field but got '${t}'`)}function Qc(t){try{let e=t.parentIds;return e===void 0||e instanceof Array&&e.every(r=>typeof r=="string")}catch{return!1}}function ls(t){if(Qc(t))return t.parentIds;throw new Error(`default parentIds function expected datum to have a parentIds field but got: ${t}`)}function $c(...t){if(t.length)throw new Error(`got arguments to stratify(${t}), but constructor takes no arguments. These were probably meant as data which should be called as stratify()(...)`);return De({id:Zc,parentIds:ls,parentData:as(ls),decycle:!1})}function dn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function th(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function us(t){let e,r,n;t.length!==2?(e=dn,r=(l,u)=>dn(t(l),u),n=(l,u)=>t(l)-u):(e=t===dn||t===th?t:eh,r=t,n=t);function i(l,u,a=0,f=l.length){if(a<f){if(e(u,u)!==0)return f;do{let c=a+f>>>1;r(l[c],u)<0?a=c+1:f=c}while(a<f)}return a}function s(l,u,a=0,f=l.length){if(a<f){if(e(u,u)!==0)return f;do{let c=a+f>>>1;r(l[c],u)<=0?a=c+1:f=c}while(a<f)}return a}function o(l,u,a=0,f=l.length){let c=i(l,u,a,f-1);return c>a&&n(l[c-1],u)>-n(l[c],u)?c-1:c}return{left:i,center:o,right:s}}function eh(){return 0}function nh(t){return t===null?NaN:+t}us(dn);us(nh).center;var rh=hn(Nc());function fs(t,e,r,n,i={}){let l=rh.Solve.call({},{optimize:t,opType:e,constraints:n,variables:r,ints:i}),{feasible:s}=l,o=Et(l,["feasible"]);if(!s)throw new Error("could not find a feasible simplex solution");return o}hn(Oc());function ih(t){let e=Ae(Ht(t,s=>s));function*r(s){var o;yield*s.ichildren(),yield*(o=e.get(s))!=null?o:[]}let n=0,i=new Map;for(let s of Ht(t,o=>o))if(!i.has(s)){for(let o of je(r,s))i.set(o,n);n++}return i}function sh(t,e){let r=[],n=[],i=new Set;for(let s of t){let o=new Set(s.map(l=>e.get(l)));Fc(i,o)||r.push(n=[]),n.push(s),i=o}return r}function oh(t){let[e,r,n]=t;if(e<=0||r<=0||n<=0)throw new Error("const accessors should return non-negative values");let i=()=>t;return i.value=t,i}function ah(t){return"value"in t&&typeof t.value=="object"&&t.value.length===3&&t.value.every(e=>typeof e=="number")}function lh(t,e){if(ah(e)){let[r,n,i]=e.value;if(r<=0||n<=0||i<=0)throw new Error(`simplex weights must be positive, but got: ${r}, ${n}, ${i}`);return(s,o)=>{switch(+("node"in s.data)+ +("node"in o.data)){case 0:return i;case 1:return n;case 2:return r;default:throw new Error("internal error")}}}else{let r=new Map;for(let n of Ht(t,i=>i))if("node"in n.data){let i=n.data.node,s=new Map;for(let o of i.ichildLinks()){let{target:l}=o,u=e(o),[a,f,c]=u;if(a<=0||f<=0||c<=0)throw new Error(`simplex weights must be positive, but got: ${a}, ${f}, ${c}`);s.set(l,u)}r.set(i,s)}return(n,i)=>{if("link"in n.data){let{source:s,target:o}=n.data.link,[,l,u]=r.get(s).get(o);return"link"in i.data?u:l}else if("link"in i.data){let{source:s,target:o}=i.data.link,[,l]=r.get(s).get(o);return l}else{let[s]=r.get(n.data.node).get(i.data.node);return s}}}}function cs(t){function e(i,s){var _;let o={},l={},u=lh(i,t.weight),a=new Map;for(let[m,g]of le(Ht(i,p=>p))){let p=m.toString();a.set(g,p),o[p]={}}function f(m){return a.get(m)}for(let m of i)for(let[g,p]of be(m)){let v=f(g),b=f(p),x=`layer ${v} -> ${b}`,E=(s(g)+s(p))/2;l[x]={min:E},o[v][x]=-1,o[b][x]=1}for(let m of Ht(i,g=>g)){let g=f(m);for(let p of m.ichildren()){let v=f(p),b=`link ${g} -> ${v}`,x=`${b} parent`;l[x]={min:0};let E=`${b} child`;l[E]={min:0},o[g][x]=1,o[g][E]=-1,o[v][x]=-1,o[v][E]=1;let y=u(m,p);o[b]={opt:y,[x]:1,[E]:1}}}let c=fs("opt","min",o,l),h=0,d=0;for(let m of i){for(let v of m)v.x=(_=c[f(v)])!=null?_:0;let g=m[0];h=Math.min(h,g.x-s(g)/2);let p=m[m.length-1];d=Math.max(d,p.x+s(p)/2)}for(let m of Ht(i,g=>g))m.x-=h;return d-h}function r(i,s){let o=ih(i),l=sh(i,o),u=l.map(f=>e(f,s)),a=Math.max(...u);if(a<=0)throw new Error("must assign nonzero width to at least one node");for(let[f,c]of l.entries()){let h=(a-u[f])/2;for(let d of c)for(let _ of d)_.x+=h}return a}function n(i){if(i===void 0)return t.weight;{let s=t,{weight:o}=s,l=Et(s,["weight"]);return cs(dt(ct({},l),{weight:i}))}}return r.weight=n,r}function uh(...t){if(t.length)throw new Error(`got arguments to simplex(${t}), but constructor takes no arguments.`);return cs({weight:oh([1,2,8])})}var fh=class{constructor(){this.vals=[]}add(t){this.vals.push(t)}val(){if(this.vals.sort((t,e)=>t-e),this.vals.length!==0){if(this.vals.length===2)return(this.vals[0]+this.vals[1])/2;if(this.vals.length%2==0){let t=this.vals.length/2,e=this.vals[0],r=this.vals[t-1],n=this.vals[t],i=this.vals[this.vals.length-1],s=r-e,o=i-n;return(r*o+n*s)/(s+o)}else return this.vals[(this.vals.length-1)/2]}}},ch=()=>new fh;function hh(t,e){let r=t();for(let n of e)r.add(n);return r.val()}function hs(t,e){let r=new Map;for(let f of t){let c=e.get(f);c!==void 0&&Gn(r,c,f)}let n=[...r.entries()].sort(([f],[c])=>f-c).flatMap(([,f])=>f),i=new Map(t.map((f,c)=>[f,c])),s=t.filter(f=>e.get(f)===void 0),o=new Array(s.length).fill(null);function l(f,c,h,d){if(c<=f)return;let _=Math.floor((f+c)/2),m=s[_],g=i.get(m),p=0,v=[p];for(let x=h;x<d;++x)p+=i.get(n[x])<g?-1:1,v.push(p);let b=h+v.indexOf(Math.min(...v));o[_]=b,l(f,_,h,b),l(_+1,c,b,d)}l(0,s.length,0,n.length),o.push(n.length+1);let u=0,a=0;for(let[f,c]of n.entries()){for(;o[a]==f;)t[u++]=s[a++];t[u++]=c}for(;o[a]==n.length;)t[u++]=s[a++]}function ds({factory:t}){function e(n,i,s){if(s){let o=new Map(i.map(u=>[u,t()]));for(let[u,a]of n.entries())for(let f of a.ichildren())o.get(f).add(u);let l=new Map([...o.entries()].map(([u,a])=>[u,a.val()]));hs(i,l)}else{let o=new Map(i.map((u,a)=>[u,a])),l=new Map(n.map(u=>{let a=hh(t,Jt(u.ichildren(),f=>o.get(f)));return[u,a]}));hs(n,l)}}function r(n){return n===void 0?t:ds({factory:n})}return e.aggregator=r,e}function dh(...t){if(t.length)throw new Error(`got arguments to agg(${t}), but constructor takes no arguments.`);return ds({factory:ch})}function ps(t,e){let r=new Map,n=new Map(t.map((s,o)=>[s,o]));function i(s,o){var u;let l=(u=r.get(s))==null?void 0:u.get(o);if(l!==void 0)return l;{let a=0;for(let h of e(s))for(let d of e(o))a+=Math.sign(n.get(h)-n.get(d));let f=r.get(s);f===void 0?r.set(s,new Map([[o,a]])):f.set(o,a);let c=r.get(o);return c===void 0?r.set(o,new Map([[s,-a]])):c.set(s,-a),a}}return i}function ph(t,e){let r=[[0,t.length]],n;for(;n=r.pop();){let[i,s]=n;if(i>=s)continue;let o=0,l=s;for(let u=i;u<s-1;++u){let a=e(t[u],t[u+1]);a>o&&(o=a,l=u)}l!==s&&([t[l],t[l+1]]=[t[l+1],t[l]],r.push([i,l],[l+2,s]))}}function gh(t,e){let r=new Array(t.length*(t.length-1)/2);for(;;){let n=0;for(let u=1;u<t.length;++u){let a=0,f=n;for(let c=u-1;c>=0;--c)r[f]=a,a+=e(t[c],t[u]),f-=t.length-c-1;n+=t.length-u}let i=0,s=0,o=0,l=0;for(let u=0;u<t.length-1;++u){let a=0;for(let f=u+1;f<t.length;++f){a+=e(t[u],t[f]);let c=r[i++]+a;c>s&&(s=c,o=u,l=f)}}if(s===0)break;[t[o],t[l]]=[t[l],t[o]]}}function Qn({baseOp:t,doScan:e}){function r(s,o,l){t(s,o,l);let u,a;if(l){let f=Ae(s);a=ps(s,c=>{var h;return(h=f.get(c))!=null?h:[]}),u=o}else a=ps(o,f=>f.ichildren()),u=s;e?gh(u,a):ph(u,a)}function n(s){return s===void 0?t:Qn({baseOp:s,doScan:e})}r.base=n;function i(s){return s===void 0?e:Qn({baseOp:t,doScan:s})}return r.scan=i,r}function mh(...t){if(t.length)throw new Error(`got arguments to greedy(${t}), but constructor takes no arguments.`);return Qn({baseOp:()=>{},doScan:!1})}function vh(t){if(t.value===void 0)throw new Error(At`node with data '${t.data}' did not get a defined value during layering`);if(t.value<0)throw new Error(At`node with data '${t.data}' got an invalid (negative) value during layering: ${t.value}`);return t.value}function _h(t){let e=new Map(Jt(t,s=>[s,{node:s,layer:vh(s)}]));for(let{source:s,target:o}of t.ilinks()){let l=s.nchildLinksTo(o)>1;if(l&&s.value+1>=o.value)throw new Error(At`layering left child data '${o.data}' (${o.value}) whose layer was not two more than its parent data '${s.data}' (${s.value})`);if(!l&&s.value>=o.value)throw new Error(At`layering left child data '${o.data}' (${o.value}) whose layer was not greater than its parent data '${s.data}' (${s.value})`)}function r(s){let o=s.layer+1;return("node"in s?s.node.childLinks():[s.link]).map(l=>{let u=e.get(l.target);return u.layer===o?u:{link:l,layer:o}})}let n=Yc().children(r)(...Jt(t.iroots(),s=>e.get(s)));Xn(!n.multidag());let i=[];for(let s of n)(i[s.data.layer]||(i[s.data.layer]=[])).push(s);if(!i[0]||!i[0].length)throw new Error("no nodes were assigned to layer 0");for(let s of i)Xn(s&&s.length);return i}function bh(t){for(let e of t)for(let r of e){if("link"in r.data)continue;r.data.node.x=r.x,r.data.node.y=r.y;let n=new Map(Jt(r.data.node.ichildLinks(),({points:i,target:s})=>[s,i]));for(let i of r.ichildren()){let s=[{x:r.x,y:r.y}];for(;"link"in i.data;)s.push({x:i.x,y:i.y}),[i]=i.ichildren();s.push({x:i.x,y:i.y});let o=n.get(i.data.node);o.splice(0,o.length,...s)}}}function yh(t,e){for(let r of t){let n=0;for(let i of r){if(i.x===void 0)throw new Error(At`coord didn't assign an x to node '${i}'`);if(i.x<n)throw new Error(At`coord assigned an x (${i.x}) smaller than a previous node in the layer '${i}'`);n=i.x}if(n>e)throw new Error(`coord assigned an x (${n}) greater than width (${e})`)}}function wh(t,e,r){for(let n of t)for(let i of n)i.x*=e,i.y*=r}function $n(t){let e=0;for(let[r,n]of be(t)){let i=new Map(n.map((s,o)=>[s,o]));for(let[s,o]of r.entries())for(let l of r.slice(s+1))for(let u of o.ichildren())for(let a of l.ichildren())u!==a&&i.get(u)>i.get(a)&&e++}return e}function gs(t){function e(n){let i;if(t.topDown)i=je(s=>s.ichildren(),...Ht(Lc(n),s=>s));else{let s=Ae(Ht(n,o=>o));i=je(o=>{var l;return(l=s.get(o))!=null?l:[]},...Ht(n,o=>o))}for(let s of n)s.splice(0);for(let s of i)n[s.data.layer].push(s)}function r(n){return n===void 0?t.topDown:gs({topDown:n})}return e.topDown=r,e}function ms(...t){if(t.length)throw new Error(`got arguments to dfs(${t}), but constructor takes no arguments.`);return gs({topDown:!0})}function pn(t){function e(s){let o=s.slice().reverse(),l=s.map(a=>a.slice()),u=$n(l);for(let a of t.inits){a(s);let f=!0;for(let c=0;c<t.passes&&f;++c){f=!1;for(let[_,m]of be(s)){let g=m.slice();t.order(_,m,!0),m.some((p,v)=>g[v]!==p)&&(f=!0)}let h=$n(s);h<u&&(u=h,l=s.map(_=>_.slice()));for(let[_,m]of be(o)){let g=m.slice();t.order(m,_,!1),m.some((p,v)=>g[v]!==p)&&(f=!0)}let d=$n(s);d<u&&(u=d,l=s.map(_=>_.slice()))}}s.splice(0,s.length,...l)}function r(s){if(s===void 0)return t.order;{let o=t,{order:l}=o,u=Et(o,["order"]);return pn(dt(ct({},u),{order:s}))}}e.order=r;function n(s){if(s===void 0)return[...t.inits];if(s.length){let o=t,{inits:l}=o,u=Et(o,["inits"]);return pn(dt(ct({},u),{inits:[...s]}))}else throw new Error("inits must be a non-empty array, maybe you intended the singleton noop: `[() => undefined]`")}e.inits=n;function i(s){if(s===void 0)return t.passes;if(s<=0)throw new Error("number of passes must be positive");return pn(dt(ct({},t),{passes:s}))}return e.passes=i,e}function xh(...t){if(t.length)throw new Error(`got arguments to twoLayer(${t}), but constructor takes no arguments.`);return pn({order:mh().base(dh()),inits:[ms(),ms().topDown(!1)],passes:24})}function tr(t){function e(i){var g;let s={},o={},l={},u=new Map(Jt(i,(p,v)=>[p,v.toString()]));function a(p){return u.get(p)}function f(p){return s[a(p)]}function c(p,v,b,x=1){let E=f(v),y=f(b),A=`${p}: ${a(v)} -> ${a(b)}`;o[A]={min:x},E[A]=-1,y[A]=1}function h(p,v,b){c(`${p} before`,v,b,0),c(`${p} after`,b,v,0)}let d=[],_=new Map;for(let p of i){let v=a(p);l[v]=1,s[v]={opt:0};let b=t.rank(p);b!==void 0&&d.push([b,p]);let x=t.group(p);if(x!==void 0){let E=_.get(x);E?E.push(p):_.set(x,[p])}}for(let p of i)for(let[v,b]of p.ichildrenCounts())c("link",p,v,b>1?2:1),f(p).opt+=b,f(v).opt-=b;let m=d.sort(([p],[v])=>p-v);for(let[[p,v],[b,x]]of be(m))p<b?c("rank",v,x):h("rank",v,x);for(let p of _.values())for(let[v,b]of be(p))h("group",v,b);try{let p=fs("opt","max",s,o,l);for(let v of i)v.value=(g=p[a(v)])!=null?g:0}catch{throw Xn(d.length||_.size),new Error("could not find a feasible simplex layout, check that rank or group accessors are not ill-defined")}}function r(i){if(i===void 0)return t.rank;{let s=t,{rank:o}=s,l=Et(s,["rank"]);return tr(dt(ct({},l),{rank:i}))}}e.rank=r;function n(i){if(i===void 0)return t.group;{let s=t,{group:o}=s,l=Et(s,["group"]);return tr(dt(ct({},l),{group:i}))}}return e.group=n,e}function vs(){}function Ih(...t){if(t.length)throw new Error(`got arguments to simplex(${t}), but constructor takes no arguments.`);return tr({rank:vs,group:vs})}function _s(t){let e=t();function r(n){return"node"in n.data?t(n.data.node):e}return r.wrapped=t,r}function kh(t,e=!0){let r=new Map;function n(i){let s=r.get(i);if(s===void 0){s=t(i);let[o,l]=s;if(e&&(o<0||l<0))throw new Error(At`all node sizes must be non-negative, but got width ${o} and height ${l} for node '${i}'`);r.set(i,s)}return s}return[i=>n(i)[0],i=>n(i)[1]]}function Eh(t,e){let r=0;for(let n of t){let i=Math.max(...n.map(e));for(let s of n)s.y=r+i/2;r+=i}return r}function ue(t){function e(u){t.layering(u);let a=_h(u),[f,c]=kh(t.sugiNodeSize),h=Eh(a,c);if(h<=0)throw new Error("at least one node must have positive height, but total height was zero");t.decross(a);let d=t.coord(a,f);if(yh(a,d),t.size!==null){let[_,m]=t.size;wh(a,_/d,m/h),d=_,h=m}return bh(a),{width:d,height:h}}function r(u){if(u===void 0)return t.layering;{let a=t,{layering:f}=a,c=Et(a,["layering"]);return ue(dt(ct({},c),{layering:u}))}}e.layering=r;function n(u){if(u===void 0)return t.decross;{let a=t,{decross:f}=a,c=Et(a,["decross"]);return ue(dt(ct({},c),{decross:u}))}}e.decross=n;function i(u){if(u===void 0)return t.coord;{let a=t,{coord:f}=a,c=Et(a,["coord"]);return ue(dt(ct({},c),{coord:u}))}}e.coord=i;function s(u){return u!==void 0?ue(dt(ct({},t),{size:u})):t.size}e.size=s;function o(u){if(u!==void 0){let a=t,{nodeSize:f,sugiNodeSize:c}=a,h=Et(a,["nodeSize","sugiNodeSize"]);return ue(dt(ct({},h),{nodeSize:u,sugiNodeSize:_s(u)}))}else return t.nodeSize}e.nodeSize=o;function l(u){if(u!==void 0){let a=t,{sugiNodeSize:f,nodeSize:c}=a,h=Et(a,["sugiNodeSize","nodeSize"]);return ue(dt(ct({},h),{sugiNodeSize:u,nodeSize:null}))}else return t.sugiNodeSize}return e.sugiNodeSize=l,e}function bs(t){return[+(t!==void 0),1]}function Ch(...t){if(t.length)throw new Error(`got arguments to sugiyama(${t}), but constructor takes no arguments.`);return ue({layering:Ih(),decross:xh(),coord:uh(),size:null,nodeSize:bs,sugiNodeSize:_s(bs)})}hn(Zi());const Mh=(t,{type:e,parentConnections:r,bus:n,signal:i})=>{var A,R,D,U,J;const{parents:s,jobs:o}=t,l=e==="apply",u=vn(we),a=Object.entries(s),f=Object.entries(o),c=[];if(performance.now(),a.length){const{selected:z={},surrogates:C={},missing:w={}}=r!=null?r:{};for(let M=0;M<a.length;M++){const[k,N]=a[M],{title:V=N.jobType}=(R=u[(A=N.jobType)!=null?A:""])!=null?R:{},j={id:k,title:V,flagged:!1,parentIds:[],disabled:!1,status:"info"};z[k]&&(j.status="success"),C[k]&&(j.title=C[k],j.status="info"),w[k]&&(j.status="warning"),c.push(j)}}for(let z=0;z<f.length;z++){const[C,w]=f[z],{title:M=""}=(D=u[w.jobType])!=null?D:{},k=Object.values((U=w.parameters)!=null?U:{}),N=[];let V=!1;for(let j=0;j<w.groups.length;j++){const[H]=w.groups[j];N.push(H.split(".")[0])}for(let j=0;j<((J=w.individualResults)==null?void 0:J.length);j++){const[H]=w.individualResults[j];N.push(H.split(".")[0])}for(let j=0;j<(k==null?void 0:k.length);j++){const{flagged:H=!1}=k[j];if(H){V=!0;break}}c.push({id:C,title:M,flagged:V,parentIds:N,disabled:l?!!Object.keys(w.parameters).length:!0})}performance.now();const h="monospace",d=14,_=(()=>{var M,k;const z=Ot("body").append("svg").style("position","absolute").style("left","-10000px").style("top","-10000px"),C=z.append("text").text("A").style("font-size","14px"),w=Math.round((k=(M=C==null?void 0:C.node())==null?void 0:M.getComputedTextLength())!=null?k:0);return z.remove(),w})(),m=$c()(c),g=Ch().nodeSize(z=>{var k;if(!z)return[0,0];const{id:C,title:w}=z.data,M=(z==null?void 0:z.data)?(((k=`${C}: ${w}`)==null?void 0:k.length)+6)*_:0;return[z?M+15:0,80]}),{width:p,height:v}=g(m);performance.now();const b=Ot("#workflow-tree");b.attr("viewBox",[0,0,p,v].join(" "));const x=ec().curve(Xi).x(z=>z.x).y(z=>z.y);b.append("g").selectAll("path").data(m.links()).enter().append("path").attr("d",({points:z})=>x(z)).attr("fill","none").attr("stroke-width",3).attr("stroke-linecap","round").attr("class","tree-edge stroke-gray-400");const E=b.append("g").selectAll("g").data(m.descendants()).enter().append("g").attr("transform",({x:z,y:C})=>`translate(${z}, ${C})`);E.each(function(z){const{id:C="",title:w="",disabled:M=!1,flagged:k=!1,status:N="missing"}=z.data,V=C.includes("P"),j=10,H=C.length*_+j*2,X=15;let Z=H+w.length*_+j*3;const $=40,at=-(Z/2),st=-($/2),ot=at+j/2,Q=st+j/2,kt=at+(Z-j*2);k&&(Z+=X+j);let ht=ft.card.disabled,Tt=ft.title.disabled,Gt=ft.idWrapper.disabled,Kt=ft.id.disabled;if(V&&e==="edit")ht=ft.card.parentModify,Tt=ft.title.parentModify,Gt=ft.idWrapper.parentModify,Kt=ft.id.parentModify;else if(V)switch(N){case"warning":ht=ft.card.parentWarning,Tt=ft.title.parentWarning,Gt=ft.idWrapper.parentWarning,Kt=ft.id.parentWarning;break;case"info":ht=ft.card.parentInfo,Tt=ft.title.parentInfo,Gt=ft.idWrapper.parentInfo,Kt=ft.id.parentInfo;break;default:ht=ft.card.parentSuccess,Tt=ft.title.parentSuccess,Gt=ft.idWrapper.parentSuccess,Kt=ft.id.parentSuccess;break}else M&&(ht=ft.card.base,Tt=ft.title.base,Gt=ft.idWrapper.base,Kt=ft.id.base);const Zt=Ot(this);Zt.attr("id",({data:{id:ye}})=>`${ye}-node`),Zt.append("rect").attr("x",at).attr("y",st).attr("width",Z).attr("height",40).attr("rx",8).attr("ry",8).attr("stroke-width",2).attr("class",ht).attr("fill-opacity",.85),Zt.append("text").attr("x",kt).attr("y",st+j*2+1).attr("text-anchor","end").attr("alignment-baseline","middle").attr("dominant-baseline","middle").text(({data:{title:ye}})=>ye).attr("font-weight","bold").attr("font-family",h).attr("font-size",`${d}px`).attr("class",Tt).attr("pointer-events","none"),Zt.append("rect").attr("x",ot).attr("y",Q).attr("width",H).attr("height",30).attr("rx",5).attr("ry",5).attr("class",Gt).attr("pointer-events","none"),Zt.append("text").attr("x",ot+j).attr("y",Q+16).attr("alignment-baseline","middle").attr("dominant-baseline","middle").text(C).attr("font-weight","bold").attr("font-family",h).attr("font-size",`${d}px`).attr("class",Kt).attr("pointer-events","none"),k&&Zt.append("path").attr("width",X).attr("d","M3 6a3 3 0 013-3h10a1 1 0 01.8 1.6L14.25 8l2.55 3.4A1 1 0 0116 13H6a1 1 0 00-1 1v3a1 1 0 11-2 0V6z").attr("transform",`translate(${Z/2-j*2}, ${st+j-1})`).attr("class",`job-flag ${ft.flag.base}`)}),E.on("click",function(z,C){C.data.disabled&&n.dispatchEvent(new CustomEvent("select:job",{detail:{id:C.data.id,navigate:!1}}))});const y=lc().scaleExtent([.8,10]).on("zoom",z=>{n.dispatchEvent(new CustomEvent("zoom:tree")),au("#workflow-tree > g").attr("transform",z.transform)}).on("start",z=>{var C;return((C=z==null?void 0:z.sourceEvent)==null?void 0:C.type)==="mousedown"&&b.classed("cursor-grab",!1).classed("cursor-grabbing",!0)}).on("end",z=>{var C;return((C=z==null?void 0:z.sourceEvent)==null?void 0:C.type)==="mouseup"&&b.classed("cursor-grab",!0).classed("cursor-grabbing",!1)});b.call(y),n.addEventListener("select:job",z=>{const{id:C,navigate:w}=z.detail,M=b.node();Qs(M,C),E.each(({data:k,x:N,y:V})=>{if(k.id===C){const j=document.getElementById(`${C}-node`);if(j&&N&&V&&w!==!1){const X=Yi(j).k,Z=cn.translate(p/2-N*X,v/2-V*X).scale(X);b.transition().duration(800).call(y.transform,Z)}}})},{signal:i}),n.addEventListener("update:job",z=>{const{id:C}=z.detail,w=b.node();$s(w,C)},{signal:i}),n.addEventListener("reset:job",z=>{const{id:C}=z.detail,w=b.node();to(w,C)},{signal:i}),n.addEventListener("enter:job",z=>{const{id:C}=z.detail;E.each(({data:w})=>{var M;if(w.id===C){const k=(M=document.getElementById(`${C}-node`))==null?void 0:M.querySelector(".job-card");k==null||k.classList.add("tree-node-highlight")}})},{signal:i}),n.addEventListener("leave:job",z=>{const{id:C}=z.detail;E.each(({data:w})=>{var M;if(w.id===C){const k=(M=document.getElementById(`${C}-node`))==null?void 0:M.querySelector(".job-card");k==null||k.classList.remove("tree-node-highlight")}})},{signal:i}),n.addEventListener("update:flagged",z=>{E.each(function({data:C}){const{id:w,flagged:M}=z.detail;if(C.id===w){const k=Ot(this),N=k.select("rect"),V=k.select(".job-flag"),{id:j="",title:H=""}=C,X=10,Z=15,$=40,at=j.length*_+X*2,st=-($/2);let ot=at+H.length*_+X*3;if(M&&!C.flagged){ot+=Z+X,N.attr("width",ot);let Q=ft.flag.base;k.classed("selected")?Q=ft.flag.selected:k.classed("updated")&&(Q=ft.flag.updated),k.append("path").attr("width",Z).attr("d","M3 6a3 3 0 013-3h10a1 1 0 01.8 1.6L14.25 8l2.55 3.4A1 1 0 0116 13H6a1 1 0 00-1 1v3a1 1 0 11-2 0V6z").attr("transform",`translate(${ot/2-X*2}, ${st+X-1})`).attr("class",`job-flag ${Q}`),C.flagged=!0}else M||(N.attr("width",ot),V.remove(),C.flagged=!1)}})},{signal:i}),performance.now(),n.dispatchEvent(new CustomEvent("rendered:tree"))};function ys(t,e,r){const n=t.slice();return n[7]=e[r],n}function ws(t,e,r){const n=t.slice();return n[10]=e[r],n}function xs(t){let e,r=pr(t[1])+"",n,i;return{c(){e=L("span"),n=lt(r),this.h()},l(s){e=F(s,"SPAN",{class:!0});var o=P(e);n=ut(o,r),o.forEach(S),this.h()},h(){B(e,"class",i=""+(t[6][t[1]]+" px-1 py-px border rounded"))},m(s,o){W(s,e,o),T(e,n)},p(s,o){o&2&&r!==(r=pr(s[1])+"")&&Mt(n,r),o&2&&i!==(i=""+(s[6][s[1]]+" px-1 py-px border rounded"))&&B(e,"class",i)},d(s){s&&S(e)}}}function Is(t){var o,l,u;let e,r,n,i=((u=(l=t[5][(o=t[2])==null?void 0:o.jobType])==null?void 0:l.title)!=null?u:t[2].jobType)+"",s;return{c(){e=L("p"),r=lt("Surrogate for "),n=L("span"),s=lt(i),this.h()},l(a){e=F(a,"P",{class:!0});var f=P(e);r=ut(f,"Surrogate for "),n=F(f,"SPAN",{class:!0});var c=P(n);s=ut(c,i),c.forEach(S),f.forEach(S),this.h()},h(){B(n,"class","font-semibold"),B(e,"class","text-blue-300")},m(a,f){W(a,e,f),T(e,r),T(e,n),T(n,s)},p(a,f){var c,h,d;f&36&&i!==(i=((d=(h=a[5][(c=a[2])==null?void 0:c.jobType])==null?void 0:h.title)!=null?d:a[2].jobType)+"")&&Mt(s,i)},d(a){a&&S(e)}}}function ks(t){let e,r;return{c(){e=L("p"),r=lt("A selected job of the stated type (or a suitable replacement) is required during deployment to complete all necessary input connections.")},l(n){e=F(n,"P",{});var i=P(e);r=ut(i,"A selected job of the stated type (or a suitable replacement) is required during deployment to complete all necessary input connections."),i.forEach(S)},m(n,i){W(n,e,i),T(e,r)},d(n){n&&S(e)}}}function Es(t){let e,r,n,i,s,o,l=t[4],u=[];for(let a=0;a<l.length;a+=1)u[a]=Ms(ys(t,l,a));return{c(){e=L("hr"),r=G(),n=L("h2"),i=lt("Required Groups"),s=G();for(let a=0;a<u.length;a+=1)u[a].c();o=xt(),this.h()},l(a){e=F(a,"HR",{class:!0}),r=K(a),n=F(a,"H2",{class:!0});var f=P(n);i=ut(f,"Required Groups"),f.forEach(S),s=K(a);for(let c=0;c<u.length;c+=1)u[c].l(a);o=xt(),this.h()},h(){B(e,"class","my-1 border-gray-500"),B(n,"class","font-semibold")},m(a,f){W(a,e,f),W(a,r,f),W(a,n,f),T(n,i),W(a,s,f);for(let c=0;c<u.length;c+=1)u[c].m(a,f);W(a,o,f)},p(a,f){if(f&16){l=a[4];let c;for(c=0;c<l.length;c+=1){const h=ys(a,l,c);u[c]?u[c].p(h,f):(u[c]=Ms(h),u[c].c(),u[c].m(o.parentNode,o))}for(;c<u.length;c+=1)u[c].d(1);u.length=l.length}},d(a){a&&S(e),a&&S(r),a&&S(n),a&&S(s),he(u,a),a&&S(o)}}}function Cs(t){let e,r=t[10]+"",n;return{c(){e=L("li"),n=lt(r)},l(i){e=F(i,"LI",{});var s=P(e);n=ut(s,r),s.forEach(S)},m(i,s){W(i,e,s),T(e,n)},p(i,s){s&16&&r!==(r=i[10]+"")&&Mt(n,r)},d(i){i&&S(e)}}}function Ms(t){var f;let e,r,n=t[7].name+"",i,s,o,l,u=(f=t[7].required)!=null?f:[],a=[];for(let c=0;c<u.length;c+=1)a[c]=Cs(ws(t,u,c));return{c(){e=L("ul"),r=L("li"),i=lt(n),s=G(),o=L("ul");for(let c=0;c<a.length;c+=1)a[c].c();l=G(),this.h()},l(c){e=F(c,"UL",{class:!0});var h=P(e);r=F(h,"LI",{class:!0});var d=P(r);i=ut(d,n),d.forEach(S),s=K(h),o=F(h,"UL",{class:!0});var _=P(o);for(let m=0;m<a.length;m+=1)a[m].l(_);_.forEach(S),l=K(h),h.forEach(S),this.h()},h(){B(r,"class","font-medium"),B(o,"class","pl-3.5 mt-0.5 list-disc"),B(e,"class","pl-3.5 list-disc")},m(c,h){W(c,e,h),T(e,r),T(r,i),T(e,s),T(e,o);for(let d=0;d<a.length;d+=1)a[d].m(o,null);T(e,l)},p(c,h){var d;if(h&16&&n!==(n=c[7].name+"")&&Mt(i,n),h&16){u=(d=c[7].required)!=null?d:[];let _;for(_=0;_<u.length;_+=1){const m=ws(c,u,_);a[_]?a[_].p(m,h):(a[_]=Cs(m),a[_].c(),a[_].m(o,null))}for(;_<a.length;_+=1)a[_].d(1);a.length=u.length}},d(c){c&&S(e),he(a,c)}}}function Sh(t){let e,r,n,i,s,o,l,u,a,f,c,h=t[3]==="apply"&&xs(t),d=t[3]==="apply"&&t[1]==="rerouted"&&Is(t),_=t[3]==="edit"&&ks(),m=t[4].length&&Es(t);return{c(){e=L("div"),r=L("div"),n=L("h1"),i=lt(t[0]),s=G(),h&&h.c(),o=G(),d&&d.c(),l=G(),u=L("p"),a=lt("This is a parent job, it is a dependency of the workflow, not included in it"),f=G(),_&&_.c(),c=G(),m&&m.c(),this.h()},l(g){e=F(g,"DIV",{class:!0});var p=P(e);r=F(p,"DIV",{class:!0});var v=P(r);n=F(v,"H1",{class:!0});var b=P(n);i=ut(b,t[0]),b.forEach(S),s=K(v),h&&h.l(v),v.forEach(S),o=K(p),d&&d.l(p),l=K(p),u=F(p,"P",{class:!0});var x=P(u);a=ut(x,"This is a parent job, it is a dependency of the workflow, not included in it"),x.forEach(S),f=K(p),_&&_.l(p),c=K(p),m&&m.l(p),p.forEach(S),this.h()},h(){B(n,"class","text-sm font-semibold"),B(r,"class","inline-flex gap-x-2"),B(u,"class","italic"),B(e,"class","flex flex-col gap-y-1 pb-1.5 text-xs")},m(g,p){W(g,e,p),T(e,r),T(r,n),T(n,i),T(r,s),h&&h.m(r,null),T(e,o),d&&d.m(e,null),T(e,l),T(e,u),T(u,a),T(e,f),_&&_.m(e,null),T(e,c),m&&m.m(e,null)},p(g,[p]){p&1&&Mt(i,g[0]),g[3]==="apply"?h?h.p(g,p):(h=xs(g),h.c(),h.m(r,null)):h&&(h.d(1),h=null),g[3]==="apply"&&g[1]==="rerouted"?d?d.p(g,p):(d=Is(g),d.c(),d.m(e,l)):d&&(d.d(1),d=null),g[3]==="edit"?_||(_=ks(),_.c(),_.m(e,c)):_&&(_.d(1),_=null),g[4].length?m?m.p(g,p):(m=Es(g),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},i:Ct,o:Ct,d(g){g&&S(e),h&&h.d(),d&&d.d(),_&&_.d(),m&&m.d()}}}function zh(t,e,r){let n,i;wt(t,we,f=>r(5,i=f));let{title:s}=e,{status:o}=e,{parent:l}=e,{type:u="edit"}=e;const a={connected:"bg-green-800 text-green-200 border-green-500",rerouted:"bg-blue-800 text-blue-200 border-blue-500",missing:"bg-orange-800 text-orange-200 border-orange-500"};return t.$$set=f=>{"title"in f&&r(0,s=f.title),"status"in f&&r(1,o=f.status),"parent"in f&&r(2,l=f.parent),"type"in f&&r(3,u=f.type)},t.$$.update=()=>{var f;t.$$.dirty&4&&r(4,n=Object.values((f=l==null?void 0:l.groups)!=null?f:{}))},[s,o,l,u,n,i,a]}class Nh extends pt{constructor(e){super();gt(this,e,zh,Sh,mt,{title:0,status:1,parent:2,type:3})}}function Ss(t){let e,r,n;return r=new gr({}),{c(){e=L("div"),tt(r.$$.fragment),this.h()},l(i){e=F(i,"DIV",{class:!0});var s=P(e);et(r.$$.fragment,s),s.forEach(S),this.h()},h(){B(e,"class","absolute-center")},m(i,s){W(i,e,s),nt(r,e,null),n=!0},i(i){n||(O(r.$$.fragment,i),n=!0)},o(i){q(r.$$.fragment,i),n=!1},d(i){i&&S(e),rt(r)}}}function Bh(t){let e,r,n,i,s=!t[1]&&Ss();return{c(){e=L("div"),r=Ue("svg"),n=G(),s&&s.c(),this.h()},l(o){e=F(o,"DIV",{id:!0,class:!0});var l=P(e);r=He(l,"svg",{id:!0,class:!0}),P(r).forEach(S),n=K(l),s&&s.l(l),l.forEach(S),this.h()},h(){B(r,"id","workflow-tree"),B(r,"class","h-full w-full cursor-grab"),B(e,"id","workflow-tree-wrapper"),B(e,"class","group relative h-full w-full svelte-1rhmro0")},m(o,l){W(o,e,l),T(e,r),t[8](r),T(e,n),s&&s.m(e,null),i=!0},p(o,[l]){o[1]?s&&(St(),q(s,1,1,()=>{s=null}),zt()):s?l&2&&O(s,1):(s=Ss(),s.c(),O(s,1),s.m(e,null))},i(o){i||(O(s),i=!0)},o(o){q(s),i=!1},d(o){o&&S(e),t[8](null),s&&s.d()}}}function Th(t,e,r){let n,i,s;wt(t,we,v=>r(11,s=v));const{bus:o,signal:l}=Rt("bus:workflow");wt(t,o,v=>r(10,i=v)),wt(t,l,v=>r(9,n=v));let{workflow:u}=e,{type:a="edit"}=e,{parentConnections:f={}}=e,c,h=!1,d=!1,_=[];const m=()=>{var b,x,E;const v=Object.entries((b=u==null?void 0:u.parents)!=null?b:{});for(let y=0;y<v.length;y++){const[A,R]=v[y],D=document.getElementById(`${A}-node`);if(D){const{surrogates:U={},missing:J={}}=f!=null?f:{};let z=(E=(x=s[R==null?void 0:R.jobType])==null?void 0:x.title)!=null?E:R.jobType,C="connected";(U==null?void 0:U[A])&&(z=U==null?void 0:U[A],C="rerouted"),(J==null?void 0:J[A])&&(C="missing");const w=xe(D,{component:Nh,componentProps:{title:z,status:C,parent:R,type:a},classOverride:"max-w-100 px-2.5 py-1.5 text-xs text-gray-300 bg-gray-700",interactive:!0});_.push(w)}}},g=()=>{m(),r(1,d=!0)};$t(()=>(m(),i.addEventListener("rendered:tree",g,{signal:n}),()=>{_.forEach(v=>{var b;return(b=v==null?void 0:v.destroy)==null?void 0:b.call(v)})}));function p(v){Vt[v?"unshift":"push"](()=>{c=v,r(0,c)})}return t.$$set=v=>{"workflow"in v&&r(4,u=v.workflow),"type"in v&&r(5,a=v.type),"parentConnections"in v&&r(6,f=v.parentConnections)},t.$$.update=()=>{t.$$.dirty&241&&(!h||f)&&c&&u&&(r(7,h=!0),c==null||c.replaceChildren(),hr(1).then(()=>{Mh(u,{type:a,parentConnections:f,bus:vn(o),signal:vn(l)})}))},[c,d,o,l,u,a,f,h,p]}class ud extends pt{constructor(e){super();gt(this,e,Th,Bh,mt,{workflow:4,type:5,parentConnections:6})}}function Vh(t){let e,r,n,i,s;const o=t[4].default,l=vt(o,t,t[3],null);let u=[t[2],{id:t[0]},{class:r=""+(t[1].base+" "+t[1][t[0]])}],a={};for(let f=0;f<u.length;f+=1)a=jt(a,u[f]);return{c(){e=L("button"),l&&l.c(),this.h()},l(f){e=F(f,"BUTTON",{id:!0,class:!0});var c=P(e);l&&l.l(c),c.forEach(S),this.h()},h(){pe(e,a)},m(f,c){W(f,e,c),l&&l.m(e,null),e.autofocus&&e.focus(),n=!0,i||(s=[It(e,"keydown",t[5]),It(e,"click",t[6])],i=!0)},p(f,[c]){l&&l.p&&(!n||c&8)&&_t(l,o,f,f[3],n?yt(o,f[3],c,null):bt(f[3]),null),pe(e,a=Fe(u,[c&4&&f[2],(!n||c&1)&&{id:f[0]},(!n||c&1&&r!==(r=""+(f[1].base+" "+f[1][f[0]])))&&{class:r}]))},i(f){n||(O(l,f),n=!0)},o(f){q(l,f),n=!1},d(f){f&&S(e),l&&l.d(f),i=!1,ce(s)}}}function jh(t,e,r){const n=["kind"];let i=te(e,n),{$$slots:s={},$$scope:o}=e,{kind:l="confirm"}=e;const u={base:"inline-flex justify-center items-center px-2.5 py-1.5 rounded-md shadow-sm text-sm font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500 disabled:opacity-65 disabled:cursor-not-allowed",confirm:"text-white bg-green-600 hover:bg-green-700",secondary:"text-blue-700 bg-blue-100 hover:bg-blue-200",cancel:"border border-red-300 text-red-700 hover:bg-red-50"};function a(c){de.call(this,t,c)}function f(c){de.call(this,t,c)}return t.$$set=c=>{e=jt(jt({},e),qe(c)),r(2,i=te(e,n)),"kind"in c&&r(0,l=c.kind),"$$scope"in c&&r(3,o=c.$$scope)},[l,u,i,o,s,a,f]}class fd extends pt{constructor(e){super();gt(this,e,jh,Vh,mt,{kind:0})}}export{Zh as B,Qh as D,td as F,id as I,ed as J,Uo as M,ld as P,Nh as R,od as S,ud as T,ad as a,fd as b,$h as c,Lo as d,nd as e,rd as f,sd as g};
