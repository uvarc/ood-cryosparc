var $n=Object.defineProperty,wn=Object.defineProperties;var kn=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var dt=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable;var gt=(o,e,s)=>e in o?$n(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s,X=(o,e)=>{for(var s in e||(e={}))dt.call(e,s)&&gt(o,s,e[s]);if(Ie)for(var s of Ie(e))pt.call(e,s)&&gt(o,s,e[s]);return o},he=(o,e)=>wn(o,kn(e));var mt=o=>typeof o=="symbol"?o:o+"",_t=(o,e)=>{var s={};for(var t in o)dt.call(o,t)&&e.indexOf(t)<0&&(s[t]=o[t]);if(o!=null&&Ie)for(var t of Ie(o))e.indexOf(t)<0&&pt.call(o,t)&&(s[t]=o[t]);return s};import{g as Se,S as ke,h as ve,s as je,Q as B,a6 as ue,I as W,R as I,T as q,a7 as ce,J as Q,p as v,U as y,k as F,a2 as P,K as Ee,ae as De,ac as Te,ak as Ge,L as de,r as qe,C as O,D as A,E as V,ao as Pe,o as $,ap as Ae,t as k,H as J,l as ae,m as ie,j as se,af as be,at as $e,au as we,al as vn,y as Fe,z as Re,A as Ue,B as ze,w as He,P as ht,a5 as jn,ad as bt,n as We,q as Ke,F as yn,G as En,ag as $t,aA as Tn,u as wt,v as Ye,x as Pn,am as Le,aq as Cn,aM as Mn,ay as On,V as Ze,W as Xe}from"./vendor.3ae73048.js";import{V as Vn,I as kt,W as ye,a0 as vt,J as Jn,L as xe,Z as Sn}from"./index.11580965.js";import{aq as An,e as jt,z as et,I as Nn,Q as tt,au as yt,ay as Dn}from"./index.146c2037.js";import{H as Et,o as Fn,u as Rn}from"./helpers.7177ca38.js";import{e as Tt,a as Un,h as zn,f as Ln,g as Pt}from"./index.ef7d8fe7.js";import{s as Bn,T as In,K as Qe}from"./router.1b465492.js";import"./types.8cb6216c.js";import{I as Ce}from"./Icon.61279884.js";import{b as Ct,a as nt}from"./ChevronUp.0ab7bee0.js";import{t as Me,Q as qn,M as Hn,a as Wn}from"./Spinner.012207c4.js";import{R as Mt,S as Qn,M as Ot,a as Gn,P as Vt,B as Kn,D as Yn,F as Zn,J as Xn,T as xn,b as st,c as es,d as Jt,e as ts,f as ns,g as ss,I as os}from"./FooterButton.95026c94.js";import{Q as ls}from"./QuestionMarkCircle.1d0a7a5c.js";import{E as St}from"./EyeOff.8789b395.js";import{E as At}from"./Eye.d9501c14.js";import{L as Nt}from"./LockClosed.9ead7228.js";import{F as Dt}from"./Flag.5ce531b9.js";import{F as Ft}from"./FlagFilled.38eba9fd.js";var Rt=[[{d:"M10 2a5 5 0 00-5 5v2a2 2 0 00-2 2v5a2 2 0 002 2h10a2 2 0 002-2v-5a2 2 0 00-2-2H7V7a3 3 0 015.905-.75 1 1 0 001.937-.5A5.002 5.002 0 0010 2z"}],[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"}]];const rs=o=>{const e=o.map(t=>{var a,l,r;const n=new Set,i=(a=t.input_slot_groups)!=null?a:[];for(let f=0;f<i.length;f++){const u=(r=(l=i[f])==null?void 0:l.connections)!=null?r:[];for(let d=0;d<u.length;d++){const{job_uid:c,slots:_}=u[d];n.add(c);for(let p=0;p<_.length;p++){const g=_[p];c!==g.job_uid&&n.add(g.job_uid)}}}return{uid:t.uid,parents:Array.from(n)}});e.sort((t,n)=>t.parents.length===0?-1:n.parents.length===0?1:0);const s=(t=0)=>{var a;const n=e[t];let i=!1;for(let l=t+1;l<e.length;l++){const r=e[l];if((a=n==null?void 0:n.parents)==null?void 0:a.includes(r.uid)){e.splice(l,1),e.splice(t,0,r),i=!0;break}}i?s(t):t<e.length&&s(t+1)};return s(),e.map(({uid:t})=>o.find(n=>n.uid===t))},Vo=(o,e)=>{try{const s=An(e.find(i=>i._id===o));if(!Object.keys(s))throw new Error(`Workflow ${o} could not be found`);const t=s.jobs,n=he(X({},s),{jobs:Tt(s.jobs)});return{updates:t,workflow:n}}catch(s){return jt(s.message),{}}},as=async(o=null)=>{var g,h,m,w,S,G,R,z;const e=Et("job_uids",Se(Bn)),s=Fn({uid:1,title:1,description:1,project_uid:1,job_type:1,input_slot_groups:1,params_base:1,params_spec:1,workflow:1}),t=await et(`/api/actions/jobs?${e}&${s}`),n=rs(t),i={},a={},l={},r={},f=new Map;let u=null;const d=H=>{if(l[H])return l[H];let E;return(r==null?void 0:r[H])?E=r==null?void 0:r[H]:(E=`P${Object.keys(r).length+1}`,r[H]=E),E};for(let H=0;H<n.length;H++){const E=n[H],x=`J${H+1}`;if(u||(u=E.project_uid),o&&E.workflow){const{id:K,jobId:L}=E.workflow;o===K&&f.set(x,L)}const C={title:E.title&&E.title!==`New Job ${E.uid}`?E.title:"",description:E.description&&E.description!=="Enter a description."?E.description:"",jobType:(g=E.job_type)!=null?g:"",groups:[],individualResults:[],parameters:{}},U=(w=(m=Object.keys((h=E==null?void 0:E.params_spec)!=null?h:{}))==null?void 0:m.map(K=>{var L,le,T,M;return X(X({key:K},(le=(L=E==null?void 0:E.params_base)==null?void 0:L[K])!=null?le:{}),(M=(T=E==null?void 0:E.params_spec)==null?void 0:T[K])!=null?M:{})}))!=null?w:[];for(let K=0;K<U.length;K++){const L=U[K];C.parameters[L.key]={value:(S=L.value)!=null?S:null,locked:!1,visible:!0,flagged:!1,notes:""}}const Y=E==null?void 0:E.input_slot_groups;if(typeof(Y==null?void 0:Y.length)=="number"){for(let K=0;K<Y.length;K++){const L=Y==null?void 0:Y[K],le=(G=L==null?void 0:L.connections)!=null?G:[],T=(R=L==null?void 0:L.slots)!=null?R:[];let M=null;for(let re=0;re<le.length;re++){const ee=le==null?void 0:le[re];if(M=d(ee.job_uid),C.groups.push([`${M}.${ee.group_name}`,Y[K].name]),M.includes("P")){(a==null?void 0:a[M])||(a[M]={jobType:"",groups:{}});const ne=a[M],j=ne.groups[L.type];j?j.connections.includes(ee.group_name)||j.connections.push(ee.group_name):ne.groups[L.type]={name:L.name,connections:[ee.group_name],required:[]}}for(let ne=0;ne<ee.slots.length;ne++){const j=ee.slots[ne];if(ee.job_uid!==j.job_uid){let D=d(j.job_uid);const pe=[`${D}.${j.group_name}.${j.slot_name}`,`${x}.${L.name}.${K}.${j.slot_name}`];if((z=C.individualResults)==null||z.push(pe),D.includes("P")){(a==null?void 0:a[D])||(a[D]={jobType:"",groups:{}});const Oe=a[D],ge=a[D].groups[L.type];ge?ge.connections.includes(ee.group_name)||ge.connections.push(ee.group_name):Oe.groups[L.type]={name:L.name,connections:[j.group_name],required:j.slot_name?[j.slot_name]:[]}}}}}if(M==null?void 0:M.includes("P"))for(let re=0;re<T.length;re++){const ee=T[re],ne=a[M].groups[L.type];if(!ne)break;!ee.optional&&!ne.required.includes(ee.name)&&ne.required.push(ee.name)}}l[E.uid]=x,i[x]=C}}const c=Tt(i),_=Object.keys(r);if(_==null?void 0:_.length){const H=Et("job_uids",_.map(x=>`${u}-${x}`)),E=await et(`/api/actions/jobs?${H}&fields=uid&fields=job_type&fields=output_result_groups&deleted=any`);for(let x=0;x<E.length;x++){const{uid:C,job_type:U}=E[x],Y=r[C];!a[Y]||(a[Y].jobType=U!=null?U:"")}}return{workflow:{title:"",description:"",category:"",workflowVersion:Vn,csVersion:Se(Nn),createdBy:Se(Rn),createdAt:new Date,parents:a,jobs:c},updates:i,rebuildMap:f}};async function Jo(o){var e,s,t;try{const n=Se(In).find(c=>c._id===o);if(!n)throw new Error(`Workflow ${o} could not be found`);const{workflow:i,updates:a,rebuildMap:l}=await as(o),r=Se(Qe),f=Object.entries(i.jobs),u=new Set;i._id=o,i.title=n.title,i.category=n.category,i.description=n.description,i.pinned=n.pinned;for(let c=0;c<f.length;c++){const[_,p]=f[c],g=l.get(_);if(!g)continue;let h=n.jobs[g],m=a[_];const w=r[p.jobType],S=Object.entries((e=h.parameters)!=null?e:{});for(let G=0;G<S.length;G++){if(!(p==null?void 0:p.parameters))continue;const[R,z]=S[G],H=(s=m==null?void 0:m.parameters)==null?void 0:s[R],E=(t=w.baseParams)==null?void 0:t[R];H?(H.flagged=z.flagged,H.locked=z.locked,H.notes=z.notes,H.visible=z.visible):z.value===(E==null?void 0:E.value)&&(m.parameters[R]=z)}u.add(_)}const d=Object.keys(n.jobs).length-u.size;return{workflow:i,updates:a,repopulatedJobs:u,removedJobs:d}}catch(n){return jt("Repopulate workflow error: ",n),{}}}function Ut(o,e,s){const t=o.slice();t[7]=e[s];const n=t[7].split("-");return t[8]=n[0],t[9]=n[1],t}function zt(o){let e,s=o[8]+"",t,n,i=o[2](o[9])+"",a,l,r,f;function u(){return o[4](o[8])}return{c(){e=B("li"),t=ue(s),n=ue(": "),a=ue(i),l=W(),this.h()},l(d){e=I(d,"LI",{class:!0});var c=q(e);t=ce(c,s),n=ce(c,": "),a=ce(c,i),l=Q(c),c.forEach(v),this.h()},h(){y(e,"class","text-xs underline hover:text-blue-500 cursor-pointer")},m(d,c){F(d,e,c),P(e,t),P(e,n),P(e,a),P(e,l),r||(f=Ee(e,"click",u),r=!0)},p(d,c){o=d,c&1&&s!==(s=o[8]+"")&&De(t,s),c&1&&i!==(i=o[2](o[9])+"")&&De(a,i)},d(d){d&&v(e),r=!1,f()}}}function is(o){let e,s,t,n,i,a,l,r,f,u=o[0],d=[];for(let c=0;c<u.length;c+=1)d[c]=zt(Ut(o,u,c));return{c(){e=B("div"),s=B("header"),t=B("h3"),n=ue("Restricted Jobs:"),i=W(),a=B("p"),l=ue("Restricted jobs cannot be used in a workflow as they do not generate their outputs until runtime."),r=W(),f=B("ul");for(let c=0;c<d.length;c+=1)d[c].c();this.h()},l(c){e=I(c,"DIV",{class:!0});var _=q(e);s=I(_,"HEADER",{class:!0});var p=q(s);t=I(p,"H3",{class:!0});var g=q(t);n=ce(g,"Restricted Jobs:"),g.forEach(v),i=Q(p),a=I(p,"P",{class:!0});var h=q(a);l=ce(h,"Restricted jobs cannot be used in a workflow as they do not generate their outputs until runtime."),h.forEach(v),p.forEach(v),r=Q(_),f=I(_,"UL",{class:!0});var m=q(f);for(let w=0;w<d.length;w+=1)d[w].l(m);m.forEach(v),_.forEach(v),this.h()},h(){y(t,"class","text-xs font-bold"),y(a,"class","text-xs italic leading-tight"),y(s,"class","flex flex-col justify-between gap-y-0.5 mb-1.5"),y(f,"class","pl-3.5 mt-0.5 list-disc"),y(e,"class","p-2 mx-2 mt-2 rounded border border-red-400 text-red-700 bg-red-100")},m(c,_){F(c,e,_),P(e,s),P(s,t),P(t,n),P(s,i),P(s,a),P(a,l),P(e,r),P(e,f);for(let p=0;p<d.length;p+=1)d[p].m(f,null)},p(c,[_]){if(_&13){u=c[0];let p;for(p=0;p<u.length;p+=1){const g=Ut(c,u,p);d[p]?d[p].p(g,_):(d[p]=zt(g),d[p].c(),d[p].m(f,null))}for(;p<d.length;p+=1)d[p].d(1);d.length=u.length}},i:Te,o:Te,d(c){c&&v(e),Ge(d,c)}}}function fs(o,e,s){let t,n;de(o,Qe,u=>s(6,n=u));let{restricted:i=[]}=e;const{bus:a}=qe("bus:workflow");de(o,a,u=>s(5,t=u));function l(u){var d,c;return(c=(d=n[u])==null?void 0:d.title)!=null?c:u}function r(u){t.dispatchEvent(new CustomEvent("select:job",{detail:{id:u,navigate:!1}}))}const f=u=>r(u);return o.$$set=u=>{"restricted"in u&&s(0,i=u.restricted)},[i,a,l,r,f]}class us extends ke{constructor(e){super();ve(this,e,fs,is,je,{restricted:0})}}function Lt(o,e,s){const t=o.slice();t[3]=e[s][0],t[4]=e[s][1];const n=t[1](t[3]);return t[5]=n,t}function Bt(o){let e,s,t,n,i,a,l,r,f,u,d,c;l=new Ce({props:{src:ls,size:4,modifier:"ml-1.5"}});let _=Object.entries(o[0]).sort(),p=[];for(let h=0;h<_.length;h+=1)p[h]=It(Lt(o,_,h));const g=h=>k(p[h],1,1,()=>{p[h]=null});return{c(){e=B("div"),s=B("header"),t=B("h3"),n=ue("Parent Connections:"),i=W(),a=B("span"),O(l.$$.fragment),r=W(),f=B("ul");for(let h=0;h<p.length;h+=1)p[h].c();this.h()},l(h){e=I(h,"DIV",{class:!0});var m=q(e);s=I(m,"HEADER",{class:!0});var w=q(s);t=I(w,"H3",{class:!0});var S=q(t);n=ce(S,"Parent Connections:"),S.forEach(v),i=Q(w),a=I(w,"SPAN",{class:!0});var G=q(a);A(l.$$.fragment,G),G.forEach(v),w.forEach(v),r=Q(m),f=I(m,"UL",{class:!0});var R=q(f);for(let z=0;z<p.length;z+=1)p[z].l(R);R.forEach(v),m.forEach(v),this.h()},h(){y(t,"class","text-xs font-bold"),y(a,"class","inline-block text-purple-600 cursor-help transition duration-150 ease-in-out"),y(s,"class","flex justify-between"),y(f,"class","pl-3.5 mt-0.5 list-disc"),y(e,"class","p-2 mx-2 mt-2 rounded border border-purple-400 text-purple-700 bg-purple-50")},m(h,m){F(h,e,m),P(e,s),P(s,t),P(t,n),P(s,i),P(s,a),V(l,a,null),P(e,r),P(e,f);for(let w=0;w<p.length;w+=1)p[w].m(f,null);u=!0,d||(c=Pe(Me.call(null,a,{content:"Parent jobs must be selected within a workspace to make connections. Workflows can be deployed without parent connections, however inputs will need to be connected manually after jobs are created."})),d=!0)},p(h,m){if(m&3){_=Object.entries(h[0]).sort();let w;for(w=0;w<_.length;w+=1){const S=Lt(h,_,w);p[w]?(p[w].p(S,m),$(p[w],1)):(p[w]=It(S),p[w].c(),$(p[w],1),p[w].m(f,null))}for(ae(),w=_.length;w<p.length;w+=1)g(w);ie()}},i(h){if(!u){$(l.$$.fragment,h);for(let m=0;m<_.length;m+=1)$(p[m]);u=!0}},o(h){k(l.$$.fragment,h),p=p.filter(Boolean);for(let m=0;m<p.length;m+=1)k(p[m]);u=!1},d(h){h&&v(e),J(l),Ge(p,h),d=!1,c()}}}function It(o){let e,s,t=o[3]+"",n,i,a=o[5]+"",l,r,f,u,d,c,_,p,g;return u=new Ce({props:{src:kt,size:4,type:"outline",modifier:"stroke-2 inline-block ml-1.5 text-purple-600"}}),{c(){e=B("li"),s=B("span"),n=ue(t),i=ue(": "),l=ue(a),r=W(),f=B("span"),O(u.$$.fragment),c=W(),this.h()},l(h){e=I(h,"LI",{class:!0});var m=q(e);s=I(m,"SPAN",{class:!0});var w=q(s);n=ce(w,t),i=ce(w,": "),l=ce(w,a),w.forEach(v),r=Q(m),f=I(m,"SPAN",{class:!0});var S=q(f);A(u.$$.fragment,S),S.forEach(v),c=Q(m),m.forEach(v),this.h()},h(){y(s,"class","font-medium"),y(f,"class","cursor-help"),y(e,"class","text-xs")},m(h,m){F(h,e,m),P(e,s),P(s,n),P(s,i),P(s,l),P(e,r),P(e,f),V(u,f,null),P(e,c),_=!0,p||(g=Pe(d=Me.call(null,f,{component:Mt,componentProps:{title:o[5],parent:o[4]},interactive:!0,classOverride:"max-w-100 px-2.5 py-1.5 text-xs text-gray-300 bg-gray-700"})),p=!0)},p(h,m){o=h,(!_||m&1)&&t!==(t=o[3]+"")&&De(n,t),(!_||m&1)&&a!==(a=o[5]+"")&&De(l,a),d&&Ae(d.update)&&m&1&&d.update.call(null,{component:Mt,componentProps:{title:o[5],parent:o[4]},interactive:!0,classOverride:"max-w-100 px-2.5 py-1.5 text-xs text-gray-300 bg-gray-700"})},i(h){_||($(u.$$.fragment,h),_=!0)},o(h){k(u.$$.fragment,h),_=!1},d(h){h&&v(e),J(u),p=!1,g()}}}function cs(o){let e=Object.keys(o[0]).length,s,t,n=e&&Bt(o);return{c(){n&&n.c(),s=se()},l(i){n&&n.l(i),s=se()},m(i,a){n&&n.m(i,a),F(i,s,a),t=!0},p(i,[a]){a&1&&(e=Object.keys(i[0]).length),e?n?(n.p(i,a),a&1&&$(n,1)):(n=Bt(i),n.c(),$(n,1),n.m(s.parentNode,s)):n&&(ae(),k(n,1,1,()=>{n=null}),ie())},i(i){t||($(n),t=!0)},o(i){k(n),t=!1},d(i){n&&n.d(i),i&&v(s)}}}function ds(o,e,s){let t;de(o,Qe,a=>s(2,t=a));let{parents:n}=e;const i=a=>{var l,r;return(r=(l=t[n[a].jobType])==null?void 0:l.title)!=null?r:n[a].jobType};return o.$$set=a=>{"parents"in a&&s(0,n=a.parents)},[n,i]}class ps extends ke{constructor(e){super();ve(this,e,ds,cs,je,{parents:0})}}const gs=o=>({parameters:o[0]&2}),qt=o=>({parameters:o[1]});function ms(o){let e;const s=o[21].default,t=Fe(s,o,o[25],qt);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i[0]&33554434)&&Re(t,s,n,n[25],e?ze(s,n[25],i,gs):Ue(n[25]),qt)},i(n){e||($(t,n),e=!0)},o(n){k(t,n),e=!1},d(n){t&&t.d(n)}}}function _s(o){let e,s,t,n,i;function a(u){o[22](u)}function l(u){o[23](u)}function r(u){o[24](u)}let f={title:o[0],$$slots:{default:[ms]},$$scope:{ctx:o}};return o[2]!==void 0&&(f.node=o[2]),o[3]!==void 0&&(f.expanded=o[3]),o[4]!==void 0&&(f.render=o[4]),e=new Qn({props:f}),be.push(()=>$e(e,"node",a)),be.push(()=>$e(e,"expanded",l)),be.push(()=>$e(e,"render",r)),{c(){O(e.$$.fragment)},l(u){A(e.$$.fragment,u)},m(u,d){V(e,u,d),i=!0},p(u,d){const c={};d[0]&1&&(c.title=u[0]),d[0]&33554434&&(c.$$scope={dirty:d,ctx:u}),!s&&d[0]&4&&(s=!0,c.node=u[2],we(()=>s=!1)),!t&&d[0]&8&&(t=!0,c.expanded=u[3],we(()=>t=!1)),!n&&d[0]&16&&(n=!0,c.render=u[4],we(()=>n=!1)),e.$set(c)},i(u){i||($(e.$$.fragment,u),i=!0)},o(u){k(e.$$.fragment,u),i=!1},d(u){J(e,u)}}}function hs(o,e,s){let t,n,i,a,l,r,f,u,{$$slots:d={},$$scope:c}=e,{name:_}=e,{title:p}=e;const{mergedParameters:g,updatedParameters:h,filter:m,showAdvanced:w}=qe("parameters");de(o,g,j=>s(20,f=j)),de(o,h,j=>s(27,u=j)),de(o,m,j=>s(18,l=j)),de(o,w,j=>s(16,i=j));const S=He([]);de(o,S,j=>s(19,r=j));const G=He([]);de(o,G,j=>s(17,a=j));const R=He([]);de(o,R,j=>s(1,n=j));let z=null,H=!0,E=!1,x=!1,C=!1,U;const Y=()=>{U=u},K=j=>{const D=z==null?void 0:z.closest("article"),pe=document.activeElement,ge=(D?yt(D):[]).indexOf(pe);S.update(Ve=>Ve.filter(([Je])=>!j.includes(Je))),jn().then(()=>{if(D){const Ve=yt(D);if(pe){const Je=Ve[ge];Je?Je.focus():Ve[0].focus()}else Ve[0].focus()}})},L=()=>{s(14,x=!0),ht(S,r=Object.keys(X({},u)).map(j=>{var D,pe;return[j,X(X({},(D=f==null?void 0:f[j])!=null?D:{}),(pe=u==null?void 0:u[j])!=null?pe:{})]}).filter(([j,D])=>D.section===_&&!D.hidden).sort((j,D)=>j[1].order-D[1].order),r)},le=()=>{s(15,C=!0),ht(G,a=Object.entries(f!=null?f:{}).map(([j,D])=>[j,X(X({},f==null?void 0:f[j]),D)]).filter(([j,D])=>D.section===_&&!D.hidden&&(l==="spec"||i&&(D==null?void 0:D.advanced)||!(D==null?void 0:D.advanced))).sort((j,D)=>j[1].order-D[1].order),a)},T=()=>{const j=Object.keys(u!=null?u:{}),D=Object.keys(U!=null?U:{});if(!tt(j,D)){const pe=j.filter(ge=>!D.includes(ge)),Oe=D.filter(ge=>!j.includes(ge));pe.length&&L(),Oe.length&&K(Oe)}Y()},M=()=>{l==="all"&&E&&(le(),R.set(a))};vn(()=>{E&&T()});function re(j){z=j,s(2,z)}function ee(j){H=j,s(3,H)}function ne(j){t=j,s(4,t),s(1,n)}return o.$$set=j=>{"name"in j&&s(12,_=j.name),"title"in j&&s(0,p=j.title),"$$scope"in j&&s(25,c=j.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&1056768&&Object.keys(f!=null?f:{}).length&&!E&&(Y(),s(13,E=!0)),o.$$.dirty[0]&811008&&l==="spec"&&E&&(x||L(),R.set(r)),o.$$.dirty[0]&434176&&l==="all"&&E&&(C||le(),R.set(a)),o.$$.dirty[0]&65536&&typeof i=="boolean"&&M(),o.$$.dirty[0]&2&&s(4,t=!!(n==null?void 0:n.length))},[p,n,z,H,t,g,h,m,w,S,G,R,_,E,x,C,i,a,l,r,f,d,re,ee,ne,c]}class bs extends ke{constructor(e){super();ve(this,e,hs,_s,je,{name:12,title:0},null,[-1,-1])}}function $s(o){let e,s,t,n,i,a,l,r,f,u,d,c,_;return{c(){e=B("div"),s=B("button"),t=ue("Custom"),i=W(),a=B("button"),l=ue("All"),f=W(),u=B("div"),this.h()},l(p){e=I(p,"DIV",{class:!0});var g=q(e);s=I(g,"BUTTON",{class:!0});var h=q(s);t=ce(h,"Custom"),h.forEach(v),i=Q(g),a=I(g,"BUTTON",{class:!0});var m=q(a);l=ce(m,"All"),m.forEach(v),f=Q(g),u=I(g,"DIV",{"aria-hidden":!0,class:!0}),q(u).forEach(v),g.forEach(v),this.h()},h(){y(s,"class",n=""+((o[0]!==ye.spec?"hover:bg-gray-100 hover:bg-opacity-50 hover:shadow-sm":"")+" h-full w-15.5 px-2 font-semibold text-xs whitespace-nowrap rounded z-1 hover:text-gray-800 focus:z-2 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500")),y(a,"class",r=""+((o[0]!==ye.all?"hover:bg-gray-100 hover:bg-opacity-50 hover:shadow-sm":"")+" h-full w-15.5 px-2 font-semibold text-xs whitespace-nowrap rounded z-1 hover:text-gray-800 focus:z-2 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500")),y(u,"aria-hidden","true"),y(u,"class",d=""+((o[0]===ye.all?"translate-x-16":"translate-x-0")+" absolute left-0.5 top-0.5 h-6 w-16 rounded bg-white shadow pointer-events-none transform ring-0 transition ease-in-out duration-200")),y(e,"class","relative flex justify-between gap-x-1 h-7.5 py-0.5 px-0.5 shadow-inner rounded-md border border-gray-300 text-gray-700 bg-gray-200 cursor-pointer transition-colors ease-in-out duration-200")},m(p,g){F(p,e,g),P(e,s),P(s,t),P(e,i),P(e,a),P(a,l),P(e,f),P(e,u),c||(_=[Ee(s,"click",o[1]),Ee(a,"click",o[2])],c=!0)},p(p,[g]){g&1&&n!==(n=""+((p[0]!==ye.spec?"hover:bg-gray-100 hover:bg-opacity-50 hover:shadow-sm":"")+" h-full w-15.5 px-2 font-semibold text-xs whitespace-nowrap rounded z-1 hover:text-gray-800 focus:z-2 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500"))&&y(s,"class",n),g&1&&r!==(r=""+((p[0]!==ye.all?"hover:bg-gray-100 hover:bg-opacity-50 hover:shadow-sm":"")+" h-full w-15.5 px-2 font-semibold text-xs whitespace-nowrap rounded z-1 hover:text-gray-800 focus:z-2 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500"))&&y(a,"class",r),g&1&&d!==(d=""+((p[0]===ye.all?"translate-x-16":"translate-x-0")+" absolute left-0.5 top-0.5 h-6 w-16 rounded bg-white shadow pointer-events-none transform ring-0 transition ease-in-out duration-200"))&&y(u,"class",d)},i:Te,o:Te,d(p){p&&v(e),c=!1,bt(_)}}}function ws(o,e,s){let{filter:t=ye.spec}=e;const n=()=>{s(0,t=ye.spec)},i=()=>{s(0,t=ye.all)};return o.$$set=a=>{"filter"in a&&s(0,t=a.filter)},[t,n,i]}class ks extends ke{constructor(e){super();ve(this,e,ws,$s,je,{filter:0})}}function vs(o){let e,s,t,n,i,a,l,r,f,u,d,c,_,p;function g(m){o[6](m)}let h={};return o[0]!==void 0&&(h.filter=o[0]),s=new ks({props:h}),be.push(()=>$e(s,"filter",g)),{c(){e=B("header"),O(s.$$.fragment),n=W(),i=B("div"),a=B("input"),r=W(),f=B("label"),u=ue("Show advanced"),this.h()},l(m){e=I(m,"HEADER",{class:!0});var w=q(e);A(s.$$.fragment,w),n=Q(w),i=I(w,"DIV",{class:!0});var S=q(i);a=I(S,"INPUT",{tabindex:!0,id:!0,name:!0,type:!0,class:!0}),r=Q(S),f=I(S,"LABEL",{for:!0,class:!0});var G=q(f);u=ce(G,"Show advanced"),G.forEach(v),S.forEach(v),w.forEach(v),this.h()},h(){y(a,"tabindex",l=o[1]?-1:0),y(a,"id",o[5]),y(a,"name",o[5]),y(a,"type","checkbox"),a.disabled=o[1],y(a,"class","h-4 w-4 rounded border-gray-300 text-blue-500 bg-white shadow-inner cursor-pointer hover:border-gray-400 focus:outline-none focus:ring-offset-1 focus:ring-2 focus:ring-blue-500 disabled:opacity-70 disabled:cursor-not-allowed"),y(f,"for",o[5]),y(f,"class",d=""+((o[1]?"opacity-70 cursor-not-allowed":"")+" text-xs font-medium text-gray-500")),y(i,"class","flex gap-x-2 pr-1.5"),y(e,"class","flex items-center justify-between gap-x-2 mb-0.5")},m(m,w){F(m,e,w),V(s,e,null),P(e,n),P(e,i),P(i,a),a.checked=o[2],P(i,r),P(i,f),P(f,u),c=!0,_||(p=Ee(a,"change",o[7]),_=!0)},p(m,[w]){const S={};!t&&w&1&&(t=!0,S.filter=m[0],we(()=>t=!1)),s.$set(S),(!c||w&2&&l!==(l=m[1]?-1:0))&&y(a,"tabindex",l),(!c||w&2)&&(a.disabled=m[1]),w&4&&(a.checked=m[2]),(!c||w&2&&d!==(d=""+((m[1]?"opacity-70 cursor-not-allowed":"")+" text-xs font-medium text-gray-500")))&&y(f,"class",d)},i(m){c||($(s.$$.fragment,m),c=!0)},o(m){k(s.$$.fragment,m),c=!1},d(m){m&&v(e),J(s),_=!1,p()}}}function js(o,e,s){let t,n,i;const{filter:a,showAdvanced:l}=qe("parameters");de(o,a,d=>s(0,n=d)),de(o,l,d=>s(2,i=d));const r=`advanced-params-${We()}`;function f(d){n=d,a.set(n)}function u(){i=this.checked,l.set(i)}return o.$$.update=()=>{o.$$.dirty&1&&s(1,t=n==="spec")},[n,t,i,a,l,r,f,u]}class ys extends ke{constructor(e){super();ve(this,e,js,vs,je,{})}}function Es(o){let e,s,t,n,i,a,l,r,f,u,d,c,_,p,g,h,m,w,S,G,R,z,H,E,x,C,U,Y,K;t=new Ce({props:{src:o[0]?At:St,size:4}}),f=new Ce({props:{src:o[1]?Nt:Rt,size:4}});var L=o[2]?Ft:Dt;function le(T){return{props:{modifier:"stroke-2"}}}return L&&(g=new L(le())),z=new Ce({props:{src:o[3]?Ct:nt,size:4,type:"outline",modifier:"stroke-2"}}),{c(){e=B("div"),s=B("button"),O(t.$$.fragment),l=W(),r=B("button"),O(f.$$.fragment),_=W(),p=B("button"),g&&O(g.$$.fragment),w=W(),S=B("div"),G=W(),R=B("button"),O(z.$$.fragment),this.h()},l(T){e=I(T,"DIV",{class:!0});var M=q(e);s=I(M,"BUTTON",{tabindex:!0,class:!0});var re=q(s);A(t.$$.fragment,re),re.forEach(v),l=Q(M),r=I(M,"BUTTON",{tabindex:!0,class:!0});var ee=q(r);A(f.$$.fragment,ee),ee.forEach(v),_=Q(M),p=I(M,"BUTTON",{class:!0});var ne=q(p);g&&A(g.$$.fragment,ne),ne.forEach(v),w=Q(M),S=I(M,"DIV",{class:!0}),q(S).forEach(v),G=Q(M),R=I(M,"BUTTON",{tabindex:!0,class:!0});var j=q(R);A(z.$$.fragment,j),j.forEach(v),M.forEach(v),this.h()},h(){y(s,"tabindex",n=o[5]?-1:0),s.disabled=o[5],y(s,"class",i=""+(o[11](o[0])+" inline-flex items-center text-xs p-1 shadow-sm rounded border focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed")),y(r,"tabindex",u=o[6]?-1:0),r.disabled=o[6],y(r,"class",d=""+(o[11](o[1])+" inline-flex items-center text-xs p-1 shadow-sm rounded border focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed")),y(p,"class",h=""+(o[11](o[2])+" inline-flex items-center text-xs p-1 ml-auto shadow-sm rounded border border-gray-300 bg-white focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed")),y(S,"class","w-px my-0.5 bg-gray-200"),y(R,"tabindex",H=o[0]?0:-1),R.disabled=E=!o[0],y(R,"class",x=""+(o[12](o[3],o[4])+" inline-flex items-center text-xs p-1 shadow-sm rounded border focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed")),y(e,"class","flex items-stretch gap-x-1 ml-2.5")},m(T,M){F(T,e,M),P(e,s),V(t,s,null),P(e,l),P(e,r),V(f,r,null),P(e,_),P(e,p),g&&V(g,p,null),P(e,w),P(e,S),P(e,G),P(e,R),V(z,R,null),U=!0,Y||(K=[Pe(a=Me.call(null,s,{content:o[0]?"Parameter Visible":"Parameter Hidden",delay:[500,0]})),Ee(s,"click",o[7]),Pe(c=Me.call(null,r,{content:o[1]?"Parameter Locked":"Parameter Unlocked",delay:[500,0]})),Ee(r,"click",o[8]),Pe(m=Me.call(null,p,{content:o[2]?"Parameter Flagged":"Parameter Unflagged"})),Ee(p,"click",o[9]),Pe(C=Me.call(null,R,{content:o[3]?"Hide Notes":"Show Notes",delay:[500,0]})),Ee(R,"click",o[10])],Y=!0)},p(T,[M]){const re={};M&1&&(re.src=T[0]?At:St),t.$set(re),(!U||M&32&&n!==(n=T[5]?-1:0))&&y(s,"tabindex",n),(!U||M&32)&&(s.disabled=T[5]),(!U||M&1&&i!==(i=""+(T[11](T[0])+" inline-flex items-center text-xs p-1 shadow-sm rounded border focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed")))&&y(s,"class",i),a&&Ae(a.update)&&M&1&&a.update.call(null,{content:T[0]?"Parameter Visible":"Parameter Hidden",delay:[500,0]});const ee={};if(M&2&&(ee.src=T[1]?Nt:Rt),f.$set(ee),(!U||M&64&&u!==(u=T[6]?-1:0))&&y(r,"tabindex",u),(!U||M&64)&&(r.disabled=T[6]),(!U||M&2&&d!==(d=""+(T[11](T[1])+" inline-flex items-center text-xs p-1 shadow-sm rounded border focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed")))&&y(r,"class",d),c&&Ae(c.update)&&M&2&&c.update.call(null,{content:T[1]?"Parameter Locked":"Parameter Unlocked",delay:[500,0]}),L!==(L=T[2]?Ft:Dt)){if(g){ae();const j=g;k(j.$$.fragment,1,0,()=>{J(j,1)}),ie()}L?(g=new L(le()),O(g.$$.fragment),$(g.$$.fragment,1),V(g,p,null)):g=null}(!U||M&4&&h!==(h=""+(T[11](T[2])+" inline-flex items-center text-xs p-1 ml-auto shadow-sm rounded border border-gray-300 bg-white focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed")))&&y(p,"class",h),m&&Ae(m.update)&&M&4&&m.update.call(null,{content:T[2]?"Parameter Flagged":"Parameter Unflagged"});const ne={};M&8&&(ne.src=T[3]?Ct:nt),z.$set(ne),(!U||M&1&&H!==(H=T[0]?0:-1))&&y(R,"tabindex",H),(!U||M&1&&E!==(E=!T[0]))&&(R.disabled=E),(!U||M&24&&x!==(x=""+(T[12](T[3],T[4])+" inline-flex items-center text-xs p-1 shadow-sm rounded border focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed")))&&y(R,"class",x),C&&Ae(C.update)&&M&8&&C.update.call(null,{content:T[3]?"Hide Notes":"Show Notes",delay:[500,0]})},i(T){U||($(t.$$.fragment,T),$(f.$$.fragment,T),g&&$(g.$$.fragment,T),$(z.$$.fragment,T),U=!0)},o(T){k(t.$$.fragment,T),k(f.$$.fragment,T),g&&k(g.$$.fragment,T),k(z.$$.fragment,T),U=!1},d(T){T&&v(e),J(t),J(f),g&&J(g),J(z),Y=!1,bt(K)}}}function Ts(o,e,s){let{visible:t}=e,{locked:n=!1}=e,{flagged:i=!1}=e,{options:a}=e,{expanded:l=!1}=e,{disableVisibility:r=!1}=e,{disableLock:f=!1}=e;const u=Ke(),d=()=>{s(0,t=!t),u("toggle:visible")},c=()=>{s(1,n=!n),u("toggle:locked")},_=()=>{s(2,i=!i),u("toggle:flagged")},p=()=>{s(3,l=!l)},g=m=>m?"text-green-600 border-green-500 bg-white hover:bg-green-50 hover:text-green-700":"text-gray-500 border-gray-300 bg-white hover:bg-gray-100 hover:text-gray-600 hover:border-gray-400",h=(m,w)=>m?"text-blue-600 border-blue-500 bg-blue-50 hover:bg-blue-100 hover:text-blue-700":g(w);return o.$$set=m=>{"visible"in m&&s(0,t=m.visible),"locked"in m&&s(1,n=m.locked),"flagged"in m&&s(2,i=m.flagged),"options"in m&&s(4,a=m.options),"expanded"in m&&s(3,l=m.expanded),"disableVisibility"in m&&s(5,r=m.disableVisibility),"disableLock"in m&&s(6,f=m.disableLock)},[t,n,i,l,a,r,f,d,c,_,p,g,h]}class Ps extends ke{constructor(e){super();ve(this,e,Ts,Es,je,{visible:0,locked:1,flagged:2,options:4,expanded:3,disableVisibility:5,disableLock:6})}}function Cs(o){let e,s,t,n,i;return n=new Ot({props:{description:o[0]}}),n.$on("update",o[2]),{c(){e=B("div"),s=B("div"),t=B("div"),O(n.$$.fragment),this.h()},l(a){e=I(a,"DIV",{class:!0});var l=q(e);s=I(l,"DIV",{class:!0});var r=q(s);t=I(r,"DIV",{class:!0});var f=q(t);A(n.$$.fragment,f),f.forEach(v),r.forEach(v),l.forEach(v),this.h()},h(){y(t,"class","h-full"),y(s,"class","flex flex-col gap-y-1 w-full p-1 -mt-0.5 shadow-inner rounded-md border border-gray-300 bg-gray-100"),y(e,"class","px-1")},m(a,l){F(a,e,l),P(e,s),P(s,t),V(n,t,null),i=!0},p(a,[l]){const r={};l&1&&(r.description=a[0]),n.$set(r)},i(a){i||($(n.$$.fragment,a),i=!0)},o(a){k(n.$$.fragment,a),i=!1},d(a){a&&v(e),J(n)}}}function Ms(o,e,s){let{notes:t=""}=e;const n=Ke(),i=l=>{n("update:notes",l)},a=l=>i(l.detail);return o.$$set=l=>{"notes"in l&&s(0,t=l.notes)},[t,i,a]}class Os extends ke{constructor(e){super();ve(this,e,Ms,Cs,je,{notes:0})}}function Ht(o){let e,s,t,n;const i=[o[11],{id:o[0]},{name:o[1]},{parameter:o[2]},{status:o[8]}];let a={$$slots:{icon:[Js],default:[Vs]},$$scope:{ctx:o}};for(let r=0;r<i.length;r+=1)a=Ye(a,i[r]);e=new Gn({props:a}),e.$on("set",o[18]);let l=o[4]&&Gt(o);return{c(){O(e.$$.fragment),s=W(),l&&l.c(),t=se()},l(r){A(e.$$.fragment,r),s=Q(r),l&&l.l(r),t=se()},m(r,f){V(e,r,f),F(r,s,f),l&&l.m(r,f),F(r,t,f),n=!0},p(r,f){const u=f&2311?yn(i,[f&2048&&En(r[11]),f&1&&{id:r[0]},f&2&&{name:r[1]},f&4&&{parameter:r[2]},f&256&&{status:r[8]}]):{};f&4194364&&(u.$$scope={dirty:f,ctx:r}),e.$set(u),r[4]?l?(l.p(r,f),f&16&&$(l,1)):(l=Gt(r),l.c(),$(l,1),l.m(t.parentNode,t)):l&&(ae(),k(l,1,1,()=>{l=null}),ie())},i(r){n||($(e.$$.fragment,r),$(l),n=!0)},o(r){k(e.$$.fragment,r),k(l),n=!1},d(r){J(e,r),r&&v(s),l&&l.d(r),r&&v(t)}}}function Vs(o){var a;let e,s,t;function n(l){o[14](l)}let i={disableVisibility:o[3],visible:o[2].visible,locked:o[2].locked,flagged:(a=o[2])==null?void 0:a.flagged,options:o[5]};return o[4]!==void 0&&(i.expanded=o[4]),e=new Ps({props:i}),be.push(()=>$e(e,"expanded",n)),e.$on("toggle:visible",o[15]),e.$on("toggle:locked",o[16]),e.$on("toggle:flagged",o[17]),{c(){O(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,r){V(e,l,r),t=!0},p(l,r){var u;const f={};r&8&&(f.disableVisibility=l[3]),r&4&&(f.visible=l[2].visible),r&4&&(f.locked=l[2].locked),r&4&&(f.flagged=(u=l[2])==null?void 0:u.flagged),r&32&&(f.options=l[5]),!s&&r&16&&(s=!0,f.expanded=l[4],we(()=>s=!1)),e.$set(f)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Wt(o){let e,s,t,n,i,a;return s=new Ce({props:{src:Jn,size:4,modifier:"text-orange-500"}}),{c(){e=B("span"),O(s.$$.fragment),this.h()},l(l){e=I(l,"SPAN",{class:!0});var r=q(e);A(s.$$.fragment,r),r.forEach(v),this.h()},h(){y(e,"class","cursor-help")},m(l,r){F(l,e,r),V(s,e,null),n=!0,i||(a=Pe(t=Me.call(null,e,{content:"Flagged Parameter"})),i=!0)},p:Te,i(l){n||($(s.$$.fragment,l),n=!0)},o(l){k(s.$$.fragment,l),n=!1},d(l){l&&v(e),J(s),i=!1,a()}}}function Qt(o){let e,s,t,n,i,a;return s=new Ce({props:{src:kt,size:4,type:"solid",modifier:"stroke-2 text-blue-500"}}),{c(){e=B("span"),O(s.$$.fragment),this.h()},l(l){e=I(l,"SPAN",{class:!0});var r=q(e);A(s.$$.fragment,r),r.forEach(v),this.h()},h(){y(e,"class","cursor-help")},m(l,r){F(l,e,r),V(s,e,null),n=!0,i||(a=Pe(t=Me.call(null,e,{component:Vt,componentProps:{notes:o[2].notes},interactive:!0,classOverride:"border border-gray-400 bg-white"})),i=!0)},p(l,r){t&&Ae(t.update)&&r&4&&t.update.call(null,{component:Vt,componentProps:{notes:l[2].notes},interactive:!0,classOverride:"border border-gray-400 bg-white"})},i(l){n||($(s.$$.fragment,l),n=!0)},o(l){k(s.$$.fragment,l),n=!1},d(l){l&&v(e),J(s),i=!1,a()}}}function Js(o){let e,s,t,n=o[2].flagged&&Wt(),i=o[2].notes&&Qt(o);return{c(){e=B("div"),n&&n.c(),s=W(),i&&i.c(),this.h()},l(a){e=I(a,"DIV",{slot:!0,class:!0});var l=q(e);n&&n.l(l),s=Q(l),i&&i.l(l),l.forEach(v),this.h()},h(){y(e,"slot","icon"),y(e,"class","flex gap-x-1 ml-2")},m(a,l){F(a,e,l),n&&n.m(e,null),P(e,s),i&&i.m(e,null),t=!0},p(a,l){a[2].flagged?n?(n.p(a,l),l&4&&$(n,1)):(n=Wt(),n.c(),$(n,1),n.m(e,s)):n&&(ae(),k(n,1,1,()=>{n=null}),ie()),a[2].notes?i?(i.p(a,l),l&4&&$(i,1)):(i=Qt(a),i.c(),$(i,1),i.m(e,null)):i&&(ae(),k(i,1,1,()=>{i=null}),ie())},i(a){t||($(n),$(i),t=!0)},o(a){k(n),k(i),t=!1},d(a){a&&v(e),n&&n.d(),i&&i.d()}}}function Gt(o){var t;let e,s;return e=new Os({props:{notes:(t=o[2])==null?void 0:t.notes}}),e.$on("update:notes",o[19]),{c(){O(e.$$.fragment)},l(n){A(e.$$.fragment,n)},m(n,i){V(e,n,i),s=!0},p(n,i){var l;const a={};i&4&&(a.notes=(l=n[2])==null?void 0:l.notes),e.$set(a)},i(n){s||($(e.$$.fragment,n),s=!0)},o(n){k(e.$$.fragment,n),s=!1},d(n){J(e,n)}}}function Ss(o){let e,s,t=o[7]&&o[6]&&Ht(o);return{c(){t&&t.c(),e=se()},l(n){t&&t.l(n),e=se()},m(n,i){t&&t.m(n,i),F(n,e,i),s=!0},p(n,[i]){n[7]&&n[6]?t?(t.p(n,i),i&192&&$(t,1)):(t=Ht(n),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ae(),k(t,1,1,()=>{t=null}),ie())},i(n){s||($(t),s=!0)},o(n){k(t),s=!1},d(n){t&&t.d(n),n&&v(e)}}}function As(o,e,s){let t,n,i,a,l,r;const f=["id","name"];let u=$t(e,f),d,c,{id:_}=e,{name:p}=e;const{baseParameters:g,mergedParameters:h,updatedParameters:m}=qe("parameters");de(o,h,C=>s(20,c=C)),de(o,m,C=>s(13,d=C));let w,S=!1;Tn(()=>{var K;const C=c==null?void 0:c[p],U=(K=d==null?void 0:d[p])!=null?K:vt,Y=X(X({},C),U);w&&!tt(w,Y)&&s(2,w=Y)}),wt(()=>{const C=c==null?void 0:c[p],U=d==null?void 0:d[p];s(2,w=X(X({},C),U))});function G(C){S=C,s(4,S)}function R(C){Le.call(this,o,C)}function z(C){Le.call(this,o,C)}function H(C){Le.call(this,o,C)}function E(C){Le.call(this,o,C)}function x(C){Le.call(this,o,C)}return o.$$set=C=>{e=Ye(Ye({},e),Pn(C)),s(11,u=$t(e,f)),"id"in C&&s(0,_=C.id),"name"in C&&s(1,p=C.name)},o.$$.update=()=>{var C,U,Y,K;o.$$.dirty&8194&&s(12,t=(C=d==null?void 0:d[p])==null?void 0:C.value),o.$$.dirty&4098&&s(3,n=t!=null&&((U=g==null?void 0:g[p])==null?void 0:U.value)!==t),o.$$.dirty&8&&s(8,i=n?"updated":"default"),o.$$.dirty&4&&s(7,a=!!Object.keys(w!=null?w:{}).length),o.$$.dirty&2&&s(6,l=!!(g==null?void 0:g[p])),o.$$.dirty&8194&&s(5,r=!!((K=(Y=d==null?void 0:d[p])==null?void 0:Y.notes)==null?void 0:K.length))},[_,p,w,n,S,r,l,a,i,h,m,u,t,d,G,R,z,H,E,x]}class Ns extends ke{constructor(e){super();ve(this,e,As,Ss,je,{id:0,name:1})}}const Ds=o=>({}),Kt=o=>({}),Fs=o=>({}),Yt=o=>({});function Zt(o,e,s){var a;const t=o.slice();t[45]=e[s][0],t[46]=e[s][1];const n=t[46].jobType;t[47]=n;const i=(a=t[2])==null?void 0:a[t[47]];return t[48]=i,t}function Xt(o,e,s){const t=o.slice();return t[52]=e[s][0],t[53]=e[s][1],t}function xt(o,e,s){const t=o.slice();return t[57]=e[s][0],t}function en(o,e,s){const t=o.slice();return t[61]=e[s],t}const Rs=o=>({}),tn=o=>({}),Us=o=>({}),nn=o=>({});function zs(o){let e;const s=o[23].header,t=Fe(s,o,o[40],Kt);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i[1]&512)&&Re(t,s,n,n[40],e?ze(s,n[40],i,Ds):Ue(n[40]),Kt)},i(n){e||($(t,n),e=!0)},o(n){k(t,n),e=!1},d(n){t&&t.d(n)}}}function Ls(o){let e;const s=o[23]["header-auxiliary"],t=Fe(s,o,o[40],Yt);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i[1]&512)&&Re(t,s,n,n[40],e?ze(s,n[40],i,Fs):Ue(n[40]),Yt)},i(n){e||($(t,n),e=!0)},o(n){k(t,n),e=!1},d(n){t&&t.d(n)}}}function sn(o){let e,s;return e=new us({props:{restricted:o[7]}}),{c(){O(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){V(e,t,n),s=!0},p(t,n){const i={};n[0]&128&&(i.restricted=t[7]),e.$set(i)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function on(o){let e,s;return e=new es({props:{deprecated:o[8]}}),{c(){O(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){V(e,t,n),s=!0},p(t,n){const i={};n[0]&256&&(i.deprecated=t[8]),e.$set(i)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function ln(o){let e,s;return e=new ps({props:{parents:o[1].parents}}),{c(){O(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){V(e,t,n),s=!0},p(t,n){const i={};n[0]&2&&(i.parents=t[1].parents),e.$set(i)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function Bs(o){let e,s,t;function n(a){o[25](a)}let i={id:o[45],required:!0};return o[9]!==void 0&&(i.value=o[9]),e=new Jt({props:i}),be.push(()=>$e(e,"value",n)),{c(){O(e.$$.fragment)},l(a){A(e.$$.fragment,a)},m(a,l){V(e,a,l),t=!0},p(a,l){const r={};l[1]&16384&&(r.id=a[45]),!s&&l[0]&512&&(s=!0,r.value=a[9],we(()=>s=!1)),e.$set(r)},i(a){t||($(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){J(e,a)}}}function Is(o){let e=o[61]+"",s,t;return{c(){s=ue(e),t=W()},l(n){s=ce(n,e),t=Q(n)},m(n,i){F(n,s,i),F(n,t,i)},p(n,i){i[0]&8&&e!==(e=n[61]+"")&&De(s,e)},d(n){n&&v(s),n&&v(t)}}}function rn(o){let e,s;function t(){return o[27](o[61])}return e=new Wn({props:{$$slots:{default:[Is]},$$scope:{ctx:o}}}),e.$on("click",t),{c(){O(e.$$.fragment)},l(n){A(e.$$.fragment,n)},m(n,i){V(e,n,i),s=!0},p(n,i){o=n;const a={};i[0]&8|i[1]&512&&(a.$$scope={dirty:i,ctx:o}),e.$set(a)},i(n){s||($(e.$$.fragment,n),s=!0)},o(n){k(e.$$.fragment,n),s=!1},d(n){J(e,n)}}}function qs(o){let e,s,t=o[3],n=[];for(let a=0;a<t.length;a+=1)n[a]=rn(en(o,t,a));const i=a=>k(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=se()},l(a){for(let l=0;l<n.length;l+=1)n[l].l(a);e=se()},m(a,l){for(let r=0;r<n.length;r+=1)n[r].m(a,l);F(a,e,l),s=!0},p(a,l){if(l[0]&1096){t=a[3];let r;for(r=0;r<t.length;r+=1){const f=en(a,t,r);n[r]?(n[r].p(f,l),$(n[r],1)):(n[r]=rn(f),n[r].c(),$(n[r],1),n[r].m(e.parentNode,e))}for(ae(),r=t.length;r<n.length;r+=1)i(r);ie()}},i(a){if(!s){for(let l=0;l<t.length;l+=1)$(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)k(n[l]);s=!1},d(a){Ge(n,a),a&&v(e)}}}function Hs(o){let e,s;return e=new Hn({props:{$$slots:{default:[qs]},$$scope:{ctx:o}}}),{c(){O(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){V(e,t,n),s=!0},p(t,n){const i={};n[0]&1096|n[1]&512&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function Ws(o){var _,p;let e,s,t,n,i,a,l;function r(g){o[26](g)}let f={id:o[45],class:o[60].baseClass};o[10]!==void 0&&(f.value=o[10]),e=new Jt({props:f}),be.push(()=>$e(e,"value",r));function u(g){o[28](g)}function d(g){o[29](g)}let c={width:""+(((p=(_=o[60].node)==null?void 0:_.getBoundingClientRect())==null?void 0:p.width)+"px"),position:"bottom-end",$$slots:{default:[Hs]},$$scope:{ctx:o}};return o[5]!==void 0&&(c.handleShowMenu=o[5]),o[6]!==void 0&&(c.closeMenu=o[6]),n=new qn({props:c}),be.push(()=>$e(n,"handleShowMenu",u)),be.push(()=>$e(n,"closeMenu",d)),{c(){O(e.$$.fragment),t=W(),O(n.$$.fragment)},l(g){A(e.$$.fragment,g),t=Q(g),A(n.$$.fragment,g)},m(g,h){V(e,g,h),F(g,t,h),V(n,g,h),l=!0},p(g,h){var S,G;const m={};h[1]&16384&&(m.id=g[45]),h[1]&536870912&&(m.class=g[60].baseClass),!s&&h[0]&1024&&(s=!0,m.value=g[10],we(()=>s=!1)),e.$set(m);const w={};h[1]&536870912&&(w.width=""+(((G=(S=g[60].node)==null?void 0:S.getBoundingClientRect())==null?void 0:G.width)+"px")),h[0]&1096|h[1]&512&&(w.$$scope={dirty:h,ctx:g}),!i&&h[0]&32&&(i=!0,w.handleShowMenu=g[5],we(()=>i=!1)),!a&&h[0]&64&&(a=!0,w.closeMenu=g[6],we(()=>a=!1)),n.$set(w)},i(g){l||($(e.$$.fragment,g),$(n.$$.fragment,g),l=!0)},o(g){k(e.$$.fragment,g),k(n.$$.fragment,g),l=!1},d(g){J(e,g),g&&v(t),J(n,g)}}}function Qs(o){let e,s;return e=new Ce({props:{slot:"icon",src:nt,size:4}}),{c(){O(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){V(e,t,n),s=!0},p:Te,i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function Gs(o){let e,s;return e=new Sn({props:{id:o[45],$$slots:{icon:[Qs,({props:t})=>({60:t}),({props:t})=>[0,t?536870912:0]],default:[Ws,({props:t})=>({60:t}),({props:t})=>[0,t?536870912:0]]},$$scope:{ctx:o}}}),e.$on("click",o[30]),{c(){O(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){V(e,t,n),s=!0},p(t,n){const i={};n[1]&16384&&(i.id=t[45]),n[0]&1128|n[1]&536887808&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function Ks(o){let e,s;return e=new Ot({props:{id:o[45],description:o[11]}}),e.$on("update",o[31]),{c(){O(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){V(e,t,n),s=!0},p(t,n){const i={};n[1]&16384&&(i.id=t[45]),n[0]&2048&&(i.description=t[11]),e.$set(i)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function Ys(o){let e,s,t,n,i,a;return e=new xe({props:{title:"Title",id:"workflow-title",$$slots:{default:[Bs,({id:l})=>({45:l}),({id:l})=>[0,l?16384:0]]},$$scope:{ctx:o}}}),t=new xe({props:{title:"Category",id:"workflow-category",$$slots:{default:[Gs,({id:l})=>({45:l}),({id:l})=>[0,l?16384:0]]},$$scope:{ctx:o}}}),i=new xe({props:{title:"Description",id:"workflow-description",$$slots:{default:[Ks,({id:l})=>({45:l}),({id:l})=>[0,l?16384:0]]},$$scope:{ctx:o}}}),{c(){O(e.$$.fragment),s=W(),O(t.$$.fragment),n=W(),O(i.$$.fragment)},l(l){A(e.$$.fragment,l),s=Q(l),A(t.$$.fragment,l),n=Q(l),A(i.$$.fragment,l)},m(l,r){V(e,l,r),F(l,s,r),V(t,l,r),F(l,n,r),V(i,l,r),a=!0},p(l,r){const f={};r[0]&512|r[1]&16896&&(f.$$scope={dirty:r,ctx:l}),e.$set(f);const u={};r[0]&1128|r[1]&16896&&(u.$$scope={dirty:r,ctx:l}),t.$set(u);const d={};r[0]&2048|r[1]&16896&&(d.$$scope={dirty:r,ctx:l}),i.$set(d)},i(l){a||($(e.$$.fragment,l),$(t.$$.fragment,l),$(i.$$.fragment,l),a=!0)},o(l){k(e.$$.fragment,l),k(t.$$.fragment,l),k(i.$$.fragment,l),a=!1},d(l){J(e,l),l&&v(s),J(t,l),l&&v(n),J(i,l)}}}function an(o,e){let s,t,n;function i(){return e[35](e[45],e[57])}function a(){return e[36](e[45],e[57])}function l(){return e[37](e[45],e[57])}function r(...f){return e[38](e[45],e[57],...f)}return t=new Ns({props:{id:e[45],name:e[57],class:"px-1"}}),t.$on("set",e[34]),t.$on("toggle:visible",i),t.$on("toggle:locked",a),t.$on("toggle:flagged",l),t.$on("update:notes",r),{key:o,first:null,c(){s=se(),O(t.$$.fragment),this.h()},l(f){s=se(),A(t.$$.fragment,f),this.h()},h(){this.first=s},m(f,u){F(f,s,u),V(t,f,u),n=!0},p(f,u){e=f;const d={};u[1]&33554432&&(d.name=e[57]),t.$set(d)},i(f){n||($(t.$$.fragment,f),n=!0)},o(f){k(t.$$.fragment,f),n=!1},d(f){f&&v(s),J(t,f)}}}function Zs(o){let e=[],s=new Map,t,n,i=o[56];const a=l=>We();for(let l=0;l<i.length;l+=1){let r=xt(o,i,l),f=a();s.set(f,e[l]=an(f,r))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=W()},l(l){for(let r=0;r<e.length;r+=1)e[r].l(l);t=Q(l)},m(l,r){for(let f=0;f<e.length;f+=1)e[f].m(l,r);F(l,t,r),n=!0},p(l,r){r[0]&778240|r[1]&33554432&&(i=l[56],ae(),e=Ze(e,r,a,1,l,i,s,t.parentNode,Xe,an,t,xt),ie())},i(l){if(!n){for(let r=0;r<i.length;r+=1)$(e[r]);n=!0}},o(l){for(let r=0;r<e.length;r+=1)k(e[r]);n=!1},d(l){for(let r=0;r<e.length;r+=1)e[r].d(l);l&&v(t)}}}function fn(o,e){var i;let s,t,n;return t=new bs({props:{name:e[52],title:(i=e[53])==null?void 0:i.title,$$slots:{default:[Zs,({parameters:a})=>({56:a}),({parameters:a})=>[0,a?33554432:0]]},$$scope:{ctx:e}}}),{key:o,first:null,c(){s=se(),O(t.$$.fragment),this.h()},l(a){s=se(),A(t.$$.fragment,a),this.h()},h(){this.first=s},m(a,l){F(a,s,l),V(t,a,l),n=!0},p(a,l){var f;e=a;const r={};l[1]&1048576&&(r.name=e[52]),l[1]&1048576&&(r.title=(f=e[53])==null?void 0:f.title),l[1]&33554944&&(r.$$scope={dirty:l,ctx:e}),t.$set(r)},i(a){n||($(t.$$.fragment,a),n=!0)},o(a){k(t.$$.fragment,a),n=!1},d(a){a&&v(s),J(t,a)}}}function Xs(o){let e=[],s=new Map,t,n,i=o[51];const a=l=>We();for(let l=0;l<i.length;l+=1){let r=Xt(o,i,l),f=a();s.set(f,e[l]=fn(f,r))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=se()},l(l){for(let r=0;r<e.length;r+=1)e[r].l(l);t=se()},m(l,r){for(let f=0;f<e.length;f+=1)e[f].m(l,r);F(l,t,r),n=!0},p(l,r){r[0]&778240|r[1]&34603008&&(i=l[51],ae(),e=Ze(e,r,a,1,l,i,s,t.parentNode,Xe,fn,t,Xt),ie())},i(l){if(!n){for(let r=0;r<i.length;r+=1)$(e[r]);n=!0}},o(l){for(let r=0;r<e.length;r+=1)k(e[r]);n=!1},d(l){for(let r=0;r<e.length;r+=1)e[r].d(l);l&&v(t)}}}function xs(o){let e,s;return e=new ys({props:{slot:"header"}}),{c(){O(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){V(e,t,n),s=!0},p:Te,i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function eo(o){let e,s,t,n,i,a,l;function r(...u){return o[32](o[45],...u)}function f(...u){return o[33](o[45],...u)}return e=new ns({props:{id:o[45],title:o[46].title,description:o[46].description}}),e.$on("update:title",r),e.$on("update:description",f),t=new ss({props:{id:o[45],job:o[48],workflowJob:o[46],$$slots:{header:[xs,({sections:u})=>({51:u}),({sections:u})=>[0,u?1048576:0]],default:[Xs,({sections:u})=>({51:u}),({sections:u})=>[0,u?1048576:0]]},$$scope:{ctx:o}}}),i=new os({props:{workflowJob:o[46],workflow:o[1]}}),{c(){O(e.$$.fragment),s=W(),O(t.$$.fragment),n=W(),O(i.$$.fragment),a=W()},l(u){A(e.$$.fragment,u),s=Q(u),A(t.$$.fragment,u),n=Q(u),A(i.$$.fragment,u),a=Q(u)},m(u,d){V(e,u,d),F(u,s,d),V(t,u,d),F(u,n,d),V(i,u,d),F(u,a,d),l=!0},p(u,d){o=u;const c={};d[0]&4&&(c.job=o[48]),d[1]&1049088&&(c.$$scope={dirty:d,ctx:o}),t.$set(c);const _={};d[0]&2&&(_.workflow=o[1]),i.$set(_)},i(u){l||($(e.$$.fragment,u),$(t.$$.fragment,u),$(i.$$.fragment,u),l=!0)},o(u){k(e.$$.fragment,u),k(t.$$.fragment,u),k(i.$$.fragment,u),l=!1},d(u){J(e,u),u&&v(s),J(t,u),u&&v(n),J(i,u),u&&v(a)}}}function un(o,e){var i;let s,t,n;return t=new ts({props:{id:e[45],title:(i=e[48])==null?void 0:i.title,job:e[46],$$slots:{default:[eo]},$$scope:{ctx:e}}}),{key:o,first:null,c(){s=se(),O(t.$$.fragment),this.h()},l(a){s=se(),A(t.$$.fragment,a),this.h()},h(){this.first=s},m(a,l){F(a,s,l),V(t,a,l),n=!0},p(a,l){var f;e=a;const r={};l[0]&4&&(r.title=(f=e[48])==null?void 0:f.title),l[0]&6|l[1]&512&&(r.$$scope={dirty:l,ctx:e}),t.$set(r)},i(a){n||($(t.$$.fragment,a),n=!0)},o(a){k(t.$$.fragment,a),n=!1},d(a){a&&v(s),J(t,a)}}}function to(o){let e=[],s=new Map,t,n,i=o[13]();const a=l=>We();for(let l=0;l<i.length;l+=1){let r=Zt(o,i,l),f=a();s.set(f,e[l]=un(f,r))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=se()},l(l){for(let r=0;r<e.length;r+=1)e[r].l(l);t=se()},m(l,r){for(let f=0;f<e.length;f+=1)e[f].m(l,r);F(l,t,r),n=!0},p(l,r){r[0]&1040390|r[1]&34603008&&(i=l[13](),ae(),e=Ze(e,r,a,1,l,i,s,t.parentNode,Xe,un,t,Zt),ie())},i(l){if(!n){for(let r=0;r<i.length;r+=1)$(e[r]);n=!0}},o(l){for(let r=0;r<e.length;r+=1)k(e[r]);n=!1},d(l){for(let r=0;r<e.length;r+=1)e[r].d(l);l&&v(t)}}}function no(o){var d;let e,s,t,n,i,a,l,r=o[7].length&&sn(o),f=o[8].length&&on(o),u=((d=o[1])==null?void 0:d.parents)&&ln(o);return n=new Zn({props:{id:"workflow-form",$$slots:{default:[Ys]},$$scope:{ctx:o}}}),n.$on("submit",o[20]),a=new Xn({props:{$$slots:{default:[to]},$$scope:{ctx:o}}}),{c(){r&&r.c(),e=W(),f&&f.c(),s=W(),u&&u.c(),t=W(),O(n.$$.fragment),i=W(),O(a.$$.fragment)},l(c){r&&r.l(c),e=Q(c),f&&f.l(c),s=Q(c),u&&u.l(c),t=Q(c),A(n.$$.fragment,c),i=Q(c),A(a.$$.fragment,c)},m(c,_){r&&r.m(c,_),F(c,e,_),f&&f.m(c,_),F(c,s,_),u&&u.m(c,_),F(c,t,_),V(n,c,_),F(c,i,_),V(a,c,_),l=!0},p(c,_){var h;c[7].length?r?(r.p(c,_),_[0]&128&&$(r,1)):(r=sn(c),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(ae(),k(r,1,1,()=>{r=null}),ie()),c[8].length?f?(f.p(c,_),_[0]&256&&$(f,1)):(f=on(c),f.c(),$(f,1),f.m(s.parentNode,s)):f&&(ae(),k(f,1,1,()=>{f=null}),ie()),((h=c[1])==null?void 0:h.parents)?u?(u.p(c,_),_[0]&2&&$(u,1)):(u=ln(c),u.c(),$(u,1),u.m(t.parentNode,t)):u&&(ae(),k(u,1,1,()=>{u=null}),ie());const p={};_[0]&3688|_[1]&512&&(p.$$scope={dirty:_,ctx:c}),n.$set(p);const g={};_[0]&6|_[1]&512&&(g.$$scope={dirty:_,ctx:c}),a.$set(g)},i(c){l||($(r),$(f),$(u),$(n.$$.fragment,c),$(a.$$.fragment,c),l=!0)},o(c){k(r),k(f),k(u),k(n.$$.fragment,c),k(a.$$.fragment,c),l=!1},d(c){r&&r.d(c),c&&v(e),f&&f.d(c),c&&v(s),u&&u.d(c),c&&v(t),J(n,c),c&&v(i),J(a,c)}}}function so(o){let e,s;return e=new xn({props:{workflow:o[4]}}),{c(){O(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){V(e,t,n),s=!0},p(t,n){const i={};n[0]&16&&(i.workflow=t[4]),e.$set(i)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function oo(o){let e;return{c(){e=ue("Cancel")},l(s){e=ce(s,"Cancel")},m(s,t){F(s,e,t)},d(s){s&&v(e)}}}function lo(o){let e;const s=o[23].confirm,t=Fe(s,o,o[40],nn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i[1]&512)&&Re(t,s,n,n[40],e?ze(s,n[40],i,Us):Ue(n[40]),nn)},i(n){e||($(t,n),e=!0)},o(n){k(t,n),e=!1},d(n){t&&t.d(n)}}}function cn(o){let e,s;return e=new st({props:{form:"workflow-form",kind:"secondary",disabled:!!o[7].length,$$slots:{default:[ro]},$$scope:{ctx:o}}}),{c(){O(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){V(e,t,n),s=!0},p(t,n){const i={};n[0]&128&&(i.disabled=!!t[7].length),n[1]&512&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function ro(o){let e;const s=o[23].secondary,t=Fe(s,o,o[40],tn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i[1]&512)&&Re(t,s,n,n[40],e?ze(s,n[40],i,Rs):Ue(n[40]),tn)},i(n){e||($(t,n),e=!0)},o(n){k(t,n),e=!1},d(n){t&&t.d(n)}}}function ao(o){let e,s,t,n,i,a;e=new st({props:{kind:"cancel",$$slots:{default:[oo]},$$scope:{ctx:o}}}),e.$on("click",o[24]),t=new st({props:{form:"workflow-form",kind:"confirm",disabled:!!o[7].length,$$slots:{default:[lo]},$$scope:{ctx:o}}});let l=o[21].secondary&&cn(o);return{c(){O(e.$$.fragment),s=W(),O(t.$$.fragment),n=W(),l&&l.c(),i=se()},l(r){A(e.$$.fragment,r),s=Q(r),A(t.$$.fragment,r),n=Q(r),l&&l.l(r),i=se()},m(r,f){V(e,r,f),F(r,s,f),V(t,r,f),F(r,n,f),l&&l.m(r,f),F(r,i,f),a=!0},p(r,f){const u={};f[1]&512&&(u.$$scope={dirty:f,ctx:r}),e.$set(u);const d={};f[0]&128&&(d.disabled=!!r[7].length),f[1]&512&&(d.$$scope={dirty:f,ctx:r}),t.$set(d),r[21].secondary?l?(l.p(r,f),f[0]&2097152&&$(l,1)):(l=cn(r),l.c(),$(l,1),l.m(i.parentNode,i)):l&&(ae(),k(l,1,1,()=>{l=null}),ie())},i(r){a||($(e.$$.fragment,r),$(t.$$.fragment,r),$(l),a=!0)},o(r){k(e.$$.fragment,r),k(t.$$.fragment,r),k(l),a=!1},d(r){J(e,r),r&&v(s),J(t,r),r&&v(n),l&&l.d(r),r&&v(i)}}}function io(o){let e,s;return e=new Yn({props:{$$slots:{footer:[ao],visualization:[so],configuration:[no],"header-auxiliary":[Ls],header:[zs]},$$scope:{ctx:o}}}),{c(){O(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){V(e,t,n),s=!0},p(t,n){const i={};n[0]&2101246|n[1]&512&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function fo(o){let e,s,t;function n(a){o[39](a)}let i={$$slots:{default:[io]},$$scope:{ctx:o}};return o[0]!==void 0&&(i.bus=o[0]),e=new Kn({props:i}),be.push(()=>$e(e,"bus",n)),{c(){O(e.$$.fragment)},l(a){A(e.$$.fragment,a)},m(a,l){V(e,a,l),t=!0},p(a,l){const r={};l[0]&2101246|l[1]&512&&(r.$$scope={dirty:l,ctx:a}),!s&&l[0]&1&&(s=!0,r.bus=a[0],we(()=>s=!1)),e.$set(r)},i(a){t||($(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){J(e,a)}}}function uo(o,e,s){var ot,lt,rt;let t,n=Te,i=()=>(n(),n=Mn(d,b=>s(41,t=b)),d);o.$$.on_destroy.push(()=>n());let{$$slots:a={},$$scope:l}=e;const r=Cn(a);let{workflow:f}=e,{updates:u={}}=e,{bus:d=void 0}=e;i();const c=Ke();let _={},p=[],g,h,m,w=[],S=[],G=(ot=f.title)!=null?ot:"",R=(lt=f.category)!=null?lt:"",z=(rt=f.description)!=null?rt:"";const H=He({}),E=()=>{var b;return Object.entries((b=f.jobs)!=null?b:{})},x=(b,N)=>{var oe;const{jobType:Z}=f.jobs[b],te=Se(Qe)[Z];return(oe=te==null?void 0:te.baseParams)==null?void 0:oe[N]},C=(b,N,Z)=>{var me,_e,Ne,Be,it,ft,ut,ct;const te=x(b,N),oe=he(X({},vt),{value:te==null?void 0:te.value}),fe=X(X(X({},oe),(_e=(me=u[b])==null?void 0:me.parameters)==null?void 0:_e[N]),Z);if(tt(fe,oe)){const at=(Be=(Ne=u[b])==null?void 0:Ne.parameters)!=null?Be:{},{[N]:co}=at,bn=_t(at,[mt(N)]);return he(X({},u[b]),{parameters:bn})}return((ut=(ft=(it=u[b])==null?void 0:it.parameters)==null?void 0:ft[N])==null?void 0:ut.value)!==(Z==null?void 0:Z.value)&&(fe.visible=!0),t==null||t.dispatchEvent(new CustomEvent("update:job",{detail:{id:b}})),he(X({},u[b]),{parameters:he(X({},(ct=u[b])==null?void 0:ct.parameters),{[N]:X({},fe)})})},U=(b,N)=>{var te,oe,fe,me,_e;const Z=!((_e=(oe=(te=u[b])==null?void 0:te.parameters[N])==null?void 0:oe.visible)!=null?_e:(me=(fe=f.jobs[b])==null?void 0:fe.parameters[N])==null?void 0:me.visible);s(22,u[b]=C(b,N,he(X({},Z===!1&&{locked:!1,flagged:!1,notes:""}),{visible:Z})),u)},Y=(b,N)=>{var te,oe,fe,me,_e;const Z=!((_e=(oe=(te=u[b])==null?void 0:te.parameters[N])==null?void 0:oe.locked)!=null?_e:(me=(fe=f.jobs[b])==null?void 0:fe.parameters[N])==null?void 0:me.locked);s(22,u[b]=C(b,N,he(X({},Z===!0&&{visible:!0}),{locked:Z})),u)},K=(b,N)=>{var te,oe,fe,me,_e,Ne;const Z=!((_e=(oe=(te=u[b])==null?void 0:te.parameters[N])==null?void 0:oe.flagged)!=null?_e:(me=(fe=f.jobs[b])==null?void 0:fe.parameters[N])==null?void 0:me.flagged);s(22,u[b]=C(b,N,he(X({},Z===!0&&{visible:!0}),{flagged:Z})),u),t==null||t.dispatchEvent(new CustomEvent("update:flagged",{detail:{id:b,flagged:Object.values((Ne=u[b])==null?void 0:Ne.parameters).some(Be=>Be.flagged)}}))},L=(b,N,Z)=>{s(22,u[b]=C(b,N,{notes:Z}),u)},le=(b,N,Z)=>{s(22,u[b]=he(X({},u[b]),{[N]:Z}),u)},T=b=>{const{id:N,name:Z,value:te}=b.detail,oe=x(N,Z),fe=(oe==null?void 0:oe.type)==="number"?Dn(te):te;s(22,u[N]=C(N,Z,{value:fe}),u)},M=b=>{var te;b.preventDefault();const N=(te=b.submitter)==null?void 0:te.id;if(w.length)return console.error("Cannot create workflow with restricted jobs present: ",w.join(", "));const Z=he(X({},Pt(f,u)),{title:G,category:R,description:z});switch(N){case"confirm":c("confirm",{workflow:Z});break;case"secondary":c("secondary",{workflow:Z});break}};On("workflow",{type:"edit",updates:{subscribe:H.subscribe}}),wt(()=>{s(2,_=Un(f.jobs)),s(7,w=zn(f.jobs)),s(8,S=Ln(f.jobs)),s(4,g=Pt(f,u)),et("/api/actions/workflows/categories").then(b=>{s(3,p=b)})});const re=()=>c("cancel");function ee(b){G=b,s(9,G)}function ne(b){R=b,s(10,R)}const j=b=>{s(10,R=b),m()};function D(b){h=b,s(5,h)}function pe(b){m=b,s(6,m)}const Oe=b=>{b.preventDefault(),h(b)},ge=b=>{s(11,z=b.detail)},Ve=(b,N)=>le(b,"title",N.detail),Je=(b,N)=>le(b,"description",N.detail),dn=b=>T(b),pn=(b,N)=>U(b,N),gn=(b,N)=>Y(b,N),mn=(b,N)=>K(b,N),_n=(b,N,{detail:Z})=>L(b,N,Z);function hn(b){d=b,i(s(0,d))}return o.$$set=b=>{"workflow"in b&&s(1,f=b.workflow),"updates"in b&&s(22,u=b.updates),"bus"in b&&i(s(0,d=b.bus)),"$$scope"in b&&s(40,l=b.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&4194304&&H.set(u)},[d,f,_,p,g,h,m,w,S,G,R,z,c,E,U,Y,K,L,le,T,M,r,u,a,re,ee,ne,j,D,pe,Oe,ge,Ve,Je,dn,pn,gn,mn,_n,hn,l]}class So extends ke{constructor(e){super();ve(this,e,uo,fo,je,{workflow:1,updates:22,bus:0},null,[-1,-1,-1])}}export{So as M,Jo as a,as as b,Vo as r};
